var DWe=Object.defineProperty;var MWe=(e,t,n)=>t in e?DWe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var LWe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nl=(e,t,n)=>(MWe(e,typeof t!="symbol"?t+"":t,n),n);var qCn=LWe((uIn,qie)=>{function FWe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rwe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var $we={exports:{}},w6={},Nwe={exports:{}},Vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI=Symbol.for("react.element"),jWe=Symbol.for("react.portal"),BWe=Symbol.for("react.fragment"),zWe=Symbol.for("react.strict_mode"),UWe=Symbol.for("react.profiler"),VWe=Symbol.for("react.provider"),HWe=Symbol.for("react.context"),qWe=Symbol.for("react.forward_ref"),WWe=Symbol.for("react.suspense"),GWe=Symbol.for("react.memo"),YWe=Symbol.for("react.lazy"),cse=Symbol.iterator;function KWe(e){return e===null||typeof e!="object"?null:(e=cse&&e[cse]||e["@@iterator"],typeof e=="function"?e:null)}var Dwe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mwe=Object.assign,Lwe={};function ox(e,t,n){this.props=e,this.context=t,this.refs=Lwe,this.updater=n||Dwe}ox.prototype.isReactComponent={};ox.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ox.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fwe(){}Fwe.prototype=ox.prototype;function tG(e,t,n){this.props=e,this.context=t,this.refs=Lwe,this.updater=n||Dwe}var nG=tG.prototype=new Fwe;nG.constructor=tG;Mwe(nG,ox.prototype);nG.isPureReactComponent=!0;var fse=Array.isArray,jwe=Object.prototype.hasOwnProperty,rG={current:null},Bwe={key:!0,ref:!0,__self:!0,__source:!0};function zwe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)jwe.call(t,r)&&!Bwe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nI,type:e,key:s,ref:o,props:i,_owner:rG.current}}function XWe(e,t){return{$$typeof:nI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function iG(e){return typeof e=="object"&&e!==null&&e.$$typeof===nI}function QWe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dse=/\/+/g;function rj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QWe(""+e.key):t.toString(36)}function hR(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case nI:case jWe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+rj(o,0):r,fse(i)?(n="",e!=null&&(n=e.replace(dse,"$&/")+"/"),hR(i,t,n,"",function(l){return l})):i!=null&&(iG(i)&&(i=XWe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dse,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",fse(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+rj(s,a);o+=hR(s,t,n,u,i)}else if(u=KWe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+rj(s,a++),o+=hR(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function uP(e,t,n){if(e==null)return e;var r=[],i=0;return hR(e,r,"","",function(s){return t.call(n,s,i++)}),r}function JWe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nu={current:null},pR={transition:null},ZWe={ReactCurrentDispatcher:nu,ReactCurrentBatchConfig:pR,ReactCurrentOwner:rG};function Uwe(){throw Error("act(...) is not supported in production builds of React.")}Vn.Children={map:uP,forEach:function(e,t,n){uP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return uP(e,function(){t++}),t},toArray:function(e){return uP(e,function(t){return t})||[]},only:function(e){if(!iG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Vn.Component=ox;Vn.Fragment=BWe;Vn.Profiler=UWe;Vn.PureComponent=tG;Vn.StrictMode=zWe;Vn.Suspense=WWe;Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZWe;Vn.act=Uwe;Vn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Mwe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=rG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)jwe.call(t,u)&&!Bwe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:nI,type:e.type,key:i,ref:s,props:r,_owner:o}};Vn.createContext=function(e){return e={$$typeof:HWe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:VWe,_context:e},e.Consumer=e};Vn.createElement=zwe;Vn.createFactory=function(e){var t=zwe.bind(null,e);return t.type=e,t};Vn.createRef=function(){return{current:null}};Vn.forwardRef=function(e){return{$$typeof:qWe,render:e}};Vn.isValidElement=iG;Vn.lazy=function(e){return{$$typeof:YWe,_payload:{_status:-1,_result:e},_init:JWe}};Vn.memo=function(e,t){return{$$typeof:GWe,type:e,compare:t===void 0?null:t}};Vn.startTransition=function(e){var t=pR.transition;pR.transition={};try{e()}finally{pR.transition=t}};Vn.unstable_act=Uwe;Vn.useCallback=function(e,t){return nu.current.useCallback(e,t)};Vn.useContext=function(e){return nu.current.useContext(e)};Vn.useDebugValue=function(){};Vn.useDeferredValue=function(e){return nu.current.useDeferredValue(e)};Vn.useEffect=function(e,t){return nu.current.useEffect(e,t)};Vn.useId=function(){return nu.current.useId()};Vn.useImperativeHandle=function(e,t,n){return nu.current.useImperativeHandle(e,t,n)};Vn.useInsertionEffect=function(e,t){return nu.current.useInsertionEffect(e,t)};Vn.useLayoutEffect=function(e,t){return nu.current.useLayoutEffect(e,t)};Vn.useMemo=function(e,t){return nu.current.useMemo(e,t)};Vn.useReducer=function(e,t,n){return nu.current.useReducer(e,t,n)};Vn.useRef=function(e){return nu.current.useRef(e)};Vn.useState=function(e){return nu.current.useState(e)};Vn.useSyncExternalStore=function(e,t,n){return nu.current.useSyncExternalStore(e,t,n)};Vn.useTransition=function(){return nu.current.useTransition()};Vn.version="18.3.1";Nwe.exports=Vn;var C=Nwe.exports;const z=Qu(C),gC=FWe({__proto__:null,default:z},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eGe=C,tGe=Symbol.for("react.element"),nGe=Symbol.for("react.fragment"),rGe=Object.prototype.hasOwnProperty,iGe=eGe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sGe={key:!0,ref:!0,__self:!0,__source:!0};function Vwe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)rGe.call(t,r)&&!sGe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:tGe,type:e,key:s,ref:o,props:i,_owner:iGe.current}}w6.Fragment=nGe;w6.jsx=Vwe;w6.jsxs=Vwe;$we.exports=w6;var $=$we.exports,pz={},Hwe={exports:{}},Bl={},qwe={exports:{}},Wwe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,G){var M=V.length;V.push(G);e:for(;0<M;){var H=M-1>>>1,Y=V[H];if(0<i(Y,G))V[H]=G,V[M]=Y,M=H;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var G=V[0],M=V.pop();if(M!==G){V[0]=M;e:for(var H=0,Y=V.length,L=Y>>>1;H<L;){var j=2*(H+1)-1,q=V[j],Z=j+1,ue=V[Z];if(0>i(q,M))Z<Y&&0>i(ue,q)?(V[H]=ue,V[Z]=M,H=Z):(V[H]=q,V[j]=M,H=j);else if(Z<Y&&0>i(ue,M))V[H]=ue,V[Z]=M,H=Z;else break e}}return G}function i(V,G){var M=V.sortIndex-G.sortIndex;return M!==0?M:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=V)r(l),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(l)}}function w(V){if(m=!1,_(V),!p)if(n(u)!==null)p=!0,B(S);else{var G=n(l);G!==null&&W(w,G.startTime-V)}}function S(V,G){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var M=d;try{for(_(G),f=n(u);f!==null&&(!(f.expirationTime>G)||V&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,d=f.priorityLevel;var Y=H(f.expirationTime<=G);G=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(u)&&r(u),_(G)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var j=n(l);j!==null&&W(w,j.startTime-G),L=!1}return L}finally{f=null,d=M,h=!1}}var x=!1,b=null,T=-1,A=5,I=-1;function k(){return!(e.unstable_now()-I<A)}function R(){if(b!==null){var V=e.unstable_now();I=V;var G=!0;try{G=b(!0,V)}finally{G?P():(x=!1,b=null)}}else x=!1}var P;if(typeof v=="function")P=function(){v(R)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,F=N.port2;N.port1.onmessage=R,P=function(){F.postMessage(null)}}else P=function(){g(R,0)};function B(V){b=V,x||(x=!0,P())}function W(V,G){T=g(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(S))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(V){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var M=d;d=G;try{return V()}finally{d=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var M=d;d=V;try{return G()}finally{d=M}},e.unstable_scheduleCallback=function(V,G,M){var H=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=M+Y,V={id:c++,callback:G,priorityLevel:V,startTime:M,expirationTime:Y,sortIndex:-1},M>H?(V.sortIndex=M,t(l,V),n(u)===null&&V===n(l)&&(m?(y(T),T=-1):m=!0,W(w,M-H))):(V.sortIndex=Y,t(u,V),p||h||(p=!0,B(S))),V},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(V){var G=d;return function(){var M=d;d=G;try{return V.apply(this,arguments)}finally{d=M}}}})(Wwe);qwe.exports=Wwe;var oGe=qwe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aGe=C,Ol=oGe;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gwe=new Set,yC={};function o_(e,t){Uw(e,t),Uw(e+"Capture",t)}function Uw(e,t){for(yC[e]=t,e=0;e<t.length;e++)Gwe.add(t[e])}var im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mz=Object.prototype.hasOwnProperty,uGe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hse={},pse={};function lGe(e){return mz.call(pse,e)?!0:mz.call(hse,e)?!1:uGe.test(e)?pse[e]=!0:(hse[e]=!0,!1)}function cGe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fGe(e,t,n,r){if(t===null||typeof t>"u"||cGe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ru(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new ru(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new ru(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new ru(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new ru(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new ru(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new ru(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new ru(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new ru(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new ru(e,5,!1,e.toLowerCase(),null,!1,!1)});var sG=/[\-:]([a-z])/g;function oG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(sG,oG);Lo[t]=new ru(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(sG,oG);Lo[t]=new ru(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(sG,oG);Lo[t]=new ru(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new ru(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new ru("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new ru(e,1,!1,e.toLowerCase(),null,!0,!0)});function aG(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fGe(t,n,i,r)&&(n=null),r||i===null?lGe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var km=aGe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lP=Symbol.for("react.element"),Ob=Symbol.for("react.portal"),Pb=Symbol.for("react.fragment"),uG=Symbol.for("react.strict_mode"),gz=Symbol.for("react.profiler"),Ywe=Symbol.for("react.provider"),Kwe=Symbol.for("react.context"),lG=Symbol.for("react.forward_ref"),yz=Symbol.for("react.suspense"),vz=Symbol.for("react.suspense_list"),cG=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),Xwe=Symbol.for("react.offscreen"),mse=Symbol.iterator;function ES(e){return e===null||typeof e!="object"?null:(e=mse&&e[mse]||e["@@iterator"],typeof e=="function"?e:null)}var Ui=Object.assign,ij;function AT(e){if(ij===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ij=t&&t[1]||""}return`
`+ij+e}var sj=!1;function oj(e,t){if(!e||sj)return"";sj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{sj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?AT(e):""}function dGe(e){switch(e.tag){case 5:return AT(e.type);case 16:return AT("Lazy");case 13:return AT("Suspense");case 19:return AT("SuspenseList");case 0:case 2:case 15:return e=oj(e.type,!1),e;case 11:return e=oj(e.type.render,!1),e;case 1:return e=oj(e.type,!0),e;default:return""}}function _z(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pb:return"Fragment";case Ob:return"Portal";case gz:return"Profiler";case uG:return"StrictMode";case yz:return"Suspense";case vz:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kwe:return(e.displayName||"Context")+".Consumer";case Ywe:return(e._context.displayName||"Context")+".Provider";case lG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cG:return t=e.displayName||null,t!==null?t:_z(e.type)||"Memo";case Eg:t=e._payload,e=e._init;try{return _z(e(t))}catch{}}return null}function hGe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _z(t);case 8:return t===uG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function A0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qwe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pGe(e){var t=Qwe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cP(e){e._valueTracker||(e._valueTracker=pGe(e))}function Jwe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qwe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function B$(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bz(e,t){var n=t.checked;return Ui({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gse(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=A0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zwe(e,t){t=t.checked,t!=null&&aG(e,"checked",t,!1)}function wz(e,t){Zwe(e,t);var n=A0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ez(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ez(e,t.type,A0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yse(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ez(e,t,n){(t!=="number"||B$(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var IT=Array.isArray;function rw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+A0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xz(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Ui({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vse(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(IT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:A0(n)}}function eEe(e,t){var n=A0(t.value),r=A0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _se(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tEe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sz(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tEe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fP,nEe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fP=fP||document.createElement("div"),fP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var y2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mGe=["Webkit","ms","Moz","O"];Object.keys(y2).forEach(function(e){mGe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),y2[t]=y2[e]})});function rEe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||y2.hasOwnProperty(e)&&y2[e]?(""+t).trim():t+"px"}function iEe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rEe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var gGe=Ui({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tz(e,t){if(t){if(gGe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function Cz(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Az=null;function fG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Iz=null,iw=null,sw=null;function bse(e){if(e=sI(e)){if(typeof Iz!="function")throw Error(et(280));var t=e.stateNode;t&&(t=C6(t),Iz(e.stateNode,e.type,t))}}function sEe(e){iw?sw?sw.push(e):sw=[e]:iw=e}function oEe(){if(iw){var e=iw,t=sw;if(sw=iw=null,bse(e),t)for(e=0;e<t.length;e++)bse(t[e])}}function aEe(e,t){return e(t)}function uEe(){}var aj=!1;function lEe(e,t,n){if(aj)return e(t,n);aj=!0;try{return aEe(e,t,n)}finally{aj=!1,(iw!==null||sw!==null)&&(uEe(),oEe())}}function _C(e,t){var n=e.stateNode;if(n===null)return null;var r=C6(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var Oz=!1;if(im)try{var xS={};Object.defineProperty(xS,"passive",{get:function(){Oz=!0}}),window.addEventListener("test",xS,xS),window.removeEventListener("test",xS,xS)}catch{Oz=!1}function yGe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var v2=!1,z$=null,U$=!1,Pz=null,vGe={onError:function(e){v2=!0,z$=e}};function _Ge(e,t,n,r,i,s,o,a,u){v2=!1,z$=null,yGe.apply(vGe,arguments)}function bGe(e,t,n,r,i,s,o,a,u){if(_Ge.apply(this,arguments),v2){if(v2){var l=z$;v2=!1,z$=null}else throw Error(et(198));U$||(U$=!0,Pz=l)}}function a_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cEe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wse(e){if(a_(e)!==e)throw Error(et(188))}function wGe(e){var t=e.alternate;if(!t){if(t=a_(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return wse(i),e;if(s===r)return wse(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function fEe(e){return e=wGe(e),e!==null?dEe(e):null}function dEe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dEe(e);if(t!==null)return t;e=e.sibling}return null}var hEe=Ol.unstable_scheduleCallback,Ese=Ol.unstable_cancelCallback,EGe=Ol.unstable_shouldYield,xGe=Ol.unstable_requestPaint,as=Ol.unstable_now,SGe=Ol.unstable_getCurrentPriorityLevel,dG=Ol.unstable_ImmediatePriority,pEe=Ol.unstable_UserBlockingPriority,V$=Ol.unstable_NormalPriority,TGe=Ol.unstable_LowPriority,mEe=Ol.unstable_IdlePriority,E6=null,Xd=null;function CGe(e){if(Xd&&typeof Xd.onCommitFiberRoot=="function")try{Xd.onCommitFiberRoot(E6,e,void 0,(e.current.flags&128)===128)}catch{}}var Sf=Math.clz32?Math.clz32:OGe,AGe=Math.log,IGe=Math.LN2;function OGe(e){return e>>>=0,e===0?32:31-(AGe(e)/IGe|0)|0}var dP=64,hP=4194304;function OT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function H$(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=OT(a):(s&=o,s!==0&&(r=OT(s)))}else o=n&~i,o!==0?r=OT(o):s!==0&&(r=OT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sf(t),i=1<<n,r|=e[n],t&=~i;return r}function PGe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kGe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Sf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=PGe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function kz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gEe(){var e=dP;return dP<<=1,!(dP&4194240)&&(dP=64),e}function uj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function rI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sf(t),e[t]=n}function RGe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Sf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function hG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var jr=0;function yEe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vEe,pG,_Ee,bEe,wEe,Rz=!1,pP=[],n0=null,r0=null,i0=null,bC=new Map,wC=new Map,kg=[],$Ge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xse(e,t){switch(e){case"focusin":case"focusout":n0=null;break;case"dragenter":case"dragleave":r0=null;break;case"mouseover":case"mouseout":i0=null;break;case"pointerover":case"pointerout":bC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wC.delete(t.pointerId)}}function SS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=sI(t),t!==null&&pG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function NGe(e,t,n,r,i){switch(t){case"focusin":return n0=SS(n0,e,t,n,r,i),!0;case"dragenter":return r0=SS(r0,e,t,n,r,i),!0;case"mouseover":return i0=SS(i0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return bC.set(s,SS(bC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wC.set(s,SS(wC.get(s)||null,e,t,n,r,i)),!0}return!1}function EEe(e){var t=$v(e.target);if(t!==null){var n=a_(t);if(n!==null){if(t=n.tag,t===13){if(t=cEe(n),t!==null){e.blockedOn=t,wEe(e.priority,function(){_Ee(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function mR(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$z(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Az=r,n.target.dispatchEvent(r),Az=null}else return t=sI(n),t!==null&&pG(t),e.blockedOn=n,!1;t.shift()}return!0}function Sse(e,t,n){mR(e)&&n.delete(t)}function DGe(){Rz=!1,n0!==null&&mR(n0)&&(n0=null),r0!==null&&mR(r0)&&(r0=null),i0!==null&&mR(i0)&&(i0=null),bC.forEach(Sse),wC.forEach(Sse)}function TS(e,t){e.blockedOn===t&&(e.blockedOn=null,Rz||(Rz=!0,Ol.unstable_scheduleCallback(Ol.unstable_NormalPriority,DGe)))}function EC(e){function t(i){return TS(i,e)}if(0<pP.length){TS(pP[0],e);for(var n=1;n<pP.length;n++){var r=pP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(n0!==null&&TS(n0,e),r0!==null&&TS(r0,e),i0!==null&&TS(i0,e),bC.forEach(t),wC.forEach(t),n=0;n<kg.length;n++)r=kg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kg.length&&(n=kg[0],n.blockedOn===null);)EEe(n),n.blockedOn===null&&kg.shift()}var ow=km.ReactCurrentBatchConfig,q$=!0;function MGe(e,t,n,r){var i=jr,s=ow.transition;ow.transition=null;try{jr=1,mG(e,t,n,r)}finally{jr=i,ow.transition=s}}function LGe(e,t,n,r){var i=jr,s=ow.transition;ow.transition=null;try{jr=4,mG(e,t,n,r)}finally{jr=i,ow.transition=s}}function mG(e,t,n,r){if(q$){var i=$z(e,t,n,r);if(i===null)vj(e,t,r,W$,n),xse(e,r);else if(NGe(i,e,t,n,r))r.stopPropagation();else if(xse(e,r),t&4&&-1<$Ge.indexOf(e)){for(;i!==null;){var s=sI(i);if(s!==null&&vEe(s),s=$z(e,t,n,r),s===null&&vj(e,t,r,W$,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vj(e,t,r,null,n)}}var W$=null;function $z(e,t,n,r){if(W$=null,e=fG(r),e=$v(e),e!==null)if(t=a_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cEe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return W$=e,null}function xEe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SGe()){case dG:return 1;case pEe:return 4;case V$:case TGe:return 16;case mEe:return 536870912;default:return 16}default:return 16}}var jg=null,gG=null,gR=null;function SEe(){if(gR)return gR;var e,t=gG,n=t.length,r,i="value"in jg?jg.value:jg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return gR=i.slice(e,1<r?1-r:void 0)}function yR(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mP(){return!0}function Tse(){return!1}function zl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mP:Tse,this.isPropagationStopped=Tse,this}return Ui(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mP)},persist:function(){},isPersistent:mP}),t}var ax={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yG=zl(ax),iI=Ui({},ax,{view:0,detail:0}),FGe=zl(iI),lj,cj,CS,x6=Ui({},iI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==CS&&(CS&&e.type==="mousemove"?(lj=e.screenX-CS.screenX,cj=e.screenY-CS.screenY):cj=lj=0,CS=e),lj)},movementY:function(e){return"movementY"in e?e.movementY:cj}}),Cse=zl(x6),jGe=Ui({},x6,{dataTransfer:0}),BGe=zl(jGe),zGe=Ui({},iI,{relatedTarget:0}),fj=zl(zGe),UGe=Ui({},ax,{animationName:0,elapsedTime:0,pseudoElement:0}),VGe=zl(UGe),HGe=Ui({},ax,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qGe=zl(HGe),WGe=Ui({},ax,{data:0}),Ase=zl(WGe),GGe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YGe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KGe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XGe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=KGe[e])?!!t[e]:!1}function vG(){return XGe}var QGe=Ui({},iI,{key:function(e){if(e.key){var t=GGe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yR(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YGe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vG,charCode:function(e){return e.type==="keypress"?yR(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yR(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),JGe=zl(QGe),ZGe=Ui({},x6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ise=zl(ZGe),eYe=Ui({},iI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vG}),tYe=zl(eYe),nYe=Ui({},ax,{propertyName:0,elapsedTime:0,pseudoElement:0}),rYe=zl(nYe),iYe=Ui({},x6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sYe=zl(iYe),oYe=[9,13,27,32],_G=im&&"CompositionEvent"in window,_2=null;im&&"documentMode"in document&&(_2=document.documentMode);var aYe=im&&"TextEvent"in window&&!_2,TEe=im&&(!_G||_2&&8<_2&&11>=_2),Ose=" ",Pse=!1;function CEe(e,t){switch(e){case"keyup":return oYe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AEe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kb=!1;function uYe(e,t){switch(e){case"compositionend":return AEe(t);case"keypress":return t.which!==32?null:(Pse=!0,Ose);case"textInput":return e=t.data,e===Ose&&Pse?null:e;default:return null}}function lYe(e,t){if(kb)return e==="compositionend"||!_G&&CEe(e,t)?(e=SEe(),gR=gG=jg=null,kb=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TEe&&t.locale!=="ko"?null:t.data;default:return null}}var cYe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cYe[e.type]:t==="textarea"}function IEe(e,t,n,r){sEe(r),t=G$(t,"onChange"),0<t.length&&(n=new yG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var b2=null,xC=null;function fYe(e){jEe(e,0)}function S6(e){var t=Nb(e);if(Jwe(t))return e}function dYe(e,t){if(e==="change")return t}var OEe=!1;if(im){var dj;if(im){var hj="oninput"in document;if(!hj){var Rse=document.createElement("div");Rse.setAttribute("oninput","return;"),hj=typeof Rse.oninput=="function"}dj=hj}else dj=!1;OEe=dj&&(!document.documentMode||9<document.documentMode)}function $se(){b2&&(b2.detachEvent("onpropertychange",PEe),xC=b2=null)}function PEe(e){if(e.propertyName==="value"&&S6(xC)){var t=[];IEe(t,xC,e,fG(e)),lEe(fYe,t)}}function hYe(e,t,n){e==="focusin"?($se(),b2=t,xC=n,b2.attachEvent("onpropertychange",PEe)):e==="focusout"&&$se()}function pYe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return S6(xC)}function mYe(e,t){if(e==="click")return S6(t)}function gYe(e,t){if(e==="input"||e==="change")return S6(t)}function yYe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nf=typeof Object.is=="function"?Object.is:yYe;function SC(e,t){if(Nf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mz.call(t,i)||!Nf(e[i],t[i]))return!1}return!0}function Nse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dse(e,t){var n=Nse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nse(n)}}function kEe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kEe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function REe(){for(var e=window,t=B$();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=B$(e.document)}return t}function bG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vYe(e){var t=REe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kEe(n.ownerDocument.documentElement,n)){if(r!==null&&bG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Dse(n,s);var o=Dse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _Ye=im&&"documentMode"in document&&11>=document.documentMode,Rb=null,Nz=null,w2=null,Dz=!1;function Mse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dz||Rb==null||Rb!==B$(r)||(r=Rb,"selectionStart"in r&&bG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),w2&&SC(w2,r)||(w2=r,r=G$(Nz,"onSelect"),0<r.length&&(t=new yG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rb)))}function gP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $b={animationend:gP("Animation","AnimationEnd"),animationiteration:gP("Animation","AnimationIteration"),animationstart:gP("Animation","AnimationStart"),transitionend:gP("Transition","TransitionEnd")},pj={},$Ee={};im&&($Ee=document.createElement("div").style,"AnimationEvent"in window||(delete $b.animationend.animation,delete $b.animationiteration.animation,delete $b.animationstart.animation),"TransitionEvent"in window||delete $b.transitionend.transition);function T6(e){if(pj[e])return pj[e];if(!$b[e])return e;var t=$b[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $Ee)return pj[e]=t[n];return e}var NEe=T6("animationend"),DEe=T6("animationiteration"),MEe=T6("animationstart"),LEe=T6("transitionend"),FEe=new Map,Lse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function py(e,t){FEe.set(e,t),o_(t,[e])}for(var mj=0;mj<Lse.length;mj++){var gj=Lse[mj],bYe=gj.toLowerCase(),wYe=gj[0].toUpperCase()+gj.slice(1);py(bYe,"on"+wYe)}py(NEe,"onAnimationEnd");py(DEe,"onAnimationIteration");py(MEe,"onAnimationStart");py("dblclick","onDoubleClick");py("focusin","onFocus");py("focusout","onBlur");py(LEe,"onTransitionEnd");Uw("onMouseEnter",["mouseout","mouseover"]);Uw("onMouseLeave",["mouseout","mouseover"]);Uw("onPointerEnter",["pointerout","pointerover"]);Uw("onPointerLeave",["pointerout","pointerover"]);o_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));o_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));o_("onBeforeInput",["compositionend","keypress","textInput","paste"]);o_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));o_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));o_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var PT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EYe=new Set("cancel close invalid load scroll toggle".split(" ").concat(PT));function Fse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,bGe(r,t,void 0,e),e.currentTarget=null}function jEe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Fse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Fse(i,a,l),s=u}}}if(U$)throw e=Pz,U$=!1,Pz=null,e}function gi(e,t){var n=t[Bz];n===void 0&&(n=t[Bz]=new Set);var r=e+"__bubble";n.has(r)||(BEe(t,e,2,!1),n.add(r))}function yj(e,t,n){var r=0;t&&(r|=4),BEe(n,e,r,t)}var yP="_reactListening"+Math.random().toString(36).slice(2);function TC(e){if(!e[yP]){e[yP]=!0,Gwe.forEach(function(n){n!=="selectionchange"&&(EYe.has(n)||yj(n,!1,e),yj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yP]||(t[yP]=!0,yj("selectionchange",!1,t))}}function BEe(e,t,n,r){switch(xEe(t)){case 1:var i=MGe;break;case 4:i=LGe;break;default:i=mG}n=i.bind(null,t,n,e),i=void 0,!Oz||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function vj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$v(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}lEe(function(){var l=s,c=fG(n),f=[];e:{var d=FEe.get(e);if(d!==void 0){var h=yG,p=e;switch(e){case"keypress":if(yR(n)===0)break e;case"keydown":case"keyup":h=JGe;break;case"focusin":p="focus",h=fj;break;case"focusout":p="blur",h=fj;break;case"beforeblur":case"afterblur":h=fj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Cse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=BGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=tYe;break;case NEe:case DEe:case MEe:h=VGe;break;case LEe:h=rYe;break;case"scroll":h=FGe;break;case"wheel":h=sYe;break;case"copy":case"cut":case"paste":h=qGe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ise}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=_C(v,y),w!=null&&m.push(CC(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Az&&(p=n.relatedTarget||n.fromElement)&&($v(p)||p[sm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?$v(p):null,p!==null&&(g=a_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Cse,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Ise,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Nb(h),_=p==null?d:Nb(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,$v(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=q_(_))v++;for(_=0,w=y;w;w=q_(w))_++;for(;0<v-_;)m=q_(m),v--;for(;0<_-v;)y=q_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=q_(m),y=q_(y)}m=null}else m=null;h!==null&&jse(f,d,h,m,!1),p!==null&&g!==null&&jse(f,g,p,m,!0)}}e:{if(d=l?Nb(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=dYe;else if(kse(d))if(OEe)S=gYe;else{S=pYe;var x=hYe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=mYe);if(S&&(S=S(e,l))){IEe(f,S,n,c);break e}x&&x(e,d,l),e==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&Ez(d,"number",d.value)}switch(x=l?Nb(l):window,e){case"focusin":(kse(x)||x.contentEditable==="true")&&(Rb=x,Nz=l,w2=null);break;case"focusout":w2=Nz=Rb=null;break;case"mousedown":Dz=!0;break;case"contextmenu":case"mouseup":case"dragend":Dz=!1,Mse(f,n,c);break;case"selectionchange":if(_Ye)break;case"keydown":case"keyup":Mse(f,n,c)}var b;if(_G)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else kb?CEe(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(TEe&&n.locale!=="ko"&&(kb||T!=="onCompositionStart"?T==="onCompositionEnd"&&kb&&(b=SEe()):(jg=c,gG="value"in jg?jg.value:jg.textContent,kb=!0)),x=G$(l,T),0<x.length&&(T=new Ase(T,e,null,n,c),f.push({event:T,listeners:x}),b?T.data=b:(b=AEe(n),b!==null&&(T.data=b)))),(b=aYe?uYe(e,n):lYe(e,n))&&(l=G$(l,"onBeforeInput"),0<l.length&&(c=new Ase("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=b))}jEe(f,t)})}function CC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function G$(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_C(e,n),s!=null&&r.unshift(CC(e,s,i)),s=_C(e,t),s!=null&&r.push(CC(e,s,i))),e=e.return}return r}function q_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=_C(n,s),u!=null&&o.unshift(CC(n,u,a))):i||(u=_C(n,s),u!=null&&o.push(CC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xYe=/\r\n?/g,SYe=/\u0000|\uFFFD/g;function Bse(e){return(typeof e=="string"?e:""+e).replace(xYe,`
`).replace(SYe,"")}function vP(e,t,n){if(t=Bse(t),Bse(e)!==t&&n)throw Error(et(425))}function Y$(){}var Mz=null,Lz=null;function Fz(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jz=typeof setTimeout=="function"?setTimeout:void 0,TYe=typeof clearTimeout=="function"?clearTimeout:void 0,zse=typeof Promise=="function"?Promise:void 0,CYe=typeof queueMicrotask=="function"?queueMicrotask:typeof zse<"u"?function(e){return zse.resolve(null).then(e).catch(AYe)}:jz;function AYe(e){setTimeout(function(){throw e})}function _j(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),EC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);EC(t)}function s0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Use(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ux=Math.random().toString(36).slice(2),Id="__reactFiber$"+ux,AC="__reactProps$"+ux,sm="__reactContainer$"+ux,Bz="__reactEvents$"+ux,IYe="__reactListeners$"+ux,OYe="__reactHandles$"+ux;function $v(e){var t=e[Id];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sm]||n[Id]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Use(e);e!==null;){if(n=e[Id])return n;e=Use(e)}return t}e=n,n=e.parentNode}return null}function sI(e){return e=e[Id]||e[sm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nb(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function C6(e){return e[AC]||null}var zz=[],Db=-1;function my(e){return{current:e}}function xi(e){0>Db||(e.current=zz[Db],zz[Db]=null,Db--)}function fi(e,t){Db++,zz[Db]=e.current,e.current=t}var I0={},wa=my(I0),$u=my(!1),y1=I0;function Vw(e,t){var n=e.type.contextTypes;if(!n)return I0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nu(e){return e=e.childContextTypes,e!=null}function K$(){xi($u),xi(wa)}function Vse(e,t,n){if(wa.current!==I0)throw Error(et(168));fi(wa,t),fi($u,n)}function zEe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,hGe(e)||"Unknown",i));return Ui({},n,r)}function X$(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||I0,y1=wa.current,fi(wa,e),fi($u,$u.current),!0}function Hse(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=zEe(e,t,y1),r.__reactInternalMemoizedMergedChildContext=e,xi($u),xi(wa),fi(wa,e)):xi($u),fi($u,n)}var _p=null,A6=!1,bj=!1;function UEe(e){_p===null?_p=[e]:_p.push(e)}function PYe(e){A6=!0,UEe(e)}function gy(){if(!bj&&_p!==null){bj=!0;var e=0,t=jr;try{var n=_p;for(jr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_p=null,A6=!1}catch(i){throw _p!==null&&(_p=_p.slice(e+1)),hEe(dG,gy),i}finally{jr=t,bj=!1}}return null}var Mb=[],Lb=0,Q$=null,J$=0,ec=[],tc=0,v1=null,kp=1,Rp="";function iv(e,t){Mb[Lb++]=J$,Mb[Lb++]=Q$,Q$=e,J$=t}function VEe(e,t,n){ec[tc++]=kp,ec[tc++]=Rp,ec[tc++]=v1,v1=e;var r=kp;e=Rp;var i=32-Sf(r)-1;r&=~(1<<i),n+=1;var s=32-Sf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,kp=1<<32-Sf(t)+i|n<<i|r,Rp=s+e}else kp=1<<s|n<<i|r,Rp=e}function wG(e){e.return!==null&&(iv(e,1),VEe(e,1,0))}function EG(e){for(;e===Q$;)Q$=Mb[--Lb],Mb[Lb]=null,J$=Mb[--Lb],Mb[Lb]=null;for(;e===v1;)v1=ec[--tc],ec[tc]=null,Rp=ec[--tc],ec[tc]=null,kp=ec[--tc],ec[tc]=null}var El=null,ml=null,Ri=!1,uf=null;function HEe(e,t){var n=lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,El=e,ml=s0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,El=e,ml=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=v1!==null?{id:kp,overflow:Rp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=lc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,El=e,ml=null,!0):!1;default:return!1}}function Uz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vz(e){if(Ri){var t=ml;if(t){var n=t;if(!qse(e,t)){if(Uz(e))throw Error(et(418));t=s0(n.nextSibling);var r=El;t&&qse(e,t)?HEe(r,n):(e.flags=e.flags&-4097|2,Ri=!1,El=e)}}else{if(Uz(e))throw Error(et(418));e.flags=e.flags&-4097|2,Ri=!1,El=e}}}function Wse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;El=e}function _P(e){if(e!==El)return!1;if(!Ri)return Wse(e),Ri=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fz(e.type,e.memoizedProps)),t&&(t=ml)){if(Uz(e))throw qEe(),Error(et(418));for(;t;)HEe(e,t),t=s0(t.nextSibling)}if(Wse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ml=s0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ml=null}}else ml=El?s0(e.stateNode.nextSibling):null;return!0}function qEe(){for(var e=ml;e;)e=s0(e.nextSibling)}function Hw(){ml=El=null,Ri=!1}function xG(e){uf===null?uf=[e]:uf.push(e)}var kYe=km.ReactCurrentBatchConfig;function AS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function bP(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gse(e){var t=e._init;return t(e._payload)}function WEe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=l0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=Aj(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var S=_.type;return S===Pb?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Eg&&Gse(S)===v.type)?(w=i(v,_.props),w.ref=AS(y,v,_),w.return=y,w):(w=SR(_.type,_.key,_.props,null,y.mode,w),w.ref=AS(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Ij(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,S){return v===null||v.tag!==7?(v=e1(_,y.mode,w,S),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Aj(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case lP:return _=SR(v.type,v.key,v.props,null,y.mode,_),_.ref=AS(y,null,v),_.return=y,_;case Ob:return v=Ij(v,y.mode,_),v.return=y,v;case Eg:var w=v._init;return f(y,w(v._payload),_)}if(IT(v)||ES(v))return v=e1(v,y.mode,_,null),v.return=y,v;bP(y,v)}return null}function d(y,v,_,w){var S=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case lP:return _.key===S?u(y,v,_,w):null;case Ob:return _.key===S?l(y,v,_,w):null;case Eg:return S=_._init,d(y,v,S(_._payload),w)}if(IT(_)||ES(_))return S!==null?null:c(y,v,_,w,null);bP(y,_)}return null}function h(y,v,_,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lP:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,S);case Ob:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,S);case Eg:var x=w._init;return h(y,v,_,x(w._payload),S)}if(IT(w)||ES(w))return y=y.get(_)||null,c(v,y,w,S,null);bP(v,w)}return null}function p(y,v,_,w){for(var S=null,x=null,b=v,T=v=0,A=null;b!==null&&T<_.length;T++){b.index>T?(A=b,b=null):A=b.sibling;var I=d(y,b,_[T],w);if(I===null){b===null&&(b=A);break}e&&b&&I.alternate===null&&t(y,b),v=s(I,v,T),x===null?S=I:x.sibling=I,x=I,b=A}if(T===_.length)return n(y,b),Ri&&iv(y,T),S;if(b===null){for(;T<_.length;T++)b=f(y,_[T],w),b!==null&&(v=s(b,v,T),x===null?S=b:x.sibling=b,x=b);return Ri&&iv(y,T),S}for(b=r(y,b);T<_.length;T++)A=h(b,y,T,_[T],w),A!==null&&(e&&A.alternate!==null&&b.delete(A.key===null?T:A.key),v=s(A,v,T),x===null?S=A:x.sibling=A,x=A);return e&&b.forEach(function(k){return t(y,k)}),Ri&&iv(y,T),S}function m(y,v,_,w){var S=ES(_);if(typeof S!="function")throw Error(et(150));if(_=S.call(_),_==null)throw Error(et(151));for(var x=S=null,b=v,T=v=0,A=null,I=_.next();b!==null&&!I.done;T++,I=_.next()){b.index>T?(A=b,b=null):A=b.sibling;var k=d(y,b,I.value,w);if(k===null){b===null&&(b=A);break}e&&b&&k.alternate===null&&t(y,b),v=s(k,v,T),x===null?S=k:x.sibling=k,x=k,b=A}if(I.done)return n(y,b),Ri&&iv(y,T),S;if(b===null){for(;!I.done;T++,I=_.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,T),x===null?S=I:x.sibling=I,x=I);return Ri&&iv(y,T),S}for(b=r(y,b);!I.done;T++,I=_.next())I=h(b,y,T,I.value,w),I!==null&&(e&&I.alternate!==null&&b.delete(I.key===null?T:I.key),v=s(I,v,T),x===null?S=I:x.sibling=I,x=I);return e&&b.forEach(function(R){return t(y,R)}),Ri&&iv(y,T),S}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===Pb&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case lP:e:{for(var S=_.key,x=v;x!==null;){if(x.key===S){if(S=_.type,S===Pb){if(x.tag===7){n(y,x.sibling),v=i(x,_.props.children),v.return=y,y=v;break e}}else if(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Eg&&Gse(S)===x.type){n(y,x.sibling),v=i(x,_.props),v.ref=AS(y,x,_),v.return=y,y=v;break e}n(y,x);break}else t(y,x);x=x.sibling}_.type===Pb?(v=e1(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=SR(_.type,_.key,_.props,null,y.mode,w),w.ref=AS(y,v,_),w.return=y,y=w)}return o(y);case Ob:e:{for(x=_.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Ij(_,y.mode,w),v.return=y,y=v}return o(y);case Eg:return x=_._init,g(y,v,x(_._payload),w)}if(IT(_))return p(y,v,_,w);if(ES(_))return m(y,v,_,w);bP(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=Aj(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var qw=WEe(!0),GEe=WEe(!1),Z$=my(null),eN=null,Fb=null,SG=null;function TG(){SG=Fb=eN=null}function CG(e){var t=Z$.current;xi(Z$),e._currentValue=t}function Hz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function aw(e,t){eN=e,SG=Fb=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Iu=!0),e.firstContext=null)}function bc(e){var t=e._currentValue;if(SG!==e)if(e={context:e,memoizedValue:t,next:null},Fb===null){if(eN===null)throw Error(et(308));Fb=e,eN.dependencies={lanes:0,firstContext:e}}else Fb=Fb.next=e;return t}var Nv=null;function AG(e){Nv===null?Nv=[e]:Nv.push(e)}function YEe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,AG(t)):(n.next=i.next,i.next=n),t.interleaved=n,om(e,r)}function om(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xg=!1;function IG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KEe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function o0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,cr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,om(e,n)}return i=r.interleaved,i===null?(t.next=t,AG(r)):(t.next=i.next,i.next=t),r.interleaved=t,om(e,n)}function vR(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hG(e,n)}}function Yse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function tN(e,t,n,r){var i=e.updateQueue;xg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ui({},f,d);break e;case 2:xg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);b1|=o,e.lanes=o,e.memoizedState=f}}function Kse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var oI={},Qd=my(oI),IC=my(oI),OC=my(oI);function Dv(e){if(e===oI)throw Error(et(174));return e}function OG(e,t){switch(fi(OC,t),fi(IC,e),fi(Qd,oI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sz(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sz(t,e)}xi(Qd),fi(Qd,t)}function Ww(){xi(Qd),xi(IC),xi(OC)}function XEe(e){Dv(OC.current);var t=Dv(Qd.current),n=Sz(t,e.type);t!==n&&(fi(IC,e),fi(Qd,n))}function PG(e){IC.current===e&&(xi(Qd),xi(IC))}var ji=my(0);function nN(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wj=[];function kG(){for(var e=0;e<wj.length;e++)wj[e]._workInProgressVersionPrimary=null;wj.length=0}var _R=km.ReactCurrentDispatcher,Ej=km.ReactCurrentBatchConfig,_1=0,zi=null,Rs=null,Zs=null,rN=!1,E2=!1,PC=0,RYe=0;function Go(){throw Error(et(321))}function RG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nf(e[n],t[n]))return!1;return!0}function $G(e,t,n,r,i,s){if(_1=s,zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_R.current=e===null||e.memoizedState===null?MYe:LYe,e=n(r,i),E2){s=0;do{if(E2=!1,PC=0,25<=s)throw Error(et(301));s+=1,Zs=Rs=null,t.updateQueue=null,_R.current=FYe,e=n(r,i)}while(E2)}if(_R.current=iN,t=Rs!==null&&Rs.next!==null,_1=0,Zs=Rs=zi=null,rN=!1,t)throw Error(et(300));return e}function NG(){var e=PC!==0;return PC=0,e}function md(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zs===null?zi.memoizedState=Zs=e:Zs=Zs.next=e,Zs}function wc(){if(Rs===null){var e=zi.alternate;e=e!==null?e.memoizedState:null}else e=Rs.next;var t=Zs===null?zi.memoizedState:Zs.next;if(t!==null)Zs=t,Rs=e;else{if(e===null)throw Error(et(310));Rs=e,e={memoizedState:Rs.memoizedState,baseState:Rs.baseState,baseQueue:Rs.baseQueue,queue:Rs.queue,next:null},Zs===null?zi.memoizedState=Zs=e:Zs=Zs.next=e}return Zs}function kC(e,t){return typeof t=="function"?t(e):t}function xj(e){var t=wc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=Rs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((_1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,zi.lanes|=c,b1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Nf(r,t.memoizedState)||(Iu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,zi.lanes|=s,b1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sj(e){var t=wc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Nf(s,t.memoizedState)||(Iu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function QEe(){}function JEe(e,t){var n=zi,r=wc(),i=t(),s=!Nf(r.memoizedState,i);if(s&&(r.memoizedState=i,Iu=!0),r=r.queue,DG(txe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Zs!==null&&Zs.memoizedState.tag&1){if(n.flags|=2048,RC(9,exe.bind(null,n,r,i,t),void 0,null),lo===null)throw Error(et(349));_1&30||ZEe(n,t,i)}return i}function ZEe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function exe(e,t,n,r){t.value=n,t.getSnapshot=r,nxe(t)&&rxe(e)}function txe(e,t,n){return n(function(){nxe(t)&&rxe(e)})}function nxe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nf(e,n)}catch{return!0}}function rxe(e){var t=om(e,1);t!==null&&Tf(t,e,1,-1)}function Xse(e){var t=md();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kC,lastRenderedState:e},t.queue=e,e=e.dispatch=DYe.bind(null,zi,e),[t.memoizedState,e]}function RC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ixe(){return wc().memoizedState}function bR(e,t,n,r){var i=md();zi.flags|=e,i.memoizedState=RC(1|t,n,void 0,r===void 0?null:r)}function I6(e,t,n,r){var i=wc();r=r===void 0?null:r;var s=void 0;if(Rs!==null){var o=Rs.memoizedState;if(s=o.destroy,r!==null&&RG(r,o.deps)){i.memoizedState=RC(t,n,s,r);return}}zi.flags|=e,i.memoizedState=RC(1|t,n,s,r)}function Qse(e,t){return bR(8390656,8,e,t)}function DG(e,t){return I6(2048,8,e,t)}function sxe(e,t){return I6(4,2,e,t)}function oxe(e,t){return I6(4,4,e,t)}function axe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function uxe(e,t,n){return n=n!=null?n.concat([e]):null,I6(4,4,axe.bind(null,t,e),n)}function MG(){}function lxe(e,t){var n=wc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&RG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cxe(e,t){var n=wc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&RG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fxe(e,t,n){return _1&21?(Nf(n,t)||(n=gEe(),zi.lanes|=n,b1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Iu=!0),e.memoizedState=n)}function $Ye(e,t){var n=jr;jr=n!==0&&4>n?n:4,e(!0);var r=Ej.transition;Ej.transition={};try{e(!1),t()}finally{jr=n,Ej.transition=r}}function dxe(){return wc().memoizedState}function NYe(e,t,n){var r=u0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hxe(e))pxe(t,n);else if(n=YEe(e,t,n,r),n!==null){var i=Ha();Tf(n,e,r,i),mxe(n,t,r)}}function DYe(e,t,n){var r=u0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hxe(e))pxe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nf(a,o)){var u=t.interleaved;u===null?(i.next=i,AG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=YEe(e,t,i,r),n!==null&&(i=Ha(),Tf(n,e,r,i),mxe(n,t,r))}}function hxe(e){var t=e.alternate;return e===zi||t!==null&&t===zi}function pxe(e,t){E2=rN=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mxe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hG(e,n)}}var iN={readContext:bc,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},MYe={readContext:bc,useCallback:function(e,t){return md().memoizedState=[e,t===void 0?null:t],e},useContext:bc,useEffect:Qse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bR(4194308,4,axe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bR(4194308,4,e,t)},useInsertionEffect:function(e,t){return bR(4,2,e,t)},useMemo:function(e,t){var n=md();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=md();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=NYe.bind(null,zi,e),[r.memoizedState,e]},useRef:function(e){var t=md();return e={current:e},t.memoizedState=e},useState:Xse,useDebugValue:MG,useDeferredValue:function(e){return md().memoizedState=e},useTransition:function(){var e=Xse(!1),t=e[0];return e=$Ye.bind(null,e[1]),md().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=zi,i=md();if(Ri){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),lo===null)throw Error(et(349));_1&30||ZEe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Qse(txe.bind(null,r,s,e),[e]),r.flags|=2048,RC(9,exe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=md(),t=lo.identifierPrefix;if(Ri){var n=Rp,r=kp;n=(r&~(1<<32-Sf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=PC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=RYe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LYe={readContext:bc,useCallback:lxe,useContext:bc,useEffect:DG,useImperativeHandle:uxe,useInsertionEffect:sxe,useLayoutEffect:oxe,useMemo:cxe,useReducer:xj,useRef:ixe,useState:function(){return xj(kC)},useDebugValue:MG,useDeferredValue:function(e){var t=wc();return fxe(t,Rs.memoizedState,e)},useTransition:function(){var e=xj(kC)[0],t=wc().memoizedState;return[e,t]},useMutableSource:QEe,useSyncExternalStore:JEe,useId:dxe,unstable_isNewReconciler:!1},FYe={readContext:bc,useCallback:lxe,useContext:bc,useEffect:DG,useImperativeHandle:uxe,useInsertionEffect:sxe,useLayoutEffect:oxe,useMemo:cxe,useReducer:Sj,useRef:ixe,useState:function(){return Sj(kC)},useDebugValue:MG,useDeferredValue:function(e){var t=wc();return Rs===null?t.memoizedState=e:fxe(t,Rs.memoizedState,e)},useTransition:function(){var e=Sj(kC)[0],t=wc().memoizedState;return[e,t]},useMutableSource:QEe,useSyncExternalStore:JEe,useId:dxe,unstable_isNewReconciler:!1};function tf(e,t){if(e&&e.defaultProps){t=Ui({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function qz(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ui({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var O6={isMounted:function(e){return(e=e._reactInternals)?a_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=u0(e),s=Vp(r,i);s.payload=t,n!=null&&(s.callback=n),t=o0(e,s,i),t!==null&&(Tf(t,e,i,r),vR(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=u0(e),s=Vp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=o0(e,s,i),t!==null&&(Tf(t,e,i,r),vR(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),r=u0(e),i=Vp(n,r);i.tag=2,t!=null&&(i.callback=t),t=o0(e,i,r),t!==null&&(Tf(t,e,r,n),vR(t,e,r))}};function Jse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!SC(n,r)||!SC(i,s):!0}function gxe(e,t,n){var r=!1,i=I0,s=t.contextType;return typeof s=="object"&&s!==null?s=bc(s):(i=Nu(t)?y1:wa.current,r=t.contextTypes,s=(r=r!=null)?Vw(e,i):I0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=O6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Zse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&O6.enqueueReplaceState(t,t.state,null)}function Wz(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},IG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=bc(s):(s=Nu(t)?y1:wa.current,i.context=Vw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(qz(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&O6.enqueueReplaceState(i,i.state,null),tN(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gw(e,t){try{var n="",r=t;do n+=dGe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Tj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Gz(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jYe=typeof WeakMap=="function"?WeakMap:Map;function yxe(e,t,n){n=Vp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){oN||(oN=!0,rU=r),Gz(e,t)},n}function vxe(e,t,n){n=Vp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Gz(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gz(e,t),typeof r!="function"&&(a0===null?a0=new Set([this]):a0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function eoe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jYe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ZYe.bind(null,e,t,n),t.then(e,e))}function toe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function noe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vp(-1,1),t.tag=2,o0(n,t,1))),n.lanes|=1),e)}var BYe=km.ReactCurrentOwner,Iu=!1;function Na(e,t,n,r){t.child=e===null?GEe(t,null,n,r):qw(t,e.child,n,r)}function roe(e,t,n,r,i){n=n.render;var s=t.ref;return aw(t,i),r=$G(e,t,n,r,s,i),n=NG(),e!==null&&!Iu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(Ri&&n&&wG(t),t.flags|=1,Na(e,t,r,i),t.child)}function ioe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!HG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,_xe(e,t,s,r,i)):(e=SR(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:SC,n(o,r)&&e.ref===t.ref)return am(e,t,i)}return t.flags|=1,e=l0(s,r),e.ref=t.ref,e.return=t,t.child=e}function _xe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(SC(s,r)&&e.ref===t.ref)if(Iu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Iu=!0);else return t.lanes=e.lanes,am(e,t,i)}return Yz(e,t,n,r,i)}function bxe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fi(Bb,ul),ul|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fi(Bb,ul),ul|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fi(Bb,ul),ul|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,fi(Bb,ul),ul|=r;return Na(e,t,i,n),t.child}function wxe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yz(e,t,n,r,i){var s=Nu(n)?y1:wa.current;return s=Vw(t,s),aw(t,i),n=$G(e,t,n,r,s,i),r=NG(),e!==null&&!Iu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(Ri&&r&&wG(t),t.flags|=1,Na(e,t,n,i),t.child)}function soe(e,t,n,r,i){if(Nu(n)){var s=!0;X$(t)}else s=!1;if(aw(t,i),t.stateNode===null)wR(e,t),gxe(t,n,r),Wz(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=bc(l):(l=Nu(n)?y1:wa.current,l=Vw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Zse(t,o,r,l),xg=!1;var d=t.memoizedState;o.state=d,tN(t,r,o,i),u=t.memoizedState,a!==r||d!==u||$u.current||xg?(typeof c=="function"&&(qz(t,n,c,r),u=t.memoizedState),(a=xg||Jse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,KEe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:tf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bc(u):(u=Nu(n)?y1:wa.current,u=Vw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Zse(t,o,r,u),xg=!1,d=t.memoizedState,o.state=d,tN(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||$u.current||xg?(typeof h=="function"&&(qz(t,n,h,r),p=t.memoizedState),(l=xg||Jse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Kz(e,t,n,r,s,i)}function Kz(e,t,n,r,i,s){wxe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Hse(t,n,!1),am(e,t,s);r=t.stateNode,BYe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qw(t,e.child,null,s),t.child=qw(t,null,a,s)):Na(e,t,a,s),t.memoizedState=r.state,i&&Hse(t,n,!0),t.child}function Exe(e){var t=e.stateNode;t.pendingContext?Vse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vse(e,t.context,!1),OG(e,t.containerInfo)}function ooe(e,t,n,r,i){return Hw(),xG(i),t.flags|=256,Na(e,t,n,r),t.child}var Xz={dehydrated:null,treeContext:null,retryLane:0};function Qz(e){return{baseLanes:e,cachePool:null,transitions:null}}function xxe(e,t,n){var r=t.pendingProps,i=ji.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),fi(ji,i&1),e===null)return Vz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=R6(o,r,0,null),e=e1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Qz(n),t.memoizedState=Xz,e):LG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zYe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=l0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=l0(a,s):(s=e1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?Qz(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=Xz,r}return s=e.child,e=s.sibling,r=l0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function LG(e,t){return t=R6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wP(e,t,n,r){return r!==null&&xG(r),qw(t,e.child,null,n),e=LG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zYe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Tj(Error(et(422))),wP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=R6({mode:"visible",children:r.children},i,0,null),s=e1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&qw(t,e.child,null,o),t.child.memoizedState=Qz(o),t.memoizedState=Xz,s);if(!(t.mode&1))return wP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=Tj(s,r,void 0),wP(e,t,o,r)}if(a=(o&e.childLanes)!==0,Iu||a){if(r=lo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,om(e,i),Tf(r,e,i,-1))}return VG(),r=Tj(Error(et(421))),wP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=eKe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ml=s0(i.nextSibling),El=t,Ri=!0,uf=null,e!==null&&(ec[tc++]=kp,ec[tc++]=Rp,ec[tc++]=v1,kp=e.id,Rp=e.overflow,v1=t),t=LG(t,r.children),t.flags|=4096,t)}function aoe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hz(e.return,t,n)}function Cj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sxe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Na(e,t,r.children,n),r=ji.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&aoe(e,n,t);else if(e.tag===19)aoe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(ji,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&nN(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Cj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&nN(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Cj(t,!0,n,null,s);break;case"together":Cj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wR(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function am(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),b1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=l0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=l0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function UYe(e,t,n){switch(t.tag){case 3:Exe(t),Hw();break;case 5:XEe(t);break;case 1:Nu(t.type)&&X$(t);break;case 4:OG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;fi(Z$,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(fi(ji,ji.current&1),t.flags|=128,null):n&t.child.childLanes?xxe(e,t,n):(fi(ji,ji.current&1),e=am(e,t,n),e!==null?e.sibling:null);fi(ji,ji.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sxe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(ji,ji.current),r)break;return null;case 22:case 23:return t.lanes=0,bxe(e,t,n)}return am(e,t,n)}var Txe,Jz,Cxe,Axe;Txe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jz=function(){};Cxe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dv(Qd.current);var s=null;switch(n){case"input":i=bz(e,i),r=bz(e,r),s=[];break;case"select":i=Ui({},i,{value:void 0}),r=Ui({},r,{value:void 0}),s=[];break;case"textarea":i=xz(e,i),r=xz(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Y$)}Tz(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(yC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(yC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&gi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Axe=function(e,t,n,r){n!==r&&(t.flags|=4)};function IS(e,t){if(!Ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function VYe(e,t,n){var r=t.pendingProps;switch(EG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:return Nu(t.type)&&K$(),Yo(t),null;case 3:return r=t.stateNode,Ww(),xi($u),xi(wa),kG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(_P(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,uf!==null&&(oU(uf),uf=null))),Jz(e,t),Yo(t),null;case 5:PG(t);var i=Dv(OC.current);if(n=t.type,e!==null&&t.stateNode!=null)Cxe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Yo(t),null}if(e=Dv(Qd.current),_P(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Id]=t,r[AC]=s,e=(t.mode&1)!==0,n){case"dialog":gi("cancel",r),gi("close",r);break;case"iframe":case"object":case"embed":gi("load",r);break;case"video":case"audio":for(i=0;i<PT.length;i++)gi(PT[i],r);break;case"source":gi("error",r);break;case"img":case"image":case"link":gi("error",r),gi("load",r);break;case"details":gi("toggle",r);break;case"input":gse(r,s),gi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gi("invalid",r);break;case"textarea":vse(r,s),gi("invalid",r)}Tz(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&vP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vP(r.textContent,a,e),i=["children",""+a]):yC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gi("scroll",r)}switch(n){case"input":cP(r),yse(r,s,!0);break;case"textarea":cP(r),_se(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Y$)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tEe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Id]=t,e[AC]=r,Txe(e,t,!1,!1),t.stateNode=e;e:{switch(o=Cz(n,r),n){case"dialog":gi("cancel",e),gi("close",e),i=r;break;case"iframe":case"object":case"embed":gi("load",e),i=r;break;case"video":case"audio":for(i=0;i<PT.length;i++)gi(PT[i],e);i=r;break;case"source":gi("error",e),i=r;break;case"img":case"image":case"link":gi("error",e),gi("load",e),i=r;break;case"details":gi("toggle",e),i=r;break;case"input":gse(e,r),i=bz(e,r),gi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ui({},r,{value:void 0}),gi("invalid",e);break;case"textarea":vse(e,r),i=xz(e,r),gi("invalid",e);break;default:i=r}Tz(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?iEe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nEe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vC(e,u):typeof u=="number"&&vC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&gi("scroll",e):u!=null&&aG(e,s,u,o))}switch(n){case"input":cP(e),yse(e,r,!1);break;case"textarea":cP(e),_se(e);break;case"option":r.value!=null&&e.setAttribute("value",""+A0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?rw(e,!!r.multiple,s,!1):r.defaultValue!=null&&rw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Y$)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&t.stateNode!=null)Axe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=Dv(OC.current),Dv(Qd.current),_P(t)){if(r=t.stateNode,n=t.memoizedProps,r[Id]=t,(s=r.nodeValue!==n)&&(e=El,e!==null))switch(e.tag){case 3:vP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Id]=t,t.stateNode=r}return Yo(t),null;case 13:if(xi(ji),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ri&&ml!==null&&t.mode&1&&!(t.flags&128))qEe(),Hw(),t.flags|=98560,s=!1;else if(s=_P(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Id]=t}else Hw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yo(t),s=!1}else uf!==null&&(oU(uf),uf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ji.current&1?Fs===0&&(Fs=3):VG())),t.updateQueue!==null&&(t.flags|=4),Yo(t),null);case 4:return Ww(),Jz(e,t),e===null&&TC(t.stateNode.containerInfo),Yo(t),null;case 10:return CG(t.type._context),Yo(t),null;case 17:return Nu(t.type)&&K$(),Yo(t),null;case 19:if(xi(ji),s=t.memoizedState,s===null)return Yo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)IS(s,!1);else{if(Fs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=nN(e),o!==null){for(t.flags|=128,IS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(ji,ji.current&1|2),t.child}e=e.sibling}s.tail!==null&&as()>Yw&&(t.flags|=128,r=!0,IS(s,!1),t.lanes=4194304)}else{if(!r)if(e=nN(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),IS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ri)return Yo(t),null}else 2*as()-s.renderingStartTime>Yw&&n!==1073741824&&(t.flags|=128,r=!0,IS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=as(),t.sibling=null,n=ji.current,fi(ji,r?n&1|2:n&1),t):(Yo(t),null);case 22:case 23:return UG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ul&1073741824&&(Yo(t),t.subtreeFlags&6&&(t.flags|=8192)):Yo(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function HYe(e,t){switch(EG(t),t.tag){case 1:return Nu(t.type)&&K$(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ww(),xi($u),xi(wa),kG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return PG(t),null;case 13:if(xi(ji),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Hw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xi(ji),null;case 4:return Ww(),null;case 10:return CG(t.type._context),null;case 22:case 23:return UG(),null;case 24:return null;default:return null}}var EP=!1,ua=!1,qYe=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function jb(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gi(e,t,r)}else n.current=null}function Zz(e,t,n){try{n()}catch(r){Gi(e,t,r)}}var uoe=!1;function WYe(e,t){if(Mz=q$,e=REe(),bG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lz={focusedElem:e,selectionRange:n},q$=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:tf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Gi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return p=uoe,uoe=!1,p}function x2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zz(t,n,s)}i=i.next}while(i!==r)}}function P6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function eU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ixe(e){var t=e.alternate;t!==null&&(e.alternate=null,Ixe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Id],delete t[AC],delete t[Bz],delete t[IYe],delete t[OYe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Oxe(e){return e.tag===5||e.tag===3||e.tag===4}function loe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Oxe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Y$));else if(r!==4&&(e=e.child,e!==null))for(tU(e,t,n),e=e.sibling;e!==null;)tU(e,t,n),e=e.sibling}function nU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nU(e,t,n),e=e.sibling;e!==null;)nU(e,t,n),e=e.sibling}var Eo=null,rf=!1;function tg(e,t,n){for(n=n.child;n!==null;)Pxe(e,t,n),n=n.sibling}function Pxe(e,t,n){if(Xd&&typeof Xd.onCommitFiberUnmount=="function")try{Xd.onCommitFiberUnmount(E6,n)}catch{}switch(n.tag){case 5:ua||jb(n,t);case 6:var r=Eo,i=rf;Eo=null,tg(e,t,n),Eo=r,rf=i,Eo!==null&&(rf?(e=Eo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Eo.removeChild(n.stateNode));break;case 18:Eo!==null&&(rf?(e=Eo,n=n.stateNode,e.nodeType===8?_j(e.parentNode,n):e.nodeType===1&&_j(e,n),EC(e)):_j(Eo,n.stateNode));break;case 4:r=Eo,i=rf,Eo=n.stateNode.containerInfo,rf=!0,tg(e,t,n),Eo=r,rf=i;break;case 0:case 11:case 14:case 15:if(!ua&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zz(n,t,o),i=i.next}while(i!==r)}tg(e,t,n);break;case 1:if(!ua&&(jb(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gi(n,t,a)}tg(e,t,n);break;case 21:tg(e,t,n);break;case 22:n.mode&1?(ua=(r=ua)||n.memoizedState!==null,tg(e,t,n),ua=r):tg(e,t,n);break;default:tg(e,t,n)}}function coe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new qYe),t.forEach(function(r){var i=tKe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Eo=a.stateNode,rf=!1;break e;case 3:Eo=a.stateNode.containerInfo,rf=!0;break e;case 4:Eo=a.stateNode.containerInfo,rf=!0;break e}a=a.return}if(Eo===null)throw Error(et(160));Pxe(s,o,i),Eo=null,rf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Gi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kxe(t,e),t=t.sibling}function kxe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wc(t,e),od(e),r&4){try{x2(3,e,e.return),P6(3,e)}catch(m){Gi(e,e.return,m)}try{x2(5,e,e.return)}catch(m){Gi(e,e.return,m)}}break;case 1:Wc(t,e),od(e),r&512&&n!==null&&jb(n,n.return);break;case 5:if(Wc(t,e),od(e),r&512&&n!==null&&jb(n,n.return),e.flags&32){var i=e.stateNode;try{vC(i,"")}catch(m){Gi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Zwe(i,s),Cz(a,o);var l=Cz(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?iEe(i,f):c==="dangerouslySetInnerHTML"?nEe(i,f):c==="children"?vC(i,f):aG(i,c,f,l)}switch(a){case"input":wz(i,s);break;case"textarea":eEe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?rw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?rw(i,!!s.multiple,s.defaultValue,!0):rw(i,!!s.multiple,s.multiple?[]:"",!1))}i[AC]=s}catch(m){Gi(e,e.return,m)}}break;case 6:if(Wc(t,e),od(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Gi(e,e.return,m)}}break;case 3:if(Wc(t,e),od(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{EC(t.containerInfo)}catch(m){Gi(e,e.return,m)}break;case 4:Wc(t,e),od(e);break;case 13:Wc(t,e),od(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(BG=as())),r&4&&coe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ua=(l=ua)||c,Wc(t,e),ua=l):Wc(t,e),od(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Ot=e,c=e.child;c!==null;){for(f=Ot=c;Ot!==null;){switch(d=Ot,h=d.child,d.tag){case 0:case 11:case 14:case 15:x2(4,d,d.return);break;case 1:jb(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Gi(r,n,m)}}break;case 5:jb(d,d.return);break;case 22:if(d.memoizedState!==null){doe(f);continue}}h!==null?(h.return=d,Ot=h):doe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=rEe("display",o))}catch(m){Gi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Gi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wc(t,e),od(e),r&4&&coe(e);break;case 21:break;default:Wc(t,e),od(e)}}function od(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Oxe(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vC(i,""),r.flags&=-33);var s=loe(e);nU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=loe(e);tU(e,a,o);break;default:throw Error(et(161))}}catch(u){Gi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GYe(e,t,n){Ot=e,Rxe(e)}function Rxe(e,t,n){for(var r=(e.mode&1)!==0;Ot!==null;){var i=Ot,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||EP;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ua;a=EP;var l=ua;if(EP=o,(ua=u)&&!l)for(Ot=i;Ot!==null;)o=Ot,u=o.child,o.tag===22&&o.memoizedState!==null?hoe(i):u!==null?(u.return=o,Ot=u):hoe(i);for(;s!==null;)Ot=s,Rxe(s),s=s.sibling;Ot=i,EP=a,ua=l}foe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ot=s):foe(e)}}function foe(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ua||P6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ua)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Kse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&EC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}ua||t.flags&512&&eU(t)}catch(d){Gi(t,t.return,d)}}if(t===e){Ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function doe(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function hoe(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{P6(4,t)}catch(u){Gi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Gi(t,i,u)}}var s=t.return;try{eU(t)}catch(u){Gi(t,s,u)}break;case 5:var o=t.return;try{eU(t)}catch(u){Gi(t,o,u)}}}catch(u){Gi(t,t.return,u)}if(t===e){Ot=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ot=a;break}Ot=t.return}}var YYe=Math.ceil,sN=km.ReactCurrentDispatcher,FG=km.ReactCurrentOwner,pc=km.ReactCurrentBatchConfig,cr=0,lo=null,ws=null,Ro=0,ul=0,Bb=my(0),Fs=0,$C=null,b1=0,k6=0,jG=0,S2=null,bu=null,BG=0,Yw=1/0,pp=null,oN=!1,rU=null,a0=null,xP=!1,Bg=null,aN=0,T2=0,iU=null,ER=-1,xR=0;function Ha(){return cr&6?as():ER!==-1?ER:ER=as()}function u0(e){return e.mode&1?cr&2&&Ro!==0?Ro&-Ro:kYe.transition!==null?(xR===0&&(xR=gEe()),xR):(e=jr,e!==0||(e=window.event,e=e===void 0?16:xEe(e.type)),e):1}function Tf(e,t,n,r){if(50<T2)throw T2=0,iU=null,Error(et(185));rI(e,n,r),(!(cr&2)||e!==lo)&&(e===lo&&(!(cr&2)&&(k6|=n),Fs===4&&Rg(e,Ro)),Du(e,r),n===1&&cr===0&&!(t.mode&1)&&(Yw=as()+500,A6&&gy()))}function Du(e,t){var n=e.callbackNode;kGe(e,t);var r=H$(e,e===lo?Ro:0);if(r===0)n!==null&&Ese(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ese(n),t===1)e.tag===0?PYe(poe.bind(null,e)):UEe(poe.bind(null,e)),CYe(function(){!(cr&6)&&gy()}),n=null;else{switch(yEe(r)){case 1:n=dG;break;case 4:n=pEe;break;case 16:n=V$;break;case 536870912:n=mEe;break;default:n=V$}n=Bxe(n,$xe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $xe(e,t){if(ER=-1,xR=0,cr&6)throw Error(et(327));var n=e.callbackNode;if(uw()&&e.callbackNode!==n)return null;var r=H$(e,e===lo?Ro:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=uN(e,r);else{t=r;var i=cr;cr|=2;var s=Dxe();(lo!==e||Ro!==t)&&(pp=null,Yw=as()+500,Zv(e,t));do try{QYe();break}catch(a){Nxe(e,a)}while(!0);TG(),sN.current=s,cr=i,ws!==null?t=0:(lo=null,Ro=0,t=Fs)}if(t!==0){if(t===2&&(i=kz(e),i!==0&&(r=i,t=sU(e,i))),t===1)throw n=$C,Zv(e,0),Rg(e,r),Du(e,as()),n;if(t===6)Rg(e,r);else{if(i=e.current.alternate,!(r&30)&&!KYe(i)&&(t=uN(e,r),t===2&&(s=kz(e),s!==0&&(r=s,t=sU(e,s))),t===1))throw n=$C,Zv(e,0),Rg(e,r),Du(e,as()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:sv(e,bu,pp);break;case 3:if(Rg(e,r),(r&130023424)===r&&(t=BG+500-as(),10<t)){if(H$(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ha(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jz(sv.bind(null,e,bu,pp),t);break}sv(e,bu,pp);break;case 4:if(Rg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Sf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=as()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YYe(r/1960))-r,10<r){e.timeoutHandle=jz(sv.bind(null,e,bu,pp),r);break}sv(e,bu,pp);break;case 5:sv(e,bu,pp);break;default:throw Error(et(329))}}}return Du(e,as()),e.callbackNode===n?$xe.bind(null,e):null}function sU(e,t){var n=S2;return e.current.memoizedState.isDehydrated&&(Zv(e,t).flags|=256),e=uN(e,t),e!==2&&(t=bu,bu=n,t!==null&&oU(t)),e}function oU(e){bu===null?bu=e:bu.push.apply(bu,e)}function KYe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rg(e,t){for(t&=~jG,t&=~k6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sf(t),r=1<<n;e[n]=-1,t&=~r}}function poe(e){if(cr&6)throw Error(et(327));uw();var t=H$(e,0);if(!(t&1))return Du(e,as()),null;var n=uN(e,t);if(e.tag!==0&&n===2){var r=kz(e);r!==0&&(t=r,n=sU(e,r))}if(n===1)throw n=$C,Zv(e,0),Rg(e,t),Du(e,as()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sv(e,bu,pp),Du(e,as()),null}function zG(e,t){var n=cr;cr|=1;try{return e(t)}finally{cr=n,cr===0&&(Yw=as()+500,A6&&gy())}}function w1(e){Bg!==null&&Bg.tag===0&&!(cr&6)&&uw();var t=cr;cr|=1;var n=pc.transition,r=jr;try{if(pc.transition=null,jr=1,e)return e()}finally{jr=r,pc.transition=n,cr=t,!(cr&6)&&gy()}}function UG(){ul=Bb.current,xi(Bb)}function Zv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,TYe(n)),ws!==null)for(n=ws.return;n!==null;){var r=n;switch(EG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&K$();break;case 3:Ww(),xi($u),xi(wa),kG();break;case 5:PG(r);break;case 4:Ww();break;case 13:xi(ji);break;case 19:xi(ji);break;case 10:CG(r.type._context);break;case 22:case 23:UG()}n=n.return}if(lo=e,ws=e=l0(e.current,null),Ro=ul=t,Fs=0,$C=null,jG=k6=b1=0,bu=S2=null,Nv!==null){for(t=0;t<Nv.length;t++)if(n=Nv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Nv=null}return e}function Nxe(e,t){do{var n=ws;try{if(TG(),_R.current=iN,rN){for(var r=zi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}rN=!1}if(_1=0,Zs=Rs=zi=null,E2=!1,PC=0,FG.current=null,n===null||n.return===null){Fs=1,$C=t,ws=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Ro,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=toe(o);if(h!==null){h.flags&=-257,noe(h,o,a,s,t),h.mode&1&&eoe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){eoe(s,l,t),VG();break e}u=Error(et(426))}}else if(Ri&&a.mode&1){var g=toe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),noe(g,o,a,s,t),xG(Gw(u,a));break e}}s=u=Gw(u,a),Fs!==4&&(Fs=2),S2===null?S2=[s]:S2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=yxe(s,u,t);Yse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(a0===null||!a0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=vxe(s,a,t);Yse(s,w);break e}}s=s.return}while(s!==null)}Lxe(n)}catch(S){t=S,ws===n&&n!==null&&(ws=n=n.return);continue}break}while(!0)}function Dxe(){var e=sN.current;return sN.current=iN,e===null?iN:e}function VG(){(Fs===0||Fs===3||Fs===2)&&(Fs=4),lo===null||!(b1&268435455)&&!(k6&268435455)||Rg(lo,Ro)}function uN(e,t){var n=cr;cr|=2;var r=Dxe();(lo!==e||Ro!==t)&&(pp=null,Zv(e,t));do try{XYe();break}catch(i){Nxe(e,i)}while(!0);if(TG(),cr=n,sN.current=r,ws!==null)throw Error(et(261));return lo=null,Ro=0,Fs}function XYe(){for(;ws!==null;)Mxe(ws)}function QYe(){for(;ws!==null&&!EGe();)Mxe(ws)}function Mxe(e){var t=jxe(e.alternate,e,ul);e.memoizedProps=e.pendingProps,t===null?Lxe(e):ws=t,FG.current=null}function Lxe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=HYe(n,t),n!==null){n.flags&=32767,ws=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fs=6,ws=null;return}}else if(n=VYe(n,t,ul),n!==null){ws=n;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=e}while(t!==null);Fs===0&&(Fs=5)}function sv(e,t,n){var r=jr,i=pc.transition;try{pc.transition=null,jr=1,JYe(e,t,n,r)}finally{pc.transition=i,jr=r}return null}function JYe(e,t,n,r){do uw();while(Bg!==null);if(cr&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(RGe(e,s),e===lo&&(ws=lo=null,Ro=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xP||(xP=!0,Bxe(V$,function(){return uw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pc.transition,pc.transition=null;var o=jr;jr=1;var a=cr;cr|=4,FG.current=null,WYe(e,n),kxe(n,e),vYe(Lz),q$=!!Mz,Lz=Mz=null,e.current=n,GYe(n),xGe(),cr=a,jr=o,pc.transition=s}else e.current=n;if(xP&&(xP=!1,Bg=e,aN=i),s=e.pendingLanes,s===0&&(a0=null),CGe(n.stateNode),Du(e,as()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(oN)throw oN=!1,e=rU,rU=null,e;return aN&1&&e.tag!==0&&uw(),s=e.pendingLanes,s&1?e===iU?T2++:(T2=0,iU=e):T2=0,gy(),null}function uw(){if(Bg!==null){var e=yEe(aN),t=pc.transition,n=jr;try{if(pc.transition=null,jr=16>e?16:e,Bg===null)var r=!1;else{if(e=Bg,Bg=null,aN=0,cr&6)throw Error(et(331));var i=cr;for(cr|=4,Ot=e.current;Ot!==null;){var s=Ot,o=s.child;if(Ot.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Ot=l;Ot!==null;){var c=Ot;switch(c.tag){case 0:case 11:case 15:x2(8,c,s)}var f=c.child;if(f!==null)f.return=c,Ot=f;else for(;Ot!==null;){c=Ot;var d=c.sibling,h=c.return;if(Ixe(c),c===l){Ot=null;break}if(d!==null){d.return=h,Ot=d;break}Ot=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ot=o;else e:for(;Ot!==null;){if(s=Ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:x2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ot=y;break e}Ot=s.return}}var v=e.current;for(Ot=v;Ot!==null;){o=Ot;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ot=_;else e:for(o=v;Ot!==null;){if(a=Ot,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:P6(9,a)}}catch(S){Gi(a,a.return,S)}if(a===o){Ot=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ot=w;break e}Ot=a.return}}if(cr=i,gy(),Xd&&typeof Xd.onPostCommitFiberRoot=="function")try{Xd.onPostCommitFiberRoot(E6,e)}catch{}r=!0}return r}finally{jr=n,pc.transition=t}}return!1}function moe(e,t,n){t=Gw(n,t),t=yxe(e,t,1),e=o0(e,t,1),t=Ha(),e!==null&&(rI(e,1,t),Du(e,t))}function Gi(e,t,n){if(e.tag===3)moe(e,e,n);else for(;t!==null;){if(t.tag===3){moe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(a0===null||!a0.has(r))){e=Gw(n,e),e=vxe(t,e,1),t=o0(t,e,1),e=Ha(),t!==null&&(rI(t,1,e),Du(t,e));break}}t=t.return}}function ZYe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,lo===e&&(Ro&n)===n&&(Fs===4||Fs===3&&(Ro&130023424)===Ro&&500>as()-BG?Zv(e,0):jG|=n),Du(e,t)}function Fxe(e,t){t===0&&(e.mode&1?(t=hP,hP<<=1,!(hP&130023424)&&(hP=4194304)):t=1);var n=Ha();e=om(e,t),e!==null&&(rI(e,t,n),Du(e,n))}function eKe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fxe(e,n)}function tKe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),Fxe(e,n)}var jxe;jxe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$u.current)Iu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Iu=!1,UYe(e,t,n);Iu=!!(e.flags&131072)}else Iu=!1,Ri&&t.flags&1048576&&VEe(t,J$,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;wR(e,t),e=t.pendingProps;var i=Vw(t,wa.current);aw(t,n),i=$G(null,t,r,e,i,n);var s=NG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nu(r)?(s=!0,X$(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,IG(t),i.updater=O6,t.stateNode=i,i._reactInternals=t,Wz(t,r,e,n),t=Kz(null,t,r,!0,s,n)):(t.tag=0,Ri&&s&&wG(t),Na(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(wR(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=rKe(r),e=tf(r,e),i){case 0:t=Yz(null,t,r,e,n);break e;case 1:t=soe(null,t,r,e,n);break e;case 11:t=roe(null,t,r,e,n);break e;case 14:t=ioe(null,t,r,tf(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),Yz(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),soe(e,t,r,i,n);case 3:e:{if(Exe(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,KEe(e,t),tN(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Gw(Error(et(423)),t),t=ooe(e,t,r,n,i);break e}else if(r!==i){i=Gw(Error(et(424)),t),t=ooe(e,t,r,n,i);break e}else for(ml=s0(t.stateNode.containerInfo.firstChild),El=t,Ri=!0,uf=null,n=GEe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hw(),r===i){t=am(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 5:return XEe(t),e===null&&Vz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Fz(r,i)?o=null:s!==null&&Fz(r,s)&&(t.flags|=32),wxe(e,t),Na(e,t,o,n),t.child;case 6:return e===null&&Vz(t),null;case 13:return xxe(e,t,n);case 4:return OG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qw(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),roe(e,t,r,i,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:return Na(e,t,t.pendingProps.children,n),t.child;case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,fi(Z$,r._currentValue),r._currentValue=o,s!==null)if(Nf(s.value,o)){if(s.children===i.children&&!$u.current){t=am(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Vp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Hz(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,aw(t,n),i=bc(i),r=r(i),t.flags|=1,Na(e,t,r,n),t.child;case 14:return r=t.type,i=tf(r,t.pendingProps),i=tf(r.type,i),ioe(e,t,r,i,n);case 15:return _xe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),wR(e,t),t.tag=1,Nu(r)?(e=!0,X$(t)):e=!1,aw(t,n),gxe(t,r,i),Wz(t,r,i,n),Kz(null,t,r,!0,e,n);case 19:return Sxe(e,t,n);case 22:return bxe(e,t,n)}throw Error(et(156,t.tag))};function Bxe(e,t){return hEe(e,t)}function nKe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lc(e,t,n,r){return new nKe(e,t,n,r)}function HG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rKe(e){if(typeof e=="function")return HG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lG)return 11;if(e===cG)return 14}return 2}function l0(e,t){var n=e.alternate;return n===null?(n=lc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function SR(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")HG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pb:return e1(n.children,i,s,t);case uG:o=8,i|=8;break;case gz:return e=lc(12,n,t,i|2),e.elementType=gz,e.lanes=s,e;case yz:return e=lc(13,n,t,i),e.elementType=yz,e.lanes=s,e;case vz:return e=lc(19,n,t,i),e.elementType=vz,e.lanes=s,e;case Xwe:return R6(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ywe:o=10;break e;case Kwe:o=9;break e;case lG:o=11;break e;case cG:o=14;break e;case Eg:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=lc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function e1(e,t,n,r){return e=lc(7,e,r,t),e.lanes=n,e}function R6(e,t,n,r){return e=lc(22,e,r,t),e.elementType=Xwe,e.lanes=n,e.stateNode={isHidden:!1},e}function Aj(e,t,n){return e=lc(6,e,null,t),e.lanes=n,e}function Ij(e,t,n){return t=lc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function iKe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uj(0),this.expirationTimes=uj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qG(e,t,n,r,i,s,o,a,u){return e=new iKe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},IG(s),e}function sKe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ob,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zxe(e){if(!e)return I0;e=e._reactInternals;e:{if(a_(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Nu(n))return zEe(e,n,t)}return t}function Uxe(e,t,n,r,i,s,o,a,u){return e=qG(n,r,!0,e,i,s,o,a,u),e.context=zxe(null),n=e.current,r=Ha(),i=u0(n),s=Vp(r,i),s.callback=t??null,o0(n,s,i),e.current.lanes=i,rI(e,i,r),Du(e,r),e}function $6(e,t,n,r){var i=t.current,s=Ha(),o=u0(i);return n=zxe(n),t.context===null?t.context=n:t.pendingContext=n,t=Vp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=o0(i,t,o),e!==null&&(Tf(e,i,o,s),vR(e,i,o)),o}function lN(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function goe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function WG(e,t){goe(e,t),(e=e.alternate)&&goe(e,t)}function oKe(){return null}var Vxe=typeof reportError=="function"?reportError:function(e){console.error(e)};function GG(e){this._internalRoot=e}N6.prototype.render=GG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));$6(e,t,null,null)};N6.prototype.unmount=GG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;w1(function(){$6(null,e,null,null)}),t[sm]=null}};function N6(e){this._internalRoot=e}N6.prototype.unstable_scheduleHydration=function(e){if(e){var t=bEe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kg.length&&t!==0&&t<kg[n].priority;n++);kg.splice(n,0,e),n===0&&EEe(e)}};function YG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function D6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yoe(){}function aKe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=lN(o);s.call(l)}}var o=Uxe(t,r,e,0,null,!1,!1,"",yoe);return e._reactRootContainer=o,e[sm]=o.current,TC(e.nodeType===8?e.parentNode:e),w1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=lN(u);a.call(l)}}var u=qG(e,0,!1,null,null,!1,!1,"",yoe);return e._reactRootContainer=u,e[sm]=u.current,TC(e.nodeType===8?e.parentNode:e),w1(function(){$6(t,u,n,r)}),u}function M6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=lN(o);a.call(u)}}$6(t,o,e,i)}else o=aKe(n,t,e,i,r);return lN(o)}vEe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=OT(t.pendingLanes);n!==0&&(hG(t,n|1),Du(t,as()),!(cr&6)&&(Yw=as()+500,gy()))}break;case 13:w1(function(){var r=om(e,1);if(r!==null){var i=Ha();Tf(r,e,1,i)}}),WG(e,1)}};pG=function(e){if(e.tag===13){var t=om(e,134217728);if(t!==null){var n=Ha();Tf(t,e,134217728,n)}WG(e,134217728)}};_Ee=function(e){if(e.tag===13){var t=u0(e),n=om(e,t);if(n!==null){var r=Ha();Tf(n,e,t,r)}WG(e,t)}};bEe=function(){return jr};wEe=function(e,t){var n=jr;try{return jr=e,t()}finally{jr=n}};Iz=function(e,t,n){switch(t){case"input":if(wz(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=C6(r);if(!i)throw Error(et(90));Jwe(r),wz(r,i)}}}break;case"textarea":eEe(e,n);break;case"select":t=n.value,t!=null&&rw(e,!!n.multiple,t,!1)}};aEe=zG;uEe=w1;var uKe={usingClientEntryPoint:!1,Events:[sI,Nb,C6,sEe,oEe,zG]},OS={findFiberByHostInstance:$v,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lKe={bundleType:OS.bundleType,version:OS.version,rendererPackageName:OS.rendererPackageName,rendererConfig:OS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:km.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fEe(e),e===null?null:e.stateNode},findFiberByHostInstance:OS.findFiberByHostInstance||oKe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var SP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!SP.isDisabled&&SP.supportsFiber)try{E6=SP.inject(lKe),Xd=SP}catch{}}Bl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uKe;Bl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YG(t))throw Error(et(200));return sKe(e,t,null,n)};Bl.createRoot=function(e,t){if(!YG(e))throw Error(et(299));var n=!1,r="",i=Vxe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=qG(e,1,!1,null,null,n,!1,r,i),e[sm]=t.current,TC(e.nodeType===8?e.parentNode:e),new GG(t)};Bl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=fEe(t),e=e===null?null:e.stateNode,e};Bl.flushSync=function(e){return w1(e)};Bl.hydrate=function(e,t,n){if(!D6(t))throw Error(et(200));return M6(null,e,t,!0,n)};Bl.hydrateRoot=function(e,t,n){if(!YG(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Vxe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Uxe(t,null,e,1,n??null,i,!1,s,o),e[sm]=t.current,TC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new N6(t)};Bl.render=function(e,t,n){if(!D6(t))throw Error(et(200));return M6(null,e,t,!1,n)};Bl.unmountComponentAtNode=function(e){if(!D6(e))throw Error(et(40));return e._reactRootContainer?(w1(function(){M6(null,null,e,!1,function(){e._reactRootContainer=null,e[sm]=null})}),!0):!1};Bl.unstable_batchedUpdates=zG;Bl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!D6(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return M6(e,t,n,!1,r)};Bl.version="18.3.1-next-f1338f8080-20240426";function Hxe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hxe)}catch(e){console.error(e)}}Hxe(),Hwe.exports=Bl;var aI=Hwe.exports,voe=aI;pz.createRoot=voe.createRoot,pz.hydrateRoot=voe.hydrateRoot;const qxe=C.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),fo=()=>C.useContext(qxe);function cKe({children:e}){const[t,n]=z.useState(void 0),r=z.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return $.jsx(qxe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function NC(){return NC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NC.apply(this,arguments)}var zg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zg||(zg={}));const _oe="popstate";function fKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return aU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:cN(i)}return hKe(t,n,null,e)}function ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Wxe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dKe(){return Math.random().toString(36).substr(2,8)}function boe(e,t){return{usr:e.state,key:e.key,idx:t}}function aU(e,t,n,r){return n===void 0&&(n=null),NC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?lx(t):t,{state:n,key:t&&t.key||r||dKe()})}function cN(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function lx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function hKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=zg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(NC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=zg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=zg.Push;let v=aU(m.location,g,y);l=c()+1;let _=boe(v,l),w=m.createHref(v);try{o.pushState(_,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=zg.Replace;let v=aU(m.location,g,y);l=c();let _=boe(v,l),w=m.createHref(v);o.replaceState(_,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:cN(g);return v=v.replace(/ $/,"%20"),ls(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(_oe,f),u=g,()=>{i.removeEventListener(_oe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var woe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(woe||(woe={}));function pKe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?lx(t):t,i=KG(r.pathname||"/",n);if(i==null)return null;let s=Gxe(e);mKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=AKe(i);o=SKe(s[a],u)}return o}function Gxe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ls(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=c0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ls(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Gxe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:EKe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Yxe(s.path))i(s,o,u)}),t}function Yxe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Yxe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function mKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xKe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gKe=/^:[\w-]+$/,yKe=3,vKe=2,_Ke=1,bKe=10,wKe=-2,Eoe=e=>e==="*";function EKe(e,t){let n=e.split("/"),r=n.length;return n.some(Eoe)&&(r+=wKe),t&&(r+=vKe),n.filter(i=>!Eoe(i)).reduce((i,s)=>i+(gKe.test(s)?yKe:s===""?_Ke:bKe),r)}function xKe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function SKe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=TKe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:c0([i,c.pathname]),pathnameBase:kKe(c0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=c0([i,c.pathnameBase]))}return s}function TKe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=CKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function CKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Wxe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function AKe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wxe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function KG(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function IKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?lx(e):e;return{pathname:n?n.startsWith("/")?n:OKe(n,t):t,search:RKe(r),hash:$Ke(i)}}function OKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Oj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PKe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function XG(e,t){let n=PKe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function QG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=lx(e):(i=NC({},e),ls(!i.pathname||!i.pathname.includes("?"),Oj("?","pathname","search",i)),ls(!i.pathname||!i.pathname.includes("#"),Oj("#","pathname","hash",i)),ls(!i.search||!i.search.includes("#"),Oj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=IKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const c0=e=>e.join("/").replace(/\/\/+/g,"/"),kKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$Ke=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Kxe=["post","put","patch","delete"];new Set(Kxe);const DKe=["get",...Kxe];new Set(DKe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function DC(){return DC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DC.apply(this,arguments)}const JG=C.createContext(null),MKe=C.createContext(null),yy=C.createContext(null),L6=C.createContext(null),Mh=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Xxe=C.createContext(null);function Qxe(e,t){let{relative:n}=t===void 0?{}:t;cx()||ls(!1);let{basename:r,navigator:i}=C.useContext(yy),{hash:s,pathname:o,search:a}=Zxe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:c0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function cx(){return C.useContext(L6)!=null}function vy(){return cx()||ls(!1),C.useContext(L6).location}function Jxe(e){C.useContext(yy).static||C.useLayoutEffect(e)}function kc(){let{isDataRoute:e}=C.useContext(Mh);return e?XKe():LKe()}function LKe(){cx()||ls(!1);let e=C.useContext(JG),{basename:t,future:n,navigator:r}=C.useContext(yy),{matches:i}=C.useContext(Mh),{pathname:s}=vy(),o=JSON.stringify(XG(i,n.v7_relativeSplatPath)),a=C.useRef(!1);return Jxe(()=>{a.current=!0}),C.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=QG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:c0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const FKe=C.createContext(null);function jKe(e){let t=C.useContext(Mh).outlet;return t&&C.createElement(FKe.Provider,{value:e},t)}function um(){let{matches:e}=C.useContext(Mh),t=e[e.length-1];return t?t.params:{}}function Zxe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(yy),{matches:i}=C.useContext(Mh),{pathname:s}=vy(),o=JSON.stringify(XG(i,r.v7_relativeSplatPath));return C.useMemo(()=>QG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function eSe(e,t){return BKe(e,t)}function BKe(e,t,n,r){cx()||ls(!1);let{navigator:i}=C.useContext(yy),{matches:s}=C.useContext(Mh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=vy(),c;if(t){var f;let g=typeof t=="string"?lx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ls(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=pKe(e,{pathname:h}),m=qKe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:c0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:c0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?C.createElement(L6.Provider,{value:{location:DC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:zg.Pop}},m):m}function zKe(){let e=KKe(),t=NKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,null)}const UKe=C.createElement(zKe,null);class VKe extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(Mh.Provider,{value:this.props.routeContext},C.createElement(Xxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HKe(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(JG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Mh.Provider,{value:t},r)}function qKe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ls(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||UKe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let _;return h?_=m:p?_=g:f.route.Component?_=C.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,C.createElement(HKe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?C.createElement(VKe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var tSe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(tSe||{}),fN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fN||{});function WKe(e){let t=C.useContext(JG);return t||ls(!1),t}function GKe(e){let t=C.useContext(MKe);return t||ls(!1),t}function YKe(e){let t=C.useContext(Mh);return t||ls(!1),t}function nSe(e){let t=YKe(),n=t.matches[t.matches.length-1];return n.route.id||ls(!1),n.route.id}function KKe(){var e;let t=C.useContext(Xxe),n=GKe(fN.UseRouteError),r=nSe(fN.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function XKe(){let{router:e}=WKe(tSe.UseNavigateStable),t=nSe(fN.UseNavigateStable),n=C.useRef(!1);return Jxe(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,DC({fromRouteId:t},s)))},[e,t])}function ZG(e){let{to:t,replace:n,state:r,relative:i}=e;cx()||ls(!1);let{future:s,static:o}=C.useContext(yy),{matches:a}=C.useContext(Mh),{pathname:u}=vy(),l=kc(),c=QG(t,XG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return C.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function QKe(e){return jKe(e.context)}function dp(e){ls(!1)}function JKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=zg.Pop,navigator:s,static:o=!1,future:a}=e;cx()&&ls(!1);let u=t.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:u,navigator:s,static:o,future:DC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=lx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=C.useMemo(()=>{let g=KG(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:C.createElement(yy.Provider,{value:l},C.createElement(L6.Provider,{children:n,value:m}))}function ZKe(e){let{children:t,location:n}=e;return eSe(uU(t),n)}new Promise(()=>{});function uU(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,uU(r.props.children,s));return}r.type!==dp&&ls(!1),!r.props.index||!r.props.children||ls(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lU(){return lU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lU.apply(this,arguments)}function eXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function tXe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nXe(e,t){return e.button===0&&(!t||t==="_self")&&!tXe(e)}function cU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function rXe(e,t){let n=cU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const iXe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],sXe="6";try{window.__reactRouterVersion=sXe}catch{}const oXe="startTransition",xoe=gC[oXe];function aXe(e){let{basename:t,children:n,future:r,window:i}=e,s=C.useRef();s.current==null&&(s.current=fKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=C.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=C.useCallback(f=>{l&&xoe?xoe(()=>u(f)):u(f)},[u,l]);return C.useLayoutEffect(()=>o.listen(c),[o,c]),C.createElement(JKe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const uXe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lXe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cXe=C.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=t,d=eXe(t,iXe),{basename:h}=C.useContext(yy),p,m=!1;if(typeof l=="string"&&lXe.test(l)&&(p=l,uXe))try{let _=new URL(window.location.href),w=l.startsWith("//")?new URL(_.protocol+l):new URL(l),S=KG(w.pathname,h);w.origin===_.origin&&S!=null?l=S+w.search+w.hash:m=!0}catch{}let g=Qxe(l,{relative:i}),y=fXe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function v(_){r&&r(_),_.defaultPrevented||y(_)}return C.createElement("a",lU({},d,{href:p||g,onClick:m||s?r:v,ref:n,target:u}))});var Soe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Soe||(Soe={}));var Toe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Toe||(Toe={}));function fXe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=kc(),l=vy(),c=Zxe(e,{relative:o});return C.useCallback(f=>{if(nXe(f,n)){f.preventDefault();let d=r!==void 0?r:cN(l)===cN(c);u(e,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function eY(e){let t=C.useRef(cU(e)),n=C.useRef(!1),r=vy(),i=C.useMemo(()=>rXe(r.search,n.current?null:t.current),[r.search]),s=kc(),o=C.useCallback((a,u)=>{const l=cU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function dN(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function dXe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function hXe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function pXe(e,t,n){return dN(e,n)===dN(t,n)}function rSe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=dN(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>pXe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=hXe(c,l,r),d=dXe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function mXe(e,t,n){var r;return n?Array.from(((r=dN(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function uI(e){const t=C.createContext(null);return[({children:i,value:s})=>z.createElement(t.Provider,{value:s},i),()=>{const i=C.useContext(t);if(i===null)throw new Error(e);return i}]}function O0(e){return Array.isArray(e)?e:[e]}function Coe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const gXe=()=>{};function yXe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||gXe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function $p(e,t){return n=>{e==null||e(n),t==null||t(n)}}function vXe(){const[e,t]=C.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function iSe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function _Xe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}const bXe=typeof window<"u"?C.useLayoutEffect:C.useEffect;function wXe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});bXe(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>_Xe(`${e}:${String(r)}`,i[0])}return[t,n]}function lI(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==z.Fragment:!1}function sSe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=sSe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function oSe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=sSe(t))&&(r&&(r+=" "),r+=n);return r}const EXe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function xXe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var SXe=Object.defineProperty,Aoe=Object.getOwnPropertySymbols,TXe=Object.prototype.hasOwnProperty,CXe=Object.prototype.propertyIsEnumerable,Ioe=(e,t,n)=>t in e?SXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ooe=(e,t)=>{for(var n in t||(t={}))TXe.call(t,n)&&Ioe(e,n,t[n]);if(Aoe)for(var n of Aoe(t))CXe.call(t,n)&&Ioe(e,n,t[n]);return e};function AXe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:Ooe({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Ooe({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function cI(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function tY(e){const t=cI(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function aSe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function IXe(e,...t){return`linear-gradient(${e}deg, ${aSe(t)})`}function OXe(...e){return`radial-gradient(circle, ${aSe(e)})`}function uSe(e){const t=tY(e),n=cI(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function nY(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function PXe(e){return t=>`@media (min-width: ${nY({size:t,sizes:e.breakpoints})}px)`}function kXe(e){return t=>`@media (max-width: ${nY({size:t,sizes:e.breakpoints})-1}px)`}function RXe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function $Xe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function NXe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function rY(e){return RXe(e)?$Xe(e):e.startsWith("rgb")?NXe(e):{r:0,g:0,b:0,a:1}}function yb(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=rY(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function DXe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function MXe(e,t){const{r:n,g:r,b:i,a:s}=rY(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function LXe(e,t){const{r:n,g:r,b:i,a:s}=rY(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function FXe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function jXe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function BXe(e){const t=tY(e),n=cI(e),r=uSe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=jXe(s,e);switch(i){case"light":return{border:"transparent",background:yb(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:yb(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:yb(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?yb(t(s,5,a,!1),.05):yb(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function zXe(e){return t=>{const n=cI(e)(t);return e.colors[e.primaryColor][n]}}function UXe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}function VXe(e){return()=>({userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]})}const Os={fontStyles:xXe,themeColor:tY,focusStyles:AXe,linearGradient:IXe,radialGradient:OXe,smallerThan:kXe,largerThan:PXe,rgba:yb,size:nY,cover:DXe,darken:MXe,lighten:LXe,radius:FXe,variant:BXe,primaryShade:cI,hover:UXe,gradient:uSe,primaryColor:zXe,placeholderStyles:VXe};var HXe=Object.defineProperty,qXe=Object.defineProperties,WXe=Object.getOwnPropertyDescriptors,Poe=Object.getOwnPropertySymbols,GXe=Object.prototype.hasOwnProperty,YXe=Object.prototype.propertyIsEnumerable,koe=(e,t,n)=>t in e?HXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KXe=(e,t)=>{for(var n in t||(t={}))GXe.call(t,n)&&koe(e,n,t[n]);if(Poe)for(var n of Poe(t))YXe.call(t,n)&&koe(e,n,t[n]);return e},XXe=(e,t)=>qXe(e,WXe(t));function QXe(e){return XXe(KXe({},e),{fn:{fontStyles:Os.fontStyles(e),themeColor:Os.themeColor(e),focusStyles:Os.focusStyles(e),largerThan:Os.largerThan(e),smallerThan:Os.smallerThan(e),radialGradient:Os.radialGradient,linearGradient:Os.linearGradient,gradient:Os.gradient(e),rgba:Os.rgba,size:Os.size,cover:Os.cover,lighten:Os.lighten,darken:Os.darken,primaryShade:Os.primaryShade(e),radius:Os.radius(e),variant:Os.variant(e),hover:Os.hover,primaryColor:Os.primaryColor(e),placeholderStyles:Os.placeholderStyles(e)}})}const lSe=["xs","sm","md","lg","xl"],JXe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:EXe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},cSe=QXe(JXe);function ZXe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function eQe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var tQe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(eQe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=ZXe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ta="-ms-",hN="-moz-",wr="-webkit-",fSe="comm",iY="rule",sY="decl",nQe="@import",dSe="@keyframes",rQe="@layer",iQe=Math.abs,F6=String.fromCharCode,sQe=Object.assign;function oQe(e,t){return Ao(e,0)^45?(((t<<2^Ao(e,0))<<2^Ao(e,1))<<2^Ao(e,2))<<2^Ao(e,3):0}function hSe(e){return e.trim()}function aQe(e,t){return(e=t.exec(e))?e[0]:e}function Er(e,t,n){return e.replace(t,n)}function fU(e,t){return e.indexOf(t)}function Ao(e,t){return e.charCodeAt(t)|0}function MC(e,t,n){return e.slice(t,n)}function Sd(e){return e.length}function oY(e){return e.length}function TP(e,t){return t.push(e),e}function uQe(e,t){return e.map(t).join("")}var j6=1,Kw=1,pSe=0,Bu=0,_s=0,fx="";function B6(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:j6,column:Kw,length:o,return:""}}function PS(e,t){return sQe(B6("",null,null,"",null,null,0),e,{length:-e.length},t)}function lQe(){return _s}function cQe(){return _s=Bu>0?Ao(fx,--Bu):0,Kw--,_s===10&&(Kw=1,j6--),_s}function xl(){return _s=Bu<pSe?Ao(fx,Bu++):0,Kw++,_s===10&&(Kw=1,j6++),_s}function Jd(){return Ao(fx,Bu)}function TR(){return Bu}function fI(e,t){return MC(fx,e,t)}function LC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mSe(e){return j6=Kw=1,pSe=Sd(fx=e),Bu=0,[]}function gSe(e){return fx="",e}function CR(e){return hSe(fI(Bu-1,dU(e===91?e+2:e===40?e+1:e)))}function fQe(e){for(;(_s=Jd())&&_s<33;)xl();return LC(e)>2||LC(_s)>3?"":" "}function dQe(e,t){for(;--t&&xl()&&!(_s<48||_s>102||_s>57&&_s<65||_s>70&&_s<97););return fI(e,TR()+(t<6&&Jd()==32&&xl()==32))}function dU(e){for(;xl();)switch(_s){case e:return Bu;case 34:case 39:e!==34&&e!==39&&dU(_s);break;case 40:e===41&&dU(e);break;case 92:xl();break}return Bu}function hQe(e,t){for(;xl()&&e+_s!==57;)if(e+_s===84&&Jd()===47)break;return"/*"+fI(t,Bu-1)+"*"+F6(e===47?e:xl())}function pQe(e){for(;!LC(Jd());)xl();return fI(e,Bu)}function mQe(e){return gSe(AR("",null,null,null,[""],e=mSe(e),0,[0],e))}function AR(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",w=i,S=s,x=r,b=_;g;)switch(p=v,v=xl()){case 40:if(p!=108&&Ao(b,f-1)==58){fU(b+=Er(CR(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:b+=CR(v);break;case 9:case 10:case 13:case 32:b+=fQe(p);break;case 92:b+=dQe(TR()-1,7);continue;case 47:switch(Jd()){case 42:case 47:TP(gQe(hQe(xl(),TR()),t,n),u);break;default:b+="/"}break;case 123*m:a[l++]=Sd(b)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:y==-1&&(b=Er(b,/\f/g,"")),h>0&&Sd(b)-f&&TP(h>32?$oe(b+";",r,n,f-1):$oe(Er(b," ","")+";",r,n,f-2),u);break;case 59:b+=";";default:if(TP(x=Roe(b,t,n,l,c,i,a,_,w=[],S=[],f),s),v===123)if(c===0)AR(b,t,x,x,w,s,f,a,S);else switch(d===99&&Ao(b,3)===110?100:d){case 100:case 108:case 109:case 115:AR(e,x,x,r&&TP(Roe(e,x,x,0,0,i,a,_,i,w=[],f),S),i,S,f,a,r?w:S);break;default:AR(b,x,x,x,[""],S,0,a,S)}}l=c=h=0,m=y=1,_=b="",f=o;break;case 58:f=1+Sd(b),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&cQe()==125)continue}switch(b+=F6(v),v*m){case 38:y=c>0?1:(b+="\f",-1);break;case 44:a[l++]=(Sd(b)-1)*y,y=1;break;case 64:Jd()===45&&(b+=CR(xl())),d=Jd(),c=f=Sd(_=b+=pQe(TR())),v++;break;case 45:p===45&&Sd(b)==2&&(m=0)}}return s}function Roe(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=oY(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=MC(e,f+1,f=iQe(m=o[p])),_=e;y<h;++y)(_=hSe(m>0?d[y]+" "+v:Er(v,/&\f/g,d[y])))&&(u[g++]=_);return B6(e,t,n,i===0?iY:a,u,l,c)}function gQe(e,t,n){return B6(e,t,n,fSe,F6(lQe()),MC(e,2,-2),0)}function $oe(e,t,n,r){return B6(e,t,n,sY,MC(e,0,r),MC(e,r+1,-1),r)}function lw(e,t){for(var n="",r=oY(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function yQe(e,t,n,r){switch(e.type){case rQe:if(e.children.length)break;case nQe:case sY:return e.return=e.return||e.value;case fSe:return"";case dSe:return e.return=e.value+"{"+lw(e.children,r)+"}";case iY:e.value=e.props.join(",")}return Sd(n=lw(e.children,r))?e.return=e.value+"{"+n+"}":""}function vQe(e){var t=oY(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function _Qe(e){return function(t){t.root||(t=t.return)&&e(t)}}function bQe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var wQe=function(t,n,r){for(var i=0,s=0;i=s,s=Jd(),i===38&&s===12&&(n[r]=1),!LC(s);)xl();return fI(t,Bu)},EQe=function(t,n){var r=-1,i=44;do switch(LC(i)){case 0:i===38&&Jd()===12&&(n[r]=1),t[r]+=wQe(Bu-1,n,r);break;case 2:t[r]+=CR(i);break;case 4:if(i===44){t[++r]=Jd()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=F6(i)}while(i=xl());return t},xQe=function(t,n){return gSe(EQe(mSe(t),n))},Noe=new WeakMap,SQe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Noe.get(r))&&!i){Noe.set(t,!0);for(var s=[],o=xQe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},TQe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function ySe(e,t){switch(oQe(e,t)){case 5103:return wr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wr+e+hN+e+ta+e+e;case 6828:case 4268:return wr+e+ta+e+e;case 6165:return wr+e+ta+"flex-"+e+e;case 5187:return wr+e+Er(e,/(\w+).+(:[^]+)/,wr+"box-$1$2"+ta+"flex-$1$2")+e;case 5443:return wr+e+ta+"flex-item-"+Er(e,/flex-|-self/,"")+e;case 4675:return wr+e+ta+"flex-line-pack"+Er(e,/align-content|flex-|-self/,"")+e;case 5548:return wr+e+ta+Er(e,"shrink","negative")+e;case 5292:return wr+e+ta+Er(e,"basis","preferred-size")+e;case 6060:return wr+"box-"+Er(e,"-grow","")+wr+e+ta+Er(e,"grow","positive")+e;case 4554:return wr+Er(e,/([^-])(transform)/g,"$1"+wr+"$2")+e;case 6187:return Er(Er(Er(e,/(zoom-|grab)/,wr+"$1"),/(image-set)/,wr+"$1"),e,"")+e;case 5495:case 3959:return Er(e,/(image-set\([^]*)/,wr+"$1$`$1");case 4968:return Er(Er(e,/(.+:)(flex-)?(.*)/,wr+"box-pack:$3"+ta+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wr+e+e;case 4095:case 3583:case 4068:case 2532:return Er(e,/(.+)-inline(.+)/,wr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Sd(e)-1-t>6)switch(Ao(e,t+1)){case 109:if(Ao(e,t+4)!==45)break;case 102:return Er(e,/(.+:)(.+)-([^]+)/,"$1"+wr+"$2-$3$1"+hN+(Ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~fU(e,"stretch")?ySe(Er(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ao(e,t+1)!==115)break;case 6444:switch(Ao(e,Sd(e)-3-(~fU(e,"!important")&&10))){case 107:return Er(e,":",":"+wr)+e;case 101:return Er(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wr+(Ao(e,14)===45?"inline-":"")+"box$3$1"+wr+"$2$3$1"+ta+"$2box$3")+e}break;case 5936:switch(Ao(e,t+11)){case 114:return wr+e+ta+Er(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wr+e+ta+Er(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wr+e+ta+Er(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wr+e+ta+e+e}return e}var CQe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case sY:t.return=ySe(t.value,t.length);break;case dSe:return lw([PS(t,{value:Er(t.value,"@","@"+wr)})],i);case iY:if(t.length)return uQe(t.props,function(s){switch(aQe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lw([PS(t,{props:[Er(s,/:(read-\w+)/,":"+hN+"$1")]})],i);case"::placeholder":return lw([PS(t,{props:[Er(s,/:(plac\w+)/,":"+wr+"input-$1")]}),PS(t,{props:[Er(s,/:(plac\w+)/,":"+hN+"$1")]}),PS(t,{props:[Er(s,/:(plac\w+)/,ta+"input-$1")]})],i)}return""})}},AQe=[CQe],vSe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||AQe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[SQe,TQe];{var c,f=[yQe,_Qe(function(m){c.insert(m)})],d=vQe(l.concat(i,f)),h=function(g){return lw(mQe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new tQe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ni.apply(null,arguments)}var _Se={exports:{}},Br={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=typeof Symbol=="function"&&Symbol.for,aY=po?Symbol.for("react.element"):60103,uY=po?Symbol.for("react.portal"):60106,z6=po?Symbol.for("react.fragment"):60107,U6=po?Symbol.for("react.strict_mode"):60108,V6=po?Symbol.for("react.profiler"):60114,H6=po?Symbol.for("react.provider"):60109,q6=po?Symbol.for("react.context"):60110,lY=po?Symbol.for("react.async_mode"):60111,W6=po?Symbol.for("react.concurrent_mode"):60111,G6=po?Symbol.for("react.forward_ref"):60112,Y6=po?Symbol.for("react.suspense"):60113,IQe=po?Symbol.for("react.suspense_list"):60120,K6=po?Symbol.for("react.memo"):60115,X6=po?Symbol.for("react.lazy"):60116,OQe=po?Symbol.for("react.block"):60121,PQe=po?Symbol.for("react.fundamental"):60117,kQe=po?Symbol.for("react.responder"):60118,RQe=po?Symbol.for("react.scope"):60119;function Ul(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aY:switch(e=e.type,e){case lY:case W6:case z6:case V6:case U6:case Y6:return e;default:switch(e=e&&e.$$typeof,e){case q6:case G6:case X6:case K6:case H6:return e;default:return t}}case uY:return t}}}function bSe(e){return Ul(e)===W6}Br.AsyncMode=lY;Br.ConcurrentMode=W6;Br.ContextConsumer=q6;Br.ContextProvider=H6;Br.Element=aY;Br.ForwardRef=G6;Br.Fragment=z6;Br.Lazy=X6;Br.Memo=K6;Br.Portal=uY;Br.Profiler=V6;Br.StrictMode=U6;Br.Suspense=Y6;Br.isAsyncMode=function(e){return bSe(e)||Ul(e)===lY};Br.isConcurrentMode=bSe;Br.isContextConsumer=function(e){return Ul(e)===q6};Br.isContextProvider=function(e){return Ul(e)===H6};Br.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aY};Br.isForwardRef=function(e){return Ul(e)===G6};Br.isFragment=function(e){return Ul(e)===z6};Br.isLazy=function(e){return Ul(e)===X6};Br.isMemo=function(e){return Ul(e)===K6};Br.isPortal=function(e){return Ul(e)===uY};Br.isProfiler=function(e){return Ul(e)===V6};Br.isStrictMode=function(e){return Ul(e)===U6};Br.isSuspense=function(e){return Ul(e)===Y6};Br.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===z6||e===W6||e===V6||e===U6||e===Y6||e===IQe||typeof e=="object"&&e!==null&&(e.$$typeof===X6||e.$$typeof===K6||e.$$typeof===H6||e.$$typeof===q6||e.$$typeof===G6||e.$$typeof===PQe||e.$$typeof===kQe||e.$$typeof===RQe||e.$$typeof===OQe)};Br.typeOf=Ul;_Se.exports=Br;var $Qe=_Se.exports,wSe=$Qe,NQe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DQe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ESe={};ESe[wSe.ForwardRef]=NQe;ESe[wSe.Memo]=DQe;var MQe=!0;function LQe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var FQe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||MQe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},xSe=function(t,n,r){FQe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function jQe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var BQe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zQe=/[A-Z]|^ms/g,UQe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,SSe=function(t){return t.charCodeAt(1)===45},Doe=function(t){return t!=null&&typeof t!="boolean"},Pj=bQe(function(e){return SSe(e)?e:e.replace(zQe,"-$&").toLowerCase()}),Moe=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(UQe,function(r,i,s){return Td={name:i,styles:s,next:Td},i})}return BQe[t]!==1&&!SSe(t)&&typeof n=="number"&&n!==0?n+"px":n};function FC(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Td={name:n.name,styles:n.styles,next:Td},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Td={name:r.name,styles:r.styles,next:Td},r=r.next;var i=n.styles+";";return i}return VQe(e,t,n)}case"function":{if(e!==void 0){var s=Td,o=n(e);return Td=s,FC(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function VQe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=FC(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":Doe(o)&&(r+=Pj(s)+":"+Moe(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)Doe(o[a])&&(r+=Pj(s)+":"+Moe(s,o[a])+";");else{var u=FC(e,t,o);switch(s){case"animation":case"animationName":{r+=Pj(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var Loe=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Td,cY=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";Td=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=FC(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=FC(r,n,t[a]),i&&(s+=o[a]);Loe.lastIndex=0;for(var u="",l;(l=Loe.exec(s))!==null;)u+="-"+l[1];var c=jQe(s)+u;return{name:c,styles:s,next:Td}},HQe=gC.useInsertionEffect?gC.useInsertionEffect:!1,Foe=HQe||C.useLayoutEffect,TSe=C.createContext(typeof HTMLElement<"u"?vSe({key:"css"}):null);TSe.Provider;var qQe=function(t){return C.forwardRef(function(n,r){var i=C.useContext(TSe);return t(n,i,r)})},WQe=C.createContext({}),GQe=qQe(function(e,t){var n=e.styles,r=cY([n],void 0,C.useContext(WQe)),i=C.useRef();return Foe(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),Foe(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&xSe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function CSe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cY(t)}var YQe=function(){var t=CSe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function ASe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var KQe=Object.defineProperty,joe=Object.getOwnPropertySymbols,XQe=Object.prototype.hasOwnProperty,QQe=Object.prototype.propertyIsEnumerable,Boe=(e,t,n)=>t in e?KQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kj=(e,t)=>{for(var n in t||(t={}))XQe.call(t,n)&&Boe(e,n,t[n]);if(joe)for(var n of joe(t))QQe.call(t,n)&&Boe(e,n,t[n]);return e};const ISe=C.createContext({theme:cSe});function Cs(){var e;return((e=C.useContext(ISe))==null?void 0:e.theme)||cSe}function JQe(e){const t=Cs(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function OSe(){var e;return(e=C.useContext(ISe))==null?void 0:e.emotionCache}function ct(e,t,n){var r;const i=Cs(),s=(r=i.components[e])==null?void 0:r.defaultProps,o=typeof s=="function"?s(i):s;return kj(kj(kj({},t),o),ASe(n))}const ZQe={app:100,modal:200,popover:300,overlay:400,max:9999};function Rc(e){return ZQe[e]}function eJe(e,t){const n=C.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const tJe=vSe({key:"mantine",prepend:!0});function nJe(){return OSe()||tJe}var rJe=Object.defineProperty,zoe=Object.getOwnPropertySymbols,iJe=Object.prototype.hasOwnProperty,sJe=Object.prototype.propertyIsEnumerable,Uoe=(e,t,n)=>t in e?rJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oJe=(e,t)=>{for(var n in t||(t={}))iJe.call(t,n)&&Uoe(e,n,t[n]);if(zoe)for(var n of zoe(t))sJe.call(t,n)&&Uoe(e,n,t[n]);return e};const Rj="ref";function aJe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(Rj in n))return{args:e,ref:t};t=n[Rj];const r=oJe({},n);return delete r[Rj],{args:[r],ref:t}}const{cssFactory:uJe}=(()=>{function e(n,r,i){const s=[],o=LQe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=aJe(o),l=cY(u,r.registered);return xSe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,oSe(o))}}return{cssFactory:t}})();function PSe(){const e=nJe();return eJe(()=>uJe({cache:e}),[e])}function lJe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var cJe=Object.defineProperty,Voe=Object.getOwnPropertySymbols,fJe=Object.prototype.hasOwnProperty,dJe=Object.prototype.propertyIsEnumerable,Hoe=(e,t,n)=>t in e?cJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$j=(e,t)=>{for(var n in t||(t={}))fJe.call(t,n)&&Hoe(e,n,t[n]);if(Voe)for(var n of Voe(t))dJe.call(t,n)&&Hoe(e,n,t[n]);return e};function hJe(e){return`__mantine-ref-${e||""}`}function qoe(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=$j($j({},i[o]),s[o]):i[o]=$j({},s[o])}),i),{}):r(e)}function mt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=Cs(),o=JQe(i==null?void 0:i.name),a=OSe(),{css:u,cx:l}=PSe(),c=t(s,r,hJe),f=qoe(i==null?void 0:i.styles,s,r),d=qoe(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:lJe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function kSe({styles:e}){const t=Cs();return z.createElement(GQe,{styles:CSe(typeof e=="function"?e(t):e)})}var pJe=Object.defineProperty,mJe=Object.defineProperties,gJe=Object.getOwnPropertyDescriptors,Woe=Object.getOwnPropertySymbols,yJe=Object.prototype.hasOwnProperty,vJe=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?pJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kS=(e,t)=>{for(var n in t||(t={}))yJe.call(t,n)&&Goe(e,n,t[n]);if(Woe)for(var n of Woe(t))vJe.call(t,n)&&Goe(e,n,t[n]);return e},RS=(e,t)=>mJe(e,gJe(t));const $S={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},CP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:RS(kS({},$S),{common:{transformOrigin:"center center"}}),"pop-bottom-left":RS(kS({},$S),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":RS(kS({},$S),{common:{transformOrigin:"bottom right"}}),"pop-top-left":RS(kS({},$S),{common:{transformOrigin:"top left"}}),"pop-top-right":RS(kS({},$S),{common:{transformOrigin:"top right"}})},Yoe=["mousedown","touchstart"];function _Je(e,t,n){const r=C.useRef();return C.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Yoe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Yoe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function bJe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function wJe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function EJe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=C.useState(n?t:wJe(e)),s=C.useRef();return C.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),bJe(s.current,o=>i(o.matches))},[e]),r}function Sl(e,t,n){return Math.min(Math.max(e,t),n)}const fY=typeof document<"u"?C.useLayoutEffect:C.useEffect;function xs(e,t){const n=C.useRef(!1);C.useEffect(()=>()=>{n.current=!1},[]),C.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function dY({opened:e,shouldReturnFocus:t=!0}){const n=C.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return xs(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const xJe=/input|select|textarea|button|object/,RSe="a, input, select, textarea, button, object, [tabindex]";function SJe(e){return e.style.display==="none"}function TJe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(SJe(n))return!1;n=n.parentNode}return!0}function $Se(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function hU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN($Se(e));return(xJe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&TJe(e)}function NSe(e){const t=$Se(e);return(Number.isNaN(t)||t>=0)&&hU(e)}function CJe(e){return Array.from(e.querySelectorAll(RSe)).filter(NSe)}function AJe(e,t){const n=CJe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();if(!(r===i.activeElement||e===i.activeElement))return;t.preventDefault();const o=n[t.shiftKey?n.length-1:0];o&&o.focus()}function IJe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{var i;if((i=r==null?void 0:r.shadowRoot)!=null&&i.contains(e)||r.contains(e))return;const s=r.getAttribute("aria-hidden");return(s===null||s==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:s}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function hY(e=!0){const t=C.useRef(),n=C.useRef(null),r=C.useCallback(i=>{if(e){if(i===null){n.current&&(n.current(),n.current=null);return}if(n.current=IJe(i),t.current!==i)if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(RSe));o=a.find(NSe)||a.find(hU)||null,!o&&hU(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.getRootNode()&&s()}),t.current=i}else t.current=null}},[e]);return C.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&AJe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const OJe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,PJe=z.useId||(()=>{});function kJe(){const[e,t]=C.useState("");return fY(()=>{t(OJe())},[]),e}function RJe(){const e=PJe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ia(e){return typeof e=="string"?e:RJe()||kJe()}function pU(e,t,n){C.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function DSe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function $Je(...e){return t=>{e.forEach(n=>DSe(n,t))}}function As(...e){return C.useCallback($Je(...e),e)}const MSe=e=>({x:Sl(e.x,0,1),y:Sl(e.y,0,1)});function Q6(e,t,n="ltr"){const r=C.useRef(),i=C.useRef(!1),s=C.useRef(!1),o=C.useRef(0),[a,u]=C.useState(!1);return C.useEffect(()=>{i.current=!0},[]),C.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const w=r.current.getBoundingClientRect();if(w.width&&w.height){const S=Sl((v-w.left)/w.width,0,1);e({x:n==="ltr"?S:1-S,y:Sl((_-w.top)/w.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),v.preventDefault(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Ea({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=C.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function pY(e,t){return EJe("(prefers-reduced-motion: reduce)",e,t)}const NJe=e=>e<.5?2*e*e:-1+(4-2*e)*e,DJe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},MJe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},LJe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function LSe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=NJe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=C.useRef(0),u=C.useRef(0),l=C.useRef(!1),c=C.useRef(null),f=C.useRef(null),d=pY(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=C.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=MJe({parent:c.current,axis:t}))!=null?y:0,_=DJe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function w(){u.current===0&&(u.current=performance.now());const x=performance.now()-u.current,b=d||e===0?1:x/e,T=v+_*r(b);LJe({parent:c.current,axis:t,distance:T}),!l.current&&b<1?a.current=requestAnimationFrame(w):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}w()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return pU("wheel",m,{passive:!0}),pU("touchmove",m,{passive:!0}),C.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const FJe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function mc(){const e=C.useRef(0),t=C.useRef(null),[n,r]=C.useState(FJe),i=C.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return C.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function jJe(){const[e,{width:t,height:n}]=mc();return{ref:e,width:t,height:n}}function BJe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const zJe=({disableBodyPadding:e})=>{const t=e?null:BJe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function UJe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VJe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function HJe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function FSe(e,t={disableBodyPadding:!1}){const[n,r]=C.useState(e||!1),i=C.useRef(0),{disableBodyPadding:s}=t,o=C.useRef(null),a=()=>{i.current=window.scrollY;const l=zJe({disableBodyPadding:s}),c=HJe();UJe(c,l),VJe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return C.useEffect(()=>(n?a():u(),u),[n]),C.useEffect(()=>{e!==void 0&&r(e)},[e]),C.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}function qJe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function WJe(){return typeof window<"u"?qJe():"undetermined"}function AP(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=C.useState(e),o=C.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=C.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=C.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function IR(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Ug(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var Koe=Object.getOwnPropertySymbols,GJe=Object.prototype.hasOwnProperty,YJe=Object.prototype.propertyIsEnumerable,KJe=(e,t)=>{var n={};for(var r in e)GJe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Koe)for(var r of Koe(e))t.indexOf(r)<0&&YJe.call(e,r)&&(n[r]=e[r]);return n};function Lh(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:S,lts:x,ta:b,lh:T,fs:A,tt:I,td:k,w:R,miw:P,maw:N,h:F,mih:B,mah:W,bgsz:V,bgp:G,bgr:M,bga:H,pos:Y,top:L,left:j,bottom:q,right:Z,inset:ue,display:he}=t,fe=KJe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:ASe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:S,lts:x,ta:b,lh:T,fs:A,tt:I,td:k,w:R,miw:P,maw:N,h:F,mih:B,mah:W,bgsz:V,bgp:G,bgr:M,bga:H,pos:Y,top:L,left:j,bottom:q,right:Z,inset:ue,display:he}),rest:fe}}function XJe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function QJe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return XJe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function JJe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function ZJe(e){return e}function eZe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const tZe=["-xs","-sm","-md","-lg","-xl"];function nZe(e,t){return tZe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const rZe={color:JJe,default:ZJe,fontSize:eZe,spacing:nZe},iZe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var sZe=Object.defineProperty,Xoe=Object.getOwnPropertySymbols,oZe=Object.prototype.hasOwnProperty,aZe=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?sZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Joe=(e,t)=>{for(var n in t||(t={}))oZe.call(t,n)&&Qoe(e,n,t[n]);if(Xoe)for(var n of Xoe(t))aZe.call(t,n)&&Qoe(e,n,t[n]);return e};function mU(e,t,n=iZe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(QJe({value:e[s],getValue:rZe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=Joe(Joe({},i[o]),s[o]):i[o]=s[o]}),i),{})}function Zoe(e,t){return typeof e=="function"?e(t):e}function uZe(e,t,n){const r=Cs(),{css:i,cx:s}=PSe();return Array.isArray(e)?s(n,i(mU(t,r)),e.map(o=>i(Zoe(o,r)))):s(n,i(Zoe(e,r)),i(mU(t,r)))}var lZe=Object.defineProperty,pN=Object.getOwnPropertySymbols,jSe=Object.prototype.hasOwnProperty,BSe=Object.prototype.propertyIsEnumerable,eae=(e,t,n)=>t in e?lZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cZe=(e,t)=>{for(var n in t||(t={}))jSe.call(t,n)&&eae(e,n,t[n]);if(pN)for(var n of pN(t))BSe.call(t,n)&&eae(e,n,t[n]);return e},fZe=(e,t)=>{var n={};for(var r in e)jSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pN)for(var r of pN(e))t.indexOf(r)<0&&BSe.call(e,r)&&(n[r]=e[r]);return n};const zSe=C.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=fZe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=Lh(a),c=i||"div";return z.createElement(c,cZe({ref:t,className:uZe(o,u,r),style:s},l))});zSe.displayName="@mantine/core/Box";const pt=zSe;var dZe=Object.defineProperty,hZe=Object.defineProperties,pZe=Object.getOwnPropertyDescriptors,tae=Object.getOwnPropertySymbols,mZe=Object.prototype.hasOwnProperty,gZe=Object.prototype.propertyIsEnumerable,nae=(e,t,n)=>t in e?dZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rae=(e,t)=>{for(var n in t||(t={}))mZe.call(t,n)&&nae(e,n,t[n]);if(tae)for(var n of tae(t))gZe.call(t,n)&&nae(e,n,t[n]);return e},yZe=(e,t)=>hZe(e,pZe(t)),vZe=mt(e=>({root:yZe(rae(rae({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})})),_Ze=Object.defineProperty,mN=Object.getOwnPropertySymbols,USe=Object.prototype.hasOwnProperty,VSe=Object.prototype.propertyIsEnumerable,iae=(e,t,n)=>t in e?_Ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bZe=(e,t)=>{for(var n in t||(t={}))USe.call(t,n)&&iae(e,n,t[n]);if(mN)for(var n of mN(t))VSe.call(t,n)&&iae(e,n,t[n]);return e},wZe=(e,t)=>{var n={};for(var r in e)USe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&VSe.call(e,r)&&(n[r]=e[r]);return n};const HSe=C.forwardRef((e,t)=>{const n=ct("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=wZe(n,["className","component","unstyled"]),{classes:a,cx:u}=vZe(null,{name:"UnstyledButton",unstyled:s});return z.createElement(pt,bZe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});HSe.displayName="@mantine/core/UnstyledButton";const _y=HSe;var EZe=Object.defineProperty,xZe=Object.defineProperties,SZe=Object.getOwnPropertyDescriptors,sae=Object.getOwnPropertySymbols,TZe=Object.prototype.hasOwnProperty,CZe=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?EZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qSe=(e,t)=>{for(var n in t||(t={}))TZe.call(t,n)&&oae(e,n,t[n]);if(sae)for(var n of sae(t))CZe.call(t,n)&&oae(e,n,t[n]);return e},AZe=(e,t)=>xZe(e,SZe(t));const kT={xs:18,sm:22,md:28,lg:34,xl:44};function IZe({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:qSe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var OZe=mt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:AZe(qSe({},IZe({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:kT}),minHeight:e.fn.size({size:n,sizes:kT}),width:e.fn.size({size:n,sizes:kT}),minWidth:e.fn.size({size:n,sizes:kT}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})})),PZe=Object.defineProperty,gN=Object.getOwnPropertySymbols,WSe=Object.prototype.hasOwnProperty,GSe=Object.prototype.propertyIsEnumerable,aae=(e,t,n)=>t in e?PZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kZe=(e,t)=>{for(var n in t||(t={}))WSe.call(t,n)&&aae(e,n,t[n]);if(gN)for(var n of gN(t))GSe.call(t,n)&&aae(e,n,t[n]);return e},RZe=(e,t)=>{var n={};for(var r in e)WSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&GSe.call(e,r)&&(n[r]=e[r]);return n};function $Ze(e){var t=e,{size:n,color:r}=t,i=RZe(t,["size","color"]);return z.createElement("svg",kZe({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),z.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},z.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),z.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},z.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),z.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},z.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),z.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},z.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),z.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},z.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var NZe=Object.defineProperty,yN=Object.getOwnPropertySymbols,YSe=Object.prototype.hasOwnProperty,KSe=Object.prototype.propertyIsEnumerable,uae=(e,t,n)=>t in e?NZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DZe=(e,t)=>{for(var n in t||(t={}))YSe.call(t,n)&&uae(e,n,t[n]);if(yN)for(var n of yN(t))KSe.call(t,n)&&uae(e,n,t[n]);return e},MZe=(e,t)=>{var n={};for(var r in e)YSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&KSe.call(e,r)&&(n[r]=e[r]);return n};function LZe(e){var t=e,{size:n,color:r}=t,i=MZe(t,["size","color"]);return z.createElement("svg",DZe({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),z.createElement("g",{fill:"none",fillRule:"evenodd"},z.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},z.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),z.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},z.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var FZe=Object.defineProperty,vN=Object.getOwnPropertySymbols,XSe=Object.prototype.hasOwnProperty,QSe=Object.prototype.propertyIsEnumerable,lae=(e,t,n)=>t in e?FZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jZe=(e,t)=>{for(var n in t||(t={}))XSe.call(t,n)&&lae(e,n,t[n]);if(vN)for(var n of vN(t))QSe.call(t,n)&&lae(e,n,t[n]);return e},BZe=(e,t)=>{var n={};for(var r in e)XSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&QSe.call(e,r)&&(n[r]=e[r]);return n};function zZe(e){var t=e,{size:n,color:r}=t,i=BZe(t,["size","color"]);return z.createElement("svg",jZe({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),z.createElement("circle",{cx:"15",cy:"15",r:"15"},z.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),z.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},z.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),z.createElement("circle",{cx:"105",cy:"15",r:"15"},z.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),z.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var UZe=Object.defineProperty,_N=Object.getOwnPropertySymbols,JSe=Object.prototype.hasOwnProperty,ZSe=Object.prototype.propertyIsEnumerable,cae=(e,t,n)=>t in e?UZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VZe=(e,t)=>{for(var n in t||(t={}))JSe.call(t,n)&&cae(e,n,t[n]);if(_N)for(var n of _N(t))ZSe.call(t,n)&&cae(e,n,t[n]);return e},HZe=(e,t)=>{var n={};for(var r in e)JSe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&ZSe.call(e,r)&&(n[r]=e[r]);return n};const Nj={bars:$Ze,oval:LZe,dots:zZe},qZe={xs:18,sm:22,md:36,lg:44,xl:58},WZe={size:"md"};function dh(e){const t=ct("Loader",WZe,e),{size:n,color:r,variant:i}=t,s=HZe(t,["size","color","variant"]),o=Cs(),a=i in Nj?i:o.loader;return z.createElement(pt,VZe({role:"presentation",component:Nj[a]||Nj.bars,size:o.fn.size({size:n,sizes:qZe}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}dh.displayName="@mantine/core/Loader";var GZe=Object.defineProperty,bN=Object.getOwnPropertySymbols,eTe=Object.prototype.hasOwnProperty,tTe=Object.prototype.propertyIsEnumerable,fae=(e,t,n)=>t in e?GZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dae=(e,t)=>{for(var n in t||(t={}))eTe.call(t,n)&&fae(e,n,t[n]);if(bN)for(var n of bN(t))tTe.call(t,n)&&fae(e,n,t[n]);return e},YZe=(e,t)=>{var n={};for(var r in e)eTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&tTe.call(e,r)&&(n[r]=e[r]);return n};const KZe={color:"gray",size:"md",variant:"subtle",loading:!1},nTe=C.forwardRef((e,t)=>{const n=ct("ActionIcon",KZe,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=YZe(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=OZe({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=z.createElement(dh,dae({color:v.color,size:y.fn.size({size:a,sizes:kT})-12},f));return z.createElement(_y,dae({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});nTe.displayName="@mantine/core/ActionIcon";const lm=nTe;function rTe(e){const{children:t,target:n,className:r}=ct("Portal",{},e),i=Cs(),[s,o]=C.useState(!1),a=C.useRef();return fY(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?aI.createPortal(z.createElement("div",{className:r,dir:i.dir},t),a.current):null}rTe.displayName="@mantine/core/Portal";var XZe=Object.defineProperty,wN=Object.getOwnPropertySymbols,iTe=Object.prototype.hasOwnProperty,sTe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?XZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QZe=(e,t)=>{for(var n in t||(t={}))iTe.call(t,n)&&hae(e,n,t[n]);if(wN)for(var n of wN(t))sTe.call(t,n)&&hae(e,n,t[n]);return e},JZe=(e,t)=>{var n={};for(var r in e)iTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&sTe.call(e,r)&&(n[r]=e[r]);return n};function dx(e){var t=e,{withinPortal:n=!0,children:r}=t,i=JZe(t,["withinPortal","children"]);return n?z.createElement(rTe,QZe({},i),r):z.createElement(z.Fragment,null,r)}dx.displayName="@mantine/core/OptionalPortal";var ZZe=Object.defineProperty,eet=Object.defineProperties,tet=Object.getOwnPropertyDescriptors,pae=Object.getOwnPropertySymbols,net=Object.prototype.hasOwnProperty,ret=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?ZZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dj=(e,t)=>{for(var n in t||(t={}))net.call(t,n)&&mae(e,n,t[n]);if(pae)for(var n of pae(t))ret.call(t,n)&&mae(e,n,t[n]);return e},gae=(e,t)=>eet(e,tet(t));function iet({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var set=mt((e,{color:t,radius:n,variant:r})=>({root:Dj(gae(Dj({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),iet({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:gae(Dj({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}})),oet=Object.defineProperty,yae=Object.getOwnPropertySymbols,aet=Object.prototype.hasOwnProperty,uet=Object.prototype.propertyIsEnumerable,vae=(e,t,n)=>t in e?oet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cet=(e,t)=>{for(var n in t||(t={}))aet.call(t,n)&&vae(e,n,t[n]);if(yae)for(var n of yae(t))uet.call(t,n)&&vae(e,n,t[n]);return e};function oTe(e){return z.createElement("svg",cet({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),z.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}oTe.displayName="@mantine/core/CloseIcon";var fet=Object.defineProperty,EN=Object.getOwnPropertySymbols,aTe=Object.prototype.hasOwnProperty,uTe=Object.prototype.propertyIsEnumerable,_ae=(e,t,n)=>t in e?fet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,det=(e,t)=>{for(var n in t||(t={}))aTe.call(t,n)&&_ae(e,n,t[n]);if(EN)for(var n of EN(t))uTe.call(t,n)&&_ae(e,n,t[n]);return e},het=(e,t)=>{var n={};for(var r in e)aTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&uTe.call(e,r)&&(n[r]=e[r]);return n};const pet={xs:12,sm:14,md:16,lg:20,xl:24},met={size:"md"},lTe=C.forwardRef((e,t)=>{const n=ct("CloseButton",met,e),{iconSize:r,size:i="md"}=n,s=het(n,["iconSize","size"]),o=Cs(),a=r||o.fn.size({size:i,sizes:pet});return z.createElement(lm,det({size:i,ref:t},s),z.createElement(oTe,{width:a,height:a}))});lTe.displayName="@mantine/core/CloseButton";const Rm=lTe;var get=Object.defineProperty,xN=Object.getOwnPropertySymbols,cTe=Object.prototype.hasOwnProperty,fTe=Object.prototype.propertyIsEnumerable,bae=(e,t,n)=>t in e?get(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yet=(e,t)=>{for(var n in t||(t={}))cTe.call(t,n)&&bae(e,n,t[n]);if(xN)for(var n of xN(t))fTe.call(t,n)&&bae(e,n,t[n]);return e},vet=(e,t)=>{var n={};for(var r in e)cTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&fTe.call(e,r)&&(n[r]=e[r]);return n};const _et={variant:"light"},dTe=C.forwardRef((e,t)=>{const n=ct("Alert",_et,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=vet(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=set({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),w=Ia(r),S=s&&`${w}-title`,x=`${w}-body`;return z.createElement(pt,yet({id:w,role:"alert","aria-labelledby":S,"aria-describedby":x,className:_(v.root,v[o],i),ref:t},y),z.createElement("div",{className:v.wrapper},c&&z.createElement("div",{className:v.icon},c),z.createElement("div",{className:v.body},s&&z.createElement("div",{className:v.title,"data-with-close-button":p||void 0},z.createElement("span",{id:S,className:v.label},s)),p&&z.createElement(Rm,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),z.createElement("div",{id:x,className:v.message},a))))});dTe.displayName="@mantine/core/Alert";var bet=Object.defineProperty,wet=Object.defineProperties,Eet=Object.getOwnPropertyDescriptors,wae=Object.getOwnPropertySymbols,xet=Object.prototype.hasOwnProperty,Tet=Object.prototype.propertyIsEnumerable,Eae=(e,t,n)=>t in e?bet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NS=(e,t)=>{for(var n in t||(t={}))xet.call(t,n)&&Eae(e,n,t[n]);if(wae)for(var n of wae(t))Tet.call(t,n)&&Eae(e,n,t[n]);return e},Cet=(e,t)=>wet(e,Eet(t));function Aet({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function Iet({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function Oet(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}function Pet({theme:e,truncate:t}){return t==="start"?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",direction:e.dir==="ltr"?"rtl":"ltr",textAlign:e.dir==="ltr"?"right":"left"}:t?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:null}var ket=mt((e,{color:t,variant:n,size:r,lineClamp:i,truncate:s,inline:o,inherit:a,underline:u,gradient:l,weight:c,transform:f,align:d,strikethrough:h,italic:p})=>{const m=e.fn.variant({variant:"gradient",gradient:l});return{root:NS(Cet(NS(NS(NS(NS({},e.fn.fontStyles()),e.fn.focusStyles()),Oet(i)),Pet({theme:e,truncate:s})),{color:Iet({color:t,theme:e,variant:n}),fontFamily:a?"inherit":e.fontFamily,fontSize:a||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:a?"inherit":o?1:e.lineHeight,textDecoration:Aet({underline:u,strikethrough:h}),WebkitTapHighlightColor:"transparent",fontWeight:a?"inherit":c,textTransform:f,textAlign:d,fontStyle:p?"italic":void 0}),e.fn.hover(n==="link"&&u===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:m.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}}),Ret=Object.defineProperty,SN=Object.getOwnPropertySymbols,hTe=Object.prototype.hasOwnProperty,pTe=Object.prototype.propertyIsEnumerable,xae=(e,t,n)=>t in e?Ret(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$et=(e,t)=>{for(var n in t||(t={}))hTe.call(t,n)&&xae(e,n,t[n]);if(SN)for(var n of SN(t))pTe.call(t,n)&&xae(e,n,t[n]);return e},Net=(e,t)=>{var n={};for(var r in e)hTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&pTe.call(e,r)&&(n[r]=e[r]);return n};const Det={variant:"text"},mTe=C.forwardRef((e,t)=>{const n=ct("Text",Det,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,truncate:f,gradient:d,inline:h,inherit:p,underline:m,strikethrough:g,italic:y,classNames:v,styles:_,unstyled:w,span:S}=n,x=Net(n,["className","size","weight","transform","color","align","variant","lineClamp","truncate","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:b,cx:T}=ket({variant:l,color:a,size:i,lineClamp:c,truncate:f,inline:h,inherit:p,underline:m,strikethrough:g,italic:y,weight:s,transform:o,align:u,gradient:d},{unstyled:w,name:"Text"});return z.createElement(pt,$et({ref:t,className:T(b.root,{[b.gradient]:l==="gradient"},r),component:S?"span":"div"},x))});mTe.displayName="@mantine/core/Text";const dt=mTe;var Met=mt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}})),Let=Object.defineProperty,TN=Object.getOwnPropertySymbols,gTe=Object.prototype.hasOwnProperty,yTe=Object.prototype.propertyIsEnumerable,Sae=(e,t,n)=>t in e?Let(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tae=(e,t)=>{for(var n in t||(t={}))gTe.call(t,n)&&Sae(e,n,t[n]);if(TN)for(var n of TN(t))yTe.call(t,n)&&Sae(e,n,t[n]);return e},Fet=(e,t)=>{var n={};for(var r in e)gTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&yTe.call(e,r)&&(n[r]=e[r]);return n};const jet={},vTe=C.forwardRef((e,t)=>{const n=ct("Anchor",jet,e),{component:r,className:i,unstyled:s}=n,o=Fet(n,["component","className","unstyled"]),{classes:a,cx:u}=Met(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return z.createElement(dt,Tae(Tae({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});vTe.displayName="@mantine/core/Anchor";const dI=vTe,_Te=C.createContext({zIndex:1e3,fixed:!1,layout:"default"}),Bet=_Te.Provider;function bTe(){return C.useContext(_Te)}function J6(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var zet=Object.defineProperty,Uet=Object.defineProperties,Vet=Object.getOwnPropertyDescriptors,Cae=Object.getOwnPropertySymbols,Het=Object.prototype.hasOwnProperty,qet=Object.prototype.propertyIsEnumerable,Aae=(e,t,n)=>t in e?zet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,IP=(e,t)=>{for(var n in t||(t={}))Het.call(t,n)&&Aae(e,n,t[n]);if(Cae)for(var n of Cae(t))qet.call(t,n)&&Aae(e,n,t[n]);return e},Iae=(e,t)=>Uet(e,Vet(t)),Wet=mt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u,layout:l})=>{const c=typeof n=="object"&&n!==null?J6(n,e).reduce((d,[h,p])=>(d[`@media (min-width: ${h}px)`]={width:p,minWidth:p},d),{}):null,f=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:Iae(IP(IP(Iae(IP(IP({},e.fn.fontStyles()),i),{top:l==="alt"?0:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||(l==="alt"?"auto":"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))"),width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),f),c),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}}),Get=Object.defineProperty,CN=Object.getOwnPropertySymbols,wTe=Object.prototype.hasOwnProperty,ETe=Object.prototype.propertyIsEnumerable,Oae=(e,t,n)=>t in e?Get(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pae=(e,t)=>{for(var n in t||(t={}))wTe.call(t,n)&&Oae(e,n,t[n]);if(CN)for(var n of CN(t))ETe.call(t,n)&&Oae(e,n,t[n]);return e},Yet=(e,t)=>{var n={};for(var r in e)wTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&ETe.call(e,r)&&(n[r]=e[r]);return n};const xTe=C.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a,hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=Yet(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=bTe(),{classes:w,cx:S,theme:x}=Wet({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:a||_.zIndex||Rc("app"),section:m,withBorder:c,layout:_.layout},{classNames:d,styles:h,name:g,unstyled:y}),b=J6(r,x).reduce((T,[A,I])=>(T[`@media (min-width: ${A}px)`]={[`--mantine-${m}-width`]:`${I}px`},T),{});return z.createElement(pt,Pae({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:S(w.root,f)},v),p,z.createElement(kSe,{styles:()=>({":root":Pae({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},b)})}))});xTe.displayName="@mantine/core/HorizontalSection";var Ket=Object.defineProperty,AN=Object.getOwnPropertySymbols,STe=Object.prototype.hasOwnProperty,TTe=Object.prototype.propertyIsEnumerable,kae=(e,t,n)=>t in e?Ket(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xet=(e,t)=>{for(var n in t||(t={}))STe.call(t,n)&&kae(e,n,t[n]);if(AN)for(var n of AN(t))TTe.call(t,n)&&kae(e,n,t[n]);return e},Qet=(e,t)=>{var n={};for(var r in e)STe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&TTe.call(e,r)&&(n[r]=e[r]);return n};const CTe=C.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=Qet(n,["children","grow","sx"]);return z.createElement(pt,Xet({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...O0(s)]},o),r)});CTe.displayName="@mantine/core/Section";const Jet=CTe;var Zet=Object.defineProperty,Rae=Object.getOwnPropertySymbols,ett=Object.prototype.hasOwnProperty,ttt=Object.prototype.propertyIsEnumerable,$ae=(e,t,n)=>t in e?Zet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ntt=(e,t)=>{for(var n in t||(t={}))ett.call(t,n)&&$ae(e,n,t[n]);if(Rae)for(var n of Rae(t))ttt.call(t,n)&&$ae(e,n,t[n]);return e};const rtt={fixed:!1,position:{top:0,left:0},hiddenBreakpoint:"md",hidden:!1},C2=C.forwardRef((e,t)=>{const n=ct("Navbar",rtt,e);return z.createElement(xTe,ntt({section:"navbar",__staticSelector:"Navbar",ref:t},n))});C2.Section=Jet;C2.displayName="@mantine/core/Navbar";var itt=Object.defineProperty,stt=Object.defineProperties,ott=Object.getOwnPropertyDescriptors,Nae=Object.getOwnPropertySymbols,att=Object.prototype.hasOwnProperty,utt=Object.prototype.propertyIsEnumerable,Dae=(e,t,n)=>t in e?itt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mj=(e,t)=>{for(var n in t||(t={}))att.call(t,n)&&Dae(e,n,t[n]);if(Nae)for(var n of Nae(t))utt.call(t,n)&&Dae(e,n,t[n]);return e},Mae=(e,t)=>stt(e,ott(t)),ltt=mt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s,layout:o})=>{const a=typeof t=="object"&&t!==null?J6(t,e).reduce((u,[l,c])=>(u[`@media (min-width: ${l}px)`]={height:c,minHeight:c},u),{}):null;return{root:Mae(Mj(Mae(Mj(Mj({},e.fn.fontStyles()),r),{zIndex:i,left:o==="alt"?"var(--mantine-navbar-width, 0)":0,right:o==="alt"?"var(--mantine-aside-width, 0)":0,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),a),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}}),ctt=Object.defineProperty,IN=Object.getOwnPropertySymbols,ATe=Object.prototype.hasOwnProperty,ITe=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?ctt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fae=(e,t)=>{for(var n in t||(t={}))ATe.call(t,n)&&Lae(e,n,t[n]);if(IN)for(var n of IN(t))ITe.call(t,n)&&Lae(e,n,t[n]);return e},ftt=(e,t)=>{var n={};for(var r in e)ATe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&ITe.call(e,r)&&(n[r]=e[r]);return n};const OTe=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f,section:d,unstyled:h,__staticSelector:p}=n,m=ftt(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=bTe(),y=f||g.zIndex||Rc("app"),{classes:v,cx:_,theme:w}=ltt({height:a,fixed:g.fixed||u,position:c,zIndex:typeof y=="number"&&g.layout==="default"?y+1:y,layout:g.layout,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),S=typeof a=="object"&&a!==null?J6(a,w).reduce((x,[b,T])=>(x[`@media (min-width: ${b}px)`]={[`--mantine-${d}-height`]:`${T}px`},x),{}):null;return z.createElement(pt,Fae({component:d==="header"?"header":"footer",className:_(v.root,i),ref:t},m),r,z.createElement(kSe,{styles:()=>({":root":Fae({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},S)})}))});OTe.displayName="@mantine/core/VerticalSection";var dtt=Object.defineProperty,htt=Object.defineProperties,ptt=Object.getOwnPropertyDescriptors,jae=Object.getOwnPropertySymbols,mtt=Object.prototype.hasOwnProperty,gtt=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?dtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ytt=(e,t)=>{for(var n in t||(t={}))mtt.call(t,n)&&Bae(e,n,t[n]);if(jae)for(var n of jae(t))gtt.call(t,n)&&Bae(e,n,t[n]);return e},vtt=(e,t)=>htt(e,ptt(t));const _tt={fixed:!1,position:{top:0,left:0,right:0}},mY=C.forwardRef((e,t)=>{const n=ct("Header",_tt,e);return z.createElement(OTe,vtt(ytt({section:"header",__staticSelector:"Header"},n),{ref:t}))});mY.displayName="@mantine/core/Header";var btt=Object.defineProperty,zae=Object.getOwnPropertySymbols,wtt=Object.prototype.hasOwnProperty,Ett=Object.prototype.propertyIsEnumerable,Uae=(e,t,n)=>t in e?btt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xtt=(e,t)=>{for(var n in t||(t={}))wtt.call(t,n)&&Uae(e,n,t[n]);if(zae)for(var n of zae(t))Ett.call(t,n)&&Uae(e,n,t[n]);return e};function Stt(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var Ttt=mt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:xtt({flex:1,width:"100vw",boxSizing:"border-box"},Stt(t,e))})),Ctt=Object.defineProperty,ON=Object.getOwnPropertySymbols,PTe=Object.prototype.hasOwnProperty,kTe=Object.prototype.propertyIsEnumerable,Vae=(e,t,n)=>t in e?Ctt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Att=(e,t)=>{for(var n in t||(t={}))PTe.call(t,n)&&Vae(e,n,t[n]);if(ON)for(var n of ON(t))kTe.call(t,n)&&Vae(e,n,t[n]);return e},Itt=(e,t)=>{var n={};for(var r in e)PTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&kTe.call(e,r)&&(n[r]=e[r]);return n};const Ott={fixed:!0,padding:"md"},hI=C.forwardRef((e,t)=>{const n=ct("AppShell",Ott,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y,layout:v}=n,_=Itt(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden","layout"]),{classes:w,cx:S}=Ttt({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?z.createElement(z.Fragment,null,r):z.createElement(Bet,{value:{fixed:u,zIndex:l,layout:v}},z.createElement(pt,Att({className:S(w.root,h),ref:t},_),s,z.createElement("div",{className:w.body},i,z.createElement("main",{className:w.main},r),a),o))});hI.displayName="@mantine/core/AppShell";const OP={xs:1,sm:2,md:3,lg:4,xl:5};function PP(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var Ptt=mt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:OP})}px ${n} ${PP(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:OP})}px ${n} ${PP(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:OP}),borderTopColor:PP(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:OP}),borderLeftColor:PP(e,r),borderLeftStyle:n}})),ktt=Object.defineProperty,Rtt=Object.defineProperties,$tt=Object.getOwnPropertyDescriptors,PN=Object.getOwnPropertySymbols,RTe=Object.prototype.hasOwnProperty,$Te=Object.prototype.propertyIsEnumerable,Hae=(e,t,n)=>t in e?ktt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qae=(e,t)=>{for(var n in t||(t={}))RTe.call(t,n)&&Hae(e,n,t[n]);if(PN)for(var n of PN(t))$Te.call(t,n)&&Hae(e,n,t[n]);return e},Ntt=(e,t)=>Rtt(e,$tt(t)),Dtt=(e,t)=>{var n={};for(var r in e)RTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&$Te.call(e,r)&&(n[r]=e[r]);return n};const Mtt={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},jC=C.forwardRef((e,t)=>{const n=ct("Divider",Mtt,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=Dtt(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=Ptt({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,w=!(l!=null&&l.color);return z.createElement(pt,qae({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&z.createElement(dt,Ntt(qae({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:w})}),a))});jC.displayName="@mantine/core/Divider";var Ltt=Object.defineProperty,Ftt=Object.defineProperties,jtt=Object.getOwnPropertyDescriptors,Wae=Object.getOwnPropertySymbols,Btt=Object.prototype.hasOwnProperty,ztt=Object.prototype.propertyIsEnumerable,Gae=(e,t,n)=>t in e?Ltt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yae=(e,t)=>{for(var n in t||(t={}))Btt.call(t,n)&&Gae(e,n,t[n]);if(Wae)for(var n of Wae(t))ztt.call(t,n)&&Gae(e,n,t[n]);return e},Utt=(e,t)=>Ftt(e,jtt(t)),Vtt=mt((e,{size:t})=>({item:Utt(Yae({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.fn.radius(),"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":Yae({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}})),Htt=Object.defineProperty,Kae=Object.getOwnPropertySymbols,qtt=Object.prototype.hasOwnProperty,Wtt=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?Htt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gtt=(e,t)=>{for(var n in t||(t={}))qtt.call(t,n)&&Xae(e,n,t[n]);if(Kae)for(var n of Kae(t))Wtt.call(t,n)&&Xae(e,n,t[n]);return e};function gY({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=Vtt({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const w=(x,b)=>{const T=typeof i=="function"?i(x.value):!1;return z.createElement(c,Gtt({key:x.value,className:g.item,"data-disabled":x.disabled||void 0,"data-hovered":!x.disabled&&t===b||void 0,"data-selected":!x.disabled&&T||void 0,selected:T,onMouseEnter:()=>a(b),id:`${s}-${b}`,role:"option",tabIndex:-1,"aria-selected":t===b,ref:A=>{l&&l.current&&(l.current[x.value]=A)},onMouseDown:x.disabled?null:A=>{A.preventDefault(),u(x)},disabled:x.disabled},x))};let S=null;if(e.forEach((x,b)=>{x.creatable?_=b:x.group?(S!==x.group&&(S=x.group,v.push(z.createElement("div",{className:g.separator,key:`__mantine-divider-${b}`},z.createElement(jC,{classNames:{label:g.separatorLabel},label:x.group})))),v.push(w(x,b))):y.push(w(x,b))}),h){const x=e[_];y.push(z.createElement("div",{key:IR(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:b=>{b.preventDefault(),u(x)},tabIndex:-1,ref:b=>{l&&l.current&&(l.current[x.value]=b)}},p))}return v.length>0&&y.length>0&&y.unshift(z.createElement("div",{className:g.separator,key:"empty-group-separator"},z.createElement(jC,null))),v.length>0||y.length>0?z.createElement(z.Fragment,null,v,y):z.createElement(dt,{size:f,unstyled:m,className:g.nothingFound},d)}gY.displayName="@mantine/core/SelectItems";var Ytt=Object.defineProperty,kN=Object.getOwnPropertySymbols,NTe=Object.prototype.hasOwnProperty,DTe=Object.prototype.propertyIsEnumerable,Qae=(e,t,n)=>t in e?Ytt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ktt=(e,t)=>{for(var n in t||(t={}))NTe.call(t,n)&&Qae(e,n,t[n]);if(kN)for(var n of kN(t))DTe.call(t,n)&&Qae(e,n,t[n]);return e},Xtt=(e,t)=>{var n={};for(var r in e)NTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&DTe.call(e,r)&&(n[r]=e[r]);return n};const yY=C.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=Xtt(n,["label","value"]);return z.createElement("div",Ktt({ref:t},s),r||i)});yY.displayName="@mantine/core/DefaultItem";function Qtt(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function MTe(...e){return t=>e.forEach(n=>Qtt(n,t))}function u_(...e){return C.useCallback(MTe(...e),e)}const LTe=C.forwardRef((e,t)=>{const{children:n,...r}=e,i=C.Children.toArray(n),s=i.find(Ztt);if(s){const o=s.props.children,a=i.map(u=>u===s?C.Children.count(o)>1?C.Children.only(null):C.isValidElement(o)?o.props.children:null:u);return C.createElement(gU,Ni({},r,{ref:t}),C.isValidElement(o)?C.cloneElement(o,void 0,a):null)}return C.createElement(gU,Ni({},r,{ref:t}),n)});LTe.displayName="Slot";const gU=C.forwardRef((e,t)=>{const{children:n,...r}=e;return C.isValidElement(n)?C.cloneElement(n,{...ent(r,n.props),ref:MTe(t,n.ref)}):C.Children.count(n)>1?C.Children.only(null):null});gU.displayName="SlotClone";const Jtt=({children:e})=>C.createElement(C.Fragment,null,e);function Ztt(e){return C.isValidElement(e)&&e.type===Jtt}function ent(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const tnt=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],pI=tnt.reduce((e,t)=>{const n=C.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?LTe:t;return C.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),C.createElement(a,Ni({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),yU=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{};function nnt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const mI=e=>{const{present:t,children:n}=e,r=rnt(t),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),s=u_(r.ref,i.ref);return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};mI.displayName="Presence";function rnt(e){const[t,n]=C.useState(),r=C.useRef({}),i=C.useRef(e),s=C.useRef("none"),o=e?"mounted":"unmounted",[a,u]=nnt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const l=kP(r.current);s.current=a==="mounted"?l:"none"},[a]),yU(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=kP(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),yU(()=>{if(t){const l=f=>{const h=kP(r.current).includes(f.animationName);f.target===t&&h&&aI.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=kP(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function kP(e){return(e==null?void 0:e.animationName)||"none"}function int(e,t=[]){let n=[];function r(s,o){const a=C.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=C.useMemo(()=>p,Object.values(p));return C.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=C.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>C.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,snt(i,...t)]}function snt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function vv(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const ont=C.createContext(void 0);function ant(e){const t=C.useContext(ont);return e||t||"ltr"}function unt(e,[t,n]){return Math.min(n,Math.max(t,e))}function t1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function lnt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const FTe="ScrollArea",[jTe,GCn]=int(FTe),[cnt,$c]=jTe(FTe),fnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=C.useState(null),[l,c]=C.useState(null),[f,d]=C.useState(null),[h,p]=C.useState(null),[m,g]=C.useState(null),[y,v]=C.useState(0),[_,w]=C.useState(0),[S,x]=C.useState(!1),[b,T]=C.useState(!1),A=u_(t,k=>u(k)),I=ant(i);return C.createElement(cnt,{scope:n,type:r,dir:I,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:b,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w},C.createElement(pI.div,Ni({dir:I},o,{ref:A,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),dnt="ScrollAreaViewport",hnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=$c(dnt,n),o=C.useRef(null),a=u_(t,o,s.onViewportChange);return C.createElement(C.Fragment,null,C.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),C.createElement(pI.div,Ni({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),C.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),$m="ScrollAreaScrollbar",pnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$c($m,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return C.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?C.createElement(mnt,Ni({},r,{ref:t,forceMount:n})):i.type==="scroll"?C.createElement(gnt,Ni({},r,{ref:t,forceMount:n})):i.type==="auto"?C.createElement(BTe,Ni({},r,{ref:t,forceMount:n})):i.type==="always"?C.createElement(vY,Ni({},r,{ref:t})):null}),mnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$c($m,e.__scopeScrollArea),[s,o]=C.useState(!1);return C.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),C.createElement(mI,{present:n||s},C.createElement(BTe,Ni({"data-state":s?"visible":"hidden"},r,{ref:t})))}),gnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$c($m,e.__scopeScrollArea),s=e.orientation==="horizontal",o=e4(()=>u("SCROLL_END"),100),[a,u]=lnt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),C.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),C.createElement(mI,{present:n||a!=="hidden"},C.createElement(vY,Ni({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:t1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:t1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),BTe=C.forwardRef((e,t)=>{const n=$c($m,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=C.useState(!1),a=e.orientation==="horizontal",u=e4(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return Xw(n.viewport,u),Xw(n.content,u),C.createElement(mI,{present:r||s},C.createElement(vY,Ni({"data-state":s?"visible":"hidden"},i,{ref:t})))}),vY=C.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=$c($m,e.__scopeScrollArea),s=C.useRef(null),o=C.useRef(0),[a,u]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=HTe(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return Snt(d,o.current,a,h)}return n==="horizontal"?C.createElement(ynt,Ni({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=Jae(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?C.createElement(vnt,Ni({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=Jae(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),ynt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=$c($m,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=u_(t,u,s.onScrollbarXChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(UTe,Ni({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Z6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),WTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:RN(o.paddingLeft),paddingEnd:RN(o.paddingRight)}})}}))}),vnt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=$c($m,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=u_(t,u,s.onScrollbarYChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(UTe,Ni({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Z6(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),WTe(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:RN(o.paddingTop),paddingEnd:RN(o.paddingBottom)}})}}))}),[_nt,zTe]=jTe($m),UTe=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=$c($m,n),[p,m]=C.useState(null),g=u_(t,A=>m(A)),y=C.useRef(null),v=C.useRef(""),_=h.viewport,w=r.content-r.viewport,S=vv(c),x=vv(u),b=e4(f,10);function T(A){if(y.current){const I=A.clientX-y.current.left,k=A.clientY-y.current.top;l({x:I,y:k})}}return C.useEffect(()=>{const A=I=>{const k=I.target;(p==null?void 0:p.contains(k))&&S(I,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[_,p,w,S]),C.useEffect(x,[r,x]),Xw(p,b),Xw(h.content,b),C.createElement(_nt,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:vv(s),onThumbPointerUp:vv(o),onThumbPositionChange:x,onThumbPointerDown:vv(a)},C.createElement(pI.div,Ni({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:t1(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:t1(e.onPointerMove,T),onPointerUp:t1(e.onPointerUp,A=>{const I=A.target;I.hasPointerCapture(A.pointerId)&&I.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),vU="ScrollAreaThumb",bnt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=zTe(vU,e.__scopeScrollArea);return C.createElement(mI,{present:n||i.hasThumb},C.createElement(wnt,Ni({ref:t},r)))}),wnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=$c(vU,n),o=zTe(vU,n),{onThumbPositionChange:a}=o,u=u_(t,f=>o.onThumbChange(f)),l=C.useRef(),c=e4(()=>{l.current&&(l.current(),l.current=void 0)},100);return C.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=Tnt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),C.createElement(pI.div,Ni({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:t1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:t1(e.onPointerUp,o.onThumbPointerUp)}))}),VTe="ScrollAreaCorner",Ent=C.forwardRef((e,t)=>{const n=$c(VTe,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?C.createElement(xnt,Ni({},e,{ref:t})):null}),xnt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=$c(VTe,n),[s,o]=C.useState(0),[a,u]=C.useState(0),l=!!(s&&a);return Xw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Xw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?C.createElement(pI.div,Ni({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function RN(e){return e?parseInt(e,10):0}function HTe(e,t){const n=e/t;return isNaN(n)?0:n}function Z6(e){const t=HTe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Snt(e,t,n,r="ltr"){const i=Z6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return qTe([u,l],f)(e)}function Jae(e,t,n="ltr"){const r=Z6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=unt(e,u);return qTe([0,o],[0,a])(l)}function qTe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function WTe(e,t){return e>0&&e<t}const Tnt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function e4(e,t){const n=vv(e),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Xw(e,t){const n=vv(t);yU(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Cnt=fnt,Ant=hnt,Zae=pnt,eue=bnt,Int=Ent;var Ont=mt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,overflow:"hidden","&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:44,minHeight:44}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}})),Pnt=Object.defineProperty,knt=Object.defineProperties,Rnt=Object.getOwnPropertyDescriptors,$N=Object.getOwnPropertySymbols,GTe=Object.prototype.hasOwnProperty,YTe=Object.prototype.propertyIsEnumerable,tue=(e,t,n)=>t in e?Pnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_U=(e,t)=>{for(var n in t||(t={}))GTe.call(t,n)&&tue(e,n,t[n]);if($N)for(var n of $N(t))YTe.call(t,n)&&tue(e,n,t[n]);return e},KTe=(e,t)=>knt(e,Rnt(t)),XTe=(e,t)=>{var n={};for(var r in e)GTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&YTe.call(e,r)&&(n[r]=e[r]);return n};const QTe={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},t4=C.forwardRef((e,t)=>{const n=ct("ScrollArea",QTe,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,viewportProps:m}=n,g=XTe(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","viewportProps"]),[y,v]=C.useState(!1),_=Cs(),{classes:w,cx:S}=Ont({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:y,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return z.createElement(Cnt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||_.dir,ref:t,asChild:!0},z.createElement(pt,_U({className:S(w.root,i)},g),z.createElement(Ant,KTe(_U({},m),{className:w.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:x})=>h({x:x.scrollLeft,y:x.scrollTop}):void 0}),r),z.createElement(Zae,{orientation:"horizontal",className:w.scrollbar,forceMount:!0,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},z.createElement(eue,{className:w.thumb})),z.createElement(Zae,{orientation:"vertical",className:w.scrollbar,forceMount:!0,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},z.createElement(eue,{className:w.thumb})),z.createElement(Int,{className:w.corner})))}),JTe=C.forwardRef((e,t)=>{const n=ct("ScrollAreaAutosize",QTe,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=XTe(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return z.createElement(pt,KTe(_U({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...O0(m)]}),z.createElement(pt,{sx:{display:"flex",flexDirection:"column",flex:1}},z.createElement(t4,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});JTe.displayName="@mantine/core/ScrollAreaAutosize";t4.displayName="@mantine/core/ScrollArea";t4.Autosize=JTe;const $nt=t4;var Nnt=Object.defineProperty,Dnt=Object.defineProperties,Mnt=Object.getOwnPropertyDescriptors,NN=Object.getOwnPropertySymbols,ZTe=Object.prototype.hasOwnProperty,e2e=Object.prototype.propertyIsEnumerable,nue=(e,t,n)=>t in e?Nnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rue=(e,t)=>{for(var n in t||(t={}))ZTe.call(t,n)&&nue(e,n,t[n]);if(NN)for(var n of NN(t))e2e.call(t,n)&&nue(e,n,t[n]);return e},Lnt=(e,t)=>Dnt(e,Mnt(t)),Fnt=(e,t)=>{var n={};for(var r in e)ZTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&e2e.call(e,r)&&(n[r]=e[r]);return n};const n4=C.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Fnt(n,["style"]);return z.createElement($nt,Lnt(rue({},i),{style:rue({width:"100%"},r),viewportRef:t}),i.children)});n4.displayName="@mantine/core/SelectScrollArea";var jnt=mt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const gl=Math.min,la=Math.max,DN=Math.round,RP=Math.floor,P0=e=>({x:e,y:e}),Bnt={left:"right",right:"left",bottom:"top",top:"bottom"},znt={start:"end",end:"start"};function bU(e,t,n){return la(e,gl(t,n))}function cm(e,t){return typeof e=="function"?e(t):e}function Df(e){return e.split("-")[0]}function hx(e){return e.split("-")[1]}function _Y(e){return e==="x"?"y":"x"}function bY(e){return e==="y"?"height":"width"}function l_(e){return["top","bottom"].includes(Df(e))?"y":"x"}function wY(e){return _Y(l_(e))}function Unt(e,t,n){n===void 0&&(n=!1);const r=hx(e),i=wY(e),s=bY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=MN(o)),[o,MN(o)]}function Vnt(e){const t=MN(e);return[wU(e),t,wU(t)]}function wU(e){return e.replace(/start|end/g,t=>znt[t])}function Hnt(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function qnt(e,t,n,r){const i=hx(e);let s=Hnt(Df(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(wU)))),s}function MN(e){return e.replace(/left|right|bottom|top/g,t=>Bnt[t])}function Wnt(e){return{top:0,right:0,bottom:0,left:0,...e}}function EY(e){return typeof e!="number"?Wnt(e):{top:e,right:e,bottom:e,left:e}}function Qw(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function iue(e,t,n){let{reference:r,floating:i}=e;const s=l_(t),o=wY(t),a=bY(o),u=Df(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(hx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Gnt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=iue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:S}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:f}=iue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function xY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=cm(t,e),p=EY(h),g=a[d?f==="floating"?"reference":"floating":f],y=Qw(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},S=Qw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:u}):v);return{top:(y.top-S.top+p.top)/w.y,bottom:(S.bottom-y.bottom+p.bottom)/w.y,left:(y.left-S.left+p.left)/w.x,right:(S.right-y.right+p.right)/w.x}}const Ynt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=cm(e,t)||{};if(l==null)return{};const f=EY(c),d={x:n,y:r},h=wY(i),p=bY(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],S=d[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let b=x?x[_]:0;(!b||!await(o.isElement==null?void 0:o.isElement(x)))&&(b=a.floating[_]||s.floating[p]);const T=w/2-S/2,A=b/2-m[p]/2-1,I=gl(f[y],A),k=gl(f[v],A),R=I,P=b-m[p]-k,N=b/2-m[p]/2+T,F=bU(R,N,P),B=!u.arrow&&hx(i)!=null&&N!==F&&s.reference[p]/2-(N<R?I:k)-m[p]/2<0,W=B?N<R?N-R:N-P:0;return{[h]:d[h]+W,data:{[h]:F,centerOffset:N-F-W,...B&&{alignmentOffset:W}},reset:B}}}),Knt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=cm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Df(i),v=Df(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[MN(a)]:Vnt(a));!d&&p!=="none"&&w.push(...qnt(a,m,p,_));const S=[a,...w],x=await xY(t,g),b=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&b.push(x[y]),f){const R=Unt(i,o,_);b.push(x[R[0]],x[R[1]])}if(T=[...T,{placement:i,overflows:b}],!b.every(R=>R<=0)){var A,I;const R=(((A=s.flip)==null?void 0:A.index)||0)+1,P=S[R];if(P)return{data:{index:R,overflows:T},reset:{placement:P}};let N=(I=T.filter(F=>F.overflows[0]<=0).sort((F,B)=>F.overflows[1]-B.overflows[1])[0])==null?void 0:I.placement;if(!N)switch(h){case"bestFit":{var k;const F=(k=T.map(B=>[B.placement,B.overflows.filter(W=>W>0).reduce((W,V)=>W+V,0)]).sort((B,W)=>B[1]-W[1])[0])==null?void 0:k[0];F&&(N=F);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function t2e(e){const t=gl(...e.map(s=>s.left)),n=gl(...e.map(s=>s.top)),r=la(...e.map(s=>s.right)),i=la(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Xnt(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Qw(t2e(i)))}const Qnt=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=cm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Xnt(c),d=Qw(t2e(c)),h=EY(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(l_(n)==="y"){const I=f[0],k=f[f.length-1],R=Df(n)==="top",P=I.top,N=k.bottom,F=R?I.left:k.left,B=R?I.right:k.right,W=B-F,V=N-P;return{top:P,bottom:N,left:F,right:B,width:W,height:V,x:F,y:P}}const g=Df(n)==="left",y=la(...f.map(I=>I.right)),v=gl(...f.map(I=>I.left)),_=f.filter(I=>g?I.left===v:I.right===y),w=_[0].top,S=_[_.length-1].bottom,x=v,b=y,T=b-x,A=S-w;return{top:w,bottom:S,left:x,right:b,width:T,height:A,x,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Jnt(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Df(n),a=hx(n),u=l_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=cm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Znt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Jnt(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},ert=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=cm(e,t),l={x:n,y:r},c=await xY(t,u),f=l_(Df(i)),d=_Y(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=bU(v,h,_)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=bU(v,p,_)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},trt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=cm(e,t),c={x:n,y:r},f=l_(i),d=_Y(f);let h=c[d],p=c[f];const m=cm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const _=d==="y"?"height":"width",w=s.reference[d]-s.floating[_]+g.mainAxis,S=s.reference[d]+s.reference[_]-g.mainAxis;h<w?h=w:h>S&&(h=S)}if(l){var y,v;const _=d==="y"?"width":"height",w=["top","left"].includes(Df(i)),S=s.reference[f]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),x=s.reference[f]+s.reference[_]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<S?p=S:p>x&&(p=x)}return{[d]:h,[f]:p}}}},nrt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=cm(e,t),u=await xY(t,a),l=Df(n),c=hx(n),f=l_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=gl(h-u[p],g),_=gl(d-u[m],y),w=!t.middlewareData.shift;let S=v,x=_;if(f?x=c||w?gl(_,y):y:S=c||w?gl(v,g):g,w&&!c){const T=la(u.left,0),A=la(u.right,0),I=la(u.top,0),k=la(u.bottom,0);f?x=d-2*(T!==0||A!==0?T+A:la(u.left,u.right)):S=h-2*(I!==0||k!==0?I+k:la(u.top,u.bottom))}await o({...t,availableWidth:x,availableHeight:S});const b=await i.getDimensions(s.floating);return d!==b.width||h!==b.height?{reset:{rects:!0}}:{}}}};function px(e){return n2e(e)?(e.nodeName||"").toLowerCase():"#document"}function Tl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Nm(e){var t;return(t=(n2e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function n2e(e){return e instanceof Node||e instanceof Tl(e).Node}function hh(e){return e instanceof Element||e instanceof Tl(e).Element}function ph(e){return e instanceof HTMLElement||e instanceof Tl(e).HTMLElement}function sue(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Tl(e).ShadowRoot}function gI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mf(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function rrt(e){return["table","td","th"].includes(px(e))}function SY(e){const t=TY(),n=Mf(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function irt(e){let t=k0(e);for(;ph(t)&&!Jw(t);){if(SY(t))return t;t=k0(t)}return null}function TY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jw(e){return["html","body","#document"].includes(px(e))}function Mf(e){return Tl(e).getComputedStyle(e)}function r4(e){return hh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function k0(e){if(px(e)==="html")return e;const t=e.assignedSlot||e.parentNode||sue(e)&&e.host||Nm(e);return sue(t)?t.host:t}function r2e(e){const t=k0(e);return Jw(t)?e.ownerDocument?e.ownerDocument.body:e.body:ph(t)&&gI(t)?t:r2e(t)}function Hp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=r2e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Tl(i);return s?t.concat(o,o.visualViewport||[],gI(i)?i:[],o.frameElement&&n?Hp(o.frameElement):[]):t.concat(i,Hp(i,[],n))}function i2e(e){const t=Mf(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ph(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=DN(n)!==s||DN(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function CY(e){return hh(e)?e:e.contextElement}function cw(e){const t=CY(e);if(!ph(t))return P0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=i2e(t);let o=(s?DN(n.width):n.width)/r,a=(s?DN(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const srt=P0(0);function s2e(e){const t=Tl(e);return!TY()||!t.visualViewport?srt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ort(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Tl(e)?!1:t}function E1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=CY(e);let o=P0(1);t&&(r?hh(r)&&(o=cw(r)):o=cw(e));const a=ort(s,n,r)?s2e(s):P0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Tl(s),h=r&&hh(r)?Tl(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=cw(m),y=m.getBoundingClientRect(),v=Mf(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=_,l+=w,p=Tl(m),m=p.frameElement}}return Qw({width:c,height:f,x:u,y:l})}const art=[":popover-open",":modal"];function AY(e){return art.some(t=>{try{return e.matches(t)}catch{return!1}})}function urt(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Nm(r),a=t?AY(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=P0(1);const c=P0(0),f=ph(r);if((f||!f&&!s)&&((px(r)!=="body"||gI(o))&&(u=r4(r)),ph(r))){const d=E1(r);l=cw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function lrt(e){return Array.from(e.getClientRects())}function o2e(e){return E1(Nm(e)).left+r4(e).scrollLeft}function crt(e){const t=Nm(e),n=r4(e),r=e.ownerDocument.body,i=la(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=la(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+o2e(e);const a=-n.scrollTop;return Mf(r).direction==="rtl"&&(o+=la(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function frt(e,t){const n=Tl(e),r=Nm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=TY();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function drt(e,t){const n=E1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=ph(e)?cw(e):P0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function oue(e,t,n){let r;if(t==="viewport")r=frt(e,n);else if(t==="document")r=crt(Nm(e));else if(hh(t))r=drt(t,n);else{const i=s2e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Qw(r)}function a2e(e,t){const n=k0(e);return n===t||!hh(n)||Jw(n)?!1:Mf(n).position==="fixed"||a2e(n,t)}function hrt(e,t){const n=t.get(e);if(n)return n;let r=Hp(e,[],!1).filter(a=>hh(a)&&px(a)!=="body"),i=null;const s=Mf(e).position==="fixed";let o=s?k0(e):e;for(;hh(o)&&!Jw(o);){const a=Mf(o),u=SY(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gI(o)&&!u&&a2e(e,o))?r=r.filter(c=>c!==o):i=a,o=k0(o)}return t.set(e,r),r}function prt(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?AY(t)?[]:hrt(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=oue(t,c,i);return l.top=la(f.top,l.top),l.right=gl(f.right,l.right),l.bottom=gl(f.bottom,l.bottom),l.left=la(f.left,l.left),l},oue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function mrt(e){const{width:t,height:n}=i2e(e);return{width:t,height:n}}function grt(e,t,n){const r=ph(t),i=Nm(t),s=n==="fixed",o=E1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=P0(0);if(r||!r&&!s)if((px(t)!=="body"||gI(i))&&(a=r4(t)),r){const f=E1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=o2e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Lj(e){return Mf(e).position==="static"}function aue(e,t){return!ph(e)||Mf(e).position==="fixed"?null:t?t(e):e.offsetParent}function u2e(e,t){const n=Tl(e);if(AY(e))return n;if(!ph(e)){let i=k0(e);for(;i&&!Jw(i);){if(hh(i)&&!Lj(i))return i;i=k0(i)}return n}let r=aue(e,t);for(;r&&rrt(r)&&Lj(r);)r=aue(r,t);return r&&Jw(r)&&Lj(r)&&!SY(r)?n:r||irt(e)||n}const yrt=async function(e){const t=this.getOffsetParent||u2e,n=this.getDimensions,r=await n(e.floating);return{reference:grt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function vrt(e){return Mf(e).direction==="rtl"}const _rt={convertOffsetParentRelativeRectToViewportRelativeRect:urt,getDocumentElement:Nm,getClippingRect:prt,getOffsetParent:u2e,getElementRects:yrt,getClientRects:lrt,getDimensions:mrt,getScale:cw,isElement:hh,isRTL:vrt};function brt(e,t){let n=null,r;const i=Nm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=RP(c),p=RP(i.clientWidth-(l+f)),m=RP(i.clientHeight-(c+d)),g=RP(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:la(0,gl(1,u))||1};let _=!0;function w(S){const x=S[0].intersectionRatio;if(x!==u){if(!_)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function wrt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=CY(e),c=i||s?[...l?Hp(l):[],...Hp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?brt(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?E1(e):null;u&&g();function g(){const y=E1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const l2e=Znt,IY=ert,c2e=Knt,Ert=nrt,uue=Ynt,f2e=Qnt,xrt=trt,Srt=(e,t,n)=>{const r=new Map,i={platform:_rt,...n},s={...i.platform,_c:r};return Gnt(e,t,{...i,platform:s})},d2e=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?uue({element:t.current,padding:n}).fn(i):{}:t?uue({element:t,padding:n}).fn(i):{}}}};var OR=typeof document<"u"?C.useLayoutEffect:C.useEffect;function LN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!LN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!LN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function lue(e){const t=C.useRef(e);return OR(()=>{t.current=e}),t}function Trt(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,whileElementsMounted:s,open:o}=e,[a,u]=C.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[l,c]=C.useState(r);LN(l,r)||c(r);const f=C.useRef(null),d=C.useRef(null),h=C.useRef(a),p=lue(s),m=lue(i),[g,y]=C.useState(null),[v,_]=C.useState(null),w=C.useCallback(I=>{f.current!==I&&(f.current=I,y(I))},[]),S=C.useCallback(I=>{d.current!==I&&(d.current=I,_(I))},[]),x=C.useCallback(()=>{if(!f.current||!d.current)return;const I={placement:t,strategy:n,middleware:l};m.current&&(I.platform=m.current),Srt(f.current,d.current,I).then(k=>{const R={...k,isPositioned:!0};b.current&&!LN(h.current,R)&&(h.current=R,aI.flushSync(()=>{u(R)}))})},[l,t,n,m]);OR(()=>{o===!1&&h.current.isPositioned&&(h.current.isPositioned=!1,u(I=>({...I,isPositioned:!1})))},[o]);const b=C.useRef(!1);OR(()=>(b.current=!0,()=>{b.current=!1}),[]),OR(()=>{if(g&&v){if(p.current)return p.current(g,v,x);x()}},[g,v,x,p]);const T=C.useMemo(()=>({reference:f,floating:d,setReference:w,setFloating:S}),[w,S]),A=C.useMemo(()=>({reference:g,floating:v}),[g,v]);return C.useMemo(()=>({...a,update:x,refs:T,elements:A,reference:w,floating:S}),[a,x,T,A,w,S])}var Zw=typeof document<"u"?C.useLayoutEffect:C.useEffect;let Fj=!1,Crt=0;const cue=()=>"floating-ui-"+Crt++;function Art(){const[e,t]=C.useState(()=>Fj?cue():void 0);return Zw(()=>{e==null&&t(cue())},[]),C.useEffect(()=>{Fj||(Fj=!0)},[]),e}const Irt=gC.useId,fue=Irt||Art;function Ort(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}const Prt=C.createContext(null),krt=C.createContext(null),h2e=()=>{var e;return((e=C.useContext(Prt))==null?void 0:e.id)||null},OY=()=>C.useContext(krt);function Vg(e){return(e==null?void 0:e.ownerDocument)||document}function Rrt(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function $rt(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function PY(e){return Vg(e).defaultView||window}function Vd(e){return e?e instanceof PY(e).Element:!1}function p2e(e){return e?e instanceof PY(e).HTMLElement:!1}function Nrt(e){if(typeof ShadowRoot>"u")return!1;const t=PY(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Drt(e){if(e.mozInputSource===0&&e.isTrusted)return!0;const t=/Android/i;return(t.test(Rrt())||t.test($rt()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Mrt(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function m2e(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function due(e){const t=C.useRef(e);return Zw(()=>{t.current=e}),t}const hue="data-floating-ui-safe-polygon";function PR(e,t,n){return n&&!m2e(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}const Lrt=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,elements:{domReference:d,floating:h},refs:p}=e,m=OY(),g=h2e(),y=due(i),v=due(r),_=C.useRef(),w=C.useRef(),S=C.useRef(),x=C.useRef(),b=C.useRef(!0),T=C.useRef(!1),A=C.useRef(()=>{}),I=C.useCallback(()=>{var N;const F=(N=c.current.openEvent)==null?void 0:N.type;return(F==null?void 0:F.includes("mouse"))&&F!=="mousedown"},[c]);C.useEffect(()=>{if(!n)return;function N(){clearTimeout(w.current),clearTimeout(x.current),b.current=!0}return f.on("dismiss",N),()=>{f.off("dismiss",N)}},[n,f]),C.useEffect(()=>{if(!n||!y.current||!u)return;function N(){I()&&l(!1)}const F=Vg(h).documentElement;return F.addEventListener("mouseleave",N),()=>{F.removeEventListener("mouseleave",N)}},[h,u,l,n,y,c,I]);const k=C.useCallback(function(N){N===void 0&&(N=!0);const F=PR(v.current,"close",_.current);F&&!S.current?(clearTimeout(w.current),w.current=setTimeout(()=>l(!1),F)):N&&(clearTimeout(w.current),l(!1))},[v,l]),R=C.useCallback(()=>{A.current(),S.current=void 0},[]),P=C.useCallback(()=>{if(T.current){const N=Vg(p.floating.current).body;N.style.pointerEvents="",N.removeAttribute(hue),T.current=!1}},[p]);return C.useEffect(()=>{if(!n)return;function N(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function F(V){if(clearTimeout(w.current),b.current=!1,s&&!m2e(_.current)||o>0&&PR(v.current,"open")===0)return;c.current.openEvent=V;const G=PR(v.current,"open",_.current);G?w.current=setTimeout(()=>{l(!0)},G):l(!0)}function B(V){if(N())return;A.current();const G=Vg(h);if(clearTimeout(x.current),y.current){u||clearTimeout(w.current),S.current=y.current({...e,tree:m,x:V.clientX,y:V.clientY,onClose(){P(),R(),k()}});const M=S.current;G.addEventListener("mousemove",M),A.current=()=>{G.removeEventListener("mousemove",M)};return}k()}function W(V){N()||y.current==null||y.current({...e,tree:m,x:V.clientX,y:V.clientY,onClose(){P(),R(),k()}})(V)}if(Vd(d)){const V=d;return u&&V.addEventListener("mouseleave",W),h==null||h.addEventListener("mouseleave",W),a&&V.addEventListener("mousemove",F,{once:!0}),V.addEventListener("mouseenter",F),V.addEventListener("mouseleave",B),()=>{u&&V.removeEventListener("mouseleave",W),h==null||h.removeEventListener("mouseleave",W),a&&V.removeEventListener("mousemove",F),V.removeEventListener("mouseenter",F),V.removeEventListener("mouseleave",B)}}},[d,h,n,e,s,o,a,k,R,P,l,u,m,v,y,c]),Zw(()=>{var N;if(n&&u&&(N=y.current)!=null&&N.__options.blockPointerEvents&&I()){const W=Vg(h).body;if(W.setAttribute(hue,""),W.style.pointerEvents="none",T.current=!0,Vd(d)&&h){var F,B;const V=d,G=m==null||(F=m.nodesRef.current.find(M=>M.id===g))==null||(B=F.context)==null?void 0:B.elements.floating;return G&&(G.style.pointerEvents=""),V.style.pointerEvents="auto",h.style.pointerEvents="auto",()=>{V.style.pointerEvents="",h.style.pointerEvents=""}}}},[n,u,g,h,d,m,y,c,I]),Zw(()=>{u||(_.current=void 0,R(),P())},[u,R,P]),C.useEffect(()=>()=>{R(),clearTimeout(w.current),clearTimeout(x.current),P()},[n,R,P]),C.useMemo(()=>{if(!n)return{};function N(F){_.current=F.pointerType}return{reference:{onPointerDown:N,onPointerEnter:N,onMouseMove(){u||o===0||(clearTimeout(x.current),x.current=setTimeout(()=>{b.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(){f.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(!1)}}}},[f,n,o,u,l,k])},g2e=C.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),y2e=()=>C.useContext(g2e),Frt=e=>{let{children:t,delay:n,timeoutMs:r=0}=e;const[i,s]=C.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=C.useRef(null),a=C.useCallback(u=>{s({currentId:u})},[]);return Zw(()=>{i.currentId?o.current===null?o.current=i.currentId:s({isInstantPhase:!0}):(s({isInstantPhase:!1}),o.current=null)},[i.currentId]),C.createElement(g2e.Provider,{value:C.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,s,a])},t)},jrt=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,setCurrentId:o,initialDelay:a,setState:u,timeoutMs:l}=y2e();C.useEffect(()=>{s&&(u({delay:{open:1,close:PR(a,"close")}}),s!==i&&r(!1))},[i,r,u,s,a]),C.useEffect(()=>{function c(){r(!1),u({delay:a,currentId:null})}if(!n&&s===i)if(l){const f=window.setTimeout(c,l);return()=>{clearTimeout(f)}}else c()},[n,u,s,i,r,a,l]),C.useEffect(()=>{n&&o(i)},[n,o,i])};function Brt(e){let t=e.activeElement;for(;((n=t)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;t=t.shadowRoot.activeElement}return t}function pue(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Nrt(n)){let r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}function jj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)})||[],r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})})||[],n=n.concat(r);return n}function zrt(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Urt=gC.useInsertionEffect,Vrt=Urt||(e=>e());function v2e(e){const t=C.useRef(()=>{});return Vrt(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function kR(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const Hrt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qrt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Wrt=function(e){var t,n;return e===void 0&&(e=!0),{escapeKeyBubbles:typeof e=="boolean"?e:(t=e.escapeKey)!=null?t:!0,outsidePressBubbles:typeof e=="boolean"?e:(n=e.outsidePress)!=null?n:!0}},Grt=function(e,t){let{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:u},dataRef:l}=e,{enabled:c=!0,escapeKey:f=!0,outsidePress:d=!0,outsidePressEvent:h="pointerdown",referencePress:p=!1,referencePressEvent:m="pointerdown",ancestorScroll:g=!1,bubbles:y=!0}=t===void 0?{}:t;const v=OY(),_=h2e()!=null,w=v2e(typeof d=="function"?d:()=>!1),S=typeof d=="function"?w:d,x=C.useRef(!1),{escapeKeyBubbles:b,outsidePressBubbles:T}=Wrt(y);return C.useEffect(()=>{if(!n||!c)return;l.current.__escapeKeyBubbles=b,l.current.__outsidePressBubbles=T;function A(N){if(N.key==="Escape"){const F=v?jj(v.nodesRef.current,s):[];if(F.length>0){let B=!0;if(F.forEach(W=>{var V;if((V=W.context)!=null&&V.open&&!W.context.dataRef.current.__escapeKeyBubbles){B=!1;return}}),!B)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1)}}function I(N){const F=x.current;if(x.current=!1,F||typeof S=="function"&&!S(N))return;const B=zrt(N);if(p2e(B)&&u){const G=u.ownerDocument.defaultView||window,M=B.scrollWidth>B.clientWidth,H=B.scrollHeight>B.clientHeight;let Y=H&&N.offsetX>B.clientWidth;if(H&&G.getComputedStyle(B).direction==="rtl"&&(Y=N.offsetX<=B.offsetWidth-B.clientWidth),Y||M&&N.offsetY>B.clientHeight)return}const W=v&&jj(v.nodesRef.current,s).some(G=>{var M;return kR(N,(M=G.context)==null?void 0:M.elements.floating)});if(kR(N,u)||kR(N,a)||W)return;const V=v?jj(v.nodesRef.current,s):[];if(V.length>0){let G=!0;if(V.forEach(M=>{var H;if((H=M.context)!=null&&H.open&&!M.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:_?{preventScroll:!0}:Drt(N)||Mrt(N)}}),r(!1)}function k(){r(!1)}const R=Vg(u);f&&R.addEventListener("keydown",A),S&&R.addEventListener(h,I);let P=[];return g&&(Vd(a)&&(P=Hp(a)),Vd(u)&&(P=P.concat(Hp(u))),!Vd(o)&&o&&o.contextElement&&(P=P.concat(Hp(o.contextElement)))),P=P.filter(N=>{var F;return N!==((F=R.defaultView)==null?void 0:F.visualViewport)}),P.forEach(N=>{N.addEventListener("scroll",k,{passive:!0})}),()=>{f&&R.removeEventListener("keydown",A),S&&R.removeEventListener(h,I),P.forEach(N=>{N.removeEventListener("scroll",k)})}},[l,u,a,o,f,S,h,i,v,s,n,r,g,c,b,T,_]),C.useEffect(()=>{x.current=!1},[S,h]),C.useMemo(()=>c?{reference:{[Hrt[m]]:()=>{p&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1))}},floating:{[qrt[h]]:()=>{x.current=!0}}}:{},[c,i,p,h,m,r])},Yrt=function(e,t){let{open:n,onOpenChange:r,dataRef:i,events:s,refs:o,elements:{floating:a,domReference:u}}=e,{enabled:l=!0,keyboardOnly:c=!0}=t===void 0?{}:t;const f=C.useRef(""),d=C.useRef(!1),h=C.useRef();return C.useEffect(()=>{if(!l)return;const m=Vg(a).defaultView||window;function g(){!n&&p2e(u)&&u===Brt(Vg(u))&&(d.current=!0)}return m.addEventListener("blur",g),()=>{m.removeEventListener("blur",g)}},[a,u,n,l]),C.useEffect(()=>{if(!l)return;function p(m){(m.type==="referencePress"||m.type==="escapeKey")&&(d.current=!0)}return s.on("dismiss",p),()=>{s.off("dismiss",p)}},[s,l]),C.useEffect(()=>()=>{clearTimeout(h.current)},[]),C.useMemo(()=>l?{reference:{onPointerDown(p){let{pointerType:m}=p;f.current=m,d.current=!!(m&&c)},onMouseLeave(){d.current=!1},onFocus(p){var m;d.current||p.type==="focus"&&((m=i.current.openEvent)==null?void 0:m.type)==="mousedown"&&i.current.openEvent&&kR(i.current.openEvent,u)||(i.current.openEvent=p.nativeEvent,r(!0))},onBlur(p){d.current=!1;const m=p.relatedTarget,g=Vd(m)&&m.hasAttribute("data-floating-ui-focus-guard")&&m.getAttribute("data-type")==="outside";h.current=setTimeout(()=>{pue(o.floating.current,m)||pue(u,m)||g||r(!1)})}}}:{},[l,c,u,o,i,r])},Krt=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=fue(),o=fue();return C.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function kY(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:n,nodeId:r}=e,i=Trt(e),s=OY(),o=C.useRef(null),a=C.useRef({}),u=C.useState(()=>Ort())[0],[l,c]=C.useState(null),f=C.useCallback(y=>{const v=Vd(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),contextElement:y}:y;i.refs.setReference(v)},[i.refs]),d=C.useCallback(y=>{(Vd(y)||y===null)&&(o.current=y,c(y)),(Vd(i.refs.reference.current)||i.refs.reference.current===null||y!==null&&!Vd(y))&&i.refs.setReference(y)},[i.refs]),h=C.useMemo(()=>({...i.refs,setReference:d,setPositionReference:f,domReference:o}),[i.refs,d,f]),p=C.useMemo(()=>({...i.elements,domReference:l}),[i.elements,l]),m=v2e(n),g=C.useMemo(()=>({...i,refs:h,elements:p,dataRef:a,nodeId:r,events:u,open:t,onOpenChange:m}),[i,r,u,t,m,h,p]);return Zw(()=>{const y=s==null?void 0:s.nodesRef.current.find(v=>v.id===r);y&&(y.context=g)}),C.useMemo(()=>({...i,context:g,refs:h,reference:d,positionReference:f}),[i,h,g,d,f])}function Bj(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const Xrt=function(e){e===void 0&&(e=[]);const t=e,n=C.useCallback(s=>Bj(s,e,"reference"),t),r=C.useCallback(s=>Bj(s,e,"floating"),t),i=C.useCallback(s=>Bj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return C.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function _2e({opened:e,floating:t,positionDependencies:n}){const[r,i]=C.useState(0);C.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return wrt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,r]),xs(()=>{t.update()},n),xs(()=>{i(s=>s+1)},[e])}function Qrt(e){const t=[l2e(e.offset)];return e.middlewares.shift&&t.push(IY({limiter:xrt()})),e.middlewares.flip&&t.push(c2e()),e.middlewares.inline&&t.push(f2e()),t.push(d2e({element:e.arrowRef,padding:e.arrowOffset})),t}function Jrt(e){const[t,n]=Ea({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=kY({placement:e.position,middleware:[...Qrt(e),...e.width==="target"?[Ert({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return _2e({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),xs(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const b2e={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Zrt,w2e]=uI(b2e.context);var eit=Object.defineProperty,tit=Object.defineProperties,nit=Object.getOwnPropertyDescriptors,FN=Object.getOwnPropertySymbols,E2e=Object.prototype.hasOwnProperty,x2e=Object.prototype.propertyIsEnumerable,mue=(e,t,n)=>t in e?eit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$P=(e,t)=>{for(var n in t||(t={}))E2e.call(t,n)&&mue(e,n,t[n]);if(FN)for(var n of FN(t))x2e.call(t,n)&&mue(e,n,t[n]);return e},rit=(e,t)=>tit(e,nit(t)),iit=(e,t)=>{var n={};for(var r in e)E2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&x2e.call(e,r)&&(n[r]=e[r]);return n};const sit={refProp:"ref",popupType:"dialog"},S2e=C.forwardRef((e,t)=>{const n=ct("PopoverTarget",sit,e),{children:r,refProp:i,popupType:s}=n,o=iit(n,["children","refProp","popupType"]);if(!lI(r))throw new Error(b2e.children);const a=o,u=w2e(),l=As(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return C.cloneElement(r,$P(rit($P($P($P({},a),c),u.targetProps),{className:oSe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});S2e.displayName="@mantine/core/PopoverTarget";var oit=mt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}})),ait=Object.defineProperty,gue=Object.getOwnPropertySymbols,uit=Object.prototype.hasOwnProperty,lit=Object.prototype.propertyIsEnumerable,yue=(e,t,n)=>t in e?ait(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W_=(e,t)=>{for(var n in t||(t={}))uit.call(t,n)&&yue(e,n,t[n]);if(gue)for(var n of gue(t))lit.call(t,n)&&yue(e,n,t[n]);return e};const vue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function T2e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in CP?W_(W_(W_({transitionProperty:CP[e].transitionProperty},i),CP[e].common),CP[e][vue[t]]):null:W_(W_(W_({transitionProperty:e.transitionProperty},i),e.common),e[vue[t]])}function C2e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Cs(),l=pY(),c=u.respectReducedMotion?l:!1,[f,d]=C.useState(r?"entered":"exited");let h=c?0:e;const p=C.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return xs(()=>{m(r)},[r]),C.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function yI({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=C2e({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?z.createElement(z.Fragment,null,i({})):null:f==="exited"?null:z.createElement(z.Fragment,null,i(T2e({transition:e,duration:c,state:f,timingFunction:d})))}yI.displayName="@mantine/core/Transition";function A2e({children:e,active:t=!0,refProp:n="ref"}){const r=hY(t),i=As(r,e==null?void 0:e.ref);return lI(e)?C.cloneElement(e,{[n]:i}):e}A2e.displayName="@mantine/core/FocusTrap";var cit=Object.defineProperty,fit=Object.defineProperties,dit=Object.getOwnPropertyDescriptors,_ue=Object.getOwnPropertySymbols,hit=Object.prototype.hasOwnProperty,pit=Object.prototype.propertyIsEnumerable,bue=(e,t,n)=>t in e?cit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ng=(e,t)=>{for(var n in t||(t={}))hit.call(t,n)&&bue(e,n,t[n]);if(_ue)for(var n of _ue(t))pit.call(t,n)&&bue(e,n,t[n]);return e},NP=(e,t)=>fit(e,dit(t));function wue(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Eue(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const mit={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function git({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowPosition:s,arrowX:o,arrowY:a,dir:u}){const[l,c="center"]=e.split("-"),f={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[mit[l]]:i},d=t?-n/2-1:-n/2;return l==="left"?NP(ng(ng({},f),wue(c,a,r,s)),{right:d,borderLeft:0,borderBottom:0}):l==="right"?NP(ng(ng({},f),wue(c,a,r,s)),{left:d,borderRight:0,borderTop:0}):l==="top"?NP(ng(ng({},f),Eue(c,o,r,s,u)),{bottom:d,borderTop:0,borderLeft:0}):l==="bottom"?NP(ng(ng({},f),Eue(c,o,r,s,u)),{top:d,borderBottom:0,borderRight:0}):{}}var yit=Object.defineProperty,vit=Object.defineProperties,_it=Object.getOwnPropertyDescriptors,jN=Object.getOwnPropertySymbols,I2e=Object.prototype.hasOwnProperty,O2e=Object.prototype.propertyIsEnumerable,xue=(e,t,n)=>t in e?yit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bit=(e,t)=>{for(var n in t||(t={}))I2e.call(t,n)&&xue(e,n,t[n]);if(jN)for(var n of jN(t))O2e.call(t,n)&&xue(e,n,t[n]);return e},wit=(e,t)=>vit(e,_it(t)),Eit=(e,t)=>{var n={};for(var r in e)I2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jN)for(var r of jN(e))t.indexOf(r)<0&&O2e.call(e,r)&&(n[r]=e[r]);return n};const RY=C.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,arrowPosition:u,visible:l,arrowX:c,arrowY:f}=n,d=Eit(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","arrowPosition","visible","arrowX","arrowY"]);const h=Cs();return l?z.createElement("div",wit(bit({},d),{ref:t,style:git({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,arrowPosition:u,dir:h.dir,arrowX:c,arrowY:f})})):null});RY.displayName="@mantine/core/FloatingArrow";var xit=Object.defineProperty,Sit=Object.defineProperties,Tit=Object.getOwnPropertyDescriptors,BN=Object.getOwnPropertySymbols,P2e=Object.prototype.hasOwnProperty,k2e=Object.prototype.propertyIsEnumerable,Sue=(e,t,n)=>t in e?xit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DP=(e,t)=>{for(var n in t||(t={}))P2e.call(t,n)&&Sue(e,n,t[n]);if(BN)for(var n of BN(t))k2e.call(t,n)&&Sue(e,n,t[n]);return e},Tue=(e,t)=>Sit(e,Tit(t)),Cit=(e,t)=>{var n={};for(var r in e)P2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&k2e.call(e,r)&&(n[r]=e[r]);return n};const Ait={};function R2e(e){const t=ct("PopoverDropdown",Ait,e),{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=Cit(t,["style","className","children","onKeyDownCapture"]),a=w2e(),{classes:u,cx:l}=oit({radius:a.radius,shadow:a.shadow},{name:a.__staticSelector,classNames:a.classNames,styles:a.styles,unstyled:a.unstyled}),c=dY({opened:a.opened,shouldReturnFocus:a.returnFocus}),f=a.withRoles?{"aria-labelledby":a.getTargetId(),id:a.getDropdownId(),role:"dialog"}:{};return a.disabled?null:z.createElement(dx,{withinPortal:a.withinPortal},z.createElement(yI,{mounted:a.opened,transition:a.transition,duration:a.transitionDuration,exitDuration:typeof a.exitTransitionDuration=="number"?a.exitTransitionDuration:a.transitionDuration},d=>{var h,p;return z.createElement(A2e,{active:a.trapFocus},z.createElement(pt,DP(Tue(DP({},f),{tabIndex:-1,key:a.placement,ref:a.floating,style:Tue(DP(DP({},n),d),{zIndex:a.zIndex,top:(h=a.y)!=null?h:0,left:(p=a.x)!=null?p:0,width:a.width==="target"?void 0:a.width}),className:l(u.dropdown,r),onKeyDownCapture:yXe(a.onClose,{active:a.closeOnEscape,onTrigger:c,onKeyDown:s}),"data-position":a.placement}),o),i,z.createElement(RY,{ref:a.arrowRef,arrowX:a.arrowX,arrowY:a.arrowY,visible:a.withArrow,withBorder:!0,position:a.placement,arrowSize:a.arrowSize,arrowRadius:a.arrowRadius,arrowOffset:a.arrowOffset,arrowPosition:a.arrowPosition,className:u.arrow})))}))}R2e.displayName="@mantine/core/PopoverDropdown";function $2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var Cue=Object.getOwnPropertySymbols,Iit=Object.prototype.hasOwnProperty,Oit=Object.prototype.propertyIsEnumerable,Pit=(e,t)=>{var n={};for(var r in e)Iit.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Cue)for(var r of Cue(e))t.indexOf(r)<0&&Oit.call(e,r)&&(n[r]=e[r]);return n};const kit={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Rc("popover"),__staticSelector:"Popover",width:"max-content"};function Pr(e){var t,n,r,i,s,o;const a=C.useRef(null),u=ct("Popover",kit,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:w,arrowOffset:S,arrowRadius:x,arrowPosition:b,unstyled:T,classNames:A,styles:I,closeOnClickOutside:k,withinPortal:R,closeOnEscape:P,clickOutsideEvents:N,trapFocus:F,onClose:B,onOpen:W,onChange:V,zIndex:G,radius:M,shadow:H,id:Y,defaultOpened:L,exitTransitionDuration:j,__staticSelector:q,withRoles:Z,disabled:ue,returnFocus:he}=u,fe=Pit(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[me,_e]=C.useState(null),[ge,Be]=C.useState(null),Me=Ia(Y),ut=Cs(),Oe=Jrt({middlewares:v,width:y,position:$2e(ut.dir,c),offset:f+(_?w/2:0),arrowRef:a,arrowOffset:S,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:L,onChange:V,onOpen:W,onClose:B});_Je(()=>k&&Oe.onClose(),N,[me,ge]);const Re=C.useCallback(Ut=>{_e(Ut),Oe.floating.reference(Ut)},[Oe.floating.reference]),Ye=C.useCallback(Ut=>{Be(Ut),Oe.floating.floating(Ut)},[Oe.floating.floating]);return z.createElement(Zrt,{value:{returnFocus:he,disabled:ue,controlled:Oe.controlled,reference:Re,floating:Ye,x:Oe.floating.x,y:Oe.floating.y,arrowX:(r=(n=(t=Oe.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Oe.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Oe.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:j,width:y,withArrow:_,arrowSize:w,arrowOffset:S,arrowRadius:x,arrowPosition:b,placement:Oe.floating.placement,trapFocus:F,withinPortal:R,zIndex:G,radius:M,shadow:H,closeOnEscape:P,onClose:Oe.onClose,onToggle:Oe.onToggle,getTargetId:()=>`${Me}-target`,getDropdownId:()=>`${Me}-dropdown`,withRoles:Z,targetProps:fe,__staticSelector:q,classNames:A,styles:I,unstyled:T}},l)}Pr.Target=S2e;Pr.Dropdown=R2e;Pr.displayName="@mantine/core/Popover";var Rit=Object.defineProperty,zN=Object.getOwnPropertySymbols,N2e=Object.prototype.hasOwnProperty,D2e=Object.prototype.propertyIsEnumerable,Aue=(e,t,n)=>t in e?Rit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$it=(e,t)=>{for(var n in t||(t={}))N2e.call(t,n)&&Aue(e,n,t[n]);if(zN)for(var n of zN(t))D2e.call(t,n)&&Aue(e,n,t[n]);return e},Nit=(e,t)=>{var n={};for(var r in e)N2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&D2e.call(e,r)&&(n[r]=e[r]);return n};function Dit(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=Nit(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=jnt(null,{name:u,styles:l,classNames:c,unstyled:f});return z.createElement(Pr.Dropdown,$it({p:0,onMouseDown:p=>p.preventDefault()},d),z.createElement("div",{style:{maxHeight:i,display:"flex"}},z.createElement(pt,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==n4?"auto":void 0},"data-combobox-popover":!0,ref:a},z.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function f0({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return z.createElement(Pr,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}f0.Target=Pr.Target;f0.Dropdown=Dit;var Mit=Object.defineProperty,Lit=Object.defineProperties,Fit=Object.getOwnPropertyDescriptors,UN=Object.getOwnPropertySymbols,M2e=Object.prototype.hasOwnProperty,L2e=Object.prototype.propertyIsEnumerable,Iue=(e,t,n)=>t in e?Mit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MP=(e,t)=>{for(var n in t||(t={}))M2e.call(t,n)&&Iue(e,n,t[n]);if(UN)for(var n of UN(t))L2e.call(t,n)&&Iue(e,n,t[n]);return e},jit=(e,t)=>Lit(e,Fit(t)),Bit=(e,t)=>{var n={};for(var r in e)M2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UN)for(var r of UN(e))t.indexOf(r)<0&&L2e.call(e,r)&&(n[r]=e[r]);return n};function F2e(e,t,n){const r=ct(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:S,inputWrapperOrder:x,withAsterisk:b}=r,T=Bit(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),A=Ia(v),{systemStyles:I,rest:k}=Lh(T),R=MP({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:A,size:_,style:w,inputContainer:S,inputWrapperOrder:x,withAsterisk:b},y);return jit(MP({},k),{classNames:u,styles:l,unstyled:f,wrapperProps:MP(MP({},R),I),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:A,size:_,__staticSelector:d,invalid:!!o}})}var zit=mt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}})),Uit=Object.defineProperty,VN=Object.getOwnPropertySymbols,j2e=Object.prototype.hasOwnProperty,B2e=Object.prototype.propertyIsEnumerable,Oue=(e,t,n)=>t in e?Uit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vit=(e,t)=>{for(var n in t||(t={}))j2e.call(t,n)&&Oue(e,n,t[n]);if(VN)for(var n of VN(t))B2e.call(t,n)&&Oue(e,n,t[n]);return e},Hit=(e,t)=>{var n={};for(var r in e)j2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&B2e.call(e,r)&&(n[r]=e[r]);return n};const qit={labelElement:"label",size:"sm"},$Y=C.forwardRef((e,t)=>{const n=ct("InputLabel",qit,e),{labelElement:r,children:i,required:s,size:o,classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=Hit(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]),{classes:p,cx:m}=zit({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return z.createElement(pt,Vit({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&z.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});$Y.displayName="@mantine/core/InputLabel";var Wit=mt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}})),Git=Object.defineProperty,HN=Object.getOwnPropertySymbols,z2e=Object.prototype.hasOwnProperty,U2e=Object.prototype.propertyIsEnumerable,Pue=(e,t,n)=>t in e?Git(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yit=(e,t)=>{for(var n in t||(t={}))z2e.call(t,n)&&Pue(e,n,t[n]);if(HN)for(var n of HN(t))U2e.call(t,n)&&Pue(e,n,t[n]);return e},Kit=(e,t)=>{var n={};for(var r in e)z2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&U2e.call(e,r)&&(n[r]=e[r]);return n};const Xit={size:"sm"},NY=C.forwardRef((e,t)=>{const n=ct("InputError",Xit,e),{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u,__staticSelector:l}=n,c=Kit(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]),{classes:f,cx:d}=Wit({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return z.createElement(dt,Yit({className:d(f.error,i),ref:t},c),r)});NY.displayName="@mantine/core/InputError";var Qit=mt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}})),Jit=Object.defineProperty,qN=Object.getOwnPropertySymbols,V2e=Object.prototype.hasOwnProperty,H2e=Object.prototype.propertyIsEnumerable,kue=(e,t,n)=>t in e?Jit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zit=(e,t)=>{for(var n in t||(t={}))V2e.call(t,n)&&kue(e,n,t[n]);if(qN)for(var n of qN(t))H2e.call(t,n)&&kue(e,n,t[n]);return e},est=(e,t)=>{var n={};for(var r in e)V2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&H2e.call(e,r)&&(n[r]=e[r]);return n};const tst={size:"sm"},DY=C.forwardRef((e,t)=>{const n=ct("InputDescription",tst,e),{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u,__staticSelector:l}=n,c=est(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]),{classes:f,cx:d}=Qit({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return z.createElement(dt,Zit({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});DY.displayName="@mantine/core/InputDescription";const q2e=C.createContext({offsetBottom:!1,offsetTop:!1,describedBy:void 0}),nst=q2e.Provider,rst=()=>C.useContext(q2e);function ist(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var sst=Object.defineProperty,ost=Object.defineProperties,ast=Object.getOwnPropertyDescriptors,Rue=Object.getOwnPropertySymbols,ust=Object.prototype.hasOwnProperty,lst=Object.prototype.propertyIsEnumerable,$ue=(e,t,n)=>t in e?sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cst=(e,t)=>{for(var n in t||(t={}))ust.call(t,n)&&$ue(e,n,t[n]);if(Rue)for(var n of Rue(t))lst.call(t,n)&&$ue(e,n,t[n]);return e},fst=(e,t)=>ost(e,ast(t)),dst=mt(e=>({root:fst(cst({},e.fn.fontStyles()),{lineHeight:e.lineHeight})})),hst=Object.defineProperty,pst=Object.defineProperties,mst=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,W2e=Object.prototype.hasOwnProperty,G2e=Object.prototype.propertyIsEnumerable,Nue=(e,t,n)=>t in e?hst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rg=(e,t)=>{for(var n in t||(t={}))W2e.call(t,n)&&Nue(e,n,t[n]);if(WN)for(var n of WN(t))G2e.call(t,n)&&Nue(e,n,t[n]);return e},Due=(e,t)=>pst(e,mst(t)),gst=(e,t)=>{var n={};for(var r in e)W2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&G2e.call(e,r)&&(n[r]=e[r]);return n};const yst={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Y2e=C.forwardRef((e,t)=>{const n=ct("InputWrapper",yst,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:w,withAsterisk:S}=n,x=gst(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:b,cx:T}=dst(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),A={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},I=typeof S=="boolean"?S:o,k=a?`${a}-error`:h==null?void 0:h.id,R=a?`${a}-description`:d==null?void 0:d.id,N=`${!!u&&typeof u!="boolean"?k:""} ${l?R:""}`,F=N.trim().length>0?N.trim():void 0,B=i&&z.createElement($Y,rg(rg({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:I},A),f),i),W=l&&z.createElement(DY,Due(rg(rg({key:"description"},d),A),{size:(d==null?void 0:d.size)||A.size,id:(d==null?void 0:d.id)||R}),l),V=z.createElement(C.Fragment,{key:"input"},y(s)),G=typeof u!="boolean"&&u&&z.createElement(NY,Due(rg(rg({},h),A),{size:(h==null?void 0:h.size)||A.size,key:"error",id:(h==null?void 0:h.id)||k}),u),M=w.map(H=>{switch(H){case"label":return B;case"input":return V;case"description":return W;case"error":return G;default:return null}});return z.createElement(nst,{value:rg({describedBy:F},ist(w,{hasDescription:!!W,hasError:!!G}))},z.createElement(pt,rg({className:T(b.root,r),ref:t},x),M))});Y2e.displayName="@mantine/core/InputWrapper";var vst=Object.defineProperty,GN=Object.getOwnPropertySymbols,K2e=Object.prototype.hasOwnProperty,X2e=Object.prototype.propertyIsEnumerable,Mue=(e,t,n)=>t in e?vst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_st=(e,t)=>{for(var n in t||(t={}))K2e.call(t,n)&&Mue(e,n,t[n]);if(GN)for(var n of GN(t))X2e.call(t,n)&&Mue(e,n,t[n]);return e},bst=(e,t)=>{var n={};for(var r in e)K2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&X2e.call(e,r)&&(n[r]=e[r]);return n};const wst={},Q2e=C.forwardRef((e,t)=>{const n=ct("InputPlaceholder",wst,e),{sx:r}=n,i=bst(n,["sx"]);return z.createElement(pt,_st({component:"span",sx:[s=>s.fn.placeholderStyles(),...O0(r)],ref:t},i))});Q2e.displayName="@mantine/core/InputPlaceholder";var Est=Object.defineProperty,xst=Object.defineProperties,Sst=Object.getOwnPropertyDescriptors,Lue=Object.getOwnPropertySymbols,Tst=Object.prototype.hasOwnProperty,Cst=Object.prototype.propertyIsEnumerable,Fue=(e,t,n)=>t in e?Est(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LP=(e,t)=>{for(var n in t||(t={}))Tst.call(t,n)&&Fue(e,n,t[n]);if(Lue)for(var n of Lue(t))Cst.call(t,n)&&Fue(e,n,t[n]);return e},zj=(e,t)=>xst(e,Sst(t));const oa={xs:30,sm:36,md:42,lg:50,xl:60};function Ast({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Ist=mt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:oa}),paddingLeft:e.fn.size({size:t,sizes:oa})/3,paddingRight:a?o:e.fn.size({size:t,sizes:oa})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:LP(zj(LP(zj(LP({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:oa}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:oa})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":zj(LP({},e.fn.placeholderStyles()),{opacity:1}),"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Ast({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:oa})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:oa}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}}),Ost=Object.defineProperty,Pst=Object.defineProperties,kst=Object.getOwnPropertyDescriptors,YN=Object.getOwnPropertySymbols,J2e=Object.prototype.hasOwnProperty,Z2e=Object.prototype.propertyIsEnumerable,jue=(e,t,n)=>t in e?Ost(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FP=(e,t)=>{for(var n in t||(t={}))J2e.call(t,n)&&jue(e,n,t[n]);if(YN)for(var n of YN(t))Z2e.call(t,n)&&jue(e,n,t[n]);return e},Bue=(e,t)=>Pst(e,kst(t)),Rst=(e,t)=>{var n={};for(var r in e)J2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&Z2e.call(e,r)&&(n[r]=e[r]);return n};const $st={rightSectionWidth:36,size:"sm",variant:"default"},c_=C.forwardRef((e,t)=>{const n=ct("Input",$st,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:w,sx:S,unstyled:x,pointer:b}=n,T=Rst(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:A,offsetTop:I,describedBy:k}=rst(),{classes:R,cx:P}=Ist({radius:p,size:m,multiline:w,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:A,offsetTop:I,pointer:b},{classNames:y,styles:v,name:["Input",_],unstyled:x}),{systemStyles:N,rest:F}=Lh(T);return z.createElement(pt,FP(FP({className:P(R.wrapper,r),sx:S,style:l},N),g),u&&z.createElement("div",{className:R.icon},u),z.createElement(pt,Bue(FP({component:"input"},F),{ref:t,required:s,"aria-invalid":i,"aria-describedby":k,disabled:o,className:P(R[`${a}Variant`],R.input,{[R.withIcon]:u,[R.invalid]:i,[R.disabled]:o})})),d&&z.createElement("div",Bue(FP({},h),{className:R.rightSection}),d))});c_.displayName="@mantine/core/Input";c_.Wrapper=Y2e;c_.Label=$Y;c_.Description=DY;c_.Error=NY;c_.Placeholder=Q2e;const Ss=c_;var Nst=Object.defineProperty,Dst=Object.defineProperties,Mst=Object.getOwnPropertyDescriptors,zue=Object.getOwnPropertySymbols,Lst=Object.prototype.hasOwnProperty,Fst=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?Nst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uj=(e,t)=>{for(var n in t||(t={}))Lst.call(t,n)&&Uue(e,n,t[n]);if(zue)for(var n of zue(t))Fst.call(t,n)&&Uue(e,n,t[n]);return e},jst=(e,t)=>Dst(e,Mst(t));const Vj={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Bst={xs:4,sm:4,md:6,lg:8,xl:10};function zst({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:Bst});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var Ust=mt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in Vj?Vj[n]:Vj.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:Uj(jst(Uj(Uj({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),zst({theme:e,variant:o,color:t,size:n,gradient:i}))}}),Vst=Object.defineProperty,KN=Object.getOwnPropertySymbols,eCe=Object.prototype.hasOwnProperty,tCe=Object.prototype.propertyIsEnumerable,Vue=(e,t,n)=>t in e?Vst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hst=(e,t)=>{for(var n in t||(t={}))eCe.call(t,n)&&Vue(e,n,t[n]);if(KN)for(var n of KN(t))tCe.call(t,n)&&Vue(e,n,t[n]);return e},qst=(e,t)=>{var n={};for(var r in e)eCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&tCe.call(e,r)&&(n[r]=e[r]);return n};const Wst={variant:"light",size:"md",radius:"xl"},nCe=C.forwardRef((e,t)=>{const n=ct("Badge",Wst,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=qst(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=Ust({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return z.createElement(pt,Hst({className:v(y.root,r),ref:t},g),l&&z.createElement("span",{className:y.leftSection},l),z.createElement("span",{className:y.inner},a),c&&z.createElement("span",{className:y.rightSection},c))});nCe.displayName="@mantine/core/Badge";const RR=nCe,Gst={xs:12,sm:18,md:24,lg:34,xl:42};var Yst=mt((e,{size:t,color:n,transitionDuration:r})=>{const i=e.fn.size({size:t,sizes:Gst}),s=n||(e.colorScheme==="dark"?e.white:e.black);return{root:{borderRadius:e.radius.sm,width:`calc(${i}px + ${e.spacing.xs}px)`,height:`calc(${i}px + ${e.spacing.xs}px)`,padding:`calc(${e.spacing.xs}px / 2)`,cursor:"pointer"},burger:{position:"relative",userSelect:"none",boxSizing:"border-box","&, &::before, &::after":{display:"block",width:i,height:Math.ceil(i/12),backgroundColor:s,outline:"1px solid transparent",transitionProperty:"background-color, transform",transitionDuration:`${r}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},"&::before, &::after":{position:"absolute",content:'""',left:0},"&::before":{top:i/3*-1},"&::after":{top:i/3},"&[data-opened]":{backgroundColor:"transparent","&::before":{transform:`translateY(${i/3}px) rotate(45deg)`},"&::after":{transform:`translateY(-${i/3}px) rotate(-45deg)`}}}}}),Kst=Object.defineProperty,XN=Object.getOwnPropertySymbols,rCe=Object.prototype.hasOwnProperty,iCe=Object.prototype.propertyIsEnumerable,Hue=(e,t,n)=>t in e?Kst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xst=(e,t)=>{for(var n in t||(t={}))rCe.call(t,n)&&Hue(e,n,t[n]);if(XN)for(var n of XN(t))iCe.call(t,n)&&Hue(e,n,t[n]);return e},Qst=(e,t)=>{var n={};for(var r in e)rCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&iCe.call(e,r)&&(n[r]=e[r]);return n};const Jst={size:"md",transitionDuration:300},sCe=C.forwardRef((e,t)=>{const n=ct("Burger",Jst,e),{className:r,opened:i,color:s,size:o,classNames:a,styles:u,transitionDuration:l}=n,c=Qst(n,["className","opened","color","size","classNames","styles","transitionDuration"]),{classes:f,cx:d}=Yst({color:s,size:o,transitionDuration:l},{classNames:a,styles:u,name:"Burger"});return z.createElement(_y,Xst({className:d(f.root,r),ref:t},c),z.createElement("div",{"data-opened":i||void 0,className:f.burger}))});sCe.displayName="@mantine/core/Burger";var Zst=mt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}})),eot=Object.defineProperty,QN=Object.getOwnPropertySymbols,oCe=Object.prototype.hasOwnProperty,aCe=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?eot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tot=(e,t)=>{for(var n in t||(t={}))oCe.call(t,n)&&que(e,n,t[n]);if(QN)for(var n of QN(t))aCe.call(t,n)&&que(e,n,t[n]);return e},not=(e,t)=>{var n={};for(var r in e)oCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&aCe.call(e,r)&&(n[r]=e[r]);return n};const rot={orientation:"horizontal",buttonBorderWidth:1},uCe=C.forwardRef((e,t)=>{const n=ct("ButtonGroup",rot,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=not(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=Zst({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return z.createElement(pt,tot({className:l(u.root,r),ref:t},a))});uCe.displayName="@mantine/core/ButtonGroup";var iot=Object.defineProperty,sot=Object.defineProperties,oot=Object.getOwnPropertyDescriptors,Wue=Object.getOwnPropertySymbols,aot=Object.prototype.hasOwnProperty,uot=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?iot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_v=(e,t)=>{for(var n in t||(t={}))aot.call(t,n)&&Gue(e,n,t[n]);if(Wue)for(var n of Wue(t))uot.call(t,n)&&Gue(e,n,t[n]);return e},EU=(e,t)=>sot(e,oot(t));const xU={xs:{height:oa.xs,paddingLeft:14,paddingRight:14},sm:{height:oa.sm,paddingLeft:18,paddingRight:18},md:{height:oa.md,paddingLeft:22,paddingRight:22},lg:{height:oa.lg,paddingLeft:26,paddingRight:26},xl:{height:oa.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function lot({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return xU[`compact-${t}`];const i=xU[t];return EU(_v({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const cot=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function fot({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:_v({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var dot=mt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:EU(_v(EU(_v(_v(_v(_v({},lot({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),cot(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),fot({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}})),hot=Object.defineProperty,JN=Object.getOwnPropertySymbols,lCe=Object.prototype.hasOwnProperty,cCe=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?hot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kue=(e,t)=>{for(var n in t||(t={}))lCe.call(t,n)&&Yue(e,n,t[n]);if(JN)for(var n of JN(t))cCe.call(t,n)&&Yue(e,n,t[n]);return e},pot=(e,t)=>{var n={};for(var r in e)lCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&cCe.call(e,r)&&(n[r]=e[r]);return n};const mot={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},MY=C.forwardRef((e,t)=>{const n=ct("Button",mot,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:w,styles:S,unstyled:x}=n,b=pot(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:T,cx:A,theme:I}=dot({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:x,classNames:w,styles:S}),k=I.fn.variant({color:s,variant:d}),R=z.createElement(dh,Kue({color:k.color,size:I.fn.size({size:i,sizes:xU}).height/2},v));return z.createElement(_y,Kue({className:A(T.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:x},b),z.createElement("div",{className:T.inner},(l||g&&y==="left")&&z.createElement("span",{className:A(T.icon,T.leftIcon)},g&&y==="left"?R:l),g&&y==="center"&&z.createElement("span",{className:T.centerLoader},R),z.createElement("span",{className:T.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&z.createElement("span",{className:A(T.icon,T.rightIcon)},g&&y==="right"?R:c)))});MY.displayName="@mantine/core/Button";MY.Group=uCe;const Lr=MY;var got=mt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}})),yot=Object.defineProperty,ZN=Object.getOwnPropertySymbols,fCe=Object.prototype.hasOwnProperty,dCe=Object.prototype.propertyIsEnumerable,Xue=(e,t,n)=>t in e?yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vot=(e,t)=>{for(var n in t||(t={}))fCe.call(t,n)&&Xue(e,n,t[n]);if(ZN)for(var n of ZN(t))dCe.call(t,n)&&Xue(e,n,t[n]);return e},_ot=(e,t)=>{var n={};for(var r in e)fCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&dCe.call(e,r)&&(n[r]=e[r]);return n};const bot={},hCe=C.forwardRef((e,t)=>{const n=ct("Paper",bot,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=_ot(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=got({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return z.createElement(pt,vot({className:f(c.root,r),ref:t},l),i)});hCe.displayName="@mantine/core/Paper";const LY=hCe,pCe=C.createContext({padding:0}),wot=pCe.Provider,Eot=()=>C.useContext(pCe).padding;var xot=mt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}}),Sot=Object.defineProperty,eD=Object.getOwnPropertySymbols,mCe=Object.prototype.hasOwnProperty,gCe=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?Sot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tot=(e,t)=>{for(var n in t||(t={}))mCe.call(t,n)&&Que(e,n,t[n]);if(eD)for(var n of eD(t))gCe.call(t,n)&&Que(e,n,t[n]);return e},Cot=(e,t)=>{var n={};for(var r in e)mCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&gCe.call(e,r)&&(n[r]=e[r]);return n};const Aot={withBorder:!1,inheritPadding:!1},yCe=C.forwardRef((e,t)=>{const n=ct("CardSection",Aot,e),{className:r,withBorder:i,inheritPadding:s,unstyled:o}=n,a=Cot(n,["className","withBorder","inheritPadding","unstyled"]),{classes:u,cx:l}=xot({padding:Eot(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return z.createElement(pt,Tot({className:l(u.cardSection,r),ref:t},a))});yCe.displayName="@mantine/core/CardSection";const vCe=yCe;var Iot=mt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}})),Oot=Object.defineProperty,tD=Object.getOwnPropertySymbols,_Ce=Object.prototype.hasOwnProperty,bCe=Object.prototype.propertyIsEnumerable,Jue=(e,t,n)=>t in e?Oot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Pot=(e,t)=>{for(var n in t||(t={}))_Ce.call(t,n)&&Jue(e,n,t[n]);if(tD)for(var n of tD(t))bCe.call(t,n)&&Jue(e,n,t[n]);return e},kot=(e,t)=>{var n={};for(var r in e)_Ce.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&bCe.call(e,r)&&(n[r]=e[r]);return n};const Rot={p:"md"},FY=C.forwardRef((e,t)=>{const n=ct("Card",Rot,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=kot(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Iot(null,{name:"Card",unstyled:a}),f=C.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===vCe?C.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return z.createElement(wot,{value:{padding:i}},z.createElement(LY,Pot({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});FY.Section=vCe;FY.displayName="@mantine/core/Card";const i4=FY;var $ot=Object.defineProperty,nD=Object.getOwnPropertySymbols,wCe=Object.prototype.hasOwnProperty,ECe=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?$ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Not=(e,t)=>{for(var n in t||(t={}))wCe.call(t,n)&&Zue(e,n,t[n]);if(nD)for(var n of nD(t))ECe.call(t,n)&&Zue(e,n,t[n]);return e},Dot=(e,t)=>{var n={};for(var r in e)wCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&ECe.call(e,r)&&(n[r]=e[r]);return n};const xCe=C.forwardRef((e,t)=>{const n=ct("Center",{},e),{inline:r,sx:i}=n,s=Dot(n,["inline","sx"]);return z.createElement(pt,Not({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...O0(i)]},s))});xCe.displayName="@mantine/core/Center";const Ya=xCe,SCe=C.createContext(null),Mot=SCe.Provider,Lot=()=>C.useContext(SCe);function Fot(e){return C.Children.toArray(e).filter(Boolean)}const TCe={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var jot=mt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:TCe[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}})),Bot=Object.defineProperty,rD=Object.getOwnPropertySymbols,CCe=Object.prototype.hasOwnProperty,ACe=Object.prototype.propertyIsEnumerable,ele=(e,t,n)=>t in e?Bot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zot=(e,t)=>{for(var n in t||(t={}))CCe.call(t,n)&&ele(e,n,t[n]);if(rD)for(var n of rD(t))ACe.call(t,n)&&ele(e,n,t[n]);return e},Uot=(e,t)=>{var n={};for(var r in e)CCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&ACe.call(e,r)&&(n[r]=e[r]);return n};const Vot={position:"left",spacing:"md"},gr=C.forwardRef((e,t)=>{const n=ct("Group",Vot,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=Uot(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=Fot(o),{classes:h,cx:p}=jot({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return z.createElement(pt,zot({className:p(h.root,r),ref:t},f),d)});gr.displayName="@mantine/core/Group";var Hot=mt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}})),qot=Object.defineProperty,iD=Object.getOwnPropertySymbols,ICe=Object.prototype.hasOwnProperty,OCe=Object.prototype.propertyIsEnumerable,tle=(e,t,n)=>t in e?qot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wot=(e,t)=>{for(var n in t||(t={}))ICe.call(t,n)&&tle(e,n,t[n]);if(iD)for(var n of iD(t))OCe.call(t,n)&&tle(e,n,t[n]);return e},Got=(e,t)=>{var n={};for(var r in e)ICe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&OCe.call(e,r)&&(n[r]=e[r]);return n};const Yot={spacing:"md",align:"stretch",justify:"flex-start"},Bi=C.forwardRef((e,t)=>{const n=ct("Stack",Yot,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=Got(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=Hot({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return z.createElement(pt,Wot({className:c(l.root,i),ref:t},u))});Bi.displayName="@mantine/core/Stack";function PCe({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?z.createElement(gr,{pt:t,spacing:e,role:i,unstyled:s},r):z.createElement(Bi,{pt:t,spacing:e,role:i,unstyled:s},r)}var Kot=Object.defineProperty,sD=Object.getOwnPropertySymbols,kCe=Object.prototype.hasOwnProperty,RCe=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?Kot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rle=(e,t)=>{for(var n in t||(t={}))kCe.call(t,n)&&nle(e,n,t[n]);if(sD)for(var n of sD(t))RCe.call(t,n)&&nle(e,n,t[n]);return e},Xot=(e,t)=>{var n={};for(var r in e)kCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&RCe.call(e,r)&&(n[r]=e[r]);return n};const Qot={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},$Ce=C.forwardRef((e,t)=>{const n=ct("CheckboxGroup",Qot,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=Xot(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=Ea({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return z.createElement(Mot,{value:{value:h,onChange:m,size:l}},z.createElement(Ss.Wrapper,rle(rle({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),z.createElement(PCe,{spacing:u,orientation:a,offset:f},r)))});$Ce.displayName="@mantine/core/CheckboxGroup";var Jot=Object.defineProperty,oD=Object.getOwnPropertySymbols,NCe=Object.prototype.hasOwnProperty,DCe=Object.prototype.propertyIsEnumerable,ile=(e,t,n)=>t in e?Jot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SU=(e,t)=>{for(var n in t||(t={}))NCe.call(t,n)&&ile(e,n,t[n]);if(oD)for(var n of oD(t))DCe.call(t,n)&&ile(e,n,t[n]);return e},Zot=(e,t)=>{var n={};for(var r in e)NCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&DCe.call(e,r)&&(n[r]=e[r]);return n};function eat(e){return z.createElement("svg",SU({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),z.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function tat(e){var t=e,{indeterminate:n}=t,r=Zot(t,["indeterminate"]);return n?z.createElement("svg",SU({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),z.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):z.createElement(eat,SU({},r))}var nat=Object.defineProperty,rat=Object.defineProperties,iat=Object.getOwnPropertyDescriptors,sle=Object.getOwnPropertySymbols,sat=Object.prototype.hasOwnProperty,oat=Object.prototype.propertyIsEnumerable,ole=(e,t,n)=>t in e?nat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aat=(e,t)=>{for(var n in t||(t={}))sat.call(t,n)&&ole(e,n,t[n]);if(sle)for(var n of sle(t))oat.call(t,n)&&ole(e,n,t[n]);return e},uat=(e,t)=>rat(e,iat(t));const lat={xs:16,sm:20,md:24,lg:30,xl:36},cat={xs:8,sm:10,md:14,lg:16,xl:20};var fat=mt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:lat}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:cat}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:uat(aat({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}}),dat=Object.defineProperty,hat=Object.defineProperties,pat=Object.getOwnPropertyDescriptors,ale=Object.getOwnPropertySymbols,mat=Object.prototype.hasOwnProperty,gat=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?dat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yat=(e,t)=>{for(var n in t||(t={}))mat.call(t,n)&&ule(e,n,t[n]);if(ale)for(var n of ale(t))gat.call(t,n)&&ule(e,n,t[n]);return e},vat=(e,t)=>hat(e,pat(t));const _at={xs:16,sm:20,md:24,lg:30,xl:36};var bat=mt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"flex"},labelWrapper:vat(yat({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:_at})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}})),wat=Object.defineProperty,aD=Object.getOwnPropertySymbols,MCe=Object.prototype.hasOwnProperty,LCe=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?wat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eat=(e,t)=>{for(var n in t||(t={}))MCe.call(t,n)&&lle(e,n,t[n]);if(aD)for(var n of aD(t))LCe.call(t,n)&&lle(e,n,t[n]);return e},xat=(e,t)=>{var n={};for(var r in e)MCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aD)for(var r of aD(e))t.indexOf(r)<0&&LCe.call(e,r)&&(n[r]=e[r]);return n};function jY(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=xat(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=bat({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return z.createElement(pt,Eat({className:y(g.root,r)},m),z.createElement("div",{className:y(g.body)},a,z.createElement("div",{className:g.labelWrapper},u&&z.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&z.createElement(Ss.Description,{className:g.description},l),d&&d!=="boolean"&&z.createElement(Ss.Error,{className:g.error},d))))}jY.displayName="@mantine/core/InlineInput";var Sat=Object.defineProperty,uD=Object.getOwnPropertySymbols,FCe=Object.prototype.hasOwnProperty,jCe=Object.prototype.propertyIsEnumerable,cle=(e,t,n)=>t in e?Sat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jP=(e,t)=>{for(var n in t||(t={}))FCe.call(t,n)&&cle(e,n,t[n]);if(uD)for(var n of uD(t))jCe.call(t,n)&&cle(e,n,t[n]);return e},Tat=(e,t)=>{var n={};for(var r in e)FCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uD)for(var r of uD(e))t.indexOf(r)<0&&jCe.call(e,r)&&(n[r]=e[r]);return n};const Cat={size:"sm",transitionDuration:100,icon:tat,labelPosition:"right"},eE=C.forwardRef((e,t)=>{const n=ct("Checkbox",Cat,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:w,labelPosition:S,description:x,error:b}=n,T=Tat(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),A=Lot(),I=Ia(f),{systemStyles:k,rest:R}=Lh(T),{classes:P}=fat({size:(A==null?void 0:A.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:S,error:!!b,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:w}),N=A?{checked:A.value.includes(R.value),onChange:A.onChange}:{};return z.createElement(jY,jP(jP({className:r,sx:s,style:i,id:I,size:(A==null?void 0:A.size)||d,labelPosition:S,label:l,description:x,error:b,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:w,"data-checked":N.checked||void 0},k),p),z.createElement("div",{className:P.inner},z.createElement("input",jP(jP({id:I,ref:t,type:"checkbox",className:P.input,checked:o,disabled:a},R),N)),z.createElement(_,{indeterminate:c,className:P.icon})))});eE.displayName="@mantine/core/Checkbox";eE.Group=$Ce;var Aat=Object.defineProperty,Iat=Object.defineProperties,Oat=Object.getOwnPropertyDescriptors,fle=Object.getOwnPropertySymbols,Pat=Object.prototype.hasOwnProperty,kat=Object.prototype.propertyIsEnumerable,dle=(e,t,n)=>t in e?Aat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rat=(e,t)=>{for(var n in t||(t={}))Pat.call(t,n)&&dle(e,n,t[n]);if(fle)for(var n of fle(t))kat.call(t,n)&&dle(e,n,t[n]);return e},$at=(e,t)=>Iat(e,Oat(t)),Nat=mt((e,{size:t,radius:n})=>{const r=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{root:$at(Rat({},e.fn.focusStyles()),{width:t,height:t,WebkitTapHighlightColor:"transparent",border:0,borderRadius:e.fn.size({size:n,sizes:e.radius}),appearance:"none",WebkitAppearance:"none",padding:0,position:"relative",overflow:"hidden"}),overlay:{position:"absolute",borderRadius:e.fn.size({size:n,sizes:e.radius}),top:0,left:0,right:0,bottom:0},children:{display:"inline-flex",justifyContent:"center",alignItems:"center"},shadowOverlay:{boxShadow:"rgba(0, 0, 0, .1) 0px 0px 0px 1px inset, rgb(0, 0, 0, .15) 0px 0px 4px inset",zIndex:1},alphaOverlay:{backgroundImage:`linear-gradient(45deg, ${r} 25%, transparent 25%), linear-gradient(-45deg, ${r} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${r} 75%), linear-gradient(-45deg, ${e.colorScheme==="dark"?e.colors.dark[7]:e.white} 75%, ${r} 75%)`,backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}}}),Dat=Object.defineProperty,lD=Object.getOwnPropertySymbols,BCe=Object.prototype.hasOwnProperty,zCe=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?Dat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mat=(e,t)=>{for(var n in t||(t={}))BCe.call(t,n)&&hle(e,n,t[n]);if(lD)for(var n of lD(t))zCe.call(t,n)&&hle(e,n,t[n]);return e},Lat=(e,t)=>{var n={};for(var r in e)BCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lD)for(var r of lD(e))t.indexOf(r)<0&&zCe.call(e,r)&&(n[r]=e[r]);return n};const Fat={size:25,radius:25,withShadow:!0},UCe=C.forwardRef((e,t)=>{const n=ct("ColorSwatch",Fat,e),{color:r,size:i,radius:s,className:o,children:a,classNames:u,styles:l,unstyled:c,withShadow:f}=n,d=Lat(n,["color","size","radius","className","children","classNames","styles","unstyled","withShadow"]),{classes:h,cx:p}=Nat({radius:s,size:i},{classNames:u,styles:l,unstyled:c,name:"ColorSwatch"});return z.createElement(pt,Mat({className:p(h.root,o),ref:t},d),z.createElement("div",{className:p(h.alphaOverlay,h.overlay)}),f&&z.createElement("div",{className:p(h.shadowOverlay,h.overlay)}),z.createElement("div",{className:h.overlay,style:{backgroundColor:r}}),z.createElement("div",{className:p(h.children,h.overlay)},a))});UCe.displayName="@mantine/core/ColorSwatch";const R0=UCe,Od={xs:8,sm:12,md:16,lg:20,xl:22};var jat=mt((e,{size:t})=>{const n=e.fn.size({size:t,sizes:Od});return{thumb:{overflow:"hidden",boxSizing:"border-box",position:"absolute",boxShadow:"0 0 1px rgba(0, 0, 0, .6)",border:`2px solid ${e.white}`,backgroundColor:"transparent",width:n,height:n,borderRadius:n}}}),Bat=Object.defineProperty,ple=Object.getOwnPropertySymbols,zat=Object.prototype.hasOwnProperty,Uat=Object.prototype.propertyIsEnumerable,mle=(e,t,n)=>t in e?Bat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vat=(e,t)=>{for(var n in t||(t={}))zat.call(t,n)&&mle(e,n,t[n]);if(ple)for(var n of ple(t))Uat.call(t,n)&&mle(e,n,t[n]);return e};function BY({position:e,className:t,styles:n,classNames:r,style:i,size:s,__staticSelector:o,unstyled:a}){const{classes:u,cx:l}=jat({size:s},{classNames:r,styles:n,name:o,unstyled:a});return z.createElement("div",{className:l(u.thumb,t),style:Vat({left:`calc(${e.x*100}% - ${Od[s]/2}px)`,top:`calc(${e.y*100}% - ${Od[s]/2}px)`},i)})}BY.displayName="@mantine/core/Thumb";var Hat=Object.defineProperty,gle=Object.getOwnPropertySymbols,qat=Object.prototype.hasOwnProperty,Wat=Object.prototype.propertyIsEnumerable,yle=(e,t,n)=>t in e?Hat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vle=(e,t)=>{for(var n in t||(t={}))qat.call(t,n)&&yle(e,n,t[n]);if(gle)for(var n of gle(t))Wat.call(t,n)&&yle(e,n,t[n]);return e},Gat=mt((e,{size:t},n)=>({sliderThumb:{ref:n("sliderThumb")},slider:{position:"relative",height:e.fn.size({size:t,sizes:Od})+2,boxSizing:"border-box",marginLeft:e.fn.size({size:t,sizes:Od})/2,marginRight:e.fn.size({size:t,sizes:Od})/2,outline:0,[`&:focus .${n("sliderThumb")}`]:vle({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[`&:focus:not(:focus-visible) .${n("sliderThumb")}`]:vle({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)},sliderOverlay:{position:"absolute",boxSizing:"border-box",top:0,bottom:0,left:-e.fn.size({size:t,sizes:Od})/2-1,right:-e.fn.size({size:t,sizes:Od})/2-1,borderRadius:1e3}})),Yat=Object.defineProperty,Kat=Object.defineProperties,Xat=Object.getOwnPropertyDescriptors,cD=Object.getOwnPropertySymbols,VCe=Object.prototype.hasOwnProperty,HCe=Object.prototype.propertyIsEnumerable,_le=(e,t,n)=>t in e?Yat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qat=(e,t)=>{for(var n in t||(t={}))VCe.call(t,n)&&_le(e,n,t[n]);if(cD)for(var n of cD(t))HCe.call(t,n)&&_le(e,n,t[n]);return e},Jat=(e,t)=>Kat(e,Xat(t)),Zat=(e,t)=>{var n={};for(var r in e)VCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cD)for(var r of cD(e))t.indexOf(r)<0&&HCe.call(e,r)&&(n[r]=e[r]);return n};const zY=C.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:s,maxValue:o,round:a,size:u="md",thumbColor:l="transparent",__staticSelector:c="ColorSlider",focusable:f=!0,overlays:d,classNames:h,styles:p,className:m,unstyled:g}=n,y=Zat(n,["value","onChange","onChangeEnd","maxValue","round","size","thumbColor","__staticSelector","focusable","overlays","classNames","styles","className","unstyled"]);const{classes:v,cx:_}=Gat({size:u},{classNames:h,styles:p,name:c,unstyled:g}),[w,S]=C.useState({y:0,x:r/o}),x=C.useRef(w),b=R=>a?Math.round(R*o):R*o,{ref:T}=Q6(({x:R,y:P})=>{x.current={x:R,y:P},i(b(R))},{onScrubEnd:()=>{const{x:R}=x.current;s(b(R))}});xs(()=>{S({y:0,x:r/o})},[r]);const A=(R,P)=>{R.preventDefault();const N=MSe(P);i(b(N.x)),s(b(N.x))},I=R=>{switch(R.key){case"ArrowRight":{A(R,{x:w.x+.05,y:w.y});break}case"ArrowLeft":{A(R,{x:w.x-.05,y:w.y});break}}},k=d.map((R,P)=>z.createElement("div",{className:v.sliderOverlay,style:R,key:P}));return z.createElement(pt,Jat(Qat({},y),{ref:As(T,t),className:_(v.slider,m),role:"slider","aria-valuenow":r,"aria-valuemax":o,"aria-valuemin":0,tabIndex:f?0:-1,onKeyDown:I}),k,z.createElement(BY,{__staticSelector:c,classNames:h,styles:p,position:w,style:{top:1,backgroundColor:l},className:v.sliderThumb,size:u}))});zY.displayName="@mantine/core/ColorSlider";var eut=Object.defineProperty,tut=Object.defineProperties,nut=Object.getOwnPropertyDescriptors,fD=Object.getOwnPropertySymbols,qCe=Object.prototype.hasOwnProperty,WCe=Object.prototype.propertyIsEnumerable,ble=(e,t,n)=>t in e?eut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rut=(e,t)=>{for(var n in t||(t={}))qCe.call(t,n)&&ble(e,n,t[n]);if(fD)for(var n of fD(t))WCe.call(t,n)&&ble(e,n,t[n]);return e},iut=(e,t)=>tut(e,nut(t)),sut=(e,t)=>{var n={};for(var r in e)qCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fD)for(var r of fD(e))t.indexOf(r)<0&&WCe.call(e,r)&&(n[r]=e[r]);return n};const GCe=C.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:s}=n,o=sut(n,["value","onChange","onChangeEnd"]);return z.createElement(zY,iut(rut({},o),{ref:t,value:r,onChange:i,onChangeEnd:s,maxValue:360,thumbColor:`hsl(${r}, 100%, 50%)`,round:!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:"rgba(0, 0, 0, .1) 0px 0px 0px 1px inset, rgb(0, 0, 0, .15) 0px 0px 4px inset"}]}))});GCe.displayName="@mantine/core/HueSlider";var out=Object.defineProperty,aut=Object.defineProperties,uut=Object.getOwnPropertyDescriptors,wle=Object.getOwnPropertySymbols,lut=Object.prototype.hasOwnProperty,cut=Object.prototype.propertyIsEnumerable,Ele=(e,t,n)=>t in e?out(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xle=(e,t)=>{for(var n in t||(t={}))lut.call(t,n)&&Ele(e,n,t[n]);if(wle)for(var n of wle(t))cut.call(t,n)&&Ele(e,n,t[n]);return e},Sle=(e,t)=>aut(e,uut(t));function gf(e,t=0,n=10**t){return Math.round(n*e)/n}function fut({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const dut={grad:360/400,turn:360,rad:360/(Math.PI*2)};function hut(e,t="deg"){return Number(e)*(dut[t]||1)}const put=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Tle(e){const t=put.exec(e);return t?fut({h:hut(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function TU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:gf(60*(o<0?o+6:o)),s:gf(i?s/i*100:0),v:gf(i/255*100),a:r}}function CU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?TU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):TU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function mut(e){const t=e[0]==="#"?e.slice(1):e,n=o=>Math.round(parseInt(o,16)/255*100)/100;if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return Sle(xle({},CU(o)),{a})}const r=t.slice(0,6),i=n(t.slice(6,8));return Sle(xle({},CU(r)),{a:i})}const gut=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Cle(e){const t=gut.exec(e);return t?TU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const YCe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},yut={hex:CU,hexa:mut,rgb:Cle,rgba:Cle,hsl:Tle,hsla:Tle};function vut(e){for(const[,t]of Object.entries(YCe))if(t.test(e))return!0;return!1}function Hj(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(YCe))if(r.test(t))return yut[n](t);return{h:0,s:0,v:0,a:1}}var _ut=Object.defineProperty,but=Object.defineProperties,wut=Object.getOwnPropertyDescriptors,dD=Object.getOwnPropertySymbols,KCe=Object.prototype.hasOwnProperty,XCe=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?_ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eut=(e,t)=>{for(var n in t||(t={}))KCe.call(t,n)&&Ale(e,n,t[n]);if(dD)for(var n of dD(t))XCe.call(t,n)&&Ale(e,n,t[n]);return e},xut=(e,t)=>but(e,wut(t)),Sut=(e,t)=>{var n={};for(var r in e)KCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dD)for(var r of dD(e))t.indexOf(r)<0&&XCe.call(e,r)&&(n[r]=e[r]);return n};const QCe=C.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:s,color:o}=n,a=Sut(n,["value","onChange","onChangeEnd","color"]);const u=Cs(),l=u.colorScheme==="dark"?u.colors.dark[4]:u.colors.gray[3];return z.createElement(zY,xut(Eut({},a),{ref:t,value:r,onChange:c=>i(gf(c,2)),onChangeEnd:c=>s(gf(c,2)),maxValue:1,round:!1,overlays:[{backgroundImage:`linear-gradient(45deg, ${l} 25%, transparent 25%), linear-gradient(-45deg, ${l} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${l} 75%), linear-gradient(-45deg, ${u.colorScheme==="dark"?u.colors.dark[7]:u.white} 75%, ${l} 75%)`,backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"},{backgroundImage:`linear-gradient(90deg, transparent, ${o})`},{boxShadow:"rgba(0, 0, 0, .1) 0px 0px 0px 1px inset, rgb(0, 0, 0, .15) 0px 0px 4px inset"}]}))});QCe.displayName="@mantine/core/AlphaSlider";var Tut=Object.defineProperty,Ile=Object.getOwnPropertySymbols,Cut=Object.prototype.hasOwnProperty,Aut=Object.prototype.propertyIsEnumerable,Ole=(e,t,n)=>t in e?Tut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qj=(e,t)=>{for(var n in t||(t={}))Cut.call(t,n)&&Ole(e,n,t[n]);if(Ile)for(var n of Ile(t))Aut.call(t,n)&&Ole(e,n,t[n]);return e};const Iut={xs:100,sm:110,md:120,lg:140,xl:160};var Out=mt((e,{size:t},n)=>({saturationThumb:{ref:n("saturationThumb")},saturation:{boxSizing:"border-box",position:"relative",height:e.fn.size({size:t,sizes:Iut}),borderRadius:e.radius.sm,margin:e.fn.size({size:t,sizes:Od})/2,WebkitTapHighlightColor:"transparent",[`&:focus .${n("saturationThumb")}`]:qj({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[`&:focus:not(:focus-visible) .${n("saturationThumb")}`]:qj({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)},saturationOverlay:qj({boxSizing:"border-box",borderRadius:e.radius.sm},e.fn.cover(-e.fn.size({size:t,sizes:Od})/2-1))}));function JCe({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),f=a%6;return{r:gf([o,l,u,u,c,o][f]*255),g:gf([c,o,o,l,u,u][f]*255),b:gf([u,u,c,o,o,l][f]*255),a:gf(r,2)}}function Ple(e,t){const{r:n,g:r,b:i,a:s}=JCe(e);return t?`rgba(${n}, ${r}, ${i}, ${gf(s,2)})`:`rgb(${n}, ${r}, ${i})`}function kle({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${gf(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function $R(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function ZCe(e){const{r:t,g:n,b:r}=JCe(e);return`#${$R(t)}${$R(n)}${$R(r)}`}function Put(e){const t=Math.round(e.a*255);return`${ZCe(e)}${$R(t)}`}const Wj={hex:ZCe,hexa:e=>Put(e),rgb:e=>Ple(e,!1),rgba:e=>Ple(e,!0),hsl:e=>kle(e,!1),hsla:e=>kle(e,!0)};function mg(e,t){return t?e in Wj?Wj[e](t):Wj.hex(t):"#000000"}function eAe({value:e,onChange:t,onChangeEnd:n,focusable:r=!0,__staticSelector:i="saturation",size:s,color:o,saturationLabel:a,classNames:u,styles:l,unstyled:c}){const{classes:f}=Out({size:s},{classNames:u,styles:l,name:i,unstyled:c}),[d,h]=C.useState({x:e.s/100,y:1-e.v/100}),p=C.useRef(d),{ref:m}=Q6(({x:v,y:_})=>{p.current={x:v,y:_},t({s:Math.round(v*100),v:Math.round((1-_)*100)})},{onScrubEnd:()=>{const{x:v,y:_}=p.current;n({s:Math.round(v*100),v:Math.round((1-_)*100)})}});C.useEffect(()=>{h({x:e.s/100,y:1-e.v/100})},[e.s,e.v]);const g=(v,_)=>{v.preventDefault();const w=MSe(_);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:d.y-.05,x:d.x});break}case"ArrowDown":{g(v,{y:d.y+.05,x:d.x});break}case"ArrowRight":{g(v,{x:d.x+.05,y:d.y});break}case"ArrowLeft":{g(v,{x:d.x-.05,y:d.y});break}}};return z.createElement("div",{className:f.saturation,ref:m,role:"slider","aria-label":a,"aria-valuenow":d.x,"aria-valuetext":mg("rgba",e),tabIndex:r?0:-1,onKeyDown:y},z.createElement("div",{className:f.saturationOverlay,style:{backgroundColor:`hsl(${e.h}, 100%, 50%)`}}),z.createElement("div",{className:f.saturationOverlay,style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}}),z.createElement("div",{className:f.saturationOverlay,style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}}),z.createElement(BY,{__staticSelector:i,classNames:u,styles:l,position:d,className:f.saturationThumb,style:{backgroundColor:o},size:s}))}eAe.displayName="@mantine/core/Saturation";var kut=mt((e,{swatchesPerRow:t})=>({swatch:{width:`calc(${100/t}% - 4px)`,height:0,paddingBottom:`calc(${100/t}% - 4px)`,margin:2,boxSizing:"content-box"},swatches:{boxSizing:"border-box",marginLeft:-2,marginRight:-2,display:"flex",flexWrap:"wrap"}})),Rut=Object.defineProperty,hD=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,nAe=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?Rut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$ut=(e,t)=>{for(var n in t||(t={}))tAe.call(t,n)&&Rle(e,n,t[n]);if(hD)for(var n of hD(t))nAe.call(t,n)&&Rle(e,n,t[n]);return e},Nut=(e,t)=>{var n={};for(var r in e)tAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hD)for(var r of hD(e))t.indexOf(r)<0&&nAe.call(e,r)&&(n[r]=e[r]);return n};function rAe(e){var t=e,{data:n,swatchesPerRow:r=10,focusable:i=!0,classNames:s,styles:o,__staticSelector:a="color-picker",unstyled:u,setValue:l,onChangeEnd:c}=t,f=Nut(t,["data","swatchesPerRow","focusable","classNames","styles","__staticSelector","unstyled","setValue","onChangeEnd"]);const{classes:d}=kut({swatchesPerRow:r},{classNames:s,styles:o,name:a,unstyled:u}),h=n.map((p,m)=>z.createElement(R0,{className:d.swatch,component:"button",type:"button",color:p,key:m,radius:"sm",onClick:()=>{l(p),c==null||c(p)},style:{cursor:"pointer"},"aria-label":p,tabIndex:i?0:-1}));return z.createElement("div",$ut({className:d.swatches},f),h)}rAe.displayName="@mantine/core/Swatches";const Dut={xs:180,sm:200,md:240,lg:280,xl:320};var Mut=mt((e,{size:t,fullWidth:n})=>({preview:{},wrapper:{boxSizing:"border-box",width:n?"100%":e.fn.size({size:t,sizes:Dut}),padding:1},body:{display:"flex",boxSizing:"border-box",paddingTop:e.fn.size({size:t,sizes:e.spacing})/2},sliders:{flex:1,boxSizing:"border-box","&:not(:only-child)":{marginRight:e.spacing.xs}},slider:{boxSizing:"border-box","& + &":{marginTop:5}},swatch:{cursor:"pointer"}})),Lut=Object.defineProperty,Fut=Object.defineProperties,jut=Object.getOwnPropertyDescriptors,pD=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,$le=(e,t,n)=>t in e?Lut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G_=(e,t)=>{for(var n in t||(t={}))iAe.call(t,n)&&$le(e,n,t[n]);if(pD)for(var n of pD(t))sAe.call(t,n)&&$le(e,n,t[n]);return e},Gj=(e,t)=>Fut(e,jut(t)),But=(e,t)=>{var n={};for(var r in e)iAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pD)for(var r of pD(e))t.indexOf(r)<0&&sAe.call(e,r)&&(n[r]=e[r]);return n};const zut={xs:26,sm:34,md:42,lg:50,xl:54},Uut={swatchesPerRow:10,size:"sm",withPicker:!0,focusable:!0,__staticSelector:"ColorPicker"},oAe=C.forwardRef((e,t)=>{const n=ct("ColorPicker",Uut,e),{value:r,defaultValue:i,onChange:s,onChangeEnd:o,format:a,swatches:u,swatchesPerRow:l,size:c,withPicker:f,fullWidth:d,focusable:h,__staticSelector:p,saturationLabel:m,hueLabel:g,alphaLabel:y,className:v,styles:_,classNames:w,unstyled:S,onColorSwatchClick:x}=n,b=But(n,["value","defaultValue","onChange","onChangeEnd","format","swatches","swatchesPerRow","size","withPicker","fullWidth","focusable","__staticSelector","saturationLabel","hueLabel","alphaLabel","className","styles","classNames","unstyled","onColorSwatchClick"]),{classes:T,cx:A,theme:I}=Mut({size:c,fullWidth:d},{classNames:w,styles:_,name:p,unstyled:S}),k=C.useRef(a),R=C.useRef(null),P=C.useRef(!0),N=a==="hexa"||a==="rgba"||a==="hsla",[F,B]=Ea({value:r,defaultValue:i,finalValue:"#FFFFFF",onChange:s}),[W,V]=C.useState(Hj(F)),G=M=>{P.current=!1,V(H=>{const Y=G_(G_({},H),M);return R.current=mg(k.current,Y),Y}),B(R.current),setTimeout(()=>{P.current=!0},0)};return xs(()=>{vut(r)&&P.current&&(V(Hj(r)),P.current=!0)},[r]),xs(()=>{k.current=a,B(mg(a,W))},[a]),z.createElement(pt,G_({className:A(T.wrapper,v),ref:t},b),f&&z.createElement(z.Fragment,null,z.createElement(eAe,{value:W,onChange:G,onChangeEnd:({s:M,v:H})=>o==null?void 0:o(mg(k.current,Gj(G_({},W),{s:M,v:H}))),color:F,styles:_,classNames:w,size:c,focusable:h,saturationLabel:m,__staticSelector:p}),z.createElement("div",{className:T.body},z.createElement("div",{className:T.sliders},z.createElement(GCe,{value:W.h,onChange:M=>G({h:M}),onChangeEnd:M=>o==null?void 0:o(mg(k.current,Gj(G_({},W),{h:M}))),size:c,styles:_,classNames:w,focusable:h,"aria-label":g,__staticSelector:p}),N&&z.createElement(QCe,{value:W.a,onChange:M=>G({a:M}),onChangeEnd:M=>{o==null||o(mg(k.current,Gj(G_({},W),{a:M})))},size:c,color:mg("hex",W),style:{marginTop:6},styles:_,classNames:w,focusable:h,"aria-label":y,__staticSelector:p})),N&&z.createElement(R0,{color:F,radius:"sm",size:I.fn.size({size:c,sizes:zut}),className:T.preview}))),Array.isArray(u)&&z.createElement(rAe,{data:u,style:{marginTop:5},swatchesPerRow:l,focusable:h,classNames:w,styles:_,__staticSelector:p,setValue:B,onChangeEnd:M=>{const H=mg(a,Hj(M));x==null||x(H),o==null||o(H)}}))});oAe.displayName="@mantine/core/ColorPicker";var Vut=mt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}})),Hut=Object.defineProperty,mD=Object.getOwnPropertySymbols,aAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?Hut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qut=(e,t)=>{for(var n in t||(t={}))aAe.call(t,n)&&Nle(e,n,t[n]);if(mD)for(var n of mD(t))uAe.call(t,n)&&Nle(e,n,t[n]);return e},Wut=(e,t)=>{var n={};for(var r in e)aAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mD)for(var r of mD(e))t.indexOf(r)<0&&uAe.call(e,r)&&(n[r]=e[r]);return n};const Gut={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},Dm=C.forwardRef((e,t)=>{const n=ct("Container",Gut,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=Wut(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=Vut({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return z.createElement(pt,qut({className:c(l.root,r),ref:t},u))});Dm.displayName="@mantine/core/Container";var Yut=Object.defineProperty,Kut=Object.defineProperties,Xut=Object.getOwnPropertyDescriptors,Dle=Object.getOwnPropertySymbols,Qut=Object.prototype.hasOwnProperty,Jut=Object.prototype.propertyIsEnumerable,Mle=(e,t,n)=>t in e?Yut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zut=(e,t)=>{for(var n in t||(t={}))Qut.call(t,n)&&Mle(e,n,t[n]);if(Dle)for(var n of Dle(t))Jut.call(t,n)&&Mle(e,n,t[n]);return e},elt=(e,t)=>Kut(e,Xut(t));const BP={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function tlt({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:BP})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:BP})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:BP})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:BP})};default:return null}}var nlt=mt((e,{position:t,size:n,zIndex:r,withOverlay:i})=>({closeButton:{},overlay:{},body:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:i===!1?"none":void 0},drawer:elt(Zut({},tlt({position:t,size:n,theme:e})),{maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:i===!1?"auto":void 0}),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}}));function UY({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=C2e({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?z.createElement(z.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=T2e({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return z.createElement(z.Fragment,null,i(h))}UY.displayName="@mantine/core/GroupedTransition";var rlt=mt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}})),ilt=Object.defineProperty,slt=Object.defineProperties,olt=Object.getOwnPropertyDescriptors,gD=Object.getOwnPropertySymbols,lAe=Object.prototype.hasOwnProperty,cAe=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?ilt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yj=(e,t)=>{for(var n in t||(t={}))lAe.call(t,n)&&Lle(e,n,t[n]);if(gD)for(var n of gD(t))cAe.call(t,n)&&Lle(e,n,t[n]);return e},alt=(e,t)=>slt(e,olt(t)),ult=(e,t)=>{var n={};for(var r in e)lAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gD)for(var r of gD(e))t.indexOf(r)<0&&cAe.call(e,r)&&(n[r]=e[r]);return n};const llt={opacity:.6,color:"#fff",zIndex:Rc("modal"),radius:0,blur:0},fAe=C.forwardRef((e,t)=>{const n=ct("Overlay",llt,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=ult(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=rlt({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>z.createElement(pt,Yj({ref:t,className:p(h.root,f),sx:[v=>alt(Yj({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...O0(l)]},y));return i?z.createElement(pt,Yj({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...O0(l)]},d),g()):g(d)});fAe.displayName="@mantine/core/Overlay";const VY=fAe;var clt=Object.defineProperty,yD=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty,hAe=Object.prototype.propertyIsEnumerable,Fle=(e,t,n)=>t in e?clt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,flt=(e,t)=>{for(var n in t||(t={}))dAe.call(t,n)&&Fle(e,n,t[n]);if(yD)for(var n of yD(t))hAe.call(t,n)&&Fle(e,n,t[n]);return e},dlt=(e,t)=>{var n={};for(var r in e)dAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yD)for(var r of yD(e))t.indexOf(r)<0&&hAe.call(e,r)&&(n[r]=e[r]);return n};const hlt={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},plt={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},mlt={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:Rc("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function pAe(e){const t=ct("Drawer",mlt,e),{className:n,opened:r,onClose:i,position:s,size:o,trapFocus:a,lockScroll:u,closeOnClickOutside:l,closeOnEscape:c,transition:f,transitionDuration:d,transitionTimingFunction:h,zIndex:p,overlayColor:m,overlayOpacity:g,children:y,withOverlay:v,shadow:_,id:w,padding:S,title:x,withCloseButton:b,closeButtonLabel:T,classNames:A,styles:I,target:k,withinPortal:R,overlayBlur:P,unstyled:N,withFocusReturn:F}=t,B=dlt(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","id","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),W=Ia(w),V=`${W}-title`,G=`${W}-body`,{classes:M,cx:H,theme:Y}=nlt({size:o,position:s,zIndex:p,withOverlay:v},{classNames:A,styles:I,unstyled:N,name:"Drawer"}),L=hY(a&&r),[,j]=FSe(),q=f||(Y.dir==="rtl"?plt:hlt)[s],Z=typeof g=="number"?g:Y.colorScheme==="dark"?.85:.75,ue=he=>{he.key==="Escape"&&c&&i()};return C.useEffect(()=>{if(!a)return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[a]),dY({opened:r,shouldReturnFocus:a&&F}),z.createElement(dx,{withinPortal:R,target:k},z.createElement(UY,{onExited:()=>j(!1),onEntered:()=>j(u&&!0),mounted:r,duration:d,timingFunction:h,transitions:{overlay:{duration:d/2,transition:"fade",timingFunction:"ease"},drawer:{duration:d,transition:q,timingFunction:h}}},he=>z.createElement(pt,flt({className:H(M.root,n),role:"dialog","aria-modal":!0,"aria-labelledby":V,"aria-describedby":G},B),z.createElement(LY,{className:H(M.drawer,n),ref:L,style:he.drawer,radius:0,tabIndex:-1,onKeyDownCapture:fe=>{var me;((me=fe.target)==null?void 0:me.getAttribute("data-mantine-stop-propagation"))!=="true"&&fe.key==="Escape"&&c&&i()},shadow:_,p:S,unstyled:N},(x||b)&&z.createElement("div",{className:M.header},z.createElement(dt,{id:V,className:M.title,unstyled:N},x),b&&z.createElement(Rm,{iconSize:16,onClick:i,"aria-label":T,className:M.closeButton,unstyled:N})),z.createElement("div",{id:G,className:M.body},y)),v&&z.createElement("div",{style:he.overlay},z.createElement(VY,{unstyled:N,blur:P,onMouseDown:()=>l&&i(),className:M.overlay,opacity:Z,zIndex:0,color:m||(Y.colorScheme==="dark"?Y.colors.dark[9]:Y.black)})))))}pAe.displayName="@mantine/core/Drawer";const glt={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var ylt=Object.defineProperty,vlt=Object.defineProperties,_lt=Object.getOwnPropertyDescriptors,vD=Object.getOwnPropertySymbols,mAe=Object.prototype.hasOwnProperty,gAe=Object.prototype.propertyIsEnumerable,jle=(e,t,n)=>t in e?ylt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,blt=(e,t)=>{for(var n in t||(t={}))mAe.call(t,n)&&jle(e,n,t[n]);if(vD)for(var n of vD(t))gAe.call(t,n)&&jle(e,n,t[n]);return e},wlt=(e,t)=>vlt(e,_lt(t)),Elt=(e,t)=>{var n={};for(var r in e)mAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vD)for(var r of vD(e))t.indexOf(r)<0&&gAe.call(e,r)&&(n[r]=e[r]);return n};const xlt={},vi=C.forwardRef((e,t)=>{const n=ct("Flex",xlt,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=Elt(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return z.createElement(pt,wlt(blt({},f),{sx:[{display:"flex"},d=>mU({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,glt),...O0(c)],ref:t}))});vi.displayName="@mantine/core/Flex";const[Slt,Tlt]=uI("Grid component was not found in tree");var Clt=Object.defineProperty,Ble=Object.getOwnPropertySymbols,Alt=Object.prototype.hasOwnProperty,Ilt=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?Clt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Olt=(e,t)=>{for(var n in t||(t={}))Alt.call(t,n)&&zle(e,n,t[n]);if(Ble)for(var n of Ble(t))Ilt.call(t,n)&&zle(e,n,t[n]);return e};const HY=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,yAe=(e,t,n)=>n||e==="auto"||e==="content"?"unset":HY(e,t),vAe=(e,t)=>{if(e)return e==="auto"||t?1:0},_Ae=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0,bAe=(e,t)=>typeof e<"u"?t.fn.size({size:e,sizes:t.spacing})/2:void 0;function Plt({sizes:e,offsets:t,orders:n,theme:r,columns:i,gutters:s,grow:o}){return lSe.reduce((a,u)=>(a[`@media (min-width: ${r.breakpoints[u]}px)`]={order:n[u],flexBasis:HY(e[u],i),padding:bAe(s[u],r),flexShrink:0,width:e[u]==="content"?"auto":void 0,maxWidth:yAe(e[u],i,o),marginLeft:_Ae(t[u],i),flexGrow:vAe(e[u],o)},a),{})}var klt=mt((e,{gutter:t,gutterXs:n,gutterSm:r,gutterMd:i,gutterLg:s,gutterXl:o,grow:a,offset:u,offsetXs:l,offsetSm:c,offsetMd:f,offsetLg:d,offsetXl:h,columns:p,span:m,xs:g,sm:y,md:v,lg:_,xl:w,order:S,orderXs:x,orderSm:b,orderMd:T,orderLg:A,orderXl:I})=>({col:Olt({boxSizing:"border-box",flexGrow:vAe(m,a),order:S,padding:bAe(t,e),marginLeft:_Ae(u,p),flexBasis:HY(m,p),flexShrink:0,width:m==="content"?"auto":void 0,maxWidth:yAe(m,p,a)},Plt({sizes:{xs:g,sm:y,md:v,lg:_,xl:w},offsets:{xs:l,sm:c,md:f,lg:d,xl:h},orders:{xs:x,sm:b,md:T,lg:A,xl:I},gutters:{xs:n,sm:r,md:i,lg:s,xl:o},theme:e,columns:p,grow:a}))})),Rlt=Object.defineProperty,_D=Object.getOwnPropertySymbols,wAe=Object.prototype.hasOwnProperty,EAe=Object.prototype.propertyIsEnumerable,Ule=(e,t,n)=>t in e?Rlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$lt=(e,t)=>{for(var n in t||(t={}))wAe.call(t,n)&&Ule(e,n,t[n]);if(_D)for(var n of _D(t))EAe.call(t,n)&&Ule(e,n,t[n]);return e},Nlt=(e,t)=>{var n={};for(var r in e)wAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_D)for(var r of _D(e))t.indexOf(r)<0&&EAe.call(e,r)&&(n[r]=e[r]);return n};const Dlt={};function Mlt(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const xAe=C.forwardRef((e,t)=>{const n=ct("GridCol",Dlt,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:S,className:x,id:b,unstyled:T}=n,A=Nlt(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),I=Tlt(),k=i||I.columns,{classes:R,cx:P}=klt({gutter:I.gutter,gutterXs:I.gutterXs,gutterSm:I.gutterSm,gutterMd:I.gutterMd,gutterLg:I.gutterLg,gutterXl:I.gutterXl,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:S,grow:I.grow,columns:I.columns,span:k},{unstyled:T,name:"Grid"});return!Mlt(k)||k>I.columns?null:z.createElement(pt,$lt({className:P(R.col,x),ref:t},A),r)});xAe.displayName="@mantine/core/Col";var Llt=Object.defineProperty,Vle=Object.getOwnPropertySymbols,Flt=Object.prototype.hasOwnProperty,jlt=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?Llt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Blt=(e,t)=>{for(var n in t||(t={}))Flt.call(t,n)&&Hle(e,n,t[n]);if(Vle)for(var n of Vle(t))jlt.call(t,n)&&Hle(e,n,t[n]);return e};function zlt(e,t){return lSe.reduce((n,r)=>(typeof e[r]<"u"&&(n[`@media (min-width: ${t.breakpoints[r]}px)`]={margin:-t.fn.size({size:e[r],sizes:t.spacing})/2}),n),{})}var Ult=mt((e,{justify:t,align:n,gutter:r,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u})=>({root:Blt({margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n},zlt({xs:i,sm:s,md:o,lg:a,xl:u},e))})),Vlt=Object.defineProperty,bD=Object.getOwnPropertySymbols,SAe=Object.prototype.hasOwnProperty,TAe=Object.prototype.propertyIsEnumerable,qle=(e,t,n)=>t in e?Vlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hlt=(e,t)=>{for(var n in t||(t={}))SAe.call(t,n)&&qle(e,n,t[n]);if(bD)for(var n of bD(t))TAe.call(t,n)&&qle(e,n,t[n]);return e},qlt=(e,t)=>{var n={};for(var r in e)SAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bD)for(var r of bD(e))t.indexOf(r)<0&&TAe.call(e,r)&&(n[r]=e[r]);return n};const Wlt={gutter:"md",justify:"flex-start",align:"stretch",columns:12},yf=C.forwardRef((e,t)=>{const n=ct("Grid",Wlt,e),{gutter:r,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u,children:l,grow:c,justify:f,align:d,columns:h,className:p,id:m,unstyled:g}=n,y=qlt(n,["gutter","gutterXs","gutterSm","gutterMd","gutterLg","gutterXl","children","grow","justify","align","columns","className","id","unstyled"]),{classes:v,cx:_}=Ult({gutter:r,justify:f,align:d,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u},{unstyled:g,name:"Grid"});return z.createElement(Slt,{value:{gutter:r,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u,grow:c,columns:h}},z.createElement(pt,Hlt({className:_(v.root,p),ref:t},y),l))});yf.Col=xAe;yf.displayName="@mantine/core/Grid";function Glt({open:e,close:t,openDelay:n,closeDelay:r}){const i=C.useRef(-1),s=C.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return C.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var Ylt=Object.defineProperty,Wle=Object.getOwnPropertySymbols,Klt=Object.prototype.hasOwnProperty,Xlt=Object.prototype.propertyIsEnumerable,Gle=(e,t,n)=>t in e?Ylt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qlt=(e,t)=>{for(var n in t||(t={}))Klt.call(t,n)&&Gle(e,n,t[n]);if(Wle)for(var n of Wle(t))Xlt.call(t,n)&&Gle(e,n,t[n]);return e};function Jlt(e){return z.createElement("svg",Qlt({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),z.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var Zlt=Object.defineProperty,ect=Object.defineProperties,tct=Object.getOwnPropertyDescriptors,Yle=Object.getOwnPropertySymbols,nct=Object.prototype.hasOwnProperty,rct=Object.prototype.propertyIsEnumerable,Kle=(e,t,n)=>t in e?Zlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xle=(e,t)=>{for(var n in t||(t={}))nct.call(t,n)&&Kle(e,n,t[n]);if(Yle)for(var n of Yle(t))rct.call(t,n)&&Kle(e,n,t[n]);return e},Qle=(e,t)=>ect(e,tct(t)),ict=mt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:Qle(Xle({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:Qle(Xle({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})})),sct=Object.defineProperty,wD=Object.getOwnPropertySymbols,CAe=Object.prototype.hasOwnProperty,AAe=Object.prototype.propertyIsEnumerable,Jle=(e,t,n)=>t in e?sct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kj=(e,t)=>{for(var n in t||(t={}))CAe.call(t,n)&&Jle(e,n,t[n]);if(wD)for(var n of wD(t))AAe.call(t,n)&&Jle(e,n,t[n]);return e},oct=(e,t)=>{var n={};for(var r in e)CAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wD)for(var r of wD(e))t.indexOf(r)<0&&AAe.call(e,r)&&(n[r]=e[r]);return n};const act={fit:"cover",width:"100%",height:"auto",radius:0},f_=C.forwardRef((e,t)=>{const n=ct("Image",act,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=oct(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:w,cx:S}=ict({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[x,b]=C.useState(!s),T=f&&x;return xs(()=>{b(!s)},[s]),z.createElement(pt,Kj({className:S(w.root,r),ref:t,style:Kj({width:a},v)},_),z.createElement("figure",{className:w.figure},z.createElement("div",{className:w.imageWrapper},z.createElement("img",Kj({className:w.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:A=>{b(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(A)}},c)),T&&z.createElement("div",{className:w.placeholder,title:i},d||z.createElement("div",null,z.createElement(Jlt,{style:{width:40,height:40}})))),!!g&&z.createElement(dt,{component:"figcaption",size:"sm",align:"center",className:w.caption},g)))});f_.displayName="@mantine/core/Image";function uct(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var lct=C.useLayoutEffect,cct=function(t){var n=C.useRef(t);return lct(function(){n.current=t}),n},Zle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},fct=function(t,n){var r=C.useRef();return C.useCallback(function(i){t.current=i,r.current&&Zle(r.current,null),r.current=n,n&&Zle(n,i)},[n])},ece={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},tce=function(t){Object.keys(ece).forEach(function(n){t.style.setProperty(n,ece[n],"important")})},rl=null,dct=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function hct(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),rl||(rl=document.createElement("textarea"),rl.setAttribute("tabindex","-1"),rl.setAttribute("aria-hidden","true"),tce(rl)),rl.parentNode===null&&document.body.appendChild(rl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;rl.style[h]=o[h]}),tce(rl),rl.value=t;var u=dct(rl,e);rl.value="x";var l=rl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var nce=function(){},pct=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},mct=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],gct=!!document.documentElement.currentStyle,yct=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=pct(mct,n),i=r.boxSizing;if(i==="")return null;gct&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},vct=function(t){var n=cct(t);C.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},_ct=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?nce:o,u=t.onHeightChange,l=u===void 0?nce:u,c=uct(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=C.useRef(null),h=fct(d,n),p=C.useRef(0),m=C.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:yct(_);if(w){m.current=w;var S=hct(w,_.value||_.placeholder||"x",s,i),x=S[0],b=S[1];p.current!==x&&(p.current=x,_.style.setProperty("height",x+"px","important"),l(x,{rowHeight:b}))}},y=function(_){f||g(),a(_)};return C.useLayoutEffect(g),vct(g),C.createElement("textarea",Ni({},c,{onChange:y,ref:h}))},bct=C.forwardRef(_ct),wct=mt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}})),Ect=Object.defineProperty,xct=Object.defineProperties,Sct=Object.getOwnPropertyDescriptors,ED=Object.getOwnPropertySymbols,IAe=Object.prototype.hasOwnProperty,OAe=Object.prototype.propertyIsEnumerable,rce=(e,t,n)=>t in e?Ect(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y_=(e,t)=>{for(var n in t||(t={}))IAe.call(t,n)&&rce(e,n,t[n]);if(ED)for(var n of ED(t))OAe.call(t,n)&&rce(e,n,t[n]);return e},Xj=(e,t)=>xct(e,Sct(t)),Tct=(e,t)=>{var n={};for(var r in e)IAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ED)for(var r of ED(e))t.indexOf(r)<0&&OAe.call(e,r)&&(n[r]=e[r]);return n};const Cct={autosize:!1,size:"sm",__staticSelector:"Textarea"},PAe=C.forwardRef((e,t)=>{const n=ct("Textarea",Cct,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:w,labelProps:S,inputWrapperOrder:x,inputContainer:b,unstyled:T,withAsterisk:A}=n,I=Tct(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),k=Ia(l),{classes:R,cx:P}=wct(),{systemStyles:N,rest:F}=Lh(I),B=Y_({required:f,ref:t,invalid:!!a,id:k,classNames:Xj(Y_({},p),{input:P(R.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:T},F);return z.createElement(Ss.Wrapper,Y_(Y_({label:o,error:a,id:k,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:S,descriptionProps:w,inputContainer:b,inputWrapperOrder:x,unstyled:T,withAsterisk:A},N),h),r?z.createElement(Ss,Xj(Y_({},B),{component:bct,maxRows:i,minRows:s})):z.createElement(Ss,Xj(Y_({},B),{component:"textarea",rows:s})))});PAe.displayName="@mantine/core/Textarea";const[Act,Ict]=uI("List component was not found in tree");var Oct=mt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}})),Pct=Object.defineProperty,xD=Object.getOwnPropertySymbols,kAe=Object.prototype.hasOwnProperty,RAe=Object.prototype.propertyIsEnumerable,ice=(e,t,n)=>t in e?Pct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kct=(e,t)=>{for(var n in t||(t={}))kAe.call(t,n)&&ice(e,n,t[n]);if(xD)for(var n of xD(t))RAe.call(t,n)&&ice(e,n,t[n]);return e},Rct=(e,t)=>{var n={};for(var r in e)kAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xD)for(var r of xD(e))t.indexOf(r)<0&&RAe.call(e,r)&&(n[r]=e[r]);return n};const $ct={},$Ae=C.forwardRef((e,t)=>{const n=ct("ListItem",$ct,e),{className:r,children:i,icon:s}=n,o=Rct(n,["className","children","icon"]),{icon:a,spacing:u,center:l,listStyleType:c,size:f,withPadding:d,classNames:h,styles:p,unstyled:m}=Ict(),g=s||a,{classes:y,cx:v}=Oct({withPadding:d,size:f,listStyleType:c,center:l,spacing:u},{classNames:h,styles:p,unstyled:m,name:"List"});return z.createElement(pt,kct({component:"li",className:v(y.item,{[y.withIcon]:g},r),ref:t},o),z.createElement("div",{className:y.itemWrapper},g&&z.createElement("span",{className:y.itemIcon},g),z.createElement("span",null,i)))});$Ae.displayName="@mantine/core/ListItem";var Nct=Object.defineProperty,Dct=Object.defineProperties,Mct=Object.getOwnPropertyDescriptors,sce=Object.getOwnPropertySymbols,Lct=Object.prototype.hasOwnProperty,Fct=Object.prototype.propertyIsEnumerable,oce=(e,t,n)=>t in e?Nct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jct=(e,t)=>{for(var n in t||(t={}))Lct.call(t,n)&&oce(e,n,t[n]);if(sce)for(var n of sce(t))Fct.call(t,n)&&oce(e,n,t[n]);return e},Bct=(e,t)=>Dct(e,Mct(t)),zct=mt((e,{withPadding:t,size:n,listStyleType:r})=>({root:Bct(jct({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})})),Uct=Object.defineProperty,SD=Object.getOwnPropertySymbols,NAe=Object.prototype.hasOwnProperty,DAe=Object.prototype.propertyIsEnumerable,ace=(e,t,n)=>t in e?Uct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vct=(e,t)=>{for(var n in t||(t={}))NAe.call(t,n)&&ace(e,n,t[n]);if(SD)for(var n of SD(t))DAe.call(t,n)&&ace(e,n,t[n]);return e},Hct=(e,t)=>{var n={};for(var r in e)NAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SD)for(var r of SD(e))t.indexOf(r)<0&&DAe.call(e,r)&&(n[r]=e[r]);return n};const qct={type:"unordered",size:"md",spacing:0},n1=C.forwardRef((e,t)=>{const n=ct("List",qct,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=Hct(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=zct({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return z.createElement(Act,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a,classNames:h,styles:d,unstyled:p}},z.createElement(pt,Vct({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r))});n1.Item=$Ae;n1.displayName="@mantine/core/List";var Wct=mt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}}),Gct=Object.defineProperty,Yct=Object.defineProperties,Kct=Object.getOwnPropertyDescriptors,TD=Object.getOwnPropertySymbols,MAe=Object.prototype.hasOwnProperty,LAe=Object.prototype.propertyIsEnumerable,uce=(e,t,n)=>t in e?Gct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zP=(e,t)=>{for(var n in t||(t={}))MAe.call(t,n)&&uce(e,n,t[n]);if(TD)for(var n of TD(t))LAe.call(t,n)&&uce(e,n,t[n]);return e},Xct=(e,t)=>Yct(e,Kct(t)),Qct=(e,t)=>{var n={};for(var r in e)MAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TD)for(var r of TD(e))t.indexOf(r)<0&&LAe.call(e,r)&&(n[r]=e[r]);return n};const Jct={overlayOpacity:.75,transitionDuration:0,zIndex:Rc("overlay")},Mm=C.forwardRef((e,t)=>{const n=ct("LoadingOverlay",Jct,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=Qct(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=Wct(null,{name:"LoadingOverlay",unstyled:m}),w=`calc(${c} + 1)`;return z.createElement(yI,{duration:u,exitDuration:l,mounted:i,transition:"fade"},S=>z.createElement(pt,zP({className:v(y.root,r),style:Xct(zP(zP({},S),f),{zIndex:c}),ref:t},g),d?z.createElement("div",{style:{zIndex:w}},d):z.createElement(dh,zP({style:{zIndex:w}},s)),z.createElement(VY,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});Mm.displayName="@mantine/core/LoadingOverlay";const FAe={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Zct,vI]=uI(FAe.context);var eft=mt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}})),tft=Object.defineProperty,CD=Object.getOwnPropertySymbols,jAe=Object.prototype.hasOwnProperty,BAe=Object.prototype.propertyIsEnumerable,lce=(e,t,n)=>t in e?tft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nft=(e,t)=>{for(var n in t||(t={}))jAe.call(t,n)&&lce(e,n,t[n]);if(CD)for(var n of CD(t))BAe.call(t,n)&&lce(e,n,t[n]);return e},rft=(e,t)=>{var n={};for(var r in e)jAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CD)for(var r of CD(e))t.indexOf(r)<0&&BAe.call(e,r)&&(n[r]=e[r]);return n};const ift={},zAe=C.forwardRef((e,t)=>{const n=ct("MenuDivider",ift,e),{children:r,className:i}=n,s=rft(n,["children","className"]),{classNames:o,styles:a,unstyled:u}=vI(),{classes:l,cx:c}=eft(null,{name:"Menu",classNames:o,styles:a,unstyled:u});return z.createElement(pt,nft({className:c(l.divider,i),ref:t},s))});zAe.displayName="@mantine/core/MenuDivider";var sft=Object.defineProperty,AD=Object.getOwnPropertySymbols,UAe=Object.prototype.hasOwnProperty,VAe=Object.prototype.propertyIsEnumerable,cce=(e,t,n)=>t in e?sft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oft=(e,t)=>{for(var n in t||(t={}))UAe.call(t,n)&&cce(e,n,t[n]);if(AD)for(var n of AD(t))VAe.call(t,n)&&cce(e,n,t[n]);return e},aft=(e,t)=>{var n={};for(var r in e)UAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AD)for(var r of AD(e))t.indexOf(r)<0&&VAe.call(e,r)&&(n[r]=e[r]);return n};const uft={};function HAe(e){const t=ct("MenuDropdown",uft,e),{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=aft(t,["children","onMouseEnter","onMouseLeave"]),o=C.useRef(),a=vI(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=$p(r,()=>a.trigger==="hover"&&a.openDropdown()),c=$p(i,()=>a.trigger==="hover"&&a.closeDropdown());return z.createElement(Pr.Dropdown,oft({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),z.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}HAe.displayName="@mantine/core/MenuDropdown";var lft=Object.defineProperty,cft=Object.defineProperties,fft=Object.getOwnPropertyDescriptors,fce=Object.getOwnPropertySymbols,dft=Object.prototype.hasOwnProperty,hft=Object.prototype.propertyIsEnumerable,dce=(e,t,n)=>t in e?lft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pft=(e,t)=>{for(var n in t||(t={}))dft.call(t,n)&&dce(e,n,t[n]);if(fce)for(var n of fce(t))hft.call(t,n)&&dce(e,n,t[n]);return e},mft=(e,t)=>cft(e,fft(t)),gft=mt((e,{color:t,radius:n})=>({item:mft(pft({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[1]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}})),yft=Object.defineProperty,vft=Object.defineProperties,_ft=Object.getOwnPropertyDescriptors,ID=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable,hce=(e,t,n)=>t in e?yft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bft=(e,t)=>{for(var n in t||(t={}))qAe.call(t,n)&&hce(e,n,t[n]);if(ID)for(var n of ID(t))WAe.call(t,n)&&hce(e,n,t[n]);return e},wft=(e,t)=>vft(e,_ft(t)),Eft=(e,t)=>{var n={};for(var r in e)qAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ID)for(var r of ID(e))t.indexOf(r)<0&&WAe.call(e,r)&&(n[r]=e[r]);return n};const xft={},GAe=C.forwardRef((e,t)=>{const n=ct("MenuItem",xft,e),{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=Eft(n,["children","className","color","closeMenuOnClick","icon","rightSection"]),c=vI(),{classes:f,cx:d,theme:h}=gft({radius:c.radius,color:s},{name:"Menu",classNames:c.classNames,styles:c.styles,unstyled:c.unstyled}),p=C.useRef(),m=c.getItemIndex(p.current),g=l,y=$p(g.onMouseLeave,()=>c.setHovered(-1)),v=$p(g.onMouseEnter,()=>c.setHovered(c.getItemIndex(p.current))),_=$p(g.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),w=$p(g.onFocus,()=>c.setHovered(c.getItemIndex(p.current)));return z.createElement(pt,wft(bft({component:"button",type:"button"},l),{tabIndex:-1,onFocus:w,className:d(f.item,i),ref:As(p,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===m?!0:void 0,onMouseEnter:v,onMouseLeave:y,onClick:_,onKeyDown:rSe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:h.dir,orientation:"vertical",onKeyDown:g.onKeydown})}),a&&z.createElement("div",{className:f.itemIcon},a),r&&z.createElement("div",{className:f.itemLabel},r),u&&z.createElement("div",{className:f.itemRightSection},u))});GAe.displayName="@mantine/core/MenuItem";const Sft=GAe;var Tft=mt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}})),Cft=Object.defineProperty,OD=Object.getOwnPropertySymbols,YAe=Object.prototype.hasOwnProperty,KAe=Object.prototype.propertyIsEnumerable,pce=(e,t,n)=>t in e?Cft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aft=(e,t)=>{for(var n in t||(t={}))YAe.call(t,n)&&pce(e,n,t[n]);if(OD)for(var n of OD(t))KAe.call(t,n)&&pce(e,n,t[n]);return e},Ift=(e,t)=>{var n={};for(var r in e)YAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OD)for(var r of OD(e))t.indexOf(r)<0&&KAe.call(e,r)&&(n[r]=e[r]);return n};const Oft={},XAe=C.forwardRef((e,t)=>{const n=ct("MenuLabel",Oft,e),{children:r,className:i}=n,s=Ift(n,["children","className"]),{classNames:o,styles:a,unstyled:u}=vI(),{classes:l,cx:c}=Tft(null,{name:"Menu",classNames:o,styles:a,unstyled:u});return z.createElement(dt,Aft({className:c(l.label,i),ref:t},s),r)});XAe.displayName="@mantine/core/MenuLabel";var Pft=Object.defineProperty,PD=Object.getOwnPropertySymbols,QAe=Object.prototype.hasOwnProperty,JAe=Object.prototype.propertyIsEnumerable,mce=(e,t,n)=>t in e?Pft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kft=(e,t)=>{for(var n in t||(t={}))QAe.call(t,n)&&mce(e,n,t[n]);if(PD)for(var n of PD(t))JAe.call(t,n)&&mce(e,n,t[n]);return e},Rft=(e,t)=>{var n={};for(var r in e)QAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PD)for(var r of PD(e))t.indexOf(r)<0&&JAe.call(e,r)&&(n[r]=e[r]);return n};const $ft={refProp:"ref"},ZAe=C.forwardRef((e,t)=>{const n=ct("MenuTarget",$ft,e),{children:r,refProp:i}=n,s=Rft(n,["children","refProp"]);if(!lI(r))throw new Error(FAe.children);const o=vI(),a=$p(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=$p(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=$p(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return z.createElement(Pr.Target,kft({refProp:i,popupType:"menu",ref:t},s),C.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});ZAe.displayName="@mantine/core/MenuTarget";var Nft=mt({dropdown:{padding:4}}),Dft=Object.defineProperty,Mft=Object.defineProperties,Lft=Object.getOwnPropertyDescriptors,kD=Object.getOwnPropertySymbols,eIe=Object.prototype.hasOwnProperty,tIe=Object.prototype.propertyIsEnumerable,gce=(e,t,n)=>t in e?Dft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yce=(e,t)=>{for(var n in t||(t={}))eIe.call(t,n)&&gce(e,n,t[n]);if(kD)for(var n of kD(t))tIe.call(t,n)&&gce(e,n,t[n]);return e},vce=(e,t)=>Mft(e,Lft(t)),Fft=(e,t)=>{var n={};for(var r in e)eIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kD)for(var r of kD(e))t.indexOf(r)<0&&tIe.call(e,r)&&(n[r]=e[r]);return n};const jft={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function nc(e){const t=ct("Menu",jft,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=Fft(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:w}=Nft(),[S,{setHovered:x,resetHovered:b}]=vXe(),[T,A]=Ea({value:s,defaultValue:o,finalValue:!1,onChange:a}),I=()=>{A(!1),T&&(i==null||i())},k=()=>{A(!0),!T&&(r==null||r())},R=()=>T?I():k(),{openDropdown:P,closeDropdown:N}=Glt({open:k,close:I,closeDelay:h,openDelay:d}),F=B=>mXe("[data-menu-item]","[data-menu-dropdown]",B);return xs(()=>{b()},[T]),z.createElement(Zct,{value:{opened:T,toggleDropdown:R,getItemIndex:F,hovered:S,setHovered:x,closeOnItemClick:u,closeDropdown:f==="click"?I:N,openDropdown:f==="click"?k:P,closeDropdownImmediately:I,loop:l,trigger:f,radius:y,classNames:p,styles:m,unstyled:g}},z.createElement(Pr,vce(yce({},v),{radius:y,opened:T,onChange:A,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:vce(yce({},p),{dropdown:w(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:I,onOpen:k}),n))}nc.displayName="@mantine/core/Menu";nc.Item=Sft;nc.Label=XAe;nc.Dropdown=HAe;nc.Target=ZAe;nc.Divider=zAe;var Bft=Object.defineProperty,_ce=Object.getOwnPropertySymbols,zft=Object.prototype.hasOwnProperty,Uft=Object.prototype.propertyIsEnumerable,bce=(e,t,n)=>t in e?Bft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vft=(e,t)=>{for(var n in t||(t={}))zft.call(t,n)&&bce(e,n,t[n]);if(_ce)for(var n of _ce(t))Uft.call(t,n)&&bce(e,n,t[n]);return e};const Hft={xs:320,sm:380,md:440,lg:620,xl:780};function qft(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var Wft=mt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:Vft({position:"relative",width:s?"100vw":e.fn.size({sizes:Hft,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},qft(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}})),Gft=Object.defineProperty,RD=Object.getOwnPropertySymbols,nIe=Object.prototype.hasOwnProperty,rIe=Object.prototype.propertyIsEnumerable,wce=(e,t,n)=>t in e?Gft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yft=(e,t)=>{for(var n in t||(t={}))nIe.call(t,n)&&wce(e,n,t[n]);if(RD)for(var n of RD(t))rIe.call(t,n)&&wce(e,n,t[n]);return e},Kft=(e,t)=>{var n={};for(var r in e)nIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RD)for(var r of RD(e))t.indexOf(r)<0&&rIe.call(e,r)&&(n[r]=e[r]);return n};const Xft={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:Rc("modal"),exitTransitionDuration:0};function qp(e){const t=ct("Modal",Xft,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:w,styles:S,closeOnClickOutside:x,trapFocus:b,closeOnEscape:T,centered:A,target:I,withinPortal:k,zIndex:R,overlayBlur:P,transitionTimingFunction:N,fullScreen:F,unstyled:B,lockScroll:W,withFocusReturn:V}=t,G=Kft(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),M=Ia(_),H=`${M}-title`,Y=`${M}-body`,{classes:L,cx:j,theme:q}=Wft({size:l,overflow:p,centered:A,zIndex:R,fullScreen:F},{unstyled:B,classNames:w,styles:S,name:"Modal"}),Z=hY(b&&r),ue=C.useRef(null),he=As(Z,ue),fe=typeof u=="number"?u:q.colorScheme==="dark"?.85:.75;FSe(W&&r);const me=Be=>{!b&&Be.key==="Escape"&&T&&s()};C.useEffect(()=>{if(!b)return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[b]),dY({opened:r,shouldReturnFocus:b&&V});const _e=C.useRef(null);pU("mousedown",Be=>{_e.current=Be.target});const ge=()=>{_e.current===ue.current&&x&&s()};return z.createElement(dx,{withinPortal:k,target:I},z.createElement(UY,{mounted:r,duration:c,exitDuration:f,timingFunction:N,transitions:{modal:{duration:c,transition:m||(F?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Be=>z.createElement(z.Fragment,null,z.createElement(pt,Yft({id:M,className:j(L.root,n)},G),z.createElement("div",{style:Be.overlay},z.createElement(VY,{className:L.overlay,sx:{position:"fixed"},zIndex:0,blur:P,color:h||(q.colorScheme==="dark"?q.colors.dark[9]:q.black),opacity:fe,unstyled:B})),z.createElement("div",{role:"presentation",className:L.inner,onClick:ge,onKeyDown:Me=>{var ut;((ut=Me.target)==null?void 0:ut.getAttribute("data-mantine-stop-propagation"))!=="true"&&Me.key==="Escape"&&T&&s()},ref:he},z.createElement(LY,{className:L.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":H,"aria-describedby":Y,"aria-modal":!0,tabIndex:-1,style:Be.modal,unstyled:B,onClick:Me=>Me.stopPropagation()},(i||a)&&z.createElement("div",{className:L.header},z.createElement(dt,{id:H,className:L.title},i),a&&z.createElement(Rm,{iconSize:16,onClick:s,"aria-label":d,className:L.close})),z.createElement("div",{id:Y,className:L.body},o)))))))}qp.displayName="@mantine/core/Modal";const Qft={xs:16,sm:22,md:26,lg:30,xl:36},Jft={xs:10,sm:12,md:14,lg:16,xl:18};var Zft=mt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:Qft}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:Jft}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),edt=Object.defineProperty,$D=Object.getOwnPropertySymbols,iIe=Object.prototype.hasOwnProperty,sIe=Object.prototype.propertyIsEnumerable,Ece=(e,t,n)=>t in e?edt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tdt=(e,t)=>{for(var n in t||(t={}))iIe.call(t,n)&&Ece(e,n,t[n]);if($D)for(var n of $D(t))sIe.call(t,n)&&Ece(e,n,t[n]);return e},ndt=(e,t)=>{var n={};for(var r in e)iIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$D)for(var r of $D(e))t.indexOf(r)<0&&sIe.call(e,r)&&(n[r]=e[r]);return n};const xce={xs:16,sm:22,md:24,lg:26,xl:30};function oIe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=ndt(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=Zft({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return z.createElement("div",tdt({className:p(h.defaultValue,s)},d),z.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&z.createElement(Rm,{"aria-hidden":!0,onMouseDown:o,size:xce[l],radius:2,color:"blue",variant:"transparent",iconSize:xce[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}oIe.displayName="@mantine/core/MultiSelect/DefaultValue";function rdt({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,disableSelectedItemFiltering:o}){if(!t&&s.length===0)return e;if(!t){const u=[];for(let l=0;l<e.length;l+=1)(o||!s.some(c=>c===e[l].value&&!e[l].disabled))&&u.push(e[l]);return u}const a=[];for(let u=0;u<e.length&&(i(r,s.some(l=>l===e[u].value&&!e[u].disabled),e[u])&&a.push(e[u]),!(a.length>=n));u+=1);return a}var idt=Object.defineProperty,ND=Object.getOwnPropertySymbols,aIe=Object.prototype.hasOwnProperty,uIe=Object.prototype.propertyIsEnumerable,Sce=(e,t,n)=>t in e?idt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tce=(e,t)=>{for(var n in t||(t={}))aIe.call(t,n)&&Sce(e,n,t[n]);if(ND)for(var n of ND(t))uIe.call(t,n)&&Sce(e,n,t[n]);return e},sdt=(e,t)=>{var n={};for(var r in e)aIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ND)for(var r of ND(e))t.indexOf(r)<0&&uIe.call(e,r)&&(n[r]=e[r]);return n};const odt={xs:14,sm:18,md:20,lg:24,xl:28};function lIe(e){var t=e,{size:n,error:r,style:i}=t,s=sdt(t,["size","error","style"]);const o=Cs(),a=o.fn.size({size:n,sizes:odt});return z.createElement("svg",Tce({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Tce({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),z.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function cIe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?z.createElement(Rm,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):z.createElement(lIe,{error:i,size:r})}cIe.displayName="@mantine/core/SelectRightSection";var adt=Object.defineProperty,udt=Object.defineProperties,ldt=Object.getOwnPropertyDescriptors,DD=Object.getOwnPropertySymbols,fIe=Object.prototype.hasOwnProperty,dIe=Object.prototype.propertyIsEnumerable,Cce=(e,t,n)=>t in e?adt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qj=(e,t)=>{for(var n in t||(t={}))fIe.call(t,n)&&Cce(e,n,t[n]);if(DD)for(var n of DD(t))dIe.call(t,n)&&Cce(e,n,t[n]);return e},Ace=(e,t)=>udt(e,ldt(t)),cdt=(e,t)=>{var n={};for(var r in e)fIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DD)for(var r of DD(e))t.indexOf(r)<0&&dIe.call(e,r)&&(n[r]=e[r]);return n};const fdt={xs:24,sm:30,md:34,lg:44,xl:54};function hIe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=cdt(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:fdt}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&z.createElement(cIe,Qj({},o)),styles:Ace(Qj({},a),{rightSection:Ace(Qj({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var ddt=Object.defineProperty,hdt=Object.defineProperties,pdt=Object.getOwnPropertyDescriptors,Ice=Object.getOwnPropertySymbols,mdt=Object.prototype.hasOwnProperty,gdt=Object.prototype.propertyIsEnumerable,Oce=(e,t,n)=>t in e?ddt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ydt=(e,t)=>{for(var n in t||(t={}))mdt.call(t,n)&&Oce(e,n,t[n]);if(Ice)for(var n of Ice(t))gdt.call(t,n)&&Oce(e,n,t[n]);return e},vdt=(e,t)=>hdt(e,pdt(t)),_dt=mt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:oa})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:vdt(ydt({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:oa})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}})),bdt=Object.defineProperty,wdt=Object.defineProperties,Edt=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,pIe=Object.prototype.hasOwnProperty,mIe=Object.prototype.propertyIsEnumerable,Pce=(e,t,n)=>t in e?bdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K_=(e,t)=>{for(var n in t||(t={}))pIe.call(t,n)&&Pce(e,n,t[n]);if(MD)for(var n of MD(t))mIe.call(t,n)&&Pce(e,n,t[n]);return e},kce=(e,t)=>wdt(e,Edt(t)),xdt=(e,t)=>{var n={};for(var r in e)pIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MD)for(var r of MD(e))t.indexOf(r)<0&&mIe.call(e,r)&&(n[r]=e[r]);return n};function Sdt(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Tdt(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function Rce(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=t.map(r=>typeof r=="object"?r.value:r);return e.filter(r=>n.includes(r))}const Cdt={size:"sm",valueComponent:oIe,itemComponent:yY,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:Sdt,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:Tdt,switchDirectionOnFlip:!1,zIndex:Rc("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},qY=C.forwardRef((e,t)=>{const n=ct("MultiSelect",Cdt,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:w,transitionDuration:S,transitionTimingFunction:x,maxDropdownHeight:b,shadow:T,nothingFound:A,onFocus:I,onBlur:k,searchable:R,placeholder:P,filter:N,limit:F,clearSearchOnChange:B,clearable:W,clearSearchOnBlur:V,clearButtonLabel:G,variant:M,onSearchChange:H,searchValue:Y,disabled:L,initiallyOpened:j,radius:q,icon:Z,rightSection:ue,rightSectionWidth:he,creatable:fe,getCreateLabel:me,shouldCreate:_e,onCreate:ge,sx:Be,dropdownComponent:Me,onDropdownClose:ut,onDropdownOpen:Oe,maxSelectedValues:Re,withinPortal:Ye,switchDirectionOnFlip:Ut,zIndex:Ft,selectOnBlur:Je,name:Ge,dropdownPosition:gt,errorProps:ot,labelProps:at,descriptionProps:Et,clearButtonTabIndex:ve,form:Se,positionDependencies:Fe,onKeyDown:Ue,unstyled:ht,inputContainer:cn,inputWrapperOrder:Ve,readOnly:wt,withAsterisk:bt,hoverOnSearchChange:bn,disableSelectedItemFiltering:Lt}=n,Ar=xdt(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk","hoverOnSearchChange","disableSelectedItemFiltering"]),{classes:Fn,cx:ar,theme:oi}=_dt({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:ht,name:"MultiSelect"}),{systemStyles:yo,rest:br}=Lh(Ar),nr=C.useRef(),Uo=C.useRef({}),Vr=Ia(_),[Zr,Pt]=C.useState(j),[Xt,rr]=C.useState(-1),[Gs,mi]=C.useState("column"),[ai,ae]=Ea({value:Y,defaultValue:"",finalValue:void 0,onChange:H}),[ne,le]=C.useState(!1),{scrollIntoView:Ee,targetRef:xe,scrollableRef:St}=LSe({duration:0,offset:5,cancelable:!1,isList:!0}),It=fe&&typeof me=="function";let je=null;const Rt=m.map(xt=>typeof xt=="string"?{label:xt,value:xt}:xt),en=iSe({data:Rt}),[ft,kn]=Ea({value:Rce(h,m),defaultValue:Rce(p,m),finalValue:[],onChange:g}),In=C.useRef(!!Re&&Re<ft.length),Gt=xt=>{if(!wt){const Rn=ft.filter(ms=>ms!==xt);kn(Rn),Re&&Rn.length<Re&&(In.current=!1)}},Xn=xt=>{ae(xt.currentTarget.value),!L&&!In.current&&R&&Pt(!0)},Rr=xt=>{typeof I=="function"&&I(xt),!L&&!In.current&&R&&Pt(!0)},Qt=rdt({data:en,searchable:R,searchValue:ai,limit:F,filter:N,value:ft,disableSelectedItemFiltering:Lt}),ui=(xt,Rn,ms)=>{let K=xt;for(;ms(K);)if(K=Rn(K),!Qt[K].disabled)return K;return xt};xs(()=>{rr(bn&&ai?0:-1)},[ai,bn]),xs(()=>{!L&&ft.length>m.length&&Pt(!1),Re&&ft.length<Re&&(In.current=!1),Re&&ft.length>=Re&&(In.current=!0,Pt(!1))},[ft]);const Li=xt=>{if(!wt)if(B&&ae(""),ft.includes(xt.value))Gt(xt.value);else{if(xt.creatable&&typeof ge=="function"){const Rn=ge(xt.value);typeof Rn<"u"&&Rn!==null&&kn(typeof Rn=="string"?[...ft,Rn]:[...ft,Rn.value])}else kn([...ft,xt.value]);ft.length===Re-1&&(In.current=!0,Pt(!1)),Xt===Qt.length-1&&rr(Qt.length-2),Qt.length===1&&Pt(!1)}},Hr=xt=>{typeof k=="function"&&k(xt),Je&&Qt[Xt]&&Zr&&Li(Qt[Xt]),V&&ae(""),Pt(!1)},Is=xt=>{if(ne||(Ue==null||Ue(xt),wt)||xt.key!=="Backspace"&&Re&&In.current)return;const Rn=Gs==="column",ms=()=>{rr(oe=>{var ee;const de=ui(oe,ye=>ye+1,ye=>ye<Qt.length-1);return Zr&&(xe.current=Uo.current[(ee=Qt[de])==null?void 0:ee.value],Ee({alignment:Rn?"end":"start"})),de})},K=()=>{rr(oe=>{var ee;const de=ui(oe,ye=>ye-1,ye=>ye>0);return Zr&&(xe.current=Uo.current[(ee=Qt[de])==null?void 0:ee.value],Ee({alignment:Rn?"start":"end"})),de})};switch(xt.key){case"ArrowUp":{xt.preventDefault(),Pt(!0),Rn?K():ms();break}case"ArrowDown":{xt.preventDefault(),Pt(!0),Rn?ms():K();break}case"Enter":{xt.preventDefault(),Qt[Xt]&&Zr?Li(Qt[Xt]):Pt(!0);break}case" ":{R||(xt.preventDefault(),Qt[Xt]&&Zr?Li(Qt[Xt]):Pt(!0));break}case"Backspace":{ft.length>0&&ai.length===0&&(kn(ft.slice(0,-1)),Pt(!0),Re&&(In.current=!1));break}case"Home":{if(!R){xt.preventDefault(),Zr||Pt(!0);const oe=Qt.findIndex(ee=>!ee.disabled);rr(oe),Ee({alignment:Rn?"end":"start"})}break}case"End":{if(!R){xt.preventDefault(),Zr||Pt(!0);const oe=Qt.map(ee=>!!ee.disabled).lastIndexOf(!1);rr(oe),Ee({alignment:Rn?"end":"start"})}break}case"Escape":Pt(!1)}},Ti=ft.map(xt=>{let Rn=en.find(ms=>ms.value===xt&&!ms.disabled);return!Rn&&It&&(Rn={value:xt,label:xt}),Rn}).filter(xt=>!!xt).map(xt=>z.createElement(y,kce(K_({},xt),{variant:M,disabled:L,className:Fn.value,readOnly:wt,onRemove:Rn=>{Rn.preventDefault(),Rn.stopPropagation(),Gt(xt.value)},key:xt.value,size:u,styles:f,classNames:c,radius:q}))),Ci=xt=>ft.includes(xt),Ys=()=>{var xt;ae(""),kn([]),(xt=nr.current)==null||xt.focus(),Re&&(In.current=!1)};It&&_e(ai,en)&&(je=me(ai),Qt.push({label:ai,value:ai,creatable:!0}));const ps=!wt&&(Qt.length>0?Zr:Zr&&!!A);return xs(()=>{const xt=ps?Oe:ut;typeof xt=="function"&&xt()},[ps]),z.createElement(Ss.Wrapper,K_(K_({required:s,id:Vr,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Be,errorProps:ot,descriptionProps:Et,labelProps:at,inputContainer:cn,inputWrapperOrder:Ve,unstyled:ht,withAsterisk:bt},yo),d),z.createElement(f0,{opened:ps,transition:w,transitionDuration:S,shadow:"sm",withinPortal:Ye,__staticSelector:"MultiSelect",onDirectionChange:mi,switchDirectionOnFlip:Ut,zIndex:Ft,dropdownPosition:gt,positionDependencies:[...Fe,ai],classNames:c,styles:f,unstyled:ht},z.createElement(f0.Target,null,z.createElement("div",{className:Fn.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":Zr&&ps?`${Vr}-items`:null,"aria-controls":Vr,"aria-expanded":Zr,onMouseLeave:()=>rr(-1),tabIndex:-1},z.createElement("input",{type:"hidden",name:Ge,value:ft.join(","),form:Se,disabled:L}),z.createElement(Ss,K_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:M,disabled:L,invalid:!!l,required:s,radius:q,icon:Z,unstyled:ht,onMouseDown:xt=>{var Rn;xt.preventDefault(),!L&&!In.current&&Pt(!Zr),(Rn=nr.current)==null||Rn.focus()},classNames:kce(K_({},c),{input:ar({[Fn.input]:!R},c==null?void 0:c.input)})},hIe({theme:oi,rightSection:ue,rightSectionWidth:he,styles:f,size:u,shouldClear:W&&ft.length>0,clearButtonLabel:G,onClear:Ys,error:l,disabled:L,clearButtonTabIndex:ve,readOnly:wt})),z.createElement("div",{className:Fn.values},Ti,z.createElement("input",K_({ref:As(t,nr),type:"search",id:Vr,className:ar(Fn.searchInput,{[Fn.searchInputPointer]:!R,[Fn.searchInputInputHidden]:!Zr&&ft.length>0||!R&&ft.length>0,[Fn.searchInputEmpty]:ft.length===0}),onKeyDown:Is,value:ai,onChange:Xn,onFocus:Rr,onBlur:Hr,readOnly:!R||In.current||wt,placeholder:ft.length===0?P:void 0,disabled:L,"data-mantine-stop-propagation":Zr,autoComplete:"off",onCompositionStart:()=>le(!0),onCompositionEnd:()=>le(!1)},br)))))),z.createElement(f0.Dropdown,{component:Me||n4,maxHeight:b,direction:Gs,id:Vr,innerRef:St,__staticSelector:"MultiSelect",classNames:c,styles:f},z.createElement(gY,{data:Qt,hovered:Xt,classNames:c,styles:f,uuid:Vr,__staticSelector:"MultiSelect",onItemHover:rr,onItemSelect:Li,itemsRefs:Uo,itemComponent:v,size:u,nothingFound:A,isItemSelected:Ci,creatable:fe&&!!je,createLabel:je,unstyled:ht}))))});qY.displayName="@mantine/core/MultiSelect";const Adt=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function $ce({direction:e,size:t}){return z.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},z.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const gIe={xs:20,sm:24,md:30,lg:34,xl:36};var Idt=mt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:gIe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}})),Odt=Object.defineProperty,Pdt=Object.defineProperties,kdt=Object.getOwnPropertyDescriptors,LD=Object.getOwnPropertySymbols,yIe=Object.prototype.hasOwnProperty,vIe=Object.prototype.propertyIsEnumerable,Nce=(e,t,n)=>t in e?Odt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jj=(e,t)=>{for(var n in t||(t={}))yIe.call(t,n)&&Nce(e,n,t[n]);if(LD)for(var n of LD(t))vIe.call(t,n)&&Nce(e,n,t[n]);return e},Rdt=(e,t)=>Pdt(e,kdt(t)),$dt=(e,t)=>{var n={};for(var r in e)yIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LD)for(var r of LD(e))t.indexOf(r)<0&&vIe.call(e,r)&&(n[r]=e[r]);return n};const Ndt={type:"text",size:"sm",__staticSelector:"TextInput"},mx=C.forwardRef((e,t)=>{const n=F2e("TextInput",Ndt,e),{inputProps:r,wrapperProps:i}=n,s=$dt(n,["inputProps","wrapperProps"]);return z.createElement(Ss.Wrapper,Jj({},i),z.createElement(Ss,Rdt(Jj(Jj({},r),s),{ref:t})))});mx.displayName="@mantine/core/TextInput";var Ddt=Object.defineProperty,Mdt=Object.defineProperties,Ldt=Object.getOwnPropertyDescriptors,FD=Object.getOwnPropertySymbols,_Ie=Object.prototype.hasOwnProperty,bIe=Object.prototype.propertyIsEnumerable,Dce=(e,t,n)=>t in e?Ddt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fdt=(e,t)=>{for(var n in t||(t={}))_Ie.call(t,n)&&Dce(e,n,t[n]);if(FD)for(var n of FD(t))bIe.call(t,n)&&Dce(e,n,t[n]);return e},jdt=(e,t)=>Mdt(e,Ldt(t)),Bdt=(e,t)=>{var n={};for(var r in e)_Ie.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FD)for(var r of FD(e))t.indexOf(r)<0&&bIe.call(e,r)&&(n[r]=e[r]);return n};const zdt=e=>e||"",Udt=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},Mce={xs:10,sm:14,md:16,lg:18,xl:20},Vdt={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:zdt,parser:Udt,type:"text"},wIe=C.forwardRef((e,t)=>{const n=ct("NumberInput",Vdt,e),{readOnly:r,disabled:i,value:s,onChange:o,decimalSeparator:a,min:u,max:l,startValue:c,step:f,stepHoldInterval:d,stepHoldDelay:h,onBlur:p,onFocus:m,onKeyDown:g,onKeyUp:y,hideControls:v,radius:_,variant:w,precision:S,removeTrailingZeros:x,defaultValue:b,noClampOnBlur:T,handlersRef:A,classNames:I,styles:k,size:R,rightSection:P,rightSectionWidth:N,formatter:F,parser:B,inputMode:W,unstyled:V,type:G}=n,M=Bdt(n,["readOnly","disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:H,cx:Y,theme:L}=Idt({radius:_,size:R},{classNames:I,styles:k,unstyled:V,name:"NumberInput"}),j=Ve=>{if(Ve===void 0)return;let wt=Ve.toFixed(S);return x&&S>0&&(wt=wt.replace(new RegExp(`[0]{0,${S}}$`),""),(wt.endsWith(".")||wt.endsWith(a))&&(wt=wt.slice(0,-1))),wt},[q,Z]=C.useState(!1),[ue,he]=C.useState(typeof s=="number"?s:typeof b=="number"?b:void 0),fe=typeof s=="number"?s:ue,[me,_e]=C.useState(typeof fe=="number"?j(fe):""),ge=C.useRef(),Be=Ve=>{Ve!==ue&&!Number.isNaN(Ve)&&(typeof o=="function"&&o(Ve),he(Ve))},Me=(Ve="")=>{let wt=typeof Ve=="number"?String(Ve):Ve;return a&&(wt=wt.replace(/\./g,a)),F(wt)},ut=Ve=>{let wt=Ve;return a&&(wt=wt.replace(new RegExp(`\\${a}`,"g"),".")),B(wt)},Oe=typeof u=="number"?u:-1/0,Re=typeof l=="number"?l:1/0,Ye=C.useRef();Ye.current=()=>{var Ve,wt,bt;if(ue===void 0)Be((Ve=c??u)!=null?Ve:0),_e((bt=(wt=j(c))!=null?wt:j(u))!=null?bt:"0");else{const bn=j(Sl(ue+f,Oe,Re));Be(parseFloat(bn)),_e(bn)}};const Ut=C.useRef();Ut.current=()=>{var Ve,wt,bt;if(ue===void 0)Be((Ve=c??u)!=null?Ve:0),_e((bt=(wt=j(c))!=null?wt:j(u))!=null?bt:"0");else{const bn=j(Sl(ue-f,Oe,Re));Be(parseFloat(bn)),_e(bn)}},DSe(A,{increment:Ye.current,decrement:Ut.current}),C.useEffect(()=>{typeof s=="number"&&!q&&(he(s),_e(j(s))),b===void 0&&s===void 0&&!q&&(he(s),_e(""))},[s,S]);const Ft=h!==void 0&&d!==void 0,Je=C.useRef(null),Ge=C.useRef(0),gt=()=>{Je.current&&window.clearTimeout(Je.current),Je.current=null,Ge.current=0},ot=Ve=>{Ve?Ye.current():Ut.current(),Ge.current+=1},at=Ve=>{if(ot(Ve),Ft){const wt=typeof d=="number"?d:d(Ge.current);Je.current=window.setTimeout(()=>at(Ve),wt)}},Et=(Ve,wt)=>{Ve.preventDefault(),ge.current.focus(),ot(wt),Ft&&(Je.current=window.setTimeout(()=>at(wt),h))};C.useEffect(()=>(gt(),gt),[]);const ve=z.createElement("div",{className:H.rightSection},z.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:fe>=l,className:Y(H.control,H.controlUp),onPointerDown:Ve=>{Et(Ve,!0)},onPointerUp:gt,onPointerLeave:gt},z.createElement($ce,{size:L.fn.size({size:R,sizes:Mce}),direction:"up"})),z.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:fe<=u,className:Y(H.control,H.controlDown),onPointerDown:Ve=>{Et(Ve,!1)},onPointerUp:gt,onPointerLeave:gt},z.createElement($ce,{size:L.fn.size({size:R,sizes:Mce}),direction:"down"}))),Se=Ve=>{if(Ve.nativeEvent.isComposing)return;const bt=Ve.target.value,bn=ut(bt);_e(bn),bt===""||bt==="-"?Be(void 0):bt.trim()!==""&&!Number.isNaN(bn)&&Be(parseFloat(bn))},Fe=Ve=>{var wt;if(Ve.target.value==="")_e(""),Be(void 0);else{let bt=Ve.target.value;(bt[0]===`${a}`||bt[0]===".")&&(bt=`0${bt}`);const bn=ut(bt),Lt=Sl(parseFloat(bn),Oe,Re);Number.isNaN(Lt)?_e((wt=j(fe))!=null?wt:""):T||(_e(j(Lt)),Be(parseFloat(j(Lt))))}Z(!1),typeof p=="function"&&p(Ve)},Ue=Ve=>{Z(!0),typeof m=="function"&&m(Ve)},ht=Ve=>{if(typeof g=="function"&&g(Ve),Ve.repeat&&Ft&&(Ve.key==="ArrowUp"||Ve.key==="ArrowDown")){Ve.preventDefault();return}r||(Ve.key==="ArrowUp"?Et(Ve,!0):Ve.key==="ArrowDown"&&Et(Ve,!1))},cn=Ve=>{typeof y=="function"&&y(Ve),(Ve.key==="ArrowUp"||Ve.key==="ArrowDown")&&gt()};return z.createElement(mx,jdt(Fdt({},M),{type:G,variant:w,value:Me(me),disabled:i,readOnly:r,ref:As(ge,t),onChange:Se,onBlur:Fe,onFocus:Ue,onKeyDown:ht,onKeyUp:cn,rightSection:P||(i||r||v||w==="unstyled"?null:ve),rightSectionWidth:N||L.fn.size({size:R,sizes:gIe})+1,radius:_,max:l,min:u,step:f,size:R,styles:k,classNames:I,inputMode:W||Adt(f,S,WJe()),__staticSelector:"NumberInput",unstyled:V}))});wIe.displayName="@mantine/core/NumberInput";const Lce={xs:3,sm:5,md:8,lg:12,xl:16},Hdt=YQe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var qdt=mt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:Lce}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${Hdt} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:Lce})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const EIe=C.createContext(!1),Wdt=EIe.Provider,Gdt=()=>C.useContext(EIe);function xIe({children:e,openDelay:t=0,closeDelay:n=0}){return z.createElement(Wdt,{value:!0},z.createElement(Frt,{delay:{open:t,close:n}},e))}xIe.displayName="@mantine/core/TooltipGroup";var Ydt=Object.defineProperty,Kdt=Object.defineProperties,Xdt=Object.getOwnPropertyDescriptors,Fce=Object.getOwnPropertySymbols,Qdt=Object.prototype.hasOwnProperty,Jdt=Object.prototype.propertyIsEnumerable,jce=(e,t,n)=>t in e?Ydt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bce=(e,t)=>{for(var n in t||(t={}))Qdt.call(t,n)&&jce(e,n,t[n]);if(Fce)for(var n of Fce(t))Jdt.call(t,n)&&jce(e,n,t[n]);return e},Zdt=(e,t)=>Kdt(e,Xdt(t));function eht(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var SIe=mt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:Zdt(Bce(Bce({},e.fn.fontStyles()),eht(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const TIe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function tht({offset:e,position:t}){const[n,r]=C.useState(!1),i=C.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=kY({placement:t,middleware:[IY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=C.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return C.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=Hp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating.current,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var nht=Object.defineProperty,rht=Object.defineProperties,iht=Object.getOwnPropertyDescriptors,jD=Object.getOwnPropertySymbols,CIe=Object.prototype.hasOwnProperty,AIe=Object.prototype.propertyIsEnumerable,zce=(e,t,n)=>t in e?nht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zj=(e,t)=>{for(var n in t||(t={}))CIe.call(t,n)&&zce(e,n,t[n]);if(jD)for(var n of jD(t))AIe.call(t,n)&&zce(e,n,t[n]);return e},e9=(e,t)=>rht(e,iht(t)),sht=(e,t)=>{var n={};for(var r in e)CIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jD)for(var r of jD(e))t.indexOf(r)<0&&AIe.call(e,r)&&(n[r]=e[r]);return n};const oht={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Rc("popover")};function IIe(e){var t;const n=ct("TooltipFloating",oht,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,w=sht(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:S,x,y:b,opened:T,boundaryRef:A,floating:I,setOpened:k}=tht({offset:p,position:m}),{classes:R,cx:P}=SIe({radius:f,color:d,multiline:g,width:y},{name:"TooltipFloating",classNames:u,styles:l,unstyled:c});if(!lI(r))throw new Error(TIe.children);const N=As(A,r.ref),F=W=>{var V,G;(G=(V=r.props).onMouseEnter)==null||G.call(V,W),S(W),k(!0)},B=W=>{var V,G;(G=(V=r.props).onMouseLeave)==null||G.call(V,W),k(!1)};return z.createElement(z.Fragment,null,z.createElement(dx,{withinPortal:s},z.createElement(pt,e9(Zj({},w),{ref:I,className:P(R.tooltip,a),style:e9(Zj({},o),{zIndex:v,display:!_&&T?"block":"none",top:b??"",left:(t=Math.round(x))!=null?t:""})}),h)),C.cloneElement(r,e9(Zj({},r.props),{[i]:N,onMouseEnter:F,onMouseLeave:B})))}IIe.displayName="@mantine/core/TooltipFloating";function aht(e){const[t,n]=C.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Gdt(),o=Ia(),{delay:a,currentId:u,setCurrentId:l}=y2e(),c=C.useCallback(T=>{n(T),T&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:w}={}}}=kY({placement:e.position,open:i,onOpenChange:c,middleware:[l2e(e.offset),IY({padding:8}),c2e(),d2e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[f2e()]:[]]}),{getReferenceProps:S,getFloatingProps:x}=Xrt([Lrt(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),Yrt(m,{enabled:e.events.focus,keyboardOnly:!0}),Krt(m,{role:"tooltip"}),Grt(m,{enabled:typeof e.opened===void 0}),jrt(m,{id:o})]);return _2e({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),xs(()=>{var T;(T=e.onPositionChange)==null||T.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:w,reference:h,floating:p,getFloatingProps:x,getReferenceProps:S,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var uht=Object.defineProperty,lht=Object.defineProperties,cht=Object.getOwnPropertyDescriptors,BD=Object.getOwnPropertySymbols,OIe=Object.prototype.hasOwnProperty,PIe=Object.prototype.propertyIsEnumerable,Uce=(e,t,n)=>t in e?uht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DS=(e,t)=>{for(var n in t||(t={}))OIe.call(t,n)&&Uce(e,n,t[n]);if(BD)for(var n of BD(t))PIe.call(t,n)&&Uce(e,n,t[n]);return e},fht=(e,t)=>lht(e,cht(t)),dht=(e,t)=>{var n={};for(var r in e)OIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BD)for(var r of BD(e))t.indexOf(r)<0&&PIe.call(e,r)&&(n[r]=e[r]);return n};const hht={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Rc("popover"),positionDependencies:[]},s4=C.forwardRef((e,t)=>{const n=C.useRef(null),r=ct("Tooltip",hht,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:w,arrowSize:S,arrowOffset:x,arrowRadius:b,arrowPosition:T,offset:A,transition:I,transitionDuration:k,multiline:R,width:P,events:N,zIndex:F,disabled:B,positionDependencies:W,onClick:V,onMouseEnter:G,onMouseLeave:M,inline:H}=r,Y=dht(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:L,cx:j,theme:q}=SIe({radius:h,color:p,width:P,multiline:R},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),Z=aht({position:$2e(q.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:N,arrowRef:n,arrowOffset:x,offset:A+(w?S/2:0),positionDependencies:[...W,i],inline:H});if(!lI(i))throw new Error(TIe.children);const ue=As(Z.reference,i.ref,t);return z.createElement(z.Fragment,null,z.createElement(dx,{withinPortal:d},z.createElement(yI,{mounted:!B&&Z.opened,transition:I,duration:Z.isGroupPhase?10:k},he=>{var fe,me;return z.createElement(pt,DS(DS({},Y),Z.getFloatingProps({ref:Z.floating,className:L.tooltip,style:fht(DS(DS({},v),he),{zIndex:F,top:(fe=Z.y)!=null?fe:0,left:(me=Z.x)!=null?me:0})})),a,z.createElement(RY,{ref:n,arrowX:Z.arrowX,arrowY:Z.arrowY,visible:w,withBorder:!1,position:Z.placement,arrowSize:S,arrowOffset:x,arrowRadius:b,arrowPosition:T,className:L.arrow}))})),C.cloneElement(i,Z.getReferenceProps(DS({onClick:V,onMouseEnter:G,onMouseLeave:M,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:ue,className:j(_,i.props.className)},i.props))))});s4.Group=xIe;s4.Floating=IIe;s4.displayName="@mantine/core/Tooltip";const Wp=s4;var pht=Object.defineProperty,mht=Object.defineProperties,ght=Object.getOwnPropertyDescriptors,zD=Object.getOwnPropertySymbols,kIe=Object.prototype.hasOwnProperty,RIe=Object.prototype.propertyIsEnumerable,Vce=(e,t,n)=>t in e?pht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AU=(e,t)=>{for(var n in t||(t={}))kIe.call(t,n)&&Vce(e,n,t[n]);if(zD)for(var n of zD(t))RIe.call(t,n)&&Vce(e,n,t[n]);return e},$Ie=(e,t)=>mht(e,ght(t)),Hce=(e,t)=>{var n={};for(var r in e)kIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zD)for(var r of zD(e))t.indexOf(r)<0&&RIe.call(e,r)&&(n[r]=e[r]);return n};function yht(e){return e.reduce((t,n)=>(t.sections.push($Ie(AU({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const vht={size:"md",radius:"sm",striped:!1,animate:!1,label:""},NIe=C.forwardRef((e,t)=>{const n=ct("Progress",vht,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=Hce(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=qdt({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),w=Array.isArray(p)?yht(p).map((S,x)=>{var b=S,{tooltip:T,accumulated:A,value:I,label:k,color:R}=b,P=Hce(b,["tooltip","accumulated","value","label","color"]);return z.createElement(Wp.Floating,{label:T,disabled:!T,key:x},z.createElement(pt,$Ie(AU({},P),{className:v(y.bar,P.className),sx:{width:`${I}%`,left:`${A}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:R||_.primaryColor}).background}}),k&&z.createElement(dt,{className:y.label},k)))}):null;return z.createElement(pt,AU({className:v(y.root,r),ref:t},g),w||z.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?z.createElement(dt,{className:y.label},c):""))});NIe.displayName="@mantine/core/Progress";var _ht=Object.defineProperty,qce=Object.getOwnPropertySymbols,bht=Object.prototype.hasOwnProperty,wht=Object.prototype.propertyIsEnumerable,Wce=(e,t,n)=>t in e?_ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eht=(e,t)=>{for(var n in t||(t={}))bht.call(t,n)&&Wce(e,n,t[n]);if(qce)for(var n of qce(t))wht.call(t,n)&&Wce(e,n,t[n]);return e};function xht(e){return z.createElement("svg",Eht({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),z.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const DIe=C.createContext(null),Sht=DIe.Provider,Tht=()=>C.useContext(DIe);var Cht=Object.defineProperty,UD=Object.getOwnPropertySymbols,MIe=Object.prototype.hasOwnProperty,LIe=Object.prototype.propertyIsEnumerable,Gce=(e,t,n)=>t in e?Cht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yce=(e,t)=>{for(var n in t||(t={}))MIe.call(t,n)&&Gce(e,n,t[n]);if(UD)for(var n of UD(t))LIe.call(t,n)&&Gce(e,n,t[n]);return e},Aht=(e,t)=>{var n={};for(var r in e)MIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UD)for(var r of UD(e))t.indexOf(r)<0&&LIe.call(e,r)&&(n[r]=e[r]);return n};const Iht={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},FIe=C.forwardRef((e,t)=>{const n=ct("RadioGroup",Iht,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=Aht(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),m=Ia(h),[g,y]=Ea({value:i,defaultValue:s,finalValue:"",onChange:o}),v=_=>y(_.currentTarget.value);return z.createElement(Sht,{value:{value:g,onChange:v,size:l,name:m}},z.createElement(Ss.Wrapper,Yce(Yce({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),z.createElement(PCe,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});FIe.displayName="@mantine/core/RadioGroup";var Oht=Object.defineProperty,Pht=Object.defineProperties,kht=Object.getOwnPropertyDescriptors,Kce=Object.getOwnPropertySymbols,Rht=Object.prototype.hasOwnProperty,$ht=Object.prototype.propertyIsEnumerable,Xce=(e,t,n)=>t in e?Oht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nht=(e,t)=>{for(var n in t||(t={}))Rht.call(t,n)&&Xce(e,n,t[n]);if(Kce)for(var n of Kce(t))$ht.call(t,n)&&Xce(e,n,t[n]);return e},Dht=(e,t)=>Pht(e,kht(t));const t9={xs:16,sm:20,md:24,lg:30,xl:36},UP={xs:6,sm:8,md:10,lg:14,xl:16};var Mht=mt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:UP,size:t}),height:e.fn.size({sizes:UP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:UP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:UP,size:t})/2}px)`},radio:Dht(Nht({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:t9,size:t}),height:e.fn.size({sizes:t9,size:t}),borderRadius:e.fn.size({sizes:t9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}}),Lht=Object.defineProperty,VD=Object.getOwnPropertySymbols,jIe=Object.prototype.hasOwnProperty,BIe=Object.prototype.propertyIsEnumerable,Qce=(e,t,n)=>t in e?Lht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VP=(e,t)=>{for(var n in t||(t={}))jIe.call(t,n)&&Qce(e,n,t[n]);if(VD)for(var n of VD(t))BIe.call(t,n)&&Qce(e,n,t[n]);return e},Fht=(e,t)=>{var n={};for(var r in e)jIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VD)for(var r of VD(e))t.indexOf(r)<0&&BIe.call(e,r)&&(n[r]=e[r]);return n};const jht={icon:xht,transitionDuration:100,size:"sm",labelPosition:"right"},HD=C.forwardRef((e,t)=>{var n,r;const i=ct("Radio",jht,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:w,description:S,error:x}=i,b=Fht(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),T=Tht(),A=(n=T==null?void 0:T.size)!=null?n:l,I=e.size?l:A,{classes:k}=Mht({color:d,size:I,transitionDuration:y,labelPosition:w,error:!!x},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:R,rest:P}=Lh(b),N=Ia(a),F=T?{checked:T.value===P.value,name:(r=P.name)!=null?r:T.name,onChange:T.onChange}:{};return z.createElement(jY,VP(VP({className:s,sx:m,style:o,id:N,size:I,labelPosition:w,label:u,description:S,error:x,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":F.checked||void 0},R),v),z.createElement("div",{className:k.inner},z.createElement("input",VP(VP({ref:t,className:k.radio,type:"radio",id:N,disabled:f},P),F)),z.createElement(g,{className:k.icon,"aria-hidden":!0})))});HD.displayName="@mantine/core/Radio";HD.Group=FIe;var Bht=Object.defineProperty,zht=Object.defineProperties,Uht=Object.getOwnPropertyDescriptors,Jce=Object.getOwnPropertySymbols,Vht=Object.prototype.hasOwnProperty,Hht=Object.prototype.propertyIsEnumerable,Zce=(e,t,n)=>t in e?Bht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HP=(e,t)=>{for(var n in t||(t={}))Vht.call(t,n)&&Zce(e,n,t[n]);if(Jce)for(var n of Jce(t))Hht.call(t,n)&&Zce(e,n,t[n]);return e},qht=(e,t)=>zht(e,Uht(t));const NR=4,efe={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var Wht=mt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:qht(HP(HP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:efe[a in efe?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:HP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:HP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:NR},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}}),Ght=Object.defineProperty,qD=Object.getOwnPropertySymbols,zIe=Object.prototype.hasOwnProperty,UIe=Object.prototype.propertyIsEnumerable,tfe=(e,t,n)=>t in e?Ght(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yht=(e,t)=>{for(var n in t||(t={}))zIe.call(t,n)&&tfe(e,n,t[n]);if(qD)for(var n of qD(t))UIe.call(t,n)&&tfe(e,n,t[n]);return e},Kht=(e,t)=>{var n={};for(var r in e)zIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qD)for(var r of qD(e))t.indexOf(r)<0&&UIe.call(e,r)&&(n[r]=e[r]);return n};const Xht={disabled:!1,size:"sm",transitionDuration:200},VIe=C.forwardRef((e,t)=>{var n,r,i,s;const o=ct("SegmentedControl",Xht,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:w,defaultValue:S,orientation:x,unstyled:b}=o,T=Kht(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),A=Cs(),I=pY(),k=A.respectReducedMotion?I:!1,R=l.map(he=>typeof he=="string"?{label:he,value:he}:he),P=C.useRef(),[N,F]=C.useState(!1),[B,W]=Ea({value:f,defaultValue:S,finalValue:Array.isArray(R)&&(s=(i=(n=R.find(he=>!he.disabled))==null?void 0:n.value)!=null?i:(r=R[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:V,cx:G}=Wht({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:k||!N,transitionDuration:y,transitionTimingFunction:v,orientation:x},{classNames:_,styles:w,unstyled:b,name:"SegmentedControl"}),[M,H]=C.useState({width:0,height:0,translate:[0,0]}),Y=Ia(c),L=C.useRef({}),[j,q]=mc();fY(()=>{P.current?F(!0):(P.current=!0,F(!1))}),C.useEffect(()=>{if(B in L.current&&j.current){const he=L.current[B],fe=he.getBoundingClientRect(),me=he.offsetWidth/fe.width,_e=fe.width*me||0,ge=fe.height*me||0,Be=q.width-he.parentElement.offsetLeft+NR-_e,Me=he.parentElement.offsetLeft-NR;H({width:_e,height:ge,translate:[A.dir==="rtl"?Be:Me,he.parentElement.offsetTop-NR]})}},[B,q]);const Z=R.map(he=>z.createElement("div",{className:G(V.control,{[V.controlActive]:B===he.value}),key:he.value},z.createElement("input",{className:V.input,disabled:u||he.disabled,type:"radio",name:Y,value:he.value,id:`${Y}-${he.value}`,checked:B===he.value,onChange:()=>W(he.value)}),z.createElement("label",{className:G(V.label,{[V.labelActive]:B===he.value,[V.disabled]:u||he.disabled}),htmlFor:`${Y}-${he.value}`,ref:fe=>{L.current[he.value]=fe}},he.label))),ue=As(j,t);return R.length===0?null:z.createElement(pt,Yht({className:G(V.root,a),ref:ue},T),typeof B=="string"&&N&&z.createElement(pt,{component:"span",className:V.active,sx:{width:M.width,height:M.height,transform:`translate(${M.translate[0]}px, ${M.translate[1]}px )`}}),Z)});VIe.displayName="@mantine/core/SegmentedControl";function Qht({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r){if(n){if(n>=e.length)return e;const l=e.indexOf(a),c=l+n,f=c-e.length;return f>0?e.slice(l-f):e.slice(l,c)}return e}const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var Jht=mt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}})),Zht=Object.defineProperty,ept=Object.defineProperties,tpt=Object.getOwnPropertyDescriptors,WD=Object.getOwnPropertySymbols,HIe=Object.prototype.hasOwnProperty,qIe=Object.prototype.propertyIsEnumerable,nfe=(e,t,n)=>t in e?Zht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MS=(e,t)=>{for(var n in t||(t={}))HIe.call(t,n)&&nfe(e,n,t[n]);if(WD)for(var n of WD(t))qIe.call(t,n)&&nfe(e,n,t[n]);return e},n9=(e,t)=>ept(e,tpt(t)),npt=(e,t)=>{var n={};for(var r in e)HIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WD)for(var r of WD(e))t.indexOf(r)<0&&qIe.call(e,r)&&(n[r]=e[r]);return n};function rpt(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function ipt(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const spt={required:!1,size:"sm",shadow:"sm",itemComponent:yY,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:rpt,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:ipt,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Rc("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},Gp=C.forwardRef((e,t)=>{const n=F2e("Select",spt,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:w,filter:S,maxDropdownHeight:x,searchable:b,clearable:T,nothingFound:A,clearButtonLabel:I,limit:k,disabled:R,onSearchChange:P,searchValue:N,rightSection:F,rightSectionWidth:B,creatable:W,getCreateLabel:V,shouldCreate:G,selectOnBlur:M,onCreate:H,dropdownComponent:Y,onDropdownClose:L,onDropdownOpen:j,withinPortal:q,switchDirectionOnFlip:Z,zIndex:ue,name:he,dropdownPosition:fe,allowDeselect:me,placeholder:_e,filterDataOnExactSearchMatch:ge,clearButtonTabIndex:Be,form:Me,positionDependencies:ut,readOnly:Oe,hoverOnSearchChange:Re}=n,Ye=npt(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly","hoverOnSearchChange"]),{classes:Ut,cx:Ft,theme:Je}=Jht(),[Ge,gt]=C.useState(g),[ot,at]=C.useState(-1),Et=C.useRef(),ve=C.useRef({}),[Se,Fe]=C.useState("column"),Ue=Se==="column",{scrollIntoView:ht,targetRef:cn,scrollableRef:Ve}=LSe({duration:0,offset:5,cancelable:!1,isList:!0}),wt=me===void 0?T:me,bt=je=>{if(Ge!==je){gt(je);const Rt=je?j:L;typeof Rt=="function"&&Rt()}},bn=W&&typeof V=="function";let Lt=null;const Ar=o.map(je=>typeof je=="string"?{label:je,value:je}:je),Fn=iSe({data:Ar}),[ar,oi,yo]=Ea({value:a,defaultValue:u,finalValue:null,onChange:l}),br=Fn.find(je=>je.value===ar),[nr,Uo]=Ea({value:N,defaultValue:(br==null?void 0:br.label)||"",finalValue:void 0,onChange:P}),Vr=je=>{Uo(je),b&&typeof P=="function"&&P(je)},Zr=()=>{var je;Oe||(oi(null),yo||Vr(""),(je=Et.current)==null||je.focus())};C.useEffect(()=>{const je=Fn.find(Rt=>Rt.value===ar);je?Vr(je.label):(!bn||!ar)&&Vr("")},[ar]),C.useEffect(()=>{br&&(!b||!Ge)&&Vr(br.label)},[br==null?void 0:br.label]);const Pt=je=>{if(!Oe)if(wt&&(br==null?void 0:br.value)===je.value)oi(null),bt(!1);else{if(je.creatable&&typeof H=="function"){const Rt=H(je.value);typeof Rt<"u"&&Rt!==null&&oi(typeof Rt=="string"?Rt:Rt.value)}else oi(je.value);yo||Vr(je.label),at(-1),bt(!1),Et.current.focus()}},Xt=Qht({data:Fn,searchable:b,limit:k,searchValue:nr,filter:S,filterDataOnExactSearchMatch:ge,value:ar});bn&&G(nr,Xt)&&(Lt=V(nr),Xt.push({label:nr,value:nr,creatable:!0}));const rr=(je,Rt,en)=>{let ft=je;for(;en(ft);)if(ft=Rt(ft),!Xt[ft].disabled)return ft;return je};xs(()=>{at(Re&&nr?0:-1)},[nr,Re]);const Gs=ar?Xt.findIndex(je=>je.value===ar):0,mi=!Oe&&(Xt.length>0?Ge:Ge&&!!A),ai=()=>{at(je=>{var Rt;const en=rr(je,ft=>ft-1,ft=>ft>0);return cn.current=ve.current[(Rt=Xt[en])==null?void 0:Rt.value],mi&&ht({alignment:Ue?"start":"end"}),en})},ae=()=>{at(je=>{var Rt;const en=rr(je,ft=>ft+1,ft=>ft<Xt.length-1);return cn.current=ve.current[(Rt=Xt[en])==null?void 0:Rt.value],mi&&ht({alignment:Ue?"end":"start"}),en})},ne=()=>window.setTimeout(()=>{var je;cn.current=ve.current[(je=Xt[Gs])==null?void 0:je.value],ht({alignment:Ue?"end":"start"})},0);xs(()=>{mi&&ne()},[mi]);const le=je=>{switch(typeof f=="function"&&f(je),je.key){case"ArrowUp":{je.preventDefault(),Ge?Ue?ai():ae():(at(Gs),bt(!0),ne());break}case"ArrowDown":{je.preventDefault(),Ge?Ue?ae():ai():(at(Gs),bt(!0),ne());break}case"Home":{if(!b){je.preventDefault(),Ge||bt(!0);const Rt=Xt.findIndex(en=>!en.disabled);at(Rt),mi&&ht({alignment:Ue?"end":"start"})}break}case"End":{if(!b){je.preventDefault(),Ge||bt(!0);const Rt=Xt.map(en=>!!en.disabled).lastIndexOf(!1);at(Rt),mi&&ht({alignment:Ue?"end":"start"})}break}case"Escape":{je.preventDefault(),bt(!1),at(-1);break}case" ":{b||(je.preventDefault(),Xt[ot]&&Ge?Pt(Xt[ot]):(bt(!0),at(Gs),ne()));break}case"Enter":b||je.preventDefault(),Xt[ot]&&Ge&&(je.preventDefault(),Pt(Xt[ot]))}},Ee=je=>{typeof d=="function"&&d(je);const Rt=Fn.find(en=>en.value===ar);M&&Xt[ot]&&Ge&&Pt(Xt[ot]),Vr((Rt==null?void 0:Rt.label)||""),bt(!1)},xe=je=>{typeof h=="function"&&h(je),b&&bt(!0)},St=je=>{Oe||(Vr(je.currentTarget.value),T&&je.currentTarget.value===""&&oi(null),at(-1),bt(!0))},It=()=>{Oe||(bt(!Ge),ar&&!Ge&&at(Gs))};return z.createElement(Ss.Wrapper,n9(MS({},i),{__staticSelector:"Select"}),z.createElement(f0,{opened:mi,transition:p,transitionDuration:m,shadow:"sm",withinPortal:q,__staticSelector:"Select",onDirectionChange:Fe,switchDirectionOnFlip:Z,zIndex:ue,dropdownPosition:fe,positionDependencies:[...ut,nr],classNames:_,styles:w,unstyled:v},z.createElement(f0.Target,null,z.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":mi?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":mi,onMouseLeave:()=>at(-1),tabIndex:-1},z.createElement("input",{type:"hidden",name:he,value:ar||"",form:Me,disabled:R}),z.createElement(Ss,MS(n9(MS(MS({autoComplete:"off",type:"search"},r),Ye),{ref:As(t,Et),onKeyDown:le,__staticSelector:"Select",value:nr,placeholder:_e,onChange:St,"aria-autocomplete":"list","aria-controls":mi?`${r.id}-items`:null,"aria-activedescendant":ot>=0?`${r.id}-${ot}`:null,onMouseDown:It,onBlur:Ee,onFocus:xe,readOnly:!b||Oe,disabled:R,"data-mantine-stop-propagation":mi,name:null,classNames:n9(MS({},_),{input:Ft({[Ut.input]:!b},_==null?void 0:_.input)})}),hIe({theme:Je,rightSection:F,rightSectionWidth:B,styles:w,size:r.size,shouldClear:T&&!!br,clearButtonLabel:I,onClear:Zr,error:i.error,clearButtonTabIndex:Be,disabled:R,readOnly:Oe}))))),z.createElement(f0.Dropdown,{component:Y||n4,maxHeight:x,direction:Se,id:r.id,innerRef:Ve,__staticSelector:"Select",classNames:_,styles:w},z.createElement(gY,{data:Xt,hovered:ot,classNames:_,styles:w,isItemSelected:je=>je===ar,uuid:r.id,__staticSelector:"Select",onItemHover:at,onItemSelect:Pt,itemsRefs:ve,itemComponent:c,size:r.size,nothingFound:A,creatable:bn&&!!Lt,createLabel:Lt,"aria-label":i.label,unstyled:v}))))});Gp.displayName="@mantine/core/Select";function GD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function IU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var opt=Object.defineProperty,apt=Object.defineProperties,upt=Object.getOwnPropertyDescriptors,rfe=Object.getOwnPropertySymbols,lpt=Object.prototype.hasOwnProperty,cpt=Object.prototype.propertyIsEnumerable,ife=(e,t,n)=>t in e?opt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fpt=(e,t)=>{for(var n in t||(t={}))lpt.call(t,n)&&ife(e,n,t[n]);if(rfe)for(var n of rfe(t))cpt.call(t,n)&&ife(e,n,t[n]);return e},dpt=(e,t)=>apt(e,upt(t));const Su={xs:4,sm:6,md:8,lg:10,xl:12};var hpt=mt((e,{size:t,disabled:n})=>({root:dpt(fpt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:Su,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const ppt=hpt;var mpt=Object.defineProperty,gpt=Object.defineProperties,ypt=Object.getOwnPropertyDescriptors,sfe=Object.getOwnPropertySymbols,vpt=Object.prototype.hasOwnProperty,_pt=Object.prototype.propertyIsEnumerable,ofe=(e,t,n)=>t in e?mpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bpt=(e,t)=>{for(var n in t||(t={}))vpt.call(t,n)&&ofe(e,n,t[n]);if(sfe)for(var n of sfe(t))_pt.call(t,n)&&ofe(e,n,t[n]);return e},wpt=(e,t)=>gpt(e,ypt(t)),Ept=mt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:wpt(bpt({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:Su,size:n})*2,width:i||e.fn.size({sizes:Su,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const YD=C.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:w,unstyled:S,thumbSize:x},b)=>{const{classes:T,cx:A,theme:I}=Ept({color:a,size:c,disabled:w,thumbSize:x},{classNames:u,styles:l,unstyled:S,name:"Slider"}),[k,R]=C.useState(!1),P=p||s||k||v;return z.createElement(pt,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,className:A(T.thumb,{[T.dragging]:s}),onFocus:()=>{R(!0),typeof g=="function"&&g()},onBlur:()=>{R(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:N=>N.stopPropagation(),style:{[I.dir==="rtl"?"right":"left"]:`${r}%`}},_,z.createElement(yI,{mounted:i!=null&&P,duration:d,transition:f,timingFunction:h||I.transitionTimingFunction},N=>z.createElement("div",{style:N,className:T.label},i)))});YD.displayName="@mantine/core/SliderThumb";function xpt({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var Spt=mt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:Su})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:Su,size:t}),width:e.fn.size({sizes:Su,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:Su,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));function WIe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=Spt({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>z.createElement(pt,{className:h.markWrapper,sx:{left:`${GD({value:g.value,min:r,max:i})}%`},key:y},z.createElement("div",{className:p(h.mark,{[h.markFilled]:xpt({mark:g,value:s,offset:u,inverted:d})})}),g.label&&z.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return z.createElement("div",null,m)}WIe.displayName="@mantine/core/SliderMarks";var Tpt=mt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:Su,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:Su}),marginLeft:e.fn.size({size:n,sizes:Su}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:Su}),left:-e.fn.size({size:n,sizes:Su}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}})),Cpt=Object.defineProperty,Apt=Object.defineProperties,Ipt=Object.getOwnPropertyDescriptors,KD=Object.getOwnPropertySymbols,GIe=Object.prototype.hasOwnProperty,YIe=Object.prototype.propertyIsEnumerable,afe=(e,t,n)=>t in e?Cpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Opt=(e,t)=>{for(var n in t||(t={}))GIe.call(t,n)&&afe(e,n,t[n]);if(KD)for(var n of KD(t))YIe.call(t,n)&&afe(e,n,t[n]);return e},Ppt=(e,t)=>Apt(e,Ipt(t)),kpt=(e,t)=>{var n={};for(var r in e)GIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KD)for(var r of KD(e))t.indexOf(r)<0&&YIe.call(e,r)&&(n[r]=e[r]);return n};function WY(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=kpt(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=Tpt({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return z.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},z.createElement(pt,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:Su})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:Su})}px)`})}),u,z.createElement(WIe,Ppt(Opt({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}WY.displayName="@mantine/core/SliderTrack";var Rpt=Object.defineProperty,$pt=Object.defineProperties,Npt=Object.getOwnPropertyDescriptors,XD=Object.getOwnPropertySymbols,KIe=Object.prototype.hasOwnProperty,XIe=Object.prototype.propertyIsEnumerable,ufe=(e,t,n)=>t in e?Rpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dpt=(e,t)=>{for(var n in t||(t={}))KIe.call(t,n)&&ufe(e,n,t[n]);if(XD)for(var n of XD(t))XIe.call(t,n)&&ufe(e,n,t[n]);return e},Mpt=(e,t)=>$pt(e,Npt(t)),Lpt=(e,t)=>{var n={};for(var r in e)KIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XD)for(var r of XD(e))t.indexOf(r)<0&&XIe.call(e,r)&&(n[r]=e[r]);return n};const GY=C.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=Lpt(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=ppt({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return z.createElement(pt,Mpt(Dpt({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});GY.displayName="@mantine/core/SliderRoot";var Fpt=Object.defineProperty,jpt=Object.defineProperties,Bpt=Object.getOwnPropertyDescriptors,QD=Object.getOwnPropertySymbols,QIe=Object.prototype.hasOwnProperty,JIe=Object.prototype.propertyIsEnumerable,lfe=(e,t,n)=>t in e?Fpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zpt=(e,t)=>{for(var n in t||(t={}))QIe.call(t,n)&&lfe(e,n,t[n]);if(QD)for(var n of QD(t))JIe.call(t,n)&&lfe(e,n,t[n]);return e},Upt=(e,t)=>jpt(e,Bpt(t)),Vpt=(e,t)=>{var n={};for(var r in e)QIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QD)for(var r of QD(e))t.indexOf(r)<0&&JIe.call(e,r)&&(n[r]=e[r]);return n};const Hpt={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},YY=C.forwardRef((e,t)=>{const n=ct("Slider",Hpt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:S,labelAlwaysOn:x,thumbLabel:b,showLabelOnHover:T,thumbChildren:A,disabled:I,unstyled:k,thumbSize:R,scale:P,inverted:N}=n,F=Vpt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),B=Cs(),[W,V]=C.useState(!1),[G,M]=Ea({value:typeof o=="number"?Sl(o,f,d):o,defaultValue:typeof m=="number"?Sl(m,f,d):m,finalValue:Sl(0,f,d),onChange:a}),H=C.useRef(G),Y=C.useRef(),L=GD({value:G,min:f,max:d}),j=P(G),q=typeof v=="function"?v(j):v,Z=C.useCallback(({x:_e})=>{if(!I){const ge=IU({value:_e,min:f,max:d,step:h,precision:p});M(ge),H.current=ge}},[I,f,d,h,p]),{ref:ue,active:he}=Q6(Z,{onScrubEnd:()=>u==null?void 0:u(H.current)},B.dir),fe=_e=>{_e.stopPropagation()},me=_e=>{if(!I)switch(_e.key){case"ArrowUp":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(G+h,f),d);u==null||u(ge),M(ge);break}case"ArrowRight":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(B.dir==="rtl"?G-h:G+h,f),d);u==null||u(ge),M(ge);break}case"ArrowDown":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(G-h,f),d);u==null||u(ge),M(ge);break}case"ArrowLeft":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(B.dir==="rtl"?G+h:G-h,f),d);u==null||u(ge),M(ge);break}case"Home":{_e.preventDefault(),Y.current.focus(),u==null||u(f),M(f);break}case"End":{_e.preventDefault(),Y.current.focus(),u==null||u(d),M(d);break}}};return z.createElement(GY,Upt(zpt({},F),{size:l,ref:As(ue,t),onKeyDownCapture:me,onMouseDownCapture:()=>{var _e;return(_e=ue.current)==null?void 0:_e.focus()},classNames:r,styles:i,disabled:I,unstyled:k}),z.createElement(WY,{inverted:N,offset:0,filled:L,marks:y,size:l,radius:c,color:s,min:f,max:d,value:j,onChange:M,onMouseEnter:T?()=>V(!0):void 0,onMouseLeave:T?()=>V(!1):void 0,classNames:r,styles:i,disabled:I,unstyled:k},z.createElement(YD,{max:d,min:f,value:j,position:L,dragging:he,color:s,size:l,label:q,ref:Y,onMouseDown:fe,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:S,labelAlwaysOn:x,classNames:r,styles:i,thumbLabel:b,showLabelOnHover:T&&W,disabled:I,unstyled:k,thumbSize:R},A)),z.createElement("input",{type:"hidden",name:g,value:j}))});YY.displayName="@mantine/core/Slider";function qpt(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var Wpt=Object.defineProperty,Gpt=Object.defineProperties,Ypt=Object.getOwnPropertyDescriptors,JD=Object.getOwnPropertySymbols,ZIe=Object.prototype.hasOwnProperty,eOe=Object.prototype.propertyIsEnumerable,cfe=(e,t,n)=>t in e?Wpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r9=(e,t)=>{for(var n in t||(t={}))ZIe.call(t,n)&&cfe(e,n,t[n]);if(JD)for(var n of JD(t))eOe.call(t,n)&&cfe(e,n,t[n]);return e},i9=(e,t)=>Gpt(e,Ypt(t)),Kpt=(e,t)=>{var n={};for(var r in e)ZIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JD)for(var r of JD(e))t.indexOf(r)<0&&eOe.call(e,r)&&(n[r]=e[r]);return n};const Xpt={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},OU=C.forwardRef((e,t)=>{const n=ct("RangeSlider",Xpt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,maxRange:p,step:m,precision:g,defaultValue:y,name:v,marks:_,label:w,labelTransition:S,labelTransitionDuration:x,labelTransitionTimingFunction:b,labelAlwaysOn:T,thumbFromLabel:A,thumbToLabel:I,showLabelOnHover:k,thumbChildren:R,disabled:P,unstyled:N,thumbSize:F,scale:B,inverted:W}=n,V=Kpt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","maxRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),G=Cs(),[M,H]=C.useState(-1),[Y,L]=C.useState(!1),[j,q]=Ea({value:o,defaultValue:y,finalValue:[f,d],onChange:a}),Z=C.useRef(j),ue=C.useRef([]),he=C.useRef(void 0),fe=[GD({value:j[0],min:f,max:d}),GD({value:j[1],min:f,max:d})],me=Je=>{q(Je),Z.current=Je};C.useEffect(()=>{Array.isArray(o)&&(Z.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const _e=(Je,Ge,gt)=>{const ot=[...Z.current];ot[Ge]=Je,Ge===0&&(Je>ot[1]-(h-1e-9)&&(ot[1]=Math.min(Je+h,d)),Je>(d-(h-1e-9)||f)&&(ot[Ge]=Z.current[Ge]),ot[1]-Je>p&&(ot[1]=Je+p)),Ge===1&&(Je<ot[0]+h&&(ot[0]=Math.max(Je-h,f)),Je<ot[0]+h&&(ot[Ge]=Z.current[Ge]),Je-ot[0]>p&&(ot[0]=Je-p)),me(ot),gt&&(u==null||u(Z.current))},ge=Je=>{if(!P){const Ge=IU({value:Je,min:f,max:d,step:m,precision:g});_e(Ge,he.current,!1)}},{ref:Be,active:Me}=Q6(({x:Je})=>ge(Je),{onScrubEnd:()=>u==null?void 0:u(Z.current)},G.dir);function ut(Je,Ge){Je.stopPropagation(),he.current=Ge}const Oe=Je=>{Be.current.focus();const Ge=Be.current.getBoundingClientRect(),gt=qpt(Je.nativeEvent),ot=IU({value:gt-Ge.left,max:d,min:f,step:m,containerWidth:Ge.width}),at=Math.abs(j[0]-ot)>Math.abs(j[1]-ot)?1:0,Et=G.dir==="ltr"?at:at===1?0:1;he.current=Et},Re=()=>M!==1&&M!==0?(H(0),0):M,Ye=Je=>{if(!P)switch(Je.key){case"ArrowUp":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(Z.current[Ge]+m,f),d),Ge,!0);break}case"ArrowRight":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(G.dir==="rtl"?Z.current[Ge]-m:Z.current[Ge]+m,f),d),Ge,!0);break}case"ArrowDown":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(Z.current[Ge]-m,f),d),Ge,!0);break}case"ArrowLeft":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(G.dir==="rtl"?Z.current[Ge]+m:Z.current[Ge]-m,f),d),Ge,!0);break}}},Ut={max:d,min:f,color:s,size:l,labelTransition:S,labelTransitionDuration:x,labelTransitionTimingFunction:b,labelAlwaysOn:T,onBlur:()=>H(-1),classNames:r,styles:i},Ft=Array.isArray(R);return z.createElement(GY,i9(r9({},V),{size:l,ref:As(Be,t),onTouchStartCapture:Oe,onTouchEndCapture:()=>{he.current=-1},onMouseDownCapture:Oe,onMouseUpCapture:()=>{he.current=-1},onKeyDownCapture:Ye,styles:i,classNames:r,disabled:P,unstyled:N}),z.createElement(WY,{offset:fe[0],marksOffset:j[0],filled:fe[1]-fe[0],marks:_,inverted:W,size:l,radius:c,color:s,min:f,max:d,value:j[1],styles:i,classNames:r,onMouseEnter:k?()=>L(!0):void 0,onMouseLeave:k?()=>L(!1):void 0,onChange:Je=>{const Ge=Math.abs(j[0]-Je)>Math.abs(j[1]-Je)?1:0,gt=[...j];gt[Ge]=Je,me(gt)},disabled:P,unstyled:N},z.createElement(YD,i9(r9({},Ut),{value:B(j[0]),position:fe[0],dragging:Me,label:typeof w=="function"?w(B(j[0])):w,ref:Je=>{ue.current[0]=Je},thumbLabel:A,onMouseDown:Je=>ut(Je,0),onFocus:()=>H(0),showLabelOnHover:k&&Y,disabled:P,unstyled:N,thumbSize:F}),Ft?R[0]:R),z.createElement(YD,i9(r9({},Ut),{thumbLabel:I,value:B(j[1]),position:fe[1],dragging:Me,label:typeof w=="function"?w(B(j[1])):w,ref:Je=>{ue.current[1]=Je},onMouseDown:Je=>ut(Je,1),onFocus:()=>H(1),showLabelOnHover:k&&Y,disabled:P,unstyled:N,thumbSize:F}),Ft?R[1]:R)),z.createElement("input",{type:"hidden",name:`${v}_from`,value:j[0]}),z.createElement("input",{type:"hidden",name:`${v}_to`,value:j[1]}))});OU.displayName="@mantine/core/RangeSlider";var Qpt=Object.defineProperty,ZD=Object.getOwnPropertySymbols,tOe=Object.prototype.hasOwnProperty,nOe=Object.prototype.propertyIsEnumerable,ffe=(e,t,n)=>t in e?Qpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jpt=(e,t)=>{for(var n in t||(t={}))tOe.call(t,n)&&ffe(e,n,t[n]);if(ZD)for(var n of ZD(t))nOe.call(t,n)&&ffe(e,n,t[n]);return e},Zpt=(e,t)=>{var n={};for(var r in e)tOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZD)for(var r of ZD(e))t.indexOf(r)<0&&nOe.call(e,r)&&(n[r]=e[r]);return n};const emt={w:0,h:0},r1=C.forwardRef((e,t)=>{const n=ct("Space",emt,e),{w:r,h:i}=n,s=Zpt(n,["w","h"]);return z.createElement(pt,Jpt({ref:t,w:r,miw:r,h:i,mih:i},s))});r1.displayName="@mantine/core/Space";var tmt=mt((e,{transitionDuration:t})=>({control:{},root:{position:"relative"},content:{display:"flex",flexDirection:"column",overflow:"hidden",transitionProperty:"max-height",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${t}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}})),nmt=Object.defineProperty,e3=Object.getOwnPropertySymbols,rOe=Object.prototype.hasOwnProperty,iOe=Object.prototype.propertyIsEnumerable,dfe=(e,t,n)=>t in e?nmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rmt=(e,t)=>{for(var n in t||(t={}))rOe.call(t,n)&&dfe(e,n,t[n]);if(e3)for(var n of e3(t))iOe.call(t,n)&&dfe(e,n,t[n]);return e},imt=(e,t)=>{var n={};for(var r in e)rOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&e3)for(var r of e3(e))t.indexOf(r)<0&&iOe.call(e,r)&&(n[r]=e[r]);return n};const smt={maxHeight:100,transitionDuration:200,initialState:!1},sOe=C.forwardRef((e,t)=>{const n=ct("Spoiler",smt,e),{className:r,children:i,maxHeight:s,hideLabel:o,showLabel:a,transitionDuration:u,controlRef:l,initialState:c,classNames:f,styles:d,unstyled:h}=n,p=imt(n,["className","children","maxHeight","hideLabel","showLabel","transitionDuration","controlRef","initialState","classNames","styles","unstyled"]),{classes:m,cx:g}=tmt({transitionDuration:u},{classNames:f,styles:d,unstyled:h,name:"Spoiler"}),[y,v]=C.useState(c),[_,w]=C.useState(c),{ref:S,height:x}=jJe(),b=y?o:a;return C.useEffect(()=>{w(s<x)},[x,s,i]),z.createElement(pt,rmt({className:g(m.root,r),ref:t},p),z.createElement("div",{className:m.content,style:{maxHeight:y?x||void 0:s}},z.createElement("div",{ref:S},i)),_&&z.createElement(dI,{component:"button",ref:l,onClick:()=>v(T=>!T),className:m.control},b))});sOe.displayName="@mantine/core/Spoiler";var omt=Object.defineProperty,amt=Object.defineProperties,umt=Object.getOwnPropertyDescriptors,hfe=Object.getOwnPropertySymbols,lmt=Object.prototype.hasOwnProperty,cmt=Object.prototype.propertyIsEnumerable,pfe=(e,t,n)=>t in e?omt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fmt=(e,t)=>{for(var n in t||(t={}))lmt.call(t,n)&&pfe(e,n,t[n]);if(hfe)for(var n of hfe(t))cmt.call(t,n)&&pfe(e,n,t[n]);return e},dmt=(e,t)=>amt(e,umt(t)),hmt=mt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:s,withColumnBorders:o})=>{const a=`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:dmt(fmt({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:s?a:"","& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:e.fn.size({size:i,sizes:e.fontSizes}),padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},"& thead tr th":{borderBottom:a},"& tfoot tr th, & tbody tr th":{borderTop:a},"& tbody tr td":{padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`,borderTop:a,fontSize:e.fn.size({size:i,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:o?a:"none","&:last-of-type":{borderRight:"none",borderLeft:o?a:"none"}},"& tbody tr th":{borderRight:o?a:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}}),pmt=Object.defineProperty,mmt=Object.defineProperties,gmt=Object.getOwnPropertyDescriptors,t3=Object.getOwnPropertySymbols,oOe=Object.prototype.hasOwnProperty,aOe=Object.prototype.propertyIsEnumerable,mfe=(e,t,n)=>t in e?pmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ymt=(e,t)=>{for(var n in t||(t={}))oOe.call(t,n)&&mfe(e,n,t[n]);if(t3)for(var n of t3(t))aOe.call(t,n)&&mfe(e,n,t[n]);return e},vmt=(e,t)=>mmt(e,gmt(t)),_mt=(e,t)=>{var n={};for(var r in e)oOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&t3)for(var r of t3(e))t.indexOf(r)<0&&aOe.call(e,r)&&(n[r]=e[r]);return n};const bmt={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},KY=C.forwardRef((e,t)=>{const n=ct("Table",bmt,e),{className:r,children:i,striped:s,highlightOnHover:o,captionSide:a,horizontalSpacing:u,verticalSpacing:l,fontSize:c,unstyled:f,withBorder:d,withColumnBorders:h}=n,p=_mt(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders"]),{classes:m,cx:g}=hmt({captionSide:a,verticalSpacing:l,horizontalSpacing:u,fontSize:c,withBorder:d,withColumnBorders:h},{unstyled:f,name:"Table"});return z.createElement(pt,vmt(ymt({},p),{component:"table",ref:t,className:g(m.root,r),"data-striped":s||void 0,"data-hover":o||void 0}),i)});KY.displayName="@mantine/core/Table";const PU={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[wmt,XY]=uI(PU.context);var Emt=Object.defineProperty,gfe=Object.getOwnPropertySymbols,xmt=Object.prototype.hasOwnProperty,Smt=Object.prototype.propertyIsEnumerable,yfe=(e,t,n)=>t in e?Emt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tmt=(e,t)=>{for(var n in t||(t={}))xmt.call(t,n)&&yfe(e,n,t[n]);if(gfe)for(var n of gfe(t))Smt.call(t,n)&&yfe(e,n,t[n]);return e};function Cmt({variant:e,orientation:t,inverted:n,placement:r},i){const s=t==="vertical";return e==="default"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`2px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="outline"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`1px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="pills"?{gap:`calc(${i.spacing.sm}px / 2)`}:{}}var Amt=mt((e,t)=>{const n=t.orientation==="vertical";return{tabsList:Tmt({display:"flex",flexWrap:"wrap",flexDirection:n?"column":"row",justifyContent:TCe[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},Cmt(t,e))}}),Imt=Object.defineProperty,Omt=Object.defineProperties,Pmt=Object.getOwnPropertyDescriptors,n3=Object.getOwnPropertySymbols,uOe=Object.prototype.hasOwnProperty,lOe=Object.prototype.propertyIsEnumerable,vfe=(e,t,n)=>t in e?Imt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kmt=(e,t)=>{for(var n in t||(t={}))uOe.call(t,n)&&vfe(e,n,t[n]);if(n3)for(var n of n3(t))lOe.call(t,n)&&vfe(e,n,t[n]);return e},Rmt=(e,t)=>Omt(e,Pmt(t)),$mt=(e,t)=>{var n={};for(var r in e)uOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&n3)for(var r of n3(e))t.indexOf(r)<0&&lOe.call(e,r)&&(n[r]=e[r]);return n};const Nmt={grow:!1,position:"left"},cOe=C.forwardRef((e,t)=>{const n=ct("TabsList",Nmt,e),{children:r,className:i,grow:s,position:o}=n,a=$mt(n,["children","className","grow","position"]),{orientation:u,variant:l,color:c,radius:f,inverted:d,placement:h,classNames:p,styles:m,unstyled:g}=XY(),{classes:y,cx:v}=Amt({orientation:u,grow:s,variant:l,color:c,position:o,radius:f,inverted:d,placement:h},{name:"Tabs",unstyled:g,classNames:p,styles:m});return z.createElement(pt,Rmt(kmt({},a),{className:v(y.tabsList,i),ref:t,role:"tablist","aria-orientation":u}),r)});cOe.displayName="@mantine/core/TabsList";var Dmt=mt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}})),Mmt=Object.defineProperty,Lmt=Object.defineProperties,Fmt=Object.getOwnPropertyDescriptors,r3=Object.getOwnPropertySymbols,fOe=Object.prototype.hasOwnProperty,dOe=Object.prototype.propertyIsEnumerable,_fe=(e,t,n)=>t in e?Mmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jmt=(e,t)=>{for(var n in t||(t={}))fOe.call(t,n)&&_fe(e,n,t[n]);if(r3)for(var n of r3(t))dOe.call(t,n)&&_fe(e,n,t[n]);return e},Bmt=(e,t)=>Lmt(e,Fmt(t)),zmt=(e,t)=>{var n={};for(var r in e)fOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&r3)for(var r of r3(e))t.indexOf(r)<0&&dOe.call(e,r)&&(n[r]=e[r]);return n};const Umt={},hOe=C.forwardRef((e,t)=>{const n=ct("TabsPanel",Umt,e),{value:r,children:i,sx:s,className:o}=n,a=zmt(n,["value","children","sx","className"]),u=XY(),{classes:l,cx:c}=Dmt({orientation:u.orientation,variant:u.variant,color:u.color,radius:u.radius,inverted:u.inverted,placement:u.placement},{name:"Tabs",unstyled:u.unstyled,classNames:u.classNames,styles:u.styles}),f=u.value===r,d=u.keepMounted||f?i:null;return z.createElement(pt,Bmt(jmt({},a),{ref:t,sx:[{display:f?void 0:"none"},...O0(s)],className:c(l.panel,o),role:"tabpanel",id:u.getPanelId(r),"aria-labelledby":u.getTabId(r)}),d)});hOe.displayName="@mantine/core/TabsPanel";var Vmt=Object.defineProperty,Hmt=Object.defineProperties,qmt=Object.getOwnPropertyDescriptors,bfe=Object.getOwnPropertySymbols,Wmt=Object.prototype.hasOwnProperty,Gmt=Object.prototype.propertyIsEnumerable,wfe=(e,t,n)=>t in e?Vmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zb=(e,t)=>{for(var n in t||(t={}))Wmt.call(t,n)&&wfe(e,n,t[n]);if(bfe)for(var n of bfe(t))Gmt.call(t,n)&&wfe(e,n,t[n]);return e},Efe=(e,t)=>Hmt(e,qmt(t));function Ymt(e,{variant:t,orientation:n,color:r,radius:i,inverted:s,placement:o}){const a=n==="vertical",u=e.fn.variant({color:r,variant:"filled"}),l=e.fn.radius(i),c=n==="vertical"?o==="left"?`${l}px 0 0 ${l}px`:` 0 ${l}px ${l}px 0`:s?`0 0 ${l}px ${l}px`:`${l}px ${l}px 0 0`;return t==="default"?Efe(zb({[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"2px solid transparent",[a?o==="left"?"marginRight":"marginLeft":s?"marginTop":"marginBottom"]:-2,borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":zb({borderColor:u.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:u.background}))}):t==="outline"?{borderRadius:c,border:"1px solid transparent",[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:a?0:s?"unset":-1,top:a?0:s?-1:"unset",[a?"width":"height"]:1,right:a?o==="left"?-1:"unset":0,left:a?o==="left"?"unset":-1:0}}}:t==="pills"?Efe(zb({borderRadius:e.fn.radius(i)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":zb({backgroundColor:u.background,color:e.white},e.fn.hover({backgroundColor:u.background}))}):{}}var Kmt=mt((e,t)=>({tabLabel:{},tab:zb({position:"relative",padding:`${e.spacing.xs}px ${e.spacing.md}px`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":zb({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},Ymt(e,t)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:7}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:7}}})),Xmt=Object.defineProperty,Qmt=Object.defineProperties,Jmt=Object.getOwnPropertyDescriptors,i3=Object.getOwnPropertySymbols,pOe=Object.prototype.hasOwnProperty,mOe=Object.prototype.propertyIsEnumerable,xfe=(e,t,n)=>t in e?Xmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zmt=(e,t)=>{for(var n in t||(t={}))pOe.call(t,n)&&xfe(e,n,t[n]);if(i3)for(var n of i3(t))mOe.call(t,n)&&xfe(e,n,t[n]);return e},egt=(e,t)=>Qmt(e,Jmt(t)),tgt=(e,t)=>{var n={};for(var r in e)pOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&i3)for(var r of i3(e))t.indexOf(r)<0&&mOe.call(e,r)&&(n[r]=e[r]);return n};const ngt={},gOe=C.forwardRef((e,t)=>{const n=ct("TabsTab",ngt,e),{value:r,children:i,onKeyDown:s,onClick:o,className:a,icon:u,rightSection:l,color:c}=n,f=tgt(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]),d=XY(),h=!!u,p=!!l,{theme:m,classes:g,cx:y}=Kmt({withIcon:h||p&&!i,withRightSection:p||h&&!i,orientation:d.orientation,color:c||d.color,variant:d.variant,radius:d.radius,inverted:d.inverted,placement:d.placement},{name:"Tabs",unstyled:d.unstyled,classNames:d.classNames,styles:d.styles}),v=r===d.value,_=w=>{d.onTabChange(d.allowTabDeactivation&&r===d.value?null:r),o==null||o(w)};return z.createElement(_y,egt(Zmt({},f),{unstyled:d.unstyled,className:y(g.tab,a),"data-active":v||void 0,ref:t,type:"button",role:"tab",id:d.getTabId(r),"aria-selected":v,tabIndex:v||d.value===null?0:-1,"aria-controls":d.getPanelId(r),onClick:_,onKeyDown:rSe({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:d.activateTabWithKeyboard,loop:d.loop,dir:m.dir,orientation:d.orientation,onKeyDown:s})}),u&&z.createElement("div",{className:g.tabIcon},u),i&&z.createElement("div",{className:g.tabLabel},i),l&&z.createElement("div",{className:g.tabRightSection},l))});gOe.displayName="@mantine/core/Tab";function yOe({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:s,id:o,activateTabWithKeyboard:a,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,placement:h,keepMounted:p=!0,classNames:m,styles:g,unstyled:y}){const v=Ia(o),[_,w]=Ea({value:t,defaultValue:e,finalValue:null,onChange:n});return z.createElement(wmt,{value:{placement:h,value:_,orientation:r,id:v,loop:s,activateTabWithKeyboard:a,getTabId:Coe(`${v}-tab`,PU.value),getPanelId:Coe(`${v}-panel`,PU.value),onTabChange:w,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,keepMounted:p,classNames:m,styles:g,unstyled:y}},i)}yOe.displayName="@mantine/core/TabsProvider";var rgt=mt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}})),igt=Object.defineProperty,sgt=Object.defineProperties,ogt=Object.getOwnPropertyDescriptors,s3=Object.getOwnPropertySymbols,vOe=Object.prototype.hasOwnProperty,_Oe=Object.prototype.propertyIsEnumerable,Sfe=(e,t,n)=>t in e?igt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,agt=(e,t)=>{for(var n in t||(t={}))vOe.call(t,n)&&Sfe(e,n,t[n]);if(s3)for(var n of s3(t))_Oe.call(t,n)&&Sfe(e,n,t[n]);return e},ugt=(e,t)=>sgt(e,ogt(t)),lgt=(e,t)=>{var n={};for(var r in e)vOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&s3)for(var r of s3(e))t.indexOf(r)<0&&_Oe.call(e,r)&&(n[r]=e[r]);return n};const cgt={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Jl=C.forwardRef((e,t)=>{const n=ct("Tabs",cgt,e),{defaultValue:r,value:i,orientation:s,loop:o,activateTabWithKeyboard:a,allowTabDeactivation:u,children:l,id:c,onTabChange:f,variant:d,color:h,className:p,unstyled:m,classNames:g,styles:y,radius:v,inverted:_,keepMounted:w,placement:S}=n,x=lgt(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:b,cx:T}=rgt({orientation:s,color:h,variant:d,radius:v,inverted:_,placement:S},{unstyled:m,name:"Tabs",classNames:g,styles:y});return z.createElement(yOe,{activateTabWithKeyboard:a,defaultValue:r,orientation:s,onTabChange:f,value:i,id:c,loop:o,allowTabDeactivation:u,color:h,variant:d,radius:v,inverted:_,keepMounted:w,placement:S,classNames:g,styles:y,unstyled:m},z.createElement(pt,ugt(agt({},x),{className:T(b.root,p),id:c,ref:t}),l))});Jl.List=cOe;Jl.Tab=gOe;Jl.Panel=hOe;Jl.displayName="@mantine/core/Tabs";var fgt=Object.defineProperty,dgt=Object.defineProperties,hgt=Object.getOwnPropertyDescriptors,Tfe=Object.getOwnPropertySymbols,pgt=Object.prototype.hasOwnProperty,mgt=Object.prototype.propertyIsEnumerable,Cfe=(e,t,n)=>t in e?fgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ggt=(e,t)=>{for(var n in t||(t={}))pgt.call(t,n)&&Cfe(e,n,t[n]);if(Tfe)for(var n of Tfe(t))mgt.call(t,n)&&Cfe(e,n,t[n]);return e},ygt=(e,t)=>dgt(e,hgt(t));function vgt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function _gt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var bgt=mt((e,{element:t,weight:n,size:r,inline:i})=>({root:ygt(ggt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:vgt(r,t,e),lineHeight:i?1:_gt(r,t,e),margin:0})})),wgt=Object.defineProperty,o3=Object.getOwnPropertySymbols,bOe=Object.prototype.hasOwnProperty,wOe=Object.prototype.propertyIsEnumerable,Afe=(e,t,n)=>t in e?wgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Egt=(e,t)=>{for(var n in t||(t={}))bOe.call(t,n)&&Afe(e,n,t[n]);if(o3)for(var n of o3(t))wOe.call(t,n)&&Afe(e,n,t[n]);return e},xgt=(e,t)=>{var n={};for(var r in e)bOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&o3)for(var r of o3(e))t.indexOf(r)<0&&wOe.call(e,r)&&(n[r]=e[r]);return n};const Sgt={order:1},ca=C.forwardRef((e,t)=>{const n=ct("Title",Sgt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=xgt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=bgt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?z.createElement(dt,Egt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});ca.displayName="@mantine/core/Title";const QY=C.createContext(null);QY.displayName="@mantine/modals/ModalsContext";function Tgt(){const e=C.useContext(QY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}var Cgt=Object.defineProperty,Agt=Object.defineProperties,Igt=Object.getOwnPropertyDescriptors,Ife=Object.getOwnPropertySymbols,Ogt=Object.prototype.hasOwnProperty,Pgt=Object.prototype.propertyIsEnumerable,Ofe=(e,t,n)=>t in e?Cgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s9=(e,t)=>{for(var n in t||(t={}))Ogt.call(t,n)&&Ofe(e,n,t[n]);if(Ife)for(var n of Ife(t))Pgt.call(t,n)&&Ofe(e,n,t[n]);return e},Pfe=(e,t)=>Agt(e,Igt(t));function kgt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Tgt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return z.createElement(z.Fragment,null,l&&z.createElement(pt,{mb:"md"},l),z.createElement(gr,s9({position:"right"},o),z.createElement(Lr,Pfe(s9({variant:"default"},t),{onClick:h}),(t==null?void 0:t.children)||c),z.createElement(Lr,Pfe(s9({},n),{onClick:p}),(n==null?void 0:n.children)||f)))}function Rgt(e,t){switch(t.type){case"OPEN":return{current:t.payload,modals:[...e.modals,t.payload]};case"CLOSE":{const n=e.modals.filter(r=>r.id!==t.payload);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return{current:e.current,modals:[]};default:return e}}const[$gt,_I]=wXe("mantine-modals");_I("openModal");_I("closeModal");_I("closeAllModals");const Ngt=_I("openConfirmModal");_I("openContextModal");var Dgt=Object.defineProperty,Mgt=Object.defineProperties,Lgt=Object.getOwnPropertyDescriptors,a3=Object.getOwnPropertySymbols,EOe=Object.prototype.hasOwnProperty,xOe=Object.prototype.propertyIsEnumerable,kfe=(e,t,n)=>t in e?Dgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DR=(e,t)=>{for(var n in t||(t={}))EOe.call(t,n)&&kfe(e,n,t[n]);if(a3)for(var n of a3(t))xOe.call(t,n)&&kfe(e,n,t[n]);return e},Rfe=(e,t)=>Mgt(e,Lgt(t)),ov=(e,t)=>{var n={};for(var r in e)EOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&a3)for(var r of a3(e))t.indexOf(r)<0&&xOe.call(e,r)&&(n[r]=e[r]);return n};function Fgt(e){if(!e)return{confirmProps:{},modalProps:{}};const t=e,{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f}=t,d=ov(t,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f},modalProps:DR({id:n},d)}}function jgt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=C.useReducer(Rgt,{modals:[],current:null}),o=C.useRef(i);o.current=i;const a=C.useCallback(g=>{o.current.modals.forEach(y=>{var v,_,w,S;y.type==="confirm"&&g&&((_=(v=y.props).onCancel)==null||_.call(v)),(S=(w=y.props).onClose)==null||S.call(w)}),s({type:"CLOSE_ALL"})},[o,s]),u=C.useCallback(g=>{var y=g,{modalId:v}=y,_=ov(y,["modalId"]);const w=v||IR();return s({type:"OPEN",payload:{id:w,type:"content",props:_}}),w},[s]),l=C.useCallback(g=>{var y=g,{modalId:v}=y,_=ov(y,["modalId"]);const w=v||IR();return s({type:"OPEN",payload:{id:w,type:"confirm",props:_}}),w},[s]),c=C.useCallback((g,y)=>{var v=y,{modalId:_}=v,w=ov(v,["modalId"]);const S=_||IR();return s({type:"OPEN",payload:{id:S,type:"context",props:w,ctx:g}}),S},[s]),f=C.useCallback((g,y)=>{var v,_,w,S;const x=o.current.modals.find(b=>b.id===g);x&&(x.type==="confirm"&&y&&((_=(v=x.props).onCancel)==null||_.call(v)),(S=(w=x.props).onClose)==null||S.call(w),s({type:"CLOSE",payload:x.id}))},[o,s]);$gt({openModal:u,openConfirmModal:l,openContextModal:g=>{var y=g,{modal:v}=y,_=ov(y,["modal"]);return c(v,_)},closeModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const y=g.props,{innerProps:v}=y,_=ov(y,["innerProps"]),w=r[g.ctx];return{modalProps:_,content:z.createElement(w,{innerProps:v,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=Fgt(g.props);return{modalProps:y,content:z.createElement(kgt,Rfe(DR({},v),{id:g.id,labels:g.props.labels||n}))}}case"content":{const y=g.props,{children:v}=y;return{modalProps:ov(y,["children"]),content:z.createElement(z.Fragment,null,v)}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return z.createElement(QY.Provider,{value:d},z.createElement(qp,Rfe(DR(DR({zIndex:Rc("modal")+1},t),p),{opened:i.modals.length>0,onClose:()=>f(i.current.id)}),m),e)}var SOe={exports:{}},Bgt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zgt=Bgt,Ugt=zgt;function TOe(){}function COe(){}COe.resetWarningCache=TOe;var Vgt=function(){function e(r,i,s,o,a,u){if(u!==Ugt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:COe,resetWarningCache:TOe};return n.PropTypes=n,n};SOe.exports=Vgt();var Hgt=SOe.exports;const Jt=Qu(Hgt);var qgt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Wgt=Object.defineProperty,Ggt=Object.defineProperties,Ygt=Object.getOwnPropertyDescriptors,u3=Object.getOwnPropertySymbols,AOe=Object.prototype.hasOwnProperty,IOe=Object.prototype.propertyIsEnumerable,$fe=(e,t,n)=>t in e?Wgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nfe=(e,t)=>{for(var n in t||(t={}))AOe.call(t,n)&&$fe(e,n,t[n]);if(u3)for(var n of u3(t))IOe.call(t,n)&&$fe(e,n,t[n]);return e},Kgt=(e,t)=>Ggt(e,Ygt(t)),Xgt=(e,t)=>{var n={};for(var r in e)AOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&u3)for(var r of u3(e))t.indexOf(r)<0&&IOe.call(e,r)&&(n[r]=e[r]);return n},Kr=(e,t,n)=>{const r=C.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=Xgt(o,["color","size","stroke","children"]);return C.createElement("svg",Nfe(Kgt(Nfe({ref:s},qgt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>C.createElement(d,h)),...c||[]])});return r.propTypes={color:Jt.string,size:Jt.oneOfType([Jt.string,Jt.number]),stroke:Jt.oneOfType([Jt.string,Jt.number])},r.displayName=`${t}`,r},Qgt=Kr("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Jgt=Kr("alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Zgt=Kr("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),e0t=Kr("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),t0t=Kr("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),n0t=Kr("brand-google","IconBrandGoogle",[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]]),r0t=Kr("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),i0t=Kr("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),s0t=Kr("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),o0t=Kr("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),a0t=Kr("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),u0t=Kr("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),l0t=Kr("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),c0t=Kr("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),f0t=Kr("layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]),d0t=Kr("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),h0t=Kr("minus-vertical","IconMinusVertical",[["path",{d:"M12 5v14",key:"svg-0"}]]),p0t=Kr("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),OOe=Kr("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),m0t=Kr("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),Dfe=Kr("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),g0t=Kr("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),y0t=Kr("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),POe=Kr("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),v0t=Kr("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),_0t=Kr("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),b0t=Kr("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),kOe=Kr("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function JY(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Nc="/ThinkAloud/",Mfe=["http","https","mailto","tel"];function w0t(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<Mfe.length;){const s=Mfe[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var E0t=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const ZY=Qu(E0t);function fw(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Lfe(e.position):"start"in e||"end"in e?Lfe(e):"line"in e||"column"in e?kU(e):""}function kU(e){return Ffe(e&&e.line)+":"+Ffe(e&&e.column)}function Lfe(e){return kU(e&&e.start)+"-"+kU(e&&e.end)}function Ffe(e){return e&&typeof e=="number"?e:1}let Dc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=fw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Dc.prototype.file="";Dc.prototype.name="";Dc.prototype.reason="";Dc.prototype.message="";Dc.prototype.stack="";Dc.prototype.fatal=null;Dc.prototype.column=null;Dc.prototype.line=null;Dc.prototype.source=null;Dc.prototype.ruleId=null;Dc.prototype.position=null;const gd={basename:x0t,dirname:S0t,extname:T0t,join:C0t,sep:"/"};function x0t(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');bI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function S0t(e){if(bI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function T0t(e){bI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function C0t(...e){let t=-1,n;for(;++t<e.length;)bI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":A0t(n)}function A0t(e){bI(e);const t=e.charCodeAt(0)===47;let n=I0t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function I0t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function bI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const O0t={cwd:P0t};function P0t(){return"/"}function RU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function k0t(e){if(typeof e=="string")e=new URL(e);else if(!RU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return R0t(e)}function R0t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const o9=["history","path","basename","stem","extname","dirname"];let $0t=class{constructor(t){let n;t?typeof t=="string"||N0t(t)?n={value:t}:RU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=O0t.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<o9.length;){const s=o9[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)o9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){RU(t)&&(t=k0t(t)),u9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?gd.dirname(this.path):void 0}set dirname(t){jfe(this.basename,"dirname"),this.path=gd.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?gd.basename(this.path):void 0}set basename(t){u9(t,"basename"),a9(t,"basename"),this.path=gd.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?gd.extname(this.path):void 0}set extname(t){if(a9(t,"extname"),jfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=gd.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?gd.basename(this.path,this.extname):void 0}set stem(t){u9(t,"stem"),a9(t,"stem"),this.path=gd.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Dc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function a9(e,t){if(e&&e.includes(gd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+gd.sep+"`")}function u9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function jfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function N0t(e){return ZY(e)}function Bfe(e){if(e)throw e}var MR=Object.prototype.hasOwnProperty,ROe=Object.prototype.toString,zfe=Object.defineProperty,Ufe=Object.getOwnPropertyDescriptor,Vfe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):ROe.call(t)==="[object Array]"},Hfe=function(t){if(!t||ROe.call(t)!=="[object Object]")return!1;var n=MR.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&MR.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||MR.call(t,i)},qfe=function(t,n){zfe&&n.name==="__proto__"?zfe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Wfe=function(t,n){if(n==="__proto__")if(MR.call(t,n)){if(Ufe)return Ufe(t,n).value}else return;return t[n]},D0t=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Wfe(a,n),i=Wfe(t,n),a!==i&&(c&&i&&(Hfe(i)||(s=Vfe(i)))?(s?(s=!1,o=r&&Vfe(r)?r:[]):o=r&&Hfe(r)?r:{},qfe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&qfe(a,{name:n,newValue:i}));return a};const Gfe=Qu(D0t);function $U(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function M0t(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?L0t(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function L0t(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class Mc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=fw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Mc.prototype.file="";Mc.prototype.name="";Mc.prototype.reason="";Mc.prototype.message="";Mc.prototype.stack="";Mc.prototype.fatal=null;Mc.prototype.column=null;Mc.prototype.line=null;Mc.prototype.source=null;Mc.prototype.ruleId=null;Mc.prototype.position=null;const yd={basename:F0t,dirname:j0t,extname:B0t,join:z0t,sep:"/"};function F0t(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function j0t(e){if(wI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function B0t(e){wI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function z0t(...e){let t=-1,n;for(;++t<e.length;)wI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":U0t(n)}function U0t(e){wI(e);const t=e.charCodeAt(0)===47;let n=V0t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function V0t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function wI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const H0t={cwd:q0t};function q0t(){return"/"}function NU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function W0t(e){if(typeof e=="string")e=new URL(e);else if(!NU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return G0t(e)}function G0t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const l9=["history","path","basename","stem","extname","dirname"];class Y0t{constructor(t){let n;t?typeof t=="string"||K0t(t)?n={value:t}:NU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=H0t.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<l9.length;){const s=l9[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)l9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){NU(t)&&(t=W0t(t)),f9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?yd.dirname(this.path):void 0}set dirname(t){Yfe(this.basename,"dirname"),this.path=yd.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?yd.basename(this.path):void 0}set basename(t){f9(t,"basename"),c9(t,"basename"),this.path=yd.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?yd.extname(this.path):void 0}set extname(t){if(c9(t,"extname"),Yfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=yd.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?yd.basename(this.path,this.extname):void 0}set stem(t){f9(t,"stem"),c9(t,"stem"),this.path=yd.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Mc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function c9(e,t){if(e&&e.includes(yd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+yd.sep+"`")}function f9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Yfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function K0t(e){return ZY(e)}const X0t=NOe().freeze(),$Oe={}.hasOwnProperty;function NOe(){const e=M0t(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=NOe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Gfe(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(p9("data",r),n[m]=g,s):$Oe.call(n,m)&&n[m]||null:m?(p9("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(p9("use",r),m!=null)if(typeof m=="function")S(m,...g);else if(typeof m=="object")Array.isArray(m)?w(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(x){if(typeof x=="function")S(x);else if(typeof x=="object")if(Array.isArray(x)){const[b,...T]=x;S(b,...T)}else _(x);else throw new TypeError("Expected usable value, not `"+x+"`")}function _(x){w(x.plugins),x.settings&&(y=Object.assign(y||{},x.settings))}function w(x){let b=-1;if(x!=null)if(Array.isArray(x))for(;++b<x.length;){const T=x[b];v(T)}else throw new TypeError("Expected a list of plugins, not `"+x+"`")}function S(x,b){let T=-1,A;for(;++T<t.length;)if(t[T][0]===x){A=t[T];break}A?($U(A[1])&&$U(b)&&(b=Gfe(!0,A[1],b)),A[1]=b):t.push([...arguments])}}function l(m){s.freeze();const g=LS(m),y=s.Parser;return d9("parse",y),Kfe(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=LS(g),v=s.Compiler;return h9("stringify",v),Xfe(m),Kfe(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Xfe(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,w){e.run(m,LS(g),S);function S(x,b,T){b=b||m,x?w(x):_?_(b):y(null,b,T)}}}function d(m,g){let y,v;return s.run(m,g,_),Qfe("runSync","run",v),y;function _(w,S){Bfe(w),y=S,v=!0}}function h(m,g){if(s.freeze(),d9("process",s.Parser),h9("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const w=LS(m);s.run(s.parse(w),w,(x,b,T)=>{if(x||!b||!T)S(x);else{const A=s.stringify(b,T);A==null||(Z0t(A)?T.value=A:T.result=A),S(x,T)}});function S(x,b){x||!b?_(x):v?v(b):g(null,b)}}}function p(m){let g;s.freeze(),d9("processSync",s.Parser),h9("processSync",s.Compiler);const y=LS(m);return s.process(y,v),Qfe("processSync","process",g),y;function v(_){g=!0,Bfe(_)}}}function Kfe(e,t){return typeof e=="function"&&e.prototype&&(Q0t(e.prototype)||t in e.prototype)}function Q0t(e){let t;for(t in e)if($Oe.call(e,t))return!0;return!1}function d9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function h9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function p9(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Xfe(e){if(!$U(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Qfe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function LS(e){return J0t(e)?e:new Y0t(e)}function J0t(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Z0t(e){return typeof e=="string"||ZY(e)}const eyt={};function tyt(e,t){const n=eyt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return DOe(e,r,i)}function DOe(e,t,n){if(nyt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Jfe(e.children,t,n)}return Array.isArray(e)?Jfe(e,t,n):""}function Jfe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=DOe(e[i],t,n);return r.join("")}function nyt(e){return!!(e&&typeof e=="object")}function mh(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function rc(e,t){return e.length>0?(mh(e,e.length,0,t),e):t}const Zfe={}.hasOwnProperty;function ryt(e){const t={};let n=-1;for(;++n<e.length;)iyt(t,e[n]);return t}function iyt(e,t){let n;for(n in t){const i=(Zfe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Zfe.call(i,o)||(i[o]=[]);const a=s[o];syt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function syt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);mh(e,0,0,r)}const oyt=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Pd=by(/[A-Za-z]/),yl=by(/[\dA-Za-z]/),ayt=by(/[#-'*+\--9=?A-Z^-~]/);function DU(e){return e!==null&&(e<32||e===127)}const MU=by(/\d/),uyt=by(/[\dA-Fa-f]/),lyt=by(/[!-/:-@[-`{-~]/);function fn(e){return e!==null&&e<-2}function Mu(e){return e!==null&&(e<0||e===32)}function Sr(e){return e===-2||e===-1||e===32}const cyt=by(oyt),fyt=by(/\s/);function by(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function di(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Sr(u)?(e.enter(n),a(u)):t(u)}function a(u){return Sr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const dyt={tokenize:hyt};function hyt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),di(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return fn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const pyt={tokenize:myt},ede={tokenize:gyt};function myt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let S=w,x;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){x=t.events[S][1].end;break}y(r);let b=w;for(;b<t.events.length;)t.events[b][1].end=Object.assign({},x),b++;return mh(t.events,S+1,0,t.events.slice(w)),t.events.length=b,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ede,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(ede,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return fn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const S=t.sliceStream(_);if(w&&S.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(S),t.parser.lazy[_.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const b=t.events.length;let T=b,A,I;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(A){I=t.events[T][1].end;break}A=!0}for(y(r),x=b;x<t.events.length;)t.events[x][1].end=Object.assign({},I),x++;mh(t.events,T+1,0,t.events.slice(b)),t.events.length=x}}function y(_){let w=n.length;for(;w-- >_;){const S=n[w];t.containerState=S[1],S[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function gyt(e,t,n){return di(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tde(e){if(e===null||Mu(e)||fyt(e))return 1;if(cyt(e))return 2}function eK(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const LU={name:"attention",tokenize:vyt,resolveAll:yyt};function yyt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);nde(f,-u),nde(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=rc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=rc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=rc(l,eK(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=rc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=rc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,mh(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function vyt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=tde(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=tde(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function nde(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const _yt={name:"autolink",tokenize:byt};function byt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Pd(h)?(e.consume(h),o):l(h)}function o(h){return h===43||h===45||h===46||yl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||yl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||DU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):ayt(h)?(e.consume(h),l):n(h)}function c(h){return yl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||yl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const o4={tokenize:wyt,partial:!0};function wyt(e,t,n){return r;function r(s){return Sr(s)?di(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||fn(s)?t(s):n(s)}}const MOe={name:"blockQuote",tokenize:Eyt,continuation:{tokenize:xyt},exit:Syt};function Eyt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Sr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function xyt(e,t,n){const r=this;return i;function i(o){return Sr(o)?di(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(MOe,t,n)(o)}}function Syt(e){e.exit("blockQuote")}const LOe={name:"characterEscape",tokenize:Tyt};function Tyt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return lyt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const rde=document.createElement("i");function tK(e){const t="&"+e+";";rde.innerHTML=t;const n=rde.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const FOe={name:"characterReference",tokenize:Cyt};function Cyt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=yl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=uyt,c):(e.enter("characterReferenceValue"),s=7,o=MU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===yl&&!tK(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const ide={tokenize:Iyt,partial:!0},sde={name:"codeFenced",tokenize:Ayt,concrete:!0};function Ayt(e,t,n){const r=this,i={tokenize:S,partial:!0};let s=0,o=0,a;return u;function u(x){return l(x)}function l(x){const b=r.events[r.events.length-1];return s=b&&b[1].type==="linePrefix"?b[2].sliceSerialize(b[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),Sr(x)?di(e,f,"whitespace")(x):f(x))}function f(x){return x===null||fn(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(ide,m,w)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(x))}function d(x){return x===null||fn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(x)):Sr(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),di(e,h,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),d)}function h(x){return x===null||fn(x)?f(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||fn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(x)):x===96&&x===a?n(x):(e.consume(x),p)}function m(x){return e.attempt(i,w,g)(x)}function g(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&Sr(x)?di(e,v,"linePrefix",s+1)(x):v(x)}function v(x){return x===null||fn(x)?e.check(ide,m,w)(x):(e.enter("codeFlowValue"),_(x))}function _(x){return x===null||fn(x)?(e.exit("codeFlowValue"),v(x)):(e.consume(x),_)}function w(x){return e.exit("codeFenced"),t(x)}function S(x,b,T){let A=0;return I;function I(F){return x.enter("lineEnding"),x.consume(F),x.exit("lineEnding"),k}function k(F){return x.enter("codeFencedFence"),Sr(F)?di(x,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):R(F)}function R(F){return F===a?(x.enter("codeFencedFenceSequence"),P(F)):T(F)}function P(F){return F===a?(A++,x.consume(F),P):A>=o?(x.exit("codeFencedFenceSequence"),Sr(F)?di(x,N,"whitespace")(F):N(F)):T(F)}function N(F){return F===null||fn(F)?(x.exit("codeFencedFence"),b(F)):T(F)}}}function Iyt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const m9={name:"codeIndented",tokenize:Pyt},Oyt={tokenize:kyt,partial:!0};function Pyt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),di(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):fn(l)?e.attempt(Oyt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||fn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function kyt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):fn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):di(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):fn(o)?i(o):n(o)}}const Ryt={name:"codeText",tokenize:Dyt,resolve:$yt,previous:Nyt};function $yt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Nyt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Dyt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):fn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||fn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function jOe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Myt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),mh(e,i,n-i+1,a))}}return!l}function Myt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),mh(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Lyt={tokenize:Byt,resolve:jyt},Fyt={tokenize:zyt,partial:!0};function jyt(e){return jOe(e),e}function Byt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):fn(a)?e.check(Fyt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function zyt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),di(e,s,"linePrefix")}function s(o){if(o===null||fn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function BOe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||DU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||fn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Mu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||DU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function zOe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):fn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||fn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Sr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function UOe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):fn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),di(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||fn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function A2(e,t){let n;return r;function r(i){return fn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Sr(i)?di(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function dw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Uyt={name:"definition",tokenize:Hyt},Vyt={tokenize:qyt,partial:!0};function Hyt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return zOe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=dw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Mu(h)?A2(e,l)(h):l(h)}function l(h){return BOe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Vyt,f,f)(h)}function f(h){return Sr(h)?di(e,d,"whitespace")(h):d(h)}function d(h){return h===null||fn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function qyt(e,t,n){return r;function r(a){return Mu(a)?A2(e,i)(a):n(a)}function i(a){return UOe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Sr(a)?di(e,o,"whitespace")(a):o(a)}function o(a){return a===null||fn(a)?t(a):n(a)}}const Wyt={name:"hardBreakEscape",tokenize:Gyt};function Gyt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return fn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Yyt={name:"headingAtx",tokenize:Xyt,resolve:Kyt};function Kyt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},mh(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Xyt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Mu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||fn(c)?(e.exit("atxHeading"),t(c)):Sr(c)?di(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Mu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Qyt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ode=["pre","script","style","textarea"],Jyt={name:"htmlFlow",tokenize:nvt,resolveTo:tvt,concrete:!0},Zyt={tokenize:ivt,partial:!0},evt={tokenize:rvt,partial:!0};function tvt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function nvt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(L){return c(L)}function c(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),f}function f(L){return L===33?(e.consume(L),d):L===47?(e.consume(L),s=!0,m):L===63?(e.consume(L),i=3,r.interrupt?t:M):Pd(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function d(L){return L===45?(e.consume(L),i=2,h):L===91?(e.consume(L),i=5,a=0,p):Pd(L)?(e.consume(L),i=4,r.interrupt?t:M):n(L)}function h(L){return L===45?(e.consume(L),r.interrupt?t:M):n(L)}function p(L){const j="CDATA[";return L===j.charCodeAt(a++)?(e.consume(L),a===j.length?r.interrupt?t:R:p):n(L)}function m(L){return Pd(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function g(L){if(L===null||L===47||L===62||Mu(L)){const j=L===47,q=o.toLowerCase();return!j&&!s&&ode.includes(q)?(i=1,r.interrupt?t(L):R(L)):Qyt.includes(o.toLowerCase())?(i=6,j?(e.consume(L),y):r.interrupt?t(L):R(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?v(L):_(L))}return L===45||yl(L)?(e.consume(L),o+=String.fromCharCode(L),g):n(L)}function y(L){return L===62?(e.consume(L),r.interrupt?t:R):n(L)}function v(L){return Sr(L)?(e.consume(L),v):I(L)}function _(L){return L===47?(e.consume(L),I):L===58||L===95||Pd(L)?(e.consume(L),w):Sr(L)?(e.consume(L),_):I(L)}function w(L){return L===45||L===46||L===58||L===95||yl(L)?(e.consume(L),w):S(L)}function S(L){return L===61?(e.consume(L),x):Sr(L)?(e.consume(L),S):_(L)}function x(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),u=L,b):Sr(L)?(e.consume(L),x):T(L)}function b(L){return L===u?(e.consume(L),u=null,A):L===null||fn(L)?n(L):(e.consume(L),b)}function T(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||Mu(L)?S(L):(e.consume(L),T)}function A(L){return L===47||L===62||Sr(L)?_(L):n(L)}function I(L){return L===62?(e.consume(L),k):n(L)}function k(L){return L===null||fn(L)?R(L):Sr(L)?(e.consume(L),k):n(L)}function R(L){return L===45&&i===2?(e.consume(L),B):L===60&&i===1?(e.consume(L),W):L===62&&i===4?(e.consume(L),H):L===63&&i===3?(e.consume(L),M):L===93&&i===5?(e.consume(L),G):fn(L)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Zyt,Y,P)(L)):L===null||fn(L)?(e.exit("htmlFlowData"),P(L)):(e.consume(L),R)}function P(L){return e.check(evt,N,Y)(L)}function N(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),F}function F(L){return L===null||fn(L)?P(L):(e.enter("htmlFlowData"),R(L))}function B(L){return L===45?(e.consume(L),M):R(L)}function W(L){return L===47?(e.consume(L),o="",V):R(L)}function V(L){if(L===62){const j=o.toLowerCase();return ode.includes(j)?(e.consume(L),H):R(L)}return Pd(L)&&o.length<8?(e.consume(L),o+=String.fromCharCode(L),V):R(L)}function G(L){return L===93?(e.consume(L),M):R(L)}function M(L){return L===62?(e.consume(L),H):L===45&&i===2?(e.consume(L),M):R(L)}function H(L){return L===null||fn(L)?(e.exit("htmlFlowData"),Y(L)):(e.consume(L),H)}function Y(L){return e.exit("htmlFlow"),t(L)}}function rvt(e,t,n){const r=this;return i;function i(o){return fn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function ivt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(o4,t,n)}}const svt={name:"htmlText",tokenize:ovt};function ovt(e,t,n){const r=this;let i,s,o;return a;function a(M){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(M),u}function u(M){return M===33?(e.consume(M),l):M===47?(e.consume(M),S):M===63?(e.consume(M),_):Pd(M)?(e.consume(M),T):n(M)}function l(M){return M===45?(e.consume(M),c):M===91?(e.consume(M),s=0,p):Pd(M)?(e.consume(M),v):n(M)}function c(M){return M===45?(e.consume(M),h):n(M)}function f(M){return M===null?n(M):M===45?(e.consume(M),d):fn(M)?(o=f,W(M)):(e.consume(M),f)}function d(M){return M===45?(e.consume(M),h):f(M)}function h(M){return M===62?B(M):M===45?d(M):f(M)}function p(M){const H="CDATA[";return M===H.charCodeAt(s++)?(e.consume(M),s===H.length?m:p):n(M)}function m(M){return M===null?n(M):M===93?(e.consume(M),g):fn(M)?(o=m,W(M)):(e.consume(M),m)}function g(M){return M===93?(e.consume(M),y):m(M)}function y(M){return M===62?B(M):M===93?(e.consume(M),y):m(M)}function v(M){return M===null||M===62?B(M):fn(M)?(o=v,W(M)):(e.consume(M),v)}function _(M){return M===null?n(M):M===63?(e.consume(M),w):fn(M)?(o=_,W(M)):(e.consume(M),_)}function w(M){return M===62?B(M):_(M)}function S(M){return Pd(M)?(e.consume(M),x):n(M)}function x(M){return M===45||yl(M)?(e.consume(M),x):b(M)}function b(M){return fn(M)?(o=b,W(M)):Sr(M)?(e.consume(M),b):B(M)}function T(M){return M===45||yl(M)?(e.consume(M),T):M===47||M===62||Mu(M)?A(M):n(M)}function A(M){return M===47?(e.consume(M),B):M===58||M===95||Pd(M)?(e.consume(M),I):fn(M)?(o=A,W(M)):Sr(M)?(e.consume(M),A):B(M)}function I(M){return M===45||M===46||M===58||M===95||yl(M)?(e.consume(M),I):k(M)}function k(M){return M===61?(e.consume(M),R):fn(M)?(o=k,W(M)):Sr(M)?(e.consume(M),k):A(M)}function R(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),i=M,P):fn(M)?(o=R,W(M)):Sr(M)?(e.consume(M),R):(e.consume(M),N)}function P(M){return M===i?(e.consume(M),i=void 0,F):M===null?n(M):fn(M)?(o=P,W(M)):(e.consume(M),P)}function N(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||Mu(M)?A(M):(e.consume(M),N)}function F(M){return M===47||M===62||Mu(M)?A(M):n(M)}function B(M){return M===62?(e.consume(M),e.exit("htmlTextData"),e.exit("htmlText"),t):n(M)}function W(M){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),V}function V(M){return Sr(M)?di(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):G(M)}function G(M){return e.enter("htmlTextData"),o(M)}}const nK={name:"labelEnd",tokenize:dvt,resolveTo:fvt,resolveAll:cvt},avt={tokenize:hvt},uvt={tokenize:pvt},lvt={tokenize:mvt};function cvt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function fvt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=rc(a,e.slice(s+1,s+r+3)),a=rc(a,[["enter",c,t]]),a=rc(a,eK(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=rc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=rc(a,e.slice(o+1)),a=rc(a,[["exit",u,t]]),mh(e,s,e.length,a),e}function dvt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(dw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(avt,c,o?c:f)(d):d===91?e.attempt(uvt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(lvt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function hvt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Mu(f)?A2(e,s)(f):s(f)}function s(f){return f===41?c(f):BOe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Mu(f)?A2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?UOe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Mu(f)?A2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function pvt(e,t,n){const r=this;return i;function i(a){return zOe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(dw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function mvt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const gvt={name:"labelStartImage",tokenize:yvt,resolveAll:nK.resolveAll};function yvt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const vvt={name:"labelStartLink",tokenize:_vt,resolveAll:nK.resolveAll};function _vt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const g9={name:"lineEnding",tokenize:bvt};function bvt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),di(e,t,"linePrefix")}}const LR={name:"thematicBreak",tokenize:wvt};function wvt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||fn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Sr(l)?di(e,a,"whitespace")(l):a(l))}}const hu={name:"list",tokenize:Svt,continuation:{tokenize:Tvt},exit:Avt},Evt={tokenize:Ivt,partial:!0},xvt={tokenize:Cvt,partial:!0};function Svt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:MU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(LR,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return MU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(o4,r.interrupt?n:c,e.attempt(Evt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Sr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Tvt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(o4,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,di(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Sr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(xvt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,di(e,e.attempt(hu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Cvt(e,t,n){const r=this;return di(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Avt(e){e.exit(this.containerState.type)}function Ivt(e,t,n){const r=this;return di(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Sr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const ade={name:"setextUnderline",tokenize:Pvt,resolveTo:Ovt};function Ovt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Pvt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Sr(l)?di(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||fn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const kvt={tokenize:Rvt};function Rvt(e){const t=this,n=e.attempt(o4,r,e.attempt(this.parser.constructs.flowInitial,i,di(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Lyt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const $vt={resolveAll:HOe()},Nvt=VOe("string"),Dvt=VOe("text");function VOe(e){return{tokenize:t,resolveAll:HOe(e==="text"?Mvt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function HOe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Mvt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Lvt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:w,attempt:b(S),check:b(x),interrupt:b(x,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(k){return o=rc(o,k),g(),o[o.length-1]!==null?[]:(T(t,0),l.events=eK(s,l.events,l),l.events)}function d(k,R){return jvt(h(k),R)}function h(k){return Fvt(o,k)}function p(){const{line:k,column:R,offset:P,_index:N,_bufferIndex:F}=r;return{line:k,column:R,offset:P,_index:N,_bufferIndex:F}}function m(k){i[k.line]=k.column,I()}function g(){let k;for(;r._index<o.length;){const R=o[r._index];if(typeof R=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<R.length;)y(R.charCodeAt(r._bufferIndex));else y(R)}}function y(k){c=c(k)}function v(k){fn(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,I()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=k}function _(k,R){const P=R||{};return P.type=k,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(k){const R=a.pop();return R.end=p(),l.events.push(["exit",R,l]),R}function S(k,R){T(k,R.from)}function x(k,R){R.restore()}function b(k,R){return P;function P(N,F,B){let W,V,G,M;return Array.isArray(N)?Y(N):"tokenize"in N?Y([N]):H(N);function H(Z){return ue;function ue(he){const fe=he!==null&&Z[he],me=he!==null&&Z.null,_e=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(me)?me:me?[me]:[]];return Y(_e)(he)}}function Y(Z){return W=Z,V=0,Z.length===0?B:L(Z[V])}function L(Z){return ue;function ue(he){return M=A(),G=Z,Z.partial||(l.currentConstruct=Z),Z.name&&l.parser.constructs.disable.null.includes(Z.name)?q():Z.tokenize.call(R?Object.assign(Object.create(l),R):l,u,j,q)(he)}}function j(Z){return k(G,M),F}function q(Z){return M.restore(),++V<W.length?L(W[V]):B}}}function T(k,R){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&mh(l.events,R,l.events.length-R,k.resolve(l.events.slice(R),l)),k.resolveTo&&(l.events=k.resolveTo(l.events,l))}function A(){const k=p(),R=l.previous,P=l.currentConstruct,N=l.events.length,F=Array.from(a);return{restore:B,from:N};function B(){r=k,l.previous=R,l.currentConstruct=P,l.events.length=N,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Fvt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function jvt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Bvt={42:hu,43:hu,45:hu,48:hu,49:hu,50:hu,51:hu,52:hu,53:hu,54:hu,55:hu,56:hu,57:hu,62:MOe},zvt={91:Uyt},Uvt={[-2]:m9,[-1]:m9,32:m9},Vvt={35:Yyt,42:LR,45:[ade,LR],60:Jyt,61:ade,95:LR,96:sde,126:sde},Hvt={38:FOe,92:LOe},qvt={[-5]:g9,[-4]:g9,[-3]:g9,33:gvt,38:FOe,42:LU,60:[_yt,svt],91:vvt,92:[Wyt,LOe],93:nK,95:LU,96:Ryt},Wvt={null:[LU,$vt]},Gvt={null:[42,95]},Yvt={null:[]},Kvt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Gvt,contentInitial:zvt,disable:Yvt,document:Bvt,flow:Vvt,flowInitial:Uvt,insideSpan:Wvt,string:Hvt,text:qvt},Symbol.toStringTag,{value:"Module"}));function Xvt(e){const n=ryt([Kvt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(dyt),document:i(pyt),flow:i(kvt),string:i(Nvt),text:i(Dvt)};return r;function i(s){return o;function o(a){return Lvt(r,s,a)}}}const ude=/[\0\t\n\r]/g;function Qvt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(ude.lastIndex=f,l=ude.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Jvt(e){for(;!jOe(e););return e}function qOe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const Zvt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function e1t(e){return e.replace(Zvt,t1t)}function t1t(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return qOe(n.slice(s?2:1),s?16:10)}return tK(n)||e}const WOe={}.hasOwnProperty,n1t=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),r1t(n)(Jvt(Xvt(n).document().write(Qvt()(e,t,!0))))};function r1t(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ft),autolinkProtocol:k,autolinkEmail:k,atxHeading:a(Oe),blockQuote:a(_e),characterEscape:k,characterReference:k,codeFenced:a(ge),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(ge,u),codeText:a(Be,u),codeTextData:k,data:k,codeFlowValue:k,definition:a(Me),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(ut),hardBreakEscape:a(Re),hardBreakTrailing:a(Re),htmlFlow:a(Ye,u),htmlFlowData:k,htmlText:a(Ye,u),htmlTextData:k,image:a(Ut),label:u,link:a(Ft),listItem:a(Ge),listItemValue:p,listOrdered:a(Je,h),listUnordered:a(Je),paragraph:a(gt),reference:q,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(Oe),strong:a(ot),thematicBreak:a(Et)},exit:{atxHeading:c(),atxHeadingSequence:b,autolink:c(),autolinkEmail:me,autolinkProtocol:fe,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:ue,characterReferenceMarkerNumeric:ue,characterReferenceValue:he,codeFenced:c(v),codeFencedFence:y,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:R,codeIndented:c(_),codeText:c(W),codeTextData:R,data:R,definition:c(),definitionDestinationString:x,definitionLabelString:w,definitionTitleString:S,emphasis:c(),hardBreakEscape:c(N),hardBreakTrailing:c(N),htmlFlow:c(F),htmlFlowData:R,htmlText:c(B),htmlTextData:R,image:c(G),label:H,labelText:M,lineEnding:P,link:c(V),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Z,resourceDestinationString:Y,resourceTitleString:L,resource:j,setextHeading:c(I),setextHeadingLineSequence:A,setextHeadingText:T,strong:c(),thematicBreak:c()}};GOe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ve){let Se={type:"root",children:[]};const Fe={stack:[Se],tokenStack:[],config:t,enter:l,exit:f,buffer:u,resume:d,setData:s,getData:o},Ue=[];let ht=-1;for(;++ht<ve.length;)if(ve[ht][1].type==="listOrdered"||ve[ht][1].type==="listUnordered")if(ve[ht][0]==="enter")Ue.push(ht);else{const cn=Ue.pop();ht=i(ve,cn,ht)}for(ht=-1;++ht<ve.length;){const cn=t[ve[ht][0]];WOe.call(cn,ve[ht][1].type)&&cn[ve[ht][1].type].call(Object.assign({sliceSerialize:ve[ht][2].sliceSerialize},Fe),ve[ht][1])}if(Fe.tokenStack.length>0){const cn=Fe.tokenStack[Fe.tokenStack.length-1];(cn[1]||lde).call(Fe,void 0,cn[0])}for(Se.position={start:ig(ve.length>0?ve[0][1].start:{line:1,column:1,offset:0}),end:ig(ve.length>0?ve[ve.length-2][1].end:{line:1,column:1,offset:0})},ht=-1;++ht<t.transforms.length;)Se=t.transforms[ht](Se)||Se;return Se}function i(ve,Se,Fe){let Ue=Se-1,ht=-1,cn=!1,Ve,wt,bt,bn;for(;++Ue<=Fe;){const Lt=ve[Ue];if(Lt[1].type==="listUnordered"||Lt[1].type==="listOrdered"||Lt[1].type==="blockQuote"?(Lt[0]==="enter"?ht++:ht--,bn=void 0):Lt[1].type==="lineEndingBlank"?Lt[0]==="enter"&&(Ve&&!bn&&!ht&&!bt&&(bt=Ue),bn=void 0):Lt[1].type==="linePrefix"||Lt[1].type==="listItemValue"||Lt[1].type==="listItemMarker"||Lt[1].type==="listItemPrefix"||Lt[1].type==="listItemPrefixWhitespace"||(bn=void 0),!ht&&Lt[0]==="enter"&&Lt[1].type==="listItemPrefix"||ht===-1&&Lt[0]==="exit"&&(Lt[1].type==="listUnordered"||Lt[1].type==="listOrdered")){if(Ve){let Ar=Ue;for(wt=void 0;Ar--;){const Fn=ve[Ar];if(Fn[1].type==="lineEnding"||Fn[1].type==="lineEndingBlank"){if(Fn[0]==="exit")continue;wt&&(ve[wt][1].type="lineEndingBlank",cn=!0),Fn[1].type="lineEnding",wt=Ar}else if(!(Fn[1].type==="linePrefix"||Fn[1].type==="blockQuotePrefix"||Fn[1].type==="blockQuotePrefixWhitespace"||Fn[1].type==="blockQuoteMarker"||Fn[1].type==="listItemIndent"))break}bt&&(!wt||bt<wt)&&(Ve._spread=!0),Ve.end=Object.assign({},wt?ve[wt][1].start:Lt[1].end),ve.splice(wt||Ue,0,["exit",Ve,Lt[2]]),Ue++,Fe++}Lt[1].type==="listItemPrefix"&&(Ve={type:"listItem",_spread:!1,start:Object.assign({},Lt[1].start),end:void 0},ve.splice(Ue,0,["enter",Ve,Lt[2]]),Ue++,Fe++,bt=void 0,bn=!0)}}return ve[Se][1]._spread=cn,Fe}function s(ve,Se){n[ve]=Se}function o(ve){return n[ve]}function a(ve,Se){return Fe;function Fe(Ue){l.call(this,ve(Ue),Ue),Se&&Se.call(this,Ue)}}function u(){this.stack.push({type:"fragment",children:[]})}function l(ve,Se,Fe){return this.stack[this.stack.length-1].children.push(ve),this.stack.push(ve),this.tokenStack.push([Se,Fe]),ve.position={start:ig(Se.start)},ve}function c(ve){return Se;function Se(Fe){ve&&ve.call(this,Fe),f.call(this,Fe)}}function f(ve,Se){const Fe=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==ve.type&&(Se?Se.call(this,ve,Ue[0]):(Ue[1]||lde).call(this,ve,Ue[0]));else throw new Error("Cannot close `"+ve.type+"` ("+fw({start:ve.start,end:ve.end})+"): its not open");return Fe.position.end=ig(ve.end),Fe}function d(){return tyt(this.stack.pop())}function h(){s("expectingFirstListItemValue",!0)}function p(ve){if(o("expectingFirstListItemValue")){const Se=this.stack[this.stack.length-2];Se.start=Number.parseInt(this.sliceSerialize(ve),10),s("expectingFirstListItemValue")}}function m(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.lang=ve}function g(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.meta=ve}function y(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function v(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function _(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve.replace(/(\r?\n|\r)$/g,"")}function w(ve){const Se=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=Se,Fe.identifier=dw(this.sliceSerialize(ve)).toLowerCase()}function S(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ve}function x(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ve}function b(ve){const Se=this.stack[this.stack.length-1];if(!Se.depth){const Fe=this.sliceSerialize(ve).length;Se.depth=Fe}}function T(){s("setextHeadingSlurpLineEnding",!0)}function A(ve){const Se=this.stack[this.stack.length-1];Se.depth=this.sliceSerialize(ve).charCodeAt(0)===61?1:2}function I(){s("setextHeadingSlurpLineEnding")}function k(ve){const Se=this.stack[this.stack.length-1];let Fe=Se.children[Se.children.length-1];(!Fe||Fe.type!=="text")&&(Fe=at(),Fe.position={start:ig(ve.start)},Se.children.push(Fe)),this.stack.push(Fe)}function R(ve){const Se=this.stack.pop();Se.value+=this.sliceSerialize(ve),Se.position.end=ig(ve.end)}function P(ve){const Se=this.stack[this.stack.length-1];if(o("atHardBreak")){const Fe=Se.children[Se.children.length-1];Fe.position.end=ig(ve.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Se.type)&&(k.call(this,ve),R.call(this,ve))}function N(){s("atHardBreak",!0)}function F(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function B(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function W(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function V(){const ve=this.stack[this.stack.length-1];if(o("inReference")){const Se=o("referenceType")||"shortcut";ve.type+="Reference",ve.referenceType=Se,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;s("referenceType")}function G(){const ve=this.stack[this.stack.length-1];if(o("inReference")){const Se=o("referenceType")||"shortcut";ve.type+="Reference",ve.referenceType=Se,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;s("referenceType")}function M(ve){const Se=this.sliceSerialize(ve),Fe=this.stack[this.stack.length-2];Fe.label=e1t(Se),Fe.identifier=dw(Se).toLowerCase()}function H(){const ve=this.stack[this.stack.length-1],Se=this.resume(),Fe=this.stack[this.stack.length-1];if(s("inReference",!0),Fe.type==="link"){const Ue=ve.children;Fe.children=Ue}else Fe.alt=Se}function Y(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ve}function L(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ve}function j(){s("inReference")}function q(){s("referenceType","collapsed")}function Z(ve){const Se=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=Se,Fe.identifier=dw(this.sliceSerialize(ve)).toLowerCase(),s("referenceType","full")}function ue(ve){s("characterReferenceType",ve.type)}function he(ve){const Se=this.sliceSerialize(ve),Fe=o("characterReferenceType");let Ue;Fe?(Ue=qOe(Se,Fe==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):Ue=tK(Se);const ht=this.stack.pop();ht.value+=Ue,ht.position.end=ig(ve.end)}function fe(ve){R.call(this,ve);const Se=this.stack[this.stack.length-1];Se.url=this.sliceSerialize(ve)}function me(ve){R.call(this,ve);const Se=this.stack[this.stack.length-1];Se.url="mailto:"+this.sliceSerialize(ve)}function _e(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function Be(){return{type:"inlineCode",value:""}}function Me(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Re(){return{type:"break"}}function Ye(){return{type:"html",value:""}}function Ut(){return{type:"image",title:null,url:"",alt:null}}function Ft(){return{type:"link",title:null,url:"",children:[]}}function Je(ve){return{type:"list",ordered:ve.type==="listOrdered",start:null,spread:ve._spread,children:[]}}function Ge(ve){return{type:"listItem",spread:ve._spread,checked:null,children:[]}}function gt(){return{type:"paragraph",children:[]}}function ot(){return{type:"strong",children:[]}}function at(){return{type:"text",value:""}}function Et(){return{type:"thematicBreak"}}}function ig(e){return{line:e.line,column:e.column,offset:e.offset}}function GOe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?GOe(e,r):i1t(e,r)}}function i1t(e,t){let n;for(n in t)if(WOe.call(t,n)){if(n==="canContainEols"){const r=t[n];r&&e[n].push(...r)}else if(n==="transforms"){const r=t[n];r&&e[n].push(...r)}else if(n==="enter"||n==="exit"){const r=t[n];r&&Object.assign(e[n],r)}}}function lde(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+fw({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+fw({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+fw({start:t.start,end:t.end})+") is still open")}function s1t(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return n1t(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function o1t(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function a1t(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function u1t(e,t){const n=t.value?t.value+`
`:"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function l1t(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function c1t(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function gx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&yl(e.charCodeAt(n+1))&&yl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function YOe(e,t){const n=String(t.identifier).toUpperCase(),r=gx(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n],a={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,a);const u={type:"element",tagName:"sup",properties:{},children:[a]};return e.patch(t,u),e.applyData(t,u)}function f1t(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},YOe(e,{type:"footnoteReference",identifier:i,position:t.position})}function d1t(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function h1t(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null}function KOe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+r};const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function p1t(e,t){const n=e.definition(t.identifier);if(!n)return KOe(e,t);const r={src:gx(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,i),e.applyData(t,i)}function m1t(e,t){const n={src:gx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function g1t(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function y1t(e,t){const n=e.definition(t.identifier);if(!n)return KOe(e,t);const r={href:gx(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function v1t(e,t){const n={href:gx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _1t(e,t,n){const r=e.all(t),i=n?b1t(n):XOe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function b1t(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=XOe(n[r])}return t}function XOe(e){const t=e.spread;return t??e.children.length>1}function w1t(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function E1t(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function x1t(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function S1t(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const rK=QOe("start"),iK=QOe("end");function T1t(e){return{start:rK(e),end:iK(e)}}function QOe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function C1t(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=rK(t.children[1]),u=iK(t.children[t.children.length-1]);a.line&&u.line&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function A1t(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(t,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function I1t(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const cde=9,fde=32;function O1t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(dde(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(dde(t.slice(i),i>0,!1)),s.join("")}function dde(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===cde||s===fde;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===cde||s===fde;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function P1t(e,t){const n={type:"text",value:O1t(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function k1t(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const R1t={blockquote:o1t,break:a1t,code:u1t,delete:l1t,emphasis:c1t,footnoteReference:YOe,footnote:f1t,heading:d1t,html:h1t,imageReference:p1t,image:m1t,inlineCode:g1t,linkReference:y1t,link:v1t,listItem:_1t,list:w1t,paragraph:E1t,root:x1t,strong:S1t,table:C1t,tableCell:I1t,tableRow:A1t,text:P1t,thematicBreak:k1t,toml:qP,yaml:qP,definition:qP,footnoteDefinition:qP};function qP(){return null}const JOe=function(e){if(e==null)return M1t;if(typeof e=="string")return D1t(e);if(typeof e=="object")return Array.isArray(e)?$1t(e):N1t(e);if(typeof e=="function")return a4(e);throw new Error("Expected function, string, or object as test")};function $1t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=JOe(e[n]);return a4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function N1t(e){return a4(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function D1t(e){return a4(t);function t(n){return n&&n.type===e}}function a4(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function M1t(){return!0}const L1t=!0,hde=!1,F1t="skip",j1t=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=JOe(t),s=r?-1:1;o(e,void 0,[])();function o(a,u,l){const c=a&&typeof a=="object"?a:{};if(typeof c.type=="string"){const d=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=[],h,p,m;if((!t||i(a,u,l[l.length-1]||null))&&(d=B1t(n(a,l)),d[0]===hde))return d;if(a.children&&d[0]!==F1t)for(p=(r?a.children.length:-1)+s,m=l.concat(a);p>-1&&p<a.children.length;){if(h=o(a.children[p],p,m)(),h[0]===hde)return h;p=typeof h[1]=="number"?h[1]:p+s}return d}}};function B1t(e){return Array.isArray(e)?e:typeof e=="number"?[L1t,e]:[e]}const sK=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),j1t(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}};function z1t(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const pde={}.hasOwnProperty;function U1t(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return sK(e,"definition",r=>{const i=mde(r.identifier);i&&!pde.call(t,i)&&(t[i]=r)}),n;function n(r){const i=mde(r);return i&&pde.call(t,i)?t[i]:null}}function mde(e){return String(e||"").toUpperCase()}const l3={}.hasOwnProperty;function V1t(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,o.handlers={...R1t,...n.handlers},o.definition=U1t(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.patch=H1t,o.applyData=q1t,o.one=a,o.all=u,o.wrap=G1t,o.augment=s,sK(e,"footnoteDefinition",l=>{const c=String(l.identifier).toUpperCase();l3.call(i,c)||(i[c]=l)}),o;function s(l,c){if(l&&"data"in l&&l.data){const f=l.data;f.hName&&(c.type!=="element"&&(c={type:"element",tagName:"",properties:{},children:[]}),c.tagName=f.hName),c.type==="element"&&f.hProperties&&(c.properties={...c.properties,...f.hProperties}),"children"in c&&c.children&&f.hChildren&&(c.children=f.hChildren)}if(l){const f="type"in l?l:{position:l};z1t(f)||(c.position={start:rK(f),end:iK(f)})}return c}function o(l,c,f,d){return Array.isArray(f)&&(d=f,f={}),s(l,{type:"element",tagName:c,properties:f||{},children:d||[]})}function a(l,c){return ZOe(o,l,c)}function u(l){return oK(o,l)}}function H1t(e,t){e.position&&(t.position=T1t(e))}function q1t(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;typeof r=="string"&&(n.type==="element"?n.tagName=r:n={type:"element",tagName:r,properties:{},children:[]}),n.type==="element"&&s&&(n.properties={...n.properties,...s}),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function ZOe(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return l3.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:oK(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):W1t(e,t)}function oK(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=ZOe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}function W1t(e,t){const n=t.data||{},r="value"in t&&!(l3.call(n,"hProperties")||l3.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:oK(e,t)};return e.patch(t,r),e.applyData(t,r)}function G1t(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Y1t(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const i=e.all(r),s=String(r.identifier).toUpperCase(),o=gx(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:e.wrap(i,!0)};e.patch(r,c),t.push(c)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function ePe(e,t){const n=V1t(e,t),r=n.one(e,null),i=Y1t(n);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const K1t=function(e,t){return e&&"run"in e?X1t(e,t):Q1t(e||t)};function X1t(e,t){return(n,r,i)=>{e.run(ePe(n,t),r,s=>{i(s)})}}function Q1t(e){return t=>ePe(t,e)}let EI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};EI.prototype.property={};EI.prototype.normal={};EI.prototype.space=null;function tPe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new EI(n,r,t)}function BC(e){return e.toLowerCase()}let Lc=class{constructor(t,n){this.property=t,this.attribute=n}};Lc.prototype.space=null;Lc.prototype.boolean=!1;Lc.prototype.booleanish=!1;Lc.prototype.overloadedBoolean=!1;Lc.prototype.number=!1;Lc.prototype.commaSeparated=!1;Lc.prototype.spaceSeparated=!1;Lc.prototype.commaOrSpaceSeparated=!1;Lc.prototype.mustUseProperty=!1;Lc.prototype.defined=!1;let J1t=0;const Sn=d_(),ys=d_(),nPe=d_(),tt=d_(),ci=d_(),hw=d_(),sl=d_();function d_(){return 2**++J1t}const FU=Object.freeze(Object.defineProperty({__proto__:null,boolean:Sn,booleanish:ys,commaOrSpaceSeparated:sl,commaSeparated:hw,number:tt,overloadedBoolean:nPe,spaceSeparated:ci},Symbol.toStringTag,{value:"Module"})),y9=Object.keys(FU);class aK extends Lc{constructor(t,n,r,i){let s=-1;if(super(t,n),gde(this,"space",i),typeof r=="number")for(;++s<y9.length;){const o=y9[s];gde(this,y9[s],(r&FU[o])===FU[o])}}}aK.prototype.defined=!0;function gde(e,t,n){n&&(e[t]=n)}const Z1t={}.hasOwnProperty;function yx(e){const t={},n={};let r;for(r in e.properties)if(Z1t.call(e.properties,r)){const i=e.properties[r],s=new aK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[BC(r)]=r,n[BC(s.attribute)]=r}return new EI(t,n,e.space)}const rPe=yx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),iPe=yx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function sPe(e,t){return t in e?e[t]:t}function oPe(e,t){return sPe(e,t.toLowerCase())}const aPe=yx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:oPe,properties:{xmlns:null,xmlnsXLink:null}}),uPe=yx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ys,ariaAutoComplete:null,ariaBusy:ys,ariaChecked:ys,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:ci,ariaCurrent:null,ariaDescribedBy:ci,ariaDetails:null,ariaDisabled:ys,ariaDropEffect:ci,ariaErrorMessage:null,ariaExpanded:ys,ariaFlowTo:ci,ariaGrabbed:ys,ariaHasPopup:null,ariaHidden:ys,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ci,ariaLevel:tt,ariaLive:null,ariaModal:ys,ariaMultiLine:ys,ariaMultiSelectable:ys,ariaOrientation:null,ariaOwns:ci,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:ys,ariaReadOnly:ys,ariaRelevant:null,ariaRequired:ys,ariaRoleDescription:ci,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:ys,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),e_t=yx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:oPe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:hw,acceptCharset:ci,accessKey:ci,action:null,allow:null,allowFullScreen:Sn,allowPaymentRequest:Sn,allowUserMedia:Sn,alt:null,as:null,async:Sn,autoCapitalize:null,autoComplete:ci,autoFocus:Sn,autoPlay:Sn,blocking:ci,capture:null,charSet:null,checked:Sn,cite:null,className:ci,cols:tt,colSpan:null,content:null,contentEditable:ys,controls:Sn,controlsList:ci,coords:tt|hw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Sn,defer:Sn,dir:null,dirName:null,disabled:Sn,download:nPe,draggable:ys,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Sn,formTarget:null,headers:ci,height:tt,hidden:Sn,high:tt,href:null,hrefLang:null,htmlFor:ci,httpEquiv:ci,id:null,imageSizes:null,imageSrcSet:null,inert:Sn,inputMode:null,integrity:null,is:null,isMap:Sn,itemId:null,itemProp:ci,itemRef:ci,itemScope:Sn,itemType:ci,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Sn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:Sn,muted:Sn,name:null,nonce:null,noModule:Sn,noValidate:Sn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Sn,optimum:tt,pattern:null,ping:ci,placeholder:null,playsInline:Sn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Sn,referrerPolicy:null,rel:ci,required:Sn,reversed:Sn,rows:tt,rowSpan:tt,sandbox:ci,scope:null,scoped:Sn,seamless:Sn,selected:Sn,shadowRootClonable:Sn,shadowRootDelegatesFocus:Sn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:ys,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:Sn,useMap:null,value:ys,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ci,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Sn,declare:Sn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:Sn,noHref:Sn,noShade:Sn,noWrap:Sn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:ys,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Sn,disableRemotePlayback:Sn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),t_t=yx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:sPe,properties:{about:sl,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:ci,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:Sn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:hw,g2:hw,glyphName:hw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:sl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ci,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:sl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:sl,rev:sl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:sl,requiredFeatures:sl,requiredFonts:sl,requiredFormats:sl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:sl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:sl,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:sl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),n_t=/^data[-\w.:]+$/i,yde=/-[a-z]/g,r_t=/[A-Z]/g;function u4(e,t){const n=BC(t);let r=t,i=Lc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&n_t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(yde,s_t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!yde.test(s)){let o=s.replace(r_t,i_t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=aK}return new i(r,t)}function i_t(e){return"-"+e.toLowerCase()}function s_t(e){return e.charAt(1).toUpperCase()}const vde={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xI=tPe([iPe,rPe,aPe,uPe,e_t],"html"),vx=tPe([iPe,rPe,aPe,uPe,t_t],"svg");function o_t(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{sK(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var lPe={exports:{}},zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uK=Symbol.for("react.element"),lK=Symbol.for("react.portal"),l4=Symbol.for("react.fragment"),c4=Symbol.for("react.strict_mode"),f4=Symbol.for("react.profiler"),d4=Symbol.for("react.provider"),h4=Symbol.for("react.context"),a_t=Symbol.for("react.server_context"),p4=Symbol.for("react.forward_ref"),m4=Symbol.for("react.suspense"),g4=Symbol.for("react.suspense_list"),y4=Symbol.for("react.memo"),v4=Symbol.for("react.lazy"),u_t=Symbol.for("react.offscreen"),cPe;cPe=Symbol.for("react.module.reference");function Fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case uK:switch(e=e.type,e){case l4:case f4:case c4:case m4:case g4:return e;default:switch(e=e&&e.$$typeof,e){case a_t:case h4:case p4:case v4:case y4:case d4:return e;default:return t}}case lK:return t}}}zr.ContextConsumer=h4;zr.ContextProvider=d4;zr.Element=uK;zr.ForwardRef=p4;zr.Fragment=l4;zr.Lazy=v4;zr.Memo=y4;zr.Portal=lK;zr.Profiler=f4;zr.StrictMode=c4;zr.Suspense=m4;zr.SuspenseList=g4;zr.isAsyncMode=function(){return!1};zr.isConcurrentMode=function(){return!1};zr.isContextConsumer=function(e){return Fc(e)===h4};zr.isContextProvider=function(e){return Fc(e)===d4};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===uK};zr.isForwardRef=function(e){return Fc(e)===p4};zr.isFragment=function(e){return Fc(e)===l4};zr.isLazy=function(e){return Fc(e)===v4};zr.isMemo=function(e){return Fc(e)===y4};zr.isPortal=function(e){return Fc(e)===lK};zr.isProfiler=function(e){return Fc(e)===f4};zr.isStrictMode=function(e){return Fc(e)===c4};zr.isSuspense=function(e){return Fc(e)===m4};zr.isSuspenseList=function(e){return Fc(e)===g4};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===l4||e===f4||e===c4||e===m4||e===g4||e===u_t||typeof e=="object"&&e!==null&&(e.$$typeof===v4||e.$$typeof===y4||e.$$typeof===d4||e.$$typeof===h4||e.$$typeof===p4||e.$$typeof===cPe||e.getModuleId!==void 0)};zr.typeOf=Fc;lPe.exports=zr;var l_t=lPe.exports;const c_t=Qu(l_t);function f_t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function _de(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function fPe(e){return e.join(" ").trim()}function bde(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function dPe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var cK={exports:{}},wde=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,d_t=/\n/g,h_t=/^\s*/,p_t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,m_t=/^:\s*/,g_t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,y_t=/^[;\s]*/,v_t=/^\s+|\s+$/g,__t=`
`,Ede="/",xde="*",bv="",b_t="comment",w_t="declaration",E_t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(d_t);m&&(n+=m.length);var g=p.lastIndexOf(__t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(h_t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Ede!=e.charAt(0)||xde!=e.charAt(1))){for(var m=2;bv!=e.charAt(m)&&(xde!=e.charAt(m)||Ede!=e.charAt(m+1));)++m;if(m+=2,bv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:b_t,comment:g})}}function d(){var p=s(),m=u(p_t);if(m){if(f(),!u(m_t))return a("property missing ':'");var g=u(g_t),y=p({type:w_t,property:Sde(m[0].replace(wde,bv)),value:g?Sde(g[0].replace(wde,bv)):bv});return u(y_t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Sde(e){return e?e.replace(v_t,bv):bv}var x_t=E_t;function hPe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=x_t(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}cK.exports=hPe;cK.exports.default=hPe;var S_t=cK.exports;const T_t=Qu(S_t),jU={}.hasOwnProperty,C_t=new Set(["table","thead","tbody","tfoot","tr"]);function pPe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(A_t(e,i,r,t)):i.type==="text"?(t.type!=="element"||!C_t.has(t.tagName)||!f_t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function A_t(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?w0t:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=vx,e.schema=l),t.properties)for(c in t.properties)jU.call(t.properties,c)&&O_t(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=pPe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&jU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===z.Fragment;if(!c_t.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=n,a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=I_t(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=v9(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=R_t(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=v9(r,t),u.siblingCount=v9(r)),p||(u.node=t),f.length>0?z.createElement(h,u,f):z.createElement(h,u)}function I_t(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function v9(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function O_t(e,t,n,r){const i=u4(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?dPe(s):fPe(s)),i.property==="style"&&typeof s=="string"&&(s=P_t(s)),i.space&&i.property?e[jU.call(vde,i.property)?vde[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function P_t(e){const t={};try{T_t(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,k_t)]=i}}function k_t(e,t){return t.toUpperCase()}function R_t(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const Tde={}.hasOwnProperty,$_t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",WP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function mPe(e){for(const s in WP)if(Tde.call(WP,s)&&Tde.call(e,s)){const o=WP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${$_t}#${o.id}> for more info)`),delete WP[s]}const t=X0t().use(s1t).use(e.remarkPlugins||[]).use(K1t,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(o_t,e),n=new $0t;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=z.createElement(z.Fragment,{},pPe({options:e,schema:xI,listDepth:0},r));return e.className&&(i=z.createElement("div",{className:e.className},i)),i}mPe.propTypes={children:Jt.string,className:Jt.string,allowElement:Jt.func,allowedElements:Jt.arrayOf(Jt.string),disallowedElements:Jt.arrayOf(Jt.string),unwrapDisallowed:Jt.bool,remarkPlugins:Jt.arrayOf(Jt.oneOfType([Jt.object,Jt.func,Jt.arrayOf(Jt.oneOfType([Jt.bool,Jt.string,Jt.object,Jt.func,Jt.arrayOf(Jt.any)]))])),rehypePlugins:Jt.arrayOf(Jt.oneOfType([Jt.object,Jt.func,Jt.arrayOf(Jt.oneOfType([Jt.bool,Jt.string,Jt.object,Jt.func,Jt.arrayOf(Jt.any)]))])),sourcePos:Jt.bool,rawSourcePos:Jt.bool,skipHtml:Jt.bool,includeElementIndex:Jt.bool,transformLinkUri:Jt.oneOfType([Jt.func,Jt.bool]),linkTarget:Jt.oneOfType([Jt.func,Jt.string]),transformImageUri:Jt.func,components:Jt.object};const gPe=-1,_4=0,c3=1,f3=2,fK=3,dK=4,hK=5,pK=6,yPe=7,vPe=8,Cde=typeof self=="object"?self:globalThis,N_t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case _4:case gPe:return n(o,i);case c3:{const a=n([],i);for(const u of o)a.push(r(u));return a}case f3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case fK:return n(new Date(o),i);case dK:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case hK:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case pK:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case yPe:{const{name:a,message:u}=o;return n(new Cde[a](u),i)}case vPe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Cde[s](o),i)};return r},Ade=e=>N_t(new Map,e)(0),X_="",{toString:D_t}={},{keys:M_t}=Object,FS=e=>{const t=typeof e;if(t!=="object"||!e)return[_4,t];const n=D_t.call(e).slice(8,-1);switch(n){case"Array":return[c3,X_];case"Object":return[f3,X_];case"Date":return[fK,X_];case"RegExp":return[dK,X_];case"Map":return[hK,X_];case"Set":return[pK,X_]}return n.includes("Array")?[c3,n]:n.includes("Error")?[yPe,n]:[f3,n]},GP=([e,t])=>e===_4&&(t==="function"||t==="symbol"),L_t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=FS(o);switch(a){case _4:{let c=o;switch(u){case"bigint":a=vPe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([gPe],o)}return i([a,c],o)}case c3:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case f3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of M_t(o))(e||!GP(FS(o[d])))&&c.push([s(d),s(o[d])]);return f}case fK:return i([a,o.toISOString()],o);case dK:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case hK:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(GP(FS(d))||GP(FS(h))))&&c.push([s(d),s(h)]);return f}case pK:{const c=[],f=i([a,c],o);for(const d of o)(e||!GP(FS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Ide=(e,{json:t,lossy:n}={})=>{const r=[];return L_t(!(t||n),!!t,new Map,r)(e),r},Ode=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Ade(Ide(e,t)):structuredClone(e):(e,t)=>Ade(Ide(e,t)),Pde=/[#.]/g;function F_t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Pde.lastIndex=i;const a=Pde.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const j_t=new Set(["button","menu","reset","submit"]),BU={}.hasOwnProperty;function _Pe(e,t,n){const r=n&&V_t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=F_t(s,t),l.tagName=l.tagName.toLowerCase(),r&&BU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),B_t(o,l.tagName)){let c;for(c in o)BU.call(o,c)&&z_t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)zU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function B_t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?j_t.has(e.type.toLowerCase()):!("value"in e)}function z_t(e,t,n,r){const i=u4(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=_de(r):i.commaSeparated?o=bde(r):i.commaOrSpaceSeparated?o=_de(bde(r).join(" ")):o=kde(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?U_t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=kde(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function zU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)zU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?zU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function kde(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||BC(n)===BC(t)))return!0}return n}function U_t(e){const t=[];let n;for(n in e)BU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function V_t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const H_t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],q_t=_Pe(xI,"div"),W_t=_Pe(vx,"g",H_t),_9=/\r?\n|\r/g;function G_t(e){const t=String(e),n=[];for(_9.lastIndex=0;_9.test(t);)n.push(_9.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Mv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bPe={}.hasOwnProperty,Y_t=Object.prototype;function K_t(e,t){const n=t||{};return mK({file:n.file||void 0,location:!1,schema:n.space==="svg"?vx:xI,verbose:n.verbose||!1},e)}function mK(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},FR(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:wPe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=G_t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},FR(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},FR(e,r,n),n}default:return n=X_t(e,t),n}}function wPe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=mK(e,t[n]);r.push(i)}return r}function X_t(e,t){const n=e.schema;e.schema=t.namespaceURI===Mv.svg?vx:xI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;bPe.call(Y_t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?W_t:q_t)(t.tagName,i,wPe(e,t.childNodes));if(FR(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Ub(u.startTag),c=u&&u.endTag&&Ub(u.endTag),f=mK(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function FR(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Q_t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Q_t(e,t,n){const r=Ub(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)bPe.call(n.attrs,o)&&(s[u4(e.schema,o).property]=Ub(n.attrs[o]));n.startTag;const a=Ub(n.startTag),u=n.endTag?Ub(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Ub(e){const t=Rde({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Rde({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Rde(e){return e.line&&e.column?e:void 0}const $de={}.hasOwnProperty;function EPe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&$de.call(i,e)){const u=String(i[e]);o=$de.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const J_t={},Z_t={}.hasOwnProperty,xPe=EPe("type",{handlers:{root:tbt,element:obt,text:ibt,comment:sbt,doctype:rbt}});function ebt(e,t){const r=(t||J_t).space;return xPe(e,r==="svg"?vx:xI)}function tbt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=gK(e.children,n,t),_x(e,n),n}function nbt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=gK(e.children,n,t),_x(e,n),n}function rbt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return _x(e,t),t}function ibt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return _x(e,t),t}function sbt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return _x(e,t),t}function obt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=vx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Z_t.call(e.properties,s)){const u=abt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Mv[o],childNodes:[],parentNode:null};return a.childNodes=gK(e.children,a,r),_x(e,a),e.tagName==="template"&&e.content&&(a.content=nbt(e.content,r)),a}function abt(e,t,n){const r=u4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?dPe(n):fPe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Mv[r.space]}return i}function gK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=xPe(e[r],n);s.parentNode=t,i.push(s)}return i}function _x(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const ubt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],lbt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ai="";var Q;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Q=Q||(Q={}));const cu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function SPe(e){return e>=55296&&e<=57343}function cbt(e){return e>=56320&&e<=57343}function fbt(e,t){return(e-55296)*1024+9216+t}function TPe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function CPe(e){return e>=64976&&e<=65007||lbt.has(e)}var Ce;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ce=Ce||(Ce={}));const dbt=65536;class hbt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=dbt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(cbt(n))return this.pos++,this._addGap(),fbt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Q.EOF;return this._err(Ce.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;const r=this.html.charCodeAt(n);return r===Q.CARRIAGE_RETURN?Q.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;let t=this.html.charCodeAt(this.pos);return t===Q.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Q.LINE_FEED):t===Q.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,SPe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Q.LINE_FEED||t===Q.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){TPe(t)?this._err(Ce.controlCharacterInInputStream):CPe(t)&&this._err(Ce.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Dn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Dn=Dn||(Dn={}));function APe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const gg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),pbt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var b9;const mbt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),gbt=(b9=String.fromCodePoint)!==null&&b9!==void 0?b9:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function ybt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=mbt.get(e))!==null&&t!==void 0?t:e}var no;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(no||(no={}));const vbt=32;var Hd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Hd||(Hd={}));function UU(e){return e>=no.ZERO&&e<=no.NINE}function _bt(e){return e>=no.UPPER_A&&e<=no.UPPER_F||e>=no.LOWER_A&&e<=no.LOWER_F}function bbt(e){return e>=no.UPPER_A&&e<=no.UPPER_Z||e>=no.LOWER_A&&e<=no.LOWER_Z||UU(e)}function wbt(e){return e===no.EQUALS||bbt(e)}var Ks;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ks||(Ks={}));var wv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(wv||(wv={}));class Ebt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ks.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=wv.Strict}startEntity(t){this.decodeMode=t,this.state=Ks.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ks.EntityStart:return t.charCodeAt(n)===no.NUM?(this.state=Ks.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ks.NamedEntity,this.stateNamedEntity(t,n));case Ks.NumericStart:return this.stateNumericStart(t,n);case Ks.NumericDecimal:return this.stateNumericDecimal(t,n);case Ks.NumericHex:return this.stateNumericHex(t,n);case Ks.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|vbt)===no.LOWER_X?(this.state=Ks.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ks.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(UU(i)||_bt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(UU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===no.SEMI)this.consumed+=1;else if(this.decodeMode===wv.Strict)return 0;return this.emitCodePoint(ybt(this.result),this.consumed),this.errors&&(t!==no.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Hd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=OPe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===wv.Attribute&&(s===0||wbt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Hd.VALUE_LENGTH)>>14,s!==0){if(o===no.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==wv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Hd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Hd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ks.NamedEntity:return this.result!==0&&(this.decodeMode!==wv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ks.NumericDecimal:return this.emitNumericEntity(0,2);case Ks.NumericHex:return this.emitNumericEntity(0,3);case Ks.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ks.EntityStart:return 0}}}function IPe(e){let t="";const n=new Ebt(e,r=>t+=gbt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function OPe(e,t,n,r){const i=(t&Hd.BRANCH_LENGTH)>>7,s=t&Hd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}IPe(gg);IPe(pbt);var Ne;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ne=Ne||(Ne={}));var d0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(d0=d0||(d0={}));var cl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(cl=cl||(cl={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const xbt=new Map([[we.A,O.A],[we.ADDRESS,O.ADDRESS],[we.ANNOTATION_XML,O.ANNOTATION_XML],[we.APPLET,O.APPLET],[we.AREA,O.AREA],[we.ARTICLE,O.ARTICLE],[we.ASIDE,O.ASIDE],[we.B,O.B],[we.BASE,O.BASE],[we.BASEFONT,O.BASEFONT],[we.BGSOUND,O.BGSOUND],[we.BIG,O.BIG],[we.BLOCKQUOTE,O.BLOCKQUOTE],[we.BODY,O.BODY],[we.BR,O.BR],[we.BUTTON,O.BUTTON],[we.CAPTION,O.CAPTION],[we.CENTER,O.CENTER],[we.CODE,O.CODE],[we.COL,O.COL],[we.COLGROUP,O.COLGROUP],[we.DD,O.DD],[we.DESC,O.DESC],[we.DETAILS,O.DETAILS],[we.DIALOG,O.DIALOG],[we.DIR,O.DIR],[we.DIV,O.DIV],[we.DL,O.DL],[we.DT,O.DT],[we.EM,O.EM],[we.EMBED,O.EMBED],[we.FIELDSET,O.FIELDSET],[we.FIGCAPTION,O.FIGCAPTION],[we.FIGURE,O.FIGURE],[we.FONT,O.FONT],[we.FOOTER,O.FOOTER],[we.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[we.FORM,O.FORM],[we.FRAME,O.FRAME],[we.FRAMESET,O.FRAMESET],[we.H1,O.H1],[we.H2,O.H2],[we.H3,O.H3],[we.H4,O.H4],[we.H5,O.H5],[we.H6,O.H6],[we.HEAD,O.HEAD],[we.HEADER,O.HEADER],[we.HGROUP,O.HGROUP],[we.HR,O.HR],[we.HTML,O.HTML],[we.I,O.I],[we.IMG,O.IMG],[we.IMAGE,O.IMAGE],[we.INPUT,O.INPUT],[we.IFRAME,O.IFRAME],[we.KEYGEN,O.KEYGEN],[we.LABEL,O.LABEL],[we.LI,O.LI],[we.LINK,O.LINK],[we.LISTING,O.LISTING],[we.MAIN,O.MAIN],[we.MALIGNMARK,O.MALIGNMARK],[we.MARQUEE,O.MARQUEE],[we.MATH,O.MATH],[we.MENU,O.MENU],[we.META,O.META],[we.MGLYPH,O.MGLYPH],[we.MI,O.MI],[we.MO,O.MO],[we.MN,O.MN],[we.MS,O.MS],[we.MTEXT,O.MTEXT],[we.NAV,O.NAV],[we.NOBR,O.NOBR],[we.NOFRAMES,O.NOFRAMES],[we.NOEMBED,O.NOEMBED],[we.NOSCRIPT,O.NOSCRIPT],[we.OBJECT,O.OBJECT],[we.OL,O.OL],[we.OPTGROUP,O.OPTGROUP],[we.OPTION,O.OPTION],[we.P,O.P],[we.PARAM,O.PARAM],[we.PLAINTEXT,O.PLAINTEXT],[we.PRE,O.PRE],[we.RB,O.RB],[we.RP,O.RP],[we.RT,O.RT],[we.RTC,O.RTC],[we.RUBY,O.RUBY],[we.S,O.S],[we.SCRIPT,O.SCRIPT],[we.SECTION,O.SECTION],[we.SELECT,O.SELECT],[we.SOURCE,O.SOURCE],[we.SMALL,O.SMALL],[we.SPAN,O.SPAN],[we.STRIKE,O.STRIKE],[we.STRONG,O.STRONG],[we.STYLE,O.STYLE],[we.SUB,O.SUB],[we.SUMMARY,O.SUMMARY],[we.SUP,O.SUP],[we.TABLE,O.TABLE],[we.TBODY,O.TBODY],[we.TEMPLATE,O.TEMPLATE],[we.TEXTAREA,O.TEXTAREA],[we.TFOOT,O.TFOOT],[we.TD,O.TD],[we.TH,O.TH],[we.THEAD,O.THEAD],[we.TITLE,O.TITLE],[we.TR,O.TR],[we.TRACK,O.TRACK],[we.TT,O.TT],[we.U,O.U],[we.UL,O.UL],[we.SVG,O.SVG],[we.VAR,O.VAR],[we.WBR,O.WBR],[we.XMP,O.XMP]]);function bx(e){var t;return(t=xbt.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const Xe=O,Sbt={[Ne.HTML]:new Set([Xe.ADDRESS,Xe.APPLET,Xe.AREA,Xe.ARTICLE,Xe.ASIDE,Xe.BASE,Xe.BASEFONT,Xe.BGSOUND,Xe.BLOCKQUOTE,Xe.BODY,Xe.BR,Xe.BUTTON,Xe.CAPTION,Xe.CENTER,Xe.COL,Xe.COLGROUP,Xe.DD,Xe.DETAILS,Xe.DIR,Xe.DIV,Xe.DL,Xe.DT,Xe.EMBED,Xe.FIELDSET,Xe.FIGCAPTION,Xe.FIGURE,Xe.FOOTER,Xe.FORM,Xe.FRAME,Xe.FRAMESET,Xe.H1,Xe.H2,Xe.H3,Xe.H4,Xe.H5,Xe.H6,Xe.HEAD,Xe.HEADER,Xe.HGROUP,Xe.HR,Xe.HTML,Xe.IFRAME,Xe.IMG,Xe.INPUT,Xe.LI,Xe.LINK,Xe.LISTING,Xe.MAIN,Xe.MARQUEE,Xe.MENU,Xe.META,Xe.NAV,Xe.NOEMBED,Xe.NOFRAMES,Xe.NOSCRIPT,Xe.OBJECT,Xe.OL,Xe.P,Xe.PARAM,Xe.PLAINTEXT,Xe.PRE,Xe.SCRIPT,Xe.SECTION,Xe.SELECT,Xe.SOURCE,Xe.STYLE,Xe.SUMMARY,Xe.TABLE,Xe.TBODY,Xe.TD,Xe.TEMPLATE,Xe.TEXTAREA,Xe.TFOOT,Xe.TH,Xe.THEAD,Xe.TITLE,Xe.TR,Xe.TRACK,Xe.UL,Xe.WBR,Xe.XMP]),[Ne.MATHML]:new Set([Xe.MI,Xe.MO,Xe.MN,Xe.MS,Xe.MTEXT,Xe.ANNOTATION_XML]),[Ne.SVG]:new Set([Xe.TITLE,Xe.FOREIGN_OBJECT,Xe.DESC]),[Ne.XLINK]:new Set,[Ne.XML]:new Set,[Ne.XMLNS]:new Set};function PPe(e){return e===Xe.H1||e===Xe.H2||e===Xe.H3||e===Xe.H4||e===Xe.H5||e===Xe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const Tbt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var te;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(te||(te={}));const us={DATA:te.DATA,RCDATA:te.RCDATA,RAWTEXT:te.RAWTEXT,SCRIPT_DATA:te.SCRIPT_DATA,PLAINTEXT:te.PLAINTEXT,CDATA_SECTION:te.CDATA_SECTION};function I2(e){return e>=Q.DIGIT_0&&e<=Q.DIGIT_9}function RT(e){return e>=Q.LATIN_CAPITAL_A&&e<=Q.LATIN_CAPITAL_Z}function Cbt(e){return e>=Q.LATIN_SMALL_A&&e<=Q.LATIN_SMALL_Z}function yg(e){return Cbt(e)||RT(e)}function VU(e){return yg(e)||I2(e)}function kPe(e){return e>=Q.LATIN_CAPITAL_A&&e<=Q.LATIN_CAPITAL_F}function RPe(e){return e>=Q.LATIN_SMALL_A&&e<=Q.LATIN_SMALL_F}function Abt(e){return I2(e)||kPe(e)||RPe(e)}function YP(e){return e+32}function $Pe(e){return e===Q.SPACE||e===Q.LINE_FEED||e===Q.TABULATION||e===Q.FORM_FEED}function Ibt(e){return e===Q.EQUALS_SIGN||VU(e)}function Nde(e){return $Pe(e)||e===Q.SOLIDUS||e===Q.GREATER_THAN_SIGN}class Obt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=te.DATA,this.returnState=te.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new hbt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Dn.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Dn.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Dn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Dn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(APe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ce.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=bx(t.tagName),t.type===Dn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ce.endTagWithAttributes),t.selfClosing&&this._err(Ce.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Dn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Dn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Dn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Dn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=$Pe(t)?Dn.WHITESPACE_CHARACTER:t===Q.NULL?Dn.NULL_CHARACTER:Dn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Dn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=gg[0];s>=0&&(s=OPe(gg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=gg[s];const a=o&Hd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Q.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Ibt(this.preprocessor.peek(1))?(n=[Q.AMPERSAND],s+=u):(n=u===0?[gg[s]&~Hd.VALUE_LENGTH]:u===1?[gg[++s]]:[gg[++s],gg[++s]],r=0,i=t!==Q.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ce.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===te.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===te.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===te.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case te.DATA:{this._stateData(t);break}case te.RCDATA:{this._stateRcdata(t);break}case te.RAWTEXT:{this._stateRawtext(t);break}case te.SCRIPT_DATA:{this._stateScriptData(t);break}case te.PLAINTEXT:{this._statePlaintext(t);break}case te.TAG_OPEN:{this._stateTagOpen(t);break}case te.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case te.TAG_NAME:{this._stateTagName(t);break}case te.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case te.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case te.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case te.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case te.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case te.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case te.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case te.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case te.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case te.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case te.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case te.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case te.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case te.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case te.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case te.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case te.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case te.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case te.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case te.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case te.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case te.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case te.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case te.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case te.BOGUS_COMMENT:{this._stateBogusComment(t);break}case te.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case te.COMMENT_START:{this._stateCommentStart(t);break}case te.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case te.COMMENT:{this._stateComment(t);break}case te.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case te.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case te.COMMENT_END:{this._stateCommentEnd(t);break}case te.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case te.DOCTYPE:{this._stateDoctype(t);break}case te.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case te.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case te.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case te.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case te.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case te.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case te.CDATA_SECTION:{this._stateCdataSection(t);break}case te.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case te.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case te.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case te.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case te.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case te.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case te.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case te.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case te.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case te.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.TAG_OPEN;break}case Q.AMPERSAND:{this.returnState=te.DATA,this.state=te.CHARACTER_REFERENCE;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitCodePoint(t);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Q.AMPERSAND:{this.returnState=te.RCDATA,this.state=te.CHARACTER_REFERENCE;break}case Q.LESS_THAN_SIGN:{this.state=te.RCDATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.RAWTEXT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(yg(t))this._createStartTagToken(),this.state=te.TAG_NAME,this._stateTagName(t);else switch(t){case Q.EXCLAMATION_MARK:{this.state=te.MARKUP_DECLARATION_OPEN;break}case Q.SOLIDUS:{this.state=te.END_TAG_OPEN;break}case Q.QUESTION_MARK:{this._err(Ce.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t);break}case Q.EOF:{this._err(Ce.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ce.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=te.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(yg(t))this._createEndTagToken(),this.state=te.TAG_NAME,this._stateTagName(t);else switch(t){case Q.GREATER_THAN_SIGN:{this._err(Ce.missingEndTagName),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ce.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this.state=te.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.tagName+=Ai;break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(RT(t)?YP(t):t)}}_stateRcdataLessThanSign(t){t===Q.SOLIDUS?this.state=te.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=te.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){yg(t)?(this.state=te.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=te.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=te.BEFORE_ATTRIBUTE_NAME,!1;case Q.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=te.SELF_CLOSING_START_TAG,!1;case Q.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=te.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Q.SOLIDUS?this.state=te.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){yg(t)?(this.state=te.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Q.SOLIDUS:{this.state=te.SCRIPT_DATA_END_TAG_OPEN;break}case Q.EXCLAMATION_MARK:{this.state=te.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=te.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){yg(t)?(this.state=te.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Q.HYPHEN_MINUS?(this.state=te.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Q.HYPHEN_MINUS?(this.state=te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.GREATER_THAN_SIGN:{this.state=te.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Q.SOLIDUS?this.state=te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:yg(t)?(this._emitChars("<"),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){yg(t)?(this.state=te.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(cu.SCRIPT,!1)&&Nde(this.preprocessor.peek(cu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<cu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.GREATER_THAN_SIGN:{this.state=te.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Q.SOLIDUS?(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(cu.SCRIPT,!1)&&Nde(this.preprocessor.peek(cu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<cu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=te.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this.state=te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._err(Ce.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=te.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this._leaveAttrName(),this.state=te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._leaveAttrName(),this.state=te.BEFORE_ATTRIBUTE_VALUE;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:{this._err(Ce.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.name+=Ai;break}default:this.currentAttr.name+=String.fromCodePoint(RT(t)?YP(t):t)}}_stateAfterAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:{this.state=te.SELF_CLOSING_START_TAG;break}case Q.EQUALS_SIGN:{this.state=te.BEFORE_ATTRIBUTE_VALUE;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{this.state=te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this.state=te.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingAttributeValue),this.state=te.DATA,this.emitCurrentTagToken();break}default:this.state=te.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this.returnState=te.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=te.CHARACTER_REFERENCE;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=Ai;break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this.returnState=te.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=te.CHARACTER_REFERENCE;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=Ai;break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.AMPERSAND:{this.returnState=te.ATTRIBUTE_VALUE_UNQUOTED,this.state=te.CHARACTER_REFERENCE;break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=te.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=Ai;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:case Q.EQUALS_SIGN:case Q.GRAVE_ACCENT:{this._err(Ce.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this._leaveAttrValue(),this.state=te.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._err(Ce.missingWhitespaceBetweenAttributes),this.state=te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Q.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._err(Ce.unexpectedSolidusInTag),this.state=te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.data+=Ai;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(cu.DASH_DASH,!0)?(this._createCommentToken(cu.DASH_DASH.length+1),this.state=te.COMMENT_START):this._consumeSequenceIfMatch(cu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(cu.DOCTYPE.length+1),this.state=te.DOCTYPE):this._consumeSequenceIfMatch(cu.CDATA_START,!0)?this.inForeignNode?this.state=te.CDATA_SECTION:(this._err(Ce.cdataInHtmlContent),this._createCommentToken(cu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=te.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ce.incorrectlyOpenedComment),this._createCommentToken(2),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_START_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptClosingOfEmptyComment),this.state=te.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=te.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptClosingOfEmptyComment),this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=te.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END_DASH;break}case Q.LESS_THAN_SIGN:{n.data+="<",this.state=te.COMMENT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.data+=Ai;break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Q.EXCLAMATION_MARK:{n.data+="!",this.state=te.COMMENT_LESS_THAN_SIGN_BANG;break}case Q.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=te.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Q.HYPHEN_MINUS?this.state=te.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=te.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Q.HYPHEN_MINUS?this.state=te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=te.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Q.GREATER_THAN_SIGN&&t!==Q.EOF&&this._err(Ce.nestedComment),this.state=te.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END;break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=te.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EXCLAMATION_MARK:{this.state=te.COMMENT_END_BANG;break}case Q.HYPHEN_MINUS:{n.data+="-";break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=te.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{n.data+="--!",this.state=te.COMMENT_END_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.incorrectlyClosedComment),this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=te.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Q.EOF:{this._err(Ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingWhitespaceBeforeDoctypeName),this.state=te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(RT(t))this._createDoctypeToken(String.fromCharCode(YP(t))),this.state=te.DOCTYPE_NAME;else switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._createDoctypeToken(Ai),this.state=te.DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=te.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.AFTER_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.name+=Ai;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(RT(t)?YP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(cu.PUBLIC,!1)?this.state=te.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(cu.SYSTEM,!1)?this.state=te.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ce.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(Ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.publicId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.publicId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.QUOTATION_MARK:{this._err(Ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.QUOTATION_MARK:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(Ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.systemId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.systemId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter);break}case Q.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Q.RIGHT_SQUARE_BRACKET:{this.state=te.CDATA_SECTION_BRACKET;break}case Q.EOF:{this._err(Ce.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Q.RIGHT_SQUARE_BRACKET?this.state=te.CDATA_SECTION_END:(this._emitChars("]"),this.state=te.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA;break}case Q.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=te.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Q.NUMBER_SIGN?this.state=te.NUMERIC_CHARACTER_REFERENCE:VU(t)?(this.state=te.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this.state=te.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){VU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Q.SEMICOLON&&this._err(Ce.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Q.LATIN_SMALL_X||t===Q.LATIN_CAPITAL_X?this.state=te.HEXADEMICAL_CHARACTER_REFERENCE_START:I2(t)?(this.state=te.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Q.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Abt(t)?(this.state=te.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Q.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){kPe(t)?this.charRefCode=this.charRefCode*16+t-55:RPe(t)?this.charRefCode=this.charRefCode*16+t-87:I2(t)?this.charRefCode=this.charRefCode*16+t-48:t===Q.SEMICOLON?this.state=te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ce.missingSemicolonAfterCharacterReference),this.state=te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){I2(t)?this.charRefCode=this.charRefCode*10+t-48:t===Q.SEMICOLON?this.state=te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ce.missingSemicolonAfterCharacterReference),this.state=te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Q.NULL)this._err(Ce.nullCharacterReference),this.charRefCode=Q.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ce.characterReferenceOutsideUnicodeRange),this.charRefCode=Q.REPLACEMENT_CHARACTER;else if(SPe(this.charRefCode))this._err(Ce.surrogateCharacterReference),this.charRefCode=Q.REPLACEMENT_CHARACTER;else if(CPe(this.charRefCode))this._err(Ce.noncharacterCharacterReference);else if(TPe(this.charRefCode)||this.charRefCode===Q.CARRIAGE_RETURN){this._err(Ce.controlCharacterReference);const n=Tbt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const NPe=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),Dde=new Set([...NPe,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),KP=new Map([[O.APPLET,Ne.HTML],[O.CAPTION,Ne.HTML],[O.HTML,Ne.HTML],[O.MARQUEE,Ne.HTML],[O.OBJECT,Ne.HTML],[O.TABLE,Ne.HTML],[O.TD,Ne.HTML],[O.TEMPLATE,Ne.HTML],[O.TH,Ne.HTML],[O.ANNOTATION_XML,Ne.MATHML],[O.MI,Ne.MATHML],[O.MN,Ne.MATHML],[O.MO,Ne.MATHML],[O.MS,Ne.MATHML],[O.MTEXT,Ne.MATHML],[O.DESC,Ne.SVG],[O.FOREIGN_OBJECT,Ne.SVG],[O.TITLE,Ne.SVG]]),Pbt=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],kbt=[O.TR,O.TEMPLATE,O.HTML],Rbt=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],$bt=[O.TABLE,O.TEMPLATE,O.HTML],Nbt=[O.TD,O.TH];class Dbt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ne.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ne.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Pbt,Ne.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Nbt,Ne.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo($bt,Ne.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Rbt,Ne.HTML)}clearBackToTableRowContext(){this.clearBackTo(kbt,Ne.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ne.HTML)return!0;if(KP.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(PPe(n)&&r===Ne.HTML)return!0;if(KP.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ne.HTML)return!0;if((r===O.UL||r===O.OL)&&i===Ne.HTML||KP.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ne.HTML)return!0;if(r===O.BUTTON&&i===Ne.HTML||KP.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ne.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ne.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ne.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;NPe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Dde.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Dde.has(this.currentTagId);)this.pop()}}const w9=3;var lf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(lf=lf||(lf={}));const Mde={type:lf.Marker};class Mbt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===lf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<w9)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<w9)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=w9&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Mde)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:lf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:lf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Mde);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===lf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===lf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===lf.Element&&n.element===t)}}function Lde(e){return{nodeName:"#text",value:e,parentNode:null}}const vb={createDocument(){return{nodeName:"#document",mode:cl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};vb.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(vb.isTextNode(n)){n.value+=t;return}}vb.appendChild(e,Lde(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&vb.isTextNode(r)?r.value+=t:vb.insertBefore(e,Lde(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},DPe="html",Lbt="about:legacy-compat",Fbt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",MPe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],jbt=[...MPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Bbt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LPe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],zbt=[...LPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Fde(e,t){return t.some(n=>e.startsWith(n))}function Ubt(e){return e.name===DPe&&e.publicId===null&&(e.systemId===null||e.systemId===Lbt)}function Vbt(e){if(e.name!==DPe)return cl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Fbt)return cl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Bbt.has(n))return cl.QUIRKS;let r=t===null?jbt:MPe;if(Fde(n,r))return cl.QUIRKS;if(r=t===null?LPe:zbt,Fde(n,r))return cl.LIMITED_QUIRKS}return cl.NO_QUIRKS}const jde={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Hbt="definitionurl",qbt="definitionURL",Wbt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Gbt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ne.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ne.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ne.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ne.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ne.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ne.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ne.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ne.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ne.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ne.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ne.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ne.XMLNS}]]),Ybt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Kbt=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function Xbt(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===d0.COLOR||r===d0.SIZE||r===d0.FACE)||Kbt.has(t)}function FPe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Hbt){e.attrs[t].name=qbt;break}}function jPe(e){for(let t=0;t<e.attrs.length;t++){const n=Wbt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function yK(e){for(let t=0;t<e.attrs.length;t++){const n=Gbt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Qbt(e){const t=Ybt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=bx(e.tagName))}function Jbt(e,t){return t===Ne.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function Zbt(e,t,n){if(t===Ne.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===d0.ENCODING){const i=n[r].value.toLowerCase();return i===jde.TEXT_HTML||i===jde.APPLICATION_XML}}return t===Ne.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function ewt(e,t,n,r){return(!r||r===Ne.HTML)&&Zbt(e,t,n)||(!r||r===Ne.MATHML)&&Jbt(e,t)}const twt="hidden",nwt=8,rwt=3;var se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(se||(se={}));const iwt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},BPe=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),Bde={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:vb,onParseError:null};let zde=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=se.INITIAL,this.originalInsertionMode=se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Bde,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Obt(this.options,this),this.activeFormattingElements=new Mbt(this.treeAdapter),this.fragmentContextID=r?bx(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Dbt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Bde,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Ne.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ne.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(se.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:iwt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ne.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ne.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=se.TEXT}switchToPlaintextParsing(){this.insertionMode=se.TEXT,this.originalInsertionMode=se.IN_BODY,this.tokenizer.state=us.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ne.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=us.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=us.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=us.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=us.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ne.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ne.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Ne.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Dn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ne.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ne.HTML)}_processToken(t){switch(t.type){case Dn.CHARACTER:{this.onCharacter(t);break}case Dn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Dn.COMMENT:{this.onComment(t);break}case Dn.DOCTYPE:{this.onDoctype(t);break}case Dn.START_TAG:{this._processStartTag(t);break}case Dn.END_TAG:{this.onEndTag(t);break}case Dn.EOF:{this.onEof(t);break}case Dn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return ewt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===lf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=se.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=se.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=se.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=se.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=se.IN_TABLE;return}case O.BODY:{this.insertionMode=se.IN_BODY;return}case O.FRAMESET:{this.insertionMode=se.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?se.AFTER_HEAD:se.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=se.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=se.IN_HEAD;return}break}}this.insertionMode=se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=se.IN_SELECT_IN_TABLE;return}}this.insertionMode=se.IN_SELECT}_isElementCausesFosterParenting(t){return BPe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ne.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Sbt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){NEt(this,t);return}switch(this.insertionMode){case se.INITIAL:{jS(this,t);break}case se.BEFORE_HTML:{O2(this,t);break}case se.BEFORE_HEAD:{P2(this,t);break}case se.IN_HEAD:{k2(this,t);break}case se.IN_HEAD_NO_SCRIPT:{R2(this,t);break}case se.AFTER_HEAD:{$2(this,t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:{UPe(this,t);break}case se.TEXT:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{E9(this,t);break}case se.IN_TABLE_TEXT:{YPe(this,t);break}case se.IN_COLUMN_GROUP:{d3(this,t);break}case se.AFTER_BODY:{h3(this,t);break}case se.AFTER_AFTER_BODY:{jR(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){$Et(this,t);return}switch(this.insertionMode){case se.INITIAL:{jS(this,t);break}case se.BEFORE_HTML:{O2(this,t);break}case se.BEFORE_HEAD:{P2(this,t);break}case se.IN_HEAD:{k2(this,t);break}case se.IN_HEAD_NO_SCRIPT:{R2(this,t);break}case se.AFTER_HEAD:{$2(this,t);break}case se.TEXT:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{E9(this,t);break}case se.IN_COLUMN_GROUP:{d3(this,t);break}case se.AFTER_BODY:{h3(this,t);break}case se.AFTER_AFTER_BODY:{jR(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){HU(this,t);return}switch(this.insertionMode){case se.INITIAL:case se.BEFORE_HTML:case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_TEMPLATE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{HU(this,t);break}case se.IN_TABLE_TEXT:{BS(this,t);break}case se.AFTER_BODY:{fwt(this,t);break}case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{dwt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case se.INITIAL:{hwt(this,t);break}case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:{this._err(t,Ce.misplacedDoctype);break}case se.IN_TABLE_TEXT:{BS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ce.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?DEt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{jS(this,t);break}case se.BEFORE_HTML:{pwt(this,t);break}case se.BEFORE_HEAD:{gwt(this,t);break}case se.IN_HEAD:{Wf(this,t);break}case se.IN_HEAD_NO_SCRIPT:{_wt(this,t);break}case se.AFTER_HEAD:{wwt(this,t);break}case se.IN_BODY:{Oa(this,t);break}case se.IN_TABLE:{tE(this,t);break}case se.IN_TABLE_TEXT:{BS(this,t);break}case se.IN_CAPTION:{yEt(this,t);break}case se.IN_COLUMN_GROUP:{bK(this,t);break}case se.IN_TABLE_BODY:{E4(this,t);break}case se.IN_ROW:{x4(this,t);break}case se.IN_CELL:{bEt(this,t);break}case se.IN_SELECT:{QPe(this,t);break}case se.IN_SELECT_IN_TABLE:{EEt(this,t);break}case se.IN_TEMPLATE:{SEt(this,t);break}case se.AFTER_BODY:{CEt(this,t);break}case se.IN_FRAMESET:{AEt(this,t);break}case se.AFTER_FRAMESET:{OEt(this,t);break}case se.AFTER_AFTER_BODY:{kEt(this,t);break}case se.AFTER_AFTER_FRAMESET:{REt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?MEt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{jS(this,t);break}case se.BEFORE_HTML:{mwt(this,t);break}case se.BEFORE_HEAD:{ywt(this,t);break}case se.IN_HEAD:{vwt(this,t);break}case se.IN_HEAD_NO_SCRIPT:{bwt(this,t);break}case se.AFTER_HEAD:{Ewt(this,t);break}case se.IN_BODY:{w4(this,t);break}case se.TEXT:{aEt(this,t);break}case se.IN_TABLE:{zC(this,t);break}case se.IN_TABLE_TEXT:{BS(this,t);break}case se.IN_CAPTION:{vEt(this,t);break}case se.IN_COLUMN_GROUP:{_Et(this,t);break}case se.IN_TABLE_BODY:{qU(this,t);break}case se.IN_ROW:{XPe(this,t);break}case se.IN_CELL:{wEt(this,t);break}case se.IN_SELECT:{JPe(this,t);break}case se.IN_SELECT_IN_TABLE:{xEt(this,t);break}case se.IN_TEMPLATE:{TEt(this,t);break}case se.AFTER_BODY:{eke(this,t);break}case se.IN_FRAMESET:{IEt(this,t);break}case se.AFTER_FRAMESET:{PEt(this,t);break}case se.AFTER_AFTER_BODY:{jR(this,t);break}}}onEof(t){switch(this.insertionMode){case se.INITIAL:{jS(this,t);break}case se.BEFORE_HTML:{O2(this,t);break}case se.BEFORE_HEAD:{P2(this,t);break}case se.IN_HEAD:{k2(this,t);break}case se.IN_HEAD_NO_SCRIPT:{R2(this,t);break}case se.AFTER_HEAD:{$2(this,t);break}case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{WPe(this,t);break}case se.TEXT:{uEt(this,t);break}case se.IN_TABLE_TEXT:{BS(this,t);break}case se.IN_TEMPLATE:{ZPe(this,t);break}case se.AFTER_BODY:case se.IN_FRAMESET:case se.AFTER_FRAMESET:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{_K(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Q.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.TEXT:case se.IN_COLUMN_GROUP:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{this._insertCharacters(t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:case se.AFTER_BODY:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{zPe(this,t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{E9(this,t);break}case se.IN_TABLE_TEXT:{GPe(this,t);break}}}};function swt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):qPe(e,t),n}function owt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function awt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=rwt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=uwt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function uwt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function lwt(e,t,n){const r=e.treeAdapter.getTagName(t),i=bx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===Ne.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function cwt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function vK(e,t){for(let n=0;n<nwt;n++){const r=swt(e,t);if(!r)break;const i=owt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=awt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&lwt(e,o,s),cwt(e,i,r)}}function HU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function fwt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function dwt(e,t){e._appendCommentNode(t,e.document)}function _K(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function hwt(e,t){e._setDocumentType(t);const n=t.forceQuirks?cl.QUIRKS:Vbt(t);Ubt(t)||e._err(t,Ce.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=se.BEFORE_HTML}function jS(e,t){e._err(t,Ce.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,cl.QUIRKS),e.insertionMode=se.BEFORE_HTML,e._processToken(t)}function pwt(e,t){t.tagID===O.HTML?(e._insertElement(t,Ne.HTML),e.insertionMode=se.BEFORE_HEAD):O2(e,t)}function mwt(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&O2(e,t)}function O2(e,t){e._insertFakeRootElement(),e.insertionMode=se.BEFORE_HEAD,e._processToken(t)}function gwt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.HEAD:{e._insertElement(t,Ne.HTML),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD;break}default:P2(e,t)}}function ywt(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?P2(e,t):e._err(t,Ce.endTagWithoutMatchingOpenElement)}function P2(e,t){e._insertFakeElement(we.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD,e._processToken(t)}function Wf(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,us.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,us.RAWTEXT):(e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,us.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,us.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(se.IN_TEMPLATE);break}case O.HEAD:{e._err(t,Ce.misplacedStartTagForHeadElement);break}default:k2(e,t)}}function vwt(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=se.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{k2(e,t);break}case O.TEMPLATE:{h_(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function h_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,Ce.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ce.endTagWithoutMatchingOpenElement)}function k2(e,t){e.openElements.pop(),e.insertionMode=se.AFTER_HEAD,e._processToken(t)}function _wt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{Wf(e,t);break}case O.NOSCRIPT:{e._err(t,Ce.nestedNoscriptInHead);break}default:R2(e,t)}}function bwt(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=se.IN_HEAD;break}case O.BR:{R2(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function R2(e,t){const n=t.type===Dn.EOF?Ce.openElementsLeftAfterEof:Ce.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=se.IN_HEAD,e._processToken(t)}function wwt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.BODY:{e._insertElement(t,Ne.HTML),e.framesetOk=!1,e.insertionMode=se.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,Ce.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),Wf(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,Ce.misplacedStartTagForHeadElement);break}default:$2(e,t)}}function Ewt(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{$2(e,t);break}case O.TEMPLATE:{h_(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function $2(e,t){e._insertFakeElement(we.BODY,O.BODY),e.insertionMode=se.IN_BODY,b4(e,t)}function b4(e,t){switch(t.type){case Dn.CHARACTER:{UPe(e,t);break}case Dn.WHITESPACE_CHARACTER:{zPe(e,t);break}case Dn.COMMENT:{HU(e,t);break}case Dn.START_TAG:{Oa(e,t);break}case Dn.END_TAG:{w4(e,t);break}case Dn.EOF:{WPe(e,t);break}}}function zPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function UPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function xwt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Swt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Twt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_FRAMESET)}function Cwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML)}function Awt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),PPe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ne.HTML)}function Iwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Owt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),n||(e.formElement=e.openElements.current))}function Pwt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML)}function kwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),e.tokenizer.state=us.PLAINTEXT}function Rwt(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.framesetOk=!1}function $wt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(vK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Nwt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Dwt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(vK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ne.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Mwt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Lwt(e,t){e.treeAdapter.getDocumentMode(e.document)!==cl.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),e.framesetOk=!1,e.insertionMode=se.IN_TABLE}function VPe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ne.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function HPe(e){const t=APe(e,d0.TYPE);return t!=null&&t.toLowerCase()===twt}function Fwt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ne.HTML),HPe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function jwt(e,t){e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0}function Bwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,Ne.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function zwt(e,t){t.tagName=we.IMG,t.tagID=O.IMG,VPe(e,t)}function Uwt(e,t){e._insertElement(t,Ne.HTML),e.skipNextNewLine=!0,e.tokenizer.state=us.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=se.TEXT}function Vwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function Hwt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function Ude(e,t){e._switchToTextParsing(t,us.RAWTEXT)}function qwt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===se.IN_TABLE||e.insertionMode===se.IN_CAPTION||e.insertionMode===se.IN_TABLE_BODY||e.insertionMode===se.IN_ROW||e.insertionMode===se.IN_CELL?se.IN_SELECT_IN_TABLE:se.IN_SELECT}function Wwt(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML)}function Gwt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ne.HTML)}function Ywt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,Ne.HTML)}function Kwt(e,t){e._reconstructActiveFormattingElements(),FPe(t),yK(t),t.selfClosing?e._appendElement(t,Ne.MATHML):e._insertElement(t,Ne.MATHML),t.ackSelfClosing=!0}function Xwt(e,t){e._reconstructActiveFormattingElements(),jPe(t),yK(t),t.selfClosing?e._appendElement(t,Ne.SVG):e._insertElement(t,Ne.SVG),t.ackSelfClosing=!0}function Vde(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML)}function Oa(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{Nwt(e,t);break}case O.A:{$wt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{Awt(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{Cwt(e,t);break}case O.LI:case O.DD:case O.DT:{Pwt(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{VPe(e,t);break}case O.HR:{Bwt(e,t);break}case O.RB:case O.RTC:{Gwt(e,t);break}case O.RT:case O.RP:{Ywt(e,t);break}case O.PRE:case O.LISTING:{Iwt(e,t);break}case O.XMP:{Vwt(e,t);break}case O.SVG:{Xwt(e,t);break}case O.HTML:{xwt(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{Wf(e,t);break}case O.BODY:{Swt(e,t);break}case O.FORM:{Owt(e,t);break}case O.NOBR:{Dwt(e,t);break}case O.MATH:{Kwt(e,t);break}case O.TABLE:{Lwt(e,t);break}case O.INPUT:{Fwt(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{jwt(e,t);break}case O.IMAGE:{zwt(e,t);break}case O.BUTTON:{Rwt(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{Mwt(e,t);break}case O.IFRAME:{Hwt(e,t);break}case O.SELECT:{qwt(e,t);break}case O.OPTION:case O.OPTGROUP:{Wwt(e,t);break}case O.NOEMBED:{Ude(e,t);break}case O.FRAMESET:{Twt(e,t);break}case O.TEXTAREA:{Uwt(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?Ude(e,t):Vde(e,t);break}case O.PLAINTEXT:{kwt(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:Vde(e,t)}}function Qwt(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Jwt(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=se.AFTER_BODY,eke(e,t))}function Zwt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function eEt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function tEt(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(we.P,O.P),e._closePElement()}function nEt(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function rEt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function iEt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function sEt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function oEt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function qPe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function w4(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{vK(e,t);break}case O.P:{tEt(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{Zwt(e,t);break}case O.LI:{nEt(e);break}case O.DD:case O.DT:{rEt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{iEt(e);break}case O.BR:{oEt(e);break}case O.BODY:{Qwt(e,t);break}case O.HTML:{Jwt(e,t);break}case O.FORM:{eEt(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{sEt(e,t);break}case O.TEMPLATE:{h_(e,t);break}default:qPe(e,t)}}function WPe(e,t){e.tmplInsertionModeStack.length>0?ZPe(e,t):_K(e,t)}function aEt(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function uEt(e,t){e._err(t,Ce.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function E9(e,t){if(BPe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=se.IN_TABLE_TEXT,t.type){case Dn.CHARACTER:{YPe(e,t);break}case Dn.WHITESPACE_CHARACTER:{GPe(e,t);break}}else SI(e,t)}function lEt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_CAPTION}function cEt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_COLUMN_GROUP}function fEt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,O.COLGROUP),e.insertionMode=se.IN_COLUMN_GROUP,bK(e,t)}function dEt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_TABLE_BODY}function hEt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,O.TBODY),e.insertionMode=se.IN_TABLE_BODY,E4(e,t)}function pEt(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function mEt(e,t){HPe(t)?e._appendElement(t,Ne.HTML):SI(e,t),t.ackSelfClosing=!0}function gEt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ne.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function tE(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{hEt(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{Wf(e,t);break}case O.COL:{fEt(e,t);break}case O.FORM:{gEt(e,t);break}case O.TABLE:{pEt(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{dEt(e,t);break}case O.INPUT:{mEt(e,t);break}case O.CAPTION:{lEt(e,t);break}case O.COLGROUP:{cEt(e,t);break}default:SI(e,t)}}function zC(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{h_(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:SI(e,t)}}function SI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,b4(e,t),e.fosterParentingEnabled=n}function GPe(e,t){e.pendingCharacterTokens.push(t)}function YPe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function BS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)SI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const KPe=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function yEt(e,t){const n=t.tagID;KPe.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,tE(e,t)):Oa(e,t)}function vEt(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,n===O.TABLE&&zC(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:w4(e,t)}}function bK(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.COL:{e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{Wf(e,t);break}default:d3(e,t)}}function _Et(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case O.TEMPLATE:{h_(e,t);break}case O.COL:break;default:d3(e,t)}}function d3(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE,e._processToken(t))}function E4(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,O.TR),e.insertionMode=se.IN_ROW,x4(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,tE(e,t));break}default:tE(e,t)}}function qU(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,zC(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:zC(e,t)}}function x4(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,E4(e,t));break}default:tE(e,t)}}function XPe(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,qU(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,qU(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:zC(e,t)}}function bEt(e,t){const n=t.tagID;KPe.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),x4(e,t)):Oa(e,t)}function wEt(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),XPe(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:w4(e,t)}}function QPe(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,Ne.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ne.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{Wf(e,t);break}}}function JPe(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{h_(e,t);break}}}function EEt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):QPe(e,t)}function xEt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):JPe(e,t)}function SEt(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{Wf(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=se.IN_TABLE,e.insertionMode=se.IN_TABLE,tE(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=se.IN_COLUMN_GROUP,e.insertionMode=se.IN_COLUMN_GROUP,bK(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=se.IN_TABLE_BODY,e.insertionMode=se.IN_TABLE_BODY,E4(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=se.IN_ROW,e.insertionMode=se.IN_ROW,x4(e,t);break}default:e.tmplInsertionModeStack[0]=se.IN_BODY,e.insertionMode=se.IN_BODY,Oa(e,t)}}function TEt(e,t){t.tagID===O.TEMPLATE&&h_(e,t)}function ZPe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):_K(e,t)}function CEt(e,t){t.tagID===O.HTML?Oa(e,t):h3(e,t)}function eke(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else h3(e,t)}function h3(e,t){e.insertionMode=se.IN_BODY,b4(e,t)}function AEt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.FRAMESET:{e._insertElement(t,Ne.HTML);break}case O.FRAME:{e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{Wf(e,t);break}}}function IEt(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=se.AFTER_FRAMESET))}function OEt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.NOFRAMES:{Wf(e,t);break}}}function PEt(e,t){t.tagID===O.HTML&&(e.insertionMode=se.AFTER_AFTER_FRAMESET)}function kEt(e,t){t.tagID===O.HTML?Oa(e,t):jR(e,t)}function jR(e,t){e.insertionMode=se.IN_BODY,b4(e,t)}function REt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.NOFRAMES:{Wf(e,t);break}}}function $Et(e,t){t.chars=Ai,e._insertCharacters(t)}function NEt(e,t){e._insertCharacters(t),e.framesetOk=!1}function tke(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ne.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function DEt(e,t){if(Xbt(t))tke(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ne.MATHML?FPe(t):r===Ne.SVG&&(Qbt(t),jPe(t)),yK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function MEt(e,t){if(t.tagID===O.P||t.tagID===O.BR){tke(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ne.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const nke=rke("end"),p_=rke("start");function rke(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const ike=function(e){if(e==null)return BEt;if(typeof e=="function")return S4(e);if(typeof e=="object")return Array.isArray(e)?LEt(e):FEt(e);if(typeof e=="string")return jEt(e);throw new Error("Expected function, string, or object as test")};function LEt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ike(e[n]);return S4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function FEt(e){const t=e;return S4(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function jEt(e){return S4(t);function t(n){return n&&n.type===e}}function S4(e){return t;function t(n,r,i){return!!(zEt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function BEt(){return!0}function zEt(e){return e!==null&&typeof e=="object"&&"type"in e}const ske=[],UEt=!0,Hde=!1,VEt="skip";function HEt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ike(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=ske,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=qEt(n(u,c)),h[0]===Hde))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==VEt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Hde)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function qEt(e){return Array.isArray(e)?e:typeof e=="number"?[UEt,e]:e==null?ske:[e]}function WEt(e,t,n,r){let i,s,o;s=t,o=n,i=r,HEt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const GEt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),qde={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function oke(e,t){const n=rxt(e),r=EPe("type",{handlers:{root:YEt,element:KEt,text:XEt,comment:uke,doctype:QEt,raw:ZEt},unknown:ext}),i={parser:n?new zde(qde):zde.getFragmentParser(void 0,qde),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),wx(i,p_());const s=n?i.parser.document:i.parser.getFragment(),o=K_t(s,{file:i.options.file});return i.stitches&&WEt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function ake(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function YEt(e,t){ake(e.children,t)}function KEt(e,t){txt(e,t),ake(e.children,t),nxt(e,t)}function XEt(e,t){const n={type:Dn.CHARACTER,chars:e.value,location:TI(e)};wx(t,p_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function QEt(e,t){const n={type:Dn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:TI(e)};wx(t,p_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function JEt(e,t){t.stitches=!0;const n=ixt(e);if("children"in e&&"children"in n){const r=oke({type:"root",children:e.children},t.options);n.children=r.children}uke({type:"comment",value:{stitch:n}},t)}function uke(e,t){const n=e.value,r={type:Dn.COMMENT,data:n,location:TI(e)};wx(t,p_(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function ZEt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,lke(t,p_(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function ext(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))JEt(n,t);else{let r="";throw GEt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function wx(e,t){lke(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=us.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function lke(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function txt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===us.PLAINTEXT)return;wx(t,p_(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Mv.html;i===Mv.html&&n==="svg"&&(i=Mv.svg);const s=ebt({...e,children:[]},{space:i===Mv.svg?"svg":"html"}),o={type:Dn.START_TAG,tagName:n,tagID:bx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:TI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function nxt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&ubt.includes(n)||t.parser.tokenizer.state===us.PLAINTEXT)return;wx(t,nke(e));const r={type:Dn.END_TAG,tagName:n,tagID:bx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:TI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===us.RCDATA||t.parser.tokenizer.state===us.RAWTEXT||t.parser.tokenizer.state===us.SCRIPT_DATA)&&(t.parser.tokenizer.state=us.DATA)}function rxt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function TI(e){const t=p_(e)||{line:void 0,column:void 0,offset:void 0},n=nke(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function ixt(e){return"children"in e?Ode({...e,children:[]}):Ode(e)}function sxt(e){return function(t,n){return oke(t,{...e,file:n})}}function Ka({text:e,required:t}){const n={img:({node:i,...s})=>$.jsx(f_,{...s}),p:({node:i,...s})=>$.jsx(dt,{...s,pb:8}),h1:({node:i,...s})=>$.jsx(ca,{order:1,...s,pb:12}),h2:({node:i,...s})=>$.jsx(ca,{order:2,...s,pb:12}),h3:({node:i,...s})=>$.jsx(ca,{order:3,...s,pb:12}),h4:({node:i,...s})=>$.jsx(ca,{order:4,...s,pb:12}),h5:({node:i,...s})=>$.jsx(ca,{order:5,...s,pb:12}),h6:({node:i,...s})=>$.jsx(ca,{order:6,...s,pb:12}),a:({node:i,...s})=>$.jsx(dI,{...s}),ul:({node:i,...s})=>$.jsx(n1,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>$.jsx(n1,{type:"ordered",withPadding:!0,...s,pb:8})};return $.jsx(mPe,{components:n,rehypePlugins:[sxt],children:e+(t?' <span style="color: #fa5252">*</span>':"")})}function cke({errors:e}){const t=`
      There was an issue loading the study config. Please check the following errors:  

      ${e.map(n=>`- You have an error at ${n.instancePath||"root"}: ${n.message} - ${JSON.stringify(n.params)}  `).join(`
`)}
    `.replace(/\n\s+/g,`
`);return $.jsx(Ka,{text:t})}const oxt="https://github.com/revisit-studies/study/tree/main/public/";function axt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=kc();return $.jsxs(Dm,{size:"xs",px:"xs",style:{marginTop:60,marginBottom:60},children:[$.jsx(f_,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Nc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),$.jsx(dt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=JY(i);return $.jsx(_y,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:$.jsx(i4,{shadow:"sm",radius:"md",withBorder:!0,children:s.errors?$.jsxs($.Fragment,{children:[$.jsxs(vi,{align:"center",direction:"row",children:[$.jsx(Jgt,{color:"red"}),$.jsx(dt,{fw:"bold",ml:8,color:"red",children:i})]}),$.jsx(cke,{errors:s.errors})]}):$.jsxs($.Fragment,{children:[$.jsx(dt,{fw:"bold",children:s.studyMetadata.title}),$.jsx(dt,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),$.jsx(dt,{c:"dimmed",children:s.studyMetadata.description}),$.jsx(dt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:$.jsxs(dI,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${oxt}${o}`,children:["View source:"," ",o]})})]})})},i)})]})}var fke={exports:{}},dke={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE=C;function uxt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lxt=typeof Object.is=="function"?Object.is:uxt,cxt=nE.useState,fxt=nE.useEffect,dxt=nE.useLayoutEffect,hxt=nE.useDebugValue;function pxt(e,t){var n=t(),r=cxt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return dxt(function(){i.value=n,i.getSnapshot=t,x9(i)&&s({inst:i})},[e,n,t]),fxt(function(){return x9(i)&&s({inst:i}),e(function(){x9(i)&&s({inst:i})})},[e]),hxt(n),n}function x9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lxt(e,n)}catch{return!0}}function mxt(e,t){return t()}var gxt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mxt:pxt;dke.useSyncExternalStore=nE.useSyncExternalStore!==void 0?nE.useSyncExternalStore:gxt;fke.exports=dke;var yxt=fke.exports,hke={exports:{}},pke={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4=C,vxt=yxt;function _xt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bxt=typeof Object.is=="function"?Object.is:_xt,wxt=vxt.useSyncExternalStore,Ext=T4.useRef,xxt=T4.useEffect,Sxt=T4.useMemo,Txt=T4.useDebugValue;pke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Ext(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Sxt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,bxt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=wxt(e,s[0],s[1]);return xxt(function(){o.hasValue=!0,o.value=a},[a]),Txt(a),a};hke.exports=pke;var Cxt=hke.exports;function Axt(e){e()}let mke=Axt;const Ixt=e=>mke=e,Oxt=()=>mke,Wde=Symbol.for("react-redux-context"),Gde=typeof globalThis<"u"?globalThis:{};function Pxt(){var e;if(!C.createContext)return{};const t=(e=Gde[Wde])!=null?e:Gde[Wde]=new Map;let n=t.get(C.createContext);return n||(n=C.createContext(null),t.set(C.createContext,n)),n}const $0=Pxt();function wK(e=$0){return function(){return C.useContext(e)}}const gke=wK(),kxt=()=>{throw new Error("uSES not initialized!")};let yke=kxt;const Rxt=e=>{yke=e},$xt=(e,t)=>e===t;function Nxt(e=$0){const t=e===$0?gke:wK(e);return function(r,i={}){const{equalityFn:s=$xt,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:l,getServerState:c,stabilityCheck:f,noopCheck:d}=t();C.useRef(!0);const h=C.useCallback({[r.name](m){return r(m)}}[r.name],[r,f,o]),p=yke(l.addNestedSub,u.getState,c||u.getState,h,s);return C.useDebugValue(p),p}}const Dxt=Nxt();var Xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EK=Symbol.for("react.element"),xK=Symbol.for("react.portal"),C4=Symbol.for("react.fragment"),A4=Symbol.for("react.strict_mode"),I4=Symbol.for("react.profiler"),O4=Symbol.for("react.provider"),P4=Symbol.for("react.context"),Mxt=Symbol.for("react.server_context"),k4=Symbol.for("react.forward_ref"),R4=Symbol.for("react.suspense"),$4=Symbol.for("react.suspense_list"),N4=Symbol.for("react.memo"),D4=Symbol.for("react.lazy"),Lxt=Symbol.for("react.offscreen"),vke;vke=Symbol.for("react.module.reference");function jc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case EK:switch(e=e.type,e){case C4:case I4:case A4:case R4:case $4:return e;default:switch(e=e&&e.$$typeof,e){case Mxt:case P4:case k4:case D4:case N4:case O4:return e;default:return t}}case xK:return t}}}Xr.ContextConsumer=P4;Xr.ContextProvider=O4;Xr.Element=EK;Xr.ForwardRef=k4;Xr.Fragment=C4;Xr.Lazy=D4;Xr.Memo=N4;Xr.Portal=xK;Xr.Profiler=I4;Xr.StrictMode=A4;Xr.Suspense=R4;Xr.SuspenseList=$4;Xr.isAsyncMode=function(){return!1};Xr.isConcurrentMode=function(){return!1};Xr.isContextConsumer=function(e){return jc(e)===P4};Xr.isContextProvider=function(e){return jc(e)===O4};Xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===EK};Xr.isForwardRef=function(e){return jc(e)===k4};Xr.isFragment=function(e){return jc(e)===C4};Xr.isLazy=function(e){return jc(e)===D4};Xr.isMemo=function(e){return jc(e)===N4};Xr.isPortal=function(e){return jc(e)===xK};Xr.isProfiler=function(e){return jc(e)===I4};Xr.isStrictMode=function(e){return jc(e)===A4};Xr.isSuspense=function(e){return jc(e)===R4};Xr.isSuspenseList=function(e){return jc(e)===$4};Xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===C4||e===I4||e===A4||e===R4||e===$4||e===Lxt||typeof e=="object"&&e!==null&&(e.$$typeof===D4||e.$$typeof===N4||e.$$typeof===O4||e.$$typeof===P4||e.$$typeof===k4||e.$$typeof===vke||e.getModuleId!==void 0)};Xr.typeOf=jc;function Fxt(){const e=Oxt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const Yde={notify(){},get:()=>[]};function jxt(e,t){let n,r=Yde,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Fxt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Yde)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const Bxt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zxt=Bxt?C.useLayoutEffect:C.useEffect;function Uxt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=C.useMemo(()=>{const l=jxt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),a=C.useMemo(()=>e.getState(),[e]);zxt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||$0;return C.createElement(u.Provider,{value:o},n)}function _ke(e=$0){const t=e===$0?gke:wK(e);return function(){const{store:r}=t();return r}}const Vxt=_ke();function Hxt(e=$0){const t=e===$0?Vxt:_ke(e);return function(){return t().dispatch}}const bke=Hxt();Rxt(Cxt.useSyncExternalStoreWithSelector);Ixt(aI.unstable_batchedUpdates);function SK(){const{studyId:e}=um();return`${e}`}function Fh(){const{index:e}=um();return parseInt(e||"0",10)}function ff(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function N0(e){return!!e&&!!e[Pi]}function fm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Zxt}(e)||Array.isArray(e)||!!e[the]||!!(!((t=e.constructor)===null||t===void 0)&&t[the])||TK(e)||CK(e))}function x1(e,t,n){n===void 0&&(n=!1),Ex(e)===0?(n?Object.keys:mw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ex(e){var t=e[Pi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:TK(e)?2:CK(e)?3:0}function pw(e,t){return Ex(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qxt(e,t){return Ex(e)===2?e.get(t):e[t]}function wke(e,t,n){var r=Ex(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Eke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function TK(e){return Qxt&&e instanceof Map}function CK(e){return Jxt&&e instanceof Set}function av(e){return e.o||e.t}function AK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ske(e);delete t[Pi];for(var n=mw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function IK(e,t){return t===void 0&&(t=!1),OK(e)||N0(e)||!fm(e)||(Ex(e)>1&&(e.set=e.add=e.clear=e.delete=Wxt),Object.freeze(e),t&&x1(e,function(n,r){return IK(r,!0)},!0)),e}function Wxt(){ff(2)}function OK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Zd(e){var t=KU[e];return t||ff(18,e),t}function Gxt(e,t){KU[e]||(KU[e]=t)}function WU(){return UC}function S9(e,t){t&&(Zd("Patches"),e.u=[],e.s=[],e.v=t)}function p3(e){GU(e),e.p.forEach(Yxt),e.p=null}function GU(e){e===UC&&(UC=e.l)}function Kde(e){return UC={p:[],l:UC,h:e,m:!0,_:0}}function Yxt(e){var t=e[Pi];t.i===0||t.i===1?t.j():t.g=!0}function T9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Zd("ES5").S(t,e,r),r?(n[Pi].P&&(p3(t),ff(4)),fm(e)&&(e=m3(t,e),t.l||g3(t,e)),t.u&&Zd("Patches").M(n[Pi].t,e,t.u,t.s)):e=m3(t,n,[]),p3(t),t.u&&t.v(t.u,t.s),e!==xke?e:void 0}function m3(e,t,n){if(OK(t))return t;var r=t[Pi];if(!r)return x1(t,function(a,u){return Xde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return g3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=AK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),x1(s,function(a,u){return Xde(e,r,i,a,u,n,o)}),g3(e,i,!1),n&&e.u&&Zd("Patches").N(r,n,e.u,e.s)}return r.o}function Xde(e,t,n,r,i,s,o){if(N0(i)){var a=m3(e,i,s&&t&&t.i!==3&&!pw(t.R,r)?s.concat(r):void 0);if(wke(n,r,a),!N0(a))return;e.m=!1}else o&&n.add(i);if(fm(i)&&!OK(i)){if(!e.h.D&&e._<1)return;m3(e,i),t&&t.A.l||g3(e,i)}}function g3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&IK(t,n)}function C9(e,t){var n=e[Pi];return(n?av(n):e)[t]}function Qde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $g(e){e.P||(e.P=!0,e.l&&$g(e.l))}function A9(e){e.o||(e.o=AK(e.t))}function YU(e,t,n){var r=TK(t)?Zd("MapSet").F(t,n):CK(t)?Zd("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:WU(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=VC;o&&(u=[a],l=$T);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Zd("ES5").J(t,n);return(n?n.A:WU()).p.push(r),r}function Kxt(e){return N0(e)||ff(22,e),function t(n){if(!fm(n))return n;var r,i=n[Pi],s=Ex(n);if(i){if(!i.P&&(i.i<4||!Zd("ES5").K(i)))return i.t;i.I=!0,r=Jde(n,s),i.I=!1}else r=Jde(n,s);return x1(r,function(o,a){i&&qxt(i.t,o)===a||wke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Jde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return AK(e)}function Xxt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Pi];return VC.get(u,s)},set:function(u){var l=this[Pi];VC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Pi];if(!a.P)switch(a.i){case 5:r(a)&&$g(a);break;case 4:n(a)&&$g(a)}}}function n(s){for(var o=s.t,a=s.k,u=mw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Pi){var f=o[c];if(f===void 0&&!pw(o,c))return!0;var d=a[c],h=d&&d[Pi];if(h?h.t!==f:!Eke(d,f))return!0}}var p=!!o[Pi];return u.length!==mw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Gxt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Ske(f);delete p[Pi];for(var m=mw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:WU(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Pi,{value:l,writable:!0}),u},S:function(s,o,a){a?N0(o)&&o[Pi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Pi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)x1(d,function(_){_!==Pi&&(f[_]!==void 0||pw(f,_)?h[_]||u(d[_]):(h[_]=!0,$g(c)))}),x1(f,function(_){d[_]!==void 0||pw(d,_)||(h[_]=!1,$g(c))});else if(p===5){if(r(c)&&($g(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Zde,UC,PK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Qxt=typeof Map<"u",Jxt=typeof Set<"u",ehe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",xke=PK?Symbol.for("immer-nothing"):((Zde={})["immer-nothing"]=!0,Zde),the=PK?Symbol.for("immer-draftable"):"__$immer_draftable",Pi=PK?Symbol.for("immer-state"):"__$immer_state",Zxt=""+Object.prototype.constructor,mw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ske=Object.getOwnPropertyDescriptors||function(e){var t={};return mw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},KU={},VC={get:function(e,t){if(t===Pi)return e;var n=av(e);if(!pw(n,t))return function(i,s,o){var a,u=Qde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!fm(r)?r:r===C9(e.t,t)?(A9(e),e.o[t]=YU(e.A.h,r,e)):r},has:function(e,t){return t in av(e)},ownKeys:function(e){return Reflect.ownKeys(av(e))},set:function(e,t,n){var r=Qde(av(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=C9(av(e),t),s=i==null?void 0:i[Pi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Eke(n,i)&&(n!==void 0||pw(e.t,t)))return!0;A9(e),$g(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return C9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,A9(e),$g(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=av(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ff(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ff(12)}},$T={};x1(VC,function(e,t){$T[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),$T.deleteProperty=function(e,t){return $T.set.call(this,e,t,void 0)},$T.set=function(e,t,n){return VC.set.call(this,e[0],t,n,e[0])};var eSt=function(){function e(n){var r=this;this.O=ehe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(v))})}}var l;if(typeof s!="function"&&ff(6),o!==void 0&&typeof o!="function"&&ff(7),fm(i)){var c=Kde(r),f=YU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?p3(c):GU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return S9(c,o),T9(m,c)},function(m){throw p3(c),m}):(S9(c,o),T9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===xke&&(l=void 0),r.D&&IK(l,!0),o){var h=[],p=[];Zd("Patches").M(i,l,h,p),o(h,p)}return l}ff(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){fm(n)||ff(8),N0(n)&&(n=Kxt(n));var r=Kde(this),i=YU(this,n,void 0);return i[Pi].C=!0,GU(r),i},t.finishDraft=function(n,r){var i=n&&n[Pi],s=i.A;return S9(s,r),T9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!ehe&&ff(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Zd("Patches").$;return N0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Pl=new eSt,tSt=Pl.produce;Pl.produceWithPatches.bind(Pl);Pl.setAutoFreeze.bind(Pl);Pl.setUseProxies.bind(Pl);Pl.applyPatches.bind(Pl);Pl.createDraft.bind(Pl);Pl.finishDraft.bind(Pl);const Tke=tSt;function HC(e){"@babel/helpers - typeof";return HC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HC(e)}function nSt(e,t){if(HC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(HC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rSt(e){var t=nSt(e,"string");return HC(t)=="symbol"?t:t+""}function iSt(e,t,n){return(t=rSt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function rhe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nhe(Object(n),!0).forEach(function(r){iSt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nhe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ia(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ihe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),I9=function(){return Math.random().toString(36).substring(7).split("").join(".")},y3={INIT:"@@redux/INIT"+I9(),REPLACE:"@@redux/REPLACE"+I9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+I9()}};function sSt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Cke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ia(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ia(1));return n(Cke)(e,t)}if(typeof e!="function")throw new Error(ia(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ia(3));return s}function f(m){if(typeof m!="function")throw new Error(ia(4));if(u)throw new Error(ia(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ia(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!sSt(m))throw new Error(ia(7));if(typeof m.type>"u")throw new Error(ia(8));if(u)throw new Error(ia(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ia(10));i=m,d({type:y3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ia(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[ihe]=function(){return this},m}return d({type:y3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[ihe]=p,r}function oSt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:y3.INIT});if(typeof r>"u")throw new Error(ia(12));if(typeof n(void 0,{type:y3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ia(13))})}function aSt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{oSt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ia(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function v3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function uSt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ia(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=v3.apply(void 0,a)(i.dispatch),rhe(rhe({},i),{},{dispatch:s})}}}function Ake(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var XU=Ake();XU.withExtraArgument=Ake;var Ike=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},S1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},lSt=Object.defineProperty,cSt=Object.defineProperties,fSt=Object.getOwnPropertyDescriptors,she=Object.getOwnPropertySymbols,dSt=Object.prototype.hasOwnProperty,hSt=Object.prototype.propertyIsEnumerable,ohe=function(e,t,n){return t in e?lSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},h0=function(e,t){for(var n in t||(t={}))dSt.call(t,n)&&ohe(e,n,t[n]);if(she)for(var r=0,i=she(t);r<i.length;r++){var n=i[r];hSt.call(t,n)&&ohe(e,n,t[n])}return e},O9=function(e,t){return cSt(e,fSt(t))},AI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},pSt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?v3:v3.apply(null,arguments)};function Oke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var mSt=function(e){return e&&typeof e.match=="function"};function eh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return h0(h0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function gSt(e){return Oke(e)&&"type"in e}var ySt=function(e){Ike(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,S1([void 0],n[0].concat(this)))):new(t.bind.apply(t,S1([void 0],n.concat(this))))},t}(Array),vSt=function(e){Ike(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,S1([void 0],n[0].concat(this)))):new(t.bind.apply(t,S1([void 0],n.concat(this))))},t}(Array);function QU(e){return fm(e)?Tke(e,function(){}):e}function _St(e){return typeof e=="boolean"}function bSt(){return function(t){return wSt(t)}}function wSt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new ySt;return n&&(_St(n)?r.push(XU):r.push(XU.withExtraArgument(n.extraArgument))),r}var ESt=!0;function Pke(e){var t=bSt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Oke(i))h=aSt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=uSt.apply(void 0,p),g=v3;u&&(g=pSt(h0({trace:!ESt},typeof u=="object"&&u)));var y=new vSt(m),v=y;Array.isArray(d)?v=S1([m],d):typeof d=="function"&&(v=d(y));var _=g.apply(void 0,v);return Cke(h,c,_)}function kke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function xSt(e){return typeof e=="function"}function SSt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?kke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(xSt(e))u=function(){return QU(e())};else{var l=QU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=S1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(N0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(fm(p))return Tke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function TSt(e,t){return e+"/"+t}function Rke(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:QU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=TSt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?eh(d,p):eh(d)});function u(){var c=typeof e.extraReducers=="function"?kke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=h0(h0({},d),o);return SSt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,S=p;w<S.length;w++){var x=S[w];v.addMatcher(x.matcher,x.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var CSt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$ke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=CSt[Math.random()*64|0];return t},ASt=["name","message","stack","code"],P9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),ahe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),ISt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=ASt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=eh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:O9(h0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=eh(t+"/pending",function(l,c,f){return{payload:void 0,meta:O9(h0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=eh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||ISt)(l||"Rejected"),meta:O9(h0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):$ke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return AI(this,null,function(){var v,_,w,S,x,b,T;return CI(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),S=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),PSt(S)?[4,S]:[3,2];case 1:S=A.sent(),A.label=2;case 2:if(S===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return x=new Promise(function(I,k){return p.signal.addEventListener("abort",function(){return k({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([x,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,k){return new P9(I,k)},fulfillWithValue:function(I,k){return new ahe(I,k)}})).then(function(I){if(I instanceof P9)throw I;return I instanceof ahe?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return b=A.sent(),w=b instanceof P9?o(null,h,l,b.payload,b.meta):o(b,h,l),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,T||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(OSt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function OSt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function PSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var kSt=function(e,t){return mSt(e)?e.match(t):e(t)};function uhe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return kSt(r,n)})}}var kK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},JU=function(){},Nke=function(e,t){return t===void 0&&(t=JU),e.catch(t),e},Dke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},gw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},RSt="task",Mke="listener",Lke="completed",RK="cancelled",$St="task-"+RK,NSt="task-"+Lke,Fke=Mke+"-"+RK,DSt=Mke+"-"+Lke,M4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=RSt+" "+RK+" (reason: "+t+")"}return e}(),yw=function(e){if(e.aborted)throw new M4(e.reason)};function jke(e,t){var n=JU;return new Promise(function(r,i){var s=function(){return i(new M4(e.reason))};if(e.aborted){s();return}n=Dke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=JU})}var MSt=function(e,t){return AI(void 0,null,function(){var n,r;return CI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof M4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},_3=function(e){return function(t){return Nke(jke(e,t).then(function(n){return yw(e),n}))}},Bke=function(e){var t=_3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},LSt=Object.assign,lhe={},II="listenerMiddleware",FSt=function(e,t){var n=function(r){return Dke(e,function(){return gw(r,e.reason)})};return function(r,i){kK(r,"taskExecutor");var s=new AbortController;n(s);var o=MSt(function(){return AI(void 0,null,function(){var a;return CI(this,function(u){switch(u.label){case 0:return yw(e),yw(s.signal),[4,r({pause:_3(s.signal),delay:Bke(s.signal),signal:s.signal})];case 1:return a=u.sent(),yw(s.signal),[2,a]}})})},function(){return gw(s,NSt)});return i!=null&&i.autoJoin&&t.push(o),{result:_3(e)(o),cancel:function(){gw(s,$St)}}}},jSt=function(e,t){var n=function(r,i){return AI(void 0,null,function(){var s,o,a,u;return CI(this,function(l){switch(l.label){case 0:yw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,jke(t,Promise.race(a))];case 2:return u=l.sent(),yw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Nke(n(r,i))}},zke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=eh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return kK(s,"options.listener"),{predicate:i,type:t,effect:s}},BSt=function(e){var t=zke(e),n=t.type,r=t.predicate,i=t.effect,s=$ke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},ZU=function(e){e.pending.forEach(function(t){gw(t,Fke)})},zSt=function(e){return function(){e.forEach(ZU),e.clear()}},che=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},USt=eh(II+"/add"),VSt=eh(II+"/removeAll"),HSt=eh(II+"/remove"),qSt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,S1([II+"/error"],e))};function WSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?qSt:i;kK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&ZU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=BSt(h)),o(p)},l=function(h){var p=zke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&ZU(v)),!!v},c=function(h,p,m,g){return AI(t,null,function(){var y,v,_,w;return CI(this,function(S){switch(S.label){case 0:y=new AbortController,v=jSt(u,y.signal),_=[],S.label=1;case 1:return S.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,LSt({},m,{getOriginalState:g,condition:function(x,b){return v(x,b).then(Boolean)},take:v,delay:Bke(y.signal),pause:_3(y.signal),extra:r,signal:y.signal,fork:FSt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,b,T){x!==y&&(gw(x,Fke),T.delete(x))})}})))];case 2:return S.sent(),[3,6];case 3:return w=S.sent(),w instanceof M4||che(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return S.sent(),gw(y,DSt),h.pending.delete(y),[7];case 6:return[2]}})})},f=zSt(n),d=function(h){return function(p){return function(m){if(!gSt(m))return p(m);if(USt.match(m))return u(m.payload);if(VSt.match(m)){f();return}if(HSt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===lhe)throw new Error(II+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),S=0,x=w;S<x.length;S++){var b=x[S],T=!1;try{T=b.predicate(m,_,g)}catch(A){T=!1,che(s,A,{raisedBy:"predicate"})}T&&c(b,m,h,y)}}finally{g=lhe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var fhe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Xxt();var yi={};function GSt(e){return!!(e&&typeof e.then=="function")}function b3(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function YSt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function L4(){return Math.random().toString(36).substring(2)}var dhe=0,k9=0;function F4(){var e=new Date().getTime();return e===dhe?(k9++,e*1e3+k9):(dhe=e,k9=0,e*1e3)}var OI=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",KSt=F4,XSt="native";function QSt(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function JSt(e){e.bc.close(),e.subFns=[]}function ZSt(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function eTt(e,t){e.messagesCallback=t}function tTt(){if(OI&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function nTt(){return 150}const rTt={create:QSt,close:JSt,onMessage:eTt,postMessage:ZSt,canBeUsed:tTt,type:XSt,averageResponseTime:nTt,microSeconds:KSt};var Uke=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,Vke()),this.set.add(t),setTimeout(function(){iTt(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function iTt(e){for(var t=Vke()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function Vke(){return new Date().getTime()}function j4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var sTt=F4,oTt="pubkey.broadcast-channel-0-",dm="messages",aTt="idb";function Hke(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function uTt(e){var t=Hke(),n=oTt+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(dm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function lTt(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([dm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(dm);u.add(i)})}function cTt(e,t){var n=e.transaction(dm).objectStore(dm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function fTt(e,t){var n=e.transaction([dm],"readwrite").objectStore(dm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function dTt(e,t){var n=new Date().getTime()-t,r=e.transaction(dm).objectStore(dm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function hTt(e,t){return dTt(e,t).then(function(n){return Promise.all(n.map(function(r){return fTt(e,r.id)}))})}function pTt(e,t){return t=j4(t),uTt(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:L4(),eMIs:new Uke(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},qke(r),r})}function qke(e){e.closed||Wke(e).then(function(){return b3(e.options.idb.fallbackInterval)}).then(function(){return qke(e)})}function mTt(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function Wke(e){return e.closed||!e.messagesCallback?Promise.resolve():cTt(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return mTt(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function gTt(e){e.closed=!0,e.db.close()}function yTt(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return lTt(e.db,e.uuid,t)}).then(function(){YSt(0,10)===0&&hTt(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function vTt(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,Wke(e)}function _Tt(){if(OI)return!1;var e=Hke();return!!e}function bTt(e){return e.idb.fallbackInterval*2}const wTt={create:pTt,close:gTt,onMessage:vTt,postMessage:yTt,canBeUsed:_Tt,type:aTt,averageResponseTime:bTt,microSeconds:sTt};var ETt=F4,xTt="pubkey.broadcastChannel-",STt="localstorage";function Gke(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Yke(e){return xTt+e}function TTt(e,t){return new Promise(function(n){b3().then(function(){var r=Yke(e.channelName),i={token:L4(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);Gke().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function CTt(e,t){var n=Yke(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function ATt(e){window.removeEventListener("storage",e)}function ITt(e,t){if(t=j4(t),!Kke())throw new Error("BroadcastChannel: localstorage cannot be used");var n=L4(),r=new Uke(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=CTt(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function OTt(e){ATt(e.listener)}function PTt(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function Kke(){if(OI)return!1;var e=Gke();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function kTt(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const RTt={create:ITt,close:OTt,onMessage:PTt,postMessage:TTt,canBeUsed:Kke,type:STt,averageResponseTime:kTt,microSeconds:ETt};var $Tt=F4,NTt="simulate",$K=new Set;function DTt(e){var t={name:e,messagesCallback:null};return $K.add(t),t}function MTt(e){$K.delete(e)}function LTt(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from($K);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function FTt(e,t){e.messagesCallback=t}function jTt(){return!0}function BTt(){return 5}const zTt={create:DTt,close:MTt,onMessage:FTt,postMessage:LTt,canBeUsed:jTt,type:NTt,averageResponseTime:BTt,microSeconds:$Tt};var eV=[rTt,wTt,RTt];if(OI){var hhe=require("../../src/methods/node.js");typeof hhe.canBeUsed=="function"&&eV.push(hhe)}function Xke(e){var t=[].concat(e.methods,eV).filter(Boolean);if(e.type){if(e.type==="simulate")return zTt;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!OI&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(eV.map(function(i){return i.type})))}var NK=function(t,n){this.name=t,tV&&(n=tV),this.options=j4(n),this.method=Xke(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,HTt(this)};NK._pubkey=!0;function UTt(e){e=j4(e);var t=Xke(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var tV;function VTt(e){tV=e}NK.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return phe(this,"message",t)},postInternal:function(t){return phe(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};ghe(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,mhe(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};mhe(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});ghe(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function phe(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function HTt(e){var t=e.method.create(e.name,e.options);GSt(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function Qke(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function mhe(e,t,n){e._addEL[t].push(n),qTt(e)}function ghe(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),WTt(e)}function qTt(e){if(!e._iL&&Qke(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function WTt(e){if(e._iL&&!Qke(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const GTt=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function YTt(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const KTt={add:YTt},Jke={},XTt=Object.freeze(Object.defineProperty({__proto__:null,default:Jke},Symbol.toStringTag,{value:"Module"}));var QTt=GTt?Jke:KTt,i1=new Set,yhe=!1;function JTt(){yhe||(yhe=!0,QTt.add(Zke))}function ZTt(e){if(JTt(),typeof e!="function")throw new Error("Listener is no function");i1.add(e);var t={remove:function(){return i1.delete(e)},run:function(){return i1.delete(e),e()}};return t}function Zke(){var e=[];return i1.forEach(function(t){e.push(t()),i1.delete(t)}),Promise.all(e)}function e2t(){i1.clear()}function t2t(){return i1.size}const n2t={add:ZTt,runAll:Zke,removeAll:e2t,getSize:t2t};var eRe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=L4(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};eRe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=Lv(this,"apply").then(function(){return b3(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):Lv(t,"apply")}).then(function(){return b3(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):Lv(t)}).then(function(){return tRe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=r2t(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),Lv(this,"death")}};function r2t(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function Lv(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function tRe(e){e.isLeader=!0;var t=n2t.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&Lv(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),Lv(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),Lv(e,"tell")}function i2t(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function s2t(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=i2t(t,e);var n=new eRe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const o2t=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:NK,beLeader:tRe,clearNodeFolder:UTt,createLeaderElection:s2t,enforceOptions:VTt},Symbol.toStringTag,{value:"Module"})),a2t=Rwe(o2t);var DK,MK;Object.defineProperty(yi,"__esModule",{value:!0});yi.initMessageListener=MK=yi.initStateWithPrevTab=yi.withReduxStateSync=yi.createReduxStateSync=DK=yi.createStateSyncMiddleware=yi.WINDOW_STATE_SYNC_ID=yi.INIT_MESSAGE_LISTENER=yi.RECEIVE_INIT_STATE=yi.SEND_INIT_STATE=yi.GET_INIT_STATE=void 0;yi.generateUuidForAction=iRe;yi.isActionAllowed=sRe;yi.isActionSynced=p2t;yi.MessageListener=oRe;var u2t=a2t,nV=0,LK=yi.GET_INIT_STATE="&_GET_INIT_STATE",FK=yi.SEND_INIT_STATE="&_SEND_INIT_STATE",jK=yi.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",l2t=yi.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",rV={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},c2t=function(){return{type:LK}},f2t=function(){return{type:FK}},d2t=function(t){return{type:jK,payload:t}},h2t=function(){return{type:l2t}};function sg(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function nRe(){return""+sg()+sg()+"-"+sg()+"-"+sg()+"-"+sg()+"-"+sg()+sg()+sg()}var rRe=yi.WINDOW_STATE_SYNC_ID=nRe();function iRe(e){var t=e;return t.$uuid=nRe(),t.$wuid=rRe,t}function sRe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function p2t(e){return!!e.$isSync}function oRe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==rRe&&o.type!==jK&&o.$uuid&&o.$uuid!==nV&&(o.type===LK&&!s[o.$wuid]?(s[o.$wuid]=!0,n(f2t())):o.type===FK&&!s[o.$wuid]?i||(i=!0,n(d2t(o.payload))):r(o)&&(nV=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}DK=yi.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rV,n=sRe(t),r=new u2t.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||rV.prepareState,s=null;return function(o){var a=o.getState,u=o.dispatch;return function(l){return function(c){if(s||(s=new oRe({channel:r,dispatch:u,allowed:n})),c&&!c.$uuid){var f=iRe(c);nV=f.$uuid;try{if(c.type===FK)return a()&&(f.payload=i(a()),r.postMessage(f)),l(c);(n(f)||c.type===LK)&&r.postMessage(f)}catch{console.error("Your browser doesn't support cross tab communication")}}return l(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var m2t=yi.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rV.receiveState;return function(r,i){var s=r;return i.type===jK&&(s=n(r,i.payload)),t(s,i)}};yi.withReduxStateSync=m2t;MK=yi.initStateWithPrevTab=function(t){var n=t.dispatch;n(c2t())};yi.initMessageListener=function(t){var n=t.dispatch;n(h2t())};function gc(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:gc(t))}function aRe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+gc(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+gc(e).length-1}];r+=1}else{const o=aRe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function uRe(e,t){const n=aRe(e,t,0);return typeof n=="number"?null:n}function lRe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=lRe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function g2t(e,t){const n=lRe(e,t,0);return n.found?n.distance:-1}function cRe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...cRe(i,`${t}-${s}`))}),n}async function y2t(e,t,n,r,i,s){const o=gc(n),a={...o.map(p=>({[p]:{}}))},u=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:i||a,isRecording:!1,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null},f=Rke({name:"storeSlice",initialState:c,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setAnalysisTrialName:(p,m)=>{p.analysisTrialName=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:_,provenanceGraph:w,windowEvents:S}=m;p.answers[g]={answer:y,startTime:v,endTime:_,provenanceGraph:w,windowEvents:S}}}}),d=[DK({})],h=Pke({reducer:f.reducer,preloadedState:c,middleware:d});return MK(h),{store:h,actions:f.actions}}const fRe=C.createContext(null);function kl(){return C.useContext(fRe).actions}const Ec=bke,xa=Dxt;function v2t(e){return xa(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function Lm(){return xa(e=>gc(e.sequence))}var w3={exports:{}};w3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",S="[object Set]",x="[object String]",b="[object Undefined]",T="[object WeakMap]",A="[object ArrayBuffer]",I="[object DataView]",k="[object Float32Array]",R="[object Float64Array]",P="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",B="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",G="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,L={};L[k]=L[R]=L[P]=L[N]=L[F]=L[B]=L[W]=L[V]=L[G]=!0,L[a]=L[u]=L[A]=L[c]=L[I]=L[f]=L[d]=L[h]=L[m]=L[g]=L[v]=L[w]=L[S]=L[x]=L[T]=!1;var j=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,q=typeof self=="object"&&self&&self.Object===Object&&self,Z=j||q||Function("return this")(),ue=t&&!t.nodeType&&t,he=ue&&!0&&e&&!e.nodeType&&e,fe=he&&he.exports===ue,me=fe&&j.process,_e=function(){try{var re=he&&he.require&&he.require("util").types;return re||me&&me.binding&&me.binding("util")}catch{}}(),ge=_e&&_e.isTypedArray;function Be(re,ce,Te){switch(Te.length){case 0:return re.call(ce);case 1:return re.call(ce,Te[0]);case 2:return re.call(ce,Te[0],Te[1]);case 3:return re.call(ce,Te[0],Te[1],Te[2])}return re.apply(ce,Te)}function Me(re,ce){for(var Te=-1,$t=Array(re);++Te<re;)$t[Te]=ce(Te);return $t}function ut(re){return function(ce){return re(ce)}}function Oe(re,ce){return re==null?void 0:re[ce]}function Re(re,ce){return function(Te){return re(ce(Te))}}var Ye=Array.prototype,Ut=Function.prototype,Ft=Object.prototype,Je=Z["__core-js_shared__"],Ge=Ut.toString,gt=Ft.hasOwnProperty,ot=function(){var re=/[^.]+$/.exec(Je&&Je.keys&&Je.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}(),at=Ft.toString,Et=Ge.call(Object),ve=RegExp("^"+Ge.call(gt).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=fe?Z.Buffer:void 0,Fe=Z.Symbol,Ue=Z.Uint8Array;Se&&Se.allocUnsafe;var ht=Re(Object.getPrototypeOf,Object),cn=Object.create,Ve=Ft.propertyIsEnumerable,wt=Ye.splice,bt=Fe?Fe.toStringTag:void 0,bn=function(){try{var re=He(Object,"defineProperty");return re({},"",{}),re}catch{}}(),Lt=Se?Se.isBuffer:void 0,Ar=Math.max,Fn=Date.now,ar=He(Z,"Map"),oi=He(Object,"create"),yo=function(){function re(){}return function(ce){if(!ip(ce))return{};if(cn)return cn(ce);re.prototype=ce;var Te=new re;return re.prototype=void 0,Te}}();function br(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var $t=re[ce];this.set($t[0],$t[1])}}function nr(){this.__data__=oi?oi(null):{},this.size=0}function Uo(re){var ce=this.has(re)&&delete this.__data__[re];return this.size-=ce?1:0,ce}function Vr(re){var ce=this.__data__;if(oi){var Te=ce[re];return Te===r?void 0:Te}return gt.call(ce,re)?ce[re]:void 0}function Zr(re){var ce=this.__data__;return oi?ce[re]!==void 0:gt.call(ce,re)}function Pt(re,ce){var Te=this.__data__;return this.size+=this.has(re)?0:1,Te[re]=oi&&ce===void 0?r:ce,this}br.prototype.clear=nr,br.prototype.delete=Uo,br.prototype.get=Vr,br.prototype.has=Zr,br.prototype.set=Pt;function Xt(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var $t=re[ce];this.set($t[0],$t[1])}}function rr(){this.__data__=[],this.size=0}function Gs(re){var ce=this.__data__,Te=Qt(ce,re);if(Te<0)return!1;var $t=ce.length-1;return Te==$t?ce.pop():wt.call(ce,Te,1),--this.size,!0}function mi(re){var ce=this.__data__,Te=Qt(ce,re);return Te<0?void 0:ce[Te][1]}function ai(re){return Qt(this.__data__,re)>-1}function ae(re,ce){var Te=this.__data__,$t=Qt(Te,re);return $t<0?(++this.size,Te.push([re,ce])):Te[$t][1]=ce,this}Xt.prototype.clear=rr,Xt.prototype.delete=Gs,Xt.prototype.get=mi,Xt.prototype.has=ai,Xt.prototype.set=ae;function ne(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var $t=re[ce];this.set($t[0],$t[1])}}function le(){this.size=0,this.__data__={hash:new br,map:new(ar||Xt),string:new br}}function Ee(re){var ce=ze(this,re).delete(re);return this.size-=ce?1:0,ce}function xe(re){return ze(this,re).get(re)}function St(re){return ze(this,re).has(re)}function It(re,ce){var Te=ze(this,re),$t=Te.size;return Te.set(re,ce),this.size+=Te.size==$t?0:1,this}ne.prototype.clear=le,ne.prototype.delete=Ee,ne.prototype.get=xe,ne.prototype.has=St,ne.prototype.set=It;function je(re){var ce=this.__data__=new Xt(re);this.size=ce.size}function Rt(){this.__data__=new Xt,this.size=0}function en(re){var ce=this.__data__,Te=ce.delete(re);return this.size=ce.size,Te}function ft(re){return this.__data__.get(re)}function kn(re){return this.__data__.has(re)}function In(re,ce){var Te=this.__data__;if(Te instanceof Xt){var $t=Te.__data__;if(!ar||$t.length<n-1)return $t.push([re,ce]),this.size=++Te.size,this;Te=this.__data__=new ne($t)}return Te.set(re,ce),this.size=Te.size,this}je.prototype.clear=Rt,je.prototype.delete=en,je.prototype.get=ft,je.prototype.has=kn,je.prototype.set=In;function Gt(re,ce){var Te=np(re),$t=!Te&&uu(re),Un=!Te&&!$t&&rp(re),Ir=!Te&&!$t&&!Un&&eP(re),ei=Te||$t||Un||Ir,qn=ei?Me(re.length,String):[],ti=qn.length;for(var rs in re)ei&&(rs=="length"||Un&&(rs=="offset"||rs=="parent")||Ir&&(rs=="buffer"||rs=="byteLength"||rs=="byteOffset")||At(rs,ti))||qn.push(rs);return qn}function Xn(re,ce,Te){(Te!==void 0&&!Hl(re[ce],Te)||Te===void 0&&!(ce in re))&&ui(re,ce,Te)}function Rr(re,ce,Te){var $t=re[ce];(!(gt.call(re,ce)&&Hl($t,Te))||Te===void 0&&!(ce in re))&&ui(re,ce,Te)}function Qt(re,ce){for(var Te=re.length;Te--;)if(Hl(re[Te][0],ce))return Te;return-1}function ui(re,ce,Te){ce=="__proto__"&&bn?bn(re,ce,{configurable:!0,enumerable:!0,value:Te,writable:!0}):re[ce]=Te}var Li=Pe();function Hr(re){return re==null?re===void 0?b:y:bt&&bt in Object(re)?qe(re):Vo(re)}function Is(re){return lu(re)&&Hr(re)==a}function Ti(re){if(!ip(re)||Hn(re))return!1;var ce=bS(re)?ve:H;return ce.test(QO(re))}function Ci(re){return lu(re)&&ZO(re.length)&&!!L[Hr(re)]}function Ys(re){if(!ip(re))return Nr(re);var ce=$r(re),Te=[];for(var $t in re)$t=="constructor"&&(ce||!gt.call(re,$t))||Te.push($t);return Te}function ps(re,ce,Te,$t,Un){re!==ce&&Li(ce,function(Ir,ei){if(Un||(Un=new je),ip(Ir))xt(re,ce,ei,Te,ps,$t,Un);else{var qn=$t?$t(tp(re,ei),Ir,ei+"",re,ce,Un):void 0;qn===void 0&&(qn=Ir),Xn(re,ei,qn)}},zy)}function xt(re,ce,Te,$t,Un,Ir,ei){var qn=tp(re,Te),ti=tp(ce,Te),rs=ei.get(ti);if(rs){Xn(re,Te,rs);return}var Ho=Ir?Ir(qn,ti,Te+"",re,ce,ei):void 0,Vy=Ho===void 0;if(Vy){var sp=np(ti),z_=!sp&&rp(ti),U_=!sp&&!z_&&eP(ti);Ho=ti,sp||z_||U_?np(qn)?Ho=qn:JO(qn)?Ho=de(qn):z_?(Vy=!1,Ho=K(ti)):U_?(Vy=!1,Ho=ee(ti)):Ho=[]:Z8(ti)||uu(ti)?(Ho=qn,uu(qn)?Ho=By(qn):(!ip(qn)||bS(qn))&&(Ho=rt(ti))):Vy=!1}Vy&&(ei.set(ti,Ho),Un(Ho,ti,$t,Ir,ei),ei.delete(ti)),Xn(re,Te,Ho)}function Rn(re,ce){return _S(sd(re,ce,eg),re+"")}var ms=bn?function(re,ce){return bn(re,"toString",{configurable:!0,enumerable:!1,value:Uy(ce),writable:!0})}:eg;function K(re,ce){return re.slice()}function oe(re){var ce=new re.constructor(re.byteLength);return new Ue(ce).set(new Ue(re)),ce}function ee(re,ce){var Te=oe(re.buffer);return new re.constructor(Te,re.byteOffset,re.length)}function de(re,ce){var Te=-1,$t=re.length;for(ce||(ce=Array($t));++Te<$t;)ce[Te]=re[Te];return ce}function ye(re,ce,Te,$t){var Un=!Te;Te||(Te={});for(var Ir=-1,ei=ce.length;++Ir<ei;){var qn=ce[Ir],ti=void 0;ti===void 0&&(ti=re[qn]),Un?ui(Te,qn,ti):Rr(Te,qn,ti)}return Te}function pe(re){return Rn(function(ce,Te){var $t=-1,Un=Te.length,Ir=Un>1?Te[Un-1]:void 0,ei=Un>2?Te[2]:void 0;for(Ir=re.length>3&&typeof Ir=="function"?(Un--,Ir):void 0,ei&&xn(Te[0],Te[1],ei)&&(Ir=Un<3?void 0:Ir,Un=1),ce=Object(ce);++$t<Un;){var qn=Te[$t];qn&&re(ce,qn,$t,Ir)}return ce})}function Pe(re){return function(ce,Te,$t){for(var Un=-1,Ir=Object(ce),ei=$t(ce),qn=ei.length;qn--;){var ti=ei[++Un];if(Te(Ir[ti],ti,Ir)===!1)break}return ce}}function ze(re,ce){var Te=re.__data__;return jt(ce)?Te[typeof ce=="string"?"string":"hash"]:Te.map}function He(re,ce){var Te=Oe(re,ce);return Ti(Te)?Te:void 0}function qe(re){var ce=gt.call(re,bt),Te=re[bt];try{re[bt]=void 0;var $t=!0}catch{}var Un=at.call(re);return $t&&(ce?re[bt]=Te:delete re[bt]),Un}function rt(re){return typeof re.constructor=="function"&&!$r(re)?yo(ht(re)):{}}function At(re,ce){var Te=typeof re;return ce=ce??o,!!ce&&(Te=="number"||Te!="symbol"&&Y.test(re))&&re>-1&&re%1==0&&re<ce}function xn(re,ce,Te){if(!ip(Te))return!1;var $t=typeof ce;return($t=="number"?B_(Te)&&At(ce,Te.length):$t=="string"&&ce in Te)?Hl(Te[ce],re):!1}function jt(re){var ce=typeof re;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?re!=="__proto__":re===null}function Hn(re){return!!ot&&ot in re}function $r(re){var ce=re&&re.constructor,Te=typeof ce=="function"&&ce.prototype||Ft;return re===Te}function Nr(re){var ce=[];if(re!=null)for(var Te in Object(re))ce.push(Te);return ce}function Vo(re){return at.call(re)}function sd(re,ce,Te){return ce=Ar(ce===void 0?re.length-1:ce,0),function(){for(var $t=arguments,Un=-1,Ir=Ar($t.length-ce,0),ei=Array(Ir);++Un<Ir;)ei[Un]=$t[ce+Un];Un=-1;for(var qn=Array(ce+1);++Un<ce;)qn[Un]=$t[Un];return qn[ce]=Te(ei),Be(re,this,qn)}}function tp(re,ce){if(!(ce==="constructor"&&typeof re[ce]=="function")&&ce!="__proto__")return re[ce]}var _S=jy(ms);function jy(re){var ce=0,Te=0;return function(){var $t=Fn(),Un=s-($t-Te);if(Te=$t,Un>0){if(++ce>=i)return arguments[0]}else ce=0;return re.apply(void 0,arguments)}}function QO(re){if(re!=null){try{return Ge.call(re)}catch{}try{return re+""}catch{}}return""}function Hl(re,ce){return re===ce||re!==re&&ce!==ce}var uu=Is(function(){return arguments}())?Is:function(re){return lu(re)&&gt.call(re,"callee")&&!Ve.call(re,"callee")},np=Array.isArray;function B_(re){return re!=null&&ZO(re.length)&&!bS(re)}function JO(re){return lu(re)&&B_(re)}var rp=Lt||nP;function bS(re){if(!ip(re))return!1;var ce=Hr(re);return ce==h||ce==p||ce==l||ce==_}function ZO(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=o}function ip(re){var ce=typeof re;return re!=null&&(ce=="object"||ce=="function")}function lu(re){return re!=null&&typeof re=="object"}function Z8(re){if(!lu(re)||Hr(re)!=v)return!1;var ce=ht(re);if(ce===null)return!0;var Te=gt.call(ce,"constructor")&&ce.constructor;return typeof Te=="function"&&Te instanceof Te&&Ge.call(Te)==Et}var eP=ge?ut(ge):Ci;function By(re){return ye(re,zy(re))}function zy(re){return B_(re)?Gt(re):Ys(re)}var tP=pe(function(re,ce,Te){ps(re,ce,Te)});function Uy(re){return function(){return re}}function eg(re){return re}function nP(){return!1}e.exports=tP})(w3,w3.exports);var _2t=w3.exports;const BK=Qu(_2t),zS="@REVISIT_COMMS",b2t={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function w2t({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=kl(),r=Ec(),i=bke(),s=C.useRef(null),o=C.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Fh(),u=Lm()[a],l=kc(),c=C.useCallback((f,d)=>{var h,p;(p=(h=s.current)==null?void 0:h.contentWindow)==null||p.postMessage({error:!1,type:`${zS}/${f}`,iframeId:o,message:d},"*")},[s,o]);return C.useEffect(()=>{const f=d=>{const{data:h}=d;if(typeof h=="object"&&o===h.iframeId)switch(h.type){case`${zS}/WINDOW_READY`:e.parameters&&c("STUDY_DATA",e.parameters);break;case`${zS}/READY`:s.current&&(s.current.style.height=`${h.message.documentHeight}px`);break;case`${zS}/ANSWERS`:r(t(h.message));break;case`${zS}/PROVENANCE`:r(n(h.message));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[r,a,i,o,l,e,c,t,n]),$.jsx("div",{children:$.jsx("iframe",{ref:s,src:`${Nc}${e.path}?trialid=${u}&id=${o}`,style:b2t})})}const E2t={maxWidth:"100%"};function x2t({currentConfig:e}){const t={...E2t,...e.style};return $.jsx(f_,{mx:"auto",src:`${Nc}${e.path}`,style:t})}function S2t({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=C.useState(!1),[o,a]=C.useState(null),[u,l]=C.useState(null),[c,f]=C.useState(null);return i?$.jsxs(Bi,{children:[$.jsx(Gp,{data:e,onChange:d=>a(d),placeholder:"Select X Column"}),$.jsx(Gp,{data:e,onChange:d=>l(d),placeholder:"Select Y Column"}),$.jsx(Lr,{disabled:!o||!u,onClick:()=>{n(o,u),s(!1)},children:"Create plot"}),$.jsx(Gp,{data:t,onChange:d=>f(d),placeholder:"Select X Column"}),$.jsx(Lr,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):$.jsx(Bi,{children:$.jsx(lm,{variant:"light",size:150,onClick:()=>s(!0),children:$.jsx(OOe,{size:50})})})}const T2t=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:S2t},Symbol.toStringTag,{value:"Module"})),dRe=C.createContext(null),zK=({id:e="waveform",children:t})=>z.createElement("div",{id:e},t),C2t=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],A2t=e=>e?C2t.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};function bs(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let PI=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const vhe={decode:function(e,t){return bs(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function hRe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(hRe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function _he(e,t,n){const r=hRe(e,t||{});return n==null||n.appendChild(r),r}var I2t=Object.freeze({__proto__:null,createElement:_he,default:_he});const O2t={fetchBlob:function(e,t,n){return bs(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){bs(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>bs(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>bs(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let P2t=class extends PI{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const r=n instanceof Blob&&this.canPlayType(n.type)?URL.createObjectURL(n):t;this.media.src=r}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return bs(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},pRe=class mRe extends PI{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientY-i.top;return[s/i.width,o/i.height]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),u&&Date.now()-m<a)return;const x=S.clientX,b=S.clientY,T=x-d,A=b-h;if(p||Math.abs(T)>s||Math.abs(A)>s){const I=t.getBoundingClientRect(),{left:k,top:R}=I;p||(r==null||r(d-k,h-R),p=!0),n(T,A,x-k,b-R),d=x,h=b}},y=S=>{if(p){const x=S.clientX,b=S.clientY,T=t.getBoundingClientRect(),{left:A,top:I}=T;i==null||i(x-A,b-I)}l()},v=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||y(S)},_=S=>{p&&(S.stopPropagation(),S.preventDefault())},w=S=>{p&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",_,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",_,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t;this.subscriptions.forEach(n=>n()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=window.devicePixelRatio||1,d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,_=0;for(let w=0;w<=a;w++){const S=Math.round(w*m);if(S>y){const T=Math.round(v*c*i),A=T+Math.round(_*c*i)||1;let I=c-T;n.barAlign==="top"?I=0:n.barAlign==="bottom"&&(I=l-A),r[g](y*(d+h),I,d,A,p),y=S,v=0,_=0}const x=Math.abs(s[w]||0),b=Math.abs(o[w]||0);x>v&&(v=x),b>_&&(_=b)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=window.devicePixelRatio||1,l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){return bs(this,void 0,void 0,function*(){const a=window.devicePixelRatio||1,u=r/a;let l=Math.min(mRe.MAX_CANVAS_WIDTH,this.scrollContainer.clientWidth);if(n.barWidth||n.barGap){const p=n.barWidth||.5,m=p+(n.barGap||p/2);l%m!=0&&(l=Math.floor(l/m)*m)}const c=p=>{const m=p*l,g=Math.min(u-m,l),y=t.map(v=>{const _=Math.floor(m/u*v.length),w=Math.floor((m+g)/u*v.length);return v.slice(_,w)});this.renderSingleCanvas(y,n,g,i,m,s,o)},f=Math.ceil(u/l);if(f===1)return void c(0);const d=this.scrollContainer.scrollLeft/u,h=Math.floor(d*f);c(h),c(h+1),yield Promise.all([bs(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h-1;m>=0;m--)yield p(),c(m)}),bs(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h+2;m<f;m++)yield p(),c(m)})])})}renderChannel(t,n,r,i){return bs(this,void 0,void 0,function*(){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),yield this.renderMultiCanvas(t,o,r,u,a,l)})}render(t){return bs(this,void 0,void 0,function*(){this.timeouts.forEach(a=>a()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=i>r;const s=this.options.fillParent&&!this.isScrollable,o=(s?r:i)*n;this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:t.numberOfChannels}).map((a,u)=>{var l;const c=Object.assign(Object.assign({},this.options),(l=this.options.splitChannels)===null||l===void 0?void 0:l[u]);return this.renderChannel([t.getChannelData(u)],c,o,u)}));else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),yield this.renderChannel(a,this.options,o,0)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return bs(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};pRe.MAX_CANVAS_WIDTH=4e3;class k2t extends PI{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class bhe extends PI{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return bs(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return bs(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return bs(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const R2t={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let iV=class gRe extends P2t{static create(t){return new gRe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new bhe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},R2t,t),this.timer=new k2t;const r=n?void 0:this.getMediaElement();this.renderer=new pRe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return bs(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield O2t.fetchBlob(t,u,a)}this.setSrc(t,n);const o=i||this.getDuration()||(yield new Promise(a=>{this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0})}));if(!t&&!n){const a=this.getMediaElement();a instanceof bhe&&(a.duration=o)}if(r)this.decodedData=vhe.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield vhe.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return bs(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return bs(this,void 0,void 0,function*(){try{return yield this.loadAudio("blob",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return bs(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return bs(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};iV.BasePlugin=class extends PI{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},iV.dom=I2t;function $2t(e){return iV.create(e)}function whe(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const N2t=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var D2t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function yRe(e){var{container:t,plugins:n=[],onMount:r}=e,i=D2t(e,["container","plugins","onMount"]);const s=C.useRef([]),[o,a]=C.useState(null);return C.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(whe)),s.current=u;const l=$2t(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),C.useEffect(()=>{if(o){const u=n.map(whe),{disabled:l,enabled:c}=N2t(s.current,u);s.current=u,l.forEach(f=>{f.name&&(o==null||o.destroyPlugin(f.name))}),c.forEach(f=>{f.name&&(o==null||o.addPlugin(f).initPlugin(f.name))})}},[n]),o}function M2t(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var L2t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const vRe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=L2t(e,["children","plugins","onMount"]);const s=C.useMemo(()=>{let a={};return C.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!M2t(u))return;const{props:l,type:c}=u;if(c===zK){const{id:f}=l;a=A2t(l),a=Object.assign(Object.assign({},a),{container:"#"+f})}}),a},[t]),o=yRe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return z.createElement(dRe.Provider,{value:o},t)};vRe.defaultProps={children:null,plugins:[]};function R9(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let _Re=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},F2t=class extends _Re{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class j2t extends _Re{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const B2t=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class UK extends F2t{constructor(t){var n,r,i,s;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,renderRecordedAudio:(s=t.renderRecordedAudio)===null||s===void 0||s})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new j2t,this.subscriptions.push(this.timer.on("tick",()=>{const o=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+o,this.emit("record-progress",this.duration)}))}static create(t){return new UK(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s);let a;const u=Math.floor((this.options.scrollingWaveformWindow||0)*n.sampleRate),l=()=>{var c;if(this.isWaveformPaused)return void(a=requestAnimationFrame(l));if(i.getFloatTimeDomainData(o),this.options.scrollingWaveform){const d=Math.min(u,this.dataWindow?this.dataWindow.length+s:s),h=new Float32Array(u);if(this.dataWindow){const p=Math.max(0,u-this.dataWindow.length);h.set(this.dataWindow.slice(-d+s),p)}h.set(o,u-s),this.dataWindow=h}else this.dataWindow=o;const f=this.options.scrollingWaveformWindow;this.wavesurfer&&((c=this.originalOptions)!==null&&c!==void 0||(this.originalOptions={cursorWidth:this.wavesurfer.options.cursorWidth,interact:this.wavesurfer.options.interact}),this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[this.dataWindow],f)),a=requestAnimationFrame(l)};return l(),{onDestroy:()=>{cancelAnimationFrame(a),r==null||r.disconnect(),n==null||n.close()},onEnd:()=>{this.isWaveformPaused=!0,cancelAnimationFrame(a),this.stopMic()}}}startMic(t){return R9(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return R9(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||B2t.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return R9(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.options.cursorWidth=this.originalOptions.cursorWidth,this.wavesurfer.options.interact=this.originalOptions.interact,delete this.originalOptions)}}function bRe({width:e=70,height:t=50}){const n=C.useRef(null),r=C.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(UK.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return $.jsx(pt,{style:{width:`${e}px`,height:`${t}px`},children:$.jsx(vRe,{onMount:r,children:$.jsx(zK,{id:"waveform"})})})}function Ehe({parameters:e,setAnswer:t}){return C.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),$.jsx(Ya,{style:{height:"70%",width:"100%"},children:$.jsxs(Bi,{children:[$.jsx(dt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),$.jsx(dt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),$.jsx(dt,{ta:"center",weight:700,children:"If you are not comfortable or able to speak English during this study, please close it now."}),$.jsx(Ya,{children:$.jsx(bRe,{height:200,width:400})})]})})}const z2t=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Ehe,default:Ehe},Symbol.toStringTag,{value:"Module"}));function Yp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U2t(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xx(e){let t,n,r;e.length!==2?(t=Yp,n=(a,u)=>Yp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Yp||e===U2t?e:V2t,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function V2t(){return 0}function wRe(e){return e===null?NaN:+e}function*H2t(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const ERe=xx(Yp),D0=ERe.right,q2t=ERe.left;xx(wRe).center;function W2t(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function G2t(e,t){const n=W2t(e,t);return n&&Math.sqrt(n)}function E3(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class qa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class xhe extends Map{constructor(t,n=TRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(sV(this,t))}has(t){return super.has(sV(this,t))}set(t,n){return super.set(xRe(this,t),n)}delete(t){return super.delete(SRe(this,t))}}class x3 extends Set{constructor(t,n=TRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(sV(this,t))}add(t){return super.add(xRe(this,t))}delete(t){return super.delete(SRe(this,t))}}function sV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function xRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function SRe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function TRe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Y2t(e,t){return Array.from(t,n=>e[n])}function K2t(e=Yp){if(e===Yp)return CRe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function CRe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const X2t=Math.sqrt(50),Q2t=Math.sqrt(10),J2t=Math.sqrt(2);function S3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=X2t?10:s>=Q2t?5:s>=J2t?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?S3(e,t,n*2):[a,u,l]}function oV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?S3(t,e,n):S3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function aV(e,t,n){return t=+t,e=+e,n=+n,S3(e,t,n)[2]}function M0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?aV(t,e,n):aV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function yc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function uV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ARe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?CRe:K2t(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));ARe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(US(e,n,t),i(e[r],s)>0&&US(e,n,r);o<a;){for(US(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?US(e,n,a):(++a,US(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function US(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function lV(e,t,n){if(e=Float64Array.from(H2t(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return uV(e);if(t>=1)return yc(e);var r,i=(r-1)*t,s=Math.floor(i),o=yc(ARe(e,s).subarray(0,s+1)),a=uV(e.subarray(s+1));return o+(a-o)*(i-s)}}function IRe(e,t,n=wRe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function ORe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function PRe(e,t){return lV(e,.5,t)}function*Z2t(e){for(const t of e)yield*t}function kRe(e){return Array.from(Z2t(e))}function Ou(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function VK(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function eCt(e,...t){e=new x3(e),t=t.map(tCt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function tCt(e){return e instanceof x3?e:new x3(e)}function nCt(...e){const t=new x3;for(const n of e)for(const r of n)t.add(r);return t}var rCt={value:()=>{}};function B4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new BR(n)}function BR(e){this._=e}function iCt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}BR.prototype=B4.prototype={constructor:BR,on:function(e,t){var n=this._,r=iCt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=sCt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=She(n[i],e.name,t);else if(t==null)for(i in n)n[i]=She(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new BR(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function sCt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function She(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=rCt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var cV="http://www.w3.org/1999/xhtml";const The={svg:"http://www.w3.org/2000/svg",xhtml:cV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function z4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),The.hasOwnProperty(t)?{space:The[t],local:e}:e}function oCt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cV&&t.documentElement.namespaceURI===cV?t.createElement(e):t.createElementNS(n,e)}}function aCt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function RRe(e){var t=z4(e);return(t.local?aCt:oCt)(t)}function uCt(){}function HK(e){return e==null?uCt:function(){return this.querySelector(e)}}function lCt(e){typeof e!="function"&&(e=HK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xa(r,this._parents)}function $Re(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cCt(){return[]}function NRe(e){return e==null?cCt:function(){return this.querySelectorAll(e)}}function fCt(e){return function(){return $Re(e.apply(this,arguments))}}function dCt(e){typeof e=="function"?e=fCt(e):e=NRe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Xa(r,i)}function DRe(e){return function(){return this.matches(e)}}function MRe(e){return function(t){return t.matches(e)}}var hCt=Array.prototype.find;function pCt(e){return function(){return hCt.call(this.children,e)}}function mCt(){return this.firstElementChild}function gCt(e){return this.select(e==null?mCt:pCt(typeof e=="function"?e:MRe(e)))}var yCt=Array.prototype.filter;function vCt(){return Array.from(this.children)}function _Ct(e){return function(){return yCt.call(this.children,e)}}function bCt(e){return this.selectAll(e==null?vCt:_Ct(typeof e=="function"?e:MRe(e)))}function wCt(e){typeof e!="function"&&(e=DRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Xa(r,this._parents)}function LRe(e){return new Array(e.length)}function ECt(){return new Xa(this._enter||this._groups.map(LRe),this._parents)}function T3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}T3.prototype={constructor:T3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xCt(e){return function(){return e}}function SCt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new T3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function TCt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new T3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function CCt(e){return e.__data__}function ACt(e,t){if(!arguments.length)return Array.from(this,CCt);var n=t?TCt:SCt,r=this._parents,i=this._groups;typeof e!="function"&&(e=xCt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=ICt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,S;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(S=g[_])&&++_<p;);w._next=S||null}}return o=new Xa(o,r),o._enter=a,o._exit=u,o}function ICt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OCt(){return new Xa(this._exit||this._groups.map(LRe),this._parents)}function PCt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function kCt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Xa(a,this._parents)}function RCt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function $Ct(e){e||(e=NCt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Xa(i,this._parents).order()}function NCt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function DCt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function MCt(){return Array.from(this)}function LCt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function FCt(){let e=0;for(const t of this)++e;return e}function jCt(){return!this.node()}function BCt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function zCt(e){return function(){this.removeAttribute(e)}}function UCt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function VCt(e,t){return function(){this.setAttribute(e,t)}}function HCt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qCt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function WCt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function GCt(e,t){var n=z4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?UCt:zCt:typeof t=="function"?n.local?WCt:qCt:n.local?HCt:VCt)(n,t))}function FRe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function YCt(e){return function(){this.style.removeProperty(e)}}function KCt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function XCt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function QCt(e,t,n){return arguments.length>1?this.each((t==null?YCt:typeof t=="function"?XCt:KCt)(e,t,n??"")):rE(this.node(),e)}function rE(e,t){return e.style.getPropertyValue(t)||FRe(e).getComputedStyle(e,null).getPropertyValue(t)}function JCt(e){return function(){delete this[e]}}function ZCt(e,t){return function(){this[e]=t}}function eAt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tAt(e,t){return arguments.length>1?this.each((t==null?JCt:typeof t=="function"?eAt:ZCt)(e,t)):this.node()[e]}function jRe(e){return e.trim().split(/^|\s+/)}function qK(e){return e.classList||new BRe(e)}function BRe(e){this._node=e,this._names=jRe(e.getAttribute("class")||"")}BRe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zRe(e,t){for(var n=qK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function URe(e,t){for(var n=qK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function nAt(e){return function(){zRe(this,e)}}function rAt(e){return function(){URe(this,e)}}function iAt(e,t){return function(){(t.apply(this,arguments)?zRe:URe)(this,e)}}function sAt(e,t){var n=jRe(e+"");if(arguments.length<2){for(var r=qK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?iAt:t?nAt:rAt)(n,t))}function oAt(){this.textContent=""}function aAt(e){return function(){this.textContent=e}}function uAt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lAt(e){return arguments.length?this.each(e==null?oAt:(typeof e=="function"?uAt:aAt)(e)):this.node().textContent}function cAt(){this.innerHTML=""}function fAt(e){return function(){this.innerHTML=e}}function dAt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function hAt(e){return arguments.length?this.each(e==null?cAt:(typeof e=="function"?dAt:fAt)(e)):this.node().innerHTML}function pAt(){this.nextSibling&&this.parentNode.appendChild(this)}function mAt(){return this.each(pAt)}function gAt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yAt(){return this.each(gAt)}function vAt(e){var t=typeof e=="function"?e:RRe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _At(){return null}function bAt(e,t){var n=typeof e=="function"?e:RRe(e),r=t==null?_At:typeof t=="function"?t:HK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wAt(){var e=this.parentNode;e&&e.removeChild(this)}function EAt(){return this.each(wAt)}function xAt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function SAt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TAt(e){return this.select(e?SAt:xAt)}function CAt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function AAt(e){return function(t){e.call(this,t,this.__data__)}}function IAt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function OAt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function PAt(e,t,n){return function(){var r=this.__on,i,s=AAt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function kAt(e,t,n){var r=IAt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?PAt:OAt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function VRe(e,t,n){var r=FRe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function RAt(e,t){return function(){return VRe(this,e,t)}}function $At(e,t){return function(){return VRe(this,e,t.apply(this,arguments))}}function NAt(e,t){return this.each((typeof t=="function"?$At:RAt)(e,t))}function*DAt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var WK=[null];function Xa(e,t){this._groups=e,this._parents=t}function kI(){return new Xa([[document.documentElement]],WK)}function MAt(){return this}Xa.prototype=kI.prototype={constructor:Xa,select:lCt,selectAll:dCt,selectChild:gCt,selectChildren:bCt,filter:wCt,data:ACt,enter:ECt,exit:OCt,join:PCt,merge:kCt,selection:MAt,order:RCt,sort:$Ct,call:DCt,nodes:MCt,node:LCt,size:FCt,empty:jCt,each:BCt,attr:GCt,style:QCt,property:tAt,classed:sAt,text:lAt,html:hAt,raise:mAt,lower:yAt,append:vAt,insert:bAt,remove:EAt,clone:TAt,datum:CAt,on:kAt,dispatch:NAt,[Symbol.iterator]:DAt};function So(e){return typeof e=="string"?new Xa([[document.querySelector(e)]],[document.documentElement]):new Xa([[e]],WK)}function LAt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Che(e,t){if(e=LAt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function FAt(e){return typeof e=="string"?new Xa([document.querySelectorAll(e)],[document.documentElement]):new Xa([$Re(e)],WK)}const fV={capture:!0,passive:!1};function dV(e){e.preventDefault(),e.stopImmediatePropagation()}function jAt(e){var t=e.document.documentElement,n=So(e).on("dragstart.drag",dV,fV);"onselectstart"in t?n.on("selectstart.drag",dV,fV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function BAt(e,t){var n=e.document.documentElement,r=So(e).on("dragstart.drag",null);t&&(r.on("click.drag",dV,fV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Sx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function RI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function wy(){}var T1=.7,iE=1/T1,vw="\\s*([+-]?\\d+)\\s*",qC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",th="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zAt=/^#([0-9a-f]{3,8})$/,UAt=new RegExp(`^rgb\\(${vw},${vw},${vw}\\)$`),VAt=new RegExp(`^rgb\\(${th},${th},${th}\\)$`),HAt=new RegExp(`^rgba\\(${vw},${vw},${vw},${qC}\\)$`),qAt=new RegExp(`^rgba\\(${th},${th},${th},${qC}\\)$`),WAt=new RegExp(`^hsl\\(${qC},${th},${th}\\)$`),GAt=new RegExp(`^hsla\\(${qC},${th},${th},${qC}\\)$`),Ahe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Sx(wy,C1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ihe,formatHex:Ihe,formatHex8:YAt,formatHsl:KAt,formatRgb:Ohe,toString:Ohe});function Ihe(){return this.rgb().formatHex()}function YAt(){return this.rgb().formatHex8()}function KAt(){return HRe(this).formatHsl()}function Ohe(){return this.rgb().formatRgb()}function C1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zAt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Phe(t):n===3?new io(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?XP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?XP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UAt.exec(e))?new io(t[1],t[2],t[3],1):(t=VAt.exec(e))?new io(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HAt.exec(e))?XP(t[1],t[2],t[3],t[4]):(t=qAt.exec(e))?XP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WAt.exec(e))?$he(t[1],t[2]/100,t[3]/100,1):(t=GAt.exec(e))?$he(t[1],t[2]/100,t[3]/100,t[4]):Ahe.hasOwnProperty(e)?Phe(Ahe[e]):e==="transparent"?new io(NaN,NaN,NaN,0):null}function Phe(e){return new io(e>>16&255,e>>8&255,e&255,1)}function XP(e,t,n,r){return r<=0&&(e=t=n=NaN),new io(e,t,n,r)}function GK(e){return e instanceof wy||(e=C1(e)),e?(e=e.rgb(),new io(e.r,e.g,e.b,e.opacity)):new io}function L0(e,t,n,r){return arguments.length===1?GK(e):new io(e,t,n,r??1)}function io(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Sx(io,L0,RI(wy,{brighter(e){return e=e==null?iE:Math.pow(iE,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?T1:Math.pow(T1,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new io(s1(this.r),s1(this.g),s1(this.b),C3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:khe,formatHex:khe,formatHex8:XAt,formatRgb:Rhe,toString:Rhe}));function khe(){return`#${Fv(this.r)}${Fv(this.g)}${Fv(this.b)}`}function XAt(){return`#${Fv(this.r)}${Fv(this.g)}${Fv(this.b)}${Fv((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rhe(){const e=C3(this.opacity);return`${e===1?"rgb(":"rgba("}${s1(this.r)}, ${s1(this.g)}, ${s1(this.b)}${e===1?")":`, ${e})`}`}function C3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function s1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fv(e){return e=s1(e),(e<16?"0":"")+e.toString(16)}function $he(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new df(e,t,n,r)}function HRe(e){if(e instanceof df)return new df(e.h,e.s,e.l,e.opacity);if(e instanceof wy||(e=C1(e)),!e)return new df;if(e instanceof df)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new df(o,a,u,e.opacity)}function WC(e,t,n,r){return arguments.length===1?HRe(e):new df(e,t,n,r??1)}function df(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Sx(df,WC,RI(wy,{brighter(e){return e=e==null?iE:Math.pow(iE,e),new df(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?T1:Math.pow(T1,e),new df(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new io($9(e>=240?e-240:e+120,i,r),$9(e,i,r),$9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new df(Nhe(this.h),QP(this.s),QP(this.l),C3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=C3(this.opacity);return`${e===1?"hsl(":"hsla("}${Nhe(this.h)}, ${QP(this.s)*100}%, ${QP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nhe(e){return e=(e||0)%360,e<0?e+360:e}function QP(e){return Math.max(0,Math.min(1,e||0))}function $9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const qRe=Math.PI/180,WRe=180/Math.PI,A3=18,GRe=.96422,YRe=1,KRe=.82521,XRe=4/29,_w=6/29,QRe=3*_w*_w,QAt=_w*_w*_w;function JRe(e){if(e instanceof nh)return new nh(e.l,e.a,e.b,e.opacity);if(e instanceof Np)return ZRe(e);e instanceof io||(e=GK(e));var t=L9(e.r),n=L9(e.g),r=L9(e.b),i=N9((.2225045*t+.7168786*n+.0606169*r)/YRe),s,o;return t===n&&n===r?s=o=i:(s=N9((.4360747*t+.3850649*n+.1430804*r)/GRe),o=N9((.0139322*t+.0971045*n+.7141733*r)/KRe)),new nh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function I3(e,t,n,r){return arguments.length===1?JRe(e):new nh(e,t,n,r??1)}function nh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Sx(nh,I3,RI(wy,{brighter(e){return new nh(this.l+A3*(e??1),this.a,this.b,this.opacity)},darker(e){return new nh(this.l-A3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=GRe*D9(t),e=YRe*D9(e),n=KRe*D9(n),new io(M9(3.1338561*t-1.6168667*e-.4906146*n),M9(-.9787684*t+1.9161415*e+.033454*n),M9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function N9(e){return e>QAt?Math.pow(e,1/3):e/QRe+XRe}function D9(e){return e>_w?e*e*e:QRe*(e-XRe)}function M9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function L9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function JAt(e){if(e instanceof Np)return new Np(e.h,e.c,e.l,e.opacity);if(e instanceof nh||(e=JRe(e)),e.a===0&&e.b===0)return new Np(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*WRe;return new Np(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function O3(e,t,n,r){return arguments.length===1?JAt(e):new Np(e,t,n,r??1)}function Np(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ZRe(e){if(isNaN(e.h))return new nh(e.l,0,0,e.opacity);var t=e.h*qRe;return new nh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Sx(Np,O3,RI(wy,{brighter(e){return new Np(this.h,this.c,this.l+A3*(e??1),this.opacity)},darker(e){return new Np(this.h,this.c,this.l-A3*(e??1),this.opacity)},rgb(){return ZRe(this).rgb()}}));var e$e=-.14861,YK=1.78277,KK=-.29227,U4=-.90649,GC=1.97294,Dhe=GC*U4,Mhe=GC*YK,Lhe=YK*KK-U4*e$e;function ZAt(e){if(e instanceof o1)return new o1(e.h,e.s,e.l,e.opacity);e instanceof io||(e=GK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Lhe*r+Dhe*t-Mhe*n)/(Lhe+Dhe-Mhe),s=r-i,o=(GC*(n-i)-KK*s)/U4,a=Math.sqrt(o*o+s*s)/(GC*i*(1-i)),u=a?Math.atan2(o,s)*WRe-120:NaN;return new o1(u<0?u+360:u,a,i,e.opacity)}function hV(e,t,n,r){return arguments.length===1?ZAt(e):new o1(e,t,n,r??1)}function o1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Sx(o1,hV,RI(wy,{brighter(e){return e=e==null?iE:Math.pow(iE,e),new o1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?T1:Math.pow(T1,e),new o1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*qRe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new io(255*(t+n*(e$e*r+YK*i)),255*(t+n*(KK*r+U4*i)),255*(t+n*(GC*r)),this.opacity)}}));function t$e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function n$e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return t$e((n-r/t)*t,o,i,s,a)}}function r$e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return t$e((n-r/t)*t,i,s,o,a)}}const V4=e=>()=>e;function i$e(e,t){return function(n){return e+n*t}}function eIt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function H4(e,t){var n=t-e;return n?i$e(e,n>180||n<-180?n-360*Math.round(n/360):n):V4(isNaN(e)?t:e)}function tIt(e){return(e=+e)==1?so:function(t,n){return n-t?eIt(t,n,e):V4(isNaN(t)?n:t)}}function so(e,t){var n=t-e;return n?i$e(e,n):V4(isNaN(e)?t:e)}const YC=function e(t){var n=tIt(t);function r(i,s){var o=n((i=L0(i)).r,(s=L0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=so(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function s$e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=L0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var nIt=s$e(n$e),rIt=s$e(r$e);function XK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function o$e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iIt(e,t){return(o$e(t)?XK:a$e)(e,t)}function a$e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Fm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function u$e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ic(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function l$e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Fm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var pV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,F9=new RegExp(pV.source,"g");function sIt(e){return function(){return e}}function oIt(e){return function(t){return e(t)+""}}function QK(e,t){var n=pV.lastIndex=F9.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=pV.exec(e))&&(i=F9.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:ic(r,i)})),n=F9.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?oIt(u[0].x):sIt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Fm(e,t){var n=typeof t,r;return t==null||n==="boolean"?V4(t):(n==="number"?ic:n==="string"?(r=C1(t))?(t=r,YC):QK:t instanceof C1?YC:t instanceof Date?u$e:o$e(t)?XK:Array.isArray(t)?a$e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?l$e:ic)(e,t)}function aIt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function uIt(e,t){var n=H4(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function $I(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Fhe=180/Math.PI,mV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function c$e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Fhe,skewX:Math.atan(u)*Fhe,scaleX:o,scaleY:a}}var JP;function lIt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?mV:c$e(t.a,t.b,t.c,t.d,t.e,t.f)}function cIt(e){return e==null||(JP||(JP=document.createElementNS("http://www.w3.org/2000/svg","g")),JP.setAttribute("transform",e),!(e=JP.transform.baseVal.consolidate()))?mV:(e=e.matrix,c$e(e.a,e.b,e.c,e.d,e.e,e.f))}function f$e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:ic(l,f)},{i:m-2,x:ic(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ic(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ic(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:ic(l,f)},{i:m-2,x:ic(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var d$e=f$e(lIt,"px, ","px)","deg)"),h$e=f$e(cIt,", ",")",")"),fIt=1e-12;function jhe(e){return((e=Math.exp(e))+1/e)/2}function dIt(e){return((e=Math.exp(e))-1/e)/2}function hIt(e){return((e=Math.exp(2*e))-1)/(e+1)}const pIt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<fIt)y=Math.log(d/l)/t,g=function(b){return[a+b*h,u+b*p,l*Math.exp(t*b*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),S=Math.log(Math.sqrt(_*_+1)-_),x=Math.log(Math.sqrt(w*w+1)-w);y=(x-S)/t,g=function(b){var T=b*y,A=jhe(S),I=l/(n*v)*(A*hIt(t*T+S)-dIt(S));return[a+I*h,u+I*p,l*A/jhe(t*T+S)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function p$e(e){return function(t,n){var r=e((t=WC(t)).h,(n=WC(n)).h),i=so(t.s,n.s),s=so(t.l,n.l),o=so(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const mIt=p$e(H4);var gIt=p$e(so);function yIt(e,t){var n=so((e=I3(e)).l,(t=I3(t)).l),r=so(e.a,t.a),i=so(e.b,t.b),s=so(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function m$e(e){return function(t,n){var r=e((t=O3(t)).h,(n=O3(n)).h),i=so(t.c,n.c),s=so(t.l,n.l),o=so(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const vIt=m$e(H4);var _It=m$e(so);function g$e(e){return function t(n){n=+n;function r(i,s){var o=e((i=hV(i)).h,(s=hV(s)).h),a=so(i.s,s.s),u=so(i.l,s.l),l=so(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const bIt=g$e(H4);var wIt=g$e(so);function JK(e,t){t===void 0&&(t=e,e=Fm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function EIt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const xIt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Fm,interpolateArray:iIt,interpolateBasis:n$e,interpolateBasisClosed:r$e,interpolateCubehelix:bIt,interpolateCubehelixLong:wIt,interpolateDate:u$e,interpolateDiscrete:aIt,interpolateHcl:vIt,interpolateHclLong:_It,interpolateHsl:mIt,interpolateHslLong:gIt,interpolateHue:uIt,interpolateLab:yIt,interpolateNumber:ic,interpolateNumberArray:XK,interpolateObject:l$e,interpolateRgb:YC,interpolateRgbBasis:nIt,interpolateRgbBasisClosed:rIt,interpolateRound:$I,interpolateString:QK,interpolateTransformCss:d$e,interpolateTransformSvg:h$e,interpolateZoom:pIt,piecewise:JK,quantize:EIt},Symbol.toStringTag,{value:"Module"}));var sE=0,NT=0,VS=0,y$e=1e3,P3,DT,k3=0,A1=0,q4=0,KC=typeof performance=="object"&&performance.now?performance:Date,v$e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function W4(){return A1||(v$e(SIt),A1=KC.now()+q4)}function SIt(){A1=0}function XC(){this._call=this._time=this._next=null}XC.prototype=ZK.prototype={constructor:XC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?W4():+n)+(t==null?0:+t),!this._next&&DT!==this&&(DT?DT._next=this:P3=this,DT=this),this._call=e,this._time=n,gV()},stop:function(){this._call&&(this._call=null,this._time=1/0,gV())}};function ZK(e,t,n){var r=new XC;return r.restart(e,t,n),r}function TIt(){W4(),++sE;for(var e=P3,t;e;)(t=A1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sE}function Bhe(){A1=(k3=KC.now())+q4,sE=NT=0;try{TIt()}finally{sE=0,AIt(),A1=0}}function CIt(){var e=KC.now(),t=e-k3;t>y$e&&(q4-=t,k3=e)}function AIt(){for(var e,t=P3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:P3=n);DT=e,gV(r)}function gV(e){if(!sE){NT&&(NT=clearTimeout(NT));var t=e-A1;t>24?(e<1/0&&(NT=setTimeout(Bhe,e-KC.now()-q4)),VS&&(VS=clearInterval(VS))):(VS||(k3=KC.now(),VS=setInterval(CIt,y$e)),sE=1,v$e(Bhe))}}function zhe(e,t,n){var r=new XC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function IIt(e,t,n){var r=new XC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?W4():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var OIt=B4("start","end","cancel","interrupt"),PIt=[],_$e=0,Uhe=1,yV=2,zR=3,Vhe=4,vV=5,UR=6;function G4(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;kIt(e,n,{name:t,index:r,group:i,on:OIt,tween:PIt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:_$e})}function eX(e,t){var n=Gf(e,t);if(n.state>_$e)throw new Error("too late; already scheduled");return n}function jh(e,t){var n=Gf(e,t);if(n.state>zR)throw new Error("too late; already running");return n}function Gf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kIt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=ZK(s,0,n.time);function s(l){n.state=Uhe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Uhe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===zR)return zhe(o);h.state===Vhe?(h.state=UR,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=UR,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(zhe(function(){n.state===zR&&(n.state=Vhe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=yV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===yV){for(n.state=zR,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=vV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===vV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=UR,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function _V(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>yV&&r.state<vV,r.state=UR,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function RIt(e){return this.each(function(){_V(this,e)})}function $It(e,t){var n,r;return function(){var i=jh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function NIt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=jh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function DIt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Gf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?$It:NIt)(n,e,t))}function tX(e,t,n){var r=e._id;return e.each(function(){var i=jh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Gf(i,r).value[t]}}function b$e(e,t){var n;return(typeof t=="number"?ic:t instanceof C1?YC:(n=C1(t))?(t=n,YC):QK)(e,t)}function MIt(e){return function(){this.removeAttribute(e)}}function LIt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function FIt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function jIt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function BIt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function zIt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function UIt(e,t){var n=z4(e),r=n==="transform"?h$e:b$e;return this.attrTween(e,typeof t=="function"?(n.local?zIt:BIt)(n,r,tX(this,"attr."+e,t)):t==null?(n.local?LIt:MIt)(n):(n.local?jIt:FIt)(n,r,t))}function VIt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function HIt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qIt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&HIt(e,s)),n}return i._value=t,i}function WIt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&VIt(e,s)),n}return i._value=t,i}function GIt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=z4(e);return this.tween(n,(r.local?qIt:WIt)(r,t))}function YIt(e,t){return function(){eX(this,e).delay=+t.apply(this,arguments)}}function KIt(e,t){return t=+t,function(){eX(this,e).delay=t}}function XIt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YIt:KIt)(t,e)):Gf(this.node(),t).delay}function QIt(e,t){return function(){jh(this,e).duration=+t.apply(this,arguments)}}function JIt(e,t){return t=+t,function(){jh(this,e).duration=t}}function ZIt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QIt:JIt)(t,e)):Gf(this.node(),t).duration}function eOt(e,t){if(typeof t!="function")throw new Error;return function(){jh(this,e).ease=t}}function tOt(e){var t=this._id;return arguments.length?this.each(eOt(t,e)):Gf(this.node(),t).ease}function nOt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;jh(this,e).ease=n}}function rOt(e){if(typeof e!="function")throw new Error;return this.each(nOt(this._id,e))}function iOt(e){typeof e!="function"&&(e=DRe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new hm(r,this._parents,this._name,this._id)}function sOt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new hm(o,this._parents,this._name,this._id)}function oOt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function aOt(e,t,n){var r,i,s=oOt(t)?eX:jh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function uOt(e,t){var n=this._id;return arguments.length<2?Gf(this.node(),n).on.on(e):this.each(aOt(n,e,t))}function lOt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function cOt(){return this.on("end.remove",lOt(this._id))}function fOt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=HK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,G4(l[d],t,n,d,l,Gf(c,n)));return new hm(s,this._parents,t,n)}function dOt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=NRe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Gf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&G4(h,t,n,m,d,p);s.push(d),o.push(c)}return new hm(s,o,t,n)}var hOt=kI.prototype.constructor;function pOt(){return new hOt(this._groups,this._parents)}function mOt(e,t){var n,r,i;return function(){var s=rE(this,e),o=(this.style.removeProperty(e),rE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function w$e(e){return function(){this.style.removeProperty(e)}}function gOt(e,t,n){var r,i=n+"",s;return function(){var o=rE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function yOt(e,t,n){var r,i,s;return function(){var o=rE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),rE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function vOt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=jh(this,e),l=u.on,c=u.value[s]==null?a||(a=w$e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function _Ot(e,t,n){var r=(e+="")=="transform"?d$e:b$e;return t==null?this.styleTween(e,mOt(e,r)).on("end.style."+e,w$e(e)):typeof t=="function"?this.styleTween(e,yOt(e,r,tX(this,"style."+e,t))).each(vOt(this._id,e)):this.styleTween(e,gOt(e,r,t),n).on("end.style."+e,null)}function bOt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function wOt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&bOt(e,o,n)),r}return s._value=t,s}function EOt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,wOt(e,t,n??""))}function xOt(e){return function(){this.textContent=e}}function SOt(e){return function(){var t=e(this);this.textContent=t??""}}function TOt(e){return this.tween("text",typeof e=="function"?SOt(tX(this,"text",e)):xOt(e==null?"":e+""))}function COt(e){return function(t){this.textContent=e.call(this,t)}}function AOt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&COt(i)),t}return r._value=e,r}function IOt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,AOt(e))}function OOt(){for(var e=this._name,t=this._id,n=E$e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Gf(u,t);G4(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new hm(r,this._parents,e,n)}function POt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=jh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var kOt=0;function hm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function E$e(){return++kOt}var op=kI.prototype;hm.prototype={constructor:hm,select:fOt,selectAll:dOt,selectChild:op.selectChild,selectChildren:op.selectChildren,filter:iOt,merge:sOt,selection:pOt,transition:OOt,call:op.call,nodes:op.nodes,node:op.node,size:op.size,empty:op.empty,each:op.each,on:uOt,attr:UIt,attrTween:GIt,style:_Ot,styleTween:EOt,text:TOt,textTween:IOt,remove:cOt,tween:DIt,delay:XIt,duration:ZIt,ease:tOt,easeVarying:rOt,end:POt,[Symbol.iterator]:op[Symbol.iterator]};function ROt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var $Ot={time:null,delay:0,duration:250,ease:ROt};function NOt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function DOt(e){var t,n;e instanceof hm?(t=e._id,e=e._name):(t=E$e(),(n=$Ot).time=W4(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&G4(u,e,t,l,o,n||NOt(u,t));return new hm(r,this._parents,e,t)}kI.prototype.interrupt=RIt;kI.prototype.transition=DOt;const j9=e=>()=>e;function MOt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function LOt(e){e.stopImmediatePropagation()}function B9(e){e.preventDefault(),e.stopImmediatePropagation()}var Hhe={name:"drag"},z9={name:"space"},Q_={name:"handle"},J_={name:"center"};const{abs:qhe,max:Ko,min:Xo}=Math;function Whe(e){return[+e[0],+e[1]]}function bV(e){return[Whe(e[0]),Whe(e[1])]}var VR={name:"x",handles:["w","e"].map(QC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},HR={name:"y",handles:["n","s"].map(QC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},FOt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(QC),input:function(e){return e==null?null:bV(e)},output:function(e){return e}},ap={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ghe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Yhe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},jOt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},BOt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function QC(e){return{type:e}}function zOt(e){return!e.ctrlKey&&!e.button}function UOt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function VOt(){return navigator.maxTouchPoints||"ontouchstart"in this}function U9(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function HOt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function qOt(){return nX(VR)}function WOt(){return nX(HR)}function GOt(){return nX(FOt)}function nX(e){var t=UOt,n=zOt,r=VOt,i=!0,s=B4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([QC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ap.overlay).merge(y).each(function(){var _=U9(this).extent;So(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([QC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ap.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return ap[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,S=c(_,arguments),x=w.selection,b=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=Fm(x,b);function A(I){w.selection=I===1&&b===null?null:T(I),l.call(_),S.brush()}return x!==null&&b!==null?A:A(1)}):g.each(function(){var _=this,w=arguments,S=_.__brush,x=e.input(typeof y=="function"?y.apply(_,w):y,S.extent),b=c(_,w).beforestart();_V(_),S.selection=x===null?null:x,l.call(_),b.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=So(this),y=U9(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=So(this.that).datum();s.call(g,this.that,new MOt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?Hhe:i&&g.altKey?J_:Q_,w=e===HR?null:jOt[v],S=e===VR?null:BOt[v],x=U9(y),b=x.extent,T=x.selection,A=b[0][0],I,k,R=b[0][1],P,N,F=b[1][0],B,W,V=b[1][1],G,M,H=0,Y=0,L,j=w&&S&&i&&g.shiftKey,q,Z,ue=Array.from(g.touches||[g],Re=>{const Ye=Re.identifier;return Re=Che(Re,y),Re.point0=Re.slice(),Re.identifier=Ye,Re});_V(y);var he=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(L=!0);const Re=[ue[0],ue[1]||ue[0]];x.selection=T=[[I=e===HR?A:Xo(Re[0][0],Re[1][0]),P=e===VR?R:Xo(Re[0][1],Re[1][1])],[B=e===HR?F:Ko(Re[0][0],Re[1][0]),G=e===VR?V:Ko(Re[0][1],Re[1][1])]],ue.length>1&&Be(g)}else I=T[0][0],P=T[0][1],B=T[1][0],G=T[1][1];k=I,N=P,W=B,M=G;var fe=So(y).attr("pointer-events","none"),me=fe.selectAll(".overlay").attr("cursor",ap[v]);if(g.touches)he.moved=ge,he.ended=Me;else{var _e=So(g.view).on("mousemove.brush",ge,!0).on("mouseup.brush",Me,!0);i&&_e.on("keydown.brush",ut,!0).on("keyup.brush",Oe,!0),jAt(g.view)}l.call(y),he.start(g,_.name);function ge(Re){for(const Ye of Re.changedTouches||[Re])for(const Ut of ue)Ut.identifier===Ye.identifier&&(Ut.cur=Che(Ye,y));if(j&&!q&&!Z&&ue.length===1){const Ye=ue[0];qhe(Ye.cur[0]-Ye[0])>qhe(Ye.cur[1]-Ye[1])?Z=!0:q=!0}for(const Ye of ue)Ye.cur&&(Ye[0]=Ye.cur[0],Ye[1]=Ye.cur[1]);L=!0,B9(Re),Be(Re)}function Be(Re){const Ye=ue[0],Ut=Ye.point0;var Ft;switch(H=Ye[0]-Ut[0],Y=Ye[1]-Ut[1],_){case z9:case Hhe:{w&&(H=Ko(A-I,Xo(F-B,H)),k=I+H,W=B+H),S&&(Y=Ko(R-P,Xo(V-G,Y)),N=P+Y,M=G+Y);break}case Q_:{ue[1]?(w&&(k=Ko(A,Xo(F,ue[0][0])),W=Ko(A,Xo(F,ue[1][0])),w=1),S&&(N=Ko(R,Xo(V,ue[0][1])),M=Ko(R,Xo(V,ue[1][1])),S=1)):(w<0?(H=Ko(A-I,Xo(F-I,H)),k=I+H,W=B):w>0&&(H=Ko(A-B,Xo(F-B,H)),k=I,W=B+H),S<0?(Y=Ko(R-P,Xo(V-P,Y)),N=P+Y,M=G):S>0&&(Y=Ko(R-G,Xo(V-G,Y)),N=P,M=G+Y));break}case J_:{w&&(k=Ko(A,Xo(F,I-H*w)),W=Ko(A,Xo(F,B+H*w))),S&&(N=Ko(R,Xo(V,P-Y*S)),M=Ko(R,Xo(V,G+Y*S)));break}}W<k&&(w*=-1,Ft=I,I=B,B=Ft,Ft=k,k=W,W=Ft,v in Ghe&&me.attr("cursor",ap[v=Ghe[v]])),M<N&&(S*=-1,Ft=P,P=G,G=Ft,Ft=N,N=M,M=Ft,v in Yhe&&me.attr("cursor",ap[v=Yhe[v]])),x.selection&&(T=x.selection),q&&(k=T[0][0],W=T[1][0]),Z&&(N=T[0][1],M=T[1][1]),(T[0][0]!==k||T[0][1]!==N||T[1][0]!==W||T[1][1]!==M)&&(x.selection=[[k,N],[W,M]],l.call(y),he.brush(Re,_.name))}function Me(Re){if(LOt(Re),Re.touches){if(Re.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else BAt(Re.view,L),_e.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);fe.attr("pointer-events","all"),me.attr("cursor",ap.overlay),x.selection&&(T=x.selection),HOt(T)&&(x.selection=null,l.call(y)),he.end(Re,_.name)}function ut(Re){switch(Re.keyCode){case 16:{j=w&&S;break}case 18:{_===Q_&&(w&&(B=W-H*w,I=k+H*w),S&&(G=M-Y*S,P=N+Y*S),_=J_,Be(Re));break}case 32:{(_===Q_||_===J_)&&(w<0?B=W-H:w>0&&(I=k-H),S<0?G=M-Y:S>0&&(P=N-Y),_=z9,me.attr("cursor",ap.selection),Be(Re));break}default:return}B9(Re)}function Oe(Re){switch(Re.keyCode){case 16:{j&&(q=Z=j=!1,Be(Re));break}case 18:{_===J_&&(w<0?B=W:w>0&&(I=k),S<0?G=M:S>0&&(P=N),_=Q_,Be(Re));break}case 32:{_===z9&&(Re.altKey?(w&&(B=W-H*w,I=k+H*w),S&&(G=M-Y*S,P=N+Y*S),_=J_):(w<0?B=W:w>0&&(I=k),S<0?G=M:S>0&&(P=N),_=Q_),me.attr("cursor",ap[v]),Be(Re));break}default:return}B9(Re)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=bV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:j9(bV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:j9(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:j9(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const wV=Math.PI,EV=2*wV,uv=1e-6,YOt=EV-uv;function x$e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function KOt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return x$e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let rX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?x$e:KOt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>uv)if(!(Math.abs(f*u-l*c)>uv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((wV-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,S=_/y;Math.abs(w-1)>uv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+S*u},${this._y1=n+S*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>uv||Math.abs(this._y1-c)>uv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%EV+EV),d>YOt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>uv&&this._append`A${r},${r},0,${+(d>=wV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Y4(){return new rX}Y4.prototype=rX.prototype;const Kp=11102230246251565e-32,Qo=134217729,XOt=(3+8*Kp)*Kp;function V9(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function QOt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function NI(e){return new Float64Array(e)}const JOt=(3+16*Kp)*Kp,ZOt=(2+12*Kp)*Kp,ePt=(9+64*Kp)*Kp*Kp,Z_=NI(4),Khe=NI(8),Xhe=NI(12),Qhe=NI(16),Pa=NI(4);function tPt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,S,x,b,T;const A=e-i,I=n-i,k=t-s,R=r-s;w=A*R,d=Qo*A,h=d-(d-A),p=A-h,d=Qo*R,m=d-(d-R),g=R-m,S=p*g-(w-h*m-p*m-h*g),x=k*I,d=Qo*k,h=d-(d-k),p=k-h,d=Qo*I,m=d-(d-I),g=I-m,b=p*g-(x-h*m-p*m-h*g),y=S-b,f=S-y,Z_[0]=S-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Z_[1]=_-(y+f)+(f-x),T=v+y,f=T-v,Z_[2]=v-(T-f)+(y-f),Z_[3]=T;let P=QOt(4,Z_),N=ZOt*o;if(P>=N||-P>=N||(f=e-A,a=e-(A+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-k,u=t-(k+f)+(f-s),f=r-R,c=r-(R+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(N=ePt*o+XOt*Math.abs(P),P+=A*c+R*a-(k*l+I*u),P>=N||-P>=N))return P;w=a*R,d=Qo*a,h=d-(d-a),p=a-h,d=Qo*R,m=d-(d-R),g=R-m,S=p*g-(w-h*m-p*m-h*g),x=u*I,d=Qo*u,h=d-(d-u),p=u-h,d=Qo*I,m=d-(d-I),g=I-m,b=p*g-(x-h*m-p*m-h*g),y=S-b,f=S-y,Pa[0]=S-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Pa[1]=_-(y+f)+(f-x),T=v+y,f=T-v,Pa[2]=v-(T-f)+(y-f),Pa[3]=T;const F=V9(4,Z_,4,Pa,Khe);w=A*c,d=Qo*A,h=d-(d-A),p=A-h,d=Qo*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),x=k*l,d=Qo*k,h=d-(d-k),p=k-h,d=Qo*l,m=d-(d-l),g=l-m,b=p*g-(x-h*m-p*m-h*g),y=S-b,f=S-y,Pa[0]=S-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Pa[1]=_-(y+f)+(f-x),T=v+y,f=T-v,Pa[2]=v-(T-f)+(y-f),Pa[3]=T;const B=V9(F,Khe,4,Pa,Xhe);w=a*c,d=Qo*a,h=d-(d-a),p=a-h,d=Qo*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),x=u*l,d=Qo*u,h=d-(d-u),p=u-h,d=Qo*l,m=d-(d-l),g=l-m,b=p*g-(x-h*m-p*m-h*g),y=S-b,f=S-y,Pa[0]=S-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-x,f=_-y,Pa[1]=_-(y+f)+(f-x),T=v+y,f=T-v,Pa[2]=v-(T-f)+(y-f),Pa[3]=T;const W=V9(B,Xhe,4,Pa,Qhe);return Qhe[W-1]}function ZP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=JOt*l?u:-tPt(e,t,n,r,i,s,l)}const Jhe=Math.pow(2,-52),ek=new Uint32Array(512);class R3{static from(t,n=oPt,r=aPt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new R3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const I=t[2*A],k=t[2*A+1];I<a&&(a=I),k<u&&(u=k),I>l&&(l=I),k>c&&(c=k),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,I=1/0;A<o;A++){const k=H9(f,d,t[2*A],t[2*A+1]);k<I&&(h=A,I=k)}const g=t[2*h],y=t[2*h+1];for(let A=0,I=1/0;A<o;A++){if(A===h)continue;const k=H9(g,y,t[2*A],t[2*A+1]);k<I&&k>0&&(p=A,I=k)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const I=iPt(g,y,v,_,t[2*A],t[2*A+1]);I<w&&(m=A,w=I)}let S=t[2*m],x=t[2*m+1];if(w===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Vb(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let I=0;for(let k=0,R=-1/0;k<o;k++){const P=this._ids[k],N=this._dists[P];N>R&&(A[I++]=P,R=N)}this.hull=A.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(ZP(g,y,v,_,S,x)<0){const A=p,I=v,k=_;p=m,v=S,_=x,m=A,S=I,x=k}const b=sPt(g,y,v,_,S,x);this._cx=b.x,this._cy=b.y;for(let A=0;A<o;A++)this._dists[A]=H9(t[2*A],t[2*A+1],b.x,b.y);Vb(this._ids,this._dists,0,o-1),this._hullStart=h;let T=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(S,x)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,I,k;A<this._ids.length;A++){const R=this._ids[A],P=t[2*R],N=t[2*R+1];if(A>0&&Math.abs(P-I)<=Jhe&&Math.abs(N-k)<=Jhe||(I=P,k=N,R===h||R===p||R===m))continue;let F=0;for(let M=0,H=this._hashKey(P,N);M<this._hashSize&&(F=s[(H+M)%this._hashSize],!(F!==-1&&F!==r[F]));M++);F=n[F];let B=F,W;for(;W=r[B],ZP(P,N,t[2*B],t[2*B+1],t[2*W],t[2*W+1])>=0;)if(B=W,B===F){B=-1;break}if(B===-1)continue;let V=this._addTriangle(B,R,r[B],-1,-1,i[B]);i[R]=this._legalize(V+2),i[B]=V,T++;let G=r[B];for(;W=r[G],ZP(P,N,t[2*G],t[2*G+1],t[2*W],t[2*W+1])<0;)V=this._addTriangle(G,R,W,i[R],-1,i[G]),i[R]=this._legalize(V+2),r[G]=G,T--,G=W;if(B===F)for(;W=n[B],ZP(P,N,t[2*W],t[2*W+1],t[2*B],t[2*B+1])<0;)V=this._addTriangle(W,R,B,-1,i[B],i[W]),this._legalize(V+2),i[W]=V,r[B]=B,T--,B=W;this._hullStart=n[R]=B,r[B]=n[G]=R,r[R]=G,s[this._hashKey(P,N)]=R,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(T);for(let A=0,I=this._hullStart;A<T;A++)this.hull[A]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(nPt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=ek[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(rPt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<ek.length&&(ek[s++]=v)}else{if(s===0)break;t=ek[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function nPt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function H9(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function rPt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function iPt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function sPt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Vb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;HS(e,i,s),t[e[n]]>t[e[r]]&&HS(e,n,r),t[e[s]]>t[e[r]]&&HS(e,s,r),t[e[n]]>t[e[s]]&&HS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;HS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Vb(e,t,s,r),Vb(e,t,n,o-1)):(Vb(e,t,n,o-1),Vb(e,t,s,r))}}function HS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function oPt(e){return e[0]}function aPt(e){return e[1]}const Zhe=1e-6;class jv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Zhe||Math.abs(this._y1-s)>Zhe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class xV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let uPt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,S=r[m+1]*2,x=r[m+2]*2,b=t[w],T=t[w+1],A=t[S],I=t[S+1],k=t[x],R=t[x+1],P=A-b,N=I-T,F=k-b,B=R-T,W=(P*B-N*F)*2;if(Math.abs(W)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const V=1e9*Math.sign((s-b)*B-(o-T)*F);v=(b+k)/2-V*B,_=(T+R)/2+V*F}else{const V=1/W,G=P*P+N*N,M=F*F+B*B;v=b+(B*G-N*M)*V,_=T+(P*M-F*G)*V}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new jv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new jv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new jv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new xV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const lPt=2*Math.PI,eb=Math.pow;function cPt(e){return e[0]}function fPt(e){return e[1]}function dPt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function hPt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class iX{static from(t,n=cPt,r=fPt,i){return new iX("length"in t?pPt(t,n,r,i):Float64Array.from(mPt(t,n,r,i)))}constructor(t){this._delaunator=new R3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&dPt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=hPt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new R3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new uPt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=eb(n-l[t*2],2)+eb(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=eb(n-l[p*2],2)+eb(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&eb(n-l[h*2],2)+eb(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new jv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new jv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,lPt)}return r&&r.value()}renderHull(t){const n=t==null?t=new jv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new xV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new jv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new xV;return this.renderTriangle(t,n),n.value()}}function pPt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*mPt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var epe={},q9={},W9=34,qS=10,G9=13;function S$e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function gPt(e,t){var n=S$e(e);return function(r,i){return t(n(r),i,e)}}function tpe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function yPt(e){return e<0?"-"+pu(-e,6):e>9999?"+"+pu(e,6):pu(e,4)}function vPt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":yPt(e.getUTCFullYear())+"-"+pu(e.getUTCMonth()+1,2)+"-"+pu(e.getUTCDate(),2)+(i?"T"+pu(t,2)+":"+pu(n,2)+":"+pu(r,2)+"."+pu(i,3)+"Z":r?"T"+pu(t,2)+":"+pu(n,2)+":"+pu(r,2)+"Z":n||t?"T"+pu(t,2)+":"+pu(n,2)+"Z":"")}function T$e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?gPt(g,d):S$e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===qS&&--p,f.charCodeAt(p-1)===G9&&--p;function w(){if(v)return q9;if(_)return _=!1,epe;var x,b=m,T;if(f.charCodeAt(b)===W9){for(;m++<p&&f.charCodeAt(m)!==W9||f.charCodeAt(++m)===W9;);return(x=m)>=p?v=!0:(T=f.charCodeAt(m++))===qS?_=!0:T===G9&&(_=!0,f.charCodeAt(m)===qS&&++m),f.slice(b+1,x-1).replace(/""/g,'"')}for(;m<p;){if((T=f.charCodeAt(x=m++))===qS)_=!0;else if(T===G9)_=!0,f.charCodeAt(m)===qS&&++m;else if(T!==n)continue;return f.slice(b,x)}return v=!0,f.slice(b,p)}for(;(y=w())!==q9;){for(var S=[];y!==epe&&y!==q9;)S.push(y),y=w();d&&(S=d(S,g++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=tpe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=tpe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?vPt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var _Pt=T$e(","),bPt=_Pt.parse;function wPt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function EPt(e,t){return fetch(e,t).then(wPt)}function xPt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),EPt(t,n).then(function(i){return e(i,r)})}}var SPt=xPt(bPt);function TPt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function CPt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return C$e(this.cover(t,n),t,n,e)}function C$e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function APt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)C$e(this,o[n],a[n],e[n]);return this}function IPt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function OPt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function PPt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ba(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function kPt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ba(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ba(h[3],g,y,u,l),new Ba(h[2],o,y,g,l),new Ba(h[1],g,a,u,y),new Ba(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var S=Math.sqrt(n=w);i=e-S,s=t-S,c=e+S,f=t+S,r=h.data}}return r}function RPt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function $Pt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function NPt(){return this._root}function DPt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function MPt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ba(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ba(i,l,c,a,u)),(i=r[2])&&t.push(new Ba(i,s,c,l,u)),(i=r[1])&&t.push(new Ba(i,l,o,a,c)),(i=r[0])&&t.push(new Ba(i,s,o,l,c))}return this}function LPt(e){var t=[],n=[],r;for(this._root&&t.push(new Ba(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ba(s,o,a,c,f)),(s=i[1])&&t.push(new Ba(s,c,a,u,f)),(s=i[2])&&t.push(new Ba(s,o,f,c,l)),(s=i[3])&&t.push(new Ba(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function FPt(e){return e[0]}function jPt(e){return arguments.length?(this._x=e,this):this._x}function BPt(e){return e[1]}function zPt(e){return arguments.length?(this._y=e,this):this._y}function sX(e,t,n){var r=new oX(t??FPt,n??BPt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function oX(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function npe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var iu=sX.prototype=oX.prototype;iu.copy=function(){var e=new oX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=npe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=npe(r));return e};iu.add=CPt;iu.addAll=APt;iu.cover=IPt;iu.data=OPt;iu.extent=PPt;iu.find=kPt;iu.remove=RPt;iu.removeAll=$Pt;iu.root=NPt;iu.size=DPt;iu.visit=MPt;iu.visitAfter=LPt;iu.x=jPt;iu.y=zPt;function Va(e){return function(){return e}}function Hg(e){return(e()-.5)*1e-6}function UPt(e){return e.x+e.vx}function VPt(e){return e.y+e.vy}function HPt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Va(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=sX(t,UPt,VPt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,S,x,b){var T=_.data,A=_.r,I=m+A;if(T){if(T.index>d.index){var k=h-T.x-T.vx,R=p-T.y-T.vy,P=k*k+R*R;P<I*I&&(k===0&&(k=Hg(r),P+=k*k),R===0&&(R=Hg(r),P+=R*R),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(k*=P)*(I=(A*=A)/(g+A)),d.vy+=(R*=P)*I,T.vx-=k*(I=1-I),T.vy-=R*I)}return}return w>h+I||x<h-I||S>p+I||b<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Va(+l),u(),o):e},o}function qPt(e){return e.index}function rpe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function WPt(e){var t=qPt,n=f,r,i=Va(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,S,x,b,T,A,I;_<v;++_)w=e[_],S=w.source,x=w.target,b=x.x+x.vx-S.x-S.vx||Hg(l),T=x.y+x.vy-S.y-S.vy||Hg(l),A=Math.sqrt(b*b+T*T),A=(A-s[_])/A*g*r[_],b*=A,T*=A,x.vx-=b*(I=u[_]),x.vy-=T*I,S.vx+=b*(I=1-I),S.vy+=T*I}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((S,x)=>[t(S,x,o),S])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=rpe(_,w.source)),typeof w.target!="object"&&(w.target=rpe(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Va(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Va(+g),m(),d):i},d}const GPt=1664525,YPt=1013904223,ipe=4294967296;function KPt(){let e=1;return()=>(e=(GPt*e+YPt)%ipe)/ipe}function XPt(e){return e.x}function QPt(e){return e.y}var JPt=10,ZPt=Math.PI*(3-Math.sqrt(5));function ekt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=ZK(f),l=B4("tick","end"),c=KPt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=JPt*Math.sqrt(.5+m),_=m*ZPt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,S,x,b,T;for(y==null?y=1/0:y*=y,v=0;v<_;++v)b=e[v],w=m-b.x,S=g-b.y,x=w*w+S*S,x<y&&(T=b,y=x);return T},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function tkt(){var e,t,n,r,i=Va(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=sX(e,XPt,QPt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=Hg(n),w+=y*y),v===0&&(v=Hg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Hg(n),w+=y*y),v===0&&(v=Hg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Va(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function nkt(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function rkt(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function ikt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function oE(e){return e=$3(Math.abs(e)),e?e[1]:NaN}function skt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function okt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var akt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function I1(e){if(!(t=akt.exec(e)))throw new Error("invalid format: "+e);var t;return new aX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}I1.prototype=aX.prototype;function aX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}aX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ukt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var A$e;function lkt(e,t){var n=$3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(A$e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+$3(e,Math.max(0,t+s-1))[0]}function spe(e,t){var n=$3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ope={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ikt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>spe(e*100,t),r:spe,s:lkt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ape(e){return e}var upe=Array.prototype.map,lpe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function I$e(e){var t=e.grouping===void 0||e.thousands===void 0?ape:skt(upe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ape:okt(upe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=I1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,S=f.type;S==="n"?(v=!0,S="g"):ope[S]||(_===void 0&&(_=12),w=!0,S="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",b=m==="$"?r:/[%p]/.test(S)?o:"",T=ope[S],A=/[defgprs%]/.test(S);_=_===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(k){var R=x,P=b,N,F,B;if(S==="c")P=T(k)+P,k="";else{k=+k;var W=k<0||1/k<0;if(k=isNaN(k)?u:T(Math.abs(k),_),w&&(k=ukt(k)),W&&+k==0&&p!=="+"&&(W=!1),R=(W?p==="("?p:a:p==="-"||p==="("?"":p)+R,P=(S==="s"?lpe[8+A$e/3]:"")+P+(W&&p==="("?")":""),A){for(N=-1,F=k.length;++N<F;)if(B=k.charCodeAt(N),48>B||B>57){P=(B===46?i+k.slice(N+1):k.slice(N))+P,k=k.slice(0,N);break}}}v&&!g&&(k=t(k,1/0));var V=R.length+k.length+P.length,G=V<y?new Array(y-V+1).join(d):"";switch(v&&g&&(k=t(G+k,G.length?y-P.length:1/0),G=""),h){case"<":k=R+k+P+G;break;case"=":k=R+G+k+P;break;case"^":k=G.slice(0,V=G.length>>1)+R+k+P+G.slice(V);break;default:k=G+R+k+P;break}return s(k)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=I1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(oE(d)/3)))*3,m=Math.pow(10,-p),g=lpe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var tk,Tx,uX;ckt({thousands:",",grouping:[3],currency:["$",""]});function ckt(e){return tk=I$e(e),Tx=tk.format,uX=tk.formatPrefix,tk}function O$e(e){return Math.max(0,-oE(Math.abs(e)))}function P$e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oE(t)/3)))*3-oE(Math.abs(e)))}function k$e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,oE(t)-oE(e))+1}var Yt=1e-6,N3=1e-12,Bn=Math.PI,Ji=Bn/2,D3=Bn/4,Qa=Bn*2,os=180/Bn,Ln=Bn/180,er=Math.abs,Cx=Math.atan,xc=Math.atan2,Zt=Math.cos,nk=Math.ceil,R$e=Math.exp,SV=Math.hypot,M3=Math.log,Y9=Math.pow,qt=Math.sin,cc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,lX=Math.tan;function $$e(e){return e>1?0:e<-1?Bn:Math.acos(e)}function zu(e){return e>1?Ji:e<-1?-Ji:Math.asin(e)}function Po(){}function L3(e,t){e&&fpe.hasOwnProperty(e.type)&&fpe[e.type](e,t)}var cpe={Feature:function(e,t){L3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)L3(n[r].geometry,t)}},fpe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){TV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)TV(n[r],t,0)},Polygon:function(e,t){dpe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dpe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)L3(n[r],t)}};function TV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function dpe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)TV(e[n],t,1);t.polygonEnd()}function Sp(e,t){e&&cpe.hasOwnProperty(e.type)?cpe[e.type](e,t):L3(e,t)}var F3=new qa,j3=new qa,N$e,D$e,CV,AV,IV,gh={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){F3=new qa,gh.lineStart=fkt,gh.lineEnd=dkt},polygonEnd:function(){var e=+F3;j3.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=Po},sphere:function(){j3.add(Qa)}};function fkt(){gh.point=hkt}function dkt(){M$e(N$e,D$e)}function hkt(e,t){gh.point=M$e,N$e=e,D$e=t,e*=Ln,t*=Ln,CV=e,AV=Zt(t=t/2+D3),IV=qt(t)}function M$e(e,t){e*=Ln,t*=Ln,t=t/2+D3;var n=e-CV,r=n>=0?1:-1,i=r*n,s=Zt(t),o=qt(t),a=IV*o,u=AV*s+a*Zt(i),l=a*r*qt(i);F3.add(xc(l,u)),CV=e,AV=s,IV=o}function pkt(e){return j3=new qa,Sp(e,gh),j3*2}function B3(e){return[xc(e[1],e[0]),zu(e[2])]}function O1(e){var t=e[0],n=e[1],r=Zt(n);return[r*Zt(t),r*qt(t),qt(n)]}function rk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function aE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function K9(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ik(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function z3(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Fi,wu,Hi,fl,lv,L$e,F$e,bw,N2,Sg,pm,bp={point:OV,lineStart:hpe,lineEnd:ppe,polygonStart:function(){bp.point=B$e,bp.lineStart=mkt,bp.lineEnd=gkt,N2=new qa,gh.polygonStart()},polygonEnd:function(){gh.polygonEnd(),bp.point=OV,bp.lineStart=hpe,bp.lineEnd=ppe,F3<0?(Fi=-(Hi=180),wu=-(fl=90)):N2>Yt?fl=90:N2<-Yt&&(wu=-90),pm[0]=Fi,pm[1]=Hi},sphere:function(){Fi=-(Hi=180),wu=-(fl=90)}};function OV(e,t){Sg.push(pm=[Fi=e,Hi=e]),t<wu&&(wu=t),t>fl&&(fl=t)}function j$e(e,t){var n=O1([e*Ln,t*Ln]);if(bw){var r=aE(bw,n),i=[r[1],-r[0],0],s=aE(i,r);z3(s),s=B3(s);var o=e-lv,a=o>0?1:-1,u=s[0]*os*a,l,c=er(o)>180;c^(a*lv<u&&u<a*e)?(l=s[1]*os,l>fl&&(fl=l)):(u=(u+360)%360-180,c^(a*lv<u&&u<a*e)?(l=-s[1]*os,l<wu&&(wu=l)):(t<wu&&(wu=t),t>fl&&(fl=t))),c?e<lv?ll(Fi,e)>ll(Fi,Hi)&&(Hi=e):ll(e,Hi)>ll(Fi,Hi)&&(Fi=e):Hi>=Fi?(e<Fi&&(Fi=e),e>Hi&&(Hi=e)):e>lv?ll(Fi,e)>ll(Fi,Hi)&&(Hi=e):ll(e,Hi)>ll(Fi,Hi)&&(Fi=e)}else Sg.push(pm=[Fi=e,Hi=e]);t<wu&&(wu=t),t>fl&&(fl=t),bw=n,lv=e}function hpe(){bp.point=j$e}function ppe(){pm[0]=Fi,pm[1]=Hi,bp.point=OV,bw=null}function B$e(e,t){if(bw){var n=e-lv;N2.add(er(n)>180?n+(n>0?360:-360):n)}else L$e=e,F$e=t;gh.point(e,t),j$e(e,t)}function mkt(){gh.lineStart()}function gkt(){B$e(L$e,F$e),gh.lineEnd(),er(N2)>Yt&&(Fi=-(Hi=180)),pm[0]=Fi,pm[1]=Hi,bw=null}function ll(e,t){return(t-=e)<0?t+360:t}function ykt(e,t){return e[0]-t[0]}function mpe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function vkt(e){var t,n,r,i,s,o,a;if(fl=Hi=-(Fi=wu=1/0),Sg=[],Sp(e,bp),n=Sg.length){for(Sg.sort(ykt),t=1,r=Sg[0],s=[r];t<n;++t)i=Sg[t],mpe(r,i[0])||mpe(r,i[1])?(ll(r[0],i[1])>ll(r[0],r[1])&&(r[1]=i[1]),ll(i[0],r[1])>ll(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=ll(r[1],i[0]))>o&&(o=a,Fi=i[0],Hi=r[1])}return Sg=pm=null,Fi===1/0||wu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fi,wu],[Hi,fl]]}var MT,U3,V3,H3,q3,W3,G3,Y3,PV,kV,RV,z$e,U$e,La,Fa,ja,vf={sphere:Po,point:cX,lineStart:gpe,lineEnd:ype,polygonStart:function(){vf.lineStart=wkt,vf.lineEnd=Ekt},polygonEnd:function(){vf.lineStart=gpe,vf.lineEnd=ype}};function cX(e,t){e*=Ln,t*=Ln;var n=Zt(t);DI(n*Zt(e),n*qt(e),qt(t))}function DI(e,t,n){++MT,V3+=(e-V3)/MT,H3+=(t-H3)/MT,q3+=(n-q3)/MT}function gpe(){vf.point=_kt}function _kt(e,t){e*=Ln,t*=Ln;var n=Zt(t);La=n*Zt(e),Fa=n*qt(e),ja=qt(t),vf.point=bkt,DI(La,Fa,ja)}function bkt(e,t){e*=Ln,t*=Ln;var n=Zt(t),r=n*Zt(e),i=n*qt(e),s=qt(t),o=xc(Ja((o=Fa*s-ja*i)*o+(o=ja*r-La*s)*o+(o=La*i-Fa*r)*o),La*r+Fa*i+ja*s);U3+=o,W3+=o*(La+(La=r)),G3+=o*(Fa+(Fa=i)),Y3+=o*(ja+(ja=s)),DI(La,Fa,ja)}function ype(){vf.point=cX}function wkt(){vf.point=xkt}function Ekt(){V$e(z$e,U$e),vf.point=cX}function xkt(e,t){z$e=e,U$e=t,e*=Ln,t*=Ln,vf.point=V$e;var n=Zt(t);La=n*Zt(e),Fa=n*qt(e),ja=qt(t),DI(La,Fa,ja)}function V$e(e,t){e*=Ln,t*=Ln;var n=Zt(t),r=n*Zt(e),i=n*qt(e),s=qt(t),o=Fa*s-ja*i,a=ja*r-La*s,u=La*i-Fa*r,l=SV(o,a,u),c=zu(l),f=l&&-c/l;PV.add(f*o),kV.add(f*a),RV.add(f*u),U3+=c,W3+=c*(La+(La=r)),G3+=c*(Fa+(Fa=i)),Y3+=c*(ja+(ja=s)),DI(La,Fa,ja)}function Skt(e){MT=U3=V3=H3=q3=W3=G3=Y3=0,PV=new qa,kV=new qa,RV=new qa,Sp(e,vf);var t=+PV,n=+kV,r=+RV,i=SV(t,n,r);return i<N3&&(t=W3,n=G3,r=Y3,U3<Yt&&(t=V3,n=H3,r=q3),i=SV(t,n,r),i<N3)?[NaN,NaN]:[xc(n,t)*os,zu(r/i)*os]}function $V(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function NV(e,t){return er(e)>Bn&&(e-=Math.round(e/Qa)*Qa),[e,t]}NV.invert=NV;function H$e(e,t,n){return(e%=Qa)?t||n?$V(_pe(e),bpe(t,n)):_pe(e):t||n?bpe(t,n):NV}function vpe(e){return function(t,n){return t+=e,er(t)>Bn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function _pe(e){var t=vpe(e);return t.invert=vpe(-e),t}function bpe(e,t){var n=Zt(e),r=qt(e),i=Zt(t),s=qt(t);function o(a,u){var l=Zt(u),c=Zt(a)*l,f=qt(a)*l,d=qt(u),h=d*n+c*r;return[xc(f*i-h*s,c*n-d*r),zu(h*i+f*s)]}return o.invert=function(a,u){var l=Zt(u),c=Zt(a)*l,f=qt(a)*l,d=qt(u),h=d*i-f*s;return[xc(f*i+d*s,c*n+h*r),zu(h*n-c*r)]},o}function Tkt(e){e=H$e(e[0]*Ln,e[1]*Ln,e.length>2?e[2]*Ln:0);function t(n){return n=e(n[0]*Ln,n[1]*Ln),n[0]*=os,n[1]*=os,n}return t.invert=function(n){return n=e.invert(n[0]*Ln,n[1]*Ln),n[0]*=os,n[1]*=os,n},t}function Ckt(e,t,n,r,i,s){if(n){var o=Zt(t),a=qt(t),u=r*n;i==null?(i=t+r*Qa,s=t-u/2):(i=wpe(o,i),s=wpe(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=B3([o,-a*Zt(c),-a*qt(c)]),e.point(l[0],l[1])}}function wpe(e,t){t=O1(t),t[0]-=e,z3(t);var n=$$e(-t[1]);return((-t[2]<0?-n:n)+Qa-Yt)%Qa}function q$e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Po,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function qR(e,t){return er(e[0]-t[0])<Yt&&er(e[1]-t[1])<Yt}function sk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function W$e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(qR(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Yt}s.push(v=new sk(g,p,null,!0)),o.push(v.o=new sk(g,null,v,!1)),s.push(v=new sk(y,p,null,!1)),o.push(v.o=new sk(y,null,v,!0))}}),!!s.length){for(o.sort(t),Epe(s),Epe(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Epe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function X9(e){return er(e[0])<=Bn?e[0]:cc(e[0])*((er(e[0])+Bn)%Qa-Bn)}function Akt(e,t){var n=X9(t),r=t[1],i=qt(r),s=[qt(n),-Zt(n),0],o=0,a=0,u=new qa;i===1?r=Ji+Yt:i===-1&&(r=-Ji-Yt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=X9(h),m=h[1]/2+D3,g=qt(m),y=Zt(m),v=0;v<d;++v,p=w,g=x,y=b,h=_){var _=f[v],w=X9(_),S=_[1]/2+D3,x=qt(S),b=Zt(S),T=w-p,A=T>=0?1:-1,I=A*T,k=I>Bn,R=g*x;if(u.add(xc(R*A*qt(I),y*b+R*Zt(I))),o+=k?T+A*Qa:T,k^p>=n^w>=n){var P=aE(O1(h),O1(_));z3(P);var N=aE(s,P);z3(N);var F=(k^T>=0?-1:1)*zu(N[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=k^T>=0?1:-1)}}return(o<-Yt||o<Yt&&u<-N3)^a&1}function G$e(e,t,n,r){return function(i){var s=t(i),o=q$e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=kRe(c);var w=Akt(l,r);c.length?(u||(i.polygonStart(),u=!0),W$e(c,Okt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),x,b=S.length,T,A,I;if(f.pop(),l.push(f),f=null,!!b){if(w&1){if(A=S[0],(T=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<T;++x)i.point((I=A[x])[0],I[1]);i.lineEnd()}return}b>1&&w&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(Ikt))}}return d}}function Ikt(e){return e.length>1}function Okt(e,t){return((e=e.x)[0]<0?e[1]-Ji-Yt:Ji-e[1])-((t=t.x)[0]<0?t[1]-Ji-Yt:Ji-t[1])}const xpe=G$e(function(){return!0},Pkt,Rkt,[-Bn,-Ji]);function Pkt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Bn:-Bn,u=er(s-t);er(u-Bn)<Yt?(e.point(t,n=(n+o)/2>0?Ji:-Ji),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Bn&&(er(t-r)<Yt&&(t-=r*Yt),er(s-a)<Yt&&(s-=a*Yt),n=kkt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function kkt(e,t,n,r){var i,s,o=qt(e-n);return er(o)>Yt?Cx((qt(t)*(s=Zt(r))*qt(n)-qt(r)*(i=Zt(t))*qt(e))/(i*s*o)):(t+r)/2}function Rkt(e,t,n,r){var i;if(e==null)i=n*Ji,r.point(-Bn,i),r.point(0,i),r.point(Bn,i),r.point(Bn,0),r.point(Bn,-i),r.point(0,-i),r.point(-Bn,-i),r.point(-Bn,0),r.point(-Bn,i);else if(er(e[0]-t[0])>Yt){var s=e[0]<t[0]?Bn:-Bn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function $kt(e){var t=Zt(e),n=2*Ln,r=t>0,i=er(t)>Yt;function s(c,f,d,h){Ckt(h,e,n,d,c,f)}function o(c,f){return Zt(c)*Zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),S=r?w?0:l(g,y):w?l(g+(g<0?Bn:-Bn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||qR(f,_)||qR(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var x;!(S&d)&&(x=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}w&&(!f||!qR(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=O1(c),p=O1(f),m=[1,0,0],g=aE(h,p),y=rk(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,S=-t*v/_,x=aE(m,g),b=ik(m,w),T=ik(g,S);K9(b,T);var A=x,I=rk(b,A),k=rk(A,A),R=I*I-k*(rk(b,b)-1);if(!(R<0)){var P=Ja(R),N=ik(A,(-I-P)/k);if(K9(N,b),N=B3(N),!d)return N;var F=c[0],B=f[0],W=c[1],V=f[1],G;B<F&&(G=F,F=B,B=G);var M=B-F,H=er(M-Bn)<Yt,Y=H||M<Yt;if(!H&&V<W&&(G=W,W=V,V=G),Y?H?W+V>0^N[1]<(er(N[0]-F)<Yt?W:V):W<=N[1]&&N[1]<=V:M>Bn^(F<=N[0]&&N[0]<=B)){var L=ik(A,(-I+P)/k);return K9(L,b),[N,B3(L)]}}}function l(c,f){var d=r?e:Bn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return G$e(o,a,s,r?[0,-e]:[-Bn,e-Bn])}function Nkt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var LT=1e9,ok=-LT;function Y$e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return er(l[0]-e)<Yt?c>0?0:3:er(l[0]-n)<Yt?c>0?2:1:er(l[1]-t)<Yt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=q$e(),d,h,p,m,g,y,v,_,w,S,x,b={point:T,lineStart:R,lineEnd:P,polygonStart:I,polygonEnd:k};function T(F,B){i(F,B)&&c.point(F,B)}function A(){for(var F=0,B=0,W=h.length;B<W;++B)for(var V=h[B],G=1,M=V.length,H=V[0],Y,L,j=H[0],q=H[1];G<M;++G)Y=j,L=q,H=V[G],j=H[0],q=H[1],L<=r?q>r&&(j-Y)*(r-L)>(q-L)*(e-Y)&&++F:q<=r&&(j-Y)*(r-L)<(q-L)*(e-Y)&&--F;return F}function I(){c=f,d=[],h=[],x=!0}function k(){var F=A(),B=x&&F,W=(d=kRe(d)).length;(B||W)&&(l.polygonStart(),B&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),W&&W$e(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function R(){b.point=N,h&&h.push(p=[]),S=!0,w=!1,v=_=NaN}function P(){d&&(N(m,g),y&&w&&f.rejoin(),d.push(f.result())),b.point=T,w&&c.lineEnd()}function N(F,B){var W=i(F,B);if(h&&p.push([F,B]),S)m=F,g=B,y=W,S=!1,W&&(c.lineStart(),c.point(F,B));else if(W&&w)c.point(F,B);else{var V=[v=Math.max(ok,Math.min(LT,v)),_=Math.max(ok,Math.min(LT,_))],G=[F=Math.max(ok,Math.min(LT,F)),B=Math.max(ok,Math.min(LT,B))];Nkt(V,G,e,t,n,r)?(w||(c.lineStart(),c.point(V[0],V[1])),c.point(G[0],G[1]),W||c.lineEnd(),x=!1):W&&(c.lineStart(),c.point(F,B),x=!1)}v=F,_=B,w=W}return b}}function Spe(e,t,n){var r=Ou(e,t-Yt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Tpe(e,t,n){var r=Ou(e,t-Yt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Dkt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ou(nk(r/c)*c,n,c).map(p).concat(Ou(nk(a/f)*f,o,f).map(m)).concat(Ou(nk(t/u)*u,e,u).filter(function(_){return er(_%c)>Yt}).map(d)).concat(Ou(nk(s/l)*l,i,l).filter(function(_){return er(_%f)>Yt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=Spe(s,i,90),h=Tpe(t,e,g),p=Spe(a,o,90),m=Tpe(r,n,g),y):g},y.extentMajor([[-180,-90+Yt],[180,90-Yt]]).extentMinor([[-180,-80-Yt],[180,80+Yt]])}const JC=e=>e;var Q9=new qa,DV=new qa,K$e,X$e,MV,LV,Tp={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){Tp.lineStart=Mkt,Tp.lineEnd=Fkt},polygonEnd:function(){Tp.lineStart=Tp.lineEnd=Tp.point=Po,Q9.add(er(DV)),DV=new qa},result:function(){var e=Q9/2;return Q9=new qa,e}};function Mkt(){Tp.point=Lkt}function Lkt(e,t){Tp.point=Q$e,K$e=MV=e,X$e=LV=t}function Q$e(e,t){DV.add(LV*e-MV*t),MV=e,LV=t}function Fkt(){Q$e(K$e,X$e)}var uE=1/0,K3=uE,ZC=-uE,X3=ZC,Q3={point:jkt,lineStart:Po,lineEnd:Po,polygonStart:Po,polygonEnd:Po,result:function(){var e=[[uE,K3],[ZC,X3]];return ZC=X3=-(K3=uE=1/0),e}};function jkt(e,t){e<uE&&(uE=e),e>ZC&&(ZC=e),t<K3&&(K3=t),t>X3&&(X3=t)}var FV=0,jV=0,FT=0,J3=0,Z3=0,Hb=0,BV=0,zV=0,jT=0,J$e,Z$e,kd,Rd,ac={point:P1,lineStart:Cpe,lineEnd:Ape,polygonStart:function(){ac.lineStart=Ukt,ac.lineEnd=Vkt},polygonEnd:function(){ac.point=P1,ac.lineStart=Cpe,ac.lineEnd=Ape},result:function(){var e=jT?[BV/jT,zV/jT]:Hb?[J3/Hb,Z3/Hb]:FT?[FV/FT,jV/FT]:[NaN,NaN];return FV=jV=FT=J3=Z3=Hb=BV=zV=jT=0,e}};function P1(e,t){FV+=e,jV+=t,++FT}function Cpe(){ac.point=Bkt}function Bkt(e,t){ac.point=zkt,P1(kd=e,Rd=t)}function zkt(e,t){var n=e-kd,r=t-Rd,i=Ja(n*n+r*r);J3+=i*(kd+e)/2,Z3+=i*(Rd+t)/2,Hb+=i,P1(kd=e,Rd=t)}function Ape(){ac.point=P1}function Ukt(){ac.point=Hkt}function Vkt(){eNe(J$e,Z$e)}function Hkt(e,t){ac.point=eNe,P1(J$e=kd=e,Z$e=Rd=t)}function eNe(e,t){var n=e-kd,r=t-Rd,i=Ja(n*n+r*r);J3+=i*(kd+e)/2,Z3+=i*(Rd+t)/2,Hb+=i,i=Rd*e-kd*t,BV+=i*(kd+e),zV+=i*(Rd+t),jT+=i*3,P1(kd=e,Rd=t)}function tNe(e){this._context=e}tNe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:Po};var UV=new qa,J9,nNe,rNe,BT,zT,eA={point:Po,lineStart:function(){eA.point=qkt},lineEnd:function(){J9&&iNe(nNe,rNe),eA.point=Po},polygonStart:function(){J9=!0},polygonEnd:function(){J9=null},result:function(){var e=+UV;return UV=new qa,e}};function qkt(e,t){eA.point=iNe,nNe=BT=e,rNe=zT=t}function iNe(e,t){BT-=e,zT-=t,UV.add(Ja(BT*BT+zT*zT)),BT=e,zT=t}let Ipe,eM,Ope,Ppe;class kpe{constructor(t){this._append=t==null?sNe:Wkt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Ope||this._append!==eM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ope=r,eM=this._append,Ppe=this._,this._=i}this._+=Ppe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function sNe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wkt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sNe;if(t!==Ipe){const n=10**t;Ipe=t,eM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return eM}function oNe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Sp(a,i(s))),s.result()}return o.area=function(a){return Sp(a,i(Tp)),Tp.result()},o.measure=function(a){return Sp(a,i(eA)),eA.result()},o.bounds=function(a){return Sp(a,i(Q3)),Q3.result()},o.centroid=function(a){return Sp(a,i(ac)),ac.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,JC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new kpe(n)):new tNe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new kpe(n)),o},o.projection(e).digits(n).context(t)}function K4(e){return function(t){var n=new VV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function VV(){}VV.prototype={constructor:VV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fX(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Sp(n,e.stream(Q3)),t(Q3.result()),r!=null&&e.clipExtent(r),e}function X4(e,t,n){return fX(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function dX(e,t,n){return X4(e,[[0,0],t],n)}function hX(e,t,n){return fX(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function pX(e,t,n){return fX(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Rpe=16,Gkt=Zt(30*Ln);function $pe(e,t){return+t?Kkt(e,t):Ykt(e)}function Ykt(e){return K4({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Kkt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+d,S=a+h,x=u+p,b=Ja(w*w+S*S+x*x),T=zu(x/=b),A=er(er(x)-1)<Yt||er(s-f)<Yt?(s+f)/2:xc(S,w),I=e(A,T),k=I[0],R=I[1],P=k-r,N=R-i,F=v*P-y*N;(F*F/_>t||er((y*P+v*N)/_-.5)>.3||o*d+a*h+u*p<Gkt)&&(n(r,i,s,o,a,u,k,R,A,w/=b,S/=b,x,m,g),g.point(k,R),n(k,R,A,w,S,x,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=S},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,A){T=e(T,A),r.point(T[0],T[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(T,A){var I=O1([T,A]),k=e(T,A);n(f,d,c,h,p,m,f=k[0],d=k[1],c=T,h=I[0],p=I[1],m=I[2],Rpe,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function S(){v(),g.point=x,g.lineEnd=b}function x(T,A){_(i=T,A),s=f,o=d,a=h,u=p,l=m,g.point=_}function b(){n(f,d,c,h,p,m,s,o,i,a,u,l,Rpe,r),g.lineEnd=w,w()}return g}}var Xkt=K4({point:function(e,t){this.stream.point(e*Ln,t*Ln)}});function Qkt(e){return K4({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Jkt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Npe(e,t,n,r,i,s){if(!s)return Jkt(e,t,n,r,i);var o=Zt(s),a=qt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Bh(e){return aNe(function(){return e})()}function aNe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=xpe,g=null,y,v,_,w=JC,S=.5,x,b,T,A,I;function k(F){return T(F[0]*Ln,F[1]*Ln)}function R(F){return F=T.invert(F[0],F[1]),F&&[F[0]*os,F[1]*os]}k.stream=function(F){return A&&I===F?A:A=Xkt(Qkt(c)(m(x(w(I=F)))))},k.preclip=function(F){return arguments.length?(m=F,p=void 0,N()):m},k.postclip=function(F){return arguments.length?(w=F,g=y=v=_=null,N()):w},k.clipAngle=function(F){return arguments.length?(m=+F?$kt(p=F*Ln):(p=null,xpe),N()):p*os},k.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=_=null,JC):Y$e(g=+F[0][0],y=+F[0][1],v=+F[1][0],_=+F[1][1]),N()):g==null?null:[[g,y],[v,_]]},k.scale=function(F){return arguments.length?(n=+F,P()):n},k.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},k.center=function(F){return arguments.length?(s=F[0]%360*Ln,o=F[1]%360*Ln,P()):[s*os,o*os]},k.rotate=function(F){return arguments.length?(a=F[0]%360*Ln,u=F[1]%360*Ln,l=F.length>2?F[2]%360*Ln:0,P()):[a*os,u*os,l*os]},k.angle=function(F){return arguments.length?(f=F%360*Ln,P()):f*os},k.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},k.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},k.precision=function(F){return arguments.length?(x=$pe(b,S=F*F),N()):Ja(S)},k.fitExtent=function(F,B){return X4(k,F,B)},k.fitSize=function(F,B){return dX(k,F,B)},k.fitWidth=function(F,B){return hX(k,F,B)},k.fitHeight=function(F,B){return pX(k,F,B)};function P(){var F=Npe(n,0,0,d,h,f).apply(null,t(s,o)),B=Npe(n,r-F[0],i-F[1],d,h,f);return c=H$e(a,u,l),b=$V(t,B),T=$V(c,b),x=$pe(b,S),N()}function N(){return A=I=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&R,P()}}function mX(e){var t=0,n=Bn/3,r=aNe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Ln,n=s[1]*Ln):[t*os,n*os]},i}function Zkt(e){var t=Zt(e);function n(r,i){return[r*t,qt(i)/t]}return n.invert=function(r,i){return[r/t,zu(i*t)]},n}function eRt(e,t){var n=qt(e),r=(n+qt(t))/2;if(er(r)<Yt)return Zkt(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,u){var l=Ja(i-2*r*qt(u))/r;return[l*qt(a*=r),s-l*Zt(a)]}return o.invert=function(a,u){var l=s-u,c=xc(a,er(l))*cc(l);return l*r<0&&(c-=Bn*cc(a)*cc(l)),[c/r,zu((i-(a*a+l*l)*r*r)/(2*r))]},o}function tM(){return mX(eRt).scale(155.424).center([0,33.6442])}function uNe(){return tM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tRt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nRt(){var e,t,n=uNe(),r,i=tM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=tM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=tRt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Yt,m+.12*h+Yt],[p-.214*h-Yt,m+.234*h-Yt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Yt,m+.166*h+Yt],[p-.115*h-Yt,m+.234*h-Yt]]).stream(l),f()},c.fitExtent=function(d,h){return X4(c,d,h)},c.fitSize=function(d,h){return dX(c,d,h)},c.fitWidth=function(d,h){return hX(c,d,h)},c.fitHeight=function(d,h){return pX(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function lNe(e){return function(t,n){var r=Zt(t),i=Zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*qt(t),s*qt(n)]}}function MI(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=qt(i),o=Zt(i);return[xc(t*s,r*o),zu(r&&n*s/r)]}}var cNe=lNe(function(e){return Ja(2/(1+e))});cNe.invert=MI(function(e){return 2*zu(e/2)});function rRt(){return Bh(cNe).scale(124.75).clipAngle(180-.001)}var fNe=lNe(function(e){return(e=$$e(e))&&e/qt(e)});fNe.invert=MI(function(e){return e});function iRt(){return Bh(fNe).scale(79.4188).clipAngle(180-.001)}function Q4(e,t){return[e,M3(lX((Ji+t)/2))]}Q4.invert=function(e,t){return[e,2*Cx(R$e(t))-Ji]};function sRt(){return dNe(Q4).scale(961/Qa)}function dNe(e){var t=Bh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Bn*r(),d=t(Tkt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Q4?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function ak(e){return lX((Ji+e)/2)}function oRt(e,t){var n=Zt(e),r=e===t?qt(e):M3(n/Zt(t))/M3(ak(t)/ak(e)),i=n*Y9(ak(e),r)/r;if(!r)return Q4;function s(o,a){i>0?a<-Ji+Yt&&(a=-Ji+Yt):a>Ji-Yt&&(a=Ji-Yt);var u=i/Y9(ak(a),r);return[u*qt(r*o),i-u*Zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=cc(r)*Ja(o*o+u*u),c=xc(o,er(u))*cc(u);return u*r<0&&(c-=Bn*cc(o)*cc(u)),[c/r,2*Cx(Y9(i/l,1/r))-Ji]},s}function aRt(){return mX(oRt).scale(109.5).parallels([30,30])}function nM(e,t){return[e,t]}nM.invert=nM;function uRt(){return Bh(nM).scale(152.63)}function lRt(e,t){var n=Zt(e),r=e===t?qt(e):(n-Zt(t))/(t-e),i=n/r+e;if(er(r)<Yt)return nM;function s(o,a){var u=i-a,l=r*o;return[u*qt(l),i-u*Zt(l)]}return s.invert=function(o,a){var u=i-a,l=xc(o,er(u))*cc(u);return u*r<0&&(l-=Bn*cc(o)*cc(u)),[l/r,i-cc(r)*Ja(o*o+u*u)]},s}function cRt(){return mX(lRt).scale(131.154).center([0,13.9389])}var D2=1.340264,M2=-.081106,L2=893e-6,F2=.003796,rM=Ja(3)/2,fRt=12;function hNe(e,t){var n=zu(rM*qt(t)),r=n*n,i=r*r*r;return[e*Zt(n)/(rM*(D2+3*M2*r+i*(7*L2+9*F2*r))),n*(D2+M2*r+i*(L2+F2*r))]}hNe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<fRt&&(a=n*(D2+M2*r+i*(L2+F2*r))-t,u=D2+3*M2*r+i*(7*L2+9*F2*r),n-=o=a/u,r=n*n,i=r*r*r,!(er(o)<N3));++s);return[rM*e*(D2+3*M2*r+i*(7*L2+9*F2*r))/Zt(n),zu(qt(n)/rM)]};function dRt(){return Bh(hNe).scale(177.158)}function pNe(e,t){var n=Zt(t),r=Zt(e)*n;return[n*qt(e)/r,qt(t)/r]}pNe.invert=MI(Cx);function hRt(){return Bh(pNe).scale(144.049).clipAngle(60)}function pRt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=K4({point:function(w,S){var x=_([w,S]);this.stream.point(x[0],x[1])}}),m=JC,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var S=w[0]*d,x=w[1]*h;if(s){var b=x*o-S*a;S=S*o+x*a,x=b}return[S+t,x+n]}return _.invert=function(w){var S=w[0]-t,x=w[1]-n;if(s){var b=x*o+S*a;S=S*o-x*a,x=b}return[S/d,x/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,JC):Y$e(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Ln,a=qt(s),o=Zt(s),v()):s*os},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,S){return X4(_,w,S)},_.fitSize=function(w,S){return dX(_,w,S)},_.fitWidth=function(w,S){return hX(_,w,S)},_.fitHeight=function(w,S){return pX(_,w,S)},_}function mNe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}mNe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(er(i)>Yt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function mRt(){return Bh(mNe).scale(175.295)}function gNe(e,t){return[Zt(t)*qt(e),qt(t)]}gNe.invert=MI(zu);function gRt(){return Bh(gNe).scale(249.5).clipAngle(90+Yt)}function yNe(e,t){var n=Zt(t),r=1+Zt(e)*n;return[n*qt(e)/r,qt(t)/r]}yNe.invert=MI(function(e){return 2*Cx(e)});function yRt(){return Bh(yNe).scale(250).clipAngle(142)}function vNe(e,t){return[M3(lX((Ji+t)/2)),-e]}vNe.invert=function(e,t){return[-t,2*Cx(R$e(e))-Ji]};function vRt(){var e=dNe(vNe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function _Rt(e,t){return e.parent===t.parent?1:2}function bRt(e){return e.reduce(wRt,0)/e.length}function wRt(e,t){return e+t.x}function ERt(e){return 1+e.reduce(xRt,0)}function xRt(e,t){return Math.max(e,t.y)}function SRt(e){for(var t;t=e.children;)e=t[0];return e}function TRt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function CRt(){var e=_Rt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=bRt(h),d.y=ERt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=SRt(s),l=TRt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function ARt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function IRt(){return this.eachAfter(ARt)}function ORt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function PRt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function kRt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function RRt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function $Rt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function NRt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function DRt(e){for(var t=this,n=MRt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function MRt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function LRt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function FRt(){return Array.from(this)}function jRt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function BRt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*zRt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function gX(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=HRt)):t===void 0&&(t=VRt);for(var n=new lE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new lE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(_Ne)}function URt(){return gX(this).eachBefore(qRt)}function VRt(e){return e.children}function HRt(e){return Array.isArray(e)?e[1]:null}function qRt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function _Ne(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function lE(e){this.data=e,this.depth=this.height=0,this.parent=null}lE.prototype=gX.prototype={constructor:lE,count:IRt,each:ORt,eachAfter:kRt,eachBefore:PRt,find:RRt,sum:$Rt,sort:NRt,path:DRt,ancestors:LRt,descendants:FRt,leaves:jRt,links:BRt,copy:URt,[Symbol.iterator]:zRt};function WR(e){return e==null?null:bNe(e)}function bNe(e){if(typeof e!="function")throw new Error;return e}function Ev(){return 0}function _b(e){return function(){return e}}const WRt=1664525,GRt=1013904223,Dpe=4294967296;function YRt(){let e=1;return()=>(e=(WRt*e+GRt)%Dpe)/Dpe}function KRt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XRt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function QRt(e,t){for(var n=0,r=(e=XRt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&wNe(o,s)?++n:(o=ZRt(i=JRt(i,s)),n=0);return o}function JRt(e,t){var n,r;if(Z9(t,e))return[t];for(n=0;n<e.length;++n)if(uk(t,e[n])&&Z9(UT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(uk(UT(e[n],e[r]),t)&&uk(UT(e[n],t),e[r])&&uk(UT(e[r],t),e[n])&&Z9(ENe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function uk(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function wNe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Z9(e,t){for(var n=0;n<t.length;++n)if(!wNe(e,t[n]))return!1;return!0}function ZRt(e){switch(e.length){case 1:return e$t(e[0]);case 2:return UT(e[0],e[1]);case 3:return ENe(e[0],e[1],e[2])}}function e$t(e){return{x:e.x,y:e.y,r:e.r}}function UT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function ENe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,S=h*p-d*m,x=(p*w-m*_)/(S*2)-r,b=(m*g-p*y)/S,T=(h*_-d*w)/(S*2)-i,A=(d*y-h*g)/S,I=b*b+A*A-1,k=2*(s+x*b+T*A),R=x*x+T*T-s*s,P=-(Math.abs(I)>1e-6?(k+Math.sqrt(k*k-4*I*R))/(2*I):R/k);return{x:r+x+b*P,y:i+T+A*P,r:P}}function Mpe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Lpe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Fpe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function lk(e){this._=e,this.next=null,this.previous=null}function t$t(e,t){if(!(s=(e=KRt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Mpe(r,n,i=e[2]),n=new lk(n),r=new lk(r),i=new lk(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Mpe(n._,r._,i=e[u]),i=new lk(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Lpe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Lpe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Fpe(n);(i=i.next)!==r;)(a=Fpe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=QRt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function n$t(e){return Math.sqrt(e.value)}function r$t(){var e=null,t=1,n=1,r=Ev;function i(s){const o=YRt();return s.x=t/2,s.y=n/2,e?s.eachBefore(jpe(e)).eachAfter(eB(r,.5,o)).eachBefore(Bpe(1)):s.eachBefore(jpe(n$t)).eachAfter(eB(Ev,1,o)).eachAfter(eB(r,s.r/Math.min(t,n),o)).eachBefore(Bpe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=WR(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:_b(+s),i):r},i}function jpe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function eB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=t$t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Bpe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function xNe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function LI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function i$t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(xNe),o}function s(o,a){return function(u){u.children&&LI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var s$t={depth:-1},zpe={},tB={};function o$t(e){return e.id}function a$t(e){return e.parentId}function Upe(){var e=o$t,t=a$t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,S)=>u$t(n(w,S,i))),v=y.map(Vpe),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(Vpe(w)),s.push(tB));o=(w,S)=>y[S],a=(w,S)=>v[S]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new lE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?zpe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===zpe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===tB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===tB);--y)h.data=null}if(f.parent=s$t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(_Ne),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=WR(i),r):e},r.parentId=function(i){return arguments.length?(t=WR(i),r):t},r.path=function(i){return arguments.length?(n=WR(i),r):n},r}function u$t(e){e=`${e}`;let t=e.length;return HV(e,t-1)&&!HV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Vpe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!HV(e,t););return e.slice(0,t)}function HV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function l$t(e,t){return e.parent===t.parent?1:2}function nB(e){var t=e.children;return t?t[0]:e.t}function rB(e){var t=e.children;return t?t[t.length-1]:e.t}function c$t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function f$t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function d$t(e,t,n){return e.a.parent===t.parent?e.a:n}function GR(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}GR.prototype=Object.create(lE.prototype);function h$t(e){for(var t=new GR(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new GR(s[o],o)),i.parent=n;return(t.parent=new GR(null,0)).children=[t],t}function p$t(){var e=l$t,t=1,n=1,r=null;function i(l){var c=h$t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){f$t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=rB(p),d=nB(d),p&&d;)m=nB(m),h=rB(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(c$t(d$t(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!rB(h)&&(h.t=p,h.m+=v-y),d&&!nB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function J4(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var SNe=(1+Math.sqrt(5))/2;function TNe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,S,x;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,S=Math.max(p/h,h/p)/(m*e),x=g*g*S,w=Math.max(v/x,x/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),x=g*g*S,_=Math.max(v/x,x/y),_>w){g-=l;break}w=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?LI(u,n,r,i,m?r+=p*g/m:s):J4(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const CNe=function e(t){function n(r,i,s,o,a){TNe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SNe);function m$t(){var e=CNe,t=!1,n=1,r=1,i=[0],s=Ev,o=Ev,a=Ev,u=Ev,l=Ev;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(xNe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=bNe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:_b(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:_b(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:_b(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:_b(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:_b(+d),c):l},c}function g$t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,S=f+1,x=d-1;S<x;){var b=S+x>>>1;l[b]<w?S=b+1:x=b}w-l[S-1]<l[S]-w&&f+1<S&&--S;var T=l[S]-_,A=h-T;if(g-p>y-m){var I=h?(p*A+g*T)/h:g;c(f,S,T,p,m,I,y),c(S,d,A,I,m,g,y)}else{var k=h?(m*A+y*T)/h:y;c(f,S,T,p,m,g,k),c(S,d,A,p,k,g,y)}}}function y$t(e,t,n,r,i){(e.depth&1?J4:LI)(e,t,n,r,i)}const v$t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?LI(l,i,s,o,m?s+=(a-s)*l.value/m:a):J4(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=TNe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SNe);function Yf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ey(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const qV=Symbol("implicit");function Ax(){var e=new xhe,t=[],n=[],r=qV;function i(s){let o=e.get(s);if(o===void 0){if(r!==qV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new xhe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ax(t,n).unknown(r)},Yf.apply(i,arguments),i}function Z4(){var e=Ax().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Ou(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return Z4(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Yf.apply(f(),arguments)}function _$t(e){return function(){return e}}function WV(e){return+e}var Hpe=[0,1];function Pu(e){return e}function GV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:_$t(isNaN(t)?NaN:.5)}function b$t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function w$t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=GV(i,r),s=n(o,s)):(r=GV(r,i),s=n(s,o)),function(a){return s(r(a))}}function E$t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=GV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=D0(e,a,1,r)-1;return s[u](i[u](a))}}function FI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function e5(){var e=Hpe,t=Hpe,n=Fm,r,i,s,o=Pu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Pu&&(o=b$t(e[0],e[d-1])),a=d>2?E$t:w$t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),ic)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,WV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=$I,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Pu,c()):o!==Pu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function ANe(){return e5()(Pu,Pu)}function INe(e,t,n,r){var i=M0(e,t,n),s;switch(r=I1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=P$e(i,o))&&(r.precision=s),uX(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=k$e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=O$e(i))&&(r.precision=s-(r.type==="%")*2);break}}return Tx(r)}function m_(e){var t=e.domain;return e.ticks=function(n){var r=t();return oV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return INe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=aV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function yh(){var e=ANe();return e.copy=function(){return FI(e,yh())},Yf.apply(e,arguments),m_(e)}function ONe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,WV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return ONe(e).unknown(t)},e=arguments.length?Array.from(e,WV):[0,1],m_(n)}function PNe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function qpe(e){return Math.log(e)}function Wpe(e){return Math.exp(e)}function x$t(e){return-Math.log(-e)}function S$t(e){return-Math.exp(-e)}function T$t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function C$t(e){return e===10?T$t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function A$t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gpe(e){return(t,n)=>-e(-t,n)}function yX(e){const t=e(qpe,Wpe),n=t.domain;let r=10,i,s;function o(){return i=A$t(r),s=C$t(r),n()[0]<0?(i=Gpe(i),s=Gpe(s),e(x$t,S$t)):e(qpe,Wpe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=oV(l,c,g))}else y=oV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=I1(u)).precision==null&&(u.trim=!0),u=Tx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(PNe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function kNe(){const e=yX(e5()).domain([1,10]);return e.copy=()=>FI(e,kNe()).base(e.base()),Yf.apply(e,arguments),e}function Ype(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Kpe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vX(e){var t=1,n=e(Ype(t),Kpe(t));return n.constant=function(r){return arguments.length?e(Ype(t=+r),Kpe(t)):t},m_(n)}function RNe(){var e=vX(e5());return e.copy=function(){return FI(e,RNe()).constant(e.constant())},Yf.apply(e,arguments)}function Xpe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function I$t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function O$t(e){return e<0?-e*e:e*e}function _X(e){var t=e(Pu,Pu),n=1;function r(){return n===1?e(Pu,Pu):n===.5?e(I$t,O$t):e(Xpe(n),Xpe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},m_(t)}function bX(){var e=_X(e5());return e.copy=function(){return FI(e,bX()).exponent(e.exponent())},Yf.apply(e,arguments),e}function P$t(){return bX.apply(null,arguments).exponent(.5)}function $Ne(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=IRe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[D0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Yp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return $Ne().domain(e).range(t).unknown(r)},Yf.apply(s,arguments)}function NNe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[D0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return NNe().domain([e,t]).range(i).unknown(s)},Yf.apply(m_(o),arguments)}function DNe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[D0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return DNe().domain(e).range(t).unknown(n)},Yf.apply(i,arguments)}const iB=new Date,sB=new Date;function qs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>qs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(iB.setTime(+s),sB.setTime(+o),e(iB),e(sB),Math.floor(n(iB,sB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const cE=qs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):cE);cE.range;const Dp=1e3,fc=Dp*60,Mp=fc*60,mm=Mp*24,wX=mm*7,Qpe=mm*30,oB=mm*365,Lp=qs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Dp)},(e,t)=>(t-e)/Dp,e=>e.getUTCSeconds());Lp.range;const t5=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dp)},(e,t)=>{e.setTime(+e+t*fc)},(e,t)=>(t-e)/fc,e=>e.getMinutes());t5.range;const n5=qs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fc)},(e,t)=>(t-e)/fc,e=>e.getUTCMinutes());n5.range;const r5=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dp-e.getMinutes()*fc)},(e,t)=>{e.setTime(+e+t*Mp)},(e,t)=>(t-e)/Mp,e=>e.getHours());r5.range;const i5=qs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Mp)},(e,t)=>(t-e)/Mp,e=>e.getUTCHours());i5.range;const Xp=qs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fc)/mm,e=>e.getDate()-1);Xp.range;const p0=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mm,e=>e.getUTCDate()-1);p0.range;const MNe=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mm,e=>Math.floor(e/mm));MNe.range;function g_(e){return qs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fc)/wX)}const Ix=g_(0),iM=g_(1),k$t=g_(2),R$t=g_(3),fE=g_(4),$$t=g_(5),N$t=g_(6);Ix.range;iM.range;k$t.range;R$t.range;fE.range;$$t.range;N$t.range;function y_(e){return qs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/wX)}const Ox=y_(0),sM=y_(1),D$t=y_(2),M$t=y_(3),dE=y_(4),L$t=y_(5),F$t=y_(6);Ox.range;sM.range;D$t.range;M$t.range;dE.range;L$t.range;F$t.range;const tA=qs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tA.range;const nA=qs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nA.range;const vh=qs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});vh.range;const _h=qs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_h.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});_h.range;function LNe(e,t,n,r,i,s){const o=[[Lp,1,Dp],[Lp,5,5*Dp],[Lp,15,15*Dp],[Lp,30,30*Dp],[s,1,fc],[s,5,5*fc],[s,15,15*fc],[s,30,30*fc],[i,1,Mp],[i,3,3*Mp],[i,6,6*Mp],[i,12,12*Mp],[r,1,mm],[r,2,2*mm],[n,1,wX],[t,1,Qpe],[t,3,3*Qpe],[e,1,oB]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=xx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(M0(l/oB,c/oB,f));if(h===0)return cE.every(Math.max(M0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[j$t,B$t]=LNe(_h,nA,Ox,MNe,i5,n5),[z$t,U$t]=LNe(vh,tA,Ix,Xp,r5,t5);function aB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function uB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function WS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function FNe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=GS(i),c=YS(i),f=GS(s),d=YS(s),h=GS(o),p=YS(o),m=GS(a),g=YS(a),y=GS(u),v=YS(u),_={a:W,A:V,b:G,B:M,c:null,d:rme,e:rme,f:fNt,g:wNt,G:xNt,H:uNt,I:lNt,j:cNt,L:jNe,m:dNt,M:hNt,p:H,q:Y,Q:ome,s:ame,S:pNt,u:mNt,U:gNt,V:yNt,w:vNt,W:_Nt,x:null,X:null,y:bNt,Y:ENt,Z:SNt,"%":sme},w={a:L,A:j,b:q,B:Z,c:null,d:ime,e:ime,f:INt,g:FNt,G:BNt,H:TNt,I:CNt,j:ANt,L:zNe,m:ONt,M:PNt,p:ue,q:he,Q:ome,s:ame,S:kNt,u:RNt,U:$Nt,V:NNt,w:DNt,W:MNt,x:null,X:null,y:LNt,Y:jNt,Z:zNt,"%":sme},S={a:I,A:k,b:R,B:P,c:N,d:tme,e:tme,f:iNt,g:eme,G:Zpe,H:nme,I:nme,j:eNt,L:rNt,m:Z$t,M:tNt,p:A,q:J$t,Q:oNt,s:aNt,S:nNt,u:G$t,U:Y$t,V:K$t,w:W$t,W:X$t,x:F,X:B,y:eme,Y:Zpe,Z:Q$t,"%":sNt};_.x=x(n,_),_.X=x(r,_),_.c=x(t,_),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w);function x(fe,me){return function(_e){var ge=[],Be=-1,Me=0,ut=fe.length,Oe,Re,Ye;for(_e instanceof Date||(_e=new Date(+_e));++Be<ut;)fe.charCodeAt(Be)===37&&(ge.push(fe.slice(Me,Be)),(Re=Jpe[Oe=fe.charAt(++Be)])!=null?Oe=fe.charAt(++Be):Re=Oe==="e"?" ":"0",(Ye=me[Oe])&&(Oe=Ye(_e,Re)),ge.push(Oe),Me=Be+1);return ge.push(fe.slice(Me,Be)),ge.join("")}}function b(fe,me){return function(_e){var ge=WS(1900,void 0,1),Be=T(ge,fe,_e+="",0),Me,ut;if(Be!=_e.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(me&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Me=uB(WS(ge.y,0,1)),ut=Me.getUTCDay(),Me=ut>4||ut===0?sM.ceil(Me):sM(Me),Me=p0.offset(Me,(ge.V-1)*7),ge.y=Me.getUTCFullYear(),ge.m=Me.getUTCMonth(),ge.d=Me.getUTCDate()+(ge.w+6)%7):(Me=aB(WS(ge.y,0,1)),ut=Me.getDay(),Me=ut>4||ut===0?iM.ceil(Me):iM(Me),Me=Xp.offset(Me,(ge.V-1)*7),ge.y=Me.getFullYear(),ge.m=Me.getMonth(),ge.d=Me.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),ut="Z"in ge?uB(WS(ge.y,0,1)).getUTCDay():aB(WS(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(ut+5)%7:ge.w+ge.U*7-(ut+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,uB(ge)):aB(ge)}}function T(fe,me,_e,ge){for(var Be=0,Me=me.length,ut=_e.length,Oe,Re;Be<Me;){if(ge>=ut)return-1;if(Oe=me.charCodeAt(Be++),Oe===37){if(Oe=me.charAt(Be++),Re=S[Oe in Jpe?me.charAt(Be++):Oe],!Re||(ge=Re(fe,_e,ge))<0)return-1}else if(Oe!=_e.charCodeAt(ge++))return-1}return ge}function A(fe,me,_e){var ge=l.exec(me.slice(_e));return ge?(fe.p=c.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function I(fe,me,_e){var ge=h.exec(me.slice(_e));return ge?(fe.w=p.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function k(fe,me,_e){var ge=f.exec(me.slice(_e));return ge?(fe.w=d.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function R(fe,me,_e){var ge=y.exec(me.slice(_e));return ge?(fe.m=v.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function P(fe,me,_e){var ge=m.exec(me.slice(_e));return ge?(fe.m=g.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function N(fe,me,_e){return T(fe,t,me,_e)}function F(fe,me,_e){return T(fe,n,me,_e)}function B(fe,me,_e){return T(fe,r,me,_e)}function W(fe){return o[fe.getDay()]}function V(fe){return s[fe.getDay()]}function G(fe){return u[fe.getMonth()]}function M(fe){return a[fe.getMonth()]}function H(fe){return i[+(fe.getHours()>=12)]}function Y(fe){return 1+~~(fe.getMonth()/3)}function L(fe){return o[fe.getUTCDay()]}function j(fe){return s[fe.getUTCDay()]}function q(fe){return u[fe.getUTCMonth()]}function Z(fe){return a[fe.getUTCMonth()]}function ue(fe){return i[+(fe.getUTCHours()>=12)]}function he(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var me=x(fe+="",_);return me.toString=function(){return fe},me},parse:function(fe){var me=b(fe+="",!1);return me.toString=function(){return fe},me},utcFormat:function(fe){var me=x(fe+="",w);return me.toString=function(){return fe},me},utcParse:function(fe){var me=b(fe+="",!0);return me.toString=function(){return fe},me}}}var Jpe={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,V$t=/^%/,H$t=/[\\^$*+?|[\]().{}]/g;function yr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function q$t(e){return e.replace(H$t,"\\$&")}function GS(e){return new RegExp("^(?:"+e.map(q$t).join("|")+")","i")}function YS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function W$t(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function G$t(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Y$t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function K$t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function X$t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Zpe(e,t,n){var r=mo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function eme(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q$t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function J$t(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Z$t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function tme(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function eNt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function nme(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function tNt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function nNt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function rNt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function iNt(e,t,n){var r=mo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function sNt(e,t,n){var r=V$t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function oNt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function aNt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function rme(e,t){return yr(e.getDate(),t,2)}function uNt(e,t){return yr(e.getHours(),t,2)}function lNt(e,t){return yr(e.getHours()%12||12,t,2)}function cNt(e,t){return yr(1+Xp.count(vh(e),e),t,3)}function jNe(e,t){return yr(e.getMilliseconds(),t,3)}function fNt(e,t){return jNe(e,t)+"000"}function dNt(e,t){return yr(e.getMonth()+1,t,2)}function hNt(e,t){return yr(e.getMinutes(),t,2)}function pNt(e,t){return yr(e.getSeconds(),t,2)}function mNt(e){var t=e.getDay();return t===0?7:t}function gNt(e,t){return yr(Ix.count(vh(e)-1,e),t,2)}function BNe(e){var t=e.getDay();return t>=4||t===0?fE(e):fE.ceil(e)}function yNt(e,t){return e=BNe(e),yr(fE.count(vh(e),e)+(vh(e).getDay()===4),t,2)}function vNt(e){return e.getDay()}function _Nt(e,t){return yr(iM.count(vh(e)-1,e),t,2)}function bNt(e,t){return yr(e.getFullYear()%100,t,2)}function wNt(e,t){return e=BNe(e),yr(e.getFullYear()%100,t,2)}function ENt(e,t){return yr(e.getFullYear()%1e4,t,4)}function xNt(e,t){var n=e.getDay();return e=n>=4||n===0?fE(e):fE.ceil(e),yr(e.getFullYear()%1e4,t,4)}function SNt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yr(t/60|0,"0",2)+yr(t%60,"0",2)}function ime(e,t){return yr(e.getUTCDate(),t,2)}function TNt(e,t){return yr(e.getUTCHours(),t,2)}function CNt(e,t){return yr(e.getUTCHours()%12||12,t,2)}function ANt(e,t){return yr(1+p0.count(_h(e),e),t,3)}function zNe(e,t){return yr(e.getUTCMilliseconds(),t,3)}function INt(e,t){return zNe(e,t)+"000"}function ONt(e,t){return yr(e.getUTCMonth()+1,t,2)}function PNt(e,t){return yr(e.getUTCMinutes(),t,2)}function kNt(e,t){return yr(e.getUTCSeconds(),t,2)}function RNt(e){var t=e.getUTCDay();return t===0?7:t}function $Nt(e,t){return yr(Ox.count(_h(e)-1,e),t,2)}function UNe(e){var t=e.getUTCDay();return t>=4||t===0?dE(e):dE.ceil(e)}function NNt(e,t){return e=UNe(e),yr(dE.count(_h(e),e)+(_h(e).getUTCDay()===4),t,2)}function DNt(e){return e.getUTCDay()}function MNt(e,t){return yr(sM.count(_h(e)-1,e),t,2)}function LNt(e,t){return yr(e.getUTCFullYear()%100,t,2)}function FNt(e,t){return e=UNe(e),yr(e.getUTCFullYear()%100,t,2)}function jNt(e,t){return yr(e.getUTCFullYear()%1e4,t,4)}function BNt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?dE(e):dE.ceil(e),yr(e.getUTCFullYear()%1e4,t,4)}function zNt(){return"+0000"}function sme(){return"%"}function ome(e){return+e}function ame(e){return Math.floor(+e/1e3)}var tb,EX,VNe,s5,HNe;UNt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function UNt(e){return tb=FNe(e),EX=tb.format,VNe=tb.parse,s5=tb.utcFormat,HNe=tb.utcParse,tb}function VNt(e){return new Date(e)}function HNt(e){return e instanceof Date?+e:+new Date(+e)}function xX(e,t,n,r,i,s,o,a,u,l){var c=ANe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function S(x){return(u(x)<x?h:a(x)<x?p:o(x)<x?m:s(x)<x?g:r(x)<x?i(x)<x?y:v:n(x)<x?_:w)(x)}return c.invert=function(x){return new Date(f(x))},c.domain=function(x){return arguments.length?d(Array.from(x,HNt)):d().map(VNt)},c.ticks=function(x){var b=d();return e(b[0],b[b.length-1],x??10)},c.tickFormat=function(x,b){return b==null?S:l(b)},c.nice=function(x){var b=d();return(!x||typeof x.range!="function")&&(x=t(b[0],b[b.length-1],x??10)),x?d(PNe(b,x)):c},c.copy=function(){return FI(c,xX(e,t,n,r,i,s,o,a,u,l))},c}function qNe(){return Yf.apply(xX(z$t,U$t,vh,tA,Ix,Xp,r5,t5,Lp,EX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qNt(){return Yf.apply(xX(j$t,B$t,_h,nA,Ox,p0,i5,n5,Lp,s5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function o5(){var e=0,t=1,n,r,i,s,o=Pu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Fm),l.rangeRound=c($I),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function xy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function SX(){var e=m_(o5()(Pu));return e.copy=function(){return xy(e,SX())},Ey.apply(e,arguments)}function WNe(){var e=yX(o5()).domain([1,10]);return e.copy=function(){return xy(e,WNe()).base(e.base())},Ey.apply(e,arguments)}function GNe(){var e=vX(o5());return e.copy=function(){return xy(e,GNe()).constant(e.constant())},Ey.apply(e,arguments)}function TX(){var e=_X(o5());return e.copy=function(){return xy(e,TX()).exponent(e.exponent())},Ey.apply(e,arguments)}function WNt(){return TX.apply(null,arguments).exponent(.5)}function a5(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Pu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=JK(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Fm),h.rangeRound=p($I),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function YNe(){var e=m_(a5()(Pu));return e.copy=function(){return xy(e,YNe())},Ey.apply(e,arguments)}function KNe(){var e=yX(a5()).domain([.1,1,10]);return e.copy=function(){return xy(e,KNe()).base(e.base())},Ey.apply(e,arguments)}function XNe(){var e=vX(a5());return e.copy=function(){return xy(e,XNe()).constant(e.constant())},Ey.apply(e,arguments)}function CX(){var e=_X(a5());return e.copy=function(){return xy(e,CX()).exponent(e.exponent())},Ey.apply(e,arguments)}function GNt(){return CX.apply(null,arguments).exponent(.5)}function Kf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const YNt=Kf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),KNt=Kf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),XNt=Kf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),QNt=Kf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),JNt=Kf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ZNt=Kf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),eDt=Kf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),tDt=Kf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),nDt=Kf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),rDt=Kf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),QNe=Kf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Or(e){return function(){return e}}const ume=Math.abs,Jo=Math.atan2,qy=Math.cos,iDt=Math.max,lB=Math.min,ad=Math.sin,Bv=Math.sqrt,na=1e-12,hE=Math.PI,oM=hE/2,JNe=2*hE;function sDt(e){return e>1?0:e<-1?hE:Math.acos(e)}function lme(e){return e>=1?oM:e<=-1?-oM:Math.asin(e)}function u5(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new rX(t)}function oDt(e){return e.innerRadius}function aDt(e){return e.outerRadius}function uDt(e){return e.startAngle}function lDt(e){return e.endAngle}function cDt(e){return e&&e.padAngle}function fDt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<na))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ck(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Bv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,S=i-s,x=d*m-p*h,b=(_<0?-1:1)*Bv(iDt(0,S*S*w-x*x)),T=(x*_-v*b)/w,A=(-x*v-_*b)/w,I=(x*_+v*b)/w,k=(-x*v+_*b)/w,R=T-g,P=A-y,N=I-g,F=k-y;return R*R+P*P>N*N+F*F&&(T=I,A=k),{cx:T,cy:A,x01:-c,y01:-f,x11:T*(i/S-1),y11:A*(i/S-1)}}function dDt(){var e=oDt,t=aDt,n=Or(0),r=null,i=uDt,s=lDt,o=cDt,a=null,u=u5(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-oM,m=s.apply(this,arguments)-oM,g=ume(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>na))a.moveTo(0,0);else if(g>JNe-na)a.moveTo(h*qy(p),h*ad(p)),a.arc(0,0,h,p,m,!y),d>na&&(a.moveTo(d*qy(m),d*ad(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,S=m,x=g,b=g,T=o.apply(this,arguments)/2,A=T>na&&(r?+r.apply(this,arguments):Bv(d*d+h*h)),I=lB(ume(h-d)/2,+n.apply(this,arguments)),k=I,R=I,P,N;if(A>na){var F=lme(A/d*ad(T)),B=lme(A/h*ad(T));(x-=F*2)>na?(F*=y?1:-1,w+=F,S-=F):(x=0,w=S=(p+m)/2),(b-=B*2)>na?(B*=y?1:-1,v+=B,_-=B):(b=0,v=_=(p+m)/2)}var W=h*qy(v),V=h*ad(v),G=d*qy(S),M=d*ad(S);if(I>na){var H=h*qy(_),Y=h*ad(_),L=d*qy(w),j=d*ad(w),q;if(g<hE)if(q=fDt(W,V,L,j,H,Y,G,M)){var Z=W-q[0],ue=V-q[1],he=H-q[0],fe=Y-q[1],me=1/ad(sDt((Z*he+ue*fe)/(Bv(Z*Z+ue*ue)*Bv(he*he+fe*fe)))/2),_e=Bv(q[0]*q[0]+q[1]*q[1]);k=lB(I,(d-_e)/(me-1)),R=lB(I,(h-_e)/(me+1))}else k=R=0}b>na?R>na?(P=ck(L,j,W,V,h,R,y),N=ck(H,Y,G,M,h,R,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),R<I?a.arc(P.cx,P.cy,R,Jo(P.y01,P.x01),Jo(N.y01,N.x01),!y):(a.arc(P.cx,P.cy,R,Jo(P.y01,P.x01),Jo(P.y11,P.x11),!y),a.arc(0,0,h,Jo(P.cy+P.y11,P.cx+P.x11),Jo(N.cy+N.y11,N.cx+N.x11),!y),a.arc(N.cx,N.cy,R,Jo(N.y11,N.x11),Jo(N.y01,N.x01),!y))):(a.moveTo(W,V),a.arc(0,0,h,v,_,!y)):a.moveTo(W,V),!(d>na)||!(x>na)?a.lineTo(G,M):k>na?(P=ck(G,M,H,Y,d,-k,y),N=ck(W,V,L,j,d,-k,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),k<I?a.arc(P.cx,P.cy,k,Jo(P.y01,P.x01),Jo(N.y01,N.x01),!y):(a.arc(P.cx,P.cy,k,Jo(P.y01,P.x01),Jo(P.y11,P.x11),!y),a.arc(0,0,d,Jo(P.cy+P.y11,P.cx+P.x11),Jo(N.cy+N.y11,N.cx+N.x11),y),a.arc(N.cx,N.cy,k,Jo(N.y11,N.x11),Jo(N.y01,N.x01),!y))):a.arc(0,0,d,S,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-hE/2;return[qy(f)*c,ad(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Or(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Or(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Or(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Or(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Or(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Or(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Or(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function ZNe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eDe(e){this._context=e}eDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function AX(e){return new eDe(e)}function tDe(e){return e[0]}function nDe(e){return e[1]}function aM(e,t){var n=Or(!0),r=null,i=AX,s=null,o=u5(a);e=typeof e=="function"?e:e===void 0?tDe:Or(e),t=typeof t=="function"?t:t===void 0?nDe:Or(t);function a(u){var l,c=(u=ZNe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Or(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Or(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Or(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function rDe(e,t,n){var r=null,i=Or(!0),s=null,o=AX,a=null,u=u5(l);e=typeof e=="function"?e:e===void 0?tDe:Or(+e),t=typeof t=="function"?t:Or(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?nDe:Or(+n);function l(f){var d,h,p,m=(f=ZNe(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return aM().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Or(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Or(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Or(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Or(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Or(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Or(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Or(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const hDt={draw(e,t){const n=Bv(t/hE);e.moveTo(n,0),e.arc(0,0,n,0,JNe)}};function pDt(e,t){let n=null,r=u5(i);e=typeof e=="function"?e:Or(e||hDt),t=typeof t=="function"?t:Or(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Or(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Or(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function F0(){}function uM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function l5(e){this._context=e}l5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YV(e){return new l5(e)}function iDe(e){this._context=e}iDe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mDt(e){return new iDe(e)}function sDe(e){this._context=e}sDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:uM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gDt(e){return new sDe(e)}function oDe(e,t){this._basis=new l5(e),this._beta=t}oDe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const yDt=function e(t){function n(r){return t===1?new l5(r):new oDe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function lM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function IX(e,t){this._context=e,this._k=(1-t)/6}IX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:lM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:lM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vDt=function e(t){function n(r){return new IX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function OX(e,t){this._context=e,this._k=(1-t)/6}OX.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:lM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _Dt=function e(t){function n(r){return new OX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function PX(e,t){this._context=e,this._k=(1-t)/6}PX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:lM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bDt=function e(t){function n(r){return new PX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function kX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>na){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>na){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function aDe(e,t){this._context=e,this._alpha=t}aDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:kX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wDt=function e(t){function n(r){return t?new aDe(r,t):new IX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uDe(e,t){this._context=e,this._alpha=t}uDe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:kX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EDt=function e(t){function n(r){return t?new uDe(r,t):new OX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lDe(e,t){this._context=e,this._alpha=t}lDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:kX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xDt=function e(t){function n(r){return t?new lDe(r,t):new PX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cDe(e){this._context=e}cDe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SDt(e){return new cDe(e)}function cme(e){return e<0?-1:1}function fme(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(cme(s)+cme(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function dme(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function cB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function cM(e){this._context=e}cM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cB(this,this._t0,dme(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,cB(this,dme(this,n=fme(this,e,t)),n);break;default:cB(this,this._t0,n=fme(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function fDe(e){this._context=new dDe(e)}(fDe.prototype=Object.create(cM.prototype)).point=function(e,t){cM.prototype.point.call(this,t,e)};function dDe(e){this._context=e}dDe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function TDt(e){return new cM(e)}function CDt(e){return new fDe(e)}function hDe(e){this._context=e}hDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=hme(e),i=hme(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hme(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function ADt(e){return new hDe(e)}function c5(e,t){this._context=e,this._t=t}c5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function IDt(e){return new c5(e,.5)}function ODt(e){return new c5(e,0)}function PDt(e){return new c5(e,1)}function VT(e,t,n){this.k=e,this.x=t,this.y=n}VT.prototype={constructor:VT,scale:function(e){return e===1?this:new VT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new VT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};VT.prototype;function jI({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:u=!1,columnList:l,setColumn:c,stringTicks:f=!1}){const d=C.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=C.useCallback(p=>(s?s5("%B"):Tx(".2s"))(p),[s]);return $.jsxs($.Fragment,{children:[$.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:$.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:$.jsx(Ya,{children:$.jsx(gr,{spacing:3,children:$.jsx(dt,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),$.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?$.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>$.jsxs("g",{transform:`translate(${m}, ${n})`,children:[$.jsx("line",{y2:"6",stroke:"currentColor"}),o?$.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,$.jsx("foreignObject",{x:0-d/2,y:10,width:d,height:20,children:$.jsx(Ya,{children:$.jsx(Wp,{withinPortal:!0,label:p,children:$.jsx(dt,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:f?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const kDt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:jI},Symbol.toStringTag,{value:"Module"}));function f5({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=C.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>20?120:u*6},[i]);return $.jsxs($.Fragment,{children:[$.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:$.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:$.jsx(Ya,{children:$.jsx(gr,{spacing:3,children:$.jsx(dt,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),$.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?$.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>$.jsxs("g",{transform:`translate(${n}, ${l})`,children:[$.jsx("line",{x2:"-6",stroke:"currentColor"}),s?$.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,$.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:$.jsx("foreignObject",{width:a,height:20,children:$.jsx(gr,{style:{width:"100%",height:"100%"},position:"right",children:$.jsx(dt,{lineClamp:1,sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const RDt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:f5},Symbol.toStringTag,{value:"Module"})),fu={top:15,left:160,right:50,bottom:130};function KV({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=mc(),u=C.useMemo(()=>a-fu.left-fu.right,[a]),l=C.useMemo(()=>o-fu.top-fu.bottom,[o]),c=C.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),f=C.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return Ax(QNe).domain(g)},[r,n.category]),d=C.useMemo(()=>c?yh([fu.left,u+fu.left]).domain([0,yc(c.objects().map(g=>g.count))]).nice():null,[c,u]),h=C.useMemo(()=>c?Z4([fu.top,l+fu.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,l,n.category]),p=C.useMemo(()=>!d||!h||!f||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:$.jsxs("g",{style:{cursor:"pointer"},children:[$.jsx("rect",{onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:fu.left,y:h(g[n.category]),fill:f(g[n.category]),height:h.bandwidth(),width:d(g.count)-fu.left},y),$.jsx("text",{x:d(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,f,r,n.category,n.ids,i,d,h]),m=C.useMemo(()=>!d||!h||!f||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:$.jsx("g",{style:{cursor:"pointer"},children:$.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:fu.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:d(g.count)-fu.left},y)},y)),[f,r,c,n.category,n.ids,i,d,h]);return h&&d?$.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[$.jsx(jI,{xScale:d,yRange:h.range(),vertPosition:l+fu.top,showLines:!1,label:"Count",ticks:d.ticks(5).map(g=>({value:g.toString(),offset:d(g)}))}),h?$.jsx(f5,{yScale:h,horizontalPosition:fu.left,xRange:d.range(),label:n.category,ticks:f.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):$.jsx(dh,{})}const $Dt=Object.freeze(Object.defineProperty({__proto__:null,Bar:KV,default:KV},Symbol.toStringTag,{value:"Module"})),hr=Array.isArray;function Uu(e){return e!=null?hr(e)?e:[e]:[]}function NDt(e=0,t=1/0){return`${pme(e)} < row_number() && row_number() <= ${pme(t)}`}function pme(e){return e<0?`count() + ${e}`:e}class pDe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(NDt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Uu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Pn(e){throw Error(e)}function Za(e){return typeof e=="number"}function Si(e){return typeof e=="function"}function d5(e,t){const n=Array(e);if(Si(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let DDt=class extends pDe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Pn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Pn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Pn("Not implemented")}getter(t){Pn("Not implemented")}objects(t){Pn("Not implemented")}object(t){Pn("Not implemented")}[Symbol.iterator](){Pn("Not implemented")}print(t={}){Za(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=d5(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},MDt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},LDt=function(e){return e&&Si(e.get)?e:new MDt(e)};function gm(e){return e instanceof Date}function Sa(e){return e===Object(e)}function fM(e){return e instanceof RegExp}function Bo(e){return typeof e=="string"}function FDt(e,t){const n=r=>Pn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?mme(e.entries(),t):gm(e)?n("Date"):fM(e)?n("RegExp"):Bo(e)?n():hr(e)?jDt(e,t):Si(e[Symbol.iterator])?BDt(e,t):Sa(e)?mme(Object.entries(e),t):n()}function mme(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function jDt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function BDt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:zDt}=Object.prototype;function Lf(e,t){return zDt.call(e,t)}function Vl(e){return e?new gme({...e.data()},e.columnNames()):new gme}class gme{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Lf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const lr=void 0,UDt=Object.getPrototypeOf(Int8Array);function BI(e){return e instanceof UDt}function zv(e){return hr(e)||BI(e)}function _f(e){return e!=null&&e===e}const KS=e=>zv(e)||Bo(e),VDt={compact:e=>zv(e)?e.filter(t=>_f(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>KS(e)?e.includes(t,n):!1,indexof:(e,t)=>KS(e)?e.indexOf(t):-1,join:(e,t)=>zv(e)?e.join(t):lr,lastindexof:(e,t)=>KS(e)?e.lastIndexOf(t):-1,length:e=>KS(e)?e.length:0,pluck:(e,t)=>zv(e)?e.map(n=>_f(n)?n[t]:lr):lr,reverse:e=>zv(e)?e.slice().reverse():Bo(e)?e.split("").reverse().join(""):lr,slice:(e,t,n)=>KS(e)?e.slice(t,n):lr};function HDt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function YR(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const ud=e=>(e<10?"0":"")+e,qDt=e=>e<0?"-"+YR(-e,6):e>9999?"+"+YR(e,6):YR(e,4);function mDe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return qDt(e)+"-"+ud(t+1)+"-"+ud(n)+(!u||o?"T"+ud(r)+":"+ud(i)+":"+ud(s)+"."+YR(o,3)+l:s?"T"+ud(r)+":"+ud(i)+":"+ud(s)+l:i||r||!a?"T"+ud(r)+":"+ud(i)+l:"")}function gDe(e,t){return isNaN(e)?"Invalid Date":mDe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function h5(e,t){return isNaN(e)?"Invalid Date":mDe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const WDt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function GDt(e){return e.match(WDt)&&!isNaN(Date.parse(e))}function YDt(e,t=Date.parse){return GDt(e)?t(e):e}const yDe=6e4,vDe=864e5,_De=6048e5,Yi=new Date,Ki=new Date,is=e=>(Yi.setTime(typeof e=="string"?YDt(e):e),Yi);function KDt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function XDt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function QDt(e){Ki.setTime(+e),Ki.setHours(0,0,0,0),Yi.setTime(+Ki),Yi.setMonth(0),Yi.setDate(1);const t=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*yDe;return Math.floor(1+(Ki-Yi-t)/vDe)}function JDt(e){Ki.setTime(+e),Ki.setUTCHours(0,0,0,0);const t=Date.UTC(Ki.getUTCFullYear(),0,1);return Math.floor(1+(Ki-t)/vDe)}function ZDt(e,t){const n=t||0;Ki.setTime(+e),Ki.setDate(Ki.getDate()-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0),Yi.setTime(+e),Yi.setMonth(0),Yi.setDate(1),Yi.setDate(1-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0);const r=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*yDe;return Math.floor((1+(Ki-Yi)-r)/_De)}function e3t(e,t){const n=t||0;return Ki.setTime(+e),Ki.setUTCDate(Ki.getUTCDate()-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Yi.setTime(+e),Yi.setUTCMonth(0),Yi.setUTCDate(1),Yi.setUTCDate(1-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Math.floor((1+(Ki-Yi))/_De)}const t3t={format_date:(e,t)=>gDe(is(e),!t),format_utcdate:(e,t)=>h5(is(e),!t),timestamp:e=>+is(e),year:e=>is(e).getFullYear(),quarter:e=>Math.floor(is(e).getMonth()/3),month:e=>is(e).getMonth(),date:e=>is(e).getDate(),dayofweek:e=>is(e).getDay(),hours:e=>is(e).getHours(),minutes:e=>is(e).getMinutes(),seconds:e=>is(e).getSeconds(),milliseconds:e=>is(e).getMilliseconds(),utcyear:e=>is(e).getUTCFullYear(),utcquarter:e=>Math.floor(is(e).getUTCMonth()/3),utcmonth:e=>is(e).getUTCMonth(),utcdate:e=>is(e).getUTCDate(),utcdayofweek:e=>is(e).getUTCDay(),utchours:e=>is(e).getUTCHours(),utcminutes:e=>is(e).getUTCMinutes(),utcseconds:e=>is(e).getUTCSeconds(),utcmilliseconds:e=>is(e).getUTCMilliseconds(),datetime:KDt,dayofyear:QDt,week:ZDt,utcdatetime:XDt,utcdayofyear:JDt,utcweek:e3t,now:Date.now};function RX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:gm(e)||gm(t)?+e==+t:fM(e)&&fM(t)?e+""==t+"":Sa(e)&&Sa(t)?n3t(e,t):!1}function n3t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return yme(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!yme(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!RX(e[o],t[o]))return!1}return!0}function yme(e,t,n=RX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const r3t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let i3t=Math.random;function Px(){return i3t()}const s3t={random:Px,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function $X(e){return e instanceof Map}function o3t(e){return e instanceof Set}function KR(e){return $X(e)||o3t(e)}function fB(e){return Array.from(e)}const a3t={has:(e,t)=>KR(e)?e.has(t):e!=null?Lf(e,t):!1,keys:e=>$X(e)?fB(e.keys()):e!=null?Object.keys(e):[],values:e=>KR(e)?fB(e.values()):e!=null?Object.values(e):[],entries:e=>KR(e)?fB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):lr};function u3t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Lf(t,e))return t[e];return n!==void 0?n:e}function l3t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const c3t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},qb={bin:HDt,equal:RX,recode:u3t,sequence:l3t,...VDt,...t3t,...r3t,...s3t,...a3t,...c3t};function rA(e){return typeof e=="bigint"}function bh(e){return e===void 0?e+"":rA(e)?e+"n":JSON.stringify(e)}function Tn(e,t=[],n=[]){return new f3t(e,Uu(t),Uu(n))}let f3t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${bh(n)}]`),...this.params.map(bh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const bDe=e=>Tn("any",e),wDe=()=>Tn("count"),EDe=e=>Tn("array_agg",e),xDe=e=>Tn("array_agg_distinct",e),SDe=(e,t)=>Tn("map_agg",[e,t]),TDe=(e,t)=>Tn("object_agg",[e,t]),CDe=(e,t)=>Tn("entries_agg",[e,t]),j2={...qb,row_object:(...e)=>Tn("row_object",null,e.flat()),count:wDe,any:bDe,array_agg:EDe,array_agg_distinct:xDe,object_agg:TDe,map_agg:SDe,entries_agg:CDe,valid:e=>Tn("valid",e),invalid:e=>Tn("invalid",e),distinct:e=>Tn("distinct",e),mode:e=>Tn("mode",e),sum:e=>Tn("sum",e),product:e=>Tn("product",e),mean:e=>Tn("mean",e),average:e=>Tn("average",e),variance:e=>Tn("variance",e),variancep:e=>Tn("variancep",e),stdev:e=>Tn("stdev",e),stdevp:e=>Tn("stdevp",e),min:e=>Tn("min",e),max:e=>Tn("max",e),quantile:(e,t)=>Tn("quantile",e,t),median:e=>Tn("median",e),covariance:(e,t)=>Tn("covariance",[e,t]),covariancep:(e,t)=>Tn("covariancep",[e,t]),corr:(e,t)=>Tn("corr",[e,t]),bins:(e,t,n,r)=>Tn("bins",e,[t,n,r]),row_number:()=>Tn("row_number"),rank:()=>Tn("rank"),avg_rank:()=>Tn("avg_rank"),dense_rank:()=>Tn("dense_rank"),percent_rank:()=>Tn("percent_rank"),cume_dist:()=>Tn("cume_dist"),ntile:e=>Tn("ntile",null,e),lag:(e,t,n)=>Tn("lag",e,[t,n]),lead:(e,t,n)=>Tn("lead",e,[t,n]),first_value:e=>Tn("first_value",e),last_value:e=>Tn("last_value",e),nth_value:(e,t)=>Tn("nth_value",e,t),fill_down:(e,t)=>Tn("fill_down",e,t),fill_up:(e,t)=>Tn("fill_up",e,t)};function d3t(e,t){e=KR(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function h3t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function p3t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function m3t(e,t,n,r){const i=r==="map"||r===!0?SDe:r==="entries"?CDe:r==="object"?TDe:Pn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=d3t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:EDe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const g3t="ArrayPattern",y3t="ArrowFunctionExpression",v3t="FunctionExpression",m0="Identifier",kx="Literal",ADe="MemberExpression",_3t="ObjectExpression",IDe="ObjectPattern",ODe="Property",zI="Column",b3t="Constant",w3t="Dictionary",E3t="Function",x3t="Parameter",PDe="Op",li=(e,t)=>{const n=S3t[e.type];return n?n(e,t):Pn(`Unsupported expression construct: ${e.type}`)},dB=(e,t)=>"("+li(e.left,t)+" "+e.operator+" "+li(e.right,t)+")",hB=(e,t)=>"("+vd(e.params,t)+")=>"+li(e.body,t),vme=(e,t)=>li(e.callee,t)+"("+vd(e.arguments,t)+")",vd=(e,t,n=",")=>e.map(r=>li(r,t)).join(n),kDe=e=>e.computed?`[${bh(e.name)}]`:`.${e.name}`,_me=(e,t,n)=>{const r=e.table||"";return`data${r}${kDe(e)}.${n}(${t.index}${r})`},S3t={Constant:e=>e.raw,Column:(e,t)=>_me(e,t,"get"),Dictionary:(e,t)=>_me(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${kDe(e)}`,Op:(e,t)=>`op(${bh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+li(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=li(e.object,t),i=li(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:vme,NewExpression:(e,t)=>"new "+vme(e,t),ArrayExpression:(e,t)=>"["+vd(e.elements,t)+"]",AssignmentExpression:dB,BinaryExpression:dB,LogicalExpression:dB,UnaryExpression:(e,t)=>"("+e.operator+li(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+li(e.test,t)+"?"+li(e.consequent,t)+":"+li(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+vd(e.properties,t)+"})",Property:(e,t)=>{const n=li(e.key,t);return(e.computed?`[${n}]`:n)+":"+li(e.value,t)},ArrowFunctionExpression:hB,FunctionExpression:hB,FunctionDeclaration:hB,ArrayPattern:(e,t)=>"["+vd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+vd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+vd(e.declarations,t,","),VariableDeclarator:(e,t)=>li(e.id,t)+"="+li(e.init,t),SpreadElement:(e,t)=>"..."+li(e.argument,t),BlockStatement:(e,t)=>"{"+vd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>li(e.expression,t),IfStatement:(e,t)=>"if ("+li(e.test,t)+")"+li(e.consequent,t)+(e.alternate?" else "+li(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+li(e.discriminant,t)+") {"+vd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+li(e.test,t):"default")+": "+vd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+li(e.argument,t),Program:(e,t)=>li(e.body[0],t)};function dM(e,t={index:"row"}){return li(e,t)}function T3t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function pE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:gm(e)?+e:hr(e)||BI(e)?`[${e.map(pE)}]`:fM(e)?e+"":C3t(e)}function C3t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${pE(e[r])}`;return t+="}",t}function hM(e,t){const n=e.length;return n===1?(r,i)=>pE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=pE(a)}return s}}function A3t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=pE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=pE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function wp(){}function I3t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Ps(e){return e.init=e.init||wp,e.add=e.add||wp,e.rem=e.rem||wp,e}function bme(e,t){return e.product_v=!1,e.product=t}const RDe={count:{create:()=>Ps({value:e=>e.count}),param:[]},array_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ps({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:lr}),param:[1]},valid:{create:()=>Ps({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ps({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=A3t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ps({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ps({value:e=>{let t=lr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:lr,add:(e,t)=>rA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>bme(e,1),value:e=>e.valid?e.product_v?bme(e,I3t(e.list.values())):e.product:void 0,add:(e,t)=>rA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:lr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ps({value:e=>e.valid?e.mean:lr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):lr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ps({value:e=>e.valid>1?e.dev/e.valid:lr}),param:[1],req:["variance"]},stdev:{create:()=>Ps({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):lr}),param:[1],req:["variance"]},stdevp:{create:()=>Ps({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):lr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=lr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===lr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=lr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===lr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ps({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ps({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):lr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Ps({value:e=>e.valid>1?e.cov/e.valid:lr}),param:[2],req:["covariance"]},corr:{create:()=>Ps({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):lr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Ps({value:i=>T3t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},wme={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Eme={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},$De={row_number:{create(){return{init:wp,value:e=>e.index+1}},param:[]},rank:wme,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=wme.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Eme,ntile:{create(e){e=+e,e>0||Pn("ntile num must be greater than zero.");const{init:t,value:n}=Eme.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=lr){return e=+e||1,{init:wp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=lr){return e=+e||1,{init:wp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:wp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:wp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Pn("nth_value nth must be greater than zero."),{init:wp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):lr}}},param:[1,1]},fill_down:{create(e=lr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return _f(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=lr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=O3t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function O3t(e,t,n){for(const r=e.size;n<r;++n)if(_f(e.value(n,t)))return n;return-1}function NX(e){return Lf(RDe,e)}function DX(e){return Lf($De,e)}function NDe(e){return Lf(qb,e)||e==="row_object"}function DDe(e){return NX(e)&&RDe[e]}function MDe(e){return DX(e)&&$De[e]}function XS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const MX={escape:(e,t,n)=>XS(e,t,n),expr:(e,t)=>XS(`(row,data,op)=>${e}`,qb,t),expr2:(e,t)=>XS(`(row0,data0,row,data)=>${e}`,qb,t),join:(e,t)=>XS(`(row1,data1,row2,data2)=>${e}`,qb,t),param:(e,t)=>XS(e,qb,t)},P3t={"==":1,"!=":1,"===":1,"!==":1};function LDe(e,t,n=0,r,i){if(e.type=zI,e.name=t,e.table=n,i&&r&&Si(r.keyFor)){const s=P3t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===kx&&k3t(i,e,s,r.keyFor(s.value))}return e}function k3t(e,t,n,r){return r<0?(e.type=kx,e.value=!1,e.raw="false"):(t.type=w3t,n.value=r,n.raw=r+""),!0}function p5(e){return hr(e)?e:$X(e)?e.entries():e?Object.entries(e):[]}const FDe="row_object";function jDe(e,t){e.type=_3t;const n=e.properties=[];for(const r of p5(t)){const[i,s]=hr(r)?r:[r,r];n.push({type:ODe,key:{type:kx,raw:bh(s)},value:LDe({computed:!0},i)})}return e}function BDe(e){return dM(jDe({},e))}function zDe(e){return MX.expr(BDe(e))}function LX(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Cp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function xme(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zn(e){return this instanceof Zn?(this.v=e,this):new Zn(e)}function Uv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Zn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function pB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Zn(e[i](o)),done:!1}:s?s(o):o}:s}}function B2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof xme=="function"?xme(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const R3t=new TextDecoder("utf-8"),XV=e=>R3t.decode(e),$3t=new TextEncoder,FX=e=>$3t.encode(e),N3t=e=>typeof e=="boolean",yu=e=>typeof e=="function",Sy=e=>e!=null&&Object(e)===e,m5=e=>Sy(e)&&yu(e.then),jX=e=>Sy(e)&&yu(e[Symbol.iterator]),g5=e=>Sy(e)&&yu(e[Symbol.asyncIterator]),D3t=e=>Sy(e)&&"done"in e&&"value"in e,UDe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,M3t=e=>Sy(e)&&yu(e.abort)&&yu(e.getWriter)&&!UDe(e),L3t=e=>Sy(e)&&yu(e.end)&&yu(e.write)&&N3t(e.writable)&&!UDe(e),F3t=e=>Sy(e)&&yu(e.clear)&&yu(e.bytes)&&yu(e.position)&&yu(e.setPosition)&&yu(e.capacity)&&yu(e.getBufferIdentifier)&&yu(e.createLong),BX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function j3t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function pM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function wh(e,t){const n=j3t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?pM(o,s,a):o=s;break}pM(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Qs(e,t){let n=D3t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=FX(n)),n instanceof ArrayBuffer?new e(n):n instanceof BX?new e(n):F3t(n)?Qs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const QS=e=>Qs(Int32Array,e),Mr=e=>Qs(Uint8Array,e),QV=e=>(e.next(),e);function*B3t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof BX?n(t):jX(t)?t:n(t);return yield*QV(function*(i){let s=null;do s=i.next(yield Qs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const z3t=e=>B3t(Uint8Array,e);function VDe(e,t){return Uv(this,arguments,function*(){if(m5(t))return yield Zn(yield Zn(yield*pB(B2(VDe(e,yield Zn(t))))));const r=function(o){return Uv(this,arguments,function*(){yield yield Zn(yield Zn(o))})},i=function(o){return Uv(this,arguments,function*(){yield Zn(yield*pB(B2(QV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof BX?r(t):jX(t)?i(t):g5(t)?t:r(t);return yield Zn(yield*pB(B2(QV(function(o){return Uv(this,arguments,function*(){let a=null;do a=yield Zn(o.next(yield yield Zn(Qs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Zn(new e)})}const U3t=e=>VDe(Uint8Array,e);function HDe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function V3t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Sme={fromIterable(e){return fk(H3t(e))},fromAsyncIterable(e){return fk(q3t(e))},fromDOMStream(e){return fk(W3t(e))},fromNodeStream(e){return fk(Y3t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},fk=e=>(e.next(),e);function*H3t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?wh(r,o)[0]:([i,r,a]=wh(r,o),i)}({cmd:s,size:o}=yield null);const l=z3t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function q3t(e){return Uv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?wh(i,a)[0]:([s,i,u]=wh(i,a),s)}({cmd:o,size:a}=yield yield Zn(null));const c=U3t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Zn(c.next()):yield Zn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Zn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Zn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Zn(c.return(new Uint8Array(0))))}return yield Zn(null)})}function W3t(e){return Uv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?wh(i,a)[0]:([s,i,u]=wh(i,a),s)}({cmd:o,size:a}=yield yield Zn(null));const c=new G3t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Zn(c.read()):yield Zn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Mr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Zn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Zn(c.cancel(f)))}finally{r===!1?yield Zn(c.cancel()):e.locked&&c.releaseLock()}return yield Zn(null)})}class G3t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Cp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Cp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Mr(n)),n})}}const mB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Y3t(e){return Uv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?wh(l,a)[0]:([c,l,u]=wh(l,a),c)}if({cmd:o,size:a}=yield yield Zn(null),e.isTTY)return yield yield Zn(new Uint8Array(0)),yield Zn(null);try{n[0]=mB(e,"end"),n[1]=mB(e,"error");do{if(n[2]=mB(e,"readable"),[r,s]=yield Zn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Mr(e.read(a-u)),c.byteLength<a-u&&(c=Mr(e.read()))):c=Mr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Zn(f()));while(a<u)}while(!i)}finally{yield Zn(d(n,r==="error"?s:null))}return yield Zn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var za;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(za||(za={}));var Vu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Vu||(Vu={}));var $o;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})($o||($o={}));var Eh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Eh||(Eh={}));var tn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(tn||(tn={}));var xh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(xh||(xh={}));var eo;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(eo||(eo={}));var ie;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ie||(ie={}));var mp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(mp||(mp={}));const K3t=void 0;function k1(e){if(e===null)return"null";if(e===K3t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>k1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const X3t=Symbol.for("isArrowBigNum");function Xf(e,...t){return t.length===0?Object.setPrototypeOf(Qs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Xf.prototype[X3t]=!0;Xf.prototype.toJSON=function(){return`"${sA(this)}"`};Xf.prototype.valueOf=function(){return qDe(this)};Xf.prototype.toString=function(){return sA(this)};Xf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return qDe(this);case"string":return sA(this);case"default":return Q3t(this)}return sA(this)};function ww(...e){return Xf.apply(this,e)}function Ew(...e){return Xf.apply(this,e)}function iA(...e){return Xf.apply(this,e)}Object.setPrototypeOf(ww.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ew.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(iA.prototype,Object.create(Uint32Array.prototype));Object.assign(ww.prototype,Xf.prototype,{constructor:ww,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Ew.prototype,Xf.prototype,{constructor:Ew,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(iA.prototype,Xf.prototype,{constructor:iA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function qDe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const sA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return gB(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return gB(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${gB(t)}`},Q3t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:sA(e);function gB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class zX{static new(t,n){switch(n){case!0:return new ww(t);case!1:return new Ew(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ww(t)}return t.byteLength===16?new iA(t):new Ew(t)}static signed(t){return new ww(t)}static unsigned(t){return new Ew(t)}static decimal(t){return new iA(t)}constructor(t,n){return zX.new(t,n)}}function Ff(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var WDe,GDe,YDe,KDe,XDe,QDe,JDe,ZDe,e3e,t3e,n3e,r3e,i3e,s3e,o3e,a3e,u3e,l3e,c3e,f3e;let $n=class JV{static isNull(t){return(t==null?void 0:t.typeId)===ie.Null}static isInt(t){return(t==null?void 0:t.typeId)===ie.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ie.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ie.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ie.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ie.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ie.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ie.Date}static isTime(t){return(t==null?void 0:t.typeId)===ie.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ie.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ie.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ie.Duration}static isList(t){return(t==null?void 0:t.typeId)===ie.List}static isStruct(t){return(t==null?void 0:t.typeId)===ie.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ie.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ie.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ie.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ie.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ie.Dictionary}static isDenseUnion(t){return JV.isUnion(t)&&t.mode===Vu.Dense}static isSparseUnion(t){return JV.isUnion(t)&&t.mode===Vu.Sparse}get typeId(){return ie.NONE}};WDe=Symbol.toStringTag;$n[WDe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))($n.prototype);let ym=class extends $n{toString(){return"Null"}get typeId(){return ie.Null}};GDe=Symbol.toStringTag;ym[GDe]=(e=>e[Symbol.toStringTag]="Null")(ym.prototype);class eu extends $n{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ie.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}YDe=Symbol.toStringTag;eu[YDe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(eu.prototype);class UX extends eu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class VX extends eu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class j0 extends eu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class HX extends eu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class qX extends eu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class WX extends eu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class GX extends eu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class YX extends eu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(UX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(VX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(j0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(HX.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(qX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(WX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(GX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(YX.prototype,"ArrayType",{value:BigUint64Array});class B0 extends $n{constructor(t){super(),this.precision=t}get typeId(){return ie.Float}get ArrayType(){switch(this.precision){case $o.HALF:return Uint16Array;case $o.SINGLE:return Float32Array;case $o.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}KDe=Symbol.toStringTag;B0[KDe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(B0.prototype);class d3e extends B0{constructor(){super($o.HALF)}}class KX extends B0{constructor(){super($o.SINGLE)}}class XX extends B0{constructor(){super($o.DOUBLE)}}Object.defineProperty(d3e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(KX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(XX.prototype,"ArrayType",{value:Float64Array});let oA=class extends $n{constructor(){super()}get typeId(){return ie.Binary}toString(){return"Binary"}};XDe=Symbol.toStringTag;oA[XDe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(oA.prototype);let mE=class extends $n{constructor(){super()}get typeId(){return ie.Utf8}toString(){return"Utf8"}};QDe=Symbol.toStringTag;mE[QDe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(mE.prototype);let aA=class extends $n{constructor(){super()}get typeId(){return ie.Bool}toString(){return"Bool"}};JDe=Symbol.toStringTag;aA[JDe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(aA.prototype);let mM=class extends $n{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ie.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};ZDe=Symbol.toStringTag;mM[ZDe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(mM.prototype);class gE extends $n{constructor(t){super(),this.unit=t}get typeId(){return ie.Date}toString(){return`Date${(this.unit+1)*32}<${Eh[this.unit]}>`}}e3e=Symbol.toStringTag;gE[e3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(gE.prototype);class J3t extends gE{constructor(){super(Eh.DAY)}}class Z3t extends gE{constructor(){super(Eh.MILLISECOND)}}class vm extends $n{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ie.Time}toString(){return`Time${this.bitWidth}<${tn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}t3e=Symbol.toStringTag;vm[t3e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(vm.prototype);class eMt extends vm{constructor(){super(tn.SECOND,32)}}class tMt extends vm{constructor(){super(tn.MILLISECOND,32)}}class nMt extends vm{constructor(){super(tn.MICROSECOND,64)}}class rMt extends vm{constructor(){super(tn.NANOSECOND,64)}}class gM extends $n{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ie.Timestamp}toString(){return`Timestamp<${tn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}n3e=Symbol.toStringTag;gM[n3e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(gM.prototype);class yE extends $n{constructor(t){super(),this.unit=t}get typeId(){return ie.Interval}toString(){return`Interval<${xh[this.unit]}>`}}r3e=Symbol.toStringTag;yE[r3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(yE.prototype);class iMt extends yE{constructor(){super(xh.DAY_TIME)}}class sMt extends yE{constructor(){super(xh.YEAR_MONTH)}}let yM=class extends $n{constructor(t){super(),this.unit=t}get typeId(){return ie.Duration}toString(){return`Duration<${tn[this.unit]}>`}};i3e=Symbol.toStringTag;yM[i3e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(yM.prototype);let vE=class extends $n{constructor(t){super(),this.children=[t]}get typeId(){return ie.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};s3e=Symbol.toStringTag;vE[s3e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(vE.prototype);class da extends $n{constructor(t){super(),this.children=t}get typeId(){return ie.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}o3e=Symbol.toStringTag;da[o3e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(da.prototype);class uA extends $n{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ie.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}a3e=Symbol.toStringTag;uA[a3e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(uA.prototype);let vM=class extends $n{constructor(t){super(),this.byteWidth=t}get typeId(){return ie.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};u3e=Symbol.toStringTag;vM[u3e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(vM.prototype);let _E=class extends $n{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ie.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};l3e=Symbol.toStringTag;_E[l3e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(_E.prototype);class lA extends $n{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return ie.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}c3e=Symbol.toStringTag;lA[c3e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(lA.prototype);const oMt=(e=>()=>++e)(-1);class z0 extends $n{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?oMt():Ff(r)}get typeId(){return ie.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}f3e=Symbol.toStringTag;z0[f3e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(z0.prototype);function wd(e){const t=e;switch(e.typeId){case ie.Decimal:return e.bitWidth/32;case ie.Timestamp:return 2;case ie.Date:return 1+t.unit;case ie.Interval:return 1+t.unit;case ie.FixedSizeList:return t.listSize;case ie.FixedSizeBinary:return t.byteWidth;default:return 1}}class Nn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return aMt(this,t,n)}getVisitFnByTypeId(t,n=!0){return bb(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function aMt(e,t,n=!0){return typeof t=="number"?bb(e,t,n):typeof t=="string"&&t in ie?bb(e,ie[t],n):t&&t instanceof $n?bb(e,Tme(t),n):t!=null&&t.type&&t.type instanceof $n?bb(e,Tme(t.type),n):bb(e,ie.NONE,n)}function bb(e,t,n=!0){let r=null;switch(t){case ie.Null:r=e.visitNull;break;case ie.Bool:r=e.visitBool;break;case ie.Int:r=e.visitInt;break;case ie.Int8:r=e.visitInt8||e.visitInt;break;case ie.Int16:r=e.visitInt16||e.visitInt;break;case ie.Int32:r=e.visitInt32||e.visitInt;break;case ie.Int64:r=e.visitInt64||e.visitInt;break;case ie.Uint8:r=e.visitUint8||e.visitInt;break;case ie.Uint16:r=e.visitUint16||e.visitInt;break;case ie.Uint32:r=e.visitUint32||e.visitInt;break;case ie.Uint64:r=e.visitUint64||e.visitInt;break;case ie.Float:r=e.visitFloat;break;case ie.Float16:r=e.visitFloat16||e.visitFloat;break;case ie.Float32:r=e.visitFloat32||e.visitFloat;break;case ie.Float64:r=e.visitFloat64||e.visitFloat;break;case ie.Utf8:r=e.visitUtf8;break;case ie.Binary:r=e.visitBinary;break;case ie.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ie.Date:r=e.visitDate;break;case ie.DateDay:r=e.visitDateDay||e.visitDate;break;case ie.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ie.Timestamp:r=e.visitTimestamp;break;case ie.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ie.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ie.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ie.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ie.Time:r=e.visitTime;break;case ie.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ie.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ie.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ie.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ie.Decimal:r=e.visitDecimal;break;case ie.List:r=e.visitList;break;case ie.Struct:r=e.visitStruct;break;case ie.Union:r=e.visitUnion;break;case ie.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ie.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ie.Dictionary:r=e.visitDictionary;break;case ie.Interval:r=e.visitInterval;break;case ie.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ie.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ie.Duration:r=e.visitDuration;break;case ie.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case ie.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case ie.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case ie.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case ie.FixedSizeList:r=e.visitFixedSizeList;break;case ie.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ie[t]}'`)}function Tme(e){switch(e.typeId){case ie.Null:return ie.Null;case ie.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ie.Int8:ie.Uint8;case 16:return n?ie.Int16:ie.Uint16;case 32:return n?ie.Int32:ie.Uint32;case 64:return n?ie.Int64:ie.Uint64}return ie.Int}case ie.Float:switch(e.precision){case $o.HALF:return ie.Float16;case $o.SINGLE:return ie.Float32;case $o.DOUBLE:return ie.Float64}return ie.Float;case ie.Binary:return ie.Binary;case ie.Utf8:return ie.Utf8;case ie.Bool:return ie.Bool;case ie.Decimal:return ie.Decimal;case ie.Time:switch(e.unit){case tn.SECOND:return ie.TimeSecond;case tn.MILLISECOND:return ie.TimeMillisecond;case tn.MICROSECOND:return ie.TimeMicrosecond;case tn.NANOSECOND:return ie.TimeNanosecond}return ie.Time;case ie.Timestamp:switch(e.unit){case tn.SECOND:return ie.TimestampSecond;case tn.MILLISECOND:return ie.TimestampMillisecond;case tn.MICROSECOND:return ie.TimestampMicrosecond;case tn.NANOSECOND:return ie.TimestampNanosecond}return ie.Timestamp;case ie.Date:switch(e.unit){case Eh.DAY:return ie.DateDay;case Eh.MILLISECOND:return ie.DateMillisecond}return ie.Date;case ie.Interval:switch(e.unit){case xh.DAY_TIME:return ie.IntervalDayTime;case xh.YEAR_MONTH:return ie.IntervalYearMonth}return ie.Interval;case ie.Duration:switch(e.unit){case tn.SECOND:return ie.DurationSecond;case tn.MILLISECOND:return ie.DurationMillisecond;case tn.MICROSECOND:return ie.DurationMicrosecond;case tn.NANOSECOND:return ie.DurationNanosecond}return ie.Duration;case ie.Map:return ie.Map;case ie.List:return ie.List;case ie.Struct:return ie.Struct;case ie.Union:switch(e.mode){case Vu.Dense:return ie.DenseUnion;case Vu.Sparse:return ie.SparseUnion}return ie.Union;case ie.FixedSizeBinary:return ie.FixedSizeBinary;case ie.FixedSizeList:return ie.FixedSizeList;case ie.Dictionary:return ie.Dictionary}throw new Error(`Unrecognized type '${ie[e.typeId]}'`)}Nn.prototype.visitInt8=null;Nn.prototype.visitInt16=null;Nn.prototype.visitInt32=null;Nn.prototype.visitInt64=null;Nn.prototype.visitUint8=null;Nn.prototype.visitUint16=null;Nn.prototype.visitUint32=null;Nn.prototype.visitUint64=null;Nn.prototype.visitFloat16=null;Nn.prototype.visitFloat32=null;Nn.prototype.visitFloat64=null;Nn.prototype.visitDateDay=null;Nn.prototype.visitDateMillisecond=null;Nn.prototype.visitTimestampSecond=null;Nn.prototype.visitTimestampMillisecond=null;Nn.prototype.visitTimestampMicrosecond=null;Nn.prototype.visitTimestampNanosecond=null;Nn.prototype.visitTimeSecond=null;Nn.prototype.visitTimeMillisecond=null;Nn.prototype.visitTimeMicrosecond=null;Nn.prototype.visitTimeNanosecond=null;Nn.prototype.visitDenseUnion=null;Nn.prototype.visitSparseUnion=null;Nn.prototype.visitIntervalDayTime=null;Nn.prototype.visitIntervalYearMonth=null;Nn.prototype.visitDuration=null;Nn.prototype.visitDurationSecond=null;Nn.prototype.visitDurationMillisecond=null;Nn.prototype.visitDurationMicrosecond=null;Nn.prototype.visitDurationNanosecond=null;const h3e=new Float64Array(1),nb=new Uint32Array(h3e.buffer);function p3e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function m3e(e){if(e!==e)return 32256;h3e[0]=e;const t=(nb[1]&2147483648)>>16&65535;let n=nb[1]&2146435072,r=0;return n>=1089470464?nb[0]>0?n=31744:(n=(n&2080374784)>>16,r=(nb[1]&1048575)>>10):n<=1056964608?(r=1048576+(nb[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(nb[1]&1048575)+512>>10),t|n|r&65535}class an extends Nn{}function hn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const uMt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},QX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},lMt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},cMt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},g3e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},fMt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},jm=({values:e},t,n)=>{e[t]=n},JX=({values:e},t,n)=>{e[t]=n},y3e=({values:e},t,n)=>{e[t]=m3e(n)},dMt=(e,t,n)=>{switch(e.type.precision){case $o.HALF:return y3e(e,t,n);case $o.SINGLE:case $o.DOUBLE:return JX(e,t,n)}},ZX=({values:e},t,n)=>{uMt(e,t,n.valueOf())},eQ=({values:e},t,n)=>{QX(e,t*2,n.valueOf())},v3e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},hMt=({values:e,valueOffsets:t},n,r)=>g3e(e,t,n,r),pMt=({values:e,valueOffsets:t},n,r)=>{g3e(e,t,n,FX(r))},_3e=(e,t,n)=>{e.type.unit===Eh.DAY?ZX(e,t,n):eQ(e,t,n)},tQ=({values:e},t,n)=>QX(e,t*2,n/1e3),nQ=({values:e},t,n)=>QX(e,t*2,n),rQ=({values:e},t,n)=>lMt(e,t*2,n),iQ=({values:e},t,n)=>cMt(e,t*2,n),b3e=(e,t,n)=>{switch(e.type.unit){case tn.SECOND:return tQ(e,t,n);case tn.MILLISECOND:return nQ(e,t,n);case tn.MICROSECOND:return rQ(e,t,n);case tn.NANOSECOND:return iQ(e,t,n)}},sQ=({values:e},t,n)=>{e[t]=n},oQ=({values:e},t,n)=>{e[t]=n},aQ=({values:e},t,n)=>{e[t]=n},uQ=({values:e},t,n)=>{e[t]=n},w3e=(e,t,n)=>{switch(e.type.unit){case tn.SECOND:return sQ(e,t,n);case tn.MILLISECOND:return oQ(e,t,n);case tn.MICROSECOND:return aQ(e,t,n);case tn.NANOSECOND:return uQ(e,t,n)}},E3e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},mMt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Sc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},gMt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Sc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},yMt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),vMt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),_Mt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),bMt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),wMt=(e,t,n)=>{const r=e.type.children.map(s=>Sc.getVisitFn(s.type)),i=n instanceof Map?_Mt(t,n):n instanceof pr?vMt(t,n):Array.isArray(n)?yMt(t,n):bMt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},EMt=(e,t,n)=>{e.type.mode===Vu.Dense?x3e(e,t,n):S3e(e,t,n)},x3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Sc.visit(i,e.valueOffsets[t],n)},S3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Sc.visit(i,t,n)},xMt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},T3e=(e,t,n)=>{e.type.unit===xh.DAY_TIME?lQ(e,t,n):cQ(e,t,n)},lQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},cQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},fQ=({values:e},t,n)=>{e[t]=n},dQ=({values:e},t,n)=>{e[t]=n},hQ=({values:e},t,n)=>{e[t]=n},pQ=({values:e},t,n)=>{e[t]=n},C3e=(e,t,n)=>{switch(e.type.unit){case tn.SECOND:return fQ(e,t,n);case tn.MILLISECOND:return dQ(e,t,n);case tn.MICROSECOND:return hQ(e,t,n);case tn.NANOSECOND:return pQ(e,t,n)}},SMt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Sc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};an.prototype.visitBool=hn(fMt);an.prototype.visitInt=hn(jm);an.prototype.visitInt8=hn(jm);an.prototype.visitInt16=hn(jm);an.prototype.visitInt32=hn(jm);an.prototype.visitInt64=hn(jm);an.prototype.visitUint8=hn(jm);an.prototype.visitUint16=hn(jm);an.prototype.visitUint32=hn(jm);an.prototype.visitUint64=hn(jm);an.prototype.visitFloat=hn(dMt);an.prototype.visitFloat16=hn(y3e);an.prototype.visitFloat32=hn(JX);an.prototype.visitFloat64=hn(JX);an.prototype.visitUtf8=hn(pMt);an.prototype.visitBinary=hn(hMt);an.prototype.visitFixedSizeBinary=hn(v3e);an.prototype.visitDate=hn(_3e);an.prototype.visitDateDay=hn(ZX);an.prototype.visitDateMillisecond=hn(eQ);an.prototype.visitTimestamp=hn(b3e);an.prototype.visitTimestampSecond=hn(tQ);an.prototype.visitTimestampMillisecond=hn(nQ);an.prototype.visitTimestampMicrosecond=hn(rQ);an.prototype.visitTimestampNanosecond=hn(iQ);an.prototype.visitTime=hn(w3e);an.prototype.visitTimeSecond=hn(sQ);an.prototype.visitTimeMillisecond=hn(oQ);an.prototype.visitTimeMicrosecond=hn(aQ);an.prototype.visitTimeNanosecond=hn(uQ);an.prototype.visitDecimal=hn(E3e);an.prototype.visitList=hn(mMt);an.prototype.visitStruct=hn(wMt);an.prototype.visitUnion=hn(EMt);an.prototype.visitDenseUnion=hn(x3e);an.prototype.visitSparseUnion=hn(S3e);an.prototype.visitDictionary=hn(xMt);an.prototype.visitInterval=hn(T3e);an.prototype.visitIntervalDayTime=hn(lQ);an.prototype.visitIntervalYearMonth=hn(cQ);an.prototype.visitDuration=hn(C3e);an.prototype.visitDurationSecond=hn(fQ);an.prototype.visitDurationMillisecond=hn(dQ);an.prototype.visitDurationMicrosecond=hn(hQ);an.prototype.visitDurationNanosecond=hn(pQ);an.prototype.visitFixedSizeList=hn(SMt);an.prototype.visitMap=hn(gMt);const Sc=new an,sf=Symbol.for("parent"),xw=Symbol.for("rowIndex");class mQ{constructor(t,n){return this[sf]=t,this[xw]=n,new Proxy(this,new CMt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[xw],n=this[sf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Hu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${k1(t)}: ${k1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new TMt(this[sf],this[xw])}}class TMt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Hu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(mQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[sf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[xw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class CMt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[sf].type.children.map(n=>n.name)}has(t,n){return t[sf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[sf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[sf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Hu.visit(t[sf].children[r],t[xw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[sf].type.children.findIndex(s=>s.name===n);return i!==-1?(Sc.visit(t[sf].children[i],t[xw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class nn extends Nn{}function un(e){return(t,n)=>t.getValid(n)?e(t,n):null}const AMt=(e,t)=>864e5*e[t],gQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),IMt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,OMt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,A3e=e=>new Date(e),PMt=(e,t)=>A3e(AMt(e,t)),kMt=(e,t)=>A3e(gQ(e,t)),RMt=(e,t)=>null,I3e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},$Mt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},O3e=({values:e},t)=>PMt(e,t),P3e=({values:e},t)=>kMt(e,t*2),Ty=({stride:e,values:t},n)=>t[e*n],NMt=({stride:e,values:t},n)=>p3e(t[e*n]),k3e=({values:e},t)=>e[t],DMt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),MMt=({values:e,valueOffsets:t},n)=>I3e(e,t,n),LMt=({values:e,valueOffsets:t},n)=>{const r=I3e(e,t,n);return r!==null?XV(r):null},FMt=({values:e},t)=>e[t],jMt=({type:e,values:t},n)=>e.precision!==$o.HALF?t[n]:p3e(t[n]),BMt=(e,t)=>e.type.unit===Eh.DAY?O3e(e,t):P3e(e,t),R3e=({values:e},t)=>1e3*gQ(e,t*2),$3e=({values:e},t)=>gQ(e,t*2),N3e=({values:e},t)=>IMt(e,t*2),D3e=({values:e},t)=>OMt(e,t*2),zMt=(e,t)=>{switch(e.type.unit){case tn.SECOND:return R3e(e,t);case tn.MILLISECOND:return $3e(e,t);case tn.MICROSECOND:return N3e(e,t);case tn.NANOSECOND:return D3e(e,t)}},M3e=({values:e},t)=>e[t],L3e=({values:e},t)=>e[t],F3e=({values:e},t)=>e[t],j3e=({values:e},t)=>e[t],UMt=(e,t)=>{switch(e.type.unit){case tn.SECOND:return M3e(e,t);case tn.MILLISECOND:return L3e(e,t);case tn.MICROSECOND:return F3e(e,t);case tn.NANOSECOND:return j3e(e,t)}},VMt=({values:e,stride:t},n)=>zX.decimal(e.subarray(t*n,t*(n+1))),HMt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new pr([u])},qMt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new y5(o.slice(i,s-i))},WMt=(e,t)=>new mQ(e,t),GMt=(e,t)=>e.type.mode===Vu.Dense?B3e(e,t):z3e(e,t),B3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Hu.visit(r,e.valueOffsets[t])},z3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Hu.visit(r,t)},YMt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},KMt=(e,t)=>e.type.unit===xh.DAY_TIME?U3e(e,t):V3e(e,t),U3e=({values:e},t)=>e.subarray(2*t,2*(t+1)),V3e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},H3e=({values:e},t)=>e[t],q3e=({values:e},t)=>e[t],W3e=({values:e},t)=>e[t],G3e=({values:e},t)=>e[t],XMt=(e,t)=>{switch(e.type.unit){case tn.SECOND:return H3e(e,t);case tn.MILLISECOND:return q3e(e,t);case tn.MICROSECOND:return W3e(e,t);case tn.NANOSECOND:return G3e(e,t)}},QMt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new pr([s])};nn.prototype.visitNull=un(RMt);nn.prototype.visitBool=un($Mt);nn.prototype.visitInt=un(FMt);nn.prototype.visitInt8=un(Ty);nn.prototype.visitInt16=un(Ty);nn.prototype.visitInt32=un(Ty);nn.prototype.visitInt64=un(k3e);nn.prototype.visitUint8=un(Ty);nn.prototype.visitUint16=un(Ty);nn.prototype.visitUint32=un(Ty);nn.prototype.visitUint64=un(k3e);nn.prototype.visitFloat=un(jMt);nn.prototype.visitFloat16=un(NMt);nn.prototype.visitFloat32=un(Ty);nn.prototype.visitFloat64=un(Ty);nn.prototype.visitUtf8=un(LMt);nn.prototype.visitBinary=un(MMt);nn.prototype.visitFixedSizeBinary=un(DMt);nn.prototype.visitDate=un(BMt);nn.prototype.visitDateDay=un(O3e);nn.prototype.visitDateMillisecond=un(P3e);nn.prototype.visitTimestamp=un(zMt);nn.prototype.visitTimestampSecond=un(R3e);nn.prototype.visitTimestampMillisecond=un($3e);nn.prototype.visitTimestampMicrosecond=un(N3e);nn.prototype.visitTimestampNanosecond=un(D3e);nn.prototype.visitTime=un(UMt);nn.prototype.visitTimeSecond=un(M3e);nn.prototype.visitTimeMillisecond=un(L3e);nn.prototype.visitTimeMicrosecond=un(F3e);nn.prototype.visitTimeNanosecond=un(j3e);nn.prototype.visitDecimal=un(VMt);nn.prototype.visitList=un(HMt);nn.prototype.visitStruct=un(WMt);nn.prototype.visitUnion=un(GMt);nn.prototype.visitDenseUnion=un(B3e);nn.prototype.visitSparseUnion=un(z3e);nn.prototype.visitDictionary=un(YMt);nn.prototype.visitInterval=un(KMt);nn.prototype.visitIntervalDayTime=un(U3e);nn.prototype.visitIntervalYearMonth=un(V3e);nn.prototype.visitDuration=un(XMt);nn.prototype.visitDurationSecond=un(H3e);nn.prototype.visitDurationMillisecond=un(q3e);nn.prototype.visitDurationMicrosecond=un(W3e);nn.prototype.visitDurationNanosecond=un(G3e);nn.prototype.visitFixedSizeList=un(QMt);nn.prototype.visitMap=un(qMt);const Hu=new nn,hf=Symbol.for("keys"),Sw=Symbol.for("vals");class y5{constructor(t){return this[hf]=new pr([t.children[0]]).memoize(),this[Sw]=t.children[1],new Proxy(this,new ZMt)}[Symbol.iterator](){return new JMt(this[hf],this[Sw])}get size(){return this[hf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[hf],n=this[Sw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Hu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${k1(t)}: ${k1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class JMt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Hu.visit(this.vals,t)]})}}class ZMt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[hf].toArray().map(String)}has(t,n){return t[hf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[hf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[hf].indexOf(n);if(r!==-1){const i=Hu.visit(Reflect.get(t,Sw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[hf].indexOf(n);return i!==-1?(Sc.visit(Reflect.get(t,Sw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(y5.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[hf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Sw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Cme;function Y3e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Cme=s,s=o,o=Cme),o>i&&(o=i),r?r(e,s,o):[s,o]}const Ame=e=>e!==e;function Rx(e){if(typeof e!=="object"||e===null)return Ame(e)?Ame:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?V3t(e,n):!1:e instanceof Map?tLt(e):Array.isArray(e)?eLt(e):e instanceof pr?nLt(e):rLt(e,!0)}function eLt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Rx(e[n]);return v5(t)}function tLt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Rx(r);return v5(n)}function nLt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Rx(e.get(n));return v5(t)}function rLt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Rx(e[n[i]]);return v5(r,n)}function v5(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return iLt(e,n);case Map:return Ime(e,n,n.keys());case y5:case mQ:case Object:case void 0:return Ime(e,n,t||Object.keys(n))}return n instanceof pr?sLt(e,n):!1}}function iLt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function sLt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Ime(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function K3e(e,t,n,r){return(n&1<<r)!==0}function oLt(e,t,n,r){return(n&1<<r)>>r}function _M(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):X3e(new yQ(n,e,t,null,K3e)).subarray(0,r)),i}return n}function X3e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class yQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function ZV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new yQ(e,t,n-t,e,oLt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return ZV(e,t,i)+ZV(e,r,n)+aLt(e,i>>3,r-i>>3)}function aLt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=yB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=yB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=yB(s.getUint8(i)),i+=1;return r}function yB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const uLt=-1;class Dr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return $n.isSparseUnion(t)?this.children.some(n=>n.nullable):$n.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if($n.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=uLt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-ZV(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Dr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=wd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if($n.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Vu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if($n.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Vu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(_M(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Dr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ie.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(_M(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[mp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[mp.TYPE])&&(o[mp.TYPE]=s.subarray(t,t+n)),(s=o[mp.OFFSET])&&(o[mp.OFFSET]=s.subarray(t,t+n+1))||(s=o[mp.DATA])&&(o[mp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Dr.prototype.children=Object.freeze([]);class z2 extends Nn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Dr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.data),s=Mr(t.nullBitmap),o=QS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Dr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.data),s=Mr(t.nullBitmap),o=QS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Dr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Mr(t.nullBitmap),o=QS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Dr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Mr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Qs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if($n.isSparseUnion(n))return new Dr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=QS(t.valueOffsets);return new Dr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.indices.ArrayType,t.data),{["dictionary"]:o=new pr([new z2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Dr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new z2().visit({type:n.valueType})}=t,s=Mr(t.nullBitmap),{["length"]:o=i.length/wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Dr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new z2().visit({type:n.childType})}=t,s=Mr(t.nullBitmap),o=QS(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Dr(n,r,a,u,[o,void 0,s],[i])}}const lLt=new z2;function aa(e){return lLt.visit(e)}class Ome{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Q3e(e){return e.reduce((t,n)=>t+n.nullCount,0)}function J3e(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function Z3e(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function vQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function _Q(e,t){return e.getValid(t)}function Tw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return vQ(r,this._offsets,n,t)}}function eMe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=vQ(s,this._offsets,r,n);return t=void 0,o}}function tMe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):vQ(s,this._offsets,i,n);return t=void 0,o}}class rn extends Nn{}function cLt(e,t){return t===null&&e.length>0?0:-1}function fLt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new yQ(n,e.offset+(t||0),e.length,n,K3e)){if(!i)return r;++r}return-1}function _n(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ie.Union:break;case ie.Dictionary:break;default:return fLt(e,n)}const r=Hu.getVisitFn(e),i=Rx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function nMe(e,t,n){const r=Hu.getVisitFn(e),i=Rx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}rn.prototype.visitNull=cLt;rn.prototype.visitBool=_n;rn.prototype.visitInt=_n;rn.prototype.visitInt8=_n;rn.prototype.visitInt16=_n;rn.prototype.visitInt32=_n;rn.prototype.visitInt64=_n;rn.prototype.visitUint8=_n;rn.prototype.visitUint16=_n;rn.prototype.visitUint32=_n;rn.prototype.visitUint64=_n;rn.prototype.visitFloat=_n;rn.prototype.visitFloat16=_n;rn.prototype.visitFloat32=_n;rn.prototype.visitFloat64=_n;rn.prototype.visitUtf8=_n;rn.prototype.visitBinary=_n;rn.prototype.visitFixedSizeBinary=_n;rn.prototype.visitDate=_n;rn.prototype.visitDateDay=_n;rn.prototype.visitDateMillisecond=_n;rn.prototype.visitTimestamp=_n;rn.prototype.visitTimestampSecond=_n;rn.prototype.visitTimestampMillisecond=_n;rn.prototype.visitTimestampMicrosecond=_n;rn.prototype.visitTimestampNanosecond=_n;rn.prototype.visitTime=_n;rn.prototype.visitTimeSecond=_n;rn.prototype.visitTimeMillisecond=_n;rn.prototype.visitTimeMicrosecond=_n;rn.prototype.visitTimeNanosecond=_n;rn.prototype.visitDecimal=_n;rn.prototype.visitList=_n;rn.prototype.visitStruct=_n;rn.prototype.visitUnion=_n;rn.prototype.visitDenseUnion=nMe;rn.prototype.visitSparseUnion=nMe;rn.prototype.visitDictionary=_n;rn.prototype.visitInterval=_n;rn.prototype.visitIntervalDayTime=_n;rn.prototype.visitIntervalYearMonth=_n;rn.prototype.visitDuration=_n;rn.prototype.visitDurationSecond=_n;rn.prototype.visitDurationMillisecond=_n;rn.prototype.visitDurationMicrosecond=_n;rn.prototype.visitDurationNanosecond=_n;rn.prototype.visitFixedSizeList=_n;rn.prototype.visitMap=_n;const bM=new rn;class sn extends Nn{}function ln(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ie.Timestamp||t instanceof eu&&t.bitWidth!==64||t instanceof vm&&t.bitWidth!==64||t instanceof B0&&t.precision!==$o.HALF))return new Ome(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Ome(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new dLt(o)})}class dLt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}sn.prototype.visitNull=ln;sn.prototype.visitBool=ln;sn.prototype.visitInt=ln;sn.prototype.visitInt8=ln;sn.prototype.visitInt16=ln;sn.prototype.visitInt32=ln;sn.prototype.visitInt64=ln;sn.prototype.visitUint8=ln;sn.prototype.visitUint16=ln;sn.prototype.visitUint32=ln;sn.prototype.visitUint64=ln;sn.prototype.visitFloat=ln;sn.prototype.visitFloat16=ln;sn.prototype.visitFloat32=ln;sn.prototype.visitFloat64=ln;sn.prototype.visitUtf8=ln;sn.prototype.visitBinary=ln;sn.prototype.visitFixedSizeBinary=ln;sn.prototype.visitDate=ln;sn.prototype.visitDateDay=ln;sn.prototype.visitDateMillisecond=ln;sn.prototype.visitTimestamp=ln;sn.prototype.visitTimestampSecond=ln;sn.prototype.visitTimestampMillisecond=ln;sn.prototype.visitTimestampMicrosecond=ln;sn.prototype.visitTimestampNanosecond=ln;sn.prototype.visitTime=ln;sn.prototype.visitTimeSecond=ln;sn.prototype.visitTimeMillisecond=ln;sn.prototype.visitTimeMicrosecond=ln;sn.prototype.visitTimeNanosecond=ln;sn.prototype.visitDecimal=ln;sn.prototype.visitList=ln;sn.prototype.visitStruct=ln;sn.prototype.visitUnion=ln;sn.prototype.visitDenseUnion=ln;sn.prototype.visitSparseUnion=ln;sn.prototype.visitDictionary=ln;sn.prototype.visitInterval=ln;sn.prototype.visitIntervalDayTime=ln;sn.prototype.visitIntervalYearMonth=ln;sn.prototype.visitDuration=ln;sn.prototype.visitDurationSecond=ln;sn.prototype.visitDurationMillisecond=ln;sn.prototype.visitDurationMicrosecond=ln;sn.prototype.visitDurationNanosecond=ln;sn.prototype.visitFixedSizeList=ln;sn.prototype.visitMap=ln;const bQ=new sn,hLt=(e,t)=>e+t;class Cy extends Nn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===tn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Sh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Sh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const pLt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),mLt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),gLt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Sh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},yLt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Sh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},vLt=(e,t)=>e.type.mode===Vu.Dense?rMe(e,t):iMe(e,t),rMe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Sh.visit(t[s],r[i])},iMe=({children:e},t)=>4+Sh.visitMany(e,e.map(()=>t)).reduce(hLt,0);Cy.prototype.visitUtf8=pLt;Cy.prototype.visitBinary=mLt;Cy.prototype.visitList=gLt;Cy.prototype.visitFixedSizeList=yLt;Cy.prototype.visitUnion=vLt;Cy.prototype.visitDenseUnion=rMe;Cy.prototype.visitSparseUnion=iMe;const Sh=new Cy;var sMe;const oMe={},aMe={};class pr{constructor(t){var n,r,i;const s=t[0]instanceof pr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Dr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=oMe[o.typeId],f=s[0];this.isValid=d=>_Q(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,aMe[o.typeId]),this._offsets=J3e(s);break}this.data=s,this.type=o,this.stride=wd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return Q3e(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ie[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return bQ.visit(this)}concat(...t){return new pr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new pr(Y3e(this,t,n,({data:r,_offsets:i},s,o)=>Z3e(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ie.Int:case ie.Float:case ie.Decimal:case ie.Time:case ie.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new pr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return $n.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if($n.isDictionary(this.type)){const t=new wM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new pr(n)}return new wM(this)}unmemoize(){if($n.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new pr(n)}return this}}sMe=Symbol.toStringTag;pr[sMe]=(e=>{e.type=$n.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ie).map(n=>ie[n]).filter(n=>typeof n=="number"&&n!==ie.NONE);for(const n of t){const r=Hu.getVisitFnByTypeId(n),i=Sc.getVisitFnByTypeId(n),s=bM.getVisitFnByTypeId(n),o=Sh.getVisitFnByTypeId(n);oMe[n]={get:r,set:i,indexOf:s,byteLength:o},aMe[n]=Object.create(e,{isValid:{value:Tw(_Q)},get:{value:Tw(Hu.getVisitFnByTypeId(n))},set:{value:eMe(Sc.getVisitFnByTypeId(n))},indexOf:{value:tMe(bM.getVisitFnByTypeId(n))},getByteLength:{value:Tw(Sh.getVisitFnByTypeId(n))}})}return"Vector"})(pr.prototype);class wM extends pr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new wM(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new pr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function _Lt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${bLt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function bLt(e){return typeof e!="bigint"?k1(e):`${k1(e)}n`}const vB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,wLt=(e,t=0)=>e.length>=t?e.subarray(0,t):pM(new e.constructor(t),e,0);class _5{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?vB(r*1,this.BYTES_PER_ELEMENT):vB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=vB(t*this.stride,this.BYTES_PER_ELEMENT);const n=wLt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=pM(new this.ArrayType(t),this.buffer)}}_5.prototype.offset=0;class UI extends _5{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class uMe extends UI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class lMe extends UI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Ju=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=wd(t),this._nulls=new uMe,n&&n.length>0&&(this._isValid=_Lt(n))}toVector(){return new pr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),aa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Ju.prototype.length=1;Ju.prototype.stride=1;Ju.prototype.children=null;Ju.prototype.finished=!1;Ju.prototype.nullValues=null;Ju.prototype._isValid=()=>!0;class Bm extends Ju{constructor(t){super(t),this._values=new UI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class b5 extends Ju{constructor(t){super(t),this._pendingLength=0,this._offsets=new lMe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof y5?n[hf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class eH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const _B=2,$d=4,Ap=4,Qr=4,Tg=new Int32Array(2),Pme=new Float32Array(Tg.buffer),kme=new Float64Array(Tg.buffer),dk=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var tH;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(tH||(tH={}));let EM=class cMe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new cMe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Tg[0]=this.readInt32(t),Pme[0]}readFloat64(t){return Tg[dk?0:1]=this.readInt32(t),Tg[dk?1:0]=this.readInt32(t+4),kme[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Pme[0]=n,this.writeInt32(t,Tg[0])}writeFloat64(t,n){kme[0]=n,this.writeInt32(t,Tg[dk?0:1]),this.writeInt32(t+4,Tg[dk?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+$d+Ap)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Ap;n++)t+=String.fromCharCode(this.readInt8(this.position_+$d+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=$d;const i=this.bytes_.subarray(t,t+r);return n===tH.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+$d}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Ap)throw new Error("FlatBuffers: file identifier must be length "+Ap);for(let n=0;n<Ap;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+$d+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},fMe=class dMe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=EM.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=dMe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=EM.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep($d,0),this.writeInt32(this.offset()-t+$d)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*_B;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=_B;l<s;l+=_B)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Qr:0;if(n){const s=n;if(this.prep(this.minalign,$d+Ap+i),s.length!=Ap)throw new TypeError("FlatBuffers: file identifier must be length "+Ap);for(let o=Ap-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,$d+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep($d,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Qr),(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ns.startKeyValue(t),Ns.addKey(t,n),Ns.addValue(t,r),Ns.endKeyValue(t)}}var bE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(bE||(bE={}));var wE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(wE||(wE={}));var xM;(function(e){e[e.DenseArray=0]="DenseArray"})(xM||(xM={}));class dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Qr),(n||new dl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return dl.startInt(t),dl.addBitWidth(t,n),dl.addIsSigned(t,r),dl.endInt(t)}}class Ip{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Ip).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Qr),(n||new Ip).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new dl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):xM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,xM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Vv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Vv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Qr),(n||new Vv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Vv.startBinary(t),Vv.endBinary(t)}}class Hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Qr),(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hv.startBool(t),Hv.endBool(t)}}var SM;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(SM||(SM={}));let XR=class wb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new wb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Qr),(n||new wb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):SM.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,SM.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return wb.startDate(t),wb.addUnit(t,n),wb.endDate(t)}};class vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Qr),(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return vu.startDecimal(t),vu.addPrecision(t,n),vu.addScale(t,r),vu.addBitWidth(t,i),vu.endDecimal(t)}}var U0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(U0||(U0={}));class Nd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Nd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Qr),(n||new Nd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,U0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Nd.startDuration(t),Nd.addUnit(t,n),Nd.endDuration(t)}}class Dd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Dd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Qr),(n||new Dd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Dd.startFixedSizeBinary(t),Dd.addByteWidth(t,n),Dd.endFixedSizeBinary(t)}}class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Qr),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Md.startFixedSizeList(t),Md.addListSize(t,n),Md.endFixedSizeList(t)}}var TM;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(TM||(TM={}));class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Qr),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):TM.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,TM.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Ld.startFloatingPoint(t),Ld.addPrecision(t,n),Ld.endFloatingPoint(t)}}var CM;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(CM||(CM={}));class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Qr),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):CM.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,CM.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Fd.startInterval(t),Fd.addUnit(t,n),Fd.endInterval(t)}}class qv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Qr),(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return qv.startList(t),qv.endList(t)}}let QR=class Eb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Eb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Qr),(n||new Eb).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Eb.startMap(t),Eb.addKeysSorted(t,n),Eb.endMap(t)}};class Wv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Qr),(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Wv.startNull(t),Wv.endNull(t)}}class Gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Qr),(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Gv.startStruct_(t),Gv.endStruct_(t)}}let HT=class cv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new cv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Qr),(n||new cv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,U0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return cv.startTime(t),cv.addUnit(t,n),cv.addBitWidth(t,r),cv.endTime(t)}},qT=class fv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new fv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Qr),(n||new fv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,U0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return fv.startTimestamp(t),fv.addUnit(t,n),fv.addTimezone(t,r),fv.endTimestamp(t)}};var AM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(AM||(AM={}));let dv=class hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Qr),(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):AM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,AM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return hv.startUnion(t),hv.addMode(t,n),hv.addTypeIds(t,r),hv.endUnion(t)}};class Yv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Qr),(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Yv.startUtf8(t),Yv.endUtf8(t)}}var Ii;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ii||(Ii={}));let Xl=class JR{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new JR).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Qr),(n||new JR).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ii.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Ip).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new JR).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ii.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},_d=class hp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new hp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Qr),(n||new hp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Xl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,wE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return hp.startSchema(t),hp.addEndianness(t,n),hp.addFields(t,r),hp.addCustomMetadata(t,i),hp.addFeatures(t,s),hp.endSchema(t)}};class al{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Qr),(n||new al).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new _d).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new eH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new eH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,bE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class kr{constructor(t=[],n,r,i=za.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=rH(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new kr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new kr(n,this.metadata)}assign(...t){const n=t[0]instanceof kr?t[0]:Array.isArray(t[0])?new kr(t[0]):new kr(t),r=[...this.fields],i=hk(hk(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:hk(hk(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=rH(s,new Map);return new kr([...r,...s],i,new Map([...this.dictionaries,...o]))}}kr.prototype.fields=null;kr.prototype.metadata=null;kr.prototype.dictionaries=null;let Wr=class nH{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new nH(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],nH.new(n,r,i,s)}};Wr.prototype.type=null;Wr.prototype.name=null;Wr.prototype.nullable=null;Wr.prototype.metadata=null;function hk(e,t){return new Map([...e||new Map,...t||new Map])}function rH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if($n.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&rH(s.children,t)}return t}var ELt=fMe,xLt=EM;class iH{static decode(t){t=new xLt(Mr(t));const n=al.getRootAsFooter(t),r=kr.decode(n.schema(),new Map,n.version());return new SLt(r,n)}static encode(t){const n=new ELt,r=kr.encode(n,t.schema);al.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())V0.encode(n,o);const i=n.endVector();al.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())V0.encode(n,o);const s=n.endVector();return al.startFooter(n),al.addSchema(n,r),al.addVersion(n,za.V5),al.addRecordBatches(n,i),al.addDictionaries(n,s),al.finishFooterBuffer(n,al.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=za.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class SLt extends iH{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return V0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return V0.decode(n)}return null}}class V0{static decode(t){return new V0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return eH.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Ff(r),this.bodyLength=Ff(n)}}const pk=Object.freeze({done:!0,value:void 0});class hMe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class TLt extends hMe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Cp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(pk);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Sme.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Sme.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Cp(this,void 0,void 0,function*(){return yield this.abort(t),pk})}return(t){return Cp(this,void 0,void 0,function*(){return yield this.close(),pk})}read(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(pk)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class bB extends TLt{write(t){if((t=Mr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?XV(this.toUint8Array(!0)):this.toUint8Array(!1).then(XV)}toUint8Array(t=!1){return t?wh(this._values)[0]:Cp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=B2(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return wh(o,a)[0]})}}class pMe extends b5{constructor(t){super(t),this._values=new _5(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Mr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class CLt extends Ju{constructor(t){super(t),this._values=new uMe}setValue(t,n){this._values.set(t,+n)}}class w5 extends Bm{}w5.prototype._setValue=_3e;class mMe extends w5{}mMe.prototype._setValue=ZX;class gMe extends w5{}gMe.prototype._setValue=eQ;class yMe extends Bm{}yMe.prototype._setValue=E3e;class ALt extends Ju{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new z0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=IM({type:this.type.indices,nullValues:n}),this.dictionary=IM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class vMe extends Bm{}vMe.prototype._setValue=v3e;class ILt extends Ju{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new _E(this.type.listSize,new Wr(n,t.type,!0)),r}}class E5 extends Bm{setValue(t,n){this._values.set(t,n)}}class OLt extends E5{setValue(t,n){super.setValue(t,m3e(n))}}class PLt extends E5{}class kLt extends E5{}class x5 extends Bm{}x5.prototype._setValue=T3e;class _Me extends x5{}_Me.prototype._setValue=lQ;class bMe extends x5{}bMe.prototype._setValue=cQ;class $x extends Bm{}$x.prototype._setValue=C3e;class wMe extends $x{}wMe.prototype._setValue=fQ;class EMe extends $x{}EMe.prototype._setValue=dQ;class xMe extends $x{}xMe.prototype._setValue=hQ;class SMe extends $x{}SMe.prototype._setValue=pQ;class zm extends Bm{setValue(t,n){this._values.set(t,n)}}class RLt extends zm{}class $Lt extends zm{}class NLt extends zm{}class DLt extends zm{}class MLt extends zm{}class LLt extends zm{}class FLt extends zm{}class jLt extends zm{}class BLt extends b5{constructor(t){super(t),this._offsets=new lMe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new vE(new Wr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class zLt extends b5{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new lA(new Wr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class ULt extends Ju{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class VLt extends Ju{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new da([...this.type.children,new Wr(n,t.type,!0)]),r}}class Nx extends Bm{}Nx.prototype._setValue=b3e;class TMe extends Nx{}TMe.prototype._setValue=tQ;class CMe extends Nx{}CMe.prototype._setValue=nQ;class AMe extends Nx{}AMe.prototype._setValue=rQ;class IMe extends Nx{}IMe.prototype._setValue=iQ;class Dx extends Bm{}Dx.prototype._setValue=w3e;class OMe extends Dx{}OMe.prototype._setValue=sQ;class PMe extends Dx{}PMe.prototype._setValue=oQ;class kMe extends Dx{}kMe.prototype._setValue=aQ;class RMe extends Dx{}RMe.prototype._setValue=uQ;class wQ extends Ju{constructor(t){super(t),this._typeIds=new UI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Wr(n,t.type)];return this.type=new uA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class HLt extends wQ{}class qLt extends wQ{constructor(t){super(t),this._offsets=new UI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class $Me extends b5{constructor(t){super(t),this._values=new _5(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,FX(n))}_flushPending(t,n){}}$Me.prototype._flushPending=pMe.prototype._flushPending;class WLt extends Nn{visitNull(){return ULt}visitBool(){return CLt}visitInt(){return zm}visitInt8(){return RLt}visitInt16(){return $Lt}visitInt32(){return NLt}visitInt64(){return DLt}visitUint8(){return MLt}visitUint16(){return LLt}visitUint32(){return FLt}visitUint64(){return jLt}visitFloat(){return E5}visitFloat16(){return OLt}visitFloat32(){return PLt}visitFloat64(){return kLt}visitUtf8(){return $Me}visitBinary(){return pMe}visitFixedSizeBinary(){return vMe}visitDate(){return w5}visitDateDay(){return mMe}visitDateMillisecond(){return gMe}visitTimestamp(){return Nx}visitTimestampSecond(){return TMe}visitTimestampMillisecond(){return CMe}visitTimestampMicrosecond(){return AMe}visitTimestampNanosecond(){return IMe}visitTime(){return Dx}visitTimeSecond(){return OMe}visitTimeMillisecond(){return PMe}visitTimeMicrosecond(){return kMe}visitTimeNanosecond(){return RMe}visitDecimal(){return yMe}visitList(){return BLt}visitStruct(){return VLt}visitUnion(){return wQ}visitDenseUnion(){return qLt}visitSparseUnion(){return HLt}visitDictionary(){return ALt}visitInterval(){return x5}visitIntervalDayTime(){return _Me}visitIntervalYearMonth(){return bMe}visitDuration(){return $x}visitDurationSecond(){return wMe}visitDurationMillisecond(){return EMe}visitDurationMicrosecond(){return xMe}visistDurationNanosecond(){return SMe}visitFixedSizeList(){return ILt}visitMap(){return zLt}}const GLt=new WLt;class on extends Nn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function su(e,t){return t instanceof e.constructor}function VI(e,t){return e===t||su(e,t)}function Um(e,t){return e===t||su(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function S5(e,t){return e===t||su(e,t)&&e.precision===t.precision}function YLt(e,t){return e===t||su(e,t)&&e.byteWidth===t.byteWidth}function EQ(e,t){return e===t||su(e,t)&&e.unit===t.unit}function HI(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function qI(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function KLt(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function XLt(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function xQ(e,t){return e===t||su(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&H0.compareManyFields(e.children,t.children)}function QLt(e,t){return e===t||su(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&H0.visit(e.indices,t.indices)&&H0.visit(e.dictionary,t.dictionary)}function SQ(e,t){return e===t||su(e,t)&&e.unit===t.unit}function WI(e,t){return e===t||su(e,t)&&e.unit===t.unit}function JLt(e,t){return e===t||su(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function ZLt(e,t){return e===t||su(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}on.prototype.visitNull=VI;on.prototype.visitBool=VI;on.prototype.visitInt=Um;on.prototype.visitInt8=Um;on.prototype.visitInt16=Um;on.prototype.visitInt32=Um;on.prototype.visitInt64=Um;on.prototype.visitUint8=Um;on.prototype.visitUint16=Um;on.prototype.visitUint32=Um;on.prototype.visitUint64=Um;on.prototype.visitFloat=S5;on.prototype.visitFloat16=S5;on.prototype.visitFloat32=S5;on.prototype.visitFloat64=S5;on.prototype.visitUtf8=VI;on.prototype.visitBinary=VI;on.prototype.visitFixedSizeBinary=YLt;on.prototype.visitDate=EQ;on.prototype.visitDateDay=EQ;on.prototype.visitDateMillisecond=EQ;on.prototype.visitTimestamp=HI;on.prototype.visitTimestampSecond=HI;on.prototype.visitTimestampMillisecond=HI;on.prototype.visitTimestampMicrosecond=HI;on.prototype.visitTimestampNanosecond=HI;on.prototype.visitTime=qI;on.prototype.visitTimeSecond=qI;on.prototype.visitTimeMillisecond=qI;on.prototype.visitTimeMicrosecond=qI;on.prototype.visitTimeNanosecond=qI;on.prototype.visitDecimal=VI;on.prototype.visitList=KLt;on.prototype.visitStruct=XLt;on.prototype.visitUnion=xQ;on.prototype.visitDenseUnion=xQ;on.prototype.visitSparseUnion=xQ;on.prototype.visitDictionary=QLt;on.prototype.visitInterval=SQ;on.prototype.visitIntervalDayTime=SQ;on.prototype.visitIntervalYearMonth=SQ;on.prototype.visitDuration=WI;on.prototype.visitDurationSecond=WI;on.prototype.visitDurationMillisecond=WI;on.prototype.visitDurationMicrosecond=WI;on.prototype.visitDurationNanosecond=WI;on.prototype.visitFixedSizeList=JLt;on.prototype.visitMap=ZLt;const H0=new on;function sH(e,t){return H0.compareSchemas(e,t)}function IM(e){const t=e.type,n=new(GLt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(IM(Object.assign(Object.assign({},l),{type:u})))}}return n}function wB(e,t){return e6t(e,t.map(n=>n.data.concat()))}function e6t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=t6t(n,o,c,t,i),o>0&&(r[s++]=aa({type:new da(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new hl(e,f))]}function t6t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:aa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var NMe;class Eu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new kr([]),this._offsets=[0],this;let i,s;t[0]instanceof kr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof hl)return[u];if(u instanceof Eu)return u.batches;if(u instanceof Dr){if(u.type instanceof da)return[new hl(new kr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new pr([u[h]])),f=new kr(l.map((h,p)=>new Wr(String(h),c[p].type))),[,d]=wB(f,c);return d.length===0?[new hl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new kr([]),!(i instanceof kr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof hl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!sH(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??J3e(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Q3e(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?bQ.visit(new pr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Eu(n,r.map(i=>new hl(n,i)))}slice(t,n){const r=this.schema;[t,n]=Y3e({length:this.numRows},t,n);const i=Z3e(this.data,this._offsets,t,n);return new Eu(r,i.map(s=>new hl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=aa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new pr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new pr([aa({type:new ym,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=wB(r,a)}return new Eu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Eu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Eu(...wB(s,o))}}NMe=Symbol.toStringTag;Eu[NMe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Tw(_Q),e.get=Tw(Hu.getVisitFn(ie.Struct)),e.set=eMe(Sc.getVisitFn(ie.Struct)),e.indexOf=tMe(bM.getVisitFn(ie.Struct)),e.getByteLength=Tw(Sh.getVisitFn(ie.Struct)),"Table"))(Eu.prototype);var DMe;let hl=class WT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aa({nullCount:0,type:new da(this.schema.fields),children:this.schema.fields.map(n=>aa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Dr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Rme(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Wr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new kr(r),a=aa({type:new da(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Rme(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=MMe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Hu.visit(this.data,t)}set(t,n){return Sc.visit(this.data,t,n)}indexOf(t,n){return bM.visit(this.data,t,n)}getByteLength(t){return Sh.visit(this.data,t)}[Symbol.iterator](){return bQ.visit(new pr([this.data]))}toArray(){return[...this]}concat(...t){return new Eu(this.schema,[this,...t])}slice(t,n){const[r]=new pr([this.data]).slice(t,n).data;return new WT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new pr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new pr([aa({type:new ym,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new kr(s,new Map(this.schema.metadata)),i=aa({type:new da(s),children:o})}return new WT(r,i)}select(t){const n=this.schema.select(t),r=new da(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new WT(n,aa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=aa({type:new da(n.fields),length:this.numRows,children:r});return new WT(n,i)}};DMe=Symbol.toStringTag;hl[DMe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(hl.prototype);function Rme(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:aa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),aa({type:new da(i),length:n,children:s})]}function MMe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])MMe(a.children,l==null?void 0:l.children,n);if($n.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class n6t extends hl{constructor(t){const n=t.fields.map(i=>aa({type:i.type})),r=aa({type:new da(t.fields),nullCount:0,children:n});super(t,r)}}var OM;(function(e){e[e.BUFFER=0]="BUFFER"})(OM||(OM={}));var PM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(PM||(PM={}));class Cg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Qr),(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):PM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):OM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,PM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,OM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Cg.startBodyCompression(t),Cg.addCodec(t,n),Cg.addMethod(t,r),Cg.endBodyCompression(t)}}let LMe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},FMe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},gp=class oH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new oH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Qr),(n||new oH).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new FMe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new LMe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Cg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},xb=class aH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new aH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Qr),(n||new aH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new gp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var kM;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(kM||(kM={}));let og=class fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Qr),(n||new fd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):bE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):kM.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,bE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,kM.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return fd.startMessage(t),fd.addVersion(t,n),fd.addHeaderType(t,r),fd.addHeader(t,i),fd.addBodyLength(t,s),fd.addCustomMetadata(t,o),fd.endMessage(t)}};class r6t extends Nn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Wv.startNull(n),Wv.endNull(n)}visitInt(t,n){return dl.startInt(n),dl.addBitWidth(n,t.bitWidth),dl.addIsSigned(n,t.isSigned),dl.endInt(n)}visitFloat(t,n){return Ld.startFloatingPoint(n),Ld.addPrecision(n,t.precision),Ld.endFloatingPoint(n)}visitBinary(t,n){return Vv.startBinary(n),Vv.endBinary(n)}visitBool(t,n){return Hv.startBool(n),Hv.endBool(n)}visitUtf8(t,n){return Yv.startUtf8(n),Yv.endUtf8(n)}visitDecimal(t,n){return vu.startDecimal(n),vu.addScale(n,t.scale),vu.addPrecision(n,t.precision),vu.addBitWidth(n,t.bitWidth),vu.endDecimal(n)}visitDate(t,n){return XR.startDate(n),XR.addUnit(n,t.unit),XR.endDate(n)}visitTime(t,n){return HT.startTime(n),HT.addUnit(n,t.unit),HT.addBitWidth(n,t.bitWidth),HT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return qT.startTimestamp(n),qT.addUnit(n,t.unit),r!==void 0&&qT.addTimezone(n,r),qT.endTimestamp(n)}visitInterval(t,n){return Fd.startInterval(n),Fd.addUnit(n,t.unit),Fd.endInterval(n)}visitDuration(t,n){return Nd.startDuration(n),Nd.addUnit(n,t.unit),Nd.endDuration(n)}visitList(t,n){return qv.startList(n),qv.endList(n)}visitStruct(t,n){return Gv.startStruct_(n),Gv.endStruct_(n)}visitUnion(t,n){dv.startTypeIdsVector(n,t.typeIds.length);const r=dv.createTypeIdsVector(n,t.typeIds);return dv.startUnion(n),dv.addMode(n,t.mode),dv.addTypeIds(n,r),dv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Ip.startDictionaryEncoding(n),Ip.addId(n,BigInt(t.id)),Ip.addIsOrdered(n,t.isOrdered),r!==void 0&&Ip.addIndexType(n,r),Ip.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Dd.startFixedSizeBinary(n),Dd.addByteWidth(n,t.byteWidth),Dd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Md.startFixedSizeList(n),Md.addListSize(n,t.listSize),Md.endFixedSizeList(n)}visitMap(t,n){return QR.startMap(n),QR.addKeysSorted(n,t.keysSorted),QR.endMap(n)}}const EB=new r6t;function i6t(e,t=new Map){return new kr(o6t(e,t),ZR(e.metadata),t)}function jMe(e){return new Rl(e.count,BMe(e.columns),zMe(e.columns))}function s6t(e){return new Th(jMe(e.data),e.id,e.isDelta)}function o6t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Wr.fromJSON(n,t))}function $me(e,t){return(e.children||[]).filter(Boolean).map(n=>Wr.fromJSON(n,t))}function BMe(e){return(e||[]).reduce((t,n)=>[...t,new q0(n.count,a6t(n.VALIDITY)),...BMe(n.children)],[])}function zMe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new qd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new qd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new qd(t.length,i.OFFSET.length)),i.DATA&&t.push(new qd(t.length,i.DATA.length)),t=zMe(i.children,t)}return t}function a6t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function u6t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Dme(e,$me(e,t)),i=new Wr(e.name,o,e.nullable,ZR(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Nme(r):new j0,a=new z0(t.get(n),r,n,s.isOrdered),i=new Wr(e.name,a,e.nullable,ZR(e.metadata))):(r=(r=s.indexType)?Nme(r):new j0,t.set(n,o=Dme(e,$me(e,t))),a=new z0(o,r,n,s.isOrdered),i=new Wr(e.name,a,e.nullable,ZR(e.metadata))),i||null}function ZR(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Nme(e){return new eu(e.isSigned,e.bitWidth)}function Dme(e,t){const n=e.type.name;switch(n){case"NONE":return new ym;case"null":return new ym;case"binary":return new oA;case"utf8":return new mE;case"bool":return new aA;case"list":return new vE((t||[])[0]);case"struct":return new da(t||[]);case"struct_":return new da(t||[])}switch(n){case"int":{const r=e.type;return new eu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new B0($o[r.precision])}case"decimal":{const r=e.type;return new mM(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new gE(Eh[r.unit])}case"time":{const r=e.type;return new vm(tn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new gM(tn[r.unit],r.timezone)}case"interval":{const r=e.type;return new yE(xh[r.unit])}case"duration":{const r=e.type;return new yM(tn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new uA(Vu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new vM(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new _E(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new lA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var l6t=fMe,c6t=EM;class jd{static fromJSON(t,n){const r=new jd(0,za.V5,n);return r._createHeader=f6t(t,n),r}static decode(t){t=new c6t(Mr(t));const n=og.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new jd(r,i,s);return o._createHeader=d6t(n,s),o}static encode(t){const n=new l6t;let r=-1;return t.isSchema()?r=kr.encode(n,t.header()):t.isRecordBatch()?r=Rl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Th.encode(n,t.header())),og.startMessage(n),og.addVersion(n,za.V5),og.addHeader(n,r),og.addHeaderType(n,t.headerType),og.addBodyLength(n,BigInt(t.bodyLength)),og.finishMessageBuffer(n,og.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof kr)return new jd(0,za.V5,eo.Schema,t);if(t instanceof Rl)return new jd(n,za.V5,eo.RecordBatch,t);if(t instanceof Th)return new jd(n,za.V5,eo.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===eo.Schema}isRecordBatch(){return this.headerType===eo.RecordBatch}isDictionaryBatch(){return this.headerType===eo.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Ff(t)}}class Rl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Ff(t)}}class Th{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Ff(n)}}class qd{constructor(t,n){this.offset=Ff(t),this.length=Ff(n)}}class q0{constructor(t,n){this.length=Ff(t),this.nullCount=Ff(n)}}function f6t(e,t){return()=>{switch(t){case eo.Schema:return kr.fromJSON(e);case eo.RecordBatch:return Rl.fromJSON(e);case eo.DictionaryBatch:return Th.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${eo[t]}, type: ${t} }`)}}function d6t(e,t){return()=>{switch(t){case eo.Schema:return kr.decode(e.header(new _d),new Map,e.version());case eo.RecordBatch:return Rl.decode(e.header(new gp),e.version());case eo.DictionaryBatch:return Th.decode(e.header(new xb),e.version())}throw new Error(`Unrecognized Message type: { name: ${eo[t]}, type: ${t} }`)}}Wr.encode=x6t;Wr.decode=w6t;Wr.fromJSON=u6t;kr.encode=E6t;kr.decode=h6t;kr.fromJSON=i6t;Rl.encode=S6t;Rl.decode=p6t;Rl.fromJSON=jMe;Th.encode=T6t;Th.decode=m6t;Th.fromJSON=s6t;q0.encode=C6t;q0.decode=y6t;qd.encode=A6t;qd.decode=g6t;function h6t(e,t=new Map,n=za.V5){const r=b6t(e,t);return new kr(r,e$(e),t,n)}function p6t(e,t=za.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Rl(e.length(),v6t(e),_6t(e,t))}function m6t(e,t=za.V5){return new Th(Rl.decode(e.data(),t),e.id(),e.isDelta())}function g6t(e){return new qd(e.offset(),e.length())}function y6t(e){return new q0(e.length(),e.nullCount())}function v6t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=q0.decode(n));return t}function _6t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<za.V4&&(r.bb_pos+=8*(i+1)),n[++s]=qd.decode(r));return n}function b6t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Wr.decode(r,t));return n}function Mme(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Wr.decode(r,t));return n}function w6t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Fme(e,Mme(e,t)),r=new Wr(e.name(),i,e.nullable(),e$(e))):t.has(n=Ff(a.id()))?(s=(s=a.indexType())?Lme(s):new j0,o=new z0(t.get(n),s,n,a.isOrdered()),r=new Wr(e.name(),o,e.nullable(),e$(e))):(s=(s=a.indexType())?Lme(s):new j0,t.set(n,i=Fme(e,Mme(e,t))),o=new z0(i,s,n,a.isOrdered()),r=new Wr(e.name(),o,e.nullable(),e$(e))),r||null}function e$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Lme(e){return new eu(e.isSigned(),e.bitWidth())}function Fme(e,t){const n=e.typeType();switch(n){case Ii.NONE:return new ym;case Ii.Null:return new ym;case Ii.Binary:return new oA;case Ii.Utf8:return new mE;case Ii.Bool:return new aA;case Ii.List:return new vE((t||[])[0]);case Ii.Struct_:return new da(t||[])}switch(n){case Ii.Int:{const r=e.type(new dl);return new eu(r.isSigned(),r.bitWidth())}case Ii.FloatingPoint:{const r=e.type(new Ld);return new B0(r.precision())}case Ii.Decimal:{const r=e.type(new vu);return new mM(r.scale(),r.precision(),r.bitWidth())}case Ii.Date:{const r=e.type(new XR);return new gE(r.unit())}case Ii.Time:{const r=e.type(new HT);return new vm(r.unit(),r.bitWidth())}case Ii.Timestamp:{const r=e.type(new qT);return new gM(r.unit(),r.timezone())}case Ii.Interval:{const r=e.type(new Fd);return new yE(r.unit())}case Ii.Duration:{const r=e.type(new Nd);return new yM(r.unit())}case Ii.Union:{const r=e.type(new dv);return new uA(r.mode(),r.typeIdsArray()||[],t||[])}case Ii.FixedSizeBinary:{const r=e.type(new Dd);return new vM(r.byteWidth())}case Ii.FixedSizeList:{const r=e.type(new Md);return new _E(r.listSize(),(t||[])[0])}case Ii.Map:{const r=e.type(new QR);return new lA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ii[n]}" (${n})`)}function E6t(e,t){const n=t.fields.map(s=>Wr.encode(e,s));_d.startFieldsVector(e,n.length);const r=_d.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?_d.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ns.startKeyValue(e),Ns.addKey(e,a),Ns.addValue(e,u),Ns.endKeyValue(e)})):-1;return _d.startSchema(e),_d.addFields(e,r),_d.addEndianness(e,I6t?wE.Little:wE.Big),i!==-1&&_d.addCustomMetadata(e,i),_d.endSchema(e)}function x6t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;$n.isDictionary(s)?(o=s.dictionary.typeId,i=EB.visit(s,e),r=EB.visit(s.dictionary,e)):r=EB.visit(s,e);const a=(s.children||[]).map(c=>Wr.encode(e,c)),u=Xl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Xl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ns.startKeyValue(e),Ns.addKey(e,d),Ns.addValue(e,h),Ns.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xl.startField(e),Xl.addType(e,r),Xl.addTypeType(e,o),Xl.addChildren(e,u),Xl.addNullable(e,!!t.nullable),n!==-1&&Xl.addName(e,n),i!==-1&&Xl.addDictionary(e,i),l!==-1&&Xl.addCustomMetadata(e,l),Xl.endField(e)}function S6t(e,t){const n=t.nodes||[],r=t.buffers||[];gp.startNodesVector(e,n.length);for(const o of n.slice().reverse())q0.encode(e,o);const i=e.endVector();gp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())qd.encode(e,o);const s=e.endVector();return gp.startRecordBatch(e),gp.addLength(e,BigInt(t.length)),gp.addNodes(e,i),gp.addBuffers(e,s),gp.endRecordBatch(e)}function T6t(e,t){const n=Rl.encode(e,t.data);return xb.startDictionaryBatch(e),xb.addId(e,BigInt(t.id)),xb.addIsDelta(e,t.isDelta),xb.addData(e,n),xb.endDictionaryBatch(e)}function C6t(e,t){return FMe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function A6t(e,t){return LMe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const I6t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),uH="ARROW1",TQ=new Uint8Array(uH.length);for(let e=0;e<uH.length;e+=1)TQ[e]=uH.codePointAt(e);TQ.length;class cs extends Nn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof hl?s.data.children:s.data),r=new cs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof pr)return this.visitMany(t.data),this;const{type:n}=t;if(!$n.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if($n.isUnion(n))this.nodes.push(new q0(r,0));else{const{nullCount:i}=t;$n.isNull(n)||Cf.call(this,i<=0?new Uint8Array(0):_M(t.offset,r,t.nullBitmap)),this.nodes.push(new q0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Cf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new qd(this._byteLength,t)),this._byteLength+=t,this}function O6t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Cf.call(this,i),n.mode===Vu.Sparse)return lH.call(this,e);if(n.mode===Vu.Dense){if(e.offset<=0)return Cf.call(this,s),lH.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Cf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function P6t(e){let t;return e.nullCount>=e.length?Cf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Cf.call(this,_M(e.offset,e.length,t)):Cf.call(this,X3e(e.values))}function Vm(e){return Cf.call(this,e.values.subarray(0,e.length*e.stride))}function UMe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Cf.call(this,HDe(-i,t+1,r)),Cf.call(this,n.subarray(i,i+o)),this}function CQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Cf.call(this,HDe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function lH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}cs.prototype.visitBool=P6t;cs.prototype.visitInt=Vm;cs.prototype.visitFloat=Vm;cs.prototype.visitUtf8=UMe;cs.prototype.visitBinary=UMe;cs.prototype.visitFixedSizeBinary=Vm;cs.prototype.visitDate=Vm;cs.prototype.visitTimestamp=Vm;cs.prototype.visitTime=Vm;cs.prototype.visitDecimal=Vm;cs.prototype.visitList=CQ;cs.prototype.visitStruct=lH;cs.prototype.visitUnion=O6t;cs.prototype.visitInterval=Vm;cs.prototype.visitDuration=Vm;cs.prototype.visitFixedSizeList=CQ;cs.prototype.visitMap=CQ;class VMe extends hMe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new bB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Sy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return m5(t)?t.then(n=>this.writeAll(n)):g5(t)?PQ(this,t):OQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof bB?this._sink=t:(this._sink=new bB,t&&M3t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&L3t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!sH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Eu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof hl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!sH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof hl?t instanceof n6t||this._writeRecordBatch(t):t instanceof Eu?this.writeAll(t.batches):jX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=jd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===eo.RecordBatch?this._recordBatchBlocks.push(new V0(a,t.bodyLength,this._position)):t.headerType===eo.DictionaryBatch&&this._dictionaryBlocks.push(new V0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Mr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(jd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(TQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=cs.assemble(t),o=new Rl(t.numRows,r,i),a=jd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=cs.assemble(new pr([t])),u=new Rl(t.length,s,o),l=new Th(u,n,r),c=jd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class AQ extends VMe{static writeAll(t,n){const r=new AQ(n);return m5(t)?t.then(i=>r.writeAll(i)):g5(t)?PQ(r,t):OQ(r,t)}}class IQ extends VMe{static writeAll(t){const n=new IQ;return m5(t)?t.then(r=>n.writeAll(r)):g5(t)?PQ(n,t):OQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=iH.encode(new iH(t,za.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function OQ(e,t){let n=t;t instanceof Eu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function PQ(e,t){var n,r,i,s,o,a,u;return Cp(this,void 0,void 0,function*(){try{for(n=!0,r=B2(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function k6t(e,t="stream"){return(t==="stream"?AQ:IQ).writeAll(e).toUint8Array(!0)}function kQ(e,t=1){return(e*t+63&-64||64)/t}function W0(e,t,n=e.BYTES_PER_ELEMENT){return new e(kQ(t,n))}function RQ(e){return e instanceof Dr?e:new Dr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function R6t(e){return new pr([RQ(e)])}const $Q=new TextEncoder;function $6t(e,t,n){const r=$Q.encode(n);return e.set(r,t),r.length}function N6t(e,t,n){return $Q.encodeInto(n,e.subarray(t)).written}const D6t=$Q.encodeInto?N6t:$6t;function jme(e,t){const n=W0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function M6t(e,t){const n=W0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function L6t(e,t){const n=W0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function F6t(e,t){const n=W0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function j6t(e){const t=IM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function B6t(e,t,n){const r=W0(Int32Array,t+1),i=W0(Uint8Array,3*n);let s=0;return{set(o,a){s+=D6t(i,s,o),r[a+1]=s},data:()=>{const o=kQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function z6t(e,t){const n=[],r=W0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:U6t(e.dictionary,n,o)})}}function U6t(e,t,n){const r=B6t(e,t.length,n);return t.forEach(r.set),R6t(r.data())}function V6t(e,t){const n=W0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function H6t(e,t,n=!0){let r;switch(e.typeId){case ie.Int:r=e.bitWidth<64?jme:null;break;case ie.Float:r=e.precision>0?jme:null;break;case ie.Dictionary:r=e.dictionary.typeId===ie.Utf8&&e.indices.typeId===ie.Int&&e.indices.bitWidth<64?z6t:null;break;case ie.Bool:r=M6t;break;case ie.Date:r=e.unit?F6t:L6t;break}return r==null?j6t(e):n?V6t(r(e,t),t):r(e,t)}function q6t(e,t){const n=e.length,r=kQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),RQ({type:t,length:n,buffers:[null,i]})}function HMe(e,t,n,r,i=!0){const s=H6t(r,e,i);return t(n,s.set),RQ(s.data())}function NQ(e){if(e instanceof $n||e==null)return e;switch(e){case ie.Binary:return new oA;case ie.Bool:return new aA;case ie.DateDay:return new J3t;case ie.DateMillisecond:case ie.Date:return new Z3t;case ie.Dictionary:return new z0(new mE,new j0);case ie.Float16:return new d3e;case ie.Float32:return new KX;case ie.Float64:case ie.Float:return new XX;case ie.Int8:return new UX;case ie.Int16:return new VX;case ie.Int32:case ie.Int:return new j0;case ie.Int64:return new HX;case ie.IntervalDayTime:return new iMt;case ie.Interval:case ie.IntervalYearMonth:return new sMt;case ie.Null:return new ym;case ie.TimeMicrosecond:return new nMt;case ie.TimeMillisecond:case ie.Time:return new tMt;case ie.TimeNanosecond:return new rMt;case ie.TimeSecond:return new eMt;case ie.Uint8:return new qX;case ie.Uint16:return new WX;case ie.Uint32:return new GX;case ie.Uint64:return new YX;case ie.Utf8:return new mE;default:Pn(`Unsupported type code: ${bh(e)}. Use a data type constructor instead?`)}}function W6t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function qMe(e,t){const n=cH();return e(t,n.add),n}function cH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(gm(t))++e.dates,W6t(t)&&++e.utcdays;else if(zv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=cH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=cH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return NQ(G6t(e))}};return e}function G6t(e){const t=e.count-e.nulls;if(t===0)return ie.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ie.Float64:n<128?ie.Int8:n<32768?ie.Int16:ie.Int32:n>=2**32?ie.Float64:n<256?ie.Uint8:n<65536?ie.Uint16:ie.Uint32}else{if(e.nums===t)return ie.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ie.Int64:Pn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ie.Uint64:Pn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ie.Bool;if(e.utcdays===t)return ie.DateDay;if(e.dates===t)return ie.DateMillisecond;if(e.arrays===t){const n=Wr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new _E(e.minlen,n):new vE(n)}else if(e.structs===t){const n=e.struct_prof;return new da(Object.keys(n).map(r=>Wr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ie.Dictionary;Pn("Type inference failure")}}}}function Y6t(e,t,n,r,i,s=!0){if(i=NQ(i),!i){const o=qMe(r,t);s=o.nulls>0,i=o.type()}return HMe(n,r,t,i,s)}function K6t(e,t,n,r,i,s=!0){i=NQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=X6t(o);if(u&&a&&Bme(u.type,i))return u;const l=o.data;if(BI(l)){const c=Q6t(l);if(a&&c&&Bme(c,i))return q6t(l,c);i=i||c,s=!1}if(!i){const c=qMe(r,o);s=c.nulls>0,i=c.type()}return HMe(n,r,o,i,s)}function X6t(e){return e instanceof pr?e:e.vector instanceof pr?e.vector:null}function Q6t(e){const n={Float32Array:KX,Float64Array:XX,Int8Array:UX,Int16Array:VX,Int32Array:j0,Uint8Array:qX,Uint16Array:WX,Uint32Array:GX,BigInt64Array:HX,BigUint64Array:YX}[e.constructor.name];return n?new n:null}function Bme(e,t){return!e||!t?!0:e.compareTo(t)}function J6t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function Z6t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&zv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const e4t=()=>Pn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function t4t(){try{return Eu}catch{e4t()}}function WMe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=n4t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Pn("Column length mismatch"),a[l]=c});const u=t4t();return new u(a)}function n4t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Si(n)?n(e):hr(n)?n:null;if(hr(e))return{dataFrom:Y6t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:J6t(e,r,i)};if(r4t(e))return{dataFrom:K6t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:Z6t(e,r,i)};Pn("Unsupported input data type")}function r4t(e){return e&&Si(e.reify)}function i4t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return k6t(WMe(e,r),n)}function s4t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function o4t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&gm(u))++i,s4t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function T5(e,t){return Si(t)?t(e):t||e.columnNames()}function GMe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=o4t(a4t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function a4t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function DQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function u4t(e,t={}){const n=T5(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":gm(l)?h5(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return DQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function YMe(e,t={}){if(Si(t))return t(e)+"";const n=typeof e;if(n==="object"){if(gm(e))return t.utc?h5(e):gDe(e);{const r=JSON.stringify(e,(s,o)=>BI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function C5(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function l4t(e,t={}){const n=T5(e,t.columns),{align:r,format:i}=GMe(e,n,t),s=c4t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(YMe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return DQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function c4t(e){return C5(e.style,t=>Si(t)?t:()=>t)}function f4t(e,t=!0,n=!1){return e===void 0||e?t:n}const d4t=e=>gm(e)?h5(e,!0):e;function h4t(e,t={}){const n=f4t(t.schema),r=t.format||{},i=T5(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||d4t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function p4t(e,t={}){const n=T5(e,t.columns),{align:r,format:i}=GMe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return DQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(YMe(u,i[l]))+"|"}}),a+`
`}function KMe(e,t){for(const[n,r]of p5(t))e.set(n,r);return e}function m4t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function _m(e,t,n=new Map){return t=Za(t)?e.columnName(t):t,Bo(t)?n.set(t,t):hr(t)?t.forEach(r=>_m(e,r,n)):Si(t)?_m(e,t(e),n):Sa(t)?KMe(n,t):Pn(`Invalid column selection: ${bh(t)}`),n}function A5(e,t){return e.toObject=t,e}function XMe(e){return hr(e)?e.map(XMe):e&&e.toObject?e.toObject():e}function EE(){return A5(e=>e.columnNames(),()=>({all:[]}))}function QMe(...e){return e=e.flat(),A5(t=>{const n=_m(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:XMe(e)}))}function g4t(e,t){return A5(n=>{let r=Za(e)?e:n.columnIndex(e),i=Za(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function y4t(e){return Bo(e)&&(e=RegExp(m4t(e))),A5(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function v4t(e){return BI(e.data)?e.data.constructor:Array}class Bd extends DDt{static from(t,n){return new Bd(FDt(t,n),n)}static new(t,n){if(t instanceof Bd)return t;const r={},i=[];for(const[s,o]of p5(t))r[s]=o,i.push(s);return new Bd(r,n||i)}constructor(t,n,r,i,s,o){C5(t,LDt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Bd(t||this._data,n||(t?null:this._names),o,i!==void 0?i:h3t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Vl(r).groupby(r.groups());return t.forEach(s=>{s=Bd.new(s),s.numRows()!==n&&Pn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Pn(`Unrecognized column: ${t}`)}object(t=0){return zme(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=_m(this,t.columns||EE()),o=zDe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),m3t(this,u,a,n)}return a}*[Symbol.iterator](){const t=zme(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(v4t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=p3t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return WMe(this,t)}toArrowBuffer(t){return i4t(this,t)}toCSV(t){return u4t(this,t)}toHTML(t){return l4t(this,t)}toJSON(t){return h4t(this,t)}toMarkdown(t){return p4t(this,t)}}function zme(e){let t=e._builder;if(!t){const n=zDe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class _4t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function sr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=b4t[e.type];s&&s(e,t,n)}const mk=(e,t,n)=>{sr(e.argument,t,n,e)},xB=(e,t,n)=>{sr(e.left,t,n,e),sr(e.right,t,n,e)},Ume=(e,t,n)=>{sr(e.test,t,n,e),sr(e.consequent,t,n,e),e.alternate&&sr(e.alternate,t,n,e)},SB=(e,t,n)=>{bd(e.params,t,n,e),sr(e.body,t,n,e)},Vme=(e,t,n)=>{sr(e.callee,t,n,e),bd(e.arguments,t,n,e)},bd=(e,t,n,r)=>{e.forEach(i=>sr(i,t,n,r))},b4t={TemplateLiteral:(e,t,n)=>{bd(e.expressions,t,n,e),bd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{sr(e.object,t,n,e),sr(e.property,t,n,e)},CallExpression:Vme,NewExpression:Vme,ArrayExpression:(e,t,n)=>{bd(e.elements,t,n,e)},AssignmentExpression:xB,AwaitExpression:mk,BinaryExpression:xB,LogicalExpression:xB,UnaryExpression:mk,UpdateExpression:mk,ConditionalExpression:Ume,ObjectExpression:(e,t,n)=>{bd(e.properties,t,n,e)},Property:(e,t,n)=>{sr(e.key,t,n,e),sr(e.value,t,n,e)},ArrowFunctionExpression:SB,FunctionExpression:SB,FunctionDeclaration:SB,VariableDeclaration:(e,t,n)=>{bd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{sr(e.id,t,n,e),sr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{sr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{bd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{sr(e.expression,t,n,e)},IfStatement:Ume,ForStatement:(e,t,n)=>{sr(e.init,t,n,e),sr(e.test,t,n,e),sr(e.update,t,n,e),sr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{sr(e.test,t,n,e),sr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{sr(e.body,t,n,e),sr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{sr(e.discriminant,t,n,e),bd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&sr(e.test,t,n,e),bd(e.consequent,t,n,e)},ReturnStatement:mk,Program:(e,t,n)=>{sr(e.body[0],t,n,e)}};function JMe(e){delete e.start,delete e.end,delete e.optional}function Hme(e){JMe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function w4t(e){return sr(e,null,{Column:Hme,Constant:Hme,Default:JMe}),e}function Ms(e,t){return t&&t.type===e}function E4t(e){return Ms(v3t,e)||Ms(y3t,e)}function x4t(e){return Si(e)?e:()=>e}const S4t="Escaped functions are not valid as rollup or pivot values.";function T4t(e,t,n){e.aggronly&&Pn(S4t);const r="(row,data)=>fn("+BDe(e.table.columnNames())+",$)";return{escape:MX.escape(r,x4t(t.expr),n)}}var C4t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],ZMe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],A4t="-----------------------------------------------------------------------------------------------------------------------------------------------------",eLe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",TB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},CB="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",I4t={5:CB,"5module":CB+" export import",6:CB+" const class extends export import super"},O4t=/^in(stanceof)?$/,P4t=new RegExp("["+eLe+"]"),k4t=new RegExp("["+eLe+A4t+"]");function fH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function bm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&P4t.test(String.fromCharCode(e)):t===!1?!1:fH(e,ZMe)}function xE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&k4t.test(String.fromCharCode(e)):t===!1?!1:fH(e,ZMe)||fH(e,C4t)}var ur=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ql(e,t){return new ur(e,{beforeExpr:!0,binop:t})}var Wl={beforeExpr:!0},du={startsExpr:!0},MQ={};function Qn(e,t){return t===void 0&&(t={}),t.keyword=e,MQ[e]=new ur(e,t)}var X={num:new ur("num",du),regexp:new ur("regexp",du),string:new ur("string",du),name:new ur("name",du),privateId:new ur("privateId",du),eof:new ur("eof"),bracketL:new ur("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ur("]"),braceL:new ur("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ur("}"),parenL:new ur("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ur(")"),comma:new ur(",",Wl),semi:new ur(";",Wl),colon:new ur(":",Wl),dot:new ur("."),question:new ur("?",Wl),questionDot:new ur("?."),arrow:new ur("=>",Wl),template:new ur("template"),invalidTemplate:new ur("invalidTemplate"),ellipsis:new ur("...",Wl),backQuote:new ur("`",du),dollarBraceL:new ur("${",{beforeExpr:!0,startsExpr:!0}),eq:new ur("=",{beforeExpr:!0,isAssign:!0}),assign:new ur("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ur("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ur("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ql("||",1),logicalAND:ql("&&",2),bitwiseOR:ql("|",3),bitwiseXOR:ql("^",4),bitwiseAND:ql("&",5),equality:ql("==/!=/===/!==",6),relational:ql("</>/<=/>=",7),bitShift:ql("<</>>/>>>",8),plusMin:new ur("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ql("%",10),star:ql("*",10),slash:ql("/",10),starstar:new ur("**",{beforeExpr:!0}),coalesce:ql("??",1),_break:Qn("break"),_case:Qn("case",Wl),_catch:Qn("catch"),_continue:Qn("continue"),_debugger:Qn("debugger"),_default:Qn("default",Wl),_do:Qn("do",{isLoop:!0,beforeExpr:!0}),_else:Qn("else",Wl),_finally:Qn("finally"),_for:Qn("for",{isLoop:!0}),_function:Qn("function",du),_if:Qn("if"),_return:Qn("return",Wl),_switch:Qn("switch"),_throw:Qn("throw",Wl),_try:Qn("try"),_var:Qn("var"),_const:Qn("const"),_while:Qn("while",{isLoop:!0}),_with:Qn("with"),_new:Qn("new",{beforeExpr:!0,startsExpr:!0}),_this:Qn("this",du),_super:Qn("super",du),_class:Qn("class",du),_extends:Qn("extends",Wl),_export:Qn("export"),_import:Qn("import",du),_null:Qn("null",du),_true:Qn("true",du),_false:Qn("false",du),_in:Qn("in",{beforeExpr:!0,binop:7}),_instanceof:Qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Bc=/\r\n?|\n|\u2028|\u2029/,R4t=new RegExp(Bc.source,"g");function Mx(e){return e===10||e===13||e===8232||e===8233}function tLe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Mx(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var nLe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,sc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,rLe=Object.prototype,$4t=rLe.hasOwnProperty,N4t=rLe.toString,GI=Object.hasOwn||function(e,t){return $4t.call(e,t)},qme=Array.isArray||function(e){return N4t.call(e)==="[object Array]"},Wme=Object.create(null);function qg(e){return Wme[e]||(Wme[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function G0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var D4t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,cA=function(t,n){this.line=t,this.column=n};cA.prototype.offset=function(t){return new cA(this.line,this.column+t)};var I5=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function iLe(e,t){for(var n=1,r=0;;){var i=tLe(e,r,t);if(i<0)return new cA(n,t-r);++n,r=i}}var dH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Gme=!1;function M4t(e){var t={};for(var n in dH)t[n]=e&&GI(e,n)?e[n]:dH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Gme&&typeof console=="object"&&console.warn&&(Gme=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),qme(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return qme(t.onComment)&&(t.onComment=L4t(t,t.onComment)),t}function L4t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new I5(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var fA=1,Lx=2,LQ=4,sLe=8,oLe=16,aLe=32,FQ=64,uLe=128,YI=256,jQ=fA|Lx|YI;function BQ(e,t){return Lx|(e?LQ:0)|(t?sLe:0)}var RM=0,zQ=1,Hm=2,lLe=3,cLe=4,fLe=5,Hs=function(t,n,r){this.options=t=M4t(t),this.sourceFile=t.sourceFile,this.keywords=qg(I4t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=TB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=qg(i);var s=(i?i+" ":"")+TB.strict;this.reservedWordsStrict=qg(s),this.reservedWordsStrictBind=qg(s+" "+TB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Bc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=X.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(fA),this.regexpState=null,this.privateNameStack=[]},zh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Hs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};zh.inFunction.get=function(){return(this.currentVarScope().flags&Lx)>0};zh.inGenerator.get=function(){return(this.currentVarScope().flags&sLe)>0&&!this.currentVarScope().inClassFieldInit};zh.inAsync.get=function(){return(this.currentVarScope().flags&LQ)>0&&!this.currentVarScope().inClassFieldInit};zh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&YI)return!1;if(t.flags&Lx)return(t.flags&LQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&FQ)>0||n||this.options.allowSuperOutsideMethod};zh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&uLe)>0};zh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Lx|YI))>0||n};zh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&YI)>0};Hs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Hs.parse=function(t,n){return new this(n,t).parse()};Hs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Hs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Hs.prototype,zh);var ou=Hs.prototype,F4t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ou.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){sc.lastIndex=e,e+=sc.exec(this.input)[0].length;var t=F4t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){sc.lastIndex=e+t[0].length;var n=sc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Bc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,sc.lastIndex=e,e+=sc.exec(this.input)[0].length,this.input[e]===";"&&e++}};ou.eat=function(e){return this.type===e?(this.next(),!0):!1};ou.isContextual=function(e){return this.type===X.name&&this.value===e&&!this.containsEsc};ou.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ou.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ou.canInsertSemicolon=function(){return this.type===X.eof||this.type===X.braceR||Bc.test(this.input.slice(this.lastTokEnd,this.start))};ou.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ou.semicolon=function(){!this.eat(X.semi)&&!this.insertSemicolon()&&this.unexpected()};ou.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ou.expect=function(e){this.eat(e)||this.unexpected()};ou.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var O5=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ou.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ou.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ou.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ou.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var zt=Hs.prototype;zt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==X.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var UQ={kind:"loop"},j4t={kind:"switch"};zt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;sc.lastIndex=this.pos;var t=sc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(bm(r,!0)){for(var i=n+1;xE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!O4t.test(s))return!0}return!1};zt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;sc.lastIndex=this.pos;var e=sc.exec(this.input),t=this.pos+e[0].length,n;return!Bc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(xE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};zt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=X._var,s="let"),r){case X._break:case X._continue:return this.parseBreakContinueStatement(i,r.keyword);case X._debugger:return this.parseDebuggerStatement(i);case X._do:return this.parseDoStatement(i);case X._for:return this.parseForStatement(i);case X._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case X._class:return e&&this.unexpected(),this.parseClass(i,!0);case X._if:return this.parseIfStatement(i);case X._return:return this.parseReturnStatement(i);case X._switch:return this.parseSwitchStatement(i);case X._throw:return this.parseThrowStatement(i);case X._try:return this.parseTryStatement(i);case X._const:case X._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case X._while:return this.parseWhileStatement(i);case X._with:return this.parseWithStatement(i);case X.braceL:return this.parseBlock(!0,i);case X.semi:return this.parseEmptyStatement(i);case X._export:case X._import:if(this.options.ecmaVersion>10&&r===X._import){sc.lastIndex=this.pos;var o=sc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===X._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===X.name&&c.type==="Identifier"&&this.eat(X.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};zt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(X.semi)||this.insertSemicolon()?e.label=null:this.type!==X.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};zt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};zt.parseDoStatement=function(e){return this.next(),this.labels.push(UQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(X._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(X.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};zt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(UQ),this.enterScope(0),this.expect(X.parenL),this.type===X.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===X._var||this.type===X._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new O5,u=this.parseExpression(t>-1?"await":!0,a);return this.type===X._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};zt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,U2|(n?0:hH),!1,t)};zt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(X._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};zt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(X.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};zt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(X.braceL),this.labels.push(j4t),this.enterScope(0);for(var t,n=!1;this.type!==X.braceR;)if(this.type===X._case||this.type===X._default){var r=this.type===X._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(X.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};zt.parseThrowStatement=function(e){return this.next(),Bc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var B4t=[];zt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?aLe:0),this.checkLValPattern(e,t?cLe:Hm),this.expect(X.parenR),e};zt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===X._catch){var t=this.startNode();this.next(),this.eat(X.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(X._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};zt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};zt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(UQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};zt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};zt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};zt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===X._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};zt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};zt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(X.braceL),e&&this.enterScope(0);this.type!==X.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};zt.parseFor=function(e,t){return e.init=t,this.expect(X.semi),e.test=this.type===X.semi?null:this.parseExpression(),this.expect(X.semi),e.update=this.type===X.parenR?null:this.parseExpression(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};zt.parseForIn=function(e,t){var n=this.type===X._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};zt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(X.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===X._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(X.comma))break}return e};zt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?zQ:Hm,!1)};var U2=1,hH=2,dLe=4;zt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===X.star&&t&hH&&this.unexpected(),e.generator=this.eat(X.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&U2&&(e.id=t&dLe&&this.type!==X.name?null:this.parseIdent(),e.id&&!(t&hH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?zQ:Hm:lLe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(BQ(e.async,e.generator)),t&U2||(e.id=this.type===X.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&U2?"FunctionDeclaration":"FunctionExpression")};zt.parseFunctionParams=function(e){this.expect(X.parenL),e.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};zt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(X.braceL);this.type!==X.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&z4t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};zt.parseClassElement=function(e){if(this.eat(X.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(X.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===X.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===X.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(X.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===X.parenL||o!=="method"||i||s){var l=!n.static&&$M(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};zt.isClassElementNameStart=function(){return this.type===X.name||this.type===X.privateId||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword};zt.parseClassElementName=function(e){this.type===X.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};zt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&$M(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};zt.parseClassField=function(e){if($M(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&$M(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(X.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};zt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(YI|FQ);this.type!==X.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};zt.parseClassId=function(e,t){this.type===X.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Hm,!1)):(t===!0&&this.unexpected(),e.id=null)};zt.parseClassSuper=function(e){e.superClass=this.eat(X._extends)?this.parseExprSubscripts(null,!1):null};zt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};zt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];GI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function z4t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function $M(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}zt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};zt.parseExport=function(e,t){if(this.next(),this.eat(X.star))return this.parseExportAllDeclaration(e,t);if(this.eat(X._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};zt.parseExportDeclaration=function(e){return this.parseStatement(null)};zt.parseExportDefaultDeclaration=function(){var e;if(this.type===X._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,U2|dLe,!1,e)}else if(this.type===X._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};zt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),GI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};zt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};zt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};zt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};zt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};zt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(X.braceL);!this.eat(X.braceR);){if(n)n=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;t.push(this.parseExportSpecifier(e))}return t};zt.parseImport=function(e){return this.next(),this.type===X.string?(e.specifiers=B4t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===X.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};zt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Hm),this.finishNode(e,"ImportSpecifier")};zt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Hm),this.finishNode(e,"ImportDefaultSpecifier")};zt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Hm),this.finishNode(e,"ImportNamespaceSpecifier")};zt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===X.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(X.comma)))return e;if(this.type===X.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(X.braceL);!this.eat(X.braceR);){if(t)t=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;e.push(this.parseImportSpecifier())}return e};zt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===X.string){var e=this.parseLiteral(this.value);return D4t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};zt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};zt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var zc=Hs.prototype;zc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};zc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};zc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};zc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==X.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};zc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case X.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(X.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case X.braceL:return this.parseObj(!0)}return this.parseIdent()};zc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(X.comma),t&&this.type===X.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===X.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};zc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};zc.parseBindingListItem=function(e){return e};zc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(X.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};zc.checkLValSimple=function(e,t,n){t===void 0&&(t=RM);var r=t!==RM;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Hm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(GI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==fLe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};zc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=RM),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};zc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=RM),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Kc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},$i={b_stat:new Kc("{",!1),b_expr:new Kc("{",!0),b_tmpl:new Kc("${",!1),p_stat:new Kc("(",!1),p_expr:new Kc("(",!0),q_tmpl:new Kc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Kc("function",!1),f_expr:new Kc("function",!0),f_expr_gen:new Kc("function",!0,!1,null,!0),f_gen:new Kc("function",!1,!1,null,!0)},Fx=Hs.prototype;Fx.initialContext=function(){return[$i.b_stat]};Fx.curContext=function(){return this.context[this.context.length-1]};Fx.braceIsBlock=function(e){var t=this.curContext();return t===$i.f_expr||t===$i.f_stat?!0:e===X.colon&&(t===$i.b_stat||t===$i.b_expr)?!t.isExpr:e===X._return||e===X.name&&this.exprAllowed?Bc.test(this.input.slice(this.lastTokEnd,this.start)):e===X._else||e===X.semi||e===X.eof||e===X.parenR||e===X.arrow?!0:e===X.braceL?t===$i.b_stat:e===X._var||e===X._const||e===X.name?!1:!this.exprAllowed};Fx.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Fx.updateContext=function(e){var t,n=this.type;n.keyword&&e===X.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Fx.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};X.parenR.updateContext=X.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===$i.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};X.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?$i.b_stat:$i.b_expr),this.exprAllowed=!0};X.dollarBraceL.updateContext=function(){this.context.push($i.b_tmpl),this.exprAllowed=!0};X.parenL.updateContext=function(e){var t=e===X._if||e===X._for||e===X._with||e===X._while;this.context.push(t?$i.p_stat:$i.p_expr),this.exprAllowed=!0};X.incDec.updateContext=function(){};X._function.updateContext=X._class.updateContext=function(e){e.beforeExpr&&e!==X._else&&!(e===X.semi&&this.curContext()!==$i.p_stat)&&!(e===X._return&&Bc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===X.colon||e===X.braceL)&&this.curContext()===$i.b_stat)?this.context.push($i.f_expr):this.context.push($i.f_stat),this.exprAllowed=!1};X.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};X.backQuote.updateContext=function(){this.curContext()===$i.q_tmpl?this.context.pop():this.context.push($i.q_tmpl),this.exprAllowed=!1};X.star.updateContext=function(e){if(e===X._function){var t=this.context.length-1;this.context[t]===$i.f_expr?this.context[t]=$i.f_expr_gen:this.context[t]=$i.f_gen}this.exprAllowed=!0};X.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==X.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var yn=Hs.prototype;yn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};yn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===X.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(X.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};yn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new O5,r=!0);var a=this.start,u=this.startLoc;(this.type===X.parenL||this.type===X.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===X.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===X.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};yn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(X.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(X.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};yn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};yn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==X._in)&&s>r){var o=this.type===X.logicalOR||this.type===X.logicalAND,a=this.type===X.coalesce;a&&(s=X.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===X.coalesce||a&&(this.type===X.logicalOR||this.type===X.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};yn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};yn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===X.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&hLe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===X.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==X._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(X.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function hLe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&hLe(e.expression)}yn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};yn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};yn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(X.arrow)};yn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};yn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(X.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(X.bracketL);if(l||u&&this.type!==X.parenL&&this.type!==X.backQuote||this.eat(X.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(X.bracketR)):this.type===X.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(X.parenL)){var f=new O5,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===X.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};yn.parseExprAtom=function(e,t,n){this.type===X.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case X._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===X.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==X.dot&&this.type!==X.bracketL&&this.type!==X.parenL&&this.unexpected(),this.finishNode(r,"Super");case X._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case X.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(X._function))return this.overrideContext($i.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(X.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===X.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(X.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case X.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case X.num:case X.string:return this.parseLiteral(this.value);case X._null:case X._true:case X._false:return r=this.startNode(),r.value=this.type===X._null?null:this.type===X._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case X.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case X.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(X.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case X.braceL:return this.overrideContext($i.b_expr),this.parseObj(!1,e);case X._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case X._class:return this.parseClass(this.startNode(),!1);case X._new:return this.parseNew();case X.backQuote:return this.parseTemplate();case X._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};yn.parseExprAtomDefault=function(){this.unexpected()};yn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===X.parenL&&!e)return this.parseDynamicImport(t);if(this.type===X.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};yn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(X.parenR)){var t=this.start;this.eat(X.comma)&&this.eat(X.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};yn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};yn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};yn.parseParenExpression=function(){this.expect(X.parenL);var e=this.parseExpression();return this.expect(X.parenR),e};yn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};yn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new O5,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==X.parenR;)if(l?l=!1:this.expect(X.comma),s&&this.afterTrailingComma(X.parenR,!0)){c=!0;break}else if(this.type===X.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(X.parenR),e&&this.shouldParseArrow(u)&&this.eat(X.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};yn.parseParenItem=function(e){return e};yn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var U4t=[];yn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===X.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(X.parenL)?e.arguments=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1):e.arguments=U4t,this.finishNode(e,"NewExpression")};yn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===X.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===X.backQuote,this.finishNode(n,"TemplateElement")};yn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===X.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(X.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(X.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};yn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===X.name||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===X.star)&&!Bc.test(this.input.slice(this.lastTokEnd,this.start))};yn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(X.braceR);){if(r)r=!1;else if(this.expect(X.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(X.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};yn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(X.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===X.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(X.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(X.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};yn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};yn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===X.colon&&this.unexpected(),this.eat(X.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===X.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==X.comma&&this.type!==X.braceR&&this.type!==X.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===X.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};yn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(X.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(X.bracketR),e.key;e.computed=!1}return e.key=this.type===X.num||this.type===X.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};yn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};yn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(BQ(t,r.generator)|FQ|(n?uLe:0)),this.expect(X.parenL),r.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};yn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(BQ(n,!1)|oLe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};yn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==X.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,fLe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};yn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};yn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,zQ,t?null:n)}};yn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(X.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===X.comma?o=null:this.type===X.ellipsis?(o=this.parseSpread(r),r&&this.type===X.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};yn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};yn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};yn.parseIdentNode=function(){var e=this.startNode();return this.type===X.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=X.name):this.unexpected(),e};yn.parsePrivateIdent=function(){var e=this.startNode();return this.type===X.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};yn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===X.semi||this.canInsertSemicolon()||this.type!==X.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(X.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};yn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var NM=Hs.prototype;NM.raise=function(e,t){var n=iLe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};NM.raiseRecoverable=NM.raise;NM.curPosition=function(){if(this.options.locations)return new cA(this.curLine,this.pos-this.lineStart)};var Ay=Hs.prototype,V4t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ay.enterScope=function(e){this.scopeStack.push(new V4t(e))};Ay.exitScope=function(){this.scopeStack.pop()};Ay.treatFunctionsAsVarInScope=function(e){return e.flags&Lx||!this.inModule&&e.flags&fA};Ay.declareName=function(e,t,n){var r=!1;if(t===Hm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&fA&&delete this.undefinedExports[e]}else if(t===cLe){var s=this.currentScope();s.lexical.push(e)}else if(t===lLe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&aLe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&fA&&delete this.undefinedExports[e],u.flags&jQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Ay.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Ay.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ay.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&jQ)return t}};Ay.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&jQ&&!(t.flags&oLe))return t}};var P5=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new I5(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},KI=Hs.prototype;KI.startNode=function(){return new P5(this,this.start,this.startLoc)};KI.startNodeAt=function(e,t){return new P5(this,e,t)};function pLe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}KI.finishNode=function(e,t){return pLe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};KI.finishNodeAt=function(e,t,n,r){return pLe.call(this,e,t,n,r)};KI.copyNode=function(e){var t=new P5(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var mLe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",gLe=mLe+" Extended_Pictographic",yLe=gLe,vLe=yLe+" EBase EComp EMod EPres ExtPict",_Le=vLe,H4t=_Le,q4t={9:mLe,10:gLe,11:yLe,12:vLe,13:_Le,14:H4t},W4t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",G4t={9:"",10:"",11:"",12:"",13:"",14:W4t},Yme="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",bLe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",wLe=bLe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",ELe=wLe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",xLe=ELe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",SLe=xLe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Y4t=SLe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",K4t={9:bLe,10:wLe,11:ELe,12:xLe,13:SLe,14:Y4t},TLe={};function X4t(e){var t=TLe[e]={binary:qg(q4t[e]+" "+Yme),binaryOfStrings:qg(G4t[e]),nonBinary:{General_Category:qg(Yme),Script:qg(K4t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var AB=0,Kme=[9,10,11,12,13,14];AB<Kme.length;AB+=1){var Q4t=Kme[AB];X4t(Q4t)}var kt=Hs.prototype,Uh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=TLe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Uh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Uh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Uh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Uh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Uh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Uh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Uh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Uh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Uh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};kt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};kt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};kt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};kt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};kt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};kt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};kt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};kt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};kt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};kt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};kt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};kt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};kt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};kt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};kt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};kt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};kt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return CLe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function CLe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}kt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!CLe(n);)e.advance();return e.pos!==t};kt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};kt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};kt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};kt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=G0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=G0(e.lastIntValue);return!0}return!1};kt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),J4t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function J4t(e){return bm(e,!0)||e===36||e===95}kt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Z4t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Z4t(e){return xE(e,!0)||e===36||e===95||e===8204||e===8205}kt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};kt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};kt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};kt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};kt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};kt.regexp_eatZero=function(e){return e.current()===48&&!k5(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};kt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};kt.regexp_eatControlLetter=function(e){var t=e.current();return ALe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function ALe(e){return e>=65&&e<=90||e>=97&&e<=122}kt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&e5t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function e5t(e){return e>=0&&e<=1114111}kt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};kt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var ILe=0,wm=1,uc=2;kt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(t5t(t))return e.lastIntValue=-1,e.advance(),wm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===uc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return ILe};function t5t(e){return e===100||e===68||e===115||e===83||e===119||e===87}kt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),wm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return ILe};kt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){GI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};kt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return wm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return uc;e.raise("Invalid property name")};kt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";OLe(t=e.current());)e.lastStringValue+=G0(t),e.advance();return e.lastStringValue!==""};function OLe(e){return ALe(e)||e===95}kt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";n5t(t=e.current());)e.lastStringValue+=G0(t),e.advance();return e.lastStringValue!==""};function n5t(e){return OLe(e)||k5(e)}kt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};kt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===uc&&e.raise("Negated character class may contain strings"),!0}return!1};kt.regexp_classContents=function(e){return e.current()===93?wm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),wm)};kt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};kt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||RLe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};kt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};kt.regexp_classSetExpression=function(e){var t=wm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===uc&&(t=uc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==uc&&(t=wm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===uc&&(t=uc)}};kt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};kt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?wm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};kt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===uc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};kt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};kt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===uc&&(t=uc);return t};kt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?wm:uc};kt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&r5t(n)||i5t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function r5t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function i5t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}kt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return s5t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function s5t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}kt.regexp_eatClassControlLetter=function(e){var t=e.current();return k5(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};kt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};kt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;k5(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function k5(e){return e>=48&&e<=57}kt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;PLe(n=e.current());)e.lastIntValue=16*e.lastIntValue+kLe(n),e.advance();return e.pos!==t};function PLe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function kLe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}kt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};kt.regexp_eatOctalDigit=function(e){var t=e.current();return RLe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function RLe(e){return e>=48&&e<=55}kt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!PLe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+kLe(i),e.advance()}return!0};var VQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new I5(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Kn=Hs.prototype;Kn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new VQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Kn.getToken=function(){return this.next(),new VQ(this)};typeof Symbol<"u"&&(Kn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===X.eof,value:t}}}});Kn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(X.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Kn.readToken=function(e){return bm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Kn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Kn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=tLe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Kn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Mx(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Kn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&nLe.test(String.fromCharCode(e)))++this.pos;else break e}}};Kn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Kn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(X.ellipsis)):(++this.pos,this.finishToken(X.dot))};Kn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(X.assign,2):this.finishOp(X.slash,1)};Kn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?X.star:X.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=X.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(X.assign,n+1):this.finishOp(r,n)};Kn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(X.assign,3)}return this.finishOp(e===124?X.logicalOR:X.logicalAND,2)}return t===61?this.finishOp(X.assign,2):this.finishOp(e===124?X.bitwiseOR:X.bitwiseAND,1)};Kn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(X.assign,2):this.finishOp(X.bitwiseXOR,1)};Kn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Bc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(X.incDec,2):t===61?this.finishOp(X.assign,2):this.finishOp(X.plusMin,1)};Kn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(X.assign,n+1):this.finishOp(X.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(X.relational,n))};Kn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(X.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(X.arrow)):this.finishOp(e===61?X.eq:X.prefix,1)};Kn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(X.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(X.assign,3)}return this.finishOp(X.coalesce,2)}}return this.finishOp(X.question,1)};Kn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),bm(t,!0)||t===92))return this.finishToken(X.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+G0(t)+"'")};Kn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(X.parenL);case 41:return++this.pos,this.finishToken(X.parenR);case 59:return++this.pos,this.finishToken(X.semi);case 44:return++this.pos,this.finishToken(X.comma);case 91:return++this.pos,this.finishToken(X.bracketL);case 93:return++this.pos,this.finishToken(X.bracketR);case 123:return++this.pos,this.finishToken(X.braceL);case 125:return++this.pos,this.finishToken(X.braceR);case 58:return++this.pos,this.finishToken(X.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(X.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(X.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+G0(e)+"'")};Kn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Kn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Bc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Uh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(X.regexp,{pattern:i,flags:o,value:u})};Kn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function o5t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function $Le(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Kn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=$Le(this.input.slice(t,this.pos)),++this.pos):bm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,n)};Kn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=$Le(this.input.slice(t,this.pos));return++this.pos,bm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),bm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=o5t(this.input.slice(t,this.pos),n);return this.finishToken(X.num,s)};Kn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Kn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Mx(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(X.string,t)};var NLe={};Kn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===NLe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Kn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw NLe;this.raise(e,t)};Kn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===X.template||this.type===X.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(X.dollarBraceL)):(++this.pos,this.finishToken(X.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(X.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Mx(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Kn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(X.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Kn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return G0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Mx(t)?"":String.fromCharCode(t)}};Kn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Kn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(xE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?bm:xE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=G0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Kn.readWord=function(){var e=this.readWord1(),t=X.name;return this.keywords.test(e)&&(t=MQ[e]),this.finishToken(t,e)};var a5t="8.11.3";Hs.acorn={Parser:Hs,version:a5t,defaultOptions:dH,Position:cA,SourceLocation:I5,getLineInfo:iLe,Node:P5,TokenType:ur,tokTypes:X,keywordTypes:MQ,TokContext:Kc,tokContexts:$i,isIdentifierChar:xE,isIdentifierStart:bm,Token:VQ,isNewLine:Mx,lineBreak:Bc,lineBreakG:R4t,nonASCIIwhitespace:nLe};function u5t(e,t){return Hs.parse(e,t)}const HQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},l5t={ecmaVersion:11},Xme="$",c5t="d",f5t="d1",d5t="d2",xo=e=>(t,n)=>n.error(t,e+" not allowed"),h5t=xo("Aggregate function"),p5t=xo("Window function"),m5t="Invalid argument",qQ="Invalid column reference",g5t=qQ+" (must be input to an aggregate function)",DLe="Invalid function call",y5t="Invalid member expression",v5t="Invalid operator parameter",_5t="Invalid param reference",b5t="Invalid variable reference",w5t="Variable not accessible in operator call",E5t="Unsupported variable declaration",x5t="Unsupported destructuring pattern",MLe="Table expressions do not support closures",LLe="Use aq.escape(fn) to use a function as-is (including closures)",S5t="use table.params({ name: value }) to define dynamic parameters",T5t="use aq.addFunction(name, fn) to add new op functions",C5t=`
Note: ${MLe}. ${LLe}, or ${S5t}.`,FLe=`
Note: ${MLe}. ${LLe}, or ${T5t}.`,A5t=`The ${FDe} method is not valid in multi-table expressions.`;function I5t(e,t){const n=O5t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,E4t(r)?(k5t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=f5t),e.scope.add(e.tuple2=d5t),e.scope.add(e.$param=Xme)):(e.scope.add(e.tuple=c5t),e.scope.add(e.$param=Xme)),sr(r,e,WQ),e.root}function O5t(e){try{const t=e.field?P5t(e):hr(e)?bh(e):e;return u5t(`expr=(${t})`,l5t).body[0].expression.right}catch{Pn(`Expression parse error: ${e+""}`)}}function P5t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const WQ={FunctionDeclaration:xo("Function definitions"),ForStatement:xo("For loops"),ForOfStatement:xo("For-of loops"),ForInStatement:xo("For-in loops"),WhileStatement:xo("While loops"),DoWhileStatement:xo("Do-while loops"),AwaitExpression:xo("Await expressions"),ArrowFunctionExpression:xo("Function definitions"),AssignmentExpression:xo("Assignments"),FunctionExpression:xo("Function definitions"),NewExpression:xo('Use of "new"'),UpdateExpression:xo("Update expressions"),VariableDeclarator(e,t){gH(e.id,t)},Identifier(e,t,n){zLe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,b5t,C5t)},CallExpression(e,t){const n=jLe(e.callee),r=DDe(n)||MDe(n);if(r){if((t.join||t.aggregate===!1)&&NX(n)&&h5t(e,t),(t.join||t.window===!1)&&DX(n)&&p5t(e,t),t.$op=1,t.ast)mH(e,n,t),e.arguments.forEach(i=>sr(i,t,pH));else{const i=t.op(R5t(t,r,n,e.arguments));Object.assign(e,{type:PDe,name:i.id})}return t.$op=0,!1}else NDe(n)?mH(e,n,t):t.error(e,DLe,FLe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ms(m0,r))return;const{name:s}=r;if(BLe(e)&&Ms(m0,i)&&Lf(HQ,i.name)){HLe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Qme(e,o,t,ULe,n);if(s===t.$param)return Qme(e,o,t,N5t);t.paramsRef.has(s)?dA(e,t.paramsRef.get(s)):t.columnRef.has(s)?VLe(r,s,t,e):Lf(t.params,s)&&dA(r,s)}};function Qme(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ms(kx,s))a=s.value;else try{sr(s,n,WQ,e),a=n.param(s)}catch{n.error(e,y5t)}return r(e,a,t,n,i),!1}const pH={...WQ,VariableDeclarator:xo("Variable declaration in operator call"),Identifier(e,t,n){zLe(e,t,n)&&t.error(e,w5t)},CallExpression(e,t){const n=jLe(e.callee);NDe(n)?mH(e,n,t):t.error(e,DLe,FLe)}};function k5t(e,t){e.generator&&xo("Generator functions")(e,t),e.async&&xo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(JS(t,n[0],"tuple1",i(1)),r>1&&JS(t,n[1],"tuple2",i(2)),r>2&&JS(t,n[2],"$param",s)):(JS(t,n[0],"tuple",i(0)),r>1&&JS(t,n[1],"$param",s))),t.root=e.body}function JS(e,t,n,r){Ms(m0,t)?(e.scope.add(t.name),e[n]=t.name):Ms(IDe,t)&&t.properties.forEach(i=>{const s=Ms(m0,i.key)?i.key.name:Ms(kx,i.key)?i.key.value:e.error(i,m5t);Ms(m0,i.value)||e.error(i.value,x5t),r(i.value.name,s)})}function R5t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(sr(u,e,pH),i.push(e.field(u))):l<a?(sr(u,e,pH),s.push(e.param(u))):e.error(u,v5t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function jLe(e){return Ms(m0,e)?e.name:Ms(ADe,e)?BLe(e)?$5t(e.property.name):e.property.name:null}function BLe(e){return Ms(m0,e.object)&&e.object.name==="Math"}function $5t(e){return e==="max"?"greatest":e==="min"?"least":e}function zLe(e,t,n){const{name:r}=e;if(!(Ms(ADe,n)&&n.property===e)){if(!(Ms(ODe,n)&&n.key===e))if(t.paramsRef.has(r))dA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))VLe(e,r,t,n);else if(Lf(t.params,r))dA(e,r);else if(Lf(HQ,r))HLe(e,r);else return!0}}function ULe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,qQ),r.aggronly&&!r.$op&&r.error(e,g5t),LDe(e,t,n,o,i)}function VLe(e,t,n,r){const[i,s]=n.columnRef.get(t);ULe(e,i,s,n,r)}function N5t(e,t,n,r){r.params&&!Lf(r.params,t)&&r.error(e,_5t),dA(e,t)}function dA(e,t){e.type=x3t,e.name=t}function HLe(e,t){e.type=b3t,e.name=t,e.raw=HQ[t]}function mH(e,t,n){if(t===FDe){const r=n.table;r||n.error(e,A5t),jDe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Za(s)?r.columnName(s):s;return r.column(o)||n.error(i,qQ),o}):r.columnNames())}else e.callee={type:E3t,name:t}}function gH(e,t){Ms(m0,e)?t.scope.add(e.name):Ms(g3t,e)?e.elements.forEach(n=>gH(n,t)):Ms(IDe,e)?e.properties.forEach(n=>gH(n.value,t)):t.error(e.id,E5t)}const D5t={[zI]:1,[PDe]:1};function qu(e,t={}){const n=t.generate||dM,r=t.compiler||MX,i=L5t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=M5t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ms(kx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?w4t(g):f(n(g),i));u.push(y),D5t[g.type]&&y!==g&&Sa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(d.spec).slice(v,_);Pn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of p5(e))d.value(m+"",g.escape?T4t(d,g,i):I5t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function M5t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function L5t(e){return(e.table?IB(e.table):e.join?{...IB(e.join[1]),...IB(e.join[0])}:{})||{}}function IB(e){return e&&Si(e.params)?e.params():{}}const qLe="Expr",Xc="ExprList",WLe="ExprNumber",GT="ExprObject",Wb="JoinKeys",DM="JoinValues",Ql="Options",GQ="OrderKeys",vg="SelectionList",xv="TableRef",Gb="TableRefList",F5t="Descending",j5t="Query",B5t="Selection",z5t="Verb",U5t="Window";function R5(e,t){return e&&e.expr?new Jme({...e,...t}):new Jme(t,e)}class Jme{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Si(this.expr)?{func:!0}:{}}}}function V5t(e){return R5(e,{desc:!0})}function R1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return R5(e,t?{expr:t,...r}:r)}function H5t(e,t,n){return R5(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function q5t(e){const t=n=>n;return t.toString=()=>e,t}function Zme(e,t){return t=t&&Si(t.query)?t.query():t,t&&Si(t.evaluate)?t.evaluate(null,e):e(t)}function GLe(e){return Sa(e)&&(hr(e.all)||hr(e.matches)||hr(e.not)||hr(e.range))}function hA(e){return e&&Si(e.toObject)?e.toObject():Si(e)?{expr:String(e),func:!0}:hr(e)?e.map(hA):Sa(e)?C5(e,t=>hA(t)):e}function YQ(e){return hr(e)?e.map(YQ):Sa(e)?hr(e.verbs)?XQ.from(e):hr(e.all)?EE():hr(e.range)?g4t(...e.range):hr(e.match)?y4t(RegExp(...e.match)):hr(e.not)?QMe(e.not.map(hA)):W5t(e):e}function W5t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=R1(n):e.func===!0&&(t=n=q5t(n)),Sa(e.window)){const{frame:r,peers:i}=e.window;t=n=H5t(n,r,i)}e.desc===!0&&(t=V5t(n))}return e===t?C5(e,r=>YQ(r)):t}function G5t(e){return hr(e)?e.map(Y5t):e}function Y5t(e){const t=[];return Uu(e).forEach(n=>{Za(n)?t.push(n):Bo(n)?t.push(R1(n,null)):Sa(n)&&n.expr||Si(n)?t.push(n):Pn(`Invalid key value: ${n+""}`)}),t}function K5t(e){return hr(e)?e.map(X5t):e}function X5t(e,t){return t<2?Uu(e):e}function Q5t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Sa(r)&&!Si(r))for(const i in r)t.push(r[i]);else n=Za(r)?r:Bo(r)?R1(n):Si(r)?n:Pn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const J5t={[qLe]:QLe,[Xc]:SE,[WLe]:iFt,[GT]:Y0,[Wb]:sFt,[DM]:oFt,[GQ]:SE,[vg]:nFt};function Z5t(e,t,n){return t===xv?ege(e):t===Gb?e.map(ege):YLe(hA(e),t,n)}function YLe(e,t,n){return t===Ql?e&&eFt(e,n):J5t[t](e)}function eFt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?YLe(i,t[r]):i}return n}function tFt(e,t){return qu({expr:e},{...t,ast:!0}).exprs[0]}function KQ(e){return{type:zI,name:e}}function KLe(e){return{type:zI,index:e}}function Y0(e,t){if(Bo(e))return tFt(e,t);if(e.expr){let n;if(e.field===!0?n=KQ(e.expr):e.func===!0&&(n=Y0(e.expr,t)),n)return e.desc&&(n={type:F5t,expr:n}),e.window&&(n={type:U5t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Y0(e[n],t),as:n}))}function XLe(e){const t=B5t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:SE(e.not)}:e.range?{type:t,operator:"range",arguments:SE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Pn("Invalid input")}function nFt(e){return Uu(e).map(rFt).flat()}function rFt(e){return GLe(e)?XLe(e):Za(e)?KLe(e):Bo(e)?KQ(e):Sa(e)?Object.keys(e).map(t=>({type:zI,name:t,as:e[t]})):Pn("Invalid input")}function QLe(e){return GLe(e)?XLe(e):Za(e)?KLe(e):Bo(e)?KQ(e):Sa(e)?Y0(e):Pn("Invalid input")}function SE(e){return Uu(e).map(QLe).flat()}function iFt(e){return Za(e)?e:Y0(e)}function sFt(e){return hr(e)?e.map(SE):Y0(e,{join:!0})}function oFt(e){return hr(e)?e.map((t,n)=>n<2?SE(t):Y0(t,{join:!0})):Y0(e,{join:!0})}function ege(e){return e&&Si(e.toAST)?e.toAST():e}class JLe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Wb?G5t(a):o===DM?K5t(a):o===GQ?Q5t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=yH[t.verb],r=(n.schema||[]).map(({name:i})=>YQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===xv?Zme(n,o):s===Gb?o.map(a=>Zme(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=hA(this[n])}),t}toAST(){const t={type:z5t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Z5t(this[n],r,i)}),t}}function qr(e,t){return Object.assign((...n)=>new JLe(e,t,n),{schema:t})}const yH={count:qr("count",[{name:"options",type:Ql}]),derive:qr("derive",[{name:"values",type:GT},{name:"options",type:Ql,props:{before:vg,after:vg}}]),filter:qr("filter",[{name:"criteria",type:GT}]),groupby:qr("groupby",[{name:"keys",type:Xc}]),orderby:qr("orderby",[{name:"keys",type:GQ}]),relocate:qr("relocate",[{name:"columns",type:vg},{name:"options",type:Ql,props:{before:vg,after:vg}}]),rename:qr("rename",[{name:"columns",type:vg}]),rollup:qr("rollup",[{name:"values",type:GT}]),sample:qr("sample",[{name:"size",type:WLe},{name:"options",type:Ql,props:{weight:qLe}}]),select:qr("select",[{name:"columns",type:vg}]),ungroup:qr("ungroup"),unorder:qr("unorder"),reify:qr("reify"),dedupe:qr("dedupe",[{name:"keys",type:Xc,default:[]}]),impute:qr("impute",[{name:"values",type:GT},{name:"options",type:Ql,props:{expand:Xc}}]),fold:qr("fold",[{name:"values",type:Xc},{name:"options",type:Ql}]),pivot:qr("pivot",[{name:"keys",type:Xc},{name:"values",type:Xc},{name:"options",type:Ql}]),spread:qr("spread",[{name:"values",type:Xc},{name:"options",type:Ql}]),unroll:qr("unroll",[{name:"values",type:Xc},{name:"options",type:Ql,props:{drop:Xc}}]),lookup:qr("lookup",[{name:"table",type:xv},{name:"on",type:Wb},{name:"values",type:Xc}]),join:qr("join",[{name:"table",type:xv},{name:"on",type:Wb},{name:"values",type:DM},{name:"options",type:Ql}]),cross:qr("cross",[{name:"table",type:xv},{name:"values",type:DM},{name:"options",type:Ql}]),semijoin:qr("semijoin",[{name:"table",type:xv},{name:"on",type:Wb}]),antijoin:qr("antijoin",[{name:"table",type:xv},{name:"on",type:Wb}]),concat:qr("concat",[{name:"tables",type:Gb}]),union:qr("union",[{name:"tables",type:Gb}]),intersect:qr("intersect",[{name:"tables",type:Gb}]),except:qr("except",[{name:"tables",type:Gb}])};let XQ=class ZLe extends pDe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new ZLe(t.map(JLe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return tge(this,"toObject")}toJSON(){return this.toObject()}toAST(){return tge(this,"toAST",{type:j5t})}};function tge(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function aFt(e,t){return new XQ(e._verbs.concat(t),e._params,e._table)}for(const e in yH){const t=yH[e];XQ.prototype["__"+e]=function(n,...r){return aFt(n,t(...r))}}function jx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function uFt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function QQ(e,t){const n=Vl();return t.forEach((r,i)=>{const s=Bo(r)?r:i;if(s){const o=e.column(i)||Pn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function e6e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Pn("relocate requires a before or after option."),i&&s&&Pn("relocate accepts only one of the before or after options."),t=_m(e,t);const o=[..._m(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),QQ(e,u)}function XI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function JQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lFt(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function cFt(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function gk(e){return rA(e)?e:+e}function fFt(e,t){const n=e.length;if(!n)return lr;if((t=+t)<=0||n<2)return gk(e[0]);if(t>=1)return gk(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=gk(e[i]);return rA(s)?s:s+(gk(e[i+1])-s)*(r-i)}class dFt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:lFt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:cFt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(JQ)),fFt(this._sorted,t)}}const MM=(e,t,n)=>jx(t,"{"+XI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function hFt(e,t){const{ops:n,output:r}=pFt(e,t),i=e[0].fields,s=i.length,o=s===0?ZQ:s===1?mFt:s===2?gFt:Pn("Unsupported field count: "+s);return new o(i,n,r,t)}function pFt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=DDe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class ZQ extends _4t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new dFt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class mFt extends ZQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=MM(n,s,"add"),this._rem=MM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,_f(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,_f(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class gFt extends ZQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=MM(n,s,"add"),this._rem=MM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,_f(i)&&_f(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,_f(i)&&_f(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function v_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=Bx(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function Bx(e,t,n){if(!t.length)return n;const r=t6e(t),i=e.groups(),s=i?i.size:1;return n=n||d5(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=r6e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=n6e(e,o);o.write(a,n,0)}),n}function t6e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(hFt(r[i],t));return n}function n6e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function r6e(e,t,n){const{keys:r,size:i}=n,s=d5(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function i6e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function s6e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const nge=s6e(JQ);function yFt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?jx(["w","r","k"],"{"+XI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=nge.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=nge.right(o,o[p.i1-1])));for(let S=0;S<d;++S){const x=i[S],b=a[S];for(let T=_;T<p.i0;++T)x.rem(b,s[T],e);for(let T=w;T<p.i1;++T)x.add(b,s[T],e);x.write(b,u,l)}return h(p,u,l),u}};return p}const vFt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),_Ft=e=>!!e.peers;function bFt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=MDe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function wFt(e,t,n,r={},i){const s=e.data(),o=EFt(i,s),a=o.length,u=jx(["r","d","op"],"{"+XI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=xFt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function EFt(e,t){const n={};return e.forEach(r=>{const i=vFt(r),s=_Ft(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});NX(r.name)?a.push(r):u.push(bFt(r))}),Object.values(n).map(r=>yFt(t,r.frame,r.peers,r.winOps,t6e(r.aggOps,r.frame[0]!=null?-1:1)))}function xFt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function SFt(e){return DX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function eJ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Vl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=TFt(r),c=e.isGrouped()?e.groups().size:1,f=Bx(e,u,d5(r.length,()=>Array(c)));return l.length?wFt(e,a,n,f,l):CFt(e,a,n,f),e.create(o)}function TFt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(SFt(s)?n:t).push(s)}return[t,n]}function CFt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function AFt(e,t,n={}){const r=eJ(e,qu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:e6e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function IFt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const yk=2147483648,OFt=4294967295;class o6e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&yk>>>t}set(t){this._bits[t>>5]|=yk>>>t}clear(t){this._bits[t>>5]&=~(yk>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&OFt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=yk>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function PFt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new o6e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function kFt(e,t){const n=qu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=eJ(e,n,{drop:!0}).column("p");r=s=>i[s]}return PFt(e,r)}function a6e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=v_(e,r,n),l=Vl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const S=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(S))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,S)=>{for(let x=0;x<g;++x)d[x].length=m+S,d[x].fill(f[x].get(w),m,m+S)},_=p?(w,S)=>{for(let x=0;x<S;++x)p[w+x]=x}:()=>{};if(y===1){const w=u[0],S=h[0];e.scan((x,b)=>{const T=Uu(w(x,b)),A=Math.min(T.length,s);v(x,A);for(let I=0;I<A;++I)S[m+I]=T[I];_(m,A),m+=A})}else e.scan((w,S)=>{let x=0;const b=u.map(T=>{const A=Uu(T(w,S));return x=Math.min(Math.max(x,A.length),s),A});v(w,x);for(let T=0;T<y;++T){const A=h[T],I=b[T];for(let k=0;k<x;++k)A[m+k]=I[k]}_(m,x),m+=x});return e.create(l.new())}function RFt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=v_(e,r,n);return a6e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function jf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Za(o)?t.columnName(o):o,Bo(o)?i.set(o,R1(o)):Si(o)?_m(t,o).forEach(s):Sa(o)?KMe(i,o):Pn(`Invalid ${e} value: ${o+""}`)};return Uu(n).forEach(s),r.preparse&&r.preparse(i),qu(i,{table:t,...r})}function $Ft(e,t,n){return RFt(e,jf("fold",e,t),n)}function rge(e,t,n,r){const i=n&&n.length;return NFt(i?DFt(e,n,r):e,t,i)}function NFt(e,{names:t,exprs:n,ops:r},i){const s=v_(e,r,n),o=i?null:Vl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=_f(p)?p:d(h)})}),i?e:e.create(o)}function DFt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=hM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Vl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=hM(o.map((p,m)=>g=>g[m])),h=jx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),ige(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else ige(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function ige(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function tJ(e,{names:t,exprs:n,ops:r}){const i=Vl(),s=e.groups();return s&&i6e(i,s),MFt(t,n,s,Bx(e,r),i),e.create(i.new())}function MFt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function LFt(e,t,n={}){if(t=qu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Pn(`Invalid impute column ${bh(r)}`)),n.expand){const r={preparse:FFt,aggronly:!0},i=jf("impute",e,n.expand,r),s=tJ(e.ungroup(),i);return rge(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return rge(e,t)}function FFt(e){e.forEach((t,n)=>t.field?e.set(n,xDe(t+"")):0)}function jFt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function u6e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function BFt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function zFt(e,t){const n=["i","a","j","b"];return jx(n,"{"+XI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function UFt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Vl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=zFt(g,y);if((hr(n)?HFt:VFt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function VFt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function HFt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(x,b,T,A)=>e(T,A,x,b));const w=BFt(v,m,g),S=p.length;for(let x=0;x<S;++x){const b=p[x],T=w.get(d(b,f));if(T){const A=T.length;for(let I=0;I<A;++I){const k=T[I];_(b,f,v[k],m),y[k]=1}h[x]=1}}}function LM(e,t,n){const r=new Map;Uu(n).forEach((s,o)=>{s=Za(s)?t.columnName(s):s,Bo(s)?r.set(o,R1(s)):Si(s)||Sa(s)&&s.expr?r.set(o,s):Pn(`Invalid ${e} key value: ${s+""}`)});const i=qu(r,{table:t,aggregate:!1,window:!1});return hM(i.exprs,!0)}function qFt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function nJ(e,t,n){if(n)Bo(n)?n=[n,n]:hr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=qFt(e.columnNames(),t.columnNames());r.length||Pn("Natural join requires shared column names."),n=[r,r]}return n}function l6e(e,t,n,r){return n.length!==r.length&&Pn("Mismatched number of join keys"),[LM("join",e,n),LM("join",t,r)]}const WFt={aggregate:!1,window:!1},GFt={...WFt,index:1};function sge(e,t,n,r,i={}){n=nJ(e,t,n);const s={join:[e,t]};let o;if(hr(n)){const[a,u]=n.map(Uu);o=l6e(e,t,a,u),r||(r=YFt(e,a,u,i))}else o=qu({on:n},s).exprs[0],r||(r=[EE(),EE()]);return UFt(e,t,o,KFt(e,t,r,s,i&&i.suffix),i)}function YFt(e,t,n,r){const i=[];t.forEach((o,a)=>Bo(o)&&o===n[a]?i.push(o):0);const s=QMe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${bh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,EE()]:[EE(),s]}function KFt(e,t,n,r,i=[]){if(hr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=jf("join",e,n[0],r)),u--&&(o=jf("join",t,n[1],GFt)),u--&&(a=qu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&oge(s.names,l,i[0]||"_1"),i[1]!==""&&oge(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return qu(n,r)}function oge(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function XFt(e,t,n,r={}){const i=new o6e(e.totalRows());return(hr(n)?QFt:JFt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function QFt(e,t,n,[r,i]){const s=u6e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function JFt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function age(e,t,n,r){n=nJ(e,t,n);const i=hr(n)?l6e(e,t,...n.map(Uu)):qu({on:n},{join:[e,t]}).exprs[0];return XFt(e,t,i,r)}function ZFt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Vl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(lr)));const l=u6e(t,r),c=jx(["lr","rr","data"],"{"+XI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),v_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function e8t(e,t,n,r){return n=nJ(e,t,n),ZFt(e,t,[LM("lookup",e,n[0]),LM("lookup",t,n[1])],jf("lookup",t,r))}const vH=(e,t)=>e??t;function t8t(e,t,n,r={}){const{keys:i,keyColumn:s}=n8t(e,t,r),o=vH(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>Bx(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(r8t(n,a,e.groups(),u))}function n8t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=vH(n.sort,!0),s=vH(n.keySeparator,"_"),o=v_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=Bx(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function r8t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Vl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&i6e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function i8t(e,t,n,r){return t8t(e,jf("fold",e,t),jf("fold",e,n,{preparse:s8t,aggronly:!0}),r)}function s8t(e){e.forEach((t,n)=>t.field?e.set(n,bDe(t+"")):0)}function o8t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),QQ(e,_m(e,t,n))}function uge(e,t){return tJ(e,qu(t,{table:e,aggronly:!0,window:!1}))}function a8t(e,t,n,r){return(t?r?l8t:u8t:r?f8t:c8t)(e.length,e,n,r)}function u8t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Px()|0];return t}function l8t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=s6e(JQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Px())];return t}function c8t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Px();s<e&&(t[s|0]=n[i])}return t}function f8t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Px())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function d8t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Px()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function h8t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):a8t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&d8t(u),e.reify(u)}function p8t(e,t,n={}){return h8t(e,m8t(e,t),g8t(e,n.weight),n)}const c6e=e=>t=>e.get(t)||0;function m8t(e,t){return Za(t)?()=>t:c6e(tJ(e,qu({size:t},{table:e,window:!1})).column("size"))}function g8t(e,t){return t==null?null:(t=Za(t)?e.columnName(t):t,c6e(Bo(t)?e.column(t):eJ(e,qu({w:t},{table:e}),{drop:!0}).column("w")))}function y8t(e,t){return QQ(e,_m(e,t))}function v8t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=v_(e,r,n),l=Vl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=_8t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function _8t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Uu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(lr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function b8t(e,t,n){return v8t(e,jf("spread",e,t),n)}function w8t(e,t){return e.concat(t).dedupe()}function E8t(e,t,n){return a6e(e,jf("unroll",e,t),n&&n.drop?{...n,drop:jf("unroll",e,n.drop).names}:n)}function x8t(e,t){return e.create({groups:S8t(e,t)})}function S8t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=v_(e,r,n);const o=hM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function T8t(e,t){return x8t(e,jf("groupby",e,t))}function C8t(e,t){return e.create({order:t})}const A8t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function I8t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=qu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([dM(p,{index:"a",op:o}),dM(p,{index:"b",op:a})])},window:!1}),l=Bx(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=A8t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function O8t(e,t){return C8t(e,P8t(e,t))}function P8t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Sa(o)&&!Si(o))for(const a in o)i(o[a]);else i(Za(o)?R1(s,e.columnName(o)):Bo(o)?R1(s):Si(o)?s:Pn(`Invalid orderby field: ${s+""}`))}),I8t(e,r)}function k8t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Vl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>lr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function R8t(e,t){const n=Vl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?r6e(e,t,r):[n6e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function $8t(e){return e.isGrouped()?e.create({groups:null}):e}function N8t(e){return e.isOrdered()?e.create({order:null}):e}const D8t={__antijoin:(e,t,n)=>age(e,t,n,{anti:!0}),__count:(e,t={})=>uge(e,{[t.as||"count"]:wDe()}),__cross:(e,t,n,r)=>sge(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:k8t,__dedupe:uFt,__derive:AFt,__except:IFt,__filter:kFt,__fold:$Ft,__impute:LFt,__intersect:jFt,__join:sge,__lookup:e8t,__pivot:i8t,__relocate:e6e,__rename:o8t,__rollup:uge,__sample:p8t,__select:y8t,__semijoin:age,__spread:b8t,__union:w8t,__unroll:E8t,__groupby:T8t,__orderby:O8t,__ungroup:$8t,__unorder:N8t,__reduce:R8t};Object.assign(Bd.prototype,D8t);function M8t(e,t){return Bd.new(e,t)}function rJ(e,t){return Bd.from(e,t)}function vk(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,u=[r,i,s,o];let l=u.length;for(;l&&u[--l]==null;)u.pop();const c=u.length?", "+u.map(f=>f+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function Sv(e){return R5(e,{escape:!0,toString(){Pn("Escaped values can not be serialized.")}})}Bd.prototype;function L8t(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let _k;const F8t=new Uint8Array(16);function j8t(){if(!_k&&(_k=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_k))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _k(F8t)}const _o=[];for(let e=0;e<256;++e)_o.push((e+256).toString(16).slice(1));function B8t(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}const z8t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),lge={randomUUID:z8t};function cge(e,t,n){if(lge.randomUUID&&!t&&!e)return lge.randomUUID();e=e||{};const r=e.random||(e.rng||j8t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,B8t(r)}class rh{static get(){let t=cge();for(;this.ids.has(t);)t=cge();return this.ids.set(t,!0),t}}rh.ids=new Map;function Af(e){return"parent"in e}function U8t(e){return!Af(e)}function V8t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:rh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:rh.get(),createdOn:Date.now(),val:r}]:[];return{id:rh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function H8t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:rh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:rh.get(),createdOn:Date.now(),val:s}]:[];return{id:rh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Xi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Z8t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $1(e){return!!e&&!!e[$l]}function K0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ejt}(e)||Array.isArray(e)||!!e[V2]||!!(!((t=e.constructor)===null||t===void 0)&&t[V2])||$5(e)||N5(e))}function TE(e,t,n){n===void 0&&(n=!1),X0(e)===0?(n?Object.keys:lJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function X0(e){var t=e[$l];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:$5(e)?2:N5(e)?3:0}function pA(e,t){return X0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function t$(e,t){return X0(e)===2?e.get(t):e[t]}function f6e(e,t,n){var r=X0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function q8t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function $5(e){return Q8t&&e instanceof Map}function N5(e){return J8t&&e instanceof Set}function pv(e){return e.o||e.t}function iJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=tjt(e);delete t[$l];for(var n=lJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function sJ(e,t){return t===void 0&&(t=!1),oJ(e)||$1(e)||!K0(e)||(X0(e)>1&&(e.set=e.add=e.clear=e.delete=W8t),Object.freeze(e),t&&TE(e,function(n,r){return sJ(r,!0)},!0)),e}function W8t(){Xi(2)}function oJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ih(e){var t=EH[e];return t||Xi(18,e),t}function G8t(e,t){EH[e]||(EH[e]=t)}function fge(){return{}.NODE_ENV==="production"||CE||Xi(0),CE}function OB(e,t){t&&(ih("Patches"),e.u=[],e.s=[],e.v=t)}function FM(e){_H(e),e.p.forEach(Y8t),e.p=null}function _H(e){e===CE&&(CE=e.l)}function dge(e){return CE={p:[],l:CE,h:e,m:!0,_:0}}function Y8t(e){var t=e[$l];t.i===0||t.i===1?t.j():t.O=!0}function PB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||ih("ES5").S(t,e,r),r?(n[$l].P&&(FM(t),Xi(4)),K0(e)&&(e=jM(t,e),t.l||BM(t,e)),t.u&&ih("Patches").M(n[$l].t,e,t.u,t.s)):e=jM(t,n,[]),FM(t),t.u&&t.v(t.u,t.s),e!==uJ?e:void 0}function jM(e,t,n){if(oJ(t))return t;var r=t[$l];if(!r)return TE(t,function(s,o){return hge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return BM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=iJ(r.k):r.o;TE(r.i===3?new Set(i):i,function(s,o){return hge(e,r,i,s,o,n)}),BM(e,i,!1),n&&e.u&&ih("Patches").R(r,n,e.u,e.s)}return r.o}function hge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Xi(5),$1(i)){var o=jM(e,i,s&&t&&t.i!==3&&!pA(t.D,r)?s.concat(r):void 0);if(f6e(n,r,o),!$1(o))return;e.m=!1}if(K0(i)&&!oJ(i)){if(!e.h.F&&e._<1)return;jM(e,i),t&&t.A.l||BM(e,i)}}function BM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&sJ(t,n)}function kB(e,t){var n=e[$l];return(n?pv(n):e)[t]}function pge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function bH(e){e.P||(e.P=!0,e.l&&bH(e.l))}function RB(e){e.o||(e.o=iJ(e.t))}function wH(e,t,n){var r=$5(t)?ih("MapSet").N(t,n):N5(t)?ih("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:fge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=xH;o&&(u=[a],l=YT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):ih("ES5").J(t,n);return(n?n.A:fge()).p.push(r),r}function K8t(e){return $1(e)||Xi(22,e),function t(n){if(!K0(n))return n;var r,i=n[$l],s=X0(n);if(i){if(!i.P&&(i.i<4||!ih("ES5").K(i)))return i.t;i.I=!0,r=mge(n,s),i.I=!1}else r=mge(n,s);return TE(r,function(o,a){i&&t$(i.t,o)===a||f6e(r,o,t(a))}),s===3?new Set(r):r}(e)}function mge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return iJ(e)}function X8t(){function e(r){if(!K0(r))return r;if(Array.isArray(r))return r.map(e);if($5(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(N5(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return pA(r,V2)&&(i[V2]=r[V2]),i}function t(r){return $1(r)?e(r):r}var n="add";G8t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=X0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Xi(24),typeof u=="function"&&f==="prototype"&&Xi(24),typeof(u=t$(u,f))!="object"&&Xi(15,o.join("/"))}var d=X0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Xi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Xi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;TE(a.D,function(h,p){var m=t$(f,h),g=t$(d,h),y=p?pA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===uJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var gge,CE,aJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Q8t=typeof Map<"u",J8t=typeof Set<"u",yge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",uJ=aJ?Symbol.for("immer-nothing"):((gge={})["immer-nothing"]=!0,gge),V2=aJ?Symbol.for("immer-draftable"):"__$immer_draftable",$l=aJ?Symbol.for("immer-state"):"__$immer_state",Z8t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},ejt=""+Object.prototype.constructor,lJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,tjt=Object.getOwnPropertyDescriptors||function(e){var t={};return lJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},EH={},xH={get:function(e,t){if(t===$l)return e;var n=pv(e);if(!pA(n,t))return function(i,s,o){var a,u=pge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!K0(r)?r:r===kB(e.t,t)?(RB(e),e.o[t]=wH(e.A.h,r,e)):r},has:function(e,t){return t in pv(e)},ownKeys:function(e){return Reflect.ownKeys(pv(e))},set:function(e,t,n){var r=pge(pv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=kB(pv(e),t),s=i==null?void 0:i[$l];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(q8t(n,i)&&(n!==void 0||pA(e.t,t)))return!0;RB(e),bH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return kB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,RB(e),bH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=pv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Xi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Xi(12)}},YT={};TE(xH,function(e,t){YT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),YT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Xi(13),YT.set.call(this,e,t,void 0)},YT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Xi(14),xH.set.call(this,e[0],t,n,e[0])};var njt=function(){function e(n){var r=this;this.g=yge,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Xi(6),o!==void 0&&typeof o!="function"&&Xi(7),K0(i)){var c=dge(r),f=wH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?FM(c):_H(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return OB(c,o),PB(m,c)},function(m){throw FM(c),m}):(OB(c,o),PB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===uJ&&(l=void 0),r.F&&sJ(l,!0),o){var h=[],p=[];ih("Patches").M(i,l,h,p),o(h,p)}return l}Xi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){K0(n)||Xi(8),$1(n)&&(n=K8t(n));var r=dge(this),i=wH(this,n,void 0);return i[$l].C=!0,_H(r),i},t.finishDraft=function(n,r){var i=n&&n[$l];({}).NODE_ENV!=="production"&&(i&&i.C||Xi(9),i.I&&Xi(10));var s=i.A;return OB(s,r),PB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!yge&&Xi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=ih("Patches").$;return $1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Nl=new njt,rjt=Nl.produce;Nl.produceWithPatches.bind(Nl);Nl.setAutoFreeze.bind(Nl);Nl.setUseProxies.bind(Nl);Nl.applyPatches.bind(Nl);Nl.createDraft.bind(Nl);Nl.finishDraft.bind(Nl);function ijt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=V8t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Rke({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:rh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:rh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function sjt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=ijt(e),s=WSt();s.startListening({matcher:uhe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=uhe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Pke({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:rh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ojt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ajt=Object.prototype.hasOwnProperty;function SH(e,t){return ajt.call(e,t)}function TH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)SH(e,i)&&r.push(i);return r}function ku(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function CH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function mv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function d6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function AH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(AH(e[t]))return!0}else if(typeof e=="object"){for(var r=TH(e),i=r.length,s=0;s<i;s++)if(AH(e[r[s]]))return!0}}return!1}function vge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var h6e=function(e){ojt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,vge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=vge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=h6e,ujt=ku,Yb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=zM(n,this.path);r&&(r=ku(r));var i=a1(n,{op:"remove",path:this.from}).removed;return a1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=zM(n,this.from);return a1(n,{op:"add",path:this.path,value:ku(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:mA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ljt={add:function(e,t,n){return CH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Yb.move,copy:Yb.copy,test:Yb.test,_get:Yb._get};function zM(e,t){if(t=="")return e;var n={op:"_get",path:t};return a1(e,n),n.value}function a1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):UM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=zM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=mA(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=ku(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=UM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=d6e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!CH(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);CH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=ljt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Yb[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function D5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ku(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=a1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function cjt(e,t,n){var r=a1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function UM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Yb[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&AH(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=p6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function p6e(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)D5(ku(t),ku(e),n||!0);else{n=n||UM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function mA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!mA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!mA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const fjt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:mA,applyOperation:a1,applyPatch:D5,applyReducer:cjt,deepClone:ujt,getValueByPointer:zM,validate:p6e,validator:UM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var cJ=new WeakMap,djt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),hjt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function pjt(e){return cJ.get(e)}function mjt(e,t){return e.observers.get(t)}function gjt(e,t){e.observers.delete(t.callback)}function yjt(e,t){t.unobserve()}function vjt(e,t){var n=[],r,i=pjt(e);if(!i)i=new djt(e),cJ.set(e,i);else{var s=mjt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=ku(e),t){r.callback=t,r.next=null;var o=function(){IH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){IH(r),clearTimeout(r.next),gjt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new hjt(t,r)),r}function IH(e,t){t===void 0&&(t=!1);var n=cJ.get(e.object);fJ(n.value,e.object,e.patches,"",t),e.patches.length&&D5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function fJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=TH(t),o=TH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(SH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?fJ(c,f,n,r+"/"+mv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+mv(l),value:ku(c)}),n.push({op:"replace",path:r+"/"+mv(l),value:ku(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+mv(l),value:ku(c)}),n.push({op:"remove",path:r+"/"+mv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!SH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+mv(l),value:ku(t[l])})}}}function m6e(e,t,n){n===void 0&&(n=!1);var r=[];return fJ(e,t,r,"",n),r}const _jt=Object.freeze(Object.defineProperty({__proto__:null,compare:m6e,generate:IH,observe:vjt,unobserve:yjt},Symbol.toStringTag,{value:"Module"}));Object.assign({},fjt,_jt,{JsonPatchError:h6e,deepClone:ku,escapePathComponent:mv,unescapePathComponent:d6e});var KT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(KT||{});function n$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=g6e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=n$(i,t);return D5(a,ku(o),!0,!1).newDocument}function bjt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function OH({registry:e,initialState:t}){let n=!1;const r=L8t(),i=sjt(t);function s(c){return i.backend.nodes[c]}r.listen(KT.TRAVERSAL_START,()=>{n=!0}),r.listen(KT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return n$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=n$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=m6e(y,f);if(bjt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=H8t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=n$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(KT.TRAVERSAL_START);const f=g6e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Ejt(p,m)?Af(p)&&d.push(...p.sideEffects.undo):Af(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(KT.TRAVERSAL_END)},undo(){const{current:c}=i;return Af(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return y6e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function wjt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Af(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Af(r)&&(r=n[r.parent]),Af(i)&&(i=n[i.parent]);return r.id}function g6e(e,t,n){const r=wjt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Af(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Af(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Ejt(e,t){if(Af(e)&&e.parent===t.id)return!0;if(Af(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function y6e(e,t){return{...e,children:e.children.map(n=>y6e(t[n],t)),name:`${e.label}`}}X8t();function xjt(e){return e.length===2?rjt(e):e}class gA{static create(){return new gA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:xjt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),eh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var Sjt="Expected a function",_ge=NaN,Tjt="[object Symbol]",Cjt=/^\s+|\s+$/g,Ajt=/^[-+]0x[0-9a-f]+$/i,Ijt=/^0b[01]+$/i,Ojt=/^0o[0-7]+$/i,Pjt=parseInt,kjt=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,Rjt=typeof self=="object"&&self&&self.Object===Object&&self,$jt=kjt||Rjt||Function("return this")(),Njt=Object.prototype,Djt=Njt.toString,Mjt=Math.max,Ljt=Math.min,$B=function(){return $jt.Date.now()};function Fjt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Sjt);t=bge(t)||0,PH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?Mjt(bge(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(x){var b=r,T=i;return r=i=void 0,l=x,o=e.apply(T,b),o}function p(x){return l=x,a=setTimeout(y,t),c?h(x):o}function m(x){var b=x-u,T=x-l,A=t-b;return f?Ljt(A,s-T):A}function g(x){var b=x-u,T=x-l;return u===void 0||b>=t||b<0||f&&T>=s}function y(){var x=$B();if(g(x))return v(x);a=setTimeout(y,m(x))}function v(x){return a=void 0,d&&r?h(x):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v($B())}function S(){var x=$B(),b=g(x);if(r=arguments,i=this,u=x,b){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return S.cancel=_,S.flush=w,S}function PH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function jjt(e){return!!e&&typeof e=="object"}function Bjt(e){return typeof e=="symbol"||jjt(e)&&Djt.call(e)==Tjt}function bge(e){if(typeof e=="number")return e;if(Bjt(e))return _ge;if(PH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=PH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Cjt,"");var n=Ijt.test(e);return n||Ojt.test(e)?Pjt(e.slice(2),n?2:8):Ajt.test(e)?_ge:+e}var zjt=Fjt;const dd=Qu(zjt);function v6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=C.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=C.useMemo(()=>Tx(".2s"),[]);return $.jsxs($.Fragment,{children:[$.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:$.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:$.jsx(Ya,{children:$.jsx(gr,{spacing:3,children:$.jsx(dt,{size:14,style:{color:"#878E95"},children:r})})})})}),$.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),$.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>$.jsxs("g",{transform:`translate(${n}, ${a})`,children:[$.jsx("line",{x2:"-6",stroke:"currentColor"}),$.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),$.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const Ujt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:v6e},Symbol.toStringTag,{value:"Module"})),NB=15;function _6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:u}){const[l,c]=C.useState([0,0]),[f,d]=C.useState(!1);return C.useEffect(()=>{const h=So(u.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),f){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<NB&&Math.abs(t(v[r.y])-g[1])<NB);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(w=>{v.has(w[r.ids])&&v.delete(w[r.ids])});const _=Array.from(v);n([[l[0],l[1]],[l[0],l[1]]],e,t,_.length===0?"clear":"drag",s.id,_)}else{const v=Array.from(new Set([...a,...y.map(_=>_[r.ids])]));v.length>0&&n([[l[0],l[1]],[l[0],l[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{d(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{d(!1)})}},[l,s.id,a,i,f,o,r,n,u,e,t]),$.jsx("circle",{style:{cursor:f?"pointer":"default",pointerEvents:"none"},r:NB,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const Vjt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:_6e},Symbol.toStringTag,{value:"Module"}));function Kb(e){const t=C.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return C.useLayoutEffect(()=>{t.current=e}),C.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const ri={top:15,left:100,right:15,bottom:130};function b6e({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u}){const[l,{height:c,width:f}]=mc(),[d,h]=C.useState(i),[p]=mc(),[m]=mc(),g=C.useMemo(()=>f-ri.left-ri.right,[f]),y=C.useMemo(()=>c-ri.top-ri.bottom,[c]),v=C.useMemo(()=>{const R=Array.from(new Set(s.map(P=>P[d.category])));return Ax(QNe).domain(R)},[s,d.category]),{xMin:_,yMin:w,xMax:S,yMax:x}=C.useMemo(()=>{const R=s.map(V=>+V[d.x]).filter(V=>V!==null),[P,N]=E3(R),F=s.map(V=>+V[d.y]).filter(V=>V!==null),[B,W]=E3(F);return{xMin:P,xMax:N,yMin:B,yMax:W}},[s,d.x,d.y]),b=C.useMemo(()=>{const R=S-_;return g<=0?null:d.dataType==="date"?qNe([ri.left,g+ri.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):yh([ri.left,g+ri.left]).domain([_-R/10,S+R/10]).nice()},[d.dataType,g,S,_]),T=C.useMemo(()=>{const R=x-w;return y<=0?null:yh([y+ri.top,ri.top]).domain([w-R/10,x+R/10]).nice()},[y,x,w]);C.useMemo(()=>{if(!b||!T)return()=>null;if(r==="Axis Selection"){const R=qOt().extent([[ri.left,ri.top+y-5],[ri.left+g,ri.top+y+5]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[N.selection[0],null],[N.selection[1],null]],b,T,N.mode,t.id)}),P=WOt().extent([[ri.left-5,ri.top],[ri.left+5,ri.top+y]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[null,N.selection[0]],[null,N.selection[1]]],b,T,N.mode,t.id)});return p.current&&m.current&&(So(m.current).call(P),So(p.current).call(R),t.hasBrush||(So(m.current).call(P.move,[T(x),T(w)]),So(p.current).call(R.move,[b(new Date("2015-01-02")),b(new Date("2015-12-31"))]),n([[b(new Date("2015-01-02")),T(x)],[b(new Date("2015-12-31")),T(w)]],b,T,"drag",t.id))),()=>{So(m.current).call(P.move,[T(x),T(w)]),So(p.current).call(R.move,[b(new Date("2015-01-02")),b(new Date("2015-12-31"))]),n([[b(new Date("2015-01-02")),T(x)],[b(new Date("2015-12-31")),T(w)]],b,T,"clear",t.id)}}if(r==="Rectangular Selection"){const R=GOt().extent([[ri.left,ri.top],[ri.left+g,ri.top+y]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],b,T,P.mode,t.id)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(So(l.current).call(R.move,null),e(null))});return So(l.current).call(R),()=>{So(l.current).call(R.move,null),n([[null,null],[null,null]],b,T,"clear",t.id)}}return r==="Slider Selection"?()=>n([[b(_),T(x)],[b(S),T(w)]],b,T,"clear",t.id):r==="Paintbrush Selection"?()=>n([[b(_),T(x)],[b(S),T(w)]],b,T,"clear",t.id,[]):()=>null},[t,r,p,m,y,l,n,g,S,_,b,x,w,T]),C.useEffect(()=>{r==="Slider Selection"&&b&&T&&n([[b(_),T(x)],[b(S),T(w)]],b,T,null,t.id)},[r,S,_,b,x,w,T]);const A=C.useMemo(()=>o.length===0?null:new Set(o),[o]),I=C.useMemo(()=>!b||!T?null:s.filter(R=>d.year?+R.Year===d.year:!0).map((R,P)=>{if(R[d.x]===null||R[d.y]===null)return null;const N=d.dataType==="date"?b(new Date(R[d.x])):b(R[d.x]);return $.jsx(Wp,{withinPortal:!0,label:R[d.ids],children:$.jsx("circle",{opacity:A&&!A.has(R[d.ids])?.3:.7,r:3,fill:A&&!A.has(R[d.ids])?"lightgray":d.hideCat?"gray":v(R[d.category]),cx:N,cy:T(R[d.y])},P)},P)}),[A,v,s,b,T,d]);C.useEffect(()=>{r==="Axis Selection"&&FAt(".handle").style("fill","darkgrey")},[t,r]);const k=Kb(R=>{h({...d,year:R?+R:void 0})});return $.jsxs(Bi,{spacing:0,children:[$.jsx(gr,{mr:ri.right,style:{justifyContent:"space-between"},children:d.year?$.jsxs(Bi,{spacing:0,children:[$.jsx(dt,{size:12,ml:ri.left,children:d.year}),$.jsx(YY,{min:2008,max:2022,value:d.year,onChange:k,ml:ri.left,style:{width:"150px"},label:d.year})]}):null}),$.jsxs(gr,{style:{width:"100%",height:"100%"},noWrap:!0,children:[$.jsxs("svg",{id:"scatterSvgBrushStudy",ref:l,style:{height:"500px",width:d.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b&&T?$.jsxs("g",{children:[$.jsx(v6e,{yScale:T,label:d.y,horizontalPosition:ri.left,xRange:b.range()}),$.jsx(jI,{xScale:b,yRange:T.range(),isDate:d.dataType==="date",vertPosition:y+ri.top,label:d.x,ticks:b.ticks(d.brushType==="Axis Selection"?12:5).map(R=>({value:R.toString(),offset:b(R)}))})]}):null,I,$.jsx("g",{id:"brushXRef",ref:p}),$.jsx("g",{id:"brushYRef",ref:m}),b&&T&&r==="Paintbrush Selection"?$.jsx(_6e,{currSelected:o,svgRef:l,brushState:t,setBrushedSpace:n,params:d,data:s.filter(R=>d.year?+R.Year===d.year:!0),isSelect:u,xScale:b,yScale:T}):null]}),r==="Slider Selection"&&b&&T?$.jsxs(Bi,{style:{flexGrow:1},spacing:50,children:[$.jsxs(Bi,{spacing:0,children:[$.jsx(dt,{children:d.x}),$.jsx(OU,{minRange:1,label:null,min:b.domain()[0],max:b.domain()[1],labelAlwaysOn:!1,onChange:R=>{n([[b(R[0]),t.y1],[b(R[1]),t.y2]],b,T,"drag",t.id)},style:{width:"300px"},marks:b.ticks(5).map(R=>({value:R,label:R})),value:[b.invert(t.x1),b.invert(t.x2)]})]}),$.jsxs(Bi,{spacing:0,children:[$.jsx(dt,{children:d.y}),$.jsx(OU,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:R=>{n([[t.x1,T(R[1])],[t.x2,T(R[0])]],b,T,"drag",t.id)},style:{width:"300px"},marks:T.ticks(5).map(R=>({value:R,label:R})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const Hjt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:b6e},Symbol.toStringTag,{value:"Module"})),il={top:15,left:100,right:15,bottom:130};function w6e({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,dataTable:l}){const[c,{height:f,width:d}]=mc(),[h,p]=C.useState(i),m=C.useMemo(()=>d-il.left-il.right,[d]),g=C.useMemo(()=>f-il.top-il.bottom,[f]),y=C.useMemo(()=>h.hideCat?l.groupby(t.xCol).count():l.groupby(t.xCol,"Survived").count(),[t.xCol,l,h.hideCat]),v=C.useMemo(()=>{if(!s)return null;const b=rJ(s);return h.hideCat?b.groupby(t.xCol).count():b.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),_=C.useMemo(()=>y?yh([il.top,g+il.top]).domain([0,yc(y.objects().map(b=>b.count))].reverse()).nice():null,[y,g]),w=C.useMemo(()=>y?Z4([il.left,m+il.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),S=C.useMemo(()=>!w||!_||!v?null:v.objects().map((b,T)=>$.jsxs("g",{children:[h.hideCat?$.jsx("rect",{onClick:A=>n(l.objects().filter(I=>I[t.xCol]===b[t.xCol]).map(I=>I.Name),A),x:w(b[t.xCol]),y:g-(g-_(b.count)),fill:"gray",width:w.bandwidth(),height:il.top+g-_(b.count)}):$.jsx("rect",{onClick:A=>n(l.objects().filter(I=>I[t.xCol]===b[t.xCol]&&I.Survived===b.Survived).map(I=>I.Name),A),x:b.Survived==="Yes"?w(b[t.xCol]):w(b[t.xCol])+w.bandwidth()/2,y:g-(g-_(b.count)),fill:b.Survived==="Yes"?"#f28e2c":"#4e79a7",width:w.bandwidth()/2,height:il.top+g-_(b.count)}),$.jsx("text",{x:w(b[t.xCol])+(h.hideCat?w.bandwidth()/2:b.Survived==="Yes"?w.bandwidth()/4:w.bandwidth()*.75),y:_(b.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:b.count})]},`${T}fullRects`)),[v,t.xCol,l,g,h.hideCat,n,w,_]),x=C.useMemo(()=>!w||!_||!y?null:y.objects().map((b,T)=>$.jsx("g",{style:{cursor:"pointer"},children:$.jsx("rect",{onClick:A=>n(l.objects().filter(I=>I[t.xCol]===b[t.xCol]&&(h.hideCat?!0:I.Survived===b.Survived)).map(I=>I.Name),A),opacity:.7,x:b.Survived==="Yes"||h.hideCat?w(b[t.xCol]):w(b[t.xCol])+w.bandwidth()/2,fill:"lightgray",width:h.hideCat?w.bandwidth():w.bandwidth()/2,y:g-(g-_(b.count)),height:il.top+g-_(b.count)})},`${T}survRects`)),[y,t.xCol,l,g,h.hideCat,n,w,_]);return _&&w&&v?$.jsx(Bi,{spacing:0,children:$.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[$.jsx(jI,{xScale:w,yRange:_.range(),vertPosition:g+il.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(l.array(t.xCol))].map(b=>({value:b,offset:w(b)+w.bandwidth()/2}))}),_?$.jsx(f5,{label:"Count",yScale:_,horizontalPosition:il.left,xRange:w.range(),ticks:_.ticks(5).map(b=>({value:b.toString(),offset:_(b)}))}):null,x,S]})}):null}const qjt=Object.freeze(Object.defineProperty({__proto__:null,Histogram:w6e},Symbol.toStringTag,{value:"Module"})),ld={top:15,left:100,right:15,bottom:130};function E6e({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:u,onClose:l,isPaintbrushSelect:c}){const[f,{height:d,width:h}]=mc(),[p,m]=C.useState(i),g=C.useMemo(()=>h-ld.left-ld.right,[h]),y=C.useMemo(()=>d-ld.top-ld.bottom,[d]),v=C.useMemo(()=>yh([ld.top,y+ld.top]).domain([0,yc(o.map(b=>+b[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),_=C.useMemo(()=>Z4([ld.left,g+ld.left]).domain([...new Set(o.map(b=>b[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),w=C.useMemo(()=>rJ(o.map(b=>({...b,Age:+b.Age}))),[o]),S=C.useMemo(()=>new Set(s.map(b=>b[p.ids])),[s,p.ids]),x=C.useMemo(()=>{let b=p.hideCat?w.groupby(t.xCol,{group:vk(t.yCol,{maxbins:20}),group_max:vk(t.yCol,{maxbins:20,offset:1})}):w.groupby(t.xCol,"Survived",{group:vk(t.yCol,{maxbins:20}),group_max:vk(t.yCol,{maxbins:20,offset:1})});b=b.rollup({ids:j2.array_agg(p.ids),count:j2.count()}).orderby("group");const T=b.derive({ids:Sv(R=>R.ids.filter(P=>S.has(P))),count:Sv(R=>R.ids.filter(P=>S.has(P)).length)}).orderby("group"),A=yh([0,_.bandwidth()/2]).domain([0,yc(b.array("count"))]),I=aM(R=>A(R[1])+_.bandwidth()/2,R=>v(R[0])).curve(YV),k=aM(R=>_.bandwidth()/2-A(R[1]),R=>v(R[0])).curve(YV);return $.jsx("g",{children:_.domain().map(R=>$.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?$.jsxs("g",{children:[$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R).map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_(R)}, 0)`,d:`${I(b.objects().filter(P=>P[t.xCol]===R).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R).map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_(R)}, 0)`,d:`${k(b.objects().filter(P=>P[t.xCol]===R).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R).map(N=>N.ids).flat(),P),transform:`translate(${_(R)}, 0)`,d:`${I(T.objects().filter(P=>P[t.xCol]===R).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R).map(N=>N.ids).flat(),P),transform:`translate(${_(R)}, 0)`,d:`${k(T.objects().filter(P=>P[t.xCol]===R).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):$.jsxs("g",{children:[$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R&&N.Survived==="Yes").map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_(R)}, 0)`,d:`${I(b.objects().filter(P=>P[t.xCol]===R&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R&&N.Survived==="No").map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_(R)}, 0)`,d:`${k(b.objects().filter(P=>P[t.xCol]===R&&P.Survived==="No").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R&&N.Survived==="Yes").map(N=>N.ids).flat(),P),transform:`translate(${_(R)}, 0)`,d:`${I(T.objects().filter(P=>P[t.xCol]===R&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),$.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===R&&N.Survived==="No").map(N=>N.ids).flat(),P),transform:`translate(${_(R)}, 0)`,d:`${k(T.objects().filter(P=>P[t.xCol]===R&&P.Survived==="No").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},R))})},[t.xCol,t.yCol,S,w,p.hideCat,p.ids,a,_,v]);return $.jsx(Bi,{spacing:0,children:$.jsxs("svg",{id:"scatterSvgBrushStudy",ref:f,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[$.jsx(jI,{xScale:_,yRange:v.range(),vertPosition:y+ld.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:_.domain().map(b=>({value:b,offset:_(b)+_.bandwidth()/2}))}),v?$.jsx(f5,{label:t.yCol,yScale:v,horizontalPosition:ld.left,xRange:_.range(),ticks:v.ticks(5).map(b=>({value:b.toString(),offset:v(b)}))}):null,x]})})}const Wjt=Object.freeze(Object.defineProperty({__proto__:null,Violin:E6e},Symbol.toStringTag,{value:"Module"}));function wge({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=C.useState(null),[s,o]=C.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,u]=C.useState(!0),[l,c]=C.useState(null);C.useEffect(()=>{SPt(`/ThinkAloud/data/${e.dataset}.csv`).then(x=>{c(x)})},[e]);const f=C.useMemo(()=>l?rJ(l):null,[l]);C.useEffect(()=>{if(n){const x=n.all.brush||n.all;o(x);const b=new Set(x.selection);if(f){const T=f.filter(Sv(A=>b.has(A[e.ids])));i(T)}}},[f,e.ids,n]);const{actions:d,trrack:h}=C.useMemo(()=>{const x=gA.create(),b=x.register("brush",(R,P)=>(R.all={brush:P},R)),T=x.register("brushMove",(R,P)=>(R.all={brush:P},R)),A=x.register("brushResize",(R,P)=>(R.all={brush:P},R)),I=x.register("brushClear",(R,P)=>(R.all={brush:P},R)),k=OH({registry:x,initialState:{all:s}});return{actions:{brush:b,brushMove:T,brushResize:A,clearBrush:I},trrack:k}},[]),p=C.useCallback((x,b)=>{x==="drag"?h.apply("Move Brush",d.brushMove(b)):(x==="handle"||x==="click")&&h.apply("Brush",d.brush(b)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[d,t,h]),m=C.useMemo(()=>dd(p,50,{maxWait:50}),[p]),g=C.useCallback((x,b,T,A,I,k)=>{if(!b||!T)return;const R=s[I],P=b.invert(x[0][0]||R.x1),N=b.invert(x[1][0]||R.x2),F=T.invert(x[1][1]||R.y2),B=T.invert(x[0][1]||R.y1);let W=null;if(A==="clear")W=f;else if(k){const M=new Set(k);W=f.filter(Sv(H=>M.has(H[e.ids])))}else e.brushType==="Axis Selection"?W=f.filter(Sv(M=>new Date(M[e.x])>=new Date(P)&&new Date(M[e.x])<=new Date(N)&&M[e.y]>=F&&M[e.y]<=B)):W=f.filter(Sv(M=>M[e.x]>=P&&M[e.x]<=N&&M[e.y]>=F&&M[e.y]<=B));const V={xCol:R.xCol,yCol:R.yCol,x1:x[0][0]||(R==null?void 0:R.x1)||0,x2:x[1][0]||(R==null?void 0:R.x2)||0,y1:x[0][1]||(R==null?void 0:R.y1)||0,y2:x[1][1]||(R==null?void 0:R.y2)||0,hasBrush:A!=="clear",id:I},G=A!=="clear"?W==null?void 0:W.array(e.ids):[];o({...s,[I]:V,selection:G}),A==="drag"||A==="handle"||A==="click"?m(A,{...s,[I]:V,selection:G}):A==="clear"&&h.apply("Clear Brush",d.clearBrush({...s,[I]:V,selection:G})),i(W)},[s,f,e,h,m,d]),y=C.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():f?f==null?void 0:f.groupby(e.category).count():null,[r,f,e.category]),v=C.useCallback(x=>{i(x)},[]),_=C.useCallback((x,b)=>{const T=new Set(b.ctrlKey||b.metaKey?[...s.selection,...x]:x),A=f.filter(Sv(I=>T.has(I[e.ids])));o({...s,selection:[...T]}),i(A),p("click",{...s,selection:[...T]})},[s,f,p,e.ids]),w=C.useMemo(()=>(f==null?void 0:f.objects())||[],[f]),S=C.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return l?$.jsxs(Bi,{spacing:"xs",children:[$.jsxs(gr,{children:[$.jsx(Lr,{ml:60,compact:!0,style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?$.jsx(VIe,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:x=>u(x==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?$.jsxs($.Fragment,{children:[$.jsx(R0,{color:"#f28e2c"}),$.jsx(dt,{children:"Survived"}),$.jsx(R0,{color:"#4e79a7"}),$.jsx(dt,{children:"Died"})]}):null]}),$.jsxs(gr,{children:[Object.entries(s).map(x=>{const[b,T]=x;return b==="selection"?null:T.type==="histogram"?$.jsx(w6e,{onClose:A=>{const{[A]:I,...k}=s;o(k)},dataTable:f,setSelection:_,brushedPoints:s.selection,data:S.length>0?S:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},b):T.type==="violin"?$.jsx(E6e,{onClose:A=>{const{[A]:I,...k}=s;o(k)},allData:w,setSelection:_,brushedPoints:s.selection,data:S.length>0?S:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},b):$.jsx(b6e,{onClose:A=>{const{[A]:I,...k}=s;o(k)},brushedPoints:s.selection,data:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},b)}),e.hideCat?null:$.jsx(KV,{fullTable:f,setSelection:_,data:w,parameters:e,barsTable:y})]})]}):$.jsx(dh,{})}const Gjt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:wge,default:wge},Symbol.toStringTag,{value:"Module"})),Yjt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function x6e(e,t){return function(n){return t.map(r=>[r,ORe(n,i=>e(r-i))])}}function S6e(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function T6e(e,t){return e*t/(t-1)}function C6e(e,t,n){let r=Math.sqrt(T6e(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function Kjt({values:e,xScale:t,ticks:n}){const r=M8t({values:e}).rollup({variance:j2.variance("values"),q1:j2.quantile("values",.25),q3:j2.quantile("values",.75)}).objects()[0];return x6e(S6e(C6e(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const Xjt=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:Kjt,kernelDensityEstimator:x6e,kernelEpanechnikov:S6e,silvermans:C6e,toSampleVariance:T6e},Symbol.toStringTag,{value:"Module"})),Qjt=Object.assign({"../public/ThinkAloud/AddPlot.tsx":T2t,"../public/ThinkAloud/AudioTest.tsx":z2t,"../public/ThinkAloud/Bar.tsx":$Dt,"../public/ThinkAloud/BrushPlot.tsx":Gjt,"../public/ThinkAloud/Histogram.tsx":qjt,"../public/ThinkAloud/Paintbrush.tsx":Vjt,"../public/ThinkAloud/Scatter.tsx":Hjt,"../public/ThinkAloud/Violin.tsx":Wjt,"../public/ThinkAloud/XAxisBar.tsx":kDt,"../public/ThinkAloud/YAxis.tsx":Ujt,"../public/ThinkAloud/YAxisBar.tsx":RDt,"../public/ThinkAloud/types.ts":Yjt,"../public/ThinkAloud/useKdeCalc.tsx":Xjt});function Jjt({currentConfig:e,provState:t}){const n=Fh(),r=Lm()[n],i=`../public/${e.path}`,s=Qjt[i].default,o=Ec(),{updateResponseBlockValidation:a,setIframeAnswers:u}=kl(),l=C.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[o,a,r,n,u]);return $.jsx(C.Suspense,{fallback:$.jsx("div",{children:"Loading..."}),children:$.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})})}function Zjt({currentConfig:e}){const[t,n]=C.useState(null);return C.useEffect(()=>{fetch(`${Nc}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:$.jsx(Ka,{text:t})}function Em(){return xa(e=>e.config)}function dJ(){const{answers:e}=xa(i=>i),t=Fh(),r=`${Lm()[t]}_${t}`;return e[r]}const e9t=Rwe(XTt);var t9t=e9t;function n9t(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function r9t(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function i9t(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function s9t(e){return e.__COMMENTS__}function o9t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var M5={EOL:t9t.EOL||`
`,tryParseNumber:n9t,createComment:r9t,removeComment:i9t,getComment:s9t,forceComment:o9t},a9t="3.2.1";function u9t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Ege}else if(e.length===0)return Ege;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return c9t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),l9t.bind(null,n)}function l9t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Ege(){}function c9t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function A6e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}A6e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function I6e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}I6e.description="parse hexadecimal numbers prefixed with 0x";function O6e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}O6e.description="support ISO dates";var hJ={loadDsf:u9t,std:{math:A6e,hex:I6e,date:O6e}},f9t=function(e,t){var n=M5,r=hJ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(N){return N==="{"||N==="}"||N==="["||N==="]"||N===","||N===":"}function d(N){var F,B=0,W=1;for(F=s-1;F>0&&i[F]!==`
`;F--,B++);for(;F>0;F--)i[F]===`
`&&W++;throw new Error(N+" at line "+W+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(N){return i.charAt(s+N)}function m(N){for(var F="",B=o;h();){if(o===B)return h(),N&&B==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var W=0,V=0;V<4;V++){h();var G=o.charCodeAt(0),M;o>="0"&&o<="9"?M=G-48:o>="a"&&o<="f"?M=G-97+10:o>="A"&&o<="F"?M=G-65+10:d("Bad \\u char "+o),W=W*16+M}F+=String.fromCharCode(W)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var N="",F=0,B=0;;){var W=p(-B-5);if(!W||W===`
`)break;B++}function V(){for(var G=B;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),V());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return N.slice(-1)===`
`&&(N=N.slice(0,-1)),N;continue}else for(;F>0;)N+="'",F--;o===`
`?(N+=`
`,h(),V()):(o!=="\r"&&(N+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var N="",F=s,B=-1;;){if(o===":")return N?B>=0&&B!==N.length&&(s=F+B,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),N;o<=" "?o?B<0&&(B=N.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):N+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var N=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=N[0];switch(B){case"f":if(N.trim()==="false")return!1;break;case"n":if(N.trim()==="null")return null;break;case"t":if(N.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var W=n.tryParseNumber(N);if(W!==void 0)return W}}if(F){N=N.trim();var V=l(N);return V!==void 0?V:N}}N+=o}}function w(N,F){var B;for(N--,B=s-2;B>N&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var W=i.substr(N,B-N+1);for(B=0;B<W.length;B++)if(W[B]>" "){var V=W.indexOf(`
`);if(V>=0){var G=[W.substr(0,V),W.substr(V+1)];return F&&G[0].trim().length===0&&G.shift(),G}else return[W]}return[]}function S(N){function F(W,V){var G,M,H,Y;switch(typeof W){case"string":W.indexOf(V)>=0&&(Y=W);break;case"object":if(Object.prototype.toString.apply(W)==="[object Array]")for(G=0,H=W.length;G<H;G++)Y=F(W[G],V)||Y;else for(M in W)Object.prototype.hasOwnProperty.call(W,M)&&(Y=F(W[M],V)||Y)}return Y}function B(W){var V=F(N,W);return V?"found '"+W+`' in a string value, your mistake could be with:
  > `+V+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function x(){var N=[],F,B,W;try{if(u&&(F=n.createComment(N,{a:[]})),h(),B=s,v(),F&&(W=w(B,!0).join(`
`)),o==="]")return h(),F&&(F.e=[W]),N;for(;o;){if(N.push(T()),B=s,v(),o===","&&(h(),B=s,v()),F){var V=w(B);F.a.push([W||"",V[0]||""]),W=V[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=W||""),N;v()}d("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||S(N),G}}function b(N){var F="",B={},W,V,G;try{if(u&&(W=n.createComment(B,{c:{},o:[]})),N?V=1:(h(),V=s),v(),W&&(G=w(V,!0).join(`
`)),o==="}"&&!N)return W&&(W.e=[G]),h(),B;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),B[F]=T(),V=s,v(),o===","&&(h(),V=s,v()),W){var M=w(V);W.c[F]=[G||"",M[0]||""],G=M[1],W.o.push(F)}if(o==="}"&&!N)return h(),W&&(W.c[F][1]+=G||""),B;v()}if(N)return B;d("End of input while parsing an object (missing '}')")}catch(H){throw H.hint=H.hint||S(B),H}}function T(){switch(v(),o){case"{":return b();case"[":return x();case"'":case'"':return m(!0);default:return _()}}function A(N,F){var B=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var W=F.join(`
`),V=w(B).join(`
`);if(V||W){var G=n.createComment(N,n.getComment(N));G.r=[W,V]}}return N}function I(){v();var N=u?w(1):null;switch(o){case"{":return A(b(),N);case"[":return A(x(),N);default:return A(T(),N)}}function k(){v();var N=u?w(1):null;switch(o){case"{":return A(b(),N);case"[":return A(x(),N)}try{return A(b(!0),N)}catch(F){c();try{return A(T(),N)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var R=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,R=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(R,"parse"),i=e,c(),P?k():I()},d9t=function(e,t){var n=M5,r=hJ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,S="---\u2028--\uFEFF-",x=new RegExp('[\\\\\\"\0-'+S+"]","g"),b=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+S+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+S+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},k=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,R="",P=0;function N(Y,L){return P+=Y[0].length+Y[1].length-Y[2]-Y[3],Y[0]+L+Y[1]}function F(Y){return Y.replace(x,function(L){var j=I[L];return typeof j=="string"?N(g.esc,j):N(g.uni,("0000"+L.charCodeAt(0).toString(16)).slice(-4))})}function B(Y,L,j,q){return Y?(b.lastIndex=0,A.lastIndex=0,c||j||b.test(Y)||n.tryParseNumber(Y,!0)!==void 0||A.test(Y)?(x.lastIndex=0,T.lastIndex=0,x.test(Y)?!T.test(Y)&&!q&&d?W(Y,L):N(g.qstr,F(Y)):N(g.qstr,Y)):N(g.str,Y)):N(g.qstr,"")}function W(Y,L){var j,q=Y.replace(/\r/g,"").split(`
`);if(L+=o,q.length===1)return N(g.mstr,q[0]);var Z=s+L+g.mstr[0];for(j=0;j<q.length;j++)Z+=s,q[j]&&(Z+=L+q[j]);return Z+s+L+g.mstr[1]}function V(Y){return Y?l||k.test(Y)?(x.lastIndex=0,N(g.qkey,x.test(Y)?F(Y):Y)):N(g.key,Y):'""'}function G(Y,L,j,q){function Z(bt){return bt&&bt[bt[0]==="\r"?1:0]===`
`}function ue(bt){return bt&&!Z(bt)}function he(bt,bn,Lt){if(!bt)return"";bt=n.forceComment(bt);var Ar,Fn=bt.length;for(Ar=0;Ar<Fn&&bt[Ar]<=" ";Ar++);return Lt&&Ar>0&&(bt=bt.substr(Ar)),Ar<Fn?bn+N(g.rem,bt):bt}var fe=w(Y);if(fe!==void 0)return N(g.dsf,fe);switch(typeof Y){case"string":return B(Y,R,L,q);case"number":return isFinite(Y)?N(g.num,String(Y)):N(g.lit,"null");case"boolean":return N(g.lit,String(Y));case"object":if(!Y)return N(g.lit,"null");var me;a&&(me=n.getComment(Y));var _e=Object.prototype.toString.apply(Y)==="[object Array]",ge=R;R+=o;var Be=s+ge,Me=s+R,ut=j||u?"":Be,Oe=[],Re,Ye=f?[]:null,Ut=c,Ft=d,Je=h?"":g.com[0],Ge=0,gt,ot,at,Et,ve,Se,Fe,Ue,ht;if(_e){for(gt=0,ot=Y.length;gt<ot;gt++){if(Re=gt<ot-1,me?(Se=me.a[gt]||[],Fe=ue(Se[1]),Oe.push(he(Se[0],`
`)+Me),Ye&&(Se[0]||Se[1]||Fe)&&(Ye=null)):Oe.push(Me),P=0,Et=Y[gt],Oe.push(G(Et,me?Fe:!1,!0)+(Re?h:"")),Ye){switch(typeof Et){case"string":P=0,c=!0,d=0,Ye.push(G(Et,!1,!0)+(Re?g.com[0]:"")),c=Ut,d=Ft;break;case"object":if(Et){Ye=null;break}default:Ye.push(Oe[Oe.length-1]+(Re?Je:""));break}Re&&(P+=g.com[0].length-g.com[2]),Ge+=P}me&&Se[1]&&Oe.push(he(Se[1],Fe?" ":`
`,Fe))}ot===0?me&&me.e&&Oe.push(he(me.e[0],`
`)+Be):Oe.push(Be),Oe.length===0?Ue=N(g.arr,""):(Ue=ut+N(g.arr,Oe.join("")),Ye&&(ht=Ye.join(" "),ht.length-Ge<=f&&(Ue=N(g.arr,ht))))}else{var cn=me?me.o.slice():[],Ve=[];for(at in Y)Object.prototype.hasOwnProperty.call(Y,at)&&cn.indexOf(at)<0&&Ve.push(at);m&&Ve.sort();var wt=cn.concat(Ve);for(gt=0,ot=wt.length;gt<ot;gt++)if(Re=gt<ot-1,at=wt[gt],me?(Se=me.c[at]||[],Fe=ue(Se[1]),Oe.push(he(Se[0],`
`)+Me),Ye&&(Se[0]||Se[1]||Fe)&&(Ye=null)):Oe.push(Me),P=0,Et=Y[at],ve=G(Et,me&&Fe),Oe.push(V(at)+g.col[0]+(Z(ve)?"":" ")+ve+(Re?h:"")),me&&Se[1]&&Oe.push(he(Se[1],Fe?" ":`
`,Fe)),Ye){switch(typeof Et){case"string":P=0,c=!0,d=0,ve=G(Et,!1),c=Ut,d=Ft,Ye.push(V(at)+g.col[0]+" "+ve+(Re?g.com[0]:""));break;case"object":if(Et){Ye=null;break}default:Ye.push(Oe[Oe.length-1]+(Re?Je:""));break}P+=g.col[0].length-g.col[2],Re&&(P+=g.com[0].length-g.com[2]),Ge+=P}ot===0?me&&me.e&&Oe.push(he(me.e[0],`
`)+Be):Oe.push(Be),Oe.length===0?Ue=N(g.obj,""):(Ue=ut+N(g.obj,Oe.join("")),Ye&&(ht=Ye.join(" "),ht.length-Ge<=f&&(Ue=N(g.obj,ht))))}return R=ge,Ue}}w=r.loadDsf(p,"stringify");var M="",H=a?H=(n.getComment(e)||{}).r:null;return H&&H[0]&&(M=H[0]+`
`),M+=G(e,null,!0,!0),H&&(M+=H[1]||""),M},Cw=M5;function H2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function kH(e,t){if(!(e===null||typeof e!="object")){var n=Cw.getComment(e);n&&Cw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)xge(o.a,r,n.a[r],kH(e[r]))&&(s=!0);!s&&n.e&&(o.e=H2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];xge(o.s,l,n.c[l],kH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=H2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=H2(n.r[0],n.r[1])),s?o:void 0}}function h9t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function p9t(e,t){var n=[];if(RH(e,t,n,[]),n.length>0){var r=VM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+h9t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),VM(t,r,1)}}function xge(e,t,n,r){var i=H2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function q2(e,t){var n=H2(t.b,t.a);return n.path=e,n}function W2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(q2(s,o)),W2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(q2(u,l)),W2(l.x,t,u))});e.e&&t.push(q2(n,e.e))}}function RH(e,t,n,r){if(e){if(t===null||typeof t!="object"){W2(e,n,r);return}var i,s=Cw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],RH(u.x,t[i],n,l)):(n.push(q2(l,u)),W2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],RH(d.x,t[c],n,f))):d&&(n.push(q2(f,d)),W2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function VM(e,t,n){var r=Cw.createComment(e,Cw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Cw.forceComment(t)),r.r[n]||""}var m9t={extract:function(e){return kH(e,!0)},merge:p9t,header:function(e,t){return VM(e,t,0)},footer:function(e,t){return VM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Sge=M5,g9t=a9t,Tge=f9t,Cge=d9t,y9t=m9t,v9t=hJ,pJ={parse:Tge,stringify:Cge,endOfLine:function(){return Sge.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Sge.EOL=e)},version:g9t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Tge(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Cge(e,t)}},comments:y9t,dsf:v9t.std},$H={exports:{}},P6e={},If={},AE={},QI={},zn={},yA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(yA);var NH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=yA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(NH);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=yA,n=NH;var r=yA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=NH;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(j,q){return this}}class o extends s{constructor(j,q,Z){super(),this.varKind=j,this.name=q,this.rhs=Z}render({es5:j,_n:q}){const Z=j?n.varKinds.var:this.varKind,ue=this.rhs===void 0?"":` = ${this.rhs}`;return`${Z} ${this.name}${ue};`+q}optimizeNames(j,q){if(j[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,j,q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(j,q,Z){super(),this.lhs=j,this.rhs=q,this.sideEffects=Z}render({_n:j}){return`${this.lhs} = ${this.rhs};`+j}optimizeNames(j,q){if(!(this.lhs instanceof t.Name&&!j[this.lhs.str]&&!this.sideEffects))return this.rhs=N(this.rhs,j,q),this}get names(){const j=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(j,this.rhs)}}class u extends a{constructor(j,q,Z,ue){super(j,Z,ue),this.op=q}render({_n:j}){return`${this.lhs} ${this.op}= ${this.rhs};`+j}}class l extends s{constructor(j){super(),this.label=j,this.names={}}render({_n:j}){return`${this.label}:`+j}}class c extends s{constructor(j){super(),this.label=j,this.names={}}render({_n:j}){return`break${this.label?` ${this.label}`:""};`+j}}class f extends s{constructor(j){super(),this.error=j}render({_n:j}){return`throw ${this.error};`+j}get names(){return this.error.names}}class d extends s{constructor(j){super(),this.code=j}render({_n:j}){return`${this.code};`+j}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(j,q){return this.code=N(this.code,j,q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(j=[]){super(),this.nodes=j}render(j){return this.nodes.reduce((q,Z)=>q+Z.render(j),"")}optimizeNodes(){const{nodes:j}=this;let q=j.length;for(;q--;){const Z=j[q].optimizeNodes();Array.isArray(Z)?j.splice(q,1,...Z):Z?j[q]=Z:j.splice(q,1)}return j.length>0?this:void 0}optimizeNames(j,q){const{nodes:Z}=this;let ue=Z.length;for(;ue--;){const he=Z[ue];he.optimizeNames(j,q)||(F(j,he.names),Z.splice(ue,1))}return Z.length>0?this:void 0}get names(){return this.nodes.reduce((j,q)=>R(j,q.names),{})}}class p extends h{render(j){return"{"+j._n+super.render(j)+"}"+j._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(j,q){super(q),this.condition=j}render(j){let q=`if(${this.condition})`+super.render(j);return this.else&&(q+="else "+this.else.render(j)),q}optimizeNodes(){super.optimizeNodes();const j=this.condition;if(j===!0)return this.nodes;let q=this.else;if(q){const Z=q.optimizeNodes();q=this.else=Array.isArray(Z)?new g(Z):Z}if(q)return j===!1?q instanceof y?q:q.nodes:this.nodes.length?this:new y(B(j),q instanceof y?[q]:q.nodes);if(!(j===!1||!this.nodes.length))return this}optimizeNames(j,q){var Z;if(this.else=(Z=this.else)===null||Z===void 0?void 0:Z.optimizeNames(j,q),!!(super.optimizeNames(j,q)||this.else))return this.condition=N(this.condition,j,q),this}get names(){const j=super.names;return P(j,this.condition),this.else&&R(j,this.else.names),j}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(j){super(),this.iteration=j}render(j){return`for(${this.iteration})`+super.render(j)}optimizeNames(j,q){if(super.optimizeNames(j,q))return this.iteration=N(this.iteration,j,q),this}get names(){return R(super.names,this.iteration.names)}}class w extends v{constructor(j,q,Z,ue){super(),this.varKind=j,this.name=q,this.from=Z,this.to=ue}render(j){const q=j.es5?n.varKinds.var:this.varKind,{name:Z,from:ue,to:he}=this;return`for(${q} ${Z}=${ue}; ${Z}<${he}; ${Z}++)`+super.render(j)}get names(){const j=P(super.names,this.from);return P(j,this.to)}}class S extends v{constructor(j,q,Z,ue){super(),this.loop=j,this.varKind=q,this.name=Z,this.iterable=ue}render(j){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(j)}optimizeNames(j,q){if(super.optimizeNames(j,q))return this.iterable=N(this.iterable,j,q),this}get names(){return R(super.names,this.iterable.names)}}class x extends p{constructor(j,q,Z){super(),this.name=j,this.args=q,this.async=Z}render(j){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(j)}}x.kind="func";class b extends h{render(j){return"return "+super.render(j)}}b.kind="return";class T extends p{render(j){let q="try"+super.render(j);return this.catch&&(q+=this.catch.render(j)),this.finally&&(q+=this.finally.render(j)),q}optimizeNodes(){var j,q;return super.optimizeNodes(),(j=this.catch)===null||j===void 0||j.optimizeNodes(),(q=this.finally)===null||q===void 0||q.optimizeNodes(),this}optimizeNames(j,q){var Z,ue;return super.optimizeNames(j,q),(Z=this.catch)===null||Z===void 0||Z.optimizeNames(j,q),(ue=this.finally)===null||ue===void 0||ue.optimizeNames(j,q),this}get names(){const j=super.names;return this.catch&&R(j,this.catch.names),this.finally&&R(j,this.finally.names),j}}class A extends p{constructor(j){super(),this.error=j}render(j){return`catch(${this.error})`+super.render(j)}}A.kind="catch";class I extends p{render(j){return"finally"+super.render(j)}}I.kind="finally";class k{constructor(j,q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...q,_n:q.lines?`
`:""},this._extScope=j,this._scope=new n.Scope({parent:j}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(j){return this._scope.name(j)}scopeName(j){return this._extScope.name(j)}scopeValue(j,q){const Z=this._extScope.value(j,q);return(this._values[Z.prefix]||(this._values[Z.prefix]=new Set)).add(Z),Z}getScopeValue(j,q){return this._extScope.getValue(j,q)}scopeRefs(j){return this._extScope.scopeRefs(j,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(j,q,Z,ue){const he=this._scope.toName(q);return Z!==void 0&&ue&&(this._constants[he.str]=Z),this._leafNode(new o(j,he,Z)),he}const(j,q,Z){return this._def(n.varKinds.const,j,q,Z)}let(j,q,Z){return this._def(n.varKinds.let,j,q,Z)}var(j,q,Z){return this._def(n.varKinds.var,j,q,Z)}assign(j,q,Z){return this._leafNode(new a(j,q,Z))}add(j,q){return this._leafNode(new u(j,e.operators.ADD,q))}code(j){return typeof j=="function"?j():j!==t.nil&&this._leafNode(new d(j)),this}object(...j){const q=["{"];for(const[Z,ue]of j)q.length>1&&q.push(","),q.push(Z),(Z!==ue||this.opts.es5)&&(q.push(":"),(0,t.addCodeArg)(q,ue));return q.push("}"),new t._Code(q)}if(j,q,Z){if(this._blockNode(new y(j)),q&&Z)this.code(q).else().code(Z).endIf();else if(q)this.code(q).endIf();else if(Z)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(j){return this._elseNode(new y(j))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(j,q){return this._blockNode(j),q&&this.code(q).endFor(),this}for(j,q){return this._for(new _(j),q)}forRange(j,q,Z,ue,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const fe=this._scope.toName(j);return this._for(new w(he,fe,q,Z),()=>ue(fe))}forOf(j,q,Z,ue=n.varKinds.const){const he=this._scope.toName(j);if(this.opts.es5){const fe=q instanceof t.Name?q:this.var("_arr",q);return this.forRange("_i",0,(0,t._)`${fe}.length`,me=>{this.var(he,(0,t._)`${fe}[${me}]`),Z(he)})}return this._for(new S("of",ue,he,q),()=>Z(he))}forIn(j,q,Z,ue=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(j,(0,t._)`Object.keys(${q})`,Z);const he=this._scope.toName(j);return this._for(new S("in",ue,he,q),()=>Z(he))}endFor(){return this._endBlockNode(v)}label(j){return this._leafNode(new l(j))}break(j){return this._leafNode(new c(j))}return(j){const q=new b;if(this._blockNode(q),this.code(j),q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(b)}try(j,q,Z){if(!q&&!Z)throw new Error('CodeGen: "try" without "catch" and "finally"');const ue=new T;if(this._blockNode(ue),this.code(j),q){const he=this.name("e");this._currNode=ue.catch=new A(he),q(he)}return Z&&(this._currNode=ue.finally=new I,this.code(Z)),this._endBlockNode(A,I)}throw(j){return this._leafNode(new f(j))}block(j,q){return this._blockStarts.push(this._nodes.length),j&&this.code(j).endBlock(q),this}endBlock(j){const q=this._blockStarts.pop();if(q===void 0)throw new Error("CodeGen: not in self-balancing block");const Z=this._nodes.length-q;if(Z<0||j!==void 0&&Z!==j)throw new Error(`CodeGen: wrong number of nodes: ${Z} vs ${j} expected`);return this._nodes.length=q,this}func(j,q=t.nil,Z,ue){return this._blockNode(new x(j,q,Z)),ue&&this.code(ue).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(j=1){for(;j-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(j){return this._currNode.nodes.push(j),this}_blockNode(j){this._currNode.nodes.push(j),this._nodes.push(j)}_endBlockNode(j,q){const Z=this._currNode;if(Z instanceof j||q&&Z instanceof q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${q?`${j.kind}/${q.kind}`:j.kind}"`)}_elseNode(j){const q=this._currNode;if(!(q instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=q.else=j,this}get _root(){return this._nodes[0]}get _currNode(){const j=this._nodes;return j[j.length-1]}set _currNode(j){const q=this._nodes;q[q.length-1]=j}}e.CodeGen=k;function R(L,j){for(const q in j)L[q]=(L[q]||0)+(j[q]||0);return L}function P(L,j){return j instanceof t._CodeOrName?R(L,j.names):L}function N(L,j,q){if(L instanceof t.Name)return Z(L);if(!ue(L))return L;return new t._Code(L._items.reduce((he,fe)=>(fe instanceof t.Name&&(fe=Z(fe)),fe instanceof t._Code?he.push(...fe._items):he.push(fe),he),[]));function Z(he){const fe=q[he.str];return fe===void 0||j[he.str]!==1?he:(delete j[he.str],fe)}function ue(he){return he instanceof t._Code&&he._items.some(fe=>fe instanceof t.Name&&j[fe.str]===1&&q[fe.str]!==void 0)}}function F(L,j){for(const q in j)L[q]=(L[q]||0)-(j[q]||0)}function B(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${Y(L)}`}e.not=B;const W=H(e.operators.AND);function V(...L){return L.reduce(W)}e.and=V;const G=H(e.operators.OR);function M(...L){return L.reduce(G)}e.or=M;function H(L){return(j,q)=>j===t.nil?q:q===t.nil?j:(0,t._)`${Y(j)} ${L} ${Y(q)}`}function Y(L){return L instanceof t.Name?L:(0,t._)`(${L})`}})(zn);var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.checkStrictMode=Tt.getErrorPath=Tt.Type=Tt.useFunc=Tt.setEvaluated=Tt.evaluatedPropsToName=Tt.mergeEvaluated=Tt.eachItem=Tt.unescapeJsonPointer=Tt.escapeJsonPointer=Tt.escapeFragment=Tt.unescapeFragment=Tt.schemaRefOrVal=Tt.schemaHasRulesButRef=Tt.schemaHasRules=Tt.checkUnknownRules=Tt.alwaysValidSchema=Tt.toHash=void 0;const ii=zn,_9t=yA;function b9t(e){const t={};for(const n of e)t[n]=!0;return t}Tt.toHash=b9t;function w9t(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(k6e(e,t),!R6e(t,e.self.RULES.all))}Tt.alwaysValidSchema=w9t;function k6e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||D6e(e,`unknown keyword: "${s}"`)}Tt.checkUnknownRules=k6e;function R6e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Tt.schemaHasRules=R6e;function E9t(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Tt.schemaHasRulesButRef=E9t;function x9t({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,ii._)`${n}`}return(0,ii._)`${e}${t}${(0,ii.getProperty)(r)}`}Tt.schemaRefOrVal=x9t;function S9t(e){return $6e(decodeURIComponent(e))}Tt.unescapeFragment=S9t;function T9t(e){return encodeURIComponent(mJ(e))}Tt.escapeFragment=T9t;function mJ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Tt.escapeJsonPointer=mJ;function $6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Tt.unescapeJsonPointer=$6e;function C9t(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Tt.eachItem=C9t;function Age({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof ii.Name?(s instanceof ii.Name?e(i,s,o):t(i,s,o),o):s instanceof ii.Name?(t(i,o,s),s):n(s,o);return a===ii.Name&&!(u instanceof ii.Name)?r(i,u):u}}Tt.mergeEvaluated={props:Age({mergeNames:(e,t,n)=>e.if((0,ii._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,ii._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,ii._)`${n} || {}`).code((0,ii._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,ii._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,ii._)`${n} || {}`),gJ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:N6e}),items:Age({mergeNames:(e,t,n)=>e.if((0,ii._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,ii._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,ii._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,ii._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function N6e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,ii._)`{}`);return t!==void 0&&gJ(e,n,t),n}Tt.evaluatedPropsToName=N6e;function gJ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,ii._)`${t}${(0,ii.getProperty)(r)}`,!0))}Tt.setEvaluated=gJ;const Ige={};function A9t(e,t){return e.scopeValue("func",{ref:t,code:Ige[t.code]||(Ige[t.code]=new _9t._Code(t.code))})}Tt.useFunc=A9t;var DH;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(DH||(Tt.Type=DH={}));function I9t(e,t,n){if(e instanceof ii.Name){const r=t===DH.Num;return n?r?(0,ii._)`"[" + ${e} + "]"`:(0,ii._)`"['" + ${e} + "']"`:r?(0,ii._)`"/" + ${e}`:(0,ii._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,ii.getProperty)(e).toString():"/"+mJ(e)}Tt.getErrorPath=I9t;function D6e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Tt.checkStrictMode=D6e;var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});const Zo=zn,O9t={data:new Zo.Name("data"),valCxt:new Zo.Name("valCxt"),instancePath:new Zo.Name("instancePath"),parentData:new Zo.Name("parentData"),parentDataProperty:new Zo.Name("parentDataProperty"),rootData:new Zo.Name("rootData"),dynamicAnchors:new Zo.Name("dynamicAnchors"),vErrors:new Zo.Name("vErrors"),errors:new Zo.Name("errors"),this:new Zo.Name("this"),self:new Zo.Name("self"),scope:new Zo.Name("scope"),json:new Zo.Name("json"),jsonPos:new Zo.Name("jsonPos"),jsonLen:new Zo.Name("jsonLen"),jsonPart:new Zo.Name("jsonPart")};Vh.default=O9t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=zn,n=Tt,r=Vh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:S,compositeRule:x,allErrors:b}=w,T=f(g,y,v);_??(x||b)?u(S,T):l(w,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:S,allErrors:x}=_,b=f(g,y,v);u(w,b),S||x||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:S}){if(w===void 0)throw new Error("ajv implementation error");const x=g.name("err");g.forRange("i",w,r.default.errors,b=>{g.const(x,(0,t._)`${r.default.vErrors}[${b}]`),g.if((0,t._)`${x}.instancePath === undefined`,()=>g.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(r.default.instancePath,S.errorPath))),g.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${S.errSchemaPath}/${y}`),S.opts.verbose&&(g.assign((0,t._)`${x}.schema`,v),g.assign((0,t._)`${x}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,S=[h(w,v),p(g,v)];return m(g,y,S),_.object(...S)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:S,schemaValue:x,it:b}=g,{opts:T,propertyName:A,topSchemaRef:I,schemaPath:k}=b;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&_.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&_.push([c.schema,x],[c.parentSchema,(0,t._)`${I}${k}`],[r.default.data,S]),A&&_.push([c.propertyName,A])}})(QI);Object.defineProperty(AE,"__esModule",{value:!0});AE.boolOrEmptySchema=AE.topBoolOrEmptySchema=void 0;const P9t=QI,k9t=zn,R9t=Vh,$9t={message:"boolean schema is false"};function N9t(e){const{gen:t,schema:n,validateName:r}=e;n===!1?M6e(e,!1):typeof n=="object"&&n.$async===!0?t.return(R9t.default.data):(t.assign((0,k9t._)`${r}.errors`,null),t.return(!0))}AE.topBoolOrEmptySchema=N9t;function D9t(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),M6e(e)):n.var(t,!0)}AE.boolOrEmptySchema=D9t;function M6e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,P9t.reportError)(i,$9t,void 0,t)}var $s={},N1={};Object.defineProperty(N1,"__esModule",{value:!0});N1.getRules=N1.isJSONType=void 0;const M9t=["string","number","integer","boolean","null","object","array"],L9t=new Set(M9t);function F9t(e){return typeof e=="string"&&L9t.has(e)}N1.isJSONType=F9t;function j9t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}N1.getRules=j9t;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.shouldUseRule=Qp.shouldUseGroup=Qp.schemaHasRulesForType=void 0;function B9t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&L6e(e,r)}Qp.schemaHasRulesForType=B9t;function L6e(e,t){return t.rules.some(n=>F6e(e,n))}Qp.shouldUseGroup=L6e;function F6e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Qp.shouldUseRule=F6e;Object.defineProperty($s,"__esModule",{value:!0});$s.reportTypeError=$s.checkDataTypes=$s.checkDataType=$s.coerceAndCheckDataType=$s.getJSONTypes=$s.getSchemaTypes=$s.DataType=void 0;const z9t=N1,U9t=Qp,V9t=QI,On=zn,j6e=Tt;var Aw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Aw||($s.DataType=Aw={}));function H9t(e){const t=B6e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}$s.getSchemaTypes=H9t;function B6e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(z9t.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}$s.getJSONTypes=B6e;function q9t(e,t){const{gen:n,data:r,opts:i}=e,s=W9t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,U9t.schemaHasRulesForType)(e,t[0]));if(o){const a=yJ(t,r,i.strictNumbers,Aw.Wrong);n.if(a,()=>{s.length?G9t(e,t,s):vJ(e)})}return o}$s.coerceAndCheckDataType=q9t;const z6e=new Set(["string","number","integer","boolean","null"]);function W9t(e,t){return t?e.filter(n=>z6e.has(n)||t==="array"&&n==="array"):[]}function G9t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,On._)`typeof ${i}`),a=r.let("coerced",(0,On._)`undefined`);s.coerceTypes==="array"&&r.if((0,On._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,On._)`${i}[0]`).assign(o,(0,On._)`typeof ${i}`).if(yJ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,On._)`${a} !== undefined`);for(const l of n)(z6e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),vJ(e),r.endIf(),r.if((0,On._)`${a} !== undefined`,()=>{r.assign(i,a),Y9t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,On._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,On._)`"" + ${i}`).elseIf((0,On._)`${i} === null`).assign(a,(0,On._)`""`);return;case"number":r.elseIf((0,On._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,On._)`+${i}`);return;case"integer":r.elseIf((0,On._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,On._)`+${i}`);return;case"boolean":r.elseIf((0,On._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,On._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,On._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,On._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,On._)`[${i}]`)}}}function Y9t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,On._)`${t} !== undefined`,()=>e.assign((0,On._)`${t}[${n}]`,r))}function MH(e,t,n,r=Aw.Correct){const i=r===Aw.Correct?On.operators.EQ:On.operators.NEQ;let s;switch(e){case"null":return(0,On._)`${t} ${i} null`;case"array":s=(0,On._)`Array.isArray(${t})`;break;case"object":s=(0,On._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,On._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,On._)`typeof ${t} ${i} ${e}`}return r===Aw.Correct?s:(0,On.not)(s);function o(a=On.nil){return(0,On.and)((0,On._)`typeof ${t} == "number"`,a,n?(0,On._)`isFinite(${t})`:On.nil)}}$s.checkDataType=MH;function yJ(e,t,n,r){if(e.length===1)return MH(e[0],t,n,r);let i;const s=(0,j6e.toHash)(e);if(s.array&&s.object){const o=(0,On._)`typeof ${t} != "object"`;i=s.null?o:(0,On._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=On.nil;s.number&&delete s.integer;for(const o in s)i=(0,On.and)(i,MH(o,t,n,r));return i}$s.checkDataTypes=yJ;const K9t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,On._)`{type: ${e}}`:(0,On._)`{type: ${t}}`};function vJ(e){const t=X9t(e);(0,V9t.reportError)(t,K9t)}$s.reportTypeError=vJ;function X9t(e){const{gen:t,data:n,schema:r}=e,i=(0,j6e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var L5={};Object.defineProperty(L5,"__esModule",{value:!0});L5.assignDefaults=void 0;const rb=zn,Q9t=Tt;function J9t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Oge(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Oge(e,s,i.default))}L5.assignDefaults=J9t;function Oge(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,rb._)`${s}${(0,rb.getProperty)(t)}`;if(i){(0,Q9t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,rb._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,rb._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,rb._)`${a} = ${(0,rb.stringify)(n)}`)}var Wd={},jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.validateUnion=jn.validateArray=jn.usePattern=jn.callValidateCode=jn.schemaProperties=jn.allSchemaProperties=jn.noPropertyInData=jn.propertyInData=jn.isOwnProperty=jn.hasPropFunc=jn.reportMissingProp=jn.checkMissingProp=jn.checkReportMissingProp=void 0;const _i=zn,_J=Tt,ag=Vh,Z9t=Tt;function eBt(e,t){const{gen:n,data:r,it:i}=e;n.if(wJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,_i._)`${t}`},!0),e.error()})}jn.checkReportMissingProp=eBt;function tBt({gen:e,data:t,it:{opts:n}},r,i){return(0,_i.or)(...r.map(s=>(0,_i.and)(wJ(e,t,s,n.ownProperties),(0,_i._)`${i} = ${s}`)))}jn.checkMissingProp=tBt;function nBt(e,t){e.setParams({missingProperty:t},!0),e.error()}jn.reportMissingProp=nBt;function U6e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,_i._)`Object.prototype.hasOwnProperty`})}jn.hasPropFunc=U6e;function bJ(e,t,n){return(0,_i._)`${U6e(e)}.call(${t}, ${n})`}jn.isOwnProperty=bJ;function rBt(e,t,n,r){const i=(0,_i._)`${t}${(0,_i.getProperty)(n)} !== undefined`;return r?(0,_i._)`${i} && ${bJ(e,t,n)}`:i}jn.propertyInData=rBt;function wJ(e,t,n,r){const i=(0,_i._)`${t}${(0,_i.getProperty)(n)} === undefined`;return r?(0,_i.or)(i,(0,_i.not)(bJ(e,t,n))):i}jn.noPropertyInData=wJ;function V6e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}jn.allSchemaProperties=V6e;function iBt(e,t){return V6e(t).filter(n=>!(0,_J.alwaysValidSchema)(e,t[n]))}jn.schemaProperties=iBt;function sBt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,_i._)`${e}, ${t}, ${r}${i}`:t,f=[[ag.default.instancePath,(0,_i.strConcat)(ag.default.instancePath,s)],[ag.default.parentData,o.parentData],[ag.default.parentDataProperty,o.parentDataProperty],[ag.default.rootData,ag.default.rootData]];o.opts.dynamicRef&&f.push([ag.default.dynamicAnchors,ag.default.dynamicAnchors]);const d=(0,_i._)`${c}, ${n.object(...f)}`;return u!==_i.nil?(0,_i._)`${a}.call(${u}, ${d})`:(0,_i._)`${a}(${d})`}jn.callValidateCode=sBt;const oBt=(0,_i._)`new RegExp`;function aBt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,_i._)`${i.code==="new RegExp"?oBt:(0,Z9t.useFunc)(e,i)}(${n}, ${r})`})}jn.usePattern=aBt;function uBt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,_i._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:_J.Type.Num},s),t.if((0,_i.not)(s),a)})}}jn.validateArray=uBt;function lBt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,_J.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,_i._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,_i.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}jn.validateUnion=lBt;Object.defineProperty(Wd,"__esModule",{value:!0});Wd.validateKeywordUsage=Wd.validSchemaType=Wd.funcKeywordCode=Wd.macroKeywordCode=void 0;const Da=zn,Tv=Vh,cBt=jn,fBt=QI;function dBt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=H6e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Da.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Wd.macroKeywordCode=dBt;function hBt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;mBt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=H6e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Pge(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Pge(e),g(()=>pBt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Da._)`await `),v=>r.assign(f,!1).if((0,Da._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Da._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Da._)`${c}.errors`;return r.assign(y,null),m(Da.nil),y}function m(y=t.async?(0,Da._)`await `:Da.nil){const v=u.opts.passContext?Tv.default.this:Tv.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Da._)`${y}${(0,cBt.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Da.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Wd.funcKeywordCode=hBt;function Pge(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Da._)`${r.parentData}[${r.parentDataProperty}]`))}function pBt(e,t){const{gen:n}=e;n.if((0,Da._)`Array.isArray(${t})`,()=>{n.assign(Tv.default.vErrors,(0,Da._)`${Tv.default.vErrors} === null ? ${t} : ${Tv.default.vErrors}.concat(${t})`).assign(Tv.default.errors,(0,Da._)`${Tv.default.vErrors}.length`),(0,fBt.extendErrors)(e)},()=>e.error())}function mBt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function H6e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Da.stringify)(n)})}function gBt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Wd.validSchemaType=gBt;function yBt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Wd.validateKeywordUsage=yBt;var g0={};Object.defineProperty(g0,"__esModule",{value:!0});g0.extendSubschemaMode=g0.extendSubschemaData=g0.getSubschema=void 0;const zd=zn,q6e=Tt;function vBt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,zd._)`${e.schemaPath}${(0,zd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,zd._)`${e.schemaPath}${(0,zd.getProperty)(t)}${(0,zd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,q6e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}g0.getSubschema=vBt;function _Bt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,zd._)`${t.data}${(0,zd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,zd.str)`${l}${(0,q6e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,zd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof zd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}g0.extendSubschemaData=_Bt;function bBt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}g0.extendSubschemaMode=bBt;var Io={},EJ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const LH=Qu(EJ);var W6e={exports:{}},Wg=W6e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};r$(t,r,i,e,"",e)};Wg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function r$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Wg.arrayKeywords)for(var d=0;d<f.length;d++)r$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Wg.propsKeywords){if(f&&typeof f=="object")for(var h in f)r$(e,t,n,f[h],i+"/"+c+"/"+wBt(h),s,i,c,r,h)}else(c in Wg.keywords||e.allKeys&&!(c in Wg.skipKeywords))&&r$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function wBt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var EBt=W6e.exports;Object.defineProperty(Io,"__esModule",{value:!0});Io.getSchemaRefs=Io.resolveUrl=Io.normalizeId=Io._getFullPath=Io.getFullPath=Io.inlineRef=void 0;const xBt=Tt,SBt=EJ,TBt=EBt,CBt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ABt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!FH(e):t?G6e(e)<=t:!1}Io.inlineRef=ABt;const IBt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function FH(e){for(const t in e){if(IBt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(FH)||typeof n=="object"&&FH(n))return!0}return!1}function G6e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!CBt.has(n)&&(typeof e[n]=="object"&&(0,xBt.eachItem)(e[n],r=>t+=G6e(r)),t===1/0))return 1/0}return t}function Y6e(e,t="",n){n!==!1&&(t=Iw(t));const r=e.parse(t);return K6e(e,r)}Io.getFullPath=Y6e;function K6e(e,t){return e.serialize(t).split("#")[0]+"#"}Io._getFullPath=K6e;const OBt=/#\/?$/;function Iw(e){return e?e.replace(OBt,""):""}Io.normalizeId=Iw;function PBt(e,t,n){return n=Iw(n),e.resolve(t,n)}Io.resolveUrl=PBt;const kBt=/^[a-z_][-a-z0-9._]*$/i;function RBt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Iw(e[n]||t),s={"":i},o=Y6e(r,i,!1),a={},u=new Set;return TBt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=Iw(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let S=this.refs[_];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(f,S.schema,_):_!==Iw(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!kBt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!SBt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Io.getSchemaRefs=RBt;Object.defineProperty(If,"__esModule",{value:!0});If.getData=If.KeywordCxt=If.validateFunctionCode=void 0;const X6e=AE,kge=$s,xJ=Qp,HM=$s,$Bt=L5,G2=Wd,DB=g0,Bt=zn,pn=Vh,NBt=Io,Jp=Tt,ZS=QI;function DBt(e){if(Z6e(e)&&(e4e(e),J6e(e))){FBt(e);return}Q6e(e,()=>(0,X6e.topBoolOrEmptySchema)(e))}If.validateFunctionCode=DBt;function Q6e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Bt._)`${pn.default.data}, ${pn.default.valCxt}`,r.$async,()=>{e.code((0,Bt._)`"use strict"; ${Rge(n,i)}`),LBt(e,i),e.code(s)}):e.func(t,(0,Bt._)`${pn.default.data}, ${MBt(i)}`,r.$async,()=>e.code(Rge(n,i)).code(s))}function MBt(e){return(0,Bt._)`{${pn.default.instancePath}="", ${pn.default.parentData}, ${pn.default.parentDataProperty}, ${pn.default.rootData}=${pn.default.data}${e.dynamicRef?(0,Bt._)`, ${pn.default.dynamicAnchors}={}`:Bt.nil}}={}`}function LBt(e,t){e.if(pn.default.valCxt,()=>{e.var(pn.default.instancePath,(0,Bt._)`${pn.default.valCxt}.${pn.default.instancePath}`),e.var(pn.default.parentData,(0,Bt._)`${pn.default.valCxt}.${pn.default.parentData}`),e.var(pn.default.parentDataProperty,(0,Bt._)`${pn.default.valCxt}.${pn.default.parentDataProperty}`),e.var(pn.default.rootData,(0,Bt._)`${pn.default.valCxt}.${pn.default.rootData}`),t.dynamicRef&&e.var(pn.default.dynamicAnchors,(0,Bt._)`${pn.default.valCxt}.${pn.default.dynamicAnchors}`)},()=>{e.var(pn.default.instancePath,(0,Bt._)`""`),e.var(pn.default.parentData,(0,Bt._)`undefined`),e.var(pn.default.parentDataProperty,(0,Bt._)`undefined`),e.var(pn.default.rootData,pn.default.data),t.dynamicRef&&e.var(pn.default.dynamicAnchors,(0,Bt._)`{}`)})}function FBt(e){const{schema:t,opts:n,gen:r}=e;Q6e(e,()=>{n.$comment&&t.$comment&&n4e(e),VBt(e),r.let(pn.default.vErrors,null),r.let(pn.default.errors,0),n.unevaluated&&jBt(e),t4e(e),WBt(e)})}function jBt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Bt._)`${n}.evaluated`),t.if((0,Bt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Bt._)`${e.evaluated}.props`,(0,Bt._)`undefined`)),t.if((0,Bt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Bt._)`${e.evaluated}.items`,(0,Bt._)`undefined`))}function Rge(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Bt._)`/*# sourceURL=${n} */`:Bt.nil}function BBt(e,t){if(Z6e(e)&&(e4e(e),J6e(e))){zBt(e,t);return}(0,X6e.boolOrEmptySchema)(e,t)}function J6e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function Z6e(e){return typeof e.schema!="boolean"}function zBt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&n4e(e),HBt(e),qBt(e);const s=r.const("_errs",pn.default.errors);t4e(e,s),r.var(t,(0,Bt._)`${s} === ${pn.default.errors}`)}function e4e(e){(0,Jp.checkUnknownRules)(e),UBt(e)}function t4e(e,t){if(e.opts.jtd)return $ge(e,[],!1,t);const n=(0,kge.getSchemaTypes)(e.schema),r=(0,kge.coerceAndCheckDataType)(e,n);$ge(e,n,!r,t)}function UBt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Jp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function VBt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Jp.checkStrictMode)(e,"default is ignored in the schema root")}function HBt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,NBt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function qBt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function n4e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Bt._)`${pn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Bt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Bt._)`${pn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function WBt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Bt._)`${pn.default.errors} === 0`,()=>t.return(pn.default.data),()=>t.throw((0,Bt._)`new ${i}(${pn.default.vErrors})`)):(t.assign((0,Bt._)`${r}.errors`,pn.default.vErrors),s.unevaluated&&GBt(e),t.return((0,Bt._)`${pn.default.errors} === 0`))}function GBt({gen:e,evaluated:t,props:n,items:r}){n instanceof Bt.Name&&e.assign((0,Bt._)`${t}.props`,n),r instanceof Bt.Name&&e.assign((0,Bt._)`${t}.items`,r)}function $ge(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Jp.schemaHasRulesButRef)(s,c))){i.block(()=>s4e(e,"$ref",c.all.$ref.definition));return}u.jtd||YBt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,xJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,HM.checkDataType)(d.type,o,u.strictNumbers)),Nge(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,HM.reportTypeError)(e)),i.endIf()):Nge(e,d),a||i.if((0,Bt._)`${pn.default.errors} === ${r||0}`))}}function Nge(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,$Bt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,xJ.shouldUseRule)(r,s)&&s4e(e,s.keyword,s.definition,t.type)})}function YBt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(KBt(e,t),e.opts.allowUnionTypes||XBt(e,t),QBt(e,e.dataTypes))}function KBt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{r4e(e.dataTypes,n)||SJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),ZBt(e,t)}}function XBt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&SJ(e,"use allowUnionTypes to allow union type keyword")}function QBt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,xJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>JBt(t,o))&&SJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function JBt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function r4e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ZBt(e,t){const n=[];for(const r of e.dataTypes)r4e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function SJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Jp.checkStrictMode)(e,t,e.opts.strictTypes)}class i4e{constructor(t,n,r){if((0,G2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Jp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",o4e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,G2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",pn.default.errors))}result(t,n,r){this.failResult((0,Bt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Bt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Bt._)`${n} !== undefined && (${(0,Bt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?ZS.reportExtraError:ZS.reportError)(this,this.def.error,n)}$dataError(){(0,ZS.reportError)(this,this.def.$dataError||ZS.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ZS.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Bt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Bt.nil,n=Bt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Bt.or)((0,Bt._)`${i} === undefined`,n)),t!==Bt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Bt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Bt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Bt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Bt._)`${(0,HM.checkDataTypes)(u,n,s.opts.strictNumbers,HM.DataType.Wrong)}`}return Bt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Bt._)`!${u}(${n})`}return Bt.nil}}subschema(t,n){const r=(0,DB.getSubschema)(this.it,t);(0,DB.extendSubschemaData)(r,this.it,t),(0,DB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return BBt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Jp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Jp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Bt.Name)),!0}}If.KeywordCxt=i4e;function s4e(e,t,n,r){const i=new i4e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,G2.funcKeywordCode)(i,n):"macro"in n?(0,G2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,G2.funcKeywordCode)(i,n)}const e7t=/^\/(?:[^~]|~0|~1)*$/,t7t=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function o4e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return pn.default.rootData;if(e[0]==="/"){if(!e7t.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=pn.default.rootData}else{const l=t7t.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Bt._)`${s}${(0,Bt.getProperty)((0,Jp.unescapeJsonPointer)(l))}`,o=(0,Bt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}If.getData=o4e;var JI={};Object.defineProperty(JI,"__esModule",{value:!0});class n7t extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}JI.default=n7t;var zx={};Object.defineProperty(zx,"__esModule",{value:!0});const MB=Io;class r7t extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,MB.resolveUrl)(t,n,r),this.missingSchema=(0,MB.normalizeId)((0,MB.getFullPath)(t,this.missingRef))}}zx.default=r7t;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.resolveSchema=Tu.getCompilingSchema=Tu.resolveRef=Tu.compileSchema=Tu.SchemaEnv=void 0;const Gc=zn,i7t=JI,Wy=Vh,pf=Io,Dge=Tt,s7t=If;class F5{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,pf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Tu.SchemaEnv=F5;function TJ(e){const t=a4e.call(this,e);if(t)return t;const n=(0,pf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Gc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:i7t.default,code:(0,Gc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Wy.default.data,parentData:Wy.default.parentData,parentDataProperty:Wy.default.parentDataProperty,dataNames:[Wy.default.data],dataPathArr:[Gc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Gc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Gc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Gc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,s7t.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Wy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Wy.default.self}`,`${Wy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Gc.Name?void 0:p,items:m instanceof Gc.Name?void 0:m,dynamicProps:p instanceof Gc.Name,dynamicItems:m instanceof Gc.Name},h.source&&(h.source.evaluated=(0,Gc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Tu.compileSchema=TJ;function o7t(e,t,n){var r;n=(0,pf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=l7t.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new F5({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=a7t.call(this,s)}Tu.resolveRef=o7t;function a7t(e){return(0,pf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:TJ.call(this,e)}function a4e(e){for(const t of this._compilations)if(u7t(t,e))return t}Tu.getCompilingSchema=a4e;function u7t(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function l7t(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||j5.call(this,e,t)}function j5(e,t){const n=this.opts.uriResolver.parse(t),r=(0,pf._getFullPath)(this.opts.uriResolver,n);let i=(0,pf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return LB.call(this,n,e);const s=(0,pf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=j5.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:LB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||TJ.call(this,o),s===(0,pf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,pf.resolveUrl)(this.opts.uriResolver,i,l)),new F5({schema:a,schemaId:u,root:e,baseId:i})}return LB.call(this,n,o)}}Tu.resolveSchema=j5;const c7t=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function LB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Dge.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!c7t.has(a)&&l&&(t=(0,pf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Dge.schemaHasRulesButRef)(n,this.RULES)){const a=(0,pf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=j5.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new F5({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const f7t="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",d7t="Meta-schema for $data reference (JSON AnySchema extension proposal)",h7t="object",p7t=["$data"],m7t={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},g7t=!1,y7t={$id:f7t,description:d7t,type:h7t,required:p7t,properties:m7t,additionalProperties:g7t};var CJ={},jH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ua,function(n){function r(){for(var ae=arguments.length,ne=Array(ae),le=0;le<ae;le++)ne[le]=arguments[le];if(ne.length>1){ne[0]=ne[0].slice(0,-1);for(var Ee=ne.length-1,xe=1;xe<Ee;++xe)ne[xe]=ne[xe].slice(1,-1);return ne[Ee]=ne[Ee].slice(1),ne.join("")}else return ne[0]}function i(ae){return"(?:"+ae+")"}function s(ae){return ae===void 0?"undefined":ae===null?"null":Object.prototype.toString.call(ae).split(" ").pop().split("]").shift().toLowerCase()}function o(ae){return ae.toUpperCase()}function a(ae){return ae!=null?ae instanceof Array?ae:typeof ae.length!="number"||ae.split||ae.setInterval||ae.call?[ae]:Array.prototype.slice.call(ae):[]}function u(ae,ne){var le=ae;if(ne)for(var Ee in ne)le[Ee]=ne[Ee];return le}function l(ae){var ne="[A-Za-z]",le="[0-9]",Ee=r(le,"[A-Fa-f]"),xe=i(i("%[EFef]"+Ee+"%"+Ee+Ee+"%"+Ee+Ee)+"|"+i("%[89A-Fa-f]"+Ee+"%"+Ee+Ee)+"|"+i("%"+Ee+Ee)),St="[\\:\\/\\?\\#\\[\\]\\@]",It="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",je=r(St,It),Rt=ae?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",en=ae?"[\\uE000-\\uF8FF]":"[]",ft=r(ne,le,"[\\-\\.\\_\\~]",Rt);i(ne+r(ne,le,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(ft,It,"[\\:]"))+"*");var kn=i(i("25[0-5]")+"|"+i("2[0-4]"+le)+"|"+i("1"+le+le)+"|"+i("0?[1-9]"+le)+"|0?0?"+le),In=i(kn+"\\."+kn+"\\."+kn+"\\."+kn),Gt=i(Ee+"{1,4}"),Xn=i(i(Gt+"\\:"+Gt)+"|"+In),Rr=i(i(Gt+"\\:")+"{6}"+Xn),Qt=i("\\:\\:"+i(Gt+"\\:")+"{5}"+Xn),ui=i(i(Gt)+"?\\:\\:"+i(Gt+"\\:")+"{4}"+Xn),Li=i(i(i(Gt+"\\:")+"{0,1}"+Gt)+"?\\:\\:"+i(Gt+"\\:")+"{3}"+Xn),Hr=i(i(i(Gt+"\\:")+"{0,2}"+Gt)+"?\\:\\:"+i(Gt+"\\:")+"{2}"+Xn),Is=i(i(i(Gt+"\\:")+"{0,3}"+Gt)+"?\\:\\:"+Gt+"\\:"+Xn),Ti=i(i(i(Gt+"\\:")+"{0,4}"+Gt)+"?\\:\\:"+Xn),Ci=i(i(i(Gt+"\\:")+"{0,5}"+Gt)+"?\\:\\:"+Gt),Ys=i(i(i(Gt+"\\:")+"{0,6}"+Gt)+"?\\:\\:"),ps=i([Rr,Qt,ui,Li,Hr,Is,Ti,Ci,Ys].join("|")),xt=i(i(ft+"|"+xe)+"+");i("[vV]"+Ee+"+\\."+r(ft,It,"[\\:]")+"+"),i(i(xe+"|"+r(ft,It))+"*");var Rn=i(xe+"|"+r(ft,It,"[\\:\\@]"));return i(i(xe+"|"+r(ft,It,"[\\@]"))+"+"),i(i(Rn+"|"+r("[\\/\\?]",en))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ne,le,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",ft,It),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",ft,It),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",ft,It),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",ft,It),"g"),NOT_QUERY:new RegExp(r("[^\\%]",ft,It,"[\\:\\@\\/\\?]",en),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",ft,It,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",ft,It),"g"),UNRESERVED:new RegExp(ft,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",ft,je),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+In+")$"),IPV6ADDRESS:new RegExp("^\\[?("+ps+")"+i(i("\\%25|\\%(?!"+Ee+"{2})")+"("+xt+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ae(ne,le){var Ee=[],xe=!0,St=!1,It=void 0;try{for(var je=ne[Symbol.iterator](),Rt;!(xe=(Rt=je.next()).done)&&(Ee.push(Rt.value),!(le&&Ee.length===le));xe=!0);}catch(en){St=!0,It=en}finally{try{!xe&&je.return&&je.return()}finally{if(St)throw It}}return Ee}return function(ne,le){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return ae(ne,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ae){if(Array.isArray(ae)){for(var ne=0,le=Array(ae.length);ne<ae.length;ne++)le[ne]=ae[ne];return le}else return Array.from(ae)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,S=128,x="-",b=/^xn--/,T=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,R=Math.floor,P=String.fromCharCode;function N(ae){throw new RangeError(I[ae])}function F(ae,ne){for(var le=[],Ee=ae.length;Ee--;)le[Ee]=ne(ae[Ee]);return le}function B(ae,ne){var le=ae.split("@"),Ee="";le.length>1&&(Ee=le[0]+"@",ae=le[1]),ae=ae.replace(A,".");var xe=ae.split("."),St=F(xe,ne).join(".");return Ee+St}function W(ae){for(var ne=[],le=0,Ee=ae.length;le<Ee;){var xe=ae.charCodeAt(le++);if(xe>=55296&&xe<=56319&&le<Ee){var St=ae.charCodeAt(le++);(St&64512)==56320?ne.push(((xe&1023)<<10)+(St&1023)+65536):(ne.push(xe),le--)}else ne.push(xe)}return ne}var V=function(ne){return String.fromCodePoint.apply(String,h(ne))},G=function(ne){return ne-48<10?ne-22:ne-65<26?ne-65:ne-97<26?ne-97:m},M=function(ne,le){return ne+22+75*(ne<26)-((le!=0)<<5)},H=function(ne,le,Ee){var xe=0;for(ne=Ee?R(ne/_):ne>>1,ne+=R(ne/le);ne>k*y>>1;xe+=m)ne=R(ne/k);return R(xe+(k+1)*ne/(ne+v))},Y=function(ne){var le=[],Ee=ne.length,xe=0,St=S,It=w,je=ne.lastIndexOf(x);je<0&&(je=0);for(var Rt=0;Rt<je;++Rt)ne.charCodeAt(Rt)>=128&&N("not-basic"),le.push(ne.charCodeAt(Rt));for(var en=je>0?je+1:0;en<Ee;){for(var ft=xe,kn=1,In=m;;In+=m){en>=Ee&&N("invalid-input");var Gt=G(ne.charCodeAt(en++));(Gt>=m||Gt>R((p-xe)/kn))&&N("overflow"),xe+=Gt*kn;var Xn=In<=It?g:In>=It+y?y:In-It;if(Gt<Xn)break;var Rr=m-Xn;kn>R(p/Rr)&&N("overflow"),kn*=Rr}var Qt=le.length+1;It=H(xe-ft,Qt,ft==0),R(xe/Qt)>p-St&&N("overflow"),St+=R(xe/Qt),xe%=Qt,le.splice(xe++,0,St)}return String.fromCodePoint.apply(String,le)},L=function(ne){var le=[];ne=W(ne);var Ee=ne.length,xe=S,St=0,It=w,je=!0,Rt=!1,en=void 0;try{for(var ft=ne[Symbol.iterator](),kn;!(je=(kn=ft.next()).done);je=!0){var In=kn.value;In<128&&le.push(P(In))}}catch(Pe){Rt=!0,en=Pe}finally{try{!je&&ft.return&&ft.return()}finally{if(Rt)throw en}}var Gt=le.length,Xn=Gt;for(Gt&&le.push(x);Xn<Ee;){var Rr=p,Qt=!0,ui=!1,Li=void 0;try{for(var Hr=ne[Symbol.iterator](),Is;!(Qt=(Is=Hr.next()).done);Qt=!0){var Ti=Is.value;Ti>=xe&&Ti<Rr&&(Rr=Ti)}}catch(Pe){ui=!0,Li=Pe}finally{try{!Qt&&Hr.return&&Hr.return()}finally{if(ui)throw Li}}var Ci=Xn+1;Rr-xe>R((p-St)/Ci)&&N("overflow"),St+=(Rr-xe)*Ci,xe=Rr;var Ys=!0,ps=!1,xt=void 0;try{for(var Rn=ne[Symbol.iterator](),ms;!(Ys=(ms=Rn.next()).done);Ys=!0){var K=ms.value;if(K<xe&&++St>p&&N("overflow"),K==xe){for(var oe=St,ee=m;;ee+=m){var de=ee<=It?g:ee>=It+y?y:ee-It;if(oe<de)break;var ye=oe-de,pe=m-de;le.push(P(M(de+ye%pe,0))),oe=R(ye/pe)}le.push(P(M(oe,0))),It=H(St,Ci,Xn==Gt),St=0,++Xn}}}catch(Pe){ps=!0,xt=Pe}finally{try{!Ys&&Rn.return&&Rn.return()}finally{if(ps)throw xt}}++St,++xe}return le.join("")},j=function(ne){return B(ne,function(le){return b.test(le)?Y(le.slice(4).toLowerCase()):le})},q=function(ne){return B(ne,function(le){return T.test(le)?"xn--"+L(le):le})},Z={version:"2.1.0",ucs2:{decode:W,encode:V},decode:Y,encode:L,toASCII:q,toUnicode:j},ue={};function he(ae){var ne=ae.charCodeAt(0),le=void 0;return ne<16?le="%0"+ne.toString(16).toUpperCase():ne<128?le="%"+ne.toString(16).toUpperCase():ne<2048?le="%"+(ne>>6|192).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase():le="%"+(ne>>12|224).toString(16).toUpperCase()+"%"+(ne>>6&63|128).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase(),le}function fe(ae){for(var ne="",le=0,Ee=ae.length;le<Ee;){var xe=parseInt(ae.substr(le+1,2),16);if(xe<128)ne+=String.fromCharCode(xe),le+=3;else if(xe>=194&&xe<224){if(Ee-le>=6){var St=parseInt(ae.substr(le+4,2),16);ne+=String.fromCharCode((xe&31)<<6|St&63)}else ne+=ae.substr(le,6);le+=6}else if(xe>=224){if(Ee-le>=9){var It=parseInt(ae.substr(le+4,2),16),je=parseInt(ae.substr(le+7,2),16);ne+=String.fromCharCode((xe&15)<<12|(It&63)<<6|je&63)}else ne+=ae.substr(le,9);le+=9}else ne+=ae.substr(le,3),le+=3}return ne}function me(ae,ne){function le(Ee){var xe=fe(Ee);return xe.match(ne.UNRESERVED)?xe:Ee}return ae.scheme&&(ae.scheme=String(ae.scheme).replace(ne.PCT_ENCODED,le).toLowerCase().replace(ne.NOT_SCHEME,"")),ae.userinfo!==void 0&&(ae.userinfo=String(ae.userinfo).replace(ne.PCT_ENCODED,le).replace(ne.NOT_USERINFO,he).replace(ne.PCT_ENCODED,o)),ae.host!==void 0&&(ae.host=String(ae.host).replace(ne.PCT_ENCODED,le).toLowerCase().replace(ne.NOT_HOST,he).replace(ne.PCT_ENCODED,o)),ae.path!==void 0&&(ae.path=String(ae.path).replace(ne.PCT_ENCODED,le).replace(ae.scheme?ne.NOT_PATH:ne.NOT_PATH_NOSCHEME,he).replace(ne.PCT_ENCODED,o)),ae.query!==void 0&&(ae.query=String(ae.query).replace(ne.PCT_ENCODED,le).replace(ne.NOT_QUERY,he).replace(ne.PCT_ENCODED,o)),ae.fragment!==void 0&&(ae.fragment=String(ae.fragment).replace(ne.PCT_ENCODED,le).replace(ne.NOT_FRAGMENT,he).replace(ne.PCT_ENCODED,o)),ae}function _e(ae){return ae.replace(/^0*(.*)/,"$1")||"0"}function ge(ae,ne){var le=ae.match(ne.IPV4ADDRESS)||[],Ee=d(le,2),xe=Ee[1];return xe?xe.split(".").map(_e).join("."):ae}function Be(ae,ne){var le=ae.match(ne.IPV6ADDRESS)||[],Ee=d(le,3),xe=Ee[1],St=Ee[2];if(xe){for(var It=xe.toLowerCase().split("::").reverse(),je=d(It,2),Rt=je[0],en=je[1],ft=en?en.split(":").map(_e):[],kn=Rt.split(":").map(_e),In=ne.IPV4ADDRESS.test(kn[kn.length-1]),Gt=In?7:8,Xn=kn.length-Gt,Rr=Array(Gt),Qt=0;Qt<Gt;++Qt)Rr[Qt]=ft[Qt]||kn[Xn+Qt]||"";In&&(Rr[Gt-1]=ge(Rr[Gt-1],ne));var ui=Rr.reduce(function(Ci,Ys,ps){if(!Ys||Ys==="0"){var xt=Ci[Ci.length-1];xt&&xt.index+xt.length===ps?xt.length++:Ci.push({index:ps,length:1})}return Ci},[]),Li=ui.sort(function(Ci,Ys){return Ys.length-Ci.length})[0],Hr=void 0;if(Li&&Li.length>1){var Is=Rr.slice(0,Li.index),Ti=Rr.slice(Li.index+Li.length);Hr=Is.join(":")+"::"+Ti.join(":")}else Hr=Rr.join(":");return St&&(Hr+="%"+St),Hr}else return ae}var Me=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ut="".match(/(){0}/)[1]===void 0;function Oe(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le={},Ee=ne.iri!==!1?f:c;ne.reference==="suffix"&&(ae=(ne.scheme?ne.scheme+":":"")+"//"+ae);var xe=ae.match(Me);if(xe){ut?(le.scheme=xe[1],le.userinfo=xe[3],le.host=xe[4],le.port=parseInt(xe[5],10),le.path=xe[6]||"",le.query=xe[7],le.fragment=xe[8],isNaN(le.port)&&(le.port=xe[5])):(le.scheme=xe[1]||void 0,le.userinfo=ae.indexOf("@")!==-1?xe[3]:void 0,le.host=ae.indexOf("//")!==-1?xe[4]:void 0,le.port=parseInt(xe[5],10),le.path=xe[6]||"",le.query=ae.indexOf("?")!==-1?xe[7]:void 0,le.fragment=ae.indexOf("#")!==-1?xe[8]:void 0,isNaN(le.port)&&(le.port=ae.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),le.host&&(le.host=Be(ge(le.host,Ee),Ee)),le.scheme===void 0&&le.userinfo===void 0&&le.host===void 0&&le.port===void 0&&!le.path&&le.query===void 0?le.reference="same-document":le.scheme===void 0?le.reference="relative":le.fragment===void 0?le.reference="absolute":le.reference="uri",ne.reference&&ne.reference!=="suffix"&&ne.reference!==le.reference&&(le.error=le.error||"URI is not a "+ne.reference+" reference.");var St=ue[(ne.scheme||le.scheme||"").toLowerCase()];if(!ne.unicodeSupport&&(!St||!St.unicodeSupport)){if(le.host&&(ne.domainHost||St&&St.domainHost))try{le.host=Z.toASCII(le.host.replace(Ee.PCT_ENCODED,fe).toLowerCase())}catch(It){le.error=le.error||"Host's domain name can not be converted to ASCII via punycode: "+It}me(le,c)}else me(le,Ee);St&&St.parse&&St.parse(le,ne)}else le.error=le.error||"URI can not be parsed.";return le}function Re(ae,ne){var le=ne.iri!==!1?f:c,Ee=[];return ae.userinfo!==void 0&&(Ee.push(ae.userinfo),Ee.push("@")),ae.host!==void 0&&Ee.push(Be(ge(String(ae.host),le),le).replace(le.IPV6ADDRESS,function(xe,St,It){return"["+St+(It?"%25"+It:"")+"]"})),(typeof ae.port=="number"||typeof ae.port=="string")&&(Ee.push(":"),Ee.push(String(ae.port))),Ee.length?Ee.join(""):void 0}var Ye=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Ft=/^\/\.\.(\/|$)/,Je=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(ae){for(var ne=[];ae.length;)if(ae.match(Ye))ae=ae.replace(Ye,"");else if(ae.match(Ut))ae=ae.replace(Ut,"/");else if(ae.match(Ft))ae=ae.replace(Ft,"/"),ne.pop();else if(ae==="."||ae==="..")ae="";else{var le=ae.match(Je);if(le){var Ee=le[0];ae=ae.slice(Ee.length),ne.push(Ee)}else throw new Error("Unexpected dot segment condition")}return ne.join("")}function gt(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=ne.iri?f:c,Ee=[],xe=ue[(ne.scheme||ae.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(ae,ne),ae.host&&!le.IPV6ADDRESS.test(ae.host)){if(ne.domainHost||xe&&xe.domainHost)try{ae.host=ne.iri?Z.toUnicode(ae.host):Z.toASCII(ae.host.replace(le.PCT_ENCODED,fe).toLowerCase())}catch(je){ae.error=ae.error||"Host's domain name can not be converted to "+(ne.iri?"Unicode":"ASCII")+" via punycode: "+je}}me(ae,le),ne.reference!=="suffix"&&ae.scheme&&(Ee.push(ae.scheme),Ee.push(":"));var St=Re(ae,ne);if(St!==void 0&&(ne.reference!=="suffix"&&Ee.push("//"),Ee.push(St),ae.path&&ae.path.charAt(0)!=="/"&&Ee.push("/")),ae.path!==void 0){var It=ae.path;!ne.absolutePath&&(!xe||!xe.absolutePath)&&(It=Ge(It)),St===void 0&&(It=It.replace(/^\/\//,"/%2F")),Ee.push(It)}return ae.query!==void 0&&(Ee.push("?"),Ee.push(ae.query)),ae.fragment!==void 0&&(Ee.push("#"),Ee.push(ae.fragment)),Ee.join("")}function ot(ae,ne){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=arguments[3],xe={};return Ee||(ae=Oe(gt(ae,le),le),ne=Oe(gt(ne,le),le)),le=le||{},!le.tolerant&&ne.scheme?(xe.scheme=ne.scheme,xe.userinfo=ne.userinfo,xe.host=ne.host,xe.port=ne.port,xe.path=Ge(ne.path||""),xe.query=ne.query):(ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0?(xe.userinfo=ne.userinfo,xe.host=ne.host,xe.port=ne.port,xe.path=Ge(ne.path||""),xe.query=ne.query):(ne.path?(ne.path.charAt(0)==="/"?xe.path=Ge(ne.path):((ae.userinfo!==void 0||ae.host!==void 0||ae.port!==void 0)&&!ae.path?xe.path="/"+ne.path:ae.path?xe.path=ae.path.slice(0,ae.path.lastIndexOf("/")+1)+ne.path:xe.path=ne.path,xe.path=Ge(xe.path)),xe.query=ne.query):(xe.path=ae.path,ne.query!==void 0?xe.query=ne.query:xe.query=ae.query),xe.userinfo=ae.userinfo,xe.host=ae.host,xe.port=ae.port),xe.scheme=ae.scheme),xe.fragment=ne.fragment,xe}function at(ae,ne,le){var Ee=u({scheme:"null"},le);return gt(ot(Oe(ae,Ee),Oe(ne,Ee),Ee,!0),Ee)}function Et(ae,ne){return typeof ae=="string"?ae=gt(Oe(ae,ne),ne):s(ae)==="object"&&(ae=Oe(gt(ae,ne),ne)),ae}function ve(ae,ne,le){return typeof ae=="string"?ae=gt(Oe(ae,le),le):s(ae)==="object"&&(ae=gt(ae,le)),typeof ne=="string"?ne=gt(Oe(ne,le),le):s(ne)==="object"&&(ne=gt(ne,le)),ae===ne}function Se(ae,ne){return ae&&ae.toString().replace(!ne||!ne.iri?c.ESCAPE:f.ESCAPE,he)}function Fe(ae,ne){return ae&&ae.toString().replace(!ne||!ne.iri?c.PCT_ENCODED:f.PCT_ENCODED,fe)}var Ue={scheme:"http",domainHost:!0,parse:function(ne,le){return ne.host||(ne.error=ne.error||"HTTP URIs must have a host."),ne},serialize:function(ne,le){var Ee=String(ne.scheme).toLowerCase()==="https";return(ne.port===(Ee?443:80)||ne.port==="")&&(ne.port=void 0),ne.path||(ne.path="/"),ne}},ht={scheme:"https",domainHost:Ue.domainHost,parse:Ue.parse,serialize:Ue.serialize};function cn(ae){return typeof ae.secure=="boolean"?ae.secure:String(ae.scheme).toLowerCase()==="wss"}var Ve={scheme:"ws",domainHost:!0,parse:function(ne,le){var Ee=ne;return Ee.secure=cn(Ee),Ee.resourceName=(Ee.path||"/")+(Ee.query?"?"+Ee.query:""),Ee.path=void 0,Ee.query=void 0,Ee},serialize:function(ne,le){if((ne.port===(cn(ne)?443:80)||ne.port==="")&&(ne.port=void 0),typeof ne.secure=="boolean"&&(ne.scheme=ne.secure?"wss":"ws",ne.secure=void 0),ne.resourceName){var Ee=ne.resourceName.split("?"),xe=d(Ee,2),St=xe[0],It=xe[1];ne.path=St&&St!=="/"?St:void 0,ne.query=It,ne.resourceName=void 0}return ne.fragment=void 0,ne}},wt={scheme:"wss",domainHost:Ve.domainHost,parse:Ve.parse,serialize:Ve.serialize},bt={},bn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Lt="[0-9A-Fa-f]",Ar=i(i("%[EFef]"+Lt+"%"+Lt+Lt+"%"+Lt+Lt)+"|"+i("%[89A-Fa-f]"+Lt+"%"+Lt+Lt)+"|"+i("%"+Lt+Lt)),Fn="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ar="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",oi=r(ar,'[\\"\\\\]'),yo="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",br=new RegExp(bn,"g"),nr=new RegExp(Ar,"g"),Uo=new RegExp(r("[^]",Fn,"[\\.]",'[\\"]',oi),"g"),Vr=new RegExp(r("[^]",bn,yo),"g"),Zr=Vr;function Pt(ae){var ne=fe(ae);return ne.match(br)?ne:ae}var Xt={scheme:"mailto",parse:function(ne,le){var Ee=ne,xe=Ee.to=Ee.path?Ee.path.split(","):[];if(Ee.path=void 0,Ee.query){for(var St=!1,It={},je=Ee.query.split("&"),Rt=0,en=je.length;Rt<en;++Rt){var ft=je[Rt].split("=");switch(ft[0]){case"to":for(var kn=ft[1].split(","),In=0,Gt=kn.length;In<Gt;++In)xe.push(kn[In]);break;case"subject":Ee.subject=Fe(ft[1],le);break;case"body":Ee.body=Fe(ft[1],le);break;default:St=!0,It[Fe(ft[0],le)]=Fe(ft[1],le);break}}St&&(Ee.headers=It)}Ee.query=void 0;for(var Xn=0,Rr=xe.length;Xn<Rr;++Xn){var Qt=xe[Xn].split("@");if(Qt[0]=Fe(Qt[0]),le.unicodeSupport)Qt[1]=Fe(Qt[1],le).toLowerCase();else try{Qt[1]=Z.toASCII(Fe(Qt[1],le).toLowerCase())}catch(ui){Ee.error=Ee.error||"Email address's domain name can not be converted to ASCII via punycode: "+ui}xe[Xn]=Qt.join("@")}return Ee},serialize:function(ne,le){var Ee=ne,xe=a(ne.to);if(xe){for(var St=0,It=xe.length;St<It;++St){var je=String(xe[St]),Rt=je.lastIndexOf("@"),en=je.slice(0,Rt).replace(nr,Pt).replace(nr,o).replace(Uo,he),ft=je.slice(Rt+1);try{ft=le.iri?Z.toUnicode(ft):Z.toASCII(Fe(ft,le).toLowerCase())}catch(Xn){Ee.error=Ee.error||"Email address's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+Xn}xe[St]=en+"@"+ft}Ee.path=xe.join(",")}var kn=ne.headers=ne.headers||{};ne.subject&&(kn.subject=ne.subject),ne.body&&(kn.body=ne.body);var In=[];for(var Gt in kn)kn[Gt]!==bt[Gt]&&In.push(Gt.replace(nr,Pt).replace(nr,o).replace(Vr,he)+"="+kn[Gt].replace(nr,Pt).replace(nr,o).replace(Zr,he));return In.length&&(Ee.query=In.join("&")),Ee}},rr=/^([^\:]+)\:(.*)/,Gs={scheme:"urn",parse:function(ne,le){var Ee=ne.path&&ne.path.match(rr),xe=ne;if(Ee){var St=le.scheme||xe.scheme||"urn",It=Ee[1].toLowerCase(),je=Ee[2],Rt=St+":"+(le.nid||It),en=ue[Rt];xe.nid=It,xe.nss=je,xe.path=void 0,en&&(xe=en.parse(xe,le))}else xe.error=xe.error||"URN can not be parsed.";return xe},serialize:function(ne,le){var Ee=le.scheme||ne.scheme||"urn",xe=ne.nid,St=Ee+":"+(le.nid||xe),It=ue[St];It&&(ne=It.serialize(ne,le));var je=ne,Rt=ne.nss;return je.path=(xe||le.nid)+":"+Rt,je}},mi=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ai={scheme:"urn:uuid",parse:function(ne,le){var Ee=ne;return Ee.uuid=Ee.nss,Ee.nss=void 0,!le.tolerant&&(!Ee.uuid||!Ee.uuid.match(mi))&&(Ee.error=Ee.error||"UUID is not valid."),Ee},serialize:function(ne,le){var Ee=ne;return Ee.nss=(ne.uuid||"").toLowerCase(),Ee}};ue[Ue.scheme]=Ue,ue[ht.scheme]=ht,ue[Ve.scheme]=Ve,ue[wt.scheme]=wt,ue[Xt.scheme]=Xt,ue[Gs.scheme]=Gs,ue[ai.scheme]=ai,n.SCHEMES=ue,n.pctEncChar=he,n.pctDecChars=fe,n.parse=Oe,n.removeDotSegments=Ge,n.serialize=gt,n.resolveComponents=ot,n.resolve=at,n.normalize=Et,n.equal=ve,n.escapeComponent=Se,n.unescapeComponent=Fe,Object.defineProperty(n,"__esModule",{value:!0})})})(jH,jH.exports);var v7t=jH.exports;Object.defineProperty(CJ,"__esModule",{value:!0});const u4e=v7t;u4e.code='require("ajv/dist/runtime/uri").default';CJ.default=u4e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=If;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=zn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=JI,i=zx,s=N1,o=Tu,a=zn,u=Io,l=$s,c=Tt,f=y7t,d=CJ,h=(M,H)=>new RegExp(M,H);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(M){var H,Y,L,j,q,Z,ue,he,fe,me,_e,ge,Be,Me,ut,Oe,Re,Ye,Ut,Ft,Je,Ge,gt,ot,at;const Et=M.strict,ve=(H=M.code)===null||H===void 0?void 0:H.optimize,Se=ve===!0||ve===void 0?1:ve||0,Fe=(L=(Y=M.code)===null||Y===void 0?void 0:Y.regExp)!==null&&L!==void 0?L:h,Ue=(j=M.uriResolver)!==null&&j!==void 0?j:d.default;return{strictSchema:(Z=(q=M.strictSchema)!==null&&q!==void 0?q:Et)!==null&&Z!==void 0?Z:!0,strictNumbers:(he=(ue=M.strictNumbers)!==null&&ue!==void 0?ue:Et)!==null&&he!==void 0?he:!0,strictTypes:(me=(fe=M.strictTypes)!==null&&fe!==void 0?fe:Et)!==null&&me!==void 0?me:"log",strictTuples:(ge=(_e=M.strictTuples)!==null&&_e!==void 0?_e:Et)!==null&&ge!==void 0?ge:"log",strictRequired:(Me=(Be=M.strictRequired)!==null&&Be!==void 0?Be:Et)!==null&&Me!==void 0?Me:!1,code:M.code?{...M.code,optimize:Se,regExp:Fe}:{optimize:Se,regExp:Fe},loopRequired:(ut=M.loopRequired)!==null&&ut!==void 0?ut:v,loopEnum:(Oe=M.loopEnum)!==null&&Oe!==void 0?Oe:v,meta:(Re=M.meta)!==null&&Re!==void 0?Re:!0,messages:(Ye=M.messages)!==null&&Ye!==void 0?Ye:!0,inlineRefs:(Ut=M.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Ft=M.schemaId)!==null&&Ft!==void 0?Ft:"$id",addUsedSchema:(Je=M.addUsedSchema)!==null&&Je!==void 0?Je:!0,validateSchema:(Ge=M.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(gt=M.validateFormats)!==null&&gt!==void 0?gt:!0,unicodeRegExp:(ot=M.unicodeRegExp)!==null&&ot!==void 0?ot:!0,int32range:(at=M.int32range)!==null&&at!==void 0?at:!0,uriResolver:Ue}}class w{constructor(H={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,H=this.opts={...H,..._(H)};const{es5:Y,lines:L}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:Y,lines:L}),this.logger=R(H.logger);const j=H.validateFormats;H.validateFormats=!1,this.RULES=(0,s.getRules)(),S.call(this,g,H,"NOT SUPPORTED"),S.call(this,y,H,"DEPRECATED","warn"),this._metaOpts=I.call(this),H.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),H.keywords&&A.call(this,H.keywords),typeof H.meta=="object"&&this.addMetaSchema(H.meta),b.call(this),H.validateFormats=j}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:H,meta:Y,schemaId:L}=this.opts;let j=f;L==="id"&&(j={...f},j.id=j.$id,delete j.$id),Y&&H&&this.addMetaSchema(j,j[L],!1)}defaultMeta(){const{meta:H,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof H=="object"?H[Y]||H:void 0}validate(H,Y){let L;if(typeof H=="string"){if(L=this.getSchema(H),!L)throw new Error(`no schema with key or ref "${H}"`)}else L=this.compile(H);const j=L(Y);return"$async"in L||(this.errors=L.errors),j}compile(H,Y){const L=this._addSchema(H,Y);return L.validate||this._compileSchemaEnv(L)}compileAsync(H,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return j.call(this,H,Y);async function j(me,_e){await q.call(this,me.$schema);const ge=this._addSchema(me,_e);return ge.validate||Z.call(this,ge)}async function q(me){me&&!this.getSchema(me)&&await j.call(this,{$ref:me},!0)}async function Z(me){try{return this._compileSchemaEnv(me)}catch(_e){if(!(_e instanceof i.default))throw _e;return ue.call(this,_e),await he.call(this,_e.missingSchema),Z.call(this,me)}}function ue({missingSchema:me,missingRef:_e}){if(this.refs[me])throw new Error(`AnySchema ${me} is loaded but ${_e} cannot be resolved`)}async function he(me){const _e=await fe.call(this,me);this.refs[me]||await q.call(this,_e.$schema),this.refs[me]||this.addSchema(_e,me,Y)}async function fe(me){const _e=this._loading[me];if(_e)return _e;try{return await(this._loading[me]=L(me))}finally{delete this._loading[me]}}}addSchema(H,Y,L,j=this.opts.validateSchema){if(Array.isArray(H)){for(const Z of H)this.addSchema(Z,void 0,L,j);return this}let q;if(typeof H=="object"){const{schemaId:Z}=this.opts;if(q=H[Z],q!==void 0&&typeof q!="string")throw new Error(`schema ${Z} must be string`)}return Y=(0,u.normalizeId)(Y||q),this._checkUnique(Y),this.schemas[Y]=this._addSchema(H,L,Y,j,!0),this}addMetaSchema(H,Y,L=this.opts.validateSchema){return this.addSchema(H,Y,!0,L),this}validateSchema(H,Y){if(typeof H=="boolean")return!0;let L;if(L=H.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const j=this.validate(L,H);if(!j&&Y){const q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(q);else throw new Error(q)}return j}getSchema(H){let Y;for(;typeof(Y=x.call(this,H))=="string";)H=Y;if(Y===void 0){const{schemaId:L}=this.opts,j=new o.SchemaEnv({schema:{},schemaId:L});if(Y=o.resolveSchema.call(this,j,H),!Y)return;this.refs[H]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(H){if(H instanceof RegExp)return this._removeAllSchemas(this.schemas,H),this._removeAllSchemas(this.refs,H),this;switch(typeof H){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=x.call(this,H);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[H],delete this.refs[H],this}case"object":{const Y=H;this._cache.delete(Y);let L=H[this.opts.schemaId];return L&&(L=(0,u.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(H){for(const Y of H)this.addKeyword(Y);return this}addKeyword(H,Y){let L;if(typeof H=="string")L=H,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=L);else if(typeof H=="object"&&Y===void 0){if(Y=H,L=Y.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(N.call(this,L,Y),!Y)return(0,c.eachItem)(L,q=>F.call(this,q)),this;W.call(this,Y);const j={...Y,type:(0,l.getJSONTypes)(Y.type),schemaType:(0,l.getJSONTypes)(Y.schemaType)};return(0,c.eachItem)(L,j.type.length===0?q=>F.call(this,q,j):q=>j.type.forEach(Z=>F.call(this,q,j,Z))),this}getKeyword(H){const Y=this.RULES.all[H];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(H){const{RULES:Y}=this;delete Y.keywords[H],delete Y.all[H];for(const L of Y.rules){const j=L.rules.findIndex(q=>q.keyword===H);j>=0&&L.rules.splice(j,1)}return this}addFormat(H,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[H]=Y,this}errorsText(H=this.errors,{separator:Y=", ",dataVar:L="data"}={}){return!H||H.length===0?"No errors":H.map(j=>`${L}${j.instancePath} ${j.message}`).reduce((j,q)=>j+Y+q)}$dataMetaSchema(H,Y){const L=this.RULES.all;H=JSON.parse(JSON.stringify(H));for(const j of Y){const q=j.split("/").slice(1);let Z=H;for(const ue of q)Z=Z[ue];for(const ue in L){const he=L[ue];if(typeof he!="object")continue;const{$data:fe}=he.definition,me=Z[ue];fe&&me&&(Z[ue]=G(me))}}return H}_removeAllSchemas(H,Y){for(const L in H){const j=H[L];(!Y||Y.test(L))&&(typeof j=="string"?delete H[L]:j&&!j.meta&&(this._cache.delete(j.schema),delete H[L]))}}_addSchema(H,Y,L,j=this.opts.validateSchema,q=this.opts.addUsedSchema){let Z;const{schemaId:ue}=this.opts;if(typeof H=="object")Z=H[ue];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof H!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(H);if(he!==void 0)return he;L=(0,u.normalizeId)(Z||L);const fe=u.getSchemaRefs.call(this,H,L);return he=new o.SchemaEnv({schema:H,schemaId:ue,meta:Y,baseId:L,localRefs:fe}),this._cache.set(he.schema,he),q&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=he),j&&this.validateSchema(H,!0),he}_checkUnique(H){if(this.schemas[H]||this.refs[H])throw new Error(`schema with key or id "${H}" already exists`)}_compileSchemaEnv(H){if(H.meta?this._compileMetaSchema(H):o.compileSchema.call(this,H),!H.validate)throw new Error("ajv implementation error");return H.validate}_compileMetaSchema(H){const Y=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,H)}finally{this.opts=Y}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function S(M,H,Y,L="error"){for(const j in M){const q=j;q in H&&this.logger[L](`${Y}: option ${j}. ${M[q]}`)}}function x(M){return M=(0,u.normalizeId)(M),this.schemas[M]||this.refs[M]}function b(){const M=this.opts.schemas;if(M)if(Array.isArray(M))this.addSchema(M);else for(const H in M)this.addSchema(M[H],H)}function T(){for(const M in this.opts.formats){const H=this.opts.formats[M];H&&this.addFormat(M,H)}}function A(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const H in M){const Y=M[H];Y.keyword||(Y.keyword=H),this.addKeyword(Y)}}function I(){const M={...this.opts};for(const H of p)delete M[H];return M}const k={log(){},warn(){},error(){}};function R(M){if(M===!1)return k;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function N(M,H){const{RULES:Y}=this;if((0,c.eachItem)(M,L=>{if(Y.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!P.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!H&&H.$data&&!("code"in H||"validate"in H))throw new Error('$data keyword must have "code" or "validate" function')}function F(M,H,Y){var L;const j=H==null?void 0:H.post;if(Y&&j)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:q}=this;let Z=j?q.post:q.rules.find(({type:he})=>he===Y);if(Z||(Z={type:Y,rules:[]},q.rules.push(Z)),q.keywords[M]=!0,!H)return;const ue={keyword:M,definition:{...H,type:(0,l.getJSONTypes)(H.type),schemaType:(0,l.getJSONTypes)(H.schemaType)}};H.before?B.call(this,Z,ue,H.before):Z.rules.push(ue),q.all[M]=ue,(L=H.implements)===null||L===void 0||L.forEach(he=>this.addKeyword(he))}function B(M,H,Y){const L=M.rules.findIndex(j=>j.keyword===Y);L>=0?M.rules.splice(L,0,H):(M.rules.push(H),this.logger.warn(`rule ${Y} is not defined`))}function W(M){let{metaSchema:H}=M;H!==void 0&&(M.$data&&this.opts.$data&&(H=G(H)),M.validateSchema=this.compile(H,!0))}const V={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(M){return{anyOf:[M,V]}}})(P6e);var AJ={},IJ={},OJ={};Object.defineProperty(OJ,"__esModule",{value:!0});const _7t={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};OJ.default=_7t;var D1={};Object.defineProperty(D1,"__esModule",{value:!0});D1.callRef=D1.getValidate=void 0;const b7t=zx,Mge=jn,mu=zn,ib=Vh,Lge=Tu,bk=Tt,w7t={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Lge.resolveRef.call(u,l,i,n);if(c===void 0)throw new b7t.default(r.opts.uriResolver,i,n);if(c instanceof Lge.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return i$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return i$(e,(0,mu._)`${p}.validate`,l,l.$async)}function d(p){const m=l4e(e,p);i$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,mu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:mu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function l4e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,mu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}D1.getValidate=l4e;function i$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?ib.default.this:mu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,mu._)`await ${(0,Mge.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,mu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Mge.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,mu._)`${p}.errors`;i.assign(ib.default.vErrors,(0,mu._)`${ib.default.vErrors} === null ? ${m} : ${ib.default.vErrors}.concat(${m})`),i.assign(ib.default.errors,(0,mu._)`${ib.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=bk.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,mu._)`${p}.evaluated.props`);s.props=bk.mergeEvaluated.props(i,y,s.props,mu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=bk.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,mu._)`${p}.evaluated.items`);s.items=bk.mergeEvaluated.items(i,y,s.items,mu.Name)}}}D1.callRef=i$;D1.default=w7t;Object.defineProperty(IJ,"__esModule",{value:!0});const E7t=OJ,x7t=D1,S7t=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",E7t.default,x7t.default];IJ.default=S7t;var PJ={},kJ={};Object.defineProperty(kJ,"__esModule",{value:!0});const qM=zn,ug=qM.operators,WM={maximum:{okStr:"<=",ok:ug.LTE,fail:ug.GT},minimum:{okStr:">=",ok:ug.GTE,fail:ug.LT},exclusiveMaximum:{okStr:"<",ok:ug.LT,fail:ug.GTE},exclusiveMinimum:{okStr:">",ok:ug.GT,fail:ug.LTE}},T7t={message:({keyword:e,schemaCode:t})=>(0,qM.str)`must be ${WM[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,qM._)`{comparison: ${WM[e].okStr}, limit: ${t}}`},C7t={keyword:Object.keys(WM),type:"number",schemaType:"number",$data:!0,error:T7t,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,qM._)`${n} ${WM[t].fail} ${r} || isNaN(${n})`)}};kJ.default=C7t;var RJ={};Object.defineProperty(RJ,"__esModule",{value:!0});const Y2=zn,A7t={message:({schemaCode:e})=>(0,Y2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Y2._)`{multipleOf: ${e}}`},I7t={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:A7t,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Y2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Y2._)`${o} !== parseInt(${o})`;e.fail$data((0,Y2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};RJ.default=I7t;var $J={},NJ={};Object.defineProperty(NJ,"__esModule",{value:!0});function c4e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}NJ.default=c4e;c4e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty($J,"__esModule",{value:!0});const Cv=zn,O7t=Tt,P7t=NJ,k7t={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Cv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Cv._)`{limit: ${e}}`},R7t={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:k7t,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Cv.operators.GT:Cv.operators.LT,o=i.opts.unicode===!1?(0,Cv._)`${n}.length`:(0,Cv._)`${(0,O7t.useFunc)(e.gen,P7t.default)}(${n})`;e.fail$data((0,Cv._)`${o} ${s} ${r}`)}};$J.default=R7t;var DJ={};Object.defineProperty(DJ,"__esModule",{value:!0});const $7t=jn,GM=zn,N7t={message:({schemaCode:e})=>(0,GM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,GM._)`{pattern: ${e}}`},D7t={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:N7t,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,GM._)`(new RegExp(${i}, ${o}))`:(0,$7t.usePattern)(e,r);e.fail$data((0,GM._)`!${a}.test(${t})`)}};DJ.default=D7t;var MJ={};Object.defineProperty(MJ,"__esModule",{value:!0});const K2=zn,M7t={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,K2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,K2._)`{limit: ${e}}`},L7t={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:M7t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?K2.operators.GT:K2.operators.LT;e.fail$data((0,K2._)`Object.keys(${n}).length ${i} ${r}`)}};MJ.default=L7t;var LJ={};Object.defineProperty(LJ,"__esModule",{value:!0});const eT=jn,X2=zn,F7t=Tt,j7t={message:({params:{missingProperty:e}})=>(0,X2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,X2._)`{missingProperty: ${e}}`},B7t={keyword:"required",type:"object",schemaType:"array",$data:!0,error:j7t,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,F7t.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(X2.nil,f);else for(const h of n)(0,eT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,eT.checkMissingProp)(e,n,h)),(0,eT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,eT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,eT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,X2.not)(p),()=>{e.error(),t.break()})},X2.nil)}}};LJ.default=B7t;var FJ={};Object.defineProperty(FJ,"__esModule",{value:!0});const Q2=zn,z7t={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Q2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Q2._)`{limit: ${e}}`},U7t={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:z7t,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Q2.operators.GT:Q2.operators.LT;e.fail$data((0,Q2._)`${n}.length ${i} ${r}`)}};FJ.default=U7t;var jJ={},ZI={};Object.defineProperty(ZI,"__esModule",{value:!0});const f4e=EJ;f4e.code='require("ajv/dist/runtime/equal").default';ZI.default=f4e;Object.defineProperty(jJ,"__esModule",{value:!0});const FB=$s,wo=zn,V7t=Tt,H7t=ZI,q7t={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},W7t={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:q7t,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,FB.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,FB.checkDataTypes)(l,g,a.opts.strictNumbers,FB.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,V7t.useFunc)(t,H7t.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};jJ.default=W7t;var BJ={};Object.defineProperty(BJ,"__esModule",{value:!0});const BH=zn,G7t=Tt,Y7t=ZI,K7t={message:"must be equal to constant",params:({schemaCode:e})=>(0,BH._)`{allowedValue: ${e}}`},X7t={keyword:"const",$data:!0,error:K7t,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,BH._)`!${(0,G7t.useFunc)(t,Y7t.default)}(${n}, ${i})`):e.fail((0,BH._)`${s} !== ${n}`)}};BJ.default=X7t;var zJ={};Object.defineProperty(zJ,"__esModule",{value:!0});const XT=zn,Q7t=Tt,J7t=ZI,Z7t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,XT._)`{allowedValues: ${e}}`},ezt={keyword:"enum",schemaType:"array",$data:!0,error:Z7t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Q7t.useFunc)(t,J7t.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,XT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,XT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,XT._)`${l()}(${n}, ${h}[${p}])`:(0,XT._)`${n} === ${m}`}}};zJ.default=ezt;Object.defineProperty(PJ,"__esModule",{value:!0});const tzt=kJ,nzt=RJ,rzt=$J,izt=DJ,szt=MJ,ozt=LJ,azt=FJ,uzt=jJ,lzt=BJ,czt=zJ,fzt=[tzt.default,nzt.default,rzt.default,izt.default,szt.default,ozt.default,azt.default,uzt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},lzt.default,czt.default];PJ.default=fzt;var UJ={},Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});Ux.validateAdditionalItems=void 0;const Av=zn,zH=Tt,dzt={message:({params:{len:e}})=>(0,Av.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Av._)`{limit: ${e}}`},hzt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:dzt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,zH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}d4e(e,r)}};function d4e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Av._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Av._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,zH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Av._)`${a} <= ${t.length}`);n.if((0,Av.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:zH.Type.Num},l),o.allErrors||n.if((0,Av.not)(l),()=>n.break())})}}Ux.validateAdditionalItems=d4e;Ux.default=hzt;var VJ={},Vx={};Object.defineProperty(Vx,"__esModule",{value:!0});Vx.validateTuple=void 0;const Fge=zn,s$=Tt,pzt=jn,mzt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return h4e(e,"additionalItems",t);n.items=!0,!(0,s$.alwaysValidSchema)(n,t)&&e.ok((0,pzt.validateArray)(e))}};function h4e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=s$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Fge._)`${s}.length`);n.forEach((f,d)=>{(0,s$.alwaysValidSchema)(a,f)||(r.if((0,Fge._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,s$.checkStrictMode)(a,g,d.strictTuples)}}}Vx.validateTuple=h4e;Vx.default=mzt;Object.defineProperty(VJ,"__esModule",{value:!0});const gzt=Vx,yzt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,gzt.validateTuple)(e,"items")};VJ.default=yzt;var HJ={};Object.defineProperty(HJ,"__esModule",{value:!0});const jge=zn,vzt=Tt,_zt=jn,bzt=Ux,wzt={message:({params:{len:e}})=>(0,jge.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,jge._)`{limit: ${e}}`},Ezt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:wzt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,vzt.alwaysValidSchema)(r,t)&&(i?(0,bzt.validateAdditionalItems)(e,i):e.ok((0,_zt.validateArray)(e)))}};HJ.default=Ezt;var qJ={};Object.defineProperty(qJ,"__esModule",{value:!0});const Zl=zn,wk=Tt,xzt={message:({params:{min:e,max:t}})=>t===void 0?(0,Zl.str)`must contain at least ${e} valid item(s)`:(0,Zl.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Zl._)`{minContains: ${e}}`:(0,Zl._)`{minContains: ${e}, maxContains: ${t}}`},Szt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:xzt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Zl._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,wk.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,wk.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,wk.alwaysValidSchema)(s,n)){let m=(0,Zl._)`${c} >= ${o}`;a!==void 0&&(m=(0,Zl._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Zl._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:wk.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Zl._)`${m}++`),a===void 0?t.if((0,Zl._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Zl._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Zl._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};qJ.default=Szt;var p4e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=zn,n=Tt,r=jn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(p4e);var WJ={};Object.defineProperty(WJ,"__esModule",{value:!0});const m4e=zn,Tzt=Tt,Czt={message:"property name must be valid",params:({params:e})=>(0,m4e._)`{propertyName: ${e.propertyName}}`},Azt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Czt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Tzt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,m4e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};WJ.default=Azt;var B5={};Object.defineProperty(B5,"__esModule",{value:!0});const Ek=jn,Qc=zn,Izt=Vh,xk=Tt,Ozt={message:"must NOT have additional properties",params:({params:e})=>(0,Qc._)`{additionalProperty: ${e.additionalProperty}}`},Pzt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Ozt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,xk.alwaysValidSchema)(o,n))return;const l=(0,Ek.allSchemaProperties)(r.properties),c=(0,Ek.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Qc._)`${s} === ${Izt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,xk.schemaRefOrVal)(o,r.properties,"properties");y=(0,Ek.isOwnProperty)(t,v,g)}else l.length?y=(0,Qc.or)(...l.map(v=>(0,Qc._)`${g} === ${v}`)):y=Qc.nil;return c.length&&(y=(0,Qc.or)(y,...c.map(v=>(0,Qc._)`${(0,Ek.usePattern)(e,v)}.test(${g})`))),(0,Qc.not)(y)}function h(g){t.code((0,Qc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,xk.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Qc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Qc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:xk.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};B5.default=Pzt;var GJ={};Object.defineProperty(GJ,"__esModule",{value:!0});const kzt=If,Bge=jn,jB=Tt,zge=B5,Rzt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&zge.default.code(new kzt.KeywordCxt(s,zge.default,"additionalProperties"));const o=(0,Bge.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=jB.mergeEvaluated.props(t,(0,jB.toHash)(o),s.props));const a=o.filter(f=>!(0,jB.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Bge.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};GJ.default=Rzt;var YJ={};Object.defineProperty(YJ,"__esModule",{value:!0});const Uge=jn,Sk=zn,Vge=Tt,Hge=Tt,$zt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Uge.allSchemaProperties)(n),u=a.filter(m=>(0,Vge.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof Sk.Name)&&(s.props=(0,Hge.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Vge.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,Sk._)`${(0,Uge.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Hge.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,Sk._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,Sk.not)(c),()=>t.break())})})}}};YJ.default=$zt;var KJ={};Object.defineProperty(KJ,"__esModule",{value:!0});const Nzt=Tt,Dzt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Nzt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};KJ.default=Dzt;var XJ={};Object.defineProperty(XJ,"__esModule",{value:!0});const Mzt=jn,Lzt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Mzt.validateUnion,error:{message:"must match a schema in anyOf"}};XJ.default=Lzt;var QJ={};Object.defineProperty(QJ,"__esModule",{value:!0});const o$=zn,Fzt=Tt,jzt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,o$._)`{passingSchemas: ${e.passing}}`},Bzt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:jzt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,Fzt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,o$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,o$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,o$.Name)})})}}};QJ.default=Bzt;var JJ={};Object.defineProperty(JJ,"__esModule",{value:!0});const zzt=Tt,Uzt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,zzt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};JJ.default=Uzt;var ZJ={};Object.defineProperty(ZJ,"__esModule",{value:!0});const YM=zn,g4e=Tt,Vzt={message:({params:e})=>(0,YM.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,YM._)`{failingKeyword: ${e.ifClause}}`},Hzt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Vzt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,g4e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=qge(r,"then"),s=qge(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,YM.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,YM._)`${c}`):e.setParams({ifClause:c})}}}};function qge(e,t){const n=e.schema[t];return n!==void 0&&!(0,g4e.alwaysValidSchema)(e,n)}ZJ.default=Hzt;var eZ={};Object.defineProperty(eZ,"__esModule",{value:!0});const qzt=Tt,Wzt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,qzt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};eZ.default=Wzt;Object.defineProperty(UJ,"__esModule",{value:!0});const Gzt=Ux,Yzt=VJ,Kzt=Vx,Xzt=HJ,Qzt=qJ,Jzt=p4e,Zzt=WJ,eUt=B5,tUt=GJ,nUt=YJ,rUt=KJ,iUt=XJ,sUt=QJ,oUt=JJ,aUt=ZJ,uUt=eZ;function lUt(e=!1){const t=[rUt.default,iUt.default,sUt.default,oUt.default,aUt.default,uUt.default,Zzt.default,eUt.default,Jzt.default,tUt.default,nUt.default];return e?t.push(Yzt.default,Xzt.default):t.push(Gzt.default,Kzt.default),t.push(Qzt.default),t}UJ.default=lUt;var tZ={},nZ={};Object.defineProperty(nZ,"__esModule",{value:!0});const ss=zn,cUt={message:({schemaCode:e})=>(0,ss.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ss._)`{format: ${e}}`},fUt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:cUt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ss._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ss._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ss._)`${m}.type || "string"`).assign(y,(0,ss._)`${m}.validate`),()=>n.assign(g,(0,ss._)`"string"`).assign(y,m)),e.fail$data((0,ss.or)(v(),_()));function v(){return u.strictSchema===!1?ss.nil:(0,ss._)`${o} && !${y}`}function _(){const w=c.$async?(0,ss._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ss._)`${y}(${r})`,S=(0,ss._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ss._)`${y} && ${y} !== true && ${g} === ${t} && !${S}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(S){const x=S instanceof RegExp?(0,ss.regexpCode)(S):u.code.formats?(0,ss._)`${u.code.formats}${(0,ss.getProperty)(s)}`:void 0,b=n.scopeValue("formats",{key:s,ref:S,code:x});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,ss._)`${b}.validate`]:["string",S,b]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ss._)`await ${y}(${r})`}return typeof g=="function"?(0,ss._)`${y}(${r})`:(0,ss._)`${y}.test(${r})`}}}};nZ.default=fUt;Object.defineProperty(tZ,"__esModule",{value:!0});const dUt=nZ,hUt=[dUt.default];tZ.default=hUt;var IE={};Object.defineProperty(IE,"__esModule",{value:!0});IE.contentVocabulary=IE.metadataVocabulary=void 0;IE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];IE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(AJ,"__esModule",{value:!0});const pUt=IJ,mUt=PJ,gUt=UJ,yUt=tZ,Wge=IE,vUt=[pUt.default,mUt.default,(0,gUt.default)(),yUt.default,Wge.metadataVocabulary,Wge.contentVocabulary];AJ.default=vUt;var rZ={},z5={};Object.defineProperty(z5,"__esModule",{value:!0});z5.DiscrError=void 0;var Gge;(function(e){e.Tag="tag",e.Mapping="mapping"})(Gge||(z5.DiscrError=Gge={}));Object.defineProperty(rZ,"__esModule",{value:!0});const Sb=zn,UH=z5,Yge=Tu,_Ut=zx,bUt=Tt,wUt={message:({params:{discrError:e,tagName:t}})=>e===UH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Sb._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},EUt={keyword:"discriminator",type:"object",schemaType:"object",error:wUt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,Sb._)`${n}${(0,Sb.getProperty)(a)}`);t.if((0,Sb._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:UH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,Sb._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:UH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,Sb.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let S=o[w];if(S!=null&&S.$ref&&!(0,bUt.schemaHasRulesButRef)(S,s.self.RULES)){const b=S.$ref;if(S=Yge.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,b),S instanceof Yge.SchemaEnv&&(S=S.schema),S===void 0)throw new _Ut.default(s.opts.uriResolver,s.baseId,b)}const x=(h=S==null?void 0:S.properties)===null||h===void 0?void 0:h[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(S)),v(x,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,S){if(w.const)_(w.const,S);else if(w.enum)for(const x of w.enum)_(x,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,S){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=S}}}};rZ.default=EUt;const xUt="http://json-schema.org/draft-07/schema#",SUt="http://json-schema.org/draft-07/schema#",TUt="Core schema meta-schema",CUt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},AUt=["object","boolean"],IUt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},OUt={$schema:xUt,$id:SUt,title:TUt,definitions:CUt,type:AUt,properties:IUt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=P6e,r=AJ,i=rZ,s=OUt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=If;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=zn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=JI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=zx;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})($H,$H.exports);var PUt=$H.exports;const y4e=Qu(PUt),kUt="#/definitions/StudyConfig",RUt="http://json-schema.org/draft-07/schema#",$Ut={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](./Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](./ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta10/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "<study-name>/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},NUt={$ref:kUt,$schema:RUt,definitions:$Ut},DUt="#/definitions/GlobalConfig",MUt="http://json-schema.org/draft-07/schema#",LUt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},FUt={$ref:DUt,$schema:MUt,definitions:LUt},v4e=new y4e;v4e.addSchema(FUt);const Kge=v4e.getSchema("#/definitions/GlobalConfig"),_4e=new y4e;_4e.addSchema(NUt);const Xge=_4e.getSchema("#/definitions/StudyConfig");function jUt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function U5(e){return e.baseComponent!==void 0}function BUt(e){const t=pJ.parse(e),n=Kge(t),r=jUt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Kge.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function zUt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return U5(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function b4e(e,t){const n=pJ.parse(e),r=Xge(n),i=zUt(n);if(r&&i[0])return n;const s=[...Xge.errors||[]];return console.error(`${t} parsing errors`,s),{...n,errors:s}}function w4e(){const e=Fh(),{setAlertModal:t}=kl(),n=Ec();C.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const Qge=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],Jge=["participantId","trialId","trialOrder","responseId"];function iZ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function UUt(e,t,n){const r=(Object.entries(e.answers).length/(gc(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=U5(u)&&u.baseComponent&&t.baseComponents?BK({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(_=>_.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function VUt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=C.useState([...Qge].filter(c=>c!=="meta")),a=C.useMemo(()=>{const c=[...Jge,...s],f=c,d=i.map(h=>UUt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=C.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);iZ(c,n)},[n,a.header,a.rows]),l=C.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return $.jsxs(qp,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[$.jsx(qY,{searchable:!0,nothingFound:"Property not found",data:[...Qge],value:s,onChange:c=>o(c),label:"Included optional columns:",icon:$.jsx(f0t,{}),variant:"filled"}),$.jsx(r1,{h:"md"}),$.jsx(pt,{mih:300,style:{width:"100%",overflow:"scroll"},children:$.jsxs(KY,{striped:!0,captionSide:"bottom",withBorder:!0,children:[$.jsx("thead",{children:$.jsx("tr",{children:a.header.map(c=>$.jsx("th",{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:$.jsxs(vi,{direction:"row",justify:"space-between",align:"center",children:[c,!Jge.includes(c)&&$.jsx(lm,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},children:$.jsx(kOe,{size:16})})]})},c))})}),$.jsx("tbody",{children:a.rows.slice(0,5).map((c,f)=>$.jsx("tr",{children:a.header.map(d=>$.jsx("td",{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),$.jsx(r1,{h:"sm"}),$.jsx(vi,{justify:"center",fz:"sm",c:"dimmed",children:$.jsx(dt,{children:l})}),$.jsx(r1,{h:"md"}),$.jsxs(gr,{position:"right",children:[$.jsx(Lr,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),$.jsx(Lr,{leftIcon:$.jsx(POe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function E4e(){const e=Em(),{storageEngine:t}=fo(),{answers:n}=xa(m=>m),[r,i]=C.useState(!1);C.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),w4e();const[s,o]=C.useState(),[a,u]=C.useState(""),l=e.studyMetadata.title.replace(" ","_");C.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=C.useCallback(async()=>{iZ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=C.useState(Math.floor(d/1e3));return C.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),$.jsx(Ya,{style:{height:"100%"},children:$.jsx(vi,{direction:"column",children:r?$.jsx(dt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?$.jsx(Ka,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):$.jsxs($.Fragment,{children:[$.jsx(dt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),$.jsx(r1,{h:"lg"}),$.jsx(Ya,{children:$.jsx(dh,{color:"blue"})})]})})})}function HUt(e){const{email:t}=e;return $.jsx(Dm,{pt:100,children:$.jsx(Ya,{children:$.jsxs(ca,{order:3,children:["Trial not found, please contact the administrator at"," ",$.jsxs(dI,{span:!0,c:"blue",href:`mailto:${t}`,children:[t," "]})]})})})}function OE(e){return structuredClone(e)}const x4e=C.createContext(null);function qUt(){const e=C.useContext(x4e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Zge(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function WUt(){const e=Fh(),t=Lm(),r=`${t[e]}_${e}`,{trialValidation:i,sequence:s,answers:o}=xa(S=>S),a=dJ(),u=Ec(),{saveTrialAnswer:l,setIframeAnswers:c}=kl(),{storageEngine:f}=fo(),h=!v2t(r),p=a==null?void 0:a.answer,m=kc(),g=Em(),y=SK(),v=C.useMemo(()=>Date.now(),[]),_=qUt(),w=C.useCallback(()=>{const S=OE(i[r]),x=Object.values(S).reduce((N,F)=>Object.hasOwn(F,"values")?{...N,...F.values}:N,{}),{provenanceGraph:b}=S,T=Date.now(),A=_&&"current"in _&&_.current?_.current.splice(0,_.current.length):[];Object.keys(p||{}).length===0&&(u(l({identifier:r,answer:x,startTime:v,endTime:T,provenanceGraph:b,windowEvents:A})),f&&f.saveAnswer(r,{answer:x,startTime:v,endTime:T,provenanceGraph:b,windowEvents:A}),u(c({})));let I=e+1;const k=uRe(s,e),R=k!==null&&k.some(N=>Object.hasOwn(N.currentBlock,"skip")&&N.currentBlock.skip!==void 0),P={...o,[r]:{answer:x,startTime:v,endTime:T,provenanceGraph:b,windowEvents:A}};R&&[...k.flatMap(F=>F.currentBlock.skip?F.currentBlock.skip.map(B=>({...B,firstIndex:F.firstIndex,lastIndex:F.lastIndex})):[])].some(F=>{let B=!1;const W=Object.fromEntries(Object.entries(P).filter(([G])=>{const M=parseInt(G.slice(G.lastIndexOf("_")+1),10);return M>=F.firstIndex&&M<=e})),V=F.check!=="block"?Object.entries(W).filter(([G])=>G.slice(0,G.lastIndexOf("_"))===F.name):Object.entries(W);if(V.length===0)return!1;if(V.some(([G,M])=>!M))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(F,null,2)}`);if(F.check==="response"||F.check==="responses"){const[G,M]=V[0];F.check==="response"?B=F.value!==M.answer[F.responseId]:B=!Zge(M.answer,G,g.components[G.slice(0,G.lastIndexOf("_"))],g)}else if(F.check==="block"||F.check==="repeatedComponent"){if(V.length<F.value)return!1;const G=V.map(([Y,L])=>Zge(L.answer,Y,g.components[Y.slice(0,Y.lastIndexOf("_"))],g)),M=G.filter(Y=>Y).length,H=G.length-M;B=F.condition==="numCorrect"&&M===F.value||F.condition==="numIncorrect"&&H===F.value}if(B){const G=t.indexOf(F.to),M=G===-1?g2t(s,F.to):-1;return I=G===-1?M:G,!0}return!1}),m(`/${y}/${I}${window.location.search}`)},[i,r,_,p,e,s,o,v,m,y,u,l,f,c,g,t]);return{isNextDisabled:h,goToNextStep:w}}function GUt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=WUt(),o=C.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return $.jsx(Lr,{type:"submit",disabled:t||i,onClick:o,children:e})}function VH(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var YUt=Object.defineProperty,e0e=Object.getOwnPropertySymbols,KUt=Object.prototype.hasOwnProperty,XUt=Object.prototype.propertyIsEnumerable,t0e=(e,t,n)=>t in e?YUt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QUt=(e,t)=>{for(var n in t||(t={}))KUt.call(t,n)&&t0e(e,n,t[n]);if(e0e)for(var n of e0e(t))XUt.call(t,n)&&t0e(e,n,t[n]);return e};function S4e(e,t){if(t===null||typeof t!="object")return{};const n=QUt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const JUt="__MANTINE_FORM_INDEX__";function n0e(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${JUt}`)):!1:!1}function r0e(e,t,n){typeof n.value=="object"&&(n.value=Xb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Xb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Xb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Xb(a),Xb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Xb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)r0e(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||r0e(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function T4e(e){return typeof e!="string"?[]:e.split(".")}function V5(e,t,n){const r=T4e(e);if(r.length===0)return n;const i=Xb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Op(e,t){const n=T4e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function i0e(e){const t=VH(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function HH(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Op(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>HH(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||HH(o,t,a,i)),i},r)}function qH(e,t){return i0e(typeof e=="function"?e(t):HH(e,t))}function Tk(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=qH(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function ZUt(e,{from:t,to:n},r){const i=Op(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),V5(e,s,r)}var eVt=Object.defineProperty,s0e=Object.getOwnPropertySymbols,tVt=Object.prototype.hasOwnProperty,nVt=Object.prototype.propertyIsEnumerable,o0e=(e,t,n)=>t in e?eVt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rVt=(e,t)=>{for(var n in t||(t={}))tVt.call(t,n)&&o0e(e,n,t[n]);if(s0e)for(var n of s0e(t))nVt.call(t,n)&&o0e(e,n,t[n]);return e};function iVt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=rVt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function sVt(e,t,n){const r=Op(e,n);return Array.isArray(r)?V5(e,r.filter((i,s)=>s!==t),n):n}var oVt=Object.defineProperty,a0e=Object.getOwnPropertySymbols,aVt=Object.prototype.hasOwnProperty,uVt=Object.prototype.propertyIsEnumerable,u0e=(e,t,n)=>t in e?oVt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lVt=(e,t)=>{for(var n in t||(t={}))aVt.call(t,n)&&u0e(e,n,t[n]);if(a0e)for(var n of a0e(t))uVt.call(t,n)&&u0e(e,n,t[n]);return e};function l0e(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function c0e(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=S4e(`${i}.${t}`,s));const o=lVt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=l0e(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=l0e(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function cVt(e,t,n,r){const i=Op(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),V5(e,s,r)}function f0e(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function fVt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var dVt=Object.defineProperty,hVt=Object.defineProperties,pVt=Object.getOwnPropertyDescriptors,d0e=Object.getOwnPropertySymbols,mVt=Object.prototype.hasOwnProperty,gVt=Object.prototype.propertyIsEnumerable,h0e=(e,t,n)=>t in e?dVt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lg=(e,t)=>{for(var n in t||(t={}))mVt.call(t,n)&&h0e(e,n,t[n]);if(d0e)for(var n of d0e(t))gVt.call(t,n)&&h0e(e,n,t[n]);return e},BB=(e,t)=>hVt(e,pVt(t));function C4e({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=C.useState(r),[f,d]=C.useState(n),[h,p]=C.useState(e),[m,g]=C.useState(VH(t)),y=C.useRef(e),v=q=>{y.current=q},_=C.useCallback(()=>c({}),[]),w=q=>{const Z=q?lg(lg({},h),q):h;v(Z),d({})},S=C.useCallback(q=>g(Z=>VH(typeof q=="function"?q(Z):q)),[]),x=C.useCallback(()=>g({}),[]),b=C.useCallback(()=>{p(e),x(),v(e),d({}),_()},[]),T=C.useCallback((q,Z)=>S(ue=>BB(lg({},ue),{[q]:Z})),[]),A=C.useCallback(q=>S(Z=>{if(typeof q!="string")return Z;const ue=lg({},Z);return delete ue[q],ue}),[]),I=C.useCallback(q=>d(Z=>{if(typeof q!="string")return Z;const ue=S4e(q,Z);return delete ue[q],ue}),[]),k=C.useCallback((q,Z)=>{const ue=n0e(q,s);I(q),c(he=>BB(lg({},he),{[q]:!0})),p(he=>{const fe=V5(q,Z,he);if(ue){const me=Tk(q,u,fe);me.hasError?T(q,me.error):A(q)}return fe}),!ue&&i&&T(q,null)},[]),R=C.useCallback(q=>{p(Z=>{const ue=typeof q=="function"?q(Z):q;return lg(lg({},Z),ue)}),i&&x()},[]),P=C.useCallback((q,Z)=>{I(q),p(ue=>ZUt(q,Z,ue)),g(ue=>iVt(q,Z,ue))},[]),N=C.useCallback((q,Z)=>{I(q),p(ue=>sVt(q,Z,ue)),g(ue=>c0e(q,Z,ue,-1))},[]),F=C.useCallback((q,Z,ue)=>{I(q),p(he=>cVt(q,Z,ue,he)),g(he=>c0e(q,ue,he,1))},[]),B=C.useCallback(()=>{const q=qH(u,h);return g(q.errors),q},[h,u]),W=C.useCallback(q=>{const Z=Tk(q,u,h);return Z.hasError?T(q,Z.error):A(q),Z},[h,u]),V=(q,{type:Z="input",withError:ue=!0,withFocus:he=!0}={})=>{const me={onChange:fVt(_e=>k(q,_e))};return ue&&(me.error=m[q]),Z==="checkbox"?me.checked=Op(q,h):me.value=Op(q,h),he&&(me.onFocus=()=>c(_e=>BB(lg({},_e),{[q]:!0})),me.onBlur=()=>{if(n0e(q,o)){const _e=Tk(q,u,h);_e.hasError?T(q,_e.error):A(q)}}),me},G=(q,Z)=>ue=>{ue==null||ue.preventDefault();const he=B();he.hasErrors?Z==null||Z(he.errors,h,ue):q==null||q(a(h),ue)},M=q=>a(q||h),H=C.useCallback(q=>{q.preventDefault(),b()},[]),Y=q=>{if(q){const ue=Op(q,f);if(typeof ue=="boolean")return ue;const he=Op(q,h),fe=Op(q,y.current);return!LH(he,fe)}return Object.keys(f).length>0?f0e(f):!LH(h,y.current)},L=C.useCallback(q=>f0e(l,q),[l]),j=C.useCallback(q=>q?!Tk(q,u,h).hasError:!qH(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:R,setErrors:S,setFieldValue:k,setFieldError:T,clearFieldError:A,clearErrors:x,reset:b,validate:B,validateField:W,reorderListItem:P,removeListItem:N,insertListItem:F,getInputProps:V,onSubmit:G,onReset:H,isDirty:Y,isTouched:L,setTouched:c,setDirty:d,resetTouched:_,resetDirty:w,isValid:j,getTransformedValues:M}}function yVt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function vVt(e){return yVt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const _Vt=new URLSearchParams(window.location.search),bVt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?_Vt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},wVt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function EVt(e,t,n){const[r,i]=C.useState(null),s=C4e({initialValues:bVt(e,n),validate:wVt(e)});return C.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function __(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function xVt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return $.jsx(eE.Group,{label:$.jsx(Ka,{text:r,required:i}),...n,error:__(e,n,s),size:"md",children:s.map(o=>$.jsx(eE,{disabled:t,value:o.value,label:o.label},o.value))})}function SVt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return $.jsx(Gp,{disabled:t,label:$.jsx(Ka,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:__(e,n,o)})}function TVt({response:e,answer:t}){const{prompt:n}=e;return $.jsxs($.Fragment,{children:[$.jsx(dt,{fz:"md",fw:500,children:$.jsx(Ka,{text:n})}),$.jsx(n1,{children:Array.isArray(t.value)?t.value.map(r=>$.jsx(n1.Item,{children:r},r)):$.jsx(n1.Item,{children:t.value})})]})}function A4e({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return $.jsxs(HD.Group,{name:`radioInput${e.id}`,label:$.jsx(Ka,{text:r,required:i}),size:"md",...n,error:__(e,n,s),children:[o?$.jsx(dt,{mt:-7,children:o}):null,s.map(u=>$.jsx(HD,{disabled:t,value:u.value,label:u.label},u.label)),$.jsx(dt,{mt:-7,children:a})]},e.id)}function CVt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return $.jsx(A4e,{disabled:t,response:s,answer:n})}function AVt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return $.jsx(wIe,{disabled:t,placeholder:a,label:$.jsx(Ka,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:__(e,n)})}function IVt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=__(e,n);return $.jsx(Ss.Wrapper,{label:$.jsx(Ka,{text:r,required:i}),error:o,size:"md",children:$.jsx(YY,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function OVt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return $.jsx(mx,{disabled:t,placeholder:r,label:$.jsx(Ka,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:__(e,n)})}function PVt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return $.jsx(PAe,{disabled:t,placeholder:r,label:$.jsx(Ka,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:__(e,n)})}function kVt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=eY(),o=C.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return $.jsxs(pt,{py:20,sx:{padding:5},children:[e.type==="numerical"&&$.jsx(AVt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&$.jsx(OVt,{response:e,disabled:o,answer:r}),e.type==="longText"&&$.jsx(PVt,{response:e,disabled:o,answer:r}),e.type==="likert"&&$.jsx(CVt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&$.jsx(SVt,{response:e,disabled:o,answer:r}),e.type==="slider"&&$.jsx(IVt,{response:e,disabled:o,answer:r}),e.type==="radio"&&$.jsx(A4e,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&$.jsx(xVt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&$.jsx(TVt,{response:e,answer:r})]})}function KM({config:e,location:t,status:n,style:r}){var w;const i=Fh(),s=Lm()[i],o=n==null?void 0:n.answer,a=e,u=C.useMemo(()=>{var S;return((S=a==null?void 0:a.response)==null?void 0:S.filter(x=>x.location?x.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Ec(),{updateResponseBlockValidation:c}=kl(),f=EVt(u,i,o||{}),[d,h]=C.useState(void 0),[p,m]=C.useState(!1),{iframeAnswers:g,iframeProvenance:y}=xa(S=>S),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return C.useEffect(()=>{const S=u.find(x=>x.type==="iframe");if(g&&S){const x=S.id;f.setValues({...f.values,[x]:g[x]})}},[g]),C.useEffect(()=>{y&&h(y)},[y]),C.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:OE(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),$.jsxs("div",{style:r,children:[u.map(S=>{var x,b;return $.jsx(z.Fragment,{children:S.hidden?"":$.jsxs($.Fragment,{children:[$.jsx(kVt,{storedAnswer:o?o[S.id]:void 0,answer:{...f.getInputProps(S.id,{type:S.type==="checkbox"?"checkbox":"input"})},response:S}),v&&p&&$.jsx(dt,{children:`The correct answer is: ${(b=(x=a.correctAnswer)==null?void 0:x.find(T=>T.id===S.id))==null?void 0:b.answer}`})]})},`${S.id}-${i}`)}),$.jsxs(gr,{position:"right",spacing:"xs",mt:"xl",children:[v&&_&&$.jsx(Lr,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),_&&$.jsx(GUt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function zB({provState:e}){var T;const t=Em(),n=fo(),r=Fh(),i=Lm()[r]||"Notfound",s=t.components[i],o=dJ(),a=U5(s)&&t.baseComponents?BK({},(T=t.baseComponents)==null?void 0:T[s.baseComponent],s):s,u=a.instruction||"",{instructionLocation:l}=a,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[f,d]=C.useState(null),h=Ec(),{setIsRecording:p,setAnalysisTrialName:m}=kl(),{analysisTrialName:g,analysisProvState:y}=xa(A=>A),v=kc(),[_,w]=C.useState(null);C.useEffect(()=>{h(m(i))},[h,m,r,i]),C.useEffect(()=>{r&&g&&i!==g&&v(`../${g}`)},[g,i,r,v]),C.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(f&&_&&n.storageEngine.saveAudio(f,_),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(w(null),d(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(I=>{const k=new MediaRecorder(I);k.start(),d(k),h(p(!0))}),w(i)))},[i]),w4e();const{storageEngine:S}=fo(),x=Ec(),{setAlertModal:b}=kl();return C.useEffect(()=>{(S==null?void 0:S.getEngine())!=="firebase"&&x(b({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[b,S,x]),i==="end"?$.jsx(E4e,{}):i==="Notfound"?$.jsx(HUt,{email:t.uiConfig.contactEmail}):$.jsxs($.Fragment,{children:[l==="aboveStimulus"&&$.jsx(Ka,{text:u}),$.jsx(KM,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),$.jsxs(C.Suspense,{fallback:$.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&$.jsx(Zjt,{currentConfig:a}),a.type==="website"&&$.jsx(w2t,{currentConfig:a}),a.type==="image"&&$.jsx(x2t,{currentConfig:a}),a.type==="react-component"&&$.jsx(Jjt,{currentConfig:a,provState:y})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&$.jsx(Ka,{text:u}),$.jsx(KM,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function WH(e){const[t]=eY();return $.jsx(ZG,{...e,to:{pathname:e.to,search:t.toString()}})}function RVt(e,t=!1){return typeof e=="number"?p0e(e,t):p0e(e.length,t).map(r=>r.map(i=>e[i]))}function p0e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function I4e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=I4e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function $Vt(e,t){const n=OE(e);return I4e(n,t,"root")}function O4e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&O4e(s,t,i,o)})}function NVt(e){const t=[];return O4e(e,t,"",0),t}function m0e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return RVt(i.sort(()=>.5-Math.random()),!0)}function DVt(e){const n=NVt(e.sequence).map(s=>({[s]:m0e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=$Vt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=m0e(e,o))})}),i}function P4e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>P4e(n,`${t}-${r}`))}}function MVt(){xa(n=>n),kl();const e=Fh();Lm()[e];const t=Em();return Ec(),C.useMemo(()=>{let n=OE(t.sequence);return n=P4e(n,"root"),n.components.push("end"),n},[t.sequence]),null}var g0e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},LVt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},sZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(k4e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):LVt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new FVt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class FVt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jVt=function(e){const t=k4e(e);return sZ.encodeByteArray(t,!0)},XM=function(e){return jVt(e).replace(/\./g,"")},R4e=function(e){try{return sZ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BVt=()=>$4e().__FIREBASE_DEFAULTS__,zVt=()=>{if(typeof process>"u"||typeof g0e>"u")return;const e=g0e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},UVt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&R4e(e[1]);return t&&JSON.parse(t)},H5=()=>{try{return BVt()||zVt()||UVt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},N4e=e=>{var t,n;return(n=(t=H5())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},VVt=e=>{const t=N4e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},D4e=()=>{var e;return(e=H5())===null||e===void 0?void 0:e.config},M4e=e=>{var t;return(t=H5())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HVt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[XM(JSON.stringify(n)),XM(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qVt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function WVt(){var e;const t=(e=H5())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GVt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function YVt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KVt(){const e=Fo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function XVt(){return!WVt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oZ(){try{return typeof indexedDB=="object"}catch{return!1}}function QVt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JVt="FirebaseError";class Hh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=JVt,Object.setPrototypeOf(this,Hh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hx.prototype.create)}}class Hx{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?ZVt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hh(i,a,r)}}function ZVt(e,t){return e.replace(eHt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const eHt=/\{\$([^}]+)}/g;function tHt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _A(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(y0e(s)&&y0e(o)){if(!_A(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function y0e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nHt(e,t){const n=new rHt(e,t);return n.subscribe.bind(n)}class rHt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iHt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=UB),i.error===void 0&&(i.error=UB),i.complete===void 0&&(i.complete=UB);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iHt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function UB(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sHt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oHt=1e3,aHt=2,uHt=4*60*60*1e3,lHt=.5;function cHt(e,t=oHt,n=aHt){const r=t*Math.pow(n,e),i=Math.round(lHt*r*(Math.random()-.5)*2);return Math.min(uHt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}class Ch{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fHt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new vA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hHt(t))try{this.getOrInitializeService({instanceIdentifier:gv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=gv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gv){return this.instances.has(t)}getOptions(t=gv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dHt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=gv){return this.component?this.component.multipleInstances?t:gv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dHt(e){return e===gv?void 0:e}function hHt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pHt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new fHt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Jn||(Jn={}));const mHt={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},gHt=Jn.INFO,yHt={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},vHt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=yHt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class q5{constructor(t){this.name=t,this._logLevel=gHt,this._logHandler=vHt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Jn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mHt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...t),this._logHandler(this,Jn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...t),this._logHandler(this,Jn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...t),this._logHandler(this,Jn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...t),this._logHandler(this,Jn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...t),this._logHandler(this,Jn.ERROR,...t)}}const _Ht=(e,t)=>t.some(n=>e instanceof n);let v0e,_0e;function bHt(){return v0e||(v0e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wHt(){return _0e||(_0e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L4e=new WeakMap,GH=new WeakMap,F4e=new WeakMap,VB=new WeakMap,aZ=new WeakMap;function EHt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(y0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&L4e.set(n,e)}).catch(()=>{}),aZ.set(t,e),t}function xHt(e){if(GH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});GH.set(e,t)}let YH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return GH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||F4e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function SHt(e){YH=e(YH)}function THt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(HB(this),t,...n);return F4e.set(r,t.sort?t.sort():[t]),y0(r)}:wHt().includes(e)?function(...t){return e.apply(HB(this),t),y0(L4e.get(this))}:function(...t){return y0(e.apply(HB(this),t))}}function CHt(e){return typeof e=="function"?THt(e):(e instanceof IDBTransaction&&xHt(e),_Ht(e,bHt())?new Proxy(e,YH):e)}function y0(e){if(e instanceof IDBRequest)return EHt(e);if(VB.has(e))return VB.get(e);const t=CHt(e);return t!==e&&(VB.set(e,t),aZ.set(t,e)),t}const HB=e=>aZ.get(e);function AHt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=y0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(y0(o.result),u.oldVersion,u.newVersion,y0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const IHt=["get","getKey","getAll","getAllKeys","count"],OHt=["put","add","delete","clear"],qB=new Map;function b0e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(qB.get(t))return qB.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=OHt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IHt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return qB.set(t,s),s}SHt(e=>({...e,get:(t,n,r)=>b0e(t,n)||e.get(t,n,r),has:(t,n)=>!!b0e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PHt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kHt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kHt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const KH="@firebase/app",w0e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=new q5("@firebase/app"),RHt="@firebase/app-compat",$Ht="@firebase/analytics-compat",NHt="@firebase/analytics",DHt="@firebase/app-check-compat",MHt="@firebase/app-check",LHt="@firebase/auth",FHt="@firebase/auth-compat",jHt="@firebase/database",BHt="@firebase/database-compat",zHt="@firebase/functions",UHt="@firebase/functions-compat",VHt="@firebase/installations",HHt="@firebase/installations-compat",qHt="@firebase/messaging",WHt="@firebase/messaging-compat",GHt="@firebase/performance",YHt="@firebase/performance-compat",KHt="@firebase/remote-config",XHt="@firebase/remote-config-compat",QHt="@firebase/storage",JHt="@firebase/storage-compat",ZHt="@firebase/firestore",eqt="@firebase/vertexai-preview",tqt="@firebase/firestore-compat",nqt="firebase",rqt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="[DEFAULT]",iqt={[KH]:"fire-core",[RHt]:"fire-core-compat",[NHt]:"fire-analytics",[$Ht]:"fire-analytics-compat",[MHt]:"fire-app-check",[DHt]:"fire-app-check-compat",[LHt]:"fire-auth",[FHt]:"fire-auth-compat",[jHt]:"fire-rtdb",[BHt]:"fire-rtdb-compat",[zHt]:"fire-fn",[UHt]:"fire-fn-compat",[VHt]:"fire-iid",[HHt]:"fire-iid-compat",[qHt]:"fire-fcm",[WHt]:"fire-fcm-compat",[GHt]:"fire-perf",[YHt]:"fire-perf-compat",[KHt]:"fire-rc",[XHt]:"fire-rc-compat",[QHt]:"fire-gcs",[JHt]:"fire-gcs-compat",[ZHt]:"fire-fst",[tqt]:"fire-fst-compat",[eqt]:"fire-vertex","fire-js":"fire-js",[nqt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Map,sqt=new Map,QH=new Map;function E0e(e,t){try{e.container.addComponent(t)}catch(n){M1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function xm(e){const t=e.name;if(QH.has(t))return M1.debug(`There were multiple attempts to register component ${t}.`),!1;QH.set(t,e);for(const n of QM.values())E0e(n,e);for(const n of sqt.values())E0e(n,e);return!0}function qx(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Gd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oqt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},v0=new Hx("app","Firebase",oqt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aqt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ch("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw v0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=rqt;function j4e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:XH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw v0.create("bad-app-name",{appName:String(i)});if(n||(n=D4e()),!n)throw v0.create("no-options");const s=QM.get(i);if(s){if(_A(n,s.options)&&_A(r,s.config))return s;throw v0.create("duplicate-app",{appName:i})}const o=new pHt(i);for(const u of QH.values())o.addComponent(u);const a=new aqt(n,r,o);return QM.set(i,a),a}function uZ(e=XH){const t=QM.get(e);if(!t&&e===XH&&D4e())return j4e();if(!t)throw v0.create("no-app",{appName:e});return t}function Of(e,t,n){var r;let i=(r=iqt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),M1.warn(a.join(" "));return}xm(new Ch(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uqt="firebase-heartbeat-database",lqt=1,bA="firebase-heartbeat-store";let WB=null;function B4e(){return WB||(WB=AHt(uqt,lqt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(bA)}catch(n){console.warn(n)}}}}).catch(e=>{throw v0.create("idb-open",{originalErrorMessage:e.message})})),WB}async function cqt(e){try{const n=(await B4e()).transaction(bA),r=await n.objectStore(bA).get(z4e(e));return await n.done,r}catch(t){if(t instanceof Hh)M1.warn(t.message);else{const n=v0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});M1.warn(n.message)}}}async function x0e(e,t){try{const r=(await B4e()).transaction(bA,"readwrite");await r.objectStore(bA).put(t,z4e(e)),await r.done}catch(n){if(n instanceof Hh)M1.warn(n.message);else{const r=v0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});M1.warn(r.message)}}}function z4e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fqt=1024,dqt=30*24*60*60*1e3;class hqt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mqt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=S0e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=dqt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S0e(),{heartbeatsToSend:r,unsentEntries:i}=pqt(this._heartbeatsCache.heartbeats),s=XM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function S0e(){return new Date().toISOString().substring(0,10)}function pqt(e,t=fqt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),T0e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),T0e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mqt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oZ()?QVt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cqt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return x0e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return x0e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function T0e(e){return XM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gqt(e){xm(new Ch("platform-logger",t=>new PHt(t),"PRIVATE")),xm(new Ch("heartbeat",t=>new hqt(t),"PRIVATE")),Of(KH,w0e,e),Of(KH,w0e,"esm2017"),Of("fire-js","")}gqt("");function U4e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yqt=U4e,V4e=new Hx("auth","Firebase",U4e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new q5("@firebase/auth");function vqt(e,...t){JM.logLevel<=Jn.WARN&&JM.warn(`Auth (${b_}): ${e}`,...t)}function a$(e,...t){JM.logLevel<=Jn.ERROR&&JM.error(`Auth (${b_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(e,...t){throw cZ(e,...t)}function Pf(e,...t){return cZ(e,...t)}function lZ(e,t,n){const r=Object.assign(Object.assign({},yqt()),{[t]:n});return new Hx("auth","Firebase",r).create(t,{appName:e.name})}function _0(e){return lZ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _qt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Ah(e,"argument-error"),lZ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cZ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return V4e.create(e,...t)}function mn(e,t,...n){if(!e)throw cZ(t,...n)}function Fp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw a$(t),new Error(t)}function Sm(e,t){e||Fp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function bqt(){return C0e()==="http:"||C0e()==="https:"}function C0e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wqt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bqt()||GVt()||"connection"in navigator)?navigator.onLine:!0}function Eqt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(t,n){this.shortDelay=t,this.longDelay=n,Sm(n>t,"Short delay should be less than long delay!"),this.isMobile=qVt()||YVt()}get(){return wqt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZ(e,t){Sm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xqt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sqt=new tO(3e4,6e4);function W5(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Wx(e,t,n,r,i={}){return q4e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=eO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),H4e.fetch()(G4e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function q4e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},xqt),t);try{const i=new Tqt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ck(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ck(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ck(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ck(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lZ(e,c,l);Ah(e,c)}}catch(i){if(i instanceof Hh)throw i;Ah(e,"network-request-failed",{message:String(i)})}}async function W4e(e,t,n,r,i={}){const s=await Wx(e,t,n,r,i);return"mfaPendingCredential"in s&&Ah(e,"multi-factor-auth-required",{_serverResponse:s}),s}function G4e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?fZ(e.config,i):`${e.config.apiScheme}://${i}`}class Tqt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pf(this.auth,"network-request-failed")),Sqt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ck(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cqt(e,t){return Wx(e,"POST","/v1/accounts:delete",t)}async function Y4e(e,t){return Wx(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Aqt(e,t=!1){const n=es(e),r=await n.getIdToken(t),i=dZ(r);mn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:J2(GB(i.auth_time)),issuedAtTime:J2(GB(i.iat)),expirationTime:J2(GB(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function GB(e){return Number(e)*1e3}function dZ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return a$("JWT malformed, contained fewer than 3 sections"),null;try{const i=R4e(n);return i?JSON.parse(i):(a$("Failed to decode base64 JWT payload"),null)}catch(i){return a$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function A0e(e){const t=dZ(e);return mn(t,"internal-error"),mn(typeof t.exp<"u","internal-error"),mn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Hh&&Iqt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Iqt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oqt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=J2(this.lastLoginAt),this.creationTime=J2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await wA(e,Y4e(n,{idToken:r}));mn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?K4e(s.providerUserInfo):[],a=kqt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ZH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Pqt(e){const t=es(e);await ZM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function kqt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function K4e(e){return e.map(t=>{var{providerId:n}=t,r=LX(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rqt(e,t){const n=await q4e(e,{},async()=>{const r=eO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=G4e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",H4e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $qt(e,t){return Wx(e,"POST","/v2/accounts:revokeToken",W5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mn(t.idToken,"internal-error"),mn(typeof t.idToken<"u","internal-error"),mn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):A0e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){mn(t.length!==0,"internal-error");const n=A0e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Rqt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ow;return r&&(mn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(mn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(mn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ow,this.toJSON())}_performRefresh(){return Fp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(e,t){mn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class jp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=LX(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Oqt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ZH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await wA(this,this.stsTokenManager.getToken(this.auth,t));return mn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Aqt(this,t)}reload(){return Pqt(this)}_assign(t){this!==t&&(mn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new jp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await ZM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gd(this.auth.app))return Promise.reject(_0(this.auth));const t=await this.getIdToken();return await wA(this,Cqt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:S,providerData:x,stsTokenManager:b}=n;mn(_&&b,t,"internal-error");const T=Ow.fromJSON(this.name,b);mn(typeof _=="string",t,"internal-error"),cg(f,t.name),cg(d,t.name),mn(typeof w=="boolean",t,"internal-error"),mn(typeof S=="boolean",t,"internal-error"),cg(h,t.name),cg(p,t.name),cg(m,t.name),cg(g,t.name),cg(y,t.name),cg(v,t.name);const A=new jp({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:S,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(A.providerData=x.map(I=>Object.assign({},I))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Ow;i.updateFromServerResponse(n);const s=new jp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await ZM(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];mn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?K4e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ow;a.updateFromIdToken(r);const u=new jp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ZH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0e=new Map;function Bp(e){Sm(e instanceof Function,"Expected a class definition");let t=I0e.get(e);return t?(Sm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,I0e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}X4e.type="NONE";const O0e=X4e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(e,t,n){return`firebase:${e}:${t}:${n}`}class Pw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=u$(this.userKey,i.apiKey,s),this.fullPersistenceKey=u$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?jp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Pw(Bp(O0e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Bp(O0e);const o=u$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=jp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Pw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Pw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Z4e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Q4e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(t5e(t))return"Blackberry";if(n5e(t))return"Webos";if(hZ(t))return"Safari";if((t.includes("chrome/")||J4e(t))&&!t.includes("edge/"))return"Chrome";if(e5e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Q4e(e=Fo()){return/firefox\//i.test(e)}function hZ(e=Fo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function J4e(e=Fo()){return/crios\//i.test(e)}function Z4e(e=Fo()){return/iemobile/i.test(e)}function e5e(e=Fo()){return/android/i.test(e)}function t5e(e=Fo()){return/blackberry/i.test(e)}function n5e(e=Fo()){return/webos/i.test(e)}function G5(e=Fo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Nqt(e=Fo()){var t;return G5(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Dqt(){return KVt()&&document.documentMode===10}function r5e(e=Fo()){return G5(e)||e5e(e)||n5e(e)||t5e(e)||/windows phone/i.test(e)||Z4e(e)}function Mqt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5e(e,t=[]){let n;switch(e){case"Browser":n=P0e(Fo());break;case"Worker":n=`${P0e(Fo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${b_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lqt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fqt(e,t={}){return Wx(e,"GET","/v2/passwordPolicy",W5(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jqt=6;class Bqt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:jqt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zqt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0e(this),this.idTokenSubscription=new k0e(this),this.beforeStateQueue=new Lqt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V4e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Bp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Y4e(this,{idToken:t}),r=await jp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Gd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await ZM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Eqt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Gd(this.app))return Promise.reject(_0(this));const n=t?es(t):null;return n&&mn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&mn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Gd(this.app)?Promise.reject(_0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Gd(this.app)?Promise.reject(_0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Fqt(this),n=new Bqt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Hx("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $qt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Bp(t)||this._popupRedirectResolver;mn(n,this,"argument-error"),this.redirectPersistenceManager=await Pw.create(this,[Bp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=i5e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&vqt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function nO(e){return es(e)}class k0e{constructor(t){this.auth=t,this.observer=null,this.addObserver=nHt(n=>this.observer=n)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pZ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uqt(e){pZ=e}function Vqt(e){return pZ.loadJS(e)}function Hqt(){return pZ.gapiScript}function qqt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wqt(e,t){const n=qx(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(_A(s,t??{}))return i;Ah(i,"already-initialized")}return n.initialize({options:t})}function Gqt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Yqt(e,t,n){const r=nO(e);mn(r._canInitEmulator,r,"emulator-config-failed"),mn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=s5e(t),{host:o,port:a}=Kqt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Xqt()}function s5e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Kqt(e){const t=s5e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:R0e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:R0e(o)}}}function R0e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Xqt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Fp("not implemented")}_getIdTokenResponse(t){return Fp("not implemented")}_linkToIdToken(t,n){return Fp("not implemented")}_getReauthenticationResolver(t){return Fp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(e,t){return W4e(e,"POST","/v1/accounts:signInWithIdp",W5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qqt="http://localhost";class L1 extends o5e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new L1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ah("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=LX(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new L1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return kw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,kw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,kw(t,n)}buildRequest(){const t={requestUri:Qqt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=eO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO extends mZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng extends rO{constructor(){super("facebook.com")}static credential(t){return L1._fromParams({providerId:Ng.PROVIDER_ID,signInMethod:Ng.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ng.credentialFromTaggedObject(t)}static credentialFromError(t){return Ng.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ng.credential(t.oauthAccessToken)}catch{return null}}}Ng.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ng.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends rO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return L1._fromParams({providerId:Pp.PROVIDER_ID,signInMethod:Pp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pp.credentialFromTaggedObject(t)}static credentialFromError(t){return Pp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Pp.credential(n,r)}catch{return null}}}Pp.GOOGLE_SIGN_IN_METHOD="google.com";Pp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends rO{constructor(){super("github.com")}static credential(t){return L1._fromParams({providerId:Dg.PROVIDER_ID,signInMethod:Dg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dg.credentialFromTaggedObject(t)}static credentialFromError(t){return Dg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dg.credential(t.oauthAccessToken)}catch{return null}}}Dg.GITHUB_SIGN_IN_METHOD="github.com";Dg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends rO{constructor(){super("twitter.com")}static credential(t,n){return L1._fromParams({providerId:Mg.PROVIDER_ID,signInMethod:Mg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Mg.credentialFromTaggedObject(t)}static credentialFromError(t){return Mg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Mg.credential(n,r)}catch{return null}}}Mg.TWITTER_SIGN_IN_METHOD="twitter.com";Mg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jqt(e,t){return W4e(e,"POST","/v1/accounts:signUp",W5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await jp._fromIdTokenResponse(t,r,i),o=$0e(r);return new Q0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=$0e(r);return new Q0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function $0e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zqt(e){var t;if(Gd(e.app))return Promise.reject(_0(e));const n=nO(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Q0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Jqt(n,{returnSecureToken:!0}),i=await Q0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL extends Hh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,eL.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new eL(t,n,r,i)}}function a5e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?eL._fromErrorAndOperation(e,s,t,r):s})}async function eWt(e,t,n=!1){const r=await wA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Q0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tWt(e,t,n=!1){const{auth:r}=e;if(Gd(r.app))return Promise.reject(_0(r));const i="reauthenticate";try{const s=await wA(e,a5e(r,i,t,e),n);mn(s.idToken,r,"internal-error");const o=dZ(s.idToken);mn(o,r,"internal-error");const{sub:a}=o;return mn(e.uid===a,r,"user-mismatch"),Q0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ah(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nWt(e,t,n=!1){if(Gd(e.app))return Promise.reject(_0(e));const r="signIn",i=await a5e(e,r,t),s=await Q0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function rWt(e,t,n,r){return es(e).onIdTokenChanged(t,n,r)}function iWt(e,t,n){return es(e).beforeAuthStateChanged(t,n)}function sWt(e,t,n,r){return es(e).onAuthStateChanged(t,n,r)}function oWt(e){return es(e).signOut()}const tL="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tL,"1"),this.storage.removeItem(tL),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aWt(){const e=Fo();return hZ(e)||G5(e)}const uWt=1e3,lWt=10;class l5e extends u5e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=aWt()&&Mqt(),this.fallbackToPolling=r5e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Dqt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,lWt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},uWt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}l5e.type="LOCAL";const cWt=l5e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5e extends u5e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}c5e.type="SESSION";const f5e=c5e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fWt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new Y5(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await fWt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Y5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gZ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dWt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=gZ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(){return window}function hWt(e){sh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5e(){return typeof sh().WorkerGlobalScope<"u"&&typeof sh().importScripts=="function"}async function pWt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mWt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function gWt(){return d5e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5e="firebaseLocalStorageDb",yWt=1,nL="firebaseLocalStorage",p5e="fbase_key";class iO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function K5(e,t){return e.transaction([nL],t?"readwrite":"readonly").objectStore(nL)}function vWt(){const e=indexedDB.deleteDatabase(h5e);return new iO(e).toPromise()}function eq(){const e=indexedDB.open(h5e,yWt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(nL,{keyPath:p5e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(nL)?t(r):(r.close(),await vWt(),t(await eq()))})})}async function N0e(e,t,n){const r=K5(e,!0).put({[p5e]:t,value:n});return new iO(r).toPromise()}async function _Wt(e,t){const n=K5(e,!1).get(t),r=await new iO(n).toPromise();return r===void 0?null:r.value}function D0e(e,t){const n=K5(e,!0).delete(t);return new iO(n).toPromise()}const bWt=800,wWt=3;class m5e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>wWt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d5e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Y5._getInstance(gWt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await pWt(),!this.activeServiceWorker)return;this.sender=new dWt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mWt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await eq();return await N0e(t,tL,"1"),await D0e(t,tL),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>N0e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>_Wt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>D0e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=K5(i,!1).getAll();return new iO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bWt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m5e.type="LOCAL";const EWt=m5e;new tO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5e(e,t){return t?Bp(t):(mn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ extends o5e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return kw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return kw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return kw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function xWt(e){return nWt(e.auth,new yZ(e),e.bypassAuthState)}function SWt(e){const{auth:t,user:n}=e;return mn(n,t,"internal-error"),tWt(n,new yZ(e),e.bypassAuthState)}async function TWt(e){const{auth:t,user:n}=e;return mn(n,t,"internal-error"),eWt(n,new yZ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return xWt;case"linkViaPopup":case"linkViaRedirect":return TWt;case"reauthViaPopup":case"reauthViaRedirect":return SWt;default:Ah(this.auth,"internal-error")}}resolve(t){Sm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Sm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CWt=new tO(2e3,1e4);async function AWt(e,t,n){if(Gd(e.app))return Promise.reject(Pf(e,"operation-not-supported-in-this-environment"));const r=nO(e);_qt(e,t,mZ);const i=g5e(r,n);return new Kv(r,"signInViaPopup",t,i).executeNotNull()}class Kv extends y5e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Kv.currentPopupAction&&Kv.currentPopupAction.cancel(),Kv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mn(t,this.auth,"internal-error"),t}async onExecution(){Sm(this.filter.length===1,"Popup operations only handle one event");const t=gZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,CWt.get())};t()}}Kv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IWt="pendingRedirect",l$=new Map;class OWt extends y5e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=l$.get(this.auth._key());if(!t){try{const r=await PWt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}l$.set(this.auth._key(),t)}return this.bypassAuthState||l$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PWt(e,t){const n=$Wt(t),r=RWt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function kWt(e,t){l$.set(e._key(),t)}function RWt(e){return Bp(e._redirectPersistence)}function $Wt(e){return u$(IWt,e.config.apiKey,e.name)}async function NWt(e,t,n=!1){if(Gd(e.app))return Promise.reject(_0(e));const r=nO(e),i=g5e(r,t),o=await new OWt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DWt=10*60*1e3;class MWt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!LWt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!v5e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=DWt&&this.cachedEventUids.clear(),this.cachedEventUids.has(M0e(t))}saveEventToCache(t){this.cachedEventUids.add(M0e(t)),this.lastProcessedEventTime=Date.now()}}function M0e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function v5e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function LWt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v5e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FWt(e,t={}){return Wx(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jWt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BWt=/^https?/;async function zWt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await FWt(e);for(const n of t)try{if(UWt(n))return}catch{}Ah(e,"unauthorized-domain")}function UWt(e){const t=JH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BWt.test(n))return!1;if(jWt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VWt=new tO(3e4,6e4);function L0e(){const e=sh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function HWt(e){return new Promise((t,n)=>{var r,i,s;function o(){L0e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{L0e(),n(Pf(e,"network-request-failed"))},timeout:VWt.get()})}if(!((i=(r=sh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=sh().gapi)===null||s===void 0)&&s.load)o();else{const a=qqt("iframefcb");return sh()[a]=()=>{gapi.load?o():n(Pf(e,"network-request-failed"))},Vqt(`${Hqt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw c$=null,t})}let c$=null;function qWt(e){return c$=c$||HWt(e),c$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WWt=new tO(5e3,15e3),GWt="__/auth/iframe",YWt="emulator/auth/iframe",KWt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XWt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QWt(e){const t=e.config;mn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fZ(t,YWt):`https://${e.config.authDomain}/${GWt}`,r={apiKey:t.apiKey,appName:e.name,v:b_},i=XWt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${eO(r).slice(1)}`}async function JWt(e){const t=await qWt(e),n=sh().gapi;return mn(n,e,"internal-error"),t.open({where:document.body,url:QWt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KWt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pf(e,"network-request-failed"),a=sh().setTimeout(()=>{s(o)},WWt.get());function u(){sh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZWt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eGt=500,tGt=600,nGt="_blank",rGt="http://localhost";class F0e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iGt(e,t,n,r=eGt,i=tGt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},ZWt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Fo().toLowerCase();n&&(a=J4e(l)?nGt:n),Q4e(l)&&(t=t||rGt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Nqt(l)&&a!=="_self")return sGt(t||"",a),new F0e(null);const f=window.open(t||"",a,c);mn(f,e,"popup-blocked");try{f.focus()}catch{}return new F0e(f)}function sGt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oGt="__/auth/handler",aGt="emulator/auth/handler",uGt=encodeURIComponent("fac");async function j0e(e,t,n,r,i,s){mn(e.config.authDomain,e,"auth-domain-config-required"),mn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:b_,eventId:i};if(t instanceof mZ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",tHt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof rO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${uGt}=${encodeURIComponent(u)}`:"";return`${lGt(e)}?${eO(a).slice(1)}${l}`}function lGt({config:e}){return e.emulator?fZ(e,aGt):`https://${e.authDomain}/${oGt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB="webStorageSupport";class cGt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f5e,this._completeRedirectFn=NWt,this._overrideRedirectResult=kWt}async _openPopup(t,n,r,i){var s;Sm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await j0e(t,n,r,JH(),i);return iGt(t,o,gZ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await j0e(t,n,r,JH(),i);return hWt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await JWt(t),r=new MWt(t);return n.register("authEvent",i=>(mn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(YB,{type:YB},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[YB];o!==void 0&&n(!!o),Ah(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zWt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return r5e()||hZ()||G5()}}const fGt=cGt;var B0e="@firebase/auth",z0e="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dGt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hGt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pGt(e){xm(new Ch("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i5e(e)},l=new zqt(r,i,s,u);return Gqt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),xm(new Ch("auth-internal",t=>{const n=nO(t.getProvider("auth").getImmediate());return(r=>new dGt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Of(B0e,z0e,hGt(e)),Of(B0e,z0e,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mGt=5*60,gGt=M4e("authIdTokenMaxAge")||mGt;let U0e=null;const yGt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gGt)return;const i=n==null?void 0:n.token;U0e!==i&&(U0e=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function rL(e=uZ()){const t=qx(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Wqt(e,{popupRedirectResolver:fGt,persistence:[EWt,cWt,f5e]}),r=M4e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=yGt(s.toString());iWt(n,o,()=>o(n.currentUser)),rWt(n,a=>o(a))}}const i=N4e("auth");return i&&Yqt(n,`http://${i}`),n}function vGt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Uqt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Pf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",vGt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pGt("Browser");var _Gt="firebase",bGt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Of(_Gt,bGt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5e="firebasestorage.googleapis.com",b5e="storageBucket",wGt=2*60*1e3,EGt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Hh{constructor(t,n,r=0){super(KB(t),`Firebase Storage: ${n} (${KB(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return KB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function KB(e){return"storage/"+e}function vZ(){const e="An unknown error occurred, please check the error payload for server response.";return new ns(ts.UNKNOWN,e)}function xGt(e){return new ns(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function SGt(e){return new ns(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function TGt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ns(ts.UNAUTHENTICATED,e)}function CGt(){return new ns(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function AGt(e){return new ns(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function IGt(){return new ns(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OGt(){return new ns(ts.CANCELED,"User canceled the upload/download.")}function PGt(e){return new ns(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function kGt(e){return new ns(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function RGt(){return new ns(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+b5e+"' property when initializing the app?")}function $Gt(){return new ns(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NGt(){return new ns(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DGt(e){return new ns(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tq(e){return new ns(ts.INVALID_ARGUMENT,e)}function w5e(){return new ns(ts.APP_DELETED,"The Firebase app was deleted.")}function MGt(e){return new ns(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Z2(e,t){return new ns(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function tT(e){throw new ns(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=vl.makeFromUrl(t,n)}catch{return new vl(t,"")}if(r.path==="")return r;throw kGt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===_5e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const S=_[w],x=S.regex.exec(t);if(x){const b=x[S.indices.bucket];let T=x[S.indices.path];T||(T=""),r=new vl(b,T),S.postModify(r);break}}if(r==null)throw PGt(t);return r}}class LGt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FGt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function jGt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BGt(e){return e!==void 0}function zGt(e){return typeof e=="object"&&!Array.isArray(e)}function _Z(e){return typeof e=="string"||e instanceof String}function V0e(e){return bZ()&&e instanceof Blob}function bZ(){return typeof Blob<"u"}function H0e(e,t,n,r){if(r<t)throw tq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw tq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wZ(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function E5e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(u1||(u1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UGt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VGt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new Ak(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===u1.NO_ERROR,u=s.getStatus();if(!a||UGt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===u1.ABORT;r(!1,new Ak(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new Ak(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());BGt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=vZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?w5e():OGt();o(u)}else{const u=IGt();o(u)}};this.canceled_?n(!1,new Ak(!1,null,!0)):this.backoffId_=FGt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&jGt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ak{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function HGt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function qGt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function WGt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function GGt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function YGt(e,t,n,r,i,s,o=!0){const a=E5e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return WGt(l,t),HGt(l,n),qGt(l,s),GGt(l,r),new VGt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KGt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function XGt(...e){const t=KGt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(bZ())return new Blob(e);throw new ns(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QGt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JGt(e){if(typeof atob>"u")throw DGt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class XB{constructor(t,n){this.data=t,this.contentType=n||null}}function ZGt(e,t){switch(e){case Yd.RAW:return new XB(x5e(t));case Yd.BASE64:case Yd.BASE64URL:return new XB(S5e(e,t));case Yd.DATA_URL:return new XB(tYt(t),nYt(t))}throw vZ()}function x5e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function eYt(e){let t;try{t=decodeURIComponent(e)}catch{throw Z2(Yd.DATA_URL,"Malformed data URL.")}return x5e(t)}function S5e(e,t){switch(e){case Yd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Z2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Yd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Z2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=JGt(t)}catch(i){throw i.message.includes("polyfill")?i:Z2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class T5e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Z2(Yd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=rYt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function tYt(e){const t=new T5e(e);return t.base64?S5e(Yd.BASE64,t.rest):eYt(t.rest)}function nYt(e){return new T5e(e).contentType}function rYt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t,n){let r=0,i="";V0e(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(V0e(this.data_)){const r=this.data_,i=QGt(r,t,n);return i===null?null:new Lg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Lg(r,!0)}}static getBlob(...t){if(bZ()){const n=t.map(r=>r instanceof Lg?r.data_:r);return new Lg(XGt.apply(null,n))}else{const n=t.map(o=>_Z(o)?ZGt(Yd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Lg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5e(e){let t;try{t=JSON.parse(e)}catch{return null}return zGt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iYt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function sYt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function A5e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oYt(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||oYt}}let Ik=null;function aYt(e){return!_Z(e)||e.length<2?e:A5e(e)}function I5e(){if(Ik)return Ik;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return aYt(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),Ik=e,Ik}function uYt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new vl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function lYt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return uYt(r,e),r}function O5e(e,t,n){const r=C5e(t);return r===null?null:lYt(e,r,n)}function cYt(e,t,n,r){const i=C5e(t);if(i===null||!_Z(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=wZ(d,n,r),p=E5e({alt:"media",token:l});return h+p})[0]}function fYt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class P5e{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5e(e){if(!e)throw vZ()}function dYt(e,t){function n(r,i){const s=O5e(e,i,t);return k5e(s!==null),s}return n}function hYt(e,t){function n(r,i){const s=O5e(e,i,t);return k5e(s!==null),cYt(s,i,e.host,e._protocol)}return n}function R5e(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=CGt():i=TGt():n.getStatus()===402?i=SGt(e.bucket):n.getStatus()===403?i=AGt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function pYt(e){const t=R5e(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=xGt(e.path)),s.serverResponse=i.serverResponse,s}return n}function mYt(e,t,n){const r=t.fullServerUrl(),i=wZ(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new P5e(i,s,hYt(e,n),o);return a.errorHandler=pYt(t),a}function gYt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function yYt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=gYt(null,t)),r}function vYt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=yYt(t,r,i),c=fYt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Lg.getBlob(f,r,d);if(h===null)throw $Gt();const p={name:l.fullPath},m=wZ(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new P5e(m,g,dYt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=R5e(t),v}class _Yt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=u1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=u1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=u1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw tT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw tT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class bYt extends _Yt{initXhr(){this.xhr_.responseType="text"}}function $5e(){return new bYt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(t,n){this._service=t,n instanceof vl?this._location=n:this._location=vl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new F1(t,n)}get root(){const t=new vl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return A5e(this._location.path)}get storage(){return this._service}get parent(){const t=iYt(this._location.path);if(t===null)return null;const n=new vl(this._location.bucket,t);return new F1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw MGt(t)}}function wYt(e,t,n){e._throwIfRoot("uploadBytes");const r=vYt(e.storage,e._location,I5e(),new Lg(t,!0),n);return e.storage.makeRequestWithTokens(r,$5e).then(i=>({metadata:i,ref:e}))}function EYt(e){e._throwIfRoot("getDownloadURL");const t=mYt(e.storage,e._location,I5e());return e.storage.makeRequestWithTokens(t,$5e).then(n=>{if(n===null)throw NGt();return n})}function xYt(e,t){const n=sYt(e._location.path,t),r=new vl(e._location.bucket,n);return new F1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SYt(e){return/^[A-Za-z]+:\/\//.test(e)}function TYt(e,t){return new F1(e,t)}function N5e(e,t){if(e instanceof EZ){const n=e;if(n._bucket==null)throw RGt();const r=new F1(n,n._bucket);return t!=null?N5e(r,t):r}else return t!==void 0?xYt(e,t):e}function CYt(e,t){if(t&&SYt(t)){if(e instanceof EZ)return TYt(e,t);throw tq("To use ref(service, url), the first argument must be a Storage instance.")}else return N5e(e,t)}function q0e(e,t){const n=t==null?void 0:t[b5e];return n==null?null:vl.makeFromBucketSpec(n,e)}function AYt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:HVt(i,e.app.options.projectId))}class EZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=_5e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wGt,this._maxUploadRetryTime=EGt,this._requests=new Set,i!=null?this._bucket=vl.makeFromBucketSpec(i,this._host):this._bucket=q0e(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=vl.makeFromBucketSpec(this._url,t):this._bucket=q0e(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){H0e("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){H0e("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new F1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new LGt(w5e());{const o=YGt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const W0e="@firebase/storage",G0e="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5e="storage";function Y0e(e,t,n){return e=es(e),wYt(e,t,n)}function nT(e){return e=es(e),EYt(e)}function fg(e,t){return e=es(e),CYt(e,t)}function dg(e=uZ(),t){e=es(e);const r=qx(e,D5e).getImmediate({identifier:t}),i=VVt("storage");return i&&IYt(r,...i),r}function IYt(e,t,n,r={}){AYt(e,t,n,r)}function OYt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new EZ(n,r,i,t,b_)}function PYt(){xm(new Ch(D5e,OYt,"PUBLIC").setMultipleInstances(!0)),Of(W0e,G0e,""),Of(W0e,G0e,"esm2017")}PYt();var K0e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l1,M5e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,T){function A(){}A.prototype=T.prototype,b.D=T.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(I,k,R){for(var P=Array(arguments.length-2),N=2;N<arguments.length;N++)P[N-2]=arguments[N];return T.prototype[k].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,T,A){A||(A=0);var I=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)I[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;16>k;++k)I[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=b.g[0],A=b.g[1],k=b.g[2];var R=b.g[3],P=T+(R^A&(k^R))+I[0]+3614090360&4294967295;T=A+(P<<7&4294967295|P>>>25),P=R+(k^T&(A^k))+I[1]+3905402710&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(A^R&(T^A))+I[2]+606105819&4294967295,k=R+(P<<17&4294967295|P>>>15),P=A+(T^k&(R^T))+I[3]+3250441966&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+(R^A&(k^R))+I[4]+4118548399&4294967295,T=A+(P<<7&4294967295|P>>>25),P=R+(k^T&(A^k))+I[5]+1200080426&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(A^R&(T^A))+I[6]+2821735955&4294967295,k=R+(P<<17&4294967295|P>>>15),P=A+(T^k&(R^T))+I[7]+4249261313&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+(R^A&(k^R))+I[8]+1770035416&4294967295,T=A+(P<<7&4294967295|P>>>25),P=R+(k^T&(A^k))+I[9]+2336552879&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(A^R&(T^A))+I[10]+4294925233&4294967295,k=R+(P<<17&4294967295|P>>>15),P=A+(T^k&(R^T))+I[11]+2304563134&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+(R^A&(k^R))+I[12]+1804603682&4294967295,T=A+(P<<7&4294967295|P>>>25),P=R+(k^T&(A^k))+I[13]+4254626195&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(A^R&(T^A))+I[14]+2792965006&4294967295,k=R+(P<<17&4294967295|P>>>15),P=A+(T^k&(R^T))+I[15]+1236535329&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+(k^R&(A^k))+I[1]+4129170786&4294967295,T=A+(P<<5&4294967295|P>>>27),P=R+(A^k&(T^A))+I[6]+3225465664&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^A&(R^T))+I[11]+643717713&4294967295,k=R+(P<<14&4294967295|P>>>18),P=A+(R^T&(k^R))+I[0]+3921069994&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(k^R&(A^k))+I[5]+3593408605&4294967295,T=A+(P<<5&4294967295|P>>>27),P=R+(A^k&(T^A))+I[10]+38016083&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^A&(R^T))+I[15]+3634488961&4294967295,k=R+(P<<14&4294967295|P>>>18),P=A+(R^T&(k^R))+I[4]+3889429448&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(k^R&(A^k))+I[9]+568446438&4294967295,T=A+(P<<5&4294967295|P>>>27),P=R+(A^k&(T^A))+I[14]+3275163606&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^A&(R^T))+I[3]+4107603335&4294967295,k=R+(P<<14&4294967295|P>>>18),P=A+(R^T&(k^R))+I[8]+1163531501&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(k^R&(A^k))+I[13]+2850285829&4294967295,T=A+(P<<5&4294967295|P>>>27),P=R+(A^k&(T^A))+I[2]+4243563512&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^A&(R^T))+I[7]+1735328473&4294967295,k=R+(P<<14&4294967295|P>>>18),P=A+(R^T&(k^R))+I[12]+2368359562&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(A^k^R)+I[5]+4294588738&4294967295,T=A+(P<<4&4294967295|P>>>28),P=R+(T^A^k)+I[8]+2272392833&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^A)+I[11]+1839030562&4294967295,k=R+(P<<16&4294967295|P>>>16),P=A+(k^R^T)+I[14]+4259657740&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(A^k^R)+I[1]+2763975236&4294967295,T=A+(P<<4&4294967295|P>>>28),P=R+(T^A^k)+I[4]+1272893353&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^A)+I[7]+4139469664&4294967295,k=R+(P<<16&4294967295|P>>>16),P=A+(k^R^T)+I[10]+3200236656&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(A^k^R)+I[13]+681279174&4294967295,T=A+(P<<4&4294967295|P>>>28),P=R+(T^A^k)+I[0]+3936430074&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^A)+I[3]+3572445317&4294967295,k=R+(P<<16&4294967295|P>>>16),P=A+(k^R^T)+I[6]+76029189&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(A^k^R)+I[9]+3654602809&4294967295,T=A+(P<<4&4294967295|P>>>28),P=R+(T^A^k)+I[12]+3873151461&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^A)+I[15]+530742520&4294967295,k=R+(P<<16&4294967295|P>>>16),P=A+(k^R^T)+I[2]+3299628645&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(k^(A|~R))+I[0]+4096336452&4294967295,T=A+(P<<6&4294967295|P>>>26),P=R+(A^(T|~k))+I[7]+1126891415&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~A))+I[14]+2878612391&4294967295,k=R+(P<<15&4294967295|P>>>17),P=A+(R^(k|~T))+I[5]+4237533241&4294967295,A=k+(P<<21&4294967295|P>>>11),P=T+(k^(A|~R))+I[12]+1700485571&4294967295,T=A+(P<<6&4294967295|P>>>26),P=R+(A^(T|~k))+I[3]+2399980690&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~A))+I[10]+4293915773&4294967295,k=R+(P<<15&4294967295|P>>>17),P=A+(R^(k|~T))+I[1]+2240044497&4294967295,A=k+(P<<21&4294967295|P>>>11),P=T+(k^(A|~R))+I[8]+1873313359&4294967295,T=A+(P<<6&4294967295|P>>>26),P=R+(A^(T|~k))+I[15]+4264355552&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~A))+I[6]+2734768916&4294967295,k=R+(P<<15&4294967295|P>>>17),P=A+(R^(k|~T))+I[13]+1309151649&4294967295,A=k+(P<<21&4294967295|P>>>11),P=T+(k^(A|~R))+I[4]+4149444226&4294967295,T=A+(P<<6&4294967295|P>>>26),P=R+(A^(T|~k))+I[11]+3174756917&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~A))+I[2]+718787259&4294967295,k=R+(P<<15&4294967295|P>>>17),P=A+(R^(k|~T))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,T){T===void 0&&(T=b.length);for(var A=T-this.blockSize,I=this.B,k=this.h,R=0;R<T;){if(k==0)for(;R<=A;)i(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<T;)if(I[k++]=b.charCodeAt(R++),k==this.blockSize){i(this,I),k=0;break}}else for(;R<T;)if(I[k++]=b[R++],k==this.blockSize){i(this,I),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;var A=8*this.o;for(T=b.length-8;T<b.length;++T)b[T]=A&255,A/=256;for(this.u(b),b=Array(16),T=A=0;4>T;++T)for(var I=0;32>I;I+=8)b[A++]=this.g[T]>>>I&255;return b};function s(b,T){var A=a;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=T(b)}function o(b,T){this.h=T;for(var A=[],I=!0,k=b.length-1;0<=k;k--){var R=b[k]|0;I&&R==T||(A[k]=R,I=!1)}this.g=A}var a={};function u(b){return-128<=b&&128>b?s(b,function(T){return new o([T|0],0>T?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(l(-b));for(var T=[],A=1,I=0;b>=A;I++)T[I]=b/A|0,A*=4294967296;return new o(T,0)}function c(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return g(c(b.substring(1),T));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(T,8)),I=f,k=0;k<b.length;k+=8){var R=Math.min(8,b.length-k),P=parseInt(b.substring(k,k+R),T);8>R?(R=l(Math.pow(T,R)),I=I.j(R).add(l(P))):(I=I.j(A),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var b=0,T=1,A=0;A<this.g.length;A++){var I=this.i(A);b+=(0<=I?I:4294967296+I)*T,T*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(p(this))return"0";if(m(this))return"-"+g(this).toString(b);for(var T=l(Math.pow(b,6)),A=this,I="";;){var k=w(A,T).g;A=y(A,k.j(T));var R=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=k,p(A))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function p(b){if(b.h!=0)return!1;for(var T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function m(b){return b.h==-1}e.l=function(b){return b=y(this,b),m(b)?-1:p(b)?0:1};function g(b){for(var T=b.g.length,A=[],I=0;I<T;I++)A[I]=~b.g[I];return new o(A,~b.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0,k=0;k<=T;k++){var R=I+(this.i(k)&65535)+(b.i(k)&65535),P=(R>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);I=P>>>16,R&=65535,P&=65535,A[k]=P<<16|R}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(b,T){return b.add(g(T))}e.j=function(b){if(p(this)||p(b))return f;if(m(this))return m(b)?g(this).j(g(b)):g(g(this).j(b));if(m(b))return g(this.j(g(b)));if(0>this.l(h)&&0>b.l(h))return l(this.m()*b.m());for(var T=this.g.length+b.g.length,A=[],I=0;I<2*T;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<b.g.length;k++){var R=this.i(I)>>>16,P=this.i(I)&65535,N=b.i(k)>>>16,F=b.i(k)&65535;A[2*I+2*k]+=P*F,v(A,2*I+2*k),A[2*I+2*k+1]+=R*F,v(A,2*I+2*k+1),A[2*I+2*k+1]+=P*N,v(A,2*I+2*k+1),A[2*I+2*k+2]+=R*N,v(A,2*I+2*k+2)}for(I=0;I<T;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=T;I<2*T;I++)A[I]=0;return new o(A,0)};function v(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function _(b,T){this.g=b,this.h=T}function w(b,T){if(p(T))throw Error("division by zero");if(p(b))return new _(f,f);if(m(b))return T=w(g(b),T),new _(g(T.g),g(T.h));if(m(T))return T=w(b,g(T)),new _(g(T.g),T.h);if(30<b.g.length){if(m(b)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var A=d,I=T;0>=I.l(b);)A=S(A),I=S(I);var k=x(A,1),R=x(I,1);for(I=x(I,2),A=x(A,2);!p(I);){var P=R.add(I);0>=P.l(b)&&(k=k.add(A),R=P),I=x(I,1),A=x(A,1)}return T=y(b,k.j(T)),new _(k,T)}for(k=f;0<=b.l(T);){for(A=Math.max(1,Math.floor(b.m()/T.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=l(A),P=R.j(T);m(P)||0<P.l(b);)A-=I,R=l(A),P=R.j(T);p(R)&&(R=d),k=k.add(R),b=y(b,P)}return new _(k,b)}e.A=function(b){return w(this,b).h},e.and=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)&b.i(I);return new o(A,this.h&b.h)},e.or=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)|b.i(I);return new o(A,this.h|b.h)},e.xor=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)^b.i(I);return new o(A,this.h^b.h)};function S(b){for(var T=b.g.length+1,A=[],I=0;I<T;I++)A[I]=b.i(I)<<1|b.i(I-1)>>>31;return new o(A,b.h)}function x(b,T){var A=T>>5;T%=32;for(var I=b.g.length-A,k=[],R=0;R<I;R++)k[R]=0<T?b.i(R+A)>>>T|b.i(R+A+1)<<32-T:b.i(R+A);return new o(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,M5e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,l1=o}).apply(typeof K0e<"u"?K0e:typeof self<"u"?self:typeof window<"u"?window:{});var Ok=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L5e,F5e,QT,j5e,f$,nq,B5e,z5e,U5e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,D,U){return E==Array.prototype||E==Object.prototype||(E[D]=U.value),E};function n(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ok=="object"&&Ok];for(var D=0;D<E.length;++D){var U=E[D];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var r=n(this);function i(E,D){if(D)e:{var U=r;E=E.split(".");for(var J=0;J<E.length-1;J++){var be=E[J];if(!(be in U))break e;U=U[be]}E=E[E.length-1],J=U[E],D=D(J),D!=J&&D!=null&&t(U,E,{configurable:!0,writable:!0,value:D})}}function s(E,D){E instanceof String&&(E+="");var U=0,J=!1,be={next:function(){if(!J&&U<E.length){var Ie=U++;return{value:D(Ie,E[Ie]),done:!1}}return J=!0,{done:!0,value:void 0}}};return be[Symbol.iterator]=function(){return be},be}i("Array.prototype.values",function(E){return E||function(){return s(this,function(D,U){return U})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(E){var D=typeof E;return D=D!="object"?D:E?Array.isArray(E)?"array":D:"null",D=="array"||D=="object"&&typeof E.length=="number"}function l(E){var D=typeof E;return D=="object"&&E!=null||D=="function"}function c(E,D,U){return E.call.apply(E.bind,arguments)}function f(E,D,U){if(!E)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(be,J),E.apply(D,be)}}return function(){return E.apply(D,arguments)}}function d(E,D,U){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(E,D){var U=Array.prototype.slice.call(arguments,1);return function(){var J=U.slice();return J.push.apply(J,arguments),E.apply(this,J)}}function p(E,D){function U(){}U.prototype=D.prototype,E.aa=D.prototype,E.prototype=new U,E.prototype.constructor=E,E.Qb=function(J,be,Ie){for(var lt=Array(arguments.length-2),ni=2;ni<arguments.length;ni++)lt[ni-2]=arguments[ni];return D.prototype[be].apply(J,lt)}}function m(E){const D=E.length;if(0<D){const U=Array(D);for(let J=0;J<D;J++)U[J]=E[J];return U}return[]}function g(E,D){for(let U=1;U<arguments.length;U++){const J=arguments[U];if(u(J)){const be=E.length||0,Ie=J.length||0;E.length=be+Ie;for(let lt=0;lt<Ie;lt++)E[be+lt]=J[lt]}else E.push(J)}}class y{constructor(D,U){this.i=D,this.j=U,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function v(E){return/^[\s\xa0]*$/.test(E)}function _(){var E=a.navigator;return E&&(E=E.userAgent)?E:""}function w(E){return w[" "](E),E}w[" "]=function(){};var S=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function x(E,D,U){for(const J in E)D.call(U,E[J],J,E)}function b(E,D){for(const U in E)D.call(void 0,E[U],U,E)}function T(E){const D={};for(const U in E)D[U]=E[U];return D}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(E,D){let U,J;for(let be=1;be<arguments.length;be++){J=arguments[be];for(U in J)E[U]=J[U];for(let Ie=0;Ie<A.length;Ie++)U=A[Ie],Object.prototype.hasOwnProperty.call(J,U)&&(E[U]=J[U])}}function k(E){var D=1;E=E.split(":");const U=[];for(;0<D&&E.length;)U.push(E.shift()),D--;return E.length&&U.push(E.join(":")),U}function R(E){a.setTimeout(()=>{throw E},0)}function P(){var E=G;let D=null;return E.g&&(D=E.g,E.g=E.g.next,E.g||(E.h=null),D.next=null),D}class N{constructor(){this.h=this.g=null}add(D,U){const J=F.get();J.set(D,U),this.h?this.h.next=J:this.g=J,this.h=J}}var F=new y(()=>new B,E=>E.reset());class B{constructor(){this.next=this.g=this.h=null}set(D,U){this.h=D,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let W,V=!1,G=new N,M=()=>{const E=a.Promise.resolve(void 0);W=()=>{E.then(H)}};var H=()=>{for(var E;E=P();){try{E.h.call(E.g)}catch(U){R(U)}var D=F;D.j(E),100>D.h&&(D.h++,E.next=D.g,D.g=E)}V=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(E,D){this.type=E,this.g=this.target=D,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var E=!1,D=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const U=()=>{};a.addEventListener("test",U,D),a.removeEventListener("test",U,D)}catch{}return E}();function q(E,D){if(L.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E){var U=this.type=E.type,J=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;if(this.target=E.target||E.srcElement,this.g=D,D=E.relatedTarget){if(S){e:{try{w(D.nodeName);var be=!0;break e}catch{}be=!1}be||(D=null)}}else U=="mouseover"?D=E.fromElement:U=="mouseout"&&(D=E.toElement);this.relatedTarget=D,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=typeof E.pointerType=="string"?E.pointerType:Z[E.pointerType]||"",this.state=E.state,this.i=E,E.defaultPrevented&&q.aa.h.call(this)}}p(q,L);var Z={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(E,D,U,J,be){this.listener=E,this.proxy=null,this.src=D,this.type=U,this.capture=!!J,this.ha=be,this.key=++he,this.da=this.fa=!1}function me(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function _e(E){this.src=E,this.g={},this.h=0}_e.prototype.add=function(E,D,U,J,be){var Ie=E.toString();E=this.g[Ie],E||(E=this.g[Ie]=[],this.h++);var lt=Be(E,D,J,be);return-1<lt?(D=E[lt],U||(D.fa=!1)):(D=new fe(D,this.src,Ie,!!J,be),D.fa=U,E.push(D)),D};function ge(E,D){var U=D.type;if(U in E.g){var J=E.g[U],be=Array.prototype.indexOf.call(J,D,void 0),Ie;(Ie=0<=be)&&Array.prototype.splice.call(J,be,1),Ie&&(me(D),E.g[U].length==0&&(delete E.g[U],E.h--))}}function Be(E,D,U,J){for(var be=0;be<E.length;++be){var Ie=E[be];if(!Ie.da&&Ie.listener==D&&Ie.capture==!!U&&Ie.ha==J)return be}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),ut={};function Oe(E,D,U,J,be){if(Array.isArray(D)){for(var Ie=0;Ie<D.length;Ie++)Oe(E,D[Ie],U,J,be);return null}return U=at(U),E&&E[ue]?E.K(D,U,l(J)?!!J.capture:!!J,be):Re(E,D,U,!1,J,be)}function Re(E,D,U,J,be,Ie){if(!D)throw Error("Invalid event type");var lt=l(be)?!!be.capture:!!be,ni=gt(E);if(ni||(E[Me]=ni=new _e(E)),U=ni.add(D,U,J,lt,Ie),U.proxy)return U;if(J=Ye(),U.proxy=J,J.src=E,J.listener=U,E.addEventListener)j||(be=lt),be===void 0&&(be=!1),E.addEventListener(D.toString(),J,be);else if(E.attachEvent)E.attachEvent(Je(D.toString()),J);else if(E.addListener&&E.removeListener)E.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Ye(){function E(U){return D.call(E.src,E.listener,U)}const D=Ge;return E}function Ut(E,D,U,J,be){if(Array.isArray(D))for(var Ie=0;Ie<D.length;Ie++)Ut(E,D[Ie],U,J,be);else J=l(J)?!!J.capture:!!J,U=at(U),E&&E[ue]?(E=E.i,D=String(D).toString(),D in E.g&&(Ie=E.g[D],U=Be(Ie,U,J,be),-1<U&&(me(Ie[U]),Array.prototype.splice.call(Ie,U,1),Ie.length==0&&(delete E.g[D],E.h--)))):E&&(E=gt(E))&&(D=E.g[D.toString()],E=-1,D&&(E=Be(D,U,J,be)),(U=-1<E?D[E]:null)&&Ft(U))}function Ft(E){if(typeof E!="number"&&E&&!E.da){var D=E.src;if(D&&D[ue])ge(D.i,E);else{var U=E.type,J=E.proxy;D.removeEventListener?D.removeEventListener(U,J,E.capture):D.detachEvent?D.detachEvent(Je(U),J):D.addListener&&D.removeListener&&D.removeListener(J),(U=gt(D))?(ge(U,E),U.h==0&&(U.src=null,D[Me]=null)):me(E)}}}function Je(E){return E in ut?ut[E]:ut[E]="on"+E}function Ge(E,D){if(E.da)E=!0;else{D=new q(D,this);var U=E.listener,J=E.ha||E.src;E.fa&&Ft(E),E=U.call(J,D)}return E}function gt(E){return E=E[Me],E instanceof _e?E:null}var ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function at(E){return typeof E=="function"?E:(E[ot]||(E[ot]=function(D){return E.handleEvent(D)}),E[ot])}function Et(){Y.call(this),this.i=new _e(this),this.M=this,this.F=null}p(Et,Y),Et.prototype[ue]=!0,Et.prototype.removeEventListener=function(E,D,U,J){Ut(this,E,D,U,J)};function ve(E,D){var U,J=E.F;if(J)for(U=[];J;J=J.F)U.push(J);if(E=E.M,J=D.type||D,typeof D=="string")D=new L(D,E);else if(D instanceof L)D.target=D.target||E;else{var be=D;D=new L(J,E),I(D,be)}if(be=!0,U)for(var Ie=U.length-1;0<=Ie;Ie--){var lt=D.g=U[Ie];be=Se(lt,J,!0,D)&&be}if(lt=D.g=E,be=Se(lt,J,!0,D)&&be,be=Se(lt,J,!1,D)&&be,U)for(Ie=0;Ie<U.length;Ie++)lt=D.g=U[Ie],be=Se(lt,J,!1,D)&&be}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var E=this.i,D;for(D in E.g){for(var U=E.g[D],J=0;J<U.length;J++)me(U[J]);delete E.g[D],E.h--}}this.F=null},Et.prototype.K=function(E,D,U,J){return this.i.add(String(E),D,!1,U,J)},Et.prototype.L=function(E,D,U,J){return this.i.add(String(E),D,!0,U,J)};function Se(E,D,U,J){if(D=E.i.g[String(D)],!D)return!0;D=D.concat();for(var be=!0,Ie=0;Ie<D.length;++Ie){var lt=D[Ie];if(lt&&!lt.da&&lt.capture==U){var ni=lt.listener,vo=lt.ha||lt.src;lt.fa&&ge(E.i,lt),be=ni.call(vo,J)!==!1&&be}}return be&&!J.defaultPrevented}function Fe(E,D,U){if(typeof E=="function")U&&(E=d(E,U));else if(E&&typeof E.handleEvent=="function")E=d(E.handleEvent,E);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:a.setTimeout(E,D||0)}function Ue(E){E.g=Fe(()=>{E.g=null,E.i&&(E.i=!1,Ue(E))},E.l);const D=E.h;E.h=null,E.m.apply(null,D)}class ht extends Y{constructor(D,U){super(),this.m=D,this.l=U,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(E){Y.call(this),this.h=E,this.g={}}p(cn,Y);var Ve=[];function wt(E){x(E.g,function(D,U){this.g.hasOwnProperty(U)&&Ft(D)},E),E.g={}}cn.prototype.N=function(){cn.aa.N.call(this),wt(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=a.JSON.stringify,bn=a.JSON.parse,Lt=class{stringify(E){return a.JSON.stringify(E,void 0)}parse(E){return a.JSON.parse(E,void 0)}};function Ar(){}Ar.prototype.h=null;function Fn(E){return E.h||(E.h=E.i())}function ar(){}var oi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yo(){L.call(this,"d")}p(yo,L);function br(){L.call(this,"c")}p(br,L);var nr={},Uo=null;function Vr(){return Uo=Uo||new Et}nr.La="serverreachability";function Zr(E){L.call(this,nr.La,E)}p(Zr,L);function Pt(E){const D=Vr();ve(D,new Zr(D))}nr.STAT_EVENT="statevent";function Xt(E,D){L.call(this,nr.STAT_EVENT,E),this.stat=D}p(Xt,L);function rr(E){const D=Vr();ve(D,new Xt(D,E))}nr.Ma="timingevent";function Gs(E,D){L.call(this,nr.Ma,E),this.size=D}p(Gs,L);function mi(E,D){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){E()},D)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function ae(E,D,U,J,be,Ie){E.info(function(){if(E.g)if(Ie)for(var lt="",ni=Ie.split("&"),vo=0;vo<ni.length;vo++){var dr=ni[vo].split("=");if(1<dr.length){var qo=dr[0];dr=dr[1];var Wo=qo.split("_");lt=2<=Wo.length&&Wo[1]=="type"?lt+(qo+"="+dr+"&"):lt+(qo+"=redacted&")}}else lt=null;else lt=Ie;return"XMLHTTP REQ ("+J+") [attempt "+be+"]: "+D+`
`+U+`
`+lt})}function ne(E,D,U,J,be,Ie,lt){E.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+be+"]: "+D+`
`+U+`
`+Ie+" "+lt})}function le(E,D,U,J){E.info(function(){return"XMLHTTP TEXT ("+D+"): "+xe(E,U)+(J?" "+J:"")})}function Ee(E,D){E.info(function(){return"TIMEOUT: "+D})}ai.prototype.info=function(){};function xe(E,D){if(!E.g)return D;if(!D)return null;try{var U=JSON.parse(D);if(U){for(E=0;E<U.length;E++)if(Array.isArray(U[E])){var J=U[E];if(!(2>J.length)){var be=J[1];if(Array.isArray(be)&&!(1>be.length)){var Ie=be[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var lt=1;lt<be.length;lt++)be[lt]=""}}}}return bt(U)}catch{return D}}var St={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},It={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},je;function Rt(){}p(Rt,Ar),Rt.prototype.g=function(){return new XMLHttpRequest},Rt.prototype.i=function(){return{}},je=new Rt;function en(E,D,U,J){this.j=E,this.i=D,this.l=U,this.R=J||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ft}function ft(){this.i=null,this.g="",this.h=!1}var kn={},In={};function Gt(E,D,U){E.L=1,E.v=Hn(qe(D)),E.m=U,E.P=!0,Xn(E,null)}function Xn(E,D){E.F=Date.now(),ui(E),E.A=qe(E.v);var U=E.A,J=E.R;Array.isArray(J)||(J=[String(J)]),JO(U.i,"t",J),E.C=0,U=E.j.J,E.h=new ft,E.g=ose(E.j,U?D:null,!E.m),0<E.O&&(E.M=new ht(d(E.Y,E,E.g),E.O)),D=E.U,U=E.g,J=E.ca;var be="readystatechange";Array.isArray(be)||(be&&(Ve[0]=be.toString()),be=Ve);for(var Ie=0;Ie<be.length;Ie++){var lt=Oe(U,be[Ie],J||D.handleEvent,!1,D.h||D);if(!lt)break;D.g[lt.key]=lt}D=E.H?T(E.H):{},E.m?(E.u||(E.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.A,E.u,E.m,D)):(E.u="GET",E.g.ea(E.A,E.u,null,D)),Pt(),ae(E.i,E.u,E.A,E.l,E.R,E.m)}en.prototype.ca=function(E){E=E.target;const D=this.M;D&&rs(E)==3?D.j():this.Y(E)},en.prototype.Y=function(E){try{if(E==this.g)e:{const Wo=rs(this.g);var D=this.g.Ba();const H_=this.g.Z();if(!(3>Wo)&&(Wo!=3||this.g&&(this.h.h||this.g.oa()||Ho(this.g)))){this.J||Wo!=4||D==7||(D==8||0>=H_?Pt(3):Pt(2)),Hr(this);var U=this.g.Z();this.X=U;t:if(Rr(this)){var J=Ho(this.g);E="";var be=J.length,Ie=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),Is(this);var lt="";break t}this.h.i=new a.TextDecoder}for(D=0;D<be;D++)this.h.h=!0,E+=this.h.i.decode(J[D],{stream:!(Ie&&D==be-1)});J.length=0,this.h.g+=E,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=U==200,ne(this.i,this.u,this.A,this.l,this.R,Wo,U),this.o){if(this.T&&!this.K){t:{if(this.g){var ni,vo=this.g;if((ni=vo.g?vo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ni)){var dr=ni;break t}}dr=null}if(U=dr)le(this.i,this.l,U,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ci(this,U);else{this.o=!1,this.s=3,rr(12),Ti(this),Is(this);break e}}if(this.P){U=!0;let qc;for(;!this.J&&this.C<lt.length;)if(qc=Qt(this,lt),qc==In){Wo==4&&(this.s=4,rr(14),U=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(qc==kn){this.s=4,rr(15),le(this.i,this.l,lt,"[Invalid Chunk]"),U=!1;break}else le(this.i,this.l,qc,null),Ci(this,qc);if(Rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wo!=4||lt.length!=0||this.h.h||(this.s=1,rr(16),U=!1),this.o=this.o&&U,!U)le(this.i,this.l,lt,"[Invalid Chunked Response]"),Ti(this),Is(this);else if(0<lt.length&&!this.W){this.W=!0;var qo=this.j;qo.g==this&&qo.ba&&!qo.M&&(qo.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),tj(qo),qo.M=!0,rr(11))}}else le(this.i,this.l,lt,null),Ci(this,lt);Wo==4&&Ti(this),this.o&&!this.J&&(Wo==4?nse(this.j,this):(this.o=!1,ui(this)))}else Vy(this.g),U==400&&0<lt.indexOf("Unknown SID")?(this.s=3,rr(12)):(this.s=0,rr(13)),Ti(this),Is(this)}}}catch{}finally{}};function Rr(E){return E.g?E.u=="GET"&&E.L!=2&&E.j.Ca:!1}function Qt(E,D){var U=E.C,J=D.indexOf(`
`,U);return J==-1?In:(U=Number(D.substring(U,J)),isNaN(U)?kn:(J+=1,J+U>D.length?In:(D=D.slice(J,J+U),E.C=J+U,D)))}en.prototype.cancel=function(){this.J=!0,Ti(this)};function ui(E){E.S=Date.now()+E.I,Li(E,E.I)}function Li(E,D){if(E.B!=null)throw Error("WatchDog timer not null");E.B=mi(d(E.ba,E),D)}function Hr(E){E.B&&(a.clearTimeout(E.B),E.B=null)}en.prototype.ba=function(){this.B=null;const E=Date.now();0<=E-this.S?(Ee(this.i,this.A),this.L!=2&&(Pt(),rr(17)),Ti(this),this.s=2,Is(this)):Li(this,this.S-E)};function Is(E){E.j.G==0||E.J||nse(E.j,E)}function Ti(E){Hr(E);var D=E.M;D&&typeof D.ma=="function"&&D.ma(),E.M=null,wt(E.U),E.g&&(D=E.g,E.g=null,D.abort(),D.ma())}function Ci(E,D){try{var U=E.j;if(U.G!=0&&(U.g==E||ms(U.h,E))){if(!E.K&&ms(U.h,E)&&U.G==3){try{var J=U.Da.g.parse(D)}catch{J=null}if(Array.isArray(J)&&J.length==3){var be=J;if(be[0]==0){e:if(!U.u){if(U.g)if(U.g.F+3e3<E.F)sP(U),rP(U);else break e;ej(U),rr(18)}}else U.za=be[1],0<U.za-U.T&&37500>be[2]&&U.F&&U.v==0&&!U.C&&(U.C=mi(d(U.Za,U),6e3));if(1>=Rn(U.h)&&U.ca){try{U.ca()}catch{}U.ca=void 0}}else Hy(U,11)}else if((E.K||U.g==E)&&sP(U),!v(D))for(be=U.Da.g.parse(D),D=0;D<be.length;D++){let dr=be[D];if(U.T=dr[0],dr=dr[1],U.G==2)if(dr[0]=="c"){U.K=dr[1],U.ia=dr[2];const qo=dr[3];qo!=null&&(U.la=qo,U.j.info("VER="+U.la));const Wo=dr[4];Wo!=null&&(U.Aa=Wo,U.j.info("SVER="+U.Aa));const H_=dr[5];H_!=null&&typeof H_=="number"&&0<H_&&(J=1.5*H_,U.L=J,U.j.info("backChannelRequestTimeoutMs_="+J)),J=U;const qc=E.g;if(qc){const aP=qc.g?qc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aP){var Ie=J.h;Ie.g||aP.indexOf("spdy")==-1&&aP.indexOf("quic")==-1&&aP.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(K(Ie,Ie.h),Ie.h=null))}if(J.D){const nj=qc.g?qc.g.getResponseHeader("X-HTTP-Session-Id"):null;nj&&(J.ya=nj,jt(J.I,J.D,nj))}}U.G=3,U.l&&U.l.ua(),U.ba&&(U.R=Date.now()-E.F,U.j.info("Handshake RTT: "+U.R+"ms")),J=U;var lt=E;if(J.qa=sse(J,J.J?J.ia:null,J.W),lt.K){oe(J.h,lt);var ni=lt,vo=J.L;vo&&(ni.I=vo),ni.B&&(Hr(ni),ui(ni)),J.g=lt}else ese(J);0<U.i.length&&iP(U)}else dr[0]!="stop"&&dr[0]!="close"||Hy(U,7);else U.G==3&&(dr[0]=="stop"||dr[0]=="close"?dr[0]=="stop"?Hy(U,7):U_(U):dr[0]!="noop"&&U.l&&U.l.ta(dr),U.v=0)}}Pt(4)}catch{}}var Ys=class{constructor(E,D){this.g=E,this.map=D}};function ps(E){this.l=E||10,a.PerformanceNavigationTiming?(E=a.performance.getEntriesByType("navigation"),E=0<E.length&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xt(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Rn(E){return E.h?1:E.g?E.g.size:0}function ms(E,D){return E.h?E.h==D:E.g?E.g.has(D):!1}function K(E,D){E.g?E.g.add(D):E.h=D}function oe(E,D){E.h&&E.h==D?E.h=null:E.g&&E.g.has(D)&&E.g.delete(D)}ps.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function ee(E){if(E.h!=null)return E.i.concat(E.h.D);if(E.g!=null&&E.g.size!==0){let D=E.i;for(const U of E.g.values())D=D.concat(U.D);return D}return m(E.i)}function de(E){if(E.V&&typeof E.V=="function")return E.V();if(typeof Map<"u"&&E instanceof Map||typeof Set<"u"&&E instanceof Set)return Array.from(E.values());if(typeof E=="string")return E.split("");if(u(E)){for(var D=[],U=E.length,J=0;J<U;J++)D.push(E[J]);return D}D=[],U=0;for(J in E)D[U++]=E[J];return D}function ye(E){if(E.na&&typeof E.na=="function")return E.na();if(!E.V||typeof E.V!="function"){if(typeof Map<"u"&&E instanceof Map)return Array.from(E.keys());if(!(typeof Set<"u"&&E instanceof Set)){if(u(E)||typeof E=="string"){var D=[];E=E.length;for(var U=0;U<E;U++)D.push(U);return D}D=[],U=0;for(const J in E)D[U++]=J;return D}}}function pe(E,D){if(E.forEach&&typeof E.forEach=="function")E.forEach(D,void 0);else if(u(E)||typeof E=="string")Array.prototype.forEach.call(E,D,void 0);else for(var U=ye(E),J=de(E),be=J.length,Ie=0;Ie<be;Ie++)D.call(void 0,J[Ie],U&&U[Ie],E)}var Pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(E,D){if(E){E=E.split("&");for(var U=0;U<E.length;U++){var J=E[U].indexOf("="),be=null;if(0<=J){var Ie=E[U].substring(0,J);be=E[U].substring(J+1)}else Ie=E[U];D(Ie,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function He(E){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,E instanceof He){this.h=E.h,rt(this,E.j),this.o=E.o,this.g=E.g,At(this,E.s),this.l=E.l;var D=E.i,U=new Hl;U.i=D.i,D.g&&(U.g=new Map(D.g),U.h=D.h),xn(this,U),this.m=E.m}else E&&(D=String(E).match(Pe))?(this.h=!1,rt(this,D[1]||"",!0),this.o=$r(D[2]||""),this.g=$r(D[3]||"",!0),At(this,D[4]),this.l=$r(D[5]||"",!0),xn(this,D[6]||"",!0),this.m=$r(D[7]||"")):(this.h=!1,this.i=new Hl(null,this.h))}He.prototype.toString=function(){var E=[],D=this.j;D&&E.push(Nr(D,sd,!0),":");var U=this.g;return(U||D=="file")&&(E.push("//"),(D=this.o)&&E.push(Nr(D,sd,!0),"@"),E.push(encodeURIComponent(String(U)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.s,U!=null&&E.push(":",String(U))),(U=this.l)&&(this.g&&U.charAt(0)!="/"&&E.push("/"),E.push(Nr(U,U.charAt(0)=="/"?_S:tp,!0))),(U=this.i.toString())&&E.push("?",U),(U=this.m)&&E.push("#",Nr(U,QO)),E.join("")};function qe(E){return new He(E)}function rt(E,D,U){E.j=U?$r(D,!0):D,E.j&&(E.j=E.j.replace(/:$/,""))}function At(E,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);E.s=D}else E.s=null}function xn(E,D,U){D instanceof Hl?(E.i=D,bS(E.i,E.h)):(U||(D=Nr(D,jy)),E.i=new Hl(D,E.h))}function jt(E,D,U){E.i.set(D,U)}function Hn(E){return jt(E,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),E}function $r(E,D){return E?D?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function Nr(E,D,U){return typeof E=="string"?(E=encodeURI(E).replace(D,Vo),U&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function Vo(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var sd=/[#\/\?@]/g,tp=/[#\?:]/g,_S=/[#\?]/g,jy=/[#\?@]/g,QO=/#/g;function Hl(E,D){this.h=this.g=null,this.i=E||null,this.j=!!D}function uu(E){E.g||(E.g=new Map,E.h=0,E.i&&ze(E.i,function(D,U){E.add(decodeURIComponent(D.replace(/\+/g," ")),U)}))}e=Hl.prototype,e.add=function(E,D){uu(this),this.i=null,E=rp(this,E);var U=this.g.get(E);return U||this.g.set(E,U=[]),U.push(D),this.h+=1,this};function np(E,D){uu(E),D=rp(E,D),E.g.has(D)&&(E.i=null,E.h-=E.g.get(D).length,E.g.delete(D))}function B_(E,D){return uu(E),D=rp(E,D),E.g.has(D)}e.forEach=function(E,D){uu(this),this.g.forEach(function(U,J){U.forEach(function(be){E.call(D,be,J,this)},this)},this)},e.na=function(){uu(this);const E=Array.from(this.g.values()),D=Array.from(this.g.keys()),U=[];for(let J=0;J<D.length;J++){const be=E[J];for(let Ie=0;Ie<be.length;Ie++)U.push(D[J])}return U},e.V=function(E){uu(this);let D=[];if(typeof E=="string")B_(this,E)&&(D=D.concat(this.g.get(rp(this,E))));else{E=Array.from(this.g.values());for(let U=0;U<E.length;U++)D=D.concat(E[U])}return D},e.set=function(E,D){return uu(this),this.i=null,E=rp(this,E),B_(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[D]),this.h+=1,this},e.get=function(E,D){return E?(E=this.V(E),0<E.length?String(E[0]):D):D};function JO(E,D,U){np(E,D),0<U.length&&(E.i=null,E.g.set(rp(E,D),m(U)),E.h+=U.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],D=Array.from(this.g.keys());for(var U=0;U<D.length;U++){var J=D[U];const Ie=encodeURIComponent(String(J)),lt=this.V(J);for(J=0;J<lt.length;J++){var be=Ie;lt[J]!==""&&(be+="="+encodeURIComponent(String(lt[J]))),E.push(be)}}return this.i=E.join("&")};function rp(E,D){return D=String(D),E.j&&(D=D.toLowerCase()),D}function bS(E,D){D&&!E.j&&(uu(E),E.i=null,E.g.forEach(function(U,J){var be=J.toLowerCase();J!=be&&(np(this,J),JO(this,be,U))},E)),E.j=D}function ZO(E,D){const U=new ai;if(a.Image){const J=new Image;J.onload=h(lu,U,"TestLoadImage: loaded",!0,D,J),J.onerror=h(lu,U,"TestLoadImage: error",!1,D,J),J.onabort=h(lu,U,"TestLoadImage: abort",!1,D,J),J.ontimeout=h(lu,U,"TestLoadImage: timeout",!1,D,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=E}else D(!1)}function ip(E,D){const U=new ai,J=new AbortController,be=setTimeout(()=>{J.abort(),lu(U,"TestPingServer: timeout",!1,D)},1e4);fetch(E,{signal:J.signal}).then(Ie=>{clearTimeout(be),Ie.ok?lu(U,"TestPingServer: ok",!0,D):lu(U,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(be),lu(U,"TestPingServer: error",!1,D)})}function lu(E,D,U,J,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),J(U)}catch{}}function Z8(){this.g=new Lt}function eP(E,D,U){const J=U||"";try{pe(E,function(be,Ie){let lt=be;l(be)&&(lt=bt(be)),D.push(J+Ie+"="+encodeURIComponent(lt))})}catch(be){throw D.push(J+"type="+encodeURIComponent("_badmap")),be}}function By(E){this.l=E.Ub||null,this.j=E.eb||!1}p(By,Ar),By.prototype.g=function(){return new zy(this.l,this.j)},By.prototype.i=function(E){return function(){return E}}({});function zy(E,D){Et.call(this),this.D=E,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(zy,Et),e=zy.prototype,e.open=function(E,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=E,this.A=D,this.readyState=1,eg(this)},e.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};E&&(D.body=E),(this.D||a).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uy(this)),this.readyState=0},e.Sa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,eg(this)),this.g&&(this.readyState=3,eg(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tP(this)}else E.text().then(this.Ra.bind(this),this.ga.bind(this))};function tP(E){E.j.read().then(E.Pa.bind(E)).catch(E.ga.bind(E))}e.Pa=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var D=E.value?E.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!E.done}))&&(this.response=this.responseText+=D)}E.done?Uy(this):eg(this),this.readyState==3&&tP(this)}},e.Ra=function(E){this.g&&(this.response=this.responseText=E,Uy(this))},e.Qa=function(E){this.g&&(this.response=E,Uy(this))},e.ga=function(){this.g&&Uy(this)};function Uy(E){E.readyState=4,E.l=null,E.j=null,E.v=null,eg(E)}e.setRequestHeader=function(E,D){this.u.append(E,D)},e.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],D=this.h.entries();for(var U=D.next();!U.done;)U=U.value,E.push(U[0]+": "+U[1]),U=D.next();return E.join(`\r
`)};function eg(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(zy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function nP(E){let D="";return x(E,function(U,J){D+=J,D+=":",D+=U,D+=`\r
`}),D}function re(E,D,U){e:{for(J in U){var J=!1;break e}J=!0}J||(U=nP(U),typeof E=="string"?U!=null&&encodeURIComponent(String(U)):jt(E,D,U))}function ce(E){Et.call(this),this.headers=new Map,this.o=E||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ce,Et);var Te=/^https?$/i,$t=["POST","PUT"];e=ce.prototype,e.Ha=function(E){this.J=E},e.ea=function(E,D,U,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);D=D?D.toUpperCase():"GET",this.D=E,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?Fn(this.o):Fn(je),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(D,String(E),!0),this.B=!1}catch(Ie){Un(this,Ie);return}if(E=U||"",U=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var be in J)U.set(be,J[be]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ie of J.keys())U.set(Ie,J.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(U.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),be=a.FormData&&E instanceof a.FormData,!(0<=Array.prototype.indexOf.call($t,D,void 0))||J||be||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,lt]of U)this.g.setRequestHeader(Ie,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ti(this),this.u=!0,this.g.send(E),this.u=!1}catch(Ie){Un(this,Ie)}};function Un(E,D){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=D,E.m=5,Ir(E),qn(E)}function Ir(E){E.A||(E.A=!0,ve(E,"complete"),ve(E,"error"))}e.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=E||7,ve(this,"complete"),ve(this,"abort"),qn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qn(this,!0)),ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ei(this):this.bb())},e.bb=function(){ei(this)};function ei(E){if(E.h&&typeof o<"u"&&(!E.v[1]||rs(E)!=4||E.Z()!=2)){if(E.u&&rs(E)==4)Fe(E.Ea,0,E);else if(ve(E,"readystatechange"),rs(E)==4){E.h=!1;try{const lt=E.Z();e:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var U;if(!(U=D)){var J;if(J=lt===0){var be=String(E.D).match(Pe)[1]||null;!be&&a.self&&a.self.location&&(be=a.self.location.protocol.slice(0,-1)),J=!Te.test(be?be.toLowerCase():"")}U=J}if(U)ve(E,"complete"),ve(E,"success");else{E.m=6;try{var Ie=2<rs(E)?E.g.statusText:""}catch{Ie=""}E.l=Ie+" ["+E.Z()+"]",Ir(E)}}finally{qn(E)}}}}function qn(E,D){if(E.g){ti(E);const U=E.g,J=E.v[0]?()=>{}:null;E.g=null,E.v=null,D||ve(E,"ready");try{U.onreadystatechange=J}catch{}}}function ti(E){E.I&&(a.clearTimeout(E.I),E.I=null)}e.isActive=function(){return!!this.g};function rs(E){return E.g?E.g.readyState:0}e.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(E){if(this.g){var D=this.g.responseText;return E&&D.indexOf(E)==0&&(D=D.substring(E.length)),bn(D)}};function Ho(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.H){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function Vy(E){const D={};E=(E.g&&2<=rs(E)&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<E.length;J++){if(v(E[J]))continue;var U=k(E[J]);const be=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Ie=D[be]||[];D[be]=Ie,Ie.push(U)}b(D,function(J){return J.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sp(E,D,U){return U&&U.internalChannelParams&&U.internalChannelParams[E]||D}function z_(E){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sp("failFast",!1,E),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sp("baseRetryDelayMs",5e3,E),this.cb=sp("retryDelaySeedMs",1e4,E),this.Wa=sp("forwardChannelMaxRetries",2,E),this.wa=sp("forwardChannelRequestTimeoutMs",2e4,E),this.pa=E&&E.xmlHttpFactory||void 0,this.Xa=E&&E.Tb||void 0,this.Ca=E&&E.useFetchStreams||!1,this.L=void 0,this.J=E&&E.supportsCrossDomainXhr||!1,this.K="",this.h=new ps(E&&E.concurrentRequestLimit),this.Da=new Z8,this.P=E&&E.fastHandshake||!1,this.O=E&&E.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=E&&E.Rb||!1,E&&E.xa&&this.j.xa(),E&&E.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&E&&E.detectBufferingProxy||!1,this.ja=void 0,E&&E.longPollingTimeout&&0<E.longPollingTimeout&&(this.ja=E.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=z_.prototype,e.la=8,e.G=1,e.connect=function(E,D,U,J){rr(0),this.W=E,this.H=D||{},U&&J!==void 0&&(this.H.OSID=U,this.H.OAID=J),this.F=this.X,this.I=sse(this,null,this.W),iP(this)};function U_(E){if(Qie(E),E.G==3){var D=E.U++,U=qe(E.I);if(jt(U,"SID",E.K),jt(U,"RID",D),jt(U,"TYPE","terminate"),wS(E,U),D=new en(E,E.j,D),D.L=2,D.v=Hn(qe(U)),U=!1,a.navigator&&a.navigator.sendBeacon)try{U=a.navigator.sendBeacon(D.v.toString(),"")}catch{}!U&&a.Image&&(new Image().src=D.v,U=!0),U||(D.g=ose(D.j,null),D.g.ea(D.v)),D.F=Date.now(),ui(D)}ise(E)}function rP(E){E.g&&(tj(E),E.g.cancel(),E.g=null)}function Qie(E){rP(E),E.u&&(a.clearTimeout(E.u),E.u=null),sP(E),E.h.cancel(),E.s&&(typeof E.s=="number"&&a.clearTimeout(E.s),E.s=null)}function iP(E){if(!xt(E.h)&&!E.s){E.s=!0;var D=E.Ga;W||M(),V||(W(),V=!0),G.add(D,E),E.B=0}}function NWe(E,D){return Rn(E.h)>=E.h.j-(E.s?1:0)?!1:E.s?(E.i=D.D.concat(E.i),!0):E.G==1||E.G==2||E.B>=(E.Va?0:E.Wa)?!1:(E.s=mi(d(E.Ga,E,D),rse(E,E.B)),E.B++,!0)}e.Ga=function(E){if(this.s)if(this.s=null,this.G==1){if(!E){this.U=Math.floor(1e5*Math.random()),E=this.U++;const be=new en(this,this.j,E);let Ie=this.o;if(this.S&&(Ie?(Ie=T(Ie),I(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(be.H=Ie,Ie=null),this.P)e:{for(var D=0,U=0;U<this.i.length;U++){t:{var J=this.i[U];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(D+=J,4096<D){D=U;break e}if(D===4096||U===this.i.length-1){D=U+1;break e}}D=1e3}else D=1e3;D=Zie(this,be,D),U=qe(this.I),jt(U,"RID",E),jt(U,"CVER",22),this.D&&jt(U,"X-HTTP-Session-Id",this.D),wS(this,U),Ie&&(this.O?D="headers="+encodeURIComponent(String(nP(Ie)))+"&"+D:this.m&&re(U,this.m,Ie)),K(this.h,be),this.Ua&&jt(U,"TYPE","init"),this.P?(jt(U,"$req",D),jt(U,"SID","null"),be.T=!0,Gt(be,U,null)):Gt(be,U,D),this.G=2}}else this.G==3&&(E?Jie(this,E):this.i.length==0||xt(this.h)||Jie(this))};function Jie(E,D){var U;D?U=D.l:U=E.U++;const J=qe(E.I);jt(J,"SID",E.K),jt(J,"RID",U),jt(J,"AID",E.T),wS(E,J),E.m&&E.o&&re(J,E.m,E.o),U=new en(E,E.j,U,E.B+1),E.m===null&&(U.H=E.o),D&&(E.i=D.D.concat(E.i)),D=Zie(E,U,1e3),U.I=Math.round(.5*E.wa)+Math.round(.5*E.wa*Math.random()),K(E.h,U),Gt(U,J,D)}function wS(E,D){E.H&&x(E.H,function(U,J){jt(D,J,U)}),E.l&&pe({},function(U,J){jt(D,J,U)})}function Zie(E,D,U){U=Math.min(E.i.length,U);var J=E.l?d(E.l.Na,E.l,E):null;e:{var be=E.i;let Ie=-1;for(;;){const lt=["count="+U];Ie==-1?0<U?(Ie=be[0].g,lt.push("ofs="+Ie)):Ie=0:lt.push("ofs="+Ie);let ni=!0;for(let vo=0;vo<U;vo++){let dr=be[vo].g;const qo=be[vo].map;if(dr-=Ie,0>dr)Ie=Math.max(0,be[vo].g-100),ni=!1;else try{eP(qo,lt,"req"+dr+"_")}catch{J&&J(qo)}}if(ni){J=lt.join("&");break e}}}return E=E.i.splice(0,U),D.D=E,J}function ese(E){if(!E.g&&!E.u){E.Y=1;var D=E.Fa;W||M(),V||(W(),V=!0),G.add(D,E),E.v=0}}function ej(E){return E.g||E.u||3<=E.v?!1:(E.Y++,E.u=mi(d(E.Fa,E),rse(E,E.v)),E.v++,!0)}e.Fa=function(){if(this.u=null,tse(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var E=2*this.R;this.j.info("BP detection timer enabled: "+E),this.A=mi(d(this.ab,this),E)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rr(10),rP(this),tse(this))};function tj(E){E.A!=null&&(a.clearTimeout(E.A),E.A=null)}function tse(E){E.g=new en(E,E.j,"rpc",E.Y),E.m===null&&(E.g.H=E.o),E.g.O=0;var D=qe(E.qa);jt(D,"RID","rpc"),jt(D,"SID",E.K),jt(D,"AID",E.T),jt(D,"CI",E.F?"0":"1"),!E.F&&E.ja&&jt(D,"TO",E.ja),jt(D,"TYPE","xmlhttp"),wS(E,D),E.m&&E.o&&re(D,E.m,E.o),E.L&&(E.g.I=E.L);var U=E.g;E=E.ia,U.L=1,U.v=Hn(qe(D)),U.m=null,U.P=!0,Xn(U,E)}e.Za=function(){this.C!=null&&(this.C=null,rP(this),ej(this),rr(19))};function sP(E){E.C!=null&&(a.clearTimeout(E.C),E.C=null)}function nse(E,D){var U=null;if(E.g==D){sP(E),tj(E),E.g=null;var J=2}else if(ms(E.h,D))U=D.D,oe(E.h,D),J=1;else return;if(E.G!=0){if(D.o)if(J==1){U=D.m?D.m.length:0,D=Date.now()-D.F;var be=E.B;J=Vr(),ve(J,new Gs(J,U)),iP(E)}else ese(E);else if(be=D.s,be==3||be==0&&0<D.X||!(J==1&&NWe(E,D)||J==2&&ej(E)))switch(U&&0<U.length&&(D=E.h,D.i=D.i.concat(U)),be){case 1:Hy(E,5);break;case 4:Hy(E,10);break;case 3:Hy(E,6);break;default:Hy(E,2)}}}function rse(E,D){let U=E.Ta+Math.floor(Math.random()*E.cb);return E.isActive()||(U*=2),U*D}function Hy(E,D){if(E.j.info("Error code "+D),D==2){var U=d(E.fb,E),J=E.Xa;const be=!J;J=new He(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rt(J,"https"),Hn(J),be?ZO(J.toString(),U):ip(J.toString(),U)}else rr(2);E.G=0,E.l&&E.l.sa(D),ise(E),Qie(E)}e.fb=function(E){E?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))};function ise(E){if(E.G=0,E.ka=[],E.l){const D=ee(E.h);(D.length!=0||E.i.length!=0)&&(g(E.ka,D),g(E.ka,E.i),E.h.i.length=0,m(E.i),E.i.length=0),E.l.ra()}}function sse(E,D,U){var J=U instanceof He?qe(U):new He(U);if(J.g!="")D&&(J.g=D+"."+J.g),At(J,J.s);else{var be=a.location;J=be.protocol,D=D?D+"."+be.hostname:be.hostname,be=+be.port;var Ie=new He(null);J&&rt(Ie,J),D&&(Ie.g=D),be&&At(Ie,be),U&&(Ie.l=U),J=Ie}return U=E.D,D=E.ya,U&&D&&jt(J,U,D),jt(J,"VER",E.la),wS(E,J),J}function ose(E,D,U){if(D&&!E.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=E.Ca&&!E.pa?new ce(new By({eb:U})):new ce(E.pa),D.Ha(E.J),D}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function ase(){}e=ase.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function oP(){}oP.prototype.g=function(E,D){return new tl(E,D)};function tl(E,D){Et.call(this),this.g=new z_(D),this.l=E,this.h=D&&D.messageUrlParams||null,E=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(E?E["X-WebChannel-Content-Type"]=D.messageContentType:E={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(E?E["X-WebChannel-Client-Profile"]=D.va:E={"X-WebChannel-Client-Profile":D.va}),this.g.S=E,(E=D&&D.Sb)&&!v(E)&&(this.g.m=E),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!v(D)&&(this.g.D=D,E=this.h,E!==null&&D in E&&(E=this.h,D in E&&delete E[D])),this.j=new V_(this)}p(tl,Et),tl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tl.prototype.close=function(){U_(this.g)},tl.prototype.o=function(E){var D=this.g;if(typeof E=="string"){var U={};U.__data__=E,E=U}else this.u&&(U={},U.__data__=bt(E),E=U);D.i.push(new Ys(D.Ya++,E)),D.G==3&&iP(D)},tl.prototype.N=function(){this.g.l=null,delete this.j,U_(this.g),delete this.g,tl.aa.N.call(this)};function use(E){yo.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var D=E.__sm__;if(D){e:{for(const U in D){E=U;break e}E=void 0}(this.i=E)&&(E=this.i,D=D!==null&&E in D?D[E]:void 0),this.data=D}else this.data=E}p(use,yo);function lse(){br.call(this),this.status=1}p(lse,br);function V_(E){this.g=E}p(V_,ase),V_.prototype.ua=function(){ve(this.g,"a")},V_.prototype.ta=function(E){ve(this.g,new use(E))},V_.prototype.sa=function(E){ve(this.g,new lse)},V_.prototype.ra=function(){ve(this.g,"b")},oP.prototype.createWebChannel=oP.prototype.g,tl.prototype.send=tl.prototype.o,tl.prototype.open=tl.prototype.m,tl.prototype.close=tl.prototype.close,U5e=function(){return new oP},z5e=function(){return Vr()},B5e=nr,nq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,f$=St,It.COMPLETE="complete",j5e=It,ar.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Et.prototype.listen=Et.prototype.K,QT=ar,F5e=By,ce.prototype.listenOnce=ce.prototype.L,ce.prototype.getLastError=ce.prototype.Ka,ce.prototype.getLastErrorCode=ce.prototype.Ba,ce.prototype.getStatus=ce.prototype.Z,ce.prototype.getResponseJson=ce.prototype.Oa,ce.prototype.getResponseText=ce.prototype.oa,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Ha,L5e=ce}).apply(typeof Ok<"u"?Ok:typeof self<"u"?self:typeof window<"u"?window:{});const X0e="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gu.UNAUTHENTICATED=new gu(null),gu.GOOGLE_CREDENTIALS=new gu("google-credentials-uid"),gu.FIRST_PARTY=new gu("first-party-uid"),gu.MOCK_USER=new gu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gx="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new q5("@firebase/firestore");function rT(){return j1.logLevel}function Nt(e,...t){if(j1.logLevel<=Jn.DEBUG){const n=t.map(xZ);j1.debug(`Firestore (${Gx}): ${e}`,...n)}}function Tm(e,...t){if(j1.logLevel<=Jn.ERROR){const n=t.map(xZ);j1.error(`Firestore (${Gx}): ${e}`,...n)}}function EA(e,...t){if(j1.logLevel<=Jn.WARN){const n=t.map(xZ);j1.warn(`Firestore (${Gx}): ${e}`,...n)}}function xZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(e="Unexpected state"){const t=`FIRESTORE (${Gx}) INTERNAL ASSERTION FAILED: `+e;throw Tm(t),new Error(t)}function hi(e,t){e||gn()}function En(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Hh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kYt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class RYt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(gu.UNAUTHENTICATED))}shutdown(){}}class $Yt{constructor(t){this.t=t,this.currentUser=gu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Zp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(hi(typeof r.accessToken=="string"),new kYt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return hi(t===null||typeof t=="string"),new gu(t)}}class NYt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=gu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class DYt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new NYt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(gu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class MYt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LYt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(hi(typeof n.token=="string"),this.R=n.token,new MYt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FYt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=FYt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function xr(e,t){return e<t?-1:e>t?1:0}function PE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return zs.fromMillis(Date.now())}static fromDate(t){return zs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new zs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xr(this.nanoseconds,t.nanoseconds):xr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new wn(t)}static min(){return new wn(new zs(0,0))}static max(){return new wn(new zs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t,n,r){n===void 0?n=0:n>t.length&&gn(),r===void 0?r=t.length-n:r>t.length-n&&gn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return xA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class bi extends xA{construct(t,n,r){return new bi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ct(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new bi(n)}static emptyPath(){return new bi([])}}const jYt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oo extends xA{construct(t,n,r){return new Oo(t,n,r)}static isValidIdentifier(t){return jYt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Oo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ct(Le.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ct(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ct(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ct(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Oo(n)}static emptyPath(){return new Oo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.path=t}static fromPath(t){return new Kt(bi.fromString(t))}static fromName(t){return new Kt(bi.fromString(t).popFirst(5))}static empty(){return new Kt(bi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return bi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Kt(new bi(t.slice()))}}function BYt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=wn.fromTimestamp(r===1e9?new zs(n+1,0):new zs(n,r));return new J0(i,Kt.empty(),t)}function zYt(e){return new J0(e.readTime,e.key,-1)}class J0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new J0(wn.min(),Kt.empty(),-1)}static max(){return new J0(wn.max(),Kt.empty(),-1)}}function UYt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Kt.comparator(e.documentKey,t.documentKey),n!==0?n:xr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VYt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HYt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(e){if(e.code!==Le.FAILED_PRECONDITION||e.message!==VYt)throw e;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&gn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ke((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ke?n:Ke.resolve(n)}catch(n){return Ke.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ke.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ke.reject(n)}static resolve(t){return new Ke((n,r)=>{n(t)})}static reject(t){return new Ke((n,r)=>{r(t)})}static waitFor(t){return new Ke((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ke.resolve(!1);for(const r of t)n=n.next(i=>i?Ke.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ke((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ke((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function qYt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oO(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}SZ.oe=-1;function X5(e){return e==null}function iL(e){return e===0&&1/e==-1/0}function WYt(e){return typeof e=="number"&&Number.isInteger(e)&&!iL(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0e(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function w_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function H5e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n){this.comparator=t,this.root=n||To.EMPTY}insert(t,n){return new Vi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new Vi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Pk(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Pk(this.root,t,this.comparator,!1)}getReverseIterator(){return new Pk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Pk(this.root,t,this.comparator,!0)}}class Pk{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new To(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gn();const t=this.left.check();if(t!==this.right.check())throw gn();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw gn()}get value(){throw gn()}get color(){throw gn()}get left(){throw gn()}get right(){throw gn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new To(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t){this.comparator=t,this.data=new Vi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new J0e(this.data.getIterator())}getIteratorFrom(t){return new J0e(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new No(this.comparator);return n.data=t,n}}class J0e{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t){this.fields=t,t.sort(Oo.comparator)}static empty(){return new _l([])}unionWith(t){let n=new No(Oo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new _l(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return PE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new q5e("Invalid base64 string: "+s):s}}(t);return new Ta(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ta(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ta.EMPTY_BYTE_STRING=new Ta("");const GYt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z0(e){if(hi(!!e),typeof e=="string"){let t=0;const n=GYt.exec(e);if(hi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vs(e.seconds),nanos:vs(e.nanos)}}function vs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function B1(e){return typeof e=="string"?Ta.fromBase64String(e):Ta.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function CZ(e){const t=e.mapValue.fields.__previous_value__;return TZ(t)?CZ(t):t}function SA(e){const t=Z0(e.mapValue.fields.__local_write_time__.timestampValue);return new zs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YYt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class TA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new TA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof TA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function z1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?TZ(e)?4:KYt(e)?9007199254740991:10:gn()}function Ih(e,t){if(e===t)return!0;const n=z1(e);if(n!==z1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return SA(e).isEqual(SA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Z0(i.timestampValue),a=Z0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return B1(i.bytesValue).isEqual(B1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return vs(i.geoPointValue.latitude)===vs(s.geoPointValue.latitude)&&vs(i.geoPointValue.longitude)===vs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vs(i.integerValue)===vs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=vs(i.doubleValue),a=vs(s.doubleValue);return o===a?iL(o)===iL(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return PE(e.arrayValue.values||[],t.arrayValue.values||[],Ih);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Q0e(o)!==Q0e(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ih(o[u],a[u])))return!1;return!0}(e,t);default:return gn()}}function CA(e,t){return(e.values||[]).find(n=>Ih(n,t))!==void 0}function kE(e,t){if(e===t)return 0;const n=z1(e),r=z1(t);if(n!==r)return xr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=vs(s.integerValue||s.doubleValue),u=vs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Z0e(e.timestampValue,t.timestampValue);case 4:return Z0e(SA(e),SA(t));case 5:return xr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=B1(s),u=B1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=xr(a[l],u[l]);if(c!==0)return c}return xr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=xr(vs(s.latitude),vs(o.latitude));return a!==0?a:xr(vs(s.longitude),vs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=kE(a[l],u[l]);if(c)return c}return xr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===kk.mapValue&&o===kk.mapValue)return 0;if(s===kk.mapValue)return 1;if(o===kk.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=xr(u[f],c[f]);if(d!==0)return d;const h=kE(a[u[f]],l[c[f]]);if(h!==0)return h}return xr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw gn()}}function Z0e(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return xr(e,t);const n=Z0(e),r=Z0(t),i=xr(n.seconds,r.seconds);return i!==0?i:xr(n.nanos,r.nanos)}function RE(e){return rq(e)}function rq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Z0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return B1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Kt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rq(n.fields[o])}`;return i+"}"}(e.mapValue):gn()}function eye(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function iq(e){return!!e&&"integerValue"in e}function AZ(e){return!!e&&"arrayValue"in e}function tye(e){return!!e&&"nullValue"in e}function nye(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function d$(e){return!!e&&"mapValue"in e}function eC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return w_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=eC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=eC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function KYt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t){this.value=t}static empty(){return new Cu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!d$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=eC(n)}setAll(t){let n=Oo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=eC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());d$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ih(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];d$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){w_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Cu(eC(this.value))}}function W5e(e){const t=[];return w_(e.fields,(n,r)=>{const i=new Oo([n]);if(d$(r)){const s=W5e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new _l(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new fa(t,0,wn.min(),wn.min(),wn.min(),Cu.empty(),0)}static newFoundDocument(t,n,r,i){return new fa(t,1,n,wn.min(),r,i,0)}static newNoDocument(t,n){return new fa(t,2,n,wn.min(),wn.min(),Cu.empty(),0)}static newUnknownDocument(t,n){return new fa(t,3,n,wn.min(),wn.min(),Cu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(wn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sL=class{constructor(t,n){this.position=t,this.inclusive=n}};function rye(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Kt.comparator(Kt.fromName(o.referenceValue),n.key):r=kE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function iye(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ih(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t,n="asc"){this.field=t,this.dir=n}}function XYt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G5e=class{};class Es extends G5e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new JYt(t,n,r):n==="array-contains"?new tKt(t,r):n==="in"?new nKt(t,r):n==="not-in"?new rKt(t,r):n==="array-contains-any"?new iKt(t,r):new Es(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new ZYt(t,r):new eKt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(kE(n,this.value)):n!==null&&z1(this.value)===z1(n)&&this.matchesComparison(kE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bf extends G5e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Bf(t,n)}matches(t){return Y5e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Y5e(e){return e.op==="and"}function K5e(e){return QYt(e)&&Y5e(e)}function QYt(e){for(const t of e.filters)if(t instanceof Bf)return!1;return!0}function sq(e){if(e instanceof Es)return e.field.canonicalString()+e.op.toString()+RE(e.value);if(K5e(e))return e.filters.map(t=>sq(t)).join(",");{const t=e.filters.map(n=>sq(n)).join(",");return`${e.op}(${t})`}}function X5e(e,t){return e instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.field.isEqual(i.field)&&Ih(r.value,i.value)}(e,t):e instanceof Bf?function(r,i){return i instanceof Bf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&X5e(o,i.filters[a]),!0):!1}(e,t):void gn()}function Q5e(e){return e instanceof Es?function(n){return`${n.field.canonicalString()} ${n.op} ${RE(n.value)}`}(e):e instanceof Bf?function(n){return n.op.toString()+" {"+n.getFilters().map(Q5e).join(" ,")+"}"}(e):"Filter"}class JYt extends Es{constructor(t,n,r){super(t,n,r),this.key=Kt.fromName(r.referenceValue)}matches(t){const n=Kt.comparator(t.key,this.key);return this.matchesComparison(n)}}class ZYt extends Es{constructor(t,n){super(t,"in",n),this.keys=J5e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class eKt extends Es{constructor(t,n){super(t,"not-in",n),this.keys=J5e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function J5e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Kt.fromName(r.referenceValue))}class tKt extends Es{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return AZ(n)&&CA(n.arrayValue,this.value)}}class nKt extends Es{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&CA(this.value.arrayValue,n)}}class rKt extends Es{constructor(t,n){super(t,"not-in",n)}matches(t){if(CA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!CA(this.value.arrayValue,n)}}class iKt extends Es{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!AZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>CA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sKt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function sye(e,t=null,n=[],r=[],i=null,s=null,o=null){return new sKt(e,t,n,r,i,s,o)}function IZ(e){const t=En(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>sq(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),X5(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>RE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>RE(r)).join(",")),t.ue=n}return t.ue}function OZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!XYt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!X5e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!iye(e.startAt,t.startAt)&&iye(e.endAt,t.endAt)}function oq(e){return Kt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oKt(e,t,n,r,i,s,o,a){return new Yx(e,t,n,r,i,s,o,a)}function PZ(e){return new Yx(e)}function oye(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Z5e(e){return e.collectionGroup!==null}function tC(e){const t=En(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new No(Oo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new AA(s,r))}),n.has(Oo.keyField().canonicalString())||t.ce.push(new AA(Oo.keyField(),r))}return t.ce}function oh(e){const t=En(e);return t.le||(t.le=aKt(t,tC(e))),t.le}function aKt(e,t){if(e.limitType==="F")return sye(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new AA(i.field,s)});const n=e.endAt?new sL(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sL(e.startAt.position,e.startAt.inclusive):null;return sye(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function aq(e,t){const n=e.filters.concat([t]);return new Yx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function uq(e,t,n){return new Yx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Q5(e,t){return OZ(oh(e),oh(t))&&e.limitType===t.limitType}function eFe(e){return`${IZ(oh(e))}|lt:${e.limitType}`}function Tb(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Q5e(i)).join(", ")}]`),X5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>RE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>RE(i)).join(",")),`Target(${r})`}(oh(e))}; limitType=${e.limitType})`}function J5(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Kt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of tC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=rye(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,tC(r),i)||r.endAt&&!function(o,a,u){const l=rye(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,tC(r),i))}(e,t)}function uKt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function tFe(e){return(t,n)=>{let r=!1;for(const i of tC(e)){const s=lKt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function lKt(e,t,n){const r=e.field.isKeyField()?Kt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?kE(u,l):gn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){w_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return H5e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cKt=new Vi(Kt.comparator);function Cm(){return cKt}const nFe=new Vi(Kt.comparator);function JT(...e){let t=nFe;for(const n of e)t=t.insert(n.key,n);return t}function rFe(e){let t=nFe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Xv(){return nC()}function iFe(){return nC()}function nC(){return new Kx(e=>e.toString(),(e,t)=>e.isEqual(t))}const fKt=new Vi(Kt.comparator),dKt=new No(Kt.comparator);function Wn(...e){let t=dKt;for(const n of e)t=t.add(n);return t}const hKt=new No(xr);function pKt(){return hKt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sFe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iL(t)?"-0":t}}function oFe(e){return{integerValue:""+e}}function mKt(e,t){return WYt(t)?oFe(t):sFe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(){this._=void 0}}function gKt(e,t,n){return e instanceof IA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&TZ(s)&&(s=CZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof OA?uFe(e,t):e instanceof PA?lFe(e,t):function(i,s){const o=aFe(i,s),a=aye(o)+aye(i.Pe);return iq(o)&&iq(i.Pe)?oFe(a):sFe(i.serializer,a)}(e,t)}function yKt(e,t,n){return e instanceof OA?uFe(e,t):e instanceof PA?lFe(e,t):n}function aFe(e,t){return e instanceof oL?function(r){return iq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class IA extends Z5{}class OA extends Z5{constructor(t){super(),this.elements=t}}function uFe(e,t){const n=cFe(t);for(const r of e.elements)n.some(i=>Ih(i,r))||n.push(r);return{arrayValue:{values:n}}}class PA extends Z5{constructor(t){super(),this.elements=t}}function lFe(e,t){let n=cFe(t);for(const r of e.elements)n=n.filter(i=>!Ih(i,r));return{arrayValue:{values:n}}}class oL extends Z5{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function aye(e){return vs(e.integerValue||e.doubleValue)}function cFe(e){return AZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vKt{constructor(t,n){this.field=t,this.transform=n}}function _Kt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof OA&&i instanceof OA||r instanceof PA&&i instanceof PA?PE(r.elements,i.elements,Ih):r instanceof oL&&i instanceof oL?Ih(r.Pe,i.Pe):r instanceof IA&&i instanceof IA}(e.transform,t.transform)}class bKt{constructor(t,n){this.version=t,this.transformResults=n}}class kf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new kf}static exists(t){return new kf(void 0,t)}static updateTime(t){return new kf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function h$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class eF{}function fFe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new kZ(e.key,kf.none()):new aO(e.key,e.data,kf.none());{const n=e.data,r=Cu.empty();let i=new No(Oo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Iy(e.key,r,new _l(i.toArray()),kf.none())}}function wKt(e,t,n){e instanceof aO?function(i,s,o){const a=i.value.clone(),u=lye(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Iy?function(i,s,o){if(!h$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=lye(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(dFe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function rC(e,t,n,r){return e instanceof aO?function(s,o,a,u){if(!h$(s.precondition,o))return a;const l=s.value.clone(),c=cye(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Iy?function(s,o,a,u){if(!h$(s.precondition,o))return a;const l=cye(s.fieldTransforms,u,o),c=o.data;return c.setAll(dFe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return h$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function EKt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=aFe(r.transform,i||null);s!=null&&(n===null&&(n=Cu.empty()),n.set(r.field,s))}return n||null}function uye(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&PE(r,i,(s,o)=>_Kt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class aO extends eF{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Iy extends eF{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dFe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function lye(e,t,n){const r=new Map;hi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,yKt(o,a,n[i]))}return r}function cye(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,gKt(s,o,t))}return r}class kZ extends eF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xKt extends eF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SKt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&wKt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=rC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=rC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=iFe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=fFe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(wn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Wn())}isEqual(t){return this.batchId===t.batchId&&PE(this.mutations,t.mutations,(n,r)=>uye(n,r))&&PE(this.baseMutations,t.baseMutations,(n,r)=>uye(n,r))}}class RZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){hi(t.mutations.length===r.length);let i=function(){return fKt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new RZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TKt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CKt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs,ir;function AKt(e){switch(e){default:return gn();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function hFe(e){if(e===void 0)return Tm("GRPC error has no .code"),Le.UNKNOWN;switch(e){case gs.OK:return Le.OK;case gs.CANCELLED:return Le.CANCELLED;case gs.UNKNOWN:return Le.UNKNOWN;case gs.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case gs.INTERNAL:return Le.INTERNAL;case gs.UNAVAILABLE:return Le.UNAVAILABLE;case gs.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case gs.NOT_FOUND:return Le.NOT_FOUND;case gs.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case gs.ABORTED:return Le.ABORTED;case gs.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case gs.DATA_LOSS:return Le.DATA_LOSS;default:return gn()}}(ir=gs||(gs={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IKt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OKt=new l1([4294967295,4294967295],0);function fye(e){const t=IKt().encode(e),n=new M5e;return n.update(t),new Uint8Array(n.digest())}function dye(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new l1([n,r],0),new l1([i,s],0)]}class $Z{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ZT(`Invalid padding: ${n}`);if(r<0)throw new ZT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ZT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ZT(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=l1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(l1.fromNumber(r)));return i.compare(OKt)===1&&(i=new l1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=fye(t),[r,i]=dye(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new $Z(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=fye(t),[r,i]=dye(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ZT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,uO.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new tF(wn.min(),i,new Vi(xr),Cm(),Wn())}}class uO{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new uO(r,n,Wn(),Wn(),Wn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p${constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class pFe{constructor(t,n){this.targetId=t,this.me=n}}class mFe{constructor(t,n,r=Ta.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hye{constructor(){this.fe=0,this.ge=mye(),this.pe=Ta.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Wn(),n=Wn(),r=Wn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:gn()}}),new uO(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=mye()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,hi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class PKt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Cm(),this.qe=pye(),this.Qe=new Vi(xr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:gn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(oq(s))if(r===0){const o=new Kt(s.path);this.Ue(n,o,fa.newNoDocument(o,wn.min()))}else hi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=B1(r).toUint8Array()}catch(u){if(u instanceof q5e)return EA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new $Z(o,i,s)}catch(u){return EA(u instanceof ZT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&oq(a.target)){const u=new Kt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,fa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Wn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new tF(t,n,this.Qe,this.ke,r);return this.ke=Cm(),this.qe=pye(),this.Qe=new Vi(xr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new hye,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new No(xr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Nt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new hye),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function pye(){return new Vi(Kt.comparator)}function mye(){return new Vi(Kt.comparator)}const kKt={asc:"ASCENDING",desc:"DESCENDING"},RKt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$Kt={and:"AND",or:"OR"};class NKt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function lq(e,t){return e.useProto3Json||X5(t)?t:{value:t}}function aL(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function gFe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function DKt(e,t){return aL(e,t.toTimestamp())}function ah(e){return hi(!!e),wn.fromTimestamp(function(n){const r=Z0(n);return new zs(r.seconds,r.nanos)}(e))}function NZ(e,t){return cq(e,t).canonicalString()}function cq(e,t){const n=function(i){return new bi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function yFe(e){const t=bi.fromString(e);return hi(EFe(t)),t}function fq(e,t){return NZ(e.databaseId,t.path)}function QB(e,t){const n=yFe(t);if(n.get(1)!==e.databaseId.projectId)throw new Ct(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ct(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kt(_Fe(n))}function vFe(e,t){return NZ(e.databaseId,t)}function MKt(e){const t=yFe(e);return t.length===4?bi.emptyPath():_Fe(t)}function dq(e){return new bi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _Fe(e){return hi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function gye(e,t,n){return{name:fq(e,t),fields:n.value.mapValue.fields}}function LKt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:gn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(hi(c===void 0||typeof c=="string"),Ta.fromBase64String(c||"")):(hi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ta.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Le.UNKNOWN:hFe(l.code);return new Ct(c,l.message||"")}(o);n=new mFe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=QB(e,r.document.name),s=ah(r.document.updateTime),o=r.document.createTime?ah(r.document.createTime):wn.min(),a=new Cu({mapValue:{fields:r.document.fields}}),u=fa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new p$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=QB(e,r.document),s=r.readTime?ah(r.readTime):wn.min(),o=fa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new p$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=QB(e,r.document),s=r.removedTargetIds||[];n=new p$([],s,i,null)}else{if(!("filter"in t))return gn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new CKt(i,s),a=r.targetId;n=new pFe(a,o)}}return n}function FKt(e,t){let n;if(t instanceof aO)n={update:gye(e,t.key,t.value)};else if(t instanceof kZ)n={delete:fq(e,t.key)};else if(t instanceof Iy)n={update:gye(e,t.key,t.data),updateMask:GKt(t.fieldMask)};else{if(!(t instanceof xKt))return gn();n={verify:fq(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof IA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof OA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof PA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oL)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw gn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:DKt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gn()}(e,t.precondition)),n}function jKt(e,t){return e&&e.length>0?(hi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?ah(i.updateTime):ah(s);return o.isEqual(wn.min())&&(o=ah(s)),new bKt(o,i.transformResults||[])}(n,t))):[]}function BKt(e,t){return{documents:[vFe(e,t.path)]}}function zKt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vFe(e,i);const s=function(l){if(l.length!==0)return wFe(Bf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Cb(d.field),direction:HKt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=lq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function UKt(e){let t=MKt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){hi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=bFe(f);return d instanceof Bf&&K5e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new AA(Ab(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,X5(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new sL(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new sL(h,d)}(n.endAt)),oKt(t,i,o,s,a,"F",u,l)}function VKt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function bFe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ab(n.unaryFilter.field);return Es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ab(n.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ab(n.unaryFilter.field);return Es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ab(n.unaryFilter.field);return Es.create(o,"!=",{nullValue:"NULL_VALUE"});default:return gn()}}(e):e.fieldFilter!==void 0?function(n){return Es.create(Ab(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Bf.create(n.compositeFilter.filters.map(r=>bFe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gn()}}(n.compositeFilter.op))}(e):gn()}function HKt(e){return kKt[e]}function qKt(e){return RKt[e]}function WKt(e){return $Kt[e]}function Cb(e){return{fieldPath:e.canonicalString()}}function Ab(e){return Oo.fromServerFormat(e.fieldPath)}function wFe(e){return e instanceof Es?function(n){if(n.op==="=="){if(nye(n.value))return{unaryFilter:{field:Cb(n.field),op:"IS_NAN"}};if(tye(n.value))return{unaryFilter:{field:Cb(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nye(n.value))return{unaryFilter:{field:Cb(n.field),op:"IS_NOT_NAN"}};if(tye(n.value))return{unaryFilter:{field:Cb(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cb(n.field),op:qKt(n.op),value:n.value}}}(e):e instanceof Bf?function(n){const r=n.getFilters().map(i=>wFe(i));return r.length===1?r[0]:{compositeFilter:{op:WKt(n.op),filters:r}}}(e):gn()}function GKt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function EFe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,n,r,i,s=wn.min(),o=wn.min(),a=Ta.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Gg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YKt{constructor(t){this.ct=t}}function KKt(e){const t=UKt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?uq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XKt{constructor(){this._n=new QKt}addToCollectionParentIndex(t,n){return this._n.add(n),Ke.resolve()}getCollectionParents(t,n){return Ke.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ke.resolve()}deleteFieldIndex(t,n){return Ke.resolve()}deleteAllFieldIndexes(t){return Ke.resolve()}createTargetIndexes(t,n){return Ke.resolve()}getDocumentsMatchingTarget(t,n){return Ke.resolve(null)}getIndexType(t,n){return Ke.resolve(0)}getFieldIndexes(t,n){return Ke.resolve([])}getNextCollectionGroupToUpdate(t){return Ke.resolve(null)}getMinOffset(t,n){return Ke.resolve(J0.min())}getMinOffsetFromCollectionGroup(t,n){return Ke.resolve(J0.min())}updateCollectionGroup(t,n,r){return Ke.resolve()}updateIndexEntries(t,n){return Ke.resolve()}}class QKt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new No(bi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new No(bi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new $E(0)}static Ln(){return new $E(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JKt{constructor(){this.changes=new Kx(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,fa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ke.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZKt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eXt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&rC(r.mutation,i,_l.empty(),zs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Wn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Wn()){const i=Xv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=JT();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Xv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Wn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Cm();const o=nC(),a=function(){return nC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Iy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),rC(c.mutation,l,c.mutation.getFieldMask(),zs.now())):o.set(l.key,_l.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new ZKt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=nC();let i=new Vi((o,a)=>o-a),s=Wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||_l.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Wn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=iFe();c.forEach(d=>{if(!s.has(d)){const h=fFe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ke.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Kt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Z5e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ke.resolve(Xv());let a=-1,u=s;return o.next(l=>Ke.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ke.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Wn())).next(c=>({batchId:a,changes:rFe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Kt(n)).next(r=>{let i=JT();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=JT();return this.indexManager.getCollectionParents(t,s).next(a=>Ke.forEach(a,u=>{const l=function(f,d){return new Yx(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,fa.newInvalidDocument(c)))});let a=JT();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&rC(c.mutation,l,_l.empty(),zs.now()),J5(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tXt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ke.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ah(i.createTime)}}(n)),Ke.resolve()}getNamedQuery(t,n){return Ke.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:KKt(i.bundledQuery),readTime:ah(i.readTime)}}(n)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nXt{constructor(){this.overlays=new Vi(Kt.comparator),this.hr=new Map}getOverlay(t,n){return Ke.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Xv();return Ke.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Ke.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ke.resolve()}getOverlaysForCollection(t,n,r){const i=Xv(),s=n.length+1,o=new Kt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ke.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Vi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Xv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Xv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ke.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TKt(n,r));let s=this.hr.get(n);s===void 0&&(s=Wn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(){this.Pr=new No(Js.Ir),this.Tr=new No(Js.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Js(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Js(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Kt(new bi([])),r=new Js(n,t),i=new Js(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Kt(new bi([])),r=new Js(n,t),i=new Js(n,t+1);let s=Wn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Js(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Js{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Kt.comparator(t.key,n.key)||xr(t.pr,n.pr)}static Er(t,n){return xr(t.pr,n.pr)||Kt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rXt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new No(Js.Ir)}checkEmpty(t){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SKt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Js(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ke.resolve(o)}lookupMutationBatch(t,n){return Ke.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Js(n,0),i=new Js(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new No(xr);return n.forEach(i=>{const s=new Js(i,0),o=new Js(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ke.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Kt.isDocumentKey(s)||(s=s.child(""));const o=new Js(new Kt(s),0);let a=new No(xr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Ke.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){hi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ke.forEach(n.mutations,i=>{const s=new Js(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Js(n,0),i=this.wr.firstAfterOrEqual(r);return Ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ke.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iXt{constructor(t){this.vr=t,this.docs=function(){return new Vi(Kt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ke.resolve(r?r.document.mutableCopy():fa.newInvalidDocument(n))}getEntries(t,n){let r=Cm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fa.newInvalidDocument(i))}),Ke.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Cm();const o=n.path,a=new Kt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||UYt(zYt(c),r)<=0||(i.has(c.key)||J5(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ke.resolve(s)}getAllFromCollectionGroup(t,n,r,i){gn()}Fr(t,n){return Ke.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new sXt(this)}getSize(t){return Ke.resolve(this.size)}}class sXt extends JKt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ke.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oXt{constructor(t){this.persistence=t,this.Mr=new Kx(n=>IZ(n),OZ),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new DZ,this.targetCount=0,this.Lr=$E.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ke.resolve()}getLastRemoteSnapshotVersion(t){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ke.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ke.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new $E(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ke.resolve()}updateTargetData(t,n){return this.qn(n),Ke.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ke.waitFor(s).next(()=>i)}getTargetCount(t){return Ke.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ke.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ke.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ke.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ke.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ke.resolve(r)}containsKey(t,n){return Ke.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aXt{constructor(t,n){this.Br={},this.overlays={},this.kr=new SZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new oXt(this),this.indexManager=new XKt,this.remoteDocumentCache=function(i){return new iXt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new YKt(n),this.$r=new tXt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new nXt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new rXt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Nt("MemoryPersistence","Starting transaction:",t);const i=new uXt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Ke.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class uXt extends HYt{constructor(t){super(),this.currentSequenceNumber=t}}class MZ{constructor(t){this.persistence=t,this.zr=new DZ,this.jr=null}static Hr(t){return new MZ(t)}get Jr(){if(this.jr)return this.jr;throw gn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ke.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ke.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ke.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Jr,r=>{const i=Kt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,wn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ke.or([()=>Ke.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Wn(),i=Wn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new LZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lXt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cXt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return XVt()?8:qYt(Fo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new lXt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(rT()<=Jn.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",Tb(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ke.resolve()):(rT()<=Jn.DEBUG&&Nt("QueryEngine","Query:",Tb(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(rT()<=Jn.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",Tb(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,oh(n))):Ke.resolve())}ji(t,n){if(oye(n))return Ke.resolve(null);let r=oh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uq(n,null,"F"),r=oh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Wn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,uq(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return oye(n)||i.isEqual(wn.min())?Ke.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ke.resolve(null):(rT()<=Jn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tb(n)),this.es(t,o,n,BYt(i,-1)).next(a=>a))})}Zi(t,n){let r=new No(tFe(t));return n.forEach((i,s)=>{J5(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return rT()<=Jn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Tb(n)),this.zi.getDocumentsMatchingQuery(t,n,J0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fXt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Vi(xr),this.rs=new Kx(s=>IZ(s),OZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eXt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function dXt(e,t,n,r){return new fXt(e,t,n,r)}async function xFe(e,t){const n=En(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Wn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function hXt(e,t){const n=En(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ke.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);hi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Wn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function SFe(e){const t=En(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function pXt(e,t){const n=En(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ta.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Cm(),l=Wn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(mXt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(wn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ke.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function mXt(e,t,n){let r=Wn(),i=Wn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Cm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(wn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Nt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function gXt(e,t){const n=En(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function yXt(e,t){const n=En(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Ke.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Gg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function hq(e,t,n){const r=En(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!oO(o))throw o;Nt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function yye(e,t,n){const r=En(e);let i=wn.min(),s=Wn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=En(u),d=f.rs.get(c);return d!==void 0?Ke.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,oh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:wn.min(),n?s:Wn())).next(a=>(vXt(r,uKt(t),a),{documents:a,hs:s})))}function vXt(e,t,n){let r=e.ss.get(t)||wn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class vye{constructor(){this.activeTargetIds=pKt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _Xt{constructor(){this.no=new vye,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new vye,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bXt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ye{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rk=null;function JB(){return Rk===null?Rk=function(){return 268435456+Math.round(2147483648*Math.random())}():Rk++,"0x"+Rk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wXt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EXt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="WebChannelConnection";class xXt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=JB(),u=this.vo(n,r.toUriEncodedString());Nt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Nt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw EA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gx}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=wXt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=JB();return new Promise((o,a)=>{const u=new L5e;u.setWithCredentials(!0),u.listenOnce(j5e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case f$.NO_ERROR:const c=u.getResponseJson();Nt(ea,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case f$.TIMEOUT:Nt(ea,`RPC '${t}' ${s} timed out`),a(new Ct(Le.DEADLINE_EXCEEDED,"Request time out"));break;case f$.HTTP_ERROR:const f=u.getStatus();if(Nt(ea,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(y)>=0?y:Le.UNKNOWN}(h.status);a(new Ct(p,h.message))}else a(new Ct(Le.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Ct(Le.UNAVAILABLE,"Connection failed."));break;default:gn()}}finally{Nt(ea,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Nt(ea,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=JB(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=U5e(),a=z5e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new F5e({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Nt(ea,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new EXt({lo:g=>{h?Nt(ea,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Nt(ea,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Nt(ea,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,QT.EventType.OPEN,()=>{h||(Nt(ea,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,QT.EventType.CLOSE,()=>{h||(h=!0,Nt(ea,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,QT.EventType.ERROR,g=>{h||(h=!0,EA(ea,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Ct(Le.UNAVAILABLE,"The operation could not be completed")))}),m(f,QT.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];hi(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){Nt(ea,`RPC '${t}' stream ${i} received error:`,w);const S=w.status;let x=function(A){const I=gs[A];if(I!==void 0)return hFe(I)}(S),b=w.message;x===void 0&&(x=Le.INTERNAL,b="Unknown error status: "+S+" with message "+w.message),h=!0,p.po(new Ct(x,b)),f.close()}else Nt(ea,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,B5e.STAT_EVENT,g=>{g.stat===nq.PROXY?Nt(ea,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===nq.NOPROXY&&Nt(ea,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function ZB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(e){return new NKt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TFe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CFe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new TFe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(Tm(n.toString()),Tm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Ct(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SXt extends CFe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=LKt(this.serializer,t),r=function(s){if(!("targetChange"in s))return wn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?wn.min():o.readTime?ah(o.readTime):wn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=dq(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=oq(u)?{documents:BKt(s,u)}:{query:zKt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gFe(s,o.resumeToken);const l=lq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(wn.min())>0){a.readTime=aL(s,o.snapshotVersion.toTimestamp());const l=lq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=VKt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=dq(this.serializer),n.removeTarget=t,this.i_(n)}}class TXt extends CFe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(hi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=jKt(t.writeResults,t.commitTime),r=ah(t.commitTime);return this.listener.A_(r,n)}return hi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=dq(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>FKt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CXt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ct(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,cq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(Le.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,cq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(Le.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class AXt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Tm(n),this.y_=!1):Nt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IXt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{E_(this)&&(Nt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=En(u);l.M_.add(4),await cO(l),l.N_.set("Unknown"),l.M_.delete(4),await lO(l)}(this))})}),this.N_=new AXt(r,i)}}async function lO(e){if(E_(e))for(const t of e.x_)await t(!0)}async function cO(e){for(const t of e.x_)await t(!1)}function AFe(e,t){const n=En(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),zZ(n)?BZ(n):Xx(n).Xo()&&jZ(n,t))}function FZ(e,t){const n=En(e),r=Xx(n);n.F_.delete(t),r.Xo()&&IFe(n,t),n.F_.size===0&&(r.Xo()?r.n_():E_(n)&&n.N_.set("Unknown"))}function jZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Xx(e).P_(t)}function IFe(e,t){e.L_.xe(t),Xx(e).I_(t)}function BZ(e){e.L_=new PKt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Xx(e).start(),e.N_.w_()}function zZ(e){return E_(e)&&!Xx(e).Zo()&&e.F_.size>0}function E_(e){return En(e).M_.size===0}function OFe(e){e.L_=void 0}async function OXt(e){e.N_.set("Online")}async function PXt(e){e.F_.forEach((t,n)=>{jZ(e,t)})}async function kXt(e,t){OFe(e),zZ(e)?(e.N_.D_(t),BZ(e)):e.N_.set("Unknown")}async function RXt(e,t,n){if(e.N_.set("Online"),t instanceof mFe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Nt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await uL(e,r)}else if(t instanceof p$?e.L_.Ke(t):t instanceof pFe?e.L_.He(t):e.L_.We(t),!n.isEqual(wn.min()))try{const r=await SFe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ta.EMPTY_BYTE_STRING,c.snapshotVersion)),IFe(s,u);const f=new Gg(c.target,u,l,c.sequenceNumber);jZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Nt("RemoteStore","Failed to raise snapshot:",r),await uL(e,r)}}async function uL(e,t,n){if(!oO(t))throw t;e.M_.add(1),await cO(e),e.N_.set("Offline"),n||(n=()=>SFe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Nt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await lO(e)})}function PFe(e,t){return t().catch(n=>uL(e,n,t))}async function rF(e){const t=En(e),n=ey(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;$Xt(t);)try{const i=await gXt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,NXt(t,i)}catch(i){await uL(t,i)}kFe(t)&&RFe(t)}function $Xt(e){return E_(e)&&e.v_.length<10}function NXt(e,t){e.v_.push(t);const n=ey(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function kFe(e){return E_(e)&&!ey(e).Zo()&&e.v_.length>0}function RFe(e){ey(e).start()}async function DXt(e){ey(e).V_()}async function MXt(e){const t=ey(e);for(const n of e.v_)t.d_(n.mutations)}async function LXt(e,t,n){const r=e.v_.shift(),i=RZ.from(r,t,n);await PFe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await rF(e)}async function FXt(e,t){t&&ey(e).E_&&await async function(r,i){if(function(o){return AKt(o)&&o!==Le.ABORTED}(i.code)){const s=r.v_.shift();ey(r).t_(),await PFe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rF(r)}}(e,t),kFe(e)&&RFe(e)}async function bye(e,t){const n=En(e);n.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const r=E_(n);n.M_.add(3),await cO(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await lO(n)}async function jXt(e,t){const n=En(e);t?(n.M_.delete(2),await lO(n)):t||(n.M_.add(2),await cO(n),n.N_.set("Unknown"))}function Xx(e){return e.B_||(e.B_=function(n,r,i){const s=En(n);return s.f_(),new SXt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:OXt.bind(null,e),To:PXt.bind(null,e),Ao:kXt.bind(null,e),h_:RXt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),zZ(e)?BZ(e):e.N_.set("Unknown")):(await e.B_.stop(),OFe(e))})),e.B_}function ey(e){return e.k_||(e.k_=function(n,r,i){const s=En(n);return s.f_(),new TXt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:DXt.bind(null,e),Ao:FXt.bind(null,e),R_:MXt.bind(null,e),A_:LXt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await rF(e)):(await e.k_.stop(),e.v_.length>0&&(Nt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new UZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(Le.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function VZ(e,t){if(Tm("AsyncQueue",`${t}: ${e}`),oO(e))return new Ct(Le.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Kt.comparator(n.key,r.key):(n,r)=>Kt.comparator(n.key,r.key),this.keyedMap=JT(),this.sortedSet=new Vi(this.comparator)}static emptySet(t){return new Rw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Rw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Rw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wye{constructor(){this.q_=new Vi(Kt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):gn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class NE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new NE(t,n,Rw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Q5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BXt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class zXt{constructor(){this.queries=new Kx(t=>eFe(t),Q5),this.onlineState="Unknown",this.z_=new Set}}async function $Fe(e,t){const n=En(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new BXt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=VZ(o,`Initialization of query '${Tb(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&HZ(n)}async function NFe(e,t){const n=En(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UXt(e,t){const n=En(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&HZ(n)}function VXt(e,t,n){const r=En(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function HZ(e){e.z_.forEach(t=>{t.next()})}var pq,Eye;(Eye=pq||(pq={})).J_="default",Eye.Cache="cache";class DFe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new NE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=NE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==pq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MFe{constructor(t){this.key=t}}class LFe{constructor(t){this.key=t}}class HXt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Wn(),this.mutatedKeys=Wn(),this.Ia=tFe(t),this.Ta=new Rw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new wye,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=J5(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new NE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new wye,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Wn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new LFe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new MFe(r))}),n}pa(t){this.la=t.hs,this.Pa=Wn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return NE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class qXt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class WXt{constructor(t){this.key=t,this.wa=!1}}class GXt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Kx(a=>eFe(a),Q5),this.Da=new Map,this.Ca=new Set,this.va=new Vi(Kt.comparator),this.Fa=new Map,this.Ma=new DZ,this.xa={},this.Oa=new Map,this.Na=$E.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function YXt(e,t,n=!0){const r=VFe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await FFe(r,t,n,!0),i}async function KXt(e,t){const n=VFe(e);await FFe(n,t,!0,!1)}async function FFe(e,t,n,r){const i=await yXt(e.localStore,oh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await XXt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&AFe(e.remoteStore,i),a}async function XXt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await yye(m.localStore,g.query,!1).then(({documents:b})=>g.view.da(b,_)));const w=v&&v.targetChanges.get(g.targetId),S=v&&v.targetMismatches.get(g.targetId)!=null,x=g.view.applyChanges(_,m.isPrimaryClient,w,S);return Sye(m,g.targetId,x.fa),x.snapshot}(e,f,d,h);const s=await yye(e.localStore,t,!0),o=new HXt(t,s.hs),a=o.da(s.documents),u=uO.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Sye(e,n,l.fa);const c=new qXt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function QXt(e,t,n){const r=En(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Q5(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&FZ(r.remoteStore,i.targetId),mq(r,i.targetId)}).catch(sO)):(mq(r,i.targetId),await hq(r.localStore,i.targetId,!0))}async function JXt(e,t){const n=En(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),FZ(n.remoteStore,r.targetId))}async function ZXt(e,t,n){const r=oQt(e);try{const i=await function(o,a){const u=En(o),l=zs.now(),c=a.reduce((h,p)=>h.add(p.key),Wn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Cm(),m=Wn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=EKt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Iy(v.key,_,W5e(_.value.mapValue),kf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:rFe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Vi(xr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await fO(r,i.changes),await rF(r.remoteStore)}catch(i){const s=VZ(i,"Failed to persist write");n.reject(s)}}async function jFe(e,t){const n=En(e);try{const r=await pXt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(hi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?hi(o.wa):i.removedDocuments.size>0&&(hi(o.wa),o.wa=!1))}),await fO(n,r,t)}catch(r){await sO(r)}}function xye(e,t,n){const r=En(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=En(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&HZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function eQt(e,t,n){const r=En(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Vi(Kt.comparator);o=o.insert(s,fa.newNoDocument(s,wn.min()));const a=Wn().add(s),u=new tF(wn.min(),new Map,new Vi(xr),o,a);await jFe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),qZ(r)}else await hq(r.localStore,t,!1).then(()=>mq(r,t,n)).catch(sO)}async function tQt(e,t){const n=En(e),r=t.batch.batchId;try{const i=await hXt(n.localStore,t);zFe(n,r,null),BFe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fO(n,i)}catch(i){await sO(i)}}async function nQt(e,t,n){const r=En(e);try{const i=await function(o,a){const u=En(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(hi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);zFe(r,t,n),BFe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await fO(r,i)}catch(i){await sO(i)}}function BFe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function zFe(e,t,n){const r=En(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function mq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||UFe(e,r)})}function UFe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(FZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),qZ(e))}function Sye(e,t,n){for(const r of n)r instanceof MFe?(e.Ma.addReference(r.key,t),rQt(e,r)):r instanceof LFe?(Nt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||UFe(e,r.key)):gn()}function rQt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Nt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),qZ(e))}function qZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Kt(bi.fromString(t)),r=e.Na.next();e.Fa.set(r,new WXt(n)),e.va=e.va.insert(n,r),AFe(e.remoteStore,new Gg(oh(PZ(n.path)),r,"TargetPurposeLimboResolution",SZ.oe))}}async function fO(e,t,n){const r=En(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=LZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=En(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ke.forEach(l,d=>Ke.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ke.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!oO(f))throw f;Nt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function iQt(e,t){const n=En(e);if(!n.currentUser.isEqual(t)){Nt("SyncEngine","User change. New user:",t.toKey());const r=await xFe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Ct(Le.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await fO(n,r.us)}}function sQt(e,t){const n=En(e),r=n.Fa.get(t);if(r&&r.wa)return Wn().add(r.key);{let i=Wn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function VFe(e){const t=En(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jFe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sQt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=eQt.bind(null,t),t.Sa.h_=UXt.bind(null,t.eventManager),t.Sa.ka=VXt.bind(null,t.eventManager),t}function oQt(e){const t=En(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tQt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nQt.bind(null,t),t}class Tye{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=nF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return dXt(this.persistence,new cXt,t.initialUser,this.serializer)}createPersistence(t){return new aXt(MZ.Hr,this.serializer)}createSharedClientState(t){return new _Xt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class aQt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xye(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iQt.bind(null,this.syncEngine),await jXt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new zXt}()}createDatastore(t){const n=nF(t.databaseInfo.databaseId),r=function(s){return new xXt(s)}(t.databaseInfo);return function(s,o,a,u){return new CXt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new IXt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>xye(this.syncEngine,n,0),function(){return _ye.D()?new _ye:new bXt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new GXt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=En(r);Nt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await cO(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HFe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Tm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gu.UNAUTHENTICATED,this.clientId=V5e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Nt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Nt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ct(Le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=VZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function e7(e,t){e.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xFe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cye(e,t){e.asyncQueue.verifyOperationInProgress();const n=await qFe(e);Nt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>bye(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>bye(t.remoteStore,i)),e._onlineComponents=t}function lQt(e){return e.name==="FirebaseError"?e.code===Le.FAILED_PRECONDITION||e.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function qFe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Nt("FirestoreClient","Using user provided OfflineComponentProvider");try{await e7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!lQt(n))throw n;EA("Error using user provided cache. Falling back to memory cache: "+n),await e7(e,new Tye)}}else Nt("FirestoreClient","Using default OfflineComponentProvider"),await e7(e,new Tye);return e._offlineComponents}async function WZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Nt("FirestoreClient","Using user provided OnlineComponentProvider"),await Cye(e,e._uninitializedComponentsProvider._online)):(Nt("FirestoreClient","Using default OnlineComponentProvider"),await Cye(e,new aQt))),e._onlineComponents}function cQt(e){return qFe(e).then(t=>t.persistence)}function fQt(e){return WZ(e).then(t=>t.remoteStore)}function dQt(e){return WZ(e).then(t=>t.syncEngine)}async function WFe(e){const t=await WZ(e),n=t.eventManager;return n.onListen=YXt.bind(null,t.syncEngine),n.onUnlisten=QXt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=KXt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=JXt.bind(null,t.syncEngine),n}function hQt(e){return e.asyncQueue.enqueue(async()=>{const t=await cQt(e),n=await fQt(e);return t.setNetworkEnabled(!0),function(i){const s=En(i);return s.M_.delete(0),lO(s)}(n)})}function pQt(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new HFe({next:d=>{o.enqueueAndForget(()=>NFe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Ct(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Ct(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new DFe(PZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return $Fe(s,f)}(await WFe(e),e.asyncQueue,t,n,r)),r.promise}function mQt(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new HFe({next:d=>{o.enqueueAndForget(()=>NFe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Ct(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new DFe(a,c,{includeMetadataChanges:!0,ra:!0});return $Fe(s,f)}(await WFe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GFe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aye=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YFe(e,t,n){if(!n)throw new Ct(Le.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gQt(e,t,n,r){if(t===!0&&r===!0)throw new Ct(Le.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Iye(e){if(!Kt.isDocumentKey(e))throw new Ct(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Oye(e){if(Kt.isDocumentKey(e))throw new Ct(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function iF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":gn()}function Oh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ct(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=iF(e);throw new Ct(Le.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pye{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ct(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gQt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GFe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ct(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ct(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ct(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class GZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pye({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ct(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Ct(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pye(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RYt;switch(r.type){case"firstParty":return new DYt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Aye.get(n);r&&(Nt("ComponentProvider","Removing Datastore"),Aye.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new x_(this.firestore,t,this._query)}}class Wa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new b0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wa(this.firestore,t,this._key)}}class b0 extends x_{constructor(t,n,r){super(t,n,PZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wa(this.firestore,null,new Kt(t))}withConverter(t){return new b0(this.firestore,t,this._path)}}function Gy(e,t,...n){if(e=es(e),YFe("collection","path",t),e instanceof GZ){const r=bi.fromString(t,...n);return Oye(r),new b0(e,null,r)}{if(!(e instanceof Wa||e instanceof b0))throw new Ct(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bi.fromString(t,...n));return Oye(r),new b0(e.firestore,null,r)}}function ks(e,t,...n){if(e=es(e),arguments.length===1&&(t=V5e.newId()),YFe("doc","path",t),e instanceof GZ){const r=bi.fromString(t,...n);return Iye(r),new Wa(e,null,new Kt(r))}{if(!(e instanceof Wa||e instanceof b0))throw new Ct(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bi.fromString(t,...n));return Iye(r),new Wa(e.firestore,e instanceof b0?e.converter:null,new Kt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new TFe(this,"async_queue_retry"),this.hu=()=>{const n=ZB();n&&Nt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=ZB();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=ZB();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Zp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!oO(t))throw t;Nt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Tm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=UZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&gn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class S_ extends GZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new yQt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||KFe(this),this._firestoreClient.terminate()}}function vQt(e,t,n){n||(n="(default)");const r=qx(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(_A(s,t))return i;throw new Ct(Le.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ct(Le.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ct(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function sF(e){return e._firestoreClient||KFe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function KFe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new YYt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,GFe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new uQt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _Qt(e){return hQt(sF(e=Oh(e,S_)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new DE(Ta.fromBase64String(t))}catch(n){throw new Ct(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new DE(Ta.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ct(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ct(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ct(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xr(this._lat,t._lat)||xr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQt=/^__.*__$/;class wQt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Iy(t,this.data,this.fieldMask,n,this.fieldTransforms):new aO(t,this.data,n,this.fieldTransforms)}}class XFe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Iy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function QFe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gn()}}class KZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new KZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return lL(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(QFe(this.fu)&&bQt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class EQt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||nF(t)}Fu(t,n,r,i=!1){return new KZ({fu:t,methodName:n,vu:r,path:Oo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XZ(e){const t=e._freezeSettings(),n=nF(e._databaseId);return new EQt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function xQt(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);JZ("Data must be an object, but it was:",o,r);const a=JFe(r,o);let u,l;if(s.merge)u=new _l(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=gq(t,f,n);if(!o.contains(d))throw new Ct(Le.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);e8e(c,d)||c.push(d)}u=new _l(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new wQt(new Cu(a),u,l)}class uF extends aF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof uF}}class QZ extends aF{_toFieldTransform(t){return new vKt(t.path,new IA)}isEqual(t){return t instanceof QZ}}function SQt(e,t,n,r){const i=e.Fu(1,t,n);JZ("Data must be an object, but it was:",i,r);const s=[],o=Cu.empty();w_(r,(u,l)=>{const c=ZZ(t,u,n);l=es(l);const f=i.Su(c);if(l instanceof uF)s.push(c);else{const d=dO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new _l(s);return new XFe(o,a,i.fieldTransforms)}function TQt(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[gq(t,r,n)],u=[i];if(s.length%2!=0)throw new Ct(Le.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(gq(t,s[d])),u.push(s[d+1]);const l=[],c=Cu.empty();for(let d=a.length-1;d>=0;--d)if(!e8e(l,a[d])){const h=a[d];let p=u[d];p=es(p);const m=o.Su(h);if(p instanceof uF)l.push(h);else{const g=dO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new _l(l);return new XFe(c,f,o.fieldTransforms)}function CQt(e,t,n,r=!1){return dO(n,e.Fu(r?4:3,t))}function dO(e,t){if(ZFe(e=es(e)))return JZ("Unsupported field value:",t,e),JFe(e,t);if(e instanceof aF)return function(r,i){if(!QFe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=dO(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mKt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zs.fromDate(r);return{timestampValue:aL(i.serializer,s)}}if(r instanceof zs){const s=new zs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:aL(i.serializer,s)}}if(r instanceof YZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof DE)return{bytesValue:gFe(i.serializer,r._byteString)};if(r instanceof Wa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:NZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${iF(r)}`)}(e,t)}function JFe(e,t){const n={};return H5e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):w_(e,(r,i)=>{const s=dO(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function ZFe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zs||e instanceof YZ||e instanceof DE||e instanceof Wa||e instanceof aF)}function JZ(e,t,n){if(!ZFe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=iF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function gq(e,t,n){if((t=es(t))instanceof oF)return t._internalPath;if(typeof t=="string")return ZZ(e,t);throw lL("Field path arguments must be of type string or ",e,!1,void 0,n)}const AQt=new RegExp("[~\\*/\\[\\]]");function ZZ(e,t,n){if(t.search(AQt)>=0)throw lL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new oF(...t.split("."))._internalPath}catch{throw lL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function lL(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ct(Le.INVALID_ARGUMENT,a+e+u)}function e8e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new IQt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(lF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IQt extends t8e{data(){return super.data()}}function lF(e,t){return typeof t=="string"?ZZ(e,t):t instanceof oF?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ct(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eee{}class n8e extends eee{}function kye(e,t,...n){let r=[];t instanceof eee&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof tee).length,a=s.filter(u=>u instanceof cF).length;if(o>1||o>0&&a>0)throw new Ct(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class cF extends n8e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new cF(t,n,r)}_apply(t){const n=this._parse(t);return r8e(t._query,n),new x_(t.firestore,t.converter,aq(t._query,n))}_parse(t){const n=XZ(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ct(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){$ye(f,c);const h=[];for(const p of f)h.push(Rye(u,s,p));d={arrayValue:{values:h}}}else d=Rye(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||$ye(f,c),d=CQt(a,o,f,c==="in"||c==="not-in");return Es.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function PQt(e,t,n){const r=t,i=lF("where",e);return cF._create(i,r,n)}class tee extends eee{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new tee(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)r8e(o,u),o=aq(o,u)}(t._query,n),new x_(t.firestore,t.converter,aq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nee extends n8e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new nee(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Ct(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new AA(s,o)}(t._query,this._field,this._direction);return new x_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Yx(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function kQt(e,t="asc"){const n=t,r=lF("orderBy",e);return nee._create(r,n)}function Rye(e,t,n){if(typeof(n=es(n))=="string"){if(n==="")throw new Ct(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z5e(t)&&n.indexOf("/")!==-1)throw new Ct(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(bi.fromString(n));if(!Kt.isDocumentKey(r))throw new Ct(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eye(e,new Kt(r))}if(n instanceof Wa)return eye(e,n._key);throw new Ct(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${iF(n)}.`)}function $ye(e,t){if(!Array.isArray(e)||e.length===0)throw new Ct(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function r8e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ct(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ct(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class RQt{convertValue(t,n="none"){switch(z1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(B1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw gn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return w_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new YZ(vs(t.latitude),vs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=CZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(SA(t));default:return null}}convertTimestamp(t){const n=Z0(t);return new zs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=bi.fromString(t);hi(EFe(r));const i=new TA(r.get(1),r.get(3)),s=new Kt(r.popFirst(5));return i.isEqual(n)||Tm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Qt(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class i8e extends t8e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new m$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(lF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class m$ extends i8e{data(t={}){return super.data(t)}}class NQt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new e2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new m$(this._firestore,this._userDataWriter,r.key,r,new e2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new m$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new e2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new m$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new e2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:DQt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DQt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(e){e=Oh(e,Wa);const t=Oh(e.firestore,S_);return pQt(sF(t),e._key).then(n=>LQt(t,e,n))}class s8e extends RQt{constructor(t){super(),this.firestore=t}convertBytes(t){return new DE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wa(this.firestore,null,n)}}function sT(e){e=Oh(e,x_);const t=Oh(e.firestore,S_),n=sF(t),r=new s8e(t);return OQt(e._query),mQt(n,e._query).then(i=>new NQt(t,r,e,i))}function Gl(e,t,n){e=Oh(e,Wa);const r=Oh(e.firestore,S_),i=$Qt(e.converter,t,n);return ree(r,[xQt(XZ(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,kf.none())])}function Nye(e,t,n,...r){e=Oh(e,Wa);const i=Oh(e.firestore,S_),s=XZ(i);let o;return o=typeof(t=es(t))=="string"||t instanceof oF?TQt(s,"updateDoc",e._key,t,n,r):SQt(s,"updateDoc",e._key,t),ree(i,[o.toMutation(e._key,kf.exists(!0))])}function MQt(e){return ree(Oh(e.firestore,S_),[new kZ(e._key,kf.none())])}function ree(e,t){return function(r,i){const s=new Zp;return r.asyncQueue.enqueueAndForget(async()=>ZXt(await dQt(r),i,s)),s.promise}(sF(e),t)}function LQt(e,t,n){const r=n.docs.get(t._key),i=new s8e(e);return new i8e(e,i,t._key,r,new e2(n.hasPendingWrites,n.fromCache),t.converter)}function FQt(){return new QZ("serverTimestamp")}(function(t,n=!0){(function(i){Gx=i})(b_),xm(new Ch("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new S_(new $Yt(r.getProvider("auth-internal")),new LYt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ct(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new TA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Of(X0e,"4.6.3",t),Of(X0e,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq=new Map,o8e={activated:!1,tokenObservers:[]},jQt={initialized:!1,enabled:!1};function Us(e){return yq.get(e)||Object.assign({},o8e)}function BQt(e,t){return yq.set(e,t),yq.get(e)}function fF(){return jQt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8e="https://content-firebaseappcheck.googleapis.com/v1",zQt="exchangeRecaptchaV3Token",UQt="exchangeDebugToken",Dye={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},VQt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new vA,this.pending.promise.catch(n=>{}),await qQt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new vA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function qQt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ru=new Hx("appCheck","AppCheck",WQt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mye(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function iee(e){if(!Us(e).activated)throw Ru.create("use-before-activation",{appName:e.name})}function u8e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=$k(n)+"d:"),r&&(o+=$k(r)+"h:"),o+=$k(i)+"m:"+$k(s)+"s",o}function $k(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function see({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Ru.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Ru.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Ru.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ru.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function GQt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${a8e}/projects/${n}/apps/${r}:${zQt}?key=${i}`,body:{recaptcha_v3_token:t}}}function l8e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${a8e}/projects/${n}/apps/${r}:${UQt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQt="firebase-app-check-database",KQt=1,kA="firebase-app-check-store",c8e="debug-token";let Nk=null;function f8e(){return Nk||(Nk=new Promise((e,t)=>{try{const n=indexedDB.open(YQt,KQt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ru.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(kA,{keyPath:"compositeKey"})}}}catch(n){t(Ru.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Nk)}function XQt(e){return h8e(p8e(e))}function QQt(e,t){return d8e(p8e(e),t)}function JQt(e){return d8e(c8e,e)}function ZQt(){return h8e(c8e)}async function d8e(e,t){const r=(await f8e()).transaction(kA,"readwrite"),s=r.objectStore(kA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Ru.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function h8e(e){const n=(await f8e()).transaction(kA,"readonly"),i=n.objectStore(kA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Ru.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function p8e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new q5("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eJt(e){if(oZ()){let t;try{t=await XQt(e)}catch(n){RA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function t7(e,t){return oZ()?QQt(e,t).catch(n=>{RA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function tJt(){let e;try{e=await ZQt()}catch{}if(e)return e;{const t=sHt();return JQt(t).catch(n=>RA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oee(){return fF().enabled}async function aee(){const e=fF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function nJt(){const e=$4e(),t=fF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new vA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(tJt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJt={error:"UNKNOWN_ERROR"};function iJt(e){return sZ.encodeString(JSON.stringify(e),!1)}async function vq(e,t=!1){const n=e.app;iee(n);const r=Us(n);let i=r.token,s;if(i&&!Qb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Qb(u)?i=u:await t7(n,void 0))}if(!t&&i&&Qb(i))return{token:i.token};let o=!1;if(oee()){r.exchangeTokenPromise||(r.exchangeTokenPromise=see(l8e(n,await aee()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await t7(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?RA.warn(u.message):RA.error(u),s=u}let a;return i?s?Qb(i)?a={token:i.token,internalError:s}:a=Fye(s):(a={token:i.token},r.token=i,await t7(n,i)):a=Fye(s),o&&y8e(n,a),a}async function sJt(e){const t=e.app;iee(t);const{provider:n}=Us(t);if(oee()){const r=await aee(),{token:i}=await see(l8e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function m8e(e,t,n,r){const{app:i}=e,s=Us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Qb(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Lye(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Lye(e))}function g8e(e,t){const n=Us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Lye(e){const{app:t}=e,n=Us(t);let r=n.tokenRefresher;r||(r=oJt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function oJt(e){const{app:t}=e;return new HQt(async()=>{const n=Us(t);let r;if(n.token?r=await vq(e,!0):r=await vq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Dye.RETRIAL_MIN_WAIT,Dye.RETRIAL_MAX_WAIT)}function y8e(e,t){const n=Us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Qb(e){return e.expireTimeMillis-Date.now()>0}function Fye(e){return{token:iJt(rJt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Us(this.app);for(const n of t)g8e(this.app,n.next);return Promise.resolve()}}function uJt(e,t){return new aJt(e,t)}function lJt(e){return{getToken:t=>vq(e,t),getLimitedUseToken:()=>sJt(e),addTokenListener:t=>m8e(e,"INTERNAL",t),removeTokenListener:t=>g8e(e.app,t)}}const cJt="@firebase/app-check",fJt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJt="https://www.google.com/recaptcha/api.js";function hJt(e,t){const n=new vA,r=Us(e);r.reCAPTCHAState={initialized:n};const i=pJt(e),s=Mye(!1);return s?jye(e,t,s,i,n):yJt(()=>{const o=Mye(!1);if(!o)throw new Error("no recaptcha");jye(e,t,o,i,n)}),n.promise}function jye(e,t,n,r,i){n.ready(()=>{gJt(e,t,n,r),i.resolve(n)})}function pJt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function mJt(e){iee(e);const n=await Us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function gJt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Us(e).reCAPTCHAState.succeeded=!1}}),s=Us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function yJt(e){const t=document.createElement("script");t.src=dJt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;_Jt(this._throttleData);const i=await mJt(this._app).catch(o=>{throw Ru.create("recaptcha-error")});if(!(!((t=Us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ru.create("recaptcha-error");let s;try{s=await see(GQt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=vJt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ru.create("throttled",{time:u8e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=qx(t,"heartbeat"),hJt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof uee?this._siteKey===t._siteKey:!1}}function vJt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+VQt,httpStatus:e};{const n=t?t.backoffCount:0,r=cHt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function _Jt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ru.create("throttled",{time:u8e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bJt(e=uZ(),t){e=es(e);const n=qx(e,"app-check");if(fF().initialized||nJt(),oee()&&aee().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ru.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return wJt(e,t.provider,t.isTokenAutoRefreshEnabled),Us(e).isTokenAutoRefreshEnabled&&m8e(r,"INTERNAL",()=>{}),r}function wJt(e,t,n){const r=BQt(e,Object.assign({},o8e));r.activated=!0,r.provider=t,r.cachedTokenPromise=eJt(e).then(i=>(i&&Qb(i)&&(r.token=i,y8e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const EJt="app-check",Bye="app-check-internal";function xJt(){xm(new Ch(EJt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return uJt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Bye).initialize()})),xm(new Ch(Bye,e=>{const t=e.getProvider("app-check").getImmediate();return lJt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Of(cJt,fJt)}xJt();function Dk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var v8e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof Dk=="function"&&Dk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof Dk=="function"&&Dk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==o&&m(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,x){if(typeof S!="function"&&this.state===l||typeof x!="function"&&this.state===u)return this;var b=new this.constructor(o);if(this.state!==c){var T=this.state===l?S:x;h(b,T,this.outcome)}else this.queue.push(new d(b,S,x));return b};function d(S,x,b){this.promise=S,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){h(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){h(this.promise,this.onRejected,S)};function h(S,x,b){s(function(){var T;try{T=x(b)}catch(A){return a.reject(S,A)}T===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,T)})}a.resolve=function(S,x){var b=g(p,x);if(b.status==="error")return a.reject(S,b.value);var T=b.value;if(T)m(S,T);else{S.state=l,S.outcome=x;for(var A=-1,I=S.queue.length;++A<I;)S.queue[A].callFulfilled(x)}return S},a.reject=function(S,x){S.state=u,S.outcome=x;for(var b=-1,T=S.queue.length;++b<T;)S.queue[b].callRejected(x);return S};function p(S){var x=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof x=="function")return function(){x.apply(S,arguments)}}function m(S,x){var b=!1;function T(R){b||(b=!0,a.reject(S,R))}function A(R){b||(b=!0,a.resolve(S,R))}function I(){x(A,T)}var k=g(I);k.status==="error"&&T(k.value)}function g(S,x){var b={};try{b.value=S(x),b.status="success"}catch(T){b.status="error",b.value=T}return b}f.resolve=y;function y(S){return S instanceof this?S:a.resolve(new this(o),S)}f.reject=v;function v(S){var x=new this(o);return a.reject(x,S)}f.all=_;function _(S){var x=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=S.length,T=!1;if(!b)return this.resolve([]);for(var A=new Array(b),I=0,k=-1,R=new this(o);++k<b;)P(S[k],k);return R;function P(N,F){x.resolve(N).then(B,function(W){T||(T=!0,a.reject(R,W))});function B(W){A[F]=W,++I===b&&!T&&(T=!0,a.resolve(R,A))}}}f.race=w;function w(S){var x=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=S.length,T=!1;if(!b)return this.resolve([]);for(var A=-1,I=new this(o);++A<b;)k(S[A]);return I;function k(R){x.resolve(R).then(function(P){T||(T=!0,a.resolve(I,P))},function(P){T||(T=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),oe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||oe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,oe){K=K||[],oe=oe||{};try{return new Blob(K,oe)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,de=new ee,ye=0;ye<K.length;ye+=1)de.append(K[ye]);return de.getBlob(oe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(K,oe){oe&&K.then(function(ee){oe(null,ee)},function(ee){oe(ee)})}function h(K,oe,ee){typeof oe=="function"&&K.then(oe),typeof ee=="function"&&K.catch(ee)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",S="readwrite";function x(K){for(var oe=K.length,ee=new ArrayBuffer(oe),de=new Uint8Array(ee),ye=0;ye<oe;ye++)de[ye]=K.charCodeAt(ye);return ee}function b(K){return new f(function(oe){var ee=K.transaction(g,S),de=c([""]);ee.objectStore(g).put(de,"key"),ee.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),oe(!1)},ee.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);oe(pe||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function T(K){return typeof y=="boolean"?f.resolve(y):b(K).then(function(oe){return y=oe,y})}function A(K){var oe=v[K.name],ee={};ee.promise=new f(function(de,ye){ee.resolve=de,ee.reject=ye}),oe.deferredOperations.push(ee),oe.dbReady?oe.dbReady=oe.dbReady.then(function(){return ee.promise}):oe.dbReady=ee.promise}function I(K){var oe=v[K.name],ee=oe.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function k(K,oe){var ee=v[K.name],de=ee.deferredOperations.pop();if(de)return de.reject(oe),de.promise}function R(K,oe){return new f(function(ee,de){if(v[K.name]=v[K.name]||Y(),K.db)if(oe)A(K),K.db.close();else return ee(K.db);var ye=[K.name];oe&&ye.push(K.version);var pe=u.open.apply(u,ye);oe&&(pe.onupgradeneeded=function(Pe){var ze=pe.result;try{ze.createObjectStore(K.storeName),Pe.oldVersion<=1&&ze.createObjectStore(g)}catch(He){if(He.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+Pe.oldVersion+" to version "+Pe.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw He}}),pe.onerror=function(Pe){Pe.preventDefault(),de(pe.error)},pe.onsuccess=function(){var Pe=pe.result;Pe.onversionchange=function(ze){ze.target.close()},ee(Pe),I(K)}})}function P(K){return R(K,!1)}function N(K){return R(K,!0)}function F(K,oe){if(!K.db)return!0;var ee=!K.db.objectStoreNames.contains(K.storeName),de=K.version<K.db.version,ye=K.version>K.db.version;if(de&&(K.version!==oe&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),ye||ee){if(ee){var pe=K.db.version+1;pe>K.version&&(K.version=pe)}return!0}return!1}function B(K){return new f(function(oe,ee){var de=new FileReader;de.onerror=ee,de.onloadend=function(ye){var pe=btoa(ye.target.result||"");oe({__local_forage_encoded_blob:!0,data:pe,type:K.type})},de.readAsBinaryString(K)})}function W(K){var oe=x(atob(K.data));return c([oe],{type:K.type})}function V(K){return K&&K.__local_forage_encoded_blob}function G(K){var oe=this,ee=oe._initReady().then(function(){var de=v[oe._dbInfo.name];if(de&&de.dbReady)return de.dbReady});return h(ee,K,K),ee}function M(K){A(K);for(var oe=v[K.name],ee=oe.forages,de=0;de<ee.length;de++){var ye=ee[de];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return K.db=null,P(K).then(function(pe){return K.db=pe,F(K)?N(K):pe}).then(function(pe){K.db=oe.db=pe;for(var Pe=0;Pe<ee.length;Pe++)ee[Pe]._dbInfo.db=pe}).catch(function(pe){throw k(K,pe),pe})}function H(K,oe,ee,de){de===void 0&&(de=1);try{var ye=K.db.transaction(K.storeName,oe);ee(null,ye)}catch(pe){if(de>0&&(!K.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!K.db||pe.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),N(K)}).then(function(){return M(K).then(function(){H(K,oe,ee,de-1)})}).catch(ee);ee(pe)}}function Y(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(K){var oe=this,ee={db:null};if(K)for(var de in K)ee[de]=K[de];var ye=v[ee.name];ye||(ye=Y(),v[ee.name]=ye),ye.forages.push(oe),oe._initReady||(oe._initReady=oe.ready,oe.ready=G);var pe=[];function Pe(){return f.resolve()}for(var ze=0;ze<ye.forages.length;ze++){var He=ye.forages[ze];He!==oe&&pe.push(He._initReady().catch(Pe))}var qe=ye.forages.slice(0);return f.all(pe).then(function(){return ee.db=ye.db,P(ee)}).then(function(rt){return ee.db=rt,F(ee,oe._defaultConfig.version)?N(ee):rt}).then(function(rt){ee.db=ye.db=rt,oe._dbInfo=ee;for(var At=0;At<qe.length;At++){var xn=qe[At];xn!==oe&&(xn._dbInfo.db=ee.db,xn._dbInfo.version=ee.version)}})}function j(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){H(ee._dbInfo,w,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=He.get(K);qe.onsuccess=function(){var rt=qe.result;rt===void 0&&(rt=null),V(rt)&&(rt=W(rt)),ye(rt)},qe.onerror=function(){pe(qe.error)}}catch(rt){pe(rt)}})}).catch(pe)});return d(de,oe),de}function q(K,oe){var ee=this,de=new f(function(ye,pe){ee.ready().then(function(){H(ee._dbInfo,w,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=He.openCursor(),rt=1;qe.onsuccess=function(){var At=qe.result;if(At){var xn=At.value;V(xn)&&(xn=W(xn));var jt=K(xn,At.key,rt++);jt!==void 0?ye(jt):At.continue()}else ye()},qe.onerror=function(){pe(qe.error)}}catch(At){pe(At)}})}).catch(pe)});return d(de,oe),de}function Z(K,oe,ee){var de=this;K=p(K);var ye=new f(function(pe,Pe){var ze;de.ready().then(function(){return ze=de._dbInfo,_.call(oe)==="[object Blob]"?T(ze.db).then(function(He){return He?oe:B(oe)}):oe}).then(function(He){H(de._dbInfo,S,function(qe,rt){if(qe)return Pe(qe);try{var At=rt.objectStore(de._dbInfo.storeName);He===null&&(He=void 0);var xn=At.put(He,K);rt.oncomplete=function(){He===void 0&&(He=null),pe(He)},rt.onabort=rt.onerror=function(){var jt=xn.error?xn.error:xn.transaction.error;Pe(jt)}}catch(jt){Pe(jt)}})}).catch(Pe)});return d(ye,ee),ye}function ue(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){H(ee._dbInfo,S,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=He.delete(K);ze.oncomplete=function(){ye()},ze.onerror=function(){pe(qe.error)},ze.onabort=function(){var rt=qe.error?qe.error:qe.transaction.error;pe(rt)}}catch(rt){pe(rt)}})}).catch(pe)});return d(de,oe),de}function he(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){H(oe._dbInfo,S,function(pe,Pe){if(pe)return ye(pe);try{var ze=Pe.objectStore(oe._dbInfo.storeName),He=ze.clear();Pe.oncomplete=function(){de()},Pe.onabort=Pe.onerror=function(){var qe=He.error?He.error:He.transaction.error;ye(qe)}}catch(qe){ye(qe)}})}).catch(ye)});return d(ee,K),ee}function fe(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){H(oe._dbInfo,w,function(pe,Pe){if(pe)return ye(pe);try{var ze=Pe.objectStore(oe._dbInfo.storeName),He=ze.count();He.onsuccess=function(){de(He.result)},He.onerror=function(){ye(He.error)}}catch(qe){ye(qe)}})}).catch(ye)});return d(ee,K),ee}function me(K,oe){var ee=this,de=new f(function(ye,pe){if(K<0){ye(null);return}ee.ready().then(function(){H(ee._dbInfo,w,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=!1,rt=He.openKeyCursor();rt.onsuccess=function(){var At=rt.result;if(!At){ye(null);return}K===0||qe?ye(At.key):(qe=!0,At.advance(K))},rt.onerror=function(){pe(rt.error)}}catch(At){pe(At)}})}).catch(pe)});return d(de,oe),de}function _e(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){H(oe._dbInfo,w,function(pe,Pe){if(pe)return ye(pe);try{var ze=Pe.objectStore(oe._dbInfo.storeName),He=ze.openKeyCursor(),qe=[];He.onsuccess=function(){var rt=He.result;if(!rt){de(qe);return}qe.push(rt.key),rt.continue()},He.onerror=function(){ye(He.error)}}catch(rt){ye(rt)}})}).catch(ye)});return d(ee,K),ee}function ge(K,oe){oe=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var de=this,ye;if(!K.name)ye=f.reject("Invalid arguments");else{var pe=K.name===ee.name&&de._dbInfo.db,Pe=pe?f.resolve(de._dbInfo.db):P(K).then(function(ze){var He=v[K.name],qe=He.forages;He.db=ze;for(var rt=0;rt<qe.length;rt++)qe[rt]._dbInfo.db=ze;return ze});K.storeName?ye=Pe.then(function(ze){if(ze.objectStoreNames.contains(K.storeName)){var He=ze.version+1;A(K);var qe=v[K.name],rt=qe.forages;ze.close();for(var At=0;At<rt.length;At++){var xn=rt[At];xn._dbInfo.db=null,xn._dbInfo.version=He}var jt=new f(function(Hn,$r){var Nr=u.open(K.name,He);Nr.onerror=function(Vo){var sd=Nr.result;sd.close(),$r(Vo)},Nr.onupgradeneeded=function(){var Vo=Nr.result;Vo.deleteObjectStore(K.storeName)},Nr.onsuccess=function(){var Vo=Nr.result;Vo.close(),Hn(Vo)}});return jt.then(function(Hn){qe.db=Hn;for(var $r=0;$r<rt.length;$r++){var Nr=rt[$r];Nr._dbInfo.db=Hn,I(Nr._dbInfo)}}).catch(function(Hn){throw(k(K,Hn)||f.resolve()).catch(function(){}),Hn})}}):ye=Pe.then(function(ze){A(K);var He=v[K.name],qe=He.forages;ze.close();for(var rt=0;rt<qe.length;rt++){var At=qe[rt];At._dbInfo.db=null}var xn=new f(function(jt,Hn){var $r=u.deleteDatabase(K.name);$r.onerror=function(){var Nr=$r.result;Nr&&Nr.close(),Hn($r.error)},$r.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},$r.onsuccess=function(){var Nr=$r.result;Nr&&Nr.close(),jt(Nr)}});return xn.then(function(jt){He.db=jt;for(var Hn=0;Hn<qe.length;Hn++){var $r=qe[Hn];I($r._dbInfo)}}).catch(function(jt){throw(k(K,jt)||f.resolve()).catch(function(){}),jt})})}return d(ye,oe),ye}var Be={_driver:"asyncStorage",_initStorage:L,_support:l(),iterate:q,getItem:j,setItem:Z,removeItem:ue,clear:he,length:fe,key:me,keys:_e,dropInstance:ge};function Me(){return typeof openDatabase=="function"}var ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oe="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,Ye="__lfsc__:",Ut=Ye.length,Ft="arbf",Je="blob",Ge="si08",gt="ui08",ot="uic8",at="si16",Et="si32",ve="ur16",Se="ui32",Fe="fl32",Ue="fl64",ht=Ut+Ft.length,cn=Object.prototype.toString;function Ve(K){var oe=K.length*.75,ee=K.length,de,ye=0,pe,Pe,ze,He;K[K.length-1]==="="&&(oe--,K[K.length-2]==="="&&oe--);var qe=new ArrayBuffer(oe),rt=new Uint8Array(qe);for(de=0;de<ee;de+=4)pe=ut.indexOf(K[de]),Pe=ut.indexOf(K[de+1]),ze=ut.indexOf(K[de+2]),He=ut.indexOf(K[de+3]),rt[ye++]=pe<<2|Pe>>4,rt[ye++]=(Pe&15)<<4|ze>>2,rt[ye++]=(ze&3)<<6|He&63;return qe}function wt(K){var oe=new Uint8Array(K),ee="",de;for(de=0;de<oe.length;de+=3)ee+=ut[oe[de]>>2],ee+=ut[(oe[de]&3)<<4|oe[de+1]>>4],ee+=ut[(oe[de+1]&15)<<2|oe[de+2]>>6],ee+=ut[oe[de+2]&63];return oe.length%3===2?ee=ee.substring(0,ee.length-1)+"=":oe.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function bt(K,oe){var ee="";if(K&&(ee=cn.call(K)),K&&(ee==="[object ArrayBuffer]"||K.buffer&&cn.call(K.buffer)==="[object ArrayBuffer]")){var de,ye=Ye;K instanceof ArrayBuffer?(de=K,ye+=Ft):(de=K.buffer,ee==="[object Int8Array]"?ye+=Ge:ee==="[object Uint8Array]"?ye+=gt:ee==="[object Uint8ClampedArray]"?ye+=ot:ee==="[object Int16Array]"?ye+=at:ee==="[object Uint16Array]"?ye+=ve:ee==="[object Int32Array]"?ye+=Et:ee==="[object Uint32Array]"?ye+=Se:ee==="[object Float32Array]"?ye+=Fe:ee==="[object Float64Array]"?ye+=Ue:oe(new Error("Failed to get type for BinaryArray"))),oe(ye+wt(de))}else if(ee==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Pe=Oe+K.type+"~"+wt(this.result);oe(Ye+Je+Pe)},pe.readAsArrayBuffer(K)}else try{oe(JSON.stringify(K))}catch(Pe){console.error("Couldn't convert value into a JSON string: ",K),oe(null,Pe)}}function bn(K){if(K.substring(0,Ut)!==Ye)return JSON.parse(K);var oe=K.substring(ht),ee=K.substring(Ut,ht),de;if(ee===Je&&Re.test(oe)){var ye=oe.match(Re);de=ye[1],oe=oe.substring(ye[0].length)}var pe=Ve(oe);switch(ee){case Ft:return pe;case Je:return c([pe],{type:de});case Ge:return new Int8Array(pe);case gt:return new Uint8Array(pe);case ot:return new Uint8ClampedArray(pe);case at:return new Int16Array(pe);case ve:return new Uint16Array(pe);case Et:return new Int32Array(pe);case Se:return new Uint32Array(pe);case Fe:return new Float32Array(pe);case Ue:return new Float64Array(pe);default:throw new Error("Unkown type: "+ee)}}var Lt={serialize:bt,deserialize:bn,stringToBuffer:Ve,bufferToString:wt};function Ar(K,oe,ee,de){K.executeSql("CREATE TABLE IF NOT EXISTS "+oe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,de)}function Fn(K){var oe=this,ee={db:null};if(K)for(var de in K)ee[de]=typeof K[de]!="string"?K[de].toString():K[de];var ye=new f(function(pe,Pe){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(ze){return Pe(ze)}ee.db.transaction(function(ze){Ar(ze,ee,function(){oe._dbInfo=ee,pe()},function(He,qe){Pe(qe)})},Pe)});return ee.serializer=Lt,ye}function ar(K,oe,ee,de,ye,pe){K.executeSql(ee,de,ye,function(Pe,ze){ze.code===ze.SYNTAX_ERR?Pe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[oe.storeName],function(He,qe){qe.rows.length?pe(He,ze):Ar(He,oe,function(){He.executeSql(ee,de,ye,pe)},pe)},pe):pe(Pe,ze)},pe)}function oi(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"SELECT * FROM "+Pe.storeName+" WHERE key = ? LIMIT 1",[K],function(He,qe){var rt=qe.rows.length?qe.rows.item(0).value:null;rt&&(rt=Pe.serializer.deserialize(rt)),ye(rt)},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function yo(K,oe){var ee=this,de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"SELECT * FROM "+Pe.storeName,[],function(He,qe){for(var rt=qe.rows,At=rt.length,xn=0;xn<At;xn++){var jt=rt.item(xn),Hn=jt.value;if(Hn&&(Hn=Pe.serializer.deserialize(Hn)),Hn=K(Hn,jt.key,xn+1),Hn!==void 0){ye(Hn);return}}ye()},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function br(K,oe,ee,de){var ye=this;K=p(K);var pe=new f(function(Pe,ze){ye.ready().then(function(){oe===void 0&&(oe=null);var He=oe,qe=ye._dbInfo;qe.serializer.serialize(oe,function(rt,At){At?ze(At):qe.db.transaction(function(xn){ar(xn,qe,"INSERT OR REPLACE INTO "+qe.storeName+" (key, value) VALUES (?, ?)",[K,rt],function(){Pe(He)},function(jt,Hn){ze(Hn)})},function(xn){if(xn.code===xn.QUOTA_ERR){if(de>0){Pe(br.apply(ye,[K,He,ee,de-1]));return}ze(xn)}})})}).catch(ze)});return d(pe,ee),pe}function nr(K,oe,ee){return br.apply(this,[K,oe,ee,1])}function Uo(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"DELETE FROM "+Pe.storeName+" WHERE key = ?",[K],function(){ye()},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function Vr(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){var pe=oe._dbInfo;pe.db.transaction(function(Pe){ar(Pe,pe,"DELETE FROM "+pe.storeName,[],function(){de()},function(ze,He){ye(He)})})}).catch(ye)});return d(ee,K),ee}function Zr(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){var pe=oe._dbInfo;pe.db.transaction(function(Pe){ar(Pe,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(ze,He){var qe=He.rows.item(0).c;de(qe)},function(ze,He){ye(He)})})}).catch(ye)});return d(ee,K),ee}function Pt(K,oe){var ee=this,de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"SELECT key FROM "+Pe.storeName+" WHERE id = ? LIMIT 1",[K+1],function(He,qe){var rt=qe.rows.length?qe.rows.item(0).key:null;ye(rt)},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function Xt(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){var pe=oe._dbInfo;pe.db.transaction(function(Pe){ar(Pe,pe,"SELECT key FROM "+pe.storeName,[],function(ze,He){for(var qe=[],rt=0;rt<He.rows.length;rt++)qe.push(He.rows.item(rt).key);de(qe)},function(ze,He){ye(He)})})}).catch(ye)});return d(ee,K),ee}function rr(K){return new f(function(oe,ee){K.transaction(function(de){de.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,pe){for(var Pe=[],ze=0;ze<pe.rows.length;ze++)Pe.push(pe.rows.item(ze).name);oe({db:K,storeNames:Pe})},function(ye,pe){ee(pe)})},function(de){ee(de)})})}function Gs(K,oe){oe=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var de=this,ye;return K.name?ye=new f(function(pe){var Pe;K.name===ee.name?Pe=de._dbInfo.db:Pe=openDatabase(K.name,"","",0),K.storeName?pe({db:Pe,storeNames:[K.storeName]}):pe(rr(Pe))}).then(function(pe){return new f(function(Pe,ze){pe.db.transaction(function(He){function qe(jt){return new f(function(Hn,$r){He.executeSql("DROP TABLE IF EXISTS "+jt,[],function(){Hn()},function(Nr,Vo){$r(Vo)})})}for(var rt=[],At=0,xn=pe.storeNames.length;At<xn;At++)rt.push(qe(pe.storeNames[At]));f.all(rt).then(function(){Pe()}).catch(function(jt){ze(jt)})},function(He){ze(He)})})}):ye=f.reject("Invalid arguments"),d(ye,oe),ye}var mi={_driver:"webSQLStorage",_initStorage:Fn,_support:Me(),iterate:yo,getItem:oi,setItem:nr,removeItem:Uo,clear:Vr,length:Zr,key:Pt,keys:Xt,dropInstance:Gs};function ai(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ae(K,oe){var ee=K.name+"/";return K.storeName!==oe.storeName&&(ee+=K.storeName+"/"),ee}function ne(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function le(){return!ne()||localStorage.length>0}function Ee(K){var oe=this,ee={};if(K)for(var de in K)ee[de]=K[de];return ee.keyPrefix=ae(K,oe._defaultConfig),le()?(oe._dbInfo=ee,ee.serializer=Lt,f.resolve()):f.reject()}function xe(K){var oe=this,ee=oe.ready().then(function(){for(var de=oe._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var pe=localStorage.key(ye);pe.indexOf(de)===0&&localStorage.removeItem(pe)}});return d(ee,K),ee}function St(K,oe){var ee=this;K=p(K);var de=ee.ready().then(function(){var ye=ee._dbInfo,pe=localStorage.getItem(ye.keyPrefix+K);return pe&&(pe=ye.serializer.deserialize(pe)),pe});return d(de,oe),de}function It(K,oe){var ee=this,de=ee.ready().then(function(){for(var ye=ee._dbInfo,pe=ye.keyPrefix,Pe=pe.length,ze=localStorage.length,He=1,qe=0;qe<ze;qe++){var rt=localStorage.key(qe);if(rt.indexOf(pe)===0){var At=localStorage.getItem(rt);if(At&&(At=ye.serializer.deserialize(At)),At=K(At,rt.substring(Pe),He++),At!==void 0)return At}}});return d(de,oe),de}function je(K,oe){var ee=this,de=ee.ready().then(function(){var ye=ee._dbInfo,pe;try{pe=localStorage.key(K)}catch{pe=null}return pe&&(pe=pe.substring(ye.keyPrefix.length)),pe});return d(de,oe),de}function Rt(K){var oe=this,ee=oe.ready().then(function(){for(var de=oe._dbInfo,ye=localStorage.length,pe=[],Pe=0;Pe<ye;Pe++){var ze=localStorage.key(Pe);ze.indexOf(de.keyPrefix)===0&&pe.push(ze.substring(de.keyPrefix.length))}return pe});return d(ee,K),ee}function en(K){var oe=this,ee=oe.keys().then(function(de){return de.length});return d(ee,K),ee}function ft(K,oe){var ee=this;K=p(K);var de=ee.ready().then(function(){var ye=ee._dbInfo;localStorage.removeItem(ye.keyPrefix+K)});return d(de,oe),de}function kn(K,oe,ee){var de=this;K=p(K);var ye=de.ready().then(function(){oe===void 0&&(oe=null);var pe=oe;return new f(function(Pe,ze){var He=de._dbInfo;He.serializer.serialize(oe,function(qe,rt){if(rt)ze(rt);else try{localStorage.setItem(He.keyPrefix+K,qe),Pe(pe)}catch(At){(At.name==="QuotaExceededError"||At.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ze(At),ze(At)}})})});return d(ye,ee),ye}function In(K,oe){if(oe=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var ee=this.config();K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName}var de=this,ye;return K.name?ye=new f(function(pe){K.storeName?pe(ae(K,de._defaultConfig)):pe(K.name+"/")}).then(function(pe){for(var Pe=localStorage.length-1;Pe>=0;Pe--){var ze=localStorage.key(Pe);ze.indexOf(pe)===0&&localStorage.removeItem(ze)}}):ye=f.reject("Invalid arguments"),d(ye,oe),ye}var Gt={_driver:"localStorageWrapper",_initStorage:Ee,_support:ai(),iterate:It,getItem:St,setItem:kn,removeItem:ft,clear:xe,length:en,key:je,keys:Rt,dropInstance:In},Xn=function(oe,ee){return oe===ee||typeof oe=="number"&&typeof ee=="number"&&isNaN(oe)&&isNaN(ee)},Rr=function(oe,ee){for(var de=oe.length,ye=0;ye<de;){if(Xn(oe[ye],ee))return!0;ye++}return!1},Qt=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},ui={},Li={},Hr={INDEXEDDB:Be,WEBSQL:mi,LOCALSTORAGE:Gt},Is=[Hr.INDEXEDDB._driver,Hr.WEBSQL._driver,Hr.LOCALSTORAGE._driver],Ti=["dropInstance"],Ci=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ti),Ys={description:"",driver:Is.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ps(K,oe){K[oe]=function(){var ee=arguments;return K.ready().then(function(){return K[oe].apply(K,ee)})}}function xt(){for(var K=1;K<arguments.length;K++){var oe=arguments[K];if(oe)for(var ee in oe)oe.hasOwnProperty(ee)&&(Qt(oe[ee])?arguments[0][ee]=oe[ee].slice():arguments[0][ee]=oe[ee])}return arguments[0]}var Rn=function(){function K(oe){o(this,K);for(var ee in Hr)if(Hr.hasOwnProperty(ee)){var de=Hr[ee],ye=de._driver;this[ee]=ye,ui[ye]||this.defineDriver(de)}this._defaultConfig=xt({},Ys),this._config=xt({},this._defaultConfig,oe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var de in ee){if(de==="storeName"&&(ee[de]=ee[de].replace(/\W/g,"_")),de==="version"&&typeof ee[de]!="number")return new Error("Database version must be a number.");this._config[de]=ee[de]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},K.prototype.defineDriver=function(ee,de,ye){var pe=new f(function(Pe,ze){try{var He=ee._driver,qe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){ze(qe);return}for(var rt=Ci.concat("_initStorage"),At=0,xn=rt.length;At<xn;At++){var jt=rt[At],Hn=!Rr(Ti,jt);if((Hn||ee[jt])&&typeof ee[jt]!="function"){ze(qe);return}}var $r=function(){for(var sd=function(Hl){return function(){var uu=new Error("Method "+Hl+" is not implemented by the current driver"),np=f.reject(uu);return d(np,arguments[arguments.length-1]),np}},tp=0,_S=Ti.length;tp<_S;tp++){var jy=Ti[tp];ee[jy]||(ee[jy]=sd(jy))}};$r();var Nr=function(sd){ui[He]&&console.info("Redefining LocalForage driver: "+He),ui[He]=ee,Li[He]=sd,Pe()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(Nr,ze):Nr(!!ee._support):Nr(!0)}catch(Vo){ze(Vo)}});return h(pe,de,ye),pe},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(ee,de,ye){var pe=ui[ee]?f.resolve(ui[ee]):f.reject(new Error("Driver not found."));return h(pe,de,ye),pe},K.prototype.getSerializer=function(ee){var de=f.resolve(Lt);return h(de,ee),de},K.prototype.ready=function(ee){var de=this,ye=de._driverSet.then(function(){return de._ready===null&&(de._ready=de._initDriver()),de._ready});return h(ye,ee,ee),ye},K.prototype.setDriver=function(ee,de,ye){var pe=this;Qt(ee)||(ee=[ee]);var Pe=this._getSupportedDrivers(ee);function ze(){pe._config.driver=pe.driver()}function He(At){return pe._extend(At),ze(),pe._ready=pe._initStorage(pe._config),pe._ready}function qe(At){return function(){var xn=0;function jt(){for(;xn<At.length;){var Hn=At[xn];return xn++,pe._dbInfo=null,pe._ready=null,pe.getDriver(Hn).then(He).catch(jt)}ze();var $r=new Error("No available storage method found.");return pe._driverSet=f.reject($r),pe._driverSet}return jt()}}var rt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=rt.then(function(){var At=Pe[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(At).then(function(xn){pe._driver=xn._driver,ze(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=qe(Pe)})}).catch(function(){ze();var At=new Error("No available storage method found.");return pe._driverSet=f.reject(At),pe._driverSet}),h(this._driverSet,de,ye),this._driverSet},K.prototype.supports=function(ee){return!!Li[ee]},K.prototype._extend=function(ee){xt(this,ee)},K.prototype._getSupportedDrivers=function(ee){for(var de=[],ye=0,pe=ee.length;ye<pe;ye++){var Pe=ee[ye];this.supports(Pe)&&de.push(Pe)}return de},K.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,de=Ci.length;ee<de;ee++)ps(this,Ci[ee])},K.prototype.createInstance=function(ee){return new K(ee)},K}(),ms=new Rn;r.exports=ms},{3:3}]},{},[4])(4)})})(v8e);var SJt=v8e.exports;const _q=Qu(SJt);class _8e{constructor(t){nl(this,"engine");nl(this,"connected",!1);nl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function $w(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class Cd extends _8e{constructor(){super("firebase");nl(this,"RECAPTCHAV3TOKEN","6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ");nl(this,"firestore");nl(this,"collectionPrefix","prod-");nl(this,"studyCollection");nl(this,"studyId","");nl(this,"localForage",_q.createInstance({name:"currentParticipantId"}));nl(this,"localProvenanceCopy",{});nl(this,"localWindowEvents",{});const n=pJ.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=j4e(n);this.firestore=vQt(r,{});try{bJt(r,{provider:new uee(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}async connect(){try{await _Qt(this.firestore);const n=await ks(this.firestore,".info/connected");await iT(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=rL();if(!i.currentUser&&(await Zqt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await $w(JSON.stringify(r));this.studyCollection=Gy(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const a=ks(this.studyCollection,"configs"),u=Gy(a,"configs"),l=ks(u,o);return s&&s!==o&&(this._deleteFromFirebaseStorage("","sequenceArray"),await this.clearCurrentParticipantId()),await this.localForage.setItem("currentConfigHash",o),await Gl(l,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=ks(this.studyCollection,this.currentParticipantId),a=(await iT(o)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([c,f])=>{a===null||!a.answers[c]||(f===void 0||f.length===0?a.answers[c].windowEvents=[]:a.answers[c].windowEvents=f)}),a)return a;const u=await $w(JSON.stringify(r)),l={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await Gl(o,l),l}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ks(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=ks(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await Gl(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=dg(),o=fg(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);Y0e(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=dg(),s=await Promise.all(n.map(async a=>await nT(fg(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,f=URL.createObjectURL(c);u(f)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=dg(),s=await Promise.all(n.map(async a=>await nT(fg(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(f=>{u(f)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=ks(this.studyCollection,"sequenceAssignment"),s=Gy(i,"sequenceAssignment"),o=ks(s,this.currentParticipantId),a=kye(s,PQt("participantId","==","")),u=await sT(a);if(u.docs.length>0){const p=u.docs[0],m=p.data().timestamp;await MQt(p.ref),await Gl(o,{participantId:this.currentParticipantId,timestamp:m})}else await Gl(o,{participantId:this.currentParticipantId,timestamp:FQt()});const l=kye(s,kQt("timestamp","asc")),d=(await sT(l)).docs.map(p=>p.data()).findIndex(p=>p.participantId===n||this.currentParticipantId),h=r[d%r.length];if(!h)throw new Error("Latin square is empty");return h}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await sT(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray"||s.id==="audioTags"||s.id==="sequenceAssignment"||s.id==="configs")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let r=null;if(this.currentParticipantId!==null){const i=ks(this.studyCollection,n||this.currentParticipantId);if(r=(await iT(i)).data(),r!==null){const s=await this._getFromFirebaseStorage(n||this.currentParticipantId,"provenance"),o=await this._getFromFirebaseStorage(n||this.currentParticipantId,"windowEvents");Object.entries(r.answers).forEach(([a,u])=>{u!==void 0&&(u.provenanceGraph=s[a],u.windowEvents=o[a])})}}return r}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ks(this.studyCollection),s=i.id;await this.localForage.setItem("currentParticipantId",s),this.currentParticipantId=s;let o=null;if(this.currentParticipantId!==null&&(o=(await iT(i)).data()),!o){const a=await $w(JSON.stringify(n)),u={participantId:s,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await Gl(i,u),o=u}return o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=ks(this.studyCollection,this.currentParticipantId);return await Gl(r,{completed:!0},{merge:!0}),n.completed=!0,!0}async getUserManagementData(n){const r=Gy(this.firestore,"user-management"),i=await sT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Gl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Gl(ks(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Gl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Gl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Gl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Gy(this.firestore,`${this.collectionPrefix}${n}`),i=await sT(r),s=[],o=i.docs.map(async a=>{if(a.id==="config"||a.id==="sequenceArray")return;const u=a.data(),l=await this._getFromFirebaseStorage(u.participantId,"provenance"),c=await this._getFromFirebaseStorage(u.participantId,"windowEvents");u.answers=Object.fromEntries(Object.entries(u.answers).map(([f,d])=>{if(d===void 0)return[f,d];const h=l[f],p=c[f];return[f,{...d,provenanceGraph:h,windowEvents:p}]})),s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Gy(this.firestore,`${this.collectionPrefix}${n}`),s=ks(i,r),o=(await iT(s)).data();try{if(!o||o.rejected)return;await Nye(s,{rejected:!0});const a=ks(i,"sequenceAssignment"),u=Gy(a,"sequenceAssignment"),l=ks(u,r);await Nye(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=dg(),s=fg(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await nT(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=dg(),o=fg(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await Y0e(o,a)}}async _deleteFromFirebaseStorage(n,r){const i=dg();fg(i,`${this.studyId}/${n}_${r}`)}async _getFirebaseProvenance(n){const r=dg(),i=fg(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await nT(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=dg(),i=fg(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await nT(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}}const b8e=C.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Qx=()=>C.useContext(b8e);function TJt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=C.useState(t),[o,a]=C.useState(!1),{storageEngine:u}=fo(),l=async()=>{const h=rL();try{await oWt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;C.useEffect(()=>{s(t);let h;if(u instanceof Cd)try{h=rL()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof Cd){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=sWt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=C.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return $.jsx(b8e.Provider,{value:d,children:i.determiningStatus?$.jsx(Mm,{visible:!0}):e})}function CJt(){const{config:e,metadata:t}=xa(x=>x),n=Lm(),r=Ec(),{toggleShowHelpText:i,toggleStudyBrowser:s}=kl(),{storageEngine:o}=fo(),a=xa(x=>x.isRecording),u=Fh(),l=Qx(),c=n.length-1,f=u/c*100,[d,h]=C.useState(!1),p=e==null?void 0:e.uiConfig.logoPath,m=e==null?void 0:e.uiConfig.withProgressBar,g=SK(),y=Qxe(`/${g}`);function v(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=y}).catch(x=>{console.error(x)})}const _=C.useRef(null),[w,S]=C.useState(!1);return C.useEffect(()=>{const x=_.current;x&&S(x.scrollWidth>x.offsetWidth)},[e]),$.jsx(mY,{height:"70",p:"md",children:$.jsxs(yf,{mt:-7,align:"center",children:[$.jsx(yf.Col,{span:4,children:$.jsxs(gr,{align:"center",noWrap:!0,children:[$.jsx(f_,{maw:40,src:`${Nc}${p}`,alt:"Study Logo"}),$.jsx(r1,{w:"md"}),$.jsx(ca,{order:4,children:e==null?void 0:e.studyMetadata.title}),a?$.jsxs(gr,{spacing:20,noWrap:!0,children:[$.jsx(dt,{color:"red",children:"Recording audio"}),$.jsx(bRe,{})]}):null]})}),$.jsx(yf.Col,{span:4,children:m&&$.jsx(NIe,{radius:"md",size:"lg",value:f})}),$.jsx(yf.Col,{span:4,children:$.jsxs(gr,{noWrap:!0,position:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&$.jsx(Lr,{variant:"outline",onClick:()=>r(i()),children:"Help"}),l.user.isAdmin&&$.jsxs(nc,{shadow:"md",width:200,zIndex:1,opened:d,onChange:h,children:[$.jsx(nc.Target,{children:$.jsx(lm,{size:"lg",className:"studyBrowserMenuDropdown",children:$.jsx(u0t,{})})}),$.jsxs(nc.Dropdown,{children:[$.jsx(nc.Item,{icon:$.jsx(Dfe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),$.jsx(nc.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:$.jsx(d0t,{size:14}),children:"Contact"}),$.jsx(nc.Item,{icon:$.jsx(Dfe,{size:14}),onClick:()=>v(),children:"Next Participant"})]})]})]})})]})})}function AJt(){var l;const e=(l=Em())==null?void 0:l.uiConfig.sidebar,t=Em(),n=Fh(),r=Lm()[n],i=t.components[r],s=C.useMemo(()=>{var c;return i?U5(i)&&t.baseComponents?BK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i,t.baseComponents]),o=dJ(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?$.jsxs(C2,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&$.jsx(C2.Section,{bg:"gray.3",p:"xl",children:$.jsxs(dt,{c:"gray.9",children:[$.jsx(dt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),$.jsx(Ka,{text:a})]})}),$.jsx(C2.Section,{p:"sm",children:$.jsx(KM,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):$.jsx(KM,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function IJt(){const{showHelpText:e,config:t}=xa(o=>o),n=Ec(),{toggleShowHelpText:r}=kl(),[i,s]=C.useState("");return C.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${Nc}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),$.jsx(qp,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:$.jsx(Ka,{text:i})})}function OJt(){const{alertModal:e}=xa(o=>o),{setAlertModal:t}=kl(),n=Ec(),[r,i]=C.useState(e.show),s=C.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return C.useEffect(()=>i(e.show),[e.show]),$.jsx(qp,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:$.jsxs(dTe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:$.jsx(Qgt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[$.jsx(dt,{my:"md",children:e.message}),$.jsx(pt,{style:{float:"right"},color:"red",children:$.jsx(Lr,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function PJt(){const e=C.useRef([]),n=Em().uiConfig.windowEventDebounceTime??100;return C.useEffect(()=>{const r=dd(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=dd(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=dd(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=dd(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=dd(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=dd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=dd(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=dd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=dd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),$.jsx(x4e.Provider,{value:e,children:$.jsxs(hI,{navbar:$.jsx(AJt,{}),aside:$.jsx(MVt,{}),header:$.jsx(CJt,{}),children:[$.jsx(IJt,{}),$.jsx(OJt,{}),$.jsx(QKe,{})]})})}var zye=Object.prototype.hasOwnProperty;function Uye(e,t,n){for(n of e.keys())if(iC(n,t))return n}function iC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&iC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Uye(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Uye(t,i),!i)||!iC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(zye.call(e,n)&&++r&&!zye.call(t,n)||!(n in t)||!iC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function kJt(e){var t=C.useRef(e),n=C.useRef(0);return iC(e,t.current)||(t.current=e,n.current+=1),C.useMemo(function(){return t.current},[n.current])}function RJt(e,t){return C.useEffect(e,kJt(t))}const w8e=(e,t=null)=>{const[n,r]=C.useState("idle"),[i,s]=C.useState(null),[o,a]=C.useState(null),u=C.useRef(),l=C.useRef(!1);C.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=C.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return RJt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Mk=3,sb=25,Lk=25,Fk=20,Vye=1;function $Jt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=C.useState(!1),[l,{width:c}]=mc();return $.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[$.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+Vye,width:e(t.endTime)-e(t.startTime)-Vye*2,y:r-sb,height:sb}),$.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-Mk,width:c+Mk*2,y:r-sb-Lk-o,height:Fk,fill:"whitesmoke"}),$.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-Mk,x2:c+e(t.startTime)+Mk,y1:r-sb-Lk+Fk-o,y2:r-sb-Lk+Fk-o}),$.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-sb-Lk-o,height:Fk,children:$.jsx(Ya,{style:{width:"fit-content"},children:$.jsx(dt,{weight:600,lineClamp:1,ref:l,mx:0,style:{width:"fit-content"},size:12,children:n})})})]})}function NJt({xScale:e,answer:t,height:n,labelHeight:r=0}){return $.jsx("g",{children:$.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const Hye=25,DJt=8;function E8e({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=xa(l=>l),a=C.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(f=>s?f[0]===s:!0).sort((f,d)=>f[1].startTime-d[1].startTime);return c.map((f,d)=>{const[h,p]=f,m=d>0?c[d-l-1]:null;return m&&m[0].length*DJt+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:$.jsx(NJt,{labelHeight:l*Hye,answer:p,height:r,xScale:e},h),label:$.jsx($Jt,{labelHeight:l*Hye,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=C.useMemo(()=>Object.entries(t.answers||{}).sort((c,f)=>c[1].startTime-f[1].startTime).map(c=>{const[f,d]=c,h=[];let p=[-1,-1],m="visible";if(d.windowEvents)for(let g=0;g<d.windowEvents.length;g+=1)d.windowEvents[g][1]==="visibility"&&(d.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[d.windowEvents[g][0],-1],m="hidden"):d.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=d.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>$.jsx(Wp,{withinPortal:!0,label:"Browsed away",children:$.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:$.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}const n7={left:5,top:0,right:5,bottom:0};function MJt(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function LJt({participant:e,maxDuration:t}){const n=kc(),r=vy(),i=C.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,f)=>c.startTime-f.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=mc(),a=C.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:VK(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=C.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(d=>[d.startTime,d.endTime]).flat(),c=E3(l);return yh([n7.left,o+n7.left+n7.right]).domain(c).clamp(!0)},[e,o]);return $.jsx(Ya,{children:$.jsxs(Bi,{spacing:25,ref:s,style:{width:"75%"},children:[$.jsxs(gr,{position:"apart",children:[$.jsx(dI,{size:25,component:cXe,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/${gc(e.sequence)[0]}`),children:e.participantId}),$.jsx(dt,{size:"xl",children:`${a}`}),$.jsx(dt,{size:"xl",children:`${MJt(i)}`})]}),u?$.jsx(E8e,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function FJt(e){return e?e.getAllParticipantsData():null}const jJt=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],BJt=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function zJt(){const{storageEngine:e}=fo(),{value:t,status:n}=w8e(FJt,[e]),r=C.useMemo(()=>{if(!(n!=="success"||!t))return yc(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?$.jsx(Bi,{spacing:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>BJt.includes(i.participantId)||jJt.includes(i.participantId)).map(i=>$.jsx(LJt,{maxDuration:r,participant:i},i.participantId))}):$.jsx(dh,{})}var x8e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Ua,()=>(()=>{var n={d:(c,f)=>{for(var d in f)n.o(f,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:f[d]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(c)}function s(c){return function(f){if(Array.isArray(f))return o(f)}(c)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(c)||function(f,d){if(f){if(typeof f=="string")return o(f,d);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(f,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,h=new Array(f);d<f;d++)h[d]=c[d];return h}function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var _=v.call(g,y||"default");if(i(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var f,d;return f=c,d=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(_){return _.headers.has("Content-Type")&&!_.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(_.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),_.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),_=m.getChannelData(g).length-1;_>=0;_--)y[_]+=v[_];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),_=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),S=0;S<h.numberOfChannels;S++)for(var x=h.getChannelData(S),b=w.getChannelData(S),T=0;T<v;T++)b[T]=x[_+T],T<g*this._sampleRate&&(b[T]*=T/(g*this._sampleRate)),T>v-y*this._sampleRate&&(b[T]*=(v-T)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,_=new ArrayBuffer(8+v),w=new DataView(_);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,S){return w+S.length},0),y=new Float32Array(g),v=0,_=0;v<g;)p.forEach(function(w){y[v++]=w[_]}),_++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],d&&u(f.prototype,d),Object.defineProperty(f,"prototype",{writable:!1}),c}();return r})())})(x8e);var UJt=x8e.exports;const VJt=Qu(UJt);function HJt(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function qJt(e,t){const n=HJt(e),r=C.useRef(),i=C.useRef(),s=C.useRef(!0),o=C.useRef(t),a=C.useRef(-1),u=()=>window.clearTimeout(a.current),l=C.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=C.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=C.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return C.useEffect(()=>{o.current=t},[t]),[f,u]}function WJt(e,t){const[n,r]=C.useState(e),[i,s]=qJt(r,t);return C.useEffect(()=>s,[]),[n,i]}function GJt({cx:e,cy:t,r:n,color:r}){return $.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function YJt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return $.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return $.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:$.jsx(GJt,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?$.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const qye={left:5,top:0,right:5,bottom:0};function KJt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const f=C.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{trialFilter:d}=um();C.useEffect(()=>{if(!d||!t)return;const m=t.answers[d].provenanceGraph;if(!m)return;const{startTime:g}=t.answers.introduction,y=g+o;if(!i||!m.nodes[i]){s(m.root);return}let v=m.nodes[i];for(;;)if(y<v.createdOn){if(U8t(v))break;{const _=v.parent;if(y<m.nodes[_].createdOn)v=m.nodes[_];else break}}else if(v.children.length>0){const _=v.children[0];if(y>m.nodes[_].createdOn)v=m.nodes[_];else break}else break;v.id!==i&&s(v.id)},[i,t,o,s,d]);const h=C.useCallback((m,g,y)=>{a(g,(g-e.domain()[0])/f),s(m)},[s,a,f,e]),p=C.useMemo(()=>Object.entries(t.answers).filter(m=>d?d===m[0]:!0).map(m=>{const[g,y]=m;return $.jsx(YJt,{taskName:g,answer:y,height:r,currentNode:i,setCurrentNode:h,xScale:e},g)}),[i,h,r,t.answers,d,e]);return $.jsx(Bi,{children:$.jsxs("svg",{style:{width:n,height:r},children:[$.jsx("line",{stroke:"black",strokeWidth:1,x1:qye.left,x2:n+qye.left,y1:r/2,y2:r/2}),p]})})}const Wye={top:5,left:5,right:5,bottom:5};function XJt({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=C.useMemo(()=>e.map(s=>$.jsxs("g",{children:[$.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:Wye.top,y2:Wye.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>$.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),f=t(n+s.end*1e3);return $.jsx("foreignObject",{x:c+(f-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:$.jsx(Wp,{label:u.name,withArrow:!0,arrowSize:6,children:$.jsx(R0,{size:12,color:u.color})})},u.name)})},a))]},s.start)),[r,n,e,t]);return $.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}const QJt=C.forwardRef(({color:e,name:t,...n},r)=>$.jsx("div",{ref:r,...n,children:$.jsxs(gr,{spacing:"xs",noWrap:!0,children:[$.jsx(R0,{size:10,color:e}),$.jsx(dt,{children:t})]})}));function JJt({value:e,label:t,color:n,onRemove:r,classNames:i,...s}){const o=WC(n).l;return $.jsx("div",{...s,children:$.jsxs(pt,{sx:a=>({display:"flex",cursor:"default",alignItems:"center",backgroundColor:n,border:`1px solid ${a.colorScheme==="dark"?a.colors.dark[7]:a.colors.gray[4]}`,paddingLeft:4,borderRadius:4}),children:[$.jsx(dt,{color:o>.7?"dark":"white",sx:{lineHeight:1,fontSize:12},children:t}),$.jsx(Rm,{onMouseDown:r,color:o>.7?"dark":"white",sx:{color:o>.7?"black":"white"},variant:"transparent",size:22,iconSize:14,tabIndex:-1})]})})}function ZJt({start:e,current:t,end:n,text:r,tags:i,selectedTags:s,addTag:o,onTextChange:a,deleteRowCallback:u,addRowCallback:l,onSelectTags:c,addRef:f}){return $.jsxs(gr,{position:"apart",style:{width:"100%"},noWrap:!0,children:[$.jsxs(gr,{noWrap:!0,spacing:0,style:{width:"100%"},children:[$.jsx(h0t,{height:40,width:20,viewBox:"10 0 14 24",strokeWidth:2,color:t>=e&&t<=n?"cornflowerblue":"lightgray"}),$.jsx(mx,{ref:d=>d?f(d):null,style:{width:"100%"},variant:"unstyled",value:r,onChange:d=>{a(d.currentTarget.value)},onKeyDown:d=>{d.key==="Enter"&&d.currentTarget.selectionStart!==null?l(d.currentTarget.selectionStart):d.key==="Backspace"&&d.currentTarget.selectionStart===0&&d.currentTarget.selectionEnd===0&&(u(),d.preventDefault(),d.stopPropagation())}})]}),$.jsxs(gr,{noWrap:!0,style:{width:"400px"},children:[$.jsx(jC,{orientation:"vertical",size:"xs"}),$.jsx(qY,{nothingFound:"No tags found. Add more via the + button.",valueComponent:JJt,itemComponent:QJt,value:s.map(d=>d.name),onChange:d=>c(d.map(h=>i.find(p=>p.name===h))),style:{width:"380px"},data:i.map(d=>({...d,value:d.name,label:d.name}))})]})]})}function Gye({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=C.useState(n?r.name:""),[o,a]=C.useState(n?r.color:"#fd7e14");return $.jsxs(Bi,{spacing:"xs",children:[$.jsxs(gr,{children:[$.jsx(R0,{color:o}),$.jsx(mx,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),$.jsx(oAe,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),$.jsx(Lr,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),compact:!0,onClick:()=>e({color:o,name:i}),children:n?"Edit Tag":"Add Tag"})]})}function eZt({createTagCallback:e,editTagCallback:t,tags:n}){const[r,i]=C.useState(!1);return $.jsxs(Bi,{style:{width:"300px"},spacing:"xs",children:[n.length===0?$.jsx(dt,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(s=>$.jsxs(gr,{position:"apart",children:[$.jsxs(gr,{children:[$.jsx(R0,{color:s.color}),$.jsx(dt,{children:s.name})]}),$.jsxs(Pr,{trapFocus:!0,children:[$.jsx(Pr.Target,{children:$.jsx(l0t,{color:"lightgray"})}),$.jsx(Pr.Dropdown,{children:$.jsx(Gye,{editTag:!0,currentNames:n.map(o=>o.name),addTagCallback:o=>{t(s,o)},editableTag:s})})]})]},s.name)),$.jsxs(Pr,{trapFocus:!0,opened:r,children:[$.jsx(Pr.Target,{children:$.jsx(Lr,{variant:"light",onClick:()=>i(!r),children:"Create new tag"})}),$.jsx(Pr.Dropdown,{children:$.jsx(Gye,{currentNames:n.map(s=>s.name),addTagCallback:s=>{i(!1),e(s)}})})]})]})}function tZt({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){const[a,u]=C.useState(null),{trrackId:l,studyId:c,trialFilter:f}=um(),[d,h]=C.useState([]),{storageEngine:p}=fo(),m=Em(),g=C.useRef([]),y=Kb((x,b)=>{const T=[...s];T[x].text=b,o(T)}),v=Kb((x,b)=>{const T=[...s];T[x].selectedTags=b,o(T)}),_=Kb(x=>{if(x===0)return;const b=structuredClone(s);b[x-1].text=s[x-1].text+s[x].text,b[x-1].transcriptMappingEnd=s[x].transcriptMappingEnd,b[x-1].selectedTags=[...s[x-1].selectedTags,...s[x].selectedTags.filter(T=>!s[x-1].selectedTags.find(A=>A.name===T.name))],b.splice(x,1),b.filter(T=>T.transcriptMappingStart===b[x-1].transcriptMappingStart).forEach(T=>{T.transcriptMappingEnd=b[x-1].transcriptMappingEnd}),o(b),setTimeout(()=>{g.current[x-1].focus(),g.current[x-1].setSelectionRange(s[x-1].text.length,s[x-1].text.length,"none")})}),w=Kb((x,b)=>{const T=structuredClone(s),A=T[x];T.splice(x+1,0,{transcriptMappingEnd:A.transcriptMappingEnd,transcriptMappingStart:A.transcriptMappingStart,text:A.text.slice(b),selectedTags:A.selectedTags}),T[x].text=T[x].text.slice(0,b),o(T),setTimeout(()=>{g.current[x+1].focus(),g.current[x+1].setSelectionRange(0,0)})});C.useEffect(()=>{const x=[];s.forEach((b,T)=>{a&&(T===0||b.transcriptMappingStart!==s[T-1].transcriptMappingStart)&&x.push({start:T===0?0:a.results[b.transcriptMappingStart-1].resultEndTime,end:a.results[b.transcriptMappingEnd].resultEndTime,lineStart:b.transcriptMappingStart,lineEnd:b.transcriptMappingEnd,tags:s.filter(A=>A.transcriptMappingStart===b.transcriptMappingStart&&A.transcriptMappingEnd===b.transcriptMappingEnd).map(A=>A.selectedTags)})}),n(x)},[s,n,a]),C.useEffect(()=>{c&&l&&e&&(p==null||p.getTranscription(gc(e.sequence).filter(x=>m.tasksToNotRecordAudio===void 0||!m.tasksToNotRecordAudio.includes(x)).filter(x=>f?x===f:!0),l).then(x=>{const b=x.map(I=>JSON.parse(I));let T=0;const A=b.map(I=>{const k=I.results.map(R=>({...R,resultEndTime:+R.resultEndTime.split("s")[0]+T}));return T+=+I.results[I.results.length-1].resultEndTime.split("s")[0],k}).flat();u({results:A}),o(A.map((I,k)=>{var R;return{transcriptMappingStart:k,transcriptMappingEnd:k,text:((R=I.alternatives[0].transcript)==null?void 0:R.trim())||"",selectedTags:[]}})),i(0)}))},[p,c,l,m.tasksToNotRecordAudio,e,f,o,i]),C.useEffect(()=>{if(a&&r!==null&&e&&t>0){let x=r;const b=f?e.answers[f].startTime:e.answers.audioTest.startTime,T=Math.abs(t-b)/1e3;if(T>a.results[x].resultEndTime){for(;T>a.results[x].resultEndTime;)if(x+=1,x>a.results.length-1){x=a.results.length-1;break}}else if(x>0&&T<a.results[x-1].resultEndTime)for(;x>0&&T<a.results[x-1].resultEndTime;)x-=1;if(r===x)return;i(x)}},[r,e,t,i,a,f]);const S=C.useCallback((x,b)=>{const T=d.findIndex(k=>k.name===x.name),A=Array.from(d);A[T]=b;const I=Array.from(s);I.forEach(k=>{k.selectedTags=k.selectedTags.map(R=>R.name===x.name?b:R)}),o(I),h(A)},[o,d,s]);return $.jsxs(Bi,{spacing:0,children:[$.jsxs(gr,{mb:"xl",position:"apart",noWrap:!0,children:[$.jsx(dt,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),$.jsxs(Pr,{children:[$.jsx(Pr.Target,{children:$.jsxs(gr,{position:"center",style:{width:"380px",cursor:"pointer"},children:[$.jsx(OOe,{}),$.jsx(dt,{children:"Tags"})]})}),$.jsx(Pr.Dropdown,{children:$.jsx(eZt,{createTagCallback:x=>{h([...d,x])},editTagCallback:S,tags:d})})]})]}),s.map((x,b)=>$.jsx(ZJt,{addRef:T=>{g.current[b]=T},onSelectTags:T=>v(b,T),addRowCallback:T=>w(b,T),deleteRowCallback:()=>_(b),onTextChange:T=>y(b,T),tags:d,selectedTags:x.selectedTags,addTag:T=>{h([...d,T]),v(b,[...x.selectedTags,T])},text:x.text,start:x.transcriptMappingStart,end:x.transcriptMappingEnd,current:r===null?0:r},b))]})}const r7={left:5,top:0,right:5,bottom:0};function nZt(e,t){return t?t.getParticipantData(e):null}const Yye=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],Kye=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function rZt(){const{trrackId:e,trialFilter:t}=um(),{storageEngine:n}=fo(),[r,i]=C.useState(0),[s,{width:o}]=mc(),[a,u]=C.useState(null),{value:l,status:c}=w8e(nZt,[e,n]),{saveAnalysisState:f}=kl(),d=Ec(),[h,p]=C.useState(!1),[m,g]=WJt(0,50),y=C.useRef(null),v=Em(),_=kc(),{analysisTrialName:w}=xa(L=>L),{setAnalysisTrialName:S}=kl(),[x,b]=C.useState(!0),T=C.useRef(null),[A,I]=C.useState([]),[k,R]=C.useState([]),P=C.useMemo(()=>[...Yye,...Kye],[]);C.useEffect(()=>{if(w&&l){const L=gA.create(),j=OH({registry:L,initialState:{}});l.answers[w].provenanceGraph&&(j.importObject(OE(l.answers[w].provenanceGraph)),T.current=j)}},[l,w]);const N=C.useCallback(L=>{var j;w&&l&&T.current&&(d(f(T.current.getState((j=l.answers[w].provenanceGraph)==null?void 0:j.nodes[L]))),T.current.to(L)),u(L)},[l,f,d,w,T]),F=C.useCallback(L=>{var j;if(L!==w)if(d(S(L)),d(f(null)),l&&l.answers[L].provenanceGraph){const q=gA.create(),Z=OH({registry:q,initialState:{}});Z.importObject(OE(l.answers[L].provenanceGraph)),T.current=Z,N(((j=l.answers[L].provenanceGraph)==null?void 0:j.root)||"")}else d(f(null)),u(null),T.current=null},[N,l,f,S,d,w]);C.useEffect(()=>{t&&F(t)},[F,t]);const B=Kb(L=>{if(l&&w&&(l.answers[w].endTime-l.answers.audioTest.startTime)/1e3<L){const j=gc(l.sequence);F(j[j.indexOf(w)+1])}else l&&w&&T.current&&T.current.current.children.length>0&&(T.current.graph.backend.nodes[T.current.current.children[0]].createdOn-l.answers.audioTest.startTime)/1e3<L&&N(T.current.current.children[0]);if(l&&w){const j=t?l.answers[t].startTime:l.answers.audioTest.startTime;g(L*1e3+j)}}),W=C.useCallback(L=>{if(L&&l&&e){const j=new VJt;n==null||n.getAudio(gc(l.sequence).filter(q=>v.tasksToNotRecordAudio===void 0||!v.tasksToNotRecordAudio.includes(q)).filter(q=>t?q===t:!0),e).then(q=>{L&&j.fetchAudio(...q).then(Z=>j.concatAudio(Z)).then(Z=>j.export(Z,"audio/mp3")).then(Z=>L.loadBlob(Z.blob).then(()=>b(!1))).catch(Z=>{throw new Error(Z)}),L.on("timeupdate",B)})}},[v.tasksToNotRecordAudio,l,n,B,t,e]),V=yRe({container:y.current,plugins:[],onMount:W});C.useEffect(()=>{W(V)},[W,l,V]);const G=C.useCallback((L,j)=>{g(L),V&&j&&(V==null||V.seekTo(j))},[g,V]),M=C.useCallback(L=>{p(L),V&&(L?V.play():V.pause())},[V]),H=C.useMemo(()=>{if(!l)return null;const L=Object.values(l.answers||{}).map(Z=>[Z.startTime,Z.endTime]).flat(),j=E3(L);return yh([r7.left,o+r7.left+r7.right]).domain(t?[l.answers[t].startTime,l.answers[t].endTime]:j).clamp(!0)},[l,t,o]),Y=C.useCallback(L=>{if(!l)return;const j=P.indexOf(l.participantId);L?_(`../../${t?"../":""}${P[j+1]}/ui/${t||""}`,{relative:"path"}):_(`../../${t?"../":""}${P[j-1]}/ui/${t||""}`,{relative:"path"})},[P,_,l,t]);return $.jsx(gr,{noWrap:!0,spacing:25,children:$.jsxs(Bi,{ref:s,style:{width:"100%"},spacing:25,children:[$.jsx(Ya,{children:$.jsxs(gr,{children:[$.jsx(lm,{children:$.jsx(Zgt,{onClick:()=>Y(!1)})}),$.jsx(Gp,{style:{width:"300px"},value:l==null?void 0:l.participantId,onChange:L=>_(`../../${t?"../":""}${L}/ui/${t||""}`,{relative:"path"}),data:[...Yye,...Kye]}),$.jsx(Gp,{style:{width:"300px"},clearable:!0,value:t,data:l?[...gc(l.sequence)]:[],onChange:L=>_(`${t?"../":""}${L||""}`,{relative:"path"})}),$.jsx(lm,{children:$.jsx(e0t,{onClick:()=>Y(!0)})})]})}),c==="success"&&l&&H?$.jsx(E8e,{trialFilter:t,xScale:H,setSelectedTask:F,participantData:l,width:o,height:200}):$.jsx(Ya,{style:{height:"275px"},children:$.jsx(dh,{})}),H&&l!==null?$.jsxs($.Fragment,{children:[$.jsxs(pt,{ref:y,ml:l&&H?H(l.answers.audioTest.startTime):0,mr:l&&H?H(l.answers["post-study-survey"].startTime):0,style:{WebkitBoxSizing:"border-box",width:`${l&&H?H(l.answers["post-study-survey"].startTime)-H(l.answers.audioTest.startTime):0}px`},children:[$.jsx(dRe.Provider,{value:V,children:$.jsx(zK,{id:"waveform"})},l.participantId),x?$.jsx(dh,{}):null]}),$.jsx(XJt,{startTime:t?H.domain()[0]:l.answers.audioTest.startTime,xScale:H,transcriptLines:A,currentShownTranscription:r})]}):null,c==="success"&&l&&H?$.jsx(KJt,{xScale:H,setSelectedTask:F,playTime:m-l.answers.introduction.startTime,setPlayTime:G,isPlaying:h,setIsPlaying:M,currentNode:a,setCurrentNode:N,participantData:l,width:o,height:50}):null,$.jsxs(gr,{children:[$.jsx(Lr,{onClick:()=>M(!0),children:"Play"}),$.jsx(Lr,{onClick:()=>M(!1),children:"Pause"}),$.jsx(dt,{children:new Date(m).toLocaleString()})]}),$.jsx(Bi,{children:l?$.jsx(tZt,{transcriptList:k,setTranscriptList:R,setCurrentShownTranscription:i,currentShownTranscription:r,participant:l,playTime:m,setTranscriptLines:I}):null})]})})}function iZt({setProvState:e}){return $.jsx("div",{children:$.jsx(rZt,{})})}function sZt(){return $.jsx(Dm,{pt:100,children:$.jsx(Ya,{children:$.jsxs(ca,{order:3,children:[$.jsx(dt,{span:!0,c:"orange",children:"Study ID"})," ","not Found, please check valid Study ID on your global config, or contact the administrator."]})})})}async function oZt(e,t){const n=await(await fetch(`${Nc}${e}`)).text();return b4e(n,t)}async function lee(e,t){const n=t.configsList.find(r=>JY(r)===e);if(n){const r=t.configs[n];return await oZt(`${r.path}`,n)}return null}function aZt({studyId:e,config:t}){const{sequence:n}=xa(i=>i),r=C.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:$.jsx(WH,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors?$.jsxs($.Fragment,{children:[$.jsx(ca,{order:2,mb:8,children:"Error loading config"}),$.jsx(cke,{errors:t.errors})]}):$.jsx(zB,{})}),i.push({path:"/analysis/:trrackId/:trialName/",element:$.jsx(zB,{})}),i.push({path:"/analysis/:trrackId/ui/:trialFilter?/",element:$.jsx(iZt,{setProvState:()=>null})}),i.push({path:"/analysis",element:$.jsx(zJt,{})}),i.push({path:"/:trialName",element:$.jsx(zB,{})}),i.push({path:"/end",element:$.jsx(E4e,{})}),[{element:$.jsx(PJt,{}),children:i}]}return[]},[t,n,e]);return eSe(r)}function uZt({globalConfig:e}){const t=SK(),[n,r]=C.useState(null),i=e.configsList.find(f=>JY(f)===t),s=Qx();C.useEffect(()=>{lee(t,e).then(f=>{r(f)})},[e,t]);const[o,a]=C.useState(null),{storageEngine:u}=fo(),[l]=eY();C.useEffect(()=>{async function f(){if(!u||!n||!t)return;await u.initializeStudyDb(t,n),await u.getSequenceArray()||await u.setSequenceArray(await DVt(n));const h=n.uiConfig.urlParticipantIdParam&&l.get(n.uiConfig.urlParticipantIdParam)||void 0,p=Object.fromEntries(l.entries()),m=await fetch("https://api.ipify.org?format=json").catch(w=>""),g=m instanceof Response?await m.json():{ip:""},y={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:g.ip},v=await u.initializeParticipantSession(p,n,y,h),_=await y2t(t,n,v.sequence,y,v.answers,s.user.isAdmin);a(_)}f()},[u,n,t,l,s.user.isAdmin]);const c=o?$.jsx(fRe.Provider,{value:o,children:$.jsx(Uxt,{store:o.store,children:$.jsx(aZt,{studyId:t,config:n})})}):$.jsx(Mm,{visible:!0});return i?c:$.jsx(sZt,{})}function sC({studyIds:e}){const t=kc(),{studyId:n}=um(),r=vy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=fo(),{user:o,logout:a}=Qx(),[u,l]=C.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:$.jsx(c0t,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:$.jsx(r0t,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:$.jsx(y0t,{}),href:"/settings",needAdmin:!0}];return $.jsx(mY,{height:70,p:"md",children:$.jsxs(yf,{mt:-7,align:"center",children:[$.jsx(yf.Col,{span:6,children:$.jsxs(vi,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),sx:{cursor:"pointer"},children:[$.jsx(f_,{maw:40,src:`${Nc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),$.jsx(r1,{w:"md"}),$.jsx(ca,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),$.jsx(yf.Col,{span:6,children:$.jsxs(vi,{justify:"flex-end",direction:"row",children:[c&&$.jsx(Gp,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),$.jsx(sCe,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),$.jsx(pAe,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:$.jsxs(vi,{direction:"column",mt:20,children:[$.jsx(dt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?$.jsx(Lr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:$.jsx(Lr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),$.jsxs(pt,{ml:10,children:[$.jsx(jC,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?$.jsx(dt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):$.jsx(dt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function lZt({cellData:e}){return $.jsx("td",{children:$.jsx(Bi,{miw:100,children:Object.entries(e.answer).map(([t,n])=>$.jsxs(pt,{children:[$.jsxs(dt,{fw:700,span:!0,children:[" ",`${t}: `]}),$.jsx(dt,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Xye({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return $.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function cZt(e){const{metaData:t}=e;return $.jsx("td",{children:$.jsx(sOe,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:$.jsxs(Bi,{spacing:"xs",children:[$.jsxs(pt,{children:["IP:"," ",t.ip]}),$.jsxs(pt,{children:["Language:"," ",t.language]}),$.jsxs(pt,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),$.jsxs(pt,{children:["User Agent:"," ",t.userAgent]})]})})})}function fZt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=fo(),{studyId:s}=um(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),r())},[a,u]=C.useState([]),[l,c]=C.useState(!1),f=()=>Ngt({title:"Confirm rejecting participants",children:$.jsxs(dt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",$.jsx(dt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=cRe(n.sequence),p=[$.jsx("th",{children:$.jsx(vi,{justify:"center",children:$.jsx(eE,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),$.jsx("th",{children:"ID"},"ID"),$.jsx("th",{children:"Status"},"status"),$.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[$.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),$.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),$.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>$.jsxs("tr",{children:[$.jsx("td",{children:$.jsx(vi,{justify:"center",children:$.jsx(eE,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),$.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),$.jsx("td",{children:$.jsxs(vi,{direction:"row",align:"center",children:[g.rejected?$.jsx(Wp,{label:"Rejected",children:$.jsx(kOe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?$.jsx(Wp,{label:"Completed",children:$.jsx(o0t,{size:16,color:"teal",style:{marginBottom:-3}})}):$.jsx(Wp,{label:"In Progress",children:$.jsx(m0t,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&$.jsxs(dt,{size:"sm",mb:-1,ml:4,children:[Object.entries(g.answers).length/(gc(g.sequence).length-1)*100,"%"]})]})}),g.metadata?$.jsx(cZt,{metaData:g.metadata}):$.jsx("td",{children:"N/A"}),h.map(y=>{const v=uRe(g.sequence,y.orderPath),_=v&&Object.entries(g.answers).sort((w,S)=>{const x=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),b=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10);return x-b}).filter(([w])=>{const S=w.slice(0,w.lastIndexOf("_")),x=parseInt(w.slice(w.lastIndexOf("_")+1),10);return S===y.componentName&&x<=v[0].lastIndex&&x>=v[0].firstIndex});return _!==null&&_.length>=y.timesSeenInBlock+1?$.jsxs(z.Fragment,{children:[$.jsx(lZt,{cellData:_[y.timesSeenInBlock][1]}),$.jsx(Xye,{cellData:_[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):$.jsxs(z.Fragment,{children:[$.jsx("td",{children:"N/A"}),$.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),$.jsx(Xye,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?$.jsxs($.Fragment,{children:[$.jsx(Mm,{visible:l,overlayBlur:2}),$.jsxs(vi,{justify:"space-between",mb:8,p:8,children:[$.jsx(gr,{children:$.jsx(Gp,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,icon:$.jsx(g0t,{size:14}),onChange:g=>g&&d(g)})}),$.jsx(gr,{children:$.jsx(Lr,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),$.jsxs(KY,{striped:!0,withBorder:!0,children:[$.jsx("thead",{children:$.jsx("tr",{children:p})}),$.jsx("tbody",{children:m})]})]}):$.jsx(vi,{justify:"center",align:"center",style:{height:"100%"},children:$.jsx(dt,{children:"No data available"})})}function dZt(e){const{globalConfig:t}=e,{studyId:n}=um(),[r,i]=C.useState([]),[s,o]=C.useState(void 0),[a,u]=C.useState(!1),{storageEngine:l}=fo(),c=kc(),{tab:f}=um(),d=C.useCallback(async()=>{if(u(!0),n){const m=await lee(n,t);if(!m||!l)return;await l.initializeStudyDb(n,m);const g=await l.getAllParticipantsData();i(g),o(m),u(!1)}},[t,l,n]);C.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=C.useMemo(()=>{const m=r.filter(y=>y.completed),g=r.filter(y=>!y.completed);return[m,g]},[r]);return $.jsxs(hI,{children:[$.jsx(sC,{studyIds:e.globalConfig.configsList}),$.jsxs(Dm,{fluid:!0,style:{height:"100%"},children:[$.jsx(Mm,{visible:a}),$.jsxs(Jl,{variant:"outline",value:f,onTabChange:m=>c(`./../${m}`),style:{height:"100%"},children:[$.jsxs(Jl.List,{children:[$.jsx(Jl.Tab,{value:"table",icon:$.jsx(v0t,{size:16}),children:"Table View"}),$.jsx(Jl.Tab,{value:"stats",icon:$.jsx(i0t,{size:16}),children:"Trial Stats"}),$.jsx(Jl.Tab,{value:"settings",icon:$.jsx(p0t,{size:16}),children:"Individual Replay"})]}),$.jsx(Jl.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&$.jsx(fZt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),$.jsx(Jl.Panel,{value:"stats",pt:"xs",children:"statsboard"}),$.jsx(Jl.Panel,{value:"settings",pt:"xs",children:"Settings tab content"})]})]})]})}function i7({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=Qx(),{storageEngine:i}=fo();return C.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?$.jsx(Mm,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?$.jsx(ZG,{to:"/login"}):$.jsx($.Fragment,{children:e})}async function S8e(e,t,n){if(e instanceof Cd){t(!0);const r=new Pp,i=rL();try{await AWt(i,r)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function hZt(){const{user:e}=Qx(),[t,n]=C.useState(null),[r,i]=C.useState(!1),{storageEngine:s}=fo();return C.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?$.jsx(ZG,{to:"/"}):$.jsx(Dm,{children:$.jsx(i4,{p:"lg",children:$.jsxs(vi,{align:"center",direction:"column",justify:"center",children:[$.jsx(f_,{maw:200,mt:50,mb:100,src:`${Nc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),$.jsxs($.Fragment,{children:[$.jsx(dt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),$.jsx(Lr,{onClick:()=>S8e(s,i,n),leftIcon:$.jsx(n0t,{}),variant:"filled",children:"Sign In With Google"})]}),t?$.jsx(RR,{size:"lg",color:"red",mt:30,children:t}):null,$.jsx(Mm,{visible:r})]})})})}function pZt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function T8e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function mZt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=pZt(i,t),o=T8e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var C8e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ua,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var F=["th","st","nd","rd"],B=N%100;return"["+N+(F[(B-20)%10]||F[B]||F[0])+"]"}},_=function(N,F,B){var W=String(N);return!W||W.length>=F?N:""+Array(F+1-W.length).join(B)+N},w={s:_,z:function(N){var F=-N.utcOffset(),B=Math.abs(F),W=Math.floor(B/60),V=B%60;return(F<=0?"+":"-")+_(W,2,"0")+":"+_(V,2,"0")},m:function N(F,B){if(F.date()<B.date())return-N(B,F);var W=12*(B.year()-F.year())+(B.month()-F.month()),V=F.clone().add(W,f),G=B-V<0,M=F.clone().add(W+(G?-1:1),f);return+(-(W+(B-V)/(G?V-M:M-V))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},S="en",x={};x[S]=v;var b="$isDayjsObject",T=function(N){return N instanceof R||!(!N||!N[b])},A=function N(F,B,W){var V;if(!F)return S;if(typeof F=="string"){var G=F.toLowerCase();x[G]&&(V=G),B&&(x[G]=B,V=G);var M=F.split("-");if(!V&&M.length>1)return N(M[0])}else{var H=F.name;x[H]=F,V=H}return!W&&V&&(S=V),V||!W&&S},I=function(N,F){if(T(N))return N.clone();var B=typeof F=="object"?F:{};return B.date=N,B.args=arguments,new R(B)},k=w;k.l=A,k.i=T,k.w=function(N,F){return I(N,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var R=function(){function N(B){this.$L=A(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[b]=!0}var F=N.prototype;return F.parse=function(B){this.$d=function(W){var V=W.date,G=W.utc;if(V===null)return new Date(NaN);if(k.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var M=V.match(g);if(M){var H=M[2]-1||0,Y=(M[7]||"0").substring(0,3);return G?new Date(Date.UTC(M[1],H,M[3]||1,M[4]||0,M[5]||0,M[6]||0,Y)):new Date(M[1],H,M[3]||1,M[4]||0,M[5]||0,M[6]||0,Y)}}return new Date(V)}(B),this.init()},F.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},F.$utils=function(){return k},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(B,W){var V=I(B);return this.startOf(W)<=V&&V<=this.endOf(W)},F.isAfter=function(B,W){return I(B)<this.startOf(W)},F.isBefore=function(B,W){return this.endOf(W)<I(B)},F.$g=function(B,W,V){return k.u(B)?this[W]:this.set(V,B)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(B,W){var V=this,G=!!k.u(W)||W,M=k.p(B),H=function(fe,me){var _e=k.w(V.$u?Date.UTC(V.$y,me,fe):new Date(V.$y,me,fe),V);return G?_e:_e.endOf(l)},Y=function(fe,me){return k.w(V.toDate()[fe].apply(V.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(me)),V)},L=this.$W,j=this.$M,q=this.$D,Z="set"+(this.$u?"UTC":"");switch(M){case h:return G?H(1,0):H(31,11);case f:return G?H(1,j):H(0,j+1);case c:var ue=this.$locale().weekStart||0,he=(L<ue?L+7:L)-ue;return H(G?q-he:q+(6-he),j);case l:case p:return Y(Z+"Hours",0);case u:return Y(Z+"Minutes",1);case a:return Y(Z+"Seconds",2);case o:return Y(Z+"Milliseconds",3);default:return this.clone()}},F.endOf=function(B){return this.startOf(B,!1)},F.$set=function(B,W){var V,G=k.p(B),M="set"+(this.$u?"UTC":""),H=(V={},V[l]=M+"Date",V[p]=M+"Date",V[f]=M+"Month",V[h]=M+"FullYear",V[u]=M+"Hours",V[a]=M+"Minutes",V[o]=M+"Seconds",V[s]=M+"Milliseconds",V)[G],Y=G===l?this.$D+(W-this.$W):W;if(G===f||G===h){var L=this.clone().set(p,1);L.$d[H](Y),L.init(),this.$d=L.set(p,Math.min(this.$D,L.daysInMonth())).$d}else H&&this.$d[H](Y);return this.init(),this},F.set=function(B,W){return this.clone().$set(B,W)},F.get=function(B){return this[k.p(B)]()},F.add=function(B,W){var V,G=this;B=Number(B);var M=k.p(W),H=function(j){var q=I(G);return k.w(q.date(q.date()+Math.round(j*B)),G)};if(M===f)return this.set(f,this.$M+B);if(M===h)return this.set(h,this.$y+B);if(M===l)return H(1);if(M===c)return H(7);var Y=(V={},V[a]=r,V[u]=i,V[o]=n,V)[M]||1,L=this.$d.getTime()+B*Y;return k.w(L,this)},F.subtract=function(B,W){return this.add(-1*B,W)},F.format=function(B){var W=this,V=this.$locale();if(!this.isValid())return V.invalidDate||m;var G=B||"YYYY-MM-DDTHH:mm:ssZ",M=k.z(this),H=this.$H,Y=this.$m,L=this.$M,j=V.weekdays,q=V.months,Z=V.meridiem,ue=function(me,_e,ge,Be){return me&&(me[_e]||me(W,G))||ge[_e].slice(0,Be)},he=function(me){return k.s(H%12||12,me,"0")},fe=Z||function(me,_e,ge){var Be=me<12?"AM":"PM";return ge?Be.toLowerCase():Be};return G.replace(y,function(me,_e){return _e||function(ge){switch(ge){case"YY":return String(W.$y).slice(-2);case"YYYY":return k.s(W.$y,4,"0");case"M":return L+1;case"MM":return k.s(L+1,2,"0");case"MMM":return ue(V.monthsShort,L,q,3);case"MMMM":return ue(q,L);case"D":return W.$D;case"DD":return k.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return ue(V.weekdaysMin,W.$W,j,2);case"ddd":return ue(V.weekdaysShort,W.$W,j,3);case"dddd":return j[W.$W];case"H":return String(H);case"HH":return k.s(H,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return fe(H,Y,!0);case"A":return fe(H,Y,!1);case"m":return String(Y);case"mm":return k.s(Y,2,"0");case"s":return String(W.$s);case"ss":return k.s(W.$s,2,"0");case"SSS":return k.s(W.$ms,3,"0");case"Z":return M}return null}(me)||M.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(B,W,V){var G,M=this,H=k.p(W),Y=I(B),L=(Y.utcOffset()-this.utcOffset())*r,j=this-Y,q=function(){return k.m(M,Y)};switch(H){case h:G=q()/12;break;case f:G=q();break;case d:G=q()/3;break;case c:G=(j-L)/6048e5;break;case l:G=(j-L)/864e5;break;case u:G=j/i;break;case a:G=j/r;break;case o:G=j/n;break;default:G=j}return V?G:k.a(G)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return x[this.$L]},F.locale=function(B,W){if(!B)return this.$L;var V=this.clone(),G=A(B,W,!0);return G&&(V.$L=G),V},F.clone=function(){return k.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},N}(),P=R.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(N){P[N[1]]=function(F){return this.$g(F,N[0],N[1])}}),I.extend=function(N,F){return N.$i||(N(F,R,I),N.$i=!0),I},I.locale=A,I.isDayjs=T,I.unix=function(N){return I(1e3*N)},I.en=x[S],I.Ls=x,I.p={},I})})(C8e);var gZt=C8e.exports;const Mn=Qu(gZt);function yZt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(Mn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function vZt(e,t="monday",n="dd"){const r=[],i=T8e(new Date,t);for(let s=0;s<7;s+=1)r.push(Mn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function A8e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Am(e,t){return A8e(e,t)&&e.getDate()===t.getDate()}function _Zt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var bZt=Object.defineProperty,wZt=Object.defineProperties,EZt=Object.getOwnPropertyDescriptors,cL=Object.getOwnPropertySymbols,I8e=Object.prototype.hasOwnProperty,O8e=Object.prototype.propertyIsEnumerable,Qye=(e,t,n)=>t in e?bZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jye=(e,t)=>{for(var n in t||(t={}))I8e.call(t,n)&&Qye(e,n,t[n]);if(cL)for(var n of cL(t))O8e.call(t,n)&&Qye(e,n,t[n]);return e},xZt=(e,t)=>wZt(e,EZt(t)),SZt=(e,t)=>{var n={};for(var r in e)I8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cL)for(var r of cL(e))t.indexOf(r)<0&&O8e.call(e,r)&&(n[r]=e[r]);return n};function bq(e){var t=e,{direction:n,style:r}=t,i=SZt(t,["direction","style"]);const s=Cs();return z.createElement("svg",Jye({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:xZt(Jye({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),z.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}bq.displayName="@mantine/dates/ArrowIcon";var TZt=Object.defineProperty,CZt=Object.defineProperties,AZt=Object.getOwnPropertyDescriptors,Zye=Object.getOwnPropertySymbols,IZt=Object.prototype.hasOwnProperty,OZt=Object.prototype.propertyIsEnumerable,eve=(e,t,n)=>t in e?TZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,PZt=(e,t)=>{for(var n in t||(t={}))IZt.call(t,n)&&eve(e,n,t[n]);if(Zye)for(var n of Zye(t))OZt.call(t,n)&&eve(e,n,t[n]);return e},kZt=(e,t)=>CZt(e,AZt(t));const s7={xs:32,sm:40,md:44,lg:50,xl:54};var RZt=mt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:s7}),height:e.fn.size({size:t,sizes:s7}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:kZt(PZt({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:s7}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),$Zt=Object.defineProperty,fL=Object.getOwnPropertySymbols,P8e=Object.prototype.hasOwnProperty,k8e=Object.prototype.propertyIsEnumerable,tve=(e,t,n)=>t in e?$Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NZt=(e,t)=>{for(var n in t||(t={}))P8e.call(t,n)&&tve(e,n,t[n]);if(fL)for(var n of fL(t))k8e.call(t,n)&&tve(e,n,t[n]);return e},DZt=(e,t)=>{var n={};for(var r in e)P8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fL)for(var r of fL(e))t.indexOf(r)<0&&k8e.call(e,r)&&(n[r]=e[r]);return n};const MZt={xs:12,sm:14,md:18,lg:22,xl:28};function dF(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,w=DZt(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:S,cx:x,theme:b}=RZt({size:c},{classNames:f,styles:d,unstyled:v,name:h}),T=b.fn.size({size:c,sizes:MZt});return z.createElement("div",NZt({className:x(S.calendarHeader,a)},w),z.createElement(lm,{className:S.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:A=>y&&A.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},z.createElement(bq,{direction:"left",width:T,height:T})),z.createElement(_y,{unstyled:v,className:S.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:A=>y&&A.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&z.createElement(lIe,{error:!1,size:c,className:S.calendarHeaderLevelIcon})),z.createElement(lm,{className:S.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:A=>y&&A.preventDefault(),"data-mantine-stop-propagation":_||void 0},z.createElement(bq,{direction:"right",width:T,height:T})))}dF.displayName="@mantine/dates/CalendarHeader";function g$(e,t){return Mn(new Date(e,1,1)).format(t)}var LZt=Object.defineProperty,FZt=Object.defineProperties,jZt=Object.getOwnPropertyDescriptors,nve=Object.getOwnPropertySymbols,BZt=Object.prototype.hasOwnProperty,zZt=Object.prototype.propertyIsEnumerable,rve=(e,t,n)=>t in e?LZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o7=(e,t)=>{for(var n in t||(t={}))BZt.call(t,n)&&rve(e,n,t[n]);if(nve)for(var n of nve(t))zZt.call(t,n)&&rve(e,n,t[n]);return e},UZt=(e,t)=>FZt(e,jZt(t));const VZt={xs:32,sm:40,md:46,lg:52,xl:56};var HZt=mt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:UZt(o7({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:VZt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":o7({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:o7({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),qZt=Object.defineProperty,dL=Object.getOwnPropertySymbols,R8e=Object.prototype.hasOwnProperty,$8e=Object.prototype.propertyIsEnumerable,ive=(e,t,n)=>t in e?qZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WZt=(e,t)=>{for(var n in t||(t={}))R8e.call(t,n)&&ive(e,n,t[n]);if(dL)for(var n of dL(t))$8e.call(t,n)&&ive(e,n,t[n]);return e},GZt=(e,t)=>{var n={};for(var r in e)R8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dL)for(var r of dL(e))t.indexOf(r)<0&&$8e.call(e,r)&&(n[r]=e[r]);return n};function N8e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=GZt(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=HZt({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[w,S]=C.useState(s),x=_Zt(w),b=x.map(T=>z.createElement(_y,{key:T,unstyled:p,onClick:()=>o(T),disabled:T<u||T>l,onMouseDown:A=>h&&A.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:T===s})},g$(T,m)));return z.createElement("div",WZt({className:_(v.yearPicker,n)},y),z.createElement(dF,{unstyled:p,label:`${g$(x[0],m)}  ${g$(x[x.length-1],m)}`,hasPrevious:typeof u=="number"?u<x[0]:!0,hasNext:typeof l=="number"?l>x[x.length-1]:!0,onNext:()=>S(T=>T+10),onPrevious:()=>S(T=>T-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),z.createElement("div",{className:v.yearPickerControls},b))}N8e.displayName="@mantine/dates/YearPicker";function wq({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=Mn(e).endOf("month"),o=Mn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var YZt=Object.defineProperty,KZt=Object.defineProperties,XZt=Object.getOwnPropertyDescriptors,sve=Object.getOwnPropertySymbols,QZt=Object.prototype.hasOwnProperty,JZt=Object.prototype.propertyIsEnumerable,ove=(e,t,n)=>t in e?YZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a7=(e,t)=>{for(var n in t||(t={}))QZt.call(t,n)&&ove(e,n,t[n]);if(sve)for(var n of sve(t))JZt.call(t,n)&&ove(e,n,t[n]);return e},ZZt=(e,t)=>KZt(e,XZt(t));const een={xs:32,sm:40,md:46,lg:52,xl:56};var ten=mt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:ZZt(a7({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:een}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":a7({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:a7({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),nen=Object.defineProperty,hL=Object.getOwnPropertySymbols,D8e=Object.prototype.hasOwnProperty,M8e=Object.prototype.propertyIsEnumerable,ave=(e,t,n)=>t in e?nen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ren=(e,t)=>{for(var n in t||(t={}))D8e.call(t,n)&&ave(e,n,t[n]);if(hL)for(var n of hL(t))M8e.call(t,n)&&ave(e,n,t[n]);return e},ien=(e,t)=>{var n={};for(var r in e)D8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hL)for(var r of hL(e))t.indexOf(r)<0&&M8e.call(e,r)&&(n[r]=e[r]);return n};function L8e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:w}=t,S=ien(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:x,cx:b}=ten({size:f},{classNames:i,styles:r,unstyled:v,name:p}),T=yZt(a),A=d instanceof Date?d.getFullYear():void 0,I=h instanceof Date?h.getFullYear():void 0,k=T.map((R,P)=>z.createElement(_y,{key:R,unstyled:v,onClick:()=>o(P),className:b(x.monthPickerControl,{[x.monthPickerControlActive]:P===s.month&&u===s.year}),disabled:!wq({date:new Date(u,P),minDate:d,maxDate:h}),onMouseDown:N=>y&&N.preventDefault(),"data-mantine-stop-propagation":w||void 0},R));return z.createElement("div",ren({className:b(x.monthPicker,n)},S),z.createElement(dF,{label:g$(u,_),hasNext:typeof I=="number"?u<I:!0,hasPrevious:typeof A=="number"?u>A:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:w}),z.createElement("div",{className:x.monthPickerControls},k))}L8e.displayName="@mantine/dates/MonthPicker";function sen({month:e,locale:t,format:n}){return Ug(Mn(e).locale(t).format(n))}function oen({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function aen({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var uen=Object.defineProperty,len=Object.defineProperties,cen=Object.getOwnPropertyDescriptors,uve=Object.getOwnPropertySymbols,fen=Object.prototype.hasOwnProperty,den=Object.prototype.propertyIsEnumerable,lve=(e,t,n)=>t in e?uen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u7=(e,t)=>{for(var n in t||(t={}))fen.call(t,n)&&lve(e,n,t[n]);if(uve)for(var n of uve(t))den.call(t,n)&&lve(e,n,t[n]);return e},cve=(e,t)=>len(e,cen(t));const y$={xs:34,sm:38,md:46,lg:58,xl:66};var hen=mt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:cve(u7(cve(u7(u7({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:y$}),height:e.fn.size({size:t,sizes:y$}),lineHeight:`${e.fn.size({size:t,sizes:y$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),pen=Object.defineProperty,men=Object.defineProperties,gen=Object.getOwnPropertyDescriptors,pL=Object.getOwnPropertySymbols,F8e=Object.prototype.hasOwnProperty,j8e=Object.prototype.propertyIsEnumerable,fve=(e,t,n)=>t in e?pen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yen=(e,t)=>{for(var n in t||(t={}))F8e.call(t,n)&&fve(e,n,t[n]);if(pL)for(var n of pL(t))j8e.call(t,n)&&fve(e,n,t[n]);return e},ven=(e,t)=>men(e,gen(t)),_en=(e,t)=>{var n={};for(var r in e)F8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pL)for(var r of pL(e))t.indexOf(r)<0&&j8e.call(e,r)&&(n[r]=e[r]);return n};const B8e=C.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:w,renderDay:S,unstyled:x,disabled:b,stopPropagation:T}=n,A=_en(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:I,cx:k}=hen({size:g,fullWidth:y,hideOutsideDates:w},{classNames:l,styles:c,unstyled:x,name:p});return z.createElement("button",ven(yen({},A),{type:"button",ref:t,disabled:b,onMouseEnter:R=>u(i,R),tabIndex:oen({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":aen({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":T||void 0,"data-outside":a&&!b||void 0,"data-weekend":o&&!b||void 0,"data-selected":s&&!b||void 0,"data-in-range":m&&!b||void 0,"data-first-in-range":d&&!b||void 0,"data-last-in-range":h&&!b||void 0,className:k(I.day,r)}),typeof S=="function"?S(i):i.getDate())});B8e.displayName="@mantine/core/Day";function ben(e,t=[0,6]){return t.includes(e.getDay())}function wen(e,t){return!A8e(e,t)}function Een({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&Mn(t).isBefore(i,"day"),a=e instanceof Date&&Mn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function xen(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[Mn(t[0]).subtract(1,"day"),Mn(t[1]).add(1,"day")],i=n&&Am(e,t[0]),s=n&&Am(e,t[1]),o=n&&Mn(e).isAfter(r[0],"day")&&Mn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function dve({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=wen(e,t),f=n&&(Array.isArray(s)?s.some(g=>Am(g,e)):Am(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=xen(e,u);return{disabled:Een({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:ben(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var Sen=Object.defineProperty,Ten=Object.defineProperties,Cen=Object.getOwnPropertyDescriptors,hve=Object.getOwnPropertySymbols,Aen=Object.prototype.hasOwnProperty,Ien=Object.prototype.propertyIsEnumerable,pve=(e,t,n)=>t in e?Sen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oen=(e,t)=>{for(var n in t||(t={}))Aen.call(t,n)&&pve(e,n,t[n]);if(hve)for(var n of hve(t))Ien.call(t,n)&&pve(e,n,t[n]);return e},Pen=(e,t)=>Ten(e,Cen(t)),ken=mt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:Pen(Oen({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),Ren=Object.defineProperty,mL=Object.getOwnPropertySymbols,z8e=Object.prototype.hasOwnProperty,U8e=Object.prototype.propertyIsEnumerable,mve=(e,t,n)=>t in e?Ren(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$en=(e,t)=>{for(var n in t||(t={}))z8e.call(t,n)&&mve(e,n,t[n]);if(mL)for(var n of mL(t))U8e.call(t,n)&&mve(e,n,t[n]);return e},Nen=(e,t)=>{var n={};for(var r in e)z8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mL)for(var r of mL(e))t.indexOf(r)<0&&U8e.call(e,r)&&(n[r]=e[r]);return n};const jk=()=>!1,Den={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},V8e=C.forwardRef((e,t)=>{const n=ct("Month",Den,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:w,fullWidth:S,preventFocus:x,focusable:b,firstDayOfWeek:T,onDayKeyDown:A,daysRefs:I,hideOutsideDates:k,isDateInRange:R=jk,isDateFirstInRange:P=jk,isDateLastInRange:N=jk,renderDay:F,weekdayLabelFormat:B,unstyled:W,weekendDays:V,__stopPropagation:G}=n,M=Nen(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:H,cx:Y,theme:L}=ken({fullWidth:S},{classNames:f,styles:d,unstyled:W,name:_}),j=u||L.datesLocale,q=mZt(i,T),Z=vZt(j,T,B).map(_e=>z.createElement("th",{className:H.weekdayCell,key:_e},z.createElement(dt,{size:w,className:H.weekday},_e.length>=2?Ug(_e):_e))),ue=Array.isArray(s)?s.every(_e=>_e instanceof Date):s instanceof Date,he=s instanceof Date&&Mn(s).isAfter(Mn(i).startOf("month"))&&Mn(s).isBefore(Mn(i).endOf("month")),fe=C.useMemo(()=>q.flatMap(_e=>_e).find(_e=>{const ge=dve({date:_e,month:i,hasValue:ue,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:V});return!ge.disabled&&!ge.outside})||Mn(i).startOf("month").toDate(),[]),me=q.map((_e,ge)=>{const Be=_e.map((Me,ut)=>{const Oe=dve({date:Me,month:i,hasValue:ue,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:V}),Re={rowIndex:ge,cellIndex:ut,date:Me};return z.createElement("td",{className:H.cell,key:ut},z.createElement(B8e,{unstyled:W,ref:Ye=>{I&&(Array.isArray(I[ge])||(I[ge]=[]),I[ge][ut]=Ye)},onClick:()=>typeof o=="function"&&o(Me),onMouseDown:Ye=>x&&Ye.preventDefault(),value:Me,outside:Oe.outside,weekend:Oe.weekend,inRange:Oe.inRange||R(Me,Oe),firstInRange:Oe.firstInRange||P(Me,Oe),lastInRange:Oe.lastInRange||N(Me,Oe),firstInMonth:Am(Me,fe),selected:Oe.selected||Oe.selectedInRange,hasValue:he,onKeyDown:Ye=>typeof A=="function"&&A(Re,Ye),className:typeof l=="function"?l(Me,Oe):null,style:typeof c=="function"?c(Me,Oe):null,disabled:Oe.disabled,onMouseEnter:typeof g=="function"?g:jk,size:w,fullWidth:S,focusable:b,hideOutsideDates:k,__staticSelector:_,styles:d,classNames:f,renderDay:F,stopPropagation:G}))});return z.createElement("tr",{key:ge},Be)});return z.createElement(pt,$en({component:"table",className:Y(H.month,r),ref:t},M),!v&&z.createElement("thead",null,z.createElement("tr",null,Z)),z.createElement("tbody",null,me))});V8e.displayName="@mantine/dates/Month";var Men=Object.defineProperty,gL=Object.getOwnPropertySymbols,H8e=Object.prototype.hasOwnProperty,q8e=Object.prototype.propertyIsEnumerable,gve=(e,t,n)=>t in e?Men(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Len=(e,t)=>{for(var n in t||(t={}))H8e.call(t,n)&&gve(e,n,t[n]);if(gL)for(var n of gL(t))q8e.call(t,n)&&gve(e,n,t[n]);return e},Fen=(e,t)=>{var n={};for(var r in e)H8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gL)for(var r of gL(e))t.indexOf(r)<0&&q8e.call(e,r)&&(n[r]=e[r]);return n};function W8e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:w,preventFocus:S,renderDay:x,unstyled:b,__stopPropagation:T}=t,A=Fen(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const I=Mn(i).add(n,"months").toDate(),k=Mn(i).subtract(1,"months").toDate(),R=Array(n).fill(0).map((P,N)=>{const F=Mn(i).add(N,"months").toDate();return z.createElement("div",{key:N},z.createElement(dF,{hasNext:N+1===n&&wq({date:I,minDate:o,maxDate:a}),hasPrevious:N===0&&wq({date:k,minDate:o,maxDate:a}),label:sen({month:F,locale:s,format:_}),onNext:()=>f(Mn(i).add(r,"months").toDate()),onPrevious:()=>f(Mn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:N>0,preventFocus:S,unstyled:b,__stopPropagation:T}),z.createElement(V8e,Len({month:F,daysRefs:c.current[N],onDayKeyDown:(...B)=>h(N,...B),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:N===0,preventFocus:S,renderDay:x,weekdayLabelFormat:w,unstyled:b,__stopPropagation:T},A)))});return z.createElement(z.Fragment,null,R)}W8e.displayName="@mantine/dates/MonthsList";var jen=mt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:y$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),Ben=Object.defineProperty,yL=Object.getOwnPropertySymbols,G8e=Object.prototype.hasOwnProperty,Y8e=Object.prototype.propertyIsEnumerable,yve=(e,t,n)=>t in e?Ben(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zen=(e,t)=>{for(var n in t||(t={}))G8e.call(t,n)&&yve(e,n,t[n]);if(yL)for(var n of yL(t))Y8e.call(t,n)&&yve(e,n,t[n]);return e},Uen=(e,t)=>{var n={};for(var r in e)G8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yL)for(var r of yL(e))t.indexOf(r)<0&&Y8e.call(e,r)&&(n[r]=e[r]);return n};const cee=C.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:S,hideWeekdays:x,fullWidth:b,preventFocus:T,firstDayOfWeek:A="monday",value:I,onChange:k,onDayMouseEnter:R,range:P,nextDecadeLabel:N,nextMonthLabel:F,nextYearLabel:B,previousDecadeLabel:W,previousMonthLabel:V,previousYearLabel:G,labelFormat:M="MMMM YYYY",weekdayLabelFormat:H,hideOutsideDates:Y,isDateInRange:L,isDateFirstInRange:j,isDateLastInRange:q,renderDay:Z,unstyled:ue,weekendDays:he,__stopPropagation:fe,yearLabelFormat:me="YYYY"}=n,_e=Uen(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ge,Be]=C.useState(p),{classes:Me,cx:ut,theme:Oe}=jen({size:d,fullWidth:b,amountOfMonths:ge==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:ue}),Re=l||Oe.datesLocale,Ye=C.useRef(Array(c).fill(0).map(()=>[])),[Ut,Ft]=Ea({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[Je,Ge]=C.useState(Ut.getFullYear()),gt=m instanceof Date?m.getFullYear():100,ot=g instanceof Date?g.getFullYear():1e4,at=6,Et=(Se,Fe,Ue,ht=1)=>{var cn;const Ve=["down","up"].includes(Se),wt=Ve?Ue.rowIndex+(Se==="down"?ht:-ht):Ue.rowIndex,bt=Ve?Ue.cellIndex:Ue.cellIndex+(Se==="right"?ht:-ht),bn=(cn=Ye.current[Fe][wt])==null?void 0:cn[bt];bn&&(bn.disabled?Et(Se,Fe,Ue,ht+1):bn.focus())},ve=(Se,Fe,Ue)=>{var ht;switch(Ue.key){case"ArrowDown":{Ue.preventDefault(),Fe.rowIndex+1<Ye.current[Se].length&&Et("down",Se,Fe);break}case"ArrowUp":{Ue.preventDefault(),Fe.rowIndex>0&&Et("up",Se,Fe);break}case"ArrowRight":{Ue.preventDefault(),Fe.cellIndex!==at?Et("right",Se,Fe):Se+1<c&&Ye.current[Se+1][Fe.rowIndex]&&((ht=Ye.current[Se+1][Fe.rowIndex][0])==null||ht.focus());break}case"ArrowLeft":Ue.preventDefault(),Fe.cellIndex!==0?Et("left",Se,Fe):Se>0&&Ye.current[Se-1][Fe.rowIndex]&&Ye.current[Se-1][Fe.rowIndex][at].focus()}};return z.createElement(pt,zen({className:ut(Me.calendarBase,r),ref:t},_e),ge==="year"&&z.createElement(N8e,{size:d,value:Je,minYear:gt,maxYear:ot,onChange:Se=>{Ge(Se),Be("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:fe,nextDecadeLabel:N,previousDecadeLabel:W,preventFocus:T,unstyled:ue,yearLabelFormat:me}),ge==="month"&&z.createElement(L8e,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:Je,onYearChange:Ge,onNextLevel:()=>Be("year"),locale:Re,minDate:m,maxDate:g,onChange:Se=>{Ft(new Date(Je,Se,1)),Be("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:fe,nextYearLabel:B,previousYearLabel:G,preventFocus:T,unstyled:ue,yearLabelFormat:me}),ge==="date"&&z.createElement(W8e,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Re,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Ye,onMonthChange:Ft,onNextLevel:()=>Be("month"),onDayKeyDown:ve,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:S,hideWeekdays:x,fullWidth:b,preventFocus:T,firstDayOfWeek:A,value:I,range:P,onChange:k,nextMonthLabel:F,previousMonthLabel:V,labelFormat:M,weekdayLabelFormat:H,onDayMouseEnter:R,renderDay:Z,hideOutsideDates:Y,isDateInRange:L,isDateFirstInRange:j,isDateLastInRange:q,unstyled:ue,weekendDays:he,__stopPropagation:fe}))});cee.displayName="@mantine/dates/CalendarBase";var Ven=Object.defineProperty,vL=Object.getOwnPropertySymbols,K8e=Object.prototype.hasOwnProperty,X8e=Object.prototype.propertyIsEnumerable,vve=(e,t,n)=>t in e?Ven(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hen=(e,t)=>{for(var n in t||(t={}))K8e.call(t,n)&&vve(e,n,t[n]);if(vL)for(var n of vL(t))X8e.call(t,n)&&vve(e,n,t[n]);return e},qen=(e,t)=>{var n={};for(var r in e)K8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vL)for(var r of vL(e))t.indexOf(r)<0&&X8e.call(e,r)&&(n[r]=e[r]);return n};const Wen={__staticSelector:"Calendar"};function Q8e(e){const t=ct("Calendar",Wen,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=qen(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Am(c,u));return s(l?i.filter(c=>!Am(c,u)):[...i,u])};return z.createElement(cee,Hen({__staticSelector:n,onChange:a,value:i},o))}Q8e.displayName="@mantine/dates/Calendar";var Gen=Object.defineProperty,Yen=Object.defineProperties,Ken=Object.getOwnPropertyDescriptors,_ve=Object.getOwnPropertySymbols,Xen=Object.prototype.hasOwnProperty,Qen=Object.prototype.propertyIsEnumerable,bve=(e,t,n)=>t in e?Gen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jen=(e,t)=>{for(var n in t||(t={}))Xen.call(t,n)&&bve(e,n,t[n]);if(_ve)for(var n of _ve(t))Qen.call(t,n)&&bve(e,n,t[n]);return e},Zen=(e,t)=>Yen(e,Ken(t)),etn=mt(e=>({wrapper:Zen(Jen({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),ttn=Object.defineProperty,ntn=Object.defineProperties,rtn=Object.getOwnPropertyDescriptors,_L=Object.getOwnPropertySymbols,J8e=Object.prototype.hasOwnProperty,Z8e=Object.prototype.propertyIsEnumerable,wve=(e,t,n)=>t in e?ttn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oT=(e,t)=>{for(var n in t||(t={}))J8e.call(t,n)&&wve(e,n,t[n]);if(_L)for(var n of _L(t))Z8e.call(t,n)&&wve(e,n,t[n]);return e},Eve=(e,t)=>ntn(e,rtn(t)),itn=(e,t)=>{var n={};for(var r in e)J8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_L)for(var r of _L(e))t.indexOf(r)<0&&Z8e.call(e,r)&&(n[r]=e[r]);return n};const stn={xs:24,sm:30,md:34,lg:40,xl:44},otn={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},fee=C.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=otn,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:w,inputLabel:S,__staticSelector:x="DatePickerBase",dropdownOpened:b,setDropdownOpened:T,dropdownType:A="popover",dropdownPosition:I="flip",clearable:k=!0,clearButtonLabel:R,onClear:P,positionDependencies:N=[],zIndex:F,withinPortal:B=!1,onBlur:W,onFocus:V,onChange:G,onKeyDown:M,name:H="date",sx:Y,amountOfMonths:L=1,onDropdownClose:j,onDropdownOpen:q,clickOutsideEvents:Z=["mousedown","touchstart"],modalZIndex:ue,errorProps:he,labelProps:fe,descriptionProps:me,clearButtonTabIndex:_e=0,unstyled:ge,inputContainer:Be,inputWrapperOrder:Me,modalProps:ut,withAsterisk:Oe}=n,Re=itn(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Ye,cx:Ut,theme:Ft}=etn(null,{classNames:r,styles:o,unstyled:ge,name:x}),{systemStyles:Je,rest:Ge}=Lh(Re),gt=Ia(d),ot=C.useRef(),at=()=>{T(!1),j==null||j()},Et=()=>{T(!0),q==null||q()},ve=()=>{T(!b),b?j==null||j():q==null||q()},Se=Ve=>{Ve.key==="Escape"&&(at(),window.setTimeout(()=>{var wt;return(wt=ot.current)==null?void 0:wt.focus()},0))},Fe=k?z.createElement(Rm,{variant:"transparent","aria-label":R,onClick:P,size:_,tabIndex:_e,unstyled:ge}):null,Ue=Ve=>{typeof W=="function"&&W(Ve),l&&at()},ht=Ve=>{typeof V=="function"&&V(Ve),l&&Et()},cn=Ve=>{typeof M=="function"&&M(Ve),(Ve.key==="Space"||Ve.key==="Enter")&&!l&&(Ve.preventDefault(),Et())};return z.createElement(Ss.Wrapper,oT(oT({required:u,id:gt,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:x,sx:Y,errorProps:he,descriptionProps:me,labelProps:fe,inputContainer:Be,inputWrapperOrder:Me,unstyled:ge,withAsterisk:Oe},Je),a),z.createElement(Pr,{__staticSelector:x,withinPortal:B,offset:10,opened:b,transitionDuration:y,transition:g,positionDependencies:N,middlewares:{flip:I==="flip",shift:!1},position:I==="flip"?"bottom-start":I,shadow:m,onClose:at,trapFocus:!l,withRoles:!1,clickOutsideEvents:Z,zIndex:F,classNames:r,styles:o,unstyled:ge},z.createElement(Pr.Target,null,z.createElement("div",{className:Ye.wrapper},z.createElement(Ss,oT({classNames:Eve(oT({},r),{input:Ut(Ye.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?Et():ve(),onKeyDown:cn,id:gt,ref:As(t,ot),__staticSelector:x,size:_,name:H,placeholder:p,value:S,required:u,invalid:!!f,readOnly:!l,rightSection:Fe,rightSectionWidth:Ft.fn.size({size:_,sizes:stn}),onBlur:Ue,onFocus:ht,onChange:G,autoComplete:"off",unstyled:ge},Ge)))),A==="popover"?z.createElement(Pr.Dropdown,null,z.createElement("div",{"data-mantine-stop-propagation":b,onKeyDownCapture:Se,"aria-hidden":l||void 0},w)):z.createElement(qp,Eve(oT({},ut),{opened:b,onClose:at,withCloseButton:!1,size:L*400,zIndex:ue,unstyled:ge}),w)))});fee.displayName="@mantine/dates/DatePickerBase";var atn=Object.defineProperty,bL=Object.getOwnPropertySymbols,eje=Object.prototype.hasOwnProperty,tje=Object.prototype.propertyIsEnumerable,xve=(e,t,n)=>t in e?atn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,utn=(e,t)=>{for(var n in t||(t={}))eje.call(t,n)&&xve(e,n,t[n]);if(bL)for(var n of bL(t))tje.call(t,n)&&xve(e,n,t[n]);return e},ltn=(e,t)=>{var n={};for(var r in e)eje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bL)for(var r of bL(e))t.indexOf(r)<0&&tje.call(e,r)&&(n[r]=e[r]);return n};const ctn={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},ftn=C.forwardRef((e,t)=>{const n=ct("DatePicker",ctn,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:S,excludeDate:x,initialMonth:b,initiallyOpened:T,name:A,size:I,dropdownType:k,dropdownPosition:R,clearable:P,disabled:N,clearButtonLabel:F,fixOnBlur:B,allowFreeInput:W,withinPortal:V,dateParser:G,firstDayOfWeek:M,onFocus:H,onBlur:Y,amountOfMonths:L,allowLevelChange:j,initialLevel:q,onDropdownClose:Z,onDropdownOpen:ue,hideOutsideDates:he,hideWeekdays:fe,renderDay:me,type:_e,openDropdownOnClear:ge,unstyled:Be,weekendDays:Me,yearLabelFormat:ut,nextDecadeLabel:Oe,nextYearLabel:Re,previousDecadeLabel:Ye,previousYearLabel:Ut}=n,Ft=ltn(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Je=Cs(),Ge=l||Je.datesLocale,gt=_e==="date"?"YYYY-MM-DD":c||Je.dateFormat,[ot,at]=C.useState(T),Et=I==="lg"||I==="xl"?"md":"sm",ve=C.useRef(),[Se,Fe]=C.useState(s??null),[Ue,ht]=Ea({value:r,defaultValue:s,finalValue:null,onChange:i}),[cn,Ve]=C.useState(Ue||b||new Date),[wt,bt]=C.useState(!1),[bn,Lt]=C.useState(Ue instanceof Date?Ug(Mn(Ue).locale(Ge).format(gt)):""),Ar=()=>{at(!1),Z==null||Z()},Fn=()=>{at(!0),ue==null||ue()};C.useEffect(()=>{r===null&&!wt&&Lt(""),r instanceof Date&&!wt&&Lt(Ug(Mn(r).locale(Ge).format(gt)))},[r,wt]);const ar=Pt=>{ht(Pt),Lt(Ug(Mn(Pt).locale(Ge).format(gt))),m&&Ar(),window.setTimeout(()=>{var Xt;return(Xt=ve.current)==null?void 0:Xt.focus()},0)},oi=()=>{var Pt;ht(null),Fe(null),Lt(""),ge&&Fn(),(Pt=ve.current)==null||Pt.focus()},yo=Pt=>G?G(Pt):Mn(Pt,gt,Ge).toDate(),br=()=>{let Pt=typeof Ue=="string"?yo(Ue):Ue;S&&Mn(Pt).isAfter(S)&&(Pt=S),w&&Mn(Pt).isBefore(w)&&(Pt=w),Mn(Pt).isValid()?(ht(Pt),Fe(Pt),Lt(Ug(Mn(Pt).locale(Ge).format(gt))),Ve(Pt)):B&&ht(Se)},nr=Pt=>{typeof Y=="function"&&Y(Pt),bt(!1),W&&br()},Uo=Pt=>{Pt.key==="Enter"&&W&&(Ar(),br())},Vr=Pt=>{typeof H=="function"&&H(Pt),bt(!0)},Zr=Pt=>{Fn();const Xt=yo(Pt.target.value);Mn(Xt).isValid()?(ht(Xt),Fe(Xt),Lt(Pt.target.value),Ve(Xt)):Lt(Pt.target.value)};return z.createElement(fee,utn({allowFreeInput:W,dropdownOpened:ot,setDropdownOpened:at,shadow:u,transitionDuration:f,ref:As(t,ve),size:I,styles:a,classNames:o,onChange:Zr,onBlur:nr,onFocus:Vr,onKeyDown:Uo,name:A,inputLabel:bn,__staticSelector:"DatePicker",dropdownType:k,dropdownPosition:R,clearable:_e==="date"?!1:P&&!!Ue&&!N,clearButtonLabel:F,onClear:oi,disabled:N,withinPortal:V,amountOfMonths:L,onDropdownClose:Z,onDropdownOpen:ue,type:_e,unstyled:Be},Ft),z.createElement(Q8e,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,month:W?cn:void 0,initialMonth:b||(Ue instanceof Date?Ue:new Date),onMonthChange:Ve,value:Ue instanceof Date?Ue:Mn(Ue).toDate(),onChange:ar,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:S,excludeDate:x,__staticSelector:"DatePicker",fullWidth:k==="modal",__stopPropagation:k!=="modal",size:k==="modal"?"lg":Et,firstDayOfWeek:M,preventFocus:W,amountOfMonths:L,allowLevelChange:j,initialLevel:q,hideOutsideDates:he,hideWeekdays:fe,renderDay:me,unstyled:Be,weekendDays:Me,yearLabelFormat:ut,nextDecadeLabel:Oe,nextYearLabel:Re,previousDecadeLabel:Ye,previousYearLabel:Ut}))});ftn.displayName="@mantine/dates/DatePicker";var dtn=Object.defineProperty,wL=Object.getOwnPropertySymbols,nje=Object.prototype.hasOwnProperty,rje=Object.prototype.propertyIsEnumerable,Sve=(e,t,n)=>t in e?dtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,htn=(e,t)=>{for(var n in t||(t={}))nje.call(t,n)&&Sve(e,n,t[n]);if(wL)for(var n of wL(t))rje.call(t,n)&&Sve(e,n,t[n]);return e},ptn=(e,t)=>{var n={};for(var r in e)nje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wL)for(var r of wL(e))t.indexOf(r)<0&&rje.call(e,r)&&(n[r]=e[r]);return n};const mtn={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},ije=C.forwardRef((e,t)=>{const n=ct("RangeCalendar",mtn,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=ptn(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=C.useState(null),[p,m]=C.useState(null),g=S=>{if(p instanceof Date){if(Am(S,p)&&!u)return m(null),h(null),null;const x=[S,p];return x.sort((b,T)=>b.getTime()-T.getTime()),i(x),m(null),null}return r[0]&&Am(S,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([S,null]),m(S),null)},y=S=>{typeof o=="function"&&o(S),h(null)},v=(S,x)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),!x.selected&&Mn(S).subtract(1,"day").isBefore(b[1])&&Mn(S).add(1,"day").isAfter(b[0])}return!1},_=(S,x)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),x.selected&&Mn(S).isBefore(b[1])}return!1},w=(S,x)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),x.selected&&Mn(S).isAfter(b[0])}return!1};return z.createElement(cee,htn({dayStyle:s,onMouseLeave:y,onDayMouseEnter:S=>h(S),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:w},f))});ije.displayName="@mantine/dates/RangeCalendar";var gtn=Object.defineProperty,EL=Object.getOwnPropertySymbols,sje=Object.prototype.hasOwnProperty,oje=Object.prototype.propertyIsEnumerable,Tve=(e,t,n)=>t in e?gtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ytn=(e,t)=>{for(var n in t||(t={}))sje.call(t,n)&&Tve(e,n,t[n]);if(EL)for(var n of EL(t))oje.call(t,n)&&Tve(e,n,t[n]);return e},vtn=(e,t)=>{var n={};for(var r in e)sje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EL)for(var r of EL(e))t.indexOf(r)<0&&oje.call(e,r)&&(n[r]=e[r]);return n};const Cve=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),_tn=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,btn={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},aje=C.forwardRef((e,t)=>{const n=ct("DateRangePicker",btn,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:S,excludeDate:x,initialMonth:b,initiallyOpened:T,size:A,dropdownType:I,labelSeparator:k,clearable:R,clearButtonLabel:P,firstDayOfWeek:N,allowLevelChange:F,allowSingleDateInRange:B,amountOfMonths:W,withinPortal:V,initialLevel:G,onDropdownClose:M,onDropdownOpen:H,hideOutsideDates:Y,hideWeekdays:L,renderDay:j,openDropdownOnClear:q,unstyled:Z,weekendDays:ue,yearLabelFormat:he,nextDecadeLabel:fe,nextYearLabel:me,previousDecadeLabel:_e,previousYearLabel:ge}=n,Be=vtn(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Me=Cs(),ut=l||Me.datesLocale,Oe=c||Me.dateFormat,[Re,Ye]=C.useState(T),Ut=A==="lg"||A==="xl"?"md":"sm",Ft=C.useRef(),[Je,Ge]=Ea({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),gt=Ue=>{Ge(Ue),m&&Cve(Ue)&&(Ye(!1),M==null||M(),window.setTimeout(()=>{var ht;return(ht=Ft.current)==null?void 0:ht.focus()},0))},ot=Cve(Je),at=_tn(Je),Et=Je[0]?Ug(Mn(Je[0]).locale(ut).format(Oe)):"",ve=Je[1]?Ug(Mn(Je[1]).locale(ut).format(Oe)):"",Se=()=>{var Ue;Ge([null,null]),Ye(!0),q&&(H==null||H()),(Ue=Ft.current)==null||Ue.focus()},Fe=Ue=>{!Ue&&at&&Je[1]===null&&Se(),Ye(Ue)};return z.createElement(fee,ytn({dropdownOpened:Re,setDropdownOpened:Fe,shadow:u,transitionDuration:f,ref:As(t,Ft),size:A,styles:a,classNames:o,inputLabel:at?`${Et} ${k} ${ve}`:"",__staticSelector:"DateRangePicker",dropdownType:I,clearable:R&&at,clearButtonLabel:P,onClear:Se,withinPortal:V,amountOfMonths:W,onDropdownClose:M,onDropdownOpen:H,unstyled:Z},Be),z.createElement(ije,{classNames:o,styles:a,locale:ut,nextMonthLabel:h,previousMonthLabel:p,initialMonth:ot?Je[0]:b,value:Je,onChange:gt,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:S,excludeDate:x,__staticSelector:"DateRangePicker",fullWidth:I==="modal",firstDayOfWeek:N,size:I==="modal"?"lg":Ut,allowLevelChange:F,allowSingleDateInRange:B,amountOfMonths:W,initialLevel:G,hideOutsideDates:Y,hideWeekdays:L,renderDay:j,unstyled:Z,weekendDays:ue,yearLabelFormat:he,nextDecadeLabel:fe,nextYearLabel:me,previousDecadeLabel:_e,previousYearLabel:ge}))});aje.displayName="@mantine/dates/DateRangePicker";function w0(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var wtn=Object.defineProperty,Etn=Object.defineProperties,xtn=Object.getOwnPropertyDescriptors,Ave=Object.getOwnPropertySymbols,Stn=Object.prototype.hasOwnProperty,Ttn=Object.prototype.propertyIsEnumerable,Ive=(e,t,n)=>t in e?wtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ctn=(e,t)=>{for(var n in t||(t={}))Stn.call(t,n)&&Ive(e,n,t[n]);if(Ave)for(var n of Ave(t))Ttn.call(t,n)&&Ive(e,n,t[n]);return e},Atn=(e,t)=>Etn(e,xtn(t));const Itn={xs:20,sm:23,md:25,lg:27,xl:29};var uje=mt((e,{size:t,hasValue:n})=>({timeInput:Atn(Ctn({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:Itn}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),Otn=Object.defineProperty,xL=Object.getOwnPropertySymbols,lje=Object.prototype.hasOwnProperty,cje=Object.prototype.propertyIsEnumerable,Ove=(e,t,n)=>t in e?Otn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ptn=(e,t)=>{for(var n in t||(t={}))lje.call(t,n)&&Ove(e,n,t[n]);if(xL)for(var n of xL(t))cje.call(t,n)&&Ove(e,n,t[n]);return e},ktn=(e,t)=>{var n={};for(var r in e)lje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xL)for(var r of xL(e))t.indexOf(r)<0&&cje.call(e,r)&&(n[r]=e[r]);return n};const v$=C.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=ktn(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=C.useState(0),{classes:y,cx:v,theme:_}=uje({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),w=C.useRef(),S=I=>{typeof i=="function"&&i(I),w.current.select(),g(0)},x=I=>{typeof s=="function"&&s(I),m===1&&typeof o=="function"&&o(I.currentTarget.value,!1)},b=I=>{I.stopPropagation(),w.current.select()},T=I=>{if(I.key==="ArrowUp"){I.preventDefault();const k=w0(Sl(parseInt(I.currentTarget.value,10)+1,f,c).toString());d!==k&&o(k,!1)}if(I.key==="ArrowDown"){I.preventDefault();const k=w0(Sl(parseInt(I.currentTarget.value,10)-1,f,c).toString());d!==k&&o(k,!1)}},A=I=>{g(m+1);const k=parseInt(I.currentTarget.value,10).toString();if(k==="0"&&m===0){a("00");return}o(k,!0,m>0)};return z.createElement(z.Fragment,null,z.createElement("input",Ptn({type:"text",inputMode:"numeric",ref:As(w,t),onChange:A,onClick:b,onFocus:S,onBlur:x,onKeyDown:T,value:d,className:v(y.timeInput,r)},p)),u&&z.createElement(dt,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});v$.displayName="@mantine/dates/TimeField";function l7(e){return Math.floor(e/10)}function c7({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>l7(r)||a){const f=c%10;let d,h;c>r&&i&&f<=l7(i)?(d=w0(l7(c).toString()),h=w0(f.toString())):d=w0(Sl(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var Rtn=mt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:oa})-2}})),$tn=Object.defineProperty,SL=Object.getOwnPropertySymbols,fje=Object.prototype.hasOwnProperty,dje=Object.prototype.propertyIsEnumerable,Pve=(e,t,n)=>t in e?$tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ntn=(e,t)=>{for(var n in t||(t={}))fje.call(t,n)&&Pve(e,n,t[n]);if(SL)for(var n of SL(t))dje.call(t,n)&&Pve(e,n,t[n]);return e},Dtn=(e,t)=>{var n={};for(var r in e)fje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SL)for(var r of SL(e))t.indexOf(r)<0&&dje.call(e,r)&&(n[r]=e[r]);return n};const hje=C.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=Dtn(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=uje({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=C.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const w=_.target.value.slice(-1).toLowerCase();if(w==="p"){_.preventDefault(),i(c,!0);return}if(w==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return z.createElement("input",Ntn({type:"text",ref:As(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});hje.displayName="@mantine/dates/AmPmInput";function Mtn({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function Ltn(e,t,n,r,i,s){const o=Mn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function kve(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:w0(i.toString()),minutes:w0(e.getMinutes().toString()),seconds:w0(e.getSeconds().toString()),amPm:s?r:n}}var Ftn=Object.defineProperty,jtn=Object.defineProperties,Btn=Object.getOwnPropertyDescriptors,TL=Object.getOwnPropertySymbols,pje=Object.prototype.hasOwnProperty,mje=Object.prototype.propertyIsEnumerable,Rve=(e,t,n)=>t in e?Ftn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hg=(e,t)=>{for(var n in t||(t={}))pje.call(t,n)&&Rve(e,n,t[n]);if(TL)for(var n of TL(t))mje.call(t,n)&&Rve(e,n,t[n]);return e},f7=(e,t)=>jtn(e,Btn(t)),ztn=(e,t)=>{var n={};for(var r in e)pje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TL)for(var r of TL(e))t.indexOf(r)<0&&mje.call(e,r)&&(n[r]=e[r]);return n};const Utn={xs:24,sm:30,md:34,lg:40,xl:44},Vtn={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},Eq=C.forwardRef((e,t)=>{const n=ct("TimeInput",Vtn,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,amLabel:S,pmLabel:x,name:b,hoursLabel:T,minutesLabel:A,secondsLabel:I,amPmLabel:k,timePlaceholder:R,amPmPlaceholder:P,disabled:N,sx:F,nextRef:B,labelProps:W,descriptionProps:V,errorProps:G,unstyled:M,withAsterisk:H}=n,Y=ztn(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:L,cx:j,theme:q}=Rtn({size:l},{classNames:f,styles:d,unstyled:M,name:"TimeInput"}),{systemStyles:Z,rest:ue}=Lh(Y),he=Ia(h),fe=C.useRef(),me=C.useRef(),_e=C.useRef(),ge=C.useRef(),[Be,Me]=C.useState(kve(p||m,w,S,x)),[ut,Oe]=C.useState(p||m);xs(()=>{Me(kve(ut,w,S,x))},[ut,w,S,x]),xs(()=>{(p==null?void 0:p.getTime())!==(ut==null?void 0:ut.getTime())&&Oe(p)},[p]);const Re=ot=>{const at=hg(hg({},Be),ot),Et=Ltn(at.hours,at.minutes,at.seconds,w,x,at.amPm);Oe(Et),typeof g=="function"&&g(Et)},Ye=c7({onChange:(ot,at)=>{Re({hours:ot,minutes:at??Be.minutes})},min:w==="12"?1:0,max:w==="12"?12:23,nextRef:me,nextMax:59}),Ut=c7({onChange:(ot,at)=>{Re({minutes:ot,seconds:at??Be.seconds})},min:0,max:59,nextRef:y?_e:w==="12"?ge:B,nextMax:y?59:void 0}),Ft=c7({onChange:ot=>{Re({seconds:ot})},min:0,max:59,nextRef:w==="12"?ge:B}),Je=Mtn({amLabel:S,pmLabel:x,onChange:ot=>{Re({amPm:ot})},nextRef:B}),Ge=()=>{Me({hours:"",minutes:"",seconds:"",amPm:""}),Oe(null),g==null||g(null),fe.current.focus()},gt=v&&ut&&!N?z.createElement(Rm,{variant:"transparent","aria-label":_,onClick:Ge,size:l,unstyled:M}):null;return z.createElement(Ss.Wrapper,hg(hg({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:he,sx:F,errorProps:G,descriptionProps:V,labelProps:W,unstyled:M,withAsterisk:H},Z),c),z.createElement(Ss,hg({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>fe.current.focus(),size:l,className:j({[L.disabled]:N}),classNames:f,styles:d,disabled:N,rightSection:gt,rightSectionWidth:q.fn.size({size:l,sizes:Utn}),unstyled:M},ue),z.createElement("div",{className:L.controls},z.createElement(v$,{ref:As(fe,t),value:Be.hours,onChange:Ye,setValue:ot=>Me(at=>f7(hg({},at),{hours:ot})),id:he,className:L.timeInput,withSeparator:!0,size:l,max:w==="12"?12:23,placeholder:R,"aria-label":T,disabled:N,name:b,unstyled:M}),z.createElement(v$,{ref:me,value:Be.minutes,onChange:Ut,setValue:ot=>Me(at=>f7(hg({},at),{minutes:ot})),className:L.timeInput,withSeparator:y,size:l,max:59,placeholder:R,"aria-label":A,disabled:N,unstyled:M}),y&&z.createElement(v$,{ref:_e,value:Be.seconds,onChange:Ft,setValue:ot=>Me(at=>f7(hg({},at),{seconds:ot})),className:L.timeInput,size:l,max:59,placeholder:R,"aria-label":I,disabled:N,unstyled:M}),w==="12"&&z.createElement(hje,{ref:ge,value:Be.amPm,onChange:Je,placeholder:P,amLabel:S,pmLabel:x,size:l,"aria-label":k,disabled:N,unstyled:M}))))});Eq.displayName="@mantine/dates/TimeInput";var Htn=mt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:oa})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),qtn=Object.defineProperty,CL=Object.getOwnPropertySymbols,gje=Object.prototype.hasOwnProperty,yje=Object.prototype.propertyIsEnumerable,$ve=(e,t,n)=>t in e?qtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aT=(e,t)=>{for(var n in t||(t={}))gje.call(t,n)&&$ve(e,n,t[n]);if(CL)for(var n of CL(t))yje.call(t,n)&&$ve(e,n,t[n]);return e},Wtn=(e,t)=>{var n={};for(var r in e)gje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CL)for(var r of CL(e))t.indexOf(r)<0&&yje.call(e,r)&&(n[r]=e[r]);return n};const Gtn={xs:24,sm:30,md:34,lg:40,xl:44},Ytn={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},Ktn=C.forwardRef((e,t)=>{const n=ct("TimeRangeInput",Ytn,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,name:S,hoursLabel:x,minutesLabel:b,secondsLabel:T,amPmLabel:A,timePlaceholder:I,amPmPlaceholder:k,labelSeparator:R,disabled:P,sx:N,labelProps:F,descriptionProps:B,errorProps:W,unstyled:V,withAsterisk:G}=n,M=Wtn(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:H,cx:Y,theme:L}=Htn({size:l},{classNames:f,styles:d,unstyled:V,name:"TimeRangeInput"}),{systemStyles:j,rest:q}=Lh(M),Z=Ia(h),ue=C.useRef(),he=C.useRef(),[fe,me]=C.useState(p??m);xs(()=>{typeof g=="function"&&g(fe)},[fe]),xs(()=>{var Me,ut,Oe,Re;(((Me=p[0])==null?void 0:Me.getTime())!==((ut=fe[0])==null?void 0:ut.getTime())||((Oe=p[1])==null?void 0:Oe.getTime())!==((Re=fe[1])==null?void 0:Re.getTime()))&&me(p)},[p]);const _e=()=>{var Me;me([null,null]),(Me=ue.current)==null||Me.focus()},ge=v&&fe.filter(Me=>!!Me).length>0?z.createElement(Rm,{variant:"transparent","aria-label":_,onClick:_e,size:l,unstyled:V}):null,Be={amPmLabel:A,amPmPlaceholder:k,disabled:P,format:w,hoursLabel:x,minutesLabel:b,secondsLabel:T,size:l,timePlaceholder:I,withSeconds:y};return z.createElement(Ss.Wrapper,aT(aT({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:Z,sx:N,errorProps:W,descriptionProps:B,labelProps:F,unstyled:V,withAsterisk:G},j),c),z.createElement(Ss,aT({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var Me;(Me=ue.current)==null||Me.focus()},size:l,className:Y({[H.disabled]:P}),classNames:f,styles:d,disabled:P,rightSection:ge,rightSectionWidth:L.fn.size({size:l,sizes:Gtn}),unstyled:V},q),z.createElement("div",{className:H.inputWrapper},z.createElement(Eq,aT({ref:As(ue,t),variant:"unstyled",value:fe[0],onChange:Me=>me([Me,fe[1]]),name:S,nextRef:he,id:Z,unstyled:V},Be)),z.createElement("span",{className:H.separator,style:{color:L.colorScheme==="dark"?L.colors.dark[2]:L.colors.gray[7]}},R),z.createElement(Eq,aT({ref:he,variant:"unstyled",value:fe[1],onChange:Me=>me([fe[0],Me]),unstyled:V},Be)))))});Ktn.displayName="@mantine/dates/TimeRangeInput";const Nve={};function xq(e,t){e===void 0&&(e=Nve),t===void 0&&(t=Nve);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Xtn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qtn=Object.prototype.hasOwnProperty;function Sq(e,t){return Qtn.call(e,t)}function Tq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Sq(e,i)&&r.push(i);return r}function bl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Cq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function yv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function vje(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Aq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Aq(e[t]))return!0}else if(typeof e=="object"){for(var r=Tq(e),i=r.length,s=0;s<i;s++)if(Aq(e[r[s]]))return!0}}return!1}function Dve(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var _je=function(e){Xtn(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Dve(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Dve(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=_je,Jtn=bl,Jb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=AL(n,this.path);r&&(r=bl(r));var i=c1(n,{op:"remove",path:this.from}).removed;return c1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=AL(n,this.from);return c1(n,{op:"add",path:this.path,value:bl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$A(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ztn={add:function(e,t,n){return Cq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Jb.move,copy:Jb.copy,test:Jb.test,_get:Jb._get};function AL(e,t){if(t=="")return e;var n={op:"_get",path:t};return c1(e,n),n.value}function c1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):IL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=AL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$A(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=bl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=IL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=vje(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Cq(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Cq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Ztn[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Jb[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function hF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=bl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=c1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function enn(e,t,n){var r=c1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function IL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Jb[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Aq(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=bje([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function bje(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)hF(bl(t),bl(e),n||!0);else{n=n||IL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function $A(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$A(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$A(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const tnn=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:$A,applyOperation:c1,applyPatch:hF,applyReducer:enn,deepClone:Jtn,getValueByPointer:AL,validate:bje,validator:IL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var dee=new WeakMap,nnn=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),rnn=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function inn(e){return dee.get(e)}function snn(e,t){return e.observers.get(t)}function onn(e,t){e.observers.delete(t.callback)}function ann(e,t){t.unobserve()}function unn(e,t){var n=[],r,i=inn(e);if(!i)i=new nnn(e),dee.set(e,i);else{var s=snn(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=bl(e),t){r.callback=t,r.next=null;var o=function(){Iq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Iq(r),clearTimeout(r.next),onn(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new rnn(t,r)),r}function Iq(e,t){t===void 0&&(t=!1);var n=dee.get(e.object);hee(n.value,e.object,e.patches,"",t),e.patches.length&&hF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function hee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Tq(t),o=Tq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Sq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?hee(c,f,n,r+"/"+yv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+yv(l),value:bl(c)}),n.push({op:"replace",path:r+"/"+yv(l),value:bl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+yv(l),value:bl(c)}),n.push({op:"remove",path:r+"/"+yv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Sq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+yv(l),value:bl(t[l])})}}}function lnn(e,t,n){n===void 0&&(n=!1);var r=[];return hee(e,t,r,"",n),r}const cnn=Object.freeze(Object.defineProperty({__proto__:null,compare:lnn,generate:Iq,observe:unn,unobserve:ann},Symbol.toStringTag,{value:"Module"}));Object.assign({},tnn,cnn,{JsonPatchError:_je,deepClone:bl,escapePathComponent:yv,unescapePathComponent:vje});var fnn=/("(?:[^\\"]|\\.)*")|[:,]/g,dnn=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,S;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(fnn,function(x,b){return b||x+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",S=o(a[h],y,p.length+(f===g-1?0:1)),S!==void 0&&d.push(p+S);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const d7=Qu(dnn);function Zu(e,t,n){return e.fields=t||[],e.fname=n,e}function Zi(e){return e==null?null:e.fname}function ya(e){return e==null?null:e.fields}function wje(e){return e.length===1?hnn(e[0]):pnn(e)}const hnn=e=>function(t){return t[e]},pnn=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function $e(e){throw Error(e)}function qh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||$e("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&$e("Access path missing closing bracket: "+e),r&&$e("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Tc(e,t,n){const r=qh(e);return e=r.length===1?r[0]:e,Zu((n&&n.get||wje)(r),[e],t||e)}const hO=Tc("id"),Ca=Zu(e=>e,[],"identity"),Fg=Zu(()=>0,[],"zero"),Jx=Zu(()=>1,[],"one"),Cc=Zu(()=>!0,[],"true"),_g=Zu(()=>!1,[],"false");function mnn(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const Eje=0,pee=1,mee=2,xje=3,Sje=4;function gee(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mnn,r=e||Eje;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=pee&&n(t||"error","ERROR",arguments),this},warn(){return r>=mee&&n(t||"warn","WARN",arguments),this},info(){return r>=xje&&n(t||"log","INFO",arguments),this},debug(){return r>=Sje&&n(t||"log","DEBUG",arguments),this}}}var De=Array.isArray;function _t(e){return e===Object(e)}const Mve=e=>e!=="__proto__";function Zx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=gnn(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;eS(r,s,i[s],o)}return r},{})}function eS(e,t,n,r){if(!Mve(t))return;let i,s;if(_t(n)&&!De(n)){s=_t(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?eS(s,i,n[i]):Mve(i)&&(s[i]=n[i])}else e[t]=n}function gnn(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function tr(e){return e[e.length-1]}function pa(e){return e==null||e===""?null:+e}const Tje=e=>t=>e*Math.exp(t),Cje=e=>t=>Math.log(e*t),Aje=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Ije=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,OL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function pF(e,t,n,r){const i=n(e[0]),s=n(tr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function Oje(e,t){return pF(e,t,pa,Ca)}function Pje(e,t){var n=Math.sign(e[0]);return pF(e,t,Cje(n),Tje(n))}function kje(e,t,n){return pF(e,t,OL(n),OL(1/n))}function Rje(e,t,n){return pF(e,t,Aje(n),Ije(n))}function mF(e,t,n,r,i){const s=r(e[0]),o=r(tr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function yee(e,t,n){return mF(e,t,n,pa,Ca)}function vee(e,t,n){const r=Math.sign(e[0]);return mF(e,t,n,Cje(r),Tje(r))}function PL(e,t,n,r){return mF(e,t,n,OL(r),OL(1/r))}function _ee(e,t,n,r){return mF(e,t,n,Aje(r),Ije(r))}function $je(e){return 1+~~(new Date(e).getMonth()/3)}function Nje(e){return 1+~~(new Date(e).getUTCMonth()/3)}function yt(e){return e!=null?De(e)?e:[e]:[]}function Dje(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function An(e){return typeof e=="function"}const ynn="descending";function bee(e,t,n){n=n||{},t=yt(t)||[];const r=[],i=[],s={},o=n.comparator||vnn;return yt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===ynn?-1:1),i.push(a=An(a)?a:Tc(a,null,n)),(ya(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Zu(o(i,r),Object.keys(s))}const gF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),vnn=(e,t)=>e.length===1?_nn(e[0],t[0]):bnn(e,t,e.length),_nn=(e,t)=>function(n,r){return gF(e(n),e(r))*t},bnn=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=gF(s(r),s(i));return o*t[a]});function Aa(e){return An(e)?e:()=>e}function wee(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Cn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ph(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function Mje(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const wnn=Object.prototype.hasOwnProperty;function Wt(e,t){return wnn.call(e,t)}const Bk={};function tS(e){let t={},n;function r(s){return Wt(t,s)&&t[s]!==Bk}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Bk&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Bk),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==Bk&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function Lje(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=tr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function st(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Cn(r,n)}function Zb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Oy(e){return typeof e=="boolean"}function E0(e){return Object.prototype.toString.call(e)==="[object Date]"}function Fje(e){return e&&An(e[Symbol.iterator])}function fr(e){return typeof e=="number"}function jje(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function vt(e){return typeof e=="string"}function Eee(e,t,n){e&&(e=t?yt(e).map(a=>a.replace(/\\(.)/g,"$1")):yt(e));const r=e&&e.length,i=n&&n.get||wje,s=a=>i(t?[a]:qh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Zu(o,e,"key")}function Bje(e,t){const n=e[0],r=tr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Enn=1e4;function zje(e){e=+e||Enn;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Wt(t,o)||Wt(n,o),get:o=>Wt(t,o)?t[o]:Wt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Wt(t,o)?t[o]=a:s(o,a)}}function Uje(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function t2(e,t){let n="";for(;--t>=0;)n+=e;return n}function Vje(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?t2(i,o)+s:r==="center"?t2(i,~~(o/2))+s+t2(i,Math.ceil(o/2)):s+t2(i,o)}function pO(e){return e&&tr(e)-e[0]||0}function nt(e){return De(e)?"["+e.map(nt)+"]":_t(e)||vt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function xee(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const xnn=e=>fr(e)||E0(e)?e:Date.parse(e);function See(e,t){return t=t||xnn,e==null||e===""?null:t(e)}function Tee(e){return e==null||e===""?null:e+""}function zf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function Hje(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Ag(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Snn(e){return e}function Tnn(e){if(e==null)return Snn;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Cnn(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Ann(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Lve(e,n)})}:Lve(e,t)}function Lve(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=qje(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function qje(e,t){var n=Tnn(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Cnn(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Inn(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Onn(e){return qje(e,Pnn.apply(this,arguments))}function Pnn(e,t,n){var r,i,s;if(arguments.length>1)r=knn(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Inn(e,r)}}function knn(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Do="year",Wu="quarter",va="month",js="week",Gu="date",ha="day",kh="dayofyear",Dl="hours",Ml="minutes",Ac="seconds",Uf="milliseconds",Cee=[Do,Wu,va,js,Gu,ha,kh,Dl,Ml,Ac,Uf],h7=Cee.reduce((e,t,n)=>(e[t]=1+n,e),{});function Aee(e){const t=yt(e).slice(),n={};return t.length||$e("Missing time unit."),t.forEach(i=>{Wt(h7,i)?n[i]=1:$e(`Invalid time unit: ${i}.`)}),(n[js]||n[ha]?1:0)+(n[Wu]||n[va]||n[Gu]?1:0)+(n[kh]?1:0)>1&&$e(`Incompatible time units: ${e}`),t.sort((i,s)=>h7[i]-h7[s]),t}const Rnn={[Do]:"%Y ",[Wu]:"Q%q ",[va]:"%b ",[Gu]:"%d ",[js]:"W%U ",[ha]:"%a ",[kh]:"%j ",[Dl]:"%H:00",[Ml]:"00:%M",[Ac]:":%S",[Uf]:".%L",[`${Do}-${va}`]:"%Y-%m ",[`${Do}-${va}-${Gu}`]:"%Y-%m-%d ",[`${Dl}-${Ml}`]:"%H:%M"};function Wje(e,t){const n=Cn({},Rnn,t),r=Aee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Iv=new Date;function Iee(e){return Iv.setFullYear(e),Iv.setMonth(0),Iv.setDate(1),Iv.setHours(0,0,0,0),Iv}function Gje(e){return Kje(new Date(e))}function Yje(e){return Oq(new Date(e))}function Kje(e){return Xp.count(Iee(e.getFullYear())-1,e)}function Oq(e){return Ix.count(Iee(e.getFullYear())-1,e)}function Pq(e){return Iee(e).getDay()}function $nn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function Xje(e){return Jje(new Date(e))}function Qje(e){return kq(new Date(e))}function Jje(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return p0.count(t-1,e)}function kq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ox.count(t-1,e)}function Rq(e){return Iv.setTime(Date.UTC(e,0,1)),Iv.getUTCDay()}function Nnn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function Zje(e,t,n,r,i){const s=t||1,o=tr(e),a=(y,v,_)=>(_=_||y,Dnn(n[_],r[_],y===o&&s,v)),u=new Date,l=zf(e),c=l[Do]?a(Do):Aa(2012),f=l[va]?a(va):l[Wu]?a(Wu):Fg,d=l[js]&&l[ha]?a(ha,1,js+ha):l[js]?a(js,1):l[ha]?a(ha,1):l[Gu]?a(Gu,1):l[kh]?a(kh,1):Jx,h=l[Dl]?a(Dl):Fg,p=l[Ml]?a(Ml):Fg,m=l[Ac]?a(Ac):Fg,g=l[Uf]?a(Uf):Fg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function Dnn(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function ME(e,t,n){return t+e*7-(n+6)%7}const Mnn={[Do]:e=>e.getFullYear(),[Wu]:e=>Math.floor(e.getMonth()/3),[va]:e=>e.getMonth(),[Gu]:e=>e.getDate(),[Dl]:e=>e.getHours(),[Ml]:e=>e.getMinutes(),[Ac]:e=>e.getSeconds(),[Uf]:e=>e.getMilliseconds(),[kh]:e=>Kje(e),[js]:e=>Oq(e),[js+ha]:(e,t)=>ME(Oq(e),e.getDay(),Pq(t)),[ha]:(e,t)=>ME(1,e.getDay(),Pq(t))},Lnn={[Wu]:e=>3*e,[js]:(e,t)=>ME(e,0,Pq(t))};function e9e(e,t){return Zje(e,t||1,Mnn,Lnn,$nn)}const Fnn={[Do]:e=>e.getUTCFullYear(),[Wu]:e=>Math.floor(e.getUTCMonth()/3),[va]:e=>e.getUTCMonth(),[Gu]:e=>e.getUTCDate(),[Dl]:e=>e.getUTCHours(),[Ml]:e=>e.getUTCMinutes(),[Ac]:e=>e.getUTCSeconds(),[Uf]:e=>e.getUTCMilliseconds(),[kh]:e=>Jje(e),[js]:e=>kq(e),[ha]:(e,t)=>ME(1,e.getUTCDay(),Rq(t)),[js+ha]:(e,t)=>ME(kq(e),e.getUTCDay(),Rq(t))},jnn={[Wu]:e=>3*e,[js]:(e,t)=>ME(e,0,Rq(t))};function t9e(e,t){return Zje(e,t||1,Fnn,jnn,Nnn)}const Bnn={[Do]:vh,[Wu]:tA.every(3),[va]:tA,[js]:Ix,[Gu]:Xp,[ha]:Xp,[kh]:Xp,[Dl]:r5,[Ml]:t5,[Ac]:Lp,[Uf]:cE},znn={[Do]:_h,[Wu]:nA.every(3),[va]:nA,[js]:Ox,[Gu]:p0,[ha]:p0,[kh]:p0,[Dl]:i5,[Ml]:n5,[Ac]:Lp,[Uf]:cE};function nS(e){return Bnn[e]}function rS(e){return znn[e]}function n9e(e,t,n){return e?e.offset(t,n):void 0}function r9e(e,t,n){return n9e(nS(e),t,n)}function i9e(e,t,n){return n9e(rS(e),t,n)}function s9e(e,t,n,r){return e?e.range(t,n,r):void 0}function o9e(e,t,n,r){return s9e(nS(e),t,n,r)}function a9e(e,t,n,r){return s9e(rS(e),t,n,r)}const n2=1e3,r2=n2*60,i2=r2*60,yF=i2*24,Unn=yF*7,Fve=yF*30,$q=yF*365,u9e=[Do,va,Gu,Dl,Ml,Ac,Uf],s2=u9e.slice(0,-1),o2=s2.slice(0,-1),a2=o2.slice(0,-1),Vnn=a2.slice(0,-1),Hnn=[Do,js],jve=[Do,va],l9e=[Do],uT=[[s2,1,n2],[s2,5,5*n2],[s2,15,15*n2],[s2,30,30*n2],[o2,1,r2],[o2,5,5*r2],[o2,15,15*r2],[o2,30,30*r2],[a2,1,i2],[a2,3,3*i2],[a2,6,6*i2],[a2,12,12*i2],[Vnn,1,yF],[Hnn,1,Unn],[jve,1,Fve],[jve,3,3*Fve],[l9e,1,$q]];function c9e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(pO(t))/n;let i=xx(a=>a[2]).right(uT,r),s,o;return i===uT.length?(s=l9e,o=M0(t[0]/$q,t[1]/$q,n)):i?(i=uT[r/uT[i-1][2]<uT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=u9e,o=Math.max(M0(t[0],t[1],n),1)),{units:s,step:o}}function u2(e){const t={};return n=>t[n]||(t[n]=e(n))}function qnn(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Wnn(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Wnn(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function f9e(e){const t=u2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=I1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return qnn(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=I1(o??",f");const a=M0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=P$e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=k$e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=O$e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let Nq;d9e();function d9e(){return Nq=f9e({format:Tx,formatPrefix:uX})}function h9e(e){return f9e(I$e(e))}function kL(e){return arguments.length?Nq=h9e(e):Nq}function Bve(e,t,n){n=n||{},_t(n)||$e(`Invalid time multi-format specifier: ${n}`);const r=t(Ac),i=t(Ml),s=t(Dl),o=t(Gu),a=t(js),u=t(va),l=t(Wu),c=t(Do),f=e(n[Uf]||".%L"),d=e(n[Ac]||":%S"),h=e(n[Ml]||"%I:%M"),p=e(n[Dl]||"%I %p"),m=e(n[Gu]||n[ha]||"%a %d"),g=e(n[js]||"%b %d"),y=e(n[va]||"%B"),v=e(n[Wu]||"%B"),_=e(n[Do]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function p9e(e){const t=u2(e.format),n=u2(e.utcFormat);return{timeFormat:r=>vt(r)?t(r):Bve(t,nS,r),utcFormat:r=>vt(r)?n(r):Bve(n,rS,r),timeParse:u2(e.parse),utcParse:u2(e.utcParse)}}let Dq;m9e();function m9e(){return Dq=p9e({format:EX,parse:VNe,utcFormat:s5,utcParse:HNe})}function g9e(e){return p9e(FNe(e))}function NA(e){return arguments.length?Dq=g9e(e):Dq}const Mq=(e,t)=>Cn({},e,t);function y9e(e,t){const n=e?h9e(e):kL(),r=t?g9e(t):NA();return Mq(n,r)}function Oee(e,t){const n=arguments.length;return n&&n!==2&&$e("defaultLocale expects either zero or two arguments."),n?Mq(kL(e),NA(t)):Mq(kL(),NA())}function Gnn(){return d9e(),m9e(),Oee()}const Ynn=/^(data:|([A-Za-z]+:)?\/\/)/,Knn=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Xnn=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,zve="file://";function Qnn(e,t){return n=>({options:n||{},sanitize:Znn,load:Jnn,fileAccess:!!t,file:ern(t),http:nrn(e)})}async function Jnn(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function Znn(e,t){t=Cn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Knn.test(e.replace(Xnn,""));(e==null||typeof e!="string"||!a)&&$e("Sanitize failure, invalid URI: "+nt(e));const u=Ynn.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(zve))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(zve.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function ern(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):trn}async function trn(){$e("No file system access.")}function nrn(e){return e?async function(t,n){const r=Cn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?An(s[i])?s[i]():s.text():$e(s.status+""+s.statusText)}:rrn}async function rrn(){$e("No HTTP fetch method available.")}const irn=e=>e!=null&&e===e,srn=e=>e==="true"||e==="false"||e===!0||e===!1,orn=e=>!Number.isNaN(Date.parse(e)),v9e=e=>!Number.isNaN(+e)&&!(e instanceof Date),arn=e=>v9e(e)&&Number.isInteger(+e),Lq={boolean:xee,integer:pa,number:pa,date:See,string:Tee,unknown:Ca},zk=[srn,arn,v9e,orn],urn=["boolean","integer","number","date"];function _9e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=zk.length,i=zk.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&irn(u)&&!zk[a](u)&&(i[a]=0,++o,o===zk.length))return"string";return urn[i.reduce((s,o)=>s===0?o:s,0)-1]}function b9e(e,t){return t.reduce((n,r)=>(n[r]=_9e(e,r),n),{})}function Uve(e){const t=function(n,r){const i={delimiter:e};return Pee(n,r?Cn(r,i):i)};return t.responseType="text",t}function Pee(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),T$e(t.delimiter).parse(e+"")}Pee.responseType="text";function lrn(e){return typeof Buffer=="function"&&An(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function kee(e,t){const n=t&&t.property?Tc(t.property):Ca;return _t(e)&&!lrn(e)?crn(n(e),t):n(JSON.parse(e))}kee.responseType="json";function crn(e,t){return!De(e)&&Fje(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const frn={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function w9e(e,t){let n,r,i,s;return e=kee(e,t),t&&t.feature?(n=Ann,i=t.feature):t&&t.mesh?(n=Onn,i=t.mesh,s=frn[t.filter]):$e("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):$e("Invalid TopoJSON object: "+i),r&&r.features||[r]}w9e.responseType="json";const _$={dsv:Pee,csv:Uve(","),tsv:Uve("	"),json:kee,topojson:w9e};function Ree(e,t){return arguments.length>1?(_$[e]=t,this):Wt(_$,e)?_$[e]:null}function E9e(e){const t=Ree(e);return t&&t.responseType||"text"}function x9e(e,t,n,r){t=t||{};const i=Ree(t.type||"json");return i||$e("Unknown data format type: "+t.type),e=i(e,t),t.parse&&drn(e,t.parse,n,r),Wt(e,"columns")&&delete e.columns,e}function drn(e,t,n,r){if(!e.length)return;const i=NA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=b9e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Lq[p])throw Error("Illegal format pattern: "+h+":"+p);return Lq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const vF=Qnn(typeof fetch<"u"&&fetch,null);function _F(e){const t=e||Ca,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function b$(e,t){try{await t(e)}catch(n){e.error(n)}}const S9e=Symbol("vega_id");let hrn=1;function bF(e){return!!(e&&Ht(e))}function Ht(e){return e[S9e]}function T9e(e,t){return e[S9e]=t,e}function Cr(e){const t=e===Object(e)?e:{data:e};return Ht(t)?t:T9e(t,hrn++)}function $ee(e){return wF(e,Cr({}))}function wF(e,t){for(const n in e)t[n]=e[n];return t}function C9e(e,t){return T9e(t,Ht(e))}function T_(e,t){return e?t?(n,r)=>e(n,r)||Ht(t(n))-Ht(t(r)):(n,r)=>e(n,r)||Ht(n)-Ht(r):null}function A9e(e){return e&&e.constructor===C_}function C_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:C_,insert(a){const u=yt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=An(a)?r:t,l=yt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Aa(l)};return An(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return An(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ht(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ht(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Ht(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ht(m),l[g]?l[g]=1:a.add.push(Cr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ht(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[Ht(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ht(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Ht(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Ht(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const w$="_:mod:_";function EF(){Object.defineProperty(this,w$,{writable:!0,value:{}})}EF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[w$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=De(n)?1+n.length:-1),i},modified(e,t){const n=this[w$];if(arguments.length){if(De(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[w$]={},this}};let prn=0;const mrn="pulse",grn=new EF,yrn=1,vrn=2;function si(e,t,n,r){this.id=++prn,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Vve(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}si.prototype={targets(){return this._targets||(this._targets=_F(hO))},set(e){return this.value!==e?(this.value=e,1):0},skip:Vve(yrn),modified:Vve(vrn),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new EF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof si?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===mrn)yt(a).forEach(f=>{f instanceof si?f!==this&&(f.targets().add(this),s.push(f)):$e("Pulse parameters must be operator instances.")}),this.source=a;else if(De(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||grn,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function _rn(e,t,n,r){let i=1,s;return e instanceof si?s=e:e&&e.prototype instanceof si?s=new e:An(e)?s=new si(null,e):(i=0,s=new si(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function brn(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let wrn=0;function xF(e,t,n){this.id=++wrn,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function bg(e,t,n){return new xF(e,t,n)}xF.prototype={_filter:Cc,_apply:Ca,targets(){return this._targets||(this._targets=_F(hO))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=bg(e);return this.targets().add(t),t},apply(e){const t=bg(null,e);return this.targets().add(t),t},merge(){const e=bg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=bg();return this.targets().add(bg(null,null,wee(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(bg(null,null,()=>n=!0)),t.targets().add(bg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Cc,this._targets=null}};function Ern(e,t,n,r){const i=this,s=bg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=yt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function xrn(e,t){const n=this.locale();return x9e(e,t,n.timeParse,n.utcParse)}function Srn(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Trn(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:E9e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Crn(e,t,n){const r=this,i=r._pending||Arn(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Cc).insert(s.data||[])),i.done(),s}function Arn(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Irn={skip:!0};function Orn(e,t,n,r,i){return(e instanceof si?krn:Prn)(this,e,t,n,r,i),this}function Prn(e,t,n,r,i,s){const o=Cn({},s,Irn);let a,u;An(n)||(n=Aa(n)),r===void 0?a=l=>e.touch(n(l)):An(r)?(u=new si(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;A9e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function krn(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new si(null,Rrn(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Rrn(e,t){return t=An(t)?t:Aa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function $rn(e){e.rank=++this._rank}function Nrn(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&$e("Cycle detected in dataflow graph.")}const RL={},Ed=1,Ig=2,yp=4,Drn=Ed|Ig,Hve=Ed|yp,ob=Ed|Ig|yp,qve=8,lT=16,Wve=32,Gve=64;function x0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function p7(e,t){const n=[];return Ag(e,t,r=>n.push(r)),n}function Yve(e,t){const n={};return e.visit(t,r=>{n[Ht(r)]=1}),r=>n[Ht(r)]?null:r}function Uk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}x0.prototype={StopPropagation:RL,ADD:Ed,REM:Ig,MOD:yp,ADD_REM:Drn,ADD_MOD:Hve,ALL:ob,REFLOW:qve,SOURCE:lT,NO_SOURCE:Wve,NO_FIELDS:Gve,fork(e){return new x0(this.dataflow).init(this,e)},clone(){const e=this.fork(ob);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(ob|lT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new x0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Gve)&&(n.fields=e.fields),t&Ed?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ig?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&yp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Wve?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||ob;return t&Ed&&this.add.length||t&Ig&&this.rem.length||t&yp&&this.mod.length},reflow(e){if(e)return this.fork(ob).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(yp,Yve(this,Ed))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return De(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?De(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ed&&(n.addF=Uk(n.addF,t)),e&Ig&&(n.remF=Uk(n.remF,t)),e&yp&&(n.modF=Uk(n.modF,t)),e&lT&&(n.srcF=Uk(n.srcF,t)),n},materialize(e){e=e||ob;const t=this;return e&Ed&&t.addF&&(t.add=p7(t.add,t.addF),t.addF=null),e&Ig&&t.remF&&(t.rem=p7(t.rem,t.remF),t.remF=null),e&yp&&t.modF&&(t.mod=p7(t.mod,t.modF),t.modF=null),e&lT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&lT)return Ag(n.source,n.srcF,r),n;e&Ed&&Ag(n.add,n.addF,r),e&Ig&&Ag(n.rem,n.remF,r),e&yp&&Ag(n.mod,n.modF,r);const i=n.source;if(e&qve&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Ag(i,Yve(n,Hve),r):Ag(i,n.srcF,r))}return n}};function Nee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}st(Nee,x0,{fork(e){const t=new x0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?De(e)?e.some(r=>n[r]):n[e]:0},filter(){$e("MultiPulse does not support filtering.")},materialize(){$e("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Mrn(e,t,n){const r=this,i=[];if(r._pulse)return I9e(r);if(r._pending&&await r._pending,t&&await b$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new x0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=_F(hO);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=RL),u!==RL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await b$(r,c[f].callback)}return n&&await b$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Lrn(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Frn(e,t,n){return this._pulse?I9e(this):(this.evaluate(e,t,n),this)}function jrn(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function I9e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Brn(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function zrn(e,t){const n=e.source,r=this._clock;return n&&De(n)?new Nee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Urn(this._pulse,n&&n.pulse)}function Urn(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==RL&&(e.source=t.source),e)}const Dee={skip:!1,force:!1};function Vrn(e,t){const n=t||Dee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Hrn(e,t,n){const r=n||Dee;return(e.set(t)||r.force)&&this.touch(e,r),this}function qrn(e,t,n){this.touch(e,n||Dee);const r=new x0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Wrn(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),O9e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Grn(t,0,e)):r=n,r}}}function O9e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Grn(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,O9e(e,r,t,n)}function Nw(){this.logger(gee()),this.logLevel(pee),this._clock=0,this._rank=0,this._locale=Oee();try{this._loader=vF()}catch{}this._touched=_F(hO),this._input={},this._pulse=null,this._heap=Wrn((e,t)=>e.qrank-t.qrank),this._postrun=[]}function cT(e){return function(){return this._log[e].apply(this,arguments)}}Nw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:cT("error"),warn:cT("warn"),info:cT("info"),debug:cT("debug"),logLevel:cT("level"),cleanThreshold:1e4,add:_rn,connect:brn,rank:$rn,rerank:Nrn,pulse:qrn,touch:Vrn,update:Hrn,changeset:C_,ingest:Srn,parse:xrn,preload:Crn,request:Trn,events:Ern,on:Orn,evaluate:Mrn,run:Frn,runAsync:Lrn,runAfter:jrn,_enqueue:Brn,_getPulse:zrn};function Ae(e,t){si.call(this,e,null,t)}st(Ae,si,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const LE={};function P9e(e){const t=k9e(e);return t&&t.Definition||null}function k9e(e){return e=e&&e.toLowerCase(),Wt(LE,e)?LE[e]:null}function*R9e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Mee(e,t,n){const r=Float64Array.from(R9e(e,n));return r.sort(Yp),t.map(i=>IRe(r,i))}function Lee(e,t){return Mee(e,[.25,.5,.75],t)}function Fee(e,t){const n=e.length,r=G2t(e,t),i=Lee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function $9e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Ic=Math.random;function Yrn(e){Ic=e}function N9e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(R9e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Ic()*s)];c[l]=a/s}return c.sort(Yp),[lV(c,n/2),lV(c,1-n/2)]}function D9e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?Krn(s,t+t/4):s}function Krn(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Xrn(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Qrn(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Ic())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const M9e=Math.sqrt(2*Math.PI),Jrn=Math.SQRT2;let fT=NaN;function SF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(fT===fT)n=fT,fT=NaN;else{do n=Ic()*2-1,r=Ic()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,fT=r*s}return e+n*t}function jee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*M9e)}function TF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function CF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Jrn*Zrn(2*e-1)}function Zrn(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Bee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>SF(n,r),pdf:s=>jee(s,n,r),cdf:s=>TF(s,n,r),icdf:s=>CF(s,n,r)};return i.mean(e).stdev(t)}function zee(e,t){const n=Bee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Fee(e)),i):t},sample(){return e[~~(Ic()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Uee(e,t){return e=e||0,t=t??1,Math.exp(e+SF()*t)}function Vee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*M9e*e)}function Hee(e,t,n){return TF(Math.log(e),t,n)}function qee(e,t,n){return Math.exp(CF(e,t,n))}function L9e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Uee(n,r),pdf:s=>Vee(s,n,r),cdf:s=>Hee(s,n,r),icdf:s=>qee(s,n,r)};return i.mean(e).stdev(t)}function F9e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Ic();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Wee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ic()}function Gee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Yee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Kee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function j9e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Wee(n,r),pdf:s=>Gee(s,n,r),cdf:s=>Yee(s,n,r),icdf:s=>Kee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Xee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function mO(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function AF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function gO(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function iS(e,t,n,r,i){let s=0,o=0;return gO(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Qee(e,t,n){let r=0,i=0,s=0,o=0,a=0;gO(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=mO(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:iS(e,t,n,i,l)}}function B9e(e,t,n){let r=0,i=0,s=0,o=0,a=0;gO(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=mO(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:iS(e,t,n,i,l)}}function z9e(e,t,n){const[r,i,s,o]=AF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;gO(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=mO(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:iS(e,t,n,o,y)}}function U9e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;gO(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=mO(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:iS(e,t,n,a,c)}}function Jee(e,t,n){const[r,i,s,o]=AF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,S=-_*u,x=b=>(b=b-s,_*b*b+w*b+S+o);return{coef:[S-w*s+_*s*s+o,w-2*_*s,_],predict:x,rSquared:iS(e,t,n,o,x)}}function V9e(e,t,n,r){if(r===0)return Xee(e,t,n);if(r===1)return Qee(e,t,n);if(r===2)return Jee(e,t,n);const[i,s,o,a]=AF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=tin(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:ein(f,y,-o,a),predict:v,rSquared:iS(e,t,n,a,v)}}function ein(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function tin(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Kve=2,Xve=1e-12;function H9e(e,t,n,r){const[i,s,o,a]=AF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Kve;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let S=0,x=0,b=0,T=0,A=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=_;++P){const N=i[P],F=s[P],B=nin(Math.abs(y-N)*I)*d[P],W=N*B;S+=B,x+=W,b+=F*B,T+=F*W,A+=N*W}const[k,R]=mO(x/S,b/S,T/S,A/S);c[g]=k+R*y,f[g]=Math.abs(s[g]-c[g]),rin(i,g+1,p)}if(h===Kve)break;const m=PRe(f);if(Math.abs(m)<Xve)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Xve:(v=1-y*y)*v}return iin(i,c,o,a)}function nin(e){return(e=1-e*e*e)*e*e}function rin(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function iin(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const sin=.5*Math.PI/180;function IF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=oin(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&ain(f,m,d,h,p)>sin?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function oin(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function ain(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function uin(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Fq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:uin(e)}function q9e(e,t,n){return n||e+(t?"_"+t:"")}const m7=()=>{},lin={init:m7,add:m7,rem:m7,idx:0},DA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},yO=Object.keys(DA).filter(e=>e!=="__count__");function cin(e,t){return(n,r)=>Cn({name:e,aggregate_param:r,out:n||e},lin,t)}[...yO,"__count__"].forEach(e=>{DA[e]=cin(e,DA[e])});function W9e(e,t,n){return DA[e](n,t)}function G9e(e,t){return e.idx-t.idx}function fin(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=DA[i]())})};return e.forEach(n),Object.values(t).sort(G9e)}function din(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function hin(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function pin(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function min(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Y9e(e,t){const n=t||Ca,r=fin(e),i=e.slice().sort(G9e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=din,s.prototype.add=hin,s.prototype.rem=pin,s.prototype.set=min,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Zee(e){this._key=e?Tc(e):Ht,this.reset()}const zo=Zee.prototype;zo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};zo.add=function(e){this._add.push(e)};zo.rem=function(e){this._rem.push(e)};zo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};zo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Wt(n,s)||(n[s]=1,++i);return i};zo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=Mje(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};zo.argmin=function(e){return this.extent(e)[0]||{}};zo.argmax=function(e){return this.extent(e)[1]||{}};zo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};zo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};zo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Lee(this.values(),e),this._get=e),this._q};zo.q1=function(e){return this.quartile(e)[0]};zo.q2=function(e){return this.quartile(e)[1]};zo.q3=function(e){return this.quartile(e)[2]};zo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=N9e(this.values(),1e3,.05,e),this._get=e),this._ci};zo.ci0=function(e){return this.ci(e)[0]};zo.ci1=function(e){return this.ci(e)[1]};function ty(e){Ae.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ty.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:yO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};st(ty,Ae,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=yt(ya(v)),w=_.length;let S=0,x;for(;S<w;++S)r[x=_[S]]||(r[x]=1,t.push(x))}this._dims=yt(e.groupby),this._dnames=this._dims.map(v=>{const _=Zi(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:Fq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&$e("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&$e("Null aggregate field specified."),m=Zi(f),g=q9e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(W9e(d,h,g))}return this._measures=this._measures.map(v=>Y9e(v,v.field)),Object.create(null)},cellkey:Fq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Zee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?C9e(t.tuple,s):Cr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const gin=1e-14;function ete(e){Ae.call(this,null,e)}ete.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};st(ete,Ae,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ya(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=$9e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=pa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(gin+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Zu(u,ya(t),e.name||"bin_"+Zi(t))}});function K9e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?Uje(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function tte(e){Ae.call(this,[],e)}tte.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};st(tte,Ae,{transform(e,t){const n=t.fork(t.ALL),r=K9e(Ht,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(T_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function X9e(e){si.call(this,null,yin,e)}st(X9e,si);function yin(e){return this.value&&!e.modified()?this.value:bee(e.fields,e.orders)}function nte(e){Ae.call(this,null,e)}nte.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function vin(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}st(nte,Ae,{transform(e,t){const n=f=>d=>{for(var h=vin(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Cr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function rte(e){Ae.call(this,null,e)}rte.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};st(rte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=_in(a,i,s,e.filter||Cc)):n.mod=a,n.source=this.value,n.modifies(r)}});function _in(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Cr(s)),s={},s[t]=l);return i}const Qve={kde:zee,mixture:F9e,normal:Bee,lognormal:L9e,uniform:j9e},bin="distributions",Jve="function",win="field";function Q9e(e,t){const n=e[Jve];Wt(Qve,n)||$e("Unknown distribution function: "+n);const r=Qve[n]();for(const i in e)i===win?r.data((e.from||t()).map(e[i])):i===bin?r[i](e[i].map(s=>Q9e(s,t))):typeof r[i]===Jve&&r[i](e[i]);return r}function ite(e){Ae.call(this,null,e)}const J9e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Ein={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:J9e},{name:"weights",type:"number",array:!0}]};ite.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:J9e.concat(Ein)},{name:"as",type:"string",array:!0,default:["value","density"]}]};st(ite,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Q9e(e.distribution,xin(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&$e("Invalid density method: "+o),!e.extent&&!r.data&&$e("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Ph(r.data()),l=IF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Cr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function xin(e){return()=>e.materialize(e.SOURCE).source}function Z9e(e,t){return e?e.map((n,r)=>t[r]||Zi(n)):null}function ste(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const eBe="bin";function ote(e){Ae.call(this,null,e)}ote.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:eBe}]};const Sin=(e,t)=>pO(Ph(e,t))/30;st(ote,Ae,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=ste(t.source,e.groupby,Ca),i=e.smooth||!1,s=e.field,o=e.step||Sin(n,s),a=T_((p,m)=>s(p)-s(m)),u=e.as||eBe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of D9e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function tBe(e){si.call(this,null,Tin,e),this.modified(!0)}st(tBe,si);function Tin(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Zu(n=>t(n,e),ya(t),Zi(t))}function ate(e){Ae.call(this,[void 0,void 0],e)}ate.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};st(ate,Ae,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=pa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Zi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function ute(e,t){si.call(this,e),this.parent=t,this.count=0}st(ute,si,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function OF(e){Ae.call(this,{},e),this._keys=tS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}st(OF,Ae,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Wt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new ute(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ht(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ht(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ht(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ht(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ht(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function nBe(e){si.call(this,null,Cin,e)}st(nBe,si);function Cin(e){return this.value&&!e.modified()?this.value:De(e.name)?yt(e.name).map(t=>Tc(t)):Tc(e.name,e.as)}function lte(e){Ae.call(this,tS(),e)}lte.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};st(lte,Ae,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ht(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ht(f),1)});function c(f){const d=Ht(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function cte(e){Ae.call(this,[],e)}cte.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};st(cte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z9e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=$ee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function fte(e){Ae.call(this,[],e)}fte.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};st(fte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=$ee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function dte(e){Ae.call(this,null,e)}dte.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};st(dte,Ae,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function rBe(e){Ae.call(this,[],e)}st(rBe,Ae,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Cr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const Vk={value:"value",median:PRe,mean:ORe,min:uV,max:yc},Ain=[];function hte(e){Ae.call(this,[],e)}hte.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Iin(e){var t=e.method||Vk.value,n;if(Vk[t]==null)$e("Unrecognized imputation method: "+t);else return t===Vk.value?(n=e.value!==void 0?e.value:0,()=>n):Vk[t]}function Oin(e){const t=e.field;return n=>n?t(n):NaN}st(hte,Ae,{transform(e,t){var n=t.fork(t.ALL),r=Iin(e),i=Oin(e),s=Zi(e.field),o=Zi(e.key),a=(e.groupby||[]).map(Zi),u=Pin(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,S;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],S={_impute:!0},y=0,w=p.length;y<w;++y)S[a[y]]=p[y];S[o]=m,S[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Cr(S))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function Pin(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Ain)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function pte(e){ty.call(this,e)}pte.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:yO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};st(pte,ty,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Cn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function mte(e){Ae.call(this,null,e)}mte.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};st(mte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=ste(r,e.groupby,e.field),s=(e.groupby||[]).map(Zi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&$e("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Ph(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=zee(h,o)[a],m=e.counts?h.length:1,g=c||Ph(h);IF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Cr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function iBe(e){si.call(this,null,kin,e)}st(iBe,si);function kin(e){return this.value&&!e.modified()?this.value:Eee(e.fields,e.flat)}function sBe(e){Ae.call(this,[],e),this._pending=null}st(sBe,Ae,{transform(e,t){const n=t.dataflow;return this._pending?g7(this,t,this._pending):Rin(e)?t.StopPropagation:e.values?g7(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=yt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>g7(this,t,yt(r.data)))}});function Rin(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function g7(e,t,n){n.forEach(Cr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function gte(e){Ae.call(this,{},e)}gte.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};st(gte,Ae,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&$e('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&$e('The "as" parameter has too few output field names.'),c=c||i.map(Zi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||$e("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function oBe(e){si.call(this,null,$in,e)}st(oBe,si);function $in(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function aBe(e){si.call(this,null,Nin,e)}st(aBe,si);function Nin(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function uBe(e){Ae.call(this,null,e)}st(uBe,Ae,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function yte(e){ty.call(this,e)}yte.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:yO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};st(yte,ty,{_transform:ty.prototype.transform,transform(e,t){return this._transform(Din(e,t),t)}});function Din(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ya(n).concat(ya(r)),o=Lin(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Min(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Min(e,t,n,r){return Zu(i=>t(i)===e?n(i):NaN,r,e+"")}function Lin(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(gF),t?i.slice(0,t):i}function lBe(e){OF.call(this,e)}st(lBe,OF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ht(s),n,t,s);return(e.modified("field")||r&&t.modified(ya(r)))&&$e("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Cr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function vte(e){Ae.call(this,null,e)}vte.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};st(vte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z9e(e.fields,e.as||[]),s=r?(a,u)=>Fin(a,u,r,i):wF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ht(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Cr({}));o[Ht(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ht(a)]))}),n}});function Fin(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function cBe(e){Ae.call(this,null,e)}st(cBe,Ae,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function _te(e){Ae.call(this,null,e)}_te.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const jin=1e-14;st(_te,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=ste(i,e.groupby,e.field),o=(e.groupby||[]).map(Zi),a=[],u=e.step||.01,l=e.probs||Ou(u/2,1-jin,u),c=l.length;return s.forEach(f=>{const d=Mee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Cr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function fBe(e){Ae.call(this,null,e)}st(fBe,Ae,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ht(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=$ee(i);r[Ht(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ht(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function bte(e){Ae.call(this,[],e),this.count=0}bte.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};st(bte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ht(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Ic()),d<o.length&&d>=u&&(f=o[d],s[Ht(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ht(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ht(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ht(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ht(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ht(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ht(c)])),this.count=a,this.value=n.source=o,n}});function wte(e){Ae.call(this,null,e)}wte.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};st(wte,Ae,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ou(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Cr(s)}),n.add=t.add.concat(this.value),n}});function dBe(e){Ae.call(this,null,e),this.modified(!0)}st(dBe,Ae,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Ete(e){Ae.call(this,null,e)}const hBe=["unit0","unit1"];Ete.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Cee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:hBe}]};st(Ete,Ae,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?rS:nS)(s.unit).offset,a=e.as||hBe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ya(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:c9e({extent:e.extent||Ph(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Aee(r),o=this.value||{},a=(n?t9e:e9e)(s,i);return a.unit=tr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function pBe(e){Ae.call(this,tS(),e)}st(pBe,Ae,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function mBe(e){Ae.call(this,null,e)}st(mBe,Ae,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(T_(e.sort)):t.source).map(e.field))}});function Bin(e,t,n,r){const i=MA[e](t,n);return{init:i.init||Fg,update:function(s,o){o[r]=i.next(s)}}}const MA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=MA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||$e("ntile num must be greater than zero.");const n=MA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||$e("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=zin(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function zin(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Uin=Object.keys(MA);function gBe(e){const t=yt(e.ops),n=yt(e.fields),r=yt(e.params),i=yt(e.aggregate_params),s=yt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){yt(ya(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Zi(g),w=q9e(p,_,s[m]);if(h(g),o.push(w),Wt(MA,p))a.push(Bin(p,g,y,w));else{if(g==null&&p!=="count"&&$e("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let S=l[_];S||(S=l[_]=[],S.field=g,f.push(S)),S.push(W9e(p,v,w))}}),(c.length||f.length)&&(this.cell=Vin(f,c,d)),this.inputs=Object.keys(u)}const yBe=gBe.prototype;yBe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};yBe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Vin(e,t,n){e=e.map(u=>Y9e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Zee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function xte(e){Ae.call(this,{},e),this._mlen=0,this._mods=[]}xte.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Uin.concat(yO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};st(xte,Ae,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=T_(e.sort),i=Fq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new gBe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Hin(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=K9e(Ht),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Hin(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?xx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Aa(-1)};t.init();for(let f=0;f<u;++f)qin(c,o,f,u),s&&Win(c,l),t.update(c,a[f])}function qin(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Win(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Gin=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ty,bin:ete,collect:tte,compare:X9e,countpattern:nte,cross:rte,density:ite,dotbin:ote,expression:tBe,extent:ate,facet:OF,field:nBe,filter:lte,flatten:cte,fold:fte,formula:dte,generate:rBe,impute:hte,joinaggregate:pte,kde:mte,key:iBe,load:sBe,lookup:gte,multiextent:oBe,multivalues:aBe,params:uBe,pivot:yte,prefacet:lBe,project:vte,proxy:cBe,quantile:_te,relay:fBe,sample:bte,sequence:wte,sieve:dBe,subflow:ute,timeunit:Ete,tupleindex:pBe,values:mBe,window:xte},Symbol.toStringTag,{value:"Module"}));function S0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Yin=()=>typeof Image<"u"?Image:null;function Ste(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Kin="identity",FE="linear",Im="log",vO="pow",_O="sqrt",PF="symlog",U1="time",V1="utc",uh="sequential",sS="diverging",jE="quantile",kF="quantize",RF="threshold",Tte="ordinal",jq="point",vBe="band",Cte="bin-ordinal",Ws="continuous",bO="discrete",wO="discretizing",Uc="interpolating",Ate="temporal";function Xin(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Qin(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Ite(){const e=Ax().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Ste(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ou(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,D0(h,m)-1),v=m===g?y:D0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Ite().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function _Be(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return _Be(t())},e}function Jin(){return _Be(Ite().paddingInner(1))}var Zin=Array.prototype.map;function esn(e){return Zin.call(e,pa)}const tsn=Array.prototype.slice;function bBe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(D0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=esn(r),n):e.slice()},n.range=function(r){return arguments.length?(t=tsn.call(r),n):t.slice()},n.tickFormat=function(r,i){return INe(e[0],tr(e),r??10,i)},n.copy=function(){return bBe().domain(n.domain()).range(n.range())},n}const $L=new Map,wBe=Symbol("vega_scale");function EBe(e){return e[wBe]=!0,e}function nsn(e){return e&&e[wBe]===!0}function rsn(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Xin(s):s.invertExtent?Qin(s):void 0),s.type=e,EBe(s)};return r.metadata=zf(yt(n)),r}function vr(e,t,n){return arguments.length>1?($L.set(e,rsn(e,t,n)),this):xBe(e)?$L.get(e):void 0}vr(Kin,ONe);vr(FE,yh,Ws);vr(Im,kNe,[Ws,Im]);vr(vO,bX,Ws);vr(_O,P$t,Ws);vr(PF,RNe,Ws);vr(U1,qNe,[Ws,Ate]);vr(V1,qNt,[Ws,Ate]);vr(uh,SX,[Ws,Uc]);vr(`${uh}-${FE}`,SX,[Ws,Uc]);vr(`${uh}-${Im}`,WNe,[Ws,Uc,Im]);vr(`${uh}-${vO}`,TX,[Ws,Uc]);vr(`${uh}-${_O}`,WNt,[Ws,Uc]);vr(`${uh}-${PF}`,GNe,[Ws,Uc]);vr(`${sS}-${FE}`,YNe,[Ws,Uc]);vr(`${sS}-${Im}`,KNe,[Ws,Uc,Im]);vr(`${sS}-${vO}`,CX,[Ws,Uc]);vr(`${sS}-${_O}`,GNt,[Ws,Uc]);vr(`${sS}-${PF}`,XNe,[Ws,Uc]);vr(jE,$Ne,[wO,jE]);vr(kF,NNe,wO);vr(RF,DNe,wO);vr(Cte,bBe,[bO,wO]);vr(Tte,Ax,bO);vr(vBe,Ite,bO);vr(jq,Jin,bO);function xBe(e){return $L.has(e)}function A_(e,t){const n=$L.get(e);return n&&n.metadata[t]}function Ote(e){return A_(e,Ws)}function BE(e){return A_(e,bO)}function Bq(e){return A_(e,wO)}function SBe(e){return A_(e,Im)}function isn(e){return A_(e,Ate)}function TBe(e){return A_(e,Uc)}function CBe(e){return A_(e,jE)}const ssn=["clamp","base","constant","exponent"];function ABe(e,t){const n=t[0],r=tr(t)-n;return function(i){return e(n+i*r)}}function $F(e,t,n){return JK(Pte(t||"rgb",n),e)}function IBe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function OBe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Aa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=vr(s)().domain([t,n]).range([0,1]),ssn.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Pte(e,t){const n=xIt[osn(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function osn(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const asn={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},usn={accent:KNt,category10:YNt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:XNt,observable10:QNt,paired:JNt,pastel1:ZNt,pastel2:eDt,set1:tDt,set2:nDt,set3:rDt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function PBe(e){if(De(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function kBe(e,t){for(const n in e)kte(n,t(e[n]))}const Zve={};kBe(usn,PBe);kBe(asn,e=>$F(PBe(e)));function kte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Zve[e]=t,this):Zve[e]}const E$="symbol",lsn="discrete",csn="gradient",fsn=e=>De(e)?e.map(t=>String(t)):String(e),dsn=(e,t)=>e[1]-t[1],hsn=(e,t)=>t[1]-e[1];function Rte(e,t,n){let r;return fr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(pO(e.domain())/n||1)+1))),_t(t)&&(r=t.step,t=t.interval),vt(t)&&(t=e.type===U1?nS(t):e.type==V1?rS(t):$e("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function RBe(e,t,n){let r=e.range(),i=r[0],s=tr(r),o=dsn;if(i>s&&(r=s,s=i,i=r,o=hsn),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],tr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function $te(e,t){return e.bins?RBe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function $Be(e,t,n,r,i,s){const o=t.type;let a=fsn;if(o===U1||i===U1)a=e.timeFormat(r);else if(o===V1||i===V1)a=e.utcFormat(r);else if(SBe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=NBe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function NBe(e,t,n){const r=$te(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const zq={[jE]:"quantiles",[kF]:"thresholds",[RF]:"domain"},DBe={[jE]:"quantiles",[kF]:"domain"};function MBe(e,t){return e.bins?gsn(e.bins):e.type===Im?NBe(e,t,!0):zq[e.type]?msn(e[zq[e.type]]()):$te(e,t)}function psn(e,t,n){const r=t[DBe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function msn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function gsn(e){const t=e.slice(0,-1);return t.max=tr(e),t}const ysn=e=>zq[e.type]||e.bins;function LBe(e,t,n,r,i,s,o){const a=DBe[t.type]&&s!==U1&&s!==V1?psn(e,t,i):$Be(e,t,n,i,s,o);return r===E$&&ysn(t)?vsn(a):r===lsn?_sn(a):bsn(a)}const vsn=e=>(t,n,r)=>{const i=e1e(r[n+1],e1e(r.max,1/0)),s=t1e(t,e),o=t1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},e1e=(e,t)=>e??t,_sn=e=>(t,n)=>n?e(t):null,bsn=e=>t=>e(t),t1e=(e,t)=>Number.isFinite(e)?t(e):null;function wsn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+tr(t),s=i-r;if(e.type===RF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Esn(e,t,n,r){const i=r||t.type;return vt(n)&&isn(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===U1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===V1?e.utcFormat("%A, %d %B %Y, %X UTC"):LBe(e,t,5,null,n,r,!0)}function FBe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Esn(e,t,n.format,n.formatType);if(Bq(t.type)){const s=MBe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(BE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(tr(s))}`}}let jBe=0;function xsn(){jBe=0}const NL="p_";function Nte(e){return e&&e.gradient}function BBe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?NL:"";return i||(i=e.id="gradient_"+jBe++,r==="radial"?(e.x1=cd(e.x1,.5),e.y1=cd(e.y1,.5),e.r1=cd(e.r1,0),e.x2=cd(e.x2,.5),e.y2=cd(e.y2,.5),e.r2=cd(e.r2,.5),s=NL):(e.x1=cd(e.x1,0),e.y1=cd(e.y1,0),e.x2=cd(e.x2,1),e.y2=cd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function cd(e,t){return e??t}function zBe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const n1e={basis:{curve:YV},"basis-closed":{curve:mDt},"basis-open":{curve:gDt},bundle:{curve:yDt,tension:"beta",value:.85},cardinal:{curve:vDt,tension:"tension",value:0},"cardinal-open":{curve:bDt,tension:"tension",value:0},"cardinal-closed":{curve:_Dt,tension:"tension",value:0},"catmull-rom":{curve:wDt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:EDt,tension:"alpha",value:.5},"catmull-rom-open":{curve:xDt,tension:"alpha",value:.5},linear:{curve:AX},"linear-closed":{curve:SDt},monotone:{horizontal:CDt,vertical:TDt},natural:{curve:ADt},step:{curve:IDt},"step-after":{curve:PDt},"step-before":{curve:ODt}};function Dte(e,t,n){var r=Wt(n1e,e)&&n1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Ssn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Tsn=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Csn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Asn=/^((\s+,?\s*)|(,\s*))/,Isn=/^[01]/;function zE(e){const t=[];return(e.match(Tsn)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Ssn[s],a=Osn(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Osn(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Isn:Csn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Asn);u!==null&&(i+=u[0].length)}return r}const ny=Math.PI/180,Psn=1e-14,Ov=Math.PI/2,Ud=Math.PI*2,ab=Math.sqrt(3)/2;var y7={},v7={},UBe=[].join;function ksn(e,t,n,r,i,s,o,a,u){const l=UBe.call(arguments);if(y7[l])return y7[l];const c=o*ny,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,S=v*a+_*u,x=g*e+y*t,b=v*e+_*t;let A=1/((x-w)*(x-w)+(b-S)*(b-S))-.25;A<0&&(A=0);let I=Math.sqrt(A);s==i&&(I=-I);const k=.5*(w+x)-I*(b-S),R=.5*(S+b)+I*(x-w),P=Math.atan2(S-R,w-k);let F=Math.atan2(b-R,x-k)-P;F<0&&s===1?F+=Ud:F>0&&s===0&&(F-=Ud);const B=Math.ceil(Math.abs(F/(Ov+.001))),W=[];for(let V=0;V<B;++V){const G=P+V*F/B,M=P+(V+1)*F/B;W[V]=[k,R,G,M,n,r,f,d]}return y7[l]=W}function Rsn(e){const t=UBe.call(e);if(v7[t])return v7[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),S=n+p-w*m,x=r+m+w*p,b=n+g,T=r+y,A=b+w*y,I=T-w*g;return v7[t]=[c*S+f*x,d*S+h*x,c*A+f*I,d*A+h*I,c*b+f*T,d*b+h*T]}const Yl=["l",0,0,0,0,0,0,0];function $sn(e,t,n){const r=Yl[0]=e[0];if(r==="a"||r==="A")Yl[1]=t*e[1],Yl[2]=n*e[2],Yl[3]=e[3],Yl[4]=e[4],Yl[5]=e[5],Yl[6]=t*e[6],Yl[7]=n*e[7];else if(r==="h"||r==="H")Yl[1]=t*e[1];else if(r==="v"||r==="V")Yl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Yl[i]=(i%2==1?t:n)*e[i];return Yl}function LA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=$sn(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":r1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":r1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function r1e(e,t,n,r){const i=ksn(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Rsn(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const i1e=.5773502691896257,s1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ud)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ab*n,i=r-n*i1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ab*n,i=r-n*i1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ab*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ab*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ab*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ab*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function VBe(e){return Wt(s1e,e)?s1e[e]:Nsn(e)}var _7={};function Nsn(e){if(!Wt(_7,e)){const t=zE(e);_7[e]={draw:function(n,r){LA(n,t,0,0,Math.sqrt(r)/2)}}}return _7[e]}const pg=.448084975506;function Dsn(e){return e.x}function Msn(e){return e.y}function Lsn(e){return e.width}function Fsn(e){return e.height}function up(e){return typeof e=="function"?e:()=>+e}function Hk(e,t,n){return Math.max(t,Math.min(e,n))}function HBe(){var e=Dsn,t=Msn,n=Lsn,r=Fsn,i=up(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=Hk(+i.call(this,c),0,v),w=Hk(+s.call(this,c),0,v),S=Hk(+o.call(this,c),0,v),x=Hk(+a.call(this,c),0,v);if(u||(u=h=Y4()),_<=0&&w<=0&&S<=0&&x<=0)u.rect(p,m,g,y);else{var b=p+g,T=m+y;u.moveTo(p+_,m),u.lineTo(b-w,m),u.bezierCurveTo(b-pg*w,m,b,m+pg*w,b,m+w),u.lineTo(b,T-x),u.bezierCurveTo(b,T-pg*x,b-pg*x,T,b-x,T),u.lineTo(p+S,T),u.bezierCurveTo(p+pg*S,T,p,T-pg*S,p,T-S),u.lineTo(p,m+_),u.bezierCurveTo(p,m+pg*_,p+pg*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=up(c),l):e},l.y=function(c){return arguments.length?(t=up(c),l):t},l.width=function(c){return arguments.length?(n=up(c),l):n},l.height=function(c){return arguments.length?(r=up(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=up(c),s=f!=null?up(f):i,a=d!=null?up(d):i,o=h!=null?up(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function qBe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Ud);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=Y4()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function EO(e,t){return e??t}const xO=e=>e.x||0,SO=e=>e.y||0,jsn=e=>e.width||0,Bsn=e=>e.height||0,zsn=e=>(e.x||0)+(e.width||0),Usn=e=>(e.y||0)+(e.height||0),Vsn=e=>e.startAngle||0,Hsn=e=>e.endAngle||0,qsn=e=>e.padAngle||0,Wsn=e=>e.innerRadius||0,Gsn=e=>e.outerRadius||0,Ysn=e=>e.cornerRadius||0,Ksn=e=>EO(e.cornerRadiusTopLeft,e.cornerRadius)||0,Xsn=e=>EO(e.cornerRadiusTopRight,e.cornerRadius)||0,Qsn=e=>EO(e.cornerRadiusBottomRight,e.cornerRadius)||0,Jsn=e=>EO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Zsn=e=>EO(e.size,64),eon=e=>e.size||1,NF=e=>e.defined!==!1,ton=e=>VBe(e.shape||"circle"),non=dDt().startAngle(Vsn).endAngle(Hsn).padAngle(qsn).innerRadius(Wsn).outerRadius(Gsn).cornerRadius(Ysn),ron=rDe().x(xO).y1(SO).y0(Usn).defined(NF),ion=rDe().y(SO).x1(xO).x0(zsn).defined(NF),son=aM().x(xO).y(SO).defined(NF),oon=HBe().x(xO).y(SO).width(jsn).height(Bsn).cornerRadius(Ksn,Xsn,Qsn,Jsn),aon=pDt().type(ton).size(Zsn),uon=qBe().x(xO).y(SO).defined(NF).size(eon);function Mte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function lon(e,t){return non.context(e)(t)}function con(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?ion:ron).curve(Dte(r,n.orient,n.tension)).context(e)(t)}function fon(e,t){const n=t[0],r=n.interpolate||"linear";return son.curve(Dte(r,n.orient,n.tension)).context(e)(t)}function oS(e,t,n,r){return oon.context(e)(t,n,r)}function don(e,t){return(t.mark.shape||t.shape).context(e)(t)}function hon(e,t){return aon.context(e)(t)}function pon(e,t){return uon.context(e)(t)}var WBe=1;function GBe(){WBe=1}function Lte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+WBe++),o=i.clipping[s]||(i.clipping[s]={id:s});return An(r)?o.path=r(null):Mte(n)?o.path=oS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function DF(e){this.mark=e,this.bounds=this.bounds||new Ts}function MF(e){DF.call(this,e),this.items=this.items||[]}st(MF,DF);class YBe{constructor(t){this._pending=0,this._loader=t||vF()}pending(){return this._pending}sanitizeURL(t){const n=this;return o1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(dT(n),r)).catch(()=>(dT(n),null))}loadImage(t){const n=this,r=Yin();return o1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Wt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>dT(n),o.onerror=()=>dT(n),o.src=s,o}).catch(i=>(dT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function o1e(e){e._pending+=1}function dT(e){e._pending-=1}function qm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?mon(t,r):0))}return e}function mon(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const gon=Ud-1e-8;let LF,x$,S$,Qv,Uq,T$,Vq,Hq;const Yg=(e,t)=>LF.add(e,t),C$=(e,t)=>Yg(x$=e,S$=t),a1e=e=>Yg(e,LF.y1),u1e=e=>Yg(LF.x1,e),Pv=(e,t)=>Uq*e+Vq*t,kv=(e,t)=>T$*e+Hq*t,b7=(e,t)=>Yg(Pv(e,t),kv(e,t)),w7=(e,t)=>C$(Pv(e,t),kv(e,t));function TO(e,t){return LF=e,t?(Qv=t*ny,Uq=Hq=Math.cos(Qv),T$=Math.sin(Qv),Vq=-T$):(Uq=Hq=1,Qv=T$=Vq=0),yon}const yon={beginPath(){},closePath(){},moveTo:w7,lineTo:w7,rect(e,t,n,r){Qv?(b7(e+n,t),b7(e+n,t+r),b7(e,t+r),w7(e,t)):(Yg(e+n,t+r),C$(e,t))},quadraticCurveTo(e,t,n,r){const i=Pv(e,t),s=kv(e,t),o=Pv(n,r),a=kv(n,r);l1e(x$,i,o,a1e),l1e(S$,s,a,u1e),C$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Pv(e,t),a=kv(e,t),u=Pv(n,r),l=kv(n,r),c=Pv(i,s),f=kv(i,s);c1e(x$,o,u,c,a1e),c1e(S$,a,l,f,u1e),C$(c,f)},arc(e,t,n,r,i,s){if(r+=Qv,i+=Qv,x$=n*Math.cos(i)+e,S$=n*Math.sin(i)+t,Math.abs(i-r)>gon)Yg(e-n,t-n),Yg(e+n,t+n);else{const o=l=>Yg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Ud,r<0&&(r+=Ud),i=i%Ud,i<0&&(i+=Ud),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Ud,a=r-r%Ov,u=0;u<4&&a>i;++u,a-=Ov)o(a);else for(a=r-r%Ov+Ov,u=0;u<4&&a<i;++u,a=a+Ov)o(a)}}};function l1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function c1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Psn?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(f1e(u,e,t,n,r)),0<l&&l<1&&i(f1e(l,e,t,n,r))}function f1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var T0=(T0=S0(1,1))?T0.getContext("2d"):null;const qq=new Ts;function Fte(e){return function(t,n){if(!T0)return!0;e(T0,t),qq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=qq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(T0.isPointInPath(u,a))return!0;return!1}}function jte(e,t){return t.contains(e.x||0,e.y||0)}function KBe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(qq.set(n,r,n+i,r+s))}function XBe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ew(t,n,r,i,s)}function ew(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function UE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Jc(e,t){return e??t}function d1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function von(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Jc(t.x1,.5)*r,n.y1+Jc(t.y1,.5)*i,Math.max(r,i)*Jc(t.r1,0),n.x1+Jc(t.x2,.5)*r,n.y1+Jc(t.y2,.5)*i,Math.max(r,i)*Jc(t.r2,.5));else{const o=Jc(t.x1,0),a=Jc(t.y1,0),u=Jc(t.x2,1),l=Jc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=S0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=d1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return d1e(s,t.stops)}function QBe(e,t,n){return Nte(n)?von(e,n,t.bounds):n}function DL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=QBe(e,t,t.fill),!0):!1}var _on=[];function VE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=QBe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||_on),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function bon(e,t){return e.zindex-t.zindex||e.index-t.index}function Bte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(bon)}function Vf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Bte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function ML(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Bte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function zte(e){return function(t,n,r){Vf(n,i=>{(!r||r.intersects(i.bounds))&&JBe(e,t,i,i)})}}function won(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&JBe(e,t,n.items[0],n.items)}}function JBe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(UE(t,n),n.fill&&DL(t,n,i)&&t.fill(),n.stroke&&VE(t,n,i)&&t.stroke()))}function FF(e){return e=e||Cc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,ML(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function CO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Ute(e){return FF(CO(e))}function f1(e,t){return"translate("+e+","+t+")"}function Vte(e){return"rotate("+e+")"}function Eon(e,t){return"scale("+e+","+t+")"}function ZBe(e){return f1(e.x||0,e.y||0)}function xon(e){return f1(e.x||0,e.y||0)+(e.angle?" "+Vte(e.angle):"")}function Son(e){return f1(e.x||0,e.y||0)+(e.angle?" "+Vte(e.angle):"")+(e.scaleX||e.scaleY?" "+Eon(e.scaleX||1,e.scaleY||1):"")}function Hte(e,t,n){function r(o,a){o("transform",xon(a)),o("d",t(null,a))}function i(o,a){return t(TO(o,a.angle),a),qm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ny),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:zte(s),pick:Ute(s),isect:n||Fte(s)}}var Ton=Hte("arc",lon);function Con(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Aon(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Ion(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function qte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(TO(u),c),qm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=CO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:won(s),pick:a,isect:jte,tip:n}}var Oon=qte("area",con,Con);function Pon(e,t){var n=t.clip;e.save(),An(n)?(e.beginPath(),n(e),e.clip()):e7e(e,t.group)}function e7e(e,t){e.beginPath(),Mte(t)?oS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function t7e(e){const t=Jc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function kon(e,t){e("transform",ZBe(t))}function n7e(e,t){const n=t7e(t);e("d",oS(null,t,n,n))}function Ron(e,t){e("class","background"),e("aria-hidden",!0),n7e(e,t)}function $on(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?n7e(e,t):e("d","")}function Non(e,t,n){const r=t.clip?Lte(n,t,t):null;e("clip-path",r)}function Don(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),qm(e,t),e.translate(t.x||0,t.y||0)}function FA(e,t,n,r){const i=t7e(t);e.beginPath(),oS(e,t,(n||0)+i,(r||0)+i)}const Mon=CO(FA),Lon=CO(FA,!1),Fon=CO(FA,!0);function jon(e,t,n,r){Vf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(FA(e,i,s,o),UE(e,i),i.fill&&DL(e,i,u)&&e.fill(),i.stroke&&!a&&VE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&e7e(e,i),n&&n.translate(-s,-o),Vf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(FA(e,i,s,o),UE(e,i),VE(e,i,u)&&e.stroke())})}function Bon(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return ML(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Mte(u)&&!Fon(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Lon(e,u,o,a)?(e.restore(),u):(l=ML(u,v=>zon(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Mon(e,u,o,a)&&(l=u),e.restore(),l||null)})}function zon(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Uon={type:"group",tag:"g",nested:!1,attr:kon,bound:Don,draw:jon,pick:Bon,isect:KBe,content:Non,background:Ron,foreground:$on},jA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Wte(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Gte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Yte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function jF(e,t){return e==="center"?t/2:e==="right"?t:0}function BF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Von(e,t,n){const r=Wte(t,n),i=Gte(t,r),s=Yte(t,r),o=(t.x||0)-jF(t.align,i),a=(t.y||0)-BF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,jA["xmlns:xlink"],"xlink:href"),e("transform",f1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Hon(e,t){const n=t.image,r=Gte(t,n),i=Yte(t,n),s=(t.x||0)-jF(t.align,r),o=(t.y||0)-BF(t.baseline,i);return e.set(s,o,s+r,o+i)}function qon(e,t,n){Vf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Wte(r,this);let s=Gte(r,i),o=Yte(r,i);if(s===0||o===0)return;let a=(r.x||0)-jF(r.align,s),u=(r.y||0)-BF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(UE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Won={type:"image",tag:"image",nested:!1,attr:Von,bound:Hon,draw:qon,pick:FF(),isect:Cc,get:Wte,xOffset:jF,yOffset:BF},Gon=qte("line",fon,Aon);function Yon(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Son(t)),e("d",t.path)}function A$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ny,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=zE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),LA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):LA(e,u,r,i,s,o)}function Kon(e,t){return A$(TO(e,t.angle),t)?e.set(0,0,0,0):qm(e,t,!0)}var Xon={type:"path",tag:"path",nested:!1,attr:Yon,bound:Kon,draw:zte(A$),pick:Ute(A$),isect:Fte(A$)};function Qon(e,t){e("d",oS(null,t))}function Jon(e,t){var n,r;return qm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function h1e(e,t){e.beginPath(),oS(e,t)}var Zon={type:"rect",tag:"path",nested:!1,attr:Qon,bound:Jon,draw:zte(h1e),pick:Ute(h1e),isect:KBe};function ean(e,t){e("transform",ZBe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function tan(e,t){var n,r;return qm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function r7e(e,t,n){var r,i,s,o;return t.stroke&&VE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function nan(e,t,n){Vf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&r7e(e,r,i)&&(UE(e,r),e.stroke())}})}function ran(e,t,n,r){return e.isPointInStroke?r7e(e,t,1)&&e.isPointInStroke(n,r):!1}var ian={type:"rule",tag:"line",nested:!1,attr:ean,bound:tan,draw:nan,pick:FF(ran),isect:XBe},san=Hte("shape",don),oan=Hte("symbol",hon,jte);const p1e=zje();var Cl={height:Wh,measureWidth:Kte,estimateWidth:LL,width:LL,canvas:i7e};i7e(!0);function i7e(e){Cl.width=e&&T0?Kte:LL}function LL(e,t){return s7e(iy(e,t),Wh(e))}function s7e(e,t){return~~(.8*e.length*t)}function Kte(e,t){return Wh(e)<=0||!(t=iy(e,t))?0:o7e(t,zF(e))}function o7e(e,t){const n=`(${t}) ${e}`;let r=p1e.get(n);return r===void 0&&(T0.font=t,r=T0.measureText(e).width,p1e.set(n,r)),r}function Wh(e){return e.fontSize!=null?+e.fontSize||0:11}function ry(e){return e.lineHeight!=null?e.lineHeight:Wh(e)+2}function aan(e){return De(e)?e.length>1?e:e[0]:e}function AO(e){return aan(e.lineBreak&&e.text&&!De(e.text)?e.text.split(e.lineBreak):e.text)}function Xte(e){const t=AO(e);return(De(t)?t.length-1:0)*ry(e)}function iy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?lan(e,n):n}function uan(e){if(Cl.width===Kte){const t=zF(e);return n=>o7e(n,t)}else if(Cl.width===LL){const t=Wh(e);return n=>s7e(n,t)}else return t=>Cl.width(e,t)}function lan(e,t){var n=+e.limit,r=uan(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function IO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function zF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Wh(e)+"px "+IO(e,t)}function Qte(e){var t=e.baseline,n=Wh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ry(e):t==="line-bottom"?.29*n-.5*ry(e):0)}const can={left:"start",center:"middle",right:"end"},oC=new Ts;function UF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ov,t+=r*Math.cos(i),n+=r*Math.sin(i)),oC.x1=t,oC.y1=n,oC}function fan(e,t){var n=t.dx||0,r=(t.dy||0)+Qte(t),i=UF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",can[t.align]||"start"),a?(u=f1(s,o)+" "+Vte(a),(n||r)&&(u+=" "+f1(n,r))):u=f1(s+n,o+r),e("transform",u)}function Jte(e,t,n){var r=Cl.height(t),i=t.align,s=UF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Qte(t)-Math.round(.8*r),c=AO(t),f;if(De(c)?(r+=ry(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Cl.width(t,h)),0)):f=Cl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ny,o,a);else if(n===2)return e.rotatedPoints(t.angle*ny,o,a);return e}function dan(e,t,n){Vf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=zF(r),e.textAlign=r.align||"left",s=UF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ny),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Qte(r),c=AO(r),UE(e,r),De(c))for(l=ry(r),u=0;u<c.length;++u)f=iy(r,c[u]),r.fill&&DL(e,r,i)&&e.fillText(f,o,a),r.stroke&&VE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=iy(r,c),r.fill&&DL(e,r,i)&&e.fillText(f,o,a),r.stroke&&VE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function han(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=UF(t),a=o.x1,u=o.y1,l=Jte(oC,t,1),c=-t.angle*ny,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function pan(e,t){const n=Jte(oC,e,2);return ew(t,n[0],n[1],n[2],n[3])||ew(t,n[0],n[1],n[4],n[5])||ew(t,n[4],n[5],n[6],n[7])||ew(t,n[2],n[3],n[6],n[7])}var man={type:"text",tag:"text",nested:!1,attr:fan,bound:Jte,draw:dan,pick:FF(han),isect:pan},gan=qte("trail",pon,Ion),Ll={arc:Ton,area:Oon,group:Uon,image:Won,line:Gon,path:Xon,rect:Zon,rule:ian,shape:san,symbol:oan,text:man,trail:gan};function Wq(e,t,n){var r=Ll[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var m1e={mark:null};function a7e(e,t,n){var r=Ll[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(m1e.mark=e,l=m1e),c=Wq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(Wq(s[a],i,n));return e.bounds=t}const yan=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function u7e(e,t){return JSON.stringify(e,yan,t)}function l7e(e){const t=typeof e=="string"?JSON.parse(e):e;return c7e(t)}function c7e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&c7e(n[i]);return t&&a7e(e),e}class f7e{constructor(t){arguments.length?this.root=l7e(t):(this.root=g1e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new MF(this.root)])}toJSON(t){return u7e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=g1e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function g1e(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Kg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Zte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ls(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Kg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function oc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function d7e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function VF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function van(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Ll[i.marktype]).tip){for(o=VF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let ene=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||vF(),this._tooltip=n||_an}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Kg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=van(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function _an(e,t,n,r){e.element().setAttribute("title",r||"")}class OO{constructor(t){this._el=null,this._bgcolor=null,this._loader=new YBe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const ban="keydown",wan="keypress",Ean="keyup",h7e="dragenter",I$="dragleave",p7e="dragover",Gq="pointerdown",xan="pointerup",FL="pointermove",O$="pointerout",m7e="pointerover",Yq="mousedown",San="mouseup",g7e="mousemove",jL="mouseout",y7e="mouseover",BL="click",Tan="dblclick",Can="wheel",v7e="mousewheel",zL="touchstart",UL="touchmove",VL="touchend",Aan=[ban,wan,Ean,h7e,I$,p7e,Gq,xan,FL,O$,m7e,Yq,San,g7e,jL,y7e,BL,Tan,Can,v7e,zL,UL,VL],Kq=FL,aC=jL,Xq=BL;class PO extends ene{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Aan,this.pointermove=v1e([FL,g7e],[m7e,y7e],[O$,jL]),this.dragover=v1e([p7e],[h7e],[I$]),this.pointerout=_1e([O$,jL]),this.dragleave=_1e([I$])}initialize(t,n,r){return this._canvas=t&&Zte(t,"canvas"),[BL,Yq,Gq,FL,O$,I$].forEach(i=>y1e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(v7e,t)}pointerdown(t){this._down=this._active,this.fire(Gq,t)}mousedown(t){this._down=this._active,this.fire(Yq,t)}click(t){this._down===this._active&&(this.fire(BL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(zL,t,!0)}touchmove(t){this.fire(UL,t,!0)}touchend(t){this.fire(VL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===Xq&&i&&i.href?this.handleHref(n,i,i.href):(t===Kq||t===aC)&&this.handleTooltip(n,i,t!==aC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(y1e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=VF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Ll[t.marktype].pick.call(this,o,t,n,r,i,s)}}const Ian=e=>e===zL||e===UL||e===VL?[zL,UL,VL]:[e];function y1e(e,t){Ian(t).forEach(n=>Oan(e,n))}function Oan(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function l2(e,t,n){t.forEach(r=>e.fire(r,n))}function v1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?l2(this,e,r):((!i||!i.exit)&&l2(this,n,r),this._active=s,l2(this,t,r),l2(this,e,r))}}function _1e(e){return function(t){l2(this,e,t),this._active=null}}function Pan(){return typeof window<"u"&&window.devicePixelRatio||1}function kan(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?Pan():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class HL extends OO{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:S0(1,1,this._options.type),t&&this._canvas&&(oc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)kan(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||$e("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=Ran(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):$an(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Ll[n.marktype];n.clip&&Pon(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const Ran=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function $an(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class _7e extends ene{constructor(t,n){super(t,n);const r=this;r._hrefHandler=E7(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=E7(r,(i,s)=>{r.handleTooltip(i,s,i.type!==aC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(Xq,this._hrefHandler),i.removeEventListener(Kq,this._tooltipHandler),i.removeEventListener(aC,this._tooltipHandler)),this._svg=i=t&&Zte(t,"svg"),i&&(i.addEventListener(Xq,this._hrefHandler),i.addEventListener(Kq,this._tooltipHandler),i.addEventListener(aC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:E7(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const E7=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},b7e="aria-hidden",tne="aria-label",nne="role",rne="aria-roledescription",w7e="graphics-object",ine="graphics-symbol",E7e=(e,t,n)=>({[nne]:e,[rne]:t,[tne]:n||void 0}),Nan=zf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),b1e={axis:{desc:"axis",caption:Lan},legend:{desc:"legend",caption:Fan},"title-text":{desc:"title",caption:e=>`Title text '${E1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${E1e(e)}'`}},w1e={ariaRole:nne,ariaRoleDescription:rne,description:tne};function x7e(e,t){const n=t.aria===!1;if(e(b7e,n||void 0),n||t.description==null)for(const r in w1e)e(w1e[r],void 0);else{const r=t.mark.marktype;e(tne,t.description),e(nne,t.ariaRole||(r==="group"?w7e:ine)),e(rne,t.ariaRoleDescription||`${r} mark`)}}function S7e(e){return e.aria===!1?{[b7e]:!0}:Nan[e.role]?null:b1e[e.role]?Man(e,b1e[e.role]):Dan(e)}function Dan(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return E7e(n?w7e:ine,`${t} mark container`,e.description)}function Man(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return E7e(t.role||ine,t.desc,n.description||r(n))}catch{return null}}function E1e(e){return yt(e.text).join(" ")}function Lan(e){const t=e.datum,n=e.orient,r=t.title?T7e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${BE(a)?"discrete":a} scale with ${FBe(o,s,e)}`}function Fan(e){const t=e.datum,n=t.title?T7e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Ban(r)+(n?` titled '${n}'`:"")+` for ${jan(s)} with ${FBe(u,a,e)}`}function T7e(e){try{return yt(tr(e.items).items[0].text).join(" ")}catch{return null}}function jan(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+tr(e)}function Ban(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const C7e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),zan=e=>C7e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function sne(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${zan(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=C7e(u),a),toString:()=>e};return a}const A7e=e=>I7e(sne(),e)+"";function I7e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):I7e(e,r)}return e.close()}const qL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},WL={blend:"mix-blend-mode"},O7e={fill:"none","stroke-miterlimit":10},hT=0,x1e="http://www.w3.org/2000/xmlns/",Ds=jA.xmlns;class one extends OO{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ls(t,0,"svg",Ds),this._svg.setAttributeNS(x1e,"xmlns",Ds),this._svg.setAttributeNS(x1e,"xmlns:xlink",jA["xmlns:xlink"]),this._svg.setAttribute("version",jA.version),this._svg.setAttribute("class","marks"),oc(t,1),this._root=Ls(this._svg,hT,"g",Ds),Xg(this._root,O7e),oc(this._svg,hT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Xg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ls(t,hT,"rect",Ds),Xg(r,{width:this._width,height:this._height,fill:n}));const i=A7e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),oc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Ll[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,S1e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,S1e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Ll[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=T1e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return oc(c,0),n._svg;c.setAttribute("class",d7e(n));const f=S7e(n);for(const m in f)$a(c,m,f[m]);l||$a(c,"pointer-events",u),$a(c,"clip-path",n.clip?Lte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=T1e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&Han(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Vf(n,p),oc(c,h),c}_update(t,n,r){zp=n,sa=n.__values__,x7e(uC,r),t.attr(uC,r,this);const i=Wan[t.type];i&&i.call(this,t,n,r),zp&&this.style(zp,r)}style(t,n){if(n!=null){for(const r in qL){let i=r==="font"?IO(n):n[r];if(i===sa[r])continue;const s=qL[r];i==null?t.removeAttribute(s):(Nte(i)&&(i=BBe(i,this._defs.gradient,P7e())),t.setAttribute(s,i+"")),sa[r]=i}for(const r in WL)P$(t,WL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ls(t,hT+1,"defs",Ds)),i=Uan(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ls(t,hT+1,"defs",Ds)),i=Van(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):oc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function S1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Uan(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ls(e,n++,"pattern",Ds);Xg(o,{id:NL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ls(o,0,"rect",Ds),Xg(o,{width:1,height:1,fill:`url(${P7e()}#${t.id})`}),e=Ls(e,n++,"radialGradient",Ds),Xg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ls(e,n++,"linearGradient",Ds),Xg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ls(e,r,"stop",Ds),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return oc(e,r),n}function Van(e,t,n){let r;return e=Ls(e,n,"clipPath",Ds),e.setAttribute("id",t.id),t.path?(r=Ls(e,0,"path",Ds),r.setAttribute("d",t.path)):(r=Ls(e,0,"rect",Ds),Xg(r,{x:0,y:0,width:t.width,height:t.height})),oc(e,1),n+1}function Han(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Vf(n,o=>{i=e.mark(t,o,i,r),++s}),oc(t,1+s)}function T1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Kg(o,r,Ds),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Kg(o,"path",Ds);s.appendChild(a),a.__data__=e;const u=Kg(o,"g",Ds);s.appendChild(u),u.__data__=e;const l=Kg(o,"path",Ds);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||qan(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function qan(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let zp=null,sa=null;const Wan={group(e,t,n){const r=zp=t.childNodes[2];sa=r.__values__,e.foreground(uC,n,this),sa=t.__values__,zp=t.childNodes[1],e.content(uC,n,this);const i=zp=t.childNodes[0];e.background(uC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==sa.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),sa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),sa=r.__values__,this.style(r,n),o&&(n.fill=o),zp=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(P$(t,"image-rendering","optimizeSpeed"),P$(t,"image-rendering","pixelated")):P$(t,"image-rendering",null)},text(e,t,n){const r=AO(n);let i,s,o,a;De(r)?(s=r.map(u=>iy(n,u)),i=s.join(`
`),i!==sa.text&&(oc(t,0),o=t.ownerDocument,a=ry(n),s.forEach((u,l)=>{const c=Kg(o,"tspan",Ds);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),sa.text=i)):(s=iy(n,r),s!==sa.text&&(t.textContent=s,sa.text=s)),$a(t,"font-family",IO(n)),$a(t,"font-size",Wh(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function uC(e,t,n){t!==sa[e]&&(n?Gan(zp,e,t,n):$a(zp,e,t),sa[e]=t)}function P$(e,t,n){n!==sa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),sa[t]=n)}function Xg(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Gan(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function P7e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class k7e extends OO{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=sne();n.open("svg",Cn({},jA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",O7e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ll[n.marktype],i=r.tag,s=[x7e,r.attr];t.open("g",{class:d7e(n),"clip-path":n.clip?Lte(this,n,n.group):null},S7e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=AO(a);if(De(l)){const c={x:0,dy:ry(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(iy(a,l[f])).close()}else t.text(iy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Vf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Vf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&Yan(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:NL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Yan(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=IO(t),e["font-size"]=Wh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in qL){let a=t[o];const u=qL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Nte(a)&&(a=BBe(a,i.gradient,"")),e[u]=a)}for(const o in WL){const a=t[o];a!=null&&(s=s||[],s.push(`${WL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const of={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Kan(e){of.svgMarkTypes=e.svgMarkTypes??["text"],of.svgOnTop=e.svgOnTop??!0,of.debug=e.debug??!1}class Qq extends OO{constructor(t){super(t),this._svgRenderer=new one(t),this._canvasRenderer=new HL(t)}initialize(t,n,r,i,s){this._root_el=Ls(t,0,"div");const o=Ls(this._root_el,0,"div"),a=Ls(this._root_el,1,"div");return this._root_el.style.position="relative",of.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=of.svgOnTop?a:o,this._canvasEl=of.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return of.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!of.svgMarkTypes.includes(s));this._svgRenderer.render(t,of.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return of.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class R7e extends PO{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ls(Ls(t,0,"div"),of.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const $7e="canvas",N7e="hybrid",D7e="png",M7e="svg",L7e="none",Qg={Canvas:$7e,PNG:D7e,SVG:M7e,Hybrid:N7e,None:L7e},H1={};H1[$7e]=H1[D7e]={renderer:HL,headless:HL,handler:PO};H1[M7e]={renderer:one,headless:k7e,handler:_7e};H1[N7e]={renderer:Qq,headless:Qq,handler:R7e};H1[L7e]={};function HF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(H1[e]=t,this):H1[e]}function F7e(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?j7e(e,i,n,r):s==="group"?B7e(e,i,n,r):$e("Intersect scene must be mark node or group item.")}function j7e(e,t,n,r){if(Xan(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)B7e(i[a],t,n,r);else for(const u=Ll[s].isect;a<o;++a){const l=i[a];z7e(l,t,u)&&r.push(l)}}return r}function Xan(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function B7e(e,t,n,r){n&&n(e.mark)&&z7e(e,t,Ll.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)j7e(i[u],t,n,r);t.translate(o,a)}return r}function z7e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const x7=new Ts;function U7e(e){const t=e.clip;if(An(t))t(TO(x7.clear()));else if(t)x7.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(x7)}const Qan=1e-9;function ane(e,t,n){return e===t?!0:n==="path"?V7e(e,t):e instanceof Date&&t instanceof Date?+e==+t:fr(e)&&fr(t)?Math.abs(e-t)<=Qan:!e||!t||!_t(e)&&!_t(t)?e==t:Jan(e,t)}function V7e(e,t){return ane(zE(e),zE(t))}function Jan(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!ane(e[i],t[i],i))return!1;return typeof e==typeof t}function Zan(){GBe(),xsn()}const HE="top",mf="left",bf="right",sy="bottom",eun="top-left",tun="top-right",nun="bottom-left",run="bottom-right",une="start",Jq="middle",Ma="end",iun="x",sun="y",qF="group",lne="axis",cne="title",oun="frame",aun="scope",fne="legend",H7e="row-header",q7e="row-footer",W7e="row-title",G7e="column-header",Y7e="column-footer",K7e="column-title",uun="padding",lun="symbol",X7e="fit",Q7e="fit-x",J7e="fit-y",cun="pad",dne="none",qk="all",Zq="each",hne="flush",Jg="column",Zg="row";function Z7e(e){Ae.call(this,null,e)}st(Z7e,Ae,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ll[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=Wk(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===qF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(Wk(l,o))),r.role){case lne:case fne:case cne:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(Wk(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(Wk(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return U7e(r),t.modifies("bounds")}});function Wk(e,t,n){return t(e.bounds.clear(),e,n)}const C1e=":vega_identifier:";function pne(e){Ae.call(this,0,e)}pne.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};st(pne,Ae,{transform(e,t){const n=fun(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function fun(e){return e._signals[C1e]||(e._signals[C1e]=e.add(0))}function eze(e){Ae.call(this,null,e)}st(eze,Ae,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,dun(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===qF?MF:DF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function dun(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function tze(e){Ae.call(this,null,e)}const A1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!nze(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},nze=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),I1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(nze(i,s=e[n].bounds,t))return!0},hun=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},pun=(e,t,n)=>{var r=e.range(),i=new Ts;return t===HE||t===sy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},O1e=e=>(e.forEach(t=>t.opacity=1),e),P1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");st(tze,Ae,{transform(e,t){const n=A1e[e.method]||A1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(O1e(i),t=P1e(t,e)),t;if(i=i.filter(hun),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=O1e(i),t=P1e(t,e),s.length>=3&&I1e(s,r)){do s=n(s,r);while(s.length>=3&&I1e(s,r));s.length<3&&!tr(i).opacity&&(s.length>1&&(tr(s).opacity=0),tr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=pun(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function rze(e){Ae.call(this,null,e)}st(rze,Ae,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ra=new Ts;function tw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function mun(e){var t=e.items[0].orient;return t===mf||t===bf}function gun(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function yun(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=gun(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Xte(p),v=0,_=0,w,S;switch(ra.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case HE:v=f||0,_=-c,S=Math.max(d,Math.min(h,-g.y1)),g.add(0,-S).add(l,0),p&&Gk(e,p,S,m,y,0,-1,g);break;case mf:v=-c,_=f||0,S=Math.max(d,Math.min(h,-g.x1)),g.add(-S,0).add(0,l),p&&Gk(e,p,S,m,y,1,-1,g);break;case bf:v=n+c,_=f||0,S=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(S,l),p&&Gk(e,p,S,m,y,1,1,g);break;case sy:v=f||0,_=r+c,S=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,S),p&&Gk(e,p,S,m,0,0,1,g);break;default:v=i.x,_=i.y}return qm(g.translate(v,_),i),tw(i,"x",v+o)|tw(i,"y",_+o)&&(i.bounds=ra,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Gk(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const k1e=(e,t)=>Math.floor(Math.min(e,t)),R1e=(e,t)=>Math.ceil(Math.max(e,t));function vun(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===qF)switch(i.role){case lne:case fne:case cne:break;case H7e:o.rowheaders.push(...s);break;case q7e:o.rowfooters.push(...s);break;case G7e:o.colheaders.push(...s);break;case Y7e:o.colfooters.push(...s);break;case W7e:o.rowtitle=s[0];break;case K7e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function _un(e){return new Ts().set(0,0,e.width||0,e.height||0)}function bun(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Oi(e,t,n){const r=_t(e)?e[t]:e;return r??(n!==void 0?n:0)}function $1e(e){return e<0?Math.ceil(-e):0}function ize(e,t,n){var r=!n.nodirty,i=n.bounds===hne?_un:bun,s=ra.set(0,0,0,0),o=Oi(n.align,Jg),a=Oi(n.align,Zg),u=Oi(n.padding,Jg),l=Oi(n.padding,Zg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),S=Array(d),x,b,T,A,I,k,R,P,N,F,B;for(b=0;b<c;++b)p[b]=0;for(b=0;b<f;++b)y[b]=0;for(b=0;b<d;++b)k=t[b],I=S[b]=i(k),k.x=k.x||0,_[b]=0,k.y=k.y||0,w[b]=0,T=b%c,A=~~(b/c),m=Math.max(m,R=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[T]=Math.max(p[T],R),y[A]=Math.max(y[A],P),h[b]=u+$1e(I.x1),g[b]=l+$1e(I.y1),r&&e.dirty(t[b]);for(b=0;b<d;++b)b%c===0&&(h[b]=0),b<c&&(g[b]=0);if(o===Zq)for(T=1;T<c;++T){for(B=0,b=T;b<d;b+=c)B<h[b]&&(B=h[b]);for(b=T;b<d;b+=c)h[b]=B+p[T-1]}else if(o===qk){for(B=0,b=0;b<d;++b)b%c&&B<h[b]&&(B=h[b]);for(b=0;b<d;++b)b%c&&(h[b]=B+m)}else for(o=!1,T=1;T<c;++T)for(b=T;b<d;b+=c)h[b]+=p[T-1];if(a===Zq)for(A=1;A<f;++A){for(B=0,b=A*c,x=b+c;b<x;++b)B<g[b]&&(B=g[b]);for(b=A*c;b<x;++b)g[b]=B+y[A-1]}else if(a===qk){for(B=0,b=c;b<d;++b)B<g[b]&&(B=g[b]);for(b=c;b<d;++b)g[b]=B+v}else for(a=!1,A=1;A<f;++A)for(b=A*c,x=b+c;b<x;++b)g[b]+=y[A-1];for(N=0,b=0;b<d;++b)N=h[b]+(b%c?N:0),_[b]+=N-t[b].x;for(T=0;T<c;++T)for(F=0,b=T;b<d;b+=c)F+=g[b],w[b]+=F-t[b].y;if(o&&Oi(n.center,Jg)&&f>1)for(b=0;b<d;++b)I=o===qk?m:p[b%c],N=I-S[b].x2-t[b].x-_[b],N>0&&(_[b]+=N/2);if(a&&Oi(n.center,Zg)&&c!==1)for(b=0;b<d;++b)I=a===qk?v:y[~~(b/c)],F=I-S[b].y2-t[b].y-w[b],F>0&&(w[b]+=F/2);for(b=0;b<d;++b)s.union(S[b].translate(_[b],w[b]));switch(N=Oi(n.anchor,iun),F=Oi(n.anchor,sun),Oi(n.anchor,Jg)){case Ma:N-=s.width();break;case Jq:N-=s.width()/2}switch(Oi(n.anchor,Zg)){case Ma:F-=s.height();break;case Jq:F-=s.height()/2}for(N=Math.round(N),F=Math.round(F),s.clear(),b=0;b<d;++b)t[b].mark.bounds.clear();for(b=0;b<d;++b)k=t[b],k.x+=_[b]+=N,k.y+=w[b]+=F,s.union(k.mark.bounds.union(k.bounds.translate(_[b],w[b]))),r&&e.dirty(k);return s}function wun(e,t,n){var r=vun(t),i=r.marks,s=n.bounds===hne?Eun:xun,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=ize(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Oi(n.headerBand,Zg,null),c=Yk(e,r.rowheaders,i,a,u,-Oi(o,"rowHeader"),k1e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Oi(n.headerBand,Jg,null),f=Yk(e,r.colheaders,i,a,a,-Oi(o,"columnHeader"),k1e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Oi(n.footerBand,Zg,null),d=Yk(e,r.rowfooters,i,a,u,Oi(o,"rowFooter"),R1e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Oi(n.footerBand,Jg,null),h=Yk(e,r.colfooters,i,a,a,Oi(o,"columnFooter"),R1e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Oi(n.titleAnchor,Zg),g=Oi(o,"rowTitle"),g=p===Ma?d+g:c-g,m=Oi(n.titleBand,Zg,.5),N1e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Oi(n.titleAnchor,Jg),g=Oi(o,"columnTitle"),g=p===Ma?h+g:f-g,m=Oi(n.titleBand,Jg,.5),N1e(e,r.coltitle,g,1,y,m))}function Eun(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function xun(e,t){return e.bounds[t]}function Yk(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,S,x,b,T,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(x=t[v],S=x.mark.bounds,_=y;_>=0&&(b=n[_])==null;_-=d);a?(T=h==null?b.x:Math.round(b.bounds.x1+h*b.bounds.width()),A=m):(T=m,A=h==null?b.y:Math.round(b.bounds.y1+h*b.bounds.height())),S.union(x.bounds.translate(T-(x.x||0),A-(x.y||0))),x.x=T,x.y=A,e.dirty(x),g=o(g,S[l])}return g}function N1e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Sun(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Tun(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Cun(e,t,n,r,i,s,o){const a=Sun(n,t),u=Tun(e,a("offset",0)),l=a("anchor",une),c=l===Ma?1:l===Jq?.5:0,f={align:Zq,bounds:a("bounds",hne),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case mf:f.anchor={x:Math.floor(r.x1)-u,column:Ma,y:c*(o||r.height()+2*r.y1),row:l};break;case bf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case HE:f.anchor={y:Math.floor(i.y1)-u,row:Ma,x:c*(s||i.width()+2*i.x1),column:l};break;case sy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case eun:f.anchor={x:u,y:u};break;case tun:f.anchor={x:s-u,y:u,column:Ma};break;case nun:f.anchor={x:u,y:o-u,row:Ma};break;case run:f.anchor={x:s-u,y:o-u,column:Ma,row:Ma};break}return f}function Aun(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Oun(e,n,n.items[0].items[0]),s=Iun(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===lun&&Pun(n.items[0].items[0].items[0].items),i!==dne&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,qm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function Iun(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Oun(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&pT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case mf:i+=Math.ceil(o.bounds.width())+u;break;case bf:case sy:break;default:s+=o.bounds.height()+u}switch((i||s)&&pT(e,n,i,s),o.orient){case mf:c+=ub(t,n,o,a,1,1);break;case bf:l+=ub(t,n,o,Ma,0,0)+u,c+=ub(t,n,o,a,1,1);break;case sy:l+=ub(t,n,o,a,0,0),c+=ub(t,n,o,Ma,-1,0,1)+u;break;default:l+=ub(t,n,o,a,0,0)}(l||c)&&pT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(pT(e,n,-l,0),pT(e,o,-l,0))}}function ub(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Xte(n);return Math.round(r===une?f:r===Ma?d-h:.5*(c-h))}function pT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Pun(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function kun(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===mf||a===bf?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==qF?a===mf?(p=i.y2,h=i.y1):a===bf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===mf&&(p=r,h=0),_=u===une?p:u===Ma?h:(p+h)/2,d&&d.text){switch(a){case HE:case sy:v=f.bounds.height()+c;break;case mf:y=f.bounds.width()+c;break;case bf:y=-f.bounds.width()-c;break}ra.clear().union(d.bounds),ra.translate(y-(d.x||0),v-(d.y||0)),tw(d,"x",y)|tw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ra),d.mark.bounds.clear().union(ra),e.dirty(d)),ra.clear().union(d.bounds)}else ra.clear();switch(ra.union(f.bounds),a){case HE:m=_,g=i.y1-ra.height()-l;break;case mf:m=i.x1-ra.width()-l,g=_;break;case bf:m=i.x2+ra.width()+l,g=_;break;case sy:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return tw(s,"x",m)|tw(s,"y",g)&&(ra.translate(m,g),e.dirty(s),s.bounds.clear().union(ra),t.bounds.clear().union(ra),e.dirty(s)),s.bounds}function sze(e){Ae.call(this,null,e)}st(sze,Ae,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&wun(n,r,e.layout),$un(n,r,e)}),Run(e.mark.group)?t.reflow():t}});function Run(e){return e&&e.mark.role!=="legend-entry"}function $un(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case lne:h=mun(f)?a:u,h.union(yun(e,f,i,s));break;case cne:c=f;break;case fne:l.push(Aun(e,f));break;case oun:case aun:case H7e:case q7e:case W7e:case G7e:case Y7e:case K7e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||bf,d!==dne&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];ize(e,v,Cun(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===X7e||n.autosize.type===Q7e||n.autosize.type===J7e))switch(y.orient){case mf:case bf:o.add(v.x1,0).add(v.x2,0);break;case HE:case sy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(kun(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Nun(e,t,o,n)}function Nun(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===uun){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===dne?(l=0,f=0,u=o,c=a):s===X7e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Q7e?(u=Math.max(0,o-l-d),a=c+f+h):s===J7e?(o=u+l+d,c=Math.max(0,a-f-h)):s===cun&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Dun=Object.freeze(Object.defineProperty({__proto__:null,bound:Z7e,identifier:pne,mark:eze,overlap:tze,render:rze,viewlayout:sze},Symbol.toStringTag,{value:"Module"}));function oze(e){Ae.call(this,null,e)}st(oze,Ae,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Rte(s,o,e.minstep),u=e.format||$Be(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?RBe(s,e.values,a):$te(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Cr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Cr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aze(e){Ae.call(this,null,e)}function Mun(){return Cr({})}function Lun(e){const t=tS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}st(aze,Ae,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Mun,s=e.key||Ht,o=this.value;return De(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&$e("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Lun(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function uze(e){Ae.call(this,null,e)}st(uze,Ae,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(De(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||_g,u=i.enter||_g,l=i.exit||_g,c=(s&&!o?i[s]:a)||_g;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==_g&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==_g&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==_g){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function lze(e){Ae.call(this,[],e)}st(lze,Ae,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||E$,o=e.scale,a=+e.limit,u=Rte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===E$,c=e.format||LBe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||MBe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===E$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,An(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Aa(m=p||8),i=i.map((y,v)=>Cr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Cr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===csn?(d=o.domain(),h=OBe(o,d[0],tr(d)),f.length<3&&!e.values&&d[0]!==tr(d)&&(f=[d[0],tr(d)]),i=f.map((y,v)=>Cr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=wsn(o),i=f.map((y,v)=>Cr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Fun=e=>e.source.x,jun=e=>e.source.y,Bun=e=>e.target.x,zun=e=>e.target.y;function mne(e){Ae.call(this,{},e)}mne.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};st(mne,Ae,{transform(e,t){var n=e.sourceX||Fun,r=e.sourceY||jun,i=e.targetX||Bun,s=e.targetY||zun,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=D1e.get(u+"-"+a)||D1e.get(u);return l||$e("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const cze=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Uun=(e,t,n,r)=>cze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fze=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Vun=(e,t,n,r)=>fze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dze=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Hun=(e,t,n,r)=>dze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),qun=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,Wun=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Gun=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Yun=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Kun=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Xun=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},D1e=tS({line:cze,"line-radial":Uun,arc:fze,"arc-radial":Vun,curve:dze,"curve-radial":Hun,"orthogonal-horizontal":qun,"orthogonal-vertical":Wun,"orthogonal-radial":Gun,"diagonal-horizontal":Yun,"diagonal-vertical":Kun,"diagonal-radial":Xun});function gne(e){Ae.call(this,null,e)}gne.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};st(gne,Ae,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||Jx,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/VK(l),h=Ou(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Qun=5;function Jun(e){const t=e.type;return!e.bins&&(t===FE||t===vO||t===_O)}function hze(e){return Ote(e)&&e!==uh}const Zun=zf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pze(e){Ae.call(this,null,e),this.modified(!0)}st(pze,Ae,{transform(e,t){var n=t.dataflow,r=this.value,i=eln(e);(!r||i!==r.type)&&(this.value=r=vr(i)());for(i in e)if(!Zun[i]){if(i==="padding"&&hze(r.type))continue;An(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return oln(r,e,sln(r,e,nln(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function eln(e){var t=e.type,n="",r;return t===uh?uh+"-"+FE:(tln(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?uh+"-":r===3?sS+"-":""),(n+t||FE).toLowerCase())}function tln(e){const t=e.type;return Ote(t)&&t!==U1&&t!==V1&&(e.scheme||e.range&&e.range.length&&e.range.every(vt))}function nln(e,t,n){const r=rln(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Jun(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return hze(s)&&t.padding&&i[0]!==tr(i)&&(i=iln(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(mze(s,i,n)),s===Tte&&e.unknown(t.domainImplicit?qV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Rte(e,t.nice)||null),i.length}function rln(e,t,n){return t?(e.domain(mze(e.type,t,n)),t.length):-1}function iln(e,t,n,r,i,s){var o=Math.abs(tr(n)-n[0]),a=o/(o-2*r),u=e===Im?vee(t,null,a):e===_O?PL(t,null,a,.5):e===vO?PL(t,null,a,i||1):e===PF?_ee(t,null,a,s||1):yee(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function mze(e,t,n){if(SBe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function sln(e,t,n){let r=t.bins;if(r&&!De(r)){const i=e.domain(),s=i[0],o=tr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||$e("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Ou(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Cte&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function oln(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=aln(r,t,n);else if(t.scheme&&(s=uln(r,t,n),An(s))){if(e.interpolator)return e.interpolator(s);$e(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&TBe(r))return e.interpolator($F(eW(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Pte(t.interpolate,t.interpolateGamma)):An(e.round)?e.round(i):An(e.rangeRound)&&e.interpolate(i?$I:Fm),s&&e.range(eW(s,t.reverse))}function aln(e,t,n){e!==vBe&&e!==jq&&$e("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===jq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Ste(n,i,r)]}function uln(e,t,n){var r=t.schemeExtent,i,s;return De(t.scheme)?s=$F(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=kte(i),s||$e(`Unrecognized scheme name: ${t.scheme}`)),n=e===RF?n+1:e===Cte?n-1:e===jE||e===kF?+t.schemeCount||Qun:n,TBe(e)?M1e(s,r,t.reverse):An(s)?IBe(M1e(s,r),n):e===Tte?s:s.slice(0,n)}function M1e(e,t,n){return An(e)&&(t||n)?ABe(e,eW(t||[0,1],n)):e}function eW(e,t){return t?e.slice().reverse():e}function gze(e){Ae.call(this,null,e)}st(gze,Ae,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(T_(e.sort)),this.modified(n),t}});const L1e="zero",yze="center",vze="normalize",_ze=["y0","y1"];function yne(e){Ae.call(this,null,e)}yne.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:L1e,values:[L1e,yze,vze]},{name:"as",type:"string",array:!0,length:2,default:_ze}]};st(yne,Ae,{transform(e,t){var n=e.as||_ze,r=n[0],i=n[1],s=T_(e.sort),o=e.field||Jx,a=e.offset===yze?lln:e.offset===vze?cln:fln,u,l,c,f;for(u=dln(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function lln(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function cln(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function fln(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function dln(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const hln=Object.freeze(Object.defineProperty({__proto__:null,axisticks:oze,datajoin:aze,encode:uze,legendentries:lze,linkpath:mne,pie:gne,scale:pze,sortitems:gze,stack:yne},Symbol.toStringTag,{value:"Module"}));var pln=Math.abs,tW=Math.cos,GL=Math.sin,mln=1e-6,bze=Math.PI,nW=bze/2,F1e=gln(2);function j1e(e){return e>1?nW:e<-1?-nW:Math.asin(e)}function gln(e){return e>0?Math.sqrt(e):0}function yln(e,t){var n=e*GL(t),r=30,i;do t-=i=(t+GL(t)-n)/(1+tW(t));while(pln(i)>mln&&--r>0);return t/2}function vln(e,t,n){function r(i,s){return[e*i*tW(s=yln(n,s)),t*GL(s)]}return r.invert=function(i,s){return s=j1e(s/t),[i/(e*tW(s)),j1e((2*s+GL(2*s))/n)]},r}var _ln=vln(F1e/nW,F1e,bze);function bln(){return Bh(_ln).scale(169.529)}const wln=oNe(),rW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Eln(e,t){return function n(){const r=t();return r.type=e,r.path=oNe().projection(r),r.copy=r.copy||function(){const i=n();return rW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},EBe(r)}}function vne(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(YL[e]=Eln(e,t),this):YL[e]||null}function wze(e){return e&&e.path||wln}const YL={albers:uNe,albersusa:nRt,azimuthalequalarea:rRt,azimuthalequidistant:iRt,conicconformal:aRt,conicequalarea:tM,conicequidistant:cRt,equalEarth:dRt,equirectangular:uRt,gnomonic:hRt,identity:pRt,mercator:sRt,mollweide:bln,naturalEarth1:mRt,orthographic:gRt,stereographic:yRt,transversemercator:vRt};for(const e in YL)vne(e,YL[e]);function xln(){}const lp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Eze(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),Sln(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(Tln((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,lp[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,lp[m|g<<1].forEach(_);for(lp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,lp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,lp[m|g<<1|y<<2|v<<3].forEach(_);lp[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,lp[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,lp[y<<2|v<<3].forEach(_);lp[y<<3].forEach(_);function _(w){var S=[w[0][0]+h,w[0][1]+p],x=[w[1][0]+h,w[1][1]+p],b=o(S),T=o(x),A,I;(A=d[b])?(I=f[T])?(delete d[A.end],delete f[I.start],A===I?(A.ring.push(x),c(A.ring)):f[A.start]=d[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[A.end],A.ring.push(x),d[A.end=T]=A):(A=f[T])?(I=d[b])?(delete f[A.start],delete d[I.end],A===I?(A.ring.push(x),c(A.ring)):f[I.start]=d[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(S),f[A.start=b]=A):f[b]=d[T]={start:b,end:T,ring:[S,x]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||$e("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:xln,r):n===a},r}function Sln(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Tln(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Cln(e,t[n]))return i;return 0}function Cln(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Aln(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Aln(e,t,n){var r;return Iln(e,t,n)&&Oln(e[r=+(e[0]===t[0])],n[r],t[r])}function Iln(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Oln(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xze(e,t,n){return function(r){var i=Ph(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?M0(s,o,e):a/(e+1);return Ou(s+u,o,u)}}function _ne(e){Ae.call(this,null,e)}_ne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};st(_ne,Ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ca,s=Eze().smooth(e.smooth!==!1),o=e.thresholds||Pln(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,De(o)?o:o(c.values));kln(f,c,l,e),f.forEach(d=>{u.push(wF(l,Cr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Pln(e,t,n){const r=xze(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>yc(t(i).values)))}function kln(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(An(i)&&(i=i(n,r)),An(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(fr(i)?i:i[0])||1,a=(fr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(Sze(t,o,a,u,l))}function Sze(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function B1e(e,t,n){const r=e>=0?e:Fee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function S7(e){return An(e)?e:Aa(+e)}function Tze(){var e=u=>u[0],t=u=>u[1],n=Jx,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=B1e(r[0],u,e)>>o,f=B1e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const S=d+(+e(w)>>o),x=h+(+t(w)>>o);S>=0&&S<p&&x>=0&&x<m&&(g[S+x*p]+=+n(w))}),c>0&&f>0?(lb(p,m,g,y,c),cb(p,m,y,g,f),lb(p,m,g,y,c),cb(p,m,y,g,f),lb(p,m,g,y,c),cb(p,m,y,g,f)):c>0?(lb(p,m,g,y,c),lb(p,m,y,g,c),lb(p,m,g,y,c),v=y):f>0&&(cb(p,m,g,y,f),cb(p,m,y,g,f),cb(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/VK(v);for(let w=0,S=p*m;w<S;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=S7(u),a):e},a.y=function(u){return arguments.length?(t=S7(u),a):t},a.weight=function(u){return arguments.length?(n=S7(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||$e("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||$e("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=yt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&$e("invalid bandwidth"),r=u,a):r},a}function lb(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function cb(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function bne(e){Ae.call(this,null,e)}bne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Rln=["x","y","weight","size","cellSize","bandwidth"];function Cze(e,t){return Rln.forEach(n=>t[n]!=null?e[n](t[n]):0),e}st(bne,Ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=$ln(r,e.groupby),s=(e.groupby||[]).map(Zi),o=Cze(Tze(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Cr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function $ln(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function wne(e){Ae.call(this,null,e)}wne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};st(wne,Ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Eze().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||xze(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=Cze(Tze(),e)(i,!0),u=Sze(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=De(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Cr),n}});const iW="Feature",Ene="FeatureCollection",Nln="MultiPoint";function xne(e){Ae.call(this,null,e)}xne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};st(xne,Ae,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ca,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ya(a))||s&&t.modified(ya(s))||o&&t.modified(ya(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:iW,geometry:{type:Nln,coordinates:r}})),this.value={type:Ene,features:n}}});function Sne(e){Ae.call(this,null,e)}Sne.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};st(Sne,Ae,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ca,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=wze(e.projection),n.materialize().reflow()):o=i===Ca||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Dln(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Dln(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Tne(e){Ae.call(this,null,e)}Tne.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};st(Tne,Ae,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Cne(e){Ae.call(this,null,e)}Cne.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};st(Cne,Ae,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Mln(wze(e.projection),e.field||Tc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Mln(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Ane(e){Ae.call(this,[],e),this.generator=Dkt()}Ane.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};st(Ane,Ae,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)An(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(C9e(n[0],i)):t.add.push(Cr(i)),n[0]=i,t}});function Ine(e){Ae.call(this,null,e)}Ine.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};st(Ine,Ae,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ca,s=Fln(e.opacity,e),o=Lln(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?yc(n.map(l=>yc(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Cn({},l,u);r||(f.$max=yc(c.values||[])),l[a]=jln(c,f,o.dep?o:Aa(o(f)),s.dep?s:Aa(s(f)))}),t.reflow(!0).modifies(a)}});function Lln(e,t){let n;return An(e)?(n=r=>L0(e(r,t)),n.dep=Aze(e)):n=Aa(L0(e||"#888")),n}function Fln(e,t){let n;return An(e)?(n=r=>e(r,t),n.dep=Aze(e)):e?n=Aa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Aze(e){if(!An(e))return!1;const t=zf(ya(e));return t.$x||t.$y||t.$value||t.$max}function jln(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Fg,d=S0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Ize(e){Ae.call(this,null,e),this.modified(!0)}st(Ize,Ae,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=zln(e.type),rW.forEach(r=>{e[r]!=null&&z1e(n,r,e[r])})):rW.forEach(r=>{e.modified(r)&&z1e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Bln(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Bln(e,t){const n=Uln(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function zln(e){const t=vne((e||"mercator").toLowerCase());return t||$e("Unrecognized projection type: "+e),t()}function z1e(e,t,n){An(e[t])&&e[t](n)}function Uln(e){return e=yt(e),e.length===1?e[0]:{type:Ene,features:e.reduce((t,n)=>t.concat(Vln(n)),[])}}function Vln(e){return e.type===Ene?e.features:yt(e).filter(t=>t!=null).map(t=>t.type===iW?t:{type:iW,geometry:t})}const Hln=Object.freeze(Object.defineProperty({__proto__:null,contour:wne,geojson:xne,geopath:Sne,geopoint:Tne,geoshape:Cne,graticule:Ane,heatmap:Ine,isocontour:_ne,kde2d:bne,projection:Ize},Symbol.toStringTag,{value:"Module"})),U1e={center:TPt,collide:HPt,nbody:tkt,link:WPt,x:nkt,y:rkt},c2="forces",sW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],qln=["static","iterations"],Oze=["x","y","vx","vy"];function One(e){Ae.call(this,null,e)}One.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Oze}]};st(One,Ae,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(sW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Pze(n,e,0,t)):(this.value=n=Gln(t.source,e),n.on("tick",Wln(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(qln)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==c2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(Oze)}});function Wln(e,t){return()=>e.touch(t).run()}function Gln(e,t){const n=ekt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Pze(n,t,!0).on("end",()=>s=!0)}function Pze(e,t,n,r){var i=yt(t.forces),s,o,a,u;for(s=0,o=sW.length;s<o;++s)a=sW[s],a!==c2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=c2+s,a=n||t.modified(c2,s)?Kln(i[s]):r&&Yln(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(c2+s,null);return e.numForces=i.length,e}function Yln(e,t){var n,r;for(n in e)if(An(r=e[n])&&t.modified(ya(r)))return 1;return 0}function Kln(e){var t,n;Wt(U1e,e.force)||$e("Unrecognized force: "+e.force),t=U1e[e.force]();for(n in e)An(t[n])&&Xln(t[n],e[n],e);return t}function Xln(e,t,n){e(An(t)?r=>t(r,n):t)}const Qln=Object.freeze(Object.defineProperty({__proto__:null,force:One},Symbol.toStringTag,{value:"Module"}));function oW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Pne(e){Ae.call(this,null,e)}Pne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Jln=e=>e.values;st(Pne,Ae,{transform(e,t){t.source||$e("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&bF(o.data)&&i.rem.push(o.data)}),this.value=s=gX({values:yt(e.keys).reduce((o,a)=>(o.key(a),o),Zln()).entries(i.source)},Jln),n&&s.each(o=>{o.children&&(o=Cr(o.data),i.add.push(o),i.source.push(o))}),oW(s,Ht,Ht)),i.source.root=s,i}});function Zln(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Wm(e){Ae.call(this,null,e)}const ecn=(e,t)=>e.parent===t.parent?1:2;st(Wm,Ae,{transform(e,t){(!t.source||!t.source.root)&&$e(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(T_(e.sort,o=>o.data)),tcn(n,this.params,e),n.separation&&n.separation(e.separation!==!1?ecn:Jx);try{this.value=n(i)}catch(o){$e(o)}return i.each(o=>ncn(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function tcn(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function ncn(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const aW=["x","y","r","depth","children"];function kne(e){Wm.call(this,e)}kne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:aW.length,default:aW}]};st(kne,Wm,{layout:r$t,params:["radius","size","padding"],fields:aW});const uW=["x0","y0","x1","y1","depth","children"];function Rne(e){Wm.call(this,e)}Rne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uW.length,default:uW}]};st(Rne,Wm,{layout:i$t,params:["size","round","padding"],fields:uW});function $ne(e){Ae.call(this,null,e)}$ne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};st($ne,Ae,{transform(e,t){t.source||$e("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?oW(Upe().id(e.key).parentId(e.parentKey)(i.source),e.key,Cc):oW(Upe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const V1e={tidy:p$t,cluster:CRt},lW=["x","y","depth","children"];function Nne(e){Wm.call(this,e)}Nne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:lW.length,default:lW}]};st(Nne,Wm,{layout(e){const t=e||"tidy";if(Wt(V1e,t))return V1e[t]();$e("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:lW});function Dne(e){Ae.call(this,[],e)}Dne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};st(Dne,Ae,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||$e("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ht(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ht(a)]&&s[Ht(u)]&&i.add.push(Cr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ht(o)]=1),n.forEach(o=>{(s[Ht(o.source)]||s[Ht(o.target)])&&i.mod.push(o)})),i}});const H1e={binary:g$t,dice:LI,slice:J4,slicedice:y$t,squarify:CNe,resquarify:v$t},cW=["x0","y0","x1","y1","depth","children"];function Mne(e){Wm.call(this,e)}Mne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cW.length,default:cW}]};st(Mne,Wm,{layout(){const e=m$t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Wt(H1e,t)?e.tile(H1e[t]):$e("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:cW});const rcn=Object.freeze(Object.defineProperty({__proto__:null,nest:Pne,pack:kne,partition:Rne,stratify:$ne,tree:Nne,treelinks:Dne,treemap:Mne},Symbol.toStringTag,{value:"Module"})),T7=4278190080;function icn(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function scn(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=S0(s,o).getContext("2d"),l=S0(s,o).getContext("2d"),c=a&&S0(s,o).getContext("2d");n.forEach(T=>k$(u,T,!1)),k$(l,t,!1),a&&k$(c,t,!0);const f=C7(u,s,o),d=C7(l,s,o),h=a&&C7(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,S,x,b;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,S=f[w]&T7,b=d[w]&T7,x=a&&h[w]&T7,(S||x||b)&&(v=e(g),_=e(y),!i&&(S||b)&&p.set(v,_),a&&(S||x)&&m.set(v,_));return[p,m]}function C7(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function k$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>k$(e,s.items,n))}):Ll[r].draw(e,{items:n?t.map(ocn):t})}function ocn(e){const t=wF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const cp=5,Ra=31,BA=32,Og=new Uint32Array(BA+1),cf=new Uint32Array(BA+1);cf[0]=0;Og[0]=~cf[0];for(let e=1;e<=BA;++e)cf[e]=cf[e-1]<<1|1,Og[e]=~cf[e];function acn(e,t){const n=new Uint32Array(~~((e*t+BA)/BA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>cp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>cp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>cp,~(1<<(a&Ra)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>cp,h=f>>>cp,d===h){if(n[d]&Og[c&Ra]&cf[(f&Ra)+1])return!0}else{if(n[d]&Og[c&Ra]||n[h]&cf[(f&Ra)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>cp,d=c>>>cp,f===d)r(f,Og[l&Ra]&cf[(c&Ra)+1]);else for(r(f,Og[l&Ra]),r(d,cf[(c&Ra)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>cp,d=c>>>cp,f===d)i(f,cf[l&Ra]|Og[(c&Ra)+1]);else for(i(f,cf[l&Ra]),i(d,Og[(c&Ra)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function ucn(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>acn(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function lcn(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Cl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function KL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function e0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function ccn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!KL(p,m,d,h,i,s)&&!e0(e,p,m,h,d,g,o,a)&&!e0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,e0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Cl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,S,x,b,T,A,I,k,R,P,N,F,B,W,V;for(let G=0;G<f;++G){for(v=c[G].x,w=c[G].y,_=c[G].x2===void 0?v:c[G].x2,S=c[G].y2===void 0?w:c[G].y2,v>_&&(V=v,v=_,_=V),w>S&&(V=w,w=S,S=V),I=e(v),R=e(_),k=~~((I+R)/2),P=e(w),F=e(S),N=~~((P+F)/2),T=k;T>=I;--T)for(A=N;A>=P;--A)W=u(T,A,p,h,d),W&&([l.x,l.y,p,m]=W);for(T=k;T<=R;++T)for(A=N;A<=F;++A)W=u(T,A,p,h,d),W&&([l.x,l.y,p,m]=W);!m&&!n&&(B=Math.abs(_-v+S-w),x=(v+_)/2,b=(w+S)/2,B>=y&&!KL(x,b,h,d,i,s)&&!e0(e,x,b,d,h,d,o,null)&&(y=B,l.x=x,l.y=b,g=!0))}return m||g?(x=h/2,b=d/2,o.setRange(e(l.x-x),e(l.y-b),e(l.x+x),e(l.y+b)),l.align="center",l.baseline="middle",!0):!1}}const fcn=[-1,-1,1,1],dcn=[-1,1,-1,1];function hcn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Cl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,S,x,b,T,A,I,k,R,P,N;for(let F=0;F<f;++F){for(_=c[F].x,S=c[F].y,w=c[F].x2===void 0?_:c[F].x2,x=c[F].y2===void 0?S:c[F].y2,p.push([e((_+w)/2),e((S+x)/2)]);p.length;)if([A,I]=p.pop(),!(o.get(A,I)||a.get(A,I)||u.get(A,I))){u.set(A,I);for(let B=0;B<4;++B)b=A+fcn[B],T=I+dcn[B],u.outOfBounds(b,T,b,T)||p.push([b,T]);if(b=e.invert(A),T=e.invert(I),k=m,R=s,!KL(b,T,h,d,i,s)&&!e0(e,b,T,d,h,k,o,a)&&!e0(e,b,T,d,h,d,o,null)){for(;R-k>=1;)P=(k+R)/2,e0(e,b,T,d,h,P,o,a)?R=P:k=P;k>m&&(l.x=b,l.y=T,m=k,g=!0)}}!g&&!n&&(N=Math.abs(w-_+x-S),b=(_+w)/2,T=(S+x)/2,N>=v&&!KL(b,T,h,d,i,s)&&!e0(e,b,T,d,h,d,o,null)&&(v=N,l.x=b,l.y=T,y=!0))}return g||y?(b=h/2,T=d/2,o.setRange(e(l.x-b),e(l.y-T),e(l.x+b),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const pcn=["right","center","left"],mcn=["bottom","middle","top"];function gcn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,S,x,b,T,A,I,k;for(let R=0;R<u;++R){if(h=(n[R]&3)-1,p=(n[R]>>>2&3)-1,m=h===0&&p===0||r[R]<0,g=h&&p?Math.SQRT1_2:1,y=r[R]<0?-1:1,v=c[1+h]+r[R]*h*g,b=c[4+p]+y*f*p/2+r[R]*p*g,w=b-f/2,S=b+f/2,T=e(v),I=e(w),k=e(S),!d)if(q1e(T,T,I,k,o,a,v,v,w,S,c,m))d=Cl.width(l.datum,l.datum.text);else continue;if(x=v+y*d*h/2,v=x-d/2,_=x+d/2,T=e(v),A=e(_),q1e(T,A,I,k,o,a,v,_,w,S,c,m))return l.x=h?h*y<0?_:v:x,l.y=p?p*y<0?S:w:b,l.align=pcn[h*y+1],l.baseline=mcn[p*y+1],o.setRange(T,I,A,k),!0}return!1}}function q1e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const A7=0,I7=4,O7=8,P7=0,k7=1,R7=2,ycn={"top-left":A7+P7,top:A7+k7,"top-right":A7+R7,left:I7+P7,middle:I7+k7,right:I7+R7,"bottom-left":O7+P7,bottom:O7+k7,"bottom-right":O7+R7},vcn={naive:lcn,"reduced-search":ccn,floodfill:hcn};function _cn(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=bcn(r,f),h=wcn(i,f),p=Ecn(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=xcn(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,S=-1;const x=e.map(I=>{const k=v?Cl.width(I,I.text):void 0;return w=Math.max(w,k),S=Math.max(S,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:k}});l=l===null||l===1/0?Math.max(w,S)+Math.max(...r):l;const b=ucn(t[0],t[1],l);let T;if(!_){n&&x.sort((R,P)=>n(R.datum,P.datum));let I=!1;for(let R=0;R<h.length&&!I;++R)I=h[R]===5||d[R]<0;const k=(p&&o||g)&&e.map(R=>R.datum);T=s.length||k?scn(b,k||[],s,I,g):icn(b,o&&x)}const A=g?vcn[c](b,T,o,u):gcn(b,T,h,d);return x.forEach(I=>I.opacity=+A(I)),x}function bcn(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function wcn(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=ycn[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Ecn(e){return e&&e.mark&&e.mark.marktype}function xcn(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const fW=["x","y","opacity","align","baseline"],kze=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Lne(e){Ae.call(this,null,e)}Lne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:kze},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:fW.length,default:fW}]};st(Lne,Ae,{transform(e,t){function n(s){const o=e[s];return An(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&$e("Size parameter should be specified as a [width, height] array.");const i=e.as||fW;return _cn(t.materialize(t.SOURCE).source||[],e.size,e.sort,yt(e.offset==null?1:e.offset),yt(e.anchor||kze),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Scn=Object.freeze(Object.defineProperty({__proto__:null,label:Lne},Symbol.toStringTag,{value:"Module"}));function Rze(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Fne(e){Ae.call(this,null,e)}Fne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};st(Fne,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Rze(r,e.groupby),s=(e.groupby||[]).map(Zi),o=s.length,a=e.as||[Zi(e.x),Zi(e.y)],u=[];i.forEach(l=>{H9e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Cr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const dW={constant:Xee,linear:Qee,log:B9e,exp:z9e,pow:U9e,quad:Jee,poly:V9e},Tcn=(e,t)=>e==="poly"?t:e==="quad"?2:1;function jne(e){Ae.call(this,null,e)}jne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};st(jne,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Rze(r,e.groupby),s=(e.groupby||[]).map(Zi),o=e.method||"linear",a=e.order==null?3:e.order,u=Tcn(o,a),l=e.as||[Zi(e.x),Zi(e.y)],c=dW[o],f=[];let d=e.extent;Wt(dW,o)||$e("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Cr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Ph(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Cr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):IF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Ccn=Object.freeze(Object.defineProperty({__proto__:null,loess:Fne,regression:jne},Symbol.toStringTag,{value:"Module"}));function Bne(e){Ae.call(this,null,e)}Bne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Acn=[-1e5,-1e5,1e5,1e5];st(Bne,Ae,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Acn;const s=this.value=iX.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Ocn(u)?Icn(u):null}return t.reflow(e.modified()).modifies(n)}});function Icn(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Ocn(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Pcn=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Bne},Symbol.toStringTag,{value:"Module"}));var $7=Math.PI/180,f2=64,R$=2048;function kcn(){var e=[256,256],t,n,r,i,s,o,a,u=$ze,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(S0()),m=Lcn((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(x=>({text:t(x),font:n(x),style:i(x),weight:s(x),rotate:o(x),size:~~(r(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,b)=>b.size-x.size);++v<y;){var S=w[v];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,Rcn(p,S,w,v),S.hasText&&h(m,S,g)&&(_.push(S),g?Ncn(g,S):g=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(f2<<5)/m,p.height=R$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),S=c()<.5?1:-1,x=-S,b,T,A;(b=w(x+=S))&&(T=~~b[0],A=~~b[1],!(Math.min(Math.abs(T),Math.abs(A))>=_));)if(m.x=y+T,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!$cn(m,p,e[0]))&&(!g||Dcn(m,g))){for(var I=m.sprite,k=m.width>>5,R=e[0]>>5,P=m.x-(k<<4),N=P&127,F=32-N,B=m.y1-m.y0,W=(m.y+m.y0)*R+(P>>5),V,G=0;G<B;G++){V=0;for(var M=0;M<=k;M++)p[W+M]|=V<<F|(M<k?(V=I[G*k+M])>>>N:0);W+=R}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Yy(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Yy(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Yy(p),f):s},f.rotate=function(p){return arguments.length?(o=Yy(p),f):o},f.text=function(p){return arguments.length?(t=Yy(p),f):t},f.spiral=function(p){return arguments.length?(u=Fcn[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Yy(p),f):r},f.padding=function(p){return arguments.length?(a=Yy(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Rcn(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(f2<<5)/s,R$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*$7),g=Math.cos(t.rotate*$7),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=f2<<5&&(o=0,a+=u,u=0),a+d>=R$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*$7),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var S=i.getImageData(0,0,(f2<<5)/s,R$/s).data,x=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)x[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var b=0,T=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),I=S[(a+p)*(f2<<5)+(o+h)<<2]?1<<31-h%32:0;x[A]|=I,b|=I}b?T=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+T,t.sprite=x.slice(0,(t.y1-t.y0)*f)}}}function $cn(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Ncn(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Dcn(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function $ze(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Mcn(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Lcn(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Yy(e){return typeof e=="function"?e:function(){return e}}var Fcn={archimedean:$ze,rectangular:Mcn};const Nze=["x","y","font","fontSize","fontStyle","fontWeight","angle"],jcn=["text","font","rotate","fontSize","fontStyle","fontWeight"];function zne(e){Ae.call(this,kcn(),e)}zne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Nze}]};st(zne,Ae,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&$e("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return An(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||jcn.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||Nze;let a=e.fontSize||14,u;if(An(a)?u=e.fontSizeRange:a=Aa(a),u){const p=a,m=vr("sqrt")().domain(Ph(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ic).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Bcn=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:zne},Symbol.toStringTag,{value:"Module"})),zcn=e=>new Uint8Array(e),Ucn=e=>new Uint16Array(e),lC=e=>new Uint32Array(e);function Vcn(){let e=8,t=[],n=lC(0),r=Kk(0,e),i=Kk(0,e);return{data:()=>t,seen:()=>n=Hcn(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=Kk(s,e,r),i=Kk(s,e))}}}function Hcn(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Kk(e,t,n){const r=(t<257?zcn:t<65537?Ucn:lC)(e);return n&&r.set(n),r}function W1e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function G1e(){let e=lC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=lC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=qcn(h,d),c)p=t,m=e,t=Array(c+f),e=lC(c+f),Wcn(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[q2t(u,a[0],0,l),D0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function qcn(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Y2t(e,t)}function Wcn(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Une(e){Ae.call(this,Vcn(),e),this._indices=null,this._dims=null}Une.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};st(Une,Ae,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=G1e()),s.push(W1e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,S,x,b;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,S=0,x=v.length;S<x;++S)w[v[S]._index]=1;for(S=0;S<h;++S)b=r[S],(!o[S]||e.modified("fields",S)||t.modified(b.fields))&&(y=b.fname,(m=p[y])||(s[y]=g=G1e(),p[y]=m=g.insert(b,t.source,0)),o[S]=W1e(g,S,i[S]).onAdd(m,u));for(S=0,x=a.data().length;S<x;++S)_[S]||(l[S]!==u[S]?f.push(S):w[S]&&u[S]!==c&&d.push(S));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Vne(e){Ae.call(this,null,e)}Vne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};st(Vne,Ae,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Gcn=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Une,resolvefilter:Vne},Symbol.toStringTag,{value:"Module"})),Ycn="RawCode",q1="Literal",Kcn="Property",Xcn="Identifier",Qcn="ArrayExpression",Jcn="BinaryExpression",Dze="CallExpression",Zcn="ConditionalExpression",efn="LogicalExpression",tfn="MemberExpression",nfn="ObjectExpression",rfn="UnaryExpression";function Qf(e){this.type=e}Qf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=ifn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function ifn(e){switch(e.type){case Qcn:return e.elements;case Jcn:case efn:return[e.left,e.right];case Dze:return[e.callee].concat(e.arguments);case Zcn:return[e.test,e.consequent,e.alternate];case tfn:return[e.object,e.property];case nfn:return e.properties;case Kcn:return[e.key,e.value];case rfn:return[e.argument];case Xcn:case q1:case Ycn:default:return[]}}var Gh,Dt,ke,_a,Fr,WF=1,kO=2,W1=3,Py=4,GF=5,I_=6,_u=7,RO=8,sfn=9;Gh={};Gh[WF]="Boolean";Gh[kO]="<end>";Gh[W1]="Identifier";Gh[Py]="Keyword";Gh[GF]="Null";Gh[I_]="Numeric";Gh[_u]="Punctuator";Gh[RO]="String";Gh[sfn]="RegularExpression";var ofn="ArrayExpression",afn="BinaryExpression",ufn="CallExpression",lfn="ConditionalExpression",Mze="Identifier",cfn="Literal",ffn="LogicalExpression",dfn="MemberExpression",hfn="ObjectExpression",pfn="Property",mfn="UnaryExpression",oo="Unexpected token %0",gfn="Unexpected number",yfn="Unexpected string",vfn="Unexpected identifier",_fn="Unexpected reserved word",bfn="Unexpected end of input",hW="Invalid regular expression",N7="Invalid regular expression: missing /",Lze="Octal literals are not allowed in strict mode.",wfn="Duplicate data property in object literal not allowed in strict mode",ko="ILLEGAL",zA="Disabled.",Efn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),xfn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function YF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ep(e){return e>=48&&e<=57}function Hne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function cC(e){return"01234567".indexOf(e)>=0}function Sfn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function UA(e){return e===10||e===13||e===8232||e===8233}function $O(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Efn.test(String.fromCharCode(e))}function XL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&xfn.test(String.fromCharCode(e))}const Tfn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Fze(){for(;ke<_a;){const e=Dt.charCodeAt(ke);if(Sfn(e)||UA(e))++ke;else break}}function pW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ke<_a&&Hne(Dt[ke])?(r=Dt[ke++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):mr({},oo,ko);return String.fromCharCode(i)}function Cfn(){var e,t,n,r;for(e=Dt[ke],t=0,e==="}"&&mr({},oo,ko);ke<_a&&(e=Dt[ke++],!!Hne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&mr({},oo,ko),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function jze(){var e,t;for(e=Dt.charCodeAt(ke++),t=String.fromCharCode(e),e===92&&(Dt.charCodeAt(ke)!==117&&mr({},oo,ko),++ke,e=pW("u"),(!e||e==="\\"||!$O(e.charCodeAt(0)))&&mr({},oo,ko),t=e);ke<_a&&(e=Dt.charCodeAt(ke),!!XL(e));)++ke,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Dt.charCodeAt(ke)!==117&&mr({},oo,ko),++ke,e=pW("u"),(!e||e==="\\"||!XL(e.charCodeAt(0)))&&mr({},oo,ko),t+=e);return t}function Afn(){var e,t;for(e=ke++;ke<_a;){if(t=Dt.charCodeAt(ke),t===92)return ke=e,jze();if(XL(t))++ke;else break}return Dt.slice(e,ke)}function Ifn(){var e,t,n;return e=ke,t=Dt.charCodeAt(ke)===92?jze():Afn(),t.length===1?n=W1:Tfn.hasOwnProperty(t)?n=Py:t==="null"?n=GF:t==="true"||t==="false"?n=WF:n=W1,{type:n,value:t,start:e,end:ke}}function D7(){var e=ke,t=Dt.charCodeAt(ke),n,r=Dt[ke],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ke,{type:_u,value:String.fromCharCode(t),start:e,end:ke};default:if(n=Dt.charCodeAt(ke+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ke+=2,{type:_u,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ke};case 33:case 61:return ke+=2,Dt.charCodeAt(ke)===61&&++ke,{type:_u,value:Dt.slice(e,ke),start:e,end:ke}}}if(o=Dt.substr(ke,4),o===">>>=")return ke+=4,{type:_u,value:o,start:e,end:ke};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ke+=3,{type:_u,value:s,start:e,end:ke};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return ke+=2,{type:_u,value:i,start:e,end:ke};if(i==="//"&&mr({},oo,ko),"<>=!+-*%&|^/".indexOf(r)>=0)return++ke,{type:_u,value:r,start:e,end:ke};mr({},oo,ko)}function Ofn(e){let t="";for(;ke<_a&&Hne(Dt[ke]);)t+=Dt[ke++];return t.length===0&&mr({},oo,ko),$O(Dt.charCodeAt(ke))&&mr({},oo,ko),{type:I_,value:parseInt("0x"+t,16),start:e,end:ke}}function Pfn(e){let t="0"+Dt[ke++];for(;ke<_a&&cC(Dt[ke]);)t+=Dt[ke++];return($O(Dt.charCodeAt(ke))||Ep(Dt.charCodeAt(ke)))&&mr({},oo,ko),{type:I_,value:parseInt(t,8),octal:!0,start:e,end:ke}}function Y1e(){var e,t,n;if(n=Dt[ke],YF(Ep(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ke,e="",n!=="."){if(e=Dt[ke++],n=Dt[ke],e==="0"){if(n==="x"||n==="X")return++ke,Ofn(t);if(cC(n))return Pfn(t);n&&Ep(n.charCodeAt(0))&&mr({},oo,ko)}for(;Ep(Dt.charCodeAt(ke));)e+=Dt[ke++];n=Dt[ke]}if(n==="."){for(e+=Dt[ke++];Ep(Dt.charCodeAt(ke));)e+=Dt[ke++];n=Dt[ke]}if(n==="e"||n==="E")if(e+=Dt[ke++],n=Dt[ke],(n==="+"||n==="-")&&(e+=Dt[ke++]),Ep(Dt.charCodeAt(ke)))for(;Ep(Dt.charCodeAt(ke));)e+=Dt[ke++];else mr({},oo,ko);return $O(Dt.charCodeAt(ke))&&mr({},oo,ko),{type:I_,value:parseFloat(e),start:t,end:ke}}function kfn(){var e="",t,n,r,i,s=!1;for(t=Dt[ke],YF(t==="'"||t==='"',"String literal must starts with a quote"),n=ke,++ke;ke<_a;)if(r=Dt[ke++],r===t){t="";break}else if(r==="\\")if(r=Dt[ke++],!r||!UA(r.charCodeAt(0)))switch(r){case"u":case"x":Dt[ke]==="{"?(++ke,e+=Cfn()):e+=pW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:cC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ke<_a&&cC(Dt[ke])&&(s=!0,i=i*8+"01234567".indexOf(Dt[ke++]),"0123".indexOf(r)>=0&&ke<_a&&cC(Dt[ke])&&(i=i*8+"01234567".indexOf(Dt[ke++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Dt[ke]===`
`&&++ke;else{if(UA(r.charCodeAt(0)))break;e+=r}return t!==""&&mr({},oo,ko),{type:RO,value:e,octal:s,start:n,end:ke}}function Rfn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";mr({},hW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{mr({},hW)}try{return new RegExp(e,t)}catch{return null}}function $fn(){var e,t,n,r,i;for(e=Dt[ke],YF(e==="/","Regular expression literal must start with a slash"),t=Dt[ke++],n=!1,r=!1;ke<_a;)if(e=Dt[ke++],t+=e,e==="\\")e=Dt[ke++],UA(e.charCodeAt(0))&&mr({},N7),t+=e;else if(UA(e.charCodeAt(0)))mr({},N7);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||mr({},N7),i=t.substr(1,t.length-2),{value:i,literal:t}}function Nfn(){var e,t,n;for(t="",n="";ke<_a&&(e=Dt[ke],!!XL(e.charCodeAt(0)));)++ke,e==="\\"&&ke<_a?mr({},oo,ko):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&mr({},hW,n),{value:n,literal:t}}function Dfn(){var e,t,n,r;return Fr=null,Fze(),e=ke,t=$fn(),n=Nfn(),r=Rfn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ke}}function Mfn(e){return e.type===W1||e.type===Py||e.type===WF||e.type===GF}function Bze(){if(Fze(),ke>=_a)return{type:kO,start:ke,end:ke};const e=Dt.charCodeAt(ke);return $O(e)?Ifn():e===40||e===41||e===59?D7():e===39||e===34?kfn():e===46?Ep(Dt.charCodeAt(ke+1))?Y1e():D7():Ep(e)?Y1e():D7()}function Au(){const e=Fr;return ke=e.end,Fr=Bze(),ke=e.end,e}function zze(){const e=ke;Fr=Bze(),ke=e}function Lfn(e){const t=new Qf(ofn);return t.elements=e,t}function K1e(e,t,n){const r=new Qf(e==="||"||e==="&&"?ffn:afn);return r.operator=e,r.left=t,r.right=n,r}function Ffn(e,t){const n=new Qf(ufn);return n.callee=e,n.arguments=t,n}function jfn(e,t,n){const r=new Qf(lfn);return r.test=e,r.consequent=t,r.alternate=n,r}function qne(e){const t=new Qf(Mze);return t.name=e,t}function d2(e){const t=new Qf(cfn);return t.value=e.value,t.raw=Dt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function X1e(e,t,n){const r=new Qf(dfn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Bfn(e){const t=new Qf(hfn);return t.properties=e,t}function Q1e(e,t,n){const r=new Qf(pfn);return r.key=t,r.value=n,r.kind=e,r}function zfn(e,t){const n=new Qf(mfn);return n.operator=e,n.argument=t,n.prefix=!0,n}function mr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(YF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ke,n.description=i,n}function KF(e){e.type===kO&&mr(e,bfn),e.type===I_&&mr(e,gfn),e.type===RO&&mr(e,yfn),e.type===W1&&mr(e,vfn),e.type===Py&&mr(e,_fn),mr(e,oo,e.value)}function ba(e){const t=Au();(t.type!==_u||t.value!==e)&&KF(t)}function wi(e){return Fr.type===_u&&Fr.value===e}function M7(e){return Fr.type===Py&&Fr.value===e}function Ufn(){const e=[];for(ke=Fr.start,ba("[");!wi("]");)wi(",")?(Au(),e.push(null)):(e.push(G1()),wi("]")||ba(","));return Au(),Lfn(e)}function J1e(){ke=Fr.start;const e=Au();return e.type===RO||e.type===I_?(e.octal&&mr(e,Lze),d2(e)):qne(e.value)}function Vfn(){var e,t,n,r;if(ke=Fr.start,e=Fr,e.type===W1)return n=J1e(),ba(":"),r=G1(),Q1e("init",n,r);if(e.type===kO||e.type===_u)KF(e);else return t=J1e(),ba(":"),r=G1(),Q1e("init",t,r)}function Hfn(){var e=[],t,n,r,i={},s=String;for(ke=Fr.start,ba("{");!wi("}");)t=Vfn(),t.key.type===Mze?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?mr({},wfn):i[r]=!0,e.push(t),wi("}")||ba(",");return ba("}"),Bfn(e)}function qfn(){ba("(");const e=Wne();return ba(")"),e}const Wfn={if:1};function Gfn(){var e,t,n;if(wi("("))return qfn();if(wi("["))return Ufn();if(wi("{"))return Hfn();if(e=Fr.type,ke=Fr.start,e===W1||Wfn[Fr.value])n=qne(Au().value);else if(e===RO||e===I_)Fr.octal&&mr(Fr,Lze),n=d2(Au());else{if(e===Py)throw new Error(zA);e===WF?(t=Au(),t.value=t.value==="true",n=d2(t)):e===GF?(t=Au(),t.value=null,n=d2(t)):wi("/")||wi("/=")?(n=d2(Dfn()),zze()):KF(Au())}return n}function Yfn(){const e=[];if(ba("("),!wi(")"))for(;ke<_a&&(e.push(G1()),!wi(")"));)ba(",");return ba(")"),e}function Kfn(){ke=Fr.start;const e=Au();return Mfn(e)||KF(e),qne(e.value)}function Xfn(){return ba("."),Kfn()}function Qfn(){ba("[");const e=Wne();return ba("]"),e}function Jfn(){var e,t,n;for(e=Gfn();;)if(wi("."))n=Xfn(),e=X1e(".",e,n);else if(wi("("))t=Yfn(),e=Ffn(e,t);else if(wi("["))n=Qfn(),e=X1e("[",e,n);else break;return e}function Z1e(){const e=Jfn();if(Fr.type===_u&&(wi("++")||wi("--")))throw new Error(zA);return e}function $$(){var e,t;if(Fr.type!==_u&&Fr.type!==Py)t=Z1e();else{if(wi("++")||wi("--"))throw new Error(zA);if(wi("+")||wi("-")||wi("~")||wi("!"))e=Au(),t=$$(),t=zfn(e.value,t);else{if(M7("delete")||M7("void")||M7("typeof"))throw new Error(zA);t=Z1e()}}return t}function e_e(e){let t=0;if(e.type!==_u&&e.type!==Py)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Zfn(){var e,t,n,r,i,s,o,a,u,l;if(e=Fr,u=$$(),r=Fr,i=e_e(r),i===0)return u;for(r.prec=i,Au(),t=[e,Fr],o=$$(),s=[u,r,o];(i=e_e(Fr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=K1e(a,u,o),s.push(n);r=Au(),r.prec=i,s.push(r),t.push(Fr),n=$$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=K1e(s[l-1].value,s[l-2],n),l-=2;return n}function G1(){var e,t,n;return e=Zfn(),wi("?")&&(Au(),t=G1(),ba(":"),n=G1(),e=jfn(e,t,n)),e}function Wne(){const e=G1();if(wi(","))throw new Error(zA);return e}function Gne(e){Dt=e,ke=0,_a=Dt.length,Fr=null,zze();const t=Wne();if(Fr.type!==kO)throw new Error("Unexpect token after expression.");return t}var Uze={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Vze(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&$e("Missing arguments to clamp function."),o.length>3&&$e("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&$e("Missing arguments to if function."),o.length>3&&$e("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function edn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Hze(e){e=e||{};const t=e.allowed?zf(e.allowed):{},n=e.forbidden?zf(e.forbidden):{},r=e.constants||Uze,i=(e.functions||Vze)(f),s=e.globalvar,o=e.fieldvar,a=An(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(vt(p))return p;const m=d[p.type];return m==null&&$e("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Wt(n,m)?$e("Illegal identifier: "+m):Wt(r,m)?r[m]:Wt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[edn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&$e("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Wt(i,m)&&i[m];return y||$e("Unrecognized function: "+m),An(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const t_e=Symbol("vega_selection_getter");function qze(e){return(!e.getter||!e.getter[t_e])&&(e.getter=Tc(e.field),e.getter[t_e]=!0),e.getter}const Yne="intersect",n_e="union",tdn="vlMulti",ndn="vlPoint",r_e="or",rdn="and",Ad="_vgsid_",VA=Tc(Ad),idn="E",sdn="R",odn="R-E",adn="R-LE",udn="R-RE",QL="index:unit";function i_e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=qze(a)(e),E0(o)&&(o=pa(o)),E0(r[s])&&(r[s]=pa(r[s])),De(r[s])&&E0(r[s][0])&&(r[s]=r[s].map(pa)),a.type===idn){if(De(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===sdn){if(!Zb(o,r[s]))return!1}else if(a.type===udn){if(!Zb(o,r[s],!0,!1))return!1}else if(a.type===odn){if(!Zb(o,r[s],!1,!1))return!1}else if(a.type===adn&&!Zb(o,r[s],!1,!0))return!1;return!0}function ldn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[QL]&&r[QL].value:void 0,o=n===Yne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=i_e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=i_e(t,l),o^h)return h;return a&&o}const Wze=xx(VA),cdn=Wze.left,fdn=Wze.right;function ddn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[QL]&&r[QL].value:void 0,o=n===Yne,a=VA(t),u=cdn(i,a);if(u===i.length||VA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(fdn(i,a)-u<s.size)return!1}return!0}function hdn(e,t){return e.map(n=>Cn(t.fields?{values:t.fields.map(r=>qze(r)(n.datum))}:{[Ad]:VA(n.datum)},t))}function pdn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,w=0,S,x;w<_;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(S=0,x=c.length;S<x;++S)h=c[S],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=L7[`${y}_union`],m[d]=v(g,yt(f[S]));n&&(g=a[d]||(a[d]=[]),g.push(yt(f).reduce((b,T,A)=>(b[c[A].field]=T,b),{})))}else h=Ad,p=VA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Ad]:p}));if(t=t||n_e,o[Ad]?o[Ad]=L7[`${Ad}_${t}`](...Object.values(o[Ad])):Object.keys(o).forEach(b=>{o[b]=Object.keys(o[b]).map(T=>o[b][T]).reduce((T,A)=>T===void 0?A:L7[`${u[b]}_${t}`](T,A))}),s=Object.keys(a),n&&s.length){const b=r?ndn:tdn;o[b]=t===n_e?{[r_e]:s.reduce((T,A)=>(T.push(...a[A]),T),[])}:{[rdn]:s.map(T=>({[r_e]:a[T]}))}}return o}var L7={[`${Ad}_union`]:nCt,[`${Ad}_intersect`]:eCt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=pa(t[0]),r=pa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=pa(t[0]),r=pa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const mdn=":",gdn="@";function Kne(e,t,n,r){t[0].type!==q1&&$e("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&tr(t).value,o="unit",a=gdn+o,u=mdn+i;s===Yne&&!Wt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Wt(r,u)||(r[u]=n.getData(i).tuplesRef())}function Gze(e){const t=this.context.data[e];return t?t.values.value:[]}function ydn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function vdn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Cc).insert(t)),1}function _dn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const NO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},bdn=NO("format"),Yze=NO("timeFormat"),wdn=NO("utcFormat"),Edn=NO("timeParse"),xdn=NO("utcParse"),Xk=new Date(2e3,0,1);function XF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Xk.setYear(2e3),Xk.setMonth(e),Xk.setDate(t),Yze.call(this,Xk,n))}function Sdn(e){return XF.call(this,e,1,"%B")}function Tdn(e){return XF.call(this,e,1,"%b")}function Cdn(e){return XF.call(this,0,2+e,"%A")}function Adn(e){return XF.call(this,0,2+e,"%a")}const Idn=":",Odn="@",mW="%",Kze="$";function Xne(e,t,n,r){t[0].type!==q1&&$e("First argument to data functions must be a string literal.");const i=t[0].value,s=Idn+i;if(!Wt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Pdn(e,t,n,r){t[0].type!==q1&&$e("First argument to indata must be a string literal."),t[1].type!==q1&&$e("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Odn+s;Wt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ga(e,t,n,r){if(t[0].type===q1)s_e(n,r,t[0].value);else for(e in n.scales)s_e(n,r,e)}function s_e(e,t,n){const r=mW+n;if(!Wt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Yh(e,t){if(An(e))return e;if(vt(e)){const n=t.scales[e];return n&&nsn(n.value)?n.value:void 0}}function kdn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ga,n._range=Ga,n._scale=Ga;const r=i=>"_["+(i.type===q1?nt(mW+i.value):nt(mW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Qne(e,t){return function(n,r,i){if(n){const s=Yh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Rdn=Qne("area",pkt),$dn=Qne("bounds",vkt),Ndn=Qne("centroid",Skt);function Ddn(e,t){const n=Yh(e,(t||this).context);return n&&n.scale()}function Mdn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Jne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Ldn(){return Jne(this.context.dataflow,"warn",arguments)}function Fdn(){return Jne(this.context.dataflow,"info",arguments)}function jdn(){return Jne(this.context.dataflow,"debug",arguments)}function F7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gW(e){const t=L0(e),n=F7(t.r),r=F7(t.g),i=F7(t.b);return .2126*n+.7152*r+.0722*i}function Bdn(e,t){const n=gW(e),r=gW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function zdn(){const e=[].slice.call(arguments);return e.unshift({}),Cn(...e)}function Xze(e,t){return e===t||e!==e&&t!==t?!0:De(e)?De(t)&&e.length===t.length?Udn(e,t):!1:_t(e)&&_t(t)?Qze(e,t):!1}function Udn(e,t){for(let n=0,r=e.length;n<r;++n)if(!Xze(e[n],t[n]))return!1;return!0}function Qze(e,t){for(const n in e)if(!Xze(e[n],t[n]))return!1;return!0}function o_e(e){return t=>Qze(e,t)}function Vdn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Cc:De(n)||bF(n)?n:o_e(n),c.remove(f)),t&&c.insert(t),r&&(f=o_e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Hdn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function qdn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const a_e={};function Wdn(e,t){const n=a_e[t]||(a_e[t]=Tc(t));return De(e)?e.map(n):n(e)}function Zne(e){return De(e)||ArrayBuffer.isView(e)?e:null}function ere(e){return Zne(e)||(vt(e)?e:null)}function Gdn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zne(e).join(...n)}function Ydn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ere(e).indexOf(...n)}function Kdn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ere(e).lastIndexOf(...n)}function Xdn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ere(e).slice(...n)}function Qdn(e,t,n){return An(n)&&$e("Function argument passed to replace."),String(e).replace(t,n)}function Jdn(e){return Zne(e).slice().reverse()}function Zdn(e,t,n){return Ste(e||0,t||0,n||0)}function ehn(e,t){const n=Yh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function thn(e,t){const n=Yh(e,(t||this).context);return n?n.copy():void 0}function nhn(e,t){const n=Yh(e,(t||this).context);return n?n.domain():[]}function rhn(e,t,n){const r=Yh(e,(n||this).context);return r?De(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function ihn(e,t){const n=Yh(e,(t||this).context);return n&&n.range?n.range():[]}function shn(e,t,n){const r=Yh(e,(n||this).context);return r?r(t):void 0}function ohn(e,t,n,r,i){e=Yh(e,(i||this).context);const s=zBe(t,n);let o=e.domain(),a=o[0],u=tr(o),l=Ca;return u-a?l=OBe(e,a,u):e=(e.interpolator?vr("sequential")().interpolator(e.interpolator()):vr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==tr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function ahn(e,t,n){const r=Yh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function uhn(e){let t=null;return function(n){return n?LA(n,t=t||zE(e)):e}}const Jze=e=>e.data;function Zze(e,t){const n=Gze.call(t,e);return n.root&&n.root.lookup||{}}function lhn(e,t,n){const r=Zze(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(Jze):void 0}function chn(e,t){const n=Zze(e,this)[t];return n?n.ancestors().map(Jze):void 0}const eUe=()=>typeof window<"u"&&window||null;function fhn(){const e=eUe();return e?e.screen:{}}function dhn(){const e=eUe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function hhn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function tUe(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return F7e(o,s,phn(t))}function phn(e){let t=null;if(e){const n=yt(e.marktype),r=yt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function mhn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=yt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function ghn(e){return yt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function yhn(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),tUe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>vhn(u.x,u.y,t))}function vhn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const HA={random(){return Ic()},cumulativeNormal:TF,cumulativeLogNormal:Hee,cumulativeUniform:Yee,densityNormal:jee,densityLogNormal:Vee,densityUniform:Gee,quantileNormal:CF,quantileLogNormal:qee,quantileUniform:Kee,sampleNormal:SF,sampleLogNormal:Uee,sampleUniform:Wee,isArray:De,isBoolean:Oy,isDate:E0,isDefined(e){return e!==void 0},isNumber:fr,isObject:_t,isRegExp:jje,isString:vt,isTuple:bF,isValid(e){return e!=null&&e===e},toBoolean:xee,toDate(e){return See(e)},toNumber:pa,toString:Tee,indexof:Ydn,join:Gdn,lastindexof:Kdn,replace:Qdn,reverse:Jdn,slice:Xdn,flush:Lje,lerp:Bje,merge:zdn,pad:Vje,peek:tr,pluck:Wdn,span:pO,inrange:Zb,truncate:Hje,rgb:L0,lab:I3,hcl:O3,hsl:WC,luminance:gW,contrast:Bdn,sequence:Ou,format:bdn,utcFormat:wdn,utcParse:xdn,utcOffset:i9e,utcSequence:a9e,timeFormat:Yze,timeParse:Edn,timeOffset:r9e,timeSequence:o9e,timeUnitSpecifier:Wje,monthFormat:Sdn,monthAbbrevFormat:Tdn,dayFormat:Cdn,dayAbbrevFormat:Adn,quarter:$je,utcquarter:Nje,week:Yje,utcweek:Qje,dayofyear:Gje,utcdayofyear:Xje,warn:Ldn,info:Fdn,debug:jdn,extent(e){return Ph(e)},inScope:Mdn,intersect:tUe,clampRange:Dje,pinchDistance:Hdn,pinchAngle:qdn,screen:fhn,containerSize:hhn,windowSize:dhn,bandspace:Zdn,setdata:vdn,pathShape:uhn,panLinear:Oje,panLog:Pje,panPow:kje,panSymlog:Rje,zoomLinear:yee,zoomLog:vee,zoomPow:PL,zoomSymlog:_ee,encode:_dn,modify:Vdn,lassoAppend:mhn,lassoPath:ghn,intersectLasso:yhn},_hn=["view","item","group","xy","x","y"],bhn="event.vega.",nUe="this.",tre={},rUe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(Kze+e)}]`,functions:whn,constants:Uze,visitors:tre},yW=Hze(rUe);function whn(e){const t=Vze(e);_hn.forEach(n=>t[n]=bhn+n);for(const n in HA)t[n]=nUe+n;return Cn(t,kdn(e,HA,tre)),t}function hs(e,t,n){return arguments.length===1?HA[e]:(HA[e]=t,n&&(tre[e]=n),yW&&(yW.functions[e]=nUe+e),this)}hs("bandwidth",ehn,Ga);hs("copy",thn,Ga);hs("domain",nhn,Ga);hs("range",ihn,Ga);hs("invert",rhn,Ga);hs("scale",shn,Ga);hs("gradient",ohn,Ga);hs("geoArea",Rdn,Ga);hs("geoBounds",$dn,Ga);hs("geoCentroid",Ndn,Ga);hs("geoShape",ahn,Ga);hs("geoScale",Ddn,Ga);hs("indata",ydn,Pdn);hs("data",Gze,Xne);hs("treePath",lhn,Xne);hs("treeAncestors",chn,Xne);hs("vlSelectionTest",ldn,Kne);hs("vlSelectionIdTest",ddn,Kne);hs("vlSelectionResolve",pdn,Kne);hs("vlSelectionTuples",hdn);function Rh(e,t){const n={};let r;try{e=vt(e)?e:nt(e)+"",r=Gne(e)}catch{$e("Expression parse error: "+e)}r.visit(s=>{if(s.type!==Dze)return;const o=s.callee.name,a=rUe.visitors[o];a&&a(o,s.arguments,t,n)});const i=yW(r);return i.globals.forEach(s=>{const o=Kze+s;!Wt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Cn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Ehn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const xhn=zf(["rule"]),u_e=zf(["group","image","rect"]);function Shn(e,t){let n="";return xhn[t]||(e.x2&&(e.x?(u_e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(u_e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function nre(e){return(e+"").toLowerCase()}function Thn(e){return nre(e)==="operator"}function Chn(e){return nre(e)==="collect"}function mT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Ahn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Ihn={operator:(e,t)=>mT(e,["_"],t.code),parameter:(e,t)=>mT(e,["datum","_"],t.code),event:(e,t)=>mT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return mT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Shn(r,n),i+="return m;",mT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Ahn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Ohn(e){const t=this;Thn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Phn(e){const t=this;if(e.params){const n=t.get(e.id);n||$e("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function khn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=De(i)?i.map(s=>l_e(s,n,t)):l_e(i,n,t)}return t}function l_e(e,t,n){if(!e||!_t(e))return e;for(let r=0,i=c_e.length,s;r<i;++r)if(s=c_e[r],Wt(e,s.key))return s.parse(e,t,n);return e}var c_e=[{key:"$ref",parse:Rhn},{key:"$key",parse:Nhn},{key:"$expr",parse:$hn},{key:"$field",parse:Dhn},{key:"$encode",parse:Lhn},{key:"$compare",parse:Mhn},{key:"$context",parse:Fhn},{key:"$subflow",parse:jhn},{key:"$tupleid",parse:Bhn}];function Rhn(e,t){return t.get(e.$ref)||$e("Operator not defined: "+e.$ref)}function $hn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Zu(t.parameterExpression(e.$expr),e.$fields))}function Nhn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Eee(e.$key,e.$flat,t.expr.codegen))}function Dhn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Tc(e.$field,e.$name,t.expr.codegen))}function Mhn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=yt(e.$compare).map(i=>i&&i.$tupleid?Ht:i);return t.fn[n]||(t.fn[n]=bee(r,e.$order,t.expr.codegen))}function Lhn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Zu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Fhn(e,t){return t}function jhn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Bhn(){return Ht}function zhn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&$e("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Uhn(e){var t=this,n=_t(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||$e("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Vhn={skip:!0};function Hhn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function qhn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Vhn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Cc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function iUe(e,t,n,r){return new sUe(e,t,n,r)}function sUe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Ihn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function f_e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}sUe.prototype=f_e.prototype={fork(){const e=new f_e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Chn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[nre(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Ehn,parseOperator:Ohn,parseOperatorParameters:Phn,parseParameters:khn,parseStream:zhn,parseUpdate:Uhn,getState:Hhn,setState:qhn};function Whn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),oUe(t,e.description()))}function oUe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Ghn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const j7="default";function Yhn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:j7,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?vt(i)?i:i.user:j7,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return vt(r)||(i=r.item,r=r.user),vW(e,r&&r!==j7?r:i||r),i},{cursor:t})}function vW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function JL(e,t){var n=e._runtime.data;return Wt(n,t)||$e("Unrecognized data set: "+t),n[t]}function Khn(e,t){return arguments.length<2?JL(this,e).values.value:QF.call(this,e,C_().remove(Cc).insert(t))}function QF(e,t){A9e(t)||$e("Second argument to changes must be a changeset.");const n=JL(this,e);return n.modified=!0,this.pulse(n.input,t)}function Xhn(e,t){return QF.call(this,e,C_().insert(t))}function Qhn(e,t){return QF.call(this,e,C_().remove(t))}function aUe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function uUe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function JF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Jhn(e){var t=JF(e),n=aUe(e),r=uUe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function Zhn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=JF(e),o=t.changedTouches?t.changedTouches[0]:t,s=VF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=epn(e,n,s),t}function epn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;vt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Aa(e),item:Aa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const d_e="view",tpn="timer",npn="window",rpn={trap:!1};function ipn(e){const t=Cn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{De(r[s])&&(r[s]=zf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function lUe(e,t,n,r){e._eventListeners.push({type:n,sources:yt(t),handler:r})}function spn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function Qk(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||_t(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function opn(e,t,n){var r=this,i=new xF(n),s=function(l,c){r.runAsync(null,()=>{e===d_e&&spn(r,t)&&l.preventDefault(),i.receive(Zhn(r,l,c))})},o;if(e===tpn)Qk(r,"timer",t)&&r.timer(s,t);else if(e===d_e)Qk(r,"view",t)&&r.addEventListener(t,s,rpn);else if(e===npn?Qk(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&Qk(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);lUe(r,o,t,s)}return i}function h_e(e){return e.item}function p_e(e){return e.item.mark.source}function m_e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function apn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",h_e),p_e,m_e(e)),this.on(this.events("view","pointerout",h_e),p_e,m_e(t)),this}function upn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Al(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const lpn="vega-bind",cpn="vega-bind-name",fpn="vega-bind-radio";function dpn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=wee(r.debounce,i.update))),(r.input==null&&r.element?hpn:mpn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function hpn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),lUe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(ppn(i))}}function ppn(e){return typeof Event<"u"?new Event(e):{type:e}}function mpn(e,t,n,r){const i=r.signal(n.signal),s=Al("div",{class:lpn}),o=n.input==="radio"?s:s.appendChild(Al("label"));o.appendChild(Al("span",{class:cpn},n.name||n.signal)),t.appendChild(s);let a=gpn;switch(n.input){case"checkbox":a=ypn;break;case"select":a=vpn;break;case"radio":a=_pn;break;case"range":a=bpn;break}a(e,o,n,i)}function gpn(e,t,n,r){const i=Al("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function ypn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Al("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function vpn(e,t,n,r){const i=Al("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};ZL(o,r)&&(u.selected=!0),i.appendChild(Al("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(ZL(n.options[a],o)){i.selectedIndex=a;return}}}function _pn(e,t,n,r){const i=Al("span",{class:fpn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};ZL(o,r)&&(u.checked=!0);const l=Al("input",u);l.addEventListener("change",()=>e.update(o));const c=Al("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)ZL(a[l].value,o)&&(a[l].checked=!0)}}function bpn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||M0(s,i,100),a=Al("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Al("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function ZL(e,t){return e===t||e+""==t+""}function cUe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,aUe(e),uUe(e),JF(e),i,s).background(e.background())}function rre(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function wpn(e,t,n,r){const i=new r(e.loader(),rre(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,JF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Epn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=HF(r);e=n._el=e?B7(n,e,!0):null,Whn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||PO,a=e?s.renderer:s.headless;return n._renderer=a?cUe(n,n._renderer,e,a):null,n._handler=wpn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=B7(n,t,!0):e.appendChild(Al("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=B7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{dpn(n,u.element||t,u)})),n}function B7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const gT=e=>+e||0,xpn=e=>({top:e,bottom:e,left:e,right:e});function g_e(e){return _t(e)?{top:gT(e.top),bottom:gT(e.bottom),left:gT(e.left),right:gT(e.right)}:xpn(gT(e))}async function ire(e,t,n,r){const i=HF(t),s=i&&i.headless;return s||$e("Unrecognized renderer type: "+t),await e.runAsync(),cUe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Spn(e,t){e!==Qg.Canvas&&e!==Qg.SVG&&e!==Qg.PNG&&$e("Unrecognized image type: "+e);const n=await ire(this,e,t);return e===Qg.SVG?Tpn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Tpn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Cpn(e,t){return(await ire(this,Qg.Canvas,e,t)).canvas()}async function Apn(e){return(await ire(this,Qg.SVG,e)).svg()}function Ipn(e,t,n){return iUe(e,LE,HA,n).parse(t)}function Opn(e){var t=this._runtime.scales;return Wt(t,e)||$e("Unrecognized scale or projection: "+e),t[e].value}var fUe="width",dUe="height",sre="padding",y_e={skip:!0};function hUe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===sre?r.left+r.right:0)}function pUe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===sre?r.top+r.bottom:0)}function Ppn(e){var t=e._signals,n=t[fUe],r=t[dUe],i=t[sre];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=hUe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=pUe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function kpn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(fUe,n,y_e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(dUe,r,y_e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Rpn(e){return this._runtime.getState(e||{data:$pn,signals:Npn,recurse:!0})}function $pn(e,t){return t.modified&&De(t.input.value)&&!e.startsWith("_:vega:_")}function Npn(e,t){return!(e==="parent"||t instanceof LE.proxy)}function Dpn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Mpn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(IIt(n,t))}function Lpn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Fpn(r))}function Fpn(e){return e==null?"":De(e)?mUe(e):_t(e)&&!E0(e)?jpn(e):e+""}function jpn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(De(n)?mUe(n):gUe(n))}).join(`
`)}function mUe(e){return"["+e.map(gUe).join(", ")+"]"}function gUe(e){return De(e)?"[]":_t(e)&&!E0(e)?"{}":e}function Bpn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function yUe(e,t){const n=this;if(t=t||{},Nw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Cn({},e.locale,t.locale);n.locale(y9e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Qg.Canvas,n._scenegraph=new f7e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Lpn,n._redraw=!0,n._handler=new PO().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ipn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Ipn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Cn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=hUe(n,n._width),n._viewHeight=pUe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Ppn(n),Ghn(n),Yhn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Jk(e,t){return Wt(e._signals,t)?e._signals[t]:$e("Unrecognized signal name: "+nt(t))}function vUe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function v_e(e,t,n,r){let i=vUe(n,r);return i||(i=rre(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function __e(e,t,n){const r=vUe(t,n);return r&&t._targets.remove(r),e}st(yUe,Nw,{async evaluate(e,t,n){if(await Nw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Jhn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&b$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&oUe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=Jk(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",g_e(e)):g_e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(HF(e)||$e("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Nw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Jk(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:kpn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=rre(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return v_e(this,e,Jk(this,e),t)},removeSignalListener(e,t){return __e(this,Jk(this,e),t)},addDataListener(e,t){return v_e(this,e,JL(this,e).values,t)},removeDataListener(e,t){return __e(this,JL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=vW(this,null);this._globalCursor=!!e,t&&vW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Mpn,events:opn,finalize:upn,hover:apn,data:Khn,change:QF,insert:Xhn,remove:Qhn,scale:Opn,initialize:Epn,toImageURL:Spn,toCanvas:Cpn,toSVG:Apn,getState:Rpn,setState:Dpn,_watchPixelRatio:Bpn});const zpn="view",e6="[",t6="]",_Ue="{",bUe="}",Upn=":",wUe=",",Vpn="@",Hpn=">",qpn=/[[\]{}]/,Wpn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let EUe,xUe;function ky(e,t,n){return EUe=t||zpn,xUe=n||Wpn,SUe(e.trim()).map(_W)}function Gpn(e){return xUe[e]}function fC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function SUe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=fC(e,i,wUe,e6+_Ue,t6+bUe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function _W(e){return e[0]==="["?Ypn(e):Kpn(e)}function Ypn(e){const t=e.length;let n=1,r;if(n=fC(e,n,t6,e6,t6),n===t)throw"Empty between selector: "+e;if(r=SUe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Hpn)throw"Expected '>' after between selector: "+e;r=r.map(_W);const i=_W(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Kpn(e){const t={source:EUe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===bUe){if(a=e.lastIndexOf(_Ue),a>=0){try{r=Xpn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Vpn&&(i=++a),u=fC(e,a,Upn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=fC(e,a,e6),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=fC(e,a,t6),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==e6)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||qpn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Gpn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Xpn(e){const t=e.split(wUe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Qpn(e){return _t(e)?e:{type:e||"pad"}}const yT=e=>+e||0,Jpn=e=>({top:e,bottom:e,left:e,right:e});function Zpn(e){return _t(e)?e.signal?e:{top:yT(e.top),bottom:yT(e.bottom),left:yT(e.left),right:yT(e.right)}:Jpn(yT(e))}const ao=e=>_t(e)&&!De(e)?Cn({},e):{value:e};function b_e(e,t,n,r){return n!=null?(_t(n)&&!De(n)||De(n)&&n.length&&_t(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function jo(e,t,n){for(const r in t)b_e(e,r,t[r]);for(const r in n)b_e(e,r,n[r],"update")}function aS(e,t,n){for(const r in t)n&&Wt(n,r)||(e[r]=Cn(e[r]||{},t[r]));return e}function Ib(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const ore="mark",are="frame",ure="scope",emn="axis",tmn="axis-domain",nmn="axis-grid",rmn="axis-label",imn="axis-tick",smn="axis-title",omn="legend",amn="legend-band",umn="legend-entry",lmn="legend-gradient",TUe="legend-label",cmn="legend-symbol",fmn="legend-title",dmn="title",hmn="title-text",pmn="title-subtitle";function mmn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Ib(u,e)&&z7(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===are?i.group:n===ore?Cn({},i.mark,i[t]):null;for(u in c)l=Ib(u,e)||(u==="fill"||u==="stroke")&&(Ib("fill",e)||Ib("stroke",e)),l||z7(s,u,c[u]);yt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Ib(h,e)||z7(s,h,d[h])}),e=Cn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Cn(o,e.enter),a&&(e.update=Cn(a,e.update)),e}function z7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const CUe=e=>vt(e)?nt(e):e.signal?`(${e.signal})`:AUe(e);function ZF(e){if(e.gradient!=null)return ymn(e);let t=e.signal?`(${e.signal})`:e.color?gmn(e.color):e.field!=null?AUe(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=vmn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${N$(e.exponent)})`),e.mult!=null&&(t+=`*${N$(e.mult)}`),e.offset!=null&&(t+=`+${N$(e.offset)}`),e.round&&(t=`round(${t})`),t}const Zk=(e,t,n,r)=>`(${e}(${[t,n,r].map(ZF).join(",")})+'')`;function gmn(e){return e.c?Zk("hcl",e.h,e.c,e.l):e.h||e.s?Zk("hsl",e.h,e.s,e.l):e.l||e.a?Zk("lab",e.l,e.a,e.b):e.r||e.g||e.b?Zk("rgb",e.r,e.g,e.b):null}function ymn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&tr(t)==null;)t.pop();return t.unshift(CUe(e.gradient)),`gradient(${t.join(",")})`}function N$(e){return _t(e)?"("+ZF(e)+")":e}function AUe(e){return IUe(_t(e)?e:{datum:e})}function IUe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):$e("Invalid field reference: "+nt(e));return e.signal||(r=vt(r)?qh(r).map(nt).join("]["):IUe(r)),t+"["+r+"]"}function vmn(e,t){const n=CUe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+N$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function _mn(e){let t="";return e.forEach(n=>{const r=ZF(n);t+=n.test?`(${n.test})?${r}:`:r}),tr(t)===":"&&(t+="null"),t}function OUe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=mmn(e,t,n,r,i.config);for(const a in e)o[a]=bmn(e[a],t,s,i);return s}function bmn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Emn(wmn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function wmn(e){return De(e)?_mn(e):ZF(e)}function Emn(e,t,n,r){const i=Rh(e,t);return i.$fields.forEach(s=>r[s]=1),Cn(n,i.$params),i.$expr}const xmn="outer",Smn=["value","update","init","react","bind"];function w_e(e,t){$e(e+' for "outer" push: '+nt(t))}function PUe(e,t){const n=e.name;if(e.push===xmn)t.signals[n]||w_e("No prior signal definition",n),Smn.forEach(r=>{e[r]!==void 0&&w_e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function bW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function e8(e,t,n,r){return new bW(e,t,n,r)}function n6(e,t){return e8("operator",e,t)}function Vt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function qA(e,t){return t?{$field:e,$name:t}:{$field:e}}const wW=qA("key");function E_e(e,t){return{$compare:e,$order:t}}function Tmn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Cmn="ascending",Amn="descending";function Imn(e){return _t(e)?(e.order===Amn?"-":"+")+t8(e.op,e.field):""}function t8(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const lre="scope",EW="view";function Vs(e){return e&&e.signal}function Omn(e){return e&&e.expr}function D$(e){if(Vs(e))return!0;if(_t(e)){for(const t in e)if(D$(e[t]))return!0}return!1}function af(e,t){return e??t}function d1(e){return e&&e.signal||e}const x_e="timer";function WA(e,t){return(e.merge?kmn:e.stream?Rmn:e.type?$mn:$e("Invalid stream specification: "+nt(e)))(e,t)}function Pmn(e){return e===lre?EW:e||EW}function kmn(e,t){const n=e.merge.map(i=>WA(i,t)),r=cre({merge:n},e,t);return t.addStream(r).id}function Rmn(e,t){const n=WA(e.stream,t),r=cre({stream:n},e,t);return t.addStream(r).id}function $mn(e,t){let n;e.type===x_e?(n=t.event(x_e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Pmn(e.source),e.type);const r=cre({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function cre(e,t,n){let r=t.between;return r&&(r.length!==2&&$e('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[WA(r[0],n),WA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Nmn(t.marktype,t.markname,t.markrole)),t.source===lre&&r.push("inScope(event.item)"),r.length&&(e.filter=Rh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Nmn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Dmn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Mmn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||$e("Signal update missing events specification."),vt(s)&&(s=ky(s,t.isSubscope()?lre:EW)),s=yt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Fmn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&$e("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=vt(o)?Rh(o,t):o.expr!=null?Rh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Dmn,$params:{$value:t.signalRef(o.signal)}}:$e("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Cn(Lmn(u,t),i)))}function Lmn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):WA(e,t)}}function Fmn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function jmn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?$e("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Rh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Mmn(i,t,n.id))}const Jr=e=>(t,n,r)=>e8(e,n,t||void 0,r),kUe=Jr("aggregate"),Bmn=Jr("axisticks"),RUe=Jr("bound"),Jf=Jr("collect"),S_e=Jr("compare"),zmn=Jr("datajoin"),$Ue=Jr("encode"),Umn=Jr("expression"),Vmn=Jr("facet"),Hmn=Jr("field"),qmn=Jr("key"),Wmn=Jr("legendentries"),Gmn=Jr("load"),Ymn=Jr("mark"),Kmn=Jr("multiextent"),Xmn=Jr("multivalues"),Qmn=Jr("overlap"),Jmn=Jr("params"),NUe=Jr("prefacet"),Zmn=Jr("projection"),egn=Jr("proxy"),tgn=Jr("relay"),DUe=Jr("render"),ngn=Jr("scale"),O_=Jr("sieve"),rgn=Jr("sortitems"),MUe=Jr("viewlayout"),ign=Jr("values");let sgn=0;const LUe={min:"min",max:"max",count:"sum"};function ogn(e,t){const n=e.type||"linear";xBe(n)||$e("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function agn(e,t){const n=t.getScale(e.name).params;let r;n.domain=FUe(e.domain,e,t),e.range!=null&&(n.range=BUe(e,t,n)),e.interpolate!=null&&ygn(e.interpolate,n),e.nice!=null&&(n.nice=ggn(e.nice,t)),e.bins!=null&&(n.bins=mgn(e.bins,t));for(r in e)Wt(n,r)||r==="name"||(n[r]=dc(e[r],t))}function dc(e,t){return _t(e)?e.signal?t.signalRef(e.signal):$e("Unsupported object: "+nt(e)):e}function M$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>dc(n,t))}function n8(e){$e("Can not find data set: "+nt(e))}function FUe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&$e("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(De(e)?ugn:e.fields?cgn:lgn)(e,t,n)}function ugn(e,t,n){return e.map(r=>dc(r,n))}function lgn(e,t,n){const r=n.getData(e.data);return r||n8(e.data),BE(t.type)?r.valuesRef(n,e.field,jUe(e.sort,!1)):CBe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function cgn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=vt(o)?{data:r,field:o}:De(o)||o.signal?fgn(o,n):o,s.push(o),s),[]);return(BE(t.type)?dgn:CBe(t.type)?hgn:pgn)(e,n,i)}function fgn(e,t){const n="_:vega:_"+sgn++,r=Jf({});if(De(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,O_({})]),{data:n,field:"data"}}function dgn(e,t,n){const r=jUe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||n8(l.data),c.countsRef(t,l.field,r)}),a={groupby:wW,pulse:o};r&&(i=r.op||"count",s=r.field?t8(i,r.field):"count",a.ops=[LUe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(kUe(a));const u=t.add(Jf({pulse:Vt(i)}));return s=t.add(ign({field:wW,sort:t.sortRef(r),pulse:Vt(u)})),Vt(s)}function jUe(e,t){return e&&(!e.field&&!e.op?_t(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?$e("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!LUe[e.op]&&$e("Multiple domain scales can not be sorted using "+e.op)),e}function hgn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||n8(i.data),s.domainRef(t,i.field)});return Vt(t.add(Xmn({values:r})))}function pgn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||n8(i.data),s.extentRef(t,i.field)});return Vt(t.add(Kmn({extents:r})))}function mgn(e,t){return e.signal||De(e)?M$(e,t):t.objectProperty(e)}function ggn(e,t){return e.signal?t.signalRef(e.signal):_t(e)?{interval:dc(e.interval),step:dc(e.step)}:dc(e)}function ygn(e,t){t.interpolate=dc(e.type||e),e.gamma!=null&&(t.interpolateGamma=dc(e.gamma))}function BUe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(vt(i)){if(r&&Wt(r,i))return e=Cn({},e,{range:r[i]}),BUe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=BE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:$e("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=De(i.scheme)?M$(i.scheme,t):dc(i.scheme,t),i.extent&&(n.schemeExtent=M$(i.extent,t)),i.count&&(n.schemeCount=dc(i.count,t));return}else if(i.step){n.rangeStep=dc(i.step,t);return}else{if(BE(e.type)&&!De(i))return FUe(i,e,t);De(i)||$e("Unsupported range type: "+nt(i))}return i.map(s=>(De(s)?M$:dc)(s,t))}function vgn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=xW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=xW(n[i],i,t));t.addProjection(e.name,r)}function xW(e,t,n){return De(e)?e.map(r=>xW(r,t,n)):_t(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:$e("Unsupported parameter object: "+nt(e)):e}const Zf="top",uS="left",lS="right",oy="bottom",zUe="center",_gn="vertical",bgn="start",wgn="middle",Egn="end",SW="index",fre="label",xgn="offset",qE="perc",Sgn="perc2",vc="value",DO="guide-label",dre="guide-title",Tgn="group-title",Cgn="group-subtitle",T_e="symbol",L$="gradient",TW="discrete",CW="size",Agn="shape",Ign="fill",Ogn="stroke",Pgn="strokeWidth",kgn="strokeDash",Rgn="opacity",hre=[CW,Agn,Ign,Ogn,Pgn,kgn,Rgn],MO={name:1,style:1,interactive:1},or={value:0},_c={value:1},r8="group",UUe="rect",pre="rule",$gn="symbol",P_="text";function GA(e){return e.type=r8,e.interactive=e.interactive||!1,e}function el(e,t){const n=(r,i)=>af(e[r],af(t[r],i));return n.isVertical=r=>_gn===af(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>af(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>af(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>af(e.columns,af(t.columns,+n.isVertical(!0))),n}function VUe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Ngn(e,t,n){const r=t.config.style[n];return r&&r[e]}function i8(e,t,n){return`item.anchor === '${bgn}' ? ${e} : item.anchor === '${Egn}' ? ${t} : ${n}`}const mre=i8(nt(uS),nt(lS),nt(zUe));function Dgn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},_t(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function HUe(e,t){return t?e?_t(e)?Object.assign({},e,{offset:HUe(e.offset,t)}):{value:e,offset:t}:t:e}function Fl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=aS(e.encode,t,MO)):e.interactive=!1,e}function Mgn(e,t,n,r){const i=el(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:or,x:or,y:or,width:ao(f),height:ao(d)},update:Cn({},u,{opacity:_c,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:or}};return jo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Fl({type:UUe,role:lmn,encode:h},r)}function Lgn(e,t,n,r,i){const s=el(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:or,fill:{scale:t,field:vc}};p[l]={signal:h+"datum."+qE,mult:u},p[c]=or,p[f]={signal:h+"datum."+Sgn,mult:u},p[d]=ao(a);const m={enter:p,update:Cn({},p,{opacity:_c}),exit:{opacity:or}};return jo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Fl({type:UUe,role:amn,key:vc,from:i,encode:m},r)}const Fgn=`datum.${qE}<=0?"${uS}":datum.${qE}>=1?"${lS}":"${zUe}"`,jgn=`datum.${qE}<=0?"${oy}":datum.${qE}>=1?"${Zf}":"${wgn}"`;function C_e(e,t,n,r){const i=el(e,t),s=i.isVertical(),o=ao(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:or},update:c={opacity:_c,text:{field:fre}},exit:{opacity:or}};return jo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:af(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:jgn},f="y",d="x",h="1-"):(l.align=c.align={signal:Fgn},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+qE,mult:a},l[d]=c[d]=o,o.offset=af(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+SW}:void 0,Fl({type:P_,role:TUe,style:DO,key:vc,from:r,encode:p,overlap:u},n)}function Bgn(e,t,n,r,i){const s=el(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${xgn} : datum.${CW}`,h=l?ao(l):{field:CW},p=`datum.${SW}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:or,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:_c,x:y.x,y:y.y},exit:{opacity:or}};let S=null,x=null;e.fill||(S=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),jo(g,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",x),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),hre.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:vc})});const b=Fl({type:$gn,role:cmn,key:vc,from:f,clip:l?!0:void 0,encode:g},n.symbols),T=ao(c);T.offset=s("labelOffset"),g={enter:y={opacity:or,x:{signal:d,offset:T},y:h},update:v={opacity:_c,text:{field:fre},x:y.x,y:y.y},exit:{opacity:or}},jo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Fl({type:P_,role:TUe,style:DO,key:vc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:or,height:l?ao(l):or,opacity:or},exit:{opacity:or},update:v={opacity:_c,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:SW}},GA({role:ure,from:r,encode:aS(g,o,MO),marks:[b,A],name:u,interactive:a,sort:w})}function zgn(e,t){const n=el(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const gre='item.orient === "left"',yre='item.orient === "right"',s8=`(${gre} || ${yre})`,Ugn=`datum.vgrad && ${s8}`,Vgn=i8('"top"','"bottom"','"middle"'),Hgn=i8('"right"','"left"','"center"'),qgn=`datum.vgrad && ${yre} ? (${Hgn}) : (${s8} && !(datum.vgrad && ${gre})) ? "left" : ${mre}`,Wgn=`item._anchor || (${s8} ? "middle" : "start")`,Ggn=`${Ugn} ? (${gre} ? -90 : 90) : 0`,Ygn=`${s8} ? (datum.vgrad ? (${yre} ? "bottom" : "top") : ${Vgn}) : "top"`;function Kgn(e,t,n,r){const i=el(e,t),s={enter:{opacity:or},update:{opacity:_c,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:or}};return jo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Wgn},angle:{signal:Ggn},align:{signal:qgn},baseline:{signal:Ygn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Fl({type:P_,role:fmn,style:dre,from:r,encode:s},n)}function Xgn(e,t){let n;return _t(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+A_e(e.path)+")":e.sphere&&(n="geoShape("+A_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function A_e(e){return _t(e)&&e.signal?e.signal:nt(e)}function qUe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===r8?ure:t||ore}function Qgn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||qUe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Jgn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function vre(e,t){const n=P9e(e.type);n||$e("Unrecognized transform type: "+nt(e.type));const r=e8(n.type.toLowerCase(),null,WUe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function WUe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=Zgn(o,t,n)}return r}function Zgn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return e0n(e,t,n);if(i===void 0){e.required&&$e("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return t0n(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vs(i)?i.map(s=>I_e(e,s,n)):I_e(e,i,n)}function I_e(e,t,n){const r=e.type;if(Vs(t))return P_e(r)?$e("Expression references can not be signals."):U7(r)?n.fieldRef(t):k_e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||U7(r);return i&&n0n(t)?n.exprRef(t.expr,t.as):i&&r0n(t)?qA(t.field,t.as):P_e(r)?Rh(t,n):i0n(r)?Vt(n.getData(t).values):U7(r)?qA(t):k_e(r)?n.compareRef(t):t}}function e0n(e,t,n){return vt(t.from)||$e('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function t0n(e,t,n){const r=t[e.name];return e.array?(De(r)||$e("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>O_e(e,i,n))):O_e(e,r,n)}function O_e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||$e("Unsupported parameter: "+nt(t));const s=Cn(WUe(i,t,n),i.key);return Vt(n.add(Jmn(s)))}const n0n=e=>e&&e.expr,r0n=e=>e&&e.field,i0n=e=>e==="data",P_e=e=>e==="expr",U7=e=>e==="field",k_e=e=>e==="compare";function s0n(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||$e("Only group marks can be faceted."),r.field!=null?o=a=F$(r,n):(e.data?a=Vt(n.getData(e.data).aggregate):(s=vre(Cn({type:"aggregate",groupby:yt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=F$(r,n),o=a=Vt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Vt(n.add(Jf(null,[{}]))),o||(o=F$(e,n)),{key:i,pulse:o,parent:a}}function F$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Vt(t.getData(e.data).output)}function Y1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Y1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Vt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Y1(e,s,i,r,o)};function GUe(e){return vt(e)?e:null}function R_e(e,t,n){const r=t8(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function vT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Imn(s);let l=GUe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:wW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Vt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(e8(r,void 0,d)),o&&(t.index[i]=f),c=Vt(f),l!=null&&(a[l]=c)}return c}Y1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=GUe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&R_e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Vt(r.output)},n&&n.field&&R_e(e,u,n),a=e.add(kUe(u)),o=e.add(Jf({pulse:Vt(a)})),o={agg:a,ref:Vt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Vt(this.values)},extentRef(e,t){return vT(e,this,"extent","extent",t,!1)},domainRef(e,t){return vT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return vT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return vT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return vT(e,this,"indata","tupleindex",t,!0,!0)}};function o0n(e,t,n){const r=e.from.facet,i=r.name,s=F$(r,t);let o;r.name||$e("Facet must have a name: "+nt(r)),r.data||$e("Facet must reference a data set: "+nt(r)),r.field?o=t.add(NUe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Vmn({key:t.keyRef(r.groupby),group:Vt(t.proxy(n.parent)),pulse:s})):$e("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(Jf()),l=a.add(O_({pulse:Vt(u)}));a.addData(i,new Y1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function a0n(e,t,n){const r=t.add(NUe({pulse:n.pulse})),i=t.fork();i.add(O_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function YUe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(n6()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Rh(l,t);u.update=c.$expr,u.params=c.$params}function o8(e,t){const n=qUe(e),r=e.type===r8,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ure||n===are,a,u,l,c,f,d,h;const p=n===ore||o||i,m=s0n(e.from,r,t);u=t.add(zmn({key:m.key||(e.key?qA(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Vt(u);u=l=t.add(Jf({pulse:g})),u=t.add(Ymn({markdef:Qgn(e),interactive:Jgn(e.interactive,t),clip:Xgn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Vt(u)}));const y=Vt(u);u=c=t.add($Ue(OUe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const b=vre(x,t),T=b.metadata;(T.generates||T.changes)&&$e("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),b.params.pulse=Vt(u),t.add(u=b)}),e.sort&&(u=t.add(rgn({sort:t.compareRef(e.sort),pulse:Vt(u)})));const v=Vt(u);(i||o)&&(o=t.add(MUe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Vt(o));const _=t.add(RUe({mark:y,pulse:d||v}));h=Vt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?o0n(e,t,m):p?a0n(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=u0n(s,h,t));const w=t.add(DUe({pulse:h})),S=t.add(O_({pulse:Vt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Y1(t,l,w,S)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&$e("Marks only support modify triggers."),YUe(x,t,f)}))}function u0n(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vs(s)?n.signalRef(s.signal):s,method:Vs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Vt(n.add(Qmn(o)))}function l0n(e,t){const n=t.config.legend,r=e.encode||{},i=el(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;hre.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||$e("Missing valid scale for legend.");const p=c0n(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Vt(t.add(Jf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Vt(t.add(Wmn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===L$?(h=[Mgn(e,c,n,r.gradient),C_e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${d1(i.gradientLength())})/100))`)):p===TW?h=[Lgn(e,c,n,r.gradient,v),C_e(e,n,r.labels,v)]:(f=zgn(e,n),h=[Bgn(e,n,r,v,d1(f.columns))],d.size=h0n(e,t,h[0].marks)),h=[GA({role:umn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(Kgn(e,n,r.title,g)),o8(GA({role:omn,from:g,encode:aS(d0n(i,e,n),s,MO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function c0n(e,t){let n=e.type||T_e;return!e.type&&f0n(e)===1&&(e.fill||e.stroke)&&(n=Ote(t)?L$:Bq(t)?TW:T_e),n!==L$?n:Bq(t)?TW:L$}function f0n(e){return hre.reduce((t,n)=>t+(e[n]?1:0),0)}function d0n(e,t,n){const r={enter:{},update:{}};return jo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function h0n(e,t,n){const r=d1($_e("size",e,n)),i=d1($_e("strokeWidth",e,n)),s=d1(p0n(n[1].encode,t,DO));return Rh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function $_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:VUe(e,n[0].encode)}function p0n(e,t,n){return VUe("fontSize",e)||Ngn("fontSize",t,n)}const m0n=`item.orient==="${uS}"?-90:item.orient==="${lS}"?90:0`;function g0n(e,t){e=vt(e)?{text:e}:e;const n=el(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Vt(t.add(Jf(null,[l])));return u.push(_0n(e,n,y0n(e),c)),e.subtitle&&u.push(b0n(e,n,r.subtitle,c)),o8(GA({role:dmn,from:c,encode:v0n(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function y0n(e){const t=e.encode;return t&&t.title||Cn({name:e.name,interactive:e.interactive,style:e.style},t)}function v0n(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:mre},angle:{signal:m0n},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),aS(n,t,MO)}function _0n(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Fl({type:P_,role:hmn,style:Tgn,from:r,encode:o},n)}function b0n(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Fl({type:P_,role:pmn,style:Cgn,from:r,encode:o},n)}function w0n(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(vre(r,t))}),e.on&&e.on.forEach(r=>{YUe(r,t,e.name)}),t.addDataPipeline(e.name,E0n(e,t,n))}function E0n(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vs(e.values)||D$(e.format)?(r.push(N_e(t,e)),r.push(i=Ky())):r.push(i=Ky({$ingest:e.values,$format:e.format})):e.url?D$(e.url)||D$(e.format)?(r.push(N_e(t,e)),r.push(i=Ky())):r.push(i=Ky({$request:e.url,$format:e.format})):e.source&&(i=a=yt(e.source).map(d=>Vt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Ky()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=tgn({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Ky())),i||r.push(Ky()),r.push(O_({})),r}function Ky(e){const t=Jf({},e);return t.metadata={source:!0},t}function N_e(e,t){return Gmn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const KUe=e=>e===oy||e===Zf,a8=(e,t,n)=>Vs(e)?C0n(e.signal,t,n):e===uS||e===Zf?t:n,uo=(e,t,n)=>Vs(e)?S0n(e.signal,t,n):KUe(e)?t:n,Rf=(e,t,n)=>Vs(e)?T0n(e.signal,t,n):KUe(e)?n:t,XUe=(e,t,n)=>Vs(e)?A0n(e.signal,t,n):e===Zf?{value:t}:{value:n},x0n=(e,t,n)=>Vs(e)?I0n(e.signal,t,n):e===lS?{value:t}:{value:n},S0n=(e,t,n)=>QUe(`${e} === '${Zf}' || ${e} === '${oy}'`,t,n),T0n=(e,t,n)=>QUe(`${e} !== '${Zf}' && ${e} !== '${oy}'`,t,n),C0n=(e,t,n)=>_re(`${e} === '${uS}' || ${e} === '${Zf}'`,t,n),A0n=(e,t,n)=>_re(`${e} === '${Zf}'`,t,n),I0n=(e,t,n)=>_re(`${e} === '${lS}'`,t,n),QUe=(e,t,n)=>(t=t!=null?ao(t):t,n=n!=null?ao(n):n,D_e(t)&&D_e(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Cn({test:e},t)].concat(n||[])),D_e=e=>e==null||Object.keys(e).length===1,_re=(e,t,n)=>({signal:`${e} ? (${nw(t)}) : (${nw(n)})`}),O0n=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${uS}' ? (${nw(r)}) : `:"")+(n!=null?`${e} === '${oy}' ? (${nw(n)}) : `:"")+(i!=null?`${e} === '${lS}' ? (${nw(i)}) : `:"")+(t!=null?`${e} === '${Zf}' ? (${nw(t)}) : `:"")+"(null)"}),nw=e=>Vs(e)?e.signal:e==null?null:nt(e),P0n=(e,t)=>t===0?0:Vs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Dw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function fb(e,t,n,r){let i;if(t&&Wt(t,e))return t[e];if(Wt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[dre][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[DO][i]}return null}function M_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function k0n(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vs(o)){const f=M_e([n.axisX,n.axisY]),d=M_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=uo(o,fb(l,n.axisX,i,r),fb(l,n.axisY,i,r));u={};for(l of d)u[l]=O0n(o.signal,fb(l,n.axisTop,i,r),fb(l,n.axisBottom,i,r),fb(l,n.axisLeft,i,r),fb(l,n.axisRight,i,r))}else a=o===Zf||o===oy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Cn({},i,a,u,s):i}function R0n(e,t,n,r){const i=el(e,t),s=e.orient;let o,a;const u={enter:o={opacity:or},update:a={opacity:_c},exit:{opacity:or}};jo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=L_e(e,0),c=L_e(e,1);return o.x=a.x=uo(s,l,or),o.x2=a.x2=uo(s,c),o.y=a.y=Rf(s,l,or),o.y2=a.y2=Rf(s,c),Fl({type:pre,role:tmn,from:r,encode:u},n)}function L_e(e,t){return{scale:e.scale,range:t}}function $0n(e,t,n,r,i){const s=el(e,t),o=e.orient,a=e.gridScale,u=a8(o,1,-1),l=N0n(e.offset,u);let c,f,d;const h={enter:c={opacity:or},update:d={opacity:_c},exit:f={opacity:or}};jo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:vc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=uo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Cn(m,{mult:u,offset:l});return c.x=d.x=uo(o,p,g),c.y=d.y=Rf(o,p,g),c.x2=d.x2=Rf(o,y),c.y2=d.y2=uo(o,y),f.x=uo(o,p),f.y=Rf(o,p),Fl({type:pre,role:nmn,key:vc,from:r,encode:h},n)}function N0n(e,t){if(t!==1)if(!_t(e))e=Vs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Cn({},e);for(;n.mult!=null;)if(_t(n.mult))n=n.mult=Cn({},n.mult);else return n.mult=Vs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function D0n(e,t,n,r,i,s){const o=el(e,t),a=e.orient,u=a8(a,-1,1);let l,c,f;const d={enter:l={opacity:or},update:f={opacity:_c},exit:c={opacity:or}};jo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ao(i);h.mult=u;const p={scale:e.scale,field:vc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=uo(a,or,p),f.y2=l.y2=uo(a,h),c.x=uo(a,p),f.x=l.x=Rf(a,or,p),f.x2=l.x2=Rf(a,h),c.y=Rf(a,p),Fl({type:pre,role:imn,key:vc,from:r,encode:d},n)}function V7(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function M0n(e,t,n,r,i,s){const o=el(e,t),a=e.orient,u=e.scale,l=a8(a,-1,1),c=d1(o("labelFlush")),f=d1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ao(i);g.mult=l,g.offset=ao(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:vc,band:.5,offset:HUe(s.offset,o("labelOffset"))},v=uo(a,p?V7(u,c,'"left"','"right"','"center"'):{value:"center"},x0n(a,"left","right")),_=uo(a,XUe(a,"bottom","top"),p?V7(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=V7(u,c,`-(${f})`,f,0);p=p&&f;const S={opacity:or,x:uo(a,y,g),y:Rf(a,y,g)},x={enter:S,update:m={opacity:_c,text:{field:fre},x:S.x,y:S.y,align:v,baseline:_},exit:{opacity:or,x:S.x,y:S.y}};jo(x,{dx:!d&&p?uo(a,w):null,dy:!h&&p?Rf(a,w):null}),jo(x,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const b=o("labelBound");let T=o("labelOverlap");return T=T||b?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:b?{scale:u,orient:a,tolerance:b}:null}:void 0,m.align!==v&&(m.align=Dw(m.align,v)),m.baseline!==_&&(m.baseline=Dw(m.baseline,_)),Fl({type:P_,role:rmn,style:DO,key:vc,from:r,encode:x,overlap:T},n)}function L0n(e,t,n,r){const i=el(e,t),s=e.orient,o=a8(s,-1,1);let a,u;const l={enter:a={opacity:or,anchor:ao(i("titleAnchor",null)),align:{signal:mre}},update:u=Cn({},a,{opacity:_c,text:ao(e.title)}),exit:{opacity:or}},c={signal:`lerp(range("${e.scale}"), ${i8(0,1,.5)})`};return u.x=uo(s,c),u.y=Rf(s,c),a.angle=uo(s,or,P0n(o,90)),a.baseline=uo(s,XUe(s,oy,Zf),{value:oy}),u.angle=a.angle,u.baseline=a.baseline,jo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),F0n(i,s,l,n),l.update.align=Dw(l.update.align,a.align),l.update.angle=Dw(l.update.angle,a.angle),l.update.baseline=Dw(l.update.baseline,a.baseline),Fl({type:P_,role:smn,style:dre,from:r,encode:l},n)}function F0n(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Dw(ao(a),n.update[u]),!1):!Ib(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ao(o):uo(t,ao(o),ao(s))}function j0n(e,t){const n=k0n(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=el(e,n),l=Dgn(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Vt(t.add(Jf({},[c]))),d=Vt(t.add(Bmn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push($0n(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(D0n(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(M0n(e,n,r.labels,d,p,l))),c.domain&&h.push(R0n(e,n,r.domain,f)),c.title&&h.push(L0n(e,n,r.title,f)),o8(GA({role:emn,from:f,encode:aS(B0n(u,e),i,MO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function B0n(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),offset:e("offset")||0,position:af(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function JUe(e,t,n){const r=yt(e.signals),i=yt(e.scales);return n||r.forEach(s=>PUe(s,t)),yt(e.projections).forEach(s=>vgn(s,t)),i.forEach(s=>ogn(s,t)),yt(e.data).forEach(s=>w0n(s,t)),i.forEach(s=>agn(s,t)),(n||r).forEach(s=>jmn(s,t)),yt(e.axes).forEach(s=>j0n(s,t)),yt(e.marks).forEach(s=>o8(s,t)),yt(e.legends).forEach(s=>l0n(s,t)),e.title&&g0n(e.title,t),t.parseLambdas(),t}const z0n=e=>aS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function U0n(e,t){const n=t.config,r=Vt(t.root=t.add(n6())),i=V0n(e,n);i.forEach(l=>PUe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Jf()),o=t.add($Ue(OUe(z0n(e.encode),r8,are,e.style,t,{pulse:Vt(s)}))),a=t.add(MUe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Vt(o)}));t.operators.pop(),t.pushState(Vt(o),Vt(a),null),JUe(e,t,i),t.operators.push(a);let u=t.add(RUe({mark:r,pulse:Vt(a)}));return u=t.add(DUe({pulse:Vt(u)})),u=t.add(O_({pulse:Vt(u)})),t.addData("root",new Y1(t,s,s,u)),t}function _T(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function V0n(e,t){const n=o=>af(e[o],t[o]),r=[_T("background",n("background")),_T("autosize",Qpn(n("autosize"))),_T("padding",Zpn(n("padding"))),_T("width",n("width")||0),_T("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return yt(e.signals).forEach(o=>{Wt(i,o.name)?o=Cn(i[o.name],o):r.push(o),s[o.name]=o}),yt(t.signals).forEach(o=>{!Wt(s,o.name)&&!Wt(i,o.name)&&r.push(o)}),r}function ZUe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function F_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}ZUe.prototype=F_e.prototype={parse(e){return JUe(e,this)},fork(){return new F_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof bW?Vt(e):e;return this.add(egn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Vt(this.add(O_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Vt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return tr(this._parent)},encode(){return tr(this._encode)},lookup(){return tr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(vt(e))return qA(e,t);e.signal||$e("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Vt(this.add(Hmn(i)))}return r},compareRef(e){let t=!1;const n=s=>Vs(s)?(t=!0,this.signalRef(s.signal)):Omn(s)?(t=!0,this.exprRef(s.expr)):s,r=yt(e.field).map(n),i=yt(e.order).map(n);return t?Vt(this.add(S_e({fields:r,orders:i}))):E_e(r,i)},keyRef(e,t){let n=!1;const r=s=>Vs(s)?(n=!0,Vt(i[s.signal])):s,i=this.signals;return e=yt(e).map(r),n?Vt(this.add(qmn({fields:e,flat:t}))):Tmn(e,t)},sortRef(e){if(!e)return e;const t=t8(e.op,e.field),n=e.order||Cmn;return n.signal?Vt(this.add(S_e({fields:t,orders:this.signalRef(n.signal)}))):E_e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Wt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&$e("Duplicate signal name: "+nt(e));const n=t instanceof bW?t:this.add(n6(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||$e("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Vt(this.signals[e]):(Wt(this.lambdas,e)||(this.lambdas[e]=this.add(n6(null))),Vt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Rh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!_t(e)?e:this.signalRef(e.signal||bre(e))},exprRef(e,t){const n={expr:Rh(e,this)};return t&&(n.expr.$name=t),Vt(this.add(Umn(n)))},addBinding(e,t){this.bindings||$e("Nested signals do not support binding: "+nt(e)),this.bindings.push(Cn({signal:e},t))},addScaleProj(e,t){Wt(this.scales,e)&&$e("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,ngn(t))},addProjection(e,t){this.addScaleProj(e,Zmn(t))},getScale(e){return this.scales[e]||$e("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return Vt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Wt(this.data,e)&&$e("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||$e("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Wt(this.data,e)&&$e("Duplicate data set name: "+nt(e)),this.addData(e,Y1.fromEntries(this,t))}};function bre(e){return(De(e)?H0n:q0n)(e)}function H0n(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(_t(i)?i.signal||bre(i):nt(i))}return n+"]"}function q0n(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(_t(i)?i.signal||bre(i):nt(i));return t+"}"}function W0n(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function G0n(e,t,n){return _t(e)||$e("Input Vega specification must be an object."),t=Zx(W0n(),t,e.config),U0n(e,new ZUe(t,n)).toRuntime()}var Y0n="5.29.0";Cn(LE,Gin,Dun,hln,Hln,Qln,Scn,rcn,Ccn,Pcn,Bcn,Gcn);const K0n=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:PO,CanvasRenderer:HL,DATE:Gu,DAY:ha,DAYOFYEAR:kh,Dataflow:Nw,Debug:Sje,Error:pee,EventStream:xF,Gradient:zBe,GroupItem:MF,HOURS:Dl,Handler:ene,HybridHandler:R7e,HybridRenderer:Qq,Info:xje,Item:DF,MILLISECONDS:Uf,MINUTES:Ml,MONTH:va,Marks:Ll,MultiPulse:Nee,None:Eje,Operator:si,Parameters:EF,Pulse:x0,QUARTER:Wu,RenderType:Qg,Renderer:OO,ResourceLoader:YBe,SECONDS:Ac,SVGHandler:_7e,SVGRenderer:one,SVGStringRenderer:k7e,Scenegraph:f7e,TIME_UNITS:Cee,Transform:Ae,View:yUe,WEEK:js,Warn:mee,YEAR:Do,accessor:Zu,accessorFields:ya,accessorName:Zi,array:yt,ascending:gF,bandwidthNRD:Fee,bin:$9e,bootstrapCI:N9e,boundClip:U7e,boundContext:TO,boundItem:Wq,boundMark:a7e,boundStroke:qm,changeset:C_,clampRange:Dje,codegenExpression:Hze,compare:bee,constant:Aa,cumulativeLogNormal:Hee,cumulativeNormal:TF,cumulativeUniform:Yee,dayofyear:Gje,debounce:wee,defaultLocale:Oee,definition:P9e,densityLogNormal:Vee,densityNormal:jee,densityUniform:Gee,domChild:Ls,domClear:oc,domCreate:Kg,domFind:Zte,dotbin:D9e,error:$e,expressionFunction:hs,extend:Cn,extent:Ph,extentIndex:Mje,falsy:_g,fastmap:tS,field:Tc,flush:Lje,font:zF,fontFamily:IO,fontSize:Wh,format:_$,formatLocale:kL,formats:Ree,hasOwnProperty:Wt,id:hO,identity:Ca,inferType:_9e,inferTypes:b9e,ingest:Cr,inherits:st,inrange:Zb,interpolate:Pte,interpolateColors:$F,interpolateRange:ABe,intersect:F7e,intersectBoxLine:ew,intersectPath:Fte,intersectPoint:jte,intersectRule:XBe,isArray:De,isBoolean:Oy,isDate:E0,isFunction:An,isIterable:Fje,isNumber:fr,isObject:_t,isRegExp:jje,isString:vt,isTuple:bF,key:Eee,lerp:Bje,lineHeight:ry,loader:vF,locale:y9e,logger:gee,lruCache:zje,markup:sne,merge:Uje,mergeConfig:Zx,multiLineOffset:Xte,one:Jx,pad:Vje,panLinear:Oje,panLog:Pje,panPow:kje,panSymlog:Rje,parse:G0n,parseExpression:Gne,parseSelector:ky,path:Y4,pathCurves:Dte,pathEqual:V7e,pathParse:zE,pathRectangle:HBe,pathRender:LA,pathSymbols:VBe,pathTrail:qBe,peek:tr,point:VF,projection:vne,quantileLogNormal:qee,quantileNormal:CF,quantileUniform:Kee,quantiles:Mee,quantizeInterpolator:IBe,quarter:$je,quartiles:Lee,get random(){return Ic},randomInteger:Qrn,randomKDE:zee,randomLCG:Xrn,randomLogNormal:L9e,randomMixture:F9e,randomNormal:Bee,randomUniform:j9e,read:x9e,regressionConstant:Xee,regressionExp:z9e,regressionLinear:Qee,regressionLoess:H9e,regressionLog:B9e,regressionPoly:V9e,regressionPow:U9e,regressionQuad:Jee,renderModule:HF,repeat:t2,resetDefaultLocale:Gnn,resetSVGClipId:GBe,resetSVGDefIds:Zan,responseType:E9e,runtimeContext:iUe,sampleCurve:IF,sampleLogNormal:Uee,sampleNormal:SF,sampleUniform:Wee,scale:vr,sceneEqual:ane,sceneFromJSON:l7e,scenePickVisit:ML,sceneToJSON:u7e,sceneVisit:Vf,sceneZOrder:Bte,scheme:kte,serializeXML:A7e,setHybridRendererOptions:Kan,setRandom:Yrn,span:pO,splitAccessPath:qh,stringValue:nt,textMetrics:Cl,timeBin:c9e,timeFloor:e9e,timeFormatLocale:NA,timeInterval:nS,timeOffset:r9e,timeSequence:o9e,timeUnitSpecifier:Wje,timeUnits:Aee,toBoolean:xee,toDate:See,toNumber:pa,toSet:zf,toString:Tee,transform:k9e,transforms:LE,truncate:Hje,truthy:Cc,tupleid:Ht,typeParsers:Lq,utcFloor:t9e,utcInterval:rS,utcOffset:i9e,utcSequence:a9e,utcdayofyear:Xje,utcquarter:Nje,utcweek:Qje,version:Y0n,visitArray:Ag,week:Yje,writeConfig:eS,zero:Fg,zoomLinear:yee,zoomLog:vee,zoomPow:PL,zoomSymlog:_ee},Symbol.toStringTag,{value:"Module"}));function X0n(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Q0n={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},J0n={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Z0n={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const eyn=Array.prototype.slice,Xy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,eyn.call(t,1))},tyn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var nyn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:tyn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Xy("join",arguments)},indexof:function(){return Xy("indexOf",arguments)},lastindexof:function(){return Xy("lastIndexOf",arguments)},slice:function(){return Xy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Xy("substring",arguments,String)},split:function(){return Xy("split",arguments,String)},replace:function(){return Xy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const ryn=["view","item","group","xy","x","y"],AW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&AW.add(setImmediate);const iyn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Q0n[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),AW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||nyn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>J0n[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Z0n[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,AW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function bT(e,t,n,r,i,s){const o=a=>iyn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,ryn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var syn={operator(e,t){const n=t.ast,r=e.functions;return i=>bT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>bT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>bT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return bT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=bT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&X0n(o,r,s),l}}};const oyn="vega-lite",ayn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',uyn="5.18.1",lyn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],cyn="https://vega.github.io/vega-lite/",fyn="Vega-Lite is a concise high-level language for interactive visualization.",dyn=["vega","chart","visualization"],hyn="build/vega-lite.js",pyn="build/vega-lite.min.js",myn="build/vega-lite.min.js",gyn="build/src/index",yyn="build/src/index.d.ts",vyn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},_yn=["bin","build","src","vega-lite*","tsconfig.json"],byn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},wyn={type:"git",url:"https://github.com/vega/vega-lite.git"},Eyn="BSD-3-Clause",xyn={url:"https://github.com/vega/vega-lite/issues"},Syn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Tyn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Cyn={vega:"^5.24.0"},Ayn={node:">=18"},Iyn="yarn@1.22.19",Oyn={name:oyn,author:ayn,version:uyn,collaborators:lyn,homepage:cyn,description:fyn,keywords:dyn,main:hyn,unpkg:pyn,jsdelivr:myn,module:gyn,types:yyn,bin:vyn,files:_yn,scripts:byn,repository:wyn,license:Eyn,bugs:xyn,devDependencies:Syn,dependencies:Tyn,peerDependencies:Cyn,engines:Ayn,packageManager:Iyn};function wre(e){return!!e.or}function Ere(e){return!!e.and}function xre(e){return!!e.not}function j$(e,t){if(xre(e))j$(e.not,t);else if(Ere(e))for(const n of e.and)j$(n,t);else if(wre(e))for(const n of e.or)j$(n,t);else t(e)}function Mw(e,t){return xre(e)?{not:Mw(e.not,t)}:Ere(e)?{and:e.and.map(n=>Mw(n,t))}:wre(e)?{or:e.or.map(n=>Mw(n,t))}:t(e)}const dn=structuredClone;function eVe(e){throw new Error(e)}function WE(e,t){const n={};for(const r of t)Wt(e,r)&&(n[r]=e[r]);return n}function Lu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Yr(e)).join(",")})`};function Gn(e){if(fr(e))return e;const t=vt(e)?e:Yr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function IW(e){return e===!1||e===null}function Yn(e,t){return e.includes(t)}function K1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Sre(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function tVe(e,...t){for(const n of t)Pyn(e,n??{});return e}function Pyn(e,t){for(const n of We(t))eS(e,n,t[n],!0)}function Kd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function kyn(e,t){const n=We(e),r=We(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function nVe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Tre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function OW(e){const t=new Set;for(const n of e){const i=qh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Cre(e,t){return e===void 0||t===void 0?!0:Tre(OW(e),OW(t))}function Gr(e){return We(e).length===0}const We=Object.keys,Mo=Object.values,ay=Object.entries;function YA(e){return e===!0||e===!1}function Di(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function dC(e,t){return xre(e)?`!(${dC(e.not,t)})`:Ere(e)?`(${e.and.map(n=>dC(n,t)).join(") && (")})`:wre(e)?`(${e.or.map(n=>dC(n,t)).join(") || (")})`:t(e)}function r6(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&r6(e[n],t)&&delete e[n],Gr(e)}function LO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Are(e,t="datum"){const n=qh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function rVe(e,t="datum"){return`${t}[${nt(qh(e).join("."))}]`}function Ryn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Oc(e){return`${qh(e).map(Ryn).join("\\.")}`}function X1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cS(e){return`${qh(e).join(".")}`}function GE(e){return e?qh(e).length:0}function fs(...e){for(const t of e)if(t!==void 0)return t}let iVe=42;function sVe(e){const t=++iVe;return e?String(e)+t:t}function $yn(){iVe=42}function oVe(e){return aVe(e)?e:`__${e}`}function aVe(e){return e.startsWith("__")}function KA(e){if(e!==void 0)return(e%360+360)%360}function u8(e){return fr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const j_e=Object.getPrototypeOf(structuredClone({}));function wl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!wl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!wl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==j_e.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==j_e.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!wl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Yr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const em="row",tm="column",l8="facet",Mi="x",go="y",ed="x2",Kh="y2",Ry="xOffset",fS="yOffset",td="radius",Gm="radius2",Vc="theta",Ym="theta2",nd="latitude",rd="longitude",id="latitude2",Pc="longitude2",Yu="color",Xh="fill",Qh="stroke",Ku="shape",Km="size",k_="angle",Xm="opacity",$y="fillOpacity",Ny="strokeOpacity",Dy="strokeWidth",My="strokeDash",FO="text",YE="order",jO="detail",c8="key",Q1="tooltip",f8="href",d8="url",h8="description",Nyn={x:1,y:1,x2:1,y2:1},uVe={theta:1,theta2:1,radius:1,radius2:1};function lVe(e){return e in uVe}const Ire={longitude:1,longitude2:1,latitude:1,latitude2:1};function cVe(e){switch(e){case nd:return"y";case id:return"y2";case rd:return"x";case Pc:return"x2"}}function fVe(e){return e in Ire}const Dyn=We(Ire),Ore={...Nyn,...uVe,...Ire,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Lw(e){return e===Yu||e===Xh||e===Qh}const dVe={row:1,column:1,facet:1},hc=We(dVe),Pre={...Ore,...dVe},Myn=We(Pre),{order:AAn,detail:IAn,tooltip:OAn,...Lyn}=Pre,{row:PAn,column:kAn,facet:RAn,...Fyn}=Lyn;function jyn(e){return!!Fyn[e]}function hVe(e){return!!Pre[e]}const Byn=[ed,Kh,id,Pc,Ym,Gm];function pVe(e){return R_(e)!==e}function R_(e){switch(e){case ed:return Mi;case Kh:return go;case id:return nd;case Pc:return rd;case Ym:return Vc;case Gm:return td}return e}function uy(e){if(lVe(e))switch(e){case Vc:return"startAngle";case Ym:return"endAngle";case td:return"outerRadius";case Gm:return"innerRadius"}return e}function Jh(e){switch(e){case Mi:return ed;case go:return Kh;case nd:return id;case rd:return Pc;case Vc:return Ym;case td:return Gm}}function Xu(e){switch(e){case Mi:case ed:return"width";case go:case Kh:return"height"}}function mVe(e){switch(e){case Mi:return"xOffset";case go:return"yOffset";case ed:return"x2Offset";case Kh:return"y2Offset";case Vc:return"thetaOffset";case td:return"radiusOffset";case Ym:return"theta2Offset";case Gm:return"radius2Offset"}}function kre(e){switch(e){case Mi:return"xOffset";case go:return"yOffset"}}function zyn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Uyn=We(Ore),{x:$An,y:NAn,x2:DAn,y2:MAn,xOffset:LAn,yOffset:FAn,latitude:jAn,longitude:BAn,latitude2:zAn,longitude2:UAn,theta:VAn,theta2:HAn,radius:qAn,radius2:WAn,...Rre}=Ore,Vyn=We(Rre),$re={x:1,y:1},Zh=We($re);function ds(e){return e in $re}const Nre={theta:1,radius:1},Hyn=We(Nre);function p8(e){return e==="width"?Mi:go}const gVe={xOffset:1,yOffset:1};function BO(e){return e in gVe}const{text:GAn,tooltip:YAn,href:KAn,url:XAn,description:QAn,detail:JAn,key:ZAn,order:eIn,...yVe}=Rre,qyn=We(yVe);function Wyn(e){return!!Rre[e]}function Gyn(e){switch(e){case Yu:case Xh:case Qh:case Km:case Ku:case Xm:case Dy:case My:return!0;case $y:case Ny:case k_:return!1}}const vVe={...$re,...Nre,...gVe,...yVe},m8=We(vVe);function Qm(e){return!!vVe[e]}function Yyn(e,t){return Xyn(e)[t]}const _Ve={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:tIn,...Kyn}=_Ve;function Xyn(e){switch(e){case Yu:case Xh:case Qh:case h8:case jO:case c8:case Q1:case f8:case YE:case Xm:case $y:case Ny:case Dy:case l8:case em:case tm:return _Ve;case Mi:case go:case Ry:case fS:case nd:case rd:return Kyn;case ed:case Kh:case id:case Pc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Km:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case My:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ku:return{point:"always",geoshape:"always"};case FO:return{text:"always"};case k_:return{point:"always",square:"always",text:"always"};case d8:return{image:"always"};case Vc:return{text:"always",arc:"always"};case td:return{text:"always",arc:"always"};case Ym:case Gm:return{arc:"always"}}}function H7(e){switch(e){case Mi:case go:case Vc:case td:case Ry:case fS:case Km:case k_:case Dy:case Xm:case $y:case Ny:case ed:case Kh:case Ym:case Gm:return;case l8:case em:case tm:case Ku:case My:case FO:case Q1:case f8:case d8:case h8:return"discrete";case Yu:case Xh:case Qh:return"flexible";case nd:case rd:case id:case Pc:case jO:case c8:case YE:return}}const Qyn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Jyn={count:1,min:1,max:1};function Om(e){return!!e&&!!e.argmin}function Ly(e){return!!e&&!!e.argmax}function Dre(e){return vt(e)&&!!Qyn[e]}const Zyn=new Set(["count","valid","missing","distinct"]);function bVe(e){return vt(e)&&Zyn.has(e)}function evn(e){return vt(e)&&Yn(["min","max"],e)}const tvn=new Set(["count","sum","distinct","valid","missing"]),nvn=new Set(["mean","average","median","q1","q3","min","max"]);function wVe(e){return Oy(e)&&(e=A8(e,void 0)),"bin"+We(e).map(t=>g8(e[t])?Di(`_${t}_${ay(e[t])}`):Di(`_${t}_${e[t]}`)).join("")}function pi(e){return e===!0||$_(e)&&!e.binned}function Co(e){return e==="binned"||$_(e)&&e.binned===!0}function $_(e){return _t(e)}function g8(e){return e==null?void 0:e.param}function B_e(e){switch(e){case em:case tm:case Km:case Yu:case Xh:case Qh:case Dy:case Xm:case $y:case Ny:case Ku:return 6;case My:return 4;default:return 10}}function zO(e){return!!(e!=null&&e.expr)}function xu(e){const t=We(e||{}),n={};for(const r of t)n[r]=pl(e[r]);return n}function EVe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=WE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function Pg(e){return vt(e)||De(e)&&vt(e[0])}function Mt(e){return!!(e!=null&&e.signal)}function Fy(e){return!!e.step}function rvn(e){return De(e)?!1:"fields"in e&&!("data"in e)}function ivn(e){return De(e)?!1:"fields"in e&&"data"in e}function Up(e){return De(e)?!1:"field"in e&&"data"in e}const svn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},ovn=We(svn),avn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},PW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function xVe(e){const t=De(e.condition)?e.condition.map(z_e):z_e(e.condition);return{...pl(e),condition:t}}function pl(e){if(zO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function z_e(e){if(zO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ei(e){if(zO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Mt(e)?e:e!==void 0?{value:e}:void 0}function uvn(e){return Mt(e)?e.signal:nt(e)}function U_e(e){return Mt(e)?e.signal:nt(e.value)}function wf(e){return Mt(e)?e.signal:e==null?null:nt(e)}function lvn(e,t,n){for(const r of n){const i=Pm(r,t.markDef,t.config);i!==void 0&&(e[r]=Ei(i))}return e}function SVe(e){return[].concat(e.type,e.style??[])}function Tr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Pm(e,t,n,r)}function Pm(e,t,n,{vgChannel:r}={}){return fs(r?i6(e,t,n.style):void 0,i6(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function i6(e,t,n){return TVe(e,SVe(t),n)}function TVe(e,t,n){t=yt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function CVe(e,t){return yt(e).reduce((n,r)=>(n.field.push(it(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function AVe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(wl(i,r))return;n.push(r)}),n}function IVe(e,t){return wl(e,t)||!t?e:e?[...yt(e),...yt(t)].join(", "):t}function OVe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Pg(n)||Mt(n))&&(Pg(r)||Mt(r)))return{explicit:e.explicit,value:IVe(n,r)};if(Pg(n)||Mt(n))return{explicit:e.explicit,value:n};if(Pg(r)||Mt(r))return{explicit:e.explicit,value:r};if(!Pg(n)&&!Mt(n)&&!Pg(r)&&!Mt(r))return{explicit:e.explicit,value:AVe(n,r)};throw new Error("It should never reach here")}function Mre(e){return`Invalid specification ${Yr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const cvn='Autosize "fit" only works for single views and layered views.';function V_e(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function H_e(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function q_e(e){return e?`Dropping "fit-${e}" because spec has discrete ${Xu(e)}.`:'Dropping "fit" because spec has discrete size.'}function Lre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function W_e(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function fvn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function dvn(e){return`The "nearest" transform is not supported for ${e} marks.`}function PVe(e){return`Selection not supported for ${e} yet.`}function hvn(e){return`Cannot find a selection named "${e}".`}const pvn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",mvn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",gvn="Legend bindings are only supported for selections over an individual field or encoding channel.";function yvn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function vvn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const _vn="The same selection must be used to override scale domains in a layered view.",bvn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function wvn(e){return`Unknown repeated value "${e}".`}function G_e(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Evn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function xvn(e){return`Unrecognized parse "${e}".`}function Y_e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Svn="Attempt to add the same child twice.";function Tvn(e){return`Ignoring an invalid transform: ${Yr(e)}.`}const Cvn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function K_e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Avn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Yr(t)} is overridden by a child projection ${Yr(n)}.`}const Ivn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Ovn(e){return`${e}Offset dropped because ${e} is continuous`}function Pvn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Yr(n)}}.`}function kVe(e){return`Invalid field type "${e}".`}function kvn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Rvn(e){return`Invalid aggregation operator "${e}".`}function RVe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function $vn(e){return`Position range does not support relative band size for ${e}.`}function kW(e,t){return`Dropping ${Yr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Nvn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function y8(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Dvn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Mvn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Lvn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Fvn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function q7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function jvn(e){return`The ${e} for range marks cannot be an expression`}function Bvn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function zvn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Uvn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Vvn(e){return`Cannot use the relative band size with ${e} scale.`}function Hvn(e){return`Using unaggregated domain with raw field has no effect (${Yr(e)}).`}function qvn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Wvn(e){return`Unaggregated domain is currently unsupported for log scale (${Yr(e)}).`}function Gvn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Yvn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Kvn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function $Ve(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function NVe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Xvn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yr(n)} and ${Yr(r)}). Using ${Yr(n)}.`}function Qvn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yr(n)} and ${Yr(r)}). Using the union of the two domains.`}function Jvn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Zvn(e){return`Dropping sort property ${Yr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const X_e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",e1n="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",t1n="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",n1n="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function r1n(e){return`Cannot stack "${e}" if there is already "${e}2".`}function i1n(e){return`Stack is applied to a non-linear scale (${e}).`}function s1n(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function s6(e,t){return`Invalid ${e}: ${Yr(t)}.`}function o1n(e){return`Dropping day from datetime ${Yr(e)} as day cannot be combined with other units.`}function a1n(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function u1n(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function l1n(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Q_e(e){return`1D error band does not support ${e}.`}function DVe(e){return`Channel ${e} is required for "binned" bin.`}function c1n(e){return`Channel ${e} should not be used with "binned" bin.`}function f1n(e){return`Domain for ${e} is required for threshold scale.`}const MVe=gee(mee);let KE=MVe;function d1n(e){return KE=e,KE}function h1n(){return KE=MVe,KE}function Qe(...e){KE.warn(...e)}function p1n(...e){KE.debug(...e)}function N_(e){if(e&&_t(e)){for(const t of jre)if(t in e)return!0}return!1}const LVe=["january","february","march","april","may","june","july","august","september","october","november","december"],m1n=LVe.map(e=>e.substr(0,3)),FVe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],g1n=FVe.map(e=>e.substr(0,3));function y1n(e){if(u8(e)&&(e=+e),fr(e))return e>4&&Qe(s6("quarter",e)),e-1;throw new Error(s6("quarter",e))}function v1n(e){if(u8(e)&&(e=+e),fr(e))return e-1;{const t=e.toLowerCase(),n=LVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=m1n.indexOf(r);if(i!==-1)return i;throw new Error(s6("month",e))}}function _1n(e){if(u8(e)&&(e=+e),fr(e))return e%7;{const t=e.toLowerCase(),n=FVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=g1n.indexOf(r);if(i!==-1)return i;throw new Error(s6("day",e))}}function Fre(e,t){const n=[];if(t&&e.day!==void 0&&We(e).length>1&&(Qe(o1n(e)),e=dn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?v1n(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?y1n(e.quarter):e.quarter;n.push(fr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?_1n(e.day):e.day;n.push(fr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function J1(e){const n=Fre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function b1n(e){const n=Fre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function w1n(e){const t=Fre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const jVe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},jre=We(jVe);function E1n(e){return!!jVe[e]}function D_(e){return _t(e)?e.binned:BVe(e)}function BVe(e){return e&&e.startsWith("binned")}function Bre(e){return e.startsWith("utc")}function x1n(e){return e.substring(3)}const S1n={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function v8(e){return jre.filter(t=>UVe(e,t))}function zVe(e){const t=v8(e);return t[t.length-1]}function UVe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function T1n(e,t,{end:n}={end:!1}){const r=Are(t),i=Bre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of jre)UVe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),b1n(a)}function VVe(e){if(!e)return;const t=v8(e);return`timeUnitSpecifier(${Yr(t)}, ${Yr(S1n)})`}function C1n(e,t,n){if(!e)return;const r=VVe(e);return`${n||Bre(e)?"utc":"time"}Format(${t}, ${r})`}function co(e){if(!e)return;let t;return vt(e)?BVe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:_t(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Bre(t.unit)&&(t.utc=!0,t.unit=x1n(t.unit)),t}function A1n(e){const{utc:t,...n}=co(e);return n.unit?(t?"utc":"")+We(n).map(r=>Di(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+We(n).map(r=>Di(`_${r}_${n[r]}`)).join("")}function HVe(e,t=n=>n){const n=co(e),r=zVe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=qVe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(J1(a))} - ${t(J1(i))}`}}const I1n={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function O1n(e){return!!I1n[e]}function qVe(e,t=1){if(O1n(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function P1n(e){return e==null?void 0:e.param}function zre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ure(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Vre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Hre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function qre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Wre(e){if(e!=null&&e.field){if(De(e.range)&&e.range.length===2)return!0;if(Mt(e.range))return!0}return!1}function Gre(e){return!!(e!=null&&e.field)&&(De(e.oneOf)||De(e.in))}function k1n(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function WVe(e){return Gre(e)||zre(e)||Wre(e)||Ure(e)||Hre(e)||Vre(e)||qre(e)}function hd(e,t){return I8(e,{timeUnit:t,wrapTime:!0})}function R1n(e,t){return e.map(n=>hd(n,t))}function GVe(e,t=!0){const{field:n}=e,r=co(e.timeUnit),{unit:i,binned:s}=r||{},o=it(e,{expr:"datum"}),a=i?`time(${s?o:T1n(i,n)})`:o;if(zre(e))return`${a}===${hd(e.equal,i)}`;if(Ure(e)){const u=e.lt;return`${a}<${hd(u,i)}`}else if(Hre(e)){const u=e.gt;return`${a}>${hd(u,i)}`}else if(Vre(e)){const u=e.lte;return`${a}<=${hd(u,i)}`}else if(qre(e)){const u=e.gte;return`${a}>=${hd(u,i)}`}else{if(Gre(e))return`indexof([${R1n(e.oneOf,i).join(",")}], ${a}) !== -1`;if(k1n(e))return Yre(a,e.valid);if(Wre(e)){const{range:u}=e,l=Mt(u)?{signal:`${u.signal}[0]`}:u[0],c=Mt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+hd(l,i)+", "+hd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${hd(l,i)}`),c!==null&&f.push(`${a} <= ${hd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Yr(e)}`)}function Yre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function $1n(e){return WVe(e)&&e.timeUnit?{...e,timeUnit:co(e.timeUnit)}:e}const UO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function N1n(e){return e==="quantitative"||e==="temporal"}function YVe(e){return e==="ordinal"||e==="nominal"}const Z1=UO.quantitative,Kre=UO.ordinal,XE=UO.temporal,Xre=UO.nominal,dS=UO.geojson;function D1n(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Z1:return"quantitative";case"t":case XE:return"temporal";case"o":case Kre:return"ordinal";case"n":case Xre:return"nominal";case dS:return"geojson"}}const Fu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},RW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function M1n(e,t){const n=RW[e],r=RW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const L1n={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function J_e(e){return L1n[e]}const KVe=new Set(["linear","log","pow","sqrt","symlog"]),XVe=new Set([...KVe,"time","utc"]);function QVe(e){return KVe.has(e)}const JVe=new Set(["quantile","quantize","threshold"]),F1n=new Set([...XVe,...JVe,"sequential","identity"]),j1n=new Set(["ordinal","bin-ordinal","point","band"]);function ho(e){return j1n.has(e)}function jl(e){return F1n.has(e)}function Ef(e){return XVe.has(e)}function QE(e){return JVe.has(e)}const B1n={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function z1n(e){return!vt(e)&&!!e.name}function ZVe(e){return e==null?void 0:e.param}function U1n(e){return e==null?void 0:e.unionWith}function V1n(e){return _t(e)&&"field"in e}const H1n={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:nIn,domain:rIn,range:iIn,rangeMax:sIn,rangeMin:oIn,scheme:aIn,...q1n}=H1n,W1n=We(q1n);function $W(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ef(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ef(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ef(e);case"nice":return Ef(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return jl(e)&&!Yn(["log","time","utc","threshold","quantile"],e)}}function eHe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Lw(e)?void 0:Uvn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function G1n(e,t){return Yn([Kre,Xre],t)?e===void 0||ho(e):t===XE?Yn([Fu.TIME,Fu.UTC,void 0],e):t===Z1?QVe(e)||QE(e)||e===void 0:!0}function Y1n(e,t,n=!1){if(!Qm(e))return!1;switch(e){case Mi:case go:case Ry:case fS:case Vc:case td:return Ef(t)||t==="band"?!0:t==="point"?!n:!1;case Km:case Dy:case Xm:case $y:case Ny:case k_:return Ef(t)||QE(t)||Yn(["band","point","ordinal"],t);case Yu:case Xh:case Qh:return t!=="band";case My:case Ku:return t==="ordinal"||QE(t)}}function Qre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Zre(e);return Ze(n)&&!bVe(n.aggregate)&&i&&Ef(i.get("type"))?K1n({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function K1n({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Tr("invalid",n,i)===null?[X1n(e,t),r]:r}function X1n(e,t){const n=Jre(e,!0),i=R_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Jre(e,t=!0){return Yre(vt(e)?e:it(e,{expr:"datum"}),!t)}function Q1n(e){const{datum:t}=e;return N_(t)?J1(t):`${Yr(t)}`}function h1(e,t,n,r){const i={};if(t&&(i.scale=t),ep(e)){const{datum:s}=e;N_(s)?i.signal=J1(s):Mt(s)?i.signal=s.signal:zO(s)?i.signal=s.expr:i.value=s}else i.field=it(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function o6({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Mt(o)&&0<o&&o<1?"datum":void 0,u=it(t,{expr:a,suffix:i}),l=n!==void 0?it(n,{expr:a}):it(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Mt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function J1n({scaleName:e,fieldDef:t}){const n=it(t,{expr:"datum"}),r=it(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Zre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(vn(t)){const f=o==null?void 0:o.get("type");if(tu(t)){c??(c=ly({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(pi(d)||c&&h&&p===XE)return a!=null&&a.impute?h1(t,s,{binSuffix:"mid"},{offset:u}):c&&!ho(f)?o6({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):h1(t,s,WO(t,e)?{binSuffix:"range"}:{},{offset:u});if(Co(d)){if(Ze(n))return o6({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Qe(DVe(e===Mi?ed:Kh))}}return h1(t,s,ho(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Hf(t)){const f=t.value,d=u?{offset:u}:{};return{...hC(e,f),...d}}}return An(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function hC(e,t){return Yn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Yn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ei(t)}function e_(e){return e&&e!=="number"&&e!=="time"}function tHe(e,t,n){return`${e}(${t}${n?`, ${Yr(n)}`:""})`}const Z1n="  ";function eie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(e_(n))return xf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=nHe(e,r,i),a=JE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return xf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return xf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return xf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ex(e)){const c=t_n({field:o,timeUnit:Ze(e)?(u=co(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:L_(e)&&((l=e.scale)==null?void 0:l.type)===Fu.UTC});return c?{signal:c}:void 0}if(t=NW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&pi(e.bin)){const c=it(e,{expr:r,binSuffix:"end"});return{signal:VO(o,c,t,n,s)}}else return t||JE(e)==="quantitative"?{signal:`${sHe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function nHe(e,t,n){return Ze(e)?n?`${it(e,{expr:t,suffix:"end"})}-${it(e,{expr:t,suffix:"start"})}`:it(e,{expr:t}):Q1n(e)}function xf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=nHe(e,r,i)),o!=="datum.value"&&Ze(e)&&pi(e.bin)){const a=it(e,{expr:r,binSuffix:"end"});return{signal:VO(o,a,t,n,s)}}return{signal:tHe(n,o,t)}}function rHe(e,t,n,r,i,s){var o;if(!(vt(r)&&e_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&JE(e)==="quantitative"&&(i.normalizedNumberFormatType&&ZE(e)&&e.stack==="normalize"||i.numberFormatType))){if(ZE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return NW({type:"quantitative",config:i,normalizeStack:!0});if(ex(e)){const a=Ze(e)?(o=co(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:e_n({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return NW({type:t,specifiedFormat:n,config:i})}}function iHe(e,t,n){var r;if(e&&(Mt(e)||e==="number"||e==="time"))return e;if(ex(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=co(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function NW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(vt(t))return t;if(e===Z1)return r?n.normalizedNumberFormat:n.numberFormat}function e_n({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:VVe(t)}:r?void 0:n.timeFormat)}function sHe(e,t){return`format(${e}, "${t||""}")`}function Z_e(e,t,n,r){return e_(n)?tHe(n,e,t):sHe(e,(vt(t)?t:void 0)??r.numberFormat)}function VO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return VO(e,t,i.numberFormat,i.numberFormatType,i);const s=Z_e(e,n,r,i),o=Z_e(t,n,r,i);return`${Yre(e,!1)} ? "null" : ${s} + "${Z1n}" + ${o}`}function t_n({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=vt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):C1n(t,e,s)}const au={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},oHe=au.arc,_8=au.area,b8=au.bar,n_n=au.image,w8=au.line,E8=au.point,r_n=au.rect,a6=au.rule,aHe=au.text,tie=au.tick,i_n=au.trail,nie=au.circle,rie=au.square,uHe=au.geoshape;function M_(e){return["line","area","trail"].includes(e)}function XA(e){return["rect","bar","image","arc"].includes(e)}const s_n=new Set(We(au));function $h(e){return e.type}const o_n=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],a_n=["fill","fillOpacity"],u_n=[...o_n,...a_n],l_n={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},ebe=We(l_n),c_n={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},f_n={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},d_n={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},lHe=We(d_n);function t_(e){return e&&e.band!=null}const h_n={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},cHe=5,p_n={binSpacing:1,continuousBandSize:cHe,minBandSize:.25,timeUnitBandPosition:.5},m_n={binSpacing:0,continuousBandSize:cHe,minBandSize:.25,timeUnitBandPosition:.5},g_n={thickness:1};function y_n(e){return $h(e)?e.type:e}const x8="min",v_n={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function tbe(e){return e in v_n}function fHe(e){return!!(e!=null&&e.encoding)}function lh(e){return e&&(e.op==="count"||!!e.field)}function dHe(e){return e&&De(e)}function HO(e){return"row"in e||"column"in e}function iie(e){return!!e&&"header"in e}function S8(e){return"facet"in e}function __n(e){return e.param}function b_n(e){return e&&!vt(e)&&"repeat"in e}function nbe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function sie(e){return"sort"in e}function ly({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(vn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Pm("timeUnitBandPosition",n,r);if(pi(s))return .5}}function hHe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Xu(e),u=Tr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Pm("timeUnitBandSize",r,i)};if(pi(h)&&!ho(s))return{band:1}}if(XA(r.type))return s?ho(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function pHe(e,t,n,r){return pi(e.bin)||e.timeUnit&&tu(e)&&e.type==="temporal"?ly({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function mHe(e){return e&&!!e.sort&&!e.field}function T8(e){return e&&"condition"in e}function C8(e){const t=e==null?void 0:e.condition;return!!t&&!De(t)&&Ze(t)}function qO(e){const t=e==null?void 0:e.condition;return!!t&&!De(t)&&vn(t)}function w_n(e){const t=e==null?void 0:e.condition;return!!t&&(De(t)||Hf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function JE(e){return e==null?void 0:e.type}function ep(e){return e&&"datum"in e}function t0(e){return tu(e)&&!l6(e)||u6(e)}function rbe(e){return tu(e)&&e.type==="quantitative"&&!e.bin||u6(e)}function u6(e){return ep(e)&&fr(e.datum)}function vn(e){return Ze(e)||ep(e)}function tu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Hf(e){return e&&"value"in e&&"value"in e}function L_(e){return e&&("scale"in e||"sort"in e)}function ZE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function gHe(e){return e&&"legend"in e}function yHe(e){return e&&("format"in e||"formatType"in e)}function E_n(e){return Lu(e,["legend","axis","header","scale"])}function x_n(e){return"op"in e}function it(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(T_n(e))n=oVe("count");else{let o;if(!t.nofn)if(x_n(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;pi(a)?(o=wVe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Ly(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Om(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!D_(l)&&(o=A1n(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?cS(n):t.expr?rVe(n,t.expr)+s:Oc(n)+s}function l6(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(kVe(e.type))}function S_n(e){var t;return L_(e)&&QE((t=e.scale)==null?void 0:t.type)}function T_n(e){return e.aggregate==="count"}function C_n(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(pi(r))return`${n} (binned)`;if(i&&!D_(i)){const a=(o=co(i))==null?void 0:o.unit;if(a)return`${n} (${v8(a).join("-")})`}else if(s)return Ly(s)?`${n} for max ${s.argmax}`:Om(s)?`${n} for min ${s.argmin}`:`${LO(s)} of ${n}`;return n}function A_n(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ly(t))return`${i} for argmax(${t.argmax})`;if(Om(t))return`${i} for argmin(${t.argmin})`;const s=r&&!D_(r)?co(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||pi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const vHe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return A_n(e);default:return C_n(e,t)}};let _He=vHe;function bHe(e){_He=e}function I_n(){bHe(vHe)}function Fw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=oie(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?aie(s,t):void 0;return n?fs(i,s.title,o):i??s.title??o}function oie(e){if(ZE(e)&&e.axis)return e.axis;if(gHe(e)&&e.legend)return e.legend;if(iie(e)&&e.header)return e.header}function aie(e,t){return _He(e,t)}function c6(e){if(yHe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=oie(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function O_n(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(sie(e)&&De(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ly(n)&&!Om(n))return"quantitative";if(L_(e)&&((s=e.scale)!=null&&s.type))switch(RW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Nh(e){if(Ze(e))return e;if(C8(e))return e.condition}function Bs(e){if(vn(e))return e;if(qO(e))return e.condition}function wHe(e,t,n,r={}){if(vt(e)||fr(e)||Oy(e)){const i=vt(e)?"string":fr(e)?"number":"boolean";return Qe(Pvn(t,i,e)),{value:e}}return vn(e)?f6(e,t,n,r):qO(e)?{...e,condition:f6(e.condition,t,n,r)}:e}function f6(e,t,n,r){if(yHe(e)){const{format:i,formatType:s,...o}=e;if(e_(s)&&!n.customFormatTypes)return Qe(K_e(t)),f6(o,t,n,r)}else{const i=ZE(e)?"axis":gHe(e)?"legend":iie(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(e_(o)&&!n.customFormatTypes)return Qe(K_e(t)),f6({...e,[i]:a},t,n,r)}}return Ze(e)?uie(e,t,r):P_n(e)}function P_n(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=fr(n)?"quantitative":vt(n)?"nominal":N_(n)?"temporal":void 0,{...e,type:t}}function uie(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Dre(r)&&!Ly(r)&&!Om(r)&&(Qe(Rvn(r)),delete a.aggregate),i&&(a.timeUnit=co(i)),o&&(a.field=`${o}`),pi(s)&&(a.bin=A8(s,t)),Co(s)&&!ds(t)&&Qe(c1n(t)),tu(a)){const{type:u}=a,l=D1n(u);u!==l&&(a.type=l),u!=="quantitative"&&bVe(r)&&(Qe(kvn(u,r)),a.type="quantitative")}else if(!pVe(t)){const u=O_n(a,t);a.type=u}if(tu(a)){const{compatible:u,warning:l}=k_n(a,t)||{};u===!1&&Qe(l)}if(sie(a)&&vt(a.sort)){const{sort:u}=a;if(tbe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&tbe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(iie(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function A8(e,t){return Oy(e)?{maxbins:B_e(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:B_e(t)}:e}const db={compatible:!0};function k_n(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case em:case tm:case l8:return l6(e)?db:{compatible:!1,warning:Mvn(t)};case Mi:case go:case Ry:case fS:case Yu:case Xh:case Qh:case FO:case jO:case c8:case Q1:case f8:case d8:case k_:case Vc:case td:case h8:return db;case rd:case Pc:case nd:case id:return n!==Z1?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:db;case Xm:case $y:case Ny:case Dy:case Km:case Ym:case Gm:case ed:case Kh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:db;case Ku:case My:return!l6(e)&&!S_n(e)?{compatible:!1,warning:Lvn(t)}:db;case YE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:db}}function ex(e){const{formatType:t}=c6(e);return t==="time"||!t&&R_n(e)}function R_n(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function I8(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=co(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return zO(e)?a=e.expr:Mt(e)?a=e.signal:N_(e)?(o=!0,a=J1(e)):(vt(e)||fr(e))&&o&&(a=`datetime(${Yr(e)})`,E1n(s)&&(fr(e)&&e<1e4||vt(e)&&isNaN(Date.parse(e)))&&(a=J1({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Yr(e)}function EHe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!D_(e.timeUnit)?e.timeUnit:void 0,s=I8(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function WO(e,t){return pi(e.bin)?Qm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const ibe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function GO(e){return e==null?void 0:e.condition}const xHe=["domain","grid","labels","ticks","title"],$_n={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},SHe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},N_n={...SHe,style:1,labelExpr:1,encoding:1};function sbe(e){return!!N_n[e]}const D_n={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},THe=We(D_n);function Jm(e){return"mark"in e}class O8{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Jm(t)?y_n(t.mark)===this.name:!1}}function p1(e,t){const n=e&&e[t];return n?De(n)?K1(n,r=>!!r.field):Ze(n)||C8(n):!1}function CHe(e,t){const n=e&&e[t];return n?De(n)?K1(n,r=>!!r.field):Ze(n)||ep(n)||qO(n):!1}function AHe(e,t){if(ds(t)){const n=e[t];if((Ze(n)||ep(n))&&(YVe(n.type)||Ze(n)&&n.timeUnit)){const r=kre(t);return CHe(e,r)}}return!1}function lie(e){return K1(Myn,t=>{if(p1(e,t)){const n=e[t];if(De(n))return K1(n,r=>!!r.aggregate);{const r=Nh(n);return r&&!!r.aggregate}}return!1})}function IHe(e,t){const n=[],r=[],i=[],s=[],o={};return cie(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=oie(a),m=p==null?void 0:p.title;let g=it(a,{forAs:!0});const y={...m?[]:{title:Fw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Ly(c)?(v="argmax",g=it({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Om(c)?(v="argmin",g=it({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),tu(a)&&pi(f)){if(r.push({bin:f,field:l,as:g}),n.push(it(a,{binSuffix:"end"})),WO(a,u)&&n.push(it(a,{binSuffix:"range"})),ds(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",pVe(u)||(y.type=Z1)}else if(d&&!D_(d)){i.push({timeUnit:d,field:l,as:g});const v=tu(a)&&a.type!==XE&&"time";v&&(u===FO||u===Q1?y.formatType=v:Wyn(u)?y.legend={formatType:v,...y.legend}:ds(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function M_n(e,t,n){const r=Yyn(t,n);if(r){if(r==="binned"){const i=e[t===ed?Mi:go];return!!(Ze(i)&&Ze(e[t])&&Co(i.bin))}}else return!1;return!0}function L_n(e,t,n,r){const i={};for(const s of We(e))hVe(s)||Qe(Dvn(s));for(let s of Uyn){if(!e[s])continue;const o=e[s];if(BO(s)){const a=zyn(s),u=i[a];if(Ze(u)&&N1n(u.type)&&Ze(o)&&!u.timeUnit){Qe(Ovn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Qe(Ivn),s=Vc),!M_n(e,s,t)){Qe(y8(s,t));continue}if(s===Km&&t==="line"){const a=Nh(e[s]);if(a!=null&&a.aggregate){Qe(Nvn);continue}}if(s===Yu&&(n?"fill"in e:"stroke"in e)){Qe(RVe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===jO||s===YE&&!De(o)&&!Hf(o)||s===Q1&&De(o)){if(o){if(s===YE){const a=e[s];if(mHe(a)){i[s]=a;continue}}i[s]=yt(o).reduce((a,u)=>(Ze(u)?a.push(uie(u,s)):Qe(kW(u,s)),a),[])}}else{if(s===Q1&&o===null)i[s]=null;else if(!Ze(o)&&!ep(o)&&!Hf(o)&&!T8(o)&&!Mt(o)){Qe(kW(o,s));continue}i[s]=wHe(o,s,r)}}return i}function P8(e,t){const n={};for(const r of We(e)){const i=wHe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function F_n(e){const t=[];for(const n of We(e))if(p1(e,n)){const r=e[n],i=yt(r);for(const s of i)Ze(s)?t.push(s):C8(s)&&t.push(s.condition)}return t}function cie(e,t,n){if(e)for(const r of We(e)){const i=e[r];if(De(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function j_n(e,t,n,r){return e?We(e).reduce((i,s)=>{const o=e[s];return De(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function OHe(e,t){return We(t).reduce((n,r)=>{switch(r){case Mi:case go:case f8:case h8:case d8:case ed:case Kh:case Ry:case fS:case Vc:case Ym:case td:case Gm:case nd:case rd:case id:case Pc:case FO:case Ku:case k_:case Q1:return n;case YE:if(e==="line"||e==="trail")return n;case jO:case c8:{const i=t[r];if(De(i)||Ze(i))for(const s of yt(i))s.aggregate||n.push(it(s,{}));return n}case Km:if(e==="trail")return n;case Yu:case Xh:case Qh:case Xm:case $y:case Ny:case My:case Dy:{const i=Nh(t[r]);return i&&!i.aggregate&&n.push(it(i,{})),n}}},[])}function B_n(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(De(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return De(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function DW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${fie(t)}`:"";return{field:o+t.field,type:t.type,title:Mt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=F_n(n).map(E_n);return{tooltip:[...i,...Kd(s,Gn)]}}function fie(e){const{title:t,field:n}=e;return fs(t,n)}function die(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=fie(n);return PHe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...vt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function PHe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...$h(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Oy(e[t])?{}:e[t]}}]:[]}function kHe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:eR(s,n),continuousAxisChannelDef2:eR(o,n),continuousAxisChannelDefError:eR(a,n),continuousAxisChannelDefError2:eR(u,n),continuousAxis:i}}function eR(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Qe(l1n(n,t)),r}else return e}function RHe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if($h(n)&&n.orient)return n.orient;if(t0(i)){if(t0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ex(s)&&!ex(i)?"horizontal":"vertical"}return"horizontal"}else{if(t0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const d6="boxplot",z_n=["box","median","outliers","rule","ticks"],U_n=new O8(d6,NHe);function $He(e){return fr(e)?"tukey":e}function NHe(e,{config:t}){e={...e,encoding:P8(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=$h(n)?n:{type:n};i&&Qe(PVe("boxplot"));const u=a.extent??t.boxplot.extent,l=Tr("size",a,t),c=a.invalid,f=$He(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:x}=V_n(e,u,t),b=cS(m.field),{color:T,size:A,...I}=_,k=Ye=>die(a,g,m,Ye,t.boxplot),R=k(I),P=k(_),N=(_t(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=k({...I,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...T||{value:N}}}}),B=DW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),W={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},V=f==="min-max"?B:DW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),G=[...R({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...R({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...R({partName:"ticks",mark:W,positionPrefix:"lower_whisker",extraEncoding:V}),...R({partName:"ticks",mark:W,positionPrefix:"upper_whisker",extraEncoding:V})],M=[...f!=="tukey"?G:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:B}),...F({partName:"median",mark:{type:"tick",invalid:c,..._t(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:B})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:M};const H=`datum["lower_box_${m.field}"]`,Y=`datum["upper_box_${m.field}"]`,L=`(${Y} - ${H})`,j=`${H} - ${u} * ${L}`,q=`${Y} + ${u} * ${L}`,Z=`datum["${m.field}"]`,ue={joinaggregate:DHe(m.field),groupby:y},he={transform:[{filter:`(${j} <= ${Z}) && (${Z} <= ${q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${b}`},{op:"max",field:m.field,as:`upper_whisker_${b}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${b}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${b}`},...v],groupby:y}],layer:G},{tooltip:fe,...me}=I,{scale:_e,axis:ge}=m,Be=fie(m),Me=Lu(ge,["title"]),ut=PHe(a,"outliers",t.boxplot,{transform:[{filter:`(${Z} < ${j}) || (${Z} > ${q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Be!==void 0?{title:Be}:{},..._e!==void 0?{scale:_e}:{},...Gr(Me)?{}:{axis:Me}},...me,...T?{color:T}:{},...x?{tooltip:x}:{}}})[0];let Oe;const Re=[...d,...h,ue];return ut?Oe={transform:Re,layer:[ut,he]}:(Oe=he,Oe.transform.unshift(...Re)),{...o,layer:[Oe,{transform:p,layer:M}]}}function DHe(e){const t=cS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function V_n(e,t,n){const r=RHe(e,d6),{continuousAxisChannelDef:i,continuousAxis:s}=kHe(e,r,d6),o=i.field,a=cS(o),u=$He(t),l=[...DHe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=B_n(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=IHe(p,n),w=r==="vertical"?"horizontal":"vertical",S=r,x=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:x,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:h}}const hie="errorbar",H_n=["ticks","rule"],q_n=new O8(hie,MHe);function MHe(e,{config:t}){e={...e,encoding:P8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=LHe(e,hie,t);delete s.size;const c=die(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function W_n(e,t){const{encoding:n}=e;if(G_n(n))return{orient:RHe(e,t),inputType:"raw"};const r=Y_n(n),i=K_n(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(vn(a)&&vn(u))throw new Error(`${t} cannot have both x2 and y2`);if(vn(a)){if(t0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(vn(u)){if(t0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(vn(u)&&!vn(a))throw new Error(`${t} cannot have xError2 without xError`);if(vn(c)&&!vn(l))throw new Error(`${t} cannot have yError2 without yError`);if(vn(a)&&vn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(vn(a)){if(t0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(vn(l)){if(t0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function G_n(e){return(vn(e.x)||vn(e.y))&&!vn(e.x2)&&!vn(e.y2)&&!vn(e.xError)&&!vn(e.xError2)&&!vn(e.yError)&&!vn(e.yError2)}function Y_n(e){return vn(e.x2)||vn(e.y2)}function K_n(e){return vn(e.xError)||vn(e.xError2)||vn(e.yError)||vn(e.yError2)}function LHe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=$h(r)?r:{type:r};s&&Qe(PVe(t));const{orient:l,inputType:c}=W_n(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=kHe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=X_n(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:S,[m==="x"?"xError":"yError"]:x,[m==="x"?"xError2":"yError2"]:b,...T}=i,{bins:A,timeUnits:I,aggregate:k,groupby:R,encoding:P}=IHe(T,n),N=[...k,...g],F=c!=="raw"?[]:R,B=DW(v,f,P,_);return{transform:[...a.transform??[],...A,...I,...N.length===0?[]:[{aggregate:N,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:B}}function X_n(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Qe(u1n(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:LO(h)},{fieldPrefix:"upper_",titlePrefix:obe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:obe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Fw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Fw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Fw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Qe(a1n(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:X1(X1(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function obe(e,t,n){return`${LO(e)} ${n} ${t}`}const pie="errorband",Q_n=["band","borders"],J_n=new O8(pie,FHe);function FHe(e,{config:t}){e={...e,encoding:P8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=LHe(e,pie,t),l=o,c=die(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Qe(Q_e("interpolate")):l.tension&&Qe(Q_e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const jHe={};function mie(e,t,n){const r=new O8(e,t);jHe[e]={normalizer:r,parts:n}}function Z_n(){return We(jHe)}mie(d6,NHe,z_n);mie(hie,MHe,H_n);mie(pie,FHe,Q_n);const ebn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],BHe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},zHe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},tbn=We(BHe),nbn=We(zHe),rbn={header:1,headerRow:1,headerColumn:1,headerFacet:1},UHe=We(rbn),VHe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],ibn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},sbn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},qf="_vgsid_",obn={point:{on:"click",fields:[qf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function gie(e){return e==="legend"||!!(e!=null&&e.legend)}function W7(e){return gie(e)&&_t(e)}function yie(e){return!!(e!=null&&e.select)}function HHe(e){const t=[];for(const n of e||[]){if(yie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function abn(e){return k8(e)||_ie(e)||vie(e)}function vie(e){return"concat"in e}function k8(e){return"vconcat"in e}function _ie(e){return"hconcat"in e}function qHe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Dh(e){return _t(e)&&e.step!==void 0}function abe(e){return e.view||e.width||e.height}const ube=20,ubn={align:1,bounds:1,center:1,columns:1,spacing:1},lbn=We(ubn);function cbn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(S8(e)&&!HO(e.facet)||vie(e))&&(i.columns=o),k8(e)&&(i.columns=1);for(const a of lbn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=fr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function MW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function h6(e,t){const n=p6(e,t);return Dh(n)?n.step:WHe}function p6(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return fs(n,{step:e.step})}const WHe=20,fbn={continuousWidth:200,continuousHeight:200,step:WHe},dbn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:fbn,mark:f_n,arc:{},area:{},bar:p_n,circle:{},geoshape:{},image:{},line:{},point:{},rect:m_n,rule:{color:"black"},square:{},text:{color:"black"},tick:g_n,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:B1n,projection:{},legend:ibn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:obn,style:{},title:{},facet:{spacing:ube},concat:{spacing:ube},normalizedNumberFormat:".0%"},fp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],lbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},cbe={blue:fp[0],orange:fp[1],red:fp[2],teal:fp[3],green:fp[4],yellow:fp[5],purple:fp[6],pink:fp[7],brown:fp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function hbn(e={}){return{signals:[{name:"color",value:_t(e)?{...cbe,...e}:cbe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function pbn(e){return{signals:[{name:"fontSize",value:_t(e)?{...lbe,...e}:lbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function mbn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function GHe(e){const t=We(e||{}),n={};for(const r of t){const i=e[r];n[r]=GO(i)?xVe(i):pl(i)}return n}function gbn(e){const t=We(e),n={};for(const r of t)n[r]=GHe(e[r]);return n}const ybn=[...lHe,...THe,...UHe,"background","padding","legend","lineBreak","scale","style","title","view"];function YHe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=Zx({},dn(dbn),n?mbn(n):{},t?hbn(t):{},r?pbn(r):{},s||{});i&&eS(o,"selection",i,!0);const a=Lu(o,ybn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=pl(o[u]));for(const u of lHe)o[u]&&(a[u]=xu(o[u]));for(const u of THe)o[u]&&(a[u]=GHe(o[u]));for(const u of UHe)o[u]&&(a[u]=xu(o[u]));return o.legend&&(a.legend=xu(o.legend)),o.scale&&(a.scale=xu(o.scale)),o.style&&(a.style=gbn(o.style)),o.title&&(a.title=xu(o.title)),o.view&&(a.view=xu(o.view)),a}const vbn=new Set(["view",...s_n]),_bn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],bbn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...c_n};function wbn(e){e=dn(e);for(const t of _bn)delete e[t];if(e.axis)for(const t in e.axis)GO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of ebn)delete e.legend[t];if(e.mark){for(const t of ebe)delete e.mark[t];e.mark.tooltip&&_t(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(HHe(e.params)),delete e.params);for(const t of vbn){for(const r of ebe)delete e[t][r];const n=bbn[t];if(n)for(const r of n)delete e[t][r];xbn(e,t)}for(const t of Z_n())delete e[t];Ebn(e);for(const t in e)_t(e[t])&&Gr(e[t])&&delete e[t];return Gr(e)?void 0:e}function Ebn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=EVe(e.title);Gr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Gr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Gr(r)?delete e.title:e.title=r}function xbn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Gr(s)||(e.style[n??t]=s),delete e[t]}function R8(e){return"layer"in e}function Sbn(e){return"repeat"in e}function Tbn(e){return!De(e.repeat)&&e.repeat.layer}class bie{map(t,n){return S8(t)?this.mapFacet(t,n):Sbn(t)?this.mapRepeat(t,n):_ie(t)?this.mapHConcat(t,n):k8(t)?this.mapVConcat(t,n):vie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(R8(t))return this.mapLayer(t,n);if(Jm(t))return this.mapUnit(t,n);throw new Error(Mre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Cbn={zero:1,center:1,normalize:1};function Abn(e){return e in Cbn}const Ibn=new Set([oHe,b8,_8,a6,E8,nie,rie,w8,aHe,tie]),Obn=new Set([b8,_8,oHe]);function hb(e){return Ze(e)&&JE(e)==="quantitative"&&!e.bin}function fbe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(hb(o)&&hb(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(hb(o))return t;if(hb(a))return i}else{if(hb(o))return s&&n==="vertical"?void 0:t;if(hb(a))return s&&n==="horizontal"?void 0:i}}function Pbn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function KHe(e,t){var m,g;const n=$h(e)?e:{type:e},r=n.type;if(!Ibn.has(r))return null;const i=fbe(t,"x",n)||fbe(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?it(s,{}):void 0,a=Pbn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?it(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?it(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Vyn.reduce((y,v)=>{if(v!=="tooltip"&&p1(t,v)){const _=t[v];for(const w of yt(_)){const S=Nh(w);if(S.aggregate)continue;const x=it(S,{});(!x||!l.has(x))&&y.push({channel:v,fieldDef:S})}}return y},[]);let p;return s.stack!==void 0?Oy(s.stack)?p=s.stack?"zero":null:p=s.stack:Obn.has(r)&&(p="zero"),!p||!Abn(p)||lie(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Fu.LINEAR&&s!=null&&s.stack&&Qe(i1n(s.scale.type)),vn(t[Jh(i)])?(s.stack!==void 0&&Qe(r1n(i)),null):(Ze(s)&&s.aggregate&&!tvn.has(s.aggregate)&&Qe(s1n(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:M_(r),stackBy:h,offset:p}))}function XHe(e,t,n){const r=xu(e),i=Tr("orient",r,n);if(r.orient=Nbn(r.type,t,i),i!==void 0&&i!==r.orient&&Qe(zvn(r.orient,i)),r.type==="bar"&&r.orient){const u=Tr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:h_n[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Tr("opacity",r,n),o=Tr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Rbn(r.type,t)),Tr("cursor",r,n)===void 0&&(r.cursor=kbn(r,t,n)),r}function kbn(e,t,n){return t.href||e.href||Tr("href",e,n)?"pointer":e.cursor}function Rbn(e,t){if(Yn([E8,tie,nie,rie],e)&&!lie(t))return .7}function $bn(e,t,{graticule:n}){if(n)return!1;const r=Pm("filled",e,t),i=e.type;return fs(r,i!==E8&&i!==w8&&i!==a6)}function Nbn(e,t,n){switch(e){case E8:case nie:case rie:case aHe:case r_n:case n_n:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case b8:if(Ze(r)&&(Co(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Co(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===Z1&&!pi(r.bin)||u6(r))&&Ze(i)&&Co(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===Z1&&!pi(i.bin)||u6(i))&&Ze(r)&&Co(r.bin)?"vertical":"horizontal"}case a6:if(s&&!(Ze(r)&&Co(r.bin))&&o&&!(Ze(i)&&Co(i.bin)))return;case _8:if(o)return Ze(i)&&Co(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Co(r.bin)?"vertical":"horizontal";if(e===a6){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case w8:case tie:{const a=rbe(r),u=rbe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=tu(r)&&r.type===XE,c=tu(i)&&i.type===XE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Dbn(e){const{point:t,line:n,...r}=e;return We(r).length>1?r:r.type}function Mbn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Lu(e[t],["point","line"])});return e}function G7(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?_t(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?_t(t.point)?t.point:{}:void 0}function dbe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Lbn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Jm(t)){const{mark:r,encoding:i}=t,s=$h(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!G7(s,n[s.type],i);case"area":return!!G7(s,n[s.type],i)||!!dbe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=P8(l,i),d=$h(a)?a:{type:a},h=G7(d,i[d.type],f),p=d.type==="area"&&dbe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Dbn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Lu(f,["shape"])}],g=KHe(XHe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Lu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...WE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...WE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Mbn(i)})}}function Fbn(e,t){return t?HO(e)?JHe(e,t):QHe(e,t):e}function Y7(e,t){return t?JHe(e,t):e}function LW(e,t,n){const r=t[e];if(b_n(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Qe(wvn(r.repeat));return}return t}function QHe(e,t){if(e=LW("field",e,t),e!==void 0){if(e===null)return null;if(sie(e)&&lh(e.sort)){const n=LW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function hbe(e,t){if(Ze(e))return QHe(e,t);{const n=LW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function pbe(e,t){if(vn(e)){const n=hbe(e,t);if(n)return n;if(T8(e))return{condition:e.condition}}else{if(qO(e)){const n=hbe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function JHe(e,t){const n={};for(const r in e)if(Wt(e,r)){const i=e[r];if(De(i))n[r]=i.map(s=>pbe(s,t)).filter(s=>s);else{const s=pbe(i,t);s!==void 0&&(n[r]=s)}}return n}class jbn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Jm(t)){const{encoding:n,mark:r}=t;if(r==="line"||$h(r)&&r.type==="line")for(const i of Byn){const s=R_(i),o=n[s];if(n[i]&&(Ze(o)&&!Co(o.bin)||ep(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Qe(Bvn(!!i.x2,!!i.y2)),r({...t,mark:_t(s)?{...s,type:"rule"}:"rule"},n)}}class Bbn extends bie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[U_n,q_n,J_n,new Lbn,new jbn]}map(t,n){if(Jm(t)){const r=p1(t.encoding,em),i=p1(t.encoding,tm),s=p1(t.encoding,l8);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=Y7(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Tbn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Di(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!De(r)&&t.columns&&(t=Lu(t,["columns"]),Qe(G_e("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!De(r)&&r.row||[u?u.row:null],f=!De(r)&&r.column||[u?u.column:null],d=De(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(De(r)?`${Di(p)}`:(r.row?`row_${Di(m)}`:"")+(r.column?`column_${Di(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Lu(_,["data"]))}const h=De(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return HO(r)&&t.columns&&(t=Lu(t,["columns"]),Qe(G_e("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=gbe({parentProjection:o,projection:i}),l=mbe({parentEncoding:s,encoding:Y7(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=Y7(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Qe(Fvn([...r?[em]:[],...i?[tm]:[]]));const o={},a={};for(const u of[em,tm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Fbn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:mbe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:gbe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function mbe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...We(e),...We(t)]);for(const s of i){const o=t[s],a=e[s];if(vn(o)){const u={...a,...o};r[s]=u}else qO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Hf(a)||Mt(a)||vn(a)||De(a))&&(r[s]=a)}}else r=t;return!r||Gr(r)?void 0:r}function gbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Qe(Avn({parentProjection:t,projection:n})),n??t}function wie(e){return"filter"in e}function zbn(e){return(e==null?void 0:e.stop)!==void 0}function ZHe(e){return"lookup"in e}function Ubn(e){return"data"in e}function Vbn(e){return"param"in e}function Hbn(e){return"pivot"in e}function qbn(e){return"density"in e}function Wbn(e){return"quantile"in e}function Gbn(e){return"regression"in e}function Ybn(e){return"loess"in e}function Kbn(e){return"sample"in e}function Xbn(e){return"window"in e}function Qbn(e){return"joinaggregate"in e}function Jbn(e){return"flatten"in e}function Zbn(e){return"calculate"in e}function eqe(e){return"bin"in e}function ewn(e){return"impute"in e}function twn(e){return"timeUnit"in e}function nwn(e){return"aggregate"in e}function rwn(e){return"stack"in e}function iwn(e){return"fold"in e}function swn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function own(e){return e.map(t=>wie(t)?{filter:Mw(t.filter,$1n)}:t)}class awn extends bie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=ybe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=ybe(t,n),t.encoding){const r={};for(const[i,s]of ay(t.encoding))r[i]=tqe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:ay(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function ybe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(wie(s))return{filter:FW(s,t)};if(eqe(s)&&$_(s.bin))return{...s,bin:nqe(s.bin)};if(ZHe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function tqe(e,t){var r,i;const n=dn(e);if(Ze(n)&&$_(n.bin)&&(n.bin=nqe(n.bin)),L_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(T8(n))if(De(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:FW(s,t)}});else{const{selection:s,param:o,test:a,...u}=tqe(n.condition,t);n.condition=o?n.condition:{...u,test:FW(n.condition,t)}}return n}function nqe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function FW(e,t){const n=r=>Mw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Mw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class jW extends bie{map(t,n){const r=n.selections??[];if(t.params&&!Jm(t)){const i=[];for(const s of t.params)yie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(vt(a)&&(a===t.name||i.includes(a))||De(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=jW.prototype[e];jW.prototype[e]=function(n,r){return t.call(this,n,uwn(n,r))}}function uwn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function rqe(e,t){t===void 0&&(t=YHe(e.config));const n=dwn(e,t),{width:r,height:i}=e,s=hwn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const lwn=new Bbn,cwn=new awn,fwn=new jW;function dwn(e,t={}){const n={config:t};return fwn.map(lwn.map(cwn.map(e,n),n),n)}function vbe(e){return vt(e)?{type:e}:e??{}}function hwn(e,t,n){let{width:r,height:i}=t;const s=Jm(e)||R8(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Qe(V_e("width")),r=void 0),i=="container"&&(Qe(V_e("height")),i=void 0));const a={type:"pad",...o,...n?vbe(n.autosize):{},...vbe(e.autosize)};if(a.type==="fit"&&!s&&(Qe(cvn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Qe(H_e("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Qe(H_e("height")),!wl(a,{type:"pad"}))return a}function pwn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function mwn(e){return e?`fit-${p8(e)}`:"fit"}const gwn=["background","padding"];function _be(e,t){const n={};for(const r of gwn)e&&e[r]!==void 0&&(n[r]=pl(e[r]));return t&&(n.params=e.params),n}class Zm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Zm(dn(this.explicit),dn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return fs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of We(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function xd(e){return{explicit:!0,value:e}}function ol(e){return{explicit:!1,value:e}}function iqe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:$8(t,n,r,i)}}function $8(e,t,n,r){return e.explicit&&t.explicit&&Qe(Xvn(n,r,e.value,t.value)),e}function cy(e,t,n,r,i=$8){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:wl(e.value,t.value)?e:i(e,t,n,r)}class ywn extends Zm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function tx(e){return"url"in e}function QA(e){return"values"in e}function sqe(e){return"name"in e&&!tx(e)&&!QA(e)&&!C0(e)}function C0(e){return e&&(oqe(e)||aqe(e)||Eie(e))}function oqe(e){return"sequence"in e}function aqe(e){return"sphere"in e}function Eie(e){return"graticule"in e}var ki;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ki||(ki={}));function uqe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Oc(i.field),i}function n_(e,t=!0,n=Ca){if(De(e)){const r=e.map(i=>n_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(N_(e))return n(t?J1(e):w1n(e));return t?n(Yr(e)):e}function vwn(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${dy}, ${n.resolve==="global"?"true":`{unit: ${m1(e)}}`}`;for(const s of L8)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Xwn,on:[{events:{signal:n.name+dy},update:`modify(${nt(n.name+r_)}, ${i})`}]})}return xie(t)}function _wn(e,t){if(e.component.selection&&We(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:ky("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return xie(t)}function bwn(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=nt(i+r_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Cqe}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of L8)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),xie(t)}function wwn(e,t){const n=[...t],r=m1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+r_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:qf}}]),i.init){const a=i.project.items.map(uqe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[qf]:n_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:n_(u,!1)}))}n.filter(a=>a.name===i.name+r_).length||n.push(s)}return n}function lqe(e,t){for(const n of Mo(e.component.selection??{}))for(const r of L8)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Ewn(e,t){for(const n of e.children)Qi(n)&&(t=lqe(n,t));return t}function xwn(e,t,n,r){const i=kqe(e,t.param,t);return{signal:jl(n.get("type"))&&De(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function xie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ur{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Qe(Svn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class ju extends Ur{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${sVe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function K7(e){return e.as!==void 0}function bbe(e){return`${e}_end`}class ch extends Ur{clone(){return new ch(null,dn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(D_(u)){if(Qi(n)){const{mark:c,markDef:f,config:d}=n,h=ly({fieldDef:s,markDef:f,config:d});(XA(c)||h)&&(l={timeUnit:co(u),field:a})}}else l={as:it(s,{forAs:!0}),field:a,timeUnit:u};if(Qi(n)){const{mark:c,markDef:f,config:d}=n,h=ly({fieldDef:s,markDef:f,config:d});XA(c)&&ds(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Gn(l)]=l)}return i},{});return Gr(r)?null:new ch(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=co(r),o={...i,timeUnit:s};return new ch(t,{[Gn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of ay(this.timeUnits)){const s=K7(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>K7(t)?t.as:bbe(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Gn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=co(n.timeUnit);if(K7(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Oc(s),type:"timeunit",...a?{units:v8(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...wbe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=cqe({timeUnit:i,field:o}),u=bbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...wbe([o,u],r,i))}}return t}}const N8="offsetted_rect_start",D8="offsetted_rect_end";function cqe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=zVe(r),{part:o,step:a}=qVe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function wbe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Ebe([cqe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${N8}`},{type:"formula",expr:Ebe([i,s],n+.5),as:`${e}_${D8}`}]}return[]}function Ebe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const YO="_tuple_fields";class Swn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Twn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Swn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Di(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Di(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?yt(n.value):null;let{fields:d,encodings:h}=_t(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(_t(p))for(const m of We(p))jyn(m)?(h||(h=[])).push(m):l==="interval"?(Qe(bvn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Qe(fvn(p,m.aggregate));continue}else if(!g){Qe(W_e(p));continue}if(m.timeUnit&&!D_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Gn(y)]=y}if(!s[g]){const y=l==="interval"&&Qm(p)&&jl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===qf,fVe(p)?(v.geoChannel=p,v.channel=cVe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Qe(W_e(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===qf}f&&(t.init=f.map(p=>i.items.map(m=>_t(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Gr(o)||(i.timeUnit=new ch(null,o))},signals:(e,t,n)=>{const r=t.name+YO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(uqe)})}},nm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Qm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Qe(mvn),!s||!jl(o)){Qe(pvn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||xbe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(Cqe)>=0)i.update=`{${r.map(o=>`${nt(Oc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt(Oc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!xbe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function BW(e,t){return`domain(${nt(e.scaleName(t))})`}function xbe(e){return e.parent&&yS(e.parent)&&!e.parent.parent}const jw="_brush",fqe="_scale_trigger",wT="geo_interval_init_tick",dqe="_init",Cwn="_center",Awn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={..._t(n.select)?n.select:{}};i.fields=[qf],i.encodings||(i.encodings=n.value?We(n.value):[rd,nd]),n.select={type:"interval",...i}}if(t.translate&&!nm.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+jw)}`;for(const s of t.events){if(!s.between){Qe(`${s} is not an ordered event stream for interval selections.`);continue}const o=yt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+dy,s=Mo(t.project.hasChannel).filter(a=>a.channel===Mi||a.channel===go),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Iwn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+Cwn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=S=>e.getSizeSignalRef(S).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+dqe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(x=>x.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${m1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:wT}]:[]],update:_}]})}else{if(!nm.defined(t)){const l=r+fqe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=jl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${m1(e)}, fields: ${r+YO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${n_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Qi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===wT).length||n.unshift({name:wT,value:null,on:[{events:"timer{1}",update:`${wT} === null ? {} : ${wT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+r_)})`;if(nm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of We(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${m1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=We(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+jw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+jw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Iwn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Mi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=nm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:n_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+fqe},update:jl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:n_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Mi?0:1,h=t.name+dqe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Own={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+YO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+jw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${m1(e)}, `;if(t.project.hasSelectionId)l+=`${qf}: ${o}[${nt(qf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+dy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function hS(e,t,n,r){const i=T8(t)&&t.condition,s=r(t);if(i){const a=yt(i).map(u=>{const l=r(u);if(__n(u)){const{param:c,empty:f}=u;return{test:Pqe(e,{param:c,empty:f}),...l}}else return{test:y6(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Sie(e,t="text"){const n=e.encoding[t];return hS(e,n,t,r=>M8(r,e.config))}function M8(e,t,n="datum"){if(e){if(Hf(e))return Ei(e.value);if(vn(e)){const{format:r,formatType:i}=c6(e);return eie({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function hqe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(De(o))return{tooltip:Sbe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return hS(e,o,"tooltip",u=>{const l=M8(u,i,a);if(l)return l;if(u===null)return;let c=Tr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),vt(c))return{value:c};if(_t(c))return Mt(c)?c:c.content==="encoding"?Sbe(n,s,i,t):{signal:a}})}}function pqe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=R_(f),h=tu(c)?c:{...c,type:e[d].type},p=h.title||aie(h,i),m=yt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ds(f)){const y=f==="x"?"x2":"y2",v=Nh(e[y]);if(Co(h.bin)&&v){const _=it(h,{expr:o}),w=it(v,{expr:o}),{format:S,formatType:x}=c6(h);g=VO(_,w,S,x,i),s[y]=!0}}if((ds(f)||f===Vc||f===td)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=c6(h);g=eie({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=M8(h,i,o).signal),a.push({channel:f,key:m,value:g})}cie(e,(c,f)=>{Ze(c)?u(c,f):C8(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Sbe(e,t,n,{reactiveGeom:r}={}){const i=pqe(e,t,n,{reactiveGeom:r}),s=ay(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Pwn(e){const{markDef:t,config:n}=e,r=Tr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...kwn(e),...Rwn(e)}}function kwn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Tr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in avn?{}:{ariaRoleDescription:{value:t}}}function Rwn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return hS(e,s,"description",u=>M8(u,e.config));const o=Tr("description",n,r);if(o!=null)return{description:Ei(o)};if(r.aria===!1)return{};const a=pqe(t,i,r);if(!Gr(a))return{description:{signal:ay(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function ro(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Tr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Ei(u)));const l=i[e];return hS(t,l,o??e,c=>Zre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function mqe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Tr("filled",n,i),a=Yn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Tr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Tr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Ei(u)}:{},...l?{stroke:Ei(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Qe(RVe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ro("color",e,{vgChannel:c,defaultValue:o?u:l}),...ro("fill",e,{defaultValue:r.fill?u:void 0}),...ro("stroke",e,{defaultValue:r.stroke?l:void 0})}}function $wn(e){const{encoding:t,mark:n}=e,r=t.order;return!M_(n)&&Hf(r)?hS(e,r,"zindex",i=>Ei(i.value)):{}}function nx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Zre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Ei(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ma(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Jh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=nx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Tie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ds(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Nwn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Nwn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(vn(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return o6({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return h1(n,r,{suffix:"end"},{offset:s})}return Qre(e)}function Tie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=R_(n),u=uy(n),l=Tr(n,s,o,{vgChannel:u});if(l!==void 0)return hC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Yn([Fu.LOG,Fu.TIME,Fu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Xu(n)],mult:.5}}}}const Dwn={left:"x",center:"xc",right:"x2"},Mwn={top:"y",middle:"yc",bottom:"y2"};function gqe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return uy(e);const i=e==="x"?"align":"baseline",s=Tr(i,t,n);let o;return Mt(s)?(Qe(jvn(i)),o=void 0):o=s,e==="x"?Dwn[o||(r==="top"?"left":"center")]:Mwn[o||r]}function m6(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?yqe(e,t,{defaultPos:n,defaultPos2:r}):ma(e,t,{defaultPos:n})}function yqe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Jh(e),a=Xu(e),u=Lwn(t,r,o),l=u[a]?gqe(e,i,s):uy(e);return{...ma(e,t,{defaultPos:n,vgChannel:l}),...u}}function Lwn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=R_(n),l=Xu(n),c=uy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?nx({channel:n,markDef:s,encoding:r,model:e}):nx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Xu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Fwn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:tR(n,s)||tR(n,{[n]:i6(n,s,a.style),[l]:i6(l,s,a.style)})||tR(n,a[i])||tR(n,a.mark)||{[c]:Tie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Fwn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return vn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?h1(t,s,{suffix:"start"},{offset:u}):Qre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function tR(e,t){const n=Xu(e),r=uy(e);if(t[r]!==void 0)return{[r]:hC(e,t[r])};if(t[e]!==void 0)return{[r]:hC(e,t[e])};if(t[n]){const i=t[n];if(t_(i))Qe($vn(n));else return{[n]:hC(e,i)}}}function fy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Jh(t),a=Xu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Tr("size",i,n,{vgChannel:a}),p=mVe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(pi(u.bin)||Co(u.bin)||u.timeUnit&&!l)&&!(h&&!t_(h))&&!r[p]&&!ho(f)?zwn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(vn(u)&&ho(f)||m)&&!l?Bwn(u,t,e):yqe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function jwn(e,t,n,r,i,s,o){if(t_(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Pm("minBandSize",{type:o},r);return{signal:c?`max(${wf(c)}, ${l})`:l}}else i.band!==1&&(Qe(Vvn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Mt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Fy(u)&&fr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=fs(u,o==="bar"?l:c);if(Mt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(fr(f))return{signal:`${1-f} * ${e}`}}return{value:h6(r.view,e)-2}}function Bwn(e,t,n){var A,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Xu(t),f=Jh(t),d=mVe(t),h=n.scaleName(d),p=n.getScaleComponent(kre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=ro("size",n,{vgChannel:c,defaultRef:Ei(r.size)}):Qe(Gvn(r.type)));const y=!!g,v=hHe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:jwn(c,h||u,p||l,s,v,!!e,r.type)};const _=((I=l||p)==null?void 0:I.get("type"))==="band"&&t_(v)&&!y?"top":"middle",w=gqe(t,r,s,_),S=w==="xc"||w==="yc",{offset:x,offsetType:b}=nx({channel:t,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),T=Qre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:x,defaultRef:Tie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:S?b==="encoding"?0:.5:Mt(v)?{signal:`(1-${v})/2`}:t_(v)?(1-v.band)/2:0});if(c)return{[w]:T,...g};{const k=uy(f),R=g[c],P=x?{...R,offset:x}:R;return{[w]:T,[k]:De(T)?[T[0],{...T[1],offset:P}]:{...T,offset:P}}}}function Tbe(e,t,n,r,i,s,o){if(lVe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Mt(n)||Mt(i)||Mt(r)||s){const l=wf(n),c=wf(i),f=wf(r),d=wf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function zwn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=hHe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=ds(n)?Tr("binSpacing",s,i)??0:0,m=Jh(n),g=uy(n),y=uy(m),v=Pm("minBandSize",s,i),{offset:_}=nx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=nx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),S=J1n({fieldDef:e,scaleName:u}),x=Tbe(n,p,c,h,_,v,S),b=Tbe(m,p,c,h,w??_,v,S),T=Mt(f)?{signal:`(1-${f.signal})/2`}:t_(f)?(1-f.band)/2:.5,A=ly({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(pi(e.bin)||e.timeUnit){const k=e.timeUnit&&A!==.5;return{[y]:Cbe({fieldDef:e,scaleName:u,bandPosition:T,offset:b,useRectOffsetField:k}),[g]:Cbe({fieldDef:e,scaleName:u,bandPosition:Mt(T)?{signal:`1-${T.signal}`}:1-T,offset:x,useRectOffsetField:k})}}else if(Co(e.bin)){const k=h1(e,u,{},{offset:b});if(Ze(t))return{[y]:k,[g]:h1(t,u,{},{offset:x})};if($_(e.bin)&&e.bin.step)return{[y]:k,[g]:{signal:`scale("${u}", ${it(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}Qe(DVe(m))}function Cbe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return o6({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:N8,endSuffix:D8}:{}})}const Uwn=new Set(["aria","width","height"]);function Hc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?mqe(e):{};return{...Vwn(e.markDef,t),...Abe(e,"fill",n),...Abe(e,"stroke",r),...ro("opacity",e),...ro("fillOpacity",e),...ro("strokeOpacity",e),...ro("strokeWidth",e),...ro("strokeDash",e),...$wn(e),...hqe(e),...Sie(e,"href"),...Pwn(e)}}function Abe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Tr("invalid",s,r)==="hide"&&n&&!M_(i)){const a=Hwn(e,{invalid:!0,channels:m8});if(a)return{[t]:[{test:a,value:null},...yt(n)]}}return n?{[t]:n}:{}}function Vwn(e,t){return ovn.reduce((n,r)=>(!Uwn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Ei(e[r])),n),{})}function Hwn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&jl(u)&&(s[l]=!0)}return s},{}),i=We(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Jre(o,t)).join(` ${s} `)}}function Cie(e){const{config:t,markDef:n}=e;if(Tr("invalid",n,t)){const i=qwn(e,{channels:Zh});if(i)return{defined:{signal:i}}}return{}}function qwn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&jl(l)&&(s[c]=!0)}return s},{}),i=We(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Jre(o,t)).join(` ${s} `)}}function Ibe(e,t){if(t!==void 0)return{[e]:Ei(t)}}const X7="voronoi",vqe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(X7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(M_(s))return Qe(dvn(s)),n;const o={name:e.getName(X7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...hqe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(X7)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},_qe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!gie(e.bind),parse:(e,t,n)=>Aqe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=vqe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Di(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:n_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+dy)[0],o=r+YO,a=i.items.map(l=>Di(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},g6="_toggle",bqe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+g6,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+dy,r=t.name+g6;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${m1(e)}}, `)+`${r} ? ${n} : null`}},Wwn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=vt(t.clear)?ky(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(_qe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Di(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+dy);r(i,"null"),bqe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+g6),r(i,"false"))}return n}},wqe={defined:e=>{const t=e.resolve==="global"&&e.bind&&gie(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==qf;return t&&!n&&Qe(gvn),t&&n},parse:(e,t,n)=>{const r=dn(n);if(r.select=vt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Aqe(t,r),_t(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=yt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=W7(t.bind)?t.bind.legend:"click",s=vt(i)?ky(i,"view"):yt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=W7(t.bind)&&t.bind.legend,s=o=>a=>{const u=dn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Di(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+dy),o=r+YO,a=i.items.filter(d=>d.hasLegend).map(d=>Di(`${r}_${Di(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+g6),f=W7(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Gwn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&wqe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Eqe="_translate_anchor",xqe="_translate_delta",Ywn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+Eqe,{x:o,y:a}=t.project.hasChannel;let u=ky(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+jw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?BW(e,Mi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?BW(e,go):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+xqe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Obe(e,t,o,"width",n),a!==void 0&&Obe(e,t,a,"height",n),n}};function Obe(e,t,n,r,i){const s=t.name,o=s+Eqe,a=s+xqe,u=n.channel,l=nm.defined(t),c=i.filter(S=>S.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Mi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const Sqe="_zoom_anchor",Tqe="_zoom_delta",Kwn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+Tqe,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(Mi)),l=nt(e.scaleName(go));let c=ky(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+jw,f))),n.push({name:r+Sqe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Pbe(e,t,o,"width",n),a!==void 0&&Pbe(e,t,a,"height",n),n}};function Pbe(e,t,n,r,i){const s=t.name,o=n.channel,a=nm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?BW(e,o):u.name,h=s+Tqe,p=`${s}${Sqe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const r_="_store",dy="_tuple",Xwn="_modify",Cqe="vlSelectionResolve",L8=[Own,Awn,Twn,bqe,_qe,nm,wqe,Wwn,Ywn,Kwn,vqe];function Qwn(e){let t=e.parent;for(;t&&!Il(t);)t=t.parent;return t}function m1(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=Qwn(e);if(r){const{facet:i}=r;for(const s of hc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function Aie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Aqe(e,t){(vt(t.select)||!t.select.on)&&delete e.events,(vt(t.select)||!t.select.clear)&&delete e.clear,(vt(t.select)||!t.select.toggle)&&delete e.toggle}function zW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...zW(e.object)),t.push(...zW(e.property))),t)}function Iqe(e){return e.object.type==="MemberExpression"?Iqe(e.object):e.object.name==="datum"}function Oqe(e){const t=Gne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Iqe(r)&&n.add(zW(r).slice(1).join("."))}),n}class pS extends Ur{clone(){return new pS(null,this.model,dn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=y6(this.model,this.filter,this),this._dependentFields=Oqe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Jwn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Di(i.name),o=i.select,a=vt(o)?o:o.type,u=_t(o)?dn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=dn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:vt(u.on)?ky(u.on,"scope"):yt(dn(u.on))},f=dn(i);for(const d of L8)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Pqe(e,t,n,r="datum"){const i=vt(t)?t:t.param,s=Di(i),o=nt(s+r_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function kqe(e,t,n){const r=Di(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Qe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Qe((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt(Oc(s))}]`}function Zwn(e,t){for(const[n,r]of ay(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new ju(new pS(t,e,{param:n}),i,ki.Lookup,e.component.data.outputNodeRefCounts)}}function y6(e,t,n){return dC(t,r=>vt(r)?r:P1n(r)?Pqe(e,r,n):GVe(r))}function eEn(e,t){if(e)return De(e)&&!Pg(e)?e.map(n=>aie(n,t)).join(", "):e}function Q7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function h2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=$_n[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(GO(m)){const{condition:g,...y}=m,v=yt(g),_=ibe[h];if(_){const{vgProp:w,part:S}=_,x=[...v.map(b=>{const{test:T,...A}=b;return{test:y6(null,T),...A}}),y];Q7(c,S,w,x),delete c[h]}else if(_===null){const w={signal:v.map(S=>{const{test:x,...b}=S;return`${y6(null,x)} ? ${U_e(b)} : `}).join("")+U_e(y)};c[h]=w}}else if(Mt(m)){const g=ibe[h];if(g){const{vgProp:y,part:v}=g;Q7(c,v,y,m),delete c[h]}}Yn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Gr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:fs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Mt(c.encode.labels.update.text)&&(p=X1(a,"datum.label",c.encode.labels.update.text.signal)),Q7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of xHe)e.hasAxisPart(p)||delete c.encode[p];Gr(c.encode)&&delete c.encode}const h=eEn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:fs(l,0)}}}}function Rqe(e){const{axes:t}=e.component,n=[];for(const r of Zh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function tEn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>h2(i,"grid",t)),...r.map(i=>h2(i,"grid",t)),...n.map(i=>h2(i,"main",t)),...r.map(i=>h2(i,"main",t))].filter(i=>i)}function kbe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...We(o),...We(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${wf(o[c])} : ${wf(a[c])}`};return l}return t[i]})])}function nEn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:QVe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Mt(n)?"axisOrient":`axis${LO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:kbe(a,r,e,n),vgAxisConfig:kbe(u,r,e,n),axisConfigStyle:rEn([...u,...a],r)}}function rEn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=yt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function UW(e,t,n,r={}){var s;const i=TVe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Rbe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??iEn(n,e),gridScale:({model:e,channel:t})=>sEn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Nqe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||$qe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??aEn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??uEn(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??cEn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:fEn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Dqe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return AVe(i?[nbe(i)]:[],Ze(o)?[nbe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>dEn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??hEn(n,t)};function iEn(e,t){return!ho(e)&&Ze(t)&&!pi(t==null?void 0:t.bin)&&!Co(t==null?void 0:t.bin)}function sEn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function oEn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Mt(s)?s:KA(s);{const{configValue:o}=UW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?KA(o):n===Mi&&Yn([Xre,Kre],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function VW(e){return`(((${e.signal} % 360) + 360) % 360)`}function $qe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Mt(e)){const i=VW(e),s=Mt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Mt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Mt(e)){const i=VW(e),s=Mt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Mt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Nqe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Mt(e)){const o=VW(e),a=Mt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Mt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function aEn(e,t){if(t==="x"&&Yn(["quantitative","temporal"],e))return!0}function uEn(e,t,n,r){if(n&&!_t(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function lEn(e){return e==="x"?"bottom":"left"}function cEn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ho(t)&&t!=="log"){if(Ze(e)){if(pi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Yn(["month","hours","day","quarter"],(i=co(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function fEn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=HVe(n);if(r)return{signal:r}}}}function Dqe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return IVe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function dEn(e,t){const n=e.values;if(De(n))return EHe(t,n);if(Mt(n))return n}function hEn(e,t){return e==="rect"&&l6(t)?1:0}class rx extends Ur{clone(){return new rx(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Oqe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(L_(r)&&dHe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${GVe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new rx(t,{calculate:u,as:ix(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Gn(this.transform)}`}}function ix(e,t,n){return it(e,{prefix:t,suffix:"sort_index",...n})}function F8(e,t){return Yn(["top","bottom"],t)?"column":Yn(["left","right"],t)||e==="row"?"row":"column"}function sx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return fs((t||{})[e],i[e],n.header[e])}function j8(e,t,n,r){const i={};for(const s of e){const o=sx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Iie=["row","column"],Oie=["header","footer"];function pEn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=j8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=F8(t,a),l=KA(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Lqe(l,u),...Mqe(u,l,s),...Fqe(r,i,t,tbn,BHe)}}}function Mqe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Nqe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Lqe(e,t){const n=$qe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function mEn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Oie)if(n[i])for(const s of n[i]){const o=yEn(e,t,i,n,s);o!=null&&r.push(o)}return r}function gEn(e,t){const{sort:n}=e;return lh(n)?{field:it(n,{expr:"datum"}),order:n.order??"ascending"}:De(n)?{field:ix(e,t,{expr:"datum"}),order:"ascending"}:{field:it(e,{expr:"datum"}),order:n??"ascending"}}function HW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=j8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=eie({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=F8(t,a);return{text:{signal:u?X1(X1(u,"datum.label",l),"datum.value",it(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Lqe(s,c),...Mqe(c,s,o),...Fqe(n,e,t,nbn,zHe)}}function yEn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=j8(["labelOrient"],o.header,a,t);(t==="row"&&!Yn(["top","bottom"],f)||t==="column"&&!Yn(["left","right"],f))&&(s=HW(o,t,a))}const u=Il(e)&&!HO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:gEn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const vEn={column:{start:0,end:1},row:{start:1,end:0}};function _En(e,t){return vEn[t][e]}function bEn(e,t){const n={};for(const r of hc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=j8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=F8(r,o),u=_En(s,a);u!==void 0&&(n[a]=u)}}return Gr(n)?void 0:n}function Fqe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=sx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Pie(e){return[...nR(e,"width"),...nR(e,"height"),...nR(e,"childWidth"),...nR(e,"childHeight")]}function nR(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ho(o)&&Fy(a)){const u=e.scaleName(n);return Il(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[$be(u,a)]:[$be(u,a),{name:i,update:jqe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=MW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function $be(e,t){const n=`${e}_step`;return Mt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function jqe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=fs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${wf(o)}, ${wf(s)}) * ${e}_step`}function Bqe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function zqe(e,t){return We(e).reduce((n,r)=>{const i=e[r];return{...n,...hS(t,i,r,s=>Ei(s.value))}},{})}function Uqe(e,t){if(Il(t))return e==="theta"?"independent":"shared";if(yS(t))return"shared";if(Lie(t))return ds(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function kie(e,t){const n=e.scale[t],r=ds(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Qe(Jvn(t)),"independent"):e[r][t]||"shared"}const wEn={...sbn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Vqe=We(wEn);class EEn extends Zm{}const Nbe={symbols:xEn,gradient:SEn,labels:TEn,entries:CEn};function xEn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...lvn({},n,u_n),...mqe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?Hqe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Yu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Ei(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Ei(m??1));else if(De(f.fill)){const g=qW(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Ei(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Yu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(De(f.stroke)){const g=fs(qW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Xm){const g=Ze(t)&&Wqe(n,i,t);g?f.opacity=[{test:g,...Ei(m??1)},Ei(u.legend.unselectedOpacity)]:m&&(f.opacity=Ei(m))}return f={...f,...e},Gr(f)?void 0:f}function SEn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Hqe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Ei(l)),a={...a,...e},Gr(a)?void 0:a}function TEn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?Wqe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;e_(c)?f=xf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=xf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=xf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Gr(d)?void 0:d}function CEn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Hqe(e){return qqe(e,(t,n)=>Math.max(t,n.value))}function qW(e){return qqe(e,(t,n)=>fs(t,n.value))}function qqe(e,t){if(w_n(e))return yt(e.condition).reduce(t,e.value);if(Hf(e))return e.value}function Wqe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(Di(s)+r_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Dbe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return rHe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return iHe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??$En(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??NEn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??IEn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Fw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Lw(n)&&Ef(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>AEn(t,e)};function AEn(e,t){const n=e.values;if(De(n))return EHe(t,n);if(Mt(n))return n}function IEn(e,t,n,r){if(t!=="shape"){const i=qW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function OEn(e){const{legend:t}=e;return fs(t.type,PEn(e))}function PEn({channel:e,timeUnit:t,scaleType:n}){if(Lw(e)){if(Yn(["quarter","month","day"],t))return"symbol";if(Ef(n))return"gradient"}return"symbol"}function kEn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??REn(n,t)}function REn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function $En({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Ef(i))return n==="horizontal"?r==="top"||r==="bottom"?Mbe(t,"width",o,s):o:Mbe(t,"height",u,a)}function Mbe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function NEn(e){if(Yn(["quantile","threshold","log","symlog"],e))return"greedy"}function Gqe(e){const t=Qi(e)?DEn(e):jEn(e);return e.component.legends=t,t}function DEn(e){const{encoding:t}=e,n={};for(const r of[Yu,...VHe]){const i=Bs(t[r]);!i||!e.getScaleComponent(r)||r===Ku&&Ze(i)&&i.type===dS||(n[r]=FEn(e,r))}return n}function MEn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function LEn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function FEn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new EEn({},MEn(e,t));Gwn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Bs(i[t]),f=Ze(c)?(w=co(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=OEn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=kEn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const S of Vqe){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const x=S in Dbe?Dbe[S](m):n[S];if(x!==void 0){const b=LEn(x,S,n,e.fieldDef(t));(b||s.legend[S]===void 0)&&a.set(S,x,b)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const x=zqe(g[S]??{},e),b=S in Nbe?Nbe[S](x,_):x;b!==void 0&&!Gr(b)&&(v[S]={...y!=null&&y.length&&Ze(c)?{name:`${Di(c.field)}_legend_${S}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:b})}return Gr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function jEn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Gqe(r);for(const i of We(r.component.legends))n.legend[i]=kie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Yqe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of We(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Yqe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Vqe){const c=cy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return BEn(f,d);case"title":return OVe(f,d);case"type":return i=!0,ol("symbol")}return $8(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&r6(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&r6(e.explicit,["encode","gradient"])),e}function BEn(e,t){return t.value==="circle"?t:e}function zEn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Kqe(e){const t=e.component.legends,n={};for(const i of We(t)){const s=e.getScaleComponent(i),o=Yr(s.get("domains"));if(n[o])for(const a of n[o])Yqe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>UEn(i,e.config)).filter(i=>i!==void 0)}function UEn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of VHe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Mt(s.encode.labels.update.text)&&(l=X1(r,"datum.label",s.encode.labels.update.text.signal)),zEn(s,"labels","text",{signal:l})}return s}}function VEn(e){return yS(e)||Lie(e)?HEn(e):Xqe(e)}function HEn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Xqe(e))}function Xqe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Mt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Yn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const qEn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Qqe extends Zm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function Jqe(e){e.component.projection=Qi(e)?WEn(e):KEn(e)}function WEn(e){if(e.hasProjection){const t=xu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?GEn(e):void 0,s=new Qqe(e.projectionName(!0),{...xu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function GEn(e){const t=[],{encoding:n}=e;for(const r of[[rd,nd],[Pc,id]])(Bs(n[r[0]])||Bs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ku)&&e.typedFieldDef(Ku).type===dS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ki.Main)),t}function YEn(e,t){const n=Sre(qEn,i=>!!(!Wt(e.explicit,i)&&!Wt(t.explicit,i)||Wt(e.explicit,i)&&Wt(t.explicit,i)&&wl(e.get(i),t.get(i))));if(wl(e.size,t.size)){if(n)return e;if(wl(e.explicit,{}))return t;if(wl(t.explicit,{}))return e}return null}function KEn(e){if(e.children.length===0)return;let t;for(const r of e.children)Jqe(r);const n=Sre(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=YEn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Qqe(r,t.specifiedProjection,t.size,dn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function XEn(e,t,n,r){if(WO(t,n)){const i=Qi(e)?e.axis(n)??e.legend(n)??{}:{},s=it(t,{expr:"datum"}),o=it(t,{expr:"datum",binSuffix:"end"});return{formulaAs:it(t,{binSuffix:"range",forAs:!0}),formula:VO(s,o,i.format,i.formatType,r)}}return{}}function Zqe(e,t){return`${wVe(e)}_${t}`}function QEn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Rie(e,t,n){const r=A8(n,void 0)??{},i=Zqe(r,t);return e.getName(`${i}_bins`)}function JEn(e){return"as"in e}function Lbe(e,t,n){let r,i;JEn(e)?r=vt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[it(e,{forAs:!0}),it(e,{binSuffix:"end",forAs:!0})];const s={...A8(t,void 0)},o=Zqe(s,e.field),{signal:a,extentSignal:u}=QEn(n,o);if(g8(s.extent)){const c=s.extent;i=kqe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class fh extends Ur{clone(){return new fh(null,dn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(tu(s)&&pi(s.bin)){const{key:a,binComponent:u}=Lbe(s,s.bin,n);i[a]={...u,...i[a],...XEn(n,s,o,n.config)}}return i},{});return Gr(r)?null:new fh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Lbe(n,n.bin,r);return new fh(t,{[i]:s})}merge(t,n){for(const r of We(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Kd([...this.bins[r].as,...t.bins[r].as],Gn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${Gn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Oc(t.field),as:r,signal:t.signal,...g8(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Oc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:it({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function ZEn(e,t,n,r){var s;const i=Qi(r)?r.encoding[Jh(t)]:void 0;if(tu(n)&&Qi(r)&&pHe(n,i,r.markDef,r.config)){e.add(it(n,{})),e.add(it(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=ly({fieldDef:n,markDef:a,config:u});XA(o)&&l!==.5&&ds(t)&&(e.add(it(n,{suffix:N8})),e.add(it(n,{suffix:D8}))),n.bin&&WO(n,t)&&e.add(it(n,{binSuffix:"range"}))}else if(fVe(t)){const o=cVe(t);e.add(r.getName(o))}else e.add(it(n));return L_(n)&&V1n((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function exn(e,t){for(const n of We(t)){const r=t[n];for(const i of We(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class $f extends Ur{clone(){return new $f(null,new Set(this.dimensions),dn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([it(o,{forAs:!0})]);else{if(Om(u)||Ly(u)){const c=Om(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([it({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([it(o,{forAs:!0})]);Qm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([it({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([it({field:l,aggregate:"max"},{forAs:!0})]))}else ZEn(s,a,o,n)}),s.size+We(i).length===0)?null:new $f(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||it(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||it(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+We(i).length===0?null:new $f(t,r,i)}merge(t){return nVe(this.dimensions,t.dimensions)?(exn(this.measures,t.measures),!0):(p1n("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...We(this.measures)])}producedFields(){const t=new Set;for(const n of We(this.measures))for(const r of We(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Gn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of We(this.measures))for(const o of We(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Oc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Oc),ops:t,fields:n,as:r}}}class mS extends Ur{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of hc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[it(o),...pi(a)?[it(o,{binSuffix:"end"})]:[]],...lh(u)?{sortField:u}:De(u)?{sortIndexField:ix(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of hc)this[n]&&(t+=` ${n.charAt(0)}:${Gn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of hc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of hc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Zh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ho(i)&&Fy(s)){const o=B8(this.childModel,n),a=Mie(o);a?t[n]=a:Qe(Lre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=x8,field:f}=u;s.push(f),o.push(c),a.push(it(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Iie){for(const c of Oie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[tm,em])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Fbe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function txn(e,t){const n=Are(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Fbe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Fbe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Qe(xvn(t)),null}function nxn(e){const t={};return j$(e.filter,n=>{if(WVe(n)){let r=null;zre(n)?r=pl(n.equal):Vre(n)?r=pl(n.lte):Ure(n)?r=pl(n.lt):Hre(n)?r=pl(n.gt):qre(n)?r=pl(n.gte):Wre(n)?r=n.range[0]:Gre(n)&&(r=(n.oneOf??n.in)[0]),r&&(N_(r)?t[n.field]="date":fr(r)?t[n.field]="number":vt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function rxn(e){const t={};function n(r){ex(r)?t[r.field]="date":r.type==="quantitative"&&evn(r.aggregate)?t[r.field]="number":GE(r.field)>1?r.field in t||(t[r.field]="flatten"):L_(r)&&lh(r.sort)&&GE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Qi(e)||Il(e))&&e.forEachFieldDef((r,i)=>{if(tu(r))n(r);else{const s=R_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Qi(e)){const{mark:r,markDef:i,encoding:s}=e;if(M_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function ixn(e){const t={};if(Qi(e)&&e.component.selection)for(const n of We(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&GE(i.field)>1&&(t[i.field]="flatten")}return t}class ga extends Ur{clone(){return new ga(null,dn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Gn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!C0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of We(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Qe(Y_e(a,r[a],u.value)))}for(const a of We(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Qe(Y_e(a,n[a],u)))}const s=new Zm(n,r);i.copyAll(s);const o={};for(const a of We(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return We(o).length===0||i.parseNothing?null:new ga(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of We(this._parse)){const r=this._parse[n];GE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(We(this._parse))}dependentFields(){return new Set(We(this._parse))}assembleTransforms(t=!1){return We(this._parse).filter(n=>t?GE(n)>1:!0).map(n=>{const r=txn(n,this._parse[n]);return r?{type:"formula",expr:r,as:cS(n)}:null}).filter(n=>n!==null)}}class hy extends Ur{clone(){return new hy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([qf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:qf}}}class KO extends Ur{clone(){return new KO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Gn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class XO extends Ur{clone(){return new XO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Gn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class i_ extends Ur{constructor(t){super(null),t??(t={name:"source"});let n;if(C0(t)||(n=t.format?{...Lu(t.format,["parse"])}:{}),QA(t))this._data={values:t.values};else if(tx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Yn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else aqe(t)?this._data={values:[{type:"Sphere"}]}:(sqe(t)||C0(t))&&(this._data={});this._generator=C0(t),t.name&&(this._name=t.name),n&&!Gr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var jbe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},sxn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},p2;function $ie(e){return e instanceof i_||e instanceof KO||e instanceof XO}class Nie{constructor(){p2.set(this,void 0),jbe(this,p2,!1,"f")}setModified(){jbe(this,p2,!0,"f")}get modifiedFlag(){return sxn(this,p2,"f")}}p2=new WeakMap;class F_ extends Nie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Die extends Nie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class oxn extends Die{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of We(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class axn extends Die{constructor(t){super(),this.requiresSelectionId=t&&Aie(t)}run(t){t instanceof hy&&(this.requiresSelectionId&&($ie(t.parent)||t.parent instanceof $f||t.parent instanceof ga)||(this.setModified(),t.remove()))}}class uxn extends Nie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof ch&&(r=t.producedFields(),Tre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class lxn extends Die{constructor(){super()}run(t){t instanceof ju&&!t.isRequired()&&(this.setModified(),t.remove())}}class cxn extends F_{run(t){if(!$ie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ga)if(t instanceof ga)this.setModified(),t.merge(n);else{if(Cre(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class fxn extends F_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ga);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of We(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Gr(i)){this.setModified();const o=new ga(t,i);for(const a of n){if(a instanceof ga)for(const u of We(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ga&&We(a.parse).length===0&&a.remove()}}}}}class dxn extends F_{run(t){t instanceof ju||t.numChildren()>0||t instanceof mS||t instanceof i_||(this.setModified(),t.remove())}}class hxn extends F_{run(t){const n=t.children.filter(i=>i instanceof ch),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class pxn extends F_{run(t){const n=t.children.filter(i=>i instanceof $f),r={};for(const i of n){const s=Gn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of We(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class mxn extends F_{constructor(t){super(),this.model=t}run(t){const n=!($ie(t)||t instanceof pS||t instanceof ga||t instanceof hy),r=[],i=[];for(const s of t.children)s instanceof fh&&(n&&!Cre(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof fh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class gxn extends F_{run(t){const n=[...t.children];if(!K1(n,o=>o instanceof ju)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof ju){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof ju)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class j_ extends Ur{clone(){return new j_(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Kd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??it(t)}hash(){return`JoinAggregateTransform ${Gn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function yxn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=it(r);return i&&t.push(i),t},[])}function vxn(e){return De(e)&&e.every(t=>vt(t))&&e.length>1}class rm extends Ur{clone(){return new rm(null,dn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(fs(f.order,"ascending"));const l={field:a,order:u};let c;return vxn(s)?c=s:vt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Nh(p)}).filter(h=>!!h),c=yxn(n),f=n.encoding.order;let d;if(De(f)||Ze(f))d=CVe(f);else{const h=mHe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Gn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[it(i,{binSuffix:"mid"})]:[it(i,{}),it(i,{binSuffix:"end"})]:[it(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=it(c,{expr:"datum"}),p=it(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:it(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:it(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class gS extends Ur{clone(){return new gS(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Kd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??it(t)}hash(){return`WindowTransform ${Gn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Dre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function _xn(e){function t(n){if(!(n instanceof mS)){const r=n.clone();if(r instanceof ju){const i=GW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof $f||r instanceof rm||r instanceof gS||r instanceof j_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function WW(e){if(e instanceof mS)if(e.numChildren()===1&&!(e.children[0]instanceof ju)){const t=e.children[0];(t instanceof $f||t instanceof rm||t instanceof gS||t instanceof j_)&&t.addDimensions(e.fields),t.swapWithParent(),WW(e)}else{const t=e.model.component.data.main;eWe(t);const n=_xn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(WW)}function eWe(e){if(e instanceof ju&&e.type===ki.Main&&e.numChildren()===1){const t=e.children[0];t instanceof mS||(t.swapWithParent(),eWe(e))}}const GW="scale_",rR=5;function YW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!YW(t.children))return!1}return!0}function Yc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Bbe(e,t,n){let r=e.sources,i=!1;return i=Yc(new lxn,r)||i,i=Yc(new axn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Yc(new dxn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Yc(new cxn,r)||i,i=Yc(new mxn(t),r)||i,i=Yc(new uxn,r)||i,i=Yc(new fxn,r)||i,i=Yc(new pxn,r)||i,i=Yc(new hxn,r)||i,i=Yc(new oxn,r)||i,i=Yc(new gxn,r)||i),e.sources=r,i}function bxn(e,t){YW(e.sources);let n=0,r=0;for(let i=0;i<rR&&Bbe(e,t,!0);i++)n++;e.sources.map(WW);for(let i=0;i<rR&&Bbe(e,t,!1);i++)r++;YW(e.sources),Math.max(n,r)===rR&&Qe(`Maximum optimization runs(${rR}) reached.`)}class to{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new to(()=>t(n))}}function tWe(e){Qi(e)?wxn(e):Exn(e)}function wxn(e){const t=e.component.scales;for(const n of We(t)){const r=Sxn(e,n);if(t[n].setWithExplicit("domains",r),Cxn(e,n),e.component.data.isFaceted){let s=e;for(;!Il(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Up(a)&&(a.data=GW+a.data.replace(GW,""))}}}function Exn(e){for(const n of e.children)tWe(n);const t=e.component.scales;for(const n of We(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=cy(r,o.getWithExplicit("domains"),"domains","scale",KW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Qe(_vn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function xxn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=zbe(t,n);if(!i){Qe(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=zbe(t,n);if(i)return"unaggregated"}return e}function Sxn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=xxn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Bs(r.x2)?Bs(r.x)?cy(wg(n,i,e,"x"),wg(n,i,e,"x2"),"domain","scale",KW):wg(n,i,e,"x2"):t==="y"&&Bs(r.y2)?Bs(r.y)?cy(wg(n,i,e,"y"),wg(n,i,e,"y2"),"domain","scale",KW):wg(n,i,e,"y2"):wg(n,i,e,t)}function Txn(e,t,n){return e.map(r=>({signal:`{data: ${I8(r,{timeUnit:n,type:t})}}`}))}function J7(e,t,n){var i;const r=(i=co(n))==null?void 0:i.unit;return t==="temporal"||r?Txn(e,t,r):[e]}function wg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Bs(i[r]),{type:c}=l,f=l.timeUnit;if(U1n(t)){const p=wg(e,void 0,n,r),m=J7(t.unionWith,c,f);return xd([...m,...p.value])}else{if(Mt(t))return xd([t]);if(t&&t!=="unaggregated"&&!ZVe(t))return xd(J7(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return ol([[0,1]]);const p=n.requestDataName(ki.Main);return ol([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Qm(r)&&Ze(l)?Axn(n,r,e):void 0;if(ep(l)){const p=J7([l.datum],c,f);return ol(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ki.Main),{field:m}=l;return ol([{data:p,field:it({field:m,aggregate:"min"})},{data:p,field:it({field:m,aggregate:"max"})}])}else if(pi(h.bin)){if(ho(e))return ol(e==="bin-ordinal"?[]:[{data:YA(d)?n.requestDataName(ki.Main):n.requestDataName(ki.Raw),field:n.vgField(r,WO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!_t(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(pi(p)){const m=Rie(n,h.field,p);return ol([new to(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return ol([{data:n.requestDataName(ki.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Yn(["time","utc"],e)){const p=i[Jh(r)];if(pHe(h,p,s,a)){const m=n.requestDataName(ki.Main),g=ly({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=XA(o)&&g!==.5&&ds(r);return ol([{data:m,field:n.vgField(r,y?{suffix:N8}:{})},{data:m,field:n.vgField(r,{suffix:y?D8:"end"})}])}}return ol(d?[{data:YA(d)?n.requestDataName(ki.Main):n.requestDataName(ki.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ki.Main),field:n.vgField(r)}])}function Z7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":x8),...r?{field:Oc(r)}:{},...i?{order:i}:{}}}function Cxn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=ZVe(r)&&r,o=$_(i)&&g8(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Axn(e,t,n){if(!ho(n))return;const r=e.fieldDef(t),i=r.sort;if(dHe(i))return{op:"min",field:ix(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(lh(i)){const a=s&&!o.has(i.field);return Z7(i,a)}else if(fHe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Om(c)||Ly(c))return Z7({field:it(l),order:u},d);if(Dre(c)||!c)return Z7({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Yn(["ascending",void 0],i))return!0}}function zbe(e,t){const{aggregate:n,type:r}=e;return n?vt(n)&&!nvn.has(n)?{valid:!1,reason:qvn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Wvn(e)}:{valid:!0}:{valid:!1,reason:Hvn(e)}}function KW(e,t,n,r){return e.explicit&&t.explicit&&Qe(Qvn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Ixn(e){const t=Kd(e.map(o=>{if(Up(o)){const{sort:a,...u}=o;return u}return o}),Gn),n=Kd(e.map(o=>{if(Up(o)){const a=o.sort;return a!==void 0&&!YA(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Gn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Up(o)&&n.length>0){let a=n[0];if(n.length>1){Qe(X_e);const u=n.filter(l=>_t(l)&&"op"in l&&l.op!=="min");n.every(l=>_t(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(_t(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Kd(n.map(o=>YA(o)||!("op"in o)||vt(o.op)&&o.op in Jyn?o:(Qe(Zvn(o)),!0)),Gn);let i;r.length===1?i=r[0]:r.length>1&&(Qe(X_e),i=!0);const s=Kd(e.map(o=>Up(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Mie(e){if(Up(e)&&vt(e.field))return e.field;if(rvn(e)){let t;for(const n of e.fields)if(Up(n)&&vt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Qe(e1n),t}return Qe(t1n),t}else if(ivn(e)){Qe(n1n);const t=e.fields[0];return vt(t)?t:void 0}}function B8(e,t){const r=e.component.scales[t].get("domains").map(i=>(Up(i)&&(i.data=e.lookupDataSource(i.data)),i));return Ixn(r)}function nWe(e){return yS(e)||Lie(e)?e.children.reduce((t,n)=>t.concat(nWe(n)),Ube(e)):Ube(e)}function Ube(e){return We(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Oxn(i.range,s,n,e),h=B8(e,n),p=a?xwn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Oxn(e,t,n,r){if(ds(n)){if(Fy(e))return{step:{signal:`${t}_step`}}}else if(_t(e)&&Up(e))return{...e,data:r.lookupDataSource(e.data)};return e}class rWe extends Zm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:K1(this.get("domains"),t=>De(t)&&t.length===2&&fr(t[0])&&t[0]<=0&&fr(t[1])&&t[1]>=0)}}const Pxn=["range","scheme"];function kxn(e){const t=e.component.scales;for(const n of m8){const r=t[n];if(!r)continue;const i=Rxn(n,e);r.setWithExplicit("range",i)}}function Vbe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Xu(t),o=e.getName(s);if(_t(r)&&r.binned&&r.step!==void 0)return new to(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(pi(r)){const a=Rie(e,i,r);return new to(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Rxn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Pxn)if(n[f]!==void 0){const d=$W(s,f),h=eHe(e,f);if(!d)Qe($Ve(s,f,e));else if(h)Qe(h);else switch(f){case"range":{const p=n.range;if(De(p)){if(ds(e))return xd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return to.fromName(y,g)}return m}))}else if(_t(p))return xd({data:t.requestDataName(ki.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return xd(p)}case"scheme":return xd($xn(n[f]))}}const o=e===Mi||e==="xOffset"?"width":"height",a=r[o];if(Dh(a)){if(ds(e))if(ho(s)){const f=sWe(a,t,e);if(f)return xd({step:f})}else Qe(NVe(o));else if(BO(e)){const f=e===Ry?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=oWe(a,s);if(p)return xd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Nxn(e,t);return(u!==void 0||l!==void 0)&&$W(s,"rangeMin")&&De(c)&&c.length===2?xd([u??c[0],l??c[1]]):ol(c)}function $xn(e){return z1n(e)?{scheme:e.name,...Lu(e,["name"])}:{scheme:e}}function iWe(e,t,n,{center:r}={}){const i=Xu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===go&&jl(n)?r?[to.fromName(a=>`${o(a)}/2`,s),to.fromName(a=>`-${o(a)}/2`,s)]:[to.fromName(o,s),0]:r?[to.fromName(a=>`-${o(a)}/2`,s),to.fromName(a=>`${o(a)}/2`,s)]:[0,to.fromName(o,s)]}function Nxn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Bs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Mi:case go:{if(Yn(["point","band"],u)){const f=aWe(e,n,r.view);if(Dh(f))return{step:sWe(f,t,e)}}return iWe(e,t,u)}case Ry:case fS:return Dxn(e,t,u);case Km:{const f=t.component.scales[e].get("zero"),d=uWe(i,f,r),h=Fxn(i,n,t,r);return QE(u)?Lxn(d,h,Mxn(u,r,l,e)):[d,h]}case Vc:return[0,Math.PI*2];case k_:return[0,360];case td:return[0,new to(()=>{const f=t.getSignalName(Il(t.parent)?"child_width":"width"),d=t.getSignalName(Il(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Dy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case My:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ku:return"symbol";case Yu:case Xh:case Qh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Xm:case $y:case Ny:return[r.scale.minOpacity,r.scale.maxOpacity]}}function sWe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=kre(n),o=r[s];if(qHe({step:e,offsetIsDiscrete:vn(o)&&YVe(o.type)})==="offset"&&CHe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${uvn(f)})`}}else return e.step}function oWe(e,t){if(qHe({step:e,offsetIsDiscrete:ho(t)})==="offset")return{step:e.step}}function Dxn(e,t,n){const r=e===Ry?"x":"y",i=t.getScaleComponent(r);if(!i)return iWe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=aWe(r,t.size,t.config.view);if(Dh(l)){const c=oWe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=HVe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=ly({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Mt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Mt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return eVe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function aWe(e,t,n){const r=e===Mi?"width":"height",i=t[r];return i||p6(n,r)}function Mxn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&De(n)?n.length+1:(Qe(f1n(r)),3)}}function Lxn(e,t,n){const r=()=>{const i=wf(t),s=wf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Mt(t)?new to(r):{signal:r()}}function uWe(e,t,n){if(t)return Mt(t)?{signal:`${t.signal} ? 0 : ${uWe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(y8("size",e))}const Hbe=.95;function Fxn(e,t,n,r){const i={x:Vbe(n,"x"),y:Vbe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=qbe(t,i,r.view);return fr(s)?s-1:new to(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=qbe(t,i,r.view);return fr(s)?Math.pow(Hbe*s,2):new to(()=>`pow(${Hbe} * ${s.signal}, 2)`)}}throw new Error(y8("size",e))}function qbe(e,t,n){const r=Dh(e.width)?e.width.step:h6(n,"width"),i=Dh(e.height)?e.height.step:h6(n,"height");return t.x||t.y?new to(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function lWe(e,t){Qi(e)?jxn(e,t):fWe(e,t)}function jxn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of We(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Bs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=$W(h,t),y=eHe(a,t);if(d!==void 0&&(g?y&&Qe(y):Qe($Ve(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":N_(u[t])||_==="temporal"||v?l.set(t,{signal:I8(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Wbe?Wbe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:AHe(i,a),hasSecondaryRangeChannel:!!i[Jh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Wbe={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?Bxn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>zxn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Uxn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Vxn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Hxn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>qxn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return Wxn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Gxn(e,t,n,r,i,s.scale,o)};function cWe(e){Qi(e)?kxn(e):fWe(e,"range")}function fWe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?cWe(r):lWe(r,t);for(const r of We(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=cy(i,a,t,"scale",iqe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Bxn(e,t){const n=t.bin;if(pi(n)){const r=Rie(e,t.field,n);return new to(()=>e.getSignalName(r))}else if(Co(n)&&$_(n)&&n.step!==void 0)return{step:n.step}}function zxn(e,t){if(Yn([Yu,Xh,Qh],e)&&t!=="nominal")return"hcl"}function Uxn(e,t,n,r,i,s){var o;if(!((o=Nh(s))!=null&&o.bin||De(n)||i!=null||r!=null||Yn([Fu.TIME,Fu.UTC],e)))return ds(t)?!0:void 0}function Vxn(e,t,n,r,i,s){if(ds(e)){if(Ef(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Fu.POINT)return n.pointPadding}}function Hxn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:fs(o,n==="bar"?a:u)}else if(BO(t)&&r===Fu.BAND)return i.offsetBandPaddingInner}}function qxn(e,t,n,r,i,s=!1){if(e===void 0){if(ds(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Fu.BAND)return fs(o,Mt(r)?{signal:`${r.signal}/2`}:r/2)}else if(BO(t)){if(n===Fu.POINT)return .5;if(n===Fu.BAND)return i.offsetBandPaddingOuter}}}function Wxn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return jl(e)&&t==="descending"?Mt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(jl(e)&&t==="descending")return!0}function Gxn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&jl(i)){if(De(n)){const u=n[0],l=n[n.length-1];if(fr(u)&&u<=0&&fr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!QE(i))return!0;if(!(Ze(t)&&t.bin)&&Yn([...Zh,...Hyn],e)){const{orient:u,type:l}=r;return Yn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Yn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Yxn(e,t,n,r,i=!1){const s=Kxn(t,n,r,i),{type:o}=e;return Qm(t)?o!==void 0?Y1n(t,o)?Ze(n)&&!G1n(o,n.type)?(Qe(Kvn(o,s)),s):o:(Qe(Yvn(t,o,s)),s):s:null}function Kxn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Lw(e)||H7(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Qe(q7(e,"ordinal")),"ordinal";if(ds(e)||BO(e)){if(Yn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Nre)return"band";const s=n[Xu(e)];return t_(s)||ZE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Lw(e)?"time":H7(e)==="discrete"?(Qe(q7(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&co(t.timeUnit).utc?"utc":"time";case"quantitative":return Lw(e)?Ze(t)&&pi(t.bin)?"bin-ordinal":"linear":H7(e)==="discrete"?(Qe(q7(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(kVe(t.type))}function Xxn(e,{ignoreRange:t}={}){dWe(e),tWe(e);for(const n of W1n)lWe(e,n);t||cWe(e)}function dWe(e){Qi(e)?e.component.scales=Qxn(e):e.component.scales=Zxn(e)}function Qxn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of m8){const o=Bs(t[s]);if(o&&n===uHe&&s===Ku&&o.type===dS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=AHe(t,s),l=Yxn(a,s,o,r,u);i[s]=new rWe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Jxn=iqe((e,t)=>J_e(e)-J_e(t));function Zxn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){dWe(s);for(const o of We(s.component.scales))if((t=i.scale)[o]??(t[o]=Uqe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?M1n(a.value,u.value)?r[o]=cy(a,u,"type","scale",Jxn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of We(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new rWe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class ez{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Qi(e){return(e==null?void 0:e.type)==="unit"}function Il(e){return(e==null?void 0:e.type)==="facet"}function Lie(e){return(e==null?void 0:e.type)==="concat"}function yS(e){return(e==null?void 0:e.type)==="layer"}class Fie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=xu(a),this.name=t.name??i,this.title=Pg(t.title)?{text:t.title}:t.title?xu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new ez,this.projectionNameMap=r?r.projectionNameMap:new ez,this.signalNameMap=r?r.signalNameMap:new ez,this.data=t.data,this.description=t.description,this.transforms=own(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:cbn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:S8(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Zm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?dn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Xxn(this)}parseProjection(){Jqe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Gqe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of We(r)){const o=r[s];o!==void 0&&(i[s]=Ei(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ei(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Gr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=bEn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of hc)t[r].title&&n.push(pEn(this,r));for(const r of Iie)n=n.concat(mEn(this,r));return n}assembleAxes(){return tEn(this.component.axes,this.config)}assembleLegends(){return Kqe(this)}assembleProjections(){return VEn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...EVe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Yn(["unit","layer"],this.type)?Yn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Gr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Il(this.parent)?nWe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Di((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ki[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Il(this.parent)){const n=Bqe(t),r=p8(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ho(s)&&Fy(o)){const a=i.get("name"),u=B8(this,r),l=Mie(u);if(l){const c=it({aggregate:"distinct",field:l},{expr:"datum"});return{signal:jqe(a,i,c)}}else return Qe(Lre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(hVe(t)&&Qm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(hvn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class hWe extends Fie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return it(r,n)}reduceFieldDef(t,n){return j_n(this.getMapping(),(r,i,s)=>{const o=Nh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){cie(this.getMapping(),(r,i)=>{const s=Nh(r);s&&t(s,i)},n)}}class z8 extends Ur{clone(){return new z8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Gn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class U8 extends Ur{clone(){return new U8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Gn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class JA extends Ur{clone(){return new JA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Tr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Qm(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");jl(d)&&l.aggregate!=="count"&&!M_(i)&&(u[l.field]=l)}return u},{});return We(a).length?new JA(t,a):null}dependentFields(){return new Set(We(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Gn(this.filter)}`}assemble(){const t=We(this.filter).reduce((n,r)=>{const i=this.filter[r],s=it(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class V8 extends Ur{clone(){return new V8(this.parent,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Gn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class H8 extends Ur{clone(){return new H8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Gn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Bw extends Ur{clone(){return new Bw(null,dn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[rd,nd],[Pc,id]]){const s=i.map(o=>{const a=Bs(n.encoding[o]);return Ze(a)?a.field:ep(a)?{expr:`${a.datum}`}:Hf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Bw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Ku)){const i=n.typedFieldDef(Ku);i.type===dS&&(t=new Bw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(vt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Gn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class ZA extends Ur{clone(){return new ZA(null,this.projection,dn(this.fields),dn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[rd,nd],[Pc,id]]){const i=r.map(o=>{const a=Bs(n.encoding[o]);return Ze(a)?a.field:ep(a)?{expr:`${a.datum}`}:Hf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Pc?"2":"";(i[0]||i[1])&&(t=new ZA(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(vt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Gn(this.fields)} ${Gn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class g1 extends Ur{clone(){return new g1(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new g1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=OHe(n.mark,r);return new g1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Gn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:zbn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class q8 extends Ur{clone(){return new q8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Gn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class eI extends Ur{clone(){return new eI(null,dn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Ubn(o)){let u=gWe(o.data,s);u||(u=new i_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new ju(u,l,ki.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Vbn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Di(u),u)}catch{throw new Error(yvn(u))}if(a=l.materialized,!a)throw new Error(vvn(u))}return new eI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?yt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Gn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:yt(this.transform.as)}:{}};else{let n=this.transform.as;vt(n)||(Qe(Cvn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class W8 extends Ur{clone(){return new W8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Gn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class G8 extends Ur{clone(){return new G8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Gn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Y8 extends Ur{clone(){return new Y8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Kd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Gn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class K8 extends Ur{clone(){return new K8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Gn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function pWe(e){let t=0;function n(r,i){if(r instanceof i_&&!r.isGenerator&&!tx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ga&&(r.parent instanceof i_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof mS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof KO||r instanceof XO||r instanceof JA||r instanceof pS||r instanceof rx||r instanceof ZA||r instanceof $f||r instanceof eI||r instanceof gS||r instanceof j_||r instanceof H8||r instanceof V8||r instanceof z8||r instanceof q8||r instanceof W8||r instanceof G8||r instanceof hy||r instanceof K8||r instanceof Y8||r instanceof U8)&&i.transform.push(r.assemble()),(r instanceof fh||r instanceof ch||r instanceof g1||r instanceof rm||r instanceof Bw)&&i.transform.push(...r.assemble()),r instanceof ju&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof ju?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof ju&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function eSn(e){const t=[],n=pWe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function tSn(e,t){const n=[],r=pWe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function nSn(e){return e==="top"||e==="left"||Mt(e)?"header":"footer"}function rSn(e){for(const t of hc)iSn(e,t);Gbe(e,"x"),Gbe(e,"y")}function iSn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=sx("title",null,r,t);let l=Fw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=De(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=sx("labelOrient",a.header,r,t),f=a.header!==null?fs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Yn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[mWe(e,t,f)]}}}function mWe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Gbe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=kie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=nSn(a.get("orient"));o[u]??(o[u]=[mWe(e,s,!1)]);const l=h2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function sSn(e){jie(e),v6(e,"width"),v6(e,"height")}function oSn(e){jie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";v6(e,t),v6(e,n)}function jie(e){for(const t of e.children)t.parseLayoutSize()}function v6(e,t){const n=Bqe(t),r=p8(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Uqe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=cy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function aSn(e){const{size:t,component:n}=e;for(const r of Zh){const i=Xu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Dh(s)?"step":s,!0)}else{const s=uSn(e,i);n.layoutSize.set(i,s,!1)}}}function uSn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ho(s)){const a=p6(r.view,t);return Fy(o)||Dh(a)?"step":a}else return MW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return MW(r.view,t);{const s=p6(r.view,t);return Dh(s)?s.step:s}}}function XW(e,t,n){return it(t,{suffix:`by_${it(e)}`,...n})}class pC extends hWe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Hie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!HO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=We(t),r={};for(const i of n){if(![em,tm].includes(i)){Qe(y8(i,"facet"));break}const s=t[i];if(s.field===void 0){Qe(kW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=uie(t,n);return r.header?r.header=xu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=X8(this),this.child.parseData()}parseLayoutSize(){jie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),rSn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of hc)for(const r of Oie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=sx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=F8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof pC))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof pC?{...this.channelHasField("column")?{encode:{update:{columns:{field:it(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof pC){if(this.child.channelHasField("column")){const i=it(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Zh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ho(o)&&Fy(a)){const u=B8(this.child,i),l=Mie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Qe(Lre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of hc){const f=this.facet[c];if(f){u.push(it(f));const{bin:d,sort:h}=f;if(pi(d)&&u.push(it(f,{binSuffix:"end"})),lh(h)){const{field:p,op:m=x8}=h,g=XW(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(De(h)){const p=ix(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?lh(r.sort)?[XW(r,r.sort,{expr:"datum"})]:De(r.sort)?[ix(r,t,{expr:"datum"})]:[it(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(lh(i)?i.order:!De(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return HW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Iie)if(t[s]){const o=sx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return HW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=eSn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:hc.map(u=>this.facetSortFields(u)).flat(),order:hc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(_wn(this,[]))}]}getMapping(){return this.facet}}function lSn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(lh(s.sort)){const{field:o,op:a=x8}=s.sort;e=i=new j_(e,{joinaggregate:[{op:a,field:o,as:XW(s,s.sort,{forAs:!0})}],groupby:[it(s)]})}return i}return null}function gWe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(QA(e)&&QA(a)){if(wl(e.values,a.values))return o}else if(tx(e)&&tx(a)){if(e.url===a.url)return o}else if(sqe(e)&&e.name===o.dataName)return o}}return null}function cSn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new i_({values:[]});return t.push(r),r}const n=gWe(e.data,t);if(n)return C0(e.data)||(n.data.format=tVe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new i_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function fSn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Zbn(i))o=e=new rx(e,i),s="derived";else if(wie(i)){const a=nxn(i);o=e=ga.makeWithAncestors(e,{},a,n)??e,e=new pS(e,t,i.filter)}else if(eqe(i))o=e=fh.makeFromTransform(e,i,t),s="number";else if(twn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ga(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=ch.makeFromTransform(e,i);else if(nwn(i))o=e=$f.makeFromTransform(e,i),s="number",Aie(t)&&(e=new hy(e));else if(ZHe(i))o=e=eI.make(e,t,i,r++),s="derived";else if(Xbn(i))o=e=new gS(e,i),s="number";else if(Qbn(i))o=e=new j_(e,i),s="number";else if(rwn(i))o=e=rm.makeFromTransform(e,i),s="derived";else if(iwn(i))o=e=new H8(e,i),s="derived";else if(swn(i))o=e=new U8(e,i),s="derived";else if(Jbn(i))o=e=new V8(e,i),s="derived";else if(Hbn(i))o=e=new Y8(e,i),s="derived";else if(Kbn(i))e=new K8(e,i);else if(ewn(i))o=e=g1.makeFromTransform(e,i),s="derived";else if(qbn(i))o=e=new z8(e,i),s="derived";else if(Wbn(i))o=e=new W8(e,i),s="derived";else if(Gbn(i))o=e=new G8(e,i),s="derived";else if(Ybn(i))o=e=new q8(e,i),s="derived";else{Qe(Tvn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function X8(e){var h;let t=cSn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(C0(i)||tx(i)||QA(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new ywn;C0(i)?(oqe(i)?t=new XO(t,i.sequence):Eie(i)&&(t=new KO(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ga.makeExplicit(t,e,o)??t,t=new hy(t);const a=e.parent&&yS(e.parent);(Qi(e)||Il(e))&&a&&(t=fh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=fSn(t,e,o));const u=ixn(e),l=rxn(e);t=ga.makeWithAncestors(t,{},{...u,...l},o)??t,Qi(e)&&(t=Bw.parseAll(t,e),t=ZA.parseAll(t,e)),(Qi(e)||Il(e))&&(a||(t=fh.makeFromEncoding(t,e)??t),t=ch.makeFromEncoding(t,e)??t,t=rx.parseAllForSortIndex(t,e));const c=t=Ybe(ki.Raw,e,t);if(Qi(e)){const p=$f.makeFromEncoding(t,e);p&&(t=p,Aie(e)&&(t=new hy(t))),t=g1.makeFromEncoding(t,e)??t,t=rm.makeFromEncoding(t,e)??t}Qi(e)&&(t=JA.make(t,e)??t);const f=t=Ybe(ki.Main,e,t);Qi(e)&&Zwn(e,f);let d=null;if(Il(e)){const p=e.getName("facet");t=lSn(t,e.facet)??t,d=new mS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Ybe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new ju(n,s,e,i);return r[s]=o,o}class dSn extends Fie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Qe(Evn),this.children=this.getChildren(t).map((l,c)=>Hie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=X8(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return k8(t)?t.vconcat:_ie(t)?t.hconcat:t.concat}parseLayoutSize(){oSn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Pie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function hSn(e){return e===!1||e===null}const pSn={disable:1,gridScale:1,scale:1,...SHe,labelExpr:1,encode:1},yWe=We(pSn);class Bie extends Zm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Bie(dn(this.explicit),dn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!hSn(this.get(t))}hasOrientSignalRef(){return Mt(this.explicit.orient)}}function mSn(e,t,n){const{encoding:r,config:i}=e,s=Bs(r[t])??Bs(r[Jh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(e_(u))return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(JE(s)==="quantitative"){if(ZE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(JE(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function gSn(e){return Zh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[xSn(n,e)]),t),{})}const ySn={bottom:"top",top:"bottom",left:"right",right:"left"};function vSn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of We(i.component.axes))n.axis[s]=kie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=_Sn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Zh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Mt(a)){if(r[a]>0&&!u){const l=ySn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function _Sn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=bSn(i,s)}}}else return t.map(n=>n.clone());return e}function bSn(e,t){for(const n of yWe){const r=cy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return OVe(i,s);case"gridScale":return{explicit:i.explicit,value:fs(i.value,s.value)}}return $8(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function wSn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Mt(n.labelAngle)?n.labelAngle:KA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Dqe(r,i))return!0}return e===n[t]}const ESn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function xSn(e,t){var y,v;let n=t.axis(e);const r=new Bie,i=Bs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||lEn(e),u=t.getScaleComponent(e).get("type"),l=nEn(e,u,a,t.config),c=n!==void 0?!n:UW("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=oEn(i,n,e,o.style,l),d=iHe(n.formatType,i,u),h=rHe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of yWe){const w=_ in Rbe?Rbe[_](p):sbe(_)?n[_]:void 0,S=w!==void 0,x=wSn(w,_,n,t,e);if(S&&x)r.set(_,w,x);else{const{configValue:b=void 0,configFrom:T=void 0}=sbe(_)&&_!=="values"?UW(_,o.style,n.style,l):{},A=b!==void 0;S&&!A?r.set(_,w,x):(T!=="vgAxisConfig"||ESn.has(_)&&A||GO(b)||Mt(b))&&r.set(_,b,!1)}}const m=n.encoding??{},g=xHe.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const S=zqe(m[w]??{},t),x=w==="labels"?mSn(t,e,S):S;return x!==void 0&&!Gr(x)&&(_[w]={update:x}),_},{});return Gr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function SSn({encoding:e,size:t}){for(const n of Zh){const r=Xu(n);Dh(t[r])&&t0(e[n])&&(delete t[r],Qe(NVe(r)))}return t}const TSn={vgMark:"arc",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...fy(e,"radius"),...fy(e,"theta")})},CSn={vgMark:"area",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...m6("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...m6("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Cie(e)})},ASn={vgMark:"rect",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y")})},ISn={vgMark:"shape",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===dS?{field:it(n,{expr:"datum"})}:{}}]}},OSn={vgMark:"image",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y"),...Sie(e,"url")})},PSn={vgMark:"line",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...ro("size",e,{vgChannel:"strokeWidth"}),...Cie(e)})},kSn={vgMark:"trail",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...ro("size",e),...Cie(e)})};function zie(e,t){const{config:n}=e;return{...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...ro("size",e),...ro("angle",e),...RSn(e,n,t)}}function RSn(e,t,n){return n?{shape:{value:n}}:ro("shape",e)}const $Sn={vgMark:"symbol",encodeEntry:e=>zie(e)},NSn={vgMark:"symbol",encodeEntry:e=>zie(e,"circle")},DSn={vgMark:"symbol",encodeEntry:e=>zie(e,"square")},MSn={vgMark:"rect",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y")})},LSn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...m6("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...m6("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ro("size",e,{vgChannel:"strokeWidth"})}}},FSn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...Sie(e),...ro("size",e,{vgChannel:"fontSize"}),...ro("angle",e),...Ibe("align",jSn(e.markDef,n,t)),...Ibe("baseline",BSn(e.markDef,n,t)),...ma("radius",e,{defaultPos:null}),...ma("theta",e,{defaultPos:null})}}};function jSn(e,t,n){if(Tr("align",e,n)===void 0)return"center"}function BSn(e,t,n){if(Tr("baseline",e,n)===void 0)return"middle"}const zSn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ma("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ro("size",e,{defaultValue:USn(e),vgChannel:i}),[s]:Ei(Tr("thickness",n,t))}}};function USn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Tr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Fy(a)&&fr(a.step)?a.step*3/4:h6(t.view,i)*3/4}}const iR={arc:TSn,area:CSn,bar:ASn,circle:NSn,geoshape:ISn,image:OSn,line:PSn,point:$Sn,rect:MSn,rule:LSn,square:DSn,text:FSn,tick:zSn,trail:kSn};function VSn(e){if(Yn([w8,_8,i_n],e.mark)){const t=OHe(e.mark,e.encoding);if(t.length>0)return HSn(e,t)}else if(e.mark===b8){const t=PW.some(n=>Tr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return qSn(e)}return Uie(e)}const Kbe="faceted_path_";function HSn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Kbe+e.requestDataName(ki.Main),data:e.requestDataName(ki.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Uie(e,{fromPrefix:Kbe})}]}const Xbe="stack_group_";function qSn(e){var l;const[t]=Uie(e,{fromPrefix:Xbe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...WE(t.encode.update,["y","yc","y2","height",...PW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Lu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...WE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Lu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of PW){const f=Pm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Ei(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=it(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(it(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Pm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Ei(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ki.Main),name:Xbe+e.requestDataName(ki.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function WSn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!De(o)&&Hf(o)&&IW(o.value)||!o&&IW(Tr("order",i,s)))){if((De(o)||Ze(o))&&!n)return CVe(o,{expr:"datum"});if(M_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(De(c))return{field:it(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(lh(c))return{field:it({aggregate:lie(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(fHe(c)){const f=e.fieldDef(c.encoding);return{field:it(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:it(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Uie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=fs(r.clip,GSn(e),YSn(e)),a=SVe(r),u=i.key,l=WSn(e),c=KSn(e),f=Tr("aria",r,s),d=iR[n].postEncodingTransform?iR[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:iR[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ki.Main)},encode:{update:iR[n].encodeEntry(e)},...d?{transform:d}:{}}]}function GSn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function YSn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function KSn(e){if(!e.component.selection)return null;const t=We(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=We(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class vWe extends hWe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,abe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=$h(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=$bn(o,s,{graticule:t.data&&Eie(t.data)}));const u=this.encoding=L_n(t.encoding||{},a,o.filled,s);this.markDef=XHe(o,u,s),this.size=SSn({encoding:u,size:abe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=KHe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>yie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===uHe,r=t&&Dyn.some(i=>vn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return m8.reduce((r,i)=>{const s=Bs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=xu(t);return De(n)&&(i.domain=n.map(pl)),De(r)&&(i.range=r.map(pl)),i}initAxes(t){return Zh.reduce((n,r)=>{const i=t[r];if(vn(i)||r===Mi&&vn(t.x2)||r===go&&vn(t.y2)){const s=vn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=We(t),r={};for(const i of n){const s=t[i];r[i]=GO(s)?xVe(s):pl(s)}return r}initLegends(t){return qyn.reduce((n,r)=>{const i=Bs(t[r]);if(i&&Gyn(r)){const s=i.legend;n[r]=s&&xu(s)}return n},{})}parseData(){this.component.data=X8(this)}parseLayoutSize(){aSn(this)}parseSelections(){this.component.selection=Jwn(this,this.selection)}parseMarkGroup(){this.component.mark=VSn(this)}parseAxesAndHeaders(){this.component.axes=gSn(this)}assembleSelectionTopLevelSignals(t){return bwn(this,t)}assembleSignals(){return[...Rqe(this),...vwn(this,[])]}assembleSelectionData(t){return wwn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Pie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!yS(this.parent))&&(t=lqe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return p1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Nh(n)}typedFieldDef(t){const n=this.fieldDef(t);return tu(n)?n:null}}class Vie extends Fie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(R8(a))return new Vie(a,this,this.getName(`layer_${u}`),o,s);if(Jm(a))return new vWe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Mre(a))})}parseData(){this.component.data=X8(this);for(const t of this.children)t.parseData()}parseLayoutSize(){sSn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){vSn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),Rqe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Pie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of yt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Ewn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),Kqe(this))}}function Hie(e,t,n,r,i){if(S8(e))return new pC(e,t,n,i);if(R8(e))return new Vie(e,t,n,r,i);if(Jm(e))return new vWe(e,t,n,r,i);if(abn(e))return new dSn(e,t,n,i);throw new Error(Mre(e))}function XSn(e,t={}){t.logger&&d1n(t.logger),t.fieldTitle&&bHe(t.fieldTitle);try{const n=YHe(Zx(t.config,e.config)),r=rqe(e,n),i=Hie(r,null,"",void 0,n);return i.parse(),bxn(i.component.data,i),{spec:JSn(i,QSn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&h1n(),t.fieldTitle&&I_n()}}function QSn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):vt(t)&&(t={type:t}),i&&s&&pwn(t.type)){if(i==="step"&&s==="step")Qe(q_e()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Qe(q_e(p8(o)));const a=o==="width"?"height":"width";t.type=mwn(a)}}return{...We(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},..._be(n,!1),..._be(e,!0)}}function JSn(e,t,n={},r){const i=e.config?wbn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),tSn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...HHe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const ZSn=Oyn.version,eTn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:GE,accessPathWithDatum:Are,compile:XSn,contains:Yn,deepEqual:wl,deleteNestedProperty:r6,duplicate:dn,entries:ay,every:Sre,fieldIntersection:Cre,flatAccessWithDatum:rVe,getFirstDefined:fs,hasIntersection:Tre,hash:Gn,internalField:oVe,isBoolean:YA,isEmpty:Gr,isEqual:kyn,isInternalField:aVe,isNullOrFalse:IW,isNumeric:u8,keys:We,logicalExpr:dC,mergeDeep:tVe,never:eVe,normalize:rqe,normalizeAngle:KA,omit:Lu,pick:WE,prefixGenerator:OW,removePathFromField:cS,replaceAll:X1,replacePathInField:Oc,resetIdCounter:$yn,setEqual:nVe,some:K1,stringify:Yr,titleCase:LO,unique:Kd,uniqueId:sVe,vals:Mo,varName:Di,version:ZSn},Symbol.toStringTag,{value:"Module"}));function _We(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var tTn="vega-themes",nTn="2.15.0",rTn="Themes for stylized Vega and Vega-Lite visualizations.",iTn=["vega","vega-lite","themes","style"],sTn="BSD-3-Clause",oTn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},aTn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],uTn="build/vega-themes.js",qie="build/vega-themes.module.js",lTn="build/vega-themes.min.js",cTn="build/vega-themes.min.js",fTn="build/vega-themes.module.d.ts",dTn={type:"git",url:"https://github.com/vega/vega-themes.git"},hTn=["src","build"],pTn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},mTn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},gTn={vega:"*","vega-lite":"*"},yTn={},vTn={name:tTn,version:nTn,description:rTn,keywords:iTn,license:sTn,author:oTn,contributors:aTn,main:uTn,module:qie,unpkg:lTn,jsdelivr:cTn,types:fTn,repository:dTn,files:hTn,scripts:pTn,devDependencies:mTn,peerDependencies:gTn,dependencies:yTn};const pb="#fff",Qbe="#888",_Tn={background:"#333",view:{stroke:Qbe},title:{color:pb,subtitleColor:pb},style:{"guide-label":{fill:pb},"guide-title":{fill:pb}},axis:{domainColor:pb,gridColor:Qbe,tickColor:pb}},Qy="#4572a7",bTn={background:"#fff",arc:{fill:Qy},area:{fill:Qy},line:{stroke:Qy,strokeWidth:2},path:{stroke:Qy},rect:{fill:Qy},shape:{stroke:Qy},symbol:{fill:Qy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Jy="#30a2da",tz="#cbcbcb",wTn="#999",ETn="#333",Jbe="#f0f0f0",Zbe="#333",xTn={arc:{fill:Jy},area:{fill:Jy},axis:{domainColor:tz,grid:!0,gridColor:tz,gridWidth:1,labelColor:wTn,labelFontSize:10,titleColor:ETn,tickColor:tz,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Jbe,group:{fill:Jbe},legend:{labelColor:Zbe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Zbe,titleFontSize:14,titlePadding:10},line:{stroke:Jy,strokeWidth:2},path:{stroke:Jy,strokeWidth:.5},rect:{fill:Jy},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Jy},bar:{binSpacing:2,fill:Jy,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Zy="#000",STn={group:{fill:"#e5e5e5"},arc:{fill:Zy},area:{fill:Zy},line:{stroke:Zy},path:{stroke:Zy},rect:{fill:Zy},shape:{stroke:Zy},symbol:{fill:Zy,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},TTn=22,CTn="normal",ewe="Benton Gothic, sans-serif",twe=11.5,ATn="normal",ev="#82c6df",nz="Benton Gothic Bold, sans-serif",nwe="normal",rwe=13,ET={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ITn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:nz,fontSize:TTn,fontWeight:CTn},arc:{fill:ev},area:{fill:ev},line:{stroke:ev,strokeWidth:2},path:{stroke:ev},rect:{fill:ev},shape:{stroke:ev},symbol:{fill:ev,size:30},axis:{labelFont:ewe,labelFontSize:twe,labelFontWeight:ATn,titleFont:nz,titleFontSize:rwe,titleFontWeight:nwe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:ewe,labelFontSize:twe,symbolType:"square",titleFont:nz,titleFontSize:rwe,titleFontWeight:nwe},range:{category:ET["category-6"],diverging:ET["fireandice-6"],heatmap:ET["fire-7"],ordinal:ET["fire-7"],ramp:ET["fire-7"]}},tv="#ab5787",sR="#979797",OTn={background:"#f9f9f9",arc:{fill:tv},area:{fill:tv},line:{stroke:tv},path:{stroke:tv},rect:{fill:tv},shape:{stroke:tv},symbol:{fill:tv,size:30},axis:{domainColor:sR,domainWidth:.5,gridWidth:.2,labelColor:sR,tickColor:sR,tickWidth:.2,titleColor:sR},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},nv="#3e5c69",PTn={background:"#fff",arc:{fill:nv},area:{fill:nv},line:{stroke:nv},path:{stroke:nv},rect:{fill:nv},shape:{stroke:nv},symbol:{fill:nv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Kl="#1696d2",iwe="#000000",kTn="#FFFFFF",oR="Lato",rz="Lato",RTn="Lato",$Tn="#DEDDDD",NTn=18,xT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},DTn={background:kTn,title:{anchor:"start",fontSize:NTn,font:oR},axisX:{domain:!0,domainColor:iwe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:rz,labelAngle:0,tickColor:iwe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:oR},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:$Tn,gridWidth:1,labelFontSize:12,labelFont:rz,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:oR,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:rz,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:oR,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:xT["six-groups-cat-1"],diverging:xT["diverging-colors"],heatmap:xT["diverging-colors"],ordinal:xT["six-groups-seq"],ramp:xT["shades-blue"]},area:{fill:Kl},rect:{fill:Kl},line:{color:Kl,stroke:Kl,strokeWidth:5},trail:{color:Kl,stroke:Kl,strokeWidth:0,size:1},path:{stroke:Kl,strokeWidth:.5},point:{filled:!0},text:{font:RTn,color:Kl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Kl,stroke:null}},arc:{fill:Kl},shape:{stroke:Kl},symbol:{fill:Kl,size:30}},rv="#3366CC",swe="#ccc",aR="Arial, sans-serif",MTn={arc:{fill:rv},area:{fill:rv},path:{stroke:rv},rect:{fill:rv},shape:{stroke:rv},symbol:{stroke:rv},circle:{fill:rv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:aR,fontSize:12},"guide-title":{font:aR,fontSize:12},"group-title":{font:aR,fontSize:12}},title:{font:aR,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:swe,tickColor:swe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Wie=e=>e*(1/3+1),owe=Wie(9),awe=Wie(10),uwe=Wie(12),ST="Segoe UI",lwe="wf_standard-font, helvetica, arial, sans-serif",cwe="#252423",TT="#605E5C",fwe="transparent",LTn="#C8C6C4",Zc="#118DFF",FTn="#12239E",jTn="#E66C37",BTn="#6B007B",zTn="#E044A7",UTn="#744EC2",VTn="#D9B300",HTn="#D64550",bWe=Zc,wWe="#DEEFFF",dwe=[wWe,bWe],qTn=[wWe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",bWe],WTn={view:{stroke:fwe},background:fwe,font:ST,header:{titleFont:lwe,titleFontSize:uwe,titleColor:cwe,labelFont:ST,labelFontSize:awe,labelColor:TT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:TT,labelFontSize:owe,titleFont:lwe,titleColor:cwe,titleFontSize:uwe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:LTn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zc},line:{stroke:Zc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:ST,fontSize:owe,fill:TT},arc:{fill:Zc},area:{fill:Zc,line:!0,opacity:.6},path:{stroke:Zc},rect:{fill:Zc},point:{fill:Zc,filled:!0,size:75},shape:{stroke:Zc},symbol:{fill:Zc,strokeWidth:1.5,size:50},legend:{titleFont:ST,titleFontWeight:"bold",titleColor:TT,labelFont:ST,labelFontSize:awe,labelColor:TT,symbolType:"circle",symbolSize:75},range:{category:[Zc,FTn,jTn,BTn,zTn,UTn,VTn,HTn],diverging:dwe,heatmap:dwe,ordinal:qTn}},iz='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',GTn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',sz=400,uR={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},YTn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],KTn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Q8({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=uR.gridBg[e],i=uR.textPrimary[e],s=uR.textSecondary[e],o=n==="dark"?YTn:KTn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:iz,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:GTn,labelFontWeight:sz,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:uR.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:iz,fill:s,fontWeight:sz},"guide-title":{font:iz,fill:s,fontWeight:sz}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const XTn=Q8({theme:"white",background:"#ffffff"}),QTn=Q8({theme:"g10",background:"#f4f4f4"}),JTn=Q8({theme:"g90",background:"#262626"}),ZTn=Q8({theme:"g100",background:"#161616"}),e2n=vTn.version,t2n=Object.freeze(Object.defineProperty({__proto__:null,carbong10:QTn,carbong100:ZTn,carbong90:JTn,carbonwhite:XTn,dark:_Tn,excel:bTn,fivethirtyeight:xTn,ggplot2:STn,googlecharts:MTn,latimes:ITn,powerbi:WTn,quartz:OTn,urbaninstitute:DTn,version:e2n,vox:PTn},Symbol.toStringTag,{value:"Module"}));function n2n(e,t,n,r){if(De(e))return`[${e.map(i=>t(vt(i)?i:hwe(i,n))).join(", ")}]`;if(_t(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(_t(c)&&(c=hwe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function r2n(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function hwe(e,t){return JSON.stringify(e,r2n(t))}var i2n=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const EWe="vg-tooltip-element",s2n={offsetX:10,offsetY:10,id:EWe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:o2n,maxDepth:2,formatTooltip:n2n,baseURL:""};function o2n(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function a2n(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return i2n.toString().replace(EWe,e)}function u2n(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class l2n{constructor(t){this.options={...s2n,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=a2n(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=u2n(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var oz={};function c2n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var az,pwe;function f2n(){return pwe||(pwe=1,az=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),az}var d2n=_r;_r.Node=s_;_r.create=_r;function _r(e){var t=this;if(t instanceof _r||(t=new _r),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}_r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};_r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};_r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};_r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)p2n(this,arguments[e]);return this.length};_r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)m2n(this,arguments[e]);return this.length};_r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};_r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};_r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};_r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};_r.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};_r.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};_r.prototype.map=function(e,t){t=t||this;for(var n=new _r,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};_r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new _r,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};_r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};_r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};_r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};_r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};_r.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};_r.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};_r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=h2n(this,i,n[r]);return s};_r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function h2n(e,t,n){var r=t===e.head?new s_(n,null,t,e):new s_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function p2n(e,t){e.tail=new s_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function m2n(e,t){e.head=new s_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s_(e,t,n,r){if(!(this instanceof s_))return new s_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{f2n()(_r)}catch{}const g2n=d2n,Rv=Symbol("max"),xp=Symbol("length"),mb=Symbol("lengthCalculator"),mC=Symbol("allowStale"),Jv=Symbol("maxAge"),vp=Symbol("dispose"),mwe=Symbol("noDisposeOnSet"),Xs=Symbol("lruList"),ef=Symbol("cache"),xWe=Symbol("updateAgeOnGet"),uz=()=>1;class y2n{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Rv]=t.max||1/0;const n=t.length||uz;if(this[mb]=typeof n!="function"?uz:n,this[mC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Jv]=t.maxAge||0,this[vp]=t.dispose,this[mwe]=t.noDisposeOnSet||!1,this[xWe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Rv]=t||1/0,CT(this)}get max(){return this[Rv]}set allowStale(t){this[mC]=!!t}get allowStale(){return this[mC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Jv]=t,CT(this)}get maxAge(){return this[Jv]}set lengthCalculator(t){typeof t!="function"&&(t=uz),t!==this[mb]&&(this[mb]=t,this[xp]=0,this[Xs].forEach(n=>{n.length=this[mb](n.value,n.key),this[xp]+=n.length})),CT(this)}get lengthCalculator(){return this[mb]}get length(){return this[xp]}get itemCount(){return this[Xs].length}rforEach(t,n){n=n||this;for(let r=this[Xs].tail;r!==null;){const i=r.prev;gwe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Xs].head;r!==null;){const i=r.next;gwe(this,t,r,n),r=i}}keys(){return this[Xs].toArray().map(t=>t.key)}values(){return this[Xs].toArray().map(t=>t.value)}reset(){this[vp]&&this[Xs]&&this[Xs].length&&this[Xs].forEach(t=>this[vp](t.key,t.value)),this[ef]=new Map,this[Xs]=new g2n,this[xp]=0}dump(){return this[Xs].map(t=>_6(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Xs]}set(t,n,r){if(r=r||this[Jv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[mb](n,t);if(this[ef].has(t)){if(s>this[Rv])return zw(this,this[ef].get(t)),!1;const u=this[ef].get(t).value;return this[vp]&&(this[mwe]||this[vp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[xp]+=s-u.length,u.length=s,this.get(t),CT(this),!0}const o=new v2n(t,n,s,i,r);return o.length>this[Rv]?(this[vp]&&this[vp](t,n),!1):(this[xp]+=o.length,this[Xs].unshift(o),this[ef].set(t,this[Xs].head),CT(this),!0)}has(t){if(!this[ef].has(t))return!1;const n=this[ef].get(t).value;return!_6(this,n)}get(t){return lz(this,t,!0)}peek(t){return lz(this,t,!1)}pop(){const t=this[Xs].tail;return t?(zw(this,t),t.value):null}del(t){zw(this,this[ef].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[ef].forEach((t,n)=>lz(this,n,!1))}}const lz=(e,t,n)=>{const r=e[ef].get(t);if(r){const i=r.value;if(_6(e,i)){if(zw(e,r),!e[mC])return}else n&&(e[xWe]&&(r.value.now=Date.now()),e[Xs].unshiftNode(r));return i.value}},_6=(e,t)=>{if(!t||!t.maxAge&&!e[Jv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Jv]&&n>e[Jv]},CT=e=>{if(e[xp]>e[Rv])for(let t=e[Xs].tail;e[xp]>e[Rv]&&t!==null;){const n=t.prev;zw(e,t),t=n}},zw=(e,t)=>{if(t){const n=t.value;e[vp]&&e[vp](n.key,n.value),e[xp]-=n.length,e[ef].delete(n.key),e[Xs].removeNode(t)}};class v2n{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const gwe=(e,t,n,r)=>{let i=n.value;_6(e,i)&&(zw(e,n),e[mC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var _2n=y2n;const b2n=Object.freeze({loose:!0}),w2n=Object.freeze({}),E2n=e=>e?typeof e!="object"?b2n:e:w2n;var Gie=E2n,QW={exports:{}};const x2n="2.0.0",SWe=256,S2n=Number.MAX_SAFE_INTEGER||9007199254740991,T2n=16,C2n=SWe-6,A2n=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Yie={MAX_LENGTH:SWe,MAX_SAFE_COMPONENT_LENGTH:T2n,MAX_SAFE_BUILD_LENGTH:C2n,MAX_SAFE_INTEGER:S2n,RELEASE_TYPES:A2n,SEMVER_SPEC_VERSION:x2n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const I2n=typeof process=="object"&&oz&&oz.NODE_DEBUG&&/\bsemver\b/i.test(oz.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var J8=I2n;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Yie,s=J8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(QW,QW.exports);var Kie=QW.exports;const ywe=/^[0-9]+$/,TWe=(e,t)=>{const n=ywe.test(e),r=ywe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},O2n=(e,t)=>TWe(t,e);var P2n={compareIdentifiers:TWe,rcompareIdentifiers:O2n};const lR=J8,{MAX_LENGTH:vwe,MAX_SAFE_INTEGER:cR}=Yie,{safeRe:_we,t:bwe}=Kie,k2n=Gie,{compareIdentifiers:gb}=P2n;let R2n=class pd{constructor(t,n){if(n=k2n(n),t instanceof pd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>vwe)throw new TypeError(`version is longer than ${vwe} characters`);lR("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?_we[bwe.LOOSE]:_we[bwe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>cR||this.major<0)throw new TypeError("Invalid major version");if(this.minor>cR||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>cR||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<cR)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(lR("SemVer.compare",this.version,this.options,t),!(t instanceof pd)){if(typeof t=="string"&&t===this.version)return 0;t=new pd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof pd||(t=new pd(t,this.options)),gb(this.major,t.major)||gb(this.minor,t.minor)||gb(this.patch,t.patch)}comparePre(t){if(t instanceof pd||(t=new pd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(lR("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gb(r,i)}while(++n)}compareBuild(t){t instanceof pd||(t=new pd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(lR("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return gb(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),gb(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Xie=R2n;const wwe=Xie,$2n=(e,t,n)=>new wwe(e,n).compare(new wwe(t,n));var vS=$2n;const N2n=vS,D2n=(e,t,n)=>N2n(e,t,n)===0;var M2n=D2n;const L2n=vS,F2n=(e,t,n)=>L2n(e,t,n)!==0;var j2n=F2n;const B2n=vS,z2n=(e,t,n)=>B2n(e,t,n)>0;var U2n=z2n;const V2n=vS,H2n=(e,t,n)=>V2n(e,t,n)>=0;var q2n=H2n;const W2n=vS,G2n=(e,t,n)=>W2n(e,t,n)<0;var Y2n=G2n;const K2n=vS,X2n=(e,t,n)=>K2n(e,t,n)<=0;var Q2n=X2n;const J2n=M2n,Z2n=j2n,eCn=U2n,tCn=q2n,nCn=Y2n,rCn=Q2n,iCn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return J2n(e,n,r);case"!=":return Z2n(e,n,r);case">":return eCn(e,n,r);case">=":return tCn(e,n,r);case"<":return nCn(e,n,r);case"<=":return rCn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var sCn=iCn,cz,Ewe;function oCn(){if(Ewe)return cz;Ewe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}cz=t;const n=Gie,{safeRe:r,t:i}=Kie,s=sCn,o=J8,a=Xie,u=CWe();return cz}var fz,xwe;function CWe(){if(xwe)return fz;xwe=1;class e{constructor(N,F){if(F=r(F),N instanceof e)return N.loose===!!F.loose&&N.includePrerelease===!!F.includePrerelease?N:new e(N.raw,F);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=N.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(W=>!p(W[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const W of this.set)if(W.length===1&&m(W[0])){this.set=[W];break}}}this.format()}format(){return this.range=this.set.map(N=>N.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(N){const B=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+N,W=n.get(B);if(W)return W;const V=this.options.loose,G=V?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];N=N.replace(G,k(this.options.includePrerelease)),s("hyphen replace",N),N=N.replace(a[u.COMPARATORTRIM],l),s("comparator trim",N),N=N.replace(a[u.TILDETRIM],c),s("tilde trim",N),N=N.replace(a[u.CARETTRIM],f),s("caret trim",N);let M=N.split(" ").map(j=>y(j,this.options)).join(" ").split(/\s+/).map(j=>I(j,this.options));V&&(M=M.filter(j=>(s("loose invalid filter",j,this.options),!!j.match(a[u.COMPARATORLOOSE])))),s("range list",M);const H=new Map,Y=M.map(j=>new i(j,this.options));for(const j of Y){if(p(j))return[j];H.set(j.value,j)}H.size>1&&H.has("")&&H.delete("");const L=[...H.values()];return n.set(B,L),L}intersects(N,F){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some(B=>g(B,F)&&N.set.some(W=>g(W,F)&&B.every(V=>W.every(G=>V.intersects(G,F)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new o(N,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(R(this.set[F],N,this.options))return!0;return!1}}fz=e;const t=_2n,n=new t({max:1e3}),r=Gie,i=oCn(),s=J8,o=Xie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Kie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Yie,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,N)=>{let F=!0;const B=P.slice();let W=B.pop();for(;F&&B.length;)F=B.every(V=>W.intersects(V,N)),W=B.pop();return F},y=(P,N)=>(s("comp",P,N),P=S(P,N),s("caret",P),P=_(P,N),s("tildes",P),P=b(P,N),s("xrange",P),P=A(P,N),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",_=(P,N)=>P.trim().split(/\s+/).map(F=>w(F,N)).join(" "),w=(P,N)=>{const F=N.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(B,W,V,G,M)=>{s("tilde",P,B,W,V,G,M);let H;return v(W)?H="":v(V)?H=`>=${W}.0.0 <${+W+1}.0.0-0`:v(G)?H=`>=${W}.${V}.0 <${W}.${+V+1}.0-0`:M?(s("replaceTilde pr",M),H=`>=${W}.${V}.${G}-${M} <${W}.${+V+1}.0-0`):H=`>=${W}.${V}.${G} <${W}.${+V+1}.0-0`,s("tilde return",H),H})},S=(P,N)=>P.trim().split(/\s+/).map(F=>x(F,N)).join(" "),x=(P,N)=>{s("caret",P,N);const F=N.loose?a[u.CARETLOOSE]:a[u.CARET],B=N.includePrerelease?"-0":"";return P.replace(F,(W,V,G,M,H)=>{s("caret",P,W,V,G,M,H);let Y;return v(V)?Y="":v(G)?Y=`>=${V}.0.0${B} <${+V+1}.0.0-0`:v(M)?V==="0"?Y=`>=${V}.${G}.0${B} <${V}.${+G+1}.0-0`:Y=`>=${V}.${G}.0${B} <${+V+1}.0.0-0`:H?(s("replaceCaret pr",H),V==="0"?G==="0"?Y=`>=${V}.${G}.${M}-${H} <${V}.${G}.${+M+1}-0`:Y=`>=${V}.${G}.${M}-${H} <${V}.${+G+1}.0-0`:Y=`>=${V}.${G}.${M}-${H} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?G==="0"?Y=`>=${V}.${G}.${M}${B} <${V}.${G}.${+M+1}-0`:Y=`>=${V}.${G}.${M}${B} <${V}.${+G+1}.0-0`:Y=`>=${V}.${G}.${M} <${+V+1}.0.0-0`),s("caret return",Y),Y})},b=(P,N)=>(s("replaceXRanges",P,N),P.split(/\s+/).map(F=>T(F,N)).join(" ")),T=(P,N)=>{P=P.trim();const F=N.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(B,W,V,G,M,H)=>{s("xRange",P,B,W,V,G,M,H);const Y=v(V),L=Y||v(G),j=L||v(M),q=j;return W==="="&&q&&(W=""),H=N.includePrerelease?"-0":"",Y?W===">"||W==="<"?B="<0.0.0-0":B="*":W&&q?(L&&(G=0),M=0,W===">"?(W=">=",L?(V=+V+1,G=0,M=0):(G=+G+1,M=0)):W==="<="&&(W="<",L?V=+V+1:G=+G+1),W==="<"&&(H="-0"),B=`${W+V}.${G}.${M}${H}`):L?B=`>=${V}.0.0${H} <${+V+1}.0.0-0`:j&&(B=`>=${V}.${G}.0${H} <${V}.${+G+1}.0-0`),s("xRange return",B),B})},A=(P,N)=>(s("replaceStars",P,N),P.trim().replace(a[u.STAR],"")),I=(P,N)=>(s("replaceGTE0",P,N),P.trim().replace(a[N.includePrerelease?u.GTE0PRE:u.GTE0],"")),k=P=>(N,F,B,W,V,G,M,H,Y,L,j,q,Z)=>(v(B)?F="":v(W)?F=`>=${B}.0.0${P?"-0":""}`:v(V)?F=`>=${B}.${W}.0${P?"-0":""}`:G?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(Y)?H="":v(L)?H=`<${+Y+1}.0.0-0`:v(j)?H=`<${Y}.${+L+1}.0-0`:q?H=`<=${Y}.${L}.${j}-${q}`:P?H=`<${Y}.${L}.${+j+1}-0`:H=`<=${H}`,`${F} ${H}`.trim()),R=(P,N,F)=>{for(let B=0;B<P.length;B++)if(!P[B].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(let B=0;B<P.length;B++)if(s(P[B].semver),P[B].semver!==i.ANY&&P[B].semver.prerelease.length>0){const W=P[B].semver;if(W.major===N.major&&W.minor===N.minor&&W.patch===N.patch)return!0}return!1}return!0};return fz}const aCn=CWe(),uCn=(e,t,n)=>{try{t=new aCn(t,n)}catch{return!1}return t.test(e)};var lCn=uCn,AWe=c2n(lCn);function cCn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var fCn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function IWe(e,...t){for(const n of t)dCn(e,n);return e}function dCn(e,t){for(const n of Object.keys(t))eS(e,n,t[n],!0)}const nf=K0n;let tI=eTn;const fR=typeof window<"u"?window:void 0;var kwe;tI===void 0&&((kwe=fR==null?void 0:fR.vl)!=null&&kwe.compile)&&(tI=fR.vl);const hCn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},pCn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},m2={vega:"Vega","vega-lite":"Vega-Lite"},b6={vega:nf.version,"vega-lite":tI?tI.version:"not available"},mCn={vega:e=>e,"vega-lite":(e,t)=>tI.compile(e,{config:t}).spec},gCn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,yCn="chart-wrapper";function vCn(e){return typeof e=="function"}function Swe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${m2[r]} JSON Source`}function _Cn(e,t){if(e.$schema){const n=_We(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${m2[n.library]}, but mode argument sets ${m2[t]??t}.`);const r=n.library;return AWe(b6[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${m2[r]} ${n.version}, but the current version of ${m2[r]} is v${b6[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function OWe(e){return!!(e&&"load"in e)}function Twe(e){return OWe(e)?e:nf.loader(e)}function bCn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return vt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function wCn(e,t,n={}){let r,i;vt(t)?(i=Twe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=bCn(r),o=s.loader;(!i||o)&&(i=Twe(n.loader??o));const a=await Cwe(s,i),u=await Cwe(n,i),l={...IWe(u,a),config:Zx(u.config??{},a.config??{})};return await xCn(e,r,l,i)}async function Cwe(e,t){const n=vt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=vt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function ECn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function xCn(e,t,n={},r){const i=n.theme?Zx(t2n[n.theme],n.config??{}):n.config,s=Oy(n.actions)?n.actions:IWe({},hCn,n.actions??{}),o={...pCn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??nf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:x,rootContainer:b}=ECn(c);if(!x.getElementById(S)){const T=document.createElement("style");T.id=S,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?fCn.toString():n.defaultStyle,b.appendChild(T)}}const f=_Cn(t,n.mode);let d=mCn[f](t,i);if(f==="vega-lite"&&d.$schema){const S=_We(d.$schema);AWe(b6.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${b6.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const S=document.createElement("div");S.classList.add(yCn),c.appendChild(S),h=S}const p=n.patch;if(p&&(d=p instanceof Function?p(d):hF(d,p,!0,!1).newDocument),n.formatLocale&&nf.formatLocale(n.formatLocale),n.timeFormatLocale&&nf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const x=n.expressionFunctions[S];"fn"in x?nf.expressionFunction(S,x.fn,x.visitor):x instanceof Function&&nf.expressionFunction(S,x)}const{ast:m}=n,g=nf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||nf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:nf.expressionInterpreter??n.expr??syn}:{}});if(y.addSignalListener("autosize",(S,x)=>{const{type:b}=x;b=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):b=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):b=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:x}=n,b=S&&!OWe(S)?S==null?void 0:S.baseURL:void 0,T=vCn(x)?x:new l2n({baseURL:b,...x===!0?{}:x}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:S,updateSet:x}=typeof v=="boolean"?{}:v;y.hover(S,x)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let S=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const b=document.createElement("details");b.title=o.CLICK_TO_VIEW_ACTIONS,c.append(b),S=b;const T=document.createElement("summary");T.innerHTML=gCn,b.append(T),_=A=>{b.contains(A.target)||b.removeAttribute("open")},document.addEventListener("click",_)}const x=document.createElement("div");if(S.append(x),x.classList.add("vega-actions"),s===!0||s.export!==!1){for(const b of["svg","png"])if(s===!0||s.export===!0||s.export[b]){const T=o[`${b.toUpperCase()}_ACTION`],A=document.createElement("a"),I=_t(n.scaleFactor)?n.scaleFactor[b]:n.scaleFactor;A.text=T,A.href="#",A.target="_blank",A.download=`${l}.${b}`,A.addEventListener("mousedown",async function(k){k.preventDefault();const R=await y.toImageURL(b,I);this.href=R}),x.append(A)}}if(s===!0||s.source!==!1){const b=document.createElement("a");b.text=o.SOURCE_ACTION,b.href="#",b.addEventListener("click",function(T){Swe(d7(t),n.sourceHeader??"",n.sourceFooter??"",f),T.preventDefault()}),x.append(b)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const b=document.createElement("a");b.text=o.COMPILED_ACTION,b.href="#",b.addEventListener("click",function(T){Swe(d7(d),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),x.append(b)}if(s===!0||s.editor!==!1){const b=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(A){cCn(window,b,{config:i,mode:f,renderer:a,spec:d7(t)}),A.preventDefault()}),x.append(T)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function SCn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function TCn(e,t,n){n&&(SCn(n)?n(e.data(t)):e.change(t,nf.changeset().remove(()=>!0).insert(n)))}function CCn(e,t){Object.keys(t).forEach(n=>{TCn(e,n,t[n])})}function PWe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const kWe=()=>{};function dz(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function ACn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=PWe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!LH(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Awe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function hz(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function g2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class RWe extends z.PureComponent{constructor(){super(...arguments),g2(this,"containerRef",z.createRef()),g2(this,"resultPromise",void 0),g2(this,"handleError",t=>{const{onError:n=kWe}=this.props;n(t,this.containerRef.current),console.warn(t)}),g2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=PWe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=ACn(hz(this.props),hz(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!xq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Awe(a,s),i&&dz(a,i)),a.run()})}else xq(i,s)||this.modifyView(o=>{s&&Awe(o,s),i&&dz(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=hz(this.props);this.resultPromise=wCn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;dz(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return z.createElement("div",{ref:this.containerRef,className:t,style:n})}}g2(RWe,"propTypes",{className:Jt.string,onError:Jt.func});function JW(){return JW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JW.apply(this,arguments)}function ZW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ICn={};class $We extends z.PureComponent{constructor(){super(...arguments),ZW(this,"vegaEmbed",z.createRef()),ZW(this,"handleNewView",t=>{this.update();const{onNewView:n=kWe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){xq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{CCn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return z.createElement(RWe,JW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}ZW($We,"defaultProps",{data:ICn});function eG(){return eG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eG.apply(this,arguments)}function OCn(e){return z.createElement($We,eG({},e,{mode:"vega-lite"}))}function Iwe(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function PCn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=AP(!1),a=kc(),[u,l]=mc(),c=n.filter(I=>I.completed).map(I=>Math.max(...Object.values(I.answers).map(k=>k.endTime))),[f,d]=C.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=C.useMemo(()=>n.filter(I=>I.completed&&Iwe(I.answers,f)),[n,f]),p=C.useMemo(()=>n.filter(I=>!I.completed&&Iwe(I.answers,f)),[n,f]),m=C.useMemo(()=>{var I,k;return h.length>0?[{Date:(I=f[0])==null?void 0:I.getTime(),Participants:0},...h.map(R=>Math.max(...Object.values(R.answers).map(P=>P.endTime).flat())).sort((R,P)=>R-P).map((R,P)=>({Date:R,Participants:P})),{Date:(k=f[1])==null?void 0:k.getTime(),Participants:h.length}]:[]},[h,f]),g=C.useMemo(()=>{var I,k;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(I=f[0])==null?void 0:I.getTime(),(k=f[1])==null?void 0:k.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:_}]=AP(!1),[w,{close:S,open:x}]=AP(!1),[b,{close:T,open:A}]=AP(!1);return $.jsxs(Dm,{children:[$.jsxs(i4,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[$.jsxs(vi,{align:"center",mb:16,justify:"space-between",children:[$.jsxs(vi,{direction:"column",children:[$.jsx(ca,{order:5,mb:4,children:t}),$.jsxs(vi,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[$.jsxs(RR,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),$.jsxs(RR,{size:"sm",color:"green",children:["Completed:",h.length]}),$.jsxs(RR,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),$.jsxs(gr,{children:[$.jsxs(Pr,{opened:y,children:[$.jsx(Pr.Target,{children:$.jsx(Lr,{variant:"light",disabled:n.length===0,onClick:()=>{iZ(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:_,onMouseLeave:v,px:4,children:$.jsx(a0t,{})})}),$.jsx(Pr.Dropdown,{children:$.jsx(dt,{children:"Download all participants data as JSON"})})]}),$.jsxs(Pr,{opened:w,children:[$.jsx(Pr.Target,{children:$.jsx(Lr,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:x,onMouseLeave:S,px:4,children:$.jsx(POe,{})})}),$.jsx(Pr.Dropdown,{children:$.jsx(dt,{children:"Download all participants data as a tidy CSV"})})]}),$.jsxs(Pr,{opened:b,children:[$.jsx(Pr.Target,{children:$.jsx(Lr,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:A,onMouseLeave:T,px:4,children:$.jsx(s0t,{})})}),$.jsx(Pr.Dropdown,{children:$.jsx(dt,{children:"Analyze study data"})})]})]})]}),$.jsx(aje,{label:$.jsx(dt,{children:"Time Filter:"}),placeholder:"Pick dates range",value:f,onChange:d}),m.length>0?$.jsxs($.Fragment,{children:[$.jsx(dt,{mt:16,children:"Finished Participants"}),$.jsx(OCn,{spec:g,actions:!1})]}):$.jsx(pt,{h:293.4,children:$.jsx(Ya,{style:{height:"100%"},children:$.jsx(dt,{children:"Not enough participants for chart"})})})]}),i&&$.jsx(VUt,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function kCn(e){const{globalConfig:t}=e,[n,r]=C.useState(!1),[i,s]=C.useState({}),[o,a]=C.useState({}),{storageEngine:u}=fo();return C.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await lee(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),$.jsxs(pt,{children:[$.jsx(ca,{mb:20,order:4,children:"Your Studies:"}),$.jsxs(yf,{children:[t.configsList.map(l=>i[l]&&$.jsx(yf.Col,{md:12,xl:6,children:$.jsx(PCn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),$.jsx(Mm,{visible:n})]})]})}function RCn({globalConfig:e}){return $.jsxs(hI,{children:[$.jsx(sC,{studyIds:e.configsList}),$.jsx(Dm,{fluid:!0,children:$.jsx(kCn,{globalConfig:e})})]})}function $Cn(){const{user:e,triggerAuth:t}=Qx(),{storageEngine:n}=fo(),[r,i]=C.useState(!1),[s,o]=C.useState([]),[a,u]=C.useState(!1),[l,c]=C.useState(!1),[f,d]=C.useState(!1),[h,p]=C.useState(!1),[m,g]=C.useState(""),[y,v]=C.useState(null),_=C4e({initialValues:{email:""},validate:{email:vVt("Invalid email")}});C.useEffect(()=>{(async()=>{if(u(!0),n instanceof Cd){const k=await(n==null?void 0:n.getUserManagementData("authentication"));i(k==null?void 0:k.isEnabled);const R=await(n==null?void 0:n.getUserManagementData("adminUsers"));R&&R.adminUsersList&&o(R==null?void 0:R.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof Cd){const I=await S8e(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},S=async I=>{u(!0),n instanceof Cd&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},x=async()=>{if(u(!0),n instanceof Cd){await n.addAdminUser({email:_.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(k=>k.email))}u(!1),c(!1),_.setValues({email:""})},b=I=>{d(!0),g(I)},T=async()=>{if(u(!0),n instanceof Cd){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(k=>k.email))}d(!1),u(!1)},A=C.useMemo(()=>n instanceof Cd,[n]);return $.jsxs($.Fragment,{children:[$.jsx(Dm,{children:$.jsxs(i4,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[$.jsx(ca,{mb:20,order:3,children:"Authentication"}),r?$.jsx(vi,{children:$.jsx(dt,{children:"Authentication is enabled."})}):$.jsxs(vi,{justify:"space-between",children:[$.jsx(pt,{children:$.jsx(dt,{children:"Authentication is currently disabled."})}),$.jsx(Wp,{label:"You can only enable auth when using Firebase",disabled:A,children:$.jsx(Lr,{onClick:I=>A?w():I.preventDefault(),color:"green","data-disabled":A?void 0:!0,sx:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?$.jsxs(vi,{mt:40,direction:"column",children:[$.jsxs(vi,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[$.jsx(ca,{order:6,children:"Enabled Users"}),$.jsx(b0t,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var k;return $.jsxs(vi,{justify:"space-between",mb:10,children:[$.jsx(dt,{children:I}),I===((k=e.user)==null?void 0:k.email)?$.jsx(dt,{color:"blue",size:"xs",children:"You"}):$.jsx(lm,{variant:"subtle",onClick:()=>b(I),children:$.jsx(_0t,{color:"red"})})]},I)}):null]}):null]})}),$.jsx(qp,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:$.jsxs(pt,{component:"form",onSubmit:_.onSubmit(()=>x()),children:[$.jsx(mx,{icon:$.jsx(t0t,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),$.jsxs(vi,{mt:30,justify:"right",children:[$.jsx(Lr,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),$.jsx(Lr,{type:"submit",children:"Save"})]})]})}),$.jsxs(qp,{opened:f,size:"large",onClose:()=>d(!1),title:$.jsxs(dt,{fw:700,children:["Remove",m,"?"]}),children:[$.jsxs(dt,{mt:40,children:["Are you sure you want to remove",$.jsx("b",{children:m})," ","as an administrator?"]}),$.jsxs(vi,{mt:40,justify:"right",children:[$.jsx(Lr,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),$.jsx(Lr,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),$.jsxs(qp,{opened:h,size:"md",onClose:()=>d(!1),title:$.jsx(dt,{fw:700,children:"Enable Authentication?"}),children:[$.jsxs(dt,{mt:40,children:["User"," ",$.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),$.jsxs(vi,{mt:40,justify:"right",children:[$.jsx(Lr,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),$.jsx(Lr,{onClick:()=>S(y),children:"Yes, I'm sure."})]})]}),$.jsx(Mm,{visible:a})]})}var NCn={VITE_BASE_PATH:"/ThinkAloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ",VITE_REVISIT_MODE:"private",BASE_URL:"/ThinkAloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function DCn(){const t=await(await fetch(`${Nc}global.json`)).text();return BUt(t)}async function MCn(e){const t={},n=e.configsList.filter(o=>NCn.VITE_CI==="true"?!0:!e.configs[o].test).map(o=>`${Nc}${e.configs[o].path}`),r=await Promise.all(n.map(o=>fetch(o))),i=await Promise.all(r.map(o=>o.text())),s=await Promise.all(i.map((o,a)=>b4e(o,e.configsList[a])));return e.configsList.forEach((o,a)=>{t[o]=s[a]}),t}function LCn(){const[e,t]=C.useState(null),[n,r]=C.useState({});return C.useEffect(()=>{async function i(){e&&r(await MCn(e))}i()},[e]),C.useEffect(()=>{e||DCn().then(i=>{t(i)})},[e]),e?$.jsx(aXe,{basename:Nc,children:$.jsx(TJt,{children:$.jsx(jgt,{children:$.jsxs(ZKe,{children:[$.jsx(dp,{path:"/",element:$.jsxs($.Fragment,{children:[$.jsx(sC,{studyIds:e.configsList}),$.jsx(axt,{globalConfig:e,studyConfigs:n})]})}),$.jsx(dp,{path:"/:studyId/*",element:$.jsx(uZt,{globalConfig:e})}),$.jsx(dp,{path:"/analysis/dashboard",element:$.jsx(i7,{children:$.jsx(RCn,{globalConfig:e})})}),$.jsx(dp,{path:"/analysis",element:$.jsx(WH,{to:"/analysis/dashboard"})}),$.jsx(dp,{path:"/analysis/stats/:studyId/:tab",element:$.jsx(i7,{children:$.jsx(dZt,{globalConfig:e})})}),$.jsx(dp,{path:"/analysis/stats/:studyId",element:$.jsx(WH,{to:"./table",replace:!0})}),$.jsx(dp,{path:"/settings",element:$.jsx(i7,{children:$.jsxs(hI,{children:[$.jsx(sC,{studyIds:e.configsList}),$.jsx($Cn,{})]})})}),$.jsx(dp,{path:"/login",element:$.jsxs($.Fragment,{children:[$.jsx(sC,{studyIds:e.configsList}),$.jsx(hZt,{})]})})]})})})}):null}let dR;const FCn=new Uint8Array(16);function jCn(){if(!dR&&(dR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dR))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dR(FCn)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function BCn(e,t=0){return bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]}const zCn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Owe={randomUUID:zCn};function Pwe(e,t,n){if(Owe.randomUUID&&!t&&!e)return Owe.randomUUID();e=e||{};const r=e.random||(e.rng||jCn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,BCn(r)}class UCn extends _8e{constructor(){super("localStorage");nl(this,"studyDatabase")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await _q.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await $w(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await $w(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=Pwe();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=_q.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=Pwe();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await $w(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function VCn(){let e,t=!1;{const n=new Cd;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new UCn;await n.connect(),e=n}return e}function HCn(){const{storageEngine:e,setStorageEngine:t}=fo();return C.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await VCn();t(r)}n()},[t,e]),$.jsx(LCn,{})}pz.createRoot(document.getElementById("root")).render($.jsx(z.StrictMode,{children:$.jsx(cKe,{children:$.jsx(HCn,{})})}))});export default qCn();
