var yGe=Object.defineProperty;var vGe=(e,t,n)=>t in e?yGe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _Ge=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var rl=(e,t,n)=>(vGe(e,typeof t!="symbol"?t+"":t,n),n);var nIn=_Ge((_On,nse)=>{function bGe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ju(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tEe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var nEe={exports:{}},P6={},rEe={exports:{}},Vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uI=Symbol.for("react.element"),wGe=Symbol.for("react.portal"),EGe=Symbol.for("react.fragment"),xGe=Symbol.for("react.strict_mode"),SGe=Symbol.for("react.profiler"),TGe=Symbol.for("react.provider"),CGe=Symbol.for("react.context"),AGe=Symbol.for("react.forward_ref"),IGe=Symbol.for("react.suspense"),OGe=Symbol.for("react.memo"),PGe=Symbol.for("react.lazy"),wse=Symbol.iterator;function kGe(e){return e===null||typeof e!="object"?null:(e=wse&&e[wse]||e["@@iterator"],typeof e=="function"?e:null)}var iEe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sEe=Object.assign,oEe={};function lx(e,t,n){this.props=e,this.context=t,this.refs=oEe,this.updater=n||iEe}lx.prototype.isReactComponent={};lx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};lx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aEe(){}aEe.prototype=lx.prototype;function pG(e,t,n){this.props=e,this.context=t,this.refs=oEe,this.updater=n||iEe}var mG=pG.prototype=new aEe;mG.constructor=pG;sEe(mG,lx.prototype);mG.isPureReactComponent=!0;var Ese=Array.isArray,uEe=Object.prototype.hasOwnProperty,gG={current:null},lEe={key:!0,ref:!0,__self:!0,__source:!0};function cEe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)uEe.call(t,r)&&!lEe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:uI,type:e,key:s,ref:o,props:i,_owner:gG.current}}function RGe(e,t){return{$$typeof:uI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yG(e){return typeof e=="object"&&e!==null&&e.$$typeof===uI}function $Ge(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xse=/\/+/g;function pj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$Ge(""+e.key):t.toString(36)}function _R(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case uI:case wGe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+pj(o,0):r,Ese(i)?(n="",e!=null&&(n=e.replace(xse,"$&/")+"/"),_R(i,t,n,"",function(l){return l})):i!=null&&(yG(i)&&(i=RGe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xse,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Ese(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+pj(s,a);o+=_R(s,t,n,u,i)}else if(u=kGe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+pj(s,a++),o+=_R(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function hP(e,t,n){if(e==null)return e;var r=[],i=0;return _R(e,r,"","",function(s){return t.call(n,s,i++)}),r}function NGe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nu={current:null},bR={transition:null},DGe={ReactCurrentDispatcher:nu,ReactCurrentBatchConfig:bR,ReactCurrentOwner:gG};function fEe(){throw Error("act(...) is not supported in production builds of React.")}Vn.Children={map:hP,forEach:function(e,t,n){hP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hP(e,function(){t++}),t},toArray:function(e){return hP(e,function(t){return t})||[]},only:function(e){if(!yG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Vn.Component=lx;Vn.Fragment=EGe;Vn.Profiler=SGe;Vn.PureComponent=pG;Vn.StrictMode=xGe;Vn.Suspense=IGe;Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DGe;Vn.act=fEe;Vn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sEe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=gG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)uEe.call(t,u)&&!lEe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:uI,type:e.type,key:i,ref:s,props:r,_owner:o}};Vn.createContext=function(e){return e={$$typeof:CGe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:TGe,_context:e},e.Consumer=e};Vn.createElement=cEe;Vn.createFactory=function(e){var t=cEe.bind(null,e);return t.type=e,t};Vn.createRef=function(){return{current:null}};Vn.forwardRef=function(e){return{$$typeof:AGe,render:e}};Vn.isValidElement=yG;Vn.lazy=function(e){return{$$typeof:PGe,_payload:{_status:-1,_result:e},_init:NGe}};Vn.memo=function(e,t){return{$$typeof:OGe,type:e,compare:t===void 0?null:t}};Vn.startTransition=function(e){var t=bR.transition;bR.transition={};try{e()}finally{bR.transition=t}};Vn.unstable_act=fEe;Vn.useCallback=function(e,t){return nu.current.useCallback(e,t)};Vn.useContext=function(e){return nu.current.useContext(e)};Vn.useDebugValue=function(){};Vn.useDeferredValue=function(e){return nu.current.useDeferredValue(e)};Vn.useEffect=function(e,t){return nu.current.useEffect(e,t)};Vn.useId=function(){return nu.current.useId()};Vn.useImperativeHandle=function(e,t,n){return nu.current.useImperativeHandle(e,t,n)};Vn.useInsertionEffect=function(e,t){return nu.current.useInsertionEffect(e,t)};Vn.useLayoutEffect=function(e,t){return nu.current.useLayoutEffect(e,t)};Vn.useMemo=function(e,t){return nu.current.useMemo(e,t)};Vn.useReducer=function(e,t,n){return nu.current.useReducer(e,t,n)};Vn.useRef=function(e){return nu.current.useRef(e)};Vn.useState=function(e){return nu.current.useState(e)};Vn.useSyncExternalStore=function(e,t,n){return nu.current.useSyncExternalStore(e,t,n)};Vn.useTransition=function(){return nu.current.useTransition()};Vn.version="18.3.1";rEe.exports=Vn;var C=rEe.exports;const j=Ju(C),wC=bGe({__proto__:null,default:j},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MGe=C,LGe=Symbol.for("react.element"),FGe=Symbol.for("react.fragment"),jGe=Object.prototype.hasOwnProperty,BGe=MGe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zGe={key:!0,ref:!0,__self:!0,__source:!0};function dEe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)jGe.call(t,r)&&!zGe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:LGe,type:e,key:s,ref:o,props:i,_owner:BGe.current}}P6.Fragment=FGe;P6.jsx=dEe;P6.jsxs=dEe;nEe.exports=P6;var R=nEe.exports,Az={},hEe={exports:{}},zl={},pEe={exports:{}},mEe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,G){var M=V.length;V.push(G);e:for(;0<M;){var H=M-1>>>1,Y=V[H];if(0<i(Y,G))V[H]=G,V[M]=Y,M=H;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var G=V[0],M=V.pop();if(M!==G){V[0]=M;e:for(var H=0,Y=V.length,L=Y>>>1;H<L;){var B=2*(H+1)-1,q=V[B],Z=B+1,ue=V[Z];if(0>i(q,M))Z<Y&&0>i(ue,q)?(V[H]=ue,V[Z]=M,H=Z):(V[H]=q,V[B]=M,H=B);else if(Z<Y&&0>i(ue,M))V[H]=ue,V[Z]=M,H=Z;else break e}}return G}function i(V,G){var M=V.sortIndex-G.sortIndex;return M!==0?M:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var G=n(l);G!==null;){if(G.callback===null)r(l);else if(G.startTime<=V)r(l),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(l)}}function w(V){if(m=!1,_(V),!p)if(n(u)!==null)p=!0,z(E);else{var G=n(l);G!==null&&W(w,G.startTime-V)}}function E(V,G){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var M=d;try{for(_(G),f=n(u);f!==null&&(!(f.expirationTime>G)||V&&!k());){var H=f.callback;if(typeof H=="function"){f.callback=null,d=f.priorityLevel;var Y=H(f.expirationTime<=G);G=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(u)&&r(u),_(G)}else r(u);f=n(u)}if(f!==null)var L=!0;else{var B=n(l);B!==null&&W(w,B.startTime-G),L=!1}return L}finally{f=null,d=M,h=!1}}var S=!1,b=null,T=-1,A=5,I=-1;function k(){return!(e.unstable_now()-I<A)}function $(){if(b!==null){var V=e.unstable_now();I=V;var G=!0;try{G=b(!0,V)}finally{G?P():(S=!1,b=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v($)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,F=N.port2;N.port1.onmessage=$,P=function(){F.postMessage(null)}}else P=function(){g($,0)};function z(V){b=V,S||(S=!0,P())}function W(V,G){T=g(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,z(E))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(V){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var M=d;d=G;try{return V()}finally{d=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var M=d;d=V;try{return G()}finally{d=M}},e.unstable_scheduleCallback=function(V,G,M){var H=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?H+M:H):M=H,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=M+Y,V={id:c++,callback:G,priorityLevel:V,startTime:M,expirationTime:Y,sortIndex:-1},M>H?(V.sortIndex=M,t(l,V),n(u)===null&&V===n(l)&&(m?(y(T),T=-1):m=!0,W(w,M-H))):(V.sortIndex=Y,t(u,V),p||h||(p=!0,z(E))),V},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(V){var G=d;return function(){var M=d;d=G;try{return V.apply(this,arguments)}finally{d=M}}}})(mEe);pEe.exports=mEe;var UGe=pEe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VGe=C,Pl=UGe;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gEe=new Set,EC={};function u_(e,t){Ww(e,t),Ww(e+"Capture",t)}function Ww(e,t){for(EC[e]=t,e=0;e<t.length;e++)gEe.add(t[e])}var am=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Iz=Object.prototype.hasOwnProperty,HGe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sse={},Tse={};function qGe(e){return Iz.call(Tse,e)?!0:Iz.call(Sse,e)?!1:HGe.test(e)?Tse[e]=!0:(Sse[e]=!0,!1)}function WGe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GGe(e,t,n,r){if(t===null||typeof t>"u"||WGe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ru(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new ru(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new ru(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new ru(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new ru(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new ru(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new ru(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new ru(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new ru(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new ru(e,5,!1,e.toLowerCase(),null,!1,!1)});var vG=/[\-:]([a-z])/g;function _G(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vG,_G);Lo[t]=new ru(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vG,_G);Lo[t]=new ru(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vG,_G);Lo[t]=new ru(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new ru(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new ru("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new ru(e,1,!1,e.toLowerCase(),null,!0,!0)});function bG(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(GGe(t,n,i,r)&&(n=null),r||i===null?qGe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $m=VGe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pP=Symbol.for("react.element"),Rb=Symbol.for("react.portal"),$b=Symbol.for("react.fragment"),wG=Symbol.for("react.strict_mode"),Oz=Symbol.for("react.profiler"),yEe=Symbol.for("react.provider"),vEe=Symbol.for("react.context"),EG=Symbol.for("react.forward_ref"),Pz=Symbol.for("react.suspense"),kz=Symbol.for("react.suspense_list"),xG=Symbol.for("react.memo"),Sg=Symbol.for("react.lazy"),_Ee=Symbol.for("react.offscreen"),Cse=Symbol.iterator;function TS(e){return e===null||typeof e!="object"?null:(e=Cse&&e[Cse]||e["@@iterator"],typeof e=="function"?e:null)}var Ui=Object.assign,mj;function PT(e){if(mj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);mj=t&&t[1]||""}return`
`+mj+e}var gj=!1;function yj(e,t){if(!e||gj)return"";gj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{gj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?PT(e):""}function YGe(e){switch(e.tag){case 5:return PT(e.type);case 16:return PT("Lazy");case 13:return PT("Suspense");case 19:return PT("SuspenseList");case 0:case 2:case 15:return e=yj(e.type,!1),e;case 11:return e=yj(e.type.render,!1),e;case 1:return e=yj(e.type,!0),e;default:return""}}function Rz(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $b:return"Fragment";case Rb:return"Portal";case Oz:return"Profiler";case wG:return"StrictMode";case Pz:return"Suspense";case kz:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vEe:return(e.displayName||"Context")+".Consumer";case yEe:return(e._context.displayName||"Context")+".Provider";case EG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xG:return t=e.displayName||null,t!==null?t:Rz(e.type)||"Memo";case Sg:t=e._payload,e=e._init;try{return Rz(e(t))}catch{}}return null}function KGe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rz(t);case 8:return t===wG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function O0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bEe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function XGe(e){var t=bEe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function mP(e){e._valueTracker||(e._valueTracker=XGe(e))}function wEe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bEe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function q$(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $z(e,t){var n=t.checked;return Ui({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ase(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=O0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function EEe(e,t){t=t.checked,t!=null&&bG(e,"checked",t,!1)}function Nz(e,t){EEe(e,t);var n=O0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dz(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dz(e,t.type,O0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ise(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dz(e,t,n){(t!=="number"||q$(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kT=Array.isArray;function ow(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+O0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Mz(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Ui({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ose(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(kT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:O0(n)}}function xEe(e,t){var n=O0(t.value),r=O0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Pse(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SEe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lz(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SEe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gP,TEe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gP=gP||document.createElement("div"),gP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var w2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},QGe=["Webkit","ms","Moz","O"];Object.keys(w2).forEach(function(e){QGe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),w2[t]=w2[e]})});function CEe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||w2.hasOwnProperty(e)&&w2[e]?(""+t).trim():t+"px"}function AEe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=CEe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var JGe=Ui({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fz(e,t){if(t){if(JGe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function jz(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bz=null;function SG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zz=null,aw=null,uw=null;function kse(e){if(e=fI(e)){if(typeof zz!="function")throw Error(et(280));var t=e.stateNode;t&&(t=D6(t),zz(e.stateNode,e.type,t))}}function IEe(e){aw?uw?uw.push(e):uw=[e]:aw=e}function OEe(){if(aw){var e=aw,t=uw;if(uw=aw=null,kse(e),t)for(e=0;e<t.length;e++)kse(t[e])}}function PEe(e,t){return e(t)}function kEe(){}var vj=!1;function REe(e,t,n){if(vj)return e(t,n);vj=!0;try{return PEe(e,t,n)}finally{vj=!1,(aw!==null||uw!==null)&&(kEe(),OEe())}}function SC(e,t){var n=e.stateNode;if(n===null)return null;var r=D6(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var Uz=!1;if(am)try{var CS={};Object.defineProperty(CS,"passive",{get:function(){Uz=!0}}),window.addEventListener("test",CS,CS),window.removeEventListener("test",CS,CS)}catch{Uz=!1}function ZGe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var E2=!1,W$=null,G$=!1,Vz=null,eYe={onError:function(e){E2=!0,W$=e}};function tYe(e,t,n,r,i,s,o,a,u){E2=!1,W$=null,ZGe.apply(eYe,arguments)}function nYe(e,t,n,r,i,s,o,a,u){if(tYe.apply(this,arguments),E2){if(E2){var l=W$;E2=!1,W$=null}else throw Error(et(198));G$||(G$=!0,Vz=l)}}function l_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $Ee(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rse(e){if(l_(e)!==e)throw Error(et(188))}function rYe(e){var t=e.alternate;if(!t){if(t=l_(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Rse(i),e;if(s===r)return Rse(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function NEe(e){return e=rYe(e),e!==null?DEe(e):null}function DEe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DEe(e);if(t!==null)return t;e=e.sibling}return null}var MEe=Pl.unstable_scheduleCallback,$se=Pl.unstable_cancelCallback,iYe=Pl.unstable_shouldYield,sYe=Pl.unstable_requestPaint,as=Pl.unstable_now,oYe=Pl.unstable_getCurrentPriorityLevel,TG=Pl.unstable_ImmediatePriority,LEe=Pl.unstable_UserBlockingPriority,Y$=Pl.unstable_NormalPriority,aYe=Pl.unstable_LowPriority,FEe=Pl.unstable_IdlePriority,k6=null,Jd=null;function uYe(e){if(Jd&&typeof Jd.onCommitFiberRoot=="function")try{Jd.onCommitFiberRoot(k6,e,void 0,(e.current.flags&128)===128)}catch{}}var Sf=Math.clz32?Math.clz32:fYe,lYe=Math.log,cYe=Math.LN2;function fYe(e){return e>>>=0,e===0?32:31-(lYe(e)/cYe|0)|0}var yP=64,vP=4194304;function RT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function K$(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=RT(a):(s&=o,s!==0&&(r=RT(s)))}else o=n&~i,o!==0?r=RT(o):s!==0&&(r=RT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sf(t),i=1<<n,r|=e[n],t&=~i;return r}function dYe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hYe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Sf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=dYe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function Hz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jEe(){var e=yP;return yP<<=1,!(yP&4194240)&&(yP=64),e}function _j(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sf(t),e[t]=n}function pYe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Sf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function CG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Br=0;function BEe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zEe,AG,UEe,VEe,HEe,qz=!1,_P=[],i0=null,s0=null,o0=null,TC=new Map,CC=new Map,$g=[],mYe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nse(e,t){switch(e){case"focusin":case"focusout":i0=null;break;case"dragenter":case"dragleave":s0=null;break;case"mouseover":case"mouseout":o0=null;break;case"pointerover":case"pointerout":TC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":CC.delete(t.pointerId)}}function AS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=fI(t),t!==null&&AG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gYe(e,t,n,r,i){switch(t){case"focusin":return i0=AS(i0,e,t,n,r,i),!0;case"dragenter":return s0=AS(s0,e,t,n,r,i),!0;case"mouseover":return o0=AS(o0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return TC.set(s,AS(TC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,CC.set(s,AS(CC.get(s)||null,e,t,n,r,i)),!0}return!1}function qEe(e){var t=Dv(e.target);if(t!==null){var n=l_(t);if(n!==null){if(t=n.tag,t===13){if(t=$Ee(n),t!==null){e.blockedOn=t,HEe(e.priority,function(){UEe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wR(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Bz=r,n.target.dispatchEvent(r),Bz=null}else return t=fI(n),t!==null&&AG(t),e.blockedOn=n,!1;t.shift()}return!0}function Dse(e,t,n){wR(e)&&n.delete(t)}function yYe(){qz=!1,i0!==null&&wR(i0)&&(i0=null),s0!==null&&wR(s0)&&(s0=null),o0!==null&&wR(o0)&&(o0=null),TC.forEach(Dse),CC.forEach(Dse)}function IS(e,t){e.blockedOn===t&&(e.blockedOn=null,qz||(qz=!0,Pl.unstable_scheduleCallback(Pl.unstable_NormalPriority,yYe)))}function AC(e){function t(i){return IS(i,e)}if(0<_P.length){IS(_P[0],e);for(var n=1;n<_P.length;n++){var r=_P[n];r.blockedOn===e&&(r.blockedOn=null)}}for(i0!==null&&IS(i0,e),s0!==null&&IS(s0,e),o0!==null&&IS(o0,e),TC.forEach(t),CC.forEach(t),n=0;n<$g.length;n++)r=$g[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$g.length&&(n=$g[0],n.blockedOn===null);)qEe(n),n.blockedOn===null&&$g.shift()}var lw=$m.ReactCurrentBatchConfig,X$=!0;function vYe(e,t,n,r){var i=Br,s=lw.transition;lw.transition=null;try{Br=1,IG(e,t,n,r)}finally{Br=i,lw.transition=s}}function _Ye(e,t,n,r){var i=Br,s=lw.transition;lw.transition=null;try{Br=4,IG(e,t,n,r)}finally{Br=i,lw.transition=s}}function IG(e,t,n,r){if(X$){var i=Wz(e,t,n,r);if(i===null)Oj(e,t,r,Q$,n),Nse(e,r);else if(gYe(i,e,t,n,r))r.stopPropagation();else if(Nse(e,r),t&4&&-1<mYe.indexOf(e)){for(;i!==null;){var s=fI(i);if(s!==null&&zEe(s),s=Wz(e,t,n,r),s===null&&Oj(e,t,r,Q$,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Oj(e,t,r,null,n)}}var Q$=null;function Wz(e,t,n,r){if(Q$=null,e=SG(r),e=Dv(e),e!==null)if(t=l_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=$Ee(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Q$=e,null}function WEe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oYe()){case TG:return 1;case LEe:return 4;case Y$:case aYe:return 16;case FEe:return 536870912;default:return 16}default:return 16}}var zg=null,OG=null,ER=null;function GEe(){if(ER)return ER;var e,t=OG,n=t.length,r,i="value"in zg?zg.value:zg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return ER=i.slice(e,1<r?1-r:void 0)}function xR(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bP(){return!0}function Mse(){return!1}function Ul(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bP:Mse,this.isPropagationStopped=Mse,this}return Ui(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bP)},persist:function(){},isPersistent:bP}),t}var cx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PG=Ul(cx),cI=Ui({},cx,{view:0,detail:0}),bYe=Ul(cI),bj,wj,OS,R6=Ui({},cI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==OS&&(OS&&e.type==="mousemove"?(bj=e.screenX-OS.screenX,wj=e.screenY-OS.screenY):wj=bj=0,OS=e),bj)},movementY:function(e){return"movementY"in e?e.movementY:wj}}),Lse=Ul(R6),wYe=Ui({},R6,{dataTransfer:0}),EYe=Ul(wYe),xYe=Ui({},cI,{relatedTarget:0}),Ej=Ul(xYe),SYe=Ui({},cx,{animationName:0,elapsedTime:0,pseudoElement:0}),TYe=Ul(SYe),CYe=Ui({},cx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AYe=Ul(CYe),IYe=Ui({},cx,{data:0}),Fse=Ul(IYe),OYe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PYe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kYe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RYe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kYe[e])?!!t[e]:!1}function kG(){return RYe}var $Ye=Ui({},cI,{key:function(e){if(e.key){var t=OYe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xR(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PYe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kG,charCode:function(e){return e.type==="keypress"?xR(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xR(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NYe=Ul($Ye),DYe=Ui({},R6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jse=Ul(DYe),MYe=Ui({},cI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kG}),LYe=Ul(MYe),FYe=Ui({},cx,{propertyName:0,elapsedTime:0,pseudoElement:0}),jYe=Ul(FYe),BYe=Ui({},R6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zYe=Ul(BYe),UYe=[9,13,27,32],RG=am&&"CompositionEvent"in window,x2=null;am&&"documentMode"in document&&(x2=document.documentMode);var VYe=am&&"TextEvent"in window&&!x2,YEe=am&&(!RG||x2&&8<x2&&11>=x2),Bse=" ",zse=!1;function KEe(e,t){switch(e){case"keyup":return UYe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XEe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nb=!1;function HYe(e,t){switch(e){case"compositionend":return XEe(t);case"keypress":return t.which!==32?null:(zse=!0,Bse);case"textInput":return e=t.data,e===Bse&&zse?null:e;default:return null}}function qYe(e,t){if(Nb)return e==="compositionend"||!RG&&KEe(e,t)?(e=GEe(),ER=OG=zg=null,Nb=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return YEe&&t.locale!=="ko"?null:t.data;default:return null}}var WYe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Use(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WYe[e.type]:t==="textarea"}function QEe(e,t,n,r){IEe(r),t=J$(t,"onChange"),0<t.length&&(n=new PG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var S2=null,IC=null;function GYe(e){uxe(e,0)}function $6(e){var t=Lb(e);if(wEe(t))return e}function YYe(e,t){if(e==="change")return t}var JEe=!1;if(am){var xj;if(am){var Sj="oninput"in document;if(!Sj){var Vse=document.createElement("div");Vse.setAttribute("oninput","return;"),Sj=typeof Vse.oninput=="function"}xj=Sj}else xj=!1;JEe=xj&&(!document.documentMode||9<document.documentMode)}function Hse(){S2&&(S2.detachEvent("onpropertychange",ZEe),IC=S2=null)}function ZEe(e){if(e.propertyName==="value"&&$6(IC)){var t=[];QEe(t,IC,e,SG(e)),REe(GYe,t)}}function KYe(e,t,n){e==="focusin"?(Hse(),S2=t,IC=n,S2.attachEvent("onpropertychange",ZEe)):e==="focusout"&&Hse()}function XYe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $6(IC)}function QYe(e,t){if(e==="click")return $6(t)}function JYe(e,t){if(e==="input"||e==="change")return $6(t)}function ZYe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nf=typeof Object.is=="function"?Object.is:ZYe;function OC(e,t){if(Nf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Iz.call(t,i)||!Nf(e[i],t[i]))return!1}return!0}function qse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wse(e,t){var n=qse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qse(n)}}function exe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?exe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function txe(){for(var e=window,t=q$();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=q$(e.document)}return t}function $G(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eKe(e){var t=txe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&exe(n.ownerDocument.documentElement,n)){if(r!==null&&$G(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Wse(n,s);var o=Wse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var tKe=am&&"documentMode"in document&&11>=document.documentMode,Db=null,Gz=null,T2=null,Yz=!1;function Gse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yz||Db==null||Db!==q$(r)||(r=Db,"selectionStart"in r&&$G(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),T2&&OC(T2,r)||(T2=r,r=J$(Gz,"onSelect"),0<r.length&&(t=new PG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Db)))}function wP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mb={animationend:wP("Animation","AnimationEnd"),animationiteration:wP("Animation","AnimationIteration"),animationstart:wP("Animation","AnimationStart"),transitionend:wP("Transition","TransitionEnd")},Tj={},nxe={};am&&(nxe=document.createElement("div").style,"AnimationEvent"in window||(delete Mb.animationend.animation,delete Mb.animationiteration.animation,delete Mb.animationstart.animation),"TransitionEvent"in window||delete Mb.transitionend.transition);function N6(e){if(Tj[e])return Tj[e];if(!Mb[e])return e;var t=Mb[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nxe)return Tj[e]=t[n];return e}var rxe=N6("animationend"),ixe=N6("animationiteration"),sxe=N6("animationstart"),oxe=N6("transitionend"),axe=new Map,Yse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gy(e,t){axe.set(e,t),u_(t,[e])}for(var Cj=0;Cj<Yse.length;Cj++){var Aj=Yse[Cj],nKe=Aj.toLowerCase(),rKe=Aj[0].toUpperCase()+Aj.slice(1);gy(nKe,"on"+rKe)}gy(rxe,"onAnimationEnd");gy(ixe,"onAnimationIteration");gy(sxe,"onAnimationStart");gy("dblclick","onDoubleClick");gy("focusin","onFocus");gy("focusout","onBlur");gy(oxe,"onTransitionEnd");Ww("onMouseEnter",["mouseout","mouseover"]);Ww("onMouseLeave",["mouseout","mouseover"]);Ww("onPointerEnter",["pointerout","pointerover"]);Ww("onPointerLeave",["pointerout","pointerover"]);u_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));u_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));u_("onBeforeInput",["compositionend","keypress","textInput","paste"]);u_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));u_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));u_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $T="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iKe=new Set("cancel close invalid load scroll toggle".split(" ").concat($T));function Kse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nYe(r,t,void 0,e),e.currentTarget=null}function uxe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Kse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Kse(i,a,l),s=u}}}if(G$)throw e=Vz,G$=!1,Vz=null,e}function gi(e,t){var n=t[Zz];n===void 0&&(n=t[Zz]=new Set);var r=e+"__bubble";n.has(r)||(lxe(t,e,2,!1),n.add(r))}function Ij(e,t,n){var r=0;t&&(r|=4),lxe(n,e,r,t)}var EP="_reactListening"+Math.random().toString(36).slice(2);function PC(e){if(!e[EP]){e[EP]=!0,gEe.forEach(function(n){n!=="selectionchange"&&(iKe.has(n)||Ij(n,!1,e),Ij(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[EP]||(t[EP]=!0,Ij("selectionchange",!1,t))}}function lxe(e,t,n,r){switch(WEe(t)){case 1:var i=vYe;break;case 4:i=_Ye;break;default:i=IG}n=i.bind(null,t,n,e),i=void 0,!Uz||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Oj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Dv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}REe(function(){var l=s,c=SG(n),f=[];e:{var d=axe.get(e);if(d!==void 0){var h=PG,p=e;switch(e){case"keypress":if(xR(n)===0)break e;case"keydown":case"keyup":h=NYe;break;case"focusin":p="focus",h=Ej;break;case"focusout":p="blur",h=Ej;break;case"beforeblur":case"afterblur":h=Ej;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Lse;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=EYe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=LYe;break;case rxe:case ixe:case sxe:h=TYe;break;case oxe:h=jYe;break;case"scroll":h=bYe;break;case"wheel":h=zYe;break;case"copy":case"cut":case"paste":h=AYe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=jse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=SC(v,y),w!=null&&m.push(kC(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Bz&&(p=n.relatedTarget||n.fromElement)&&(Dv(p)||p[um]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Dv(p):null,p!==null&&(g=l_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Lse,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=jse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Lb(h),_=p==null?d:Lb(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,Dv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=Y_(_))v++;for(_=0,w=y;w;w=Y_(w))_++;for(;0<v-_;)m=Y_(m),v--;for(;0<_-v;)y=Y_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Y_(m),y=Y_(y)}m=null}else m=null;h!==null&&Xse(f,d,h,m,!1),p!==null&&g!==null&&Xse(f,g,p,m,!0)}}e:{if(d=l?Lb(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=YYe;else if(Use(d))if(JEe)E=JYe;else{E=XYe;var S=KYe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=QYe);if(E&&(E=E(e,l))){QEe(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Dz(d,"number",d.value)}switch(S=l?Lb(l):window,e){case"focusin":(Use(S)||S.contentEditable==="true")&&(Db=S,Gz=l,T2=null);break;case"focusout":T2=Gz=Db=null;break;case"mousedown":Yz=!0;break;case"contextmenu":case"mouseup":case"dragend":Yz=!1,Gse(f,n,c);break;case"selectionchange":if(tKe)break;case"keydown":case"keyup":Gse(f,n,c)}var b;if(RG)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Nb?KEe(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(YEe&&n.locale!=="ko"&&(Nb||T!=="onCompositionStart"?T==="onCompositionEnd"&&Nb&&(b=GEe()):(zg=c,OG="value"in zg?zg.value:zg.textContent,Nb=!0)),S=J$(l,T),0<S.length&&(T=new Fse(T,e,null,n,c),f.push({event:T,listeners:S}),b?T.data=b:(b=XEe(n),b!==null&&(T.data=b)))),(b=VYe?HYe(e,n):qYe(e,n))&&(l=J$(l,"onBeforeInput"),0<l.length&&(c=new Fse("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=b))}uxe(f,t)})}function kC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function J$(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=SC(e,n),s!=null&&r.unshift(kC(e,s,i)),s=SC(e,t),s!=null&&r.push(kC(e,s,i))),e=e.return}return r}function Y_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=SC(n,s),u!=null&&o.unshift(kC(n,u,a))):i||(u=SC(n,s),u!=null&&o.push(kC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var sKe=/\r\n?/g,oKe=/\u0000|\uFFFD/g;function Qse(e){return(typeof e=="string"?e:""+e).replace(sKe,`
`).replace(oKe,"")}function xP(e,t,n){if(t=Qse(t),Qse(e)!==t&&n)throw Error(et(425))}function Z$(){}var Kz=null,Xz=null;function Qz(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jz=typeof setTimeout=="function"?setTimeout:void 0,aKe=typeof clearTimeout=="function"?clearTimeout:void 0,Jse=typeof Promise=="function"?Promise:void 0,uKe=typeof queueMicrotask=="function"?queueMicrotask:typeof Jse<"u"?function(e){return Jse.resolve(null).then(e).catch(lKe)}:Jz;function lKe(e){setTimeout(function(){throw e})}function Pj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),AC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);AC(t)}function a0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var fx=Math.random().toString(36).slice(2),Pd="__reactFiber$"+fx,RC="__reactProps$"+fx,um="__reactContainer$"+fx,Zz="__reactEvents$"+fx,cKe="__reactListeners$"+fx,fKe="__reactHandles$"+fx;function Dv(e){var t=e[Pd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[um]||n[Pd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Zse(e);e!==null;){if(n=e[Pd])return n;e=Zse(e)}return t}e=n,n=e.parentNode}return null}function fI(e){return e=e[Pd]||e[um],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lb(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function D6(e){return e[RC]||null}var eU=[],Fb=-1;function yy(e){return{current:e}}function xi(e){0>Fb||(e.current=eU[Fb],eU[Fb]=null,Fb--)}function fi(e,t){Fb++,eU[Fb]=e.current,e.current=t}var P0={},Ea=yy(P0),$u=yy(!1),_1=P0;function Gw(e,t){var n=e.type.contextTypes;if(!n)return P0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nu(e){return e=e.childContextTypes,e!=null}function eN(){xi($u),xi(Ea)}function eoe(e,t,n){if(Ea.current!==P0)throw Error(et(168));fi(Ea,t),fi($u,n)}function cxe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,KGe(e)||"Unknown",i));return Ui({},n,r)}function tN(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||P0,_1=Ea.current,fi(Ea,e),fi($u,$u.current),!0}function toe(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=cxe(e,t,_1),r.__reactInternalMemoizedMergedChildContext=e,xi($u),xi(Ea),fi(Ea,e)):xi($u),fi($u,n)}var wp=null,M6=!1,kj=!1;function fxe(e){wp===null?wp=[e]:wp.push(e)}function dKe(e){M6=!0,fxe(e)}function vy(){if(!kj&&wp!==null){kj=!0;var e=0,t=Br;try{var n=wp;for(Br=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wp=null,M6=!1}catch(i){throw wp!==null&&(wp=wp.slice(e+1)),MEe(TG,vy),i}finally{Br=t,kj=!1}}return null}var jb=[],Bb=0,nN=null,rN=0,nc=[],rc=0,b1=null,$p=1,Np="";function ov(e,t){jb[Bb++]=rN,jb[Bb++]=nN,nN=e,rN=t}function dxe(e,t,n){nc[rc++]=$p,nc[rc++]=Np,nc[rc++]=b1,b1=e;var r=$p;e=Np;var i=32-Sf(r)-1;r&=~(1<<i),n+=1;var s=32-Sf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$p=1<<32-Sf(t)+i|n<<i|r,Np=s+e}else $p=1<<s|n<<i|r,Np=e}function NG(e){e.return!==null&&(ov(e,1),dxe(e,1,0))}function DG(e){for(;e===nN;)nN=jb[--Bb],jb[Bb]=null,rN=jb[--Bb],jb[Bb]=null;for(;e===b1;)b1=nc[--rc],nc[rc]=null,Np=nc[--rc],nc[rc]=null,$p=nc[--rc],nc[rc]=null}var xl=null,gl=null,Ri=!1,uf=null;function hxe(e,t){var n=fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function noe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xl=e,gl=a0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xl=e,gl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=b1!==null?{id:$p,overflow:Np}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xl=e,gl=null,!0):!1;default:return!1}}function tU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nU(e){if(Ri){var t=gl;if(t){var n=t;if(!noe(e,t)){if(tU(e))throw Error(et(418));t=a0(n.nextSibling);var r=xl;t&&noe(e,t)?hxe(r,n):(e.flags=e.flags&-4097|2,Ri=!1,xl=e)}}else{if(tU(e))throw Error(et(418));e.flags=e.flags&-4097|2,Ri=!1,xl=e}}}function roe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xl=e}function SP(e){if(e!==xl)return!1;if(!Ri)return roe(e),Ri=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qz(e.type,e.memoizedProps)),t&&(t=gl)){if(tU(e))throw pxe(),Error(et(418));for(;t;)hxe(e,t),t=a0(t.nextSibling)}if(roe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gl=a0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gl=null}}else gl=xl?a0(e.stateNode.nextSibling):null;return!0}function pxe(){for(var e=gl;e;)e=a0(e.nextSibling)}function Yw(){gl=xl=null,Ri=!1}function MG(e){uf===null?uf=[e]:uf.push(e)}var hKe=$m.ReactCurrentBatchConfig;function PS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function TP(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ioe(e){var t=e._init;return t(e._payload)}function mxe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=f0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=Fj(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var E=_.type;return E===$b?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Sg&&ioe(E)===v.type)?(w=i(v,_.props),w.ref=PS(y,v,_),w.return=y,w):(w=PR(_.type,_.key,_.props,null,y.mode,w),w.ref=PS(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=jj(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,E){return v===null||v.tag!==7?(v=n1(_,y.mode,w,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Fj(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case pP:return _=PR(v.type,v.key,v.props,null,y.mode,_),_.ref=PS(y,null,v),_.return=y,_;case Rb:return v=jj(v,y.mode,_),v.return=y,v;case Sg:var w=v._init;return f(y,w(v._payload),_)}if(kT(v)||TS(v))return v=n1(v,y.mode,_,null),v.return=y,v;TP(y,v)}return null}function d(y,v,_,w){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pP:return _.key===E?u(y,v,_,w):null;case Rb:return _.key===E?l(y,v,_,w):null;case Sg:return E=_._init,d(y,v,E(_._payload),w)}if(kT(_)||TS(_))return E!==null?null:c(y,v,_,w,null);TP(y,_)}return null}function h(y,v,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pP:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,E);case Rb:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,E);case Sg:var S=w._init;return h(y,v,_,S(w._payload),E)}if(kT(w)||TS(w))return y=y.get(_)||null,c(v,y,w,E,null);TP(v,w)}return null}function p(y,v,_,w){for(var E=null,S=null,b=v,T=v=0,A=null;b!==null&&T<_.length;T++){b.index>T?(A=b,b=null):A=b.sibling;var I=d(y,b,_[T],w);if(I===null){b===null&&(b=A);break}e&&b&&I.alternate===null&&t(y,b),v=s(I,v,T),S===null?E=I:S.sibling=I,S=I,b=A}if(T===_.length)return n(y,b),Ri&&ov(y,T),E;if(b===null){for(;T<_.length;T++)b=f(y,_[T],w),b!==null&&(v=s(b,v,T),S===null?E=b:S.sibling=b,S=b);return Ri&&ov(y,T),E}for(b=r(y,b);T<_.length;T++)A=h(b,y,T,_[T],w),A!==null&&(e&&A.alternate!==null&&b.delete(A.key===null?T:A.key),v=s(A,v,T),S===null?E=A:S.sibling=A,S=A);return e&&b.forEach(function(k){return t(y,k)}),Ri&&ov(y,T),E}function m(y,v,_,w){var E=TS(_);if(typeof E!="function")throw Error(et(150));if(_=E.call(_),_==null)throw Error(et(151));for(var S=E=null,b=v,T=v=0,A=null,I=_.next();b!==null&&!I.done;T++,I=_.next()){b.index>T?(A=b,b=null):A=b.sibling;var k=d(y,b,I.value,w);if(k===null){b===null&&(b=A);break}e&&b&&k.alternate===null&&t(y,b),v=s(k,v,T),S===null?E=k:S.sibling=k,S=k,b=A}if(I.done)return n(y,b),Ri&&ov(y,T),E;if(b===null){for(;!I.done;T++,I=_.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,T),S===null?E=I:S.sibling=I,S=I);return Ri&&ov(y,T),E}for(b=r(y,b);!I.done;T++,I=_.next())I=h(b,y,T,I.value,w),I!==null&&(e&&I.alternate!==null&&b.delete(I.key===null?T:I.key),v=s(I,v,T),S===null?E=I:S.sibling=I,S=I);return e&&b.forEach(function($){return t(y,$)}),Ri&&ov(y,T),E}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===$b&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case pP:e:{for(var E=_.key,S=v;S!==null;){if(S.key===E){if(E=_.type,E===$b){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Sg&&ioe(E)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=PS(y,S,_),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}_.type===$b?(v=n1(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=PR(_.type,_.key,_.props,null,y.mode,w),w.ref=PS(y,v,_),w.return=y,y=w)}return o(y);case Rb:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=jj(_,y.mode,w),v.return=y,y=v}return o(y);case Sg:return S=_._init,g(y,v,S(_._payload),w)}if(kT(_))return p(y,v,_,w);if(TS(_))return m(y,v,_,w);TP(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=Fj(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Kw=mxe(!0),gxe=mxe(!1),iN=yy(null),sN=null,zb=null,LG=null;function FG(){LG=zb=sN=null}function jG(e){var t=iN.current;xi(iN),e._currentValue=t}function rU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cw(e,t){sN=e,LG=zb=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Iu=!0),e.firstContext=null)}function wc(e){var t=e._currentValue;if(LG!==e)if(e={context:e,memoizedValue:t,next:null},zb===null){if(sN===null)throw Error(et(308));zb=e,sN.dependencies={lanes:0,firstContext:e}}else zb=zb.next=e;return t}var Mv=null;function BG(e){Mv===null?Mv=[e]:Mv.push(e)}function yxe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,BG(t)):(n.next=i.next,i.next=n),t.interleaved=n,lm(e,r)}function lm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Tg=!1;function zG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vxe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function u0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,lm(e,n)}return i=r.interleaved,i===null?(t.next=t,BG(r)):(t.next=i.next,i.next=t),r.interleaved=t,lm(e,n)}function SR(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,CG(e,n)}}function soe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function oN(e,t,n,r){var i=e.updateQueue;Tg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ui({},f,d);break e;case 2:Tg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);E1|=o,e.lanes=o,e.memoizedState=f}}function ooe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var dI={},Zd=yy(dI),$C=yy(dI),NC=yy(dI);function Lv(e){if(e===dI)throw Error(et(174));return e}function UG(e,t){switch(fi(NC,t),fi($C,e),fi(Zd,dI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lz(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lz(t,e)}xi(Zd),fi(Zd,t)}function Xw(){xi(Zd),xi($C),xi(NC)}function _xe(e){Lv(NC.current);var t=Lv(Zd.current),n=Lz(t,e.type);t!==n&&(fi($C,e),fi(Zd,n))}function VG(e){$C.current===e&&(xi(Zd),xi($C))}var ji=yy(0);function aN(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rj=[];function HG(){for(var e=0;e<Rj.length;e++)Rj[e]._workInProgressVersionPrimary=null;Rj.length=0}var TR=$m.ReactCurrentDispatcher,$j=$m.ReactCurrentBatchConfig,w1=0,zi=null,Rs=null,Zs=null,uN=!1,C2=!1,DC=0,pKe=0;function Yo(){throw Error(et(321))}function qG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nf(e[n],t[n]))return!1;return!0}function WG(e,t,n,r,i,s){if(w1=s,zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,TR.current=e===null||e.memoizedState===null?vKe:_Ke,e=n(r,i),C2){s=0;do{if(C2=!1,DC=0,25<=s)throw Error(et(301));s+=1,Zs=Rs=null,t.updateQueue=null,TR.current=bKe,e=n(r,i)}while(C2)}if(TR.current=lN,t=Rs!==null&&Rs.next!==null,w1=0,Zs=Rs=zi=null,uN=!1,t)throw Error(et(300));return e}function GG(){var e=DC!==0;return DC=0,e}function yd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zs===null?zi.memoizedState=Zs=e:Zs=Zs.next=e,Zs}function Ec(){if(Rs===null){var e=zi.alternate;e=e!==null?e.memoizedState:null}else e=Rs.next;var t=Zs===null?zi.memoizedState:Zs.next;if(t!==null)Zs=t,Rs=e;else{if(e===null)throw Error(et(310));Rs=e,e={memoizedState:Rs.memoizedState,baseState:Rs.baseState,baseQueue:Rs.baseQueue,queue:Rs.queue,next:null},Zs===null?zi.memoizedState=Zs=e:Zs=Zs.next=e}return Zs}function MC(e,t){return typeof t=="function"?t(e):t}function Nj(e){var t=Ec(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=Rs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((w1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,zi.lanes|=c,E1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Nf(r,t.memoizedState)||(Iu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,zi.lanes|=s,E1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Dj(e){var t=Ec(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Nf(s,t.memoizedState)||(Iu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function bxe(){}function wxe(e,t){var n=zi,r=Ec(),i=t(),s=!Nf(r.memoizedState,i);if(s&&(r.memoizedState=i,Iu=!0),r=r.queue,YG(Sxe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Zs!==null&&Zs.memoizedState.tag&1){if(n.flags|=2048,LC(9,xxe.bind(null,n,r,i,t),void 0,null),lo===null)throw Error(et(349));w1&30||Exe(n,t,i)}return i}function Exe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xxe(e,t,n,r){t.value=n,t.getSnapshot=r,Txe(t)&&Cxe(e)}function Sxe(e,t,n){return n(function(){Txe(t)&&Cxe(e)})}function Txe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nf(e,n)}catch{return!0}}function Cxe(e){var t=lm(e,1);t!==null&&Tf(t,e,1,-1)}function aoe(e){var t=yd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:MC,lastRenderedState:e},t.queue=e,e=e.dispatch=yKe.bind(null,zi,e),[t.memoizedState,e]}function LC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=zi.updateQueue,t===null?(t={lastEffect:null,stores:null},zi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Axe(){return Ec().memoizedState}function CR(e,t,n,r){var i=yd();zi.flags|=e,i.memoizedState=LC(1|t,n,void 0,r===void 0?null:r)}function L6(e,t,n,r){var i=Ec();r=r===void 0?null:r;var s=void 0;if(Rs!==null){var o=Rs.memoizedState;if(s=o.destroy,r!==null&&qG(r,o.deps)){i.memoizedState=LC(t,n,s,r);return}}zi.flags|=e,i.memoizedState=LC(1|t,n,s,r)}function uoe(e,t){return CR(8390656,8,e,t)}function YG(e,t){return L6(2048,8,e,t)}function Ixe(e,t){return L6(4,2,e,t)}function Oxe(e,t){return L6(4,4,e,t)}function Pxe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kxe(e,t,n){return n=n!=null?n.concat([e]):null,L6(4,4,Pxe.bind(null,t,e),n)}function KG(){}function Rxe(e,t){var n=Ec();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $xe(e,t){var n=Ec();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Nxe(e,t,n){return w1&21?(Nf(n,t)||(n=jEe(),zi.lanes|=n,E1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Iu=!0),e.memoizedState=n)}function mKe(e,t){var n=Br;Br=n!==0&&4>n?n:4,e(!0);var r=$j.transition;$j.transition={};try{e(!1),t()}finally{Br=n,$j.transition=r}}function Dxe(){return Ec().memoizedState}function gKe(e,t,n){var r=c0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mxe(e))Lxe(t,n);else if(n=yxe(e,t,n,r),n!==null){var i=Ha();Tf(n,e,r,i),Fxe(n,t,r)}}function yKe(e,t,n){var r=c0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mxe(e))Lxe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nf(a,o)){var u=t.interleaved;u===null?(i.next=i,BG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=yxe(e,t,i,r),n!==null&&(i=Ha(),Tf(n,e,r,i),Fxe(n,t,r))}}function Mxe(e){var t=e.alternate;return e===zi||t!==null&&t===zi}function Lxe(e,t){C2=uN=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fxe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,CG(e,n)}}var lN={readContext:wc,useCallback:Yo,useContext:Yo,useEffect:Yo,useImperativeHandle:Yo,useInsertionEffect:Yo,useLayoutEffect:Yo,useMemo:Yo,useReducer:Yo,useRef:Yo,useState:Yo,useDebugValue:Yo,useDeferredValue:Yo,useTransition:Yo,useMutableSource:Yo,useSyncExternalStore:Yo,useId:Yo,unstable_isNewReconciler:!1},vKe={readContext:wc,useCallback:function(e,t){return yd().memoizedState=[e,t===void 0?null:t],e},useContext:wc,useEffect:uoe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,CR(4194308,4,Pxe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return CR(4194308,4,e,t)},useInsertionEffect:function(e,t){return CR(4,2,e,t)},useMemo:function(e,t){var n=yd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=gKe.bind(null,zi,e),[r.memoizedState,e]},useRef:function(e){var t=yd();return e={current:e},t.memoizedState=e},useState:aoe,useDebugValue:KG,useDeferredValue:function(e){return yd().memoizedState=e},useTransition:function(){var e=aoe(!1),t=e[0];return e=mKe.bind(null,e[1]),yd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=zi,i=yd();if(Ri){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),lo===null)throw Error(et(349));w1&30||Exe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,uoe(Sxe.bind(null,r,s,e),[e]),r.flags|=2048,LC(9,xxe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=yd(),t=lo.identifierPrefix;if(Ri){var n=Np,r=$p;n=(r&~(1<<32-Sf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=DC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=pKe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_Ke={readContext:wc,useCallback:Rxe,useContext:wc,useEffect:YG,useImperativeHandle:kxe,useInsertionEffect:Ixe,useLayoutEffect:Oxe,useMemo:$xe,useReducer:Nj,useRef:Axe,useState:function(){return Nj(MC)},useDebugValue:KG,useDeferredValue:function(e){var t=Ec();return Nxe(t,Rs.memoizedState,e)},useTransition:function(){var e=Nj(MC)[0],t=Ec().memoizedState;return[e,t]},useMutableSource:bxe,useSyncExternalStore:wxe,useId:Dxe,unstable_isNewReconciler:!1},bKe={readContext:wc,useCallback:Rxe,useContext:wc,useEffect:YG,useImperativeHandle:kxe,useInsertionEffect:Ixe,useLayoutEffect:Oxe,useMemo:$xe,useReducer:Dj,useRef:Axe,useState:function(){return Dj(MC)},useDebugValue:KG,useDeferredValue:function(e){var t=Ec();return Rs===null?t.memoizedState=e:Nxe(t,Rs.memoizedState,e)},useTransition:function(){var e=Dj(MC)[0],t=Ec().memoizedState;return[e,t]},useMutableSource:bxe,useSyncExternalStore:wxe,useId:Dxe,unstable_isNewReconciler:!1};function tf(e,t){if(e&&e.defaultProps){t=Ui({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function iU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ui({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var F6={isMounted:function(e){return(e=e._reactInternals)?l_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=c0(e),s=qp(r,i);s.payload=t,n!=null&&(s.callback=n),t=u0(e,s,i),t!==null&&(Tf(t,e,i,r),SR(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=c0(e),s=qp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=u0(e,s,i),t!==null&&(Tf(t,e,i,r),SR(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),r=c0(e),i=qp(n,r);i.tag=2,t!=null&&(i.callback=t),t=u0(e,i,r),t!==null&&(Tf(t,e,r,n),SR(t,e,r))}};function loe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!OC(n,r)||!OC(i,s):!0}function jxe(e,t,n){var r=!1,i=P0,s=t.contextType;return typeof s=="object"&&s!==null?s=wc(s):(i=Nu(t)?_1:Ea.current,r=t.contextTypes,s=(r=r!=null)?Gw(e,i):P0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=F6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function coe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&F6.enqueueReplaceState(t,t.state,null)}function sU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=wc(s):(s=Nu(t)?_1:Ea.current,i.context=Gw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(iU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&F6.enqueueReplaceState(i,i.state,null),oN(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Qw(e,t){try{var n="",r=t;do n+=YGe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Mj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function oU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var wKe=typeof WeakMap=="function"?WeakMap:Map;function Bxe(e,t,n){n=qp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){fN||(fN=!0,gU=r),oU(e,t)},n}function zxe(e,t,n){n=qp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){oU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){oU(e,t),typeof r!="function"&&(l0===null?l0=new Set([this]):l0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function foe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new wKe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=DKe.bind(null,e,t,n),t.then(e,e))}function doe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hoe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qp(-1,1),t.tag=2,u0(n,t,1))),n.lanes|=1),e)}var EKe=$m.ReactCurrentOwner,Iu=!1;function Na(e,t,n,r){t.child=e===null?gxe(t,null,n,r):Kw(t,e.child,n,r)}function poe(e,t,n,r,i){n=n.render;var s=t.ref;return cw(t,i),r=WG(e,t,n,r,s,i),n=GG(),e!==null&&!Iu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cm(e,t,i)):(Ri&&n&&NG(t),t.flags|=1,Na(e,t,r,i),t.child)}function moe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!rY(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Uxe(e,t,s,r,i)):(e=PR(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:OC,n(o,r)&&e.ref===t.ref)return cm(e,t,i)}return t.flags|=1,e=f0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Uxe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(OC(s,r)&&e.ref===t.ref)if(Iu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Iu=!0);else return t.lanes=e.lanes,cm(e,t,i)}return aU(e,t,n,r,i)}function Vxe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fi(Vb,ll),ll|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fi(Vb,ll),ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fi(Vb,ll),ll|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,fi(Vb,ll),ll|=r;return Na(e,t,i,n),t.child}function Hxe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function aU(e,t,n,r,i){var s=Nu(n)?_1:Ea.current;return s=Gw(t,s),cw(t,i),n=WG(e,t,n,r,s,i),r=GG(),e!==null&&!Iu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,cm(e,t,i)):(Ri&&r&&NG(t),t.flags|=1,Na(e,t,n,i),t.child)}function goe(e,t,n,r,i){if(Nu(n)){var s=!0;tN(t)}else s=!1;if(cw(t,i),t.stateNode===null)AR(e,t),jxe(t,n,r),sU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=wc(l):(l=Nu(n)?_1:Ea.current,l=Gw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&coe(t,o,r,l),Tg=!1;var d=t.memoizedState;o.state=d,oN(t,r,o,i),u=t.memoizedState,a!==r||d!==u||$u.current||Tg?(typeof c=="function"&&(iU(t,n,c,r),u=t.memoizedState),(a=Tg||loe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vxe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:tf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=wc(u):(u=Nu(n)?_1:Ea.current,u=Gw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&coe(t,o,r,u),Tg=!1,d=t.memoizedState,o.state=d,oN(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||$u.current||Tg?(typeof h=="function"&&(iU(t,n,h,r),p=t.memoizedState),(l=Tg||loe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return uU(e,t,n,r,s,i)}function uU(e,t,n,r,i,s){Hxe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&toe(t,n,!1),cm(e,t,s);r=t.stateNode,EKe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Kw(t,e.child,null,s),t.child=Kw(t,null,a,s)):Na(e,t,a,s),t.memoizedState=r.state,i&&toe(t,n,!0),t.child}function qxe(e){var t=e.stateNode;t.pendingContext?eoe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&eoe(e,t.context,!1),UG(e,t.containerInfo)}function yoe(e,t,n,r,i){return Yw(),MG(i),t.flags|=256,Na(e,t,n,r),t.child}var lU={dehydrated:null,treeContext:null,retryLane:0};function cU(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wxe(e,t,n){var r=t.pendingProps,i=ji.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),fi(ji,i&1),e===null)return nU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=z6(o,r,0,null),e=n1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=cU(n),t.memoizedState=lU,e):XG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return xKe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=f0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=f0(a,s):(s=n1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?cU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=lU,r}return s=e.child,e=s.sibling,r=f0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function XG(e,t){return t=z6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function CP(e,t,n,r){return r!==null&&MG(r),Kw(t,e.child,null,n),e=XG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xKe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Mj(Error(et(422))),CP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=z6({mode:"visible",children:r.children},i,0,null),s=n1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Kw(t,e.child,null,o),t.child.memoizedState=cU(o),t.memoizedState=lU,s);if(!(t.mode&1))return CP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=Mj(s,r,void 0),CP(e,t,o,r)}if(a=(o&e.childLanes)!==0,Iu||a){if(r=lo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lm(e,i),Tf(r,e,i,-1))}return nY(),r=Mj(Error(et(421))),CP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=MKe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,gl=a0(i.nextSibling),xl=t,Ri=!0,uf=null,e!==null&&(nc[rc++]=$p,nc[rc++]=Np,nc[rc++]=b1,$p=e.id,Np=e.overflow,b1=t),t=XG(t,r.children),t.flags|=4096,t)}function voe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),rU(e.return,t,n)}function Lj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gxe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Na(e,t,r.children,n),r=ji.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&voe(e,n,t);else if(e.tag===19)voe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(ji,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&aN(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Lj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&aN(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Lj(t,!0,n,null,s);break;case"together":Lj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function AR(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),E1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=f0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=f0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function SKe(e,t,n){switch(t.tag){case 3:qxe(t),Yw();break;case 5:_xe(t);break;case 1:Nu(t.type)&&tN(t);break;case 4:UG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;fi(iN,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(fi(ji,ji.current&1),t.flags|=128,null):n&t.child.childLanes?Wxe(e,t,n):(fi(ji,ji.current&1),e=cm(e,t,n),e!==null?e.sibling:null);fi(ji,ji.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Gxe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(ji,ji.current),r)break;return null;case 22:case 23:return t.lanes=0,Vxe(e,t,n)}return cm(e,t,n)}var Yxe,fU,Kxe,Xxe;Yxe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fU=function(){};Kxe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Lv(Zd.current);var s=null;switch(n){case"input":i=$z(e,i),r=$z(e,r),s=[];break;case"select":i=Ui({},i,{value:void 0}),r=Ui({},r,{value:void 0}),s=[];break;case"textarea":i=Mz(e,i),r=Mz(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Z$)}Fz(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(EC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(EC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&gi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Xxe=function(e,t,n,r){n!==r&&(t.flags|=4)};function kS(e,t){if(!Ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function TKe(e,t,n){var r=t.pendingProps;switch(DG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:return Nu(t.type)&&eN(),Ko(t),null;case 3:return r=t.stateNode,Xw(),xi($u),xi(Ea),HG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(SP(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,uf!==null&&(_U(uf),uf=null))),fU(e,t),Ko(t),null;case 5:VG(t);var i=Lv(NC.current);if(n=t.type,e!==null&&t.stateNode!=null)Kxe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Ko(t),null}if(e=Lv(Zd.current),SP(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Pd]=t,r[RC]=s,e=(t.mode&1)!==0,n){case"dialog":gi("cancel",r),gi("close",r);break;case"iframe":case"object":case"embed":gi("load",r);break;case"video":case"audio":for(i=0;i<$T.length;i++)gi($T[i],r);break;case"source":gi("error",r);break;case"img":case"image":case"link":gi("error",r),gi("load",r);break;case"details":gi("toggle",r);break;case"input":Ase(r,s),gi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gi("invalid",r);break;case"textarea":Ose(r,s),gi("invalid",r)}Fz(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&xP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&xP(r.textContent,a,e),i=["children",""+a]):EC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gi("scroll",r)}switch(n){case"input":mP(r),Ise(r,s,!0);break;case"textarea":mP(r),Pse(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Z$)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SEe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Pd]=t,e[RC]=r,Yxe(e,t,!1,!1),t.stateNode=e;e:{switch(o=jz(n,r),n){case"dialog":gi("cancel",e),gi("close",e),i=r;break;case"iframe":case"object":case"embed":gi("load",e),i=r;break;case"video":case"audio":for(i=0;i<$T.length;i++)gi($T[i],e);i=r;break;case"source":gi("error",e),i=r;break;case"img":case"image":case"link":gi("error",e),gi("load",e),i=r;break;case"details":gi("toggle",e),i=r;break;case"input":Ase(e,r),i=$z(e,r),gi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ui({},r,{value:void 0}),gi("invalid",e);break;case"textarea":Ose(e,r),i=Mz(e,r),gi("invalid",e);break;default:i=r}Fz(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?AEe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&TEe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xC(e,u):typeof u=="number"&&xC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(EC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&gi("scroll",e):u!=null&&bG(e,s,u,o))}switch(n){case"input":mP(e),Ise(e,r,!1);break;case"textarea":mP(e),Pse(e);break;case"option":r.value!=null&&e.setAttribute("value",""+O0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ow(e,!!r.multiple,s,!1):r.defaultValue!=null&&ow(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Z$)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&t.stateNode!=null)Xxe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=Lv(NC.current),Lv(Zd.current),SP(t)){if(r=t.stateNode,n=t.memoizedProps,r[Pd]=t,(s=r.nodeValue!==n)&&(e=xl,e!==null))switch(e.tag){case 3:xP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pd]=t,t.stateNode=r}return Ko(t),null;case 13:if(xi(ji),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ri&&gl!==null&&t.mode&1&&!(t.flags&128))pxe(),Yw(),t.flags|=98560,s=!1;else if(s=SP(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Pd]=t}else Yw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else uf!==null&&(_U(uf),uf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ji.current&1?Fs===0&&(Fs=3):nY())),t.updateQueue!==null&&(t.flags|=4),Ko(t),null);case 4:return Xw(),fU(e,t),e===null&&PC(t.stateNode.containerInfo),Ko(t),null;case 10:return jG(t.type._context),Ko(t),null;case 17:return Nu(t.type)&&eN(),Ko(t),null;case 19:if(xi(ji),s=t.memoizedState,s===null)return Ko(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)kS(s,!1);else{if(Fs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=aN(e),o!==null){for(t.flags|=128,kS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(ji,ji.current&1|2),t.child}e=e.sibling}s.tail!==null&&as()>Jw&&(t.flags|=128,r=!0,kS(s,!1),t.lanes=4194304)}else{if(!r)if(e=aN(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),kS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ri)return Ko(t),null}else 2*as()-s.renderingStartTime>Jw&&n!==1073741824&&(t.flags|=128,r=!0,kS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=as(),t.sibling=null,n=ji.current,fi(ji,r?n&1|2:n&1),t):(Ko(t),null);case 22:case 23:return tY(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ll&1073741824&&(Ko(t),t.subtreeFlags&6&&(t.flags|=8192)):Ko(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function CKe(e,t){switch(DG(t),t.tag){case 1:return Nu(t.type)&&eN(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xw(),xi($u),xi(Ea),HG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return VG(t),null;case 13:if(xi(ji),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Yw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xi(ji),null;case 4:return Xw(),null;case 10:return jG(t.type._context),null;case 22:case 23:return tY(),null;case 24:return null;default:return null}}var AP=!1,la=!1,AKe=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Ub(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gi(e,t,r)}else n.current=null}function dU(e,t,n){try{n()}catch(r){Gi(e,t,r)}}var _oe=!1;function IKe(e,t){if(Kz=X$,e=txe(),$G(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xz={focusedElem:e,selectionRange:n},X$=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:tf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Gi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return p=_oe,_oe=!1,p}function A2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&dU(t,n,s)}i=i.next}while(i!==r)}}function j6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Qxe(e){var t=e.alternate;t!==null&&(e.alternate=null,Qxe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pd],delete t[RC],delete t[Zz],delete t[cKe],delete t[fKe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jxe(e){return e.tag===5||e.tag===3||e.tag===4}function boe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jxe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Z$));else if(r!==4&&(e=e.child,e!==null))for(pU(e,t,n),e=e.sibling;e!==null;)pU(e,t,n),e=e.sibling}function mU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(mU(e,t,n),e=e.sibling;e!==null;)mU(e,t,n),e=e.sibling}var Eo=null,rf=!1;function rg(e,t,n){for(n=n.child;n!==null;)Zxe(e,t,n),n=n.sibling}function Zxe(e,t,n){if(Jd&&typeof Jd.onCommitFiberUnmount=="function")try{Jd.onCommitFiberUnmount(k6,n)}catch{}switch(n.tag){case 5:la||Ub(n,t);case 6:var r=Eo,i=rf;Eo=null,rg(e,t,n),Eo=r,rf=i,Eo!==null&&(rf?(e=Eo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Eo.removeChild(n.stateNode));break;case 18:Eo!==null&&(rf?(e=Eo,n=n.stateNode,e.nodeType===8?Pj(e.parentNode,n):e.nodeType===1&&Pj(e,n),AC(e)):Pj(Eo,n.stateNode));break;case 4:r=Eo,i=rf,Eo=n.stateNode.containerInfo,rf=!0,rg(e,t,n),Eo=r,rf=i;break;case 0:case 11:case 14:case 15:if(!la&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dU(n,t,o),i=i.next}while(i!==r)}rg(e,t,n);break;case 1:if(!la&&(Ub(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gi(n,t,a)}rg(e,t,n);break;case 21:rg(e,t,n);break;case 22:n.mode&1?(la=(r=la)||n.memoizedState!==null,rg(e,t,n),la=r):rg(e,t,n);break;default:rg(e,t,n)}}function woe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new AKe),t.forEach(function(r){var i=LKe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Wc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Eo=a.stateNode,rf=!1;break e;case 3:Eo=a.stateNode.containerInfo,rf=!0;break e;case 4:Eo=a.stateNode.containerInfo,rf=!0;break e}a=a.return}if(Eo===null)throw Error(et(160));Zxe(s,o,i),Eo=null,rf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Gi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eSe(t,e),t=t.sibling}function eSe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wc(t,e),ud(e),r&4){try{A2(3,e,e.return),j6(3,e)}catch(m){Gi(e,e.return,m)}try{A2(5,e,e.return)}catch(m){Gi(e,e.return,m)}}break;case 1:Wc(t,e),ud(e),r&512&&n!==null&&Ub(n,n.return);break;case 5:if(Wc(t,e),ud(e),r&512&&n!==null&&Ub(n,n.return),e.flags&32){var i=e.stateNode;try{xC(i,"")}catch(m){Gi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&EEe(i,s),jz(a,o);var l=jz(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?AEe(i,f):c==="dangerouslySetInnerHTML"?TEe(i,f):c==="children"?xC(i,f):bG(i,c,f,l)}switch(a){case"input":Nz(i,s);break;case"textarea":xEe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ow(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?ow(i,!!s.multiple,s.defaultValue,!0):ow(i,!!s.multiple,s.multiple?[]:"",!1))}i[RC]=s}catch(m){Gi(e,e.return,m)}}break;case 6:if(Wc(t,e),ud(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Gi(e,e.return,m)}}break;case 3:if(Wc(t,e),ud(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{AC(t.containerInfo)}catch(m){Gi(e,e.return,m)}break;case 4:Wc(t,e),ud(e);break;case 13:Wc(t,e),ud(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ZG=as())),r&4&&woe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(la=(l=la)||c,Wc(t,e),la=l):Wc(t,e),ud(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Ot=e,c=e.child;c!==null;){for(f=Ot=c;Ot!==null;){switch(d=Ot,h=d.child,d.tag){case 0:case 11:case 14:case 15:A2(4,d,d.return);break;case 1:Ub(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Gi(r,n,m)}}break;case 5:Ub(d,d.return);break;case 22:if(d.memoizedState!==null){xoe(f);continue}}h!==null?(h.return=d,Ot=h):xoe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=CEe("display",o))}catch(m){Gi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Gi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wc(t,e),ud(e),r&4&&woe(e);break;case 21:break;default:Wc(t,e),ud(e)}}function ud(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jxe(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xC(i,""),r.flags&=-33);var s=boe(e);mU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=boe(e);pU(e,a,o);break;default:throw Error(et(161))}}catch(u){Gi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function OKe(e,t,n){Ot=e,tSe(e)}function tSe(e,t,n){for(var r=(e.mode&1)!==0;Ot!==null;){var i=Ot,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||AP;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||la;a=AP;var l=la;if(AP=o,(la=u)&&!l)for(Ot=i;Ot!==null;)o=Ot,u=o.child,o.tag===22&&o.memoizedState!==null?Soe(i):u!==null?(u.return=o,Ot=u):Soe(i);for(;s!==null;)Ot=s,tSe(s),s=s.sibling;Ot=i,AP=a,la=l}Eoe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ot=s):Eoe(e)}}function Eoe(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:la||j6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!la)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ooe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ooe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&AC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}la||t.flags&512&&hU(t)}catch(d){Gi(t,t.return,d)}}if(t===e){Ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function xoe(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function Soe(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{j6(4,t)}catch(u){Gi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Gi(t,i,u)}}var s=t.return;try{hU(t)}catch(u){Gi(t,s,u)}break;case 5:var o=t.return;try{hU(t)}catch(u){Gi(t,o,u)}}}catch(u){Gi(t,t.return,u)}if(t===e){Ot=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ot=a;break}Ot=t.return}}var PKe=Math.ceil,cN=$m.ReactCurrentDispatcher,QG=$m.ReactCurrentOwner,gc=$m.ReactCurrentBatchConfig,fr=0,lo=null,xs=null,Ro=0,ll=0,Vb=yy(0),Fs=0,FC=null,E1=0,B6=0,JG=0,I2=null,bu=null,ZG=0,Jw=1/0,gp=null,fN=!1,gU=null,l0=null,IP=!1,Ug=null,dN=0,O2=0,yU=null,IR=-1,OR=0;function Ha(){return fr&6?as():IR!==-1?IR:IR=as()}function c0(e){return e.mode&1?fr&2&&Ro!==0?Ro&-Ro:hKe.transition!==null?(OR===0&&(OR=jEe()),OR):(e=Br,e!==0||(e=window.event,e=e===void 0?16:WEe(e.type)),e):1}function Tf(e,t,n,r){if(50<O2)throw O2=0,yU=null,Error(et(185));lI(e,n,r),(!(fr&2)||e!==lo)&&(e===lo&&(!(fr&2)&&(B6|=n),Fs===4&&Ng(e,Ro)),Du(e,r),n===1&&fr===0&&!(t.mode&1)&&(Jw=as()+500,M6&&vy()))}function Du(e,t){var n=e.callbackNode;hYe(e,t);var r=K$(e,e===lo?Ro:0);if(r===0)n!==null&&$se(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$se(n),t===1)e.tag===0?dKe(Toe.bind(null,e)):fxe(Toe.bind(null,e)),uKe(function(){!(fr&6)&&vy()}),n=null;else{switch(BEe(r)){case 1:n=TG;break;case 4:n=LEe;break;case 16:n=Y$;break;case 536870912:n=FEe;break;default:n=Y$}n=lSe(n,nSe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nSe(e,t){if(IR=-1,OR=0,fr&6)throw Error(et(327));var n=e.callbackNode;if(fw()&&e.callbackNode!==n)return null;var r=K$(e,e===lo?Ro:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=hN(e,r);else{t=r;var i=fr;fr|=2;var s=iSe();(lo!==e||Ro!==t)&&(gp=null,Jw=as()+500,t1(e,t));do try{$Ke();break}catch(a){rSe(e,a)}while(!0);FG(),cN.current=s,fr=i,xs!==null?t=0:(lo=null,Ro=0,t=Fs)}if(t!==0){if(t===2&&(i=Hz(e),i!==0&&(r=i,t=vU(e,i))),t===1)throw n=FC,t1(e,0),Ng(e,r),Du(e,as()),n;if(t===6)Ng(e,r);else{if(i=e.current.alternate,!(r&30)&&!kKe(i)&&(t=hN(e,r),t===2&&(s=Hz(e),s!==0&&(r=s,t=vU(e,s))),t===1))throw n=FC,t1(e,0),Ng(e,r),Du(e,as()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:av(e,bu,gp);break;case 3:if(Ng(e,r),(r&130023424)===r&&(t=ZG+500-as(),10<t)){if(K$(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ha(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Jz(av.bind(null,e,bu,gp),t);break}av(e,bu,gp);break;case 4:if(Ng(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Sf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=as()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PKe(r/1960))-r,10<r){e.timeoutHandle=Jz(av.bind(null,e,bu,gp),r);break}av(e,bu,gp);break;case 5:av(e,bu,gp);break;default:throw Error(et(329))}}}return Du(e,as()),e.callbackNode===n?nSe.bind(null,e):null}function vU(e,t){var n=I2;return e.current.memoizedState.isDehydrated&&(t1(e,t).flags|=256),e=hN(e,t),e!==2&&(t=bu,bu=n,t!==null&&_U(t)),e}function _U(e){bu===null?bu=e:bu.push.apply(bu,e)}function kKe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ng(e,t){for(t&=~JG,t&=~B6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sf(t),r=1<<n;e[n]=-1,t&=~r}}function Toe(e){if(fr&6)throw Error(et(327));fw();var t=K$(e,0);if(!(t&1))return Du(e,as()),null;var n=hN(e,t);if(e.tag!==0&&n===2){var r=Hz(e);r!==0&&(t=r,n=vU(e,r))}if(n===1)throw n=FC,t1(e,0),Ng(e,t),Du(e,as()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,av(e,bu,gp),Du(e,as()),null}function eY(e,t){var n=fr;fr|=1;try{return e(t)}finally{fr=n,fr===0&&(Jw=as()+500,M6&&vy())}}function x1(e){Ug!==null&&Ug.tag===0&&!(fr&6)&&fw();var t=fr;fr|=1;var n=gc.transition,r=Br;try{if(gc.transition=null,Br=1,e)return e()}finally{Br=r,gc.transition=n,fr=t,!(fr&6)&&vy()}}function tY(){ll=Vb.current,xi(Vb)}function t1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,aKe(n)),xs!==null)for(n=xs.return;n!==null;){var r=n;switch(DG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eN();break;case 3:Xw(),xi($u),xi(Ea),HG();break;case 5:VG(r);break;case 4:Xw();break;case 13:xi(ji);break;case 19:xi(ji);break;case 10:jG(r.type._context);break;case 22:case 23:tY()}n=n.return}if(lo=e,xs=e=f0(e.current,null),Ro=ll=t,Fs=0,FC=null,JG=B6=E1=0,bu=I2=null,Mv!==null){for(t=0;t<Mv.length;t++)if(n=Mv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mv=null}return e}function rSe(e,t){do{var n=xs;try{if(FG(),TR.current=lN,uN){for(var r=zi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}uN=!1}if(w1=0,Zs=Rs=zi=null,C2=!1,DC=0,QG.current=null,n===null||n.return===null){Fs=1,FC=t,xs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Ro,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=doe(o);if(h!==null){h.flags&=-257,hoe(h,o,a,s,t),h.mode&1&&foe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){foe(s,l,t),nY();break e}u=Error(et(426))}}else if(Ri&&a.mode&1){var g=doe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),hoe(g,o,a,s,t),MG(Qw(u,a));break e}}s=u=Qw(u,a),Fs!==4&&(Fs=2),I2===null?I2=[s]:I2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Bxe(s,u,t);soe(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(l0===null||!l0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=zxe(s,a,t);soe(s,w);break e}}s=s.return}while(s!==null)}oSe(n)}catch(E){t=E,xs===n&&n!==null&&(xs=n=n.return);continue}break}while(!0)}function iSe(){var e=cN.current;return cN.current=lN,e===null?lN:e}function nY(){(Fs===0||Fs===3||Fs===2)&&(Fs=4),lo===null||!(E1&268435455)&&!(B6&268435455)||Ng(lo,Ro)}function hN(e,t){var n=fr;fr|=2;var r=iSe();(lo!==e||Ro!==t)&&(gp=null,t1(e,t));do try{RKe();break}catch(i){rSe(e,i)}while(!0);if(FG(),fr=n,cN.current=r,xs!==null)throw Error(et(261));return lo=null,Ro=0,Fs}function RKe(){for(;xs!==null;)sSe(xs)}function $Ke(){for(;xs!==null&&!iYe();)sSe(xs)}function sSe(e){var t=uSe(e.alternate,e,ll);e.memoizedProps=e.pendingProps,t===null?oSe(e):xs=t,QG.current=null}function oSe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=CKe(n,t),n!==null){n.flags&=32767,xs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fs=6,xs=null;return}}else if(n=TKe(n,t,ll),n!==null){xs=n;return}if(t=t.sibling,t!==null){xs=t;return}xs=t=e}while(t!==null);Fs===0&&(Fs=5)}function av(e,t,n){var r=Br,i=gc.transition;try{gc.transition=null,Br=1,NKe(e,t,n,r)}finally{gc.transition=i,Br=r}return null}function NKe(e,t,n,r){do fw();while(Ug!==null);if(fr&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(pYe(e,s),e===lo&&(xs=lo=null,Ro=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||IP||(IP=!0,lSe(Y$,function(){return fw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gc.transition,gc.transition=null;var o=Br;Br=1;var a=fr;fr|=4,QG.current=null,IKe(e,n),eSe(n,e),eKe(Xz),X$=!!Kz,Xz=Kz=null,e.current=n,OKe(n),sYe(),fr=a,Br=o,gc.transition=s}else e.current=n;if(IP&&(IP=!1,Ug=e,dN=i),s=e.pendingLanes,s===0&&(l0=null),uYe(n.stateNode),Du(e,as()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(fN)throw fN=!1,e=gU,gU=null,e;return dN&1&&e.tag!==0&&fw(),s=e.pendingLanes,s&1?e===yU?O2++:(O2=0,yU=e):O2=0,vy(),null}function fw(){if(Ug!==null){var e=BEe(dN),t=gc.transition,n=Br;try{if(gc.transition=null,Br=16>e?16:e,Ug===null)var r=!1;else{if(e=Ug,Ug=null,dN=0,fr&6)throw Error(et(331));var i=fr;for(fr|=4,Ot=e.current;Ot!==null;){var s=Ot,o=s.child;if(Ot.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Ot=l;Ot!==null;){var c=Ot;switch(c.tag){case 0:case 11:case 15:A2(8,c,s)}var f=c.child;if(f!==null)f.return=c,Ot=f;else for(;Ot!==null;){c=Ot;var d=c.sibling,h=c.return;if(Qxe(c),c===l){Ot=null;break}if(d!==null){d.return=h,Ot=d;break}Ot=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ot=o;else e:for(;Ot!==null;){if(s=Ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:A2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ot=y;break e}Ot=s.return}}var v=e.current;for(Ot=v;Ot!==null;){o=Ot;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ot=_;else e:for(o=v;Ot!==null;){if(a=Ot,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:j6(9,a)}}catch(E){Gi(a,a.return,E)}if(a===o){Ot=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ot=w;break e}Ot=a.return}}if(fr=i,vy(),Jd&&typeof Jd.onPostCommitFiberRoot=="function")try{Jd.onPostCommitFiberRoot(k6,e)}catch{}r=!0}return r}finally{Br=n,gc.transition=t}}return!1}function Coe(e,t,n){t=Qw(n,t),t=Bxe(e,t,1),e=u0(e,t,1),t=Ha(),e!==null&&(lI(e,1,t),Du(e,t))}function Gi(e,t,n){if(e.tag===3)Coe(e,e,n);else for(;t!==null;){if(t.tag===3){Coe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(l0===null||!l0.has(r))){e=Qw(n,e),e=zxe(t,e,1),t=u0(t,e,1),e=Ha(),t!==null&&(lI(t,1,e),Du(t,e));break}}t=t.return}}function DKe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,lo===e&&(Ro&n)===n&&(Fs===4||Fs===3&&(Ro&130023424)===Ro&&500>as()-ZG?t1(e,0):JG|=n),Du(e,t)}function aSe(e,t){t===0&&(e.mode&1?(t=vP,vP<<=1,!(vP&130023424)&&(vP=4194304)):t=1);var n=Ha();e=lm(e,t),e!==null&&(lI(e,t,n),Du(e,n))}function MKe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aSe(e,n)}function LKe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),aSe(e,n)}var uSe;uSe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$u.current)Iu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Iu=!1,SKe(e,t,n);Iu=!!(e.flags&131072)}else Iu=!1,Ri&&t.flags&1048576&&dxe(t,rN,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;AR(e,t),e=t.pendingProps;var i=Gw(t,Ea.current);cw(t,n),i=WG(null,t,r,e,i,n);var s=GG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nu(r)?(s=!0,tN(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zG(t),i.updater=F6,t.stateNode=i,i._reactInternals=t,sU(t,r,e,n),t=uU(null,t,r,!0,s,n)):(t.tag=0,Ri&&s&&NG(t),Na(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(AR(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=jKe(r),e=tf(r,e),i){case 0:t=aU(null,t,r,e,n);break e;case 1:t=goe(null,t,r,e,n);break e;case 11:t=poe(null,t,r,e,n);break e;case 14:t=moe(null,t,r,tf(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),aU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),goe(e,t,r,i,n);case 3:e:{if(qxe(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,vxe(e,t),oN(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Qw(Error(et(423)),t),t=yoe(e,t,r,n,i);break e}else if(r!==i){i=Qw(Error(et(424)),t),t=yoe(e,t,r,n,i);break e}else for(gl=a0(t.stateNode.containerInfo.firstChild),xl=t,Ri=!0,uf=null,n=gxe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yw(),r===i){t=cm(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 5:return _xe(t),e===null&&nU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Qz(r,i)?o=null:s!==null&&Qz(r,s)&&(t.flags|=32),Hxe(e,t),Na(e,t,o,n),t.child;case 6:return e===null&&nU(t),null;case 13:return Wxe(e,t,n);case 4:return UG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Kw(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),poe(e,t,r,i,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:return Na(e,t,t.pendingProps.children,n),t.child;case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,fi(iN,r._currentValue),r._currentValue=o,s!==null)if(Nf(s.value,o)){if(s.children===i.children&&!$u.current){t=cm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=qp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),rU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),rU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cw(t,n),i=wc(i),r=r(i),t.flags|=1,Na(e,t,r,n),t.child;case 14:return r=t.type,i=tf(r,t.pendingProps),i=tf(r.type,i),moe(e,t,r,i,n);case 15:return Uxe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),AR(e,t),t.tag=1,Nu(r)?(e=!0,tN(t)):e=!1,cw(t,n),jxe(t,r,i),sU(t,r,i,n),uU(null,t,r,!0,e,n);case 19:return Gxe(e,t,n);case 22:return Vxe(e,t,n)}throw Error(et(156,t.tag))};function lSe(e,t){return MEe(e,t)}function FKe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fc(e,t,n,r){return new FKe(e,t,n,r)}function rY(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jKe(e){if(typeof e=="function")return rY(e)?1:0;if(e!=null){if(e=e.$$typeof,e===EG)return 11;if(e===xG)return 14}return 2}function f0(e,t){var n=e.alternate;return n===null?(n=fc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function PR(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")rY(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $b:return n1(n.children,i,s,t);case wG:o=8,i|=8;break;case Oz:return e=fc(12,n,t,i|2),e.elementType=Oz,e.lanes=s,e;case Pz:return e=fc(13,n,t,i),e.elementType=Pz,e.lanes=s,e;case kz:return e=fc(19,n,t,i),e.elementType=kz,e.lanes=s,e;case _Ee:return z6(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yEe:o=10;break e;case vEe:o=9;break e;case EG:o=11;break e;case xG:o=14;break e;case Sg:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=fc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function n1(e,t,n,r){return e=fc(7,e,r,t),e.lanes=n,e}function z6(e,t,n,r){return e=fc(22,e,r,t),e.elementType=_Ee,e.lanes=n,e.stateNode={isHidden:!1},e}function Fj(e,t,n){return e=fc(6,e,null,t),e.lanes=n,e}function jj(e,t,n){return t=fc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function BKe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_j(0),this.expirationTimes=_j(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_j(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iY(e,t,n,r,i,s,o,a,u){return e=new BKe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zG(s),e}function zKe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rb,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cSe(e){if(!e)return P0;e=e._reactInternals;e:{if(l_(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Nu(n))return cxe(e,n,t)}return t}function fSe(e,t,n,r,i,s,o,a,u){return e=iY(n,r,!0,e,i,s,o,a,u),e.context=cSe(null),n=e.current,r=Ha(),i=c0(n),s=qp(r,i),s.callback=t??null,u0(n,s,i),e.current.lanes=i,lI(e,i,r),Du(e,r),e}function U6(e,t,n,r){var i=t.current,s=Ha(),o=c0(i);return n=cSe(n),t.context===null?t.context=n:t.pendingContext=n,t=qp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=u0(i,t,o),e!==null&&(Tf(e,i,o,s),SR(e,i,o)),o}function pN(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Aoe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function sY(e,t){Aoe(e,t),(e=e.alternate)&&Aoe(e,t)}function UKe(){return null}var dSe=typeof reportError=="function"?reportError:function(e){console.error(e)};function oY(e){this._internalRoot=e}V6.prototype.render=oY.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));U6(e,t,null,null)};V6.prototype.unmount=oY.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;x1(function(){U6(null,e,null,null)}),t[um]=null}};function V6(e){this._internalRoot=e}V6.prototype.unstable_scheduleHydration=function(e){if(e){var t=VEe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$g.length&&t!==0&&t<$g[n].priority;n++);$g.splice(n,0,e),n===0&&qEe(e)}};function aY(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function H6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ioe(){}function VKe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=pN(o);s.call(l)}}var o=fSe(t,r,e,0,null,!1,!1,"",Ioe);return e._reactRootContainer=o,e[um]=o.current,PC(e.nodeType===8?e.parentNode:e),x1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=pN(u);a.call(l)}}var u=iY(e,0,!1,null,null,!1,!1,"",Ioe);return e._reactRootContainer=u,e[um]=u.current,PC(e.nodeType===8?e.parentNode:e),x1(function(){U6(t,u,n,r)}),u}function q6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=pN(o);a.call(u)}}U6(t,o,e,i)}else o=VKe(n,t,e,i,r);return pN(o)}zEe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=RT(t.pendingLanes);n!==0&&(CG(t,n|1),Du(t,as()),!(fr&6)&&(Jw=as()+500,vy()))}break;case 13:x1(function(){var r=lm(e,1);if(r!==null){var i=Ha();Tf(r,e,1,i)}}),sY(e,1)}};AG=function(e){if(e.tag===13){var t=lm(e,134217728);if(t!==null){var n=Ha();Tf(t,e,134217728,n)}sY(e,134217728)}};UEe=function(e){if(e.tag===13){var t=c0(e),n=lm(e,t);if(n!==null){var r=Ha();Tf(n,e,t,r)}sY(e,t)}};VEe=function(){return Br};HEe=function(e,t){var n=Br;try{return Br=e,t()}finally{Br=n}};zz=function(e,t,n){switch(t){case"input":if(Nz(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=D6(r);if(!i)throw Error(et(90));wEe(r),Nz(r,i)}}}break;case"textarea":xEe(e,n);break;case"select":t=n.value,t!=null&&ow(e,!!n.multiple,t,!1)}};PEe=eY;kEe=x1;var HKe={usingClientEntryPoint:!1,Events:[fI,Lb,D6,IEe,OEe,eY]},RS={findFiberByHostInstance:Dv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qKe={bundleType:RS.bundleType,version:RS.version,rendererPackageName:RS.rendererPackageName,rendererConfig:RS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$m.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=NEe(e),e===null?null:e.stateNode},findFiberByHostInstance:RS.findFiberByHostInstance||UKe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var OP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!OP.isDisabled&&OP.supportsFiber)try{k6=OP.inject(qKe),Jd=OP}catch{}}zl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HKe;zl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aY(t))throw Error(et(200));return zKe(e,t,null,n)};zl.createRoot=function(e,t){if(!aY(e))throw Error(et(299));var n=!1,r="",i=dSe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=iY(e,1,!1,null,null,n,!1,r,i),e[um]=t.current,PC(e.nodeType===8?e.parentNode:e),new oY(t)};zl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=NEe(t),e=e===null?null:e.stateNode,e};zl.flushSync=function(e){return x1(e)};zl.hydrate=function(e,t,n){if(!H6(t))throw Error(et(200));return q6(null,e,t,!0,n)};zl.hydrateRoot=function(e,t,n){if(!aY(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dSe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fSe(t,null,e,1,n??null,i,!1,s,o),e[um]=t.current,PC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new V6(t)};zl.render=function(e,t,n){if(!H6(t))throw Error(et(200));return q6(null,e,t,!1,n)};zl.unmountComponentAtNode=function(e){if(!H6(e))throw Error(et(40));return e._reactRootContainer?(x1(function(){q6(null,null,e,!1,function(){e._reactRootContainer=null,e[um]=null})}),!0):!1};zl.unstable_batchedUpdates=eY;zl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!H6(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return q6(e,t,n,!1,r)};zl.version="18.3.1-next-f1338f8080-20240426";function hSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hSe)}catch(e){console.error(e)}}hSe(),hEe.exports=zl;var c_=hEe.exports,Ooe=c_;Az.createRoot=Ooe.createRoot,Az.hydrateRoot=Ooe.hydrateRoot;const pSe=C.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),fo=()=>C.useContext(pSe);function WKe({children:e}){const[t,n]=j.useState(void 0),r=j.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return R.jsx(pSe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jC(){return jC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jC.apply(this,arguments)}var Vg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vg||(Vg={}));const Poe="popstate";function GKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return bU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:mN(i)}return KKe(t,n,null,e)}function ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mSe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YKe(){return Math.random().toString(36).substr(2,8)}function koe(e,t){return{usr:e.state,key:e.key,idx:t}}function bU(e,t,n,r){return n===void 0&&(n=null),jC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dx(t):t,{state:n,key:t&&t.key||r||YKe()})}function mN(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function dx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function KKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Vg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(jC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Vg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Vg.Push;let v=bU(m.location,g,y);l=c()+1;let _=koe(v,l),w=m.createHref(v);try{o.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Vg.Replace;let v=bU(m.location,g,y);l=c();let _=koe(v,l),w=m.createHref(v);o.replaceState(_,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:mN(g);return v=v.replace(/ $/,"%20"),ls(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Poe,f),u=g,()=>{i.removeEventListener(Poe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Roe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Roe||(Roe={}));function XKe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?dx(t):t,i=uY(r.pathname||"/",n);if(i==null)return null;let s=gSe(e);QKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=lXe(i);o=oXe(s[a],u)}return o}function gSe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ls(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=d0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ls(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),gSe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:iXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of ySe(s.path))i(s,o,u)}),t}function ySe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ySe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function QKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sXe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JKe=/^:[\w-]+$/,ZKe=3,eXe=2,tXe=1,nXe=10,rXe=-2,$oe=e=>e==="*";function iXe(e,t){let n=e.split("/"),r=n.length;return n.some($oe)&&(r+=rXe),t&&(r+=eXe),n.filter(i=>!$oe(i)).reduce((i,s)=>i+(JKe.test(s)?ZKe:s===""?tXe:nXe),r)}function sXe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function oXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=aXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:d0([i,c.pathname]),pathnameBase:hXe(d0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=d0([i,c.pathnameBase]))}return s}function aXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=uXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function uXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),mSe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function lXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mSe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function uY(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function cXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?dx(e):e;return{pathname:n?n.startsWith("/")?n:fXe(n,t):t,search:pXe(r),hash:mXe(i)}}function fXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function lY(e,t){let n=dXe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=dx(e):(i=jC({},e),ls(!i.pathname||!i.pathname.includes("?"),Bj("?","pathname","search",i)),ls(!i.pathname||!i.pathname.includes("#"),Bj("#","pathname","hash",i)),ls(!i.search||!i.search.includes("#"),Bj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=cXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const d0=e=>e.join("/").replace(/\/\/+/g,"/"),hXe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function gXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const vSe=["post","put","patch","delete"];new Set(vSe);const yXe=["get",...vSe];new Set(yXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function BC(){return BC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BC.apply(this,arguments)}const fY=C.createContext(null),vXe=C.createContext(null),_y=C.createContext(null),W6=C.createContext(null),jh=C.createContext({outlet:null,matches:[],isDataRoute:!1}),_Se=C.createContext(null);function bSe(e,t){let{relative:n}=t===void 0?{}:t;hx()||ls(!1);let{basename:r,navigator:i}=C.useContext(_y),{hash:s,pathname:o,search:a}=ESe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:d0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function hx(){return C.useContext(W6)!=null}function by(){return hx()||ls(!1),C.useContext(W6).location}function wSe(e){C.useContext(_y).static||C.useLayoutEffect(e)}function Vl(){let{isDataRoute:e}=C.useContext(jh);return e?RXe():_Xe()}function _Xe(){hx()||ls(!1);let e=C.useContext(fY),{basename:t,future:n,navigator:r}=C.useContext(_y),{matches:i}=C.useContext(jh),{pathname:s}=by(),o=JSON.stringify(lY(i,n.v7_relativeSplatPath)),a=C.useRef(!1);return wSe(()=>{a.current=!0}),C.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=cY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:d0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const bXe=C.createContext(null);function wXe(e){let t=C.useContext(jh).outlet;return t&&C.createElement(bXe.Provider,{value:e},t)}function fm(){let{matches:e}=C.useContext(jh),t=e[e.length-1];return t?t.params:{}}function ESe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=C.useContext(_y),{matches:i}=C.useContext(jh),{pathname:s}=by(),o=JSON.stringify(lY(i,r.v7_relativeSplatPath));return C.useMemo(()=>cY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function xSe(e,t){return EXe(e,t)}function EXe(e,t,n,r){hx()||ls(!1);let{navigator:i}=C.useContext(_y),{matches:s}=C.useContext(jh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=by(),c;if(t){var f;let g=typeof t=="string"?dx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ls(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=XKe(e,{pathname:h}),m=AXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:d0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:d0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?C.createElement(W6.Provider,{value:{location:BC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Vg.Pop}},m):m}function xXe(){let e=kXe(),t=gXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:i},n):null,null)}const SXe=C.createElement(xXe,null);class TXe extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?C.createElement(jh.Provider,{value:this.props.routeContext},C.createElement(_Se.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CXe(e){let{routeContext:t,match:n,children:r}=e,i=C.useContext(fY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(jh.Provider,{value:t},r)}function AXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ls(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||SXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let _;return h?_=m:p?_=g:f.route.Component?_=C.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=c,C.createElement(CXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?C.createElement(TXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var SSe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(SSe||{}),gN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gN||{});function IXe(e){let t=C.useContext(fY);return t||ls(!1),t}function OXe(e){let t=C.useContext(vXe);return t||ls(!1),t}function PXe(e){let t=C.useContext(jh);return t||ls(!1),t}function TSe(e){let t=PXe(),n=t.matches[t.matches.length-1];return n.route.id||ls(!1),n.route.id}function kXe(){var e;let t=C.useContext(_Se),n=OXe(gN.UseRouteError),r=TSe(gN.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function RXe(){let{router:e}=IXe(SSe.UseNavigateStable),t=TSe(gN.UseNavigateStable),n=C.useRef(!1);return wSe(()=>{n.current=!0}),C.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,BC({fromRouteId:t},s)))},[e,t])}function dY(e){let{to:t,replace:n,state:r,relative:i}=e;hx()||ls(!1);let{future:s,static:o}=C.useContext(_y),{matches:a}=C.useContext(jh),{pathname:u}=by(),l=Vl(),c=cY(t,lY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return C.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function $Xe(e){return wXe(e.context)}function pp(e){ls(!1)}function NXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Vg.Pop,navigator:s,static:o=!1,future:a}=e;hx()&&ls(!1);let u=t.replace(/^\/*/,"/"),l=C.useMemo(()=>({basename:u,navigator:s,static:o,future:BC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=dx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=C.useMemo(()=>{let g=uY(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:C.createElement(_y.Provider,{value:l},C.createElement(W6.Provider,{children:n,value:m}))}function DXe(e){let{children:t,location:n}=e;return xSe(wU(t),n)}new Promise(()=>{});function wU(e,t){t===void 0&&(t=[]);let n=[];return C.Children.forEach(e,(r,i)=>{if(!C.isValidElement(r))return;let s=[...t,i];if(r.type===C.Fragment){n.push.apply(n,wU(r.props.children,s));return}r.type!==pp&&ls(!1),!r.props.index||!r.props.children||ls(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EU(){return EU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EU.apply(this,arguments)}function MXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function LXe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function FXe(e,t){return e.button===0&&(!t||t==="_self")&&!LXe(e)}function xU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function jXe(e,t){let n=xU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const BXe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],zXe="6";try{window.__reactRouterVersion=zXe}catch{}const UXe="startTransition",Noe=wC[UXe];function VXe(e){let{basename:t,children:n,future:r,window:i}=e,s=C.useRef();s.current==null&&(s.current=GKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=C.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=C.useCallback(f=>{l&&Noe?Noe(()=>u(f)):u(f)},[u,l]);return C.useLayoutEffect(()=>o.listen(c),[o,c]),C.createElement(NXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HXe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qXe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WXe=C.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=t,d=MXe(t,BXe),{basename:h}=C.useContext(_y),p,m=!1;if(typeof l=="string"&&qXe.test(l)&&(p=l,HXe))try{let _=new URL(window.location.href),w=l.startsWith("//")?new URL(_.protocol+l):new URL(l),E=uY(w.pathname,h);w.origin===_.origin&&E!=null?l=E+w.search+w.hash:m=!0}catch{}let g=bSe(l,{relative:i}),y=GXe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function v(_){r&&r(_),_.defaultPrevented||y(_)}return C.createElement("a",EU({},d,{href:p||g,onClick:m||s?r:v,ref:n,target:u}))});var Doe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Doe||(Doe={}));var Moe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Moe||(Moe={}));function GXe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=Vl(),l=by(),c=ESe(e,{relative:o});return C.useCallback(f=>{if(FXe(f,n)){f.preventDefault();let d=r!==void 0?r:mN(l)===mN(c);u(e,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function hY(e){let t=C.useRef(xU(e)),n=C.useRef(!1),r=by(),i=C.useMemo(()=>jXe(r.search,n.current?null:t.current),[r.search]),s=Vl(),o=C.useCallback((a,u)=>{const l=xU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function yN(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function YXe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function KXe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function XXe(e,t,n){return yN(e,n)===yN(t,n)}function CSe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=yN(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>XXe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=KXe(c,l,r),d=YXe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function QXe(e,t,n){var r;return n?Array.from(((r=yN(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function hI(e){const t=C.createContext(null);return[({children:i,value:s})=>j.createElement(t.Provider,{value:s},i),()=>{const i=C.useContext(t);if(i===null)throw new Error(e);return i}]}function k0(e){return Array.isArray(e)?e:[e]}function Loe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const JXe=()=>{};function ZXe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||JXe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Dp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function eQe(){const[e,t]=C.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function ASe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function tQe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}const nQe=typeof window<"u"?C.useLayoutEffect:C.useEffect;function rQe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});nQe(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>tQe(`${e}:${String(r)}`,i[0])}return[t,n]}function pI(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==j.Fragment:!1}function ISe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ISe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function OSe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=ISe(t))&&(r&&(r+=" "),r+=n);return r}const iQe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function sQe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var oQe=Object.defineProperty,Foe=Object.getOwnPropertySymbols,aQe=Object.prototype.hasOwnProperty,uQe=Object.prototype.propertyIsEnumerable,joe=(e,t,n)=>t in e?oQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Boe=(e,t)=>{for(var n in t||(t={}))aQe.call(t,n)&&joe(e,n,t[n]);if(Foe)for(var n of Foe(t))uQe.call(t,n)&&joe(e,n,t[n]);return e};function lQe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:Boe({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Boe({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function mI(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function pY(e){const t=mI(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function PSe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function cQe(e,...t){return`linear-gradient(${e}deg, ${PSe(t)})`}function fQe(...e){return`radial-gradient(circle, ${PSe(e)})`}function kSe(e){const t=pY(e),n=mI(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function mY(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function dQe(e){return t=>`@media (min-width: ${mY({size:t,sizes:e.breakpoints})}px)`}function hQe(e){return t=>`@media (max-width: ${mY({size:t,sizes:e.breakpoints})-1}px)`}function pQe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function mQe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function gQe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function gY(e){return pQe(e)?mQe(e):e.startsWith("rgb")?gQe(e):{r:0,g:0,b:0,a:1}}function bb(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=gY(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function yQe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function vQe(e,t){const{r:n,g:r,b:i,a:s}=gY(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function _Qe(e,t){const{r:n,g:r,b:i,a:s}=gY(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function bQe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function wQe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function EQe(e){const t=pY(e),n=mI(e),r=kSe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=wQe(s,e);switch(i){case"light":return{border:"transparent",background:bb(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:bb(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:bb(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?bb(t(s,5,a,!1),.05):bb(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function xQe(e){return t=>{const n=mI(e)(t);return e.colors[e.primaryColor][n]}}function SQe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}function TQe(e){return()=>({userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]})}const Os={fontStyles:sQe,themeColor:pY,focusStyles:lQe,linearGradient:cQe,radialGradient:fQe,smallerThan:hQe,largerThan:dQe,rgba:bb,size:mY,cover:yQe,darken:vQe,lighten:_Qe,radius:bQe,variant:EQe,primaryShade:mI,hover:SQe,gradient:kSe,primaryColor:xQe,placeholderStyles:TQe};var CQe=Object.defineProperty,AQe=Object.defineProperties,IQe=Object.getOwnPropertyDescriptors,zoe=Object.getOwnPropertySymbols,OQe=Object.prototype.hasOwnProperty,PQe=Object.prototype.propertyIsEnumerable,Uoe=(e,t,n)=>t in e?CQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kQe=(e,t)=>{for(var n in t||(t={}))OQe.call(t,n)&&Uoe(e,n,t[n]);if(zoe)for(var n of zoe(t))PQe.call(t,n)&&Uoe(e,n,t[n]);return e},RQe=(e,t)=>AQe(e,IQe(t));function $Qe(e){return RQe(kQe({},e),{fn:{fontStyles:Os.fontStyles(e),themeColor:Os.themeColor(e),focusStyles:Os.focusStyles(e),largerThan:Os.largerThan(e),smallerThan:Os.smallerThan(e),radialGradient:Os.radialGradient,linearGradient:Os.linearGradient,gradient:Os.gradient(e),rgba:Os.rgba,size:Os.size,cover:Os.cover,lighten:Os.lighten,darken:Os.darken,primaryShade:Os.primaryShade(e),radius:Os.radius(e),variant:Os.variant(e),hover:Os.hover,primaryColor:Os.primaryColor(e),placeholderStyles:Os.placeholderStyles(e)}})}const RSe=["xs","sm","md","lg","xl"],NQe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:iQe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},$Se=$Qe(NQe);function DQe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function MQe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var LQe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(MQe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=DQe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),na="-ms-",vN="-moz-",Er="-webkit-",NSe="comm",yY="rule",vY="decl",FQe="@import",DSe="@keyframes",jQe="@layer",BQe=Math.abs,G6=String.fromCharCode,zQe=Object.assign;function UQe(e,t){return Ao(e,0)^45?(((t<<2^Ao(e,0))<<2^Ao(e,1))<<2^Ao(e,2))<<2^Ao(e,3):0}function MSe(e){return e.trim()}function VQe(e,t){return(e=t.exec(e))?e[0]:e}function xr(e,t,n){return e.replace(t,n)}function SU(e,t){return e.indexOf(t)}function Ao(e,t){return e.charCodeAt(t)|0}function zC(e,t,n){return e.slice(t,n)}function Cd(e){return e.length}function _Y(e){return e.length}function PP(e,t){return t.push(e),e}function HQe(e,t){return e.map(t).join("")}var Y6=1,Zw=1,LSe=0,zu=0,ws=0,px="";function K6(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:Y6,column:Zw,length:o,return:""}}function $S(e,t){return zQe(K6("",null,null,"",null,null,0),e,{length:-e.length},t)}function qQe(){return ws}function WQe(){return ws=zu>0?Ao(px,--zu):0,Zw--,ws===10&&(Zw=1,Y6--),ws}function Sl(){return ws=zu<LSe?Ao(px,zu++):0,Zw++,ws===10&&(Zw=1,Y6++),ws}function eh(){return Ao(px,zu)}function kR(){return zu}function gI(e,t){return zC(px,e,t)}function UC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function FSe(e){return Y6=Zw=1,LSe=Cd(px=e),zu=0,[]}function jSe(e){return px="",e}function RR(e){return MSe(gI(zu-1,TU(e===91?e+2:e===40?e+1:e)))}function GQe(e){for(;(ws=eh())&&ws<33;)Sl();return UC(e)>2||UC(ws)>3?"":" "}function YQe(e,t){for(;--t&&Sl()&&!(ws<48||ws>102||ws>57&&ws<65||ws>70&&ws<97););return gI(e,kR()+(t<6&&eh()==32&&Sl()==32))}function TU(e){for(;Sl();)switch(ws){case e:return zu;case 34:case 39:e!==34&&e!==39&&TU(ws);break;case 40:e===41&&TU(e);break;case 92:Sl();break}return zu}function KQe(e,t){for(;Sl()&&e+ws!==57;)if(e+ws===84&&eh()===47)break;return"/*"+gI(t,zu-1)+"*"+G6(e===47?e:Sl())}function XQe(e){for(;!UC(eh());)Sl();return gI(e,zu)}function QQe(e){return jSe($R("",null,null,null,[""],e=FSe(e),0,[0],e))}function $R(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",w=i,E=s,S=r,b=_;g;)switch(p=v,v=Sl()){case 40:if(p!=108&&Ao(b,f-1)==58){SU(b+=xr(RR(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:b+=RR(v);break;case 9:case 10:case 13:case 32:b+=GQe(p);break;case 92:b+=YQe(kR()-1,7);continue;case 47:switch(eh()){case 42:case 47:PP(JQe(KQe(Sl(),kR()),t,n),u);break;default:b+="/"}break;case 123*m:a[l++]=Cd(b)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:y==-1&&(b=xr(b,/\f/g,"")),h>0&&Cd(b)-f&&PP(h>32?Hoe(b+";",r,n,f-1):Hoe(xr(b," ","")+";",r,n,f-2),u);break;case 59:b+=";";default:if(PP(S=Voe(b,t,n,l,c,i,a,_,w=[],E=[],f),s),v===123)if(c===0)$R(b,t,S,S,w,s,f,a,E);else switch(d===99&&Ao(b,3)===110?100:d){case 100:case 108:case 109:case 115:$R(e,S,S,r&&PP(Voe(e,S,S,0,0,i,a,_,i,w=[],f),E),i,E,f,a,r?w:E);break;default:$R(b,S,S,S,[""],E,0,a,E)}}l=c=h=0,m=y=1,_=b="",f=o;break;case 58:f=1+Cd(b),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&WQe()==125)continue}switch(b+=G6(v),v*m){case 38:y=c>0?1:(b+="\f",-1);break;case 44:a[l++]=(Cd(b)-1)*y,y=1;break;case 64:eh()===45&&(b+=RR(Sl())),d=eh(),c=f=Cd(_=b+=XQe(kR())),v++;break;case 45:p===45&&Cd(b)==2&&(m=0)}}return s}function Voe(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=_Y(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=zC(e,f+1,f=BQe(m=o[p])),_=e;y<h;++y)(_=MSe(m>0?d[y]+" "+v:xr(v,/&\f/g,d[y])))&&(u[g++]=_);return K6(e,t,n,i===0?yY:a,u,l,c)}function JQe(e,t,n){return K6(e,t,n,NSe,G6(qQe()),zC(e,2,-2),0)}function Hoe(e,t,n,r){return K6(e,t,n,vY,zC(e,0,r),zC(e,r+1,-1),r)}function dw(e,t){for(var n="",r=_Y(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function ZQe(e,t,n,r){switch(e.type){case jQe:if(e.children.length)break;case FQe:case vY:return e.return=e.return||e.value;case NSe:return"";case DSe:return e.return=e.value+"{"+dw(e.children,r)+"}";case yY:e.value=e.props.join(",")}return Cd(n=dw(e.children,r))?e.return=e.value+"{"+n+"}":""}function eJe(e){var t=_Y(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function tJe(e){return function(t){t.root||(t=t.return)&&e(t)}}function nJe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var rJe=function(t,n,r){for(var i=0,s=0;i=s,s=eh(),i===38&&s===12&&(n[r]=1),!UC(s);)Sl();return gI(t,zu)},iJe=function(t,n){var r=-1,i=44;do switch(UC(i)){case 0:i===38&&eh()===12&&(n[r]=1),t[r]+=rJe(zu-1,n,r);break;case 2:t[r]+=RR(i);break;case 4:if(i===44){t[++r]=eh()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=G6(i)}while(i=Sl());return t},sJe=function(t,n){return jSe(iJe(FSe(t),n))},qoe=new WeakMap,oJe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!qoe.get(r))&&!i){qoe.set(t,!0);for(var s=[],o=sJe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},aJe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function BSe(e,t){switch(UQe(e,t)){case 5103:return Er+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Er+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Er+e+vN+e+na+e+e;case 6828:case 4268:return Er+e+na+e+e;case 6165:return Er+e+na+"flex-"+e+e;case 5187:return Er+e+xr(e,/(\w+).+(:[^]+)/,Er+"box-$1$2"+na+"flex-$1$2")+e;case 5443:return Er+e+na+"flex-item-"+xr(e,/flex-|-self/,"")+e;case 4675:return Er+e+na+"flex-line-pack"+xr(e,/align-content|flex-|-self/,"")+e;case 5548:return Er+e+na+xr(e,"shrink","negative")+e;case 5292:return Er+e+na+xr(e,"basis","preferred-size")+e;case 6060:return Er+"box-"+xr(e,"-grow","")+Er+e+na+xr(e,"grow","positive")+e;case 4554:return Er+xr(e,/([^-])(transform)/g,"$1"+Er+"$2")+e;case 6187:return xr(xr(xr(e,/(zoom-|grab)/,Er+"$1"),/(image-set)/,Er+"$1"),e,"")+e;case 5495:case 3959:return xr(e,/(image-set\([^]*)/,Er+"$1$`$1");case 4968:return xr(xr(e,/(.+:)(flex-)?(.*)/,Er+"box-pack:$3"+na+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Er+e+e;case 4095:case 3583:case 4068:case 2532:return xr(e,/(.+)-inline(.+)/,Er+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cd(e)-1-t>6)switch(Ao(e,t+1)){case 109:if(Ao(e,t+4)!==45)break;case 102:return xr(e,/(.+:)(.+)-([^]+)/,"$1"+Er+"$2-$3$1"+vN+(Ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~SU(e,"stretch")?BSe(xr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ao(e,t+1)!==115)break;case 6444:switch(Ao(e,Cd(e)-3-(~SU(e,"!important")&&10))){case 107:return xr(e,":",":"+Er)+e;case 101:return xr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Er+(Ao(e,14)===45?"inline-":"")+"box$3$1"+Er+"$2$3$1"+na+"$2box$3")+e}break;case 5936:switch(Ao(e,t+11)){case 114:return Er+e+na+xr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Er+e+na+xr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Er+e+na+xr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Er+e+na+e+e}return e}var uJe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case vY:t.return=BSe(t.value,t.length);break;case DSe:return dw([$S(t,{value:xr(t.value,"@","@"+Er)})],i);case yY:if(t.length)return HQe(t.props,function(s){switch(VQe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return dw([$S(t,{props:[xr(s,/:(read-\w+)/,":"+vN+"$1")]})],i);case"::placeholder":return dw([$S(t,{props:[xr(s,/:(plac\w+)/,":"+Er+"input-$1")]}),$S(t,{props:[xr(s,/:(plac\w+)/,":"+vN+"$1")]}),$S(t,{props:[xr(s,/:(plac\w+)/,na+"input-$1")]})],i)}return""})}},lJe=[uJe],zSe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||lJe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[oJe,aJe];{var c,f=[ZQe,tJe(function(m){c.insert(m)})],d=eJe(l.concat(i,f)),h=function(g){return dw(QQe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new LQe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ni.apply(null,arguments)}var USe={exports:{}},zr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=typeof Symbol=="function"&&Symbol.for,bY=po?Symbol.for("react.element"):60103,wY=po?Symbol.for("react.portal"):60106,X6=po?Symbol.for("react.fragment"):60107,Q6=po?Symbol.for("react.strict_mode"):60108,J6=po?Symbol.for("react.profiler"):60114,Z6=po?Symbol.for("react.provider"):60109,e4=po?Symbol.for("react.context"):60110,EY=po?Symbol.for("react.async_mode"):60111,t4=po?Symbol.for("react.concurrent_mode"):60111,n4=po?Symbol.for("react.forward_ref"):60112,r4=po?Symbol.for("react.suspense"):60113,cJe=po?Symbol.for("react.suspense_list"):60120,i4=po?Symbol.for("react.memo"):60115,s4=po?Symbol.for("react.lazy"):60116,fJe=po?Symbol.for("react.block"):60121,dJe=po?Symbol.for("react.fundamental"):60117,hJe=po?Symbol.for("react.responder"):60118,pJe=po?Symbol.for("react.scope"):60119;function Hl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bY:switch(e=e.type,e){case EY:case t4:case X6:case J6:case Q6:case r4:return e;default:switch(e=e&&e.$$typeof,e){case e4:case n4:case s4:case i4:case Z6:return e;default:return t}}case wY:return t}}}function VSe(e){return Hl(e)===t4}zr.AsyncMode=EY;zr.ConcurrentMode=t4;zr.ContextConsumer=e4;zr.ContextProvider=Z6;zr.Element=bY;zr.ForwardRef=n4;zr.Fragment=X6;zr.Lazy=s4;zr.Memo=i4;zr.Portal=wY;zr.Profiler=J6;zr.StrictMode=Q6;zr.Suspense=r4;zr.isAsyncMode=function(e){return VSe(e)||Hl(e)===EY};zr.isConcurrentMode=VSe;zr.isContextConsumer=function(e){return Hl(e)===e4};zr.isContextProvider=function(e){return Hl(e)===Z6};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bY};zr.isForwardRef=function(e){return Hl(e)===n4};zr.isFragment=function(e){return Hl(e)===X6};zr.isLazy=function(e){return Hl(e)===s4};zr.isMemo=function(e){return Hl(e)===i4};zr.isPortal=function(e){return Hl(e)===wY};zr.isProfiler=function(e){return Hl(e)===J6};zr.isStrictMode=function(e){return Hl(e)===Q6};zr.isSuspense=function(e){return Hl(e)===r4};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===X6||e===t4||e===J6||e===Q6||e===r4||e===cJe||typeof e=="object"&&e!==null&&(e.$$typeof===s4||e.$$typeof===i4||e.$$typeof===Z6||e.$$typeof===e4||e.$$typeof===n4||e.$$typeof===dJe||e.$$typeof===hJe||e.$$typeof===pJe||e.$$typeof===fJe)};zr.typeOf=Hl;USe.exports=zr;var mJe=USe.exports,HSe=mJe,gJe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yJe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qSe={};qSe[HSe.ForwardRef]=gJe;qSe[HSe.Memo]=yJe;var vJe=!0;function _Je(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var bJe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||vJe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},WSe=function(t,n,r){bJe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function wJe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var EJe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xJe=/[A-Z]|^ms/g,SJe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,GSe=function(t){return t.charCodeAt(1)===45},Woe=function(t){return t!=null&&typeof t!="boolean"},zj=nJe(function(e){return GSe(e)?e:e.replace(xJe,"-$&").toLowerCase()}),Goe=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(SJe,function(r,i,s){return Ad={name:i,styles:s,next:Ad},i})}return EJe[t]!==1&&!GSe(t)&&typeof n=="number"&&n!==0?n+"px":n};function VC(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ad={name:n.name,styles:n.styles,next:Ad},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Ad={name:r.name,styles:r.styles,next:Ad},r=r.next;var i=n.styles+";";return i}return TJe(e,t,n)}case"function":{if(e!==void 0){var s=Ad,o=n(e);return Ad=s,VC(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function TJe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=VC(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":Woe(o)&&(r+=zj(s)+":"+Goe(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)Woe(o[a])&&(r+=zj(s)+":"+Goe(s,o[a])+";");else{var u=VC(e,t,o);switch(s){case"animation":case"animationName":{r+=zj(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var Yoe=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ad,xY=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";Ad=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=VC(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=VC(r,n,t[a]),i&&(s+=o[a]);Yoe.lastIndex=0;for(var u="",l;(l=Yoe.exec(s))!==null;)u+="-"+l[1];var c=wJe(s)+u;return{name:c,styles:s,next:Ad}},CJe=wC.useInsertionEffect?wC.useInsertionEffect:!1,Koe=CJe||C.useLayoutEffect,YSe=C.createContext(typeof HTMLElement<"u"?zSe({key:"css"}):null);YSe.Provider;var AJe=function(t){return C.forwardRef(function(n,r){var i=C.useContext(YSe);return t(n,i,r)})},IJe=C.createContext({}),OJe=AJe(function(e,t){var n=e.styles,r=xY([n],void 0,C.useContext(IJe)),i=C.useRef();return Koe(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),Koe(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&WSe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function KSe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xY(t)}var PJe=function(){var t=KSe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function XSe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var kJe=Object.defineProperty,Xoe=Object.getOwnPropertySymbols,RJe=Object.prototype.hasOwnProperty,$Je=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?kJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uj=(e,t)=>{for(var n in t||(t={}))RJe.call(t,n)&&Qoe(e,n,t[n]);if(Xoe)for(var n of Xoe(t))$Je.call(t,n)&&Qoe(e,n,t[n]);return e};const QSe=C.createContext({theme:$Se});function ps(){var e;return((e=C.useContext(QSe))==null?void 0:e.theme)||$Se}function NJe(e){const t=ps(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function JSe(){var e;return(e=C.useContext(QSe))==null?void 0:e.emotionCache}function ut(e,t,n){var r;const i=ps(),s=(r=i.components[e])==null?void 0:r.defaultProps,o=typeof s=="function"?s(i):s;return Uj(Uj(Uj({},t),o),XSe(n))}const DJe={app:100,modal:200,popover:300,overlay:400,max:9999};function Rc(e){return DJe[e]}function MJe(e,t){const n=C.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const LJe=zSe({key:"mantine",prepend:!0});function FJe(){return JSe()||LJe}var jJe=Object.defineProperty,Joe=Object.getOwnPropertySymbols,BJe=Object.prototype.hasOwnProperty,zJe=Object.prototype.propertyIsEnumerable,Zoe=(e,t,n)=>t in e?jJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UJe=(e,t)=>{for(var n in t||(t={}))BJe.call(t,n)&&Zoe(e,n,t[n]);if(Joe)for(var n of Joe(t))zJe.call(t,n)&&Zoe(e,n,t[n]);return e};const Vj="ref";function VJe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(Vj in n))return{args:e,ref:t};t=n[Vj];const r=UJe({},n);return delete r[Vj],{args:[r],ref:t}}const{cssFactory:HJe}=(()=>{function e(n,r,i){const s=[],o=_Je(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=VJe(o),l=xY(u,r.registered);return WSe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,OSe(o))}}return{cssFactory:t}})();function ZSe(){const e=FJe();return MJe(()=>HJe({cache:e}),[e])}function qJe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var WJe=Object.defineProperty,eae=Object.getOwnPropertySymbols,GJe=Object.prototype.hasOwnProperty,YJe=Object.prototype.propertyIsEnumerable,tae=(e,t,n)=>t in e?WJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hj=(e,t)=>{for(var n in t||(t={}))GJe.call(t,n)&&tae(e,n,t[n]);if(eae)for(var n of eae(t))YJe.call(t,n)&&tae(e,n,t[n]);return e};function KJe(e){return`__mantine-ref-${e||""}`}function nae(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=Hj(Hj({},i[o]),s[o]):i[o]=Hj({},s[o])}),i),{}):r(e)}function pt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=ps(),o=NJe(i==null?void 0:i.name),a=JSe(),{css:u,cx:l}=ZSe(),c=t(s,r,KJe),f=nae(i==null?void 0:i.styles,s,r),d=nae(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:qJe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function eTe({styles:e}){const t=ps();return j.createElement(OJe,{styles:KSe(typeof e=="function"?e(t):e)})}var XJe=Object.defineProperty,QJe=Object.defineProperties,JJe=Object.getOwnPropertyDescriptors,rae=Object.getOwnPropertySymbols,ZJe=Object.prototype.hasOwnProperty,eZe=Object.prototype.propertyIsEnumerable,iae=(e,t,n)=>t in e?XJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NS=(e,t)=>{for(var n in t||(t={}))ZJe.call(t,n)&&iae(e,n,t[n]);if(rae)for(var n of rae(t))eZe.call(t,n)&&iae(e,n,t[n]);return e},DS=(e,t)=>QJe(e,JJe(t));const MS={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},kP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:DS(NS({},MS),{common:{transformOrigin:"center center"}}),"pop-bottom-left":DS(NS({},MS),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":DS(NS({},MS),{common:{transformOrigin:"bottom right"}}),"pop-top-left":DS(NS({},MS),{common:{transformOrigin:"top left"}}),"pop-top-right":DS(NS({},MS),{common:{transformOrigin:"top right"}})},sae=["mousedown","touchstart"];function tZe(e,t,n){const r=C.useRef();return C.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||sae).forEach(s=>document.addEventListener(s,i)),()=>{(t||sae).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function nZe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function rZe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function iZe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=C.useState(n?t:rZe(e)),s=C.useRef();return C.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),nZe(s.current,o=>i(o.matches))},[e]),r}function Tl(e,t,n){return Math.min(Math.max(e,t),n)}const SY=typeof document<"u"?C.useLayoutEffect:C.useEffect;function cs(e,t){const n=C.useRef(!1);C.useEffect(()=>()=>{n.current=!1},[]),C.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function TY({opened:e,shouldReturnFocus:t=!0}){const n=C.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return cs(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const sZe=/input|select|textarea|button|object/,tTe="a, input, select, textarea, button, object, [tabindex]";function oZe(e){return e.style.display==="none"}function aZe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(oZe(n))return!1;n=n.parentNode}return!0}function nTe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function CU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(nTe(e));return(sZe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&aZe(e)}function rTe(e){const t=nTe(e);return(Number.isNaN(t)||t>=0)&&CU(e)}function uZe(e){return Array.from(e.querySelectorAll(tTe)).filter(rTe)}function lZe(e,t){const n=uZe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();if(!(r===i.activeElement||e===i.activeElement))return;t.preventDefault();const o=n[t.shiftKey?n.length-1:0];o&&o.focus()}function cZe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{var i;if((i=r==null?void 0:r.shadowRoot)!=null&&i.contains(e)||r.contains(e))return;const s=r.getAttribute("aria-hidden");return(s===null||s==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:s}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function CY(e=!0){const t=C.useRef(),n=C.useRef(null),r=C.useCallback(i=>{if(e){if(i===null){n.current&&(n.current(),n.current=null);return}if(n.current=cZe(i),t.current!==i)if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(tTe));o=a.find(rTe)||a.find(CU)||null,!o&&CU(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.getRootNode()&&s()}),t.current=i}else t.current=null}},[e]);return C.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&lZe(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const fZe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,dZe=j.useId||(()=>{});function hZe(){const[e,t]=C.useState("");return SY(()=>{t(fZe())},[]),e}function pZe(){const e=dZe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ia(e){return typeof e=="string"?e:pZe()||hZe()}function AU(e,t,n){C.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function iTe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function sTe(...e){return t=>{e.forEach(n=>iTe(n,t))}}function As(...e){return C.useCallback(sTe(...e),e)}const oTe=e=>({x:Tl(e.x,0,1),y:Tl(e.y,0,1)});function o4(e,t,n="ltr"){const r=C.useRef(),i=C.useRef(!1),s=C.useRef(!1),o=C.useRef(0),[a,u]=C.useState(!1);return C.useEffect(()=>{i.current=!0},[]),C.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const w=r.current.getBoundingClientRect();if(w.width&&w.height){const E=Tl((v-w.left)/w.width,0,1);e({x:n==="ltr"?E:1-E,y:Tl((_-w.top)/w.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),v.preventDefault(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Fo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=C.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function a4(e,t){return iZe("(prefers-reduced-motion: reduce)",e,t)}const mZe=e=>e<.5?2*e*e:-1+(4-2*e)*e,gZe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},yZe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},vZe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function aTe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=mZe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=C.useRef(0),u=C.useRef(0),l=C.useRef(!1),c=C.useRef(null),f=C.useRef(null),d=a4(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=C.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=yZe({parent:c.current,axis:t}))!=null?y:0,_=gZe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function w(){u.current===0&&(u.current=performance.now());const S=performance.now()-u.current,b=d||e===0?1:S/e,T=v+_*r(b);vZe({parent:c.current,axis:t,distance:T}),!l.current&&b<1?a.current=requestAnimationFrame(w):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}w()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return AU("wheel",m,{passive:!0}),AU("touchmove",m,{passive:!0}),C.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const _Ze={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function yc(){const e=C.useRef(0),t=C.useRef(null),[n,r]=C.useState(_Ze),i=C.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return C.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function bZe(){const[e,{width:t,height:n}]=yc();return{ref:e,width:t,height:n}}function wZe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const EZe=({disableBodyPadding:e})=>{const t=e?null:wZe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function xZe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function SZe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function TZe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function uTe(e,t={disableBodyPadding:!1}){const[n,r]=C.useState(e||!1),i=C.useRef(0),{disableBodyPadding:s}=t,o=C.useRef(null),a=()=>{i.current=window.scrollY;const l=EZe({disableBodyPadding:s}),c=TZe();xZe(c,l),SZe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return C.useEffect(()=>(n?a():u(),u),[n]),C.useEffect(()=>{e!==void 0&&r(e)},[e]),C.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}function CZe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function AZe(){return typeof window<"u"?CZe():"undetermined"}function NT(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=C.useState(e),o=C.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=C.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=C.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function NR(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Hg(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var oae=Object.getOwnPropertySymbols,IZe=Object.prototype.hasOwnProperty,OZe=Object.prototype.propertyIsEnumerable,PZe=(e,t)=>{var n={};for(var r in e)IZe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oae)for(var r of oae(e))t.indexOf(r)<0&&OZe.call(e,r)&&(n[r]=e[r]);return n};function Wf(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:E,lts:S,ta:b,lh:T,fs:A,tt:I,td:k,w:$,miw:P,maw:N,h:F,mih:z,mah:W,bgsz:V,bgp:G,bgr:M,bga:H,pos:Y,top:L,left:B,bottom:q,right:Z,inset:ue,display:he}=t,fe=PZe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:XSe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:E,lts:S,ta:b,lh:T,fs:A,tt:I,td:k,w:$,miw:P,maw:N,h:F,mih:z,mah:W,bgsz:V,bgp:G,bgr:M,bga:H,pos:Y,top:L,left:B,bottom:q,right:Z,inset:ue,display:he}),rest:fe}}function kZe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function RZe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return kZe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function $Ze(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function NZe(e){return e}function DZe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const MZe=["-xs","-sm","-md","-lg","-xl"];function LZe(e,t){return MZe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const FZe={color:$Ze,default:NZe,fontSize:DZe,spacing:LZe},jZe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var BZe=Object.defineProperty,aae=Object.getOwnPropertySymbols,zZe=Object.prototype.hasOwnProperty,UZe=Object.prototype.propertyIsEnumerable,uae=(e,t,n)=>t in e?BZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lae=(e,t)=>{for(var n in t||(t={}))zZe.call(t,n)&&uae(e,n,t[n]);if(aae)for(var n of aae(t))UZe.call(t,n)&&uae(e,n,t[n]);return e};function IU(e,t,n=jZe){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(RZe({value:e[s],getValue:FZe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=lae(lae({},i[o]),s[o]):i[o]=s[o]}),i),{})}function cae(e,t){return typeof e=="function"?e(t):e}function VZe(e,t,n){const r=ps(),{css:i,cx:s}=ZSe();return Array.isArray(e)?s(n,i(IU(t,r)),e.map(o=>i(cae(o,r)))):s(n,i(cae(e,r)),i(IU(t,r)))}var HZe=Object.defineProperty,_N=Object.getOwnPropertySymbols,lTe=Object.prototype.hasOwnProperty,cTe=Object.prototype.propertyIsEnumerable,fae=(e,t,n)=>t in e?HZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qZe=(e,t)=>{for(var n in t||(t={}))lTe.call(t,n)&&fae(e,n,t[n]);if(_N)for(var n of _N(t))cTe.call(t,n)&&fae(e,n,t[n]);return e},WZe=(e,t)=>{var n={};for(var r in e)lTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&cTe.call(e,r)&&(n[r]=e[r]);return n};const fTe=C.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=WZe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=Wf(a),c=i||"div";return j.createElement(c,qZe({ref:t,className:VZe(o,u,r),style:s},l))});fTe.displayName="@mantine/core/Box";const dt=fTe;var GZe=Object.defineProperty,YZe=Object.defineProperties,KZe=Object.getOwnPropertyDescriptors,dae=Object.getOwnPropertySymbols,XZe=Object.prototype.hasOwnProperty,QZe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?GZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pae=(e,t)=>{for(var n in t||(t={}))XZe.call(t,n)&&hae(e,n,t[n]);if(dae)for(var n of dae(t))QZe.call(t,n)&&hae(e,n,t[n]);return e},JZe=(e,t)=>YZe(e,KZe(t)),ZZe=pt(e=>({root:JZe(pae(pae({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})})),eet=Object.defineProperty,bN=Object.getOwnPropertySymbols,dTe=Object.prototype.hasOwnProperty,hTe=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?eet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tet=(e,t)=>{for(var n in t||(t={}))dTe.call(t,n)&&mae(e,n,t[n]);if(bN)for(var n of bN(t))hTe.call(t,n)&&mae(e,n,t[n]);return e},net=(e,t)=>{var n={};for(var r in e)dTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&hTe.call(e,r)&&(n[r]=e[r]);return n};const pTe=C.forwardRef((e,t)=>{const n=ut("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=net(n,["className","component","unstyled"]),{classes:a,cx:u}=ZZe(null,{name:"UnstyledButton",unstyled:s});return j.createElement(dt,tet({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});pTe.displayName="@mantine/core/UnstyledButton";const Nm=pTe;var ret=Object.defineProperty,iet=Object.defineProperties,set=Object.getOwnPropertyDescriptors,wN=Object.getOwnPropertySymbols,mTe=Object.prototype.hasOwnProperty,gTe=Object.prototype.propertyIsEnumerable,gae=(e,t,n)=>t in e?ret(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wy=(e,t)=>{for(var n in t||(t={}))mTe.call(t,n)&&gae(e,n,t[n]);if(wN)for(var n of wN(t))gTe.call(t,n)&&gae(e,n,t[n]);return e},qj=(e,t)=>iet(e,set(t)),oet=(e,t)=>{var n={};for(var r in e)mTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&gTe.call(e,r)&&(n[r]=e[r]);return n};function aet(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Wj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const RP=typeof window<"u"&&window.requestAnimationFrame;function uet({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=C.useRef(null),s="0px",o={display:"none",height:"0px",overflow:"hidden"},[a,u]=C.useState(r?{}:o),l=p=>{c_.flushSync(()=>u(p))},c=p=>{l(m=>Wy(Wy({},m),p))};function f(p){return{transition:`height ${e||aet(p)}ms ${t}`}}cs(()=>{RP(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),RP(()=>{const p=Wj(i);c(qj(Wy({},f(p)),{height:p}))})}:()=>{const p=Wj(i);c(qj(Wy({},f(p)),{willChange:"height",height:p})),RP(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Wj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h(p={}){var m=p,{style:g={},refKey:y="ref"}=m,v=oet(m,["style","refKey"]);const _=v[y];return qj(Wy({"aria-hidden":!r},v),{[y]:sTe(i,_),onTransitionEnd:d,style:Wy(Wy({boxSizing:"border-box"},g),a)})}return h}var cet=Object.defineProperty,EN=Object.getOwnPropertySymbols,yTe=Object.prototype.hasOwnProperty,vTe=Object.prototype.propertyIsEnumerable,yae=(e,t,n)=>t in e?cet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$P=(e,t)=>{for(var n in t||(t={}))yTe.call(t,n)&&yae(e,n,t[n]);if(EN)for(var n of EN(t))vTe.call(t,n)&&yae(e,n,t[n]);return e},fet=(e,t)=>{var n={};for(var r in e)yTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&vTe.call(e,r)&&(n[r]=e[r]);return n};const det={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},_Te=C.forwardRef((e,t)=>{const n=ut("Collapse",det,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l}=n,c=fet(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity"]),f=ps(),d=a4(),p=(f.respectReducedMotion?d:!1)?0:s,{systemStyles:m,rest:g}=Wf(c),y=uet({opened:i,transitionDuration:p,transitionTimingFunction:o,onTransitionEnd:u});return p===0?i?j.createElement(dt,$P({},g),r):null:j.createElement(dt,$P({},y($P($P({style:a,ref:t},g),m))),j.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${p}ms ${o}`:"none"}},r))});_Te.displayName="@mantine/core/Collapse";var het=Object.defineProperty,vae=Object.getOwnPropertySymbols,pet=Object.prototype.hasOwnProperty,met=Object.prototype.propertyIsEnumerable,_ae=(e,t,n)=>t in e?het(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,get=(e,t)=>{for(var n in t||(t={}))pet.call(t,n)&&_ae(e,n,t[n]);if(vae)for(var n of vae(t))met.call(t,n)&&_ae(e,n,t[n]);return e};function yet(e){return j.createElement("svg",get({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),j.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var vet=Object.defineProperty,_et=Object.defineProperties,bet=Object.getOwnPropertyDescriptors,bae=Object.getOwnPropertySymbols,wet=Object.prototype.hasOwnProperty,Eet=Object.prototype.propertyIsEnumerable,wae=(e,t,n)=>t in e?vet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bTe=(e,t)=>{for(var n in t||(t={}))wet.call(t,n)&&wae(e,n,t[n]);if(bae)for(var n of bae(t))Eet.call(t,n)&&wae(e,n,t[n]);return e},xet=(e,t)=>_et(e,bet(t));const DT={xs:18,sm:22,md:28,lg:34,xl:44};function Tet({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:bTe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var Cet=pt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:xet(bTe({},Tet({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:DT}),minHeight:e.fn.size({size:n,sizes:DT}),width:e.fn.size({size:n,sizes:DT}),minWidth:e.fn.size({size:n,sizes:DT}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})})),Aet=Object.defineProperty,xN=Object.getOwnPropertySymbols,wTe=Object.prototype.hasOwnProperty,ETe=Object.prototype.propertyIsEnumerable,Eae=(e,t,n)=>t in e?Aet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iet=(e,t)=>{for(var n in t||(t={}))wTe.call(t,n)&&Eae(e,n,t[n]);if(xN)for(var n of xN(t))ETe.call(t,n)&&Eae(e,n,t[n]);return e},Oet=(e,t)=>{var n={};for(var r in e)wTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&ETe.call(e,r)&&(n[r]=e[r]);return n};function Pet(e){var t=e,{size:n,color:r}=t,i=Oet(t,["size","color"]);return j.createElement("svg",Iet({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),j.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},j.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var ket=Object.defineProperty,SN=Object.getOwnPropertySymbols,xTe=Object.prototype.hasOwnProperty,STe=Object.prototype.propertyIsEnumerable,xae=(e,t,n)=>t in e?ket(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ret=(e,t)=>{for(var n in t||(t={}))xTe.call(t,n)&&xae(e,n,t[n]);if(SN)for(var n of SN(t))STe.call(t,n)&&xae(e,n,t[n]);return e},$et=(e,t)=>{var n={};for(var r in e)xTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&STe.call(e,r)&&(n[r]=e[r]);return n};function Net(e){var t=e,{size:n,color:r}=t,i=$et(t,["size","color"]);return j.createElement("svg",Ret({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),j.createElement("g",{fill:"none",fillRule:"evenodd"},j.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},j.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),j.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},j.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var Det=Object.defineProperty,TN=Object.getOwnPropertySymbols,TTe=Object.prototype.hasOwnProperty,CTe=Object.prototype.propertyIsEnumerable,Sae=(e,t,n)=>t in e?Det(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Met=(e,t)=>{for(var n in t||(t={}))TTe.call(t,n)&&Sae(e,n,t[n]);if(TN)for(var n of TN(t))CTe.call(t,n)&&Sae(e,n,t[n]);return e},Let=(e,t)=>{var n={};for(var r in e)TTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&CTe.call(e,r)&&(n[r]=e[r]);return n};function Fet(e){var t=e,{size:n,color:r}=t,i=Let(t,["size","color"]);return j.createElement("svg",Met({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),j.createElement("circle",{cx:"15",cy:"15",r:"15"},j.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},j.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),j.createElement("circle",{cx:"105",cy:"15",r:"15"},j.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),j.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var jet=Object.defineProperty,CN=Object.getOwnPropertySymbols,ATe=Object.prototype.hasOwnProperty,ITe=Object.prototype.propertyIsEnumerable,Tae=(e,t,n)=>t in e?jet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bet=(e,t)=>{for(var n in t||(t={}))ATe.call(t,n)&&Tae(e,n,t[n]);if(CN)for(var n of CN(t))ITe.call(t,n)&&Tae(e,n,t[n]);return e},zet=(e,t)=>{var n={};for(var r in e)ATe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&ITe.call(e,r)&&(n[r]=e[r]);return n};const Gj={bars:Pet,oval:Net,dots:Fet},Uet={xs:18,sm:22,md:36,lg:44,xl:58},Vet={size:"md"};function ph(e){const t=ut("Loader",Vet,e),{size:n,color:r,variant:i}=t,s=zet(t,["size","color","variant"]),o=ps(),a=i in Gj?i:o.loader;return j.createElement(dt,Bet({role:"presentation",component:Gj[a]||Gj.bars,size:o.fn.size({size:n,sizes:Uet}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}ph.displayName="@mantine/core/Loader";var Het=Object.defineProperty,AN=Object.getOwnPropertySymbols,OTe=Object.prototype.hasOwnProperty,PTe=Object.prototype.propertyIsEnumerable,Cae=(e,t,n)=>t in e?Het(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aae=(e,t)=>{for(var n in t||(t={}))OTe.call(t,n)&&Cae(e,n,t[n]);if(AN)for(var n of AN(t))PTe.call(t,n)&&Cae(e,n,t[n]);return e},qet=(e,t)=>{var n={};for(var r in e)OTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&PTe.call(e,r)&&(n[r]=e[r]);return n};const Wet={color:"gray",size:"md",variant:"subtle",loading:!1},kTe=C.forwardRef((e,t)=>{const n=ut("ActionIcon",Wet,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=qet(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=Cet({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=j.createElement(ph,Aae({color:v.color,size:y.fn.size({size:a,sizes:DT})-12},f));return j.createElement(Nm,Aae({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});kTe.displayName="@mantine/core/ActionIcon";const dm=kTe;function RTe(e){const{children:t,target:n,className:r}=ut("Portal",{},e),i=ps(),[s,o]=C.useState(!1),a=C.useRef();return SY(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?c_.createPortal(j.createElement("div",{className:r,dir:i.dir},t),a.current):null}RTe.displayName="@mantine/core/Portal";var Get=Object.defineProperty,IN=Object.getOwnPropertySymbols,$Te=Object.prototype.hasOwnProperty,NTe=Object.prototype.propertyIsEnumerable,Iae=(e,t,n)=>t in e?Get(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yet=(e,t)=>{for(var n in t||(t={}))$Te.call(t,n)&&Iae(e,n,t[n]);if(IN)for(var n of IN(t))NTe.call(t,n)&&Iae(e,n,t[n]);return e},Ket=(e,t)=>{var n={};for(var r in e)$Te.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&NTe.call(e,r)&&(n[r]=e[r]);return n};function mx(e){var t=e,{withinPortal:n=!0,children:r}=t,i=Ket(t,["withinPortal","children"]);return n?j.createElement(RTe,Yet({},i),r):j.createElement(j.Fragment,null,r)}mx.displayName="@mantine/core/OptionalPortal";var Xet=Object.defineProperty,Qet=Object.defineProperties,Jet=Object.getOwnPropertyDescriptors,Oae=Object.getOwnPropertySymbols,Zet=Object.prototype.hasOwnProperty,ett=Object.prototype.propertyIsEnumerable,Pae=(e,t,n)=>t in e?Xet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yj=(e,t)=>{for(var n in t||(t={}))Zet.call(t,n)&&Pae(e,n,t[n]);if(Oae)for(var n of Oae(t))ett.call(t,n)&&Pae(e,n,t[n]);return e},kae=(e,t)=>Qet(e,Jet(t));function ttt({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var ntt=pt((e,{color:t,radius:n,variant:r})=>({root:Yj(kae(Yj({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),ttt({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:kae(Yj({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}})),rtt=Object.defineProperty,Rae=Object.getOwnPropertySymbols,itt=Object.prototype.hasOwnProperty,stt=Object.prototype.propertyIsEnumerable,$ae=(e,t,n)=>t in e?rtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ott=(e,t)=>{for(var n in t||(t={}))itt.call(t,n)&&$ae(e,n,t[n]);if(Rae)for(var n of Rae(t))stt.call(t,n)&&$ae(e,n,t[n]);return e};function DTe(e){return j.createElement("svg",ott({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}DTe.displayName="@mantine/core/CloseIcon";var att=Object.defineProperty,ON=Object.getOwnPropertySymbols,MTe=Object.prototype.hasOwnProperty,LTe=Object.prototype.propertyIsEnumerable,Nae=(e,t,n)=>t in e?att(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,utt=(e,t)=>{for(var n in t||(t={}))MTe.call(t,n)&&Nae(e,n,t[n]);if(ON)for(var n of ON(t))LTe.call(t,n)&&Nae(e,n,t[n]);return e},ltt=(e,t)=>{var n={};for(var r in e)MTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&LTe.call(e,r)&&(n[r]=e[r]);return n};const ctt={xs:12,sm:14,md:16,lg:20,xl:24},ftt={size:"md"},FTe=C.forwardRef((e,t)=>{const n=ut("CloseButton",ftt,e),{iconSize:r,size:i="md"}=n,s=ltt(n,["iconSize","size"]),o=ps(),a=r||o.fn.size({size:i,sizes:ctt});return j.createElement(dm,utt({size:i,ref:t},s),j.createElement(DTe,{width:a,height:a}))});FTe.displayName="@mantine/core/CloseButton";const Bh=FTe;var dtt=Object.defineProperty,PN=Object.getOwnPropertySymbols,jTe=Object.prototype.hasOwnProperty,BTe=Object.prototype.propertyIsEnumerable,Dae=(e,t,n)=>t in e?dtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,htt=(e,t)=>{for(var n in t||(t={}))jTe.call(t,n)&&Dae(e,n,t[n]);if(PN)for(var n of PN(t))BTe.call(t,n)&&Dae(e,n,t[n]);return e},ptt=(e,t)=>{var n={};for(var r in e)jTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&BTe.call(e,r)&&(n[r]=e[r]);return n};const mtt={variant:"light"},zTe=C.forwardRef((e,t)=>{const n=ut("Alert",mtt,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=ptt(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=ntt({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),w=Ia(r),E=s&&`${w}-title`,S=`${w}-body`;return j.createElement(dt,htt({id:w,role:"alert","aria-labelledby":E,"aria-describedby":S,className:_(v.root,v[o],i),ref:t},y),j.createElement("div",{className:v.wrapper},c&&j.createElement("div",{className:v.icon},c),j.createElement("div",{className:v.body},s&&j.createElement("div",{className:v.title,"data-with-close-button":p||void 0},j.createElement("span",{id:E,className:v.label},s)),p&&j.createElement(Bh,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),j.createElement("div",{id:S,className:v.message},a))))});zTe.displayName="@mantine/core/Alert";var gtt=Object.defineProperty,ytt=Object.defineProperties,vtt=Object.getOwnPropertyDescriptors,Mae=Object.getOwnPropertySymbols,_tt=Object.prototype.hasOwnProperty,btt=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?gtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LS=(e,t)=>{for(var n in t||(t={}))_tt.call(t,n)&&Lae(e,n,t[n]);if(Mae)for(var n of Mae(t))btt.call(t,n)&&Lae(e,n,t[n]);return e},wtt=(e,t)=>ytt(e,vtt(t));function Ett({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function xtt({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function Stt(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}function Ttt({theme:e,truncate:t}){return t==="start"?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",direction:e.dir==="ltr"?"rtl":"ltr",textAlign:e.dir==="ltr"?"right":"left"}:t?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:null}var Ctt=pt((e,{color:t,variant:n,size:r,lineClamp:i,truncate:s,inline:o,inherit:a,underline:u,gradient:l,weight:c,transform:f,align:d,strikethrough:h,italic:p})=>{const m=e.fn.variant({variant:"gradient",gradient:l});return{root:LS(wtt(LS(LS(LS(LS({},e.fn.fontStyles()),e.fn.focusStyles()),Stt(i)),Ttt({theme:e,truncate:s})),{color:xtt({color:t,theme:e,variant:n}),fontFamily:a?"inherit":e.fontFamily,fontSize:a||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:a?"inherit":o?1:e.lineHeight,textDecoration:Ett({underline:u,strikethrough:h}),WebkitTapHighlightColor:"transparent",fontWeight:a?"inherit":c,textTransform:f,textAlign:d,fontStyle:p?"italic":void 0}),e.fn.hover(n==="link"&&u===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:m.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}}),Att=Object.defineProperty,kN=Object.getOwnPropertySymbols,UTe=Object.prototype.hasOwnProperty,VTe=Object.prototype.propertyIsEnumerable,Fae=(e,t,n)=>t in e?Att(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Itt=(e,t)=>{for(var n in t||(t={}))UTe.call(t,n)&&Fae(e,n,t[n]);if(kN)for(var n of kN(t))VTe.call(t,n)&&Fae(e,n,t[n]);return e},Ott=(e,t)=>{var n={};for(var r in e)UTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&VTe.call(e,r)&&(n[r]=e[r]);return n};const Ptt={variant:"text"},HTe=C.forwardRef((e,t)=>{const n=ut("Text",Ptt,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,truncate:f,gradient:d,inline:h,inherit:p,underline:m,strikethrough:g,italic:y,classNames:v,styles:_,unstyled:w,span:E}=n,S=Ott(n,["className","size","weight","transform","color","align","variant","lineClamp","truncate","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:b,cx:T}=Ctt({variant:l,color:a,size:i,lineClamp:c,truncate:f,inline:h,inherit:p,underline:m,strikethrough:g,italic:y,weight:s,transform:o,align:u,gradient:d},{unstyled:w,name:"Text"});return j.createElement(dt,Itt({ref:t,className:T(b.root,{[b.gradient]:l==="gradient"},r),component:E?"span":"div"},S))});HTe.displayName="@mantine/core/Text";const it=HTe;var ktt=pt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}})),Rtt=Object.defineProperty,RN=Object.getOwnPropertySymbols,qTe=Object.prototype.hasOwnProperty,WTe=Object.prototype.propertyIsEnumerable,jae=(e,t,n)=>t in e?Rtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bae=(e,t)=>{for(var n in t||(t={}))qTe.call(t,n)&&jae(e,n,t[n]);if(RN)for(var n of RN(t))WTe.call(t,n)&&jae(e,n,t[n]);return e},$tt=(e,t)=>{var n={};for(var r in e)qTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&WTe.call(e,r)&&(n[r]=e[r]);return n};const Ntt={},GTe=C.forwardRef((e,t)=>{const n=ut("Anchor",Ntt,e),{component:r,className:i,unstyled:s}=n,o=$tt(n,["component","className","unstyled"]),{classes:a,cx:u}=ktt(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return j.createElement(it,Bae(Bae({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});GTe.displayName="@mantine/core/Anchor";const yI=GTe,YTe=C.createContext({zIndex:1e3,fixed:!1,layout:"default"}),Dtt=YTe.Provider;function KTe(){return C.useContext(YTe)}function u4(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var Mtt=Object.defineProperty,Ltt=Object.defineProperties,Ftt=Object.getOwnPropertyDescriptors,zae=Object.getOwnPropertySymbols,jtt=Object.prototype.hasOwnProperty,Btt=Object.prototype.propertyIsEnumerable,Uae=(e,t,n)=>t in e?Mtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NP=(e,t)=>{for(var n in t||(t={}))jtt.call(t,n)&&Uae(e,n,t[n]);if(zae)for(var n of zae(t))Btt.call(t,n)&&Uae(e,n,t[n]);return e},Vae=(e,t)=>Ltt(e,Ftt(t)),ztt=pt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u,layout:l})=>{const c=typeof n=="object"&&n!==null?u4(n,e).reduce((d,[h,p])=>(d[`@media (min-width: ${h}px)`]={width:p,minWidth:p},d),{}):null,f=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:Vae(NP(NP(Vae(NP(NP({},e.fn.fontStyles()),i),{top:l==="alt"?0:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||(l==="alt"?"auto":"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))"),width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),f),c),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}}),Utt=Object.defineProperty,$N=Object.getOwnPropertySymbols,XTe=Object.prototype.hasOwnProperty,QTe=Object.prototype.propertyIsEnumerable,Hae=(e,t,n)=>t in e?Utt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qae=(e,t)=>{for(var n in t||(t={}))XTe.call(t,n)&&Hae(e,n,t[n]);if($N)for(var n of $N(t))QTe.call(t,n)&&Hae(e,n,t[n]);return e},Vtt=(e,t)=>{var n={};for(var r in e)XTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&QTe.call(e,r)&&(n[r]=e[r]);return n};const AY=C.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a,hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=Vtt(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=KTe(),{classes:w,cx:E,theme:S}=ztt({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:a||_.zIndex||Rc("app"),section:m,withBorder:c,layout:_.layout},{classNames:d,styles:h,name:g,unstyled:y}),b=u4(r,S).reduce((T,[A,I])=>(T[`@media (min-width: ${A}px)`]={[`--mantine-${m}-width`]:`${I}px`},T),{});return j.createElement(dt,qae({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:E(w.root,f)},v),p,j.createElement(eTe,{styles:()=>({":root":qae({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},b)})}))});AY.displayName="@mantine/core/HorizontalSection";var Htt=Object.defineProperty,NN=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,ZTe=Object.prototype.propertyIsEnumerable,Wae=(e,t,n)=>t in e?Htt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qtt=(e,t)=>{for(var n in t||(t={}))JTe.call(t,n)&&Wae(e,n,t[n]);if(NN)for(var n of NN(t))ZTe.call(t,n)&&Wae(e,n,t[n]);return e},Wtt=(e,t)=>{var n={};for(var r in e)JTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NN)for(var r of NN(e))t.indexOf(r)<0&&ZTe.call(e,r)&&(n[r]=e[r]);return n};const e2e=C.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=Wtt(n,["children","grow","sx"]);return j.createElement(dt,qtt({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...k0(s)]},o),r)});e2e.displayName="@mantine/core/Section";const t2e=e2e;var Gtt=Object.defineProperty,Gae=Object.getOwnPropertySymbols,Ytt=Object.prototype.hasOwnProperty,Ktt=Object.prototype.propertyIsEnumerable,Yae=(e,t,n)=>t in e?Gtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xtt=(e,t)=>{for(var n in t||(t={}))Ytt.call(t,n)&&Yae(e,n,t[n]);if(Gae)for(var n of Gae(t))Ktt.call(t,n)&&Yae(e,n,t[n]);return e};const Qtt={fixed:!1,position:{top:0,left:0},hiddenBreakpoint:"md",hidden:!1},P2=C.forwardRef((e,t)=>{const n=ut("Navbar",Qtt,e);return j.createElement(AY,Xtt({section:"navbar",__staticSelector:"Navbar",ref:t},n))});P2.Section=t2e;P2.displayName="@mantine/core/Navbar";var Jtt=Object.defineProperty,Ztt=Object.defineProperties,ent=Object.getOwnPropertyDescriptors,Kae=Object.getOwnPropertySymbols,tnt=Object.prototype.hasOwnProperty,nnt=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?Jtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kj=(e,t)=>{for(var n in t||(t={}))tnt.call(t,n)&&Xae(e,n,t[n]);if(Kae)for(var n of Kae(t))nnt.call(t,n)&&Xae(e,n,t[n]);return e},Qae=(e,t)=>Ztt(e,ent(t)),rnt=pt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s,layout:o})=>{const a=typeof t=="object"&&t!==null?u4(t,e).reduce((u,[l,c])=>(u[`@media (min-width: ${l}px)`]={height:c,minHeight:c},u),{}):null;return{root:Qae(Kj(Qae(Kj(Kj({},e.fn.fontStyles()),r),{zIndex:i,left:o==="alt"?"var(--mantine-navbar-width, 0)":0,right:o==="alt"?"var(--mantine-aside-width, 0)":0,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),a),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}}),int=Object.defineProperty,DN=Object.getOwnPropertySymbols,n2e=Object.prototype.hasOwnProperty,r2e=Object.prototype.propertyIsEnumerable,Jae=(e,t,n)=>t in e?int(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zae=(e,t)=>{for(var n in t||(t={}))n2e.call(t,n)&&Jae(e,n,t[n]);if(DN)for(var n of DN(t))r2e.call(t,n)&&Jae(e,n,t[n]);return e},snt=(e,t)=>{var n={};for(var r in e)n2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&r2e.call(e,r)&&(n[r]=e[r]);return n};const i2e=C.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f,section:d,unstyled:h,__staticSelector:p}=n,m=snt(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=KTe(),y=f||g.zIndex||Rc("app"),{classes:v,cx:_,theme:w}=rnt({height:a,fixed:g.fixed||u,position:c,zIndex:typeof y=="number"&&g.layout==="default"?y+1:y,layout:g.layout,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),E=typeof a=="object"&&a!==null?u4(a,w).reduce((S,[b,T])=>(S[`@media (min-width: ${b}px)`]={[`--mantine-${d}-height`]:`${T}px`},S),{}):null;return j.createElement(dt,Zae({component:d==="header"?"header":"footer",className:_(v.root,i),ref:t},m),r,j.createElement(eTe,{styles:()=>({":root":Zae({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},E)})}))});i2e.displayName="@mantine/core/VerticalSection";var ont=Object.defineProperty,ant=Object.defineProperties,unt=Object.getOwnPropertyDescriptors,eue=Object.getOwnPropertySymbols,lnt=Object.prototype.hasOwnProperty,cnt=Object.prototype.propertyIsEnumerable,tue=(e,t,n)=>t in e?ont(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fnt=(e,t)=>{for(var n in t||(t={}))lnt.call(t,n)&&tue(e,n,t[n]);if(eue)for(var n of eue(t))cnt.call(t,n)&&tue(e,n,t[n]);return e},dnt=(e,t)=>ant(e,unt(t));const hnt={fixed:!1,position:{top:0,left:0,right:0}},IY=C.forwardRef((e,t)=>{const n=ut("Header",hnt,e);return j.createElement(i2e,dnt(fnt({section:"header",__staticSelector:"Header"},n),{ref:t}))});IY.displayName="@mantine/core/Header";var pnt=Object.defineProperty,nue=Object.getOwnPropertySymbols,mnt=Object.prototype.hasOwnProperty,gnt=Object.prototype.propertyIsEnumerable,rue=(e,t,n)=>t in e?pnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ynt=(e,t)=>{for(var n in t||(t={}))mnt.call(t,n)&&rue(e,n,t[n]);if(nue)for(var n of nue(t))gnt.call(t,n)&&rue(e,n,t[n]);return e};const vnt={fixed:!1,position:{top:0,right:0},hiddenBreakpoint:"md",hidden:!1},k2=C.forwardRef((e,t)=>{const n=ut("Aside",vnt,e);return j.createElement(AY,ynt({section:"aside",__staticSelector:"Aside",ref:t},n))});k2.Section=t2e;k2.displayName="@mantine/core/Aside";var _nt=Object.defineProperty,iue=Object.getOwnPropertySymbols,bnt=Object.prototype.hasOwnProperty,wnt=Object.prototype.propertyIsEnumerable,sue=(e,t,n)=>t in e?_nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ent=(e,t)=>{for(var n in t||(t={}))bnt.call(t,n)&&sue(e,n,t[n]);if(iue)for(var n of iue(t))wnt.call(t,n)&&sue(e,n,t[n]);return e};function xnt(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var Snt=pt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:Ent({flex:1,width:"100vw",boxSizing:"border-box"},xnt(t,e))})),Tnt=Object.defineProperty,MN=Object.getOwnPropertySymbols,s2e=Object.prototype.hasOwnProperty,o2e=Object.prototype.propertyIsEnumerable,oue=(e,t,n)=>t in e?Tnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cnt=(e,t)=>{for(var n in t||(t={}))s2e.call(t,n)&&oue(e,n,t[n]);if(MN)for(var n of MN(t))o2e.call(t,n)&&oue(e,n,t[n]);return e},Ant=(e,t)=>{var n={};for(var r in e)s2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MN)for(var r of MN(e))t.indexOf(r)<0&&o2e.call(e,r)&&(n[r]=e[r]);return n};const Int={fixed:!0,padding:"md"},vI=C.forwardRef((e,t)=>{const n=ut("AppShell",Int,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y,layout:v}=n,_=Ant(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden","layout"]),{classes:w,cx:E}=Snt({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?j.createElement(j.Fragment,null,r):j.createElement(Dtt,{value:{fixed:u,zIndex:l,layout:v}},j.createElement(dt,Cnt({className:E(w.root,h),ref:t},_),s,j.createElement("div",{className:w.body},i,j.createElement("main",{className:w.main},r),a),o))});vI.displayName="@mantine/core/AppShell";const DP={xs:1,sm:2,md:3,lg:4,xl:5};function MP(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var Ont=pt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:DP})}px ${n} ${MP(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:DP})}px ${n} ${MP(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:DP}),borderTopColor:MP(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:DP}),borderLeftColor:MP(e,r),borderLeftStyle:n}})),Pnt=Object.defineProperty,knt=Object.defineProperties,Rnt=Object.getOwnPropertyDescriptors,LN=Object.getOwnPropertySymbols,a2e=Object.prototype.hasOwnProperty,u2e=Object.prototype.propertyIsEnumerable,aue=(e,t,n)=>t in e?Pnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uue=(e,t)=>{for(var n in t||(t={}))a2e.call(t,n)&&aue(e,n,t[n]);if(LN)for(var n of LN(t))u2e.call(t,n)&&aue(e,n,t[n]);return e},$nt=(e,t)=>knt(e,Rnt(t)),Nnt=(e,t)=>{var n={};for(var r in e)a2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&u2e.call(e,r)&&(n[r]=e[r]);return n};const Dnt={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},HC=C.forwardRef((e,t)=>{const n=ut("Divider",Dnt,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=Nnt(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=Ont({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,w=!(l!=null&&l.color);return j.createElement(dt,uue({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&j.createElement(it,$nt(uue({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:w})}),a))});HC.displayName="@mantine/core/Divider";var Mnt=Object.defineProperty,Lnt=Object.defineProperties,Fnt=Object.getOwnPropertyDescriptors,lue=Object.getOwnPropertySymbols,jnt=Object.prototype.hasOwnProperty,Bnt=Object.prototype.propertyIsEnumerable,cue=(e,t,n)=>t in e?Mnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fue=(e,t)=>{for(var n in t||(t={}))jnt.call(t,n)&&cue(e,n,t[n]);if(lue)for(var n of lue(t))Bnt.call(t,n)&&cue(e,n,t[n]);return e},znt=(e,t)=>Lnt(e,Fnt(t)),Unt=pt((e,{size:t})=>({item:znt(fue({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.fn.radius(),"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":fue({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}})),Vnt=Object.defineProperty,due=Object.getOwnPropertySymbols,Hnt=Object.prototype.hasOwnProperty,qnt=Object.prototype.propertyIsEnumerable,hue=(e,t,n)=>t in e?Vnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wnt=(e,t)=>{for(var n in t||(t={}))Hnt.call(t,n)&&hue(e,n,t[n]);if(due)for(var n of due(t))qnt.call(t,n)&&hue(e,n,t[n]);return e};function OY({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=Unt({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const w=(S,b)=>{const T=typeof i=="function"?i(S.value):!1;return j.createElement(c,Wnt({key:S.value,className:g.item,"data-disabled":S.disabled||void 0,"data-hovered":!S.disabled&&t===b||void 0,"data-selected":!S.disabled&&T||void 0,selected:T,onMouseEnter:()=>a(b),id:`${s}-${b}`,role:"option",tabIndex:-1,"aria-selected":t===b,ref:A=>{l&&l.current&&(l.current[S.value]=A)},onMouseDown:S.disabled?null:A=>{A.preventDefault(),u(S)},disabled:S.disabled},S))};let E=null;if(e.forEach((S,b)=>{S.creatable?_=b:S.group?(E!==S.group&&(E=S.group,v.push(j.createElement("div",{className:g.separator,key:`__mantine-divider-${b}`},j.createElement(HC,{classNames:{label:g.separatorLabel},label:S.group})))),v.push(w(S,b))):y.push(w(S,b))}),h){const S=e[_];y.push(j.createElement("div",{key:NR(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:b=>{b.preventDefault(),u(S)},tabIndex:-1,ref:b=>{l&&l.current&&(l.current[S.value]=b)}},p))}return v.length>0&&y.length>0&&y.unshift(j.createElement("div",{className:g.separator,key:"empty-group-separator"},j.createElement(HC,null))),v.length>0||y.length>0?j.createElement(j.Fragment,null,v,y):j.createElement(it,{size:f,unstyled:m,className:g.nothingFound},d)}OY.displayName="@mantine/core/SelectItems";var Gnt=Object.defineProperty,FN=Object.getOwnPropertySymbols,l2e=Object.prototype.hasOwnProperty,c2e=Object.prototype.propertyIsEnumerable,pue=(e,t,n)=>t in e?Gnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ynt=(e,t)=>{for(var n in t||(t={}))l2e.call(t,n)&&pue(e,n,t[n]);if(FN)for(var n of FN(t))c2e.call(t,n)&&pue(e,n,t[n]);return e},Knt=(e,t)=>{var n={};for(var r in e)l2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&c2e.call(e,r)&&(n[r]=e[r]);return n};const PY=C.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=Knt(n,["label","value"]);return j.createElement("div",Ynt({ref:t},s),r||i)});PY.displayName="@mantine/core/DefaultItem";function Xnt(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function f2e(...e){return t=>e.forEach(n=>Xnt(n,t))}function f_(...e){return C.useCallback(f2e(...e),e)}const d2e=C.forwardRef((e,t)=>{const{children:n,...r}=e,i=C.Children.toArray(n),s=i.find(Jnt);if(s){const o=s.props.children,a=i.map(u=>u===s?C.Children.count(o)>1?C.Children.only(null):C.isValidElement(o)?o.props.children:null:u);return C.createElement(OU,Ni({},r,{ref:t}),C.isValidElement(o)?C.cloneElement(o,void 0,a):null)}return C.createElement(OU,Ni({},r,{ref:t}),n)});d2e.displayName="Slot";const OU=C.forwardRef((e,t)=>{const{children:n,...r}=e;return C.isValidElement(n)?C.cloneElement(n,{...Znt(r,n.props),ref:f2e(t,n.ref)}):C.Children.count(n)>1?C.Children.only(null):null});OU.displayName="SlotClone";const Qnt=({children:e})=>C.createElement(C.Fragment,null,e);function Jnt(e){return C.isValidElement(e)&&e.type===Qnt}function Znt(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const ert=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],_I=ert.reduce((e,t)=>{const n=C.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?d2e:t;return C.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),C.createElement(a,Ni({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),PU=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{};function trt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const bI=e=>{const{present:t,children:n}=e,r=nrt(t),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),s=f_(r.ref,i.ref);return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};bI.displayName="Presence";function nrt(e){const[t,n]=C.useState(),r=C.useRef({}),i=C.useRef(e),s=C.useRef("none"),o=e?"mounted":"unmounted",[a,u]=trt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const l=LP(r.current);s.current=a==="mounted"?l:"none"},[a]),PU(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=LP(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),PU(()=>{if(t){const l=f=>{const h=LP(r.current).includes(f.animationName);f.target===t&&h&&c_.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=LP(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function LP(e){return(e==null?void 0:e.animationName)||"none"}function rrt(e,t=[]){let n=[];function r(s,o){const a=C.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=C.useMemo(()=>p,Object.values(p));return C.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=C.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>C.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,irt(i,...t)]}function irt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function bv(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const srt=C.createContext(void 0);function ort(e){const t=C.useContext(srt);return e||t||"ltr"}function art(e,[t,n]){return Math.min(n,Math.max(t,e))}function r1(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function urt(e,t){return C.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const h2e="ScrollArea",[p2e,iIn]=rrt(h2e),[lrt,$c]=p2e(h2e),crt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=C.useState(null),[l,c]=C.useState(null),[f,d]=C.useState(null),[h,p]=C.useState(null),[m,g]=C.useState(null),[y,v]=C.useState(0),[_,w]=C.useState(0),[E,S]=C.useState(!1),[b,T]=C.useState(!1),A=f_(t,k=>u(k)),I=ort(i);return C.createElement(lrt,{scope:n,type:r,dir:I,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:b,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w},C.createElement(_I.div,Ni({dir:I},o,{ref:A,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),frt="ScrollAreaViewport",drt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=$c(frt,n),o=C.useRef(null),a=f_(t,o,s.onViewportChange);return C.createElement(C.Fragment,null,C.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),C.createElement(_I.div,Ni({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),C.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),Dm="ScrollAreaScrollbar",hrt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$c(Dm,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return C.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?C.createElement(prt,Ni({},r,{ref:t,forceMount:n})):i.type==="scroll"?C.createElement(mrt,Ni({},r,{ref:t,forceMount:n})):i.type==="auto"?C.createElement(m2e,Ni({},r,{ref:t,forceMount:n})):i.type==="always"?C.createElement(kY,Ni({},r,{ref:t})):null}),prt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$c(Dm,e.__scopeScrollArea),[s,o]=C.useState(!1);return C.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),C.createElement(bI,{present:n||s},C.createElement(m2e,Ni({"data-state":s?"visible":"hidden"},r,{ref:t})))}),mrt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$c(Dm,e.__scopeScrollArea),s=e.orientation==="horizontal",o=c4(()=>u("SCROLL_END"),100),[a,u]=urt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),C.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),C.createElement(bI,{present:n||a!=="hidden"},C.createElement(kY,Ni({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:r1(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:r1(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),m2e=C.forwardRef((e,t)=>{const n=$c(Dm,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=C.useState(!1),a=e.orientation==="horizontal",u=c4(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return eE(n.viewport,u),eE(n.content,u),C.createElement(bI,{present:r||s},C.createElement(kY,Ni({"data-state":s?"visible":"hidden"},i,{ref:t})))}),kY=C.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=$c(Dm,e.__scopeScrollArea),s=C.useRef(null),o=C.useRef(0),[a,u]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=_2e(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return xrt(d,o.current,a,h)}return n==="horizontal"?C.createElement(grt,Ni({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=mue(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?C.createElement(yrt,Ni({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=mue(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),grt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=$c(Dm,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=f_(t,u,s.onScrollbarXChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(y2e,Ni({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":l4(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),w2e(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:jN(o.paddingLeft),paddingEnd:jN(o.paddingRight)}})}}))}),yrt=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=$c(Dm,e.__scopeScrollArea),[o,a]=C.useState(),u=C.useRef(null),l=f_(t,u,s.onScrollbarYChange);return C.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),C.createElement(y2e,Ni({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":l4(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),w2e(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:jN(o.paddingTop),paddingEnd:jN(o.paddingBottom)}})}}))}),[vrt,g2e]=p2e(Dm),y2e=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=$c(Dm,n),[p,m]=C.useState(null),g=f_(t,A=>m(A)),y=C.useRef(null),v=C.useRef(""),_=h.viewport,w=r.content-r.viewport,E=bv(c),S=bv(u),b=c4(f,10);function T(A){if(y.current){const I=A.clientX-y.current.left,k=A.clientY-y.current.top;l({x:I,y:k})}}return C.useEffect(()=>{const A=I=>{const k=I.target;(p==null?void 0:p.contains(k))&&E(I,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[_,p,w,E]),C.useEffect(S,[r,S]),eE(p,b),eE(h.content,b),C.createElement(vrt,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:bv(s),onThumbPointerUp:bv(o),onThumbPositionChange:S,onThumbPointerDown:bv(a)},C.createElement(_I.div,Ni({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:r1(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:r1(e.onPointerMove,T),onPointerUp:r1(e.onPointerUp,A=>{const I=A.target;I.hasPointerCapture(A.pointerId)&&I.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),kU="ScrollAreaThumb",_rt=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=g2e(kU,e.__scopeScrollArea);return C.createElement(bI,{present:n||i.hasThumb},C.createElement(brt,Ni({ref:t},r)))}),brt=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=$c(kU,n),o=g2e(kU,n),{onThumbPositionChange:a}=o,u=f_(t,f=>o.onThumbChange(f)),l=C.useRef(),c=c4(()=>{l.current&&(l.current(),l.current=void 0)},100);return C.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=Srt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),C.createElement(_I.div,Ni({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:r1(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:r1(e.onPointerUp,o.onThumbPointerUp)}))}),v2e="ScrollAreaCorner",wrt=C.forwardRef((e,t)=>{const n=$c(v2e,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?C.createElement(Ert,Ni({},e,{ref:t})):null}),Ert=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=$c(v2e,n),[s,o]=C.useState(0),[a,u]=C.useState(0),l=!!(s&&a);return eE(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),eE(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?C.createElement(_I.div,Ni({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function jN(e){return e?parseInt(e,10):0}function _2e(e,t){const n=e/t;return isNaN(n)?0:n}function l4(e){const t=_2e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function xrt(e,t,n,r="ltr"){const i=l4(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return b2e([u,l],f)(e)}function mue(e,t,n="ltr"){const r=l4(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=art(e,u);return b2e([0,o],[0,a])(l)}function b2e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function w2e(e,t){return e>0&&e<t}const Srt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function c4(e,t){const n=bv(e),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function eE(e,t){const n=bv(t);PU(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Trt=crt,Crt=drt,gue=hrt,yue=_rt,Art=wrt;var Irt=pt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,overflow:"hidden","&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:44,minHeight:44}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}})),Ort=Object.defineProperty,Prt=Object.defineProperties,krt=Object.getOwnPropertyDescriptors,BN=Object.getOwnPropertySymbols,E2e=Object.prototype.hasOwnProperty,x2e=Object.prototype.propertyIsEnumerable,vue=(e,t,n)=>t in e?Ort(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,RU=(e,t)=>{for(var n in t||(t={}))E2e.call(t,n)&&vue(e,n,t[n]);if(BN)for(var n of BN(t))x2e.call(t,n)&&vue(e,n,t[n]);return e},S2e=(e,t)=>Prt(e,krt(t)),T2e=(e,t)=>{var n={};for(var r in e)E2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BN)for(var r of BN(e))t.indexOf(r)<0&&x2e.call(e,r)&&(n[r]=e[r]);return n};const C2e={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},f4=C.forwardRef((e,t)=>{const n=ut("ScrollArea",C2e,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,viewportProps:m}=n,g=T2e(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","viewportProps"]),[y,v]=C.useState(!1),_=ps(),{classes:w,cx:E}=Irt({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:y,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return j.createElement(Trt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||_.dir,ref:t,asChild:!0},j.createElement(dt,RU({className:E(w.root,i)},g),j.createElement(Crt,S2e(RU({},m),{className:w.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:S})=>h({x:S.scrollLeft,y:S.scrollTop}):void 0}),r),j.createElement(gue,{orientation:"horizontal",className:w.scrollbar,forceMount:!0,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},j.createElement(yue,{className:w.thumb})),j.createElement(gue,{orientation:"vertical",className:w.scrollbar,forceMount:!0,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},j.createElement(yue,{className:w.thumb})),j.createElement(Art,{className:w.corner})))}),A2e=C.forwardRef((e,t)=>{const n=ut("ScrollAreaAutosize",C2e,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=T2e(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return j.createElement(dt,S2e(RU({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...k0(m)]}),j.createElement(dt,{sx:{display:"flex",flexDirection:"column",flex:1}},j.createElement(f4,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});A2e.displayName="@mantine/core/ScrollAreaAutosize";f4.displayName="@mantine/core/ScrollArea";f4.Autosize=A2e;const I2e=f4;var Rrt=Object.defineProperty,$rt=Object.defineProperties,Nrt=Object.getOwnPropertyDescriptors,zN=Object.getOwnPropertySymbols,O2e=Object.prototype.hasOwnProperty,P2e=Object.prototype.propertyIsEnumerable,_ue=(e,t,n)=>t in e?Rrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bue=(e,t)=>{for(var n in t||(t={}))O2e.call(t,n)&&_ue(e,n,t[n]);if(zN)for(var n of zN(t))P2e.call(t,n)&&_ue(e,n,t[n]);return e},Drt=(e,t)=>$rt(e,Nrt(t)),Mrt=(e,t)=>{var n={};for(var r in e)O2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zN)for(var r of zN(e))t.indexOf(r)<0&&P2e.call(e,r)&&(n[r]=e[r]);return n};const d4=C.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Mrt(n,["style"]);return j.createElement(I2e,Drt(bue({},i),{style:bue({width:"100%"},r),viewportRef:t}),i.children)});d4.displayName="@mantine/core/SelectScrollArea";var Lrt=pt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const yl=Math.min,ca=Math.max,UN=Math.round,FP=Math.floor,R0=e=>({x:e,y:e}),Frt={left:"right",right:"left",bottom:"top",top:"bottom"},jrt={start:"end",end:"start"};function $U(e,t,n){return ca(e,yl(t,n))}function hm(e,t){return typeof e=="function"?e(t):e}function Df(e){return e.split("-")[0]}function gx(e){return e.split("-")[1]}function RY(e){return e==="x"?"y":"x"}function $Y(e){return e==="y"?"height":"width"}function d_(e){return["top","bottom"].includes(Df(e))?"y":"x"}function NY(e){return RY(d_(e))}function Brt(e,t,n){n===void 0&&(n=!1);const r=gx(e),i=NY(e),s=$Y(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=VN(o)),[o,VN(o)]}function zrt(e){const t=VN(e);return[NU(e),t,NU(t)]}function NU(e){return e.replace(/start|end/g,t=>jrt[t])}function Urt(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Vrt(e,t,n,r){const i=gx(e);let s=Urt(Df(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(NU)))),s}function VN(e){return e.replace(/left|right|bottom|top/g,t=>Frt[t])}function Hrt(e){return{top:0,right:0,bottom:0,left:0,...e}}function DY(e){return typeof e!="number"?Hrt(e):{top:e,right:e,bottom:e,left:e}}function tE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function wue(e,t,n){let{reference:r,floating:i}=e;const s=d_(t),o=NY(t),a=$Y(o),u=Df(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(gx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const qrt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=wue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=wue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function MY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=hm(t,e),p=DY(h),g=a[d?f==="floating"?"reference":"floating":f],y=tE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},E=tE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const Wrt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=hm(e,t)||{};if(l==null)return{};const f=DY(c),d={x:n,y:r},h=NY(i),p=$Y(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let b=S?S[_]:0;(!b||!await(o.isElement==null?void 0:o.isElement(S)))&&(b=a.floating[_]||s.floating[p]);const T=w/2-E/2,A=b/2-m[p]/2-1,I=yl(f[y],A),k=yl(f[v],A),$=I,P=b-m[p]-k,N=b/2-m[p]/2+T,F=$U($,N,P),z=!u.arrow&&gx(i)!=null&&N!==F&&s.reference[p]/2-(N<$?I:k)-m[p]/2<0,W=z?N<$?N-$:N-P:0;return{[h]:d[h]+W,data:{[h]:F,centerOffset:N-F-W,...z&&{alignmentOffset:W}},reset:z}}}),Grt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=hm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Df(i),v=Df(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[VN(a)]:zrt(a));!d&&p!=="none"&&w.push(...Vrt(a,m,p,_));const E=[a,...w],S=await MY(t,g),b=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&b.push(S[y]),f){const $=Brt(i,o,_);b.push(S[$[0]],S[$[1]])}if(T=[...T,{placement:i,overflows:b}],!b.every($=>$<=0)){var A,I;const $=(((A=s.flip)==null?void 0:A.index)||0)+1,P=E[$];if(P)return{data:{index:$,overflows:T},reset:{placement:P}};let N=(I=T.filter(F=>F.overflows[0]<=0).sort((F,z)=>F.overflows[1]-z.overflows[1])[0])==null?void 0:I.placement;if(!N)switch(h){case"bestFit":{var k;const F=(k=T.map(z=>[z.placement,z.overflows.filter(W=>W>0).reduce((W,V)=>W+V,0)]).sort((z,W)=>z[1]-W[1])[0])==null?void 0:k[0];F&&(N=F);break}case"initialPlacement":N=a;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function k2e(e){const t=yl(...e.map(s=>s.left)),n=yl(...e.map(s=>s.top)),r=ca(...e.map(s=>s.right)),i=ca(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Yrt(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>tE(k2e(i)))}const Krt=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=hm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Yrt(c),d=tE(k2e(c)),h=DY(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(d_(n)==="y"){const I=f[0],k=f[f.length-1],$=Df(n)==="top",P=I.top,N=k.bottom,F=$?I.left:k.left,z=$?I.right:k.right,W=z-F,V=N-P;return{top:P,bottom:N,left:F,right:z,width:W,height:V,x:F,y:P}}const g=Df(n)==="left",y=ca(...f.map(I=>I.right)),v=yl(...f.map(I=>I.left)),_=f.filter(I=>g?I.left===v:I.right===y),w=_[0].top,E=_[_.length-1].bottom,S=v,b=y,T=b-S,A=E-w;return{top:w,bottom:E,left:S,right:b,width:T,height:A,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Xrt(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Df(n),a=gx(n),u=d_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=hm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Qrt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Xrt(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Jrt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=hm(e,t),l={x:n,y:r},c=await MY(t,u),f=d_(Df(i)),d=RY(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=$U(v,h,_)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=$U(v,p,_)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Zrt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=hm(e,t),c={x:n,y:r},f=d_(i),d=RY(f);let h=c[d],p=c[f];const m=hm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const _=d==="y"?"height":"width",w=s.reference[d]-s.floating[_]+g.mainAxis,E=s.reference[d]+s.reference[_]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const _=d==="y"?"width":"height",w=["top","left"].includes(Df(i)),E=s.reference[f]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[_]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},eit=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=hm(e,t),u=await MY(t,a),l=Df(n),c=gx(n),f=d_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=yl(h-u[p],g),_=yl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=_;if(f?S=c||w?yl(_,y):y:E=c||w?yl(v,g):g,w&&!c){const T=ca(u.left,0),A=ca(u.right,0),I=ca(u.top,0),k=ca(u.bottom,0);f?S=d-2*(T!==0||A!==0?T+A:ca(u.left,u.right)):E=h-2*(I!==0||k!==0?I+k:ca(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const b=await i.getDimensions(s.floating);return d!==b.width||h!==b.height?{reset:{rects:!0}}:{}}}};function yx(e){return R2e(e)?(e.nodeName||"").toLowerCase():"#document"}function Cl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mm(e){var t;return(t=(R2e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function R2e(e){return e instanceof Node||e instanceof Cl(e).Node}function mh(e){return e instanceof Element||e instanceof Cl(e).Element}function gh(e){return e instanceof HTMLElement||e instanceof Cl(e).HTMLElement}function Eue(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Cl(e).ShadowRoot}function wI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Mf(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function tit(e){return["table","td","th"].includes(yx(e))}function LY(e){const t=FY(),n=Mf(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function nit(e){let t=$0(e);for(;gh(t)&&!nE(t);){if(LY(t))return t;t=$0(t)}return null}function FY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nE(e){return["html","body","#document"].includes(yx(e))}function Mf(e){return Cl(e).getComputedStyle(e)}function h4(e){return mh(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function $0(e){if(yx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Eue(e)&&e.host||Mm(e);return Eue(t)?t.host:t}function $2e(e){const t=$0(e);return nE(t)?e.ownerDocument?e.ownerDocument.body:e.body:gh(t)&&wI(t)?t:$2e(t)}function Wp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=$2e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Cl(i);return s?t.concat(o,o.visualViewport||[],wI(i)?i:[],o.frameElement&&n?Wp(o.frameElement):[]):t.concat(i,Wp(i,[],n))}function N2e(e){const t=Mf(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=gh(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=UN(n)!==s||UN(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function jY(e){return mh(e)?e:e.contextElement}function hw(e){const t=jY(e);if(!gh(t))return R0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=N2e(t);let o=(s?UN(n.width):n.width)/r,a=(s?UN(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rit=R0(0);function D2e(e){const t=Cl(e);return!FY()||!t.visualViewport?rit:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function iit(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Cl(e)?!1:t}function S1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=jY(e);let o=R0(1);t&&(r?mh(r)&&(o=hw(r)):o=hw(e));const a=iit(s,n,r)?D2e(s):R0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Cl(s),h=r&&mh(r)?Cl(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=hw(m),y=m.getBoundingClientRect(),v=Mf(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=_,l+=w,p=Cl(m),m=p.frameElement}}return tE({width:c,height:f,x:u,y:l})}const sit=[":popover-open",":modal"];function BY(e){return sit.some(t=>{try{return e.matches(t)}catch{return!1}})}function oit(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Mm(r),a=t?BY(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=R0(1);const c=R0(0),f=gh(r);if((f||!f&&!s)&&((yx(r)!=="body"||wI(o))&&(u=h4(r)),gh(r))){const d=S1(r);l=hw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function ait(e){return Array.from(e.getClientRects())}function M2e(e){return S1(Mm(e)).left+h4(e).scrollLeft}function uit(e){const t=Mm(e),n=h4(e),r=e.ownerDocument.body,i=ca(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ca(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+M2e(e);const a=-n.scrollTop;return Mf(r).direction==="rtl"&&(o+=ca(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function lit(e,t){const n=Cl(e),r=Mm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=FY();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function cit(e,t){const n=S1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=gh(e)?hw(e):R0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function xue(e,t,n){let r;if(t==="viewport")r=lit(e,n);else if(t==="document")r=uit(Mm(e));else if(mh(t))r=cit(t,n);else{const i=D2e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return tE(r)}function L2e(e,t){const n=$0(e);return n===t||!mh(n)||nE(n)?!1:Mf(n).position==="fixed"||L2e(n,t)}function fit(e,t){const n=t.get(e);if(n)return n;let r=Wp(e,[],!1).filter(a=>mh(a)&&yx(a)!=="body"),i=null;const s=Mf(e).position==="fixed";let o=s?$0(e):e;for(;mh(o)&&!nE(o);){const a=Mf(o),u=LY(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||wI(o)&&!u&&L2e(e,o))?r=r.filter(c=>c!==o):i=a,o=$0(o)}return t.set(e,r),r}function dit(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?BY(t)?[]:fit(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=xue(t,c,i);return l.top=ca(f.top,l.top),l.right=yl(f.right,l.right),l.bottom=yl(f.bottom,l.bottom),l.left=ca(f.left,l.left),l},xue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function hit(e){const{width:t,height:n}=N2e(e);return{width:t,height:n}}function pit(e,t,n){const r=gh(t),i=Mm(t),s=n==="fixed",o=S1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=R0(0);if(r||!r&&!s)if((yx(t)!=="body"||wI(i))&&(a=h4(t)),r){const f=S1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=M2e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Xj(e){return Mf(e).position==="static"}function Sue(e,t){return!gh(e)||Mf(e).position==="fixed"?null:t?t(e):e.offsetParent}function F2e(e,t){const n=Cl(e);if(BY(e))return n;if(!gh(e)){let i=$0(e);for(;i&&!nE(i);){if(mh(i)&&!Xj(i))return i;i=$0(i)}return n}let r=Sue(e,t);for(;r&&tit(r)&&Xj(r);)r=Sue(r,t);return r&&nE(r)&&Xj(r)&&!LY(r)?n:r||nit(e)||n}const mit=async function(e){const t=this.getOffsetParent||F2e,n=this.getDimensions,r=await n(e.floating);return{reference:pit(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function git(e){return Mf(e).direction==="rtl"}const yit={convertOffsetParentRelativeRectToViewportRelativeRect:oit,getDocumentElement:Mm,getClippingRect:dit,getOffsetParent:F2e,getElementRects:mit,getClientRects:ait,getDimensions:hit,getScale:hw,isElement:mh,isRTL:git};function vit(e,t){let n=null,r;const i=Mm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=FP(c),p=FP(i.clientWidth-(l+f)),m=FP(i.clientHeight-(c+d)),g=FP(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ca(0,yl(1,u))||1};let _=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!_)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function _it(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=jY(e),c=i||s?[...l?Wp(l):[],...Wp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?vit(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?S1(e):null;u&&g();function g(){const y=S1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const j2e=Qrt,zY=Jrt,B2e=Grt,bit=eit,Tue=Wrt,z2e=Krt,wit=Zrt,Eit=(e,t,n)=>{const r=new Map,i={platform:yit,...n},s={...i.platform,_c:r};return qrt(e,t,{...i,platform:s})},U2e=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?Tue({element:t.current,padding:n}).fn(i):{}:t?Tue({element:t,padding:n}).fn(i):{}}}};var DR=typeof document<"u"?C.useLayoutEffect:C.useEffect;function HN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!HN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!HN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Cue(e){const t=C.useRef(e);return DR(()=>{t.current=e}),t}function xit(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,whileElementsMounted:s,open:o}=e,[a,u]=C.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[l,c]=C.useState(r);HN(l,r)||c(r);const f=C.useRef(null),d=C.useRef(null),h=C.useRef(a),p=Cue(s),m=Cue(i),[g,y]=C.useState(null),[v,_]=C.useState(null),w=C.useCallback(I=>{f.current!==I&&(f.current=I,y(I))},[]),E=C.useCallback(I=>{d.current!==I&&(d.current=I,_(I))},[]),S=C.useCallback(()=>{if(!f.current||!d.current)return;const I={placement:t,strategy:n,middleware:l};m.current&&(I.platform=m.current),Eit(f.current,d.current,I).then(k=>{const $={...k,isPositioned:!0};b.current&&!HN(h.current,$)&&(h.current=$,c_.flushSync(()=>{u($)}))})},[l,t,n,m]);DR(()=>{o===!1&&h.current.isPositioned&&(h.current.isPositioned=!1,u(I=>({...I,isPositioned:!1})))},[o]);const b=C.useRef(!1);DR(()=>(b.current=!0,()=>{b.current=!1}),[]),DR(()=>{if(g&&v){if(p.current)return p.current(g,v,S);S()}},[g,v,S,p]);const T=C.useMemo(()=>({reference:f,floating:d,setReference:w,setFloating:E}),[w,E]),A=C.useMemo(()=>({reference:g,floating:v}),[g,v]);return C.useMemo(()=>({...a,update:S,refs:T,elements:A,reference:w,floating:E}),[a,S,T,A,w,E])}var rE=typeof document<"u"?C.useLayoutEffect:C.useEffect;let Qj=!1,Sit=0;const Aue=()=>"floating-ui-"+Sit++;function Tit(){const[e,t]=C.useState(()=>Qj?Aue():void 0);return rE(()=>{e==null&&t(Aue())},[]),C.useEffect(()=>{Qj||(Qj=!0)},[]),e}const Cit=wC.useId,Iue=Cit||Tit;function Ait(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}const Iit=C.createContext(null),Oit=C.createContext(null),V2e=()=>{var e;return((e=C.useContext(Iit))==null?void 0:e.id)||null},UY=()=>C.useContext(Oit);function qg(e){return(e==null?void 0:e.ownerDocument)||document}function Pit(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function kit(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function VY(e){return qg(e).defaultView||window}function qd(e){return e?e instanceof VY(e).Element:!1}function H2e(e){return e?e instanceof VY(e).HTMLElement:!1}function Rit(e){if(typeof ShadowRoot>"u")return!1;const t=VY(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function $it(e){if(e.mozInputSource===0&&e.isTrusted)return!0;const t=/Android/i;return(t.test(Pit())||t.test(kit()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Nit(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function q2e(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Oue(e){const t=C.useRef(e);return rE(()=>{t.current=e}),t}const Pue="data-floating-ui-safe-polygon";function MR(e,t,n){return n&&!q2e(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}const Dit=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,elements:{domReference:d,floating:h},refs:p}=e,m=UY(),g=V2e(),y=Oue(i),v=Oue(r),_=C.useRef(),w=C.useRef(),E=C.useRef(),S=C.useRef(),b=C.useRef(!0),T=C.useRef(!1),A=C.useRef(()=>{}),I=C.useCallback(()=>{var N;const F=(N=c.current.openEvent)==null?void 0:N.type;return(F==null?void 0:F.includes("mouse"))&&F!=="mousedown"},[c]);C.useEffect(()=>{if(!n)return;function N(){clearTimeout(w.current),clearTimeout(S.current),b.current=!0}return f.on("dismiss",N),()=>{f.off("dismiss",N)}},[n,f]),C.useEffect(()=>{if(!n||!y.current||!u)return;function N(){I()&&l(!1)}const F=qg(h).documentElement;return F.addEventListener("mouseleave",N),()=>{F.removeEventListener("mouseleave",N)}},[h,u,l,n,y,c,I]);const k=C.useCallback(function(N){N===void 0&&(N=!0);const F=MR(v.current,"close",_.current);F&&!E.current?(clearTimeout(w.current),w.current=setTimeout(()=>l(!1),F)):N&&(clearTimeout(w.current),l(!1))},[v,l]),$=C.useCallback(()=>{A.current(),E.current=void 0},[]),P=C.useCallback(()=>{if(T.current){const N=qg(p.floating.current).body;N.style.pointerEvents="",N.removeAttribute(Pue),T.current=!1}},[p]);return C.useEffect(()=>{if(!n)return;function N(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function F(V){if(clearTimeout(w.current),b.current=!1,s&&!q2e(_.current)||o>0&&MR(v.current,"open")===0)return;c.current.openEvent=V;const G=MR(v.current,"open",_.current);G?w.current=setTimeout(()=>{l(!0)},G):l(!0)}function z(V){if(N())return;A.current();const G=qg(h);if(clearTimeout(S.current),y.current){u||clearTimeout(w.current),E.current=y.current({...e,tree:m,x:V.clientX,y:V.clientY,onClose(){P(),$(),k()}});const M=E.current;G.addEventListener("mousemove",M),A.current=()=>{G.removeEventListener("mousemove",M)};return}k()}function W(V){N()||y.current==null||y.current({...e,tree:m,x:V.clientX,y:V.clientY,onClose(){P(),$(),k()}})(V)}if(qd(d)){const V=d;return u&&V.addEventListener("mouseleave",W),h==null||h.addEventListener("mouseleave",W),a&&V.addEventListener("mousemove",F,{once:!0}),V.addEventListener("mouseenter",F),V.addEventListener("mouseleave",z),()=>{u&&V.removeEventListener("mouseleave",W),h==null||h.removeEventListener("mouseleave",W),a&&V.removeEventListener("mousemove",F),V.removeEventListener("mouseenter",F),V.removeEventListener("mouseleave",z)}}},[d,h,n,e,s,o,a,k,$,P,l,u,m,v,y,c]),rE(()=>{var N;if(n&&u&&(N=y.current)!=null&&N.__options.blockPointerEvents&&I()){const W=qg(h).body;if(W.setAttribute(Pue,""),W.style.pointerEvents="none",T.current=!0,qd(d)&&h){var F,z;const V=d,G=m==null||(F=m.nodesRef.current.find(M=>M.id===g))==null||(z=F.context)==null?void 0:z.elements.floating;return G&&(G.style.pointerEvents=""),V.style.pointerEvents="auto",h.style.pointerEvents="auto",()=>{V.style.pointerEvents="",h.style.pointerEvents=""}}}},[n,u,g,h,d,m,y,c,I]),rE(()=>{u||(_.current=void 0,$(),P())},[u,$,P]),C.useEffect(()=>()=>{$(),clearTimeout(w.current),clearTimeout(S.current),P()},[n,$,P]),C.useMemo(()=>{if(!n)return{};function N(F){_.current=F.pointerType}return{reference:{onPointerDown:N,onPointerEnter:N,onMouseMove(){u||o===0||(clearTimeout(S.current),S.current=setTimeout(()=>{b.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(){f.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),k(!1)}}}},[f,n,o,u,l,k])},W2e=C.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),G2e=()=>C.useContext(W2e),Mit=e=>{let{children:t,delay:n,timeoutMs:r=0}=e;const[i,s]=C.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=C.useRef(null),a=C.useCallback(u=>{s({currentId:u})},[]);return rE(()=>{i.currentId?o.current===null?o.current=i.currentId:s({isInstantPhase:!0}):(s({isInstantPhase:!1}),o.current=null)},[i.currentId]),C.createElement(W2e.Provider,{value:C.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,s,a])},t)},Lit=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,setCurrentId:o,initialDelay:a,setState:u,timeoutMs:l}=G2e();C.useEffect(()=>{s&&(u({delay:{open:1,close:MR(a,"close")}}),s!==i&&r(!1))},[i,r,u,s,a]),C.useEffect(()=>{function c(){r(!1),u({delay:a,currentId:null})}if(!n&&s===i)if(l){const f=window.setTimeout(c,l);return()=>{clearTimeout(f)}}else c()},[n,u,s,i,r,a,l]),C.useEffect(()=>{n&&o(i)},[n,o,i])};function Fit(e){let t=e.activeElement;for(;((n=t)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;t=t.shadowRoot.activeElement}return t}function kue(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Rit(n)){let r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}function Jj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)})||[],r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})})||[],n=n.concat(r);return n}function jit(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Bit=wC.useInsertionEffect,zit=Bit||(e=>e());function Y2e(e){const t=C.useRef(()=>{});return zit(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function LR(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const Uit={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Vit={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Hit=function(e){var t,n;return e===void 0&&(e=!0),{escapeKeyBubbles:typeof e=="boolean"?e:(t=e.escapeKey)!=null?t:!0,outsidePressBubbles:typeof e=="boolean"?e:(n=e.outsidePress)!=null?n:!0}},qit=function(e,t){let{open:n,onOpenChange:r,events:i,nodeId:s,elements:{reference:o,domReference:a,floating:u},dataRef:l}=e,{enabled:c=!0,escapeKey:f=!0,outsidePress:d=!0,outsidePressEvent:h="pointerdown",referencePress:p=!1,referencePressEvent:m="pointerdown",ancestorScroll:g=!1,bubbles:y=!0}=t===void 0?{}:t;const v=UY(),_=V2e()!=null,w=Y2e(typeof d=="function"?d:()=>!1),E=typeof d=="function"?w:d,S=C.useRef(!1),{escapeKeyBubbles:b,outsidePressBubbles:T}=Hit(y);return C.useEffect(()=>{if(!n||!c)return;l.current.__escapeKeyBubbles=b,l.current.__outsidePressBubbles=T;function A(N){if(N.key==="Escape"){const F=v?Jj(v.nodesRef.current,s):[];if(F.length>0){let z=!0;if(F.forEach(W=>{var V;if((V=W.context)!=null&&V.open&&!W.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}i.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1)}}function I(N){const F=S.current;if(S.current=!1,F||typeof E=="function"&&!E(N))return;const z=jit(N);if(H2e(z)&&u){const G=u.ownerDocument.defaultView||window,M=z.scrollWidth>z.clientWidth,H=z.scrollHeight>z.clientHeight;let Y=H&&N.offsetX>z.clientWidth;if(H&&G.getComputedStyle(z).direction==="rtl"&&(Y=N.offsetX<=z.offsetWidth-z.clientWidth),Y||M&&N.offsetY>z.clientHeight)return}const W=v&&Jj(v.nodesRef.current,s).some(G=>{var M;return LR(N,(M=G.context)==null?void 0:M.elements.floating)});if(LR(N,u)||LR(N,a)||W)return;const V=v?Jj(v.nodesRef.current,s):[];if(V.length>0){let G=!0;if(V.forEach(M=>{var H;if((H=M.context)!=null&&H.open&&!M.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}i.emit("dismiss",{type:"outsidePress",data:{returnFocus:_?{preventScroll:!0}:$it(N)||Nit(N)}}),r(!1)}function k(){r(!1)}const $=qg(u);f&&$.addEventListener("keydown",A),E&&$.addEventListener(h,I);let P=[];return g&&(qd(a)&&(P=Wp(a)),qd(u)&&(P=P.concat(Wp(u))),!qd(o)&&o&&o.contextElement&&(P=P.concat(Wp(o.contextElement)))),P=P.filter(N=>{var F;return N!==((F=$.defaultView)==null?void 0:F.visualViewport)}),P.forEach(N=>{N.addEventListener("scroll",k,{passive:!0})}),()=>{f&&$.removeEventListener("keydown",A),E&&$.removeEventListener(h,I),P.forEach(N=>{N.removeEventListener("scroll",k)})}},[l,u,a,o,f,E,h,i,v,s,n,r,g,c,b,T,_]),C.useEffect(()=>{S.current=!1},[E,h]),C.useMemo(()=>c?{reference:{[Uit[m]]:()=>{p&&(i.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1))}},floating:{[Vit[h]]:()=>{S.current=!0}}}:{},[c,i,p,h,m,r])},Wit=function(e,t){let{open:n,onOpenChange:r,dataRef:i,events:s,refs:o,elements:{floating:a,domReference:u}}=e,{enabled:l=!0,keyboardOnly:c=!0}=t===void 0?{}:t;const f=C.useRef(""),d=C.useRef(!1),h=C.useRef();return C.useEffect(()=>{if(!l)return;const m=qg(a).defaultView||window;function g(){!n&&H2e(u)&&u===Fit(qg(u))&&(d.current=!0)}return m.addEventListener("blur",g),()=>{m.removeEventListener("blur",g)}},[a,u,n,l]),C.useEffect(()=>{if(!l)return;function p(m){(m.type==="referencePress"||m.type==="escapeKey")&&(d.current=!0)}return s.on("dismiss",p),()=>{s.off("dismiss",p)}},[s,l]),C.useEffect(()=>()=>{clearTimeout(h.current)},[]),C.useMemo(()=>l?{reference:{onPointerDown(p){let{pointerType:m}=p;f.current=m,d.current=!!(m&&c)},onMouseLeave(){d.current=!1},onFocus(p){var m;d.current||p.type==="focus"&&((m=i.current.openEvent)==null?void 0:m.type)==="mousedown"&&i.current.openEvent&&LR(i.current.openEvent,u)||(i.current.openEvent=p.nativeEvent,r(!0))},onBlur(p){d.current=!1;const m=p.relatedTarget,g=qd(m)&&m.hasAttribute("data-floating-ui-focus-guard")&&m.getAttribute("data-type")==="outside";h.current=setTimeout(()=>{kue(o.floating.current,m)||kue(u,m)||g||r(!1)})}}}:{},[l,c,u,o,i,r])},Git=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=Iue(),o=Iue();return C.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function HY(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:n,nodeId:r}=e,i=xit(e),s=UY(),o=C.useRef(null),a=C.useRef({}),u=C.useState(()=>Ait())[0],[l,c]=C.useState(null),f=C.useCallback(y=>{const v=qd(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),contextElement:y}:y;i.refs.setReference(v)},[i.refs]),d=C.useCallback(y=>{(qd(y)||y===null)&&(o.current=y,c(y)),(qd(i.refs.reference.current)||i.refs.reference.current===null||y!==null&&!qd(y))&&i.refs.setReference(y)},[i.refs]),h=C.useMemo(()=>({...i.refs,setReference:d,setPositionReference:f,domReference:o}),[i.refs,d,f]),p=C.useMemo(()=>({...i.elements,domReference:l}),[i.elements,l]),m=Y2e(n),g=C.useMemo(()=>({...i,refs:h,elements:p,dataRef:a,nodeId:r,events:u,open:t,onOpenChange:m}),[i,r,u,t,m,h,p]);return rE(()=>{const y=s==null?void 0:s.nodesRef.current.find(v=>v.id===r);y&&(y.context=g)}),C.useMemo(()=>({...i,context:g,refs:h,reference:d,positionReference:f}),[i,h,g,d,f])}function Zj(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const Yit=function(e){e===void 0&&(e=[]);const t=e,n=C.useCallback(s=>Zj(s,e,"reference"),t),r=C.useCallback(s=>Zj(s,e,"floating"),t),i=C.useCallback(s=>Zj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return C.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function K2e({opened:e,floating:t,positionDependencies:n}){const[r,i]=C.useState(0);C.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return _it(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,r]),cs(()=>{t.update()},n),cs(()=>{i(s=>s+1)},[e])}function Kit(e){const t=[j2e(e.offset)];return e.middlewares.shift&&t.push(zY({limiter:wit()})),e.middlewares.flip&&t.push(B2e()),e.middlewares.inline&&t.push(z2e()),t.push(U2e({element:e.arrowRef,padding:e.arrowOffset})),t}function Xit(e){const[t,n]=Fo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=HY({placement:e.position,middleware:[...Kit(e),...e.width==="target"?[bit({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return K2e({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),cs(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const X2e={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Qit,Q2e]=hI(X2e.context);var Jit=Object.defineProperty,Zit=Object.defineProperties,est=Object.getOwnPropertyDescriptors,qN=Object.getOwnPropertySymbols,J2e=Object.prototype.hasOwnProperty,Z2e=Object.prototype.propertyIsEnumerable,Rue=(e,t,n)=>t in e?Jit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jP=(e,t)=>{for(var n in t||(t={}))J2e.call(t,n)&&Rue(e,n,t[n]);if(qN)for(var n of qN(t))Z2e.call(t,n)&&Rue(e,n,t[n]);return e},tst=(e,t)=>Zit(e,est(t)),nst=(e,t)=>{var n={};for(var r in e)J2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&Z2e.call(e,r)&&(n[r]=e[r]);return n};const rst={refProp:"ref",popupType:"dialog"},eCe=C.forwardRef((e,t)=>{const n=ut("PopoverTarget",rst,e),{children:r,refProp:i,popupType:s}=n,o=nst(n,["children","refProp","popupType"]);if(!pI(r))throw new Error(X2e.children);const a=o,u=Q2e(),l=As(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return C.cloneElement(r,jP(tst(jP(jP(jP({},a),c),u.targetProps),{className:OSe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});eCe.displayName="@mantine/core/PopoverTarget";var ist=pt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}})),sst=Object.defineProperty,$ue=Object.getOwnPropertySymbols,ost=Object.prototype.hasOwnProperty,ast=Object.prototype.propertyIsEnumerable,Nue=(e,t,n)=>t in e?sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K_=(e,t)=>{for(var n in t||(t={}))ost.call(t,n)&&Nue(e,n,t[n]);if($ue)for(var n of $ue(t))ast.call(t,n)&&Nue(e,n,t[n]);return e};const Due={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function tCe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in kP?K_(K_(K_({transitionProperty:kP[e].transitionProperty},i),kP[e].common),kP[e][Due[t]]):null:K_(K_(K_({transitionProperty:e.transitionProperty},i),e.common),e[Due[t]])}function nCe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ps(),l=a4(),c=u.respectReducedMotion?l:!1,[f,d]=C.useState(r?"entered":"exited");let h=c?0:e;const p=C.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return cs(()=>{m(r)},[r]),C.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function EI({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=nCe({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?j.createElement(j.Fragment,null,i({})):null:f==="exited"?null:j.createElement(j.Fragment,null,i(tCe({transition:e,duration:c,state:f,timingFunction:d})))}EI.displayName="@mantine/core/Transition";function rCe({children:e,active:t=!0,refProp:n="ref"}){const r=CY(t),i=As(r,e==null?void 0:e.ref);return pI(e)?C.cloneElement(e,{[n]:i}):e}rCe.displayName="@mantine/core/FocusTrap";var ust=Object.defineProperty,lst=Object.defineProperties,cst=Object.getOwnPropertyDescriptors,Mue=Object.getOwnPropertySymbols,fst=Object.prototype.hasOwnProperty,dst=Object.prototype.propertyIsEnumerable,Lue=(e,t,n)=>t in e?ust(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ig=(e,t)=>{for(var n in t||(t={}))fst.call(t,n)&&Lue(e,n,t[n]);if(Mue)for(var n of Mue(t))dst.call(t,n)&&Lue(e,n,t[n]);return e},BP=(e,t)=>lst(e,cst(t));function Fue(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function jue(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const hst={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function pst({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowPosition:s,arrowX:o,arrowY:a,dir:u}){const[l,c="center"]=e.split("-"),f={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[hst[l]]:i},d=t?-n/2-1:-n/2;return l==="left"?BP(ig(ig({},f),Fue(c,a,r,s)),{right:d,borderLeft:0,borderBottom:0}):l==="right"?BP(ig(ig({},f),Fue(c,a,r,s)),{left:d,borderRight:0,borderTop:0}):l==="top"?BP(ig(ig({},f),jue(c,o,r,s,u)),{bottom:d,borderTop:0,borderLeft:0}):l==="bottom"?BP(ig(ig({},f),jue(c,o,r,s,u)),{top:d,borderBottom:0,borderRight:0}):{}}var mst=Object.defineProperty,gst=Object.defineProperties,yst=Object.getOwnPropertyDescriptors,WN=Object.getOwnPropertySymbols,iCe=Object.prototype.hasOwnProperty,sCe=Object.prototype.propertyIsEnumerable,Bue=(e,t,n)=>t in e?mst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vst=(e,t)=>{for(var n in t||(t={}))iCe.call(t,n)&&Bue(e,n,t[n]);if(WN)for(var n of WN(t))sCe.call(t,n)&&Bue(e,n,t[n]);return e},_st=(e,t)=>gst(e,yst(t)),bst=(e,t)=>{var n={};for(var r in e)iCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&sCe.call(e,r)&&(n[r]=e[r]);return n};const qY=C.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,arrowPosition:u,visible:l,arrowX:c,arrowY:f}=n,d=bst(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","arrowPosition","visible","arrowX","arrowY"]);const h=ps();return l?j.createElement("div",_st(vst({},d),{ref:t,style:pst({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,arrowPosition:u,dir:h.dir,arrowX:c,arrowY:f})})):null});qY.displayName="@mantine/core/FloatingArrow";var wst=Object.defineProperty,Est=Object.defineProperties,xst=Object.getOwnPropertyDescriptors,GN=Object.getOwnPropertySymbols,oCe=Object.prototype.hasOwnProperty,aCe=Object.prototype.propertyIsEnumerable,zue=(e,t,n)=>t in e?wst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zP=(e,t)=>{for(var n in t||(t={}))oCe.call(t,n)&&zue(e,n,t[n]);if(GN)for(var n of GN(t))aCe.call(t,n)&&zue(e,n,t[n]);return e},Uue=(e,t)=>Est(e,xst(t)),Sst=(e,t)=>{var n={};for(var r in e)oCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&aCe.call(e,r)&&(n[r]=e[r]);return n};const Tst={};function uCe(e){const t=ut("PopoverDropdown",Tst,e),{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=Sst(t,["style","className","children","onKeyDownCapture"]),a=Q2e(),{classes:u,cx:l}=ist({radius:a.radius,shadow:a.shadow},{name:a.__staticSelector,classNames:a.classNames,styles:a.styles,unstyled:a.unstyled}),c=TY({opened:a.opened,shouldReturnFocus:a.returnFocus}),f=a.withRoles?{"aria-labelledby":a.getTargetId(),id:a.getDropdownId(),role:"dialog"}:{};return a.disabled?null:j.createElement(mx,{withinPortal:a.withinPortal},j.createElement(EI,{mounted:a.opened,transition:a.transition,duration:a.transitionDuration,exitDuration:typeof a.exitTransitionDuration=="number"?a.exitTransitionDuration:a.transitionDuration},d=>{var h,p;return j.createElement(rCe,{active:a.trapFocus},j.createElement(dt,zP(Uue(zP({},f),{tabIndex:-1,key:a.placement,ref:a.floating,style:Uue(zP(zP({},n),d),{zIndex:a.zIndex,top:(h=a.y)!=null?h:0,left:(p=a.x)!=null?p:0,width:a.width==="target"?void 0:a.width}),className:l(u.dropdown,r),onKeyDownCapture:ZXe(a.onClose,{active:a.closeOnEscape,onTrigger:c,onKeyDown:s}),"data-position":a.placement}),o),i,j.createElement(qY,{ref:a.arrowRef,arrowX:a.arrowX,arrowY:a.arrowY,visible:a.withArrow,withBorder:!0,position:a.placement,arrowSize:a.arrowSize,arrowRadius:a.arrowRadius,arrowOffset:a.arrowOffset,arrowPosition:a.arrowPosition,className:u.arrow})))}))}uCe.displayName="@mantine/core/PopoverDropdown";function lCe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var Vue=Object.getOwnPropertySymbols,Cst=Object.prototype.hasOwnProperty,Ast=Object.prototype.propertyIsEnumerable,Ist=(e,t)=>{var n={};for(var r in e)Cst.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Vue)for(var r of Vue(e))t.indexOf(r)<0&&Ast.call(e,r)&&(n[r]=e[r]);return n};const Ost={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Rc("popover"),__staticSelector:"Popover",width:"max-content"};function cr(e){var t,n,r,i,s,o;const a=C.useRef(null),u=ut("Popover",Ost,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:b,unstyled:T,classNames:A,styles:I,closeOnClickOutside:k,withinPortal:$,closeOnEscape:P,clickOutsideEvents:N,trapFocus:F,onClose:z,onOpen:W,onChange:V,zIndex:G,radius:M,shadow:H,id:Y,defaultOpened:L,exitTransitionDuration:B,__staticSelector:q,withRoles:Z,disabled:ue,returnFocus:he}=u,fe=Ist(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[me,_e]=C.useState(null),[ge,Be]=C.useState(null),Me=Ia(Y),ct=ps(),Oe=Xit({middlewares:v,width:y,position:lCe(ct.dir,c),offset:f+(_?w/2:0),arrowRef:a,arrowOffset:E,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:L,onChange:V,onOpen:W,onClose:z});tZe(()=>k&&Oe.onClose(),N,[me,ge]);const Re=C.useCallback(Ut=>{_e(Ut),Oe.floating.reference(Ut)},[Oe.floating.reference]),Ye=C.useCallback(Ut=>{Be(Ut),Oe.floating.floating(Ut)},[Oe.floating.floating]);return j.createElement(Qit,{value:{returnFocus:he,disabled:ue,controlled:Oe.controlled,reference:Re,floating:Ye,x:Oe.floating.x,y:Oe.floating.y,arrowX:(r=(n=(t=Oe.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Oe.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Oe.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:B,width:y,withArrow:_,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:b,placement:Oe.floating.placement,trapFocus:F,withinPortal:$,zIndex:G,radius:M,shadow:H,closeOnEscape:P,onClose:Oe.onClose,onToggle:Oe.onToggle,getTargetId:()=>`${Me}-target`,getDropdownId:()=>`${Me}-dropdown`,withRoles:Z,targetProps:fe,__staticSelector:q,classNames:A,styles:I,unstyled:T}},l)}cr.Target=eCe;cr.Dropdown=uCe;cr.displayName="@mantine/core/Popover";var Pst=Object.defineProperty,YN=Object.getOwnPropertySymbols,cCe=Object.prototype.hasOwnProperty,fCe=Object.prototype.propertyIsEnumerable,Hue=(e,t,n)=>t in e?Pst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kst=(e,t)=>{for(var n in t||(t={}))cCe.call(t,n)&&Hue(e,n,t[n]);if(YN)for(var n of YN(t))fCe.call(t,n)&&Hue(e,n,t[n]);return e},Rst=(e,t)=>{var n={};for(var r in e)cCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&fCe.call(e,r)&&(n[r]=e[r]);return n};function $st(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=Rst(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Lrt(null,{name:u,styles:l,classNames:c,unstyled:f});return j.createElement(cr.Dropdown,kst({p:0,onMouseDown:p=>p.preventDefault()},d),j.createElement("div",{style:{maxHeight:i,display:"flex"}},j.createElement(dt,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==d4?"auto":void 0},"data-combobox-popover":!0,ref:a},j.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function h0({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return j.createElement(cr,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}h0.Target=cr.Target;h0.Dropdown=$st;var Nst=Object.defineProperty,Dst=Object.defineProperties,Mst=Object.getOwnPropertyDescriptors,KN=Object.getOwnPropertySymbols,dCe=Object.prototype.hasOwnProperty,hCe=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?Nst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,UP=(e,t)=>{for(var n in t||(t={}))dCe.call(t,n)&&que(e,n,t[n]);if(KN)for(var n of KN(t))hCe.call(t,n)&&que(e,n,t[n]);return e},Lst=(e,t)=>Dst(e,Mst(t)),Fst=(e,t)=>{var n={};for(var r in e)dCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&hCe.call(e,r)&&(n[r]=e[r]);return n};function pCe(e,t,n){const r=ut(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:b}=r,T=Fst(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),A=Ia(v),{systemStyles:I,rest:k}=Wf(T),$=UP({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:A,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:b},y);return Lst(UP({},k),{classNames:u,styles:l,unstyled:f,wrapperProps:UP(UP({},$),I),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:A,size:_,__staticSelector:d,invalid:!!o}})}var jst=pt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}})),Bst=Object.defineProperty,XN=Object.getOwnPropertySymbols,mCe=Object.prototype.hasOwnProperty,gCe=Object.prototype.propertyIsEnumerable,Wue=(e,t,n)=>t in e?Bst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zst=(e,t)=>{for(var n in t||(t={}))mCe.call(t,n)&&Wue(e,n,t[n]);if(XN)for(var n of XN(t))gCe.call(t,n)&&Wue(e,n,t[n]);return e},Ust=(e,t)=>{var n={};for(var r in e)mCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&gCe.call(e,r)&&(n[r]=e[r]);return n};const Vst={labelElement:"label",size:"sm"},WY=C.forwardRef((e,t)=>{const n=ut("InputLabel",Vst,e),{labelElement:r,children:i,required:s,size:o,classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=Ust(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]),{classes:p,cx:m}=jst({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return j.createElement(dt,zst({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&j.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});WY.displayName="@mantine/core/InputLabel";var Hst=pt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}})),qst=Object.defineProperty,QN=Object.getOwnPropertySymbols,yCe=Object.prototype.hasOwnProperty,vCe=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?qst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wst=(e,t)=>{for(var n in t||(t={}))yCe.call(t,n)&&Gue(e,n,t[n]);if(QN)for(var n of QN(t))vCe.call(t,n)&&Gue(e,n,t[n]);return e},Gst=(e,t)=>{var n={};for(var r in e)yCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&vCe.call(e,r)&&(n[r]=e[r]);return n};const Yst={size:"sm"},GY=C.forwardRef((e,t)=>{const n=ut("InputError",Yst,e),{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u,__staticSelector:l}=n,c=Gst(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]),{classes:f,cx:d}=Hst({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return j.createElement(it,Wst({className:d(f.error,i),ref:t},c),r)});GY.displayName="@mantine/core/InputError";var Kst=pt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}})),Xst=Object.defineProperty,JN=Object.getOwnPropertySymbols,_Ce=Object.prototype.hasOwnProperty,bCe=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?Xst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qst=(e,t)=>{for(var n in t||(t={}))_Ce.call(t,n)&&Yue(e,n,t[n]);if(JN)for(var n of JN(t))bCe.call(t,n)&&Yue(e,n,t[n]);return e},Jst=(e,t)=>{var n={};for(var r in e)_Ce.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&bCe.call(e,r)&&(n[r]=e[r]);return n};const Zst={size:"sm"},YY=C.forwardRef((e,t)=>{const n=ut("InputDescription",Zst,e),{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u,__staticSelector:l}=n,c=Jst(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]),{classes:f,cx:d}=Kst({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return j.createElement(it,Qst({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});YY.displayName="@mantine/core/InputDescription";const wCe=C.createContext({offsetBottom:!1,offsetTop:!1,describedBy:void 0}),eot=wCe.Provider,tot=()=>C.useContext(wCe);function not(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var rot=Object.defineProperty,iot=Object.defineProperties,sot=Object.getOwnPropertyDescriptors,Kue=Object.getOwnPropertySymbols,oot=Object.prototype.hasOwnProperty,aot=Object.prototype.propertyIsEnumerable,Xue=(e,t,n)=>t in e?rot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uot=(e,t)=>{for(var n in t||(t={}))oot.call(t,n)&&Xue(e,n,t[n]);if(Kue)for(var n of Kue(t))aot.call(t,n)&&Xue(e,n,t[n]);return e},lot=(e,t)=>iot(e,sot(t)),cot=pt(e=>({root:lot(uot({},e.fn.fontStyles()),{lineHeight:e.lineHeight})})),fot=Object.defineProperty,dot=Object.defineProperties,hot=Object.getOwnPropertyDescriptors,ZN=Object.getOwnPropertySymbols,ECe=Object.prototype.hasOwnProperty,xCe=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?fot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sg=(e,t)=>{for(var n in t||(t={}))ECe.call(t,n)&&Que(e,n,t[n]);if(ZN)for(var n of ZN(t))xCe.call(t,n)&&Que(e,n,t[n]);return e},Jue=(e,t)=>dot(e,hot(t)),pot=(e,t)=>{var n={};for(var r in e)ECe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&xCe.call(e,r)&&(n[r]=e[r]);return n};const mot={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},SCe=C.forwardRef((e,t)=>{const n=ut("InputWrapper",mot,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:w,withAsterisk:E}=n,S=pot(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:b,cx:T}=cot(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),A={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},I=typeof E=="boolean"?E:o,k=a?`${a}-error`:h==null?void 0:h.id,$=a?`${a}-description`:d==null?void 0:d.id,N=`${!!u&&typeof u!="boolean"?k:""} ${l?$:""}`,F=N.trim().length>0?N.trim():void 0,z=i&&j.createElement(WY,sg(sg({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:I},A),f),i),W=l&&j.createElement(YY,Jue(sg(sg({key:"description"},d),A),{size:(d==null?void 0:d.size)||A.size,id:(d==null?void 0:d.id)||$}),l),V=j.createElement(C.Fragment,{key:"input"},y(s)),G=typeof u!="boolean"&&u&&j.createElement(GY,Jue(sg(sg({},h),A),{size:(h==null?void 0:h.size)||A.size,key:"error",id:(h==null?void 0:h.id)||k}),u),M=w.map(H=>{switch(H){case"label":return z;case"input":return V;case"description":return W;case"error":return G;default:return null}});return j.createElement(eot,{value:sg({describedBy:F},not(w,{hasDescription:!!W,hasError:!!G}))},j.createElement(dt,sg({className:T(b.root,r),ref:t},S),M))});SCe.displayName="@mantine/core/InputWrapper";var got=Object.defineProperty,eD=Object.getOwnPropertySymbols,TCe=Object.prototype.hasOwnProperty,CCe=Object.prototype.propertyIsEnumerable,Zue=(e,t,n)=>t in e?got(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yot=(e,t)=>{for(var n in t||(t={}))TCe.call(t,n)&&Zue(e,n,t[n]);if(eD)for(var n of eD(t))CCe.call(t,n)&&Zue(e,n,t[n]);return e},vot=(e,t)=>{var n={};for(var r in e)TCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&CCe.call(e,r)&&(n[r]=e[r]);return n};const _ot={},ACe=C.forwardRef((e,t)=>{const n=ut("InputPlaceholder",_ot,e),{sx:r}=n,i=vot(n,["sx"]);return j.createElement(dt,yot({component:"span",sx:[s=>s.fn.placeholderStyles(),...k0(r)],ref:t},i))});ACe.displayName="@mantine/core/InputPlaceholder";var bot=Object.defineProperty,wot=Object.defineProperties,Eot=Object.getOwnPropertyDescriptors,ele=Object.getOwnPropertySymbols,xot=Object.prototype.hasOwnProperty,Sot=Object.prototype.propertyIsEnumerable,tle=(e,t,n)=>t in e?bot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VP=(e,t)=>{for(var n in t||(t={}))xot.call(t,n)&&tle(e,n,t[n]);if(ele)for(var n of ele(t))Sot.call(t,n)&&tle(e,n,t[n]);return e},e9=(e,t)=>wot(e,Eot(t));const aa={xs:30,sm:36,md:42,lg:50,xl:60};function Tot({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Cot=pt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:aa}),paddingLeft:e.fn.size({size:t,sizes:aa})/3,paddingRight:a?o:e.fn.size({size:t,sizes:aa})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:VP(e9(VP(e9(VP({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:aa}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:aa})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":e9(VP({},e.fn.placeholderStyles()),{opacity:1}),"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Tot({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:aa})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:aa}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}}),Aot=Object.defineProperty,Iot=Object.defineProperties,Oot=Object.getOwnPropertyDescriptors,tD=Object.getOwnPropertySymbols,ICe=Object.prototype.hasOwnProperty,OCe=Object.prototype.propertyIsEnumerable,nle=(e,t,n)=>t in e?Aot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HP=(e,t)=>{for(var n in t||(t={}))ICe.call(t,n)&&nle(e,n,t[n]);if(tD)for(var n of tD(t))OCe.call(t,n)&&nle(e,n,t[n]);return e},rle=(e,t)=>Iot(e,Oot(t)),Pot=(e,t)=>{var n={};for(var r in e)ICe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&OCe.call(e,r)&&(n[r]=e[r]);return n};const kot={rightSectionWidth:36,size:"sm",variant:"default"},h_=C.forwardRef((e,t)=>{const n=ut("Input",kot,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:w,sx:E,unstyled:S,pointer:b}=n,T=Pot(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:A,offsetTop:I,describedBy:k}=tot(),{classes:$,cx:P}=Cot({radius:p,size:m,multiline:w,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:A,offsetTop:I,pointer:b},{classNames:y,styles:v,name:["Input",_],unstyled:S}),{systemStyles:N,rest:F}=Wf(T);return j.createElement(dt,HP(HP({className:P($.wrapper,r),sx:E,style:l},N),g),u&&j.createElement("div",{className:$.icon},u),j.createElement(dt,rle(HP({component:"input"},F),{ref:t,required:s,"aria-invalid":i,"aria-describedby":k,disabled:o,className:P($[`${a}Variant`],$.input,{[$.withIcon]:u,[$.invalid]:i,[$.disabled]:o})})),d&&j.createElement("div",rle(HP({},h),{className:$.rightSection}),d))});h_.displayName="@mantine/core/Input";h_.Wrapper=SCe;h_.Label=WY;h_.Description=YY;h_.Error=GY;h_.Placeholder=ACe;const Ts=h_;var Rot=Object.defineProperty,$ot=Object.defineProperties,Not=Object.getOwnPropertyDescriptors,ile=Object.getOwnPropertySymbols,Dot=Object.prototype.hasOwnProperty,Mot=Object.prototype.propertyIsEnumerable,sle=(e,t,n)=>t in e?Rot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,t9=(e,t)=>{for(var n in t||(t={}))Dot.call(t,n)&&sle(e,n,t[n]);if(ile)for(var n of ile(t))Mot.call(t,n)&&sle(e,n,t[n]);return e},Lot=(e,t)=>$ot(e,Not(t));const n9={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Fot={xs:4,sm:4,md:6,lg:8,xl:10};function jot({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:Fot});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var Bot=pt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in n9?n9[n]:n9.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:t9(Lot(t9(t9({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),jot({theme:e,variant:o,color:t,size:n,gradient:i}))}}),zot=Object.defineProperty,nD=Object.getOwnPropertySymbols,PCe=Object.prototype.hasOwnProperty,kCe=Object.prototype.propertyIsEnumerable,ole=(e,t,n)=>t in e?zot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uot=(e,t)=>{for(var n in t||(t={}))PCe.call(t,n)&&ole(e,n,t[n]);if(nD)for(var n of nD(t))kCe.call(t,n)&&ole(e,n,t[n]);return e},Vot=(e,t)=>{var n={};for(var r in e)PCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&kCe.call(e,r)&&(n[r]=e[r]);return n};const Hot={variant:"light",size:"md",radius:"xl"},RCe=C.forwardRef((e,t)=>{const n=ut("Badge",Hot,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=Vot(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=Bot({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return j.createElement(dt,Uot({className:v(y.root,r),ref:t},g),l&&j.createElement("span",{className:y.leftSection},l),j.createElement("span",{className:y.inner},a),c&&j.createElement("span",{className:y.rightSection},c))});RCe.displayName="@mantine/core/Badge";const pw=RCe,qot={xs:12,sm:18,md:24,lg:34,xl:42};var Wot=pt((e,{size:t,color:n,transitionDuration:r})=>{const i=e.fn.size({size:t,sizes:qot}),s=n||(e.colorScheme==="dark"?e.white:e.black);return{root:{borderRadius:e.radius.sm,width:`calc(${i}px + ${e.spacing.xs}px)`,height:`calc(${i}px + ${e.spacing.xs}px)`,padding:`calc(${e.spacing.xs}px / 2)`,cursor:"pointer"},burger:{position:"relative",userSelect:"none",boxSizing:"border-box","&, &::before, &::after":{display:"block",width:i,height:Math.ceil(i/12),backgroundColor:s,outline:"1px solid transparent",transitionProperty:"background-color, transform",transitionDuration:`${r}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},"&::before, &::after":{position:"absolute",content:'""',left:0},"&::before":{top:i/3*-1},"&::after":{top:i/3},"&[data-opened]":{backgroundColor:"transparent","&::before":{transform:`translateY(${i/3}px) rotate(45deg)`},"&::after":{transform:`translateY(-${i/3}px) rotate(-45deg)`}}}}}),Got=Object.defineProperty,rD=Object.getOwnPropertySymbols,$Ce=Object.prototype.hasOwnProperty,NCe=Object.prototype.propertyIsEnumerable,ale=(e,t,n)=>t in e?Got(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yot=(e,t)=>{for(var n in t||(t={}))$Ce.call(t,n)&&ale(e,n,t[n]);if(rD)for(var n of rD(t))NCe.call(t,n)&&ale(e,n,t[n]);return e},Kot=(e,t)=>{var n={};for(var r in e)$Ce.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&NCe.call(e,r)&&(n[r]=e[r]);return n};const Xot={size:"md",transitionDuration:300},DCe=C.forwardRef((e,t)=>{const n=ut("Burger",Xot,e),{className:r,opened:i,color:s,size:o,classNames:a,styles:u,transitionDuration:l}=n,c=Kot(n,["className","opened","color","size","classNames","styles","transitionDuration"]),{classes:f,cx:d}=Wot({color:s,size:o,transitionDuration:l},{classNames:a,styles:u,name:"Burger"});return j.createElement(Nm,Yot({className:d(f.root,r),ref:t},c),j.createElement("div",{"data-opened":i||void 0,className:f.burger}))});DCe.displayName="@mantine/core/Burger";var Qot=pt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}})),Jot=Object.defineProperty,iD=Object.getOwnPropertySymbols,MCe=Object.prototype.hasOwnProperty,LCe=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?Jot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zot=(e,t)=>{for(var n in t||(t={}))MCe.call(t,n)&&ule(e,n,t[n]);if(iD)for(var n of iD(t))LCe.call(t,n)&&ule(e,n,t[n]);return e},eat=(e,t)=>{var n={};for(var r in e)MCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&LCe.call(e,r)&&(n[r]=e[r]);return n};const tat={orientation:"horizontal",buttonBorderWidth:1},FCe=C.forwardRef((e,t)=>{const n=ut("ButtonGroup",tat,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=eat(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=Qot({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return j.createElement(dt,Zot({className:l(u.root,r),ref:t},a))});FCe.displayName="@mantine/core/ButtonGroup";var nat=Object.defineProperty,rat=Object.defineProperties,iat=Object.getOwnPropertyDescriptors,lle=Object.getOwnPropertySymbols,sat=Object.prototype.hasOwnProperty,oat=Object.prototype.propertyIsEnumerable,cle=(e,t,n)=>t in e?nat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wv=(e,t)=>{for(var n in t||(t={}))sat.call(t,n)&&cle(e,n,t[n]);if(lle)for(var n of lle(t))oat.call(t,n)&&cle(e,n,t[n]);return e},DU=(e,t)=>rat(e,iat(t));const MU={xs:{height:aa.xs,paddingLeft:14,paddingRight:14},sm:{height:aa.sm,paddingLeft:18,paddingRight:18},md:{height:aa.md,paddingLeft:22,paddingRight:22},lg:{height:aa.lg,paddingLeft:26,paddingRight:26},xl:{height:aa.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function aat({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return MU[`compact-${t}`];const i=MU[t];return DU(wv({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const uat=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function lat({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:wv({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var cat=pt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:DU(wv(DU(wv(wv(wv(wv({},aat({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),uat(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),lat({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}})),fat=Object.defineProperty,sD=Object.getOwnPropertySymbols,jCe=Object.prototype.hasOwnProperty,BCe=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?fat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dle=(e,t)=>{for(var n in t||(t={}))jCe.call(t,n)&&fle(e,n,t[n]);if(sD)for(var n of sD(t))BCe.call(t,n)&&fle(e,n,t[n]);return e},dat=(e,t)=>{var n={};for(var r in e)jCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&BCe.call(e,r)&&(n[r]=e[r]);return n};const hat={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},KY=C.forwardRef((e,t)=>{const n=ut("Button",hat,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:w,styles:E,unstyled:S}=n,b=dat(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:T,cx:A,theme:I}=cat({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:S,classNames:w,styles:E}),k=I.fn.variant({color:s,variant:d}),$=j.createElement(ph,dle({color:k.color,size:I.fn.size({size:i,sizes:MU}).height/2},v));return j.createElement(Nm,dle({className:A(T.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:S},b),j.createElement("div",{className:T.inner},(l||g&&y==="left")&&j.createElement("span",{className:A(T.icon,T.leftIcon)},g&&y==="left"?$:l),g&&y==="center"&&j.createElement("span",{className:T.centerLoader},$),j.createElement("span",{className:T.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&j.createElement("span",{className:A(T.icon,T.rightIcon)},g&&y==="right"?$:c)))});KY.displayName="@mantine/core/Button";KY.Group=FCe;const Fr=KY;var pat=pt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}})),mat=Object.defineProperty,oD=Object.getOwnPropertySymbols,zCe=Object.prototype.hasOwnProperty,UCe=Object.prototype.propertyIsEnumerable,hle=(e,t,n)=>t in e?mat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gat=(e,t)=>{for(var n in t||(t={}))zCe.call(t,n)&&hle(e,n,t[n]);if(oD)for(var n of oD(t))UCe.call(t,n)&&hle(e,n,t[n]);return e},yat=(e,t)=>{var n={};for(var r in e)zCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&UCe.call(e,r)&&(n[r]=e[r]);return n};const vat={},VCe=C.forwardRef((e,t)=>{const n=ut("Paper",vat,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=yat(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=pat({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return j.createElement(dt,gat({className:f(c.root,r),ref:t},l),i)});VCe.displayName="@mantine/core/Paper";const XY=VCe,HCe=C.createContext({padding:0}),_at=HCe.Provider,bat=()=>C.useContext(HCe).padding;var wat=pt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}}),Eat=Object.defineProperty,aD=Object.getOwnPropertySymbols,qCe=Object.prototype.hasOwnProperty,WCe=Object.prototype.propertyIsEnumerable,ple=(e,t,n)=>t in e?Eat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xat=(e,t)=>{for(var n in t||(t={}))qCe.call(t,n)&&ple(e,n,t[n]);if(aD)for(var n of aD(t))WCe.call(t,n)&&ple(e,n,t[n]);return e},Sat=(e,t)=>{var n={};for(var r in e)qCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aD)for(var r of aD(e))t.indexOf(r)<0&&WCe.call(e,r)&&(n[r]=e[r]);return n};const Tat={withBorder:!1,inheritPadding:!1},GCe=C.forwardRef((e,t)=>{const n=ut("CardSection",Tat,e),{className:r,withBorder:i,inheritPadding:s,unstyled:o}=n,a=Sat(n,["className","withBorder","inheritPadding","unstyled"]),{classes:u,cx:l}=wat({padding:bat(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return j.createElement(dt,xat({className:l(u.cardSection,r),ref:t},a))});GCe.displayName="@mantine/core/CardSection";const YCe=GCe;var Cat=pt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}})),Aat=Object.defineProperty,uD=Object.getOwnPropertySymbols,KCe=Object.prototype.hasOwnProperty,XCe=Object.prototype.propertyIsEnumerable,mle=(e,t,n)=>t in e?Aat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Iat=(e,t)=>{for(var n in t||(t={}))KCe.call(t,n)&&mle(e,n,t[n]);if(uD)for(var n of uD(t))XCe.call(t,n)&&mle(e,n,t[n]);return e},Oat=(e,t)=>{var n={};for(var r in e)KCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uD)for(var r of uD(e))t.indexOf(r)<0&&XCe.call(e,r)&&(n[r]=e[r]);return n};const Pat={p:"md"},QY=C.forwardRef((e,t)=>{const n=ut("Card",Pat,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=Oat(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Cat(null,{name:"Card",unstyled:a}),f=C.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===YCe?C.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return j.createElement(_at,{value:{padding:i}},j.createElement(XY,Iat({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});QY.Section=YCe;QY.displayName="@mantine/core/Card";const p4=QY;var kat=Object.defineProperty,lD=Object.getOwnPropertySymbols,QCe=Object.prototype.hasOwnProperty,JCe=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?kat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rat=(e,t)=>{for(var n in t||(t={}))QCe.call(t,n)&&gle(e,n,t[n]);if(lD)for(var n of lD(t))JCe.call(t,n)&&gle(e,n,t[n]);return e},$at=(e,t)=>{var n={};for(var r in e)QCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lD)for(var r of lD(e))t.indexOf(r)<0&&JCe.call(e,r)&&(n[r]=e[r]);return n};const ZCe=C.forwardRef((e,t)=>{const n=ut("Center",{},e),{inline:r,sx:i}=n,s=$at(n,["inline","sx"]);return j.createElement(dt,Rat({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...k0(i)]},s))});ZCe.displayName="@mantine/core/Center";const Ya=ZCe,eAe=C.createContext(null),Nat=eAe.Provider,Dat=()=>C.useContext(eAe);function Mat(e){return C.Children.toArray(e).filter(Boolean)}const tAe={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var Lat=pt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:tAe[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}})),Fat=Object.defineProperty,cD=Object.getOwnPropertySymbols,nAe=Object.prototype.hasOwnProperty,rAe=Object.prototype.propertyIsEnumerable,yle=(e,t,n)=>t in e?Fat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jat=(e,t)=>{for(var n in t||(t={}))nAe.call(t,n)&&yle(e,n,t[n]);if(cD)for(var n of cD(t))rAe.call(t,n)&&yle(e,n,t[n]);return e},Bat=(e,t)=>{var n={};for(var r in e)nAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cD)for(var r of cD(e))t.indexOf(r)<0&&rAe.call(e,r)&&(n[r]=e[r]);return n};const zat={position:"left",spacing:"md"},yr=C.forwardRef((e,t)=>{const n=ut("Group",zat,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=Bat(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=Mat(o),{classes:h,cx:p}=Lat({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return j.createElement(dt,jat({className:p(h.root,r),ref:t},f),d)});yr.displayName="@mantine/core/Group";var Uat=pt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}})),Vat=Object.defineProperty,fD=Object.getOwnPropertySymbols,iAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,vle=(e,t,n)=>t in e?Vat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hat=(e,t)=>{for(var n in t||(t={}))iAe.call(t,n)&&vle(e,n,t[n]);if(fD)for(var n of fD(t))sAe.call(t,n)&&vle(e,n,t[n]);return e},qat=(e,t)=>{var n={};for(var r in e)iAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fD)for(var r of fD(e))t.indexOf(r)<0&&sAe.call(e,r)&&(n[r]=e[r]);return n};const Wat={spacing:"md",align:"stretch",justify:"flex-start"},Bi=C.forwardRef((e,t)=>{const n=ut("Stack",Wat,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=qat(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=Uat({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return j.createElement(dt,Hat({className:c(l.root,i),ref:t},u))});Bi.displayName="@mantine/core/Stack";function oAe({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?j.createElement(yr,{pt:t,spacing:e,role:i,unstyled:s},r):j.createElement(Bi,{pt:t,spacing:e,role:i,unstyled:s},r)}var Gat=Object.defineProperty,dD=Object.getOwnPropertySymbols,aAe=Object.prototype.hasOwnProperty,uAe=Object.prototype.propertyIsEnumerable,_le=(e,t,n)=>t in e?Gat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ble=(e,t)=>{for(var n in t||(t={}))aAe.call(t,n)&&_le(e,n,t[n]);if(dD)for(var n of dD(t))uAe.call(t,n)&&_le(e,n,t[n]);return e},Yat=(e,t)=>{var n={};for(var r in e)aAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dD)for(var r of dD(e))t.indexOf(r)<0&&uAe.call(e,r)&&(n[r]=e[r]);return n};const Kat={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},lAe=C.forwardRef((e,t)=>{const n=ut("CheckboxGroup",Kat,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=Yat(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=Fo({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return j.createElement(Nat,{value:{value:h,onChange:m,size:l}},j.createElement(Ts.Wrapper,ble(ble({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),j.createElement(oAe,{spacing:u,orientation:a,offset:f},r)))});lAe.displayName="@mantine/core/CheckboxGroup";var Xat=Object.defineProperty,hD=Object.getOwnPropertySymbols,cAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,wle=(e,t,n)=>t in e?Xat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,LU=(e,t)=>{for(var n in t||(t={}))cAe.call(t,n)&&wle(e,n,t[n]);if(hD)for(var n of hD(t))fAe.call(t,n)&&wle(e,n,t[n]);return e},Qat=(e,t)=>{var n={};for(var r in e)cAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hD)for(var r of hD(e))t.indexOf(r)<0&&fAe.call(e,r)&&(n[r]=e[r]);return n};function Jat(e){return j.createElement("svg",LU({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function Zat(e){var t=e,{indeterminate:n}=t,r=Qat(t,["indeterminate"]);return n?j.createElement("svg",LU({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),j.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):j.createElement(Jat,LU({},r))}var eut=Object.defineProperty,tut=Object.defineProperties,nut=Object.getOwnPropertyDescriptors,Ele=Object.getOwnPropertySymbols,rut=Object.prototype.hasOwnProperty,iut=Object.prototype.propertyIsEnumerable,xle=(e,t,n)=>t in e?eut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sut=(e,t)=>{for(var n in t||(t={}))rut.call(t,n)&&xle(e,n,t[n]);if(Ele)for(var n of Ele(t))iut.call(t,n)&&xle(e,n,t[n]);return e},out=(e,t)=>tut(e,nut(t));const aut={xs:16,sm:20,md:24,lg:30,xl:36},uut={xs:8,sm:10,md:14,lg:16,xl:20};var lut=pt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:aut}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:uut}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:out(sut({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}}),cut=Object.defineProperty,fut=Object.defineProperties,dut=Object.getOwnPropertyDescriptors,Sle=Object.getOwnPropertySymbols,hut=Object.prototype.hasOwnProperty,put=Object.prototype.propertyIsEnumerable,Tle=(e,t,n)=>t in e?cut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mut=(e,t)=>{for(var n in t||(t={}))hut.call(t,n)&&Tle(e,n,t[n]);if(Sle)for(var n of Sle(t))put.call(t,n)&&Tle(e,n,t[n]);return e},gut=(e,t)=>fut(e,dut(t));const yut={xs:16,sm:20,md:24,lg:30,xl:36};var vut=pt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"flex"},labelWrapper:gut(mut({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:yut})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}})),_ut=Object.defineProperty,pD=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty,hAe=Object.prototype.propertyIsEnumerable,Cle=(e,t,n)=>t in e?_ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,but=(e,t)=>{for(var n in t||(t={}))dAe.call(t,n)&&Cle(e,n,t[n]);if(pD)for(var n of pD(t))hAe.call(t,n)&&Cle(e,n,t[n]);return e},wut=(e,t)=>{var n={};for(var r in e)dAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pD)for(var r of pD(e))t.indexOf(r)<0&&hAe.call(e,r)&&(n[r]=e[r]);return n};function JY(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=wut(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=vut({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return j.createElement(dt,but({className:y(g.root,r)},m),j.createElement("div",{className:y(g.body)},a,j.createElement("div",{className:g.labelWrapper},u&&j.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&j.createElement(Ts.Description,{className:g.description},l),d&&d!=="boolean"&&j.createElement(Ts.Error,{className:g.error},d))))}JY.displayName="@mantine/core/InlineInput";var Eut=Object.defineProperty,mD=Object.getOwnPropertySymbols,pAe=Object.prototype.hasOwnProperty,mAe=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?Eut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qP=(e,t)=>{for(var n in t||(t={}))pAe.call(t,n)&&Ale(e,n,t[n]);if(mD)for(var n of mD(t))mAe.call(t,n)&&Ale(e,n,t[n]);return e},xut=(e,t)=>{var n={};for(var r in e)pAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mD)for(var r of mD(e))t.indexOf(r)<0&&mAe.call(e,r)&&(n[r]=e[r]);return n};const Sut={size:"sm",transitionDuration:100,icon:Zat,labelPosition:"right"},iE=C.forwardRef((e,t)=>{const n=ut("Checkbox",Sut,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:w,labelPosition:E,description:S,error:b}=n,T=xut(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),A=Dat(),I=Ia(f),{systemStyles:k,rest:$}=Wf(T),{classes:P}=lut({size:(A==null?void 0:A.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:E,error:!!b,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:w}),N=A?{checked:A.value.includes($.value),onChange:A.onChange}:{};return j.createElement(JY,qP(qP({className:r,sx:s,style:i,id:I,size:(A==null?void 0:A.size)||d,labelPosition:E,label:l,description:S,error:b,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:w,"data-checked":N.checked||void 0},k),p),j.createElement("div",{className:P.inner},j.createElement("input",qP(qP({id:I,ref:t,type:"checkbox",className:P.input,checked:o,disabled:a},$),N)),j.createElement(_,{indeterminate:c,className:P.icon})))});iE.displayName="@mantine/core/Checkbox";iE.Group=lAe;var Tut=Object.defineProperty,Cut=Object.defineProperties,Aut=Object.getOwnPropertyDescriptors,Ile=Object.getOwnPropertySymbols,Iut=Object.prototype.hasOwnProperty,Out=Object.prototype.propertyIsEnumerable,Ole=(e,t,n)=>t in e?Tut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Put=(e,t)=>{for(var n in t||(t={}))Iut.call(t,n)&&Ole(e,n,t[n]);if(Ile)for(var n of Ile(t))Out.call(t,n)&&Ole(e,n,t[n]);return e},kut=(e,t)=>Cut(e,Aut(t)),Rut=pt((e,{size:t,radius:n})=>{const r=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{root:kut(Put({},e.fn.focusStyles()),{width:t,height:t,WebkitTapHighlightColor:"transparent",border:0,borderRadius:e.fn.size({size:n,sizes:e.radius}),appearance:"none",WebkitAppearance:"none",padding:0,position:"relative",overflow:"hidden"}),overlay:{position:"absolute",borderRadius:e.fn.size({size:n,sizes:e.radius}),top:0,left:0,right:0,bottom:0},children:{display:"inline-flex",justifyContent:"center",alignItems:"center"},shadowOverlay:{boxShadow:"rgba(0, 0, 0, .1) 0px 0px 0px 1px inset, rgb(0, 0, 0, .15) 0px 0px 4px inset",zIndex:1},alphaOverlay:{backgroundImage:`linear-gradient(45deg, ${r} 25%, transparent 25%), linear-gradient(-45deg, ${r} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${r} 75%), linear-gradient(-45deg, ${e.colorScheme==="dark"?e.colors.dark[7]:e.white} 75%, ${r} 75%)`,backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"}}}),$ut=Object.defineProperty,gD=Object.getOwnPropertySymbols,gAe=Object.prototype.hasOwnProperty,yAe=Object.prototype.propertyIsEnumerable,Ple=(e,t,n)=>t in e?$ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nut=(e,t)=>{for(var n in t||(t={}))gAe.call(t,n)&&Ple(e,n,t[n]);if(gD)for(var n of gD(t))yAe.call(t,n)&&Ple(e,n,t[n]);return e},Dut=(e,t)=>{var n={};for(var r in e)gAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gD)for(var r of gD(e))t.indexOf(r)<0&&yAe.call(e,r)&&(n[r]=e[r]);return n};const Mut={size:25,radius:25,withShadow:!0},vAe=C.forwardRef((e,t)=>{const n=ut("ColorSwatch",Mut,e),{color:r,size:i,radius:s,className:o,children:a,classNames:u,styles:l,unstyled:c,withShadow:f}=n,d=Dut(n,["color","size","radius","className","children","classNames","styles","unstyled","withShadow"]),{classes:h,cx:p}=Rut({radius:s,size:i},{classNames:u,styles:l,unstyled:c,name:"ColorSwatch"});return j.createElement(dt,Nut({className:p(h.root,o),ref:t},d),j.createElement("div",{className:p(h.alphaOverlay,h.overlay)}),f&&j.createElement("div",{className:p(h.shadowOverlay,h.overlay)}),j.createElement("div",{className:h.overlay,style:{backgroundColor:r}}),j.createElement("div",{className:p(h.children,h.overlay)},a))});vAe.displayName="@mantine/core/ColorSwatch";const N0=vAe,kd={xs:8,sm:12,md:16,lg:20,xl:22};var Lut=pt((e,{size:t})=>{const n=e.fn.size({size:t,sizes:kd});return{thumb:{overflow:"hidden",boxSizing:"border-box",position:"absolute",boxShadow:"0 0 1px rgba(0, 0, 0, .6)",border:`2px solid ${e.white}`,backgroundColor:"transparent",width:n,height:n,borderRadius:n}}}),Fut=Object.defineProperty,kle=Object.getOwnPropertySymbols,jut=Object.prototype.hasOwnProperty,But=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?Fut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zut=(e,t)=>{for(var n in t||(t={}))jut.call(t,n)&&Rle(e,n,t[n]);if(kle)for(var n of kle(t))But.call(t,n)&&Rle(e,n,t[n]);return e};function ZY({position:e,className:t,styles:n,classNames:r,style:i,size:s,__staticSelector:o,unstyled:a}){const{classes:u,cx:l}=Lut({size:s},{classNames:r,styles:n,name:o,unstyled:a});return j.createElement("div",{className:l(u.thumb,t),style:zut({left:`calc(${e.x*100}% - ${kd[s]/2}px)`,top:`calc(${e.y*100}% - ${kd[s]/2}px)`},i)})}ZY.displayName="@mantine/core/Thumb";var Uut=Object.defineProperty,$le=Object.getOwnPropertySymbols,Vut=Object.prototype.hasOwnProperty,Hut=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?Uut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dle=(e,t)=>{for(var n in t||(t={}))Vut.call(t,n)&&Nle(e,n,t[n]);if($le)for(var n of $le(t))Hut.call(t,n)&&Nle(e,n,t[n]);return e},qut=pt((e,{size:t},n)=>({sliderThumb:{ref:n("sliderThumb")},slider:{position:"relative",height:e.fn.size({size:t,sizes:kd})+2,boxSizing:"border-box",marginLeft:e.fn.size({size:t,sizes:kd})/2,marginRight:e.fn.size({size:t,sizes:kd})/2,outline:0,[`&:focus .${n("sliderThumb")}`]:Dle({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[`&:focus:not(:focus-visible) .${n("sliderThumb")}`]:Dle({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)},sliderOverlay:{position:"absolute",boxSizing:"border-box",top:0,bottom:0,left:-e.fn.size({size:t,sizes:kd})/2-1,right:-e.fn.size({size:t,sizes:kd})/2-1,borderRadius:1e3}})),Wut=Object.defineProperty,Gut=Object.defineProperties,Yut=Object.getOwnPropertyDescriptors,yD=Object.getOwnPropertySymbols,_Ae=Object.prototype.hasOwnProperty,bAe=Object.prototype.propertyIsEnumerable,Mle=(e,t,n)=>t in e?Wut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kut=(e,t)=>{for(var n in t||(t={}))_Ae.call(t,n)&&Mle(e,n,t[n]);if(yD)for(var n of yD(t))bAe.call(t,n)&&Mle(e,n,t[n]);return e},Xut=(e,t)=>Gut(e,Yut(t)),Qut=(e,t)=>{var n={};for(var r in e)_Ae.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yD)for(var r of yD(e))t.indexOf(r)<0&&bAe.call(e,r)&&(n[r]=e[r]);return n};const eK=C.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:s,maxValue:o,round:a,size:u="md",thumbColor:l="transparent",__staticSelector:c="ColorSlider",focusable:f=!0,overlays:d,classNames:h,styles:p,className:m,unstyled:g}=n,y=Qut(n,["value","onChange","onChangeEnd","maxValue","round","size","thumbColor","__staticSelector","focusable","overlays","classNames","styles","className","unstyled"]);const{classes:v,cx:_}=qut({size:u},{classNames:h,styles:p,name:c,unstyled:g}),[w,E]=C.useState({y:0,x:r/o}),S=C.useRef(w),b=$=>a?Math.round($*o):$*o,{ref:T}=o4(({x:$,y:P})=>{S.current={x:$,y:P},i(b($))},{onScrubEnd:()=>{const{x:$}=S.current;s(b($))}});cs(()=>{E({y:0,x:r/o})},[r]);const A=($,P)=>{$.preventDefault();const N=oTe(P);i(b(N.x)),s(b(N.x))},I=$=>{switch($.key){case"ArrowRight":{A($,{x:w.x+.05,y:w.y});break}case"ArrowLeft":{A($,{x:w.x-.05,y:w.y});break}}},k=d.map(($,P)=>j.createElement("div",{className:v.sliderOverlay,style:$,key:P}));return j.createElement(dt,Xut(Kut({},y),{ref:As(T,t),className:_(v.slider,m),role:"slider","aria-valuenow":r,"aria-valuemax":o,"aria-valuemin":0,tabIndex:f?0:-1,onKeyDown:I}),k,j.createElement(ZY,{__staticSelector:c,classNames:h,styles:p,position:w,style:{top:1,backgroundColor:l},className:v.sliderThumb,size:u}))});eK.displayName="@mantine/core/ColorSlider";var Jut=Object.defineProperty,Zut=Object.defineProperties,elt=Object.getOwnPropertyDescriptors,vD=Object.getOwnPropertySymbols,wAe=Object.prototype.hasOwnProperty,EAe=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?Jut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tlt=(e,t)=>{for(var n in t||(t={}))wAe.call(t,n)&&Lle(e,n,t[n]);if(vD)for(var n of vD(t))EAe.call(t,n)&&Lle(e,n,t[n]);return e},nlt=(e,t)=>Zut(e,elt(t)),rlt=(e,t)=>{var n={};for(var r in e)wAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vD)for(var r of vD(e))t.indexOf(r)<0&&EAe.call(e,r)&&(n[r]=e[r]);return n};const xAe=C.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:s}=n,o=rlt(n,["value","onChange","onChangeEnd"]);return j.createElement(eK,nlt(tlt({},o),{ref:t,value:r,onChange:i,onChangeEnd:s,maxValue:360,thumbColor:`hsl(${r}, 100%, 50%)`,round:!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:"rgba(0, 0, 0, .1) 0px 0px 0px 1px inset, rgb(0, 0, 0, .15) 0px 0px 4px inset"}]}))});xAe.displayName="@mantine/core/HueSlider";var ilt=Object.defineProperty,slt=Object.defineProperties,olt=Object.getOwnPropertyDescriptors,Fle=Object.getOwnPropertySymbols,alt=Object.prototype.hasOwnProperty,ult=Object.prototype.propertyIsEnumerable,jle=(e,t,n)=>t in e?ilt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ble=(e,t)=>{for(var n in t||(t={}))alt.call(t,n)&&jle(e,n,t[n]);if(Fle)for(var n of Fle(t))ult.call(t,n)&&jle(e,n,t[n]);return e},zle=(e,t)=>slt(e,olt(t));function gf(e,t=0,n=10**t){return Math.round(n*e)/n}function llt({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const clt={grad:360/400,turn:360,rad:360/(Math.PI*2)};function flt(e,t="deg"){return Number(e)*(clt[t]||1)}const dlt=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Ule(e){const t=dlt.exec(e);return t?llt({h:flt(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function FU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:gf(60*(o<0?o+6:o)),s:gf(i?s/i*100:0),v:gf(i/255*100),a:r}}function jU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?FU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):FU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function hlt(e){const t=e[0]==="#"?e.slice(1):e,n=o=>Math.round(parseInt(o,16)/255*100)/100;if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return zle(Ble({},jU(o)),{a})}const r=t.slice(0,6),i=n(t.slice(6,8));return zle(Ble({},jU(r)),{a:i})}const plt=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Vle(e){const t=plt.exec(e);return t?FU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const SAe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},mlt={hex:jU,hexa:hlt,rgb:Vle,rgba:Vle,hsl:Ule,hsla:Ule};function glt(e){for(const[,t]of Object.entries(SAe))if(t.test(e))return!0;return!1}function r9(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(SAe))if(r.test(t))return mlt[n](t);return{h:0,s:0,v:0,a:1}}var ylt=Object.defineProperty,vlt=Object.defineProperties,_lt=Object.getOwnPropertyDescriptors,_D=Object.getOwnPropertySymbols,TAe=Object.prototype.hasOwnProperty,CAe=Object.prototype.propertyIsEnumerable,Hle=(e,t,n)=>t in e?ylt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,blt=(e,t)=>{for(var n in t||(t={}))TAe.call(t,n)&&Hle(e,n,t[n]);if(_D)for(var n of _D(t))CAe.call(t,n)&&Hle(e,n,t[n]);return e},wlt=(e,t)=>vlt(e,_lt(t)),Elt=(e,t)=>{var n={};for(var r in e)TAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_D)for(var r of _D(e))t.indexOf(r)<0&&CAe.call(e,r)&&(n[r]=e[r]);return n};const AAe=C.forwardRef((e,t)=>{var n=e,{value:r,onChange:i,onChangeEnd:s,color:o}=n,a=Elt(n,["value","onChange","onChangeEnd","color"]);const u=ps(),l=u.colorScheme==="dark"?u.colors.dark[4]:u.colors.gray[3];return j.createElement(eK,wlt(blt({},a),{ref:t,value:r,onChange:c=>i(gf(c,2)),onChangeEnd:c=>s(gf(c,2)),maxValue:1,round:!1,overlays:[{backgroundImage:`linear-gradient(45deg, ${l} 25%, transparent 25%), linear-gradient(-45deg, ${l} 25%, transparent 25%), linear-gradient(45deg, transparent 75%, ${l} 75%), linear-gradient(-45deg, ${u.colorScheme==="dark"?u.colors.dark[7]:u.white} 75%, ${l} 75%)`,backgroundSize:"8px 8px",backgroundPosition:"0 0, 0 4px, 4px -4px, -4px 0px"},{backgroundImage:`linear-gradient(90deg, transparent, ${o})`},{boxShadow:"rgba(0, 0, 0, .1) 0px 0px 0px 1px inset, rgb(0, 0, 0, .15) 0px 0px 4px inset"}]}))});AAe.displayName="@mantine/core/AlphaSlider";var xlt=Object.defineProperty,qle=Object.getOwnPropertySymbols,Slt=Object.prototype.hasOwnProperty,Tlt=Object.prototype.propertyIsEnumerable,Wle=(e,t,n)=>t in e?xlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,i9=(e,t)=>{for(var n in t||(t={}))Slt.call(t,n)&&Wle(e,n,t[n]);if(qle)for(var n of qle(t))Tlt.call(t,n)&&Wle(e,n,t[n]);return e};const Clt={xs:100,sm:110,md:120,lg:140,xl:160};var Alt=pt((e,{size:t},n)=>({saturationThumb:{ref:n("saturationThumb")},saturation:{boxSizing:"border-box",position:"relative",height:e.fn.size({size:t,sizes:Clt}),borderRadius:e.radius.sm,margin:e.fn.size({size:t,sizes:kd})/2,WebkitTapHighlightColor:"transparent",[`&:focus .${n("saturationThumb")}`]:i9({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[`&:focus:not(:focus-visible) .${n("saturationThumb")}`]:i9({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)},saturationOverlay:i9({boxSizing:"border-box",borderRadius:e.radius.sm},e.fn.cover(-e.fn.size({size:t,sizes:kd})/2-1))}));function IAe({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),f=a%6;return{r:gf([o,l,u,u,c,o][f]*255),g:gf([c,o,o,l,u,u][f]*255),b:gf([u,u,c,o,o,l][f]*255),a:gf(r,2)}}function Gle(e,t){const{r:n,g:r,b:i,a:s}=IAe(e);return t?`rgba(${n}, ${r}, ${i}, ${gf(s,2)})`:`rgb(${n}, ${r}, ${i})`}function Yle({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${gf(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function FR(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function OAe(e){const{r:t,g:n,b:r}=IAe(e);return`#${FR(t)}${FR(n)}${FR(r)}`}function Ilt(e){const t=Math.round(e.a*255);return`${OAe(e)}${FR(t)}`}const s9={hex:OAe,hexa:e=>Ilt(e),rgb:e=>Gle(e,!1),rgba:e=>Gle(e,!0),hsl:e=>Yle(e,!1),hsla:e=>Yle(e,!0)};function yg(e,t){return t?e in s9?s9[e](t):s9.hex(t):"#000000"}function PAe({value:e,onChange:t,onChangeEnd:n,focusable:r=!0,__staticSelector:i="saturation",size:s,color:o,saturationLabel:a,classNames:u,styles:l,unstyled:c}){const{classes:f}=Alt({size:s},{classNames:u,styles:l,name:i,unstyled:c}),[d,h]=C.useState({x:e.s/100,y:1-e.v/100}),p=C.useRef(d),{ref:m}=o4(({x:v,y:_})=>{p.current={x:v,y:_},t({s:Math.round(v*100),v:Math.round((1-_)*100)})},{onScrubEnd:()=>{const{x:v,y:_}=p.current;n({s:Math.round(v*100),v:Math.round((1-_)*100)})}});C.useEffect(()=>{h({x:e.s/100,y:1-e.v/100})},[e.s,e.v]);const g=(v,_)=>{v.preventDefault();const w=oTe(_);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:d.y-.05,x:d.x});break}case"ArrowDown":{g(v,{y:d.y+.05,x:d.x});break}case"ArrowRight":{g(v,{x:d.x+.05,y:d.y});break}case"ArrowLeft":{g(v,{x:d.x-.05,y:d.y});break}}};return j.createElement("div",{className:f.saturation,ref:m,role:"slider","aria-label":a,"aria-valuenow":d.x,"aria-valuetext":yg("rgba",e),tabIndex:r?0:-1,onKeyDown:y},j.createElement("div",{className:f.saturationOverlay,style:{backgroundColor:`hsl(${e.h}, 100%, 50%)`}}),j.createElement("div",{className:f.saturationOverlay,style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}}),j.createElement("div",{className:f.saturationOverlay,style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}}),j.createElement(ZY,{__staticSelector:i,classNames:u,styles:l,position:d,className:f.saturationThumb,style:{backgroundColor:o},size:s}))}PAe.displayName="@mantine/core/Saturation";var Olt=pt((e,{swatchesPerRow:t})=>({swatch:{width:`calc(${100/t}% - 4px)`,height:0,paddingBottom:`calc(${100/t}% - 4px)`,margin:2,boxSizing:"content-box"},swatches:{boxSizing:"border-box",marginLeft:-2,marginRight:-2,display:"flex",flexWrap:"wrap"}})),Plt=Object.defineProperty,bD=Object.getOwnPropertySymbols,kAe=Object.prototype.hasOwnProperty,RAe=Object.prototype.propertyIsEnumerable,Kle=(e,t,n)=>t in e?Plt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,klt=(e,t)=>{for(var n in t||(t={}))kAe.call(t,n)&&Kle(e,n,t[n]);if(bD)for(var n of bD(t))RAe.call(t,n)&&Kle(e,n,t[n]);return e},Rlt=(e,t)=>{var n={};for(var r in e)kAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bD)for(var r of bD(e))t.indexOf(r)<0&&RAe.call(e,r)&&(n[r]=e[r]);return n};function $Ae(e){var t=e,{data:n,swatchesPerRow:r=10,focusable:i=!0,classNames:s,styles:o,__staticSelector:a="color-picker",unstyled:u,setValue:l,onChangeEnd:c}=t,f=Rlt(t,["data","swatchesPerRow","focusable","classNames","styles","__staticSelector","unstyled","setValue","onChangeEnd"]);const{classes:d}=Olt({swatchesPerRow:r},{classNames:s,styles:o,name:a,unstyled:u}),h=n.map((p,m)=>j.createElement(N0,{className:d.swatch,component:"button",type:"button",color:p,key:m,radius:"sm",onClick:()=>{l(p),c==null||c(p)},style:{cursor:"pointer"},"aria-label":p,tabIndex:i?0:-1}));return j.createElement("div",klt({className:d.swatches},f),h)}$Ae.displayName="@mantine/core/Swatches";const $lt={xs:180,sm:200,md:240,lg:280,xl:320};var Nlt=pt((e,{size:t,fullWidth:n})=>({preview:{},wrapper:{boxSizing:"border-box",width:n?"100%":e.fn.size({size:t,sizes:$lt}),padding:1},body:{display:"flex",boxSizing:"border-box",paddingTop:e.fn.size({size:t,sizes:e.spacing})/2},sliders:{flex:1,boxSizing:"border-box","&:not(:only-child)":{marginRight:e.spacing.xs}},slider:{boxSizing:"border-box","& + &":{marginTop:5}},swatch:{cursor:"pointer"}})),Dlt=Object.defineProperty,Mlt=Object.defineProperties,Llt=Object.getOwnPropertyDescriptors,wD=Object.getOwnPropertySymbols,NAe=Object.prototype.hasOwnProperty,DAe=Object.prototype.propertyIsEnumerable,Xle=(e,t,n)=>t in e?Dlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X_=(e,t)=>{for(var n in t||(t={}))NAe.call(t,n)&&Xle(e,n,t[n]);if(wD)for(var n of wD(t))DAe.call(t,n)&&Xle(e,n,t[n]);return e},o9=(e,t)=>Mlt(e,Llt(t)),Flt=(e,t)=>{var n={};for(var r in e)NAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wD)for(var r of wD(e))t.indexOf(r)<0&&DAe.call(e,r)&&(n[r]=e[r]);return n};const jlt={xs:26,sm:34,md:42,lg:50,xl:54},Blt={swatchesPerRow:10,size:"sm",withPicker:!0,focusable:!0,__staticSelector:"ColorPicker"},MAe=C.forwardRef((e,t)=>{const n=ut("ColorPicker",Blt,e),{value:r,defaultValue:i,onChange:s,onChangeEnd:o,format:a,swatches:u,swatchesPerRow:l,size:c,withPicker:f,fullWidth:d,focusable:h,__staticSelector:p,saturationLabel:m,hueLabel:g,alphaLabel:y,className:v,styles:_,classNames:w,unstyled:E,onColorSwatchClick:S}=n,b=Flt(n,["value","defaultValue","onChange","onChangeEnd","format","swatches","swatchesPerRow","size","withPicker","fullWidth","focusable","__staticSelector","saturationLabel","hueLabel","alphaLabel","className","styles","classNames","unstyled","onColorSwatchClick"]),{classes:T,cx:A,theme:I}=Nlt({size:c,fullWidth:d},{classNames:w,styles:_,name:p,unstyled:E}),k=C.useRef(a),$=C.useRef(null),P=C.useRef(!0),N=a==="hexa"||a==="rgba"||a==="hsla",[F,z]=Fo({value:r,defaultValue:i,finalValue:"#FFFFFF",onChange:s}),[W,V]=C.useState(r9(F)),G=M=>{P.current=!1,V(H=>{const Y=X_(X_({},H),M);return $.current=yg(k.current,Y),Y}),z($.current),setTimeout(()=>{P.current=!0},0)};return cs(()=>{glt(r)&&P.current&&(V(r9(r)),P.current=!0)},[r]),cs(()=>{k.current=a,z(yg(a,W))},[a]),j.createElement(dt,X_({className:A(T.wrapper,v),ref:t},b),f&&j.createElement(j.Fragment,null,j.createElement(PAe,{value:W,onChange:G,onChangeEnd:({s:M,v:H})=>o==null?void 0:o(yg(k.current,o9(X_({},W),{s:M,v:H}))),color:F,styles:_,classNames:w,size:c,focusable:h,saturationLabel:m,__staticSelector:p}),j.createElement("div",{className:T.body},j.createElement("div",{className:T.sliders},j.createElement(xAe,{value:W.h,onChange:M=>G({h:M}),onChangeEnd:M=>o==null?void 0:o(yg(k.current,o9(X_({},W),{h:M}))),size:c,styles:_,classNames:w,focusable:h,"aria-label":g,__staticSelector:p}),N&&j.createElement(AAe,{value:W.a,onChange:M=>G({a:M}),onChangeEnd:M=>{o==null||o(yg(k.current,o9(X_({},W),{a:M})))},size:c,color:yg("hex",W),style:{marginTop:6},styles:_,classNames:w,focusable:h,"aria-label":y,__staticSelector:p})),N&&j.createElement(N0,{color:F,radius:"sm",size:I.fn.size({size:c,sizes:jlt}),className:T.preview}))),Array.isArray(u)&&j.createElement($Ae,{data:u,style:{marginTop:5},swatchesPerRow:l,focusable:h,classNames:w,styles:_,__staticSelector:p,setValue:z,onChangeEnd:M=>{const H=yg(a,r9(M));S==null||S(H),o==null||o(H)}}))});MAe.displayName="@mantine/core/ColorPicker";var zlt=pt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}})),Ult=Object.defineProperty,ED=Object.getOwnPropertySymbols,LAe=Object.prototype.hasOwnProperty,FAe=Object.prototype.propertyIsEnumerable,Qle=(e,t,n)=>t in e?Ult(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vlt=(e,t)=>{for(var n in t||(t={}))LAe.call(t,n)&&Qle(e,n,t[n]);if(ED)for(var n of ED(t))FAe.call(t,n)&&Qle(e,n,t[n]);return e},Hlt=(e,t)=>{var n={};for(var r in e)LAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ED)for(var r of ED(e))t.indexOf(r)<0&&FAe.call(e,r)&&(n[r]=e[r]);return n};const qlt={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},Lm=C.forwardRef((e,t)=>{const n=ut("Container",qlt,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=Hlt(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=zlt({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return j.createElement(dt,Vlt({className:c(l.root,r),ref:t},u))});Lm.displayName="@mantine/core/Container";var Wlt=Object.defineProperty,Glt=Object.defineProperties,Ylt=Object.getOwnPropertyDescriptors,Jle=Object.getOwnPropertySymbols,Klt=Object.prototype.hasOwnProperty,Xlt=Object.prototype.propertyIsEnumerable,Zle=(e,t,n)=>t in e?Wlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qlt=(e,t)=>{for(var n in t||(t={}))Klt.call(t,n)&&Zle(e,n,t[n]);if(Jle)for(var n of Jle(t))Xlt.call(t,n)&&Zle(e,n,t[n]);return e},Jlt=(e,t)=>Glt(e,Ylt(t));const WP={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function Zlt({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:WP})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:WP})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:WP})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:WP})};default:return null}}var ect=pt((e,{position:t,size:n,zIndex:r,withOverlay:i})=>({closeButton:{},overlay:{},body:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:i===!1?"none":void 0},drawer:Jlt(Qlt({},Zlt({position:t,size:n,theme:e})),{maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:i===!1?"auto":void 0}),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}}));function tK({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=nCe({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?j.createElement(j.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=tCe({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return j.createElement(j.Fragment,null,i(h))}tK.displayName="@mantine/core/GroupedTransition";var tct=pt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}})),nct=Object.defineProperty,rct=Object.defineProperties,ict=Object.getOwnPropertyDescriptors,xD=Object.getOwnPropertySymbols,jAe=Object.prototype.hasOwnProperty,BAe=Object.prototype.propertyIsEnumerable,ece=(e,t,n)=>t in e?nct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a9=(e,t)=>{for(var n in t||(t={}))jAe.call(t,n)&&ece(e,n,t[n]);if(xD)for(var n of xD(t))BAe.call(t,n)&&ece(e,n,t[n]);return e},sct=(e,t)=>rct(e,ict(t)),oct=(e,t)=>{var n={};for(var r in e)jAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xD)for(var r of xD(e))t.indexOf(r)<0&&BAe.call(e,r)&&(n[r]=e[r]);return n};const act={opacity:.6,color:"#fff",zIndex:Rc("modal"),radius:0,blur:0},zAe=C.forwardRef((e,t)=>{const n=ut("Overlay",act,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=oct(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=tct({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>j.createElement(dt,a9({ref:t,className:p(h.root,f),sx:[v=>sct(a9({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...k0(l)]},y));return i?j.createElement(dt,a9({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...k0(l)]},d),g()):g(d)});zAe.displayName="@mantine/core/Overlay";const nK=zAe;var uct=Object.defineProperty,SD=Object.getOwnPropertySymbols,UAe=Object.prototype.hasOwnProperty,VAe=Object.prototype.propertyIsEnumerable,tce=(e,t,n)=>t in e?uct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lct=(e,t)=>{for(var n in t||(t={}))UAe.call(t,n)&&tce(e,n,t[n]);if(SD)for(var n of SD(t))VAe.call(t,n)&&tce(e,n,t[n]);return e},cct=(e,t)=>{var n={};for(var r in e)UAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SD)for(var r of SD(e))t.indexOf(r)<0&&VAe.call(e,r)&&(n[r]=e[r]);return n};const fct={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},dct={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},hct={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:Rc("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function HAe(e){const t=ut("Drawer",hct,e),{className:n,opened:r,onClose:i,position:s,size:o,trapFocus:a,lockScroll:u,closeOnClickOutside:l,closeOnEscape:c,transition:f,transitionDuration:d,transitionTimingFunction:h,zIndex:p,overlayColor:m,overlayOpacity:g,children:y,withOverlay:v,shadow:_,id:w,padding:E,title:S,withCloseButton:b,closeButtonLabel:T,classNames:A,styles:I,target:k,withinPortal:$,overlayBlur:P,unstyled:N,withFocusReturn:F}=t,z=cct(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","id","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),W=Ia(w),V=`${W}-title`,G=`${W}-body`,{classes:M,cx:H,theme:Y}=ect({size:o,position:s,zIndex:p,withOverlay:v},{classNames:A,styles:I,unstyled:N,name:"Drawer"}),L=CY(a&&r),[,B]=uTe(),q=f||(Y.dir==="rtl"?dct:fct)[s],Z=typeof g=="number"?g:Y.colorScheme==="dark"?.85:.75,ue=he=>{he.key==="Escape"&&c&&i()};return C.useEffect(()=>{if(!a)return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[a]),TY({opened:r,shouldReturnFocus:a&&F}),j.createElement(mx,{withinPortal:$,target:k},j.createElement(tK,{onExited:()=>B(!1),onEntered:()=>B(u&&!0),mounted:r,duration:d,timingFunction:h,transitions:{overlay:{duration:d/2,transition:"fade",timingFunction:"ease"},drawer:{duration:d,transition:q,timingFunction:h}}},he=>j.createElement(dt,lct({className:H(M.root,n),role:"dialog","aria-modal":!0,"aria-labelledby":V,"aria-describedby":G},z),j.createElement(XY,{className:H(M.drawer,n),ref:L,style:he.drawer,radius:0,tabIndex:-1,onKeyDownCapture:fe=>{var me;((me=fe.target)==null?void 0:me.getAttribute("data-mantine-stop-propagation"))!=="true"&&fe.key==="Escape"&&c&&i()},shadow:_,p:E,unstyled:N},(S||b)&&j.createElement("div",{className:M.header},j.createElement(it,{id:V,className:M.title,unstyled:N},S),b&&j.createElement(Bh,{iconSize:16,onClick:i,"aria-label":T,className:M.closeButton,unstyled:N})),j.createElement("div",{id:G,className:M.body},y)),v&&j.createElement("div",{style:he.overlay},j.createElement(nK,{unstyled:N,blur:P,onMouseDown:()=>l&&i(),className:M.overlay,opacity:Z,zIndex:0,color:m||(Y.colorScheme==="dark"?Y.colors.dark[9]:Y.black)})))))}HAe.displayName="@mantine/core/Drawer";const pct={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var mct=Object.defineProperty,gct=Object.defineProperties,yct=Object.getOwnPropertyDescriptors,TD=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?mct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vct=(e,t)=>{for(var n in t||(t={}))qAe.call(t,n)&&nce(e,n,t[n]);if(TD)for(var n of TD(t))WAe.call(t,n)&&nce(e,n,t[n]);return e},_ct=(e,t)=>gct(e,yct(t)),bct=(e,t)=>{var n={};for(var r in e)qAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TD)for(var r of TD(e))t.indexOf(r)<0&&WAe.call(e,r)&&(n[r]=e[r]);return n};const wct={},vi=C.forwardRef((e,t)=>{const n=ut("Flex",wct,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=bct(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return j.createElement(dt,_ct(vct({},f),{sx:[{display:"flex"},d=>IU({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,pct),...k0(c)],ref:t}))});vi.displayName="@mantine/core/Flex";const[Ect,xct]=hI("Grid component was not found in tree");var Sct=Object.defineProperty,rce=Object.getOwnPropertySymbols,Tct=Object.prototype.hasOwnProperty,Cct=Object.prototype.propertyIsEnumerable,ice=(e,t,n)=>t in e?Sct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Act=(e,t)=>{for(var n in t||(t={}))Tct.call(t,n)&&ice(e,n,t[n]);if(rce)for(var n of rce(t))Cct.call(t,n)&&ice(e,n,t[n]);return e};const rK=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,GAe=(e,t,n)=>n||e==="auto"||e==="content"?"unset":rK(e,t),YAe=(e,t)=>{if(e)return e==="auto"||t?1:0},KAe=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0,XAe=(e,t)=>typeof e<"u"?t.fn.size({size:e,sizes:t.spacing})/2:void 0;function Ict({sizes:e,offsets:t,orders:n,theme:r,columns:i,gutters:s,grow:o}){return RSe.reduce((a,u)=>(a[`@media (min-width: ${r.breakpoints[u]}px)`]={order:n[u],flexBasis:rK(e[u],i),padding:XAe(s[u],r),flexShrink:0,width:e[u]==="content"?"auto":void 0,maxWidth:GAe(e[u],i,o),marginLeft:KAe(t[u],i),flexGrow:YAe(e[u],o)},a),{})}var Oct=pt((e,{gutter:t,gutterXs:n,gutterSm:r,gutterMd:i,gutterLg:s,gutterXl:o,grow:a,offset:u,offsetXs:l,offsetSm:c,offsetMd:f,offsetLg:d,offsetXl:h,columns:p,span:m,xs:g,sm:y,md:v,lg:_,xl:w,order:E,orderXs:S,orderSm:b,orderMd:T,orderLg:A,orderXl:I})=>({col:Act({boxSizing:"border-box",flexGrow:YAe(m,a),order:E,padding:XAe(t,e),marginLeft:KAe(u,p),flexBasis:rK(m,p),flexShrink:0,width:m==="content"?"auto":void 0,maxWidth:GAe(m,p,a)},Ict({sizes:{xs:g,sm:y,md:v,lg:_,xl:w},offsets:{xs:l,sm:c,md:f,lg:d,xl:h},orders:{xs:S,sm:b,md:T,lg:A,xl:I},gutters:{xs:n,sm:r,md:i,lg:s,xl:o},theme:e,columns:p,grow:a}))})),Pct=Object.defineProperty,CD=Object.getOwnPropertySymbols,QAe=Object.prototype.hasOwnProperty,JAe=Object.prototype.propertyIsEnumerable,sce=(e,t,n)=>t in e?Pct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kct=(e,t)=>{for(var n in t||(t={}))QAe.call(t,n)&&sce(e,n,t[n]);if(CD)for(var n of CD(t))JAe.call(t,n)&&sce(e,n,t[n]);return e},Rct=(e,t)=>{var n={};for(var r in e)QAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CD)for(var r of CD(e))t.indexOf(r)<0&&JAe.call(e,r)&&(n[r]=e[r]);return n};const $ct={};function Nct(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const ZAe=C.forwardRef((e,t)=>{const n=ut("GridCol",$ct,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:E,className:S,id:b,unstyled:T}=n,A=Rct(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),I=xct(),k=i||I.columns,{classes:$,cx:P}=Oct({gutter:I.gutter,gutterXs:I.gutterXs,gutterSm:I.gutterSm,gutterMd:I.gutterMd,gutterLg:I.gutterLg,gutterXl:I.gutterXl,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:E,grow:I.grow,columns:I.columns,span:k},{unstyled:T,name:"Grid"});return!Nct(k)||k>I.columns?null:j.createElement(dt,kct({className:P($.col,S),ref:t},A),r)});ZAe.displayName="@mantine/core/Col";var Dct=Object.defineProperty,oce=Object.getOwnPropertySymbols,Mct=Object.prototype.hasOwnProperty,Lct=Object.prototype.propertyIsEnumerable,ace=(e,t,n)=>t in e?Dct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fct=(e,t)=>{for(var n in t||(t={}))Mct.call(t,n)&&ace(e,n,t[n]);if(oce)for(var n of oce(t))Lct.call(t,n)&&ace(e,n,t[n]);return e};function jct(e,t){return RSe.reduce((n,r)=>(typeof e[r]<"u"&&(n[`@media (min-width: ${t.breakpoints[r]}px)`]={margin:-t.fn.size({size:e[r],sizes:t.spacing})/2}),n),{})}var Bct=pt((e,{justify:t,align:n,gutter:r,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u})=>({root:Fct({margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n},jct({xs:i,sm:s,md:o,lg:a,xl:u},e))})),zct=Object.defineProperty,AD=Object.getOwnPropertySymbols,eIe=Object.prototype.hasOwnProperty,tIe=Object.prototype.propertyIsEnumerable,uce=(e,t,n)=>t in e?zct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uct=(e,t)=>{for(var n in t||(t={}))eIe.call(t,n)&&uce(e,n,t[n]);if(AD)for(var n of AD(t))tIe.call(t,n)&&uce(e,n,t[n]);return e},Vct=(e,t)=>{var n={};for(var r in e)eIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AD)for(var r of AD(e))t.indexOf(r)<0&&tIe.call(e,r)&&(n[r]=e[r]);return n};const Hct={gutter:"md",justify:"flex-start",align:"stretch",columns:12},yf=C.forwardRef((e,t)=>{const n=ut("Grid",Hct,e),{gutter:r,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u,children:l,grow:c,justify:f,align:d,columns:h,className:p,id:m,unstyled:g}=n,y=Vct(n,["gutter","gutterXs","gutterSm","gutterMd","gutterLg","gutterXl","children","grow","justify","align","columns","className","id","unstyled"]),{classes:v,cx:_}=Bct({gutter:r,justify:f,align:d,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u},{unstyled:g,name:"Grid"});return j.createElement(Ect,{value:{gutter:r,gutterXs:i,gutterSm:s,gutterMd:o,gutterLg:a,gutterXl:u,grow:c,columns:h}},j.createElement(dt,Uct({className:_(v.root,p),ref:t},y),l))});yf.Col=ZAe;yf.displayName="@mantine/core/Grid";function qct({open:e,close:t,openDelay:n,closeDelay:r}){const i=C.useRef(-1),s=C.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return C.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var Wct=Object.defineProperty,lce=Object.getOwnPropertySymbols,Gct=Object.prototype.hasOwnProperty,Yct=Object.prototype.propertyIsEnumerable,cce=(e,t,n)=>t in e?Wct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kct=(e,t)=>{for(var n in t||(t={}))Gct.call(t,n)&&cce(e,n,t[n]);if(lce)for(var n of lce(t))Yct.call(t,n)&&cce(e,n,t[n]);return e};function Xct(e){return j.createElement("svg",Kct({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),j.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var Qct=Object.defineProperty,Jct=Object.defineProperties,Zct=Object.getOwnPropertyDescriptors,fce=Object.getOwnPropertySymbols,eft=Object.prototype.hasOwnProperty,tft=Object.prototype.propertyIsEnumerable,dce=(e,t,n)=>t in e?Qct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hce=(e,t)=>{for(var n in t||(t={}))eft.call(t,n)&&dce(e,n,t[n]);if(fce)for(var n of fce(t))tft.call(t,n)&&dce(e,n,t[n]);return e},pce=(e,t)=>Jct(e,Zct(t)),nft=pt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:pce(hce({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:pce(hce({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})})),rft=Object.defineProperty,ID=Object.getOwnPropertySymbols,nIe=Object.prototype.hasOwnProperty,rIe=Object.prototype.propertyIsEnumerable,mce=(e,t,n)=>t in e?rft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u9=(e,t)=>{for(var n in t||(t={}))nIe.call(t,n)&&mce(e,n,t[n]);if(ID)for(var n of ID(t))rIe.call(t,n)&&mce(e,n,t[n]);return e},ift=(e,t)=>{var n={};for(var r in e)nIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ID)for(var r of ID(e))t.indexOf(r)<0&&rIe.call(e,r)&&(n[r]=e[r]);return n};const sft={fit:"cover",width:"100%",height:"auto",radius:0},p_=C.forwardRef((e,t)=>{const n=ut("Image",sft,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=ift(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:w,cx:E}=nft({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[S,b]=C.useState(!s),T=f&&S;return cs(()=>{b(!s)},[s]),j.createElement(dt,u9({className:E(w.root,r),ref:t,style:u9({width:a},v)},_),j.createElement("figure",{className:w.figure},j.createElement("div",{className:w.imageWrapper},j.createElement("img",u9({className:w.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:A=>{b(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(A)}},c)),T&&j.createElement("div",{className:w.placeholder,title:i},d||j.createElement("div",null,j.createElement(Xct,{style:{width:40,height:40}})))),!!g&&j.createElement(it,{component:"figcaption",size:"sm",align:"center",className:w.caption},g)))});p_.displayName="@mantine/core/Image";function oft(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var aft=C.useLayoutEffect,uft=function(t){var n=C.useRef(t);return aft(function(){n.current=t}),n},gce=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},lft=function(t,n){var r=C.useRef();return C.useCallback(function(i){t.current=i,r.current&&gce(r.current,null),r.current=n,n&&gce(n,i)},[n])},yce={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},vce=function(t){Object.keys(yce).forEach(function(n){t.style.setProperty(n,yce[n],"important")})},il=null,cft=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function fft(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),il||(il=document.createElement("textarea"),il.setAttribute("tabindex","-1"),il.setAttribute("aria-hidden","true"),vce(il)),il.parentNode===null&&document.body.appendChild(il);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;il.style[h]=o[h]}),vce(il),il.value=t;var u=cft(il,e);il.value="x";var l=il.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var _ce=function(){},dft=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},hft=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],pft=!!document.documentElement.currentStyle,mft=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=dft(hft,n),i=r.boxSizing;if(i==="")return null;pft&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},gft=function(t){var n=uft(t);C.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},yft=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?_ce:o,u=t.onHeightChange,l=u===void 0?_ce:u,c=oft(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=C.useRef(null),h=lft(d,n),p=C.useRef(0),m=C.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:mft(_);if(w){m.current=w;var E=fft(w,_.value||_.placeholder||"x",s,i),S=E[0],b=E[1];p.current!==S&&(p.current=S,_.style.setProperty("height",S+"px","important"),l(S,{rowHeight:b}))}},y=function(_){f||g(),a(_)};return C.useLayoutEffect(g),gft(g),C.createElement("textarea",Ni({},c,{onChange:y,ref:h}))},vft=C.forwardRef(yft),_ft=pt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}})),bft=Object.defineProperty,wft=Object.defineProperties,Eft=Object.getOwnPropertyDescriptors,OD=Object.getOwnPropertySymbols,iIe=Object.prototype.hasOwnProperty,sIe=Object.prototype.propertyIsEnumerable,bce=(e,t,n)=>t in e?bft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Q_=(e,t)=>{for(var n in t||(t={}))iIe.call(t,n)&&bce(e,n,t[n]);if(OD)for(var n of OD(t))sIe.call(t,n)&&bce(e,n,t[n]);return e},l9=(e,t)=>wft(e,Eft(t)),xft=(e,t)=>{var n={};for(var r in e)iIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OD)for(var r of OD(e))t.indexOf(r)<0&&sIe.call(e,r)&&(n[r]=e[r]);return n};const Sft={autosize:!1,size:"sm",__staticSelector:"Textarea"},oIe=C.forwardRef((e,t)=>{const n=ut("Textarea",Sft,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:w,labelProps:E,inputWrapperOrder:S,inputContainer:b,unstyled:T,withAsterisk:A}=n,I=xft(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),k=Ia(l),{classes:$,cx:P}=_ft(),{systemStyles:N,rest:F}=Wf(I),z=Q_({required:f,ref:t,invalid:!!a,id:k,classNames:l9(Q_({},p),{input:P($.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:T},F);return j.createElement(Ts.Wrapper,Q_(Q_({label:o,error:a,id:k,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:E,descriptionProps:w,inputContainer:b,inputWrapperOrder:S,unstyled:T,withAsterisk:A},N),h),r?j.createElement(Ts,l9(Q_({},z),{component:vft,maxRows:i,minRows:s})):j.createElement(Ts,l9(Q_({},z),{component:"textarea",rows:s})))});oIe.displayName="@mantine/core/Textarea";const[Tft,Cft]=hI("List component was not found in tree");var Aft=pt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}})),Ift=Object.defineProperty,PD=Object.getOwnPropertySymbols,aIe=Object.prototype.hasOwnProperty,uIe=Object.prototype.propertyIsEnumerable,wce=(e,t,n)=>t in e?Ift(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oft=(e,t)=>{for(var n in t||(t={}))aIe.call(t,n)&&wce(e,n,t[n]);if(PD)for(var n of PD(t))uIe.call(t,n)&&wce(e,n,t[n]);return e},Pft=(e,t)=>{var n={};for(var r in e)aIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PD)for(var r of PD(e))t.indexOf(r)<0&&uIe.call(e,r)&&(n[r]=e[r]);return n};const kft={},lIe=C.forwardRef((e,t)=>{const n=ut("ListItem",kft,e),{className:r,children:i,icon:s}=n,o=Pft(n,["className","children","icon"]),{icon:a,spacing:u,center:l,listStyleType:c,size:f,withPadding:d,classNames:h,styles:p,unstyled:m}=Cft(),g=s||a,{classes:y,cx:v}=Aft({withPadding:d,size:f,listStyleType:c,center:l,spacing:u},{classNames:h,styles:p,unstyled:m,name:"List"});return j.createElement(dt,Oft({component:"li",className:v(y.item,{[y.withIcon]:g},r),ref:t},o),j.createElement("div",{className:y.itemWrapper},g&&j.createElement("span",{className:y.itemIcon},g),j.createElement("span",null,i)))});lIe.displayName="@mantine/core/ListItem";var Rft=Object.defineProperty,$ft=Object.defineProperties,Nft=Object.getOwnPropertyDescriptors,Ece=Object.getOwnPropertySymbols,Dft=Object.prototype.hasOwnProperty,Mft=Object.prototype.propertyIsEnumerable,xce=(e,t,n)=>t in e?Rft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lft=(e,t)=>{for(var n in t||(t={}))Dft.call(t,n)&&xce(e,n,t[n]);if(Ece)for(var n of Ece(t))Mft.call(t,n)&&xce(e,n,t[n]);return e},Fft=(e,t)=>$ft(e,Nft(t)),jft=pt((e,{withPadding:t,size:n,listStyleType:r})=>({root:Fft(Lft({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})})),Bft=Object.defineProperty,kD=Object.getOwnPropertySymbols,cIe=Object.prototype.hasOwnProperty,fIe=Object.prototype.propertyIsEnumerable,Sce=(e,t,n)=>t in e?Bft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zft=(e,t)=>{for(var n in t||(t={}))cIe.call(t,n)&&Sce(e,n,t[n]);if(kD)for(var n of kD(t))fIe.call(t,n)&&Sce(e,n,t[n]);return e},Uft=(e,t)=>{var n={};for(var r in e)cIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kD)for(var r of kD(e))t.indexOf(r)<0&&fIe.call(e,r)&&(n[r]=e[r]);return n};const Vft={type:"unordered",size:"md",spacing:0},i1=C.forwardRef((e,t)=>{const n=ut("List",Vft,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=Uft(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=jft({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return j.createElement(Tft,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a,classNames:h,styles:d,unstyled:p}},j.createElement(dt,zft({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r))});i1.Item=lIe;i1.displayName="@mantine/core/List";var Hft=pt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}}),qft=Object.defineProperty,Wft=Object.defineProperties,Gft=Object.getOwnPropertyDescriptors,RD=Object.getOwnPropertySymbols,dIe=Object.prototype.hasOwnProperty,hIe=Object.prototype.propertyIsEnumerable,Tce=(e,t,n)=>t in e?qft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GP=(e,t)=>{for(var n in t||(t={}))dIe.call(t,n)&&Tce(e,n,t[n]);if(RD)for(var n of RD(t))hIe.call(t,n)&&Tce(e,n,t[n]);return e},Yft=(e,t)=>Wft(e,Gft(t)),Kft=(e,t)=>{var n={};for(var r in e)dIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RD)for(var r of RD(e))t.indexOf(r)<0&&hIe.call(e,r)&&(n[r]=e[r]);return n};const Xft={overlayOpacity:.75,transitionDuration:0,zIndex:Rc("overlay")},Fm=C.forwardRef((e,t)=>{const n=ut("LoadingOverlay",Xft,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=Kft(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=Hft(null,{name:"LoadingOverlay",unstyled:m}),w=`calc(${c} + 1)`;return j.createElement(EI,{duration:u,exitDuration:l,mounted:i,transition:"fade"},E=>j.createElement(dt,GP({className:v(y.root,r),style:Yft(GP(GP({},E),f),{zIndex:c}),ref:t},g),d?j.createElement("div",{style:{zIndex:w}},d):j.createElement(ph,GP({style:{zIndex:w}},s)),j.createElement(nK,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});Fm.displayName="@mantine/core/LoadingOverlay";const pIe={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[Qft,xI]=hI(pIe.context);var Jft=pt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}})),Zft=Object.defineProperty,$D=Object.getOwnPropertySymbols,mIe=Object.prototype.hasOwnProperty,gIe=Object.prototype.propertyIsEnumerable,Cce=(e,t,n)=>t in e?Zft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,edt=(e,t)=>{for(var n in t||(t={}))mIe.call(t,n)&&Cce(e,n,t[n]);if($D)for(var n of $D(t))gIe.call(t,n)&&Cce(e,n,t[n]);return e},tdt=(e,t)=>{var n={};for(var r in e)mIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$D)for(var r of $D(e))t.indexOf(r)<0&&gIe.call(e,r)&&(n[r]=e[r]);return n};const ndt={},yIe=C.forwardRef((e,t)=>{const n=ut("MenuDivider",ndt,e),{children:r,className:i}=n,s=tdt(n,["children","className"]),{classNames:o,styles:a,unstyled:u}=xI(),{classes:l,cx:c}=Jft(null,{name:"Menu",classNames:o,styles:a,unstyled:u});return j.createElement(dt,edt({className:c(l.divider,i),ref:t},s))});yIe.displayName="@mantine/core/MenuDivider";var rdt=Object.defineProperty,ND=Object.getOwnPropertySymbols,vIe=Object.prototype.hasOwnProperty,_Ie=Object.prototype.propertyIsEnumerable,Ace=(e,t,n)=>t in e?rdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,idt=(e,t)=>{for(var n in t||(t={}))vIe.call(t,n)&&Ace(e,n,t[n]);if(ND)for(var n of ND(t))_Ie.call(t,n)&&Ace(e,n,t[n]);return e},sdt=(e,t)=>{var n={};for(var r in e)vIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ND)for(var r of ND(e))t.indexOf(r)<0&&_Ie.call(e,r)&&(n[r]=e[r]);return n};const odt={};function bIe(e){const t=ut("MenuDropdown",odt,e),{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=sdt(t,["children","onMouseEnter","onMouseLeave"]),o=C.useRef(),a=xI(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=Dp(r,()=>a.trigger==="hover"&&a.openDropdown()),c=Dp(i,()=>a.trigger==="hover"&&a.closeDropdown());return j.createElement(cr.Dropdown,idt({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),j.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}bIe.displayName="@mantine/core/MenuDropdown";var adt=Object.defineProperty,udt=Object.defineProperties,ldt=Object.getOwnPropertyDescriptors,Ice=Object.getOwnPropertySymbols,cdt=Object.prototype.hasOwnProperty,fdt=Object.prototype.propertyIsEnumerable,Oce=(e,t,n)=>t in e?adt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ddt=(e,t)=>{for(var n in t||(t={}))cdt.call(t,n)&&Oce(e,n,t[n]);if(Ice)for(var n of Ice(t))fdt.call(t,n)&&Oce(e,n,t[n]);return e},hdt=(e,t)=>udt(e,ldt(t)),pdt=pt((e,{color:t,radius:n})=>({item:hdt(ddt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[1]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}})),mdt=Object.defineProperty,gdt=Object.defineProperties,ydt=Object.getOwnPropertyDescriptors,DD=Object.getOwnPropertySymbols,wIe=Object.prototype.hasOwnProperty,EIe=Object.prototype.propertyIsEnumerable,Pce=(e,t,n)=>t in e?mdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vdt=(e,t)=>{for(var n in t||(t={}))wIe.call(t,n)&&Pce(e,n,t[n]);if(DD)for(var n of DD(t))EIe.call(t,n)&&Pce(e,n,t[n]);return e},_dt=(e,t)=>gdt(e,ydt(t)),bdt=(e,t)=>{var n={};for(var r in e)wIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DD)for(var r of DD(e))t.indexOf(r)<0&&EIe.call(e,r)&&(n[r]=e[r]);return n};const wdt={},xIe=C.forwardRef((e,t)=>{const n=ut("MenuItem",wdt,e),{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=bdt(n,["children","className","color","closeMenuOnClick","icon","rightSection"]),c=xI(),{classes:f,cx:d,theme:h}=pdt({radius:c.radius,color:s},{name:"Menu",classNames:c.classNames,styles:c.styles,unstyled:c.unstyled}),p=C.useRef(),m=c.getItemIndex(p.current),g=l,y=Dp(g.onMouseLeave,()=>c.setHovered(-1)),v=Dp(g.onMouseEnter,()=>c.setHovered(c.getItemIndex(p.current))),_=Dp(g.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),w=Dp(g.onFocus,()=>c.setHovered(c.getItemIndex(p.current)));return j.createElement(dt,_dt(vdt({component:"button",type:"button"},l),{tabIndex:-1,onFocus:w,className:d(f.item,i),ref:As(p,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===m?!0:void 0,onMouseEnter:v,onMouseLeave:y,onClick:_,onKeyDown:CSe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:h.dir,orientation:"vertical",onKeyDown:g.onKeydown})}),a&&j.createElement("div",{className:f.itemIcon},a),r&&j.createElement("div",{className:f.itemLabel},r),u&&j.createElement("div",{className:f.itemRightSection},u))});xIe.displayName="@mantine/core/MenuItem";const Edt=xIe;var xdt=pt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}})),Sdt=Object.defineProperty,MD=Object.getOwnPropertySymbols,SIe=Object.prototype.hasOwnProperty,TIe=Object.prototype.propertyIsEnumerable,kce=(e,t,n)=>t in e?Sdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tdt=(e,t)=>{for(var n in t||(t={}))SIe.call(t,n)&&kce(e,n,t[n]);if(MD)for(var n of MD(t))TIe.call(t,n)&&kce(e,n,t[n]);return e},Cdt=(e,t)=>{var n={};for(var r in e)SIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MD)for(var r of MD(e))t.indexOf(r)<0&&TIe.call(e,r)&&(n[r]=e[r]);return n};const Adt={},CIe=C.forwardRef((e,t)=>{const n=ut("MenuLabel",Adt,e),{children:r,className:i}=n,s=Cdt(n,["children","className"]),{classNames:o,styles:a,unstyled:u}=xI(),{classes:l,cx:c}=xdt(null,{name:"Menu",classNames:o,styles:a,unstyled:u});return j.createElement(it,Tdt({className:c(l.label,i),ref:t},s),r)});CIe.displayName="@mantine/core/MenuLabel";var Idt=Object.defineProperty,LD=Object.getOwnPropertySymbols,AIe=Object.prototype.hasOwnProperty,IIe=Object.prototype.propertyIsEnumerable,Rce=(e,t,n)=>t in e?Idt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Odt=(e,t)=>{for(var n in t||(t={}))AIe.call(t,n)&&Rce(e,n,t[n]);if(LD)for(var n of LD(t))IIe.call(t,n)&&Rce(e,n,t[n]);return e},Pdt=(e,t)=>{var n={};for(var r in e)AIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LD)for(var r of LD(e))t.indexOf(r)<0&&IIe.call(e,r)&&(n[r]=e[r]);return n};const kdt={refProp:"ref"},OIe=C.forwardRef((e,t)=>{const n=ut("MenuTarget",kdt,e),{children:r,refProp:i}=n,s=Pdt(n,["children","refProp"]);if(!pI(r))throw new Error(pIe.children);const o=xI(),a=Dp(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=Dp(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=Dp(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return j.createElement(cr.Target,Odt({refProp:i,popupType:"menu",ref:t},s),C.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});OIe.displayName="@mantine/core/MenuTarget";var Rdt=pt({dropdown:{padding:4}}),$dt=Object.defineProperty,Ndt=Object.defineProperties,Ddt=Object.getOwnPropertyDescriptors,FD=Object.getOwnPropertySymbols,PIe=Object.prototype.hasOwnProperty,kIe=Object.prototype.propertyIsEnumerable,$ce=(e,t,n)=>t in e?$dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nce=(e,t)=>{for(var n in t||(t={}))PIe.call(t,n)&&$ce(e,n,t[n]);if(FD)for(var n of FD(t))kIe.call(t,n)&&$ce(e,n,t[n]);return e},Dce=(e,t)=>Ndt(e,Ddt(t)),Mdt=(e,t)=>{var n={};for(var r in e)PIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FD)for(var r of FD(e))t.indexOf(r)<0&&kIe.call(e,r)&&(n[r]=e[r]);return n};const Ldt={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function ic(e){const t=ut("Menu",Ldt,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=Mdt(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:w}=Rdt(),[E,{setHovered:S,resetHovered:b}]=eQe(),[T,A]=Fo({value:s,defaultValue:o,finalValue:!1,onChange:a}),I=()=>{A(!1),T&&(i==null||i())},k=()=>{A(!0),!T&&(r==null||r())},$=()=>T?I():k(),{openDropdown:P,closeDropdown:N}=qct({open:k,close:I,closeDelay:h,openDelay:d}),F=z=>QXe("[data-menu-item]","[data-menu-dropdown]",z);return cs(()=>{b()},[T]),j.createElement(Qft,{value:{opened:T,toggleDropdown:$,getItemIndex:F,hovered:E,setHovered:S,closeOnItemClick:u,closeDropdown:f==="click"?I:N,openDropdown:f==="click"?k:P,closeDropdownImmediately:I,loop:l,trigger:f,radius:y,classNames:p,styles:m,unstyled:g}},j.createElement(cr,Dce(Nce({},v),{radius:y,opened:T,onChange:A,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:Dce(Nce({},p),{dropdown:w(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:I,onOpen:k}),n))}ic.displayName="@mantine/core/Menu";ic.Item=Edt;ic.Label=CIe;ic.Dropdown=bIe;ic.Target=OIe;ic.Divider=yIe;var Fdt=Object.defineProperty,Mce=Object.getOwnPropertySymbols,jdt=Object.prototype.hasOwnProperty,Bdt=Object.prototype.propertyIsEnumerable,Lce=(e,t,n)=>t in e?Fdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zdt=(e,t)=>{for(var n in t||(t={}))jdt.call(t,n)&&Lce(e,n,t[n]);if(Mce)for(var n of Mce(t))Bdt.call(t,n)&&Lce(e,n,t[n]);return e};const Udt={xs:320,sm:380,md:440,lg:620,xl:780};function Vdt(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var Hdt=pt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:zdt({position:"relative",width:s?"100vw":e.fn.size({sizes:Udt,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},Vdt(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}})),qdt=Object.defineProperty,jD=Object.getOwnPropertySymbols,RIe=Object.prototype.hasOwnProperty,$Ie=Object.prototype.propertyIsEnumerable,Fce=(e,t,n)=>t in e?qdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wdt=(e,t)=>{for(var n in t||(t={}))RIe.call(t,n)&&Fce(e,n,t[n]);if(jD)for(var n of jD(t))$Ie.call(t,n)&&Fce(e,n,t[n]);return e},Gdt=(e,t)=>{var n={};for(var r in e)RIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jD)for(var r of jD(e))t.indexOf(r)<0&&$Ie.call(e,r)&&(n[r]=e[r]);return n};const Ydt={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:Rc("modal"),exitTransitionDuration:0};function Gp(e){const t=ut("Modal",Ydt,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:w,styles:E,closeOnClickOutside:S,trapFocus:b,closeOnEscape:T,centered:A,target:I,withinPortal:k,zIndex:$,overlayBlur:P,transitionTimingFunction:N,fullScreen:F,unstyled:z,lockScroll:W,withFocusReturn:V}=t,G=Gdt(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),M=Ia(_),H=`${M}-title`,Y=`${M}-body`,{classes:L,cx:B,theme:q}=Hdt({size:l,overflow:p,centered:A,zIndex:$,fullScreen:F},{unstyled:z,classNames:w,styles:E,name:"Modal"}),Z=CY(b&&r),ue=C.useRef(null),he=As(Z,ue),fe=typeof u=="number"?u:q.colorScheme==="dark"?.85:.75;uTe(W&&r);const me=Be=>{!b&&Be.key==="Escape"&&T&&s()};C.useEffect(()=>{if(!b)return window.addEventListener("keydown",me),()=>window.removeEventListener("keydown",me)},[b]),TY({opened:r,shouldReturnFocus:b&&V});const _e=C.useRef(null);AU("mousedown",Be=>{_e.current=Be.target});const ge=()=>{_e.current===ue.current&&S&&s()};return j.createElement(mx,{withinPortal:k,target:I},j.createElement(tK,{mounted:r,duration:c,exitDuration:f,timingFunction:N,transitions:{modal:{duration:c,transition:m||(F?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},Be=>j.createElement(j.Fragment,null,j.createElement(dt,Wdt({id:M,className:B(L.root,n)},G),j.createElement("div",{style:Be.overlay},j.createElement(nK,{className:L.overlay,sx:{position:"fixed"},zIndex:0,blur:P,color:h||(q.colorScheme==="dark"?q.colors.dark[9]:q.black),opacity:fe,unstyled:z})),j.createElement("div",{role:"presentation",className:L.inner,onClick:ge,onKeyDown:Me=>{var ct;((ct=Me.target)==null?void 0:ct.getAttribute("data-mantine-stop-propagation"))!=="true"&&Me.key==="Escape"&&T&&s()},ref:he},j.createElement(XY,{className:L.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":H,"aria-describedby":Y,"aria-modal":!0,tabIndex:-1,style:Be.modal,unstyled:z,onClick:Me=>Me.stopPropagation()},(i||a)&&j.createElement("div",{className:L.header},j.createElement(it,{id:H,className:L.title},i),a&&j.createElement(Bh,{iconSize:16,onClick:s,"aria-label":d,className:L.close})),j.createElement("div",{id:Y,className:L.body},o)))))))}Gp.displayName="@mantine/core/Modal";const Kdt={xs:16,sm:22,md:26,lg:30,xl:36},Xdt={xs:10,sm:12,md:14,lg:16,xl:18};var Qdt=pt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:Kdt}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:Xdt}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),Jdt=Object.defineProperty,BD=Object.getOwnPropertySymbols,NIe=Object.prototype.hasOwnProperty,DIe=Object.prototype.propertyIsEnumerable,jce=(e,t,n)=>t in e?Jdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zdt=(e,t)=>{for(var n in t||(t={}))NIe.call(t,n)&&jce(e,n,t[n]);if(BD)for(var n of BD(t))DIe.call(t,n)&&jce(e,n,t[n]);return e},eht=(e,t)=>{var n={};for(var r in e)NIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BD)for(var r of BD(e))t.indexOf(r)<0&&DIe.call(e,r)&&(n[r]=e[r]);return n};const Bce={xs:16,sm:22,md:24,lg:26,xl:30};function MIe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=eht(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=Qdt({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return j.createElement("div",Zdt({className:p(h.defaultValue,s)},d),j.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&j.createElement(Bh,{"aria-hidden":!0,onMouseDown:o,size:Bce[l],radius:2,color:"blue",variant:"transparent",iconSize:Bce[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}MIe.displayName="@mantine/core/MultiSelect/DefaultValue";function tht({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,disableSelectedItemFiltering:o}){if(!t&&s.length===0)return e;if(!t){const u=[];for(let l=0;l<e.length;l+=1)(o||!s.some(c=>c===e[l].value&&!e[l].disabled))&&u.push(e[l]);return u}const a=[];for(let u=0;u<e.length&&(i(r,s.some(l=>l===e[u].value&&!e[u].disabled),e[u])&&a.push(e[u]),!(a.length>=n));u+=1);return a}var nht=Object.defineProperty,zD=Object.getOwnPropertySymbols,LIe=Object.prototype.hasOwnProperty,FIe=Object.prototype.propertyIsEnumerable,zce=(e,t,n)=>t in e?nht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uce=(e,t)=>{for(var n in t||(t={}))LIe.call(t,n)&&zce(e,n,t[n]);if(zD)for(var n of zD(t))FIe.call(t,n)&&zce(e,n,t[n]);return e},rht=(e,t)=>{var n={};for(var r in e)LIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zD)for(var r of zD(e))t.indexOf(r)<0&&FIe.call(e,r)&&(n[r]=e[r]);return n};const iht={xs:14,sm:18,md:20,lg:24,xl:28};function jIe(e){var t=e,{size:n,error:r,style:i}=t,s=rht(t,["size","error","style"]);const o=ps(),a=o.fn.size({size:n,sizes:iht});return j.createElement("svg",Uce({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Uce({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),j.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function BIe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?j.createElement(Bh,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):j.createElement(jIe,{error:i,size:r})}BIe.displayName="@mantine/core/SelectRightSection";var sht=Object.defineProperty,oht=Object.defineProperties,aht=Object.getOwnPropertyDescriptors,UD=Object.getOwnPropertySymbols,zIe=Object.prototype.hasOwnProperty,UIe=Object.prototype.propertyIsEnumerable,Vce=(e,t,n)=>t in e?sht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c9=(e,t)=>{for(var n in t||(t={}))zIe.call(t,n)&&Vce(e,n,t[n]);if(UD)for(var n of UD(t))UIe.call(t,n)&&Vce(e,n,t[n]);return e},Hce=(e,t)=>oht(e,aht(t)),uht=(e,t)=>{var n={};for(var r in e)zIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UD)for(var r of UD(e))t.indexOf(r)<0&&UIe.call(e,r)&&(n[r]=e[r]);return n};const lht={xs:24,sm:30,md:34,lg:44,xl:54};function VIe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=uht(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:lht}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&j.createElement(BIe,c9({},o)),styles:Hce(c9({},a),{rightSection:Hce(c9({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var cht=Object.defineProperty,fht=Object.defineProperties,dht=Object.getOwnPropertyDescriptors,qce=Object.getOwnPropertySymbols,hht=Object.prototype.hasOwnProperty,pht=Object.prototype.propertyIsEnumerable,Wce=(e,t,n)=>t in e?cht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mht=(e,t)=>{for(var n in t||(t={}))hht.call(t,n)&&Wce(e,n,t[n]);if(qce)for(var n of qce(t))pht.call(t,n)&&Wce(e,n,t[n]);return e},ght=(e,t)=>fht(e,dht(t)),yht=pt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:aa})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:ght(mht({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:aa})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}})),vht=Object.defineProperty,_ht=Object.defineProperties,bht=Object.getOwnPropertyDescriptors,VD=Object.getOwnPropertySymbols,HIe=Object.prototype.hasOwnProperty,qIe=Object.prototype.propertyIsEnumerable,Gce=(e,t,n)=>t in e?vht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J_=(e,t)=>{for(var n in t||(t={}))HIe.call(t,n)&&Gce(e,n,t[n]);if(VD)for(var n of VD(t))qIe.call(t,n)&&Gce(e,n,t[n]);return e},Yce=(e,t)=>_ht(e,bht(t)),wht=(e,t)=>{var n={};for(var r in e)HIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VD)for(var r of VD(e))t.indexOf(r)<0&&qIe.call(e,r)&&(n[r]=e[r]);return n};function Eht(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function xht(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function Kce(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=t.map(r=>typeof r=="object"?r.value:r);return e.filter(r=>n.includes(r))}const Sht={size:"sm",valueComponent:MIe,itemComponent:PY,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:Eht,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:xht,switchDirectionOnFlip:!1,zIndex:Rc("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},iK=C.forwardRef((e,t)=>{const n=ut("MultiSelect",Sht,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:w,transitionDuration:E,transitionTimingFunction:S,maxDropdownHeight:b,shadow:T,nothingFound:A,onFocus:I,onBlur:k,searchable:$,placeholder:P,filter:N,limit:F,clearSearchOnChange:z,clearable:W,clearSearchOnBlur:V,clearButtonLabel:G,variant:M,onSearchChange:H,searchValue:Y,disabled:L,initiallyOpened:B,radius:q,icon:Z,rightSection:ue,rightSectionWidth:he,creatable:fe,getCreateLabel:me,shouldCreate:_e,onCreate:ge,sx:Be,dropdownComponent:Me,onDropdownClose:ct,onDropdownOpen:Oe,maxSelectedValues:Re,withinPortal:Ye,switchDirectionOnFlip:Ut,zIndex:Ft,selectOnBlur:Je,name:Ge,dropdownPosition:gt,errorProps:at,labelProps:lt,descriptionProps:Et,clearButtonTabIndex:ve,form:Se,positionDependencies:Fe,onKeyDown:Ue,unstyled:mt,inputContainer:cn,inputWrapperOrder:Ve,readOnly:wt,withAsterisk:bt,hoverOnSearchChange:bn,disableSelectedItemFiltering:Lt}=n,Ir=wht(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk","hoverOnSearchChange","disableSelectedItemFiltering"]),{classes:Fn,cx:ar,theme:oi}=yht({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:mt,name:"MultiSelect"}),{systemStyles:yo,rest:wr}=Wf(Ir),nr=C.useRef(),Vo=C.useRef({}),Hr=Ia(_),[Zr,Pt]=C.useState(B),[Xt,rr]=C.useState(-1),[Gs,mi]=C.useState("column"),[ai,ae]=Fo({value:Y,defaultValue:"",finalValue:void 0,onChange:H}),[ne,le]=C.useState(!1),{scrollIntoView:Ee,targetRef:xe,scrollableRef:St}=aTe({duration:0,offset:5,cancelable:!1,isList:!0}),It=fe&&typeof me=="function";let je=null;const Rt=m.map(xt=>typeof xt=="string"?{label:xt,value:xt}:xt),en=ASe({data:Rt}),[ht,kn]=Fo({value:Kce(h,m),defaultValue:Kce(p,m),finalValue:[],onChange:g}),In=C.useRef(!!Re&&Re<ht.length),Gt=xt=>{if(!wt){const Rn=ht.filter(ys=>ys!==xt);kn(Rn),Re&&Rn.length<Re&&(In.current=!1)}},Xn=xt=>{ae(xt.currentTarget.value),!L&&!In.current&&$&&Pt(!0)},$r=xt=>{typeof I=="function"&&I(xt),!L&&!In.current&&$&&Pt(!0)},Qt=tht({data:en,searchable:$,searchValue:ai,limit:F,filter:N,value:ht,disableSelectedItemFiltering:Lt}),ui=(xt,Rn,ys)=>{let K=xt;for(;ys(K);)if(K=Rn(K),!Qt[K].disabled)return K;return xt};cs(()=>{rr(bn&&ai?0:-1)},[ai,bn]),cs(()=>{!L&&ht.length>m.length&&Pt(!1),Re&&ht.length<Re&&(In.current=!1),Re&&ht.length>=Re&&(In.current=!0,Pt(!1))},[ht]);const Li=xt=>{if(!wt)if(z&&ae(""),ht.includes(xt.value))Gt(xt.value);else{if(xt.creatable&&typeof ge=="function"){const Rn=ge(xt.value);typeof Rn<"u"&&Rn!==null&&kn(typeof Rn=="string"?[...ht,Rn]:[...ht,Rn.value])}else kn([...ht,xt.value]);ht.length===Re-1&&(In.current=!0,Pt(!1)),Xt===Qt.length-1&&rr(Qt.length-2),Qt.length===1&&Pt(!1)}},qr=xt=>{typeof k=="function"&&k(xt),Je&&Qt[Xt]&&Zr&&Li(Qt[Xt]),V&&ae(""),Pt(!1)},Is=xt=>{if(ne||(Ue==null||Ue(xt),wt)||xt.key!=="Backspace"&&Re&&In.current)return;const Rn=Gs==="column",ys=()=>{rr(oe=>{var ee;const de=ui(oe,ye=>ye+1,ye=>ye<Qt.length-1);return Zr&&(xe.current=Vo.current[(ee=Qt[de])==null?void 0:ee.value],Ee({alignment:Rn?"end":"start"})),de})},K=()=>{rr(oe=>{var ee;const de=ui(oe,ye=>ye-1,ye=>ye>0);return Zr&&(xe.current=Vo.current[(ee=Qt[de])==null?void 0:ee.value],Ee({alignment:Rn?"start":"end"})),de})};switch(xt.key){case"ArrowUp":{xt.preventDefault(),Pt(!0),Rn?K():ys();break}case"ArrowDown":{xt.preventDefault(),Pt(!0),Rn?ys():K();break}case"Enter":{xt.preventDefault(),Qt[Xt]&&Zr?Li(Qt[Xt]):Pt(!0);break}case" ":{$||(xt.preventDefault(),Qt[Xt]&&Zr?Li(Qt[Xt]):Pt(!0));break}case"Backspace":{ht.length>0&&ai.length===0&&(kn(ht.slice(0,-1)),Pt(!0),Re&&(In.current=!1));break}case"Home":{if(!$){xt.preventDefault(),Zr||Pt(!0);const oe=Qt.findIndex(ee=>!ee.disabled);rr(oe),Ee({alignment:Rn?"end":"start"})}break}case"End":{if(!$){xt.preventDefault(),Zr||Pt(!0);const oe=Qt.map(ee=>!!ee.disabled).lastIndexOf(!1);rr(oe),Ee({alignment:Rn?"end":"start"})}break}case"Escape":Pt(!1)}},Ti=ht.map(xt=>{let Rn=en.find(ys=>ys.value===xt&&!ys.disabled);return!Rn&&It&&(Rn={value:xt,label:xt}),Rn}).filter(xt=>!!xt).map(xt=>j.createElement(y,Yce(J_({},xt),{variant:M,disabled:L,className:Fn.value,readOnly:wt,onRemove:Rn=>{Rn.preventDefault(),Rn.stopPropagation(),Gt(xt.value)},key:xt.value,size:u,styles:f,classNames:c,radius:q}))),Ci=xt=>ht.includes(xt),Ys=()=>{var xt;ae(""),kn([]),(xt=nr.current)==null||xt.focus(),Re&&(In.current=!1)};It&&_e(ai,en)&&(je=me(ai),Qt.push({label:ai,value:ai,creatable:!0}));const gs=!wt&&(Qt.length>0?Zr:Zr&&!!A);return cs(()=>{const xt=gs?Oe:ct;typeof xt=="function"&&xt()},[gs]),j.createElement(Ts.Wrapper,J_(J_({required:s,id:Hr,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:Be,errorProps:at,descriptionProps:Et,labelProps:lt,inputContainer:cn,inputWrapperOrder:Ve,unstyled:mt,withAsterisk:bt},yo),d),j.createElement(h0,{opened:gs,transition:w,transitionDuration:E,shadow:"sm",withinPortal:Ye,__staticSelector:"MultiSelect",onDirectionChange:mi,switchDirectionOnFlip:Ut,zIndex:Ft,dropdownPosition:gt,positionDependencies:[...Fe,ai],classNames:c,styles:f,unstyled:mt},j.createElement(h0.Target,null,j.createElement("div",{className:Fn.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":Zr&&gs?`${Hr}-items`:null,"aria-controls":Hr,"aria-expanded":Zr,onMouseLeave:()=>rr(-1),tabIndex:-1},j.createElement("input",{type:"hidden",name:Ge,value:ht.join(","),form:Se,disabled:L}),j.createElement(Ts,J_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:M,disabled:L,invalid:!!l,required:s,radius:q,icon:Z,unstyled:mt,onMouseDown:xt=>{var Rn;xt.preventDefault(),!L&&!In.current&&Pt(!Zr),(Rn=nr.current)==null||Rn.focus()},classNames:Yce(J_({},c),{input:ar({[Fn.input]:!$},c==null?void 0:c.input)})},VIe({theme:oi,rightSection:ue,rightSectionWidth:he,styles:f,size:u,shouldClear:W&&ht.length>0,clearButtonLabel:G,onClear:Ys,error:l,disabled:L,clearButtonTabIndex:ve,readOnly:wt})),j.createElement("div",{className:Fn.values},Ti,j.createElement("input",J_({ref:As(t,nr),type:"search",id:Hr,className:ar(Fn.searchInput,{[Fn.searchInputPointer]:!$,[Fn.searchInputInputHidden]:!Zr&&ht.length>0||!$&&ht.length>0,[Fn.searchInputEmpty]:ht.length===0}),onKeyDown:Is,value:ai,onChange:Xn,onFocus:$r,onBlur:qr,readOnly:!$||In.current||wt,placeholder:ht.length===0?P:void 0,disabled:L,"data-mantine-stop-propagation":Zr,autoComplete:"off",onCompositionStart:()=>le(!0),onCompositionEnd:()=>le(!1)},wr)))))),j.createElement(h0.Dropdown,{component:Me||d4,maxHeight:b,direction:Gs,id:Hr,innerRef:St,__staticSelector:"MultiSelect",classNames:c,styles:f},j.createElement(OY,{data:Qt,hovered:Xt,classNames:c,styles:f,uuid:Hr,__staticSelector:"MultiSelect",onItemHover:rr,onItemSelect:Li,itemsRefs:Vo,itemComponent:v,size:u,nothingFound:A,isItemSelected:Ci,creatable:fe&&!!je,createLabel:je,unstyled:mt}))))});iK.displayName="@mantine/core/MultiSelect";var Tht=Object.defineProperty,Cht=Object.defineProperties,Aht=Object.getOwnPropertyDescriptors,Xce=Object.getOwnPropertySymbols,Iht=Object.prototype.hasOwnProperty,Oht=Object.prototype.propertyIsEnumerable,Qce=(e,t,n)=>t in e?Tht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jce=(e,t)=>{for(var n in t||(t={}))Iht.call(t,n)&&Qce(e,n,t[n]);if(Xce)for(var n of Xce(t))Oht.call(t,n)&&Qce(e,n,t[n]);return e},Pht=(e,t)=>Cht(e,Aht(t)),kht=pt((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:Pht(Jce({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Jce({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}}),Rht=Object.defineProperty,HD=Object.getOwnPropertySymbols,WIe=Object.prototype.hasOwnProperty,GIe=Object.prototype.propertyIsEnumerable,Zce=(e,t,n)=>t in e?Rht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$ht=(e,t)=>{for(var n in t||(t={}))WIe.call(t,n)&&Zce(e,n,t[n]);if(HD)for(var n of HD(t))GIe.call(t,n)&&Zce(e,n,t[n]);return e},Nht=(e,t)=>{var n={};for(var r in e)WIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HD)for(var r of HD(e))t.indexOf(r)<0&&GIe.call(e,r)&&(n[r]=e[r]);return n};const Dht={variant:"light",childrenOffset:"lg"},YIe=C.forwardRef((e,t)=>{const n=ut("NavLink",Dht,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:w,disabled:E,onClick:S}=n,b=Nht(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:T,cx:A}=kht({color:d,variant:h,noWrap:p,childrenOffset:w,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[I,k]=Fo({value:g,defaultValue:y,finalValue:!1,onChange:v}),$=!!m,P=N=>{$?(N.preventDefault(),S==null||S(N),k(!I)):S==null||S(N)};return j.createElement(j.Fragment,null,j.createElement(Nm,$ht({ref:t,className:A(T.root,a),"data-active":f||void 0,onClick:P,unstyled:c,"data-expanded":I||void 0,"data-disabled":E||void 0,disabled:E},b),s&&j.createElement("span",{className:T.icon},s),j.createElement("span",{className:T.body},j.createElement(it,{component:"span",size:"sm",className:T.label},r),j.createElement(it,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:T.description},i)),($||o)&&j.createElement("span",{className:T.rightSection,"data-rotate":I&&!_||void 0},$?o||j.createElement(yet,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),j.createElement(_Te,{in:I},j.createElement("div",{className:T.children},m)))});YIe.displayName="@mantine/core/NavLink";const KIe=YIe,Mht=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function efe({direction:e,size:t}){return j.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const XIe={xs:20,sm:24,md:30,lg:34,xl:36};var Lht=pt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:XIe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}})),Fht=Object.defineProperty,jht=Object.defineProperties,Bht=Object.getOwnPropertyDescriptors,qD=Object.getOwnPropertySymbols,QIe=Object.prototype.hasOwnProperty,JIe=Object.prototype.propertyIsEnumerable,tfe=(e,t,n)=>t in e?Fht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f9=(e,t)=>{for(var n in t||(t={}))QIe.call(t,n)&&tfe(e,n,t[n]);if(qD)for(var n of qD(t))JIe.call(t,n)&&tfe(e,n,t[n]);return e},zht=(e,t)=>jht(e,Bht(t)),Uht=(e,t)=>{var n={};for(var r in e)QIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qD)for(var r of qD(e))t.indexOf(r)<0&&JIe.call(e,r)&&(n[r]=e[r]);return n};const Vht={type:"text",size:"sm",__staticSelector:"TextInput"},vx=C.forwardRef((e,t)=>{const n=pCe("TextInput",Vht,e),{inputProps:r,wrapperProps:i}=n,s=Uht(n,["inputProps","wrapperProps"]);return j.createElement(Ts.Wrapper,f9({},i),j.createElement(Ts,zht(f9(f9({},r),s),{ref:t})))});vx.displayName="@mantine/core/TextInput";var Hht=Object.defineProperty,qht=Object.defineProperties,Wht=Object.getOwnPropertyDescriptors,WD=Object.getOwnPropertySymbols,ZIe=Object.prototype.hasOwnProperty,eOe=Object.prototype.propertyIsEnumerable,nfe=(e,t,n)=>t in e?Hht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ght=(e,t)=>{for(var n in t||(t={}))ZIe.call(t,n)&&nfe(e,n,t[n]);if(WD)for(var n of WD(t))eOe.call(t,n)&&nfe(e,n,t[n]);return e},Yht=(e,t)=>qht(e,Wht(t)),Kht=(e,t)=>{var n={};for(var r in e)ZIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WD)for(var r of WD(e))t.indexOf(r)<0&&eOe.call(e,r)&&(n[r]=e[r]);return n};const Xht=e=>e||"",Qht=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},rfe={xs:10,sm:14,md:16,lg:18,xl:20},Jht={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:Xht,parser:Qht,type:"text"},tOe=C.forwardRef((e,t)=>{const n=ut("NumberInput",Jht,e),{readOnly:r,disabled:i,value:s,onChange:o,decimalSeparator:a,min:u,max:l,startValue:c,step:f,stepHoldInterval:d,stepHoldDelay:h,onBlur:p,onFocus:m,onKeyDown:g,onKeyUp:y,hideControls:v,radius:_,variant:w,precision:E,removeTrailingZeros:S,defaultValue:b,noClampOnBlur:T,handlersRef:A,classNames:I,styles:k,size:$,rightSection:P,rightSectionWidth:N,formatter:F,parser:z,inputMode:W,unstyled:V,type:G}=n,M=Kht(n,["readOnly","disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:H,cx:Y,theme:L}=Lht({radius:_,size:$},{classNames:I,styles:k,unstyled:V,name:"NumberInput"}),B=Ve=>{if(Ve===void 0)return;let wt=Ve.toFixed(E);return S&&E>0&&(wt=wt.replace(new RegExp(`[0]{0,${E}}$`),""),(wt.endsWith(".")||wt.endsWith(a))&&(wt=wt.slice(0,-1))),wt},[q,Z]=C.useState(!1),[ue,he]=C.useState(typeof s=="number"?s:typeof b=="number"?b:void 0),fe=typeof s=="number"?s:ue,[me,_e]=C.useState(typeof fe=="number"?B(fe):""),ge=C.useRef(),Be=Ve=>{Ve!==ue&&!Number.isNaN(Ve)&&(typeof o=="function"&&o(Ve),he(Ve))},Me=(Ve="")=>{let wt=typeof Ve=="number"?String(Ve):Ve;return a&&(wt=wt.replace(/\./g,a)),F(wt)},ct=Ve=>{let wt=Ve;return a&&(wt=wt.replace(new RegExp(`\\${a}`,"g"),".")),z(wt)},Oe=typeof u=="number"?u:-1/0,Re=typeof l=="number"?l:1/0,Ye=C.useRef();Ye.current=()=>{var Ve,wt,bt;if(ue===void 0)Be((Ve=c??u)!=null?Ve:0),_e((bt=(wt=B(c))!=null?wt:B(u))!=null?bt:"0");else{const bn=B(Tl(ue+f,Oe,Re));Be(parseFloat(bn)),_e(bn)}};const Ut=C.useRef();Ut.current=()=>{var Ve,wt,bt;if(ue===void 0)Be((Ve=c??u)!=null?Ve:0),_e((bt=(wt=B(c))!=null?wt:B(u))!=null?bt:"0");else{const bn=B(Tl(ue-f,Oe,Re));Be(parseFloat(bn)),_e(bn)}},iTe(A,{increment:Ye.current,decrement:Ut.current}),C.useEffect(()=>{typeof s=="number"&&!q&&(he(s),_e(B(s))),b===void 0&&s===void 0&&!q&&(he(s),_e(""))},[s,E]);const Ft=h!==void 0&&d!==void 0,Je=C.useRef(null),Ge=C.useRef(0),gt=()=>{Je.current&&window.clearTimeout(Je.current),Je.current=null,Ge.current=0},at=Ve=>{Ve?Ye.current():Ut.current(),Ge.current+=1},lt=Ve=>{if(at(Ve),Ft){const wt=typeof d=="number"?d:d(Ge.current);Je.current=window.setTimeout(()=>lt(Ve),wt)}},Et=(Ve,wt)=>{Ve.preventDefault(),ge.current.focus(),at(wt),Ft&&(Je.current=window.setTimeout(()=>lt(wt),h))};C.useEffect(()=>(gt(),gt),[]);const ve=j.createElement("div",{className:H.rightSection},j.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:fe>=l,className:Y(H.control,H.controlUp),onPointerDown:Ve=>{Et(Ve,!0)},onPointerUp:gt,onPointerLeave:gt},j.createElement(efe,{size:L.fn.size({size:$,sizes:rfe}),direction:"up"})),j.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:fe<=u,className:Y(H.control,H.controlDown),onPointerDown:Ve=>{Et(Ve,!1)},onPointerUp:gt,onPointerLeave:gt},j.createElement(efe,{size:L.fn.size({size:$,sizes:rfe}),direction:"down"}))),Se=Ve=>{if(Ve.nativeEvent.isComposing)return;const bt=Ve.target.value,bn=ct(bt);_e(bn),bt===""||bt==="-"?Be(void 0):bt.trim()!==""&&!Number.isNaN(bn)&&Be(parseFloat(bn))},Fe=Ve=>{var wt;if(Ve.target.value==="")_e(""),Be(void 0);else{let bt=Ve.target.value;(bt[0]===`${a}`||bt[0]===".")&&(bt=`0${bt}`);const bn=ct(bt),Lt=Tl(parseFloat(bn),Oe,Re);Number.isNaN(Lt)?_e((wt=B(fe))!=null?wt:""):T||(_e(B(Lt)),Be(parseFloat(B(Lt))))}Z(!1),typeof p=="function"&&p(Ve)},Ue=Ve=>{Z(!0),typeof m=="function"&&m(Ve)},mt=Ve=>{if(typeof g=="function"&&g(Ve),Ve.repeat&&Ft&&(Ve.key==="ArrowUp"||Ve.key==="ArrowDown")){Ve.preventDefault();return}r||(Ve.key==="ArrowUp"?Et(Ve,!0):Ve.key==="ArrowDown"&&Et(Ve,!1))},cn=Ve=>{typeof y=="function"&&y(Ve),(Ve.key==="ArrowUp"||Ve.key==="ArrowDown")&&gt()};return j.createElement(vx,Yht(Ght({},M),{type:G,variant:w,value:Me(me),disabled:i,readOnly:r,ref:As(ge,t),onChange:Se,onBlur:Fe,onFocus:Ue,onKeyDown:mt,onKeyUp:cn,rightSection:P||(i||r||v||w==="unstyled"?null:ve),rightSectionWidth:N||L.fn.size({size:$,sizes:XIe})+1,radius:_,max:l,min:u,step:f,size:$,styles:k,classNames:I,inputMode:W||Mht(f,E,AZe()),__staticSelector:"NumberInput",unstyled:V}))});tOe.displayName="@mantine/core/NumberInput";const ife={xs:3,sm:5,md:8,lg:12,xl:16},Zht=PJe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var ept=pt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:ife}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${Zht} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:ife})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const nOe=C.createContext(!1),tpt=nOe.Provider,npt=()=>C.useContext(nOe);function rOe({children:e,openDelay:t=0,closeDelay:n=0}){return j.createElement(tpt,{value:!0},j.createElement(Mit,{delay:{open:t,close:n}},e))}rOe.displayName="@mantine/core/TooltipGroup";var rpt=Object.defineProperty,ipt=Object.defineProperties,spt=Object.getOwnPropertyDescriptors,sfe=Object.getOwnPropertySymbols,opt=Object.prototype.hasOwnProperty,apt=Object.prototype.propertyIsEnumerable,ofe=(e,t,n)=>t in e?rpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,afe=(e,t)=>{for(var n in t||(t={}))opt.call(t,n)&&ofe(e,n,t[n]);if(sfe)for(var n of sfe(t))apt.call(t,n)&&ofe(e,n,t[n]);return e},upt=(e,t)=>ipt(e,spt(t));function lpt(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var iOe=pt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:upt(afe(afe({},e.fn.fontStyles()),lpt(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const sOe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function cpt({offset:e,position:t}){const[n,r]=C.useState(!1),i=C.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=HY({placement:t,middleware:[zY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=C.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return C.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=Wp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating.current,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var fpt=Object.defineProperty,dpt=Object.defineProperties,hpt=Object.getOwnPropertyDescriptors,GD=Object.getOwnPropertySymbols,oOe=Object.prototype.hasOwnProperty,aOe=Object.prototype.propertyIsEnumerable,ufe=(e,t,n)=>t in e?fpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d9=(e,t)=>{for(var n in t||(t={}))oOe.call(t,n)&&ufe(e,n,t[n]);if(GD)for(var n of GD(t))aOe.call(t,n)&&ufe(e,n,t[n]);return e},h9=(e,t)=>dpt(e,hpt(t)),ppt=(e,t)=>{var n={};for(var r in e)oOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GD)for(var r of GD(e))t.indexOf(r)<0&&aOe.call(e,r)&&(n[r]=e[r]);return n};const mpt={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Rc("popover")};function uOe(e){var t;const n=ut("TooltipFloating",mpt,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,w=ppt(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:E,x:S,y:b,opened:T,boundaryRef:A,floating:I,setOpened:k}=cpt({offset:p,position:m}),{classes:$,cx:P}=iOe({radius:f,color:d,multiline:g,width:y},{name:"TooltipFloating",classNames:u,styles:l,unstyled:c});if(!pI(r))throw new Error(sOe.children);const N=As(A,r.ref),F=W=>{var V,G;(G=(V=r.props).onMouseEnter)==null||G.call(V,W),E(W),k(!0)},z=W=>{var V,G;(G=(V=r.props).onMouseLeave)==null||G.call(V,W),k(!1)};return j.createElement(j.Fragment,null,j.createElement(mx,{withinPortal:s},j.createElement(dt,h9(d9({},w),{ref:I,className:P($.tooltip,a),style:h9(d9({},o),{zIndex:v,display:!_&&T?"block":"none",top:b??"",left:(t=Math.round(S))!=null?t:""})}),h)),C.cloneElement(r,h9(d9({},r.props),{[i]:N,onMouseEnter:F,onMouseLeave:z})))}uOe.displayName="@mantine/core/TooltipFloating";function gpt(e){const[t,n]=C.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=npt(),o=Ia(),{delay:a,currentId:u,setCurrentId:l}=G2e(),c=C.useCallback(T=>{n(T),T&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:w}={}}}=HY({placement:e.position,open:i,onOpenChange:c,middleware:[j2e(e.offset),zY({padding:8}),B2e(),U2e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[z2e()]:[]]}),{getReferenceProps:E,getFloatingProps:S}=Yit([Dit(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),Wit(m,{enabled:e.events.focus,keyboardOnly:!0}),Git(m,{role:"tooltip"}),qit(m,{enabled:typeof e.opened===void 0}),Lit(m,{id:o})]);return K2e({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),cs(()=>{var T;(T=e.onPositionChange)==null||T.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:w,reference:h,floating:p,getFloatingProps:S,getReferenceProps:E,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var ypt=Object.defineProperty,vpt=Object.defineProperties,_pt=Object.getOwnPropertyDescriptors,YD=Object.getOwnPropertySymbols,lOe=Object.prototype.hasOwnProperty,cOe=Object.prototype.propertyIsEnumerable,lfe=(e,t,n)=>t in e?ypt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FS=(e,t)=>{for(var n in t||(t={}))lOe.call(t,n)&&lfe(e,n,t[n]);if(YD)for(var n of YD(t))cOe.call(t,n)&&lfe(e,n,t[n]);return e},bpt=(e,t)=>vpt(e,_pt(t)),wpt=(e,t)=>{var n={};for(var r in e)lOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YD)for(var r of YD(e))t.indexOf(r)<0&&cOe.call(e,r)&&(n[r]=e[r]);return n};const Ept={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:Rc("popover"),positionDependencies:[]},m4=C.forwardRef((e,t)=>{const n=C.useRef(null),r=ut("Tooltip",Ept,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:w,arrowSize:E,arrowOffset:S,arrowRadius:b,arrowPosition:T,offset:A,transition:I,transitionDuration:k,multiline:$,width:P,events:N,zIndex:F,disabled:z,positionDependencies:W,onClick:V,onMouseEnter:G,onMouseLeave:M,inline:H}=r,Y=wpt(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:L,cx:B,theme:q}=iOe({radius:h,color:p,width:P,multiline:$},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),Z=gpt({position:lCe(q.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:N,arrowRef:n,arrowOffset:S,offset:A+(w?E/2:0),positionDependencies:[...W,i],inline:H});if(!pI(i))throw new Error(sOe.children);const ue=As(Z.reference,i.ref,t);return j.createElement(j.Fragment,null,j.createElement(mx,{withinPortal:d},j.createElement(EI,{mounted:!z&&Z.opened,transition:I,duration:Z.isGroupPhase?10:k},he=>{var fe,me;return j.createElement(dt,FS(FS({},Y),Z.getFloatingProps({ref:Z.floating,className:L.tooltip,style:bpt(FS(FS({},v),he),{zIndex:F,top:(fe=Z.y)!=null?fe:0,left:(me=Z.x)!=null?me:0})})),a,j.createElement(qY,{ref:n,arrowX:Z.arrowX,arrowY:Z.arrowY,visible:w,withBorder:!1,position:Z.placement,arrowSize:E,arrowOffset:S,arrowRadius:b,arrowPosition:T,className:L.arrow}))})),C.cloneElement(i,Z.getReferenceProps(FS({onClick:V,onMouseEnter:G,onMouseLeave:M,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:ue,className:B(_,i.props.className)},i.props))))});m4.Group=rOe;m4.Floating=uOe;m4.displayName="@mantine/core/Tooltip";const Yp=m4;var xpt=Object.defineProperty,Spt=Object.defineProperties,Tpt=Object.getOwnPropertyDescriptors,KD=Object.getOwnPropertySymbols,fOe=Object.prototype.hasOwnProperty,dOe=Object.prototype.propertyIsEnumerable,cfe=(e,t,n)=>t in e?xpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BU=(e,t)=>{for(var n in t||(t={}))fOe.call(t,n)&&cfe(e,n,t[n]);if(KD)for(var n of KD(t))dOe.call(t,n)&&cfe(e,n,t[n]);return e},hOe=(e,t)=>Spt(e,Tpt(t)),ffe=(e,t)=>{var n={};for(var r in e)fOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KD)for(var r of KD(e))t.indexOf(r)<0&&dOe.call(e,r)&&(n[r]=e[r]);return n};function Cpt(e){return e.reduce((t,n)=>(t.sections.push(hOe(BU({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const Apt={size:"md",radius:"sm",striped:!1,animate:!1,label:""},pOe=C.forwardRef((e,t)=>{const n=ut("Progress",Apt,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=ffe(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=ept({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),w=Array.isArray(p)?Cpt(p).map((E,S)=>{var b=E,{tooltip:T,accumulated:A,value:I,label:k,color:$}=b,P=ffe(b,["tooltip","accumulated","value","label","color"]);return j.createElement(Yp.Floating,{label:T,disabled:!T,key:S},j.createElement(dt,hOe(BU({},P),{className:v(y.bar,P.className),sx:{width:`${I}%`,left:`${A}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:$||_.primaryColor}).background}}),k&&j.createElement(it,{className:y.label},k)))}):null;return j.createElement(dt,BU({className:v(y.root,r),ref:t},g),w||j.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?j.createElement(it,{className:y.label},c):""))});pOe.displayName="@mantine/core/Progress";var Ipt=Object.defineProperty,dfe=Object.getOwnPropertySymbols,Opt=Object.prototype.hasOwnProperty,Ppt=Object.prototype.propertyIsEnumerable,hfe=(e,t,n)=>t in e?Ipt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kpt=(e,t)=>{for(var n in t||(t={}))Opt.call(t,n)&&hfe(e,n,t[n]);if(dfe)for(var n of dfe(t))Ppt.call(t,n)&&hfe(e,n,t[n]);return e};function Rpt(e){return j.createElement("svg",kpt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),j.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const mOe=C.createContext(null),$pt=mOe.Provider,Npt=()=>C.useContext(mOe);var Dpt=Object.defineProperty,XD=Object.getOwnPropertySymbols,gOe=Object.prototype.hasOwnProperty,yOe=Object.prototype.propertyIsEnumerable,pfe=(e,t,n)=>t in e?Dpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mfe=(e,t)=>{for(var n in t||(t={}))gOe.call(t,n)&&pfe(e,n,t[n]);if(XD)for(var n of XD(t))yOe.call(t,n)&&pfe(e,n,t[n]);return e},Mpt=(e,t)=>{var n={};for(var r in e)gOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XD)for(var r of XD(e))t.indexOf(r)<0&&yOe.call(e,r)&&(n[r]=e[r]);return n};const Lpt={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},vOe=C.forwardRef((e,t)=>{const n=ut("RadioGroup",Lpt,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=Mpt(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),m=Ia(h),[g,y]=Fo({value:i,defaultValue:s,finalValue:"",onChange:o}),v=_=>y(_.currentTarget.value);return j.createElement($pt,{value:{value:g,onChange:v,size:l,name:m}},j.createElement(Ts.Wrapper,mfe(mfe({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),j.createElement(oAe,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});vOe.displayName="@mantine/core/RadioGroup";var Fpt=Object.defineProperty,jpt=Object.defineProperties,Bpt=Object.getOwnPropertyDescriptors,gfe=Object.getOwnPropertySymbols,zpt=Object.prototype.hasOwnProperty,Upt=Object.prototype.propertyIsEnumerable,yfe=(e,t,n)=>t in e?Fpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vpt=(e,t)=>{for(var n in t||(t={}))zpt.call(t,n)&&yfe(e,n,t[n]);if(gfe)for(var n of gfe(t))Upt.call(t,n)&&yfe(e,n,t[n]);return e},Hpt=(e,t)=>jpt(e,Bpt(t));const p9={xs:16,sm:20,md:24,lg:30,xl:36},YP={xs:6,sm:8,md:10,lg:14,xl:16};var qpt=pt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:YP,size:t}),height:e.fn.size({sizes:YP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:YP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:YP,size:t})/2}px)`},radio:Hpt(Vpt({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:p9,size:t}),height:e.fn.size({sizes:p9,size:t}),borderRadius:e.fn.size({sizes:p9,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}}),Wpt=Object.defineProperty,QD=Object.getOwnPropertySymbols,_Oe=Object.prototype.hasOwnProperty,bOe=Object.prototype.propertyIsEnumerable,vfe=(e,t,n)=>t in e?Wpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KP=(e,t)=>{for(var n in t||(t={}))_Oe.call(t,n)&&vfe(e,n,t[n]);if(QD)for(var n of QD(t))bOe.call(t,n)&&vfe(e,n,t[n]);return e},Gpt=(e,t)=>{var n={};for(var r in e)_Oe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QD)for(var r of QD(e))t.indexOf(r)<0&&bOe.call(e,r)&&(n[r]=e[r]);return n};const Ypt={icon:Rpt,transitionDuration:100,size:"sm",labelPosition:"right"},JD=C.forwardRef((e,t)=>{var n,r;const i=ut("Radio",Ypt,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:w,description:E,error:S}=i,b=Gpt(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),T=Npt(),A=(n=T==null?void 0:T.size)!=null?n:l,I=e.size?l:A,{classes:k}=qpt({color:d,size:I,transitionDuration:y,labelPosition:w,error:!!S},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:$,rest:P}=Wf(b),N=Ia(a),F=T?{checked:T.value===P.value,name:(r=P.name)!=null?r:T.name,onChange:T.onChange}:{};return j.createElement(JY,KP(KP({className:s,sx:m,style:o,id:N,size:I,labelPosition:w,label:u,description:E,error:S,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":F.checked||void 0},$),v),j.createElement("div",{className:k.inner},j.createElement("input",KP(KP({ref:t,className:k.radio,type:"radio",id:N,disabled:f},P),F)),j.createElement(g,{className:k.icon,"aria-hidden":!0})))});JD.displayName="@mantine/core/Radio";JD.Group=vOe;var Kpt=Object.defineProperty,Xpt=Object.defineProperties,Qpt=Object.getOwnPropertyDescriptors,_fe=Object.getOwnPropertySymbols,Jpt=Object.prototype.hasOwnProperty,Zpt=Object.prototype.propertyIsEnumerable,bfe=(e,t,n)=>t in e?Kpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XP=(e,t)=>{for(var n in t||(t={}))Jpt.call(t,n)&&bfe(e,n,t[n]);if(_fe)for(var n of _fe(t))Zpt.call(t,n)&&bfe(e,n,t[n]);return e},emt=(e,t)=>Xpt(e,Qpt(t));const jR=4,wfe={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var tmt=pt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:emt(XP(XP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:wfe[a in wfe?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:XP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:XP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:jR},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}}),nmt=Object.defineProperty,ZD=Object.getOwnPropertySymbols,wOe=Object.prototype.hasOwnProperty,EOe=Object.prototype.propertyIsEnumerable,Efe=(e,t,n)=>t in e?nmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rmt=(e,t)=>{for(var n in t||(t={}))wOe.call(t,n)&&Efe(e,n,t[n]);if(ZD)for(var n of ZD(t))EOe.call(t,n)&&Efe(e,n,t[n]);return e},imt=(e,t)=>{var n={};for(var r in e)wOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZD)for(var r of ZD(e))t.indexOf(r)<0&&EOe.call(e,r)&&(n[r]=e[r]);return n};const smt={disabled:!1,size:"sm",transitionDuration:200},xOe=C.forwardRef((e,t)=>{var n,r,i,s;const o=ut("SegmentedControl",smt,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:w,defaultValue:E,orientation:S,unstyled:b}=o,T=imt(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),A=ps(),I=a4(),k=A.respectReducedMotion?I:!1,$=l.map(he=>typeof he=="string"?{label:he,value:he}:he),P=C.useRef(),[N,F]=C.useState(!1),[z,W]=Fo({value:f,defaultValue:E,finalValue:Array.isArray($)&&(s=(i=(n=$.find(he=>!he.disabled))==null?void 0:n.value)!=null?i:(r=$[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:V,cx:G}=tmt({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:k||!N,transitionDuration:y,transitionTimingFunction:v,orientation:S},{classNames:_,styles:w,unstyled:b,name:"SegmentedControl"}),[M,H]=C.useState({width:0,height:0,translate:[0,0]}),Y=Ia(c),L=C.useRef({}),[B,q]=yc();SY(()=>{P.current?F(!0):(P.current=!0,F(!1))}),C.useEffect(()=>{if(z in L.current&&B.current){const he=L.current[z],fe=he.getBoundingClientRect(),me=he.offsetWidth/fe.width,_e=fe.width*me||0,ge=fe.height*me||0,Be=q.width-he.parentElement.offsetLeft+jR-_e,Me=he.parentElement.offsetLeft-jR;H({width:_e,height:ge,translate:[A.dir==="rtl"?Be:Me,he.parentElement.offsetTop-jR]})}},[z,q]);const Z=$.map(he=>j.createElement("div",{className:G(V.control,{[V.controlActive]:z===he.value}),key:he.value},j.createElement("input",{className:V.input,disabled:u||he.disabled,type:"radio",name:Y,value:he.value,id:`${Y}-${he.value}`,checked:z===he.value,onChange:()=>W(he.value)}),j.createElement("label",{className:G(V.label,{[V.labelActive]:z===he.value,[V.disabled]:u||he.disabled}),htmlFor:`${Y}-${he.value}`,ref:fe=>{L.current[he.value]=fe}},he.label))),ue=As(B,t);return $.length===0?null:j.createElement(dt,rmt({className:G(V.root,a),ref:ue},T),typeof z=="string"&&N&&j.createElement(dt,{component:"span",className:V.active,sx:{width:M.width,height:M.height,transform:`translate(${M.translate[0]}px, ${M.translate[1]}px )`}}),Z)});xOe.displayName="@mantine/core/SegmentedControl";function omt({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r){if(n){if(n>=e.length)return e;const l=e.indexOf(a),c=l+n,f=c-e.length;return f>0?e.slice(l-f):e.slice(l,c)}return e}const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var amt=pt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}})),umt=Object.defineProperty,lmt=Object.defineProperties,cmt=Object.getOwnPropertyDescriptors,e3=Object.getOwnPropertySymbols,SOe=Object.prototype.hasOwnProperty,TOe=Object.prototype.propertyIsEnumerable,xfe=(e,t,n)=>t in e?umt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jS=(e,t)=>{for(var n in t||(t={}))SOe.call(t,n)&&xfe(e,n,t[n]);if(e3)for(var n of e3(t))TOe.call(t,n)&&xfe(e,n,t[n]);return e},m9=(e,t)=>lmt(e,cmt(t)),fmt=(e,t)=>{var n={};for(var r in e)SOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&e3)for(var r of e3(e))t.indexOf(r)<0&&TOe.call(e,r)&&(n[r]=e[r]);return n};function dmt(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function hmt(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const pmt={required:!1,size:"sm",shadow:"sm",itemComponent:PY,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:dmt,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:hmt,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:Rc("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},Kp=C.forwardRef((e,t)=>{const n=pCe("Select",pmt,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:w,filter:E,maxDropdownHeight:S,searchable:b,clearable:T,nothingFound:A,clearButtonLabel:I,limit:k,disabled:$,onSearchChange:P,searchValue:N,rightSection:F,rightSectionWidth:z,creatable:W,getCreateLabel:V,shouldCreate:G,selectOnBlur:M,onCreate:H,dropdownComponent:Y,onDropdownClose:L,onDropdownOpen:B,withinPortal:q,switchDirectionOnFlip:Z,zIndex:ue,name:he,dropdownPosition:fe,allowDeselect:me,placeholder:_e,filterDataOnExactSearchMatch:ge,clearButtonTabIndex:Be,form:Me,positionDependencies:ct,readOnly:Oe,hoverOnSearchChange:Re}=n,Ye=fmt(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly","hoverOnSearchChange"]),{classes:Ut,cx:Ft,theme:Je}=amt(),[Ge,gt]=C.useState(g),[at,lt]=C.useState(-1),Et=C.useRef(),ve=C.useRef({}),[Se,Fe]=C.useState("column"),Ue=Se==="column",{scrollIntoView:mt,targetRef:cn,scrollableRef:Ve}=aTe({duration:0,offset:5,cancelable:!1,isList:!0}),wt=me===void 0?T:me,bt=je=>{if(Ge!==je){gt(je);const Rt=je?B:L;typeof Rt=="function"&&Rt()}},bn=W&&typeof V=="function";let Lt=null;const Ir=o.map(je=>typeof je=="string"?{label:je,value:je}:je),Fn=ASe({data:Ir}),[ar,oi,yo]=Fo({value:a,defaultValue:u,finalValue:null,onChange:l}),wr=Fn.find(je=>je.value===ar),[nr,Vo]=Fo({value:N,defaultValue:(wr==null?void 0:wr.label)||"",finalValue:void 0,onChange:P}),Hr=je=>{Vo(je),b&&typeof P=="function"&&P(je)},Zr=()=>{var je;Oe||(oi(null),yo||Hr(""),(je=Et.current)==null||je.focus())};C.useEffect(()=>{const je=Fn.find(Rt=>Rt.value===ar);je?Hr(je.label):(!bn||!ar)&&Hr("")},[ar]),C.useEffect(()=>{wr&&(!b||!Ge)&&Hr(wr.label)},[wr==null?void 0:wr.label]);const Pt=je=>{if(!Oe)if(wt&&(wr==null?void 0:wr.value)===je.value)oi(null),bt(!1);else{if(je.creatable&&typeof H=="function"){const Rt=H(je.value);typeof Rt<"u"&&Rt!==null&&oi(typeof Rt=="string"?Rt:Rt.value)}else oi(je.value);yo||Hr(je.label),lt(-1),bt(!1),Et.current.focus()}},Xt=omt({data:Fn,searchable:b,limit:k,searchValue:nr,filter:E,filterDataOnExactSearchMatch:ge,value:ar});bn&&G(nr,Xt)&&(Lt=V(nr),Xt.push({label:nr,value:nr,creatable:!0}));const rr=(je,Rt,en)=>{let ht=je;for(;en(ht);)if(ht=Rt(ht),!Xt[ht].disabled)return ht;return je};cs(()=>{lt(Re&&nr?0:-1)},[nr,Re]);const Gs=ar?Xt.findIndex(je=>je.value===ar):0,mi=!Oe&&(Xt.length>0?Ge:Ge&&!!A),ai=()=>{lt(je=>{var Rt;const en=rr(je,ht=>ht-1,ht=>ht>0);return cn.current=ve.current[(Rt=Xt[en])==null?void 0:Rt.value],mi&&mt({alignment:Ue?"start":"end"}),en})},ae=()=>{lt(je=>{var Rt;const en=rr(je,ht=>ht+1,ht=>ht<Xt.length-1);return cn.current=ve.current[(Rt=Xt[en])==null?void 0:Rt.value],mi&&mt({alignment:Ue?"end":"start"}),en})},ne=()=>window.setTimeout(()=>{var je;cn.current=ve.current[(je=Xt[Gs])==null?void 0:je.value],mt({alignment:Ue?"end":"start"})},0);cs(()=>{mi&&ne()},[mi]);const le=je=>{switch(typeof f=="function"&&f(je),je.key){case"ArrowUp":{je.preventDefault(),Ge?Ue?ai():ae():(lt(Gs),bt(!0),ne());break}case"ArrowDown":{je.preventDefault(),Ge?Ue?ae():ai():(lt(Gs),bt(!0),ne());break}case"Home":{if(!b){je.preventDefault(),Ge||bt(!0);const Rt=Xt.findIndex(en=>!en.disabled);lt(Rt),mi&&mt({alignment:Ue?"end":"start"})}break}case"End":{if(!b){je.preventDefault(),Ge||bt(!0);const Rt=Xt.map(en=>!!en.disabled).lastIndexOf(!1);lt(Rt),mi&&mt({alignment:Ue?"end":"start"})}break}case"Escape":{je.preventDefault(),bt(!1),lt(-1);break}case" ":{b||(je.preventDefault(),Xt[at]&&Ge?Pt(Xt[at]):(bt(!0),lt(Gs),ne()));break}case"Enter":b||je.preventDefault(),Xt[at]&&Ge&&(je.preventDefault(),Pt(Xt[at]))}},Ee=je=>{typeof d=="function"&&d(je);const Rt=Fn.find(en=>en.value===ar);M&&Xt[at]&&Ge&&Pt(Xt[at]),Hr((Rt==null?void 0:Rt.label)||""),bt(!1)},xe=je=>{typeof h=="function"&&h(je),b&&bt(!0)},St=je=>{Oe||(Hr(je.currentTarget.value),T&&je.currentTarget.value===""&&oi(null),lt(-1),bt(!0))},It=()=>{Oe||(bt(!Ge),ar&&!Ge&&lt(Gs))};return j.createElement(Ts.Wrapper,m9(jS({},i),{__staticSelector:"Select"}),j.createElement(h0,{opened:mi,transition:p,transitionDuration:m,shadow:"sm",withinPortal:q,__staticSelector:"Select",onDirectionChange:Fe,switchDirectionOnFlip:Z,zIndex:ue,dropdownPosition:fe,positionDependencies:[...ct,nr],classNames:_,styles:w,unstyled:v},j.createElement(h0.Target,null,j.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":mi?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":mi,onMouseLeave:()=>lt(-1),tabIndex:-1},j.createElement("input",{type:"hidden",name:he,value:ar||"",form:Me,disabled:$}),j.createElement(Ts,jS(m9(jS(jS({autoComplete:"off",type:"search"},r),Ye),{ref:As(t,Et),onKeyDown:le,__staticSelector:"Select",value:nr,placeholder:_e,onChange:St,"aria-autocomplete":"list","aria-controls":mi?`${r.id}-items`:null,"aria-activedescendant":at>=0?`${r.id}-${at}`:null,onMouseDown:It,onBlur:Ee,onFocus:xe,readOnly:!b||Oe,disabled:$,"data-mantine-stop-propagation":mi,name:null,classNames:m9(jS({},_),{input:Ft({[Ut.input]:!b},_==null?void 0:_.input)})}),VIe({theme:Je,rightSection:F,rightSectionWidth:z,styles:w,size:r.size,shouldClear:T&&!!wr,clearButtonLabel:I,onClear:Zr,error:i.error,clearButtonTabIndex:Be,disabled:$,readOnly:Oe}))))),j.createElement(h0.Dropdown,{component:Y||d4,maxHeight:S,direction:Se,id:r.id,innerRef:Ve,__staticSelector:"Select",classNames:_,styles:w},j.createElement(OY,{data:Xt,hovered:at,classNames:_,styles:w,isItemSelected:je=>je===ar,uuid:r.id,__staticSelector:"Select",onItemHover:lt,onItemSelect:Pt,itemsRefs:ve,itemComponent:c,size:r.size,nothingFound:A,creatable:bn&&!!Lt,createLabel:Lt,"aria-label":i.label,unstyled:v}))))});Kp.displayName="@mantine/core/Select";function t3({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function zU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var mmt=Object.defineProperty,gmt=Object.defineProperties,ymt=Object.getOwnPropertyDescriptors,Sfe=Object.getOwnPropertySymbols,vmt=Object.prototype.hasOwnProperty,_mt=Object.prototype.propertyIsEnumerable,Tfe=(e,t,n)=>t in e?mmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bmt=(e,t)=>{for(var n in t||(t={}))vmt.call(t,n)&&Tfe(e,n,t[n]);if(Sfe)for(var n of Sfe(t))_mt.call(t,n)&&Tfe(e,n,t[n]);return e},wmt=(e,t)=>gmt(e,ymt(t));const Su={xs:4,sm:6,md:8,lg:10,xl:12};var Emt=pt((e,{size:t,disabled:n})=>({root:wmt(bmt({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:Su,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const xmt=Emt;var Smt=Object.defineProperty,Tmt=Object.defineProperties,Cmt=Object.getOwnPropertyDescriptors,Cfe=Object.getOwnPropertySymbols,Amt=Object.prototype.hasOwnProperty,Imt=Object.prototype.propertyIsEnumerable,Afe=(e,t,n)=>t in e?Smt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Omt=(e,t)=>{for(var n in t||(t={}))Amt.call(t,n)&&Afe(e,n,t[n]);if(Cfe)for(var n of Cfe(t))Imt.call(t,n)&&Afe(e,n,t[n]);return e},Pmt=(e,t)=>Tmt(e,Cmt(t)),kmt=pt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:Pmt(Omt({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:Su,size:n})*2,width:i||e.fn.size({sizes:Su,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const n3=C.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:w,unstyled:E,thumbSize:S},b)=>{const{classes:T,cx:A,theme:I}=kmt({color:a,size:c,disabled:w,thumbSize:S},{classNames:u,styles:l,unstyled:E,name:"Slider"}),[k,$]=C.useState(!1),P=p||s||k||v;return j.createElement(dt,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,className:A(T.thumb,{[T.dragging]:s}),onFocus:()=>{$(!0),typeof g=="function"&&g()},onBlur:()=>{$(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:N=>N.stopPropagation(),style:{[I.dir==="rtl"?"right":"left"]:`${r}%`}},_,j.createElement(EI,{mounted:i!=null&&P,duration:d,transition:f,timingFunction:h||I.transitionTimingFunction},N=>j.createElement("div",{style:N,className:T.label},i)))});n3.displayName="@mantine/core/SliderThumb";function Rmt({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var $mt=pt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:Su})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:Su,size:t}),width:e.fn.size({sizes:Su,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:Su,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));function COe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=$mt({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>j.createElement(dt,{className:h.markWrapper,sx:{left:`${t3({value:g.value,min:r,max:i})}%`},key:y},j.createElement("div",{className:p(h.mark,{[h.markFilled]:Rmt({mark:g,value:s,offset:u,inverted:d})})}),g.label&&j.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return j.createElement("div",null,m)}COe.displayName="@mantine/core/SliderMarks";var Nmt=pt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:Su,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:Su}),marginLeft:e.fn.size({size:n,sizes:Su}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:Su}),left:-e.fn.size({size:n,sizes:Su}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}})),Dmt=Object.defineProperty,Mmt=Object.defineProperties,Lmt=Object.getOwnPropertyDescriptors,r3=Object.getOwnPropertySymbols,AOe=Object.prototype.hasOwnProperty,IOe=Object.prototype.propertyIsEnumerable,Ife=(e,t,n)=>t in e?Dmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fmt=(e,t)=>{for(var n in t||(t={}))AOe.call(t,n)&&Ife(e,n,t[n]);if(r3)for(var n of r3(t))IOe.call(t,n)&&Ife(e,n,t[n]);return e},jmt=(e,t)=>Mmt(e,Lmt(t)),Bmt=(e,t)=>{var n={};for(var r in e)AOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&r3)for(var r of r3(e))t.indexOf(r)<0&&IOe.call(e,r)&&(n[r]=e[r]);return n};function sK(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=Bmt(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=Nmt({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return j.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},j.createElement(dt,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:Su})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:Su})}px)`})}),u,j.createElement(COe,jmt(Fmt({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}sK.displayName="@mantine/core/SliderTrack";var zmt=Object.defineProperty,Umt=Object.defineProperties,Vmt=Object.getOwnPropertyDescriptors,i3=Object.getOwnPropertySymbols,OOe=Object.prototype.hasOwnProperty,POe=Object.prototype.propertyIsEnumerable,Ofe=(e,t,n)=>t in e?zmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hmt=(e,t)=>{for(var n in t||(t={}))OOe.call(t,n)&&Ofe(e,n,t[n]);if(i3)for(var n of i3(t))POe.call(t,n)&&Ofe(e,n,t[n]);return e},qmt=(e,t)=>Umt(e,Vmt(t)),Wmt=(e,t)=>{var n={};for(var r in e)OOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&i3)for(var r of i3(e))t.indexOf(r)<0&&POe.call(e,r)&&(n[r]=e[r]);return n};const oK=C.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=Wmt(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=xmt({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return j.createElement(dt,qmt(Hmt({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});oK.displayName="@mantine/core/SliderRoot";var Gmt=Object.defineProperty,Ymt=Object.defineProperties,Kmt=Object.getOwnPropertyDescriptors,s3=Object.getOwnPropertySymbols,kOe=Object.prototype.hasOwnProperty,ROe=Object.prototype.propertyIsEnumerable,Pfe=(e,t,n)=>t in e?Gmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xmt=(e,t)=>{for(var n in t||(t={}))kOe.call(t,n)&&Pfe(e,n,t[n]);if(s3)for(var n of s3(t))ROe.call(t,n)&&Pfe(e,n,t[n]);return e},Qmt=(e,t)=>Ymt(e,Kmt(t)),Jmt=(e,t)=>{var n={};for(var r in e)kOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&s3)for(var r of s3(e))t.indexOf(r)<0&&ROe.call(e,r)&&(n[r]=e[r]);return n};const Zmt={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},aK=C.forwardRef((e,t)=>{const n=ut("Slider",Zmt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:E,labelAlwaysOn:S,thumbLabel:b,showLabelOnHover:T,thumbChildren:A,disabled:I,unstyled:k,thumbSize:$,scale:P,inverted:N}=n,F=Jmt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),z=ps(),[W,V]=C.useState(!1),[G,M]=Fo({value:typeof o=="number"?Tl(o,f,d):o,defaultValue:typeof m=="number"?Tl(m,f,d):m,finalValue:Tl(0,f,d),onChange:a}),H=C.useRef(G),Y=C.useRef(),L=t3({value:G,min:f,max:d}),B=P(G),q=typeof v=="function"?v(B):v,Z=C.useCallback(({x:_e})=>{if(!I){const ge=zU({value:_e,min:f,max:d,step:h,precision:p});M(ge),H.current=ge}},[I,f,d,h,p]),{ref:ue,active:he}=o4(Z,{onScrubEnd:()=>u==null?void 0:u(H.current)},z.dir),fe=_e=>{_e.stopPropagation()},me=_e=>{if(!I)switch(_e.key){case"ArrowUp":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(G+h,f),d);u==null||u(ge),M(ge);break}case"ArrowRight":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(z.dir==="rtl"?G-h:G+h,f),d);u==null||u(ge),M(ge);break}case"ArrowDown":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(G-h,f),d);u==null||u(ge),M(ge);break}case"ArrowLeft":{_e.preventDefault(),Y.current.focus();const ge=Math.min(Math.max(z.dir==="rtl"?G+h:G-h,f),d);u==null||u(ge),M(ge);break}case"Home":{_e.preventDefault(),Y.current.focus(),u==null||u(f),M(f);break}case"End":{_e.preventDefault(),Y.current.focus(),u==null||u(d),M(d);break}}};return j.createElement(oK,Qmt(Xmt({},F),{size:l,ref:As(ue,t),onKeyDownCapture:me,onMouseDownCapture:()=>{var _e;return(_e=ue.current)==null?void 0:_e.focus()},classNames:r,styles:i,disabled:I,unstyled:k}),j.createElement(sK,{inverted:N,offset:0,filled:L,marks:y,size:l,radius:c,color:s,min:f,max:d,value:B,onChange:M,onMouseEnter:T?()=>V(!0):void 0,onMouseLeave:T?()=>V(!1):void 0,classNames:r,styles:i,disabled:I,unstyled:k},j.createElement(n3,{max:d,min:f,value:B,position:L,dragging:he,color:s,size:l,label:q,ref:Y,onMouseDown:fe,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:E,labelAlwaysOn:S,classNames:r,styles:i,thumbLabel:b,showLabelOnHover:T&&W,disabled:I,unstyled:k,thumbSize:$},A)),j.createElement("input",{type:"hidden",name:g,value:B}))});aK.displayName="@mantine/core/Slider";function egt(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var tgt=Object.defineProperty,ngt=Object.defineProperties,rgt=Object.getOwnPropertyDescriptors,o3=Object.getOwnPropertySymbols,$Oe=Object.prototype.hasOwnProperty,NOe=Object.prototype.propertyIsEnumerable,kfe=(e,t,n)=>t in e?tgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g9=(e,t)=>{for(var n in t||(t={}))$Oe.call(t,n)&&kfe(e,n,t[n]);if(o3)for(var n of o3(t))NOe.call(t,n)&&kfe(e,n,t[n]);return e},y9=(e,t)=>ngt(e,rgt(t)),igt=(e,t)=>{var n={};for(var r in e)$Oe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&o3)for(var r of o3(e))t.indexOf(r)<0&&NOe.call(e,r)&&(n[r]=e[r]);return n};const sgt={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},UU=C.forwardRef((e,t)=>{const n=ut("RangeSlider",sgt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,maxRange:p,step:m,precision:g,defaultValue:y,name:v,marks:_,label:w,labelTransition:E,labelTransitionDuration:S,labelTransitionTimingFunction:b,labelAlwaysOn:T,thumbFromLabel:A,thumbToLabel:I,showLabelOnHover:k,thumbChildren:$,disabled:P,unstyled:N,thumbSize:F,scale:z,inverted:W}=n,V=igt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","maxRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),G=ps(),[M,H]=C.useState(-1),[Y,L]=C.useState(!1),[B,q]=Fo({value:o,defaultValue:y,finalValue:[f,d],onChange:a}),Z=C.useRef(B),ue=C.useRef([]),he=C.useRef(void 0),fe=[t3({value:B[0],min:f,max:d}),t3({value:B[1],min:f,max:d})],me=Je=>{q(Je),Z.current=Je};C.useEffect(()=>{Array.isArray(o)&&(Z.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const _e=(Je,Ge,gt)=>{const at=[...Z.current];at[Ge]=Je,Ge===0&&(Je>at[1]-(h-1e-9)&&(at[1]=Math.min(Je+h,d)),Je>(d-(h-1e-9)||f)&&(at[Ge]=Z.current[Ge]),at[1]-Je>p&&(at[1]=Je+p)),Ge===1&&(Je<at[0]+h&&(at[0]=Math.max(Je-h,f)),Je<at[0]+h&&(at[Ge]=Z.current[Ge]),Je-at[0]>p&&(at[0]=Je-p)),me(at),gt&&(u==null||u(Z.current))},ge=Je=>{if(!P){const Ge=zU({value:Je,min:f,max:d,step:m,precision:g});_e(Ge,he.current,!1)}},{ref:Be,active:Me}=o4(({x:Je})=>ge(Je),{onScrubEnd:()=>u==null?void 0:u(Z.current)},G.dir);function ct(Je,Ge){Je.stopPropagation(),he.current=Ge}const Oe=Je=>{Be.current.focus();const Ge=Be.current.getBoundingClientRect(),gt=egt(Je.nativeEvent),at=zU({value:gt-Ge.left,max:d,min:f,step:m,containerWidth:Ge.width}),lt=Math.abs(B[0]-at)>Math.abs(B[1]-at)?1:0,Et=G.dir==="ltr"?lt:lt===1?0:1;he.current=Et},Re=()=>M!==1&&M!==0?(H(0),0):M,Ye=Je=>{if(!P)switch(Je.key){case"ArrowUp":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(Z.current[Ge]+m,f),d),Ge,!0);break}case"ArrowRight":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(G.dir==="rtl"?Z.current[Ge]-m:Z.current[Ge]+m,f),d),Ge,!0);break}case"ArrowDown":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(Z.current[Ge]-m,f),d),Ge,!0);break}case"ArrowLeft":{Je.preventDefault();const Ge=Re();ue.current[Ge].focus(),_e(Math.min(Math.max(G.dir==="rtl"?Z.current[Ge]+m:Z.current[Ge]-m,f),d),Ge,!0);break}}},Ut={max:d,min:f,color:s,size:l,labelTransition:E,labelTransitionDuration:S,labelTransitionTimingFunction:b,labelAlwaysOn:T,onBlur:()=>H(-1),classNames:r,styles:i},Ft=Array.isArray($);return j.createElement(oK,y9(g9({},V),{size:l,ref:As(Be,t),onTouchStartCapture:Oe,onTouchEndCapture:()=>{he.current=-1},onMouseDownCapture:Oe,onMouseUpCapture:()=>{he.current=-1},onKeyDownCapture:Ye,styles:i,classNames:r,disabled:P,unstyled:N}),j.createElement(sK,{offset:fe[0],marksOffset:B[0],filled:fe[1]-fe[0],marks:_,inverted:W,size:l,radius:c,color:s,min:f,max:d,value:B[1],styles:i,classNames:r,onMouseEnter:k?()=>L(!0):void 0,onMouseLeave:k?()=>L(!1):void 0,onChange:Je=>{const Ge=Math.abs(B[0]-Je)>Math.abs(B[1]-Je)?1:0,gt=[...B];gt[Ge]=Je,me(gt)},disabled:P,unstyled:N},j.createElement(n3,y9(g9({},Ut),{value:z(B[0]),position:fe[0],dragging:Me,label:typeof w=="function"?w(z(B[0])):w,ref:Je=>{ue.current[0]=Je},thumbLabel:A,onMouseDown:Je=>ct(Je,0),onFocus:()=>H(0),showLabelOnHover:k&&Y,disabled:P,unstyled:N,thumbSize:F}),Ft?$[0]:$),j.createElement(n3,y9(g9({},Ut),{thumbLabel:I,value:z(B[1]),position:fe[1],dragging:Me,label:typeof w=="function"?w(z(B[1])):w,ref:Je=>{ue.current[1]=Je},onMouseDown:Je=>ct(Je,1),onFocus:()=>H(1),showLabelOnHover:k&&Y,disabled:P,unstyled:N,thumbSize:F}),Ft?$[1]:$)),j.createElement("input",{type:"hidden",name:`${v}_from`,value:B[0]}),j.createElement("input",{type:"hidden",name:`${v}_to`,value:B[1]}))});UU.displayName="@mantine/core/RangeSlider";var ogt=Object.defineProperty,a3=Object.getOwnPropertySymbols,DOe=Object.prototype.hasOwnProperty,MOe=Object.prototype.propertyIsEnumerable,Rfe=(e,t,n)=>t in e?ogt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,agt=(e,t)=>{for(var n in t||(t={}))DOe.call(t,n)&&Rfe(e,n,t[n]);if(a3)for(var n of a3(t))MOe.call(t,n)&&Rfe(e,n,t[n]);return e},ugt=(e,t)=>{var n={};for(var r in e)DOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&a3)for(var r of a3(e))t.indexOf(r)<0&&MOe.call(e,r)&&(n[r]=e[r]);return n};const lgt={w:0,h:0},s1=C.forwardRef((e,t)=>{const n=ut("Space",lgt,e),{w:r,h:i}=n,s=ugt(n,["w","h"]);return j.createElement(dt,agt({ref:t,w:r,miw:r,h:i,mih:i},s))});s1.displayName="@mantine/core/Space";var cgt=pt((e,{transitionDuration:t})=>({control:{},root:{position:"relative"},content:{display:"flex",flexDirection:"column",overflow:"hidden",transitionProperty:"max-height",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${t}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}})),fgt=Object.defineProperty,u3=Object.getOwnPropertySymbols,LOe=Object.prototype.hasOwnProperty,FOe=Object.prototype.propertyIsEnumerable,$fe=(e,t,n)=>t in e?fgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dgt=(e,t)=>{for(var n in t||(t={}))LOe.call(t,n)&&$fe(e,n,t[n]);if(u3)for(var n of u3(t))FOe.call(t,n)&&$fe(e,n,t[n]);return e},hgt=(e,t)=>{var n={};for(var r in e)LOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&u3)for(var r of u3(e))t.indexOf(r)<0&&FOe.call(e,r)&&(n[r]=e[r]);return n};const pgt={maxHeight:100,transitionDuration:200,initialState:!1},jOe=C.forwardRef((e,t)=>{const n=ut("Spoiler",pgt,e),{className:r,children:i,maxHeight:s,hideLabel:o,showLabel:a,transitionDuration:u,controlRef:l,initialState:c,classNames:f,styles:d,unstyled:h}=n,p=hgt(n,["className","children","maxHeight","hideLabel","showLabel","transitionDuration","controlRef","initialState","classNames","styles","unstyled"]),{classes:m,cx:g}=cgt({transitionDuration:u},{classNames:f,styles:d,unstyled:h,name:"Spoiler"}),[y,v]=C.useState(c),[_,w]=C.useState(c),{ref:E,height:S}=bZe(),b=y?o:a;return C.useEffect(()=>{w(s<S)},[S,s,i]),j.createElement(dt,dgt({className:g(m.root,r),ref:t},p),j.createElement("div",{className:m.content,style:{maxHeight:y?S||void 0:s}},j.createElement("div",{ref:E},i)),_&&j.createElement(yI,{component:"button",ref:l,onClick:()=>v(T=>!T),className:m.control},b))});jOe.displayName="@mantine/core/Spoiler";var mgt=Object.defineProperty,ggt=Object.defineProperties,ygt=Object.getOwnPropertyDescriptors,Nfe=Object.getOwnPropertySymbols,vgt=Object.prototype.hasOwnProperty,_gt=Object.prototype.propertyIsEnumerable,Dfe=(e,t,n)=>t in e?mgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bgt=(e,t)=>{for(var n in t||(t={}))vgt.call(t,n)&&Dfe(e,n,t[n]);if(Nfe)for(var n of Nfe(t))_gt.call(t,n)&&Dfe(e,n,t[n]);return e},wgt=(e,t)=>ggt(e,ygt(t)),Egt=pt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:s,withColumnBorders:o})=>{const a=`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:wgt(bgt({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:s?a:"","& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th, & tbody tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:e.fn.size({size:i,sizes:e.fontSizes}),padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},"& thead tr th":{borderBottom:a},"& tfoot tr th, & tbody tr th":{borderTop:a},"& tbody tr td":{padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`,borderTop:a,fontSize:e.fn.size({size:i,sizes:e.fontSizes})},"& tbody tr:first-of-type td, & tbody tr:first-of-type th":{borderTop:"none"},"& thead th, & tbody td":{borderRight:o?a:"none","&:last-of-type":{borderRight:"none",borderLeft:o?a:"none"}},"& tbody tr th":{borderRight:o?a:"none"},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}}),xgt=Object.defineProperty,Sgt=Object.defineProperties,Tgt=Object.getOwnPropertyDescriptors,l3=Object.getOwnPropertySymbols,BOe=Object.prototype.hasOwnProperty,zOe=Object.prototype.propertyIsEnumerable,Mfe=(e,t,n)=>t in e?xgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cgt=(e,t)=>{for(var n in t||(t={}))BOe.call(t,n)&&Mfe(e,n,t[n]);if(l3)for(var n of l3(t))zOe.call(t,n)&&Mfe(e,n,t[n]);return e},Agt=(e,t)=>Sgt(e,Tgt(t)),Igt=(e,t)=>{var n={};for(var r in e)BOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&l3)for(var r of l3(e))t.indexOf(r)<0&&zOe.call(e,r)&&(n[r]=e[r]);return n};const Ogt={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},uK=C.forwardRef((e,t)=>{const n=ut("Table",Ogt,e),{className:r,children:i,striped:s,highlightOnHover:o,captionSide:a,horizontalSpacing:u,verticalSpacing:l,fontSize:c,unstyled:f,withBorder:d,withColumnBorders:h}=n,p=Igt(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders"]),{classes:m,cx:g}=Egt({captionSide:a,verticalSpacing:l,horizontalSpacing:u,fontSize:c,withBorder:d,withColumnBorders:h},{unstyled:f,name:"Table"});return j.createElement(dt,Agt(Cgt({},p),{component:"table",ref:t,className:g(m.root,r),"data-striped":s||void 0,"data-hover":o||void 0}),i)});uK.displayName="@mantine/core/Table";const VU={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[Pgt,lK]=hI(VU.context);var kgt=Object.defineProperty,Lfe=Object.getOwnPropertySymbols,Rgt=Object.prototype.hasOwnProperty,$gt=Object.prototype.propertyIsEnumerable,Ffe=(e,t,n)=>t in e?kgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ngt=(e,t)=>{for(var n in t||(t={}))Rgt.call(t,n)&&Ffe(e,n,t[n]);if(Lfe)for(var n of Lfe(t))$gt.call(t,n)&&Ffe(e,n,t[n]);return e};function Dgt({variant:e,orientation:t,inverted:n,placement:r},i){const s=t==="vertical";return e==="default"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`2px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="outline"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`1px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="pills"?{gap:`calc(${i.spacing.sm}px / 2)`}:{}}var Mgt=pt((e,t)=>{const n=t.orientation==="vertical";return{tabsList:Ngt({display:"flex",flexWrap:"wrap",flexDirection:n?"column":"row",justifyContent:tAe[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},Dgt(t,e))}}),Lgt=Object.defineProperty,Fgt=Object.defineProperties,jgt=Object.getOwnPropertyDescriptors,c3=Object.getOwnPropertySymbols,UOe=Object.prototype.hasOwnProperty,VOe=Object.prototype.propertyIsEnumerable,jfe=(e,t,n)=>t in e?Lgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bgt=(e,t)=>{for(var n in t||(t={}))UOe.call(t,n)&&jfe(e,n,t[n]);if(c3)for(var n of c3(t))VOe.call(t,n)&&jfe(e,n,t[n]);return e},zgt=(e,t)=>Fgt(e,jgt(t)),Ugt=(e,t)=>{var n={};for(var r in e)UOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&c3)for(var r of c3(e))t.indexOf(r)<0&&VOe.call(e,r)&&(n[r]=e[r]);return n};const Vgt={grow:!1,position:"left"},HOe=C.forwardRef((e,t)=>{const n=ut("TabsList",Vgt,e),{children:r,className:i,grow:s,position:o}=n,a=Ugt(n,["children","className","grow","position"]),{orientation:u,variant:l,color:c,radius:f,inverted:d,placement:h,classNames:p,styles:m,unstyled:g}=lK(),{classes:y,cx:v}=Mgt({orientation:u,grow:s,variant:l,color:c,position:o,radius:f,inverted:d,placement:h},{name:"Tabs",unstyled:g,classNames:p,styles:m});return j.createElement(dt,zgt(Bgt({},a),{className:v(y.tabsList,i),ref:t,role:"tablist","aria-orientation":u}),r)});HOe.displayName="@mantine/core/TabsList";var Hgt=pt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}})),qgt=Object.defineProperty,Wgt=Object.defineProperties,Ggt=Object.getOwnPropertyDescriptors,f3=Object.getOwnPropertySymbols,qOe=Object.prototype.hasOwnProperty,WOe=Object.prototype.propertyIsEnumerable,Bfe=(e,t,n)=>t in e?qgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ygt=(e,t)=>{for(var n in t||(t={}))qOe.call(t,n)&&Bfe(e,n,t[n]);if(f3)for(var n of f3(t))WOe.call(t,n)&&Bfe(e,n,t[n]);return e},Kgt=(e,t)=>Wgt(e,Ggt(t)),Xgt=(e,t)=>{var n={};for(var r in e)qOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&f3)for(var r of f3(e))t.indexOf(r)<0&&WOe.call(e,r)&&(n[r]=e[r]);return n};const Qgt={},GOe=C.forwardRef((e,t)=>{const n=ut("TabsPanel",Qgt,e),{value:r,children:i,sx:s,className:o}=n,a=Xgt(n,["value","children","sx","className"]),u=lK(),{classes:l,cx:c}=Hgt({orientation:u.orientation,variant:u.variant,color:u.color,radius:u.radius,inverted:u.inverted,placement:u.placement},{name:"Tabs",unstyled:u.unstyled,classNames:u.classNames,styles:u.styles}),f=u.value===r,d=u.keepMounted||f?i:null;return j.createElement(dt,Kgt(Ygt({},a),{ref:t,sx:[{display:f?void 0:"none"},...k0(s)],className:c(l.panel,o),role:"tabpanel",id:u.getPanelId(r),"aria-labelledby":u.getTabId(r)}),d)});GOe.displayName="@mantine/core/TabsPanel";var Jgt=Object.defineProperty,Zgt=Object.defineProperties,e0t=Object.getOwnPropertyDescriptors,zfe=Object.getOwnPropertySymbols,t0t=Object.prototype.hasOwnProperty,n0t=Object.prototype.propertyIsEnumerable,Ufe=(e,t,n)=>t in e?Jgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hb=(e,t)=>{for(var n in t||(t={}))t0t.call(t,n)&&Ufe(e,n,t[n]);if(zfe)for(var n of zfe(t))n0t.call(t,n)&&Ufe(e,n,t[n]);return e},Vfe=(e,t)=>Zgt(e,e0t(t));function r0t(e,{variant:t,orientation:n,color:r,radius:i,inverted:s,placement:o}){const a=n==="vertical",u=e.fn.variant({color:r,variant:"filled"}),l=e.fn.radius(i),c=n==="vertical"?o==="left"?`${l}px 0 0 ${l}px`:` 0 ${l}px ${l}px 0`:s?`0 0 ${l}px ${l}px`:`${l}px ${l}px 0 0`;return t==="default"?Vfe(Hb({[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"2px solid transparent",[a?o==="left"?"marginRight":"marginLeft":s?"marginTop":"marginBottom"]:-2,borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":Hb({borderColor:u.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:u.background}))}):t==="outline"?{borderRadius:c,border:"1px solid transparent",[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:a?0:s?"unset":-1,top:a?0:s?-1:"unset",[a?"width":"height"]:1,right:a?o==="left"?-1:"unset":0,left:a?o==="left"?"unset":-1:0}}}:t==="pills"?Vfe(Hb({borderRadius:e.fn.radius(i)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Hb({backgroundColor:u.background,color:e.white},e.fn.hover({backgroundColor:u.background}))}):{}}var i0t=pt((e,t)=>({tabLabel:{},tab:Hb({position:"relative",padding:`${e.spacing.xs}px ${e.spacing.md}px`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":Hb({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},r0t(e,t)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:7}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:7}}})),s0t=Object.defineProperty,o0t=Object.defineProperties,a0t=Object.getOwnPropertyDescriptors,d3=Object.getOwnPropertySymbols,YOe=Object.prototype.hasOwnProperty,KOe=Object.prototype.propertyIsEnumerable,Hfe=(e,t,n)=>t in e?s0t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u0t=(e,t)=>{for(var n in t||(t={}))YOe.call(t,n)&&Hfe(e,n,t[n]);if(d3)for(var n of d3(t))KOe.call(t,n)&&Hfe(e,n,t[n]);return e},l0t=(e,t)=>o0t(e,a0t(t)),c0t=(e,t)=>{var n={};for(var r in e)YOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&d3)for(var r of d3(e))t.indexOf(r)<0&&KOe.call(e,r)&&(n[r]=e[r]);return n};const f0t={},XOe=C.forwardRef((e,t)=>{const n=ut("TabsTab",f0t,e),{value:r,children:i,onKeyDown:s,onClick:o,className:a,icon:u,rightSection:l,color:c}=n,f=c0t(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]),d=lK(),h=!!u,p=!!l,{theme:m,classes:g,cx:y}=i0t({withIcon:h||p&&!i,withRightSection:p||h&&!i,orientation:d.orientation,color:c||d.color,variant:d.variant,radius:d.radius,inverted:d.inverted,placement:d.placement},{name:"Tabs",unstyled:d.unstyled,classNames:d.classNames,styles:d.styles}),v=r===d.value,_=w=>{d.onTabChange(d.allowTabDeactivation&&r===d.value?null:r),o==null||o(w)};return j.createElement(Nm,l0t(u0t({},f),{unstyled:d.unstyled,className:y(g.tab,a),"data-active":v||void 0,ref:t,type:"button",role:"tab",id:d.getTabId(r),"aria-selected":v,tabIndex:v||d.value===null?0:-1,"aria-controls":d.getPanelId(r),onClick:_,onKeyDown:CSe({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:d.activateTabWithKeyboard,loop:d.loop,dir:m.dir,orientation:d.orientation,onKeyDown:s})}),u&&j.createElement("div",{className:g.tabIcon},u),i&&j.createElement("div",{className:g.tabLabel},i),l&&j.createElement("div",{className:g.tabRightSection},l))});XOe.displayName="@mantine/core/Tab";function QOe({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:s,id:o,activateTabWithKeyboard:a,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,placement:h,keepMounted:p=!0,classNames:m,styles:g,unstyled:y}){const v=Ia(o),[_,w]=Fo({value:t,defaultValue:e,finalValue:null,onChange:n});return j.createElement(Pgt,{value:{placement:h,value:_,orientation:r,id:v,loop:s,activateTabWithKeyboard:a,getTabId:Loe(`${v}-tab`,VU.value),getPanelId:Loe(`${v}-panel`,VU.value),onTabChange:w,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,keepMounted:p,classNames:m,styles:g,unstyled:y}},i)}QOe.displayName="@mantine/core/TabsProvider";var d0t=pt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}})),h0t=Object.defineProperty,p0t=Object.defineProperties,m0t=Object.getOwnPropertyDescriptors,h3=Object.getOwnPropertySymbols,JOe=Object.prototype.hasOwnProperty,ZOe=Object.prototype.propertyIsEnumerable,qfe=(e,t,n)=>t in e?h0t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g0t=(e,t)=>{for(var n in t||(t={}))JOe.call(t,n)&&qfe(e,n,t[n]);if(h3)for(var n of h3(t))ZOe.call(t,n)&&qfe(e,n,t[n]);return e},y0t=(e,t)=>p0t(e,m0t(t)),v0t=(e,t)=>{var n={};for(var r in e)JOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&h3)for(var r of h3(e))t.indexOf(r)<0&&ZOe.call(e,r)&&(n[r]=e[r]);return n};const _0t={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},ec=C.forwardRef((e,t)=>{const n=ut("Tabs",_0t,e),{defaultValue:r,value:i,orientation:s,loop:o,activateTabWithKeyboard:a,allowTabDeactivation:u,children:l,id:c,onTabChange:f,variant:d,color:h,className:p,unstyled:m,classNames:g,styles:y,radius:v,inverted:_,keepMounted:w,placement:E}=n,S=v0t(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:b,cx:T}=d0t({orientation:s,color:h,variant:d,radius:v,inverted:_,placement:E},{unstyled:m,name:"Tabs",classNames:g,styles:y});return j.createElement(QOe,{activateTabWithKeyboard:a,defaultValue:r,orientation:s,onTabChange:f,value:i,id:c,loop:o,allowTabDeactivation:u,color:h,variant:d,radius:v,inverted:_,keepMounted:w,placement:E,classNames:g,styles:y,unstyled:m},j.createElement(dt,y0t(g0t({},S),{className:T(b.root,p),id:c,ref:t}),l))});ec.List=HOe;ec.Tab=XOe;ec.Panel=GOe;ec.displayName="@mantine/core/Tabs";var b0t=Object.defineProperty,w0t=Object.defineProperties,E0t=Object.getOwnPropertyDescriptors,Wfe=Object.getOwnPropertySymbols,x0t=Object.prototype.hasOwnProperty,S0t=Object.prototype.propertyIsEnumerable,Gfe=(e,t,n)=>t in e?b0t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T0t=(e,t)=>{for(var n in t||(t={}))x0t.call(t,n)&&Gfe(e,n,t[n]);if(Wfe)for(var n of Wfe(t))S0t.call(t,n)&&Gfe(e,n,t[n]);return e},C0t=(e,t)=>w0t(e,E0t(t));function A0t(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function I0t(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var O0t=pt((e,{element:t,weight:n,size:r,inline:i})=>({root:C0t(T0t({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:A0t(r,t,e),lineHeight:i?1:I0t(r,t,e),margin:0})})),P0t=Object.defineProperty,p3=Object.getOwnPropertySymbols,ePe=Object.prototype.hasOwnProperty,tPe=Object.prototype.propertyIsEnumerable,Yfe=(e,t,n)=>t in e?P0t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k0t=(e,t)=>{for(var n in t||(t={}))ePe.call(t,n)&&Yfe(e,n,t[n]);if(p3)for(var n of p3(t))tPe.call(t,n)&&Yfe(e,n,t[n]);return e},R0t=(e,t)=>{var n={};for(var r in e)ePe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&p3)for(var r of p3(e))t.indexOf(r)<0&&tPe.call(e,r)&&(n[r]=e[r]);return n};const $0t={order:1},fa=C.forwardRef((e,t)=>{const n=ut("Title",$0t,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=R0t(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=O0t({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?j.createElement(it,k0t({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});fa.displayName="@mantine/core/Title";const cK=C.createContext(null);cK.displayName="@mantine/modals/ModalsContext";function N0t(){const e=C.useContext(cK);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}var D0t=Object.defineProperty,M0t=Object.defineProperties,L0t=Object.getOwnPropertyDescriptors,Kfe=Object.getOwnPropertySymbols,F0t=Object.prototype.hasOwnProperty,j0t=Object.prototype.propertyIsEnumerable,Xfe=(e,t,n)=>t in e?D0t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v9=(e,t)=>{for(var n in t||(t={}))F0t.call(t,n)&&Xfe(e,n,t[n]);if(Kfe)for(var n of Kfe(t))j0t.call(t,n)&&Xfe(e,n,t[n]);return e},Qfe=(e,t)=>M0t(e,L0t(t));function B0t({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=N0t(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return j.createElement(j.Fragment,null,l&&j.createElement(dt,{mb:"md"},l),j.createElement(yr,v9({position:"right"},o),j.createElement(Fr,Qfe(v9({variant:"default"},t),{onClick:h}),(t==null?void 0:t.children)||c),j.createElement(Fr,Qfe(v9({},n),{onClick:p}),(n==null?void 0:n.children)||f)))}function z0t(e,t){switch(t.type){case"OPEN":return{current:t.payload,modals:[...e.modals,t.payload]};case"CLOSE":{const n=e.modals.filter(r=>r.id!==t.payload);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return{current:e.current,modals:[]};default:return e}}const[U0t,SI]=rQe("mantine-modals");SI("openModal");SI("closeModal");SI("closeAllModals");const V0t=SI("openConfirmModal");SI("openContextModal");var H0t=Object.defineProperty,q0t=Object.defineProperties,W0t=Object.getOwnPropertyDescriptors,m3=Object.getOwnPropertySymbols,nPe=Object.prototype.hasOwnProperty,rPe=Object.prototype.propertyIsEnumerable,Jfe=(e,t,n)=>t in e?H0t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BR=(e,t)=>{for(var n in t||(t={}))nPe.call(t,n)&&Jfe(e,n,t[n]);if(m3)for(var n of m3(t))rPe.call(t,n)&&Jfe(e,n,t[n]);return e},Zfe=(e,t)=>q0t(e,W0t(t)),uv=(e,t)=>{var n={};for(var r in e)nPe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&m3)for(var r of m3(e))t.indexOf(r)<0&&rPe.call(e,r)&&(n[r]=e[r]);return n};function G0t(e){if(!e)return{confirmProps:{},modalProps:{}};const t=e,{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f}=t,d=uv(t,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f},modalProps:BR({id:n},d)}}function Y0t({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=C.useReducer(z0t,{modals:[],current:null}),o=C.useRef(i);o.current=i;const a=C.useCallback(g=>{o.current.modals.forEach(y=>{var v,_,w,E;y.type==="confirm"&&g&&((_=(v=y.props).onCancel)==null||_.call(v)),(E=(w=y.props).onClose)==null||E.call(w)}),s({type:"CLOSE_ALL"})},[o,s]),u=C.useCallback(g=>{var y=g,{modalId:v}=y,_=uv(y,["modalId"]);const w=v||NR();return s({type:"OPEN",payload:{id:w,type:"content",props:_}}),w},[s]),l=C.useCallback(g=>{var y=g,{modalId:v}=y,_=uv(y,["modalId"]);const w=v||NR();return s({type:"OPEN",payload:{id:w,type:"confirm",props:_}}),w},[s]),c=C.useCallback((g,y)=>{var v=y,{modalId:_}=v,w=uv(v,["modalId"]);const E=_||NR();return s({type:"OPEN",payload:{id:E,type:"context",props:w,ctx:g}}),E},[s]),f=C.useCallback((g,y)=>{var v,_,w,E;const S=o.current.modals.find(b=>b.id===g);S&&(S.type==="confirm"&&y&&((_=(v=S.props).onCancel)==null||_.call(v)),(E=(w=S.props).onClose)==null||E.call(w),s({type:"CLOSE",payload:S.id}))},[o,s]);U0t({openModal:u,openConfirmModal:l,openContextModal:g=>{var y=g,{modal:v}=y,_=uv(y,["modal"]);return c(v,_)},closeModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const y=g.props,{innerProps:v}=y,_=uv(y,["innerProps"]),w=r[g.ctx];return{modalProps:_,content:j.createElement(w,{innerProps:v,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=G0t(g.props);return{modalProps:y,content:j.createElement(B0t,Zfe(BR({},v),{id:g.id,labels:g.props.labels||n}))}}case"content":{const y=g.props,{children:v}=y;return{modalProps:uv(y,["children"]),content:j.createElement(j.Fragment,null,v)}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return j.createElement(cK.Provider,{value:d},j.createElement(Gp,Zfe(BR(BR({zIndex:Rc("modal")+1},t),p),{opened:i.modals.length>0,onClose:()=>f(i.current.id)}),m),e)}var iPe={exports:{}},K0t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",X0t=K0t,Q0t=X0t;function sPe(){}function oPe(){}oPe.resetWarningCache=sPe;var J0t=function(){function e(r,i,s,o,a,u){if(u!==Q0t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:oPe,resetWarningCache:sPe};return n.PropTypes=n,n};iPe.exports=J0t();var Z0t=iPe.exports;const Jt=Ju(Z0t);var eyt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},tyt=Object.defineProperty,nyt=Object.defineProperties,ryt=Object.getOwnPropertyDescriptors,g3=Object.getOwnPropertySymbols,aPe=Object.prototype.hasOwnProperty,uPe=Object.prototype.propertyIsEnumerable,ede=(e,t,n)=>t in e?tyt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tde=(e,t)=>{for(var n in t||(t={}))aPe.call(t,n)&&ede(e,n,t[n]);if(g3)for(var n of g3(t))uPe.call(t,n)&&ede(e,n,t[n]);return e},iyt=(e,t)=>nyt(e,ryt(t)),syt=(e,t)=>{var n={};for(var r in e)aPe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&g3)for(var r of g3(e))t.indexOf(r)<0&&uPe.call(e,r)&&(n[r]=e[r]);return n},Rr=(e,t,n)=>{const r=C.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=syt(o,["color","size","stroke","children"]);return C.createElement("svg",tde(iyt(tde({ref:s},eyt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>C.createElement(d,h)),...c||[]])});return r.propTypes={color:Jt.string,size:Jt.oneOfType([Jt.string,Jt.number]),stroke:Jt.oneOfType([Jt.string,Jt.number])},r.displayName=`${t}`,r},oyt=Rr("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),ayt=Rr("alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),uyt=Rr("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),lyt=Rr("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),cyt=Rr("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),fyt=Rr("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),dyt=Rr("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),hyt=Rr("brand-google","IconBrandGoogle",[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]]),pyt=Rr("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),myt=Rr("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),gyt=Rr("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),yyt=Rr("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),vyt=Rr("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),_yt=Rr("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),byt=Rr("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),wyt=Rr("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),Eyt=Rr("layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]),xyt=Rr("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),Syt=Rr("minus-vertical","IconMinusVertical",[["path",{d:"M12 5v14",key:"svg-0"}]]),Tyt=Rr("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),lPe=Rr("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),Cyt=Rr("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),nde=Rr("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),Ayt=Rr("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),Iyt=Rr("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),cPe=Rr("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),Oyt=Rr("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),Pyt=Rr("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),kyt=Rr("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),fPe=Rr("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function fK(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Nc="/ThinkAloud/",rde=["http","https","mailto","tel"];function Ryt(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<rde.length;){const s=rde[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var $yt=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const dK=Ju($yt);function mw(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ide(e.position):"start"in e||"end"in e?ide(e):"line"in e||"column"in e?HU(e):""}function HU(e){return sde(e&&e.line)+":"+sde(e&&e.column)}function ide(e){return HU(e&&e.start)+"-"+HU(e&&e.end)}function sde(e){return e&&typeof e=="number"?e:1}let Dc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=mw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Dc.prototype.file="";Dc.prototype.name="";Dc.prototype.reason="";Dc.prototype.message="";Dc.prototype.stack="";Dc.prototype.fatal=null;Dc.prototype.column=null;Dc.prototype.line=null;Dc.prototype.source=null;Dc.prototype.ruleId=null;Dc.prototype.position=null;const vd={basename:Nyt,dirname:Dyt,extname:Myt,join:Lyt,sep:"/"};function Nyt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');TI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Dyt(e){if(TI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Myt(e){TI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Lyt(...e){let t=-1,n;for(;++t<e.length;)TI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Fyt(n)}function Fyt(e){TI(e);const t=e.charCodeAt(0)===47;let n=jyt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function jyt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function TI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Byt={cwd:zyt};function zyt(){return"/"}function qU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Uyt(e){if(typeof e=="string")e=new URL(e);else if(!qU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Vyt(e)}function Vyt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const _9=["history","path","basename","stem","extname","dirname"];let Hyt=class{constructor(t){let n;t?typeof t=="string"||qyt(t)?n={value:t}:qU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Byt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<_9.length;){const s=_9[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)_9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){qU(t)&&(t=Uyt(t)),w9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?vd.dirname(this.path):void 0}set dirname(t){ode(this.basename,"dirname"),this.path=vd.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?vd.basename(this.path):void 0}set basename(t){w9(t,"basename"),b9(t,"basename"),this.path=vd.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?vd.extname(this.path):void 0}set extname(t){if(b9(t,"extname"),ode(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vd.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?vd.basename(this.path,this.extname):void 0}set stem(t){w9(t,"stem"),b9(t,"stem"),this.path=vd.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Dc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function b9(e,t){if(e&&e.includes(vd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+vd.sep+"`")}function w9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ode(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function qyt(e){return dK(e)}function ade(e){if(e)throw e}var zR=Object.prototype.hasOwnProperty,dPe=Object.prototype.toString,ude=Object.defineProperty,lde=Object.getOwnPropertyDescriptor,cde=function(t){return typeof Array.isArray=="function"?Array.isArray(t):dPe.call(t)==="[object Array]"},fde=function(t){if(!t||dPe.call(t)!=="[object Object]")return!1;var n=zR.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&zR.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||zR.call(t,i)},dde=function(t,n){ude&&n.name==="__proto__"?ude(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},hde=function(t,n){if(n==="__proto__")if(zR.call(t,n)){if(lde)return lde(t,n).value}else return;return t[n]},Wyt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=hde(a,n),i=hde(t,n),a!==i&&(c&&i&&(fde(i)||(s=cde(i)))?(s?(s=!1,o=r&&cde(r)?r:[]):o=r&&fde(r)?r:{},dde(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&dde(a,{name:n,newValue:i}));return a};const pde=Ju(Wyt);function WU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Gyt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Yyt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Yyt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class Mc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=mw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Mc.prototype.file="";Mc.prototype.name="";Mc.prototype.reason="";Mc.prototype.message="";Mc.prototype.stack="";Mc.prototype.fatal=null;Mc.prototype.column=null;Mc.prototype.line=null;Mc.prototype.source=null;Mc.prototype.ruleId=null;Mc.prototype.position=null;const _d={basename:Kyt,dirname:Xyt,extname:Qyt,join:Jyt,sep:"/"};function Kyt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');CI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Xyt(e){if(CI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Qyt(e){CI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Jyt(...e){let t=-1,n;for(;++t<e.length;)CI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Zyt(n)}function Zyt(e){CI(e);const t=e.charCodeAt(0)===47;let n=evt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function evt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function CI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const tvt={cwd:nvt};function nvt(){return"/"}function GU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function rvt(e){if(typeof e=="string")e=new URL(e);else if(!GU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return ivt(e)}function ivt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const E9=["history","path","basename","stem","extname","dirname"];class svt{constructor(t){let n;t?typeof t=="string"||ovt(t)?n={value:t}:GU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=tvt.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<E9.length;){const s=E9[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)E9.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){GU(t)&&(t=rvt(t)),S9(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?_d.dirname(this.path):void 0}set dirname(t){mde(this.basename,"dirname"),this.path=_d.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?_d.basename(this.path):void 0}set basename(t){S9(t,"basename"),x9(t,"basename"),this.path=_d.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?_d.extname(this.path):void 0}set extname(t){if(x9(t,"extname"),mde(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_d.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?_d.basename(this.path,this.extname):void 0}set stem(t){S9(t,"stem"),x9(t,"stem"),this.path=_d.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Mc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function x9(e,t){if(e&&e.includes(_d.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+_d.sep+"`")}function S9(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function mde(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ovt(e){return dK(e)}const avt=pPe().freeze(),hPe={}.hasOwnProperty;function pPe(){const e=Gyt(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=pPe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(pde(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(A9("data",r),n[m]=g,s):hPe.call(n,m)&&n[m]||null:m?(A9("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(A9("use",r),m!=null)if(typeof m=="function")E(m,...g);else if(typeof m=="object")Array.isArray(m)?w(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(S){if(typeof S=="function")E(S);else if(typeof S=="object")if(Array.isArray(S)){const[b,...T]=S;E(b,...T)}else _(S);else throw new TypeError("Expected usable value, not `"+S+"`")}function _(S){w(S.plugins),S.settings&&(y=Object.assign(y||{},S.settings))}function w(S){let b=-1;if(S!=null)if(Array.isArray(S))for(;++b<S.length;){const T=S[b];v(T)}else throw new TypeError("Expected a list of plugins, not `"+S+"`")}function E(S,b){let T=-1,A;for(;++T<t.length;)if(t[T][0]===S){A=t[T];break}A?(WU(A[1])&&WU(b)&&(b=pde(!0,A[1],b)),A[1]=b):t.push([...arguments])}}function l(m){s.freeze();const g=BS(m),y=s.Parser;return T9("parse",y),gde(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=BS(g),v=s.Compiler;return C9("stringify",v),yde(m),gde(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(yde(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,w){e.run(m,BS(g),E);function E(S,b,T){b=b||m,S?w(S):_?_(b):y(null,b,T)}}}function d(m,g){let y,v;return s.run(m,g,_),vde("runSync","run",v),y;function _(w,E){ade(w),y=E,v=!0}}function h(m,g){if(s.freeze(),T9("process",s.Parser),C9("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const w=BS(m);s.run(s.parse(w),w,(S,b,T)=>{if(S||!b||!T)E(S);else{const A=s.stringify(b,T);A==null||(cvt(A)?T.value=A:T.result=A),E(S,T)}});function E(S,b){S||!b?_(S):v?v(b):g(null,b)}}}function p(m){let g;s.freeze(),T9("processSync",s.Parser),C9("processSync",s.Compiler);const y=BS(m);return s.process(y,v),vde("processSync","process",g),y;function v(_){g=!0,ade(_)}}}function gde(e,t){return typeof e=="function"&&e.prototype&&(uvt(e.prototype)||t in e.prototype)}function uvt(e){let t;for(t in e)if(hPe.call(e,t))return!0;return!1}function T9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function C9(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function A9(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function yde(e){if(!WU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function vde(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function BS(e){return lvt(e)?e:new svt(e)}function lvt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function cvt(e){return typeof e=="string"||dK(e)}const fvt={};function dvt(e,t){const n=fvt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return mPe(e,r,i)}function mPe(e,t,n){if(hvt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return _de(e.children,t,n)}return Array.isArray(e)?_de(e,t,n):""}function _de(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=mPe(e[i],t,n);return r.join("")}function hvt(e){return!!(e&&typeof e=="object")}function yh(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function sc(e,t){return e.length>0?(yh(e,e.length,0,t),e):t}const bde={}.hasOwnProperty;function pvt(e){const t={};let n=-1;for(;++n<e.length;)mvt(t,e[n]);return t}function mvt(e,t){let n;for(n in t){const i=(bde.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){bde.call(i,o)||(i[o]=[]);const a=s[o];gvt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function gvt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);yh(e,0,0,r)}const yvt=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Rd=wy(/[A-Za-z]/),vl=wy(/[\dA-Za-z]/),vvt=wy(/[#-'*+\--9=?A-Z^-~]/);function YU(e){return e!==null&&(e<32||e===127)}const KU=wy(/\d/),_vt=wy(/[\dA-Fa-f]/),bvt=wy(/[!-/:-@[-`{-~]/);function fn(e){return e!==null&&e<-2}function Mu(e){return e!==null&&(e<0||e===32)}function Tr(e){return e===-2||e===-1||e===32}const wvt=wy(yvt),Evt=wy(/\s/);function wy(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function di(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Tr(u)?(e.enter(n),a(u)):t(u)}function a(u){return Tr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const xvt={tokenize:Svt};function Svt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),di(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return fn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Tvt={tokenize:Cvt},wde={tokenize:Avt};function Cvt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let b=w;for(;b<t.events.length;)t.events[b][1].end=Object.assign({},S),b++;return yh(t.events,E+1,0,t.events.slice(w)),t.events.length=b,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(wde,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(wde,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return fn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const E=t.sliceStream(_);if(w&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const b=t.events.length;let T=b,A,I;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(A){I=t.events[T][1].end;break}A=!0}for(y(r),S=b;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;yh(t.events,T+1,0,t.events.slice(b)),t.events.length=S}}function y(_){let w=n.length;for(;w-- >_;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Avt(e,t,n){return di(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ede(e){if(e===null||Mu(e)||Evt(e))return 1;if(wvt(e))return 2}function hK(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const XU={name:"attention",tokenize:Ovt,resolveAll:Ivt};function Ivt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);xde(f,-u),xde(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=sc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=sc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=sc(l,hK(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=sc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=sc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,yh(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Ovt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ede(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Ede(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function xde(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Pvt={name:"autolink",tokenize:kvt};function kvt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Rd(h)?(e.consume(h),o):l(h)}function o(h){return h===43||h===45||h===46||vl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||vl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||YU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):vvt(h)?(e.consume(h),l):n(h)}function c(h){return vl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||vl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const g4={tokenize:Rvt,partial:!0};function Rvt(e,t,n){return r;function r(s){return Tr(s)?di(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||fn(s)?t(s):n(s)}}const gPe={name:"blockQuote",tokenize:$vt,continuation:{tokenize:Nvt},exit:Dvt};function $vt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Tr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Nvt(e,t,n){const r=this;return i;function i(o){return Tr(o)?di(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(gPe,t,n)(o)}}function Dvt(e){e.exit("blockQuote")}const yPe={name:"characterEscape",tokenize:Mvt};function Mvt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return bvt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Sde=document.createElement("i");function pK(e){const t="&"+e+";";Sde.innerHTML=t;const n=Sde.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const vPe={name:"characterReference",tokenize:Lvt};function Lvt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=vl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=_vt,c):(e.enter("characterReferenceValue"),s=7,o=KU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===vl&&!pK(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Tde={tokenize:jvt,partial:!0},Cde={name:"codeFenced",tokenize:Fvt,concrete:!0};function Fvt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const b=r.events[r.events.length-1];return s=b&&b[1].type==="linePrefix"?b[2].sliceSerialize(b[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Tr(S)?di(e,f,"whitespace")(S):f(S))}function f(S){return S===null||fn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Tde,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||fn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):Tr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),di(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||fn(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||fn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&Tr(S)?di(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||fn(S)?e.check(Tde,m,w)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||fn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),_)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,b,T){let A=0;return I;function I(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),k}function k(F){return S.enter("codeFencedFence"),Tr(F)?di(S,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):$(F)}function $(F){return F===a?(S.enter("codeFencedFenceSequence"),P(F)):T(F)}function P(F){return F===a?(A++,S.consume(F),P):A>=o?(S.exit("codeFencedFenceSequence"),Tr(F)?di(S,N,"whitespace")(F):N(F)):T(F)}function N(F){return F===null||fn(F)?(S.exit("codeFencedFence"),b(F)):T(F)}}}function jvt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const I9={name:"codeIndented",tokenize:zvt},Bvt={tokenize:Uvt,partial:!0};function zvt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),di(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):fn(l)?e.attempt(Bvt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||fn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Uvt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):fn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):di(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):fn(o)?i(o):n(o)}}const Vvt={name:"codeText",tokenize:Wvt,resolve:Hvt,previous:qvt};function Hvt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function qvt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Wvt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):fn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||fn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function _Pe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Gvt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),yh(e,i,n-i+1,a))}}return!l}function Gvt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),yh(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Yvt={tokenize:Qvt,resolve:Xvt},Kvt={tokenize:Jvt,partial:!0};function Xvt(e){return _Pe(e),e}function Qvt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):fn(a)?e.check(Kvt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Jvt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),di(e,s,"linePrefix")}function s(o){if(o===null||fn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function bPe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||YU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||fn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Mu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||YU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function wPe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):fn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||fn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Tr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function EPe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):fn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),di(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||fn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function R2(e,t){let n;return r;function r(i){return fn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Tr(i)?di(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function gw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Zvt={name:"definition",tokenize:t1t},e1t={tokenize:n1t,partial:!0};function t1t(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return wPe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=gw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Mu(h)?R2(e,l)(h):l(h)}function l(h){return bPe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(e1t,f,f)(h)}function f(h){return Tr(h)?di(e,d,"whitespace")(h):d(h)}function d(h){return h===null||fn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function n1t(e,t,n){return r;function r(a){return Mu(a)?R2(e,i)(a):n(a)}function i(a){return EPe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Tr(a)?di(e,o,"whitespace")(a):o(a)}function o(a){return a===null||fn(a)?t(a):n(a)}}const r1t={name:"hardBreakEscape",tokenize:i1t};function i1t(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return fn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const s1t={name:"headingAtx",tokenize:a1t,resolve:o1t};function o1t(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},yh(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function a1t(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Mu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||fn(c)?(e.exit("atxHeading"),t(c)):Tr(c)?di(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Mu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const u1t=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ade=["pre","script","style","textarea"],l1t={name:"htmlFlow",tokenize:h1t,resolveTo:d1t,concrete:!0},c1t={tokenize:m1t,partial:!0},f1t={tokenize:p1t,partial:!0};function d1t(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function h1t(e,t,n){const r=this;let i,s,o,a,u;return l;function l(L){return c(L)}function c(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),f}function f(L){return L===33?(e.consume(L),d):L===47?(e.consume(L),s=!0,m):L===63?(e.consume(L),i=3,r.interrupt?t:M):Rd(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function d(L){return L===45?(e.consume(L),i=2,h):L===91?(e.consume(L),i=5,a=0,p):Rd(L)?(e.consume(L),i=4,r.interrupt?t:M):n(L)}function h(L){return L===45?(e.consume(L),r.interrupt?t:M):n(L)}function p(L){const B="CDATA[";return L===B.charCodeAt(a++)?(e.consume(L),a===B.length?r.interrupt?t:$:p):n(L)}function m(L){return Rd(L)?(e.consume(L),o=String.fromCharCode(L),g):n(L)}function g(L){if(L===null||L===47||L===62||Mu(L)){const B=L===47,q=o.toLowerCase();return!B&&!s&&Ade.includes(q)?(i=1,r.interrupt?t(L):$(L)):u1t.includes(o.toLowerCase())?(i=6,B?(e.consume(L),y):r.interrupt?t(L):$(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?v(L):_(L))}return L===45||vl(L)?(e.consume(L),o+=String.fromCharCode(L),g):n(L)}function y(L){return L===62?(e.consume(L),r.interrupt?t:$):n(L)}function v(L){return Tr(L)?(e.consume(L),v):I(L)}function _(L){return L===47?(e.consume(L),I):L===58||L===95||Rd(L)?(e.consume(L),w):Tr(L)?(e.consume(L),_):I(L)}function w(L){return L===45||L===46||L===58||L===95||vl(L)?(e.consume(L),w):E(L)}function E(L){return L===61?(e.consume(L),S):Tr(L)?(e.consume(L),E):_(L)}function S(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),u=L,b):Tr(L)?(e.consume(L),S):T(L)}function b(L){return L===u?(e.consume(L),u=null,A):L===null||fn(L)?n(L):(e.consume(L),b)}function T(L){return L===null||L===34||L===39||L===47||L===60||L===61||L===62||L===96||Mu(L)?E(L):(e.consume(L),T)}function A(L){return L===47||L===62||Tr(L)?_(L):n(L)}function I(L){return L===62?(e.consume(L),k):n(L)}function k(L){return L===null||fn(L)?$(L):Tr(L)?(e.consume(L),k):n(L)}function $(L){return L===45&&i===2?(e.consume(L),z):L===60&&i===1?(e.consume(L),W):L===62&&i===4?(e.consume(L),H):L===63&&i===3?(e.consume(L),M):L===93&&i===5?(e.consume(L),G):fn(L)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(c1t,Y,P)(L)):L===null||fn(L)?(e.exit("htmlFlowData"),P(L)):(e.consume(L),$)}function P(L){return e.check(f1t,N,Y)(L)}function N(L){return e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),F}function F(L){return L===null||fn(L)?P(L):(e.enter("htmlFlowData"),$(L))}function z(L){return L===45?(e.consume(L),M):$(L)}function W(L){return L===47?(e.consume(L),o="",V):$(L)}function V(L){if(L===62){const B=o.toLowerCase();return Ade.includes(B)?(e.consume(L),H):$(L)}return Rd(L)&&o.length<8?(e.consume(L),o+=String.fromCharCode(L),V):$(L)}function G(L){return L===93?(e.consume(L),M):$(L)}function M(L){return L===62?(e.consume(L),H):L===45&&i===2?(e.consume(L),M):$(L)}function H(L){return L===null||fn(L)?(e.exit("htmlFlowData"),Y(L)):(e.consume(L),H)}function Y(L){return e.exit("htmlFlow"),t(L)}}function p1t(e,t,n){const r=this;return i;function i(o){return fn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function m1t(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(g4,t,n)}}const g1t={name:"htmlText",tokenize:y1t};function y1t(e,t,n){const r=this;let i,s,o;return a;function a(M){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(M),u}function u(M){return M===33?(e.consume(M),l):M===47?(e.consume(M),E):M===63?(e.consume(M),_):Rd(M)?(e.consume(M),T):n(M)}function l(M){return M===45?(e.consume(M),c):M===91?(e.consume(M),s=0,p):Rd(M)?(e.consume(M),v):n(M)}function c(M){return M===45?(e.consume(M),h):n(M)}function f(M){return M===null?n(M):M===45?(e.consume(M),d):fn(M)?(o=f,W(M)):(e.consume(M),f)}function d(M){return M===45?(e.consume(M),h):f(M)}function h(M){return M===62?z(M):M===45?d(M):f(M)}function p(M){const H="CDATA[";return M===H.charCodeAt(s++)?(e.consume(M),s===H.length?m:p):n(M)}function m(M){return M===null?n(M):M===93?(e.consume(M),g):fn(M)?(o=m,W(M)):(e.consume(M),m)}function g(M){return M===93?(e.consume(M),y):m(M)}function y(M){return M===62?z(M):M===93?(e.consume(M),y):m(M)}function v(M){return M===null||M===62?z(M):fn(M)?(o=v,W(M)):(e.consume(M),v)}function _(M){return M===null?n(M):M===63?(e.consume(M),w):fn(M)?(o=_,W(M)):(e.consume(M),_)}function w(M){return M===62?z(M):_(M)}function E(M){return Rd(M)?(e.consume(M),S):n(M)}function S(M){return M===45||vl(M)?(e.consume(M),S):b(M)}function b(M){return fn(M)?(o=b,W(M)):Tr(M)?(e.consume(M),b):z(M)}function T(M){return M===45||vl(M)?(e.consume(M),T):M===47||M===62||Mu(M)?A(M):n(M)}function A(M){return M===47?(e.consume(M),z):M===58||M===95||Rd(M)?(e.consume(M),I):fn(M)?(o=A,W(M)):Tr(M)?(e.consume(M),A):z(M)}function I(M){return M===45||M===46||M===58||M===95||vl(M)?(e.consume(M),I):k(M)}function k(M){return M===61?(e.consume(M),$):fn(M)?(o=k,W(M)):Tr(M)?(e.consume(M),k):A(M)}function $(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),i=M,P):fn(M)?(o=$,W(M)):Tr(M)?(e.consume(M),$):(e.consume(M),N)}function P(M){return M===i?(e.consume(M),i=void 0,F):M===null?n(M):fn(M)?(o=P,W(M)):(e.consume(M),P)}function N(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||Mu(M)?A(M):(e.consume(M),N)}function F(M){return M===47||M===62||Mu(M)?A(M):n(M)}function z(M){return M===62?(e.consume(M),e.exit("htmlTextData"),e.exit("htmlText"),t):n(M)}function W(M){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),V}function V(M){return Tr(M)?di(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):G(M)}function G(M){return e.enter("htmlTextData"),o(M)}}const mK={name:"labelEnd",tokenize:x1t,resolveTo:E1t,resolveAll:w1t},v1t={tokenize:S1t},_1t={tokenize:T1t},b1t={tokenize:C1t};function w1t(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function E1t(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=sc(a,e.slice(s+1,s+r+3)),a=sc(a,[["enter",c,t]]),a=sc(a,hK(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=sc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=sc(a,e.slice(o+1)),a=sc(a,[["exit",u,t]]),yh(e,s,e.length,a),e}function x1t(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(gw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(v1t,c,o?c:f)(d):d===91?e.attempt(_1t,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(b1t,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function S1t(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Mu(f)?R2(e,s)(f):s(f)}function s(f){return f===41?c(f):bPe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Mu(f)?R2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?EPe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Mu(f)?R2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function T1t(e,t,n){const r=this;return i;function i(a){return wPe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(gw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function C1t(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const A1t={name:"labelStartImage",tokenize:I1t,resolveAll:mK.resolveAll};function I1t(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const O1t={name:"labelStartLink",tokenize:P1t,resolveAll:mK.resolveAll};function P1t(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const O9={name:"lineEnding",tokenize:k1t};function k1t(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),di(e,t,"linePrefix")}}const UR={name:"thematicBreak",tokenize:R1t};function R1t(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||fn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Tr(l)?di(e,a,"whitespace")(l):a(l))}}const hu={name:"list",tokenize:D1t,continuation:{tokenize:M1t},exit:F1t},$1t={tokenize:j1t,partial:!0},N1t={tokenize:L1t,partial:!0};function D1t(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:KU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(UR,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return KU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(g4,r.interrupt?n:c,e.attempt($1t,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Tr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function M1t(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(g4,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,di(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Tr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(N1t,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,di(e,e.attempt(hu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function L1t(e,t,n){const r=this;return di(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function F1t(e){e.exit(this.containerState.type)}function j1t(e,t,n){const r=this;return di(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Tr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Ide={name:"setextUnderline",tokenize:z1t,resolveTo:B1t};function B1t(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function z1t(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Tr(l)?di(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||fn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const U1t={tokenize:V1t};function V1t(e){const t=this,n=e.attempt(g4,r,e.attempt(this.parser.constructs.flowInitial,i,di(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Yvt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const H1t={resolveAll:SPe()},q1t=xPe("string"),W1t=xPe("text");function xPe(e){return{tokenize:t,resolveAll:SPe(e==="text"?G1t:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function SPe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function G1t(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Y1t(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:w,attempt:b(E),check:b(S),interrupt:b(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(k){return o=sc(o,k),g(),o[o.length-1]!==null?[]:(T(t,0),l.events=hK(s,l.events,l),l.events)}function d(k,$){return X1t(h(k),$)}function h(k){return K1t(o,k)}function p(){const{line:k,column:$,offset:P,_index:N,_bufferIndex:F}=r;return{line:k,column:$,offset:P,_index:N,_bufferIndex:F}}function m(k){i[k.line]=k.column,I()}function g(){let k;for(;r._index<o.length;){const $=o[r._index];if(typeof $=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<$.length;)y($.charCodeAt(r._bufferIndex));else y($)}}function y(k){c=c(k)}function v(k){fn(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,I()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=k}function _(k,$){const P=$||{};return P.type=k,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(k){const $=a.pop();return $.end=p(),l.events.push(["exit",$,l]),$}function E(k,$){T(k,$.from)}function S(k,$){$.restore()}function b(k,$){return P;function P(N,F,z){let W,V,G,M;return Array.isArray(N)?Y(N):"tokenize"in N?Y([N]):H(N);function H(Z){return ue;function ue(he){const fe=he!==null&&Z[he],me=he!==null&&Z.null,_e=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(me)?me:me?[me]:[]];return Y(_e)(he)}}function Y(Z){return W=Z,V=0,Z.length===0?z:L(Z[V])}function L(Z){return ue;function ue(he){return M=A(),G=Z,Z.partial||(l.currentConstruct=Z),Z.name&&l.parser.constructs.disable.null.includes(Z.name)?q():Z.tokenize.call($?Object.assign(Object.create(l),$):l,u,B,q)(he)}}function B(Z){return k(G,M),F}function q(Z){return M.restore(),++V<W.length?L(W[V]):z}}}function T(k,$){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&yh(l.events,$,l.events.length-$,k.resolve(l.events.slice($),l)),k.resolveTo&&(l.events=k.resolveTo(l.events,l))}function A(){const k=p(),$=l.previous,P=l.currentConstruct,N=l.events.length,F=Array.from(a);return{restore:z,from:N};function z(){r=k,l.previous=$,l.currentConstruct=P,l.events.length=N,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function K1t(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function X1t(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Q1t={42:hu,43:hu,45:hu,48:hu,49:hu,50:hu,51:hu,52:hu,53:hu,54:hu,55:hu,56:hu,57:hu,62:gPe},J1t={91:Zvt},Z1t={[-2]:I9,[-1]:I9,32:I9},e_t={35:s1t,42:UR,45:[Ide,UR],60:l1t,61:Ide,95:UR,96:Cde,126:Cde},t_t={38:vPe,92:yPe},n_t={[-5]:O9,[-4]:O9,[-3]:O9,33:A1t,38:vPe,42:XU,60:[Pvt,g1t],91:O1t,92:[r1t,yPe],93:mK,95:XU,96:Vvt},r_t={null:[XU,H1t]},i_t={null:[42,95]},s_t={null:[]},o_t=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:i_t,contentInitial:J1t,disable:s_t,document:Q1t,flow:e_t,flowInitial:Z1t,insideSpan:r_t,string:t_t,text:n_t},Symbol.toStringTag,{value:"Module"}));function a_t(e){const n=pvt([o_t,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(xvt),document:i(Tvt),flow:i(U1t),string:i(q1t),text:i(W1t)};return r;function i(s){return o;function o(a){return Y1t(r,s,a)}}}const Ode=/[\0\t\n\r]/g;function u_t(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Ode.lastIndex=f,l=Ode.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function l_t(e){for(;!_Pe(e););return e}function TPe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const c_t=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function f_t(e){return e.replace(c_t,d_t)}function d_t(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return TPe(n.slice(s?2:1),s?16:10)}return pK(n)||e}const CPe={}.hasOwnProperty,h_t=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),p_t(n)(l_t(a_t(n).document().write(u_t()(e,t,!0))))};function p_t(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ft),autolinkProtocol:k,autolinkEmail:k,atxHeading:a(Oe),blockQuote:a(_e),characterEscape:k,characterReference:k,codeFenced:a(ge),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(ge,u),codeText:a(Be,u),codeTextData:k,data:k,codeFlowValue:k,definition:a(Me),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(ct),hardBreakEscape:a(Re),hardBreakTrailing:a(Re),htmlFlow:a(Ye,u),htmlFlowData:k,htmlText:a(Ye,u),htmlTextData:k,image:a(Ut),label:u,link:a(Ft),listItem:a(Ge),listItemValue:p,listOrdered:a(Je,h),listUnordered:a(Je),paragraph:a(gt),reference:q,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(Oe),strong:a(at),thematicBreak:a(Et)},exit:{atxHeading:c(),atxHeadingSequence:b,autolink:c(),autolinkEmail:me,autolinkProtocol:fe,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:ue,characterReferenceMarkerNumeric:ue,characterReferenceValue:he,codeFenced:c(v),codeFencedFence:y,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:$,codeIndented:c(_),codeText:c(W),codeTextData:$,data:$,definition:c(),definitionDestinationString:S,definitionLabelString:w,definitionTitleString:E,emphasis:c(),hardBreakEscape:c(N),hardBreakTrailing:c(N),htmlFlow:c(F),htmlFlowData:$,htmlText:c(z),htmlTextData:$,image:c(G),label:H,labelText:M,lineEnding:P,link:c(V),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Z,resourceDestinationString:Y,resourceTitleString:L,resource:B,setextHeading:c(I),setextHeadingLineSequence:A,setextHeadingText:T,strong:c(),thematicBreak:c()}};APe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ve){let Se={type:"root",children:[]};const Fe={stack:[Se],tokenStack:[],config:t,enter:l,exit:f,buffer:u,resume:d,setData:s,getData:o},Ue=[];let mt=-1;for(;++mt<ve.length;)if(ve[mt][1].type==="listOrdered"||ve[mt][1].type==="listUnordered")if(ve[mt][0]==="enter")Ue.push(mt);else{const cn=Ue.pop();mt=i(ve,cn,mt)}for(mt=-1;++mt<ve.length;){const cn=t[ve[mt][0]];CPe.call(cn,ve[mt][1].type)&&cn[ve[mt][1].type].call(Object.assign({sliceSerialize:ve[mt][2].sliceSerialize},Fe),ve[mt][1])}if(Fe.tokenStack.length>0){const cn=Fe.tokenStack[Fe.tokenStack.length-1];(cn[1]||Pde).call(Fe,void 0,cn[0])}for(Se.position={start:og(ve.length>0?ve[0][1].start:{line:1,column:1,offset:0}),end:og(ve.length>0?ve[ve.length-2][1].end:{line:1,column:1,offset:0})},mt=-1;++mt<t.transforms.length;)Se=t.transforms[mt](Se)||Se;return Se}function i(ve,Se,Fe){let Ue=Se-1,mt=-1,cn=!1,Ve,wt,bt,bn;for(;++Ue<=Fe;){const Lt=ve[Ue];if(Lt[1].type==="listUnordered"||Lt[1].type==="listOrdered"||Lt[1].type==="blockQuote"?(Lt[0]==="enter"?mt++:mt--,bn=void 0):Lt[1].type==="lineEndingBlank"?Lt[0]==="enter"&&(Ve&&!bn&&!mt&&!bt&&(bt=Ue),bn=void 0):Lt[1].type==="linePrefix"||Lt[1].type==="listItemValue"||Lt[1].type==="listItemMarker"||Lt[1].type==="listItemPrefix"||Lt[1].type==="listItemPrefixWhitespace"||(bn=void 0),!mt&&Lt[0]==="enter"&&Lt[1].type==="listItemPrefix"||mt===-1&&Lt[0]==="exit"&&(Lt[1].type==="listUnordered"||Lt[1].type==="listOrdered")){if(Ve){let Ir=Ue;for(wt=void 0;Ir--;){const Fn=ve[Ir];if(Fn[1].type==="lineEnding"||Fn[1].type==="lineEndingBlank"){if(Fn[0]==="exit")continue;wt&&(ve[wt][1].type="lineEndingBlank",cn=!0),Fn[1].type="lineEnding",wt=Ir}else if(!(Fn[1].type==="linePrefix"||Fn[1].type==="blockQuotePrefix"||Fn[1].type==="blockQuotePrefixWhitespace"||Fn[1].type==="blockQuoteMarker"||Fn[1].type==="listItemIndent"))break}bt&&(!wt||bt<wt)&&(Ve._spread=!0),Ve.end=Object.assign({},wt?ve[wt][1].start:Lt[1].end),ve.splice(wt||Ue,0,["exit",Ve,Lt[2]]),Ue++,Fe++}Lt[1].type==="listItemPrefix"&&(Ve={type:"listItem",_spread:!1,start:Object.assign({},Lt[1].start),end:void 0},ve.splice(Ue,0,["enter",Ve,Lt[2]]),Ue++,Fe++,bt=void 0,bn=!0)}}return ve[Se][1]._spread=cn,Fe}function s(ve,Se){n[ve]=Se}function o(ve){return n[ve]}function a(ve,Se){return Fe;function Fe(Ue){l.call(this,ve(Ue),Ue),Se&&Se.call(this,Ue)}}function u(){this.stack.push({type:"fragment",children:[]})}function l(ve,Se,Fe){return this.stack[this.stack.length-1].children.push(ve),this.stack.push(ve),this.tokenStack.push([Se,Fe]),ve.position={start:og(Se.start)},ve}function c(ve){return Se;function Se(Fe){ve&&ve.call(this,Fe),f.call(this,Fe)}}function f(ve,Se){const Fe=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==ve.type&&(Se?Se.call(this,ve,Ue[0]):(Ue[1]||Pde).call(this,ve,Ue[0]));else throw new Error("Cannot close `"+ve.type+"` ("+mw({start:ve.start,end:ve.end})+"): its not open");return Fe.position.end=og(ve.end),Fe}function d(){return dvt(this.stack.pop())}function h(){s("expectingFirstListItemValue",!0)}function p(ve){if(o("expectingFirstListItemValue")){const Se=this.stack[this.stack.length-2];Se.start=Number.parseInt(this.sliceSerialize(ve),10),s("expectingFirstListItemValue")}}function m(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.lang=ve}function g(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.meta=ve}function y(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function v(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function _(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve.replace(/(\r?\n|\r)$/g,"")}function w(ve){const Se=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=Se,Fe.identifier=gw(this.sliceSerialize(ve)).toLowerCase()}function E(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ve}function S(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ve}function b(ve){const Se=this.stack[this.stack.length-1];if(!Se.depth){const Fe=this.sliceSerialize(ve).length;Se.depth=Fe}}function T(){s("setextHeadingSlurpLineEnding",!0)}function A(ve){const Se=this.stack[this.stack.length-1];Se.depth=this.sliceSerialize(ve).charCodeAt(0)===61?1:2}function I(){s("setextHeadingSlurpLineEnding")}function k(ve){const Se=this.stack[this.stack.length-1];let Fe=Se.children[Se.children.length-1];(!Fe||Fe.type!=="text")&&(Fe=lt(),Fe.position={start:og(ve.start)},Se.children.push(Fe)),this.stack.push(Fe)}function $(ve){const Se=this.stack.pop();Se.value+=this.sliceSerialize(ve),Se.position.end=og(ve.end)}function P(ve){const Se=this.stack[this.stack.length-1];if(o("atHardBreak")){const Fe=Se.children[Se.children.length-1];Fe.position.end=og(ve.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Se.type)&&(k.call(this,ve),$.call(this,ve))}function N(){s("atHardBreak",!0)}function F(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function z(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function W(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function V(){const ve=this.stack[this.stack.length-1];if(o("inReference")){const Se=o("referenceType")||"shortcut";ve.type+="Reference",ve.referenceType=Se,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;s("referenceType")}function G(){const ve=this.stack[this.stack.length-1];if(o("inReference")){const Se=o("referenceType")||"shortcut";ve.type+="Reference",ve.referenceType=Se,delete ve.url,delete ve.title}else delete ve.identifier,delete ve.label;s("referenceType")}function M(ve){const Se=this.sliceSerialize(ve),Fe=this.stack[this.stack.length-2];Fe.label=f_t(Se),Fe.identifier=gw(Se).toLowerCase()}function H(){const ve=this.stack[this.stack.length-1],Se=this.resume(),Fe=this.stack[this.stack.length-1];if(s("inReference",!0),Fe.type==="link"){const Ue=ve.children;Fe.children=Ue}else Fe.alt=Se}function Y(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ve}function L(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ve}function B(){s("inReference")}function q(){s("referenceType","collapsed")}function Z(ve){const Se=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=Se,Fe.identifier=gw(this.sliceSerialize(ve)).toLowerCase(),s("referenceType","full")}function ue(ve){s("characterReferenceType",ve.type)}function he(ve){const Se=this.sliceSerialize(ve),Fe=o("characterReferenceType");let Ue;Fe?(Ue=TPe(Se,Fe==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):Ue=pK(Se);const mt=this.stack.pop();mt.value+=Ue,mt.position.end=og(ve.end)}function fe(ve){$.call(this,ve);const Se=this.stack[this.stack.length-1];Se.url=this.sliceSerialize(ve)}function me(ve){$.call(this,ve);const Se=this.stack[this.stack.length-1];Se.url="mailto:"+this.sliceSerialize(ve)}function _e(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function Be(){return{type:"inlineCode",value:""}}function Me(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ct(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:void 0,children:[]}}function Re(){return{type:"break"}}function Ye(){return{type:"html",value:""}}function Ut(){return{type:"image",title:null,url:"",alt:null}}function Ft(){return{type:"link",title:null,url:"",children:[]}}function Je(ve){return{type:"list",ordered:ve.type==="listOrdered",start:null,spread:ve._spread,children:[]}}function Ge(ve){return{type:"listItem",spread:ve._spread,checked:null,children:[]}}function gt(){return{type:"paragraph",children:[]}}function at(){return{type:"strong",children:[]}}function lt(){return{type:"text",value:""}}function Et(){return{type:"thematicBreak"}}}function og(e){return{line:e.line,column:e.column,offset:e.offset}}function APe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?APe(e,r):m_t(e,r)}}function m_t(e,t){let n;for(n in t)if(CPe.call(t,n)){if(n==="canContainEols"){const r=t[n];r&&e[n].push(...r)}else if(n==="transforms"){const r=t[n];r&&e[n].push(...r)}else if(n==="enter"||n==="exit"){const r=t[n];r&&Object.assign(e[n],r)}}}function Pde(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+mw({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+mw({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+mw({start:t.start,end:t.end})+") is still open")}function g_t(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return h_t(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function y_t(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function v_t(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function __t(e,t){const n=t.value?t.value+`
`:"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function b_t(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function w_t(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _x(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&vl(e.charCodeAt(n+1))&&vl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function IPe(e,t){const n=String(t.identifier).toUpperCase(),r=_x(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n],a={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,a);const u={type:"element",tagName:"sup",properties:{},children:[a]};return e.patch(t,u),e.applyData(t,u)}function E_t(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},IPe(e,{type:"footnoteReference",identifier:i,position:t.position})}function x_t(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function S_t(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null}function OPe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+r};const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function T_t(e,t){const n=e.definition(t.identifier);if(!n)return OPe(e,t);const r={src:_x(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,i),e.applyData(t,i)}function C_t(e,t){const n={src:_x(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function A_t(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function I_t(e,t){const n=e.definition(t.identifier);if(!n)return OPe(e,t);const r={href:_x(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function O_t(e,t){const n={href:_x(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function P_t(e,t,n){const r=e.all(t),i=n?k_t(n):PPe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function k_t(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=PPe(n[r])}return t}function PPe(e){const t=e.spread;return t??e.children.length>1}function R_t(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function $_t(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function N_t(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function D_t(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const gK=kPe("start"),yK=kPe("end");function M_t(e){return{start:gK(e),end:yK(e)}}function kPe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function L_t(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=gK(t.children[1]),u=yK(t.children[t.children.length-1]);a.line&&u.line&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function F_t(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(t,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function j_t(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const kde=9,Rde=32;function B_t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push($de(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push($de(t.slice(i),i>0,!1)),s.join("")}function $de(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===kde||s===Rde;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===kde||s===Rde;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function z_t(e,t){const n={type:"text",value:B_t(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function U_t(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const V_t={blockquote:y_t,break:v_t,code:__t,delete:b_t,emphasis:w_t,footnoteReference:IPe,footnote:E_t,heading:x_t,html:S_t,imageReference:T_t,image:C_t,inlineCode:A_t,linkReference:I_t,link:O_t,listItem:P_t,list:R_t,paragraph:$_t,root:N_t,strong:D_t,table:L_t,tableCell:j_t,tableRow:F_t,text:z_t,thematicBreak:U_t,toml:QP,yaml:QP,definition:QP,footnoteDefinition:QP};function QP(){return null}const RPe=function(e){if(e==null)return G_t;if(typeof e=="string")return W_t(e);if(typeof e=="object")return Array.isArray(e)?H_t(e):q_t(e);if(typeof e=="function")return y4(e);throw new Error("Expected function, string, or object as test")};function H_t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=RPe(e[n]);return y4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function q_t(e){return y4(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function W_t(e){return y4(t);function t(n){return n&&n.type===e}}function y4(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function G_t(){return!0}const Y_t=!0,Nde=!1,K_t="skip",X_t=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=RPe(t),s=r?-1:1;o(e,void 0,[])();function o(a,u,l){const c=a&&typeof a=="object"?a:{};if(typeof c.type=="string"){const d=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=[],h,p,m;if((!t||i(a,u,l[l.length-1]||null))&&(d=Q_t(n(a,l)),d[0]===Nde))return d;if(a.children&&d[0]!==K_t)for(p=(r?a.children.length:-1)+s,m=l.concat(a);p>-1&&p<a.children.length;){if(h=o(a.children[p],p,m)(),h[0]===Nde)return h;p=typeof h[1]=="number"?h[1]:p+s}return d}}};function Q_t(e){return Array.isArray(e)?e:typeof e=="number"?[Y_t,e]:[e]}const vK=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),X_t(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}};function J_t(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const Dde={}.hasOwnProperty;function Z_t(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return vK(e,"definition",r=>{const i=Mde(r.identifier);i&&!Dde.call(t,i)&&(t[i]=r)}),n;function n(r){const i=Mde(r);return i&&Dde.call(t,i)?t[i]:null}}function Mde(e){return String(e||"").toUpperCase()}const y3={}.hasOwnProperty;function ebt(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,o.handlers={...V_t,...n.handlers},o.definition=Z_t(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.patch=tbt,o.applyData=nbt,o.one=a,o.all=u,o.wrap=ibt,o.augment=s,vK(e,"footnoteDefinition",l=>{const c=String(l.identifier).toUpperCase();y3.call(i,c)||(i[c]=l)}),o;function s(l,c){if(l&&"data"in l&&l.data){const f=l.data;f.hName&&(c.type!=="element"&&(c={type:"element",tagName:"",properties:{},children:[]}),c.tagName=f.hName),c.type==="element"&&f.hProperties&&(c.properties={...c.properties,...f.hProperties}),"children"in c&&c.children&&f.hChildren&&(c.children=f.hChildren)}if(l){const f="type"in l?l:{position:l};J_t(f)||(c.position={start:gK(f),end:yK(f)})}return c}function o(l,c,f,d){return Array.isArray(f)&&(d=f,f={}),s(l,{type:"element",tagName:c,properties:f||{},children:d||[]})}function a(l,c){return $Pe(o,l,c)}function u(l){return _K(o,l)}}function tbt(e,t){e.position&&(t.position=M_t(e))}function nbt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;typeof r=="string"&&(n.type==="element"?n.tagName=r:n={type:"element",tagName:r,properties:{},children:[]}),n.type==="element"&&s&&(n.properties={...n.properties,...s}),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function $Pe(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return y3.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:_K(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):rbt(e,t)}function _K(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=$Pe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}function rbt(e,t){const n=t.data||{},r="value"in t&&!(y3.call(n,"hProperties")||y3.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:_K(e,t)};return e.patch(t,r),e.applyData(t,r)}function ibt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function sbt(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const i=e.all(r),s=String(r.identifier).toUpperCase(),o=_x(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:e.wrap(i,!0)};e.patch(r,c),t.push(c)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function NPe(e,t){const n=ebt(e,t),r=n.one(e,null),i=sbt(n);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const obt=function(e,t){return e&&"run"in e?abt(e,t):ubt(e||t)};function abt(e,t){return(n,r,i)=>{e.run(NPe(n,t),r,s=>{i(s)})}}function ubt(e){return t=>NPe(t,e)}let AI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};AI.prototype.property={};AI.prototype.normal={};AI.prototype.space=null;function DPe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new AI(n,r,t)}function qC(e){return e.toLowerCase()}let Lc=class{constructor(t,n){this.property=t,this.attribute=n}};Lc.prototype.space=null;Lc.prototype.boolean=!1;Lc.prototype.booleanish=!1;Lc.prototype.overloadedBoolean=!1;Lc.prototype.number=!1;Lc.prototype.commaSeparated=!1;Lc.prototype.spaceSeparated=!1;Lc.prototype.commaOrSpaceSeparated=!1;Lc.prototype.mustUseProperty=!1;Lc.prototype.defined=!1;let lbt=0;const Sn=m_(),_s=m_(),MPe=m_(),tt=m_(),ci=m_(),yw=m_(),ol=m_();function m_(){return 2**++lbt}const QU=Object.freeze(Object.defineProperty({__proto__:null,boolean:Sn,booleanish:_s,commaOrSpaceSeparated:ol,commaSeparated:yw,number:tt,overloadedBoolean:MPe,spaceSeparated:ci},Symbol.toStringTag,{value:"Module"})),P9=Object.keys(QU);class bK extends Lc{constructor(t,n,r,i){let s=-1;if(super(t,n),Lde(this,"space",i),typeof r=="number")for(;++s<P9.length;){const o=P9[s];Lde(this,P9[s],(r&QU[o])===QU[o])}}}bK.prototype.defined=!0;function Lde(e,t,n){n&&(e[t]=n)}const cbt={}.hasOwnProperty;function bx(e){const t={},n={};let r;for(r in e.properties)if(cbt.call(e.properties,r)){const i=e.properties[r],s=new bK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[qC(r)]=r,n[qC(s.attribute)]=r}return new AI(t,n,e.space)}const LPe=bx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),FPe=bx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function jPe(e,t){return t in e?e[t]:t}function BPe(e,t){return jPe(e,t.toLowerCase())}const zPe=bx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:BPe,properties:{xmlns:null,xmlnsXLink:null}}),UPe=bx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:_s,ariaAutoComplete:null,ariaBusy:_s,ariaChecked:_s,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:ci,ariaCurrent:null,ariaDescribedBy:ci,ariaDetails:null,ariaDisabled:_s,ariaDropEffect:ci,ariaErrorMessage:null,ariaExpanded:_s,ariaFlowTo:ci,ariaGrabbed:_s,ariaHasPopup:null,ariaHidden:_s,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ci,ariaLevel:tt,ariaLive:null,ariaModal:_s,ariaMultiLine:_s,ariaMultiSelectable:_s,ariaOrientation:null,ariaOwns:ci,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:_s,ariaReadOnly:_s,ariaRelevant:null,ariaRequired:_s,ariaRoleDescription:ci,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:_s,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),fbt=bx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:BPe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yw,acceptCharset:ci,accessKey:ci,action:null,allow:null,allowFullScreen:Sn,allowPaymentRequest:Sn,allowUserMedia:Sn,alt:null,as:null,async:Sn,autoCapitalize:null,autoComplete:ci,autoFocus:Sn,autoPlay:Sn,blocking:ci,capture:null,charSet:null,checked:Sn,cite:null,className:ci,cols:tt,colSpan:null,content:null,contentEditable:_s,controls:Sn,controlsList:ci,coords:tt|yw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Sn,defer:Sn,dir:null,dirName:null,disabled:Sn,download:MPe,draggable:_s,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Sn,formTarget:null,headers:ci,height:tt,hidden:Sn,high:tt,href:null,hrefLang:null,htmlFor:ci,httpEquiv:ci,id:null,imageSizes:null,imageSrcSet:null,inert:Sn,inputMode:null,integrity:null,is:null,isMap:Sn,itemId:null,itemProp:ci,itemRef:ci,itemScope:Sn,itemType:ci,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Sn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:Sn,muted:Sn,name:null,nonce:null,noModule:Sn,noValidate:Sn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Sn,optimum:tt,pattern:null,ping:ci,placeholder:null,playsInline:Sn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Sn,referrerPolicy:null,rel:ci,required:Sn,reversed:Sn,rows:tt,rowSpan:tt,sandbox:ci,scope:null,scoped:Sn,seamless:Sn,selected:Sn,shadowRootClonable:Sn,shadowRootDelegatesFocus:Sn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:_s,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:Sn,useMap:null,value:_s,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ci,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Sn,declare:Sn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:Sn,noHref:Sn,noShade:Sn,noWrap:Sn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:_s,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Sn,disableRemotePlayback:Sn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),dbt=bx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:jPe,properties:{about:ol,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:ci,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:Sn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yw,g2:yw,glyphName:yw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:ol,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ci,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ol,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ol,rev:ol,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ol,requiredFeatures:ol,requiredFonts:ol,requiredFormats:ol,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:ol,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ol,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ol,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),hbt=/^data[-\w.:]+$/i,Fde=/-[a-z]/g,pbt=/[A-Z]/g;function v4(e,t){const n=qC(t);let r=t,i=Lc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&hbt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Fde,gbt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Fde.test(s)){let o=s.replace(pbt,mbt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=bK}return new i(r,t)}function mbt(e){return"-"+e.toLowerCase()}function gbt(e){return e.charAt(1).toUpperCase()}const jde={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},II=DPe([FPe,LPe,zPe,UPe,fbt],"html"),wx=DPe([FPe,LPe,zPe,UPe,dbt],"svg");function ybt(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{vK(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var VPe={exports:{}},Ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wK=Symbol.for("react.element"),EK=Symbol.for("react.portal"),_4=Symbol.for("react.fragment"),b4=Symbol.for("react.strict_mode"),w4=Symbol.for("react.profiler"),E4=Symbol.for("react.provider"),x4=Symbol.for("react.context"),vbt=Symbol.for("react.server_context"),S4=Symbol.for("react.forward_ref"),T4=Symbol.for("react.suspense"),C4=Symbol.for("react.suspense_list"),A4=Symbol.for("react.memo"),I4=Symbol.for("react.lazy"),_bt=Symbol.for("react.offscreen"),HPe;HPe=Symbol.for("react.module.reference");function Fc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wK:switch(e=e.type,e){case _4:case w4:case b4:case T4:case C4:return e;default:switch(e=e&&e.$$typeof,e){case vbt:case x4:case S4:case I4:case A4:case E4:return e;default:return t}}case EK:return t}}}Ur.ContextConsumer=x4;Ur.ContextProvider=E4;Ur.Element=wK;Ur.ForwardRef=S4;Ur.Fragment=_4;Ur.Lazy=I4;Ur.Memo=A4;Ur.Portal=EK;Ur.Profiler=w4;Ur.StrictMode=b4;Ur.Suspense=T4;Ur.SuspenseList=C4;Ur.isAsyncMode=function(){return!1};Ur.isConcurrentMode=function(){return!1};Ur.isContextConsumer=function(e){return Fc(e)===x4};Ur.isContextProvider=function(e){return Fc(e)===E4};Ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wK};Ur.isForwardRef=function(e){return Fc(e)===S4};Ur.isFragment=function(e){return Fc(e)===_4};Ur.isLazy=function(e){return Fc(e)===I4};Ur.isMemo=function(e){return Fc(e)===A4};Ur.isPortal=function(e){return Fc(e)===EK};Ur.isProfiler=function(e){return Fc(e)===w4};Ur.isStrictMode=function(e){return Fc(e)===b4};Ur.isSuspense=function(e){return Fc(e)===T4};Ur.isSuspenseList=function(e){return Fc(e)===C4};Ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_4||e===w4||e===b4||e===T4||e===C4||e===_bt||typeof e=="object"&&e!==null&&(e.$$typeof===I4||e.$$typeof===A4||e.$$typeof===E4||e.$$typeof===x4||e.$$typeof===S4||e.$$typeof===HPe||e.getModuleId!==void 0)};Ur.typeOf=Fc;VPe.exports=Ur;var bbt=VPe.exports;const wbt=Ju(bbt);function Ebt(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function Bde(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function qPe(e){return e.join(" ").trim()}function zde(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function WPe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var xK={exports:{}},Ude=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,xbt=/\n/g,Sbt=/^\s*/,Tbt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Cbt=/^:\s*/,Abt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Ibt=/^[;\s]*/,Obt=/^\s+|\s+$/g,Pbt=`
`,Vde="/",Hde="*",Ev="",kbt="comment",Rbt="declaration",$bt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(xbt);m&&(n+=m.length);var g=p.lastIndexOf(Pbt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Sbt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Vde!=e.charAt(0)||Hde!=e.charAt(1))){for(var m=2;Ev!=e.charAt(m)&&(Hde!=e.charAt(m)||Vde!=e.charAt(m+1));)++m;if(m+=2,Ev===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:kbt,comment:g})}}function d(){var p=s(),m=u(Tbt);if(m){if(f(),!u(Cbt))return a("property missing ':'");var g=u(Abt),y=p({type:Rbt,property:qde(m[0].replace(Ude,Ev)),value:g?qde(g[0].replace(Ude,Ev)):Ev});return u(Ibt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function qde(e){return e?e.replace(Obt,Ev):Ev}var Nbt=$bt;function GPe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=Nbt(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}xK.exports=GPe;xK.exports.default=GPe;var Dbt=xK.exports;const Mbt=Ju(Dbt),JU={}.hasOwnProperty,Lbt=new Set(["table","thead","tbody","tfoot","tr"]);function YPe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(Fbt(e,i,r,t)):i.type==="text"?(t.type!=="element"||!Lbt.has(t.tagName)||!Ebt(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function Fbt(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?Ryt:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=wx,e.schema=l),t.properties)for(c in t.properties)JU.call(t.properties,c)&&Bbt(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=YPe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&JU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===j.Fragment;if(!wbt.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=n,a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=jbt(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=k9(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=Vbt(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=k9(r,t),u.siblingCount=k9(r)),p||(u.node=t),f.length>0?j.createElement(h,u,f):j.createElement(h,u)}function jbt(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function k9(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function Bbt(e,t,n,r){const i=v4(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?WPe(s):qPe(s)),i.property==="style"&&typeof s=="string"&&(s=zbt(s)),i.space&&i.property?e[JU.call(jde,i.property)?jde[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function zbt(e){const t={};try{Mbt(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,Ubt)]=i}}function Ubt(e,t){return t.toUpperCase()}function Vbt(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const Wde={}.hasOwnProperty,Hbt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",JP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function KPe(e){for(const s in JP)if(Wde.call(JP,s)&&Wde.call(e,s)){const o=JP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${Hbt}#${o.id}> for more info)`),delete JP[s]}const t=avt().use(g_t).use(e.remarkPlugins||[]).use(obt,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(ybt,e),n=new Hyt;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=j.createElement(j.Fragment,{},YPe({options:e,schema:II,listDepth:0},r));return e.className&&(i=j.createElement("div",{className:e.className},i)),i}KPe.propTypes={children:Jt.string,className:Jt.string,allowElement:Jt.func,allowedElements:Jt.arrayOf(Jt.string),disallowedElements:Jt.arrayOf(Jt.string),unwrapDisallowed:Jt.bool,remarkPlugins:Jt.arrayOf(Jt.oneOfType([Jt.object,Jt.func,Jt.arrayOf(Jt.oneOfType([Jt.bool,Jt.string,Jt.object,Jt.func,Jt.arrayOf(Jt.any)]))])),rehypePlugins:Jt.arrayOf(Jt.oneOfType([Jt.object,Jt.func,Jt.arrayOf(Jt.oneOfType([Jt.bool,Jt.string,Jt.object,Jt.func,Jt.arrayOf(Jt.any)]))])),sourcePos:Jt.bool,rawSourcePos:Jt.bool,skipHtml:Jt.bool,includeElementIndex:Jt.bool,transformLinkUri:Jt.oneOfType([Jt.func,Jt.bool]),linkTarget:Jt.oneOfType([Jt.func,Jt.string]),transformImageUri:Jt.func,components:Jt.object};const XPe=-1,O4=0,v3=1,_3=2,SK=3,TK=4,CK=5,AK=6,QPe=7,JPe=8,Gde=typeof self=="object"?self:globalThis,qbt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case O4:case XPe:return n(o,i);case v3:{const a=n([],i);for(const u of o)a.push(r(u));return a}case _3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case SK:return n(new Date(o),i);case TK:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case CK:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case AK:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case QPe:{const{name:a,message:u}=o;return n(new Gde[a](u),i)}case JPe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Gde[s](o),i)};return r},Yde=e=>qbt(new Map,e)(0),Z_="",{toString:Wbt}={},{keys:Gbt}=Object,zS=e=>{const t=typeof e;if(t!=="object"||!e)return[O4,t];const n=Wbt.call(e).slice(8,-1);switch(n){case"Array":return[v3,Z_];case"Object":return[_3,Z_];case"Date":return[SK,Z_];case"RegExp":return[TK,Z_];case"Map":return[CK,Z_];case"Set":return[AK,Z_]}return n.includes("Array")?[v3,n]:n.includes("Error")?[QPe,n]:[_3,n]},ZP=([e,t])=>e===O4&&(t==="function"||t==="symbol"),Ybt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=zS(o);switch(a){case O4:{let c=o;switch(u){case"bigint":a=JPe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([XPe],o)}return i([a,c],o)}case v3:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case _3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Gbt(o))(e||!ZP(zS(o[d])))&&c.push([s(d),s(o[d])]);return f}case SK:return i([a,o.toISOString()],o);case TK:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case CK:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(ZP(zS(d))||ZP(zS(h))))&&c.push([s(d),s(h)]);return f}case AK:{const c=[],f=i([a,c],o);for(const d of o)(e||!ZP(zS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Kde=(e,{json:t,lossy:n}={})=>{const r=[];return Ybt(!(t||n),!!t,new Map,r)(e),r},Xde=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Yde(Kde(e,t)):structuredClone(e):(e,t)=>Yde(Kde(e,t)),Qde=/[#.]/g;function Kbt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Qde.lastIndex=i;const a=Qde.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Xbt=new Set(["button","menu","reset","submit"]),ZU={}.hasOwnProperty;function ZPe(e,t,n){const r=n&&ewt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Kbt(s,t),l.tagName=l.tagName.toLowerCase(),r&&ZU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Qbt(o,l.tagName)){let c;for(c in o)ZU.call(o,c)&&Jbt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)eV(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Qbt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Xbt.has(e.type.toLowerCase()):!("value"in e)}function Jbt(e,t,n,r){const i=v4(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Bde(r):i.commaSeparated?o=zde(r):i.commaOrSpaceSeparated?o=Bde(zde(r).join(" ")):o=Jde(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Zbt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Jde(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function eV(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)eV(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?eV(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Jde(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||qC(n)===qC(t)))return!0}return n}function Zbt(e){const t=[];let n;for(n in e)ZU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function ewt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const twt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],nwt=ZPe(II,"div"),rwt=ZPe(wx,"g",twt),R9=/\r?\n|\r/g;function iwt(e){const t=String(e),n=[];for(R9.lastIndex=0;R9.test(t);)n.push(R9.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Fv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},eke={}.hasOwnProperty,swt=Object.prototype;function owt(e,t){const n=t||{};return IK({file:n.file||void 0,location:!1,schema:n.space==="svg"?wx:II,verbose:n.verbose||!1},e)}function IK(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},VR(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:tke(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=iwt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},VR(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},VR(e,r,n),n}default:return n=awt(e,t),n}}function tke(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=IK(e,t[n]);r.push(i)}return r}function awt(e,t){const n=e.schema;e.schema=t.namespaceURI===Fv.svg?wx:II;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;eke.call(swt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?rwt:nwt)(t.tagName,i,tke(e,t.childNodes));if(VR(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&qb(u.startTag),c=u&&u.endTag&&qb(u.endTag),f=IK(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function VR(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=uwt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function uwt(e,t,n){const r=qb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)eke.call(n.attrs,o)&&(s[v4(e.schema,o).property]=qb(n.attrs[o]));n.startTag;const a=qb(n.startTag),u=n.endTag?qb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function qb(e){const t=Zde({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Zde({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Zde(e){return e.line&&e.column?e:void 0}const ehe={}.hasOwnProperty;function nke(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&ehe.call(i,e)){const u=String(i[e]);o=ehe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const lwt={},cwt={}.hasOwnProperty,rke=nke("type",{handlers:{root:dwt,element:ywt,text:mwt,comment:gwt,doctype:pwt}});function fwt(e,t){const r=(t||lwt).space;return rke(e,r==="svg"?wx:II)}function dwt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=OK(e.children,n,t),Ex(e,n),n}function hwt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=OK(e.children,n,t),Ex(e,n),n}function pwt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ex(e,t),t}function mwt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Ex(e,t),t}function gwt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Ex(e,t),t}function ywt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=wx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&cwt.call(e.properties,s)){const u=vwt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Fv[o],childNodes:[],parentNode:null};return a.childNodes=OK(e.children,a,r),Ex(e,a),e.tagName==="template"&&e.content&&(a.content=hwt(e.content,r)),a}function vwt(e,t,n){const r=v4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?WPe(n):qPe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Fv[r.space]}return i}function OK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=rke(e[r],n);s.parentNode=t,i.push(s)}return i}function Ex(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const _wt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],bwt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ai="";var Q;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(Q=Q||(Q={}));const cu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function ike(e){return e>=55296&&e<=57343}function wwt(e){return e>=56320&&e<=57343}function Ewt(e,t){return(e-55296)*1024+9216+t}function ske(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function oke(e){return e>=64976&&e<=65007||bwt.has(e)}var Ce;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ce=Ce||(Ce={}));const xwt=65536;class Swt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=xwt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(wwt(n))return this.pos++,this._addGap(),Ewt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Q.EOF;return this._err(Ce.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;const r=this.html.charCodeAt(n);return r===Q.CARRIAGE_RETURN?Q.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Q.EOF;let t=this.html.charCodeAt(this.pos);return t===Q.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Q.LINE_FEED):t===Q.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,ike(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===Q.LINE_FEED||t===Q.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){ske(t)?this._err(Ce.controlCharacterInInputStream):oke(t)&&this._err(Ce.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Dn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Dn=Dn||(Dn={}));function ake(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const vg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Twt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var $9;const Cwt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Awt=($9=String.fromCodePoint)!==null&&$9!==void 0?$9:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Iwt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Cwt.get(e))!==null&&t!==void 0?t:e}var no;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(no||(no={}));const Owt=32;var Wd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Wd||(Wd={}));function tV(e){return e>=no.ZERO&&e<=no.NINE}function Pwt(e){return e>=no.UPPER_A&&e<=no.UPPER_F||e>=no.LOWER_A&&e<=no.LOWER_F}function kwt(e){return e>=no.UPPER_A&&e<=no.UPPER_Z||e>=no.LOWER_A&&e<=no.LOWER_Z||tV(e)}function Rwt(e){return e===no.EQUALS||kwt(e)}var Ks;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ks||(Ks={}));var xv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(xv||(xv={}));class $wt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ks.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=xv.Strict}startEntity(t){this.decodeMode=t,this.state=Ks.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ks.EntityStart:return t.charCodeAt(n)===no.NUM?(this.state=Ks.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ks.NamedEntity,this.stateNamedEntity(t,n));case Ks.NumericStart:return this.stateNumericStart(t,n);case Ks.NumericDecimal:return this.stateNumericDecimal(t,n);case Ks.NumericHex:return this.stateNumericHex(t,n);case Ks.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Owt)===no.LOWER_X?(this.state=Ks.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ks.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(tV(i)||Pwt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(tV(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===no.SEMI)this.consumed+=1;else if(this.decodeMode===xv.Strict)return 0;return this.emitCodePoint(Iwt(this.result),this.consumed),this.errors&&(t!==no.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Wd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=lke(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===xv.Attribute&&(s===0||Rwt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Wd.VALUE_LENGTH)>>14,s!==0){if(o===no.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==xv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Wd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Wd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ks.NamedEntity:return this.result!==0&&(this.decodeMode!==xv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ks.NumericDecimal:return this.emitNumericEntity(0,2);case Ks.NumericHex:return this.emitNumericEntity(0,3);case Ks.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ks.EntityStart:return 0}}}function uke(e){let t="";const n=new $wt(e,r=>t+=Awt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function lke(e,t,n,r){const i=(t&Wd.BRANCH_LENGTH)>>7,s=t&Wd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}uke(vg);uke(Twt);var Ne;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ne=Ne||(Ne={}));var p0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(p0=p0||(p0={}));var fl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(fl=fl||(fl={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const Nwt=new Map([[we.A,O.A],[we.ADDRESS,O.ADDRESS],[we.ANNOTATION_XML,O.ANNOTATION_XML],[we.APPLET,O.APPLET],[we.AREA,O.AREA],[we.ARTICLE,O.ARTICLE],[we.ASIDE,O.ASIDE],[we.B,O.B],[we.BASE,O.BASE],[we.BASEFONT,O.BASEFONT],[we.BGSOUND,O.BGSOUND],[we.BIG,O.BIG],[we.BLOCKQUOTE,O.BLOCKQUOTE],[we.BODY,O.BODY],[we.BR,O.BR],[we.BUTTON,O.BUTTON],[we.CAPTION,O.CAPTION],[we.CENTER,O.CENTER],[we.CODE,O.CODE],[we.COL,O.COL],[we.COLGROUP,O.COLGROUP],[we.DD,O.DD],[we.DESC,O.DESC],[we.DETAILS,O.DETAILS],[we.DIALOG,O.DIALOG],[we.DIR,O.DIR],[we.DIV,O.DIV],[we.DL,O.DL],[we.DT,O.DT],[we.EM,O.EM],[we.EMBED,O.EMBED],[we.FIELDSET,O.FIELDSET],[we.FIGCAPTION,O.FIGCAPTION],[we.FIGURE,O.FIGURE],[we.FONT,O.FONT],[we.FOOTER,O.FOOTER],[we.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[we.FORM,O.FORM],[we.FRAME,O.FRAME],[we.FRAMESET,O.FRAMESET],[we.H1,O.H1],[we.H2,O.H2],[we.H3,O.H3],[we.H4,O.H4],[we.H5,O.H5],[we.H6,O.H6],[we.HEAD,O.HEAD],[we.HEADER,O.HEADER],[we.HGROUP,O.HGROUP],[we.HR,O.HR],[we.HTML,O.HTML],[we.I,O.I],[we.IMG,O.IMG],[we.IMAGE,O.IMAGE],[we.INPUT,O.INPUT],[we.IFRAME,O.IFRAME],[we.KEYGEN,O.KEYGEN],[we.LABEL,O.LABEL],[we.LI,O.LI],[we.LINK,O.LINK],[we.LISTING,O.LISTING],[we.MAIN,O.MAIN],[we.MALIGNMARK,O.MALIGNMARK],[we.MARQUEE,O.MARQUEE],[we.MATH,O.MATH],[we.MENU,O.MENU],[we.META,O.META],[we.MGLYPH,O.MGLYPH],[we.MI,O.MI],[we.MO,O.MO],[we.MN,O.MN],[we.MS,O.MS],[we.MTEXT,O.MTEXT],[we.NAV,O.NAV],[we.NOBR,O.NOBR],[we.NOFRAMES,O.NOFRAMES],[we.NOEMBED,O.NOEMBED],[we.NOSCRIPT,O.NOSCRIPT],[we.OBJECT,O.OBJECT],[we.OL,O.OL],[we.OPTGROUP,O.OPTGROUP],[we.OPTION,O.OPTION],[we.P,O.P],[we.PARAM,O.PARAM],[we.PLAINTEXT,O.PLAINTEXT],[we.PRE,O.PRE],[we.RB,O.RB],[we.RP,O.RP],[we.RT,O.RT],[we.RTC,O.RTC],[we.RUBY,O.RUBY],[we.S,O.S],[we.SCRIPT,O.SCRIPT],[we.SECTION,O.SECTION],[we.SELECT,O.SELECT],[we.SOURCE,O.SOURCE],[we.SMALL,O.SMALL],[we.SPAN,O.SPAN],[we.STRIKE,O.STRIKE],[we.STRONG,O.STRONG],[we.STYLE,O.STYLE],[we.SUB,O.SUB],[we.SUMMARY,O.SUMMARY],[we.SUP,O.SUP],[we.TABLE,O.TABLE],[we.TBODY,O.TBODY],[we.TEMPLATE,O.TEMPLATE],[we.TEXTAREA,O.TEXTAREA],[we.TFOOT,O.TFOOT],[we.TD,O.TD],[we.TH,O.TH],[we.THEAD,O.THEAD],[we.TITLE,O.TITLE],[we.TR,O.TR],[we.TRACK,O.TRACK],[we.TT,O.TT],[we.U,O.U],[we.UL,O.UL],[we.SVG,O.SVG],[we.VAR,O.VAR],[we.WBR,O.WBR],[we.XMP,O.XMP]]);function xx(e){var t;return(t=Nwt.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const Xe=O,Dwt={[Ne.HTML]:new Set([Xe.ADDRESS,Xe.APPLET,Xe.AREA,Xe.ARTICLE,Xe.ASIDE,Xe.BASE,Xe.BASEFONT,Xe.BGSOUND,Xe.BLOCKQUOTE,Xe.BODY,Xe.BR,Xe.BUTTON,Xe.CAPTION,Xe.CENTER,Xe.COL,Xe.COLGROUP,Xe.DD,Xe.DETAILS,Xe.DIR,Xe.DIV,Xe.DL,Xe.DT,Xe.EMBED,Xe.FIELDSET,Xe.FIGCAPTION,Xe.FIGURE,Xe.FOOTER,Xe.FORM,Xe.FRAME,Xe.FRAMESET,Xe.H1,Xe.H2,Xe.H3,Xe.H4,Xe.H5,Xe.H6,Xe.HEAD,Xe.HEADER,Xe.HGROUP,Xe.HR,Xe.HTML,Xe.IFRAME,Xe.IMG,Xe.INPUT,Xe.LI,Xe.LINK,Xe.LISTING,Xe.MAIN,Xe.MARQUEE,Xe.MENU,Xe.META,Xe.NAV,Xe.NOEMBED,Xe.NOFRAMES,Xe.NOSCRIPT,Xe.OBJECT,Xe.OL,Xe.P,Xe.PARAM,Xe.PLAINTEXT,Xe.PRE,Xe.SCRIPT,Xe.SECTION,Xe.SELECT,Xe.SOURCE,Xe.STYLE,Xe.SUMMARY,Xe.TABLE,Xe.TBODY,Xe.TD,Xe.TEMPLATE,Xe.TEXTAREA,Xe.TFOOT,Xe.TH,Xe.THEAD,Xe.TITLE,Xe.TR,Xe.TRACK,Xe.UL,Xe.WBR,Xe.XMP]),[Ne.MATHML]:new Set([Xe.MI,Xe.MO,Xe.MN,Xe.MS,Xe.MTEXT,Xe.ANNOTATION_XML]),[Ne.SVG]:new Set([Xe.TITLE,Xe.FOREIGN_OBJECT,Xe.DESC]),[Ne.XLINK]:new Set,[Ne.XML]:new Set,[Ne.XMLNS]:new Set};function cke(e){return e===Xe.H1||e===Xe.H2||e===Xe.H3||e===Xe.H4||e===Xe.H5||e===Xe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const Mwt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var te;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(te||(te={}));const us={DATA:te.DATA,RCDATA:te.RCDATA,RAWTEXT:te.RAWTEXT,SCRIPT_DATA:te.SCRIPT_DATA,PLAINTEXT:te.PLAINTEXT,CDATA_SECTION:te.CDATA_SECTION};function $2(e){return e>=Q.DIGIT_0&&e<=Q.DIGIT_9}function MT(e){return e>=Q.LATIN_CAPITAL_A&&e<=Q.LATIN_CAPITAL_Z}function Lwt(e){return e>=Q.LATIN_SMALL_A&&e<=Q.LATIN_SMALL_Z}function _g(e){return Lwt(e)||MT(e)}function nV(e){return _g(e)||$2(e)}function fke(e){return e>=Q.LATIN_CAPITAL_A&&e<=Q.LATIN_CAPITAL_F}function dke(e){return e>=Q.LATIN_SMALL_A&&e<=Q.LATIN_SMALL_F}function Fwt(e){return $2(e)||fke(e)||dke(e)}function ek(e){return e+32}function hke(e){return e===Q.SPACE||e===Q.LINE_FEED||e===Q.TABULATION||e===Q.FORM_FEED}function jwt(e){return e===Q.EQUALS_SIGN||nV(e)}function the(e){return hke(e)||e===Q.SOLIDUS||e===Q.GREATER_THAN_SIGN}class Bwt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=te.DATA,this.returnState=te.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Swt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Dn.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Dn.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Dn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Dn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(ake(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ce.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=xx(t.tagName),t.type===Dn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ce.endTagWithAttributes),t.selfClosing&&this._err(Ce.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Dn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Dn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Dn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Dn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=hke(t)?Dn.WHITESPACE_CHARACTER:t===Q.NULL?Dn.NULL_CHARACTER:Dn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Dn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=vg[0];s>=0&&(s=lke(vg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=vg[s];const a=o&Wd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==Q.SEMICOLON&&this._isCharacterReferenceInAttribute()&&jwt(this.preprocessor.peek(1))?(n=[Q.AMPERSAND],s+=u):(n=u===0?[vg[s]&~Wd.VALUE_LENGTH]:u===1?[vg[++s]]:[vg[++s],vg[++s]],r=0,i=t!==Q.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ce.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===te.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===te.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===te.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case te.DATA:{this._stateData(t);break}case te.RCDATA:{this._stateRcdata(t);break}case te.RAWTEXT:{this._stateRawtext(t);break}case te.SCRIPT_DATA:{this._stateScriptData(t);break}case te.PLAINTEXT:{this._statePlaintext(t);break}case te.TAG_OPEN:{this._stateTagOpen(t);break}case te.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case te.TAG_NAME:{this._stateTagName(t);break}case te.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case te.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case te.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case te.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case te.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case te.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case te.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case te.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case te.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case te.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case te.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case te.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case te.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case te.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case te.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case te.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case te.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case te.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case te.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case te.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case te.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case te.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case te.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case te.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case te.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case te.BOGUS_COMMENT:{this._stateBogusComment(t);break}case te.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case te.COMMENT_START:{this._stateCommentStart(t);break}case te.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case te.COMMENT:{this._stateComment(t);break}case te.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case te.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case te.COMMENT_END:{this._stateCommentEnd(t);break}case te.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case te.DOCTYPE:{this._stateDoctype(t);break}case te.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case te.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case te.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case te.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case te.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case te.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case te.CDATA_SECTION:{this._stateCdataSection(t);break}case te.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case te.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case te.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case te.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case te.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case te.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case te.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case te.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case te.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case te.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.TAG_OPEN;break}case Q.AMPERSAND:{this.returnState=te.DATA,this.state=te.CHARACTER_REFERENCE;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitCodePoint(t);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case Q.AMPERSAND:{this.returnState=te.RCDATA,this.state=te.CHARACTER_REFERENCE;break}case Q.LESS_THAN_SIGN:{this.state=te.RCDATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.RAWTEXT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(_g(t))this._createStartTagToken(),this.state=te.TAG_NAME,this._stateTagName(t);else switch(t){case Q.EXCLAMATION_MARK:{this.state=te.MARKUP_DECLARATION_OPEN;break}case Q.SOLIDUS:{this.state=te.END_TAG_OPEN;break}case Q.QUESTION_MARK:{this._err(Ce.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t);break}case Q.EOF:{this._err(Ce.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ce.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=te.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(_g(t))this._createEndTagToken(),this.state=te.TAG_NAME,this._stateTagName(t);else switch(t){case Q.GREATER_THAN_SIGN:{this._err(Ce.missingEndTagName),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ce.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this.state=te.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.tagName+=Ai;break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(MT(t)?ek(t):t)}}_stateRcdataLessThanSign(t){t===Q.SOLIDUS?this.state=te.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=te.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){_g(t)?(this.state=te.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=te.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=te.BEFORE_ATTRIBUTE_NAME,!1;case Q.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=te.SELF_CLOSING_START_TAG,!1;case Q.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=te.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===Q.SOLIDUS?this.state=te.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){_g(t)?(this.state=te.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case Q.SOLIDUS:{this.state=te.SCRIPT_DATA_END_TAG_OPEN;break}case Q.EXCLAMATION_MARK:{this.state=te.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=te.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){_g(t)?(this.state=te.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===Q.HYPHEN_MINUS?(this.state=te.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===Q.HYPHEN_MINUS?(this.state=te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=te.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Q.GREATER_THAN_SIGN:{this.state=te.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===Q.SOLIDUS?this.state=te.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:_g(t)?(this._emitChars("<"),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){_g(t)?(this.state=te.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(cu.SCRIPT,!1)&&the(this.preprocessor.peek(cu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<cu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=te.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case Q.HYPHEN_MINUS:{this._emitChars("-");break}case Q.LESS_THAN_SIGN:{this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Q.GREATER_THAN_SIGN:{this.state=te.SCRIPT_DATA,this._emitChars(">");break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ai);break}case Q.EOF:{this._err(Ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===Q.SOLIDUS?(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(cu.SCRIPT,!1)&&the(this.preprocessor.peek(cu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<cu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=te.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=te.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this.state=te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._err(Ce.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=te.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:case Q.SOLIDUS:case Q.GREATER_THAN_SIGN:case Q.EOF:{this._leaveAttrName(),this.state=te.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case Q.EQUALS_SIGN:{this._leaveAttrName(),this.state=te.BEFORE_ATTRIBUTE_VALUE;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:{this._err(Ce.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.name+=Ai;break}default:this.currentAttr.name+=String.fromCodePoint(MT(t)?ek(t):t)}}_stateAfterAttributeName(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.SOLIDUS:{this.state=te.SELF_CLOSING_START_TAG;break}case Q.EQUALS_SIGN:{this.state=te.BEFORE_ATTRIBUTE_VALUE;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=te.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{this.state=te.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this.state=te.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingAttributeValue),this.state=te.DATA,this.emitCurrentTagToken();break}default:this.state=te.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this.returnState=te.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=te.CHARACTER_REFERENCE;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=Ai;break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Q.AMPERSAND:{this.returnState=te.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=te.CHARACTER_REFERENCE;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=Ai;break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.AMPERSAND:{this.returnState=te.ATTRIBUTE_VALUE_UNQUOTED,this.state=te.CHARACTER_REFERENCE;break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=te.DATA,this.emitCurrentTagToken();break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this.currentAttr.value+=Ai;break}case Q.QUOTATION_MARK:case Q.APOSTROPHE:case Q.LESS_THAN_SIGN:case Q.EQUALS_SIGN:case Q.GRAVE_ACCENT:{this._err(Ce.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this._leaveAttrValue(),this.state=te.BEFORE_ATTRIBUTE_NAME;break}case Q.SOLIDUS:{this._leaveAttrValue(),this.state=te.SELF_CLOSING_START_TAG;break}case Q.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._err(Ce.missingWhitespaceBetweenAttributes),this.state=te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case Q.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=te.DATA,this.emitCurrentTagToken();break}case Q.EOF:{this._err(Ce.eofInTag),this._emitEOFToken();break}default:this._err(Ce.unexpectedSolidusInTag),this.state=te.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.data+=Ai;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(cu.DASH_DASH,!0)?(this._createCommentToken(cu.DASH_DASH.length+1),this.state=te.COMMENT_START):this._consumeSequenceIfMatch(cu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(cu.DOCTYPE.length+1),this.state=te.DOCTYPE):this._consumeSequenceIfMatch(cu.CDATA_START,!0)?this.inForeignNode?this.state=te.CDATA_SECTION:(this._err(Ce.cdataInHtmlContent),this._createCommentToken(cu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=te.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ce.incorrectlyOpenedComment),this._createCommentToken(2),this.state=te.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_START_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptClosingOfEmptyComment),this.state=te.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=te.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptClosingOfEmptyComment),this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=te.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END_DASH;break}case Q.LESS_THAN_SIGN:{n.data+="<",this.state=te.COMMENT_LESS_THAN_SIGN;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.data+=Ai;break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case Q.EXCLAMATION_MARK:{n.data+="!",this.state=te.COMMENT_LESS_THAN_SIGN_BANG;break}case Q.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=te.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===Q.HYPHEN_MINUS?this.state=te.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=te.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===Q.HYPHEN_MINUS?this.state=te.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=te.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==Q.GREATER_THAN_SIGN&&t!==Q.EOF&&this._err(Ce.nestedComment),this.state=te.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{this.state=te.COMMENT_END;break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=te.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EXCLAMATION_MARK:{this.state=te.COMMENT_END_BANG;break}case Q.HYPHEN_MINUS:{n.data+="-";break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=te.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case Q.HYPHEN_MINUS:{n.data+="--!",this.state=te.COMMENT_END_DASH;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.incorrectlyClosedComment),this.state=te.DATA,this.emitCurrentComment(n);break}case Q.EOF:{this._err(Ce.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=te.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case Q.EOF:{this._err(Ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingWhitespaceBeforeDoctypeName),this.state=te.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(MT(t))this._createDoctypeToken(String.fromCharCode(ek(t))),this.state=te.DOCTYPE_NAME;else switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.NULL:{this._err(Ce.unexpectedNullCharacter),this._createDoctypeToken(Ai),this.state=te.DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=te.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.AFTER_DOCTYPE_NAME;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.name+=Ai;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(MT(t)?ek(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(cu.PUBLIC,!1)?this.state=te.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(cu.SYSTEM,!1)?this.state=te.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ce.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(Ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Ce.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{n.publicId="",this.state=te.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.publicId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.publicId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Q.GREATER_THAN_SIGN:{this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.QUOTATION_MARK:{this._err(Ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.QUOTATION_MARK:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:{this.state=te.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.QUOTATION_MARK:{this._err(Ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{this._err(Ce.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.QUOTATION_MARK:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Q.APOSTROPHE:{n.systemId="",this.state=te.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.DATA,this.emitCurrentDoctype(n);break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case Q.QUOTATION_MARK:{this.state=te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.systemId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case Q.APOSTROPHE:{this.state=te.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter),n.systemId+=Ai;break}case Q.GREATER_THAN_SIGN:{this._err(Ce.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case Q.SPACE:case Q.LINE_FEED:case Q.TABULATION:case Q.FORM_FEED:break;case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.EOF:{this._err(Ce.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ce.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=te.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case Q.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=te.DATA;break}case Q.NULL:{this._err(Ce.unexpectedNullCharacter);break}case Q.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case Q.RIGHT_SQUARE_BRACKET:{this.state=te.CDATA_SECTION_BRACKET;break}case Q.EOF:{this._err(Ce.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===Q.RIGHT_SQUARE_BRACKET?this.state=te.CDATA_SECTION_END:(this._emitChars("]"),this.state=te.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case Q.GREATER_THAN_SIGN:{this.state=te.DATA;break}case Q.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=te.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===Q.NUMBER_SIGN?this.state=te.NUMERIC_CHARACTER_REFERENCE:nV(t)?(this.state=te.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this.state=te.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){nV(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===Q.SEMICOLON&&this._err(Ce.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===Q.LATIN_SMALL_X||t===Q.LATIN_CAPITAL_X?this.state=te.HEXADEMICAL_CHARACTER_REFERENCE_START:$2(t)?(this.state=te.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Q.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Fwt(t)?(this.state=te.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Q.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Q.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){fke(t)?this.charRefCode=this.charRefCode*16+t-55:dke(t)?this.charRefCode=this.charRefCode*16+t-87:$2(t)?this.charRefCode=this.charRefCode*16+t-48:t===Q.SEMICOLON?this.state=te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ce.missingSemicolonAfterCharacterReference),this.state=te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){$2(t)?this.charRefCode=this.charRefCode*10+t-48:t===Q.SEMICOLON?this.state=te.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ce.missingSemicolonAfterCharacterReference),this.state=te.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===Q.NULL)this._err(Ce.nullCharacterReference),this.charRefCode=Q.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ce.characterReferenceOutsideUnicodeRange),this.charRefCode=Q.REPLACEMENT_CHARACTER;else if(ike(this.charRefCode))this._err(Ce.surrogateCharacterReference),this.charRefCode=Q.REPLACEMENT_CHARACTER;else if(oke(this.charRefCode))this._err(Ce.noncharacterCharacterReference);else if(ske(this.charRefCode)||this.charRefCode===Q.CARRIAGE_RETURN){this._err(Ce.controlCharacterReference);const n=Mwt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const pke=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),nhe=new Set([...pke,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),tk=new Map([[O.APPLET,Ne.HTML],[O.CAPTION,Ne.HTML],[O.HTML,Ne.HTML],[O.MARQUEE,Ne.HTML],[O.OBJECT,Ne.HTML],[O.TABLE,Ne.HTML],[O.TD,Ne.HTML],[O.TEMPLATE,Ne.HTML],[O.TH,Ne.HTML],[O.ANNOTATION_XML,Ne.MATHML],[O.MI,Ne.MATHML],[O.MN,Ne.MATHML],[O.MO,Ne.MATHML],[O.MS,Ne.MATHML],[O.MTEXT,Ne.MATHML],[O.DESC,Ne.SVG],[O.FOREIGN_OBJECT,Ne.SVG],[O.TITLE,Ne.SVG]]),zwt=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],Uwt=[O.TR,O.TEMPLATE,O.HTML],Vwt=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],Hwt=[O.TABLE,O.TEMPLATE,O.HTML],qwt=[O.TD,O.TH];class Wwt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ne.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ne.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(zwt,Ne.HTML)}popUntilTableCellPopped(){this.popUntilPopped(qwt,Ne.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Hwt,Ne.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Vwt,Ne.HTML)}clearBackToTableRowContext(){this.clearBackTo(Uwt,Ne.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ne.HTML)return!0;if(tk.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(cke(n)&&r===Ne.HTML)return!0;if(tk.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ne.HTML)return!0;if((r===O.UL||r===O.OL)&&i===Ne.HTML||tk.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ne.HTML)return!0;if(r===O.BUTTON&&i===Ne.HTML||tk.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ne.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ne.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ne.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;pke.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;nhe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&nhe.has(this.currentTagId);)this.pop()}}const N9=3;var lf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(lf=lf||(lf={}));const rhe={type:lf.Marker};class Gwt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===lf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<N9)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<N9)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=N9&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(rhe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:lf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:lf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(rhe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===lf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===lf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===lf.Element&&n.element===t)}}function ihe(e){return{nodeName:"#text",value:e,parentNode:null}}const wb={createDocument(){return{nodeName:"#document",mode:fl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};wb.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(wb.isTextNode(n)){n.value+=t;return}}wb.appendChild(e,ihe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&wb.isTextNode(r)?r.value+=t:wb.insertBefore(e,ihe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},mke="html",Ywt="about:legacy-compat",Kwt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",gke=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Xwt=[...gke,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Qwt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),yke=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Jwt=[...yke,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function she(e,t){return t.some(n=>e.startsWith(n))}function Zwt(e){return e.name===mke&&e.publicId===null&&(e.systemId===null||e.systemId===Ywt)}function eEt(e){if(e.name!==mke)return fl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Kwt)return fl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Qwt.has(n))return fl.QUIRKS;let r=t===null?Xwt:gke;if(she(n,r))return fl.QUIRKS;if(r=t===null?yke:Jwt,she(n,r))return fl.LIMITED_QUIRKS}return fl.NO_QUIRKS}const ohe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},tEt="definitionurl",nEt="definitionURL",rEt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),iEt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ne.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ne.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ne.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ne.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ne.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ne.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ne.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ne.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ne.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ne.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ne.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ne.XMLNS}]]),sEt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),oEt=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function aEt(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===p0.COLOR||r===p0.SIZE||r===p0.FACE)||oEt.has(t)}function vke(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===tEt){e.attrs[t].name=nEt;break}}function _ke(e){for(let t=0;t<e.attrs.length;t++){const n=rEt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function PK(e){for(let t=0;t<e.attrs.length;t++){const n=iEt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function uEt(e){const t=sEt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=xx(e.tagName))}function lEt(e,t){return t===Ne.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function cEt(e,t,n){if(t===Ne.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===p0.ENCODING){const i=n[r].value.toLowerCase();return i===ohe.TEXT_HTML||i===ohe.APPLICATION_XML}}return t===Ne.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function fEt(e,t,n,r){return(!r||r===Ne.HTML)&&cEt(e,t,n)||(!r||r===Ne.MATHML)&&lEt(e,t)}const dEt="hidden",hEt=8,pEt=3;var se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(se||(se={}));const mEt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},bke=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),ahe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:wb,onParseError:null};let uhe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=se.INITIAL,this.originalInsertionMode=se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...ahe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Bwt(this.options,this),this.activeFormattingElements=new Gwt(this.treeAdapter),this.fragmentContextID=r?xx(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Wwt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...ahe,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Ne.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ne.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(se.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:mEt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ne.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ne.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=se.TEXT}switchToPlaintextParsing(){this.insertionMode=se.TEXT,this.originalInsertionMode=se.IN_BODY,this.tokenizer.state=us.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ne.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=us.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=us.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=us.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=us.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ne.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ne.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Ne.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Dn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ne.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ne.HTML)}_processToken(t){switch(t.type){case Dn.CHARACTER:{this.onCharacter(t);break}case Dn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Dn.COMMENT:{this.onComment(t);break}case Dn.DOCTYPE:{this.onDoctype(t);break}case Dn.START_TAG:{this._processStartTag(t);break}case Dn.END_TAG:{this.onEndTag(t);break}case Dn.EOF:{this.onEof(t);break}case Dn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return fEt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===lf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=se.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=se.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=se.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=se.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=se.IN_TABLE;return}case O.BODY:{this.insertionMode=se.IN_BODY;return}case O.FRAMESET:{this.insertionMode=se.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?se.AFTER_HEAD:se.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=se.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=se.IN_HEAD;return}break}}this.insertionMode=se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=se.IN_SELECT_IN_TABLE;return}}this.insertionMode=se.IN_SELECT}_isElementCausesFosterParenting(t){return bke.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ne.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Dwt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){qxt(this,t);return}switch(this.insertionMode){case se.INITIAL:{US(this,t);break}case se.BEFORE_HTML:{N2(this,t);break}case se.BEFORE_HEAD:{D2(this,t);break}case se.IN_HEAD:{M2(this,t);break}case se.IN_HEAD_NO_SCRIPT:{L2(this,t);break}case se.AFTER_HEAD:{F2(this,t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:{Eke(this,t);break}case se.TEXT:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{D9(this,t);break}case se.IN_TABLE_TEXT:{Ike(this,t);break}case se.IN_COLUMN_GROUP:{b3(this,t);break}case se.AFTER_BODY:{w3(this,t);break}case se.AFTER_AFTER_BODY:{HR(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Hxt(this,t);return}switch(this.insertionMode){case se.INITIAL:{US(this,t);break}case se.BEFORE_HTML:{N2(this,t);break}case se.BEFORE_HEAD:{D2(this,t);break}case se.IN_HEAD:{M2(this,t);break}case se.IN_HEAD_NO_SCRIPT:{L2(this,t);break}case se.AFTER_HEAD:{F2(this,t);break}case se.TEXT:{this._insertCharacters(t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{D9(this,t);break}case se.IN_COLUMN_GROUP:{b3(this,t);break}case se.AFTER_BODY:{w3(this,t);break}case se.AFTER_AFTER_BODY:{HR(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){rV(this,t);return}switch(this.insertionMode){case se.INITIAL:case se.BEFORE_HTML:case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_TEMPLATE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{rV(this,t);break}case se.IN_TABLE_TEXT:{VS(this,t);break}case se.AFTER_BODY:{EEt(this,t);break}case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{xEt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case se.INITIAL:{SEt(this,t);break}case se.BEFORE_HEAD:case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:{this._err(t,Ce.misplacedDoctype);break}case se.IN_TABLE_TEXT:{VS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ce.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Wxt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{US(this,t);break}case se.BEFORE_HTML:{TEt(this,t);break}case se.BEFORE_HEAD:{AEt(this,t);break}case se.IN_HEAD:{Gf(this,t);break}case se.IN_HEAD_NO_SCRIPT:{PEt(this,t);break}case se.AFTER_HEAD:{REt(this,t);break}case se.IN_BODY:{Oa(this,t);break}case se.IN_TABLE:{sE(this,t);break}case se.IN_TABLE_TEXT:{VS(this,t);break}case se.IN_CAPTION:{Ixt(this,t);break}case se.IN_COLUMN_GROUP:{$K(this,t);break}case se.IN_TABLE_BODY:{R4(this,t);break}case se.IN_ROW:{$4(this,t);break}case se.IN_CELL:{kxt(this,t);break}case se.IN_SELECT:{kke(this,t);break}case se.IN_SELECT_IN_TABLE:{$xt(this,t);break}case se.IN_TEMPLATE:{Dxt(this,t);break}case se.AFTER_BODY:{Lxt(this,t);break}case se.IN_FRAMESET:{Fxt(this,t);break}case se.AFTER_FRAMESET:{Bxt(this,t);break}case se.AFTER_AFTER_BODY:{Uxt(this,t);break}case se.AFTER_AFTER_FRAMESET:{Vxt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Gxt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case se.INITIAL:{US(this,t);break}case se.BEFORE_HTML:{CEt(this,t);break}case se.BEFORE_HEAD:{IEt(this,t);break}case se.IN_HEAD:{OEt(this,t);break}case se.IN_HEAD_NO_SCRIPT:{kEt(this,t);break}case se.AFTER_HEAD:{$Et(this,t);break}case se.IN_BODY:{k4(this,t);break}case se.TEXT:{vxt(this,t);break}case se.IN_TABLE:{WC(this,t);break}case se.IN_TABLE_TEXT:{VS(this,t);break}case se.IN_CAPTION:{Oxt(this,t);break}case se.IN_COLUMN_GROUP:{Pxt(this,t);break}case se.IN_TABLE_BODY:{iV(this,t);break}case se.IN_ROW:{Pke(this,t);break}case se.IN_CELL:{Rxt(this,t);break}case se.IN_SELECT:{Rke(this,t);break}case se.IN_SELECT_IN_TABLE:{Nxt(this,t);break}case se.IN_TEMPLATE:{Mxt(this,t);break}case se.AFTER_BODY:{Nke(this,t);break}case se.IN_FRAMESET:{jxt(this,t);break}case se.AFTER_FRAMESET:{zxt(this,t);break}case se.AFTER_AFTER_BODY:{HR(this,t);break}}}onEof(t){switch(this.insertionMode){case se.INITIAL:{US(this,t);break}case se.BEFORE_HTML:{N2(this,t);break}case se.BEFORE_HEAD:{D2(this,t);break}case se.IN_HEAD:{M2(this,t);break}case se.IN_HEAD_NO_SCRIPT:{L2(this,t);break}case se.AFTER_HEAD:{F2(this,t);break}case se.IN_BODY:case se.IN_TABLE:case se.IN_CAPTION:case se.IN_COLUMN_GROUP:case se.IN_TABLE_BODY:case se.IN_ROW:case se.IN_CELL:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:{Cke(this,t);break}case se.TEXT:{_xt(this,t);break}case se.IN_TABLE_TEXT:{VS(this,t);break}case se.IN_TEMPLATE:{$ke(this,t);break}case se.AFTER_BODY:case se.IN_FRAMESET:case se.AFTER_FRAMESET:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{RK(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===Q.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case se.IN_HEAD:case se.IN_HEAD_NO_SCRIPT:case se.AFTER_HEAD:case se.TEXT:case se.IN_COLUMN_GROUP:case se.IN_SELECT:case se.IN_SELECT_IN_TABLE:case se.IN_FRAMESET:case se.AFTER_FRAMESET:{this._insertCharacters(t);break}case se.IN_BODY:case se.IN_CAPTION:case se.IN_CELL:case se.IN_TEMPLATE:case se.AFTER_BODY:case se.AFTER_AFTER_BODY:case se.AFTER_AFTER_FRAMESET:{wke(this,t);break}case se.IN_TABLE:case se.IN_TABLE_BODY:case se.IN_ROW:{D9(this,t);break}case se.IN_TABLE_TEXT:{Ake(this,t);break}}}};function gEt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Tke(e,t),n}function yEt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function vEt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=pEt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=_Et(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function _Et(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function bEt(e,t,n){const r=e.treeAdapter.getTagName(t),i=xx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===Ne.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function wEt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function kK(e,t){for(let n=0;n<hEt;n++){const r=gEt(e,t);if(!r)break;const i=yEt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=vEt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&bEt(e,o,s),wEt(e,i,r)}}function rV(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function EEt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function xEt(e,t){e._appendCommentNode(t,e.document)}function RK(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function SEt(e,t){e._setDocumentType(t);const n=t.forceQuirks?fl.QUIRKS:eEt(t);Zwt(t)||e._err(t,Ce.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=se.BEFORE_HTML}function US(e,t){e._err(t,Ce.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,fl.QUIRKS),e.insertionMode=se.BEFORE_HTML,e._processToken(t)}function TEt(e,t){t.tagID===O.HTML?(e._insertElement(t,Ne.HTML),e.insertionMode=se.BEFORE_HEAD):N2(e,t)}function CEt(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&N2(e,t)}function N2(e,t){e._insertFakeRootElement(),e.insertionMode=se.BEFORE_HEAD,e._processToken(t)}function AEt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.HEAD:{e._insertElement(t,Ne.HTML),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD;break}default:D2(e,t)}}function IEt(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?D2(e,t):e._err(t,Ce.endTagWithoutMatchingOpenElement)}function D2(e,t){e._insertFakeElement(we.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=se.IN_HEAD,e._processToken(t)}function Gf(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,us.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,us.RAWTEXT):(e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,us.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,us.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(se.IN_TEMPLATE);break}case O.HEAD:{e._err(t,Ce.misplacedStartTagForHeadElement);break}default:M2(e,t)}}function OEt(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=se.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{M2(e,t);break}case O.TEMPLATE:{g_(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function g_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,Ce.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ce.endTagWithoutMatchingOpenElement)}function M2(e,t){e.openElements.pop(),e.insertionMode=se.AFTER_HEAD,e._processToken(t)}function PEt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{Gf(e,t);break}case O.NOSCRIPT:{e._err(t,Ce.nestedNoscriptInHead);break}default:L2(e,t)}}function kEt(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=se.IN_HEAD;break}case O.BR:{L2(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function L2(e,t){const n=t.type===Dn.EOF?Ce.openElementsLeftAfterEof:Ce.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=se.IN_HEAD,e._processToken(t)}function REt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.BODY:{e._insertElement(t,Ne.HTML),e.framesetOk=!1,e.insertionMode=se.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,Ce.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),Gf(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,Ce.misplacedStartTagForHeadElement);break}default:F2(e,t)}}function $Et(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{F2(e,t);break}case O.TEMPLATE:{g_(e,t);break}default:e._err(t,Ce.endTagWithoutMatchingOpenElement)}}function F2(e,t){e._insertFakeElement(we.BODY,O.BODY),e.insertionMode=se.IN_BODY,P4(e,t)}function P4(e,t){switch(t.type){case Dn.CHARACTER:{Eke(e,t);break}case Dn.WHITESPACE_CHARACTER:{wke(e,t);break}case Dn.COMMENT:{rV(e,t);break}case Dn.START_TAG:{Oa(e,t);break}case Dn.END_TAG:{k4(e,t);break}case Dn.EOF:{Cke(e,t);break}}}function wke(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Eke(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function NEt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function DEt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function MEt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_FRAMESET)}function LEt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML)}function FEt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),cke(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ne.HTML)}function jEt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function BEt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),n||(e.formElement=e.openElements.current))}function zEt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML)}function UEt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),e.tokenizer.state=us.PLAINTEXT}function VEt(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.framesetOk=!1}function HEt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(kK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function qEt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function WEt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(kK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ne.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function GEt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function YEt(e,t){e.treeAdapter.getDocumentMode(e.document)!==fl.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ne.HTML),e.framesetOk=!1,e.insertionMode=se.IN_TABLE}function xke(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ne.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Ske(e){const t=ake(e,p0.TYPE);return t!=null&&t.toLowerCase()===dEt}function KEt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ne.HTML),Ske(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function XEt(e,t){e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0}function QEt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,Ne.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function JEt(e,t){t.tagName=we.IMG,t.tagID=O.IMG,xke(e,t)}function ZEt(e,t){e._insertElement(t,Ne.HTML),e.skipNextNewLine=!0,e.tokenizer.state=us.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=se.TEXT}function ext(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function txt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function lhe(e,t){e._switchToTextParsing(t,us.RAWTEXT)}function nxt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===se.IN_TABLE||e.insertionMode===se.IN_CAPTION||e.insertionMode===se.IN_TABLE_BODY||e.insertionMode===se.IN_ROW||e.insertionMode===se.IN_CELL?se.IN_SELECT_IN_TABLE:se.IN_SELECT}function rxt(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML)}function ixt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ne.HTML)}function sxt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,Ne.HTML)}function oxt(e,t){e._reconstructActiveFormattingElements(),vke(t),PK(t),t.selfClosing?e._appendElement(t,Ne.MATHML):e._insertElement(t,Ne.MATHML),t.ackSelfClosing=!0}function axt(e,t){e._reconstructActiveFormattingElements(),_ke(t),PK(t),t.selfClosing?e._appendElement(t,Ne.SVG):e._insertElement(t,Ne.SVG),t.ackSelfClosing=!0}function che(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ne.HTML)}function Oa(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{qEt(e,t);break}case O.A:{HEt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{FEt(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{LEt(e,t);break}case O.LI:case O.DD:case O.DT:{zEt(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{xke(e,t);break}case O.HR:{QEt(e,t);break}case O.RB:case O.RTC:{ixt(e,t);break}case O.RT:case O.RP:{sxt(e,t);break}case O.PRE:case O.LISTING:{jEt(e,t);break}case O.XMP:{ext(e,t);break}case O.SVG:{axt(e,t);break}case O.HTML:{NEt(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{Gf(e,t);break}case O.BODY:{DEt(e,t);break}case O.FORM:{BEt(e,t);break}case O.NOBR:{WEt(e,t);break}case O.MATH:{oxt(e,t);break}case O.TABLE:{YEt(e,t);break}case O.INPUT:{KEt(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{XEt(e,t);break}case O.IMAGE:{JEt(e,t);break}case O.BUTTON:{VEt(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{GEt(e,t);break}case O.IFRAME:{txt(e,t);break}case O.SELECT:{nxt(e,t);break}case O.OPTION:case O.OPTGROUP:{rxt(e,t);break}case O.NOEMBED:{lhe(e,t);break}case O.FRAMESET:{MEt(e,t);break}case O.TEXTAREA:{ZEt(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?lhe(e,t):che(e,t);break}case O.PLAINTEXT:{UEt(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:che(e,t)}}function uxt(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function lxt(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=se.AFTER_BODY,Nke(e,t))}function cxt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function fxt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function dxt(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(we.P,O.P),e._closePElement()}function hxt(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function pxt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function mxt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function gxt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function yxt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function Tke(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function k4(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{kK(e,t);break}case O.P:{dxt(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{cxt(e,t);break}case O.LI:{hxt(e);break}case O.DD:case O.DT:{pxt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{mxt(e);break}case O.BR:{yxt(e);break}case O.BODY:{uxt(e,t);break}case O.HTML:{lxt(e,t);break}case O.FORM:{fxt(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{gxt(e,t);break}case O.TEMPLATE:{g_(e,t);break}default:Tke(e,t)}}function Cke(e,t){e.tmplInsertionModeStack.length>0?$ke(e,t):RK(e,t)}function vxt(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function _xt(e,t){e._err(t,Ce.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function D9(e,t){if(bke.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=se.IN_TABLE_TEXT,t.type){case Dn.CHARACTER:{Ike(e,t);break}case Dn.WHITESPACE_CHARACTER:{Ake(e,t);break}}else OI(e,t)}function bxt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_CAPTION}function wxt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_COLUMN_GROUP}function Ext(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,O.COLGROUP),e.insertionMode=se.IN_COLUMN_GROUP,$K(e,t)}function xxt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_TABLE_BODY}function Sxt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,O.TBODY),e.insertionMode=se.IN_TABLE_BODY,R4(e,t)}function Txt(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Cxt(e,t){Ske(t)?e._appendElement(t,Ne.HTML):OI(e,t),t.ackSelfClosing=!0}function Axt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ne.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function sE(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{Sxt(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{Gf(e,t);break}case O.COL:{Ext(e,t);break}case O.FORM:{Axt(e,t);break}case O.TABLE:{Txt(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{xxt(e,t);break}case O.INPUT:{Cxt(e,t);break}case O.CAPTION:{bxt(e,t);break}case O.COLGROUP:{wxt(e,t);break}default:OI(e,t)}}function WC(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{g_(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:OI(e,t)}}function OI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,P4(e,t),e.fosterParentingEnabled=n}function Ake(e,t){e.pendingCharacterTokens.push(t)}function Ike(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function VS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)OI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Oke=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function Ixt(e,t){const n=t.tagID;Oke.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,sE(e,t)):Oa(e,t)}function Oxt(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_TABLE,n===O.TABLE&&WC(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:k4(e,t)}}function $K(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.COL:{e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{Gf(e,t);break}default:b3(e,t)}}function Pxt(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case O.TEMPLATE:{g_(e,t);break}case O.COL:break;default:b3(e,t)}}function b3(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=se.IN_TABLE,e._processToken(t))}function R4(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,O.TR),e.insertionMode=se.IN_ROW,$4(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,sE(e,t));break}default:sE(e,t)}}function iV(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE,WC(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:WC(e,t)}}function $4(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ne.HTML),e.insertionMode=se.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,R4(e,t));break}default:sE(e,t)}}function Pke(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,iV(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=se.IN_TABLE_BODY,iV(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:WC(e,t)}}function kxt(e,t){const n=t.tagID;Oke.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),$4(e,t)):Oa(e,t)}function Rxt(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=se.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Pke(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:k4(e,t)}}function kke(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,Ne.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ne.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{Gf(e,t);break}}}function Rke(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{g_(e,t);break}}}function $xt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):kke(e,t)}function Nxt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Rke(e,t)}function Dxt(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{Gf(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=se.IN_TABLE,e.insertionMode=se.IN_TABLE,sE(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=se.IN_COLUMN_GROUP,e.insertionMode=se.IN_COLUMN_GROUP,$K(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=se.IN_TABLE_BODY,e.insertionMode=se.IN_TABLE_BODY,R4(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=se.IN_ROW,e.insertionMode=se.IN_ROW,$4(e,t);break}default:e.tmplInsertionModeStack[0]=se.IN_BODY,e.insertionMode=se.IN_BODY,Oa(e,t)}}function Mxt(e,t){t.tagID===O.TEMPLATE&&g_(e,t)}function $ke(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):RK(e,t)}function Lxt(e,t){t.tagID===O.HTML?Oa(e,t):w3(e,t)}function Nke(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else w3(e,t)}function w3(e,t){e.insertionMode=se.IN_BODY,P4(e,t)}function Fxt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.FRAMESET:{e._insertElement(t,Ne.HTML);break}case O.FRAME:{e._appendElement(t,Ne.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{Gf(e,t);break}}}function jxt(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=se.AFTER_FRAMESET))}function Bxt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.NOFRAMES:{Gf(e,t);break}}}function zxt(e,t){t.tagID===O.HTML&&(e.insertionMode=se.AFTER_AFTER_FRAMESET)}function Uxt(e,t){t.tagID===O.HTML?Oa(e,t):HR(e,t)}function HR(e,t){e.insertionMode=se.IN_BODY,P4(e,t)}function Vxt(e,t){switch(t.tagID){case O.HTML:{Oa(e,t);break}case O.NOFRAMES:{Gf(e,t);break}}}function Hxt(e,t){t.chars=Ai,e._insertCharacters(t)}function qxt(e,t){e._insertCharacters(t),e.framesetOk=!1}function Dke(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ne.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Wxt(e,t){if(aEt(t))Dke(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ne.MATHML?vke(t):r===Ne.SVG&&(uEt(t),_ke(t)),PK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Gxt(e,t){if(t.tagID===O.P||t.tagID===O.BR){Dke(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ne.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const Mke=Lke("end"),y_=Lke("start");function Lke(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const Fke=function(e){if(e==null)return Qxt;if(typeof e=="function")return N4(e);if(typeof e=="object")return Array.isArray(e)?Yxt(e):Kxt(e);if(typeof e=="string")return Xxt(e);throw new Error("Expected function, string, or object as test")};function Yxt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Fke(e[n]);return N4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Kxt(e){const t=e;return N4(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Xxt(e){return N4(t);function t(n){return n&&n.type===e}}function N4(e){return t;function t(n,r,i){return!!(Jxt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Qxt(){return!0}function Jxt(e){return e!==null&&typeof e=="object"&&"type"in e}const jke=[],Zxt=!0,fhe=!1,eSt="skip";function tSt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Fke(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=jke,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=nSt(n(u,c)),h[0]===fhe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==eSt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===fhe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function nSt(e){return Array.isArray(e)?e:typeof e=="number"?[Zxt,e]:e==null?jke:[e]}function rSt(e,t,n,r){let i,s,o;s=t,o=n,i=r,tSt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const iSt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),dhe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Bke(e,t){const n=pSt(e),r=nke("type",{handlers:{root:sSt,element:oSt,text:aSt,comment:Uke,doctype:uSt,raw:cSt},unknown:fSt}),i={parser:n?new uhe(dhe):uhe.getFragmentParser(void 0,dhe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Sx(i,y_());const s=n?i.parser.document:i.parser.getFragment(),o=owt(s,{file:i.options.file});return i.stitches&&rSt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function zke(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function sSt(e,t){zke(e.children,t)}function oSt(e,t){dSt(e,t),zke(e.children,t),hSt(e,t)}function aSt(e,t){const n={type:Dn.CHARACTER,chars:e.value,location:PI(e)};Sx(t,y_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function uSt(e,t){const n={type:Dn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:PI(e)};Sx(t,y_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function lSt(e,t){t.stitches=!0;const n=mSt(e);if("children"in e&&"children"in n){const r=Bke({type:"root",children:e.children},t.options);n.children=r.children}Uke({type:"comment",value:{stitch:n}},t)}function Uke(e,t){const n=e.value,r={type:Dn.COMMENT,data:n,location:PI(e)};Sx(t,y_(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function cSt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Vke(t,y_(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function fSt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))lSt(n,t);else{let r="";throw iSt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Sx(e,t){Vke(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=us.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Vke(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function dSt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===us.PLAINTEXT)return;Sx(t,y_(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Fv.html;i===Fv.html&&n==="svg"&&(i=Fv.svg);const s=fwt({...e,children:[]},{space:i===Fv.svg?"svg":"html"}),o={type:Dn.START_TAG,tagName:n,tagID:xx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:PI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function hSt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&_wt.includes(n)||t.parser.tokenizer.state===us.PLAINTEXT)return;Sx(t,Mke(e));const r={type:Dn.END_TAG,tagName:n,tagID:xx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:PI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===us.RCDATA||t.parser.tokenizer.state===us.RAWTEXT||t.parser.tokenizer.state===us.SCRIPT_DATA)&&(t.parser.tokenizer.state=us.DATA)}function pSt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function PI(e){const t=y_(e)||{line:void 0,column:void 0,offset:void 0},n=Mke(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function mSt(e){return"children"in e?Xde({...e,children:[]}):Xde(e)}function gSt(e){return function(t,n){return Bke(t,{...e,file:n})}}function Ka({text:e,required:t}){const n={img:({node:i,...s})=>R.jsx(p_,{...s}),p:({node:i,...s})=>R.jsx(it,{...s,pb:8}),h1:({node:i,...s})=>R.jsx(fa,{order:1,...s,pb:12}),h2:({node:i,...s})=>R.jsx(fa,{order:2,...s,pb:12}),h3:({node:i,...s})=>R.jsx(fa,{order:3,...s,pb:12}),h4:({node:i,...s})=>R.jsx(fa,{order:4,...s,pb:12}),h5:({node:i,...s})=>R.jsx(fa,{order:5,...s,pb:12}),h6:({node:i,...s})=>R.jsx(fa,{order:6,...s,pb:12}),a:({node:i,...s})=>R.jsx(yI,{...s}),ul:({node:i,...s})=>R.jsx(i1,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>R.jsx(i1,{type:"ordered",withPadding:!0,...s,pb:8})};return R.jsx(KPe,{components:n,rehypePlugins:[gSt],children:e+(t?' <span style="color: #fa5252">*</span>':"")})}function Hke({errors:e}){const t=`
      There was an issue loading the study config. Please check the following errors:  

      ${e.map(n=>`- You have an error at ${n.instancePath||"root"}: ${n.message} - ${JSON.stringify(n.params)}  `).join(`
`)}
    `.replace(/\n\s+/g,`
`);return R.jsx(Ka,{text:t})}const ySt="https://github.com/revisit-studies/study/tree/main/public/";function vSt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Vl();return R.jsxs(Lm,{size:"xs",px:"xs",style:{marginTop:60,marginBottom:60},children:[R.jsx(p_,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Nc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),R.jsx(it,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=fK(i);return R.jsx(Nm,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:R.jsx(p4,{shadow:"sm",radius:"md",withBorder:!0,children:s.errors?R.jsxs(R.Fragment,{children:[R.jsxs(vi,{align:"center",direction:"row",children:[R.jsx(ayt,{color:"red"}),R.jsx(it,{fw:"bold",ml:8,color:"red",children:i})]}),R.jsx(Hke,{errors:s.errors})]}):R.jsxs(R.Fragment,{children:[R.jsx(it,{fw:"bold",children:s.studyMetadata.title}),R.jsx(it,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),R.jsx(it,{c:"dimmed",children:s.studyMetadata.description}),R.jsx(it,{c:"dimmed",ta:"right",style:{paddingRight:5},children:R.jsxs(yI,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${ySt}${o}`,children:["View source:"," ",o]})})]})})},i)})]})}var qke={exports:{}},Wke={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oE=C;function _St(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bSt=typeof Object.is=="function"?Object.is:_St,wSt=oE.useState,ESt=oE.useEffect,xSt=oE.useLayoutEffect,SSt=oE.useDebugValue;function TSt(e,t){var n=t(),r=wSt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return xSt(function(){i.value=n,i.getSnapshot=t,M9(i)&&s({inst:i})},[e,n,t]),ESt(function(){return M9(i)&&s({inst:i}),e(function(){M9(i)&&s({inst:i})})},[e]),SSt(n),n}function M9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bSt(e,n)}catch{return!0}}function CSt(e,t){return t()}var ASt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CSt:TSt;Wke.useSyncExternalStore=oE.useSyncExternalStore!==void 0?oE.useSyncExternalStore:ASt;qke.exports=Wke;var ISt=qke.exports,Gke={exports:{}},Yke={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D4=C,OSt=ISt;function PSt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kSt=typeof Object.is=="function"?Object.is:PSt,RSt=OSt.useSyncExternalStore,$St=D4.useRef,NSt=D4.useEffect,DSt=D4.useMemo,MSt=D4.useDebugValue;Yke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=$St(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=DSt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,kSt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=RSt(e,s[0],s[1]);return NSt(function(){o.hasValue=!0,o.value=a},[a]),MSt(a),a};Gke.exports=Yke;var LSt=Gke.exports;function FSt(e){e()}let Kke=FSt;const jSt=e=>Kke=e,BSt=()=>Kke,hhe=Symbol.for("react-redux-context"),phe=typeof globalThis<"u"?globalThis:{};function zSt(){var e;if(!C.createContext)return{};const t=(e=phe[hhe])!=null?e:phe[hhe]=new Map;let n=t.get(C.createContext);return n||(n=C.createContext(null),t.set(C.createContext,n)),n}const D0=zSt();function NK(e=D0){return function(){return C.useContext(e)}}const Xke=NK(),USt=()=>{throw new Error("uSES not initialized!")};let Qke=USt;const VSt=e=>{Qke=e},HSt=(e,t)=>e===t;function qSt(e=D0){const t=e===D0?Xke:NK(e);return function(r,i={}){const{equalityFn:s=HSt,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:l,getServerState:c,stabilityCheck:f,noopCheck:d}=t();C.useRef(!0);const h=C.useCallback({[r.name](m){return r(m)}}[r.name],[r,f,o]),p=Qke(l.addNestedSub,u.getState,c||u.getState,h,s);return C.useDebugValue(p),p}}const WSt=qSt();var Xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DK=Symbol.for("react.element"),MK=Symbol.for("react.portal"),M4=Symbol.for("react.fragment"),L4=Symbol.for("react.strict_mode"),F4=Symbol.for("react.profiler"),j4=Symbol.for("react.provider"),B4=Symbol.for("react.context"),GSt=Symbol.for("react.server_context"),z4=Symbol.for("react.forward_ref"),U4=Symbol.for("react.suspense"),V4=Symbol.for("react.suspense_list"),H4=Symbol.for("react.memo"),q4=Symbol.for("react.lazy"),YSt=Symbol.for("react.offscreen"),Jke;Jke=Symbol.for("react.module.reference");function jc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case DK:switch(e=e.type,e){case M4:case F4:case L4:case U4:case V4:return e;default:switch(e=e&&e.$$typeof,e){case GSt:case B4:case z4:case q4:case H4:case j4:return e;default:return t}}case MK:return t}}}Xr.ContextConsumer=B4;Xr.ContextProvider=j4;Xr.Element=DK;Xr.ForwardRef=z4;Xr.Fragment=M4;Xr.Lazy=q4;Xr.Memo=H4;Xr.Portal=MK;Xr.Profiler=F4;Xr.StrictMode=L4;Xr.Suspense=U4;Xr.SuspenseList=V4;Xr.isAsyncMode=function(){return!1};Xr.isConcurrentMode=function(){return!1};Xr.isContextConsumer=function(e){return jc(e)===B4};Xr.isContextProvider=function(e){return jc(e)===j4};Xr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===DK};Xr.isForwardRef=function(e){return jc(e)===z4};Xr.isFragment=function(e){return jc(e)===M4};Xr.isLazy=function(e){return jc(e)===q4};Xr.isMemo=function(e){return jc(e)===H4};Xr.isPortal=function(e){return jc(e)===MK};Xr.isProfiler=function(e){return jc(e)===F4};Xr.isStrictMode=function(e){return jc(e)===L4};Xr.isSuspense=function(e){return jc(e)===U4};Xr.isSuspenseList=function(e){return jc(e)===V4};Xr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===M4||e===F4||e===L4||e===U4||e===V4||e===YSt||typeof e=="object"&&e!==null&&(e.$$typeof===q4||e.$$typeof===H4||e.$$typeof===j4||e.$$typeof===B4||e.$$typeof===z4||e.$$typeof===Jke||e.getModuleId!==void 0)};Xr.typeOf=jc;function KSt(){const e=BSt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const mhe={notify(){},get:()=>[]};function XSt(e,t){let n,r=mhe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=KSt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=mhe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const QSt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JSt=QSt?C.useLayoutEffect:C.useEffect;function ZSt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=C.useMemo(()=>{const l=XSt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),a=C.useMemo(()=>e.getState(),[e]);JSt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||D0;return C.createElement(u.Provider,{value:o},n)}function Zke(e=D0){const t=e===D0?Xke:NK(e);return function(){const{store:r}=t();return r}}const eTt=Zke();function tTt(e=D0){const t=e===D0?eTt:Zke(e);return function(){return t().dispatch}}const eRe=tTt();VSt(LSt.useSyncExternalStoreWithSelector);jSt(c_.unstable_batchedUpdates);function W4(){const{studyId:e}=fm();return`${e}`}function Yf(){const{index:e}=fm();return parseInt(e||"0",10)}function ff(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function M0(e){return!!e&&!!e[Pi]}function pm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===cTt}(e)||Array.isArray(e)||!!e[Ehe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ehe])||LK(e)||FK(e))}function T1(e,t,n){n===void 0&&(n=!1),Tx(e)===0?(n?Object.keys:_w)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Tx(e){var t=e[Pi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:LK(e)?2:FK(e)?3:0}function vw(e,t){return Tx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nTt(e,t){return Tx(e)===2?e.get(t):e[t]}function tRe(e,t,n){var r=Tx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nRe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function LK(e){return uTt&&e instanceof Map}function FK(e){return lTt&&e instanceof Set}function lv(e){return e.o||e.t}function jK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=iRe(e);delete t[Pi];for(var n=_w(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function BK(e,t){return t===void 0&&(t=!1),zK(e)||M0(e)||!pm(e)||(Tx(e)>1&&(e.set=e.add=e.clear=e.delete=rTt),Object.freeze(e),t&&T1(e,function(n,r){return BK(r,!0)},!0)),e}function rTt(){ff(2)}function zK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function th(e){var t=uV[e];return t||ff(18,e),t}function iTt(e,t){uV[e]||(uV[e]=t)}function sV(){return GC}function L9(e,t){t&&(th("Patches"),e.u=[],e.s=[],e.v=t)}function E3(e){oV(e),e.p.forEach(sTt),e.p=null}function oV(e){e===GC&&(GC=e.l)}function ghe(e){return GC={p:[],l:GC,h:e,m:!0,_:0}}function sTt(e){var t=e[Pi];t.i===0||t.i===1?t.j():t.g=!0}function F9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||th("ES5").S(t,e,r),r?(n[Pi].P&&(E3(t),ff(4)),pm(e)&&(e=x3(t,e),t.l||S3(t,e)),t.u&&th("Patches").M(n[Pi].t,e,t.u,t.s)):e=x3(t,n,[]),E3(t),t.u&&t.v(t.u,t.s),e!==rRe?e:void 0}function x3(e,t,n){if(zK(t))return t;var r=t[Pi];if(!r)return T1(t,function(a,u){return yhe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return S3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=jK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),T1(s,function(a,u){return yhe(e,r,i,a,u,n,o)}),S3(e,i,!1),n&&e.u&&th("Patches").N(r,n,e.u,e.s)}return r.o}function yhe(e,t,n,r,i,s,o){if(M0(i)){var a=x3(e,i,s&&t&&t.i!==3&&!vw(t.R,r)?s.concat(r):void 0);if(tRe(n,r,a),!M0(a))return;e.m=!1}else o&&n.add(i);if(pm(i)&&!zK(i)){if(!e.h.D&&e._<1)return;x3(e,i),t&&t.A.l||S3(e,i)}}function S3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&BK(t,n)}function j9(e,t){var n=e[Pi];return(n?lv(n):e)[t]}function vhe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Dg(e){e.P||(e.P=!0,e.l&&Dg(e.l))}function B9(e){e.o||(e.o=jK(e.t))}function aV(e,t,n){var r=LK(t)?th("MapSet").F(t,n):FK(t)?th("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:sV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=YC;o&&(u=[a],l=LT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):th("ES5").J(t,n);return(n?n.A:sV()).p.push(r),r}function oTt(e){return M0(e)||ff(22,e),function t(n){if(!pm(n))return n;var r,i=n[Pi],s=Tx(n);if(i){if(!i.P&&(i.i<4||!th("ES5").K(i)))return i.t;i.I=!0,r=_he(n,s),i.I=!1}else r=_he(n,s);return T1(r,function(o,a){i&&nTt(i.t,o)===a||tRe(r,o,t(a))}),s===3?new Set(r):r}(e)}function _he(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return jK(e)}function aTt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Pi];return YC.get(u,s)},set:function(u){var l=this[Pi];YC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Pi];if(!a.P)switch(a.i){case 5:r(a)&&Dg(a);break;case 4:n(a)&&Dg(a)}}}function n(s){for(var o=s.t,a=s.k,u=_w(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Pi){var f=o[c];if(f===void 0&&!vw(o,c))return!0;var d=a[c],h=d&&d[Pi];if(h?h.t!==f:!nRe(d,f))return!0}}var p=!!o[Pi];return u.length!==_w(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};iTt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=iRe(f);delete p[Pi];for(var m=_w(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:sV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Pi,{value:l,writable:!0}),u},S:function(s,o,a){a?M0(o)&&o[Pi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Pi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)T1(d,function(_){_!==Pi&&(f[_]!==void 0||vw(f,_)?h[_]||u(d[_]):(h[_]=!0,Dg(c)))}),T1(f,function(_){d[_]!==void 0||vw(d,_)||(h[_]=!1,Dg(c))});else if(p===5){if(r(c)&&(Dg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var bhe,GC,UK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",uTt=typeof Map<"u",lTt=typeof Set<"u",whe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",rRe=UK?Symbol.for("immer-nothing"):((bhe={})["immer-nothing"]=!0,bhe),Ehe=UK?Symbol.for("immer-draftable"):"__$immer_draftable",Pi=UK?Symbol.for("immer-state"):"__$immer_state",cTt=""+Object.prototype.constructor,_w=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,iRe=Object.getOwnPropertyDescriptors||function(e){var t={};return _w(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},uV={},YC={get:function(e,t){if(t===Pi)return e;var n=lv(e);if(!vw(n,t))return function(i,s,o){var a,u=vhe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!pm(r)?r:r===j9(e.t,t)?(B9(e),e.o[t]=aV(e.A.h,r,e)):r},has:function(e,t){return t in lv(e)},ownKeys:function(e){return Reflect.ownKeys(lv(e))},set:function(e,t,n){var r=vhe(lv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=j9(lv(e),t),s=i==null?void 0:i[Pi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(nRe(n,i)&&(n!==void 0||vw(e.t,t)))return!0;B9(e),Dg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return j9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,B9(e),Dg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=lv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ff(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ff(12)}},LT={};T1(YC,function(e,t){LT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),LT.deleteProperty=function(e,t){return LT.set.call(this,e,t,void 0)},LT.set=function(e,t,n){return YC.set.call(this,e[0],t,n,e[0])};var fTt=function(){function e(n){var r=this;this.O=whe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&ff(6),o!==void 0&&typeof o!="function"&&ff(7),pm(i)){var c=ghe(r),f=aV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?E3(c):oV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return L9(c,o),F9(m,c)},function(m){throw E3(c),m}):(L9(c,o),F9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===rRe&&(l=void 0),r.D&&BK(l,!0),o){var h=[],p=[];th("Patches").M(i,l,h,p),o(h,p)}return l}ff(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){pm(n)||ff(8),M0(n)&&(n=oTt(n));var r=ghe(this),i=aV(this,n,void 0);return i[Pi].C=!0,oV(r),i},t.finishDraft=function(n,r){var i=n&&n[Pi],s=i.A;return L9(s,r),F9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!whe&&ff(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=th("Patches").$;return M0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),kl=new fTt,dTt=kl.produce;kl.produceWithPatches.bind(kl);kl.setAutoFreeze.bind(kl);kl.setUseProxies.bind(kl);kl.applyPatches.bind(kl);kl.createDraft.bind(kl);kl.finishDraft.bind(kl);const sRe=dTt;function KC(e){"@babel/helpers - typeof";return KC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KC(e)}function hTt(e,t){if(KC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(KC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pTt(e){var t=hTt(e,"string");return KC(t)=="symbol"?t:t+""}function mTt(e,t,n){return(t=pTt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function She(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xhe(Object(n),!0).forEach(function(r){mTt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xhe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var The=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),z9=function(){return Math.random().toString(36).substring(7).split("").join(".")},T3={INIT:"@@redux/INIT"+z9(),REPLACE:"@@redux/REPLACE"+z9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+z9()}};function gTt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function oRe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sa(1));return n(oRe)(e,t)}if(typeof e!="function")throw new Error(sa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(sa(3));return s}function f(m){if(typeof m!="function")throw new Error(sa(4));if(u)throw new Error(sa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(sa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!gTt(m))throw new Error(sa(7));if(typeof m.type>"u")throw new Error(sa(8));if(u)throw new Error(sa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(sa(10));i=m,d({type:T3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(sa(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[The]=function(){return this},m}return d({type:T3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[The]=p,r}function yTt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:T3.INIT});if(typeof r>"u")throw new Error(sa(12));if(typeof n(void 0,{type:T3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function vTt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{yTt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(sa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function C3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function _Tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(sa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=C3.apply(void 0,a)(i.dispatch),She(She({},i),{},{dispatch:s})}}}function aRe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var lV=aRe();lV.withExtraArgument=aRe;var uRe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},C1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},bTt=Object.defineProperty,wTt=Object.defineProperties,ETt=Object.getOwnPropertyDescriptors,Che=Object.getOwnPropertySymbols,xTt=Object.prototype.hasOwnProperty,STt=Object.prototype.propertyIsEnumerable,Ahe=function(e,t,n){return t in e?bTt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m0=function(e,t){for(var n in t||(t={}))xTt.call(t,n)&&Ahe(e,n,t[n]);if(Che)for(var r=0,i=Che(t);r<i.length;r++){var n=i[r];STt.call(t,n)&&Ahe(e,n,t[n])}return e},U9=function(e,t){return wTt(e,ETt(t))},RI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},TTt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?C3:C3.apply(null,arguments)};function lRe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var CTt=function(e){return e&&typeof e.match=="function"};function nh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return m0(m0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function ATt(e){return lRe(e)&&"type"in e}var ITt=function(e){uRe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,C1([void 0],n[0].concat(this)))):new(t.bind.apply(t,C1([void 0],n.concat(this))))},t}(Array),OTt=function(e){uRe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,C1([void 0],n[0].concat(this)))):new(t.bind.apply(t,C1([void 0],n.concat(this))))},t}(Array);function cV(e){return pm(e)?sRe(e,function(){}):e}function PTt(e){return typeof e=="boolean"}function kTt(){return function(t){return RTt(t)}}function RTt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new ITt;return n&&(PTt(n)?r.push(lV):r.push(lV.withExtraArgument(n.extraArgument))),r}var $Tt=!0;function cRe(e){var t=kTt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(lRe(i))h=vTt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=_Tt.apply(void 0,p),g=C3;u&&(g=TTt(m0({trace:!$Tt},typeof u=="object"&&u)));var y=new OTt(m),v=y;Array.isArray(d)?v=C1([m],d):typeof d=="function"&&(v=d(y));var _=g.apply(void 0,v);return oRe(h,c,_)}function fRe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function NTt(e){return typeof e=="function"}function DTt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?fRe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(NTt(e))u=function(){return cV(e())};else{var l=cV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=C1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(M0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(pm(p))return sRe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function MTt(e,t){return e+"/"+t}function dRe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:cV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=MTt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?nh(d,p):nh(d)});function u(){var c=typeof e.extraReducers=="function"?fRe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=m0(m0({},d),o);return DTt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var LTt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hRe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=LTt[Math.random()*64|0];return t},FTt=["name","message","stack","code"],V9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ihe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),jTt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=FTt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=nh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:U9(m0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=nh(t+"/pending",function(l,c,f){return{payload:void 0,meta:U9(m0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=nh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||jTt)(l||"Rejected"),meta:U9(m0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):hRe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return RI(this,null,function(){var v,_,w,E,S,b,T;return kI(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),zTt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,k){return p.signal.addEventListener("abort",function(){return k({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,k){return new V9(I,k)},fulfillWithValue:function(I,k){return new Ihe(I,k)}})).then(function(I){if(I instanceof V9)throw I;return I instanceof Ihe?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return b=A.sent(),w=b instanceof V9?o(null,h,l,b.payload,b.meta):o(b,h,l),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,T||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(BTt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function BTt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function zTt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var UTt=function(e,t){return CTt(e)?e.match(t):e(t)};function Ohe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return UTt(r,n)})}}var VK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},fV=function(){},pRe=function(e,t){return t===void 0&&(t=fV),e.catch(t),e},mRe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},bw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},VTt="task",gRe="listener",yRe="completed",HK="cancelled",HTt="task-"+HK,qTt="task-"+yRe,vRe=gRe+"-"+HK,WTt=gRe+"-"+yRe,G4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=VTt+" "+HK+" (reason: "+t+")"}return e}(),ww=function(e){if(e.aborted)throw new G4(e.reason)};function _Re(e,t){var n=fV;return new Promise(function(r,i){var s=function(){return i(new G4(e.reason))};if(e.aborted){s();return}n=mRe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=fV})}var GTt=function(e,t){return RI(void 0,null,function(){var n,r;return kI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof G4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},A3=function(e){return function(t){return pRe(_Re(e,t).then(function(n){return ww(e),n}))}},bRe=function(e){var t=A3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},YTt=Object.assign,Phe={},$I="listenerMiddleware",KTt=function(e,t){var n=function(r){return mRe(e,function(){return bw(r,e.reason)})};return function(r,i){VK(r,"taskExecutor");var s=new AbortController;n(s);var o=GTt(function(){return RI(void 0,null,function(){var a;return kI(this,function(u){switch(u.label){case 0:return ww(e),ww(s.signal),[4,r({pause:A3(s.signal),delay:bRe(s.signal),signal:s.signal})];case 1:return a=u.sent(),ww(s.signal),[2,a]}})})},function(){return bw(s,qTt)});return i!=null&&i.autoJoin&&t.push(o),{result:A3(e)(o),cancel:function(){bw(s,HTt)}}}},XTt=function(e,t){var n=function(r,i){return RI(void 0,null,function(){var s,o,a,u;return kI(this,function(l){switch(l.label){case 0:ww(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,_Re(t,Promise.race(a))];case 2:return u=l.sent(),ww(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return pRe(n(r,i))}},wRe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=nh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return VK(s,"options.listener"),{predicate:i,type:t,effect:s}},QTt=function(e){var t=wRe(e),n=t.type,r=t.predicate,i=t.effect,s=hRe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},dV=function(e){e.pending.forEach(function(t){bw(t,vRe)})},JTt=function(e){return function(){e.forEach(dV),e.clear()}},khe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},ZTt=nh($I+"/add"),e2t=nh($I+"/removeAll"),t2t=nh($I+"/remove"),n2t=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,C1([$I+"/error"],e))};function r2t(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?n2t:i;VK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&dV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=QTt(h)),o(p)},l=function(h){var p=wRe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&dV(v)),!!v},c=function(h,p,m,g){return RI(t,null,function(){var y,v,_,w;return kI(this,function(E){switch(E.label){case 0:y=new AbortController,v=XTt(u,y.signal),_=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,YTt({},m,{getOriginalState:g,condition:function(S,b){return v(S,b).then(Boolean)},take:v,delay:bRe(y.signal),pause:A3(y.signal),extra:r,signal:y.signal,fork:KTt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,b,T){S!==y&&(bw(S,vRe),T.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof G4||khe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return E.sent(),bw(y,WTt),h.pending.delete(y),[7];case 6:return[2]}})})},f=JTt(n),d=function(h){return function(p){return function(m){if(!ATt(m))return p(m);if(ZTt.match(m))return u(m.payload);if(e2t.match(m)){f();return}if(t2t.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Phe)throw new Error($I+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var b=S[E],T=!1;try{T=b.predicate(m,_,g)}catch(A){T=!1,khe(s,A,{raisedBy:"predicate"})}T&&c(b,m,h,y)}}finally{g=Phe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Rhe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);aTt();var yi={};function i2t(e){return!!(e&&typeof e.then=="function")}function I3(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function s2t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Y4(){return Math.random().toString(36).substring(2)}var $he=0,H9=0;function K4(){var e=new Date().getTime();return e===$he?(H9++,e*1e3+H9):($he=e,H9=0,e*1e3)}var NI=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",o2t=K4,a2t="native";function u2t(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function l2t(e){e.bc.close(),e.subFns=[]}function c2t(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function f2t(e,t){e.messagesCallback=t}function d2t(){if(NI&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function h2t(){return 150}const p2t={create:u2t,close:l2t,onMessage:f2t,postMessage:c2t,canBeUsed:d2t,type:a2t,averageResponseTime:h2t,microSeconds:o2t};var ERe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,xRe()),this.set.add(t),setTimeout(function(){m2t(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function m2t(e){for(var t=xRe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function xRe(){return new Date().getTime()}function X4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var g2t=K4,y2t="pubkey.broadcast-channel-0-",mm="messages",v2t="idb";function SRe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function _2t(e){var t=SRe(),n=y2t+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(mm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function b2t(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([mm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(mm);u.add(i)})}function w2t(e,t){var n=e.transaction(mm).objectStore(mm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function E2t(e,t){var n=e.transaction([mm],"readwrite").objectStore(mm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function x2t(e,t){var n=new Date().getTime()-t,r=e.transaction(mm).objectStore(mm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function S2t(e,t){return x2t(e,t).then(function(n){return Promise.all(n.map(function(r){return E2t(e,r.id)}))})}function T2t(e,t){return t=X4(t),_2t(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Y4(),eMIs:new ERe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},TRe(r),r})}function TRe(e){e.closed||CRe(e).then(function(){return I3(e.options.idb.fallbackInterval)}).then(function(){return TRe(e)})}function C2t(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function CRe(e){return e.closed||!e.messagesCallback?Promise.resolve():w2t(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return C2t(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function A2t(e){e.closed=!0,e.db.close()}function I2t(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return b2t(e.db,e.uuid,t)}).then(function(){s2t(0,10)===0&&S2t(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function O2t(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,CRe(e)}function P2t(){if(NI)return!1;var e=SRe();return!!e}function k2t(e){return e.idb.fallbackInterval*2}const R2t={create:T2t,close:A2t,onMessage:O2t,postMessage:I2t,canBeUsed:P2t,type:v2t,averageResponseTime:k2t,microSeconds:g2t};var $2t=K4,N2t="pubkey.broadcastChannel-",D2t="localstorage";function ARe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function IRe(e){return N2t+e}function M2t(e,t){return new Promise(function(n){I3().then(function(){var r=IRe(e.channelName),i={token:Y4(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);ARe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function L2t(e,t){var n=IRe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function F2t(e){window.removeEventListener("storage",e)}function j2t(e,t){if(t=X4(t),!ORe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=Y4(),r=new ERe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=L2t(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function B2t(e){F2t(e.listener)}function z2t(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function ORe(){if(NI)return!1;var e=ARe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function U2t(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const V2t={create:j2t,close:B2t,onMessage:z2t,postMessage:M2t,canBeUsed:ORe,type:D2t,averageResponseTime:U2t,microSeconds:$2t};var H2t=K4,q2t="simulate",qK=new Set;function W2t(e){var t={name:e,messagesCallback:null};return qK.add(t),t}function G2t(e){qK.delete(e)}function Y2t(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(qK);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function K2t(e,t){e.messagesCallback=t}function X2t(){return!0}function Q2t(){return 5}const J2t={create:W2t,close:G2t,onMessage:K2t,postMessage:Y2t,canBeUsed:X2t,type:q2t,averageResponseTime:Q2t,microSeconds:H2t};var hV=[p2t,R2t,V2t];if(NI){var Nhe=require("../../src/methods/node.js");typeof Nhe.canBeUsed=="function"&&hV.push(Nhe)}function PRe(e){var t=[].concat(e.methods,hV).filter(Boolean);if(e.type){if(e.type==="simulate")return J2t;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!NI&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(hV.map(function(i){return i.type})))}var WK=function(t,n){this.name=t,pV&&(n=pV),this.options=X4(n),this.method=PRe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,tCt(this)};WK._pubkey=!0;function Z2t(e){e=X4(e);var t=PRe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var pV;function eCt(e){pV=e}WK.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Dhe(this,"message",t)},postInternal:function(t){return Dhe(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};Lhe(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,Mhe(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};Mhe(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});Lhe(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Dhe(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function tCt(e){var t=e.method.create(e.name,e.options);i2t(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function kRe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Mhe(e,t,n){e._addEL[t].push(n),nCt(e)}function Lhe(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),rCt(e)}function nCt(e){if(!e._iL&&kRe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function rCt(e){if(e._iL&&!kRe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const iCt=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function sCt(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const oCt={add:sCt},RRe={},aCt=Object.freeze(Object.defineProperty({__proto__:null,default:RRe},Symbol.toStringTag,{value:"Module"}));var uCt=iCt?RRe:oCt,o1=new Set,Fhe=!1;function lCt(){Fhe||(Fhe=!0,uCt.add($Re))}function cCt(e){if(lCt(),typeof e!="function")throw new Error("Listener is no function");o1.add(e);var t={remove:function(){return o1.delete(e)},run:function(){return o1.delete(e),e()}};return t}function $Re(){var e=[];return o1.forEach(function(t){e.push(t()),o1.delete(t)}),Promise.all(e)}function fCt(){o1.clear()}function dCt(){return o1.size}const hCt={add:cCt,runAll:$Re,removeAll:fCt,getSize:dCt};var NRe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=Y4(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};NRe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=jv(this,"apply").then(function(){return I3(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):jv(t,"apply")}).then(function(){return I3(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):jv(t)}).then(function(){return DRe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=pCt(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),jv(this,"death")}};function pCt(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function jv(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function DRe(e){e.isLeader=!0;var t=hCt.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&jv(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),jv(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),jv(e,"tell")}function mCt(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function gCt(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=mCt(t,e);var n=new NRe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const yCt=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:WK,beLeader:DRe,clearNodeFolder:Z2t,createLeaderElection:gCt,enforceOptions:eCt},Symbol.toStringTag,{value:"Module"})),vCt=tEe(yCt);var GK,YK;Object.defineProperty(yi,"__esModule",{value:!0});yi.initMessageListener=YK=yi.initStateWithPrevTab=yi.withReduxStateSync=yi.createReduxStateSync=GK=yi.createStateSyncMiddleware=yi.WINDOW_STATE_SYNC_ID=yi.INIT_MESSAGE_LISTENER=yi.RECEIVE_INIT_STATE=yi.SEND_INIT_STATE=yi.GET_INIT_STATE=void 0;yi.generateUuidForAction=FRe;yi.isActionAllowed=jRe;yi.isActionSynced=TCt;yi.MessageListener=BRe;var _Ct=vCt,mV=0,KK=yi.GET_INIT_STATE="&_GET_INIT_STATE",XK=yi.SEND_INIT_STATE="&_SEND_INIT_STATE",QK=yi.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",bCt=yi.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",gV={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},wCt=function(){return{type:KK}},ECt=function(){return{type:XK}},xCt=function(t){return{type:QK,payload:t}},SCt=function(){return{type:bCt}};function ag(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function MRe(){return""+ag()+ag()+"-"+ag()+"-"+ag()+"-"+ag()+"-"+ag()+ag()+ag()}var LRe=yi.WINDOW_STATE_SYNC_ID=MRe();function FRe(e){var t=e;return t.$uuid=MRe(),t.$wuid=LRe,t}function jRe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function TCt(e){return!!e.$isSync}function BRe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==LRe&&o.type!==QK&&o.$uuid&&o.$uuid!==mV&&(o.type===KK&&!s[o.$wuid]?(s[o.$wuid]=!0,n(ECt())):o.type===XK&&!s[o.$wuid]?i||(i=!0,n(xCt(o.payload))):r(o)&&(mV=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}GK=yi.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gV,n=jRe(t),r=new _Ct.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||gV.prepareState,s=null;return function(o){var a=o.getState,u=o.dispatch;return function(l){return function(c){if(s||(s=new BRe({channel:r,dispatch:u,allowed:n})),c&&!c.$uuid){var f=FRe(c);mV=f.$uuid;try{if(c.type===XK)return a()&&(f.payload=i(a()),r.postMessage(f)),l(c);(n(f)||c.type===KK)&&r.postMessage(f)}catch{console.error("Your browser doesn't support cross tab communication")}}return l(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var CCt=yi.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gV.receiveState;return function(r,i){var s=r;return i.type===QK&&(s=n(r,i.payload)),t(s,i)}};yi.withReduxStateSync=CCt;YK=yi.initStateWithPrevTab=function(t){var n=t.dispatch;n(wCt())};yi.initMessageListener=function(t){var n=t.dispatch;n(SCt())};function Lu(e){return e.components.flatMap(t=>typeof t=="string"?t:Lu(t))}function zRe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Lu(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Lu(e).length-1}];r+=1}else{const o=zRe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function URe(e,t){const n=zRe(e,t,0);return typeof n=="number"?null:n}function VRe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=VRe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function ACt(e,t){const n=VRe(e,t,0);return n.found?n.distance:-1}function HRe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...HRe(i,`${t}-${s}`))}),n}async function ICt(e,t,n,r,i,s){const o=Lu(n),a={...o.map(p=>({[p]:{}}))},u=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:i||a,isRecording:!1,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null},f=dRe({name:"storeSlice",initialState:c,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setAnalysisTrialName:(p,m)=>{p.analysisTrialName=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:_,provenanceGraph:w,windowEvents:E}=m;p.answers[g]={answer:y,startTime:v,endTime:_,provenanceGraph:w,windowEvents:E}}}}),d=[GK({})],h=cRe({reducer:f.reducer,preloadedState:c,middleware:d});return YK(h),{store:h,actions:f.actions}}const qRe=C.createContext(null);function Rl(){return C.useContext(qRe).actions}const xc=eRe,xa=WSt;function OCt(e){return xa(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function jm(){return xa(e=>Lu(e.sequence))}var O3={exports:{}};O3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",b="[object Undefined]",T="[object WeakMap]",A="[object ArrayBuffer]",I="[object DataView]",k="[object Float32Array]",$="[object Float64Array]",P="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",z="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",G="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,L={};L[k]=L[$]=L[P]=L[N]=L[F]=L[z]=L[W]=L[V]=L[G]=!0,L[a]=L[u]=L[A]=L[c]=L[I]=L[f]=L[d]=L[h]=L[m]=L[g]=L[v]=L[w]=L[E]=L[S]=L[T]=!1;var B=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,q=typeof self=="object"&&self&&self.Object===Object&&self,Z=B||q||Function("return this")(),ue=t&&!t.nodeType&&t,he=ue&&!0&&e&&!e.nodeType&&e,fe=he&&he.exports===ue,me=fe&&B.process,_e=function(){try{var re=he&&he.require&&he.require("util").types;return re||me&&me.binding&&me.binding("util")}catch{}}(),ge=_e&&_e.isTypedArray;function Be(re,ce,Te){switch(Te.length){case 0:return re.call(ce);case 1:return re.call(ce,Te[0]);case 2:return re.call(ce,Te[0],Te[1]);case 3:return re.call(ce,Te[0],Te[1],Te[2])}return re.apply(ce,Te)}function Me(re,ce){for(var Te=-1,$t=Array(re);++Te<re;)$t[Te]=ce(Te);return $t}function ct(re){return function(ce){return re(ce)}}function Oe(re,ce){return re==null?void 0:re[ce]}function Re(re,ce){return function(Te){return re(ce(Te))}}var Ye=Array.prototype,Ut=Function.prototype,Ft=Object.prototype,Je=Z["__core-js_shared__"],Ge=Ut.toString,gt=Ft.hasOwnProperty,at=function(){var re=/[^.]+$/.exec(Je&&Je.keys&&Je.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}(),lt=Ft.toString,Et=Ge.call(Object),ve=RegExp("^"+Ge.call(gt).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=fe?Z.Buffer:void 0,Fe=Z.Symbol,Ue=Z.Uint8Array;Se&&Se.allocUnsafe;var mt=Re(Object.getPrototypeOf,Object),cn=Object.create,Ve=Ft.propertyIsEnumerable,wt=Ye.splice,bt=Fe?Fe.toStringTag:void 0,bn=function(){try{var re=He(Object,"defineProperty");return re({},"",{}),re}catch{}}(),Lt=Se?Se.isBuffer:void 0,Ir=Math.max,Fn=Date.now,ar=He(Z,"Map"),oi=He(Object,"create"),yo=function(){function re(){}return function(ce){if(!op(ce))return{};if(cn)return cn(ce);re.prototype=ce;var Te=new re;return re.prototype=void 0,Te}}();function wr(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var $t=re[ce];this.set($t[0],$t[1])}}function nr(){this.__data__=oi?oi(null):{},this.size=0}function Vo(re){var ce=this.has(re)&&delete this.__data__[re];return this.size-=ce?1:0,ce}function Hr(re){var ce=this.__data__;if(oi){var Te=ce[re];return Te===r?void 0:Te}return gt.call(ce,re)?ce[re]:void 0}function Zr(re){var ce=this.__data__;return oi?ce[re]!==void 0:gt.call(ce,re)}function Pt(re,ce){var Te=this.__data__;return this.size+=this.has(re)?0:1,Te[re]=oi&&ce===void 0?r:ce,this}wr.prototype.clear=nr,wr.prototype.delete=Vo,wr.prototype.get=Hr,wr.prototype.has=Zr,wr.prototype.set=Pt;function Xt(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var $t=re[ce];this.set($t[0],$t[1])}}function rr(){this.__data__=[],this.size=0}function Gs(re){var ce=this.__data__,Te=Qt(ce,re);if(Te<0)return!1;var $t=ce.length-1;return Te==$t?ce.pop():wt.call(ce,Te,1),--this.size,!0}function mi(re){var ce=this.__data__,Te=Qt(ce,re);return Te<0?void 0:ce[Te][1]}function ai(re){return Qt(this.__data__,re)>-1}function ae(re,ce){var Te=this.__data__,$t=Qt(Te,re);return $t<0?(++this.size,Te.push([re,ce])):Te[$t][1]=ce,this}Xt.prototype.clear=rr,Xt.prototype.delete=Gs,Xt.prototype.get=mi,Xt.prototype.has=ai,Xt.prototype.set=ae;function ne(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var $t=re[ce];this.set($t[0],$t[1])}}function le(){this.size=0,this.__data__={hash:new wr,map:new(ar||Xt),string:new wr}}function Ee(re){var ce=ze(this,re).delete(re);return this.size-=ce?1:0,ce}function xe(re){return ze(this,re).get(re)}function St(re){return ze(this,re).has(re)}function It(re,ce){var Te=ze(this,re),$t=Te.size;return Te.set(re,ce),this.size+=Te.size==$t?0:1,this}ne.prototype.clear=le,ne.prototype.delete=Ee,ne.prototype.get=xe,ne.prototype.has=St,ne.prototype.set=It;function je(re){var ce=this.__data__=new Xt(re);this.size=ce.size}function Rt(){this.__data__=new Xt,this.size=0}function en(re){var ce=this.__data__,Te=ce.delete(re);return this.size=ce.size,Te}function ht(re){return this.__data__.get(re)}function kn(re){return this.__data__.has(re)}function In(re,ce){var Te=this.__data__;if(Te instanceof Xt){var $t=Te.__data__;if(!ar||$t.length<n-1)return $t.push([re,ce]),this.size=++Te.size,this;Te=this.__data__=new ne($t)}return Te.set(re,ce),this.size=Te.size,this}je.prototype.clear=Rt,je.prototype.delete=en,je.prototype.get=ht,je.prototype.has=kn,je.prototype.set=In;function Gt(re,ce){var Te=ip(re),$t=!Te&&uu(re),Un=!Te&&!$t&&sp(re),Or=!Te&&!$t&&!Un&&sP(re),ei=Te||$t||Un||Or,qn=ei?Me(re.length,String):[],ti=qn.length;for(var rs in re)ei&&(rs=="length"||Un&&(rs=="offset"||rs=="parent")||Or&&(rs=="buffer"||rs=="byteLength"||rs=="byteOffset")||At(rs,ti))||qn.push(rs);return qn}function Xn(re,ce,Te){(Te!==void 0&&!Wl(re[ce],Te)||Te===void 0&&!(ce in re))&&ui(re,ce,Te)}function $r(re,ce,Te){var $t=re[ce];(!(gt.call(re,ce)&&Wl($t,Te))||Te===void 0&&!(ce in re))&&ui(re,ce,Te)}function Qt(re,ce){for(var Te=re.length;Te--;)if(Wl(re[Te][0],ce))return Te;return-1}function ui(re,ce,Te){ce=="__proto__"&&bn?bn(re,ce,{configurable:!0,enumerable:!0,value:Te,writable:!0}):re[ce]=Te}var Li=Pe();function qr(re){return re==null?re===void 0?b:y:bt&&bt in Object(re)?qe(re):Ho(re)}function Is(re){return lu(re)&&qr(re)==a}function Ti(re){if(!op(re)||Hn(re))return!1;var ce=xS(re)?ve:H;return ce.test(nP(re))}function Ci(re){return lu(re)&&iP(re.length)&&!!L[qr(re)]}function Ys(re){if(!op(re))return Dr(re);var ce=Nr(re),Te=[];for(var $t in re)$t=="constructor"&&(ce||!gt.call(re,$t))||Te.push($t);return Te}function gs(re,ce,Te,$t,Un){re!==ce&&Li(ce,function(Or,ei){if(Un||(Un=new je),op(Or))xt(re,ce,ei,Te,gs,$t,Un);else{var qn=$t?$t(rp(re,ei),Or,ei+"",re,ce,Un):void 0;qn===void 0&&(qn=Or),Xn(re,ei,qn)}},Uy)}function xt(re,ce,Te,$t,Un,Or,ei){var qn=rp(re,Te),ti=rp(ce,Te),rs=ei.get(ti);if(rs){Xn(re,Te,rs);return}var qo=Or?Or(qn,ti,Te+"",re,ce,ei):void 0,Hy=qo===void 0;if(Hy){var ap=ip(ti),H_=!ap&&sp(ti),q_=!ap&&!H_&&sP(ti);qo=ti,ap||H_||q_?ip(qn)?qo=qn:rP(qn)?qo=de(qn):H_?(Hy=!1,qo=K(ti)):q_?(Hy=!1,qo=ee(ti)):qo=[]:cj(ti)||uu(ti)?(qo=qn,uu(qn)?qo=zy(qn):(!op(qn)||xS(qn))&&(qo=rt(ti))):Hy=!1}Hy&&(ei.set(ti,qo),Un(qo,ti,$t,Or,ei),ei.delete(ti)),Xn(re,Te,qo)}function Rn(re,ce){return ES(ad(re,ce,ng),re+"")}var ys=bn?function(re,ce){return bn(re,"toString",{configurable:!0,enumerable:!1,value:Vy(ce),writable:!0})}:ng;function K(re,ce){return re.slice()}function oe(re){var ce=new re.constructor(re.byteLength);return new Ue(ce).set(new Ue(re)),ce}function ee(re,ce){var Te=oe(re.buffer);return new re.constructor(Te,re.byteOffset,re.length)}function de(re,ce){var Te=-1,$t=re.length;for(ce||(ce=Array($t));++Te<$t;)ce[Te]=re[Te];return ce}function ye(re,ce,Te,$t){var Un=!Te;Te||(Te={});for(var Or=-1,ei=ce.length;++Or<ei;){var qn=ce[Or],ti=void 0;ti===void 0&&(ti=re[qn]),Un?ui(Te,qn,ti):$r(Te,qn,ti)}return Te}function pe(re){return Rn(function(ce,Te){var $t=-1,Un=Te.length,Or=Un>1?Te[Un-1]:void 0,ei=Un>2?Te[2]:void 0;for(Or=re.length>3&&typeof Or=="function"?(Un--,Or):void 0,ei&&xn(Te[0],Te[1],ei)&&(Or=Un<3?void 0:Or,Un=1),ce=Object(ce);++$t<Un;){var qn=Te[$t];qn&&re(ce,qn,$t,Or)}return ce})}function Pe(re){return function(ce,Te,$t){for(var Un=-1,Or=Object(ce),ei=$t(ce),qn=ei.length;qn--;){var ti=ei[++Un];if(Te(Or[ti],ti,Or)===!1)break}return ce}}function ze(re,ce){var Te=re.__data__;return jt(ce)?Te[typeof ce=="string"?"string":"hash"]:Te.map}function He(re,ce){var Te=Oe(re,ce);return Ti(Te)?Te:void 0}function qe(re){var ce=gt.call(re,bt),Te=re[bt];try{re[bt]=void 0;var $t=!0}catch{}var Un=lt.call(re);return $t&&(ce?re[bt]=Te:delete re[bt]),Un}function rt(re){return typeof re.constructor=="function"&&!Nr(re)?yo(mt(re)):{}}function At(re,ce){var Te=typeof re;return ce=ce??o,!!ce&&(Te=="number"||Te!="symbol"&&Y.test(re))&&re>-1&&re%1==0&&re<ce}function xn(re,ce,Te){if(!op(Te))return!1;var $t=typeof ce;return($t=="number"?V_(Te)&&At(ce,Te.length):$t=="string"&&ce in Te)?Wl(Te[ce],re):!1}function jt(re){var ce=typeof re;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?re!=="__proto__":re===null}function Hn(re){return!!at&&at in re}function Nr(re){var ce=re&&re.constructor,Te=typeof ce=="function"&&ce.prototype||Ft;return re===Te}function Dr(re){var ce=[];if(re!=null)for(var Te in Object(re))ce.push(Te);return ce}function Ho(re){return lt.call(re)}function ad(re,ce,Te){return ce=Ir(ce===void 0?re.length-1:ce,0),function(){for(var $t=arguments,Un=-1,Or=Ir($t.length-ce,0),ei=Array(Or);++Un<Or;)ei[Un]=$t[ce+Un];Un=-1;for(var qn=Array(ce+1);++Un<ce;)qn[Un]=$t[Un];return qn[ce]=Te(ei),Be(re,this,qn)}}function rp(re,ce){if(!(ce==="constructor"&&typeof re[ce]=="function")&&ce!="__proto__")return re[ce]}var ES=By(ys);function By(re){var ce=0,Te=0;return function(){var $t=Fn(),Un=s-($t-Te);if(Te=$t,Un>0){if(++ce>=i)return arguments[0]}else ce=0;return re.apply(void 0,arguments)}}function nP(re){if(re!=null){try{return Ge.call(re)}catch{}try{return re+""}catch{}}return""}function Wl(re,ce){return re===ce||re!==re&&ce!==ce}var uu=Is(function(){return arguments}())?Is:function(re){return lu(re)&&gt.call(re,"callee")&&!Ve.call(re,"callee")},ip=Array.isArray;function V_(re){return re!=null&&iP(re.length)&&!xS(re)}function rP(re){return lu(re)&&V_(re)}var sp=Lt||aP;function xS(re){if(!op(re))return!1;var ce=qr(re);return ce==h||ce==p||ce==l||ce==_}function iP(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=o}function op(re){var ce=typeof re;return re!=null&&(ce=="object"||ce=="function")}function lu(re){return re!=null&&typeof re=="object"}function cj(re){if(!lu(re)||qr(re)!=v)return!1;var ce=mt(re);if(ce===null)return!0;var Te=gt.call(ce,"constructor")&&ce.constructor;return typeof Te=="function"&&Te instanceof Te&&Ge.call(Te)==Et}var sP=ge?ct(ge):Ci;function zy(re){return ye(re,Uy(re))}function Uy(re){return V_(re)?Gt(re):Ys(re)}var oP=pe(function(re,ce,Te){gs(re,ce,Te)});function Vy(re){return function(){return re}}function ng(re){return re}function aP(){return!1}e.exports=oP})(O3,O3.exports);var PCt=O3.exports;const JK=Ju(PCt),HS="@REVISIT_COMMS",kCt={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function RCt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Rl(),r=xc(),i=eRe(),s=C.useRef(null),o=C.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Yf(),u=jm()[a],l=Vl(),c=C.useCallback((f,d)=>{var h,p;(p=(h=s.current)==null?void 0:h.contentWindow)==null||p.postMessage({error:!1,type:`${HS}/${f}`,iframeId:o,message:d},"*")},[s,o]);return C.useEffect(()=>{const f=d=>{const{data:h}=d;if(typeof h=="object"&&o===h.iframeId)switch(h.type){case`${HS}/WINDOW_READY`:e.parameters&&c("STUDY_DATA",e.parameters);break;case`${HS}/READY`:s.current&&(s.current.style.height=`${h.message.documentHeight}px`);break;case`${HS}/ANSWERS`:r(t(h.message));break;case`${HS}/PROVENANCE`:r(n(h.message));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[r,a,i,o,l,e,c,t,n]),R.jsx("div",{children:R.jsx("iframe",{ref:s,src:`${Nc}${e.path}?trialid=${u}&id=${o}`,style:kCt})})}const $Ct={maxWidth:"100%"};function NCt({currentConfig:e}){const t={...$Ct,...e.style};return R.jsx(p_,{mx:"auto",src:`${Nc}${e.path}`,style:t})}function DCt({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=C.useState(!1),[o,a]=C.useState(null),[u,l]=C.useState(null),[c,f]=C.useState(null);return i?R.jsxs(Bi,{children:[R.jsx(Kp,{data:e,onChange:d=>a(d),placeholder:"Select X Column"}),R.jsx(Kp,{data:e,onChange:d=>l(d),placeholder:"Select Y Column"}),R.jsx(Fr,{disabled:!o||!u,onClick:()=>{n(o,u),s(!1)},children:"Create plot"}),R.jsx(Kp,{data:t,onChange:d=>f(d),placeholder:"Select X Column"}),R.jsx(Fr,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):R.jsx(Bi,{children:R.jsx(dm,{variant:"light",size:150,onClick:()=>s(!0),children:R.jsx(lPe,{size:50})})})}const MCt=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:DCt},Symbol.toStringTag,{value:"Module"})),WRe=C.createContext(null),ZK=({id:e="waveform",children:t})=>j.createElement("div",{id:e},t),LCt=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],FCt=e=>e?LCt.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};function Es(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let DI=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const jhe={decode:function(e,t){return Es(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function GRe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(GRe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Bhe(e,t,n){const r=GRe(e,t||{});return n==null||n.appendChild(r),r}var jCt=Object.freeze({__proto__:null,createElement:Bhe,default:Bhe});const BCt={fetchBlob:function(e,t,n){return Es(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){Es(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>Es(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>Es(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let zCt=class extends DI{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const r=n instanceof Blob&&this.canPlayType(n.type)?URL.createObjectURL(n):t;this.media.src=r}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return Es(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},YRe=class KRe extends DI{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientY-i.top;return[s/i.width,o/i.height]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=E=>{if(E.preventDefault(),E.stopPropagation(),u&&Date.now()-m<a)return;const S=E.clientX,b=E.clientY,T=S-d,A=b-h;if(p||Math.abs(T)>s||Math.abs(A)>s){const I=t.getBoundingClientRect(),{left:k,top:$}=I;p||(r==null||r(d-k,h-$),p=!0),n(T,A,S-k,b-$),d=S,h=b}},y=E=>{if(p){const S=E.clientX,b=E.clientY,T=t.getBoundingClientRect(),{left:A,top:I}=T;i==null||i(S-A,b-I)}l()},v=E=>{E.relatedTarget&&E.relatedTarget!==document.documentElement||y(E)},_=E=>{p&&(E.stopPropagation(),E.preventDefault())},w=E=>{p&&E.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",_,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",_,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t;this.subscriptions.forEach(n=>n()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=window.devicePixelRatio||1,d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,_=0;for(let w=0;w<=a;w++){const E=Math.round(w*m);if(E>y){const T=Math.round(v*c*i),A=T+Math.round(_*c*i)||1;let I=c-T;n.barAlign==="top"?I=0:n.barAlign==="bottom"&&(I=l-A),r[g](y*(d+h),I,d,A,p),y=E,v=0,_=0}const S=Math.abs(s[w]||0),b=Math.abs(o[w]||0);S>v&&(v=S),b>_&&(_=b)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=window.devicePixelRatio||1,l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){return Es(this,void 0,void 0,function*(){const a=window.devicePixelRatio||1,u=r/a;let l=Math.min(KRe.MAX_CANVAS_WIDTH,this.scrollContainer.clientWidth);if(n.barWidth||n.barGap){const p=n.barWidth||.5,m=p+(n.barGap||p/2);l%m!=0&&(l=Math.floor(l/m)*m)}const c=p=>{const m=p*l,g=Math.min(u-m,l),y=t.map(v=>{const _=Math.floor(m/u*v.length),w=Math.floor((m+g)/u*v.length);return v.slice(_,w)});this.renderSingleCanvas(y,n,g,i,m,s,o)},f=Math.ceil(u/l);if(f===1)return void c(0);const d=this.scrollContainer.scrollLeft/u,h=Math.floor(d*f);c(h),c(h+1),yield Promise.all([Es(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h-1;m>=0;m--)yield p(),c(m)}),Es(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h+2;m<f;m++)yield p(),c(m)})])})}renderChannel(t,n,r,i){return Es(this,void 0,void 0,function*(){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),yield this.renderMultiCanvas(t,o,r,u,a,l)})}render(t){return Es(this,void 0,void 0,function*(){this.timeouts.forEach(a=>a()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=i>r;const s=this.options.fillParent&&!this.isScrollable,o=(s?r:i)*n;this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:t.numberOfChannels}).map((a,u)=>{var l;const c=Object.assign(Object.assign({},this.options),(l=this.options.splitChannels)===null||l===void 0?void 0:l[u]);return this.renderChannel([t.getChannelData(u)],c,o,u)}));else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),yield this.renderChannel(a,this.options,o,0)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return Es(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};YRe.MAX_CANVAS_WIDTH=4e3;class UCt extends DI{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class zhe extends DI{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Es(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Es(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return Es(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const VCt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let yV=class XRe extends zCt{static create(t){return new XRe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new zhe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},VCt,t),this.timer=new UCt;const r=n?void 0:this.getMediaElement();this.renderer=new YRe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return Es(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield BCt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=i||this.getDuration()||(yield new Promise(a=>{this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0})}));if(!t&&!n){const a=this.getMediaElement();a instanceof zhe&&(a.duration=o)}if(r)this.decodedData=jhe.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield jhe.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return Es(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return Es(this,void 0,void 0,function*(){try{return yield this.loadAudio("blob",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return Es(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Es(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};yV.BasePlugin=class extends DI{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},yV.dom=jCt;function HCt(e){return yV.create(e)}function Uhe(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const qCt=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var WCt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function QRe(e){var{container:t,plugins:n=[],onMount:r}=e,i=WCt(e,["container","plugins","onMount"]);const s=C.useRef([]),[o,a]=C.useState(null);return C.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(Uhe)),s.current=u;const l=HCt(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),C.useEffect(()=>{if(o){const u=n.map(Uhe),{disabled:l,enabled:c}=qCt(s.current,u);s.current=u,l.forEach(f=>{f.name&&(o==null||o.destroyPlugin(f.name))}),c.forEach(f=>{f.name&&(o==null||o.addPlugin(f).initPlugin(f.name))})}},[n]),o}function GCt(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var YCt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const JRe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=YCt(e,["children","plugins","onMount"]);const s=C.useMemo(()=>{let a={};return C.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!GCt(u))return;const{props:l,type:c}=u;if(c===ZK){const{id:f}=l;a=FCt(l),a=Object.assign(Object.assign({},a),{container:"#"+f})}}),a},[t]),o=QRe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return j.createElement(WRe.Provider,{value:o},t)};JRe.defaultProps={children:null,plugins:[]};function q9(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let ZRe=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},KCt=class extends ZRe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class XCt extends ZRe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const QCt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class eX extends KCt{constructor(t){var n,r,i,s;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,renderRecordedAudio:(s=t.renderRecordedAudio)===null||s===void 0||s})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new XCt,this.subscriptions.push(this.timer.on("tick",()=>{const o=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+o,this.emit("record-progress",this.duration)}))}static create(t){return new eX(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s);let a;const u=Math.floor((this.options.scrollingWaveformWindow||0)*n.sampleRate),l=()=>{var c;if(this.isWaveformPaused)return void(a=requestAnimationFrame(l));if(i.getFloatTimeDomainData(o),this.options.scrollingWaveform){const d=Math.min(u,this.dataWindow?this.dataWindow.length+s:s),h=new Float32Array(u);if(this.dataWindow){const p=Math.max(0,u-this.dataWindow.length);h.set(this.dataWindow.slice(-d+s),p)}h.set(o,u-s),this.dataWindow=h}else this.dataWindow=o;const f=this.options.scrollingWaveformWindow;this.wavesurfer&&((c=this.originalOptions)!==null&&c!==void 0||(this.originalOptions={cursorWidth:this.wavesurfer.options.cursorWidth,interact:this.wavesurfer.options.interact}),this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[this.dataWindow],f)),a=requestAnimationFrame(l)};return l(),{onDestroy:()=>{cancelAnimationFrame(a),r==null||r.disconnect(),n==null||n.close()},onEnd:()=>{this.isWaveformPaused=!0,cancelAnimationFrame(a),this.stopMic()}}}startMic(t){return q9(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return q9(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||QCt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return q9(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.options.cursorWidth=this.originalOptions.cursorWidth,this.wavesurfer.options.interact=this.originalOptions.interact,delete this.originalOptions)}}function e$e({width:e=70,height:t=50}){const n=C.useRef(null),r=C.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(eX.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return R.jsx(dt,{style:{width:`${e}px`,height:`${t}px`},children:R.jsx(JRe,{onMount:r,children:R.jsx(ZK,{id:"waveform"})})})}function Vhe({parameters:e,setAnswer:t}){return C.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),R.jsx(Ya,{style:{height:"70%",width:"100%"},children:R.jsxs(Bi,{children:[R.jsx(it,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),R.jsx(it,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),R.jsx(it,{ta:"center",weight:700,children:"If you are not comfortable or able to speak English during this study, please close it now."}),R.jsx(Ya,{children:R.jsx(e$e,{height:200,width:400})})]})})}const JCt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Vhe,default:Vhe},Symbol.toStringTag,{value:"Module"}));function Xp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ZCt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cx(e){let t,n,r;e.length!==2?(t=Xp,n=(a,u)=>Xp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Xp||e===ZCt?e:eAt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function eAt(){return 0}function t$e(e){return e===null?NaN:+e}function*tAt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const n$e=Cx(Xp),L0=n$e.right,nAt=n$e.left;Cx(t$e).center;function rAt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function iAt(e,t){const n=rAt(e,t);return n&&Math.sqrt(n)}function P3(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class qa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Hhe extends Map{constructor(t,n=s$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(vV(this,t))}has(t){return super.has(vV(this,t))}set(t,n){return super.set(r$e(this,t),n)}delete(t){return super.delete(i$e(this,t))}}class k3 extends Set{constructor(t,n=s$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(vV(this,t))}add(t){return super.add(r$e(this,t))}delete(t){return super.delete(i$e(this,t))}}function vV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function r$e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function i$e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function s$e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sAt(e,t){return Array.from(t,n=>e[n])}function oAt(e=Xp){if(e===Xp)return o$e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function o$e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const aAt=Math.sqrt(50),uAt=Math.sqrt(10),lAt=Math.sqrt(2);function R3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=aAt?10:s>=uAt?5:s>=lAt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?R3(e,t,n*2):[a,u,l]}function _V(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?R3(t,e,n):R3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function bV(e,t,n){return t=+t,e=+e,n=+n,R3(e,t,n)[2]}function F0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?bV(t,e,n):bV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function vc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function wV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function a$e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?o$e:oAt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));a$e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(qS(e,n,t),i(e[r],s)>0&&qS(e,n,r);o<a;){for(qS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?qS(e,n,a):(++a,qS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function qS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function EV(e,t,n){if(e=Float64Array.from(tAt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return wV(e);if(t>=1)return vc(e);var r,i=(r-1)*t,s=Math.floor(i),o=vc(a$e(e,s).subarray(0,s+1)),a=wV(e.subarray(s+1));return o+(a-o)*(i-s)}}function u$e(e,t,n=t$e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function l$e(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function $3(e,t){return EV(e,.5,t)}function*cAt(e){for(const t of e)yield*t}function c$e(e){return Array.from(cAt(e))}function Ou(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function XC(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function fAt(e,...t){e=new k3(e),t=t.map(dAt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function dAt(e){return e instanceof k3?e:new k3(e)}function hAt(...e){const t=new k3;for(const n of e)for(const r of n)t.add(r);return t}var pAt={value:()=>{}};function Q4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qR(n)}function qR(e){this._=e}function mAt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qR.prototype=Q4.prototype={constructor:qR,on:function(e,t){var n=this._,r=mAt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=gAt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=qhe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=qhe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qR(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function gAt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function qhe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=pAt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xV="http://www.w3.org/1999/xhtml";const Whe={svg:"http://www.w3.org/2000/svg",xhtml:xV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Whe.hasOwnProperty(t)?{space:Whe[t],local:e}:e}function yAt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xV&&t.documentElement.namespaceURI===xV?t.createElement(e):t.createElementNS(n,e)}}function vAt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function f$e(e){var t=J4(e);return(t.local?vAt:yAt)(t)}function _At(){}function tX(e){return e==null?_At:function(){return this.querySelector(e)}}function bAt(e){typeof e!="function"&&(e=tX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xa(r,this._parents)}function d$e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wAt(){return[]}function h$e(e){return e==null?wAt:function(){return this.querySelectorAll(e)}}function EAt(e){return function(){return d$e(e.apply(this,arguments))}}function xAt(e){typeof e=="function"?e=EAt(e):e=h$e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Xa(r,i)}function p$e(e){return function(){return this.matches(e)}}function m$e(e){return function(t){return t.matches(e)}}var SAt=Array.prototype.find;function TAt(e){return function(){return SAt.call(this.children,e)}}function CAt(){return this.firstElementChild}function AAt(e){return this.select(e==null?CAt:TAt(typeof e=="function"?e:m$e(e)))}var IAt=Array.prototype.filter;function OAt(){return Array.from(this.children)}function PAt(e){return function(){return IAt.call(this.children,e)}}function kAt(e){return this.selectAll(e==null?OAt:PAt(typeof e=="function"?e:m$e(e)))}function RAt(e){typeof e!="function"&&(e=p$e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Xa(r,this._parents)}function g$e(e){return new Array(e.length)}function $At(){return new Xa(this._enter||this._groups.map(g$e),this._parents)}function N3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}N3.prototype={constructor:N3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function NAt(e){return function(){return e}}function DAt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new N3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function MAt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new N3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function LAt(e){return e.__data__}function FAt(e,t){if(!arguments.length)return Array.from(this,LAt);var n=t?MAt:DAt,r=this._parents,i=this._groups;typeof e!="function"&&(e=NAt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=jAt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,E;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);w._next=E||null}}return o=new Xa(o,r),o._enter=a,o._exit=u,o}function jAt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BAt(){return new Xa(this._exit||this._groups.map(g$e),this._parents)}function zAt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function UAt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Xa(a,this._parents)}function VAt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function HAt(e){e||(e=qAt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Xa(i,this._parents).order()}function qAt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function WAt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function GAt(){return Array.from(this)}function YAt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function KAt(){let e=0;for(const t of this)++e;return e}function XAt(){return!this.node()}function QAt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function JAt(e){return function(){this.removeAttribute(e)}}function ZAt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eIt(e,t){return function(){this.setAttribute(e,t)}}function tIt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nIt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rIt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function iIt(e,t){var n=J4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ZAt:JAt:typeof t=="function"?n.local?rIt:nIt:n.local?tIt:eIt)(n,t))}function y$e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sIt(e){return function(){this.style.removeProperty(e)}}function oIt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function aIt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function uIt(e,t,n){return arguments.length>1?this.each((t==null?sIt:typeof t=="function"?aIt:oIt)(e,t,n??"")):aE(this.node(),e)}function aE(e,t){return e.style.getPropertyValue(t)||y$e(e).getComputedStyle(e,null).getPropertyValue(t)}function lIt(e){return function(){delete this[e]}}function cIt(e,t){return function(){this[e]=t}}function fIt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function dIt(e,t){return arguments.length>1?this.each((t==null?lIt:typeof t=="function"?fIt:cIt)(e,t)):this.node()[e]}function v$e(e){return e.trim().split(/^|\s+/)}function nX(e){return e.classList||new _$e(e)}function _$e(e){this._node=e,this._names=v$e(e.getAttribute("class")||"")}_$e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function b$e(e,t){for(var n=nX(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function w$e(e,t){for(var n=nX(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function hIt(e){return function(){b$e(this,e)}}function pIt(e){return function(){w$e(this,e)}}function mIt(e,t){return function(){(t.apply(this,arguments)?b$e:w$e)(this,e)}}function gIt(e,t){var n=v$e(e+"");if(arguments.length<2){for(var r=nX(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?mIt:t?hIt:pIt)(n,t))}function yIt(){this.textContent=""}function vIt(e){return function(){this.textContent=e}}function _It(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bIt(e){return arguments.length?this.each(e==null?yIt:(typeof e=="function"?_It:vIt)(e)):this.node().textContent}function wIt(){this.innerHTML=""}function EIt(e){return function(){this.innerHTML=e}}function xIt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function SIt(e){return arguments.length?this.each(e==null?wIt:(typeof e=="function"?xIt:EIt)(e)):this.node().innerHTML}function TIt(){this.nextSibling&&this.parentNode.appendChild(this)}function CIt(){return this.each(TIt)}function AIt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function IIt(){return this.each(AIt)}function OIt(e){var t=typeof e=="function"?e:f$e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function PIt(){return null}function kIt(e,t){var n=typeof e=="function"?e:f$e(e),r=t==null?PIt:typeof t=="function"?t:tX(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function RIt(){var e=this.parentNode;e&&e.removeChild(this)}function $It(){return this.each(RIt)}function NIt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function DIt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function MIt(e){return this.select(e?DIt:NIt)}function LIt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FIt(e){return function(t){e.call(this,t,this.__data__)}}function jIt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function BIt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function zIt(e,t,n){return function(){var r=this.__on,i,s=FIt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function UIt(e,t,n){var r=jIt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?zIt:BIt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function E$e(e,t,n){var r=y$e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function VIt(e,t){return function(){return E$e(this,e,t)}}function HIt(e,t){return function(){return E$e(this,e,t.apply(this,arguments))}}function qIt(e,t){return this.each((typeof t=="function"?HIt:VIt)(e,t))}function*WIt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var rX=[null];function Xa(e,t){this._groups=e,this._parents=t}function MI(){return new Xa([[document.documentElement]],rX)}function GIt(){return this}Xa.prototype=MI.prototype={constructor:Xa,select:bAt,selectAll:xAt,selectChild:AAt,selectChildren:kAt,filter:RAt,data:FAt,enter:$At,exit:BAt,join:zAt,merge:UAt,selection:GIt,order:VAt,sort:HAt,call:WAt,nodes:GAt,node:YAt,size:KAt,empty:XAt,each:QAt,attr:iIt,style:uIt,property:dIt,classed:gIt,text:bIt,html:SIt,raise:CIt,lower:IIt,append:OIt,insert:kIt,remove:$It,clone:MIt,datum:LIt,on:UIt,dispatch:qIt,[Symbol.iterator]:WIt};function So(e){return typeof e=="string"?new Xa([[document.querySelector(e)]],[document.documentElement]):new Xa([[e]],rX)}function YIt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ghe(e,t){if(e=YIt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function KIt(e){return typeof e=="string"?new Xa([document.querySelectorAll(e)],[document.documentElement]):new Xa([d$e(e)],rX)}const SV={capture:!0,passive:!1};function TV(e){e.preventDefault(),e.stopImmediatePropagation()}function XIt(e){var t=e.document.documentElement,n=So(e).on("dragstart.drag",TV,SV);"onselectstart"in t?n.on("selectstart.drag",TV,SV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function QIt(e,t){var n=e.document.documentElement,r=So(e).on("dragstart.drag",null);t&&(r.on("click.drag",TV,SV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ax(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function LI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ey(){}var A1=.7,uE=1/A1,Ew="\\s*([+-]?\\d+)\\s*",QC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",JIt=/^#([0-9a-f]{3,8})$/,ZIt=new RegExp(`^rgb\\(${Ew},${Ew},${Ew}\\)$`),eOt=new RegExp(`^rgb\\(${rh},${rh},${rh}\\)$`),tOt=new RegExp(`^rgba\\(${Ew},${Ew},${Ew},${QC}\\)$`),nOt=new RegExp(`^rgba\\(${rh},${rh},${rh},${QC}\\)$`),rOt=new RegExp(`^hsl\\(${QC},${rh},${rh}\\)$`),iOt=new RegExp(`^hsla\\(${QC},${rh},${rh},${QC}\\)$`),Yhe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ax(Ey,I1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Khe,formatHex:Khe,formatHex8:sOt,formatHsl:oOt,formatRgb:Xhe,toString:Xhe});function Khe(){return this.rgb().formatHex()}function sOt(){return this.rgb().formatHex8()}function oOt(){return x$e(this).formatHsl()}function Xhe(){return this.rgb().formatRgb()}function I1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=JIt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qhe(t):n===3?new io(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nk(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nk(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ZIt.exec(e))?new io(t[1],t[2],t[3],1):(t=eOt.exec(e))?new io(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=tOt.exec(e))?nk(t[1],t[2],t[3],t[4]):(t=nOt.exec(e))?nk(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=rOt.exec(e))?epe(t[1],t[2]/100,t[3]/100,1):(t=iOt.exec(e))?epe(t[1],t[2]/100,t[3]/100,t[4]):Yhe.hasOwnProperty(e)?Qhe(Yhe[e]):e==="transparent"?new io(NaN,NaN,NaN,0):null}function Qhe(e){return new io(e>>16&255,e>>8&255,e&255,1)}function nk(e,t,n,r){return r<=0&&(e=t=n=NaN),new io(e,t,n,r)}function iX(e){return e instanceof Ey||(e=I1(e)),e?(e=e.rgb(),new io(e.r,e.g,e.b,e.opacity)):new io}function j0(e,t,n,r){return arguments.length===1?iX(e):new io(e,t,n,r??1)}function io(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ax(io,j0,LI(Ey,{brighter(e){return e=e==null?uE:Math.pow(uE,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?A1:Math.pow(A1,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new io(a1(this.r),a1(this.g),a1(this.b),D3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jhe,formatHex:Jhe,formatHex8:aOt,formatRgb:Zhe,toString:Zhe}));function Jhe(){return`#${Bv(this.r)}${Bv(this.g)}${Bv(this.b)}`}function aOt(){return`#${Bv(this.r)}${Bv(this.g)}${Bv(this.b)}${Bv((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zhe(){const e=D3(this.opacity);return`${e===1?"rgb(":"rgba("}${a1(this.r)}, ${a1(this.g)}, ${a1(this.b)}${e===1?")":`, ${e})`}`}function D3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function a1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bv(e){return e=a1(e),(e<16?"0":"")+e.toString(16)}function epe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new df(e,t,n,r)}function x$e(e){if(e instanceof df)return new df(e.h,e.s,e.l,e.opacity);if(e instanceof Ey||(e=I1(e)),!e)return new df;if(e instanceof df)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new df(o,a,u,e.opacity)}function JC(e,t,n,r){return arguments.length===1?x$e(e):new df(e,t,n,r??1)}function df(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ax(df,JC,LI(Ey,{brighter(e){return e=e==null?uE:Math.pow(uE,e),new df(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?A1:Math.pow(A1,e),new df(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new io(W9(e>=240?e-240:e+120,i,r),W9(e,i,r),W9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new df(tpe(this.h),rk(this.s),rk(this.l),D3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=D3(this.opacity);return`${e===1?"hsl(":"hsla("}${tpe(this.h)}, ${rk(this.s)*100}%, ${rk(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tpe(e){return e=(e||0)%360,e<0?e+360:e}function rk(e){return Math.max(0,Math.min(1,e||0))}function W9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const S$e=Math.PI/180,T$e=180/Math.PI,M3=18,C$e=.96422,A$e=1,I$e=.82521,O$e=4/29,xw=6/29,P$e=3*xw*xw,uOt=xw*xw*xw;function k$e(e){if(e instanceof ih)return new ih(e.l,e.a,e.b,e.opacity);if(e instanceof Mp)return R$e(e);e instanceof io||(e=iX(e));var t=X9(e.r),n=X9(e.g),r=X9(e.b),i=G9((.2225045*t+.7168786*n+.0606169*r)/A$e),s,o;return t===n&&n===r?s=o=i:(s=G9((.4360747*t+.3850649*n+.1430804*r)/C$e),o=G9((.0139322*t+.0971045*n+.7141733*r)/I$e)),new ih(116*i-16,500*(s-i),200*(i-o),e.opacity)}function L3(e,t,n,r){return arguments.length===1?k$e(e):new ih(e,t,n,r??1)}function ih(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ax(ih,L3,LI(Ey,{brighter(e){return new ih(this.l+M3*(e??1),this.a,this.b,this.opacity)},darker(e){return new ih(this.l-M3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=C$e*Y9(t),e=A$e*Y9(e),n=I$e*Y9(n),new io(K9(3.1338561*t-1.6168667*e-.4906146*n),K9(-.9787684*t+1.9161415*e+.033454*n),K9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function G9(e){return e>uOt?Math.pow(e,1/3):e/P$e+O$e}function Y9(e){return e>xw?e*e*e:P$e*(e-O$e)}function K9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function X9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lOt(e){if(e instanceof Mp)return new Mp(e.h,e.c,e.l,e.opacity);if(e instanceof ih||(e=k$e(e)),e.a===0&&e.b===0)return new Mp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*T$e;return new Mp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function F3(e,t,n,r){return arguments.length===1?lOt(e):new Mp(e,t,n,r??1)}function Mp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function R$e(e){if(isNaN(e.h))return new ih(e.l,0,0,e.opacity);var t=e.h*S$e;return new ih(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ax(Mp,F3,LI(Ey,{brighter(e){return new Mp(this.h,this.c,this.l+M3*(e??1),this.opacity)},darker(e){return new Mp(this.h,this.c,this.l-M3*(e??1),this.opacity)},rgb(){return R$e(this).rgb()}}));var $$e=-.14861,sX=1.78277,oX=-.29227,Z4=-.90649,ZC=1.97294,npe=ZC*Z4,rpe=ZC*sX,ipe=sX*oX-Z4*$$e;function cOt(e){if(e instanceof u1)return new u1(e.h,e.s,e.l,e.opacity);e instanceof io||(e=iX(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ipe*r+npe*t-rpe*n)/(ipe+npe-rpe),s=r-i,o=(ZC*(n-i)-oX*s)/Z4,a=Math.sqrt(o*o+s*s)/(ZC*i*(1-i)),u=a?Math.atan2(o,s)*T$e-120:NaN;return new u1(u<0?u+360:u,a,i,e.opacity)}function CV(e,t,n,r){return arguments.length===1?cOt(e):new u1(e,t,n,r??1)}function u1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ax(u1,CV,LI(Ey,{brighter(e){return e=e==null?uE:Math.pow(uE,e),new u1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?A1:Math.pow(A1,e),new u1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*S$e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new io(255*(t+n*($$e*r+sX*i)),255*(t+n*(oX*r+Z4*i)),255*(t+n*(ZC*r)),this.opacity)}}));function N$e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function D$e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return N$e((n-r/t)*t,o,i,s,a)}}function M$e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return N$e((n-r/t)*t,i,s,o,a)}}const e5=e=>()=>e;function L$e(e,t){return function(n){return e+n*t}}function fOt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function t5(e,t){var n=t-e;return n?L$e(e,n>180||n<-180?n-360*Math.round(n/360):n):e5(isNaN(e)?t:e)}function dOt(e){return(e=+e)==1?so:function(t,n){return n-t?fOt(t,n,e):e5(isNaN(t)?n:t)}}function so(e,t){var n=t-e;return n?L$e(e,n):e5(isNaN(e)?t:e)}const eA=function e(t){var n=dOt(t);function r(i,s){var o=n((i=j0(i)).r,(s=j0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=so(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function F$e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=j0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var hOt=F$e(D$e),pOt=F$e(M$e);function aX(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function j$e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mOt(e,t){return(j$e(t)?aX:B$e)(e,t)}function B$e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Bm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function z$e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function U$e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Bm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var AV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q9=new RegExp(AV.source,"g");function gOt(e){return function(){return e}}function yOt(e){return function(t){return e(t)+""}}function uX(e,t){var n=AV.lastIndex=Q9.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=AV.exec(e))&&(i=Q9.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:oc(r,i)})),n=Q9.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?yOt(u[0].x):gOt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Bm(e,t){var n=typeof t,r;return t==null||n==="boolean"?e5(t):(n==="number"?oc:n==="string"?(r=I1(t))?(t=r,eA):uX:t instanceof I1?eA:t instanceof Date?z$e:j$e(t)?aX:Array.isArray(t)?B$e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?U$e:oc)(e,t)}function vOt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function _Ot(e,t){var n=t5(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function FI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var spe=180/Math.PI,IV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V$e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*spe,skewX:Math.atan(u)*spe,scaleX:o,scaleY:a}}var ik;function bOt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?IV:V$e(t.a,t.b,t.c,t.d,t.e,t.f)}function wOt(e){return e==null||(ik||(ik=document.createElementNS("http://www.w3.org/2000/svg","g")),ik.setAttribute("transform",e),!(e=ik.transform.baseVal.consolidate()))?IV:(e=e.matrix,V$e(e.a,e.b,e.c,e.d,e.e,e.f))}function H$e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:oc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:oc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var q$e=H$e(bOt,"px, ","px)","deg)"),W$e=H$e(wOt,", ",")",")"),EOt=1e-12;function ope(e){return((e=Math.exp(e))+1/e)/2}function xOt(e){return((e=Math.exp(e))-1/e)/2}function SOt(e){return((e=Math.exp(2*e))-1)/(e+1)}const TOt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<EOt)y=Math.log(d/l)/t,g=function(b){return[a+b*h,u+b*p,l*Math.exp(t*b*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(_*_+1)-_),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(b){var T=b*y,A=ope(E),I=l/(n*v)*(A*SOt(t*T+E)-xOt(E));return[a+I*h,u+I*p,l*A/ope(t*T+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function G$e(e){return function(t,n){var r=e((t=JC(t)).h,(n=JC(n)).h),i=so(t.s,n.s),s=so(t.l,n.l),o=so(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const COt=G$e(t5);var AOt=G$e(so);function IOt(e,t){var n=so((e=L3(e)).l,(t=L3(t)).l),r=so(e.a,t.a),i=so(e.b,t.b),s=so(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function Y$e(e){return function(t,n){var r=e((t=F3(t)).h,(n=F3(n)).h),i=so(t.c,n.c),s=so(t.l,n.l),o=so(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const OOt=Y$e(t5);var POt=Y$e(so);function K$e(e){return function t(n){n=+n;function r(i,s){var o=e((i=CV(i)).h,(s=CV(s)).h),a=so(i.s,s.s),u=so(i.l,s.l),l=so(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const kOt=K$e(t5);var ROt=K$e(so);function lX(e,t){t===void 0&&(t=e,e=Bm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function $Ot(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const NOt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Bm,interpolateArray:mOt,interpolateBasis:D$e,interpolateBasisClosed:M$e,interpolateCubehelix:kOt,interpolateCubehelixLong:ROt,interpolateDate:z$e,interpolateDiscrete:vOt,interpolateHcl:OOt,interpolateHclLong:POt,interpolateHsl:COt,interpolateHslLong:AOt,interpolateHue:_Ot,interpolateLab:IOt,interpolateNumber:oc,interpolateNumberArray:aX,interpolateObject:U$e,interpolateRgb:eA,interpolateRgbBasis:hOt,interpolateRgbBasisClosed:pOt,interpolateRound:FI,interpolateString:uX,interpolateTransformCss:q$e,interpolateTransformSvg:W$e,interpolateZoom:TOt,piecewise:lX,quantize:$Ot},Symbol.toStringTag,{value:"Module"}));var lE=0,FT=0,WS=0,X$e=1e3,j3,jT,B3=0,O1=0,n5=0,tA=typeof performance=="object"&&performance.now?performance:Date,Q$e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function r5(){return O1||(Q$e(DOt),O1=tA.now()+n5)}function DOt(){O1=0}function nA(){this._call=this._time=this._next=null}nA.prototype=cX.prototype={constructor:nA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?r5():+n)+(t==null?0:+t),!this._next&&jT!==this&&(jT?jT._next=this:j3=this,jT=this),this._call=e,this._time=n,OV()},stop:function(){this._call&&(this._call=null,this._time=1/0,OV())}};function cX(e,t,n){var r=new nA;return r.restart(e,t,n),r}function MOt(){r5(),++lE;for(var e=j3,t;e;)(t=O1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--lE}function ape(){O1=(B3=tA.now())+n5,lE=FT=0;try{MOt()}finally{lE=0,FOt(),O1=0}}function LOt(){var e=tA.now(),t=e-B3;t>X$e&&(n5-=t,B3=e)}function FOt(){for(var e,t=j3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:j3=n);jT=e,OV(r)}function OV(e){if(!lE){FT&&(FT=clearTimeout(FT));var t=e-O1;t>24?(e<1/0&&(FT=setTimeout(ape,e-tA.now()-n5)),WS&&(WS=clearInterval(WS))):(WS||(B3=tA.now(),WS=setInterval(LOt,X$e)),lE=1,Q$e(ape))}}function upe(e,t,n){var r=new nA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function jOt(e,t,n){var r=new nA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?r5():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var BOt=Q4("start","end","cancel","interrupt"),zOt=[],J$e=0,lpe=1,PV=2,WR=3,cpe=4,kV=5,GR=6;function i5(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;UOt(e,n,{name:t,index:r,group:i,on:BOt,tween:zOt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:J$e})}function fX(e,t){var n=Kf(e,t);if(n.state>J$e)throw new Error("too late; already scheduled");return n}function zh(e,t){var n=Kf(e,t);if(n.state>WR)throw new Error("too late; already running");return n}function Kf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function UOt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=cX(s,0,n.time);function s(l){n.state=lpe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==lpe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===WR)return upe(o);h.state===cpe?(h.state=GR,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=GR,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(upe(function(){n.state===WR&&(n.state=cpe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=PV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===PV){for(n.state=WR,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=kV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===kV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=GR,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function RV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>PV&&r.state<kV,r.state=GR,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function VOt(e){return this.each(function(){RV(this,e)})}function HOt(e,t){var n,r;return function(){var i=zh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function qOt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=zh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function WOt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Kf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?HOt:qOt)(n,e,t))}function dX(e,t,n){var r=e._id;return e.each(function(){var i=zh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Kf(i,r).value[t]}}function Z$e(e,t){var n;return(typeof t=="number"?oc:t instanceof I1?eA:(n=I1(t))?(t=n,eA):uX)(e,t)}function GOt(e){return function(){this.removeAttribute(e)}}function YOt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function KOt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function XOt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function QOt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function JOt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function ZOt(e,t){var n=J4(e),r=n==="transform"?W$e:Z$e;return this.attrTween(e,typeof t=="function"?(n.local?JOt:QOt)(n,r,dX(this,"attr."+e,t)):t==null?(n.local?YOt:GOt)(n):(n.local?XOt:KOt)(n,r,t))}function ePt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tPt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nPt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&tPt(e,s)),n}return i._value=t,i}function rPt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ePt(e,s)),n}return i._value=t,i}function iPt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=J4(e);return this.tween(n,(r.local?nPt:rPt)(r,t))}function sPt(e,t){return function(){fX(this,e).delay=+t.apply(this,arguments)}}function oPt(e,t){return t=+t,function(){fX(this,e).delay=t}}function aPt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sPt:oPt)(t,e)):Kf(this.node(),t).delay}function uPt(e,t){return function(){zh(this,e).duration=+t.apply(this,arguments)}}function lPt(e,t){return t=+t,function(){zh(this,e).duration=t}}function cPt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?uPt:lPt)(t,e)):Kf(this.node(),t).duration}function fPt(e,t){if(typeof t!="function")throw new Error;return function(){zh(this,e).ease=t}}function dPt(e){var t=this._id;return arguments.length?this.each(fPt(t,e)):Kf(this.node(),t).ease}function hPt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;zh(this,e).ease=n}}function pPt(e){if(typeof e!="function")throw new Error;return this.each(hPt(this._id,e))}function mPt(e){typeof e!="function"&&(e=p$e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new gm(r,this._parents,this._name,this._id)}function gPt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new gm(o,this._parents,this._name,this._id)}function yPt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function vPt(e,t,n){var r,i,s=yPt(t)?fX:zh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function _Pt(e,t){var n=this._id;return arguments.length<2?Kf(this.node(),n).on.on(e):this.each(vPt(n,e,t))}function bPt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wPt(){return this.on("end.remove",bPt(this._id))}function EPt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tX(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,i5(l[d],t,n,d,l,Kf(c,n)));return new gm(s,this._parents,t,n)}function xPt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=h$e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Kf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&i5(h,t,n,m,d,p);s.push(d),o.push(c)}return new gm(s,o,t,n)}var SPt=MI.prototype.constructor;function TPt(){return new SPt(this._groups,this._parents)}function CPt(e,t){var n,r,i;return function(){var s=aE(this,e),o=(this.style.removeProperty(e),aE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function eNe(e){return function(){this.style.removeProperty(e)}}function APt(e,t,n){var r,i=n+"",s;return function(){var o=aE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function IPt(e,t,n){var r,i,s;return function(){var o=aE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),aE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function OPt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=zh(this,e),l=u.on,c=u.value[s]==null?a||(a=eNe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function PPt(e,t,n){var r=(e+="")=="transform"?q$e:Z$e;return t==null?this.styleTween(e,CPt(e,r)).on("end.style."+e,eNe(e)):typeof t=="function"?this.styleTween(e,IPt(e,r,dX(this,"style."+e,t))).each(OPt(this._id,e)):this.styleTween(e,APt(e,r,t),n).on("end.style."+e,null)}function kPt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function RPt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&kPt(e,o,n)),r}return s._value=t,s}function $Pt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,RPt(e,t,n??""))}function NPt(e){return function(){this.textContent=e}}function DPt(e){return function(){var t=e(this);this.textContent=t??""}}function MPt(e){return this.tween("text",typeof e=="function"?DPt(dX(this,"text",e)):NPt(e==null?"":e+""))}function LPt(e){return function(t){this.textContent=e.call(this,t)}}function FPt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&LPt(i)),t}return r._value=e,r}function jPt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,FPt(e))}function BPt(){for(var e=this._name,t=this._id,n=tNe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Kf(u,t);i5(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new gm(r,this._parents,e,n)}function zPt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=zh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var UPt=0;function gm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tNe(){return++UPt}var up=MI.prototype;gm.prototype={constructor:gm,select:EPt,selectAll:xPt,selectChild:up.selectChild,selectChildren:up.selectChildren,filter:mPt,merge:gPt,selection:TPt,transition:BPt,call:up.call,nodes:up.nodes,node:up.node,size:up.size,empty:up.empty,each:up.each,on:_Pt,attr:ZOt,attrTween:iPt,style:PPt,styleTween:$Pt,text:MPt,textTween:jPt,remove:wPt,tween:WOt,delay:aPt,duration:cPt,ease:dPt,easeVarying:pPt,end:zPt,[Symbol.iterator]:up[Symbol.iterator]};function VPt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var HPt={time:null,delay:0,duration:250,ease:VPt};function qPt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function WPt(e){var t,n;e instanceof gm?(t=e._id,e=e._name):(t=tNe(),(n=HPt).time=r5(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&i5(u,e,t,l,o,n||qPt(u,t));return new gm(r,this._parents,e,t)}MI.prototype.interrupt=VOt;MI.prototype.transition=WPt;const J9=e=>()=>e;function GPt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function YPt(e){e.stopImmediatePropagation()}function Z9(e){e.preventDefault(),e.stopImmediatePropagation()}var fpe={name:"drag"},eB={name:"space"},eb={name:"handle"},tb={name:"center"};const{abs:dpe,max:Xo,min:Qo}=Math;function hpe(e){return[+e[0],+e[1]]}function $V(e){return[hpe(e[0]),hpe(e[1])]}var YR={name:"x",handles:["w","e"].map(rA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},KR={name:"y",handles:["n","s"].map(rA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},KPt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(rA),input:function(e){return e==null?null:$V(e)},output:function(e){return e}},lp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ppe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},mpe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},XPt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},QPt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function rA(e){return{type:e}}function JPt(e){return!e.ctrlKey&&!e.button}function ZPt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function ekt(){return navigator.maxTouchPoints||"ontouchstart"in this}function tB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function tkt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function nkt(){return hX(YR)}function rkt(){return hX(KR)}function ikt(){return hX(KPt)}function hX(e){var t=ZPt,n=JPt,r=ekt,i=!0,s=Q4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([rA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",lp.overlay).merge(y).each(function(){var _=tB(this).extent;So(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([rA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",lp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return lp[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,E=c(_,arguments),S=w.selection,b=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=Bm(S,b);function A(I){w.selection=I===1&&b===null?null:T(I),l.call(_),E.brush()}return S!==null&&b!==null?A:A(1)}):g.each(function(){var _=this,w=arguments,E=_.__brush,S=e.input(typeof y=="function"?y.apply(_,w):y,E.extent),b=c(_,w).beforestart();RV(_),E.selection=S===null?null:S,l.call(_),b.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=So(this),y=tB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=So(this.that).datum();s.call(g,this.that,new GPt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?fpe:i&&g.altKey?tb:eb,w=e===KR?null:XPt[v],E=e===YR?null:QPt[v],S=tB(y),b=S.extent,T=S.selection,A=b[0][0],I,k,$=b[0][1],P,N,F=b[1][0],z,W,V=b[1][1],G,M,H=0,Y=0,L,B=w&&E&&i&&g.shiftKey,q,Z,ue=Array.from(g.touches||[g],Re=>{const Ye=Re.identifier;return Re=Ghe(Re,y),Re.point0=Re.slice(),Re.identifier=Ye,Re});RV(y);var he=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(L=!0);const Re=[ue[0],ue[1]||ue[0]];S.selection=T=[[I=e===KR?A:Qo(Re[0][0],Re[1][0]),P=e===YR?$:Qo(Re[0][1],Re[1][1])],[z=e===KR?F:Xo(Re[0][0],Re[1][0]),G=e===YR?V:Xo(Re[0][1],Re[1][1])]],ue.length>1&&Be(g)}else I=T[0][0],P=T[0][1],z=T[1][0],G=T[1][1];k=I,N=P,W=z,M=G;var fe=So(y).attr("pointer-events","none"),me=fe.selectAll(".overlay").attr("cursor",lp[v]);if(g.touches)he.moved=ge,he.ended=Me;else{var _e=So(g.view).on("mousemove.brush",ge,!0).on("mouseup.brush",Me,!0);i&&_e.on("keydown.brush",ct,!0).on("keyup.brush",Oe,!0),XIt(g.view)}l.call(y),he.start(g,_.name);function ge(Re){for(const Ye of Re.changedTouches||[Re])for(const Ut of ue)Ut.identifier===Ye.identifier&&(Ut.cur=Ghe(Ye,y));if(B&&!q&&!Z&&ue.length===1){const Ye=ue[0];dpe(Ye.cur[0]-Ye[0])>dpe(Ye.cur[1]-Ye[1])?Z=!0:q=!0}for(const Ye of ue)Ye.cur&&(Ye[0]=Ye.cur[0],Ye[1]=Ye.cur[1]);L=!0,Z9(Re),Be(Re)}function Be(Re){const Ye=ue[0],Ut=Ye.point0;var Ft;switch(H=Ye[0]-Ut[0],Y=Ye[1]-Ut[1],_){case eB:case fpe:{w&&(H=Xo(A-I,Qo(F-z,H)),k=I+H,W=z+H),E&&(Y=Xo($-P,Qo(V-G,Y)),N=P+Y,M=G+Y);break}case eb:{ue[1]?(w&&(k=Xo(A,Qo(F,ue[0][0])),W=Xo(A,Qo(F,ue[1][0])),w=1),E&&(N=Xo($,Qo(V,ue[0][1])),M=Xo($,Qo(V,ue[1][1])),E=1)):(w<0?(H=Xo(A-I,Qo(F-I,H)),k=I+H,W=z):w>0&&(H=Xo(A-z,Qo(F-z,H)),k=I,W=z+H),E<0?(Y=Xo($-P,Qo(V-P,Y)),N=P+Y,M=G):E>0&&(Y=Xo($-G,Qo(V-G,Y)),N=P,M=G+Y));break}case tb:{w&&(k=Xo(A,Qo(F,I-H*w)),W=Xo(A,Qo(F,z+H*w))),E&&(N=Xo($,Qo(V,P-Y*E)),M=Xo($,Qo(V,G+Y*E)));break}}W<k&&(w*=-1,Ft=I,I=z,z=Ft,Ft=k,k=W,W=Ft,v in ppe&&me.attr("cursor",lp[v=ppe[v]])),M<N&&(E*=-1,Ft=P,P=G,G=Ft,Ft=N,N=M,M=Ft,v in mpe&&me.attr("cursor",lp[v=mpe[v]])),S.selection&&(T=S.selection),q&&(k=T[0][0],W=T[1][0]),Z&&(N=T[0][1],M=T[1][1]),(T[0][0]!==k||T[0][1]!==N||T[1][0]!==W||T[1][1]!==M)&&(S.selection=[[k,N],[W,M]],l.call(y),he.brush(Re,_.name))}function Me(Re){if(YPt(Re),Re.touches){if(Re.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else QIt(Re.view,L),_e.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);fe.attr("pointer-events","all"),me.attr("cursor",lp.overlay),S.selection&&(T=S.selection),tkt(T)&&(S.selection=null,l.call(y)),he.end(Re,_.name)}function ct(Re){switch(Re.keyCode){case 16:{B=w&&E;break}case 18:{_===eb&&(w&&(z=W-H*w,I=k+H*w),E&&(G=M-Y*E,P=N+Y*E),_=tb,Be(Re));break}case 32:{(_===eb||_===tb)&&(w<0?z=W-H:w>0&&(I=k-H),E<0?G=M-Y:E>0&&(P=N-Y),_=eB,me.attr("cursor",lp.selection),Be(Re));break}default:return}Z9(Re)}function Oe(Re){switch(Re.keyCode){case 16:{B&&(q=Z=B=!1,Be(Re));break}case 18:{_===tb&&(w<0?z=W:w>0&&(I=k),E<0?G=M:E>0&&(P=N),_=eb,Be(Re));break}case 32:{_===eB&&(Re.altKey?(w&&(z=W-H*w,I=k+H*w),E&&(G=M-Y*E,P=N+Y*E),_=tb):(w<0?z=W:w>0&&(I=k),E<0?G=M:E>0&&(P=N),_=eb),me.attr("cursor",lp[v]),Be(Re));break}default:return}Z9(Re)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=$V(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:J9($V(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:J9(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:J9(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const NV=Math.PI,DV=2*NV,cv=1e-6,skt=DV-cv;function nNe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function okt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nNe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let pX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nNe:okt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>cv)if(!(Math.abs(f*u-l*c)>cv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((NV-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,E=_/y;Math.abs(w-1)>cv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>cv||Math.abs(this._y1-c)>cv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%DV+DV),d>skt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>cv&&this._append`A${r},${r},0,${+(d>=NV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function s5(){return new pX}s5.prototype=pX.prototype;const Qp=11102230246251565e-32,Jo=134217729,akt=(3+8*Qp)*Qp;function nB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function ukt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function jI(e){return new Float64Array(e)}const lkt=(3+16*Qp)*Qp,ckt=(2+12*Qp)*Qp,fkt=(9+64*Qp)*Qp*Qp,nb=jI(4),gpe=jI(8),ype=jI(12),vpe=jI(16),Pa=jI(4);function dkt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,E,S,b,T;const A=e-i,I=n-i,k=t-s,$=r-s;w=A*$,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*$,m=d-(d-$),g=$-m,E=p*g-(w-h*m-p*m-h*g),S=k*I,d=Jo*k,h=d-(d-k),p=k-h,d=Jo*I,m=d-(d-I),g=I-m,b=p*g-(S-h*m-p*m-h*g),y=E-b,f=E-y,nb[0]=E-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,nb[1]=_-(y+f)+(f-S),T=v+y,f=T-v,nb[2]=v-(T-f)+(y-f),nb[3]=T;let P=ukt(4,nb),N=ckt*o;if(P>=N||-P>=N||(f=e-A,a=e-(A+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-k,u=t-(k+f)+(f-s),f=r-$,c=r-($+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(N=fkt*o+akt*Math.abs(P),P+=A*c+$*a-(k*l+I*u),P>=N||-P>=N))return P;w=a*$,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*$,m=d-(d-$),g=$-m,E=p*g-(w-h*m-p*m-h*g),S=u*I,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*I,m=d-(d-I),g=I-m,b=p*g-(S-h*m-p*m-h*g),y=E-b,f=E-y,Pa[0]=E-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),T=v+y,f=T-v,Pa[2]=v-(T-f)+(y-f),Pa[3]=T;const F=nB(4,nb,4,Pa,gpe);w=A*c,d=Jo*A,h=d-(d-A),p=A-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=k*l,d=Jo*k,h=d-(d-k),p=k-h,d=Jo*l,m=d-(d-l),g=l-m,b=p*g-(S-h*m-p*m-h*g),y=E-b,f=E-y,Pa[0]=E-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),T=v+y,f=T-v,Pa[2]=v-(T-f)+(y-f),Pa[3]=T;const z=nB(F,gpe,4,Pa,ype);w=a*c,d=Jo*a,h=d-(d-a),p=a-h,d=Jo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Jo*u,h=d-(d-u),p=u-h,d=Jo*l,m=d-(d-l),g=l-m,b=p*g-(S-h*m-p*m-h*g),y=E-b,f=E-y,Pa[0]=E-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-S,f=_-y,Pa[1]=_-(y+f)+(f-S),T=v+y,f=T-v,Pa[2]=v-(T-f)+(y-f),Pa[3]=T;const W=nB(z,ype,4,Pa,vpe);return vpe[W-1]}function sk(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=lkt*l?u:-dkt(e,t,n,r,i,s,l)}const _pe=Math.pow(2,-52),ok=new Uint32Array(512);class z3{static from(t,n=ykt,r=vkt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new z3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const I=t[2*A],k=t[2*A+1];I<a&&(a=I),k<u&&(u=k),I>l&&(l=I),k>c&&(c=k),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,I=1/0;A<o;A++){const k=rB(f,d,t[2*A],t[2*A+1]);k<I&&(h=A,I=k)}const g=t[2*h],y=t[2*h+1];for(let A=0,I=1/0;A<o;A++){if(A===h)continue;const k=rB(g,y,t[2*A],t[2*A+1]);k<I&&k>0&&(p=A,I=k)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const I=mkt(g,y,v,_,t[2*A],t[2*A+1]);I<w&&(m=A,w=I)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Wb(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let I=0;for(let k=0,$=-1/0;k<o;k++){const P=this._ids[k],N=this._dists[P];N>$&&(A[I++]=P,$=N)}this.hull=A.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(sk(g,y,v,_,E,S)<0){const A=p,I=v,k=_;p=m,v=E,_=S,m=A,E=I,S=k}const b=gkt(g,y,v,_,E,S);this._cx=b.x,this._cy=b.y;for(let A=0;A<o;A++)this._dists[A]=rB(t[2*A],t[2*A+1],b.x,b.y);Wb(this._ids,this._dists,0,o-1),this._hullStart=h;let T=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,I,k;A<this._ids.length;A++){const $=this._ids[A],P=t[2*$],N=t[2*$+1];if(A>0&&Math.abs(P-I)<=_pe&&Math.abs(N-k)<=_pe||(I=P,k=N,$===h||$===p||$===m))continue;let F=0;for(let M=0,H=this._hashKey(P,N);M<this._hashSize&&(F=s[(H+M)%this._hashSize],!(F!==-1&&F!==r[F]));M++);F=n[F];let z=F,W;for(;W=r[z],sk(P,N,t[2*z],t[2*z+1],t[2*W],t[2*W+1])>=0;)if(z=W,z===F){z=-1;break}if(z===-1)continue;let V=this._addTriangle(z,$,r[z],-1,-1,i[z]);i[$]=this._legalize(V+2),i[z]=V,T++;let G=r[z];for(;W=r[G],sk(P,N,t[2*G],t[2*G+1],t[2*W],t[2*W+1])<0;)V=this._addTriangle(G,$,W,i[$],-1,i[G]),i[$]=this._legalize(V+2),r[G]=G,T--,G=W;if(z===F)for(;W=n[z],sk(P,N,t[2*W],t[2*W+1],t[2*z],t[2*z+1])<0;)V=this._addTriangle(W,$,z,-1,i[z],i[W]),this._legalize(V+2),i[W]=V,r[z]=z,T--,z=W;this._hullStart=n[$]=z,r[z]=n[G]=$,r[$]=G,s[this._hashKey(P,N)]=$,s[this._hashKey(t[2*z],t[2*z+1])]=z}this.hull=new Uint32Array(T);for(let A=0,I=this._hullStart;A<T;A++)this.hull[A]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(hkt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=ok[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(pkt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<ok.length&&(ok[s++]=v)}else{if(s===0)break;t=ok[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function hkt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function rB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function pkt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function mkt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function gkt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Wb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;GS(e,i,s),t[e[n]]>t[e[r]]&&GS(e,n,r),t[e[s]]>t[e[r]]&&GS(e,s,r),t[e[n]]>t[e[s]]&&GS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;GS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Wb(e,t,s,r),Wb(e,t,n,o-1)):(Wb(e,t,n,o-1),Wb(e,t,s,r))}}function GS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ykt(e){return e[0]}function vkt(e){return e[1]}const bpe=1e-6;class zv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>bpe||Math.abs(this._y1-s)>bpe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class MV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let _kt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,b=t[w],T=t[w+1],A=t[E],I=t[E+1],k=t[S],$=t[S+1],P=A-b,N=I-T,F=k-b,z=$-T,W=(P*z-N*F)*2;if(Math.abs(W)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const V=1e9*Math.sign((s-b)*z-(o-T)*F);v=(b+k)/2-V*z,_=(T+$)/2+V*F}else{const V=1/W,G=P*P+N*N,M=F*F+z*z;v=b+(z*G-N*M)*V,_=T+(P*M-F*G)*V}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new zv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new zv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new zv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new MV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const bkt=2*Math.PI,rb=Math.pow;function wkt(e){return e[0]}function Ekt(e){return e[1]}function xkt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Skt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class mX{static from(t,n=wkt,r=Ekt,i){return new mX("length"in t?Tkt(t,n,r,i):Float64Array.from(Ckt(t,n,r,i)))}constructor(t){this._delaunator=new z3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&xkt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Skt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new z3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new _kt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=rb(n-l[t*2],2)+rb(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=rb(n-l[p*2],2)+rb(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&rb(n-l[h*2],2)+rb(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new zv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new zv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,bkt)}return r&&r.value()}renderHull(t){const n=t==null?t=new zv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new MV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new zv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new MV;return this.renderTriangle(t,n),n.value()}}function Tkt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Ckt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var wpe={},iB={},sB=34,YS=10,oB=13;function rNe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Akt(e,t){var n=rNe(e);return function(r,i){return t(n(r),i,e)}}function Epe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Ikt(e){return e<0?"-"+pu(-e,6):e>9999?"+"+pu(e,6):pu(e,4)}function Okt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ikt(e.getUTCFullYear())+"-"+pu(e.getUTCMonth()+1,2)+"-"+pu(e.getUTCDate(),2)+(i?"T"+pu(t,2)+":"+pu(n,2)+":"+pu(r,2)+"."+pu(i,3)+"Z":r?"T"+pu(t,2)+":"+pu(n,2)+":"+pu(r,2)+"Z":n||t?"T"+pu(t,2)+":"+pu(n,2)+"Z":"")}function iNe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Akt(g,d):rNe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===YS&&--p,f.charCodeAt(p-1)===oB&&--p;function w(){if(v)return iB;if(_)return _=!1,wpe;var S,b=m,T;if(f.charCodeAt(b)===sB){for(;m++<p&&f.charCodeAt(m)!==sB||f.charCodeAt(++m)===sB;);return(S=m)>=p?v=!0:(T=f.charCodeAt(m++))===YS?_=!0:T===oB&&(_=!0,f.charCodeAt(m)===YS&&++m),f.slice(b+1,S-1).replace(/""/g,'"')}for(;m<p;){if((T=f.charCodeAt(S=m++))===YS)_=!0;else if(T===oB)_=!0,f.charCodeAt(m)===YS&&++m;else if(T!==n)continue;return f.slice(b,S)}return v=!0,f.slice(b,p)}for(;(y=w())!==iB;){for(var E=[];y!==wpe&&y!==iB;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Epe(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Epe(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Okt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Pkt=iNe(","),kkt=Pkt.parse;function Rkt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function $kt(e,t){return fetch(e,t).then(Rkt)}function Nkt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),$kt(t,n).then(function(i){return e(i,r)})}}var Dkt=Nkt(kkt);function Mkt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Lkt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return sNe(this.cover(t,n),t,n,e)}function sNe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Fkt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)sNe(this,o[n],a[n],e[n]);return this}function jkt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Bkt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function zkt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ba(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Ukt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ba(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ba(h[3],g,y,u,l),new Ba(h[2],o,y,g,l),new Ba(h[1],g,a,u,y),new Ba(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Vkt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Hkt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function qkt(){return this._root}function Wkt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Gkt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ba(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ba(i,l,c,a,u)),(i=r[2])&&t.push(new Ba(i,s,c,l,u)),(i=r[1])&&t.push(new Ba(i,l,o,a,c)),(i=r[0])&&t.push(new Ba(i,s,o,l,c))}return this}function Ykt(e){var t=[],n=[],r;for(this._root&&t.push(new Ba(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ba(s,o,a,c,f)),(s=i[1])&&t.push(new Ba(s,c,a,u,f)),(s=i[2])&&t.push(new Ba(s,o,f,c,l)),(s=i[3])&&t.push(new Ba(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Kkt(e){return e[0]}function Xkt(e){return arguments.length?(this._x=e,this):this._x}function Qkt(e){return e[1]}function Jkt(e){return arguments.length?(this._y=e,this):this._y}function gX(e,t,n){var r=new yX(t??Kkt,n??Qkt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function yX(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function xpe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var iu=gX.prototype=yX.prototype;iu.copy=function(){var e=new yX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=xpe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=xpe(r));return e};iu.add=Lkt;iu.addAll=Fkt;iu.cover=jkt;iu.data=Bkt;iu.extent=zkt;iu.find=Ukt;iu.remove=Vkt;iu.removeAll=Hkt;iu.root=qkt;iu.size=Wkt;iu.visit=Gkt;iu.visitAfter=Ykt;iu.x=Xkt;iu.y=Jkt;function Va(e){return function(){return e}}function Wg(e){return(e()-.5)*1e-6}function Zkt(e){return e.x+e.vx}function eRt(e){return e.y+e.vy}function tRt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Va(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=gX(t,Zkt,eRt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,E,S,b){var T=_.data,A=_.r,I=m+A;if(T){if(T.index>d.index){var k=h-T.x-T.vx,$=p-T.y-T.vy,P=k*k+$*$;P<I*I&&(k===0&&(k=Wg(r),P+=k*k),$===0&&($=Wg(r),P+=$*$),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(k*=P)*(I=(A*=A)/(g+A)),d.vy+=($*=P)*I,T.vx-=k*(I=1-I),T.vy-=$*I)}return}return w>h+I||S<h-I||E>p+I||b<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Va(+l),u(),o):e},o}function nRt(e){return e.index}function Spe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function rRt(e){var t=nRt,n=f,r,i=Va(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,E,S,b,T,A,I;_<v;++_)w=e[_],E=w.source,S=w.target,b=S.x+S.vx-E.x-E.vx||Wg(l),T=S.y+S.vy-E.y-E.vy||Wg(l),A=Math.sqrt(b*b+T*T),A=(A-s[_])/A*g*r[_],b*=A,T*=A,S.vx-=b*(I=u[_]),S.vy-=T*I,E.vx+=b*(I=1-I),E.vy+=T*I}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Spe(_,w.source)),typeof w.target!="object"&&(w.target=Spe(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Va(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Va(+g),m(),d):i},d}const iRt=1664525,sRt=1013904223,Tpe=4294967296;function oRt(){let e=1;return()=>(e=(iRt*e+sRt)%Tpe)/Tpe}function aRt(e){return e.x}function uRt(e){return e.y}var lRt=10,cRt=Math.PI*(3-Math.sqrt(5));function fRt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=cX(f),l=Q4("tick","end"),c=oRt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=lRt*Math.sqrt(.5+m),_=m*cRt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,E,S,b,T;for(y==null?y=1/0:y*=y,v=0;v<_;++v)b=e[v],w=m-b.x,E=g-b.y,S=w*w+E*E,S<y&&(T=b,y=S);return T},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function dRt(){var e,t,n,r,i=Va(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=gX(e,aRt,uRt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=Wg(n),w+=y*y),v===0&&(v=Wg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Wg(n),w+=y*y),v===0&&(v=Wg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Va(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function hRt(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function pRt(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function mRt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function U3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function cE(e){return e=U3(Math.abs(e)),e?e[1]:NaN}function gRt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function yRt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var vRt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function P1(e){if(!(t=vRt.exec(e)))throw new Error("invalid format: "+e);var t;return new vX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}P1.prototype=vX.prototype;function vX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _Rt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var oNe;function bRt(e,t){var n=U3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(oNe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+U3(e,Math.max(0,t+s-1))[0]}function Cpe(e,t){var n=U3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ape={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mRt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Cpe(e*100,t),r:Cpe,s:bRt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ipe(e){return e}var Ope=Array.prototype.map,Ppe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function aNe(e){var t=e.grouping===void 0||e.thousands===void 0?Ipe:gRt(Ope.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ipe:yRt(Ope.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=P1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Ape[E]||(_===void 0&&(_=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",b=m==="$"?r:/[%p]/.test(E)?o:"",T=Ape[E],A=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(k){var $=S,P=b,N,F,z;if(E==="c")P=T(k)+P,k="";else{k=+k;var W=k<0||1/k<0;if(k=isNaN(k)?u:T(Math.abs(k),_),w&&(k=_Rt(k)),W&&+k==0&&p!=="+"&&(W=!1),$=(W?p==="("?p:a:p==="-"||p==="("?"":p)+$,P=(E==="s"?Ppe[8+oNe/3]:"")+P+(W&&p==="("?")":""),A){for(N=-1,F=k.length;++N<F;)if(z=k.charCodeAt(N),48>z||z>57){P=(z===46?i+k.slice(N+1):k.slice(N))+P,k=k.slice(0,N);break}}}v&&!g&&(k=t(k,1/0));var V=$.length+k.length+P.length,G=V<y?new Array(y-V+1).join(d):"";switch(v&&g&&(k=t(G+k,G.length?y-P.length:1/0),G=""),h){case"<":k=$+k+P+G;break;case"=":k=$+G+k+P;break;case"^":k=G.slice(0,V=G.length>>1)+$+k+P+G.slice(V);break;default:k=G+$+k+P;break}return s(k)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=P1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(cE(d)/3)))*3,m=Math.pow(10,-p),g=Ppe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var ak,Ix,_X;wRt({thousands:",",grouping:[3],currency:["$",""]});function wRt(e){return ak=aNe(e),Ix=ak.format,_X=ak.formatPrefix,ak}function uNe(e){return Math.max(0,-cE(Math.abs(e)))}function lNe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cE(t)/3)))*3-cE(Math.abs(e)))}function cNe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cE(t)-cE(e))+1}var Yt=1e-6,V3=1e-12,Bn=Math.PI,Ji=Bn/2,H3=Bn/4,Qa=Bn*2,os=180/Bn,Ln=Bn/180,er=Math.abs,Ox=Math.atan,Sc=Math.atan2,Zt=Math.cos,uk=Math.ceil,fNe=Math.exp,LV=Math.hypot,q3=Math.log,aB=Math.pow,qt=Math.sin,dc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,bX=Math.tan;function dNe(e){return e>1?0:e<-1?Bn:Math.acos(e)}function Uu(e){return e>1?Ji:e<-1?-Ji:Math.asin(e)}function Po(){}function W3(e,t){e&&Rpe.hasOwnProperty(e.type)&&Rpe[e.type](e,t)}var kpe={Feature:function(e,t){W3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)W3(n[r].geometry,t)}},Rpe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){FV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)FV(n[r],t,0)},Polygon:function(e,t){$pe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$pe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)W3(n[r],t)}};function FV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function $pe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)FV(e[n],t,1);t.polygonEnd()}function Cp(e,t){e&&kpe.hasOwnProperty(e.type)?kpe[e.type](e,t):W3(e,t)}var G3=new qa,Y3=new qa,hNe,pNe,jV,BV,zV,vh={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){G3=new qa,vh.lineStart=ERt,vh.lineEnd=xRt},polygonEnd:function(){var e=+G3;Y3.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=Po},sphere:function(){Y3.add(Qa)}};function ERt(){vh.point=SRt}function xRt(){mNe(hNe,pNe)}function SRt(e,t){vh.point=mNe,hNe=e,pNe=t,e*=Ln,t*=Ln,jV=e,BV=Zt(t=t/2+H3),zV=qt(t)}function mNe(e,t){e*=Ln,t*=Ln,t=t/2+H3;var n=e-jV,r=n>=0?1:-1,i=r*n,s=Zt(t),o=qt(t),a=zV*o,u=BV*s+a*Zt(i),l=a*r*qt(i);G3.add(Sc(l,u)),jV=e,BV=s,zV=o}function TRt(e){return Y3=new qa,Cp(e,vh),Y3*2}function K3(e){return[Sc(e[1],e[0]),Uu(e[2])]}function k1(e){var t=e[0],n=e[1],r=Zt(n);return[r*Zt(t),r*qt(t),qt(n)]}function lk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function uB(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ck(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function X3(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Fi,wu,Hi,dl,fv,gNe,yNe,Sw,j2,Cg,ym,Ep={point:UV,lineStart:Npe,lineEnd:Dpe,polygonStart:function(){Ep.point=_Ne,Ep.lineStart=CRt,Ep.lineEnd=ARt,j2=new qa,vh.polygonStart()},polygonEnd:function(){vh.polygonEnd(),Ep.point=UV,Ep.lineStart=Npe,Ep.lineEnd=Dpe,G3<0?(Fi=-(Hi=180),wu=-(dl=90)):j2>Yt?dl=90:j2<-Yt&&(wu=-90),ym[0]=Fi,ym[1]=Hi},sphere:function(){Fi=-(Hi=180),wu=-(dl=90)}};function UV(e,t){Cg.push(ym=[Fi=e,Hi=e]),t<wu&&(wu=t),t>dl&&(dl=t)}function vNe(e,t){var n=k1([e*Ln,t*Ln]);if(Sw){var r=fE(Sw,n),i=[r[1],-r[0],0],s=fE(i,r);X3(s),s=K3(s);var o=e-fv,a=o>0?1:-1,u=s[0]*os*a,l,c=er(o)>180;c^(a*fv<u&&u<a*e)?(l=s[1]*os,l>dl&&(dl=l)):(u=(u+360)%360-180,c^(a*fv<u&&u<a*e)?(l=-s[1]*os,l<wu&&(wu=l)):(t<wu&&(wu=t),t>dl&&(dl=t))),c?e<fv?cl(Fi,e)>cl(Fi,Hi)&&(Hi=e):cl(e,Hi)>cl(Fi,Hi)&&(Fi=e):Hi>=Fi?(e<Fi&&(Fi=e),e>Hi&&(Hi=e)):e>fv?cl(Fi,e)>cl(Fi,Hi)&&(Hi=e):cl(e,Hi)>cl(Fi,Hi)&&(Fi=e)}else Cg.push(ym=[Fi=e,Hi=e]);t<wu&&(wu=t),t>dl&&(dl=t),Sw=n,fv=e}function Npe(){Ep.point=vNe}function Dpe(){ym[0]=Fi,ym[1]=Hi,Ep.point=UV,Sw=null}function _Ne(e,t){if(Sw){var n=e-fv;j2.add(er(n)>180?n+(n>0?360:-360):n)}else gNe=e,yNe=t;vh.point(e,t),vNe(e,t)}function CRt(){vh.lineStart()}function ARt(){_Ne(gNe,yNe),vh.lineEnd(),er(j2)>Yt&&(Fi=-(Hi=180)),ym[0]=Fi,ym[1]=Hi,Sw=null}function cl(e,t){return(t-=e)<0?t+360:t}function IRt(e,t){return e[0]-t[0]}function Mpe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ORt(e){var t,n,r,i,s,o,a;if(dl=Hi=-(Fi=wu=1/0),Cg=[],Cp(e,Ep),n=Cg.length){for(Cg.sort(IRt),t=1,r=Cg[0],s=[r];t<n;++t)i=Cg[t],Mpe(r,i[0])||Mpe(r,i[1])?(cl(r[0],i[1])>cl(r[0],r[1])&&(r[1]=i[1]),cl(i[0],r[1])>cl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=cl(r[1],i[0]))>o&&(o=a,Fi=i[0],Hi=r[1])}return Cg=ym=null,Fi===1/0||wu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fi,wu],[Hi,dl]]}var BT,Q3,J3,Z3,eM,tM,nM,rM,VV,HV,qV,bNe,wNe,La,Fa,ja,vf={sphere:Po,point:wX,lineStart:Lpe,lineEnd:Fpe,polygonStart:function(){vf.lineStart=RRt,vf.lineEnd=$Rt},polygonEnd:function(){vf.lineStart=Lpe,vf.lineEnd=Fpe}};function wX(e,t){e*=Ln,t*=Ln;var n=Zt(t);BI(n*Zt(e),n*qt(e),qt(t))}function BI(e,t,n){++BT,J3+=(e-J3)/BT,Z3+=(t-Z3)/BT,eM+=(n-eM)/BT}function Lpe(){vf.point=PRt}function PRt(e,t){e*=Ln,t*=Ln;var n=Zt(t);La=n*Zt(e),Fa=n*qt(e),ja=qt(t),vf.point=kRt,BI(La,Fa,ja)}function kRt(e,t){e*=Ln,t*=Ln;var n=Zt(t),r=n*Zt(e),i=n*qt(e),s=qt(t),o=Sc(Ja((o=Fa*s-ja*i)*o+(o=ja*r-La*s)*o+(o=La*i-Fa*r)*o),La*r+Fa*i+ja*s);Q3+=o,tM+=o*(La+(La=r)),nM+=o*(Fa+(Fa=i)),rM+=o*(ja+(ja=s)),BI(La,Fa,ja)}function Fpe(){vf.point=wX}function RRt(){vf.point=NRt}function $Rt(){ENe(bNe,wNe),vf.point=wX}function NRt(e,t){bNe=e,wNe=t,e*=Ln,t*=Ln,vf.point=ENe;var n=Zt(t);La=n*Zt(e),Fa=n*qt(e),ja=qt(t),BI(La,Fa,ja)}function ENe(e,t){e*=Ln,t*=Ln;var n=Zt(t),r=n*Zt(e),i=n*qt(e),s=qt(t),o=Fa*s-ja*i,a=ja*r-La*s,u=La*i-Fa*r,l=LV(o,a,u),c=Uu(l),f=l&&-c/l;VV.add(f*o),HV.add(f*a),qV.add(f*u),Q3+=c,tM+=c*(La+(La=r)),nM+=c*(Fa+(Fa=i)),rM+=c*(ja+(ja=s)),BI(La,Fa,ja)}function DRt(e){BT=Q3=J3=Z3=eM=tM=nM=rM=0,VV=new qa,HV=new qa,qV=new qa,Cp(e,vf);var t=+VV,n=+HV,r=+qV,i=LV(t,n,r);return i<V3&&(t=tM,n=nM,r=rM,Q3<Yt&&(t=J3,n=Z3,r=eM),i=LV(t,n,r),i<V3)?[NaN,NaN]:[Sc(n,t)*os,Uu(r/i)*os]}function WV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function GV(e,t){return er(e)>Bn&&(e-=Math.round(e/Qa)*Qa),[e,t]}GV.invert=GV;function xNe(e,t,n){return(e%=Qa)?t||n?WV(Bpe(e),zpe(t,n)):Bpe(e):t||n?zpe(t,n):GV}function jpe(e){return function(t,n){return t+=e,er(t)>Bn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function Bpe(e){var t=jpe(e);return t.invert=jpe(-e),t}function zpe(e,t){var n=Zt(e),r=qt(e),i=Zt(t),s=qt(t);function o(a,u){var l=Zt(u),c=Zt(a)*l,f=qt(a)*l,d=qt(u),h=d*n+c*r;return[Sc(f*i-h*s,c*n-d*r),Uu(h*i+f*s)]}return o.invert=function(a,u){var l=Zt(u),c=Zt(a)*l,f=qt(a)*l,d=qt(u),h=d*i-f*s;return[Sc(f*i+d*s,c*n+h*r),Uu(h*n-c*r)]},o}function MRt(e){e=xNe(e[0]*Ln,e[1]*Ln,e.length>2?e[2]*Ln:0);function t(n){return n=e(n[0]*Ln,n[1]*Ln),n[0]*=os,n[1]*=os,n}return t.invert=function(n){return n=e.invert(n[0]*Ln,n[1]*Ln),n[0]*=os,n[1]*=os,n},t}function LRt(e,t,n,r,i,s){if(n){var o=Zt(t),a=qt(t),u=r*n;i==null?(i=t+r*Qa,s=t-u/2):(i=Upe(o,i),s=Upe(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=K3([o,-a*Zt(c),-a*qt(c)]),e.point(l[0],l[1])}}function Upe(e,t){t=k1(t),t[0]-=e,X3(t);var n=dNe(-t[1]);return((-t[2]<0?-n:n)+Qa-Yt)%Qa}function SNe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Po,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function XR(e,t){return er(e[0]-t[0])<Yt&&er(e[1]-t[1])<Yt}function fk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function TNe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(XR(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Yt}s.push(v=new fk(g,p,null,!0)),o.push(v.o=new fk(g,null,v,!1)),s.push(v=new fk(y,p,null,!1)),o.push(v.o=new fk(y,null,v,!0))}}),!!s.length){for(o.sort(t),Vpe(s),Vpe(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Vpe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function lB(e){return er(e[0])<=Bn?e[0]:dc(e[0])*((er(e[0])+Bn)%Qa-Bn)}function FRt(e,t){var n=lB(t),r=t[1],i=qt(r),s=[qt(n),-Zt(n),0],o=0,a=0,u=new qa;i===1?r=Ji+Yt:i===-1&&(r=-Ji-Yt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=lB(h),m=h[1]/2+H3,g=qt(m),y=Zt(m),v=0;v<d;++v,p=w,g=S,y=b,h=_){var _=f[v],w=lB(_),E=_[1]/2+H3,S=qt(E),b=Zt(E),T=w-p,A=T>=0?1:-1,I=A*T,k=I>Bn,$=g*S;if(u.add(Sc($*A*qt(I),y*b+$*Zt(I))),o+=k?T+A*Qa:T,k^p>=n^w>=n){var P=fE(k1(h),k1(_));X3(P);var N=fE(s,P);X3(N);var F=(k^T>=0?-1:1)*Uu(N[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=k^T>=0?1:-1)}}return(o<-Yt||o<Yt&&u<-V3)^a&1}function CNe(e,t,n,r){return function(i){var s=t(i),o=SNe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=c$e(c);var w=FRt(l,r);c.length?(u||(i.polygonStart(),u=!0),TNe(c,BRt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,b=E.length,T,A,I;if(f.pop(),l.push(f),f=null,!!b){if(w&1){if(A=E[0],(T=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<T;++S)i.point((I=A[S])[0],I[1]);i.lineEnd()}return}b>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(jRt))}}return d}}function jRt(e){return e.length>1}function BRt(e,t){return((e=e.x)[0]<0?e[1]-Ji-Yt:Ji-e[1])-((t=t.x)[0]<0?t[1]-Ji-Yt:Ji-t[1])}const Hpe=CNe(function(){return!0},zRt,VRt,[-Bn,-Ji]);function zRt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Bn:-Bn,u=er(s-t);er(u-Bn)<Yt?(e.point(t,n=(n+o)/2>0?Ji:-Ji),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Bn&&(er(t-r)<Yt&&(t-=r*Yt),er(s-a)<Yt&&(s-=a*Yt),n=URt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function URt(e,t,n,r){var i,s,o=qt(e-n);return er(o)>Yt?Ox((qt(t)*(s=Zt(r))*qt(n)-qt(r)*(i=Zt(t))*qt(e))/(i*s*o)):(t+r)/2}function VRt(e,t,n,r){var i;if(e==null)i=n*Ji,r.point(-Bn,i),r.point(0,i),r.point(Bn,i),r.point(Bn,0),r.point(Bn,-i),r.point(0,-i),r.point(-Bn,-i),r.point(-Bn,0),r.point(-Bn,i);else if(er(e[0]-t[0])>Yt){var s=e[0]<t[0]?Bn:-Bn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function HRt(e){var t=Zt(e),n=2*Ln,r=t>0,i=er(t)>Yt;function s(c,f,d,h){LRt(h,e,n,d,c,f)}function o(c,f){return Zt(c)*Zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Bn:-Bn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||XR(f,_)||XR(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!XR(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=k1(c),p=k1(f),m=[1,0,0],g=fE(h,p),y=lk(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,E=-t*v/_,S=fE(m,g),b=ck(m,w),T=ck(g,E);uB(b,T);var A=S,I=lk(b,A),k=lk(A,A),$=I*I-k*(lk(b,b)-1);if(!($<0)){var P=Ja($),N=ck(A,(-I-P)/k);if(uB(N,b),N=K3(N),!d)return N;var F=c[0],z=f[0],W=c[1],V=f[1],G;z<F&&(G=F,F=z,z=G);var M=z-F,H=er(M-Bn)<Yt,Y=H||M<Yt;if(!H&&V<W&&(G=W,W=V,V=G),Y?H?W+V>0^N[1]<(er(N[0]-F)<Yt?W:V):W<=N[1]&&N[1]<=V:M>Bn^(F<=N[0]&&N[0]<=z)){var L=ck(A,(-I+P)/k);return uB(L,b),[N,K3(L)]}}}function l(c,f){var d=r?e:Bn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return CNe(o,a,s,r?[0,-e]:[-Bn,e-Bn])}function qRt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var zT=1e9,dk=-zT;function ANe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return er(l[0]-e)<Yt?c>0?0:3:er(l[0]-n)<Yt?c>0?2:1:er(l[1]-t)<Yt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=SNe(),d,h,p,m,g,y,v,_,w,E,S,b={point:T,lineStart:$,lineEnd:P,polygonStart:I,polygonEnd:k};function T(F,z){i(F,z)&&c.point(F,z)}function A(){for(var F=0,z=0,W=h.length;z<W;++z)for(var V=h[z],G=1,M=V.length,H=V[0],Y,L,B=H[0],q=H[1];G<M;++G)Y=B,L=q,H=V[G],B=H[0],q=H[1],L<=r?q>r&&(B-Y)*(r-L)>(q-L)*(e-Y)&&++F:q<=r&&(B-Y)*(r-L)<(q-L)*(e-Y)&&--F;return F}function I(){c=f,d=[],h=[],S=!0}function k(){var F=A(),z=S&&F,W=(d=c$e(d)).length;(z||W)&&(l.polygonStart(),z&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),W&&TNe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function $(){b.point=N,h&&h.push(p=[]),E=!0,w=!1,v=_=NaN}function P(){d&&(N(m,g),y&&w&&f.rejoin(),d.push(f.result())),b.point=T,w&&c.lineEnd()}function N(F,z){var W=i(F,z);if(h&&p.push([F,z]),E)m=F,g=z,y=W,E=!1,W&&(c.lineStart(),c.point(F,z));else if(W&&w)c.point(F,z);else{var V=[v=Math.max(dk,Math.min(zT,v)),_=Math.max(dk,Math.min(zT,_))],G=[F=Math.max(dk,Math.min(zT,F)),z=Math.max(dk,Math.min(zT,z))];qRt(V,G,e,t,n,r)?(w||(c.lineStart(),c.point(V[0],V[1])),c.point(G[0],G[1]),W||c.lineEnd(),S=!1):W&&(c.lineStart(),c.point(F,z),S=!1)}v=F,_=z,w=W}return b}}function qpe(e,t,n){var r=Ou(e,t-Yt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Wpe(e,t,n){var r=Ou(e,t-Yt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function WRt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ou(uk(r/c)*c,n,c).map(p).concat(Ou(uk(a/f)*f,o,f).map(m)).concat(Ou(uk(t/u)*u,e,u).filter(function(_){return er(_%c)>Yt}).map(d)).concat(Ou(uk(s/l)*l,i,l).filter(function(_){return er(_%f)>Yt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=qpe(s,i,90),h=Wpe(t,e,g),p=qpe(a,o,90),m=Wpe(r,n,g),y):g},y.extentMajor([[-180,-90+Yt],[180,90-Yt]]).extentMinor([[-180,-80-Yt],[180,80+Yt]])}const iA=e=>e;var cB=new qa,YV=new qa,INe,ONe,KV,XV,Ap={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){Ap.lineStart=GRt,Ap.lineEnd=KRt},polygonEnd:function(){Ap.lineStart=Ap.lineEnd=Ap.point=Po,cB.add(er(YV)),YV=new qa},result:function(){var e=cB/2;return cB=new qa,e}};function GRt(){Ap.point=YRt}function YRt(e,t){Ap.point=PNe,INe=KV=e,ONe=XV=t}function PNe(e,t){YV.add(XV*e-KV*t),KV=e,XV=t}function KRt(){PNe(INe,ONe)}var dE=1/0,iM=dE,sA=-dE,sM=sA,oM={point:XRt,lineStart:Po,lineEnd:Po,polygonStart:Po,polygonEnd:Po,result:function(){var e=[[dE,iM],[sA,sM]];return sA=sM=-(iM=dE=1/0),e}};function XRt(e,t){e<dE&&(dE=e),e>sA&&(sA=e),t<iM&&(iM=t),t>sM&&(sM=t)}var QV=0,JV=0,UT=0,aM=0,uM=0,Gb=0,ZV=0,eH=0,VT=0,kNe,RNe,$d,Nd,lc={point:R1,lineStart:Gpe,lineEnd:Ype,polygonStart:function(){lc.lineStart=ZRt,lc.lineEnd=e$t},polygonEnd:function(){lc.point=R1,lc.lineStart=Gpe,lc.lineEnd=Ype},result:function(){var e=VT?[ZV/VT,eH/VT]:Gb?[aM/Gb,uM/Gb]:UT?[QV/UT,JV/UT]:[NaN,NaN];return QV=JV=UT=aM=uM=Gb=ZV=eH=VT=0,e}};function R1(e,t){QV+=e,JV+=t,++UT}function Gpe(){lc.point=QRt}function QRt(e,t){lc.point=JRt,R1($d=e,Nd=t)}function JRt(e,t){var n=e-$d,r=t-Nd,i=Ja(n*n+r*r);aM+=i*($d+e)/2,uM+=i*(Nd+t)/2,Gb+=i,R1($d=e,Nd=t)}function Ype(){lc.point=R1}function ZRt(){lc.point=t$t}function e$t(){$Ne(kNe,RNe)}function t$t(e,t){lc.point=$Ne,R1(kNe=$d=e,RNe=Nd=t)}function $Ne(e,t){var n=e-$d,r=t-Nd,i=Ja(n*n+r*r);aM+=i*($d+e)/2,uM+=i*(Nd+t)/2,Gb+=i,i=Nd*e-$d*t,ZV+=i*($d+e),eH+=i*(Nd+t),VT+=i*3,R1($d=e,Nd=t)}function NNe(e){this._context=e}NNe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:Po};var tH=new qa,fB,DNe,MNe,HT,qT,oA={point:Po,lineStart:function(){oA.point=n$t},lineEnd:function(){fB&&LNe(DNe,MNe),oA.point=Po},polygonStart:function(){fB=!0},polygonEnd:function(){fB=null},result:function(){var e=+tH;return tH=new qa,e}};function n$t(e,t){oA.point=LNe,DNe=HT=e,MNe=qT=t}function LNe(e,t){HT-=e,qT-=t,tH.add(Ja(HT*HT+qT*qT)),HT=e,qT=t}let Kpe,lM,Xpe,Qpe;class Jpe{constructor(t){this._append=t==null?FNe:r$t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Xpe||this._append!==lM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Xpe=r,lM=this._append,Qpe=this._,this._=i}this._+=Qpe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function FNe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function r$t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return FNe;if(t!==Kpe){const n=10**t;Kpe=t,lM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return lM}function jNe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Cp(a,i(s))),s.result()}return o.area=function(a){return Cp(a,i(Ap)),Ap.result()},o.measure=function(a){return Cp(a,i(oA)),oA.result()},o.bounds=function(a){return Cp(a,i(oM)),oM.result()},o.centroid=function(a){return Cp(a,i(lc)),lc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,iA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Jpe(n)):new NNe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Jpe(n)),o},o.projection(e).digits(n).context(t)}function o5(e){return function(t){var n=new nH;for(var r in e)n[r]=e[r];return n.stream=t,n}}function nH(){}nH.prototype={constructor:nH,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function EX(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Cp(n,e.stream(oM)),t(oM.result()),r!=null&&e.clipExtent(r),e}function a5(e,t,n){return EX(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function xX(e,t,n){return a5(e,[[0,0],t],n)}function SX(e,t,n){return EX(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function TX(e,t,n){return EX(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Zpe=16,i$t=Zt(30*Ln);function eme(e,t){return+t?o$t(e,t):s$t(e)}function s$t(e){return o5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function o$t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+d,E=a+h,S=u+p,b=Ja(w*w+E*E+S*S),T=Uu(S/=b),A=er(er(S)-1)<Yt||er(s-f)<Yt?(s+f)/2:Sc(E,w),I=e(A,T),k=I[0],$=I[1],P=k-r,N=$-i,F=v*P-y*N;(F*F/_>t||er((y*P+v*N)/_-.5)>.3||o*d+a*h+u*p<i$t)&&(n(r,i,s,o,a,u,k,$,A,w/=b,E/=b,S,m,g),g.point(k,$),n(k,$,A,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,A){T=e(T,A),r.point(T[0],T[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(T,A){var I=k1([T,A]),k=e(T,A);n(f,d,c,h,p,m,f=k[0],d=k[1],c=T,h=I[0],p=I[1],m=I[2],Zpe,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=b}function S(T,A){_(i=T,A),s=f,o=d,a=h,u=p,l=m,g.point=_}function b(){n(f,d,c,h,p,m,s,o,i,a,u,l,Zpe,r),g.lineEnd=w,w()}return g}}var a$t=o5({point:function(e,t){this.stream.point(e*Ln,t*Ln)}});function u$t(e){return o5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function l$t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function tme(e,t,n,r,i,s){if(!s)return l$t(e,t,n,r,i);var o=Zt(s),a=qt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Uh(e){return BNe(function(){return e})()}function BNe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Hpe,g=null,y,v,_,w=iA,E=.5,S,b,T,A,I;function k(F){return T(F[0]*Ln,F[1]*Ln)}function $(F){return F=T.invert(F[0],F[1]),F&&[F[0]*os,F[1]*os]}k.stream=function(F){return A&&I===F?A:A=a$t(u$t(c)(m(S(w(I=F)))))},k.preclip=function(F){return arguments.length?(m=F,p=void 0,N()):m},k.postclip=function(F){return arguments.length?(w=F,g=y=v=_=null,N()):w},k.clipAngle=function(F){return arguments.length?(m=+F?HRt(p=F*Ln):(p=null,Hpe),N()):p*os},k.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=_=null,iA):ANe(g=+F[0][0],y=+F[0][1],v=+F[1][0],_=+F[1][1]),N()):g==null?null:[[g,y],[v,_]]},k.scale=function(F){return arguments.length?(n=+F,P()):n},k.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},k.center=function(F){return arguments.length?(s=F[0]%360*Ln,o=F[1]%360*Ln,P()):[s*os,o*os]},k.rotate=function(F){return arguments.length?(a=F[0]%360*Ln,u=F[1]%360*Ln,l=F.length>2?F[2]%360*Ln:0,P()):[a*os,u*os,l*os]},k.angle=function(F){return arguments.length?(f=F%360*Ln,P()):f*os},k.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},k.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},k.precision=function(F){return arguments.length?(S=eme(b,E=F*F),N()):Ja(E)},k.fitExtent=function(F,z){return a5(k,F,z)},k.fitSize=function(F,z){return xX(k,F,z)},k.fitWidth=function(F,z){return SX(k,F,z)},k.fitHeight=function(F,z){return TX(k,F,z)};function P(){var F=tme(n,0,0,d,h,f).apply(null,t(s,o)),z=tme(n,r-F[0],i-F[1],d,h,f);return c=xNe(a,u,l),b=WV(t,z),T=WV(c,b),S=eme(b,E),N()}function N(){return A=I=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&$,P()}}function CX(e){var t=0,n=Bn/3,r=BNe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Ln,n=s[1]*Ln):[t*os,n*os]},i}function c$t(e){var t=Zt(e);function n(r,i){return[r*t,qt(i)/t]}return n.invert=function(r,i){return[r/t,Uu(i*t)]},n}function f$t(e,t){var n=qt(e),r=(n+qt(t))/2;if(er(r)<Yt)return c$t(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,u){var l=Ja(i-2*r*qt(u))/r;return[l*qt(a*=r),s-l*Zt(a)]}return o.invert=function(a,u){var l=s-u,c=Sc(a,er(l))*dc(l);return l*r<0&&(c-=Bn*dc(a)*dc(l)),[c/r,Uu((i-(a*a+l*l)*r*r)/(2*r))]},o}function cM(){return CX(f$t).scale(155.424).center([0,33.6442])}function zNe(){return cM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function d$t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function h$t(){var e,t,n=zNe(),r,i=cM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=cM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=d$t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Yt,m+.12*h+Yt],[p-.214*h-Yt,m+.234*h-Yt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Yt,m+.166*h+Yt],[p-.115*h-Yt,m+.234*h-Yt]]).stream(l),f()},c.fitExtent=function(d,h){return a5(c,d,h)},c.fitSize=function(d,h){return xX(c,d,h)},c.fitWidth=function(d,h){return SX(c,d,h)},c.fitHeight=function(d,h){return TX(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function UNe(e){return function(t,n){var r=Zt(t),i=Zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*qt(t),s*qt(n)]}}function zI(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=qt(i),o=Zt(i);return[Sc(t*s,r*o),Uu(r&&n*s/r)]}}var VNe=UNe(function(e){return Ja(2/(1+e))});VNe.invert=zI(function(e){return 2*Uu(e/2)});function p$t(){return Uh(VNe).scale(124.75).clipAngle(180-.001)}var HNe=UNe(function(e){return(e=dNe(e))&&e/qt(e)});HNe.invert=zI(function(e){return e});function m$t(){return Uh(HNe).scale(79.4188).clipAngle(180-.001)}function u5(e,t){return[e,q3(bX((Ji+t)/2))]}u5.invert=function(e,t){return[e,2*Ox(fNe(t))-Ji]};function g$t(){return qNe(u5).scale(961/Qa)}function qNe(e){var t=Uh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Bn*r(),d=t(MRt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===u5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function hk(e){return bX((Ji+e)/2)}function y$t(e,t){var n=Zt(e),r=e===t?qt(e):q3(n/Zt(t))/q3(hk(t)/hk(e)),i=n*aB(hk(e),r)/r;if(!r)return u5;function s(o,a){i>0?a<-Ji+Yt&&(a=-Ji+Yt):a>Ji-Yt&&(a=Ji-Yt);var u=i/aB(hk(a),r);return[u*qt(r*o),i-u*Zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=dc(r)*Ja(o*o+u*u),c=Sc(o,er(u))*dc(u);return u*r<0&&(c-=Bn*dc(o)*dc(u)),[c/r,2*Ox(aB(i/l,1/r))-Ji]},s}function v$t(){return CX(y$t).scale(109.5).parallels([30,30])}function fM(e,t){return[e,t]}fM.invert=fM;function _$t(){return Uh(fM).scale(152.63)}function b$t(e,t){var n=Zt(e),r=e===t?qt(e):(n-Zt(t))/(t-e),i=n/r+e;if(er(r)<Yt)return fM;function s(o,a){var u=i-a,l=r*o;return[u*qt(l),i-u*Zt(l)]}return s.invert=function(o,a){var u=i-a,l=Sc(o,er(u))*dc(u);return u*r<0&&(l-=Bn*dc(o)*dc(u)),[l/r,i-dc(r)*Ja(o*o+u*u)]},s}function w$t(){return CX(b$t).scale(131.154).center([0,13.9389])}var B2=1.340264,z2=-.081106,U2=893e-6,V2=.003796,dM=Ja(3)/2,E$t=12;function WNe(e,t){var n=Uu(dM*qt(t)),r=n*n,i=r*r*r;return[e*Zt(n)/(dM*(B2+3*z2*r+i*(7*U2+9*V2*r))),n*(B2+z2*r+i*(U2+V2*r))]}WNe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<E$t&&(a=n*(B2+z2*r+i*(U2+V2*r))-t,u=B2+3*z2*r+i*(7*U2+9*V2*r),n-=o=a/u,r=n*n,i=r*r*r,!(er(o)<V3));++s);return[dM*e*(B2+3*z2*r+i*(7*U2+9*V2*r))/Zt(n),Uu(qt(n)/dM)]};function x$t(){return Uh(WNe).scale(177.158)}function GNe(e,t){var n=Zt(t),r=Zt(e)*n;return[n*qt(e)/r,qt(t)/r]}GNe.invert=zI(Ox);function S$t(){return Uh(GNe).scale(144.049).clipAngle(60)}function T$t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=o5({point:function(w,E){var S=_([w,E]);this.stream.point(S[0],S[1])}}),m=iA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var E=w[0]*d,S=w[1]*h;if(s){var b=S*o-E*a;E=E*o+S*a,S=b}return[E+t,S+n]}return _.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var b=S*o+E*a;E=E*o-S*a,S=b}return[E/d,S/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,iA):ANe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Ln,a=qt(s),o=Zt(s),v()):s*os},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,E){return a5(_,w,E)},_.fitSize=function(w,E){return xX(_,w,E)},_.fitWidth=function(w,E){return SX(_,w,E)},_.fitHeight=function(w,E){return TX(_,w,E)},_}function YNe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}YNe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(er(i)>Yt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function C$t(){return Uh(YNe).scale(175.295)}function KNe(e,t){return[Zt(t)*qt(e),qt(t)]}KNe.invert=zI(Uu);function A$t(){return Uh(KNe).scale(249.5).clipAngle(90+Yt)}function XNe(e,t){var n=Zt(t),r=1+Zt(e)*n;return[n*qt(e)/r,qt(t)/r]}XNe.invert=zI(function(e){return 2*Ox(e)});function I$t(){return Uh(XNe).scale(250).clipAngle(142)}function QNe(e,t){return[q3(bX((Ji+t)/2)),-e]}QNe.invert=function(e,t){return[-t,2*Ox(fNe(e))-Ji]};function O$t(){var e=qNe(QNe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function P$t(e,t){return e.parent===t.parent?1:2}function k$t(e){return e.reduce(R$t,0)/e.length}function R$t(e,t){return e+t.x}function $$t(e){return 1+e.reduce(N$t,0)}function N$t(e,t){return Math.max(e,t.y)}function D$t(e){for(var t;t=e.children;)e=t[0];return e}function M$t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function L$t(){var e=P$t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=k$t(h),d.y=$$t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=D$t(s),l=M$t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function F$t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function j$t(){return this.eachAfter(F$t)}function B$t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function z$t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function U$t(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function V$t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function H$t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function q$t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function W$t(e){for(var t=this,n=G$t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function G$t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Y$t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function K$t(){return Array.from(this)}function X$t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Q$t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*J$t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function AX(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tNt)):t===void 0&&(t=eNt);for(var n=new hE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new hE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(JNe)}function Z$t(){return AX(this).eachBefore(nNt)}function eNt(e){return e.children}function tNt(e){return Array.isArray(e)?e[1]:null}function nNt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function JNe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function hE(e){this.data=e,this.depth=this.height=0,this.parent=null}hE.prototype=AX.prototype={constructor:hE,count:j$t,each:B$t,eachAfter:U$t,eachBefore:z$t,find:V$t,sum:H$t,sort:q$t,path:W$t,ancestors:Y$t,descendants:K$t,leaves:X$t,links:Q$t,copy:Z$t,[Symbol.iterator]:J$t};function QR(e){return e==null?null:ZNe(e)}function ZNe(e){if(typeof e!="function")throw new Error;return e}function Sv(){return 0}function Eb(e){return function(){return e}}const rNt=1664525,iNt=1013904223,nme=4294967296;function sNt(){let e=1;return()=>(e=(rNt*e+iNt)%nme)/nme}function oNt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aNt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function uNt(e,t){for(var n=0,r=(e=aNt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&eDe(o,s)?++n:(o=cNt(i=lNt(i,s)),n=0);return o}function lNt(e,t){var n,r;if(dB(t,e))return[t];for(n=0;n<e.length;++n)if(pk(t,e[n])&&dB(WT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(pk(WT(e[n],e[r]),t)&&pk(WT(e[n],t),e[r])&&pk(WT(e[r],t),e[n])&&dB(tDe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function pk(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function eDe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function dB(e,t){for(var n=0;n<t.length;++n)if(!eDe(e,t[n]))return!1;return!0}function cNt(e){switch(e.length){case 1:return fNt(e[0]);case 2:return WT(e[0],e[1]);case 3:return tDe(e[0],e[1],e[2])}}function fNt(e){return{x:e.x,y:e.y,r:e.r}}function WT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function tDe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*_)/(E*2)-r,b=(m*g-p*y)/E,T=(h*_-d*w)/(E*2)-i,A=(d*y-h*g)/E,I=b*b+A*A-1,k=2*(s+S*b+T*A),$=S*S+T*T-s*s,P=-(Math.abs(I)>1e-6?(k+Math.sqrt(k*k-4*I*$))/(2*I):$/k);return{x:r+S+b*P,y:i+T+A*P,r:P}}function rme(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ime(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function sme(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function mk(e){this._=e,this.next=null,this.previous=null}function dNt(e,t){if(!(s=(e=oNt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;rme(r,n,i=e[2]),n=new mk(n),r=new mk(r),i=new mk(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){rme(n._,r._,i=e[u]),i=new mk(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ime(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ime(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=sme(n);(i=i.next)!==r;)(a=sme(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=uNt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function hNt(e){return Math.sqrt(e.value)}function pNt(){var e=null,t=1,n=1,r=Sv;function i(s){const o=sNt();return s.x=t/2,s.y=n/2,e?s.eachBefore(ome(e)).eachAfter(hB(r,.5,o)).eachBefore(ame(1)):s.eachBefore(ome(hNt)).eachAfter(hB(Sv,1,o)).eachAfter(hB(r,s.r/Math.min(t,n),o)).eachBefore(ame(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=QR(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Eb(+s),i):r},i}function ome(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function hB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=dNt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function ame(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function nDe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function UI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function mNt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(nDe),o}function s(o,a){return function(u){u.children&&UI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var gNt={depth:-1},ume={},pB={};function yNt(e){return e.id}function vNt(e){return e.parentId}function lme(){var e=yNt,t=vNt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>_Nt(n(w,E,i))),v=y.map(cme),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(cme(w)),s.push(pB));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new hE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ume:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===ume)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===pB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===pB);--y)h.data=null}if(f.parent=gNt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(JNe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=QR(i),r):e},r.parentId=function(i){return arguments.length?(t=QR(i),r):t},r.path=function(i){return arguments.length?(n=QR(i),r):n},r}function _Nt(e){e=`${e}`;let t=e.length;return rH(e,t-1)&&!rH(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function cme(e){let t=e.length;if(t<2)return"";for(;--t>1&&!rH(e,t););return e.slice(0,t)}function rH(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function bNt(e,t){return e.parent===t.parent?1:2}function mB(e){var t=e.children;return t?t[0]:e.t}function gB(e){var t=e.children;return t?t[t.length-1]:e.t}function wNt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function ENt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xNt(e,t,n){return e.a.parent===t.parent?e.a:n}function JR(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}JR.prototype=Object.create(hE.prototype);function SNt(e){for(var t=new JR(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new JR(s[o],o)),i.parent=n;return(t.parent=new JR(null,0)).children=[t],t}function TNt(){var e=bNt,t=1,n=1,r=null;function i(l){var c=SNt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){ENt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=gB(p),d=mB(d),p&&d;)m=mB(m),h=gB(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(wNt(xNt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!gB(h)&&(h.t=p,h.m+=v-y),d&&!mB(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function l5(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var rDe=(1+Math.sqrt(5))/2;function iDe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,_=Math.max(v/S,S/y),_>w){g-=l;break}w=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?UI(u,n,r,i,m?r+=p*g/m:s):l5(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const sDe=function e(t){function n(r,i,s,o,a){iDe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(rDe);function CNt(){var e=sDe,t=!1,n=1,r=1,i=[0],s=Sv,o=Sv,a=Sv,u=Sv,l=Sv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(nDe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=ZNe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Eb(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Eb(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Eb(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Eb(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Eb(+d),c):l},c}function ANt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,E=f+1,S=d-1;E<S;){var b=E+S>>>1;l[b]<w?E=b+1:S=b}w-l[E-1]<l[E]-w&&f+1<E&&--E;var T=l[E]-_,A=h-T;if(g-p>y-m){var I=h?(p*A+g*T)/h:g;c(f,E,T,p,m,I,y),c(E,d,A,I,m,g,y)}else{var k=h?(m*A+y*T)/h:y;c(f,E,T,p,m,g,k),c(E,d,A,p,k,g,y)}}}function INt(e,t,n,r,i){(e.depth&1?l5:UI)(e,t,n,r,i)}const ONt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?UI(l,i,s,o,m?s+=(a-s)*l.value/m:a):l5(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=iDe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(rDe);function Xf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function xy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const iH=Symbol("implicit");function Px(){var e=new Hhe,t=[],n=[],r=iH;function i(s){let o=e.get(s);if(o===void 0){if(r!==iH)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Hhe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Px(t,n).unknown(r)},Xf.apply(i,arguments),i}function c5(){var e=Px().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Ou(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return c5(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Xf.apply(f(),arguments)}function PNt(e){return function(){return e}}function sH(e){return+e}var fme=[0,1];function Pu(e){return e}function oH(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:PNt(isNaN(t)?NaN:.5)}function kNt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function RNt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=oH(i,r),s=n(o,s)):(r=oH(r,i),s=n(s,o)),function(a){return s(r(a))}}function $Nt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=oH(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=L0(e,a,1,r)-1;return s[u](i[u](a))}}function VI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function f5(){var e=fme,t=fme,n=Bm,r,i,s,o=Pu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Pu&&(o=kNt(e[0],e[d-1])),a=d>2?$Nt:RNt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),oc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,sH),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=FI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Pu,c()):o!==Pu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function oDe(){return f5()(Pu,Pu)}function aDe(e,t,n,r){var i=F0(e,t,n),s;switch(r=P1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=lNe(i,o))&&(r.precision=s),_X(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=cNe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=uNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Ix(r)}function v_(e){var t=e.domain;return e.ticks=function(n){var r=t();return _V(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return aDe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=bV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function _h(){var e=oDe();return e.copy=function(){return VI(e,_h())},Xf.apply(e,arguments),v_(e)}function uDe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,sH),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return uDe(e).unknown(t)},e=arguments.length?Array.from(e,sH):[0,1],v_(n)}function lDe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function dme(e){return Math.log(e)}function hme(e){return Math.exp(e)}function NNt(e){return-Math.log(-e)}function DNt(e){return-Math.exp(-e)}function MNt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function LNt(e){return e===10?MNt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function FNt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pme(e){return(t,n)=>-e(-t,n)}function IX(e){const t=e(dme,hme),n=t.domain;let r=10,i,s;function o(){return i=FNt(r),s=LNt(r),n()[0]<0?(i=pme(i),s=pme(s),e(NNt,DNt)):e(dme,hme),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=_V(l,c,g))}else y=_V(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=P1(u)).precision==null&&(u.trim=!0),u=Ix(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(lDe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function cDe(){const e=IX(f5()).domain([1,10]);return e.copy=()=>VI(e,cDe()).base(e.base()),Xf.apply(e,arguments),e}function mme(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gme(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function OX(e){var t=1,n=e(mme(t),gme(t));return n.constant=function(r){return arguments.length?e(mme(t=+r),gme(t)):t},v_(n)}function fDe(){var e=OX(f5());return e.copy=function(){return VI(e,fDe()).constant(e.constant())},Xf.apply(e,arguments)}function yme(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function jNt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function BNt(e){return e<0?-e*e:e*e}function PX(e){var t=e(Pu,Pu),n=1;function r(){return n===1?e(Pu,Pu):n===.5?e(jNt,BNt):e(yme(n),yme(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},v_(t)}function kX(){var e=PX(f5());return e.copy=function(){return VI(e,kX()).exponent(e.exponent())},Xf.apply(e,arguments),e}function zNt(){return kX.apply(null,arguments).exponent(.5)}function dDe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=u$e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[L0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Xp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return dDe().domain(e).range(t).unknown(r)},Xf.apply(s,arguments)}function hDe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[L0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return hDe().domain([e,t]).range(i).unknown(s)},Xf.apply(v_(o),arguments)}function pDe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[L0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return pDe().domain(e).range(t).unknown(n)},Xf.apply(i,arguments)}const yB=new Date,vB=new Date;function qs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>qs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(yB.setTime(+s),vB.setTime(+o),e(yB),e(vB),Math.floor(n(yB,vB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const pE=qs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):pE);pE.range;const Lp=1e3,hc=Lp*60,Fp=hc*60,vm=Fp*24,RX=vm*7,vme=vm*30,_B=vm*365,jp=qs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lp)},(e,t)=>(t-e)/Lp,e=>e.getUTCSeconds());jp.range;const d5=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lp)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getMinutes());d5.range;const h5=qs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getUTCMinutes());h5.range;const p5=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lp-e.getMinutes()*hc)},(e,t)=>{e.setTime(+e+t*Fp)},(e,t)=>(t-e)/Fp,e=>e.getHours());p5.range;const m5=qs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fp)},(e,t)=>(t-e)/Fp,e=>e.getUTCHours());m5.range;const Jp=qs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hc)/vm,e=>e.getDate()-1);Jp.range;const g0=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vm,e=>e.getUTCDate()-1);g0.range;const mDe=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vm,e=>Math.floor(e/vm));mDe.range;function __(e){return qs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hc)/RX)}const kx=__(0),hM=__(1),UNt=__(2),VNt=__(3),mE=__(4),HNt=__(5),qNt=__(6);kx.range;hM.range;UNt.range;VNt.range;mE.range;HNt.range;qNt.range;function b_(e){return qs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/RX)}const Rx=b_(0),pM=b_(1),WNt=b_(2),GNt=b_(3),gE=b_(4),YNt=b_(5),KNt=b_(6);Rx.range;pM.range;WNt.range;GNt.range;gE.range;YNt.range;KNt.range;const aA=qs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());aA.range;const uA=qs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());uA.range;const bh=qs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bh.range;const wh=qs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wh.range;function gDe(e,t,n,r,i,s){const o=[[jp,1,Lp],[jp,5,5*Lp],[jp,15,15*Lp],[jp,30,30*Lp],[s,1,hc],[s,5,5*hc],[s,15,15*hc],[s,30,30*hc],[i,1,Fp],[i,3,3*Fp],[i,6,6*Fp],[i,12,12*Fp],[r,1,vm],[r,2,2*vm],[n,1,RX],[t,1,vme],[t,3,3*vme],[e,1,_B]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Cx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(F0(l/_B,c/_B,f));if(h===0)return pE.every(Math.max(F0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[XNt,QNt]=gDe(wh,uA,Rx,mDe,m5,h5),[JNt,ZNt]=gDe(bh,aA,kx,Jp,p5,d5);function bB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function KS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function yDe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=XS(i),c=QS(i),f=XS(s),d=QS(s),h=XS(o),p=QS(o),m=XS(a),g=QS(a),y=XS(u),v=QS(u),_={a:W,A:V,b:G,B:M,c:null,d:Sme,e:Sme,f:EDt,g:RDt,G:NDt,H:_Dt,I:bDt,j:wDt,L:vDe,m:xDt,M:SDt,p:H,q:Y,Q:Ame,s:Ime,S:TDt,u:CDt,U:ADt,V:IDt,w:ODt,W:PDt,x:null,X:null,y:kDt,Y:$Dt,Z:DDt,"%":Cme},w={a:L,A:B,b:q,B:Z,c:null,d:Tme,e:Tme,f:jDt,g:KDt,G:QDt,H:MDt,I:LDt,j:FDt,L:bDe,m:BDt,M:zDt,p:ue,q:he,Q:Ame,s:Ime,S:UDt,u:VDt,U:HDt,V:qDt,w:WDt,W:GDt,x:null,X:null,y:YDt,Y:XDt,Z:JDt,"%":Cme},E={a:I,A:k,b:$,B:P,c:N,d:Eme,e:Eme,f:mDt,g:wme,G:bme,H:xme,I:xme,j:fDt,L:pDt,m:cDt,M:dDt,p:A,q:lDt,Q:yDt,s:vDt,S:hDt,u:iDt,U:sDt,V:oDt,w:rDt,W:aDt,x:F,X:z,y:wme,Y:bme,Z:uDt,"%":gDt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(fe,me){return function(_e){var ge=[],Be=-1,Me=0,ct=fe.length,Oe,Re,Ye;for(_e instanceof Date||(_e=new Date(+_e));++Be<ct;)fe.charCodeAt(Be)===37&&(ge.push(fe.slice(Me,Be)),(Re=_me[Oe=fe.charAt(++Be)])!=null?Oe=fe.charAt(++Be):Re=Oe==="e"?" ":"0",(Ye=me[Oe])&&(Oe=Ye(_e,Re)),ge.push(Oe),Me=Be+1);return ge.push(fe.slice(Me,Be)),ge.join("")}}function b(fe,me){return function(_e){var ge=KS(1900,void 0,1),Be=T(ge,fe,_e+="",0),Me,ct;if(Be!=_e.length)return null;if("Q"in ge)return new Date(ge.Q);if("s"in ge)return new Date(ge.s*1e3+("L"in ge?ge.L:0));if(me&&!("Z"in ge)&&(ge.Z=0),"p"in ge&&(ge.H=ge.H%12+ge.p*12),ge.m===void 0&&(ge.m="q"in ge?ge.q:0),"V"in ge){if(ge.V<1||ge.V>53)return null;"w"in ge||(ge.w=1),"Z"in ge?(Me=wB(KS(ge.y,0,1)),ct=Me.getUTCDay(),Me=ct>4||ct===0?pM.ceil(Me):pM(Me),Me=g0.offset(Me,(ge.V-1)*7),ge.y=Me.getUTCFullYear(),ge.m=Me.getUTCMonth(),ge.d=Me.getUTCDate()+(ge.w+6)%7):(Me=bB(KS(ge.y,0,1)),ct=Me.getDay(),Me=ct>4||ct===0?hM.ceil(Me):hM(Me),Me=Jp.offset(Me,(ge.V-1)*7),ge.y=Me.getFullYear(),ge.m=Me.getMonth(),ge.d=Me.getDate()+(ge.w+6)%7)}else("W"in ge||"U"in ge)&&("w"in ge||(ge.w="u"in ge?ge.u%7:"W"in ge?1:0),ct="Z"in ge?wB(KS(ge.y,0,1)).getUTCDay():bB(KS(ge.y,0,1)).getDay(),ge.m=0,ge.d="W"in ge?(ge.w+6)%7+ge.W*7-(ct+5)%7:ge.w+ge.U*7-(ct+6)%7);return"Z"in ge?(ge.H+=ge.Z/100|0,ge.M+=ge.Z%100,wB(ge)):bB(ge)}}function T(fe,me,_e,ge){for(var Be=0,Me=me.length,ct=_e.length,Oe,Re;Be<Me;){if(ge>=ct)return-1;if(Oe=me.charCodeAt(Be++),Oe===37){if(Oe=me.charAt(Be++),Re=E[Oe in _me?me.charAt(Be++):Oe],!Re||(ge=Re(fe,_e,ge))<0)return-1}else if(Oe!=_e.charCodeAt(ge++))return-1}return ge}function A(fe,me,_e){var ge=l.exec(me.slice(_e));return ge?(fe.p=c.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function I(fe,me,_e){var ge=h.exec(me.slice(_e));return ge?(fe.w=p.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function k(fe,me,_e){var ge=f.exec(me.slice(_e));return ge?(fe.w=d.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function $(fe,me,_e){var ge=y.exec(me.slice(_e));return ge?(fe.m=v.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function P(fe,me,_e){var ge=m.exec(me.slice(_e));return ge?(fe.m=g.get(ge[0].toLowerCase()),_e+ge[0].length):-1}function N(fe,me,_e){return T(fe,t,me,_e)}function F(fe,me,_e){return T(fe,n,me,_e)}function z(fe,me,_e){return T(fe,r,me,_e)}function W(fe){return o[fe.getDay()]}function V(fe){return s[fe.getDay()]}function G(fe){return u[fe.getMonth()]}function M(fe){return a[fe.getMonth()]}function H(fe){return i[+(fe.getHours()>=12)]}function Y(fe){return 1+~~(fe.getMonth()/3)}function L(fe){return o[fe.getUTCDay()]}function B(fe){return s[fe.getUTCDay()]}function q(fe){return u[fe.getUTCMonth()]}function Z(fe){return a[fe.getUTCMonth()]}function ue(fe){return i[+(fe.getUTCHours()>=12)]}function he(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var me=S(fe+="",_);return me.toString=function(){return fe},me},parse:function(fe){var me=b(fe+="",!1);return me.toString=function(){return fe},me},utcFormat:function(fe){var me=S(fe+="",w);return me.toString=function(){return fe},me},utcParse:function(fe){var me=b(fe+="",!0);return me.toString=function(){return fe},me}}}var _me={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,eDt=/^%/,tDt=/[\\^$*+?|[\]().{}]/g;function vr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function nDt(e){return e.replace(tDt,"\\$&")}function XS(e){return new RegExp("^(?:"+e.map(nDt).join("|")+")","i")}function QS(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function rDt(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function iDt(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function sDt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function oDt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function aDt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function bme(e,t,n){var r=mo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function wme(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uDt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lDt(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function cDt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Eme(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function fDt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function xme(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function dDt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function hDt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function pDt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mDt(e,t,n){var r=mo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gDt(e,t,n){var r=eDt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function yDt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function vDt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Sme(e,t){return vr(e.getDate(),t,2)}function _Dt(e,t){return vr(e.getHours(),t,2)}function bDt(e,t){return vr(e.getHours()%12||12,t,2)}function wDt(e,t){return vr(1+Jp.count(bh(e),e),t,3)}function vDe(e,t){return vr(e.getMilliseconds(),t,3)}function EDt(e,t){return vDe(e,t)+"000"}function xDt(e,t){return vr(e.getMonth()+1,t,2)}function SDt(e,t){return vr(e.getMinutes(),t,2)}function TDt(e,t){return vr(e.getSeconds(),t,2)}function CDt(e){var t=e.getDay();return t===0?7:t}function ADt(e,t){return vr(kx.count(bh(e)-1,e),t,2)}function _De(e){var t=e.getDay();return t>=4||t===0?mE(e):mE.ceil(e)}function IDt(e,t){return e=_De(e),vr(mE.count(bh(e),e)+(bh(e).getDay()===4),t,2)}function ODt(e){return e.getDay()}function PDt(e,t){return vr(hM.count(bh(e)-1,e),t,2)}function kDt(e,t){return vr(e.getFullYear()%100,t,2)}function RDt(e,t){return e=_De(e),vr(e.getFullYear()%100,t,2)}function $Dt(e,t){return vr(e.getFullYear()%1e4,t,4)}function NDt(e,t){var n=e.getDay();return e=n>=4||n===0?mE(e):mE.ceil(e),vr(e.getFullYear()%1e4,t,4)}function DDt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vr(t/60|0,"0",2)+vr(t%60,"0",2)}function Tme(e,t){return vr(e.getUTCDate(),t,2)}function MDt(e,t){return vr(e.getUTCHours(),t,2)}function LDt(e,t){return vr(e.getUTCHours()%12||12,t,2)}function FDt(e,t){return vr(1+g0.count(wh(e),e),t,3)}function bDe(e,t){return vr(e.getUTCMilliseconds(),t,3)}function jDt(e,t){return bDe(e,t)+"000"}function BDt(e,t){return vr(e.getUTCMonth()+1,t,2)}function zDt(e,t){return vr(e.getUTCMinutes(),t,2)}function UDt(e,t){return vr(e.getUTCSeconds(),t,2)}function VDt(e){var t=e.getUTCDay();return t===0?7:t}function HDt(e,t){return vr(Rx.count(wh(e)-1,e),t,2)}function wDe(e){var t=e.getUTCDay();return t>=4||t===0?gE(e):gE.ceil(e)}function qDt(e,t){return e=wDe(e),vr(gE.count(wh(e),e)+(wh(e).getUTCDay()===4),t,2)}function WDt(e){return e.getUTCDay()}function GDt(e,t){return vr(pM.count(wh(e)-1,e),t,2)}function YDt(e,t){return vr(e.getUTCFullYear()%100,t,2)}function KDt(e,t){return e=wDe(e),vr(e.getUTCFullYear()%100,t,2)}function XDt(e,t){return vr(e.getUTCFullYear()%1e4,t,4)}function QDt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?gE(e):gE.ceil(e),vr(e.getUTCFullYear()%1e4,t,4)}function JDt(){return"+0000"}function Cme(){return"%"}function Ame(e){return+e}function Ime(e){return Math.floor(+e/1e3)}var ib,$X,EDe,g5,xDe;ZDt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ZDt(e){return ib=yDe(e),$X=ib.format,EDe=ib.parse,g5=ib.utcFormat,xDe=ib.utcParse,ib}function e3t(e){return new Date(e)}function t3t(e){return e instanceof Date?+e:+new Date(+e)}function NX(e,t,n,r,i,s,o,a,u,l){var c=oDe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?_:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,t3t)):d().map(e3t)},c.ticks=function(S){var b=d();return e(b[0],b[b.length-1],S??10)},c.tickFormat=function(S,b){return b==null?E:l(b)},c.nice=function(S){var b=d();return(!S||typeof S.range!="function")&&(S=t(b[0],b[b.length-1],S??10)),S?d(lDe(b,S)):c},c.copy=function(){return VI(c,NX(e,t,n,r,i,s,o,a,u,l))},c}function SDe(){return Xf.apply(NX(JNt,ZNt,bh,aA,kx,Jp,p5,d5,jp,$X).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function n3t(){return Xf.apply(NX(XNt,QNt,wh,uA,Rx,g0,m5,h5,jp,g5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function y5(){var e=0,t=1,n,r,i,s,o=Pu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Bm),l.rangeRound=c(FI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Sy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DX(){var e=v_(y5()(Pu));return e.copy=function(){return Sy(e,DX())},xy.apply(e,arguments)}function TDe(){var e=IX(y5()).domain([1,10]);return e.copy=function(){return Sy(e,TDe()).base(e.base())},xy.apply(e,arguments)}function CDe(){var e=OX(y5());return e.copy=function(){return Sy(e,CDe()).constant(e.constant())},xy.apply(e,arguments)}function MX(){var e=PX(y5());return e.copy=function(){return Sy(e,MX()).exponent(e.exponent())},xy.apply(e,arguments)}function r3t(){return MX.apply(null,arguments).exponent(.5)}function v5(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Pu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=lX(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Bm),h.rangeRound=p(FI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function ADe(){var e=v_(v5()(Pu));return e.copy=function(){return Sy(e,ADe())},xy.apply(e,arguments)}function IDe(){var e=IX(v5()).domain([.1,1,10]);return e.copy=function(){return Sy(e,IDe()).base(e.base())},xy.apply(e,arguments)}function ODe(){var e=OX(v5());return e.copy=function(){return Sy(e,ODe()).constant(e.constant())},xy.apply(e,arguments)}function LX(){var e=PX(v5());return e.copy=function(){return Sy(e,LX()).exponent(e.exponent())},xy.apply(e,arguments)}function i3t(){return LX.apply(null,arguments).exponent(.5)}function Qf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const s3t=Qf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o3t=Qf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),a3t=Qf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),u3t=Qf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),l3t=Qf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),c3t=Qf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),f3t=Qf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),d3t=Qf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),h3t=Qf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),p3t=Qf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),PDe=Qf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Pr(e){return function(){return e}}const Ome=Math.abs,Zo=Math.atan2,Gy=Math.cos,m3t=Math.max,EB=Math.min,ld=Math.sin,Uv=Math.sqrt,ra=1e-12,yE=Math.PI,mM=yE/2,kDe=2*yE;function g3t(e){return e>1?0:e<-1?yE:Math.acos(e)}function Pme(e){return e>=1?mM:e<=-1?-mM:Math.asin(e)}function _5(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new pX(t)}function y3t(e){return e.innerRadius}function v3t(e){return e.outerRadius}function _3t(e){return e.startAngle}function b3t(e){return e.endAngle}function w3t(e){return e&&e.padAngle}function E3t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ra))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function gk(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Uv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,E=i-s,S=d*m-p*h,b=(_<0?-1:1)*Uv(m3t(0,E*E*w-S*S)),T=(S*_-v*b)/w,A=(-S*v-_*b)/w,I=(S*_+v*b)/w,k=(-S*v+_*b)/w,$=T-g,P=A-y,N=I-g,F=k-y;return $*$+P*P>N*N+F*F&&(T=I,A=k),{cx:T,cy:A,x01:-c,y01:-f,x11:T*(i/E-1),y11:A*(i/E-1)}}function x3t(){var e=y3t,t=v3t,n=Pr(0),r=null,i=_3t,s=b3t,o=w3t,a=null,u=_5(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-mM,m=s.apply(this,arguments)-mM,g=Ome(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ra))a.moveTo(0,0);else if(g>kDe-ra)a.moveTo(h*Gy(p),h*ld(p)),a.arc(0,0,h,p,m,!y),d>ra&&(a.moveTo(d*Gy(m),d*ld(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,E=m,S=g,b=g,T=o.apply(this,arguments)/2,A=T>ra&&(r?+r.apply(this,arguments):Uv(d*d+h*h)),I=EB(Ome(h-d)/2,+n.apply(this,arguments)),k=I,$=I,P,N;if(A>ra){var F=Pme(A/d*ld(T)),z=Pme(A/h*ld(T));(S-=F*2)>ra?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(b-=z*2)>ra?(z*=y?1:-1,v+=z,_-=z):(b=0,v=_=(p+m)/2)}var W=h*Gy(v),V=h*ld(v),G=d*Gy(E),M=d*ld(E);if(I>ra){var H=h*Gy(_),Y=h*ld(_),L=d*Gy(w),B=d*ld(w),q;if(g<yE)if(q=E3t(W,V,L,B,H,Y,G,M)){var Z=W-q[0],ue=V-q[1],he=H-q[0],fe=Y-q[1],me=1/ld(g3t((Z*he+ue*fe)/(Uv(Z*Z+ue*ue)*Uv(he*he+fe*fe)))/2),_e=Uv(q[0]*q[0]+q[1]*q[1]);k=EB(I,(d-_e)/(me-1)),$=EB(I,(h-_e)/(me+1))}else k=$=0}b>ra?$>ra?(P=gk(L,B,W,V,h,$,y),N=gk(H,Y,G,M,h,$,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),$<I?a.arc(P.cx,P.cy,$,Zo(P.y01,P.x01),Zo(N.y01,N.x01),!y):(a.arc(P.cx,P.cy,$,Zo(P.y01,P.x01),Zo(P.y11,P.x11),!y),a.arc(0,0,h,Zo(P.cy+P.y11,P.cx+P.x11),Zo(N.cy+N.y11,N.cx+N.x11),!y),a.arc(N.cx,N.cy,$,Zo(N.y11,N.x11),Zo(N.y01,N.x01),!y))):(a.moveTo(W,V),a.arc(0,0,h,v,_,!y)):a.moveTo(W,V),!(d>ra)||!(S>ra)?a.lineTo(G,M):k>ra?(P=gk(G,M,H,Y,d,-k,y),N=gk(W,V,L,B,d,-k,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),k<I?a.arc(P.cx,P.cy,k,Zo(P.y01,P.x01),Zo(N.y01,N.x01),!y):(a.arc(P.cx,P.cy,k,Zo(P.y01,P.x01),Zo(P.y11,P.x11),!y),a.arc(0,0,d,Zo(P.cy+P.y11,P.cx+P.x11),Zo(N.cy+N.y11,N.cx+N.x11),y),a.arc(N.cx,N.cy,k,Zo(N.y11,N.x11),Zo(N.y01,N.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-yE/2;return[Gy(f)*c,ld(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Pr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Pr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Pr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Pr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Pr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Pr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Pr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function RDe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $De(e){this._context=e}$De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function FX(e){return new $De(e)}function NDe(e){return e[0]}function DDe(e){return e[1]}function gM(e,t){var n=Pr(!0),r=null,i=FX,s=null,o=_5(a);e=typeof e=="function"?e:e===void 0?NDe:Pr(e),t=typeof t=="function"?t:t===void 0?DDe:Pr(t);function a(u){var l,c=(u=RDe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Pr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Pr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Pr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function MDe(e,t,n){var r=null,i=Pr(!0),s=null,o=FX,a=null,u=_5(l);e=typeof e=="function"?e:e===void 0?NDe:Pr(+e),t=typeof t=="function"?t:Pr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?DDe:Pr(+n);function l(f){var d,h,p,m=(f=RDe(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return gM().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Pr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Pr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Pr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Pr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Pr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Pr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Pr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const S3t={draw(e,t){const n=Uv(t/yE);e.moveTo(n,0),e.arc(0,0,n,0,kDe)}};function T3t(e,t){let n=null,r=_5(i);e=typeof e=="function"?e:Pr(e||S3t),t=typeof t=="function"?t:Pr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Pr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Pr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function B0(){}function yM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function b5(e){this._context=e}b5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aH(e){return new b5(e)}function LDe(e){this._context=e}LDe.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C3t(e){return new LDe(e)}function FDe(e){this._context=e}FDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:yM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A3t(e){return new FDe(e)}function jDe(e,t){this._basis=new b5(e),this._beta=t}jDe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const I3t=function e(t){function n(r){return t===1?new b5(r):new jDe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function vM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function jX(e,t){this._context=e,this._k=(1-t)/6}jX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:vM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const O3t=function e(t){function n(r){return new jX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function BX(e,t){this._context=e,this._k=(1-t)/6}BX.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const P3t=function e(t){function n(r){return new BX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function zX(e,t){this._context=e,this._k=(1-t)/6}zX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const k3t=function e(t){function n(r){return new zX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function UX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ra){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ra){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function BDe(e,t){this._context=e,this._alpha=t}BDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:UX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const R3t=function e(t){function n(r){return t?new BDe(r,t):new jX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function zDe(e,t){this._context=e,this._alpha=t}zDe.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:UX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $3t=function e(t){function n(r){return t?new zDe(r,t):new BX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function UDe(e,t){this._context=e,this._alpha=t}UDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:UX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const N3t=function e(t){function n(r){return t?new UDe(r,t):new zX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VDe(e){this._context=e}VDe.prototype={areaStart:B0,areaEnd:B0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function D3t(e){return new VDe(e)}function kme(e){return e<0?-1:1}function Rme(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(kme(s)+kme(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function $me(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function xB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function _M(e){this._context=e}_M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xB(this,this._t0,$me(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xB(this,$me(this,n=Rme(this,e,t)),n);break;default:xB(this,this._t0,n=Rme(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function HDe(e){this._context=new qDe(e)}(HDe.prototype=Object.create(_M.prototype)).point=function(e,t){_M.prototype.point.call(this,t,e)};function qDe(e){this._context=e}qDe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function M3t(e){return new _M(e)}function L3t(e){return new HDe(e)}function WDe(e){this._context=e}WDe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Nme(e),i=Nme(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Nme(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function F3t(e){return new WDe(e)}function w5(e,t){this._context=e,this._t=t}w5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function j3t(e){return new w5(e,.5)}function B3t(e){return new w5(e,0)}function z3t(e){return new w5(e,1)}function GT(e,t,n){this.k=e,this.x=t,this.y=n}GT.prototype={constructor:GT,scale:function(e){return e===1?this:new GT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new GT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};GT.prototype;function HI({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:u=!1,columnList:l,setColumn:c,stringTicks:f=!1}){const d=C.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=C.useCallback(p=>(s?g5("%B"):Ix(".2s"))(p),[s]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:R.jsx(Ya,{children:R.jsx(yr,{spacing:3,children:R.jsx(it,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?R.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>R.jsxs("g",{transform:`translate(${m}, ${n})`,children:[R.jsx("line",{y2:"6",stroke:"currentColor"}),o?R.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,R.jsx("foreignObject",{x:0-d/2,y:10,width:d,height:20,children:R.jsx(Ya,{children:R.jsx(Yp,{withinPortal:!0,label:p,children:R.jsx(it,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:f?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const U3t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:HI},Symbol.toStringTag,{value:"Module"}));function E5({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=C.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>20?120:u*6},[i]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Ya,{children:R.jsx(yr,{spacing:3,children:R.jsx(it,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>R.jsxs("g",{transform:`translate(${n}, ${l})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),s?R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,R.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:R.jsx("foreignObject",{width:a,height:20,children:R.jsx(yr,{style:{width:"100%",height:"100%"},position:"right",children:R.jsx(it,{lineClamp:1,sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const V3t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:E5},Symbol.toStringTag,{value:"Module"})),fu={top:15,left:160,right:50,bottom:130};function uH({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=yc(),u=C.useMemo(()=>a-fu.left-fu.right,[a]),l=C.useMemo(()=>o-fu.top-fu.bottom,[o]),c=C.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),f=C.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return Px(PDe).domain(g)},[r,n.category]),d=C.useMemo(()=>c?_h([fu.left,u+fu.left]).domain([0,vc(c.objects().map(g=>g.count))]).nice():null,[c,u]),h=C.useMemo(()=>c?c5([fu.top,l+fu.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,l,n.category]),p=C.useMemo(()=>!d||!h||!f||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:R.jsxs("g",{style:{cursor:"pointer"},children:[R.jsx("rect",{onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:fu.left,y:h(g[n.category]),fill:f(g[n.category]),height:h.bandwidth(),width:d(g.count)-fu.left},y),R.jsx("text",{x:d(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,f,r,n.category,n.ids,i,d,h]),m=C.useMemo(()=>!d||!h||!f||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:R.jsx("g",{style:{cursor:"pointer"},children:R.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:fu.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:d(g.count)-fu.left},y)},y)),[f,r,c,n.category,n.ids,i,d,h]);return h&&d?R.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[R.jsx(HI,{xScale:d,yRange:h.range(),vertPosition:l+fu.top,showLines:!1,label:"Count",ticks:d.ticks(5).map(g=>({value:g.toString(),offset:d(g)}))}),h?R.jsx(E5,{yScale:h,horizontalPosition:fu.left,xRange:d.range(),label:n.category,ticks:f.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):R.jsx(ph,{})}const H3t=Object.freeze(Object.defineProperty({__proto__:null,Bar:uH,default:uH},Symbol.toStringTag,{value:"Module"})),pr=Array.isArray;function Vu(e){return e!=null?pr(e)?e:[e]:[]}function q3t(e=0,t=1/0){return`${Dme(e)} < row_number() && row_number() <= ${Dme(t)}`}function Dme(e){return e<0?`count() + ${e}`:e}class GDe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(q3t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Vu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Pn(e){throw Error(e)}function Za(e){return typeof e=="number"}function Si(e){return typeof e=="function"}function x5(e,t){const n=Array(e);if(Si(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let W3t=class extends GDe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Pn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Pn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Pn("Not implemented")}getter(t){Pn("Not implemented")}objects(t){Pn("Not implemented")}object(t){Pn("Not implemented")}[Symbol.iterator](){Pn("Not implemented")}print(t={}){Za(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=x5(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},G3t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Y3t=function(e){return e&&Si(e.get)?e:new G3t(e)};function _m(e){return e instanceof Date}function Sa(e){return e===Object(e)}function bM(e){return e instanceof RegExp}function zo(e){return typeof e=="string"}function K3t(e,t){const n=r=>Pn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Mme(e.entries(),t):_m(e)?n("Date"):bM(e)?n("RegExp"):zo(e)?n():pr(e)?X3t(e,t):Si(e[Symbol.iterator])?Q3t(e,t):Sa(e)?Mme(Object.entries(e),t):n()}function Mme(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function X3t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Q3t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:J3t}=Object.prototype;function Lf(e,t){return J3t.call(e,t)}function ql(e){return e?new Lme({...e.data()},e.columnNames()):new Lme}class Lme{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Lf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const lr=void 0,Z3t=Object.getPrototypeOf(Int8Array);function qI(e){return e instanceof Z3t}function Vv(e){return pr(e)||qI(e)}function _f(e){return e!=null&&e===e}const JS=e=>Vv(e)||zo(e),eMt={compact:e=>Vv(e)?e.filter(t=>_f(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>JS(e)?e.includes(t,n):!1,indexof:(e,t)=>JS(e)?e.indexOf(t):-1,join:(e,t)=>Vv(e)?e.join(t):lr,lastindexof:(e,t)=>JS(e)?e.lastIndexOf(t):-1,length:e=>JS(e)?e.length:0,pluck:(e,t)=>Vv(e)?e.map(n=>_f(n)?n[t]:lr):lr,reverse:e=>Vv(e)?e.slice().reverse():zo(e)?e.split("").reverse().join(""):lr,slice:(e,t,n)=>JS(e)?e.slice(t,n):lr};function tMt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function ZR(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const cd=e=>(e<10?"0":"")+e,nMt=e=>e<0?"-"+ZR(-e,6):e>9999?"+"+ZR(e,6):ZR(e,4);function YDe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return nMt(e)+"-"+cd(t+1)+"-"+cd(n)+(!u||o?"T"+cd(r)+":"+cd(i)+":"+cd(s)+"."+ZR(o,3)+l:s?"T"+cd(r)+":"+cd(i)+":"+cd(s)+l:i||r||!a?"T"+cd(r)+":"+cd(i)+l:"")}function KDe(e,t){return isNaN(e)?"Invalid Date":YDe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function S5(e,t){return isNaN(e)?"Invalid Date":YDe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const rMt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function iMt(e){return e.match(rMt)&&!isNaN(Date.parse(e))}function sMt(e,t=Date.parse){return iMt(e)?t(e):e}const XDe=6e4,QDe=864e5,JDe=6048e5,Yi=new Date,Ki=new Date,is=e=>(Yi.setTime(typeof e=="string"?sMt(e):e),Yi);function oMt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function aMt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function uMt(e){Ki.setTime(+e),Ki.setHours(0,0,0,0),Yi.setTime(+Ki),Yi.setMonth(0),Yi.setDate(1);const t=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*XDe;return Math.floor(1+(Ki-Yi-t)/QDe)}function lMt(e){Ki.setTime(+e),Ki.setUTCHours(0,0,0,0);const t=Date.UTC(Ki.getUTCFullYear(),0,1);return Math.floor(1+(Ki-t)/QDe)}function cMt(e,t){const n=t||0;Ki.setTime(+e),Ki.setDate(Ki.getDate()-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0),Yi.setTime(+e),Yi.setMonth(0),Yi.setDate(1),Yi.setDate(1-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0);const r=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*XDe;return Math.floor((1+(Ki-Yi)-r)/JDe)}function fMt(e,t){const n=t||0;return Ki.setTime(+e),Ki.setUTCDate(Ki.getUTCDate()-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Yi.setTime(+e),Yi.setUTCMonth(0),Yi.setUTCDate(1),Yi.setUTCDate(1-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Math.floor((1+(Ki-Yi))/JDe)}const dMt={format_date:(e,t)=>KDe(is(e),!t),format_utcdate:(e,t)=>S5(is(e),!t),timestamp:e=>+is(e),year:e=>is(e).getFullYear(),quarter:e=>Math.floor(is(e).getMonth()/3),month:e=>is(e).getMonth(),date:e=>is(e).getDate(),dayofweek:e=>is(e).getDay(),hours:e=>is(e).getHours(),minutes:e=>is(e).getMinutes(),seconds:e=>is(e).getSeconds(),milliseconds:e=>is(e).getMilliseconds(),utcyear:e=>is(e).getUTCFullYear(),utcquarter:e=>Math.floor(is(e).getUTCMonth()/3),utcmonth:e=>is(e).getUTCMonth(),utcdate:e=>is(e).getUTCDate(),utcdayofweek:e=>is(e).getUTCDay(),utchours:e=>is(e).getUTCHours(),utcminutes:e=>is(e).getUTCMinutes(),utcseconds:e=>is(e).getUTCSeconds(),utcmilliseconds:e=>is(e).getUTCMilliseconds(),datetime:oMt,dayofyear:uMt,week:cMt,utcdatetime:aMt,utcdayofyear:lMt,utcweek:fMt,now:Date.now};function VX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:_m(e)||_m(t)?+e==+t:bM(e)&&bM(t)?e+""==t+"":Sa(e)&&Sa(t)?hMt(e,t):!1}function hMt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Fme(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Fme(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!VX(e[o],t[o]))return!1}return!0}function Fme(e,t,n=VX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const pMt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let mMt=Math.random;function $x(){return mMt()}const gMt={random:$x,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function HX(e){return e instanceof Map}function yMt(e){return e instanceof Set}function e$(e){return HX(e)||yMt(e)}function SB(e){return Array.from(e)}const vMt={has:(e,t)=>e$(e)?e.has(t):e!=null?Lf(e,t):!1,keys:e=>HX(e)?SB(e.keys()):e!=null?Object.keys(e):[],values:e=>e$(e)?SB(e.values()):e!=null?Object.values(e):[],entries:e=>e$(e)?SB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):lr};function _Mt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Lf(t,e))return t[e];return n!==void 0?n:e}function bMt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const wMt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Yb={bin:tMt,equal:VX,recode:_Mt,sequence:bMt,...eMt,...dMt,...pMt,...gMt,...vMt,...wMt};function lA(e){return typeof e=="bigint"}function Eh(e){return e===void 0?e+"":lA(e)?e+"n":JSON.stringify(e)}function Tn(e,t=[],n=[]){return new EMt(e,Vu(t),Vu(n))}let EMt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Eh(n)}]`),...this.params.map(Eh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const ZDe=e=>Tn("any",e),e3e=()=>Tn("count"),t3e=e=>Tn("array_agg",e),n3e=e=>Tn("array_agg_distinct",e),r3e=(e,t)=>Tn("map_agg",[e,t]),i3e=(e,t)=>Tn("object_agg",[e,t]),s3e=(e,t)=>Tn("entries_agg",[e,t]),H2={...Yb,row_object:(...e)=>Tn("row_object",null,e.flat()),count:e3e,any:ZDe,array_agg:t3e,array_agg_distinct:n3e,object_agg:i3e,map_agg:r3e,entries_agg:s3e,valid:e=>Tn("valid",e),invalid:e=>Tn("invalid",e),distinct:e=>Tn("distinct",e),mode:e=>Tn("mode",e),sum:e=>Tn("sum",e),product:e=>Tn("product",e),mean:e=>Tn("mean",e),average:e=>Tn("average",e),variance:e=>Tn("variance",e),variancep:e=>Tn("variancep",e),stdev:e=>Tn("stdev",e),stdevp:e=>Tn("stdevp",e),min:e=>Tn("min",e),max:e=>Tn("max",e),quantile:(e,t)=>Tn("quantile",e,t),median:e=>Tn("median",e),covariance:(e,t)=>Tn("covariance",[e,t]),covariancep:(e,t)=>Tn("covariancep",[e,t]),corr:(e,t)=>Tn("corr",[e,t]),bins:(e,t,n,r)=>Tn("bins",e,[t,n,r]),row_number:()=>Tn("row_number"),rank:()=>Tn("rank"),avg_rank:()=>Tn("avg_rank"),dense_rank:()=>Tn("dense_rank"),percent_rank:()=>Tn("percent_rank"),cume_dist:()=>Tn("cume_dist"),ntile:e=>Tn("ntile",null,e),lag:(e,t,n)=>Tn("lag",e,[t,n]),lead:(e,t,n)=>Tn("lead",e,[t,n]),first_value:e=>Tn("first_value",e),last_value:e=>Tn("last_value",e),nth_value:(e,t)=>Tn("nth_value",e,t),fill_down:(e,t)=>Tn("fill_down",e,t),fill_up:(e,t)=>Tn("fill_up",e,t)};function xMt(e,t){e=e$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function SMt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function TMt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function CMt(e,t,n,r){const i=r==="map"||r===!0?r3e:r==="entries"?s3e:r==="object"?i3e:Pn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=xMt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:t3e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const AMt="ArrayPattern",IMt="ArrowFunctionExpression",OMt="FunctionExpression",y0="Identifier",Nx="Literal",o3e="MemberExpression",PMt="ObjectExpression",a3e="ObjectPattern",u3e="Property",WI="Column",kMt="Constant",RMt="Dictionary",$Mt="Function",NMt="Parameter",l3e="Op",li=(e,t)=>{const n=DMt[e.type];return n?n(e,t):Pn(`Unsupported expression construct: ${e.type}`)},TB=(e,t)=>"("+li(e.left,t)+" "+e.operator+" "+li(e.right,t)+")",CB=(e,t)=>"("+bd(e.params,t)+")=>"+li(e.body,t),jme=(e,t)=>li(e.callee,t)+"("+bd(e.arguments,t)+")",bd=(e,t,n=",")=>e.map(r=>li(r,t)).join(n),c3e=e=>e.computed?`[${Eh(e.name)}]`:`.${e.name}`,Bme=(e,t,n)=>{const r=e.table||"";return`data${r}${c3e(e)}.${n}(${t.index}${r})`},DMt={Constant:e=>e.raw,Column:(e,t)=>Bme(e,t,"get"),Dictionary:(e,t)=>Bme(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${c3e(e)}`,Op:(e,t)=>`op(${Eh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+li(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=li(e.object,t),i=li(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:jme,NewExpression:(e,t)=>"new "+jme(e,t),ArrayExpression:(e,t)=>"["+bd(e.elements,t)+"]",AssignmentExpression:TB,BinaryExpression:TB,LogicalExpression:TB,UnaryExpression:(e,t)=>"("+e.operator+li(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+li(e.test,t)+"?"+li(e.consequent,t)+":"+li(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+bd(e.properties,t)+"})",Property:(e,t)=>{const n=li(e.key,t);return(e.computed?`[${n}]`:n)+":"+li(e.value,t)},ArrowFunctionExpression:CB,FunctionExpression:CB,FunctionDeclaration:CB,ArrayPattern:(e,t)=>"["+bd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+bd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+bd(e.declarations,t,","),VariableDeclarator:(e,t)=>li(e.id,t)+"="+li(e.init,t),SpreadElement:(e,t)=>"..."+li(e.argument,t),BlockStatement:(e,t)=>"{"+bd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>li(e.expression,t),IfStatement:(e,t)=>"if ("+li(e.test,t)+")"+li(e.consequent,t)+(e.alternate?" else "+li(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+li(e.discriminant,t)+") {"+bd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+li(e.test,t):"default")+": "+bd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+li(e.argument,t),Program:(e,t)=>li(e.body[0],t)};function wM(e,t={index:"row"}){return li(e,t)}function MMt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function vE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:_m(e)?+e:pr(e)||qI(e)?`[${e.map(vE)}]`:bM(e)?e+"":LMt(e)}function LMt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${vE(e[r])}`;return t+="}",t}function EM(e,t){const n=e.length;return n===1?(r,i)=>vE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=vE(a)}return s}}function FMt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=vE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=vE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function xp(){}function jMt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Ps(e){return e.init=e.init||xp,e.add=e.add||xp,e.rem=e.rem||xp,e}function zme(e,t){return e.product_v=!1,e.product=t}const f3e={count:{create:()=>Ps({value:e=>e.count}),param:[]},array_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ps({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ps({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:lr}),param:[1]},valid:{create:()=>Ps({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ps({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=FMt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ps({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ps({value:e=>{let t=lr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:lr,add:(e,t)=>lA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>zme(e,1),value:e=>e.valid?e.product_v?zme(e,jMt(e.list.values())):e.product:void 0,add:(e,t)=>lA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:lr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ps({value:e=>e.valid?e.mean:lr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):lr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ps({value:e=>e.valid>1?e.dev/e.valid:lr}),param:[1],req:["variance"]},stdev:{create:()=>Ps({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):lr}),param:[1],req:["variance"]},stdevp:{create:()=>Ps({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):lr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=lr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===lr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=lr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===lr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ps({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ps({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):lr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Ps({value:e=>e.valid>1?e.cov/e.valid:lr}),param:[2],req:["covariance"]},corr:{create:()=>Ps({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):lr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Ps({value:i=>MMt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ume={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Vme={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},d3e={row_number:{create(){return{init:xp,value:e=>e.index+1}},param:[]},rank:Ume,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ume.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Vme,ntile:{create(e){e=+e,e>0||Pn("ntile num must be greater than zero.");const{init:t,value:n}=Vme.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=lr){return e=+e||1,{init:xp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=lr){return e=+e||1,{init:xp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:xp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:xp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Pn("nth_value nth must be greater than zero."),{init:xp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):lr}}},param:[1,1]},fill_down:{create(e=lr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return _f(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=lr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=BMt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function BMt(e,t,n){for(const r=e.size;n<r;++n)if(_f(e.value(n,t)))return n;return-1}function qX(e){return Lf(f3e,e)}function WX(e){return Lf(d3e,e)}function h3e(e){return Lf(Yb,e)||e==="row_object"}function p3e(e){return qX(e)&&f3e[e]}function m3e(e){return WX(e)&&d3e[e]}function ZS(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const GX={escape:(e,t,n)=>ZS(e,t,n),expr:(e,t)=>ZS(`(row,data,op)=>${e}`,Yb,t),expr2:(e,t)=>ZS(`(row0,data0,row,data)=>${e}`,Yb,t),join:(e,t)=>ZS(`(row1,data1,row2,data2)=>${e}`,Yb,t),param:(e,t)=>ZS(e,Yb,t)},zMt={"==":1,"!=":1,"===":1,"!==":1};function g3e(e,t,n=0,r,i){if(e.type=WI,e.name=t,e.table=n,i&&r&&Si(r.keyFor)){const s=zMt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===Nx&&UMt(i,e,s,r.keyFor(s.value))}return e}function UMt(e,t,n,r){return r<0?(e.type=Nx,e.value=!1,e.raw="false"):(t.type=RMt,n.value=r,n.raw=r+""),!0}function T5(e){return pr(e)?e:HX(e)?e.entries():e?Object.entries(e):[]}const y3e="row_object";function v3e(e,t){e.type=PMt;const n=e.properties=[];for(const r of T5(t)){const[i,s]=pr(r)?r:[r,r];n.push({type:u3e,key:{type:Nx,raw:Eh(s)},value:g3e({computed:!0},i)})}return e}function _3e(e){return wM(v3e({},e))}function b3e(e){return GX.expr(_3e(e))}function YX(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Ip(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Hme(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zn(e){return this instanceof Zn?(this.v=e,this):new Zn(e)}function Hv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Zn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function AB(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Zn(e[i](o)),done:!1}:s?s(o):o}:s}}function q2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Hme=="function"?Hme(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const VMt=new TextDecoder("utf-8"),lH=e=>VMt.decode(e),HMt=new TextEncoder,KX=e=>HMt.encode(e),qMt=e=>typeof e=="boolean",yu=e=>typeof e=="function",Ty=e=>e!=null&&Object(e)===e,C5=e=>Ty(e)&&yu(e.then),XX=e=>Ty(e)&&yu(e[Symbol.iterator]),A5=e=>Ty(e)&&yu(e[Symbol.asyncIterator]),WMt=e=>Ty(e)&&"done"in e&&"value"in e,w3e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,GMt=e=>Ty(e)&&yu(e.abort)&&yu(e.getWriter)&&!w3e(e),YMt=e=>Ty(e)&&yu(e.end)&&yu(e.write)&&qMt(e.writable)&&!w3e(e),KMt=e=>Ty(e)&&yu(e.clear)&&yu(e.bytes)&&yu(e.position)&&yu(e.setPosition)&&yu(e.capacity)&&yu(e.getBufferIdentifier)&&yu(e.createLong),QX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function XMt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function xM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function xh(e,t){const n=XMt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?xM(o,s,a):o=s;break}xM(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Qs(e,t){let n=WMt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=KX(n)),n instanceof ArrayBuffer?new e(n):n instanceof QX?new e(n):KMt(n)?Qs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const eT=e=>Qs(Int32Array,e),Lr=e=>Qs(Uint8Array,e),cH=e=>(e.next(),e);function*QMt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof QX?n(t):XX(t)?t:n(t);return yield*cH(function*(i){let s=null;do s=i.next(yield Qs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const JMt=e=>QMt(Uint8Array,e);function E3e(e,t){return Hv(this,arguments,function*(){if(C5(t))return yield Zn(yield Zn(yield*AB(q2(E3e(e,yield Zn(t))))));const r=function(o){return Hv(this,arguments,function*(){yield yield Zn(yield Zn(o))})},i=function(o){return Hv(this,arguments,function*(){yield Zn(yield*AB(q2(cH(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof QX?r(t):XX(t)?i(t):A5(t)?t:r(t);return yield Zn(yield*AB(q2(cH(function(o){return Hv(this,arguments,function*(){let a=null;do a=yield Zn(o.next(yield yield Zn(Qs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Zn(new e)})}const ZMt=e=>E3e(Uint8Array,e);function x3e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function eLt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const qme={fromIterable(e){return yk(tLt(e))},fromAsyncIterable(e){return yk(nLt(e))},fromDOMStream(e){return yk(rLt(e))},fromNodeStream(e){return yk(sLt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},yk=e=>(e.next(),e);function*tLt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?xh(r,o)[0]:([i,r,a]=xh(r,o),i)}({cmd:s,size:o}=yield null);const l=JMt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function nLt(e){return Hv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?xh(i,a)[0]:([s,i,u]=xh(i,a),s)}({cmd:o,size:a}=yield yield Zn(null));const c=ZMt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Zn(c.next()):yield Zn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Zn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Zn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Zn(c.return(new Uint8Array(0))))}return yield Zn(null)})}function rLt(e){return Hv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?xh(i,a)[0]:([s,i,u]=xh(i,a),s)}({cmd:o,size:a}=yield yield Zn(null));const c=new iLt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Zn(c.read()):yield Zn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Lr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Zn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Zn(c.cancel(f)))}finally{r===!1?yield Zn(c.cancel()):e.locked&&c.releaseLock()}return yield Zn(null)})}class iLt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Ip(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Ip(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Lr(n)),n})}}const IB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function sLt(e){return Hv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?xh(l,a)[0]:([c,l,u]=xh(l,a),c)}if({cmd:o,size:a}=yield yield Zn(null),e.isTTY)return yield yield Zn(new Uint8Array(0)),yield Zn(null);try{n[0]=IB(e,"end"),n[1]=IB(e,"error");do{if(n[2]=IB(e,"readable"),[r,s]=yield Zn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Lr(e.read(a-u)),c.byteLength<a-u&&(c=Lr(e.read()))):c=Lr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Zn(f()));while(a<u)}while(!i)}finally{yield Zn(d(n,r==="error"?s:null))}return yield Zn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var za;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(za||(za={}));var Hu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Hu||(Hu={}));var $o;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})($o||($o={}));var Sh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Sh||(Sh={}));var tn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(tn||(tn={}));var Th;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Th||(Th={}));var eo;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(eo||(eo={}));var ie;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(ie||(ie={}));var yp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(yp||(yp={}));const oLt=void 0;function $1(e){if(e===null)return"null";if(e===oLt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>$1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const aLt=Symbol.for("isArrowBigNum");function Jf(e,...t){return t.length===0?Object.setPrototypeOf(Qs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Jf.prototype[aLt]=!0;Jf.prototype.toJSON=function(){return`"${fA(this)}"`};Jf.prototype.valueOf=function(){return S3e(this)};Jf.prototype.toString=function(){return fA(this)};Jf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return S3e(this);case"string":return fA(this);case"default":return uLt(this)}return fA(this)};function Tw(...e){return Jf.apply(this,e)}function Cw(...e){return Jf.apply(this,e)}function cA(...e){return Jf.apply(this,e)}Object.setPrototypeOf(Tw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Cw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(cA.prototype,Object.create(Uint32Array.prototype));Object.assign(Tw.prototype,Jf.prototype,{constructor:Tw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Cw.prototype,Jf.prototype,{constructor:Cw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(cA.prototype,Jf.prototype,{constructor:cA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function S3e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const fA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return OB(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return OB(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${OB(t)}`},uLt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:fA(e);function OB(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class JX{static new(t,n){switch(n){case!0:return new Tw(t);case!1:return new Cw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Tw(t)}return t.byteLength===16?new cA(t):new Cw(t)}static signed(t){return new Tw(t)}static unsigned(t){return new Cw(t)}static decimal(t){return new cA(t)}constructor(t,n){return JX.new(t,n)}}function Ff(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var T3e,C3e,A3e,I3e,O3e,P3e,k3e,R3e,$3e,N3e,D3e,M3e,L3e,F3e,j3e,B3e,z3e,U3e,V3e,H3e;let $n=class fH{static isNull(t){return(t==null?void 0:t.typeId)===ie.Null}static isInt(t){return(t==null?void 0:t.typeId)===ie.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ie.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ie.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ie.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ie.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ie.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ie.Date}static isTime(t){return(t==null?void 0:t.typeId)===ie.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ie.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ie.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===ie.Duration}static isList(t){return(t==null?void 0:t.typeId)===ie.List}static isStruct(t){return(t==null?void 0:t.typeId)===ie.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ie.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ie.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ie.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ie.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ie.Dictionary}static isDenseUnion(t){return fH.isUnion(t)&&t.mode===Hu.Dense}static isSparseUnion(t){return fH.isUnion(t)&&t.mode===Hu.Sparse}get typeId(){return ie.NONE}};T3e=Symbol.toStringTag;$n[T3e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))($n.prototype);let bm=class extends $n{toString(){return"Null"}get typeId(){return ie.Null}};C3e=Symbol.toStringTag;bm[C3e]=(e=>e[Symbol.toStringTag]="Null")(bm.prototype);class eu extends $n{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ie.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}A3e=Symbol.toStringTag;eu[A3e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(eu.prototype);class ZX extends eu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class eQ extends eu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class z0 extends eu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class tQ extends eu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class nQ extends eu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class rQ extends eu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class iQ extends eu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class sQ extends eu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(ZX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(eQ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(z0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(tQ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(nQ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(rQ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(iQ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(sQ.prototype,"ArrayType",{value:BigUint64Array});class U0 extends $n{constructor(t){super(),this.precision=t}get typeId(){return ie.Float}get ArrayType(){switch(this.precision){case $o.HALF:return Uint16Array;case $o.SINGLE:return Float32Array;case $o.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}I3e=Symbol.toStringTag;U0[I3e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(U0.prototype);class q3e extends U0{constructor(){super($o.HALF)}}class oQ extends U0{constructor(){super($o.SINGLE)}}class aQ extends U0{constructor(){super($o.DOUBLE)}}Object.defineProperty(q3e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(oQ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(aQ.prototype,"ArrayType",{value:Float64Array});let dA=class extends $n{constructor(){super()}get typeId(){return ie.Binary}toString(){return"Binary"}};O3e=Symbol.toStringTag;dA[O3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(dA.prototype);let _E=class extends $n{constructor(){super()}get typeId(){return ie.Utf8}toString(){return"Utf8"}};P3e=Symbol.toStringTag;_E[P3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(_E.prototype);let hA=class extends $n{constructor(){super()}get typeId(){return ie.Bool}toString(){return"Bool"}};k3e=Symbol.toStringTag;hA[k3e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(hA.prototype);let SM=class extends $n{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ie.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};R3e=Symbol.toStringTag;SM[R3e]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(SM.prototype);class bE extends $n{constructor(t){super(),this.unit=t}get typeId(){return ie.Date}toString(){return`Date${(this.unit+1)*32}<${Sh[this.unit]}>`}}$3e=Symbol.toStringTag;bE[$3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(bE.prototype);class lLt extends bE{constructor(){super(Sh.DAY)}}class cLt extends bE{constructor(){super(Sh.MILLISECOND)}}class wm extends $n{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ie.Time}toString(){return`Time${this.bitWidth}<${tn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}N3e=Symbol.toStringTag;wm[N3e]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(wm.prototype);class fLt extends wm{constructor(){super(tn.SECOND,32)}}class dLt extends wm{constructor(){super(tn.MILLISECOND,32)}}class hLt extends wm{constructor(){super(tn.MICROSECOND,64)}}class pLt extends wm{constructor(){super(tn.NANOSECOND,64)}}class TM extends $n{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ie.Timestamp}toString(){return`Timestamp<${tn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}D3e=Symbol.toStringTag;TM[D3e]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(TM.prototype);class wE extends $n{constructor(t){super(),this.unit=t}get typeId(){return ie.Interval}toString(){return`Interval<${Th[this.unit]}>`}}M3e=Symbol.toStringTag;wE[M3e]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(wE.prototype);class mLt extends wE{constructor(){super(Th.DAY_TIME)}}class gLt extends wE{constructor(){super(Th.YEAR_MONTH)}}let CM=class extends $n{constructor(t){super(),this.unit=t}get typeId(){return ie.Duration}toString(){return`Duration<${tn[this.unit]}>`}};L3e=Symbol.toStringTag;CM[L3e]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(CM.prototype);let EE=class extends $n{constructor(t){super(),this.children=[t]}get typeId(){return ie.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};F3e=Symbol.toStringTag;EE[F3e]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(EE.prototype);class ha extends $n{constructor(t){super(),this.children=t}get typeId(){return ie.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}j3e=Symbol.toStringTag;ha[j3e]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ha.prototype);class pA extends $n{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ie.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}B3e=Symbol.toStringTag;pA[B3e]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(pA.prototype);let AM=class extends $n{constructor(t){super(),this.byteWidth=t}get typeId(){return ie.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};z3e=Symbol.toStringTag;AM[z3e]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(AM.prototype);let xE=class extends $n{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ie.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};U3e=Symbol.toStringTag;xE[U3e]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(xE.prototype);class mA extends $n{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return ie.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}V3e=Symbol.toStringTag;mA[V3e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(mA.prototype);const yLt=(e=>()=>++e)(-1);class V0 extends $n{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?yLt():Ff(r)}get typeId(){return ie.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}H3e=Symbol.toStringTag;V0[H3e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(V0.prototype);function xd(e){const t=e;switch(e.typeId){case ie.Decimal:return e.bitWidth/32;case ie.Timestamp:return 2;case ie.Date:return 1+t.unit;case ie.Interval:return 1+t.unit;case ie.FixedSizeList:return t.listSize;case ie.FixedSizeBinary:return t.byteWidth;default:return 1}}class Nn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return vLt(this,t,n)}getVisitFnByTypeId(t,n=!0){return xb(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function vLt(e,t,n=!0){return typeof t=="number"?xb(e,t,n):typeof t=="string"&&t in ie?xb(e,ie[t],n):t&&t instanceof $n?xb(e,Wme(t),n):t!=null&&t.type&&t.type instanceof $n?xb(e,Wme(t.type),n):xb(e,ie.NONE,n)}function xb(e,t,n=!0){let r=null;switch(t){case ie.Null:r=e.visitNull;break;case ie.Bool:r=e.visitBool;break;case ie.Int:r=e.visitInt;break;case ie.Int8:r=e.visitInt8||e.visitInt;break;case ie.Int16:r=e.visitInt16||e.visitInt;break;case ie.Int32:r=e.visitInt32||e.visitInt;break;case ie.Int64:r=e.visitInt64||e.visitInt;break;case ie.Uint8:r=e.visitUint8||e.visitInt;break;case ie.Uint16:r=e.visitUint16||e.visitInt;break;case ie.Uint32:r=e.visitUint32||e.visitInt;break;case ie.Uint64:r=e.visitUint64||e.visitInt;break;case ie.Float:r=e.visitFloat;break;case ie.Float16:r=e.visitFloat16||e.visitFloat;break;case ie.Float32:r=e.visitFloat32||e.visitFloat;break;case ie.Float64:r=e.visitFloat64||e.visitFloat;break;case ie.Utf8:r=e.visitUtf8;break;case ie.Binary:r=e.visitBinary;break;case ie.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ie.Date:r=e.visitDate;break;case ie.DateDay:r=e.visitDateDay||e.visitDate;break;case ie.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ie.Timestamp:r=e.visitTimestamp;break;case ie.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ie.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ie.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ie.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ie.Time:r=e.visitTime;break;case ie.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ie.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ie.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ie.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ie.Decimal:r=e.visitDecimal;break;case ie.List:r=e.visitList;break;case ie.Struct:r=e.visitStruct;break;case ie.Union:r=e.visitUnion;break;case ie.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ie.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ie.Dictionary:r=e.visitDictionary;break;case ie.Interval:r=e.visitInterval;break;case ie.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ie.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ie.Duration:r=e.visitDuration;break;case ie.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case ie.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case ie.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case ie.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case ie.FixedSizeList:r=e.visitFixedSizeList;break;case ie.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ie[t]}'`)}function Wme(e){switch(e.typeId){case ie.Null:return ie.Null;case ie.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ie.Int8:ie.Uint8;case 16:return n?ie.Int16:ie.Uint16;case 32:return n?ie.Int32:ie.Uint32;case 64:return n?ie.Int64:ie.Uint64}return ie.Int}case ie.Float:switch(e.precision){case $o.HALF:return ie.Float16;case $o.SINGLE:return ie.Float32;case $o.DOUBLE:return ie.Float64}return ie.Float;case ie.Binary:return ie.Binary;case ie.Utf8:return ie.Utf8;case ie.Bool:return ie.Bool;case ie.Decimal:return ie.Decimal;case ie.Time:switch(e.unit){case tn.SECOND:return ie.TimeSecond;case tn.MILLISECOND:return ie.TimeMillisecond;case tn.MICROSECOND:return ie.TimeMicrosecond;case tn.NANOSECOND:return ie.TimeNanosecond}return ie.Time;case ie.Timestamp:switch(e.unit){case tn.SECOND:return ie.TimestampSecond;case tn.MILLISECOND:return ie.TimestampMillisecond;case tn.MICROSECOND:return ie.TimestampMicrosecond;case tn.NANOSECOND:return ie.TimestampNanosecond}return ie.Timestamp;case ie.Date:switch(e.unit){case Sh.DAY:return ie.DateDay;case Sh.MILLISECOND:return ie.DateMillisecond}return ie.Date;case ie.Interval:switch(e.unit){case Th.DAY_TIME:return ie.IntervalDayTime;case Th.YEAR_MONTH:return ie.IntervalYearMonth}return ie.Interval;case ie.Duration:switch(e.unit){case tn.SECOND:return ie.DurationSecond;case tn.MILLISECOND:return ie.DurationMillisecond;case tn.MICROSECOND:return ie.DurationMicrosecond;case tn.NANOSECOND:return ie.DurationNanosecond}return ie.Duration;case ie.Map:return ie.Map;case ie.List:return ie.List;case ie.Struct:return ie.Struct;case ie.Union:switch(e.mode){case Hu.Dense:return ie.DenseUnion;case Hu.Sparse:return ie.SparseUnion}return ie.Union;case ie.FixedSizeBinary:return ie.FixedSizeBinary;case ie.FixedSizeList:return ie.FixedSizeList;case ie.Dictionary:return ie.Dictionary}throw new Error(`Unrecognized type '${ie[e.typeId]}'`)}Nn.prototype.visitInt8=null;Nn.prototype.visitInt16=null;Nn.prototype.visitInt32=null;Nn.prototype.visitInt64=null;Nn.prototype.visitUint8=null;Nn.prototype.visitUint16=null;Nn.prototype.visitUint32=null;Nn.prototype.visitUint64=null;Nn.prototype.visitFloat16=null;Nn.prototype.visitFloat32=null;Nn.prototype.visitFloat64=null;Nn.prototype.visitDateDay=null;Nn.prototype.visitDateMillisecond=null;Nn.prototype.visitTimestampSecond=null;Nn.prototype.visitTimestampMillisecond=null;Nn.prototype.visitTimestampMicrosecond=null;Nn.prototype.visitTimestampNanosecond=null;Nn.prototype.visitTimeSecond=null;Nn.prototype.visitTimeMillisecond=null;Nn.prototype.visitTimeMicrosecond=null;Nn.prototype.visitTimeNanosecond=null;Nn.prototype.visitDenseUnion=null;Nn.prototype.visitSparseUnion=null;Nn.prototype.visitIntervalDayTime=null;Nn.prototype.visitIntervalYearMonth=null;Nn.prototype.visitDuration=null;Nn.prototype.visitDurationSecond=null;Nn.prototype.visitDurationMillisecond=null;Nn.prototype.visitDurationMicrosecond=null;Nn.prototype.visitDurationNanosecond=null;const W3e=new Float64Array(1),sb=new Uint32Array(W3e.buffer);function G3e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function Y3e(e){if(e!==e)return 32256;W3e[0]=e;const t=(sb[1]&2147483648)>>16&65535;let n=sb[1]&2146435072,r=0;return n>=1089470464?sb[0]>0?n=31744:(n=(n&2080374784)>>16,r=(sb[1]&1048575)>>10):n<=1056964608?(r=1048576+(sb[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(sb[1]&1048575)+512>>10),t|n|r&65535}class an extends Nn{}function hn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const _Lt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},uQ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},bLt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},wLt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},K3e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},ELt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},zm=({values:e},t,n)=>{e[t]=n},lQ=({values:e},t,n)=>{e[t]=n},X3e=({values:e},t,n)=>{e[t]=Y3e(n)},xLt=(e,t,n)=>{switch(e.type.precision){case $o.HALF:return X3e(e,t,n);case $o.SINGLE:case $o.DOUBLE:return lQ(e,t,n)}},cQ=({values:e},t,n)=>{_Lt(e,t,n.valueOf())},fQ=({values:e},t,n)=>{uQ(e,t*2,n.valueOf())},Q3e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},SLt=({values:e,valueOffsets:t},n,r)=>K3e(e,t,n,r),TLt=({values:e,valueOffsets:t},n,r)=>{K3e(e,t,n,KX(r))},J3e=(e,t,n)=>{e.type.unit===Sh.DAY?cQ(e,t,n):fQ(e,t,n)},dQ=({values:e},t,n)=>uQ(e,t*2,n/1e3),hQ=({values:e},t,n)=>uQ(e,t*2,n),pQ=({values:e},t,n)=>bLt(e,t*2,n),mQ=({values:e},t,n)=>wLt(e,t*2,n),Z3e=(e,t,n)=>{switch(e.type.unit){case tn.SECOND:return dQ(e,t,n);case tn.MILLISECOND:return hQ(e,t,n);case tn.MICROSECOND:return pQ(e,t,n);case tn.NANOSECOND:return mQ(e,t,n)}},gQ=({values:e},t,n)=>{e[t]=n},yQ=({values:e},t,n)=>{e[t]=n},vQ=({values:e},t,n)=>{e[t]=n},_Q=({values:e},t,n)=>{e[t]=n},eMe=(e,t,n)=>{switch(e.type.unit){case tn.SECOND:return gQ(e,t,n);case tn.MILLISECOND:return yQ(e,t,n);case tn.MICROSECOND:return vQ(e,t,n);case tn.NANOSECOND:return _Q(e,t,n)}},tMe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},CLt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Tc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},ALt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Tc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},ILt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),OLt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),PLt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),kLt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),RLt=(e,t,n)=>{const r=e.type.children.map(s=>Tc.getVisitFn(s.type)),i=n instanceof Map?PLt(t,n):n instanceof mr?OLt(t,n):Array.isArray(n)?ILt(t,n):kLt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},$Lt=(e,t,n)=>{e.type.mode===Hu.Dense?nMe(e,t,n):rMe(e,t,n)},nMe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Tc.visit(i,e.valueOffsets[t],n)},rMe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Tc.visit(i,t,n)},NLt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},iMe=(e,t,n)=>{e.type.unit===Th.DAY_TIME?bQ(e,t,n):wQ(e,t,n)},bQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},wQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},EQ=({values:e},t,n)=>{e[t]=n},xQ=({values:e},t,n)=>{e[t]=n},SQ=({values:e},t,n)=>{e[t]=n},TQ=({values:e},t,n)=>{e[t]=n},sMe=(e,t,n)=>{switch(e.type.unit){case tn.SECOND:return EQ(e,t,n);case tn.MILLISECOND:return xQ(e,t,n);case tn.MICROSECOND:return SQ(e,t,n);case tn.NANOSECOND:return TQ(e,t,n)}},DLt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Tc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};an.prototype.visitBool=hn(ELt);an.prototype.visitInt=hn(zm);an.prototype.visitInt8=hn(zm);an.prototype.visitInt16=hn(zm);an.prototype.visitInt32=hn(zm);an.prototype.visitInt64=hn(zm);an.prototype.visitUint8=hn(zm);an.prototype.visitUint16=hn(zm);an.prototype.visitUint32=hn(zm);an.prototype.visitUint64=hn(zm);an.prototype.visitFloat=hn(xLt);an.prototype.visitFloat16=hn(X3e);an.prototype.visitFloat32=hn(lQ);an.prototype.visitFloat64=hn(lQ);an.prototype.visitUtf8=hn(TLt);an.prototype.visitBinary=hn(SLt);an.prototype.visitFixedSizeBinary=hn(Q3e);an.prototype.visitDate=hn(J3e);an.prototype.visitDateDay=hn(cQ);an.prototype.visitDateMillisecond=hn(fQ);an.prototype.visitTimestamp=hn(Z3e);an.prototype.visitTimestampSecond=hn(dQ);an.prototype.visitTimestampMillisecond=hn(hQ);an.prototype.visitTimestampMicrosecond=hn(pQ);an.prototype.visitTimestampNanosecond=hn(mQ);an.prototype.visitTime=hn(eMe);an.prototype.visitTimeSecond=hn(gQ);an.prototype.visitTimeMillisecond=hn(yQ);an.prototype.visitTimeMicrosecond=hn(vQ);an.prototype.visitTimeNanosecond=hn(_Q);an.prototype.visitDecimal=hn(tMe);an.prototype.visitList=hn(CLt);an.prototype.visitStruct=hn(RLt);an.prototype.visitUnion=hn($Lt);an.prototype.visitDenseUnion=hn(nMe);an.prototype.visitSparseUnion=hn(rMe);an.prototype.visitDictionary=hn(NLt);an.prototype.visitInterval=hn(iMe);an.prototype.visitIntervalDayTime=hn(bQ);an.prototype.visitIntervalYearMonth=hn(wQ);an.prototype.visitDuration=hn(sMe);an.prototype.visitDurationSecond=hn(EQ);an.prototype.visitDurationMillisecond=hn(xQ);an.prototype.visitDurationMicrosecond=hn(SQ);an.prototype.visitDurationNanosecond=hn(TQ);an.prototype.visitFixedSizeList=hn(DLt);an.prototype.visitMap=hn(ALt);const Tc=new an,sf=Symbol.for("parent"),Aw=Symbol.for("rowIndex");class CQ{constructor(t,n){return this[sf]=t,this[Aw]=n,new Proxy(this,new LLt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Aw],n=this[sf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=qu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${$1(t)}: ${$1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new MLt(this[sf],this[Aw])}}class MLt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,qu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(CQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[sf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Aw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class LLt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[sf].type.children.map(n=>n.name)}has(t,n){return t[sf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[sf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[sf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=qu.visit(t[sf].children[r],t[Aw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[sf].type.children.findIndex(s=>s.name===n);return i!==-1?(Tc.visit(t[sf].children[i],t[Aw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class nn extends Nn{}function un(e){return(t,n)=>t.getValid(n)?e(t,n):null}const FLt=(e,t)=>864e5*e[t],AQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),jLt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,BLt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,oMe=e=>new Date(e),zLt=(e,t)=>oMe(FLt(e,t)),ULt=(e,t)=>oMe(AQ(e,t)),VLt=(e,t)=>null,aMe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},HLt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},uMe=({values:e},t)=>zLt(e,t),lMe=({values:e},t)=>ULt(e,t*2),Cy=({stride:e,values:t},n)=>t[e*n],qLt=({stride:e,values:t},n)=>G3e(t[e*n]),cMe=({values:e},t)=>e[t],WLt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),GLt=({values:e,valueOffsets:t},n)=>aMe(e,t,n),YLt=({values:e,valueOffsets:t},n)=>{const r=aMe(e,t,n);return r!==null?lH(r):null},KLt=({values:e},t)=>e[t],XLt=({type:e,values:t},n)=>e.precision!==$o.HALF?t[n]:G3e(t[n]),QLt=(e,t)=>e.type.unit===Sh.DAY?uMe(e,t):lMe(e,t),fMe=({values:e},t)=>1e3*AQ(e,t*2),dMe=({values:e},t)=>AQ(e,t*2),hMe=({values:e},t)=>jLt(e,t*2),pMe=({values:e},t)=>BLt(e,t*2),JLt=(e,t)=>{switch(e.type.unit){case tn.SECOND:return fMe(e,t);case tn.MILLISECOND:return dMe(e,t);case tn.MICROSECOND:return hMe(e,t);case tn.NANOSECOND:return pMe(e,t)}},mMe=({values:e},t)=>e[t],gMe=({values:e},t)=>e[t],yMe=({values:e},t)=>e[t],vMe=({values:e},t)=>e[t],ZLt=(e,t)=>{switch(e.type.unit){case tn.SECOND:return mMe(e,t);case tn.MILLISECOND:return gMe(e,t);case tn.MICROSECOND:return yMe(e,t);case tn.NANOSECOND:return vMe(e,t)}},e6t=({values:e,stride:t},n)=>JX.decimal(e.subarray(t*n,t*(n+1))),t6t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new mr([u])},n6t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new I5(o.slice(i,s-i))},r6t=(e,t)=>new CQ(e,t),i6t=(e,t)=>e.type.mode===Hu.Dense?_Me(e,t):bMe(e,t),_Me=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return qu.visit(r,e.valueOffsets[t])},bMe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return qu.visit(r,t)},s6t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},o6t=(e,t)=>e.type.unit===Th.DAY_TIME?wMe(e,t):EMe(e,t),wMe=({values:e},t)=>e.subarray(2*t,2*(t+1)),EMe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},xMe=({values:e},t)=>e[t],SMe=({values:e},t)=>e[t],TMe=({values:e},t)=>e[t],CMe=({values:e},t)=>e[t],a6t=(e,t)=>{switch(e.type.unit){case tn.SECOND:return xMe(e,t);case tn.MILLISECOND:return SMe(e,t);case tn.MICROSECOND:return TMe(e,t);case tn.NANOSECOND:return CMe(e,t)}},u6t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new mr([s])};nn.prototype.visitNull=un(VLt);nn.prototype.visitBool=un(HLt);nn.prototype.visitInt=un(KLt);nn.prototype.visitInt8=un(Cy);nn.prototype.visitInt16=un(Cy);nn.prototype.visitInt32=un(Cy);nn.prototype.visitInt64=un(cMe);nn.prototype.visitUint8=un(Cy);nn.prototype.visitUint16=un(Cy);nn.prototype.visitUint32=un(Cy);nn.prototype.visitUint64=un(cMe);nn.prototype.visitFloat=un(XLt);nn.prototype.visitFloat16=un(qLt);nn.prototype.visitFloat32=un(Cy);nn.prototype.visitFloat64=un(Cy);nn.prototype.visitUtf8=un(YLt);nn.prototype.visitBinary=un(GLt);nn.prototype.visitFixedSizeBinary=un(WLt);nn.prototype.visitDate=un(QLt);nn.prototype.visitDateDay=un(uMe);nn.prototype.visitDateMillisecond=un(lMe);nn.prototype.visitTimestamp=un(JLt);nn.prototype.visitTimestampSecond=un(fMe);nn.prototype.visitTimestampMillisecond=un(dMe);nn.prototype.visitTimestampMicrosecond=un(hMe);nn.prototype.visitTimestampNanosecond=un(pMe);nn.prototype.visitTime=un(ZLt);nn.prototype.visitTimeSecond=un(mMe);nn.prototype.visitTimeMillisecond=un(gMe);nn.prototype.visitTimeMicrosecond=un(yMe);nn.prototype.visitTimeNanosecond=un(vMe);nn.prototype.visitDecimal=un(e6t);nn.prototype.visitList=un(t6t);nn.prototype.visitStruct=un(r6t);nn.prototype.visitUnion=un(i6t);nn.prototype.visitDenseUnion=un(_Me);nn.prototype.visitSparseUnion=un(bMe);nn.prototype.visitDictionary=un(s6t);nn.prototype.visitInterval=un(o6t);nn.prototype.visitIntervalDayTime=un(wMe);nn.prototype.visitIntervalYearMonth=un(EMe);nn.prototype.visitDuration=un(a6t);nn.prototype.visitDurationSecond=un(xMe);nn.prototype.visitDurationMillisecond=un(SMe);nn.prototype.visitDurationMicrosecond=un(TMe);nn.prototype.visitDurationNanosecond=un(CMe);nn.prototype.visitFixedSizeList=un(u6t);nn.prototype.visitMap=un(n6t);const qu=new nn,hf=Symbol.for("keys"),Iw=Symbol.for("vals");class I5{constructor(t){return this[hf]=new mr([t.children[0]]).memoize(),this[Iw]=t.children[1],new Proxy(this,new c6t)}[Symbol.iterator](){return new l6t(this[hf],this[Iw])}get size(){return this[hf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[hf],n=this[Iw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=qu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${$1(t)}: ${$1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class l6t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),qu.visit(this.vals,t)]})}}class c6t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[hf].toArray().map(String)}has(t,n){return t[hf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[hf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[hf].indexOf(n);if(r!==-1){const i=qu.visit(Reflect.get(t,Iw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[hf].indexOf(n);return i!==-1?(Tc.visit(Reflect.get(t,Iw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(I5.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[hf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Iw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Gme;function AMe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Gme=s,s=o,o=Gme),o>i&&(o=i),r?r(e,s,o):[s,o]}const Yme=e=>e!==e;function Dx(e){if(typeof e!=="object"||e===null)return Yme(e)?Yme:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?eLt(e,n):!1:e instanceof Map?d6t(e):Array.isArray(e)?f6t(e):e instanceof mr?h6t(e):p6t(e,!0)}function f6t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Dx(e[n]);return O5(t)}function d6t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Dx(r);return O5(n)}function h6t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Dx(e.get(n));return O5(t)}function p6t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Dx(e[n[i]]);return O5(r,n)}function O5(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return m6t(e,n);case Map:return Kme(e,n,n.keys());case I5:case CQ:case Object:case void 0:return Kme(e,n,t||Object.keys(n))}return n instanceof mr?g6t(e,n):!1}}function m6t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function g6t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Kme(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function IMe(e,t,n,r){return(n&1<<r)!==0}function y6t(e,t,n,r){return(n&1<<r)>>r}function IM(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):OMe(new IQ(n,e,t,null,IMe)).subarray(0,r)),i}return n}function OMe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class IQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function dH(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new IQ(e,t,n-t,e,y6t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return dH(e,t,i)+dH(e,r,n)+v6t(e,i>>3,r-i>>3)}function v6t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=PB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=PB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=PB(s.getUint8(i)),i+=1;return r}function PB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const _6t=-1;class Mr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return $n.isSparseUnion(t)?this.children.some(n=>n.nullable):$n.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if($n.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=_6t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-dH(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Mr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=xd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if($n.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Hu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if($n.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Hu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(IM(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Mr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ie.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(IM(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[yp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[yp.TYPE])&&(o[yp.TYPE]=s.subarray(t,t+n)),(s=o[yp.OFFSET])&&(o[yp.OFFSET]=s.subarray(t,t+n+1))||(s=o[yp.DATA])&&(o[yp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Mr.prototype.children=Object.freeze([]);class W2 extends Nn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Mr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.data),s=Lr(t.nullBitmap),o=eT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.data),s=Lr(t.nullBitmap),o=eT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Lr(t.nullBitmap),o=eT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Lr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Qs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if($n.isSparseUnion(n))return new Mr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=eT(t.valueOffsets);return new Mr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.indices.ArrayType,t.data),{["dictionary"]:o=new mr([new W2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Lr(t.nullBitmap),s=Qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new W2().visit({type:n.valueType})}=t,s=Lr(t.nullBitmap),{["length"]:o=i.length/xd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new W2().visit({type:n.childType})}=t,s=Lr(t.nullBitmap),o=eT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mr(n,r,a,u,[o,void 0,s],[i])}}const b6t=new W2;function ua(e){return b6t.visit(e)}class Xme{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function PMe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function kMe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function RMe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function OQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function PQ(e,t){return e.getValid(t)}function Ow(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return OQ(r,this._offsets,n,t)}}function $Me(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=OQ(s,this._offsets,r,n);return t=void 0,o}}function NMe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):OQ(s,this._offsets,i,n);return t=void 0,o}}class rn extends Nn{}function w6t(e,t){return t===null&&e.length>0?0:-1}function E6t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new IQ(n,e.offset+(t||0),e.length,n,IMe)){if(!i)return r;++r}return-1}function _n(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case ie.Union:break;case ie.Dictionary:break;default:return E6t(e,n)}const r=qu.getVisitFn(e),i=Dx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function DMe(e,t,n){const r=qu.getVisitFn(e),i=Dx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}rn.prototype.visitNull=w6t;rn.prototype.visitBool=_n;rn.prototype.visitInt=_n;rn.prototype.visitInt8=_n;rn.prototype.visitInt16=_n;rn.prototype.visitInt32=_n;rn.prototype.visitInt64=_n;rn.prototype.visitUint8=_n;rn.prototype.visitUint16=_n;rn.prototype.visitUint32=_n;rn.prototype.visitUint64=_n;rn.prototype.visitFloat=_n;rn.prototype.visitFloat16=_n;rn.prototype.visitFloat32=_n;rn.prototype.visitFloat64=_n;rn.prototype.visitUtf8=_n;rn.prototype.visitBinary=_n;rn.prototype.visitFixedSizeBinary=_n;rn.prototype.visitDate=_n;rn.prototype.visitDateDay=_n;rn.prototype.visitDateMillisecond=_n;rn.prototype.visitTimestamp=_n;rn.prototype.visitTimestampSecond=_n;rn.prototype.visitTimestampMillisecond=_n;rn.prototype.visitTimestampMicrosecond=_n;rn.prototype.visitTimestampNanosecond=_n;rn.prototype.visitTime=_n;rn.prototype.visitTimeSecond=_n;rn.prototype.visitTimeMillisecond=_n;rn.prototype.visitTimeMicrosecond=_n;rn.prototype.visitTimeNanosecond=_n;rn.prototype.visitDecimal=_n;rn.prototype.visitList=_n;rn.prototype.visitStruct=_n;rn.prototype.visitUnion=_n;rn.prototype.visitDenseUnion=DMe;rn.prototype.visitSparseUnion=DMe;rn.prototype.visitDictionary=_n;rn.prototype.visitInterval=_n;rn.prototype.visitIntervalDayTime=_n;rn.prototype.visitIntervalYearMonth=_n;rn.prototype.visitDuration=_n;rn.prototype.visitDurationSecond=_n;rn.prototype.visitDurationMillisecond=_n;rn.prototype.visitDurationMicrosecond=_n;rn.prototype.visitDurationNanosecond=_n;rn.prototype.visitFixedSizeList=_n;rn.prototype.visitMap=_n;const OM=new rn;class sn extends Nn{}function ln(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ie.Timestamp||t instanceof eu&&t.bitWidth!==64||t instanceof wm&&t.bitWidth!==64||t instanceof U0&&t.precision!==$o.HALF))return new Xme(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Xme(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new x6t(o)})}class x6t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}sn.prototype.visitNull=ln;sn.prototype.visitBool=ln;sn.prototype.visitInt=ln;sn.prototype.visitInt8=ln;sn.prototype.visitInt16=ln;sn.prototype.visitInt32=ln;sn.prototype.visitInt64=ln;sn.prototype.visitUint8=ln;sn.prototype.visitUint16=ln;sn.prototype.visitUint32=ln;sn.prototype.visitUint64=ln;sn.prototype.visitFloat=ln;sn.prototype.visitFloat16=ln;sn.prototype.visitFloat32=ln;sn.prototype.visitFloat64=ln;sn.prototype.visitUtf8=ln;sn.prototype.visitBinary=ln;sn.prototype.visitFixedSizeBinary=ln;sn.prototype.visitDate=ln;sn.prototype.visitDateDay=ln;sn.prototype.visitDateMillisecond=ln;sn.prototype.visitTimestamp=ln;sn.prototype.visitTimestampSecond=ln;sn.prototype.visitTimestampMillisecond=ln;sn.prototype.visitTimestampMicrosecond=ln;sn.prototype.visitTimestampNanosecond=ln;sn.prototype.visitTime=ln;sn.prototype.visitTimeSecond=ln;sn.prototype.visitTimeMillisecond=ln;sn.prototype.visitTimeMicrosecond=ln;sn.prototype.visitTimeNanosecond=ln;sn.prototype.visitDecimal=ln;sn.prototype.visitList=ln;sn.prototype.visitStruct=ln;sn.prototype.visitUnion=ln;sn.prototype.visitDenseUnion=ln;sn.prototype.visitSparseUnion=ln;sn.prototype.visitDictionary=ln;sn.prototype.visitInterval=ln;sn.prototype.visitIntervalDayTime=ln;sn.prototype.visitIntervalYearMonth=ln;sn.prototype.visitDuration=ln;sn.prototype.visitDurationSecond=ln;sn.prototype.visitDurationMillisecond=ln;sn.prototype.visitDurationMicrosecond=ln;sn.prototype.visitDurationNanosecond=ln;sn.prototype.visitFixedSizeList=ln;sn.prototype.visitMap=ln;const kQ=new sn,S6t=(e,t)=>e+t;class Ay extends Nn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===tn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ch.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ch.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const T6t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),C6t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),A6t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ch.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},I6t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ch.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},O6t=(e,t)=>e.type.mode===Hu.Dense?MMe(e,t):LMe(e,t),MMe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ch.visit(t[s],r[i])},LMe=({children:e},t)=>4+Ch.visitMany(e,e.map(()=>t)).reduce(S6t,0);Ay.prototype.visitUtf8=T6t;Ay.prototype.visitBinary=C6t;Ay.prototype.visitList=A6t;Ay.prototype.visitFixedSizeList=I6t;Ay.prototype.visitUnion=O6t;Ay.prototype.visitDenseUnion=MMe;Ay.prototype.visitSparseUnion=LMe;const Ch=new Ay;var FMe;const jMe={},BMe={};class mr{constructor(t){var n,r,i;const s=t[0]instanceof mr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Mr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=jMe[o.typeId],f=s[0];this.isValid=d=>PQ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,BMe[o.typeId]),this._offsets=kMe(s);break}this.data=s,this.type=o,this.stride=xd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return PMe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ie[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return kQ.visit(this)}concat(...t){return new mr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mr(AMe(this,t,n,({data:r,_offsets:i},s,o)=>RMe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ie.Int:case ie.Float:case ie.Decimal:case ie.Time:case ie.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return $n.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if($n.isDictionary(this.type)){const t=new PM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mr(n)}return new PM(this)}unmemoize(){if($n.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mr(n)}return this}}FMe=Symbol.toStringTag;mr[FMe]=(e=>{e.type=$n.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ie).map(n=>ie[n]).filter(n=>typeof n=="number"&&n!==ie.NONE);for(const n of t){const r=qu.getVisitFnByTypeId(n),i=Tc.getVisitFnByTypeId(n),s=OM.getVisitFnByTypeId(n),o=Ch.getVisitFnByTypeId(n);jMe[n]={get:r,set:i,indexOf:s,byteLength:o},BMe[n]=Object.create(e,{isValid:{value:Ow(PQ)},get:{value:Ow(qu.getVisitFnByTypeId(n))},set:{value:$Me(Tc.getVisitFnByTypeId(n))},indexOf:{value:NMe(OM.getVisitFnByTypeId(n))},getByteLength:{value:Ow(Ch.getVisitFnByTypeId(n))}})}return"Vector"})(mr.prototype);class PM extends mr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new PM(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function P6t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${k6t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function k6t(e){return typeof e!="bigint"?$1(e):`${$1(e)}n`}const kB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,R6t=(e,t=0)=>e.length>=t?e.subarray(0,t):xM(new e.constructor(t),e,0);class P5{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?kB(r*1,this.BYTES_PER_ELEMENT):kB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=kB(t*this.stride,this.BYTES_PER_ELEMENT);const n=R6t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=xM(new this.ArrayType(t),this.buffer)}}P5.prototype.offset=0;class GI extends P5{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class zMe extends GI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class UMe extends GI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Zu=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=xd(t),this._nulls=new zMe,n&&n.length>0&&(this._isValid=P6t(n))}toVector(){return new mr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ua({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Zu.prototype.length=1;Zu.prototype.stride=1;Zu.prototype.children=null;Zu.prototype.finished=!1;Zu.prototype.nullValues=null;Zu.prototype._isValid=()=>!0;class Um extends Zu{constructor(t){super(t),this._values=new GI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class k5 extends Zu{constructor(t){super(t),this._pendingLength=0,this._offsets=new UMe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof I5?n[hf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class hH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const RB=2,Dd=4,Op=4,Qr=4,Ag=new Int32Array(2),Qme=new Float32Array(Ag.buffer),Jme=new Float64Array(Ag.buffer),vk=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var pH;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(pH||(pH={}));let kM=class VMe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new VMe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ag[0]=this.readInt32(t),Qme[0]}readFloat64(t){return Ag[vk?0:1]=this.readInt32(t),Ag[vk?1:0]=this.readInt32(t+4),Jme[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Qme[0]=n,this.writeInt32(t,Ag[0])}writeFloat64(t,n){Jme[0]=n,this.writeInt32(t,Ag[vk?0:1]),this.writeInt32(t+4,Ag[vk?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Dd+Op)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Op;n++)t+=String.fromCharCode(this.readInt8(this.position_+Dd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Dd;const i=this.bytes_.subarray(t,t+r);return n===pH.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Dd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Op)throw new Error("FlatBuffers: file identifier must be length "+Op);for(let n=0;n<Op;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Dd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},HMe=class qMe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=kM.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=qMe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=kM.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Dd,0),this.writeInt32(this.offset()-t+Dd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*RB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=RB;l<s;l+=RB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Qr:0;if(n){const s=n;if(this.prep(this.minalign,Dd+Op+i),s.length!=Op)throw new TypeError("FlatBuffers: file identifier must be length "+Op);for(let o=Op-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Dd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Dd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Qr),(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ns.startKeyValue(t),Ns.addKey(t,n),Ns.addValue(t,r),Ns.endKeyValue(t)}}var SE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(SE||(SE={}));var TE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(TE||(TE={}));var RM;(function(e){e[e.DenseArray=0]="DenseArray"})(RM||(RM={}));class hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Qr),(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return hl.startInt(t),hl.addBitWidth(t,n),hl.addIsSigned(t,r),hl.endInt(t)}}class Pp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Qr),(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new hl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):RM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,RM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class qv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Qr),(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return qv.startBinary(t),qv.endBinary(t)}}class Wv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Qr),(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Wv.startBool(t),Wv.endBool(t)}}var $M;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})($M||($M={}));let t$=class Sb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Sb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Qr),(n||new Sb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$M.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,$M.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Sb.startDate(t),Sb.addUnit(t,n),Sb.endDate(t)}};class vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Qr),(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return vu.startDecimal(t),vu.addPrecision(t,n),vu.addScale(t,r),vu.addBitWidth(t,i),vu.endDecimal(t)}}var H0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(H0||(H0={}));class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Qr),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,H0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Md.startDuration(t),Md.addUnit(t,n),Md.endDuration(t)}}class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Qr),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(t),Ld.addByteWidth(t,n),Ld.endFixedSizeBinary(t)}}class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Qr),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Fd.startFixedSizeList(t),Fd.addListSize(t,n),Fd.endFixedSizeList(t)}}var NM;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(NM||(NM={}));class jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Qr),(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):NM.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,NM.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return jd.startFloatingPoint(t),jd.addPrecision(t,n),jd.endFloatingPoint(t)}}var DM;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(DM||(DM={}));class Bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Qr),(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):DM.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,DM.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Bd.startInterval(t),Bd.addUnit(t,n),Bd.endInterval(t)}}class Gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Qr),(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Gv.startList(t),Gv.endList(t)}}let n$=class Tb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Tb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Qr),(n||new Tb).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Tb.startMap(t),Tb.addKeysSorted(t,n),Tb.endMap(t)}};class Yv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Qr),(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Yv.startNull(t),Yv.endNull(t)}}class Kv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Kv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Qr),(n||new Kv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Kv.startStruct_(t),Kv.endStruct_(t)}}let YT=class dv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Qr),(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,H0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return dv.startTime(t),dv.addUnit(t,n),dv.addBitWidth(t,r),dv.endTime(t)}},KT=class hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Qr),(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,H0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return hv.startTimestamp(t),hv.addUnit(t,n),hv.addTimezone(t,r),hv.endTimestamp(t)}};var MM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(MM||(MM={}));let pv=class mv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Qr),(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):MM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,MM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return mv.startUnion(t),mv.addMode(t,n),mv.addTypeIds(t,r),mv.endUnion(t)}};class Xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Qr),(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Xv.startUtf8(t),Xv.endUtf8(t)}}var Ii;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ii||(Ii={}));let Jl=class r${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new r$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Qr),(n||new r$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ii.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Pp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new r$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ii.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},wd=class mp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new mp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Qr),(n||new mp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):TE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Jl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,TE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return mp.startSchema(t),mp.addEndianness(t,n),mp.addFields(t,r),mp.addCustomMetadata(t,i),mp.addFeatures(t,s),mp.endSchema(t)}};class ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Qr),(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):SE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new wd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new hH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new hH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,SE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class kr{constructor(t=[],n,r,i=za.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=gH(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new kr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new kr(n,this.metadata)}assign(...t){const n=t[0]instanceof kr?t[0]:Array.isArray(t[0])?new kr(t[0]):new kr(t),r=[...this.fields],i=_k(_k(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:_k(_k(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=gH(s,new Map);return new kr([...r,...s],i,new Map([...this.dictionaries,...o]))}}kr.prototype.fields=null;kr.prototype.metadata=null;kr.prototype.dictionaries=null;let Gr=class mH{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new mH(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],mH.new(n,r,i,s)}};Gr.prototype.type=null;Gr.prototype.name=null;Gr.prototype.nullable=null;Gr.prototype.metadata=null;function _k(e,t){return new Map([...e||new Map,...t||new Map])}function gH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if($n.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&gH(s.children,t)}return t}var $6t=HMe,N6t=kM;class yH{static decode(t){t=new N6t(Lr(t));const n=ul.getRootAsFooter(t),r=kr.decode(n.schema(),new Map,n.version());return new D6t(r,n)}static encode(t){const n=new $6t,r=kr.encode(n,t.schema);ul.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())q0.encode(n,o);const i=n.endVector();ul.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())q0.encode(n,o);const s=n.endVector();return ul.startFooter(n),ul.addSchema(n,r),ul.addVersion(n,za.V5),ul.addRecordBatches(n,i),ul.addDictionaries(n,s),ul.finishFooterBuffer(n,ul.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=za.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class D6t extends yH{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return q0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return q0.decode(n)}return null}}class q0{static decode(t){return new q0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return hH.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Ff(r),this.bodyLength=Ff(n)}}const bk=Object.freeze({done:!0,value:void 0});class WMe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class M6t extends WMe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Ip(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(bk);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return qme.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return qme.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Ip(this,void 0,void 0,function*(){return yield this.abort(t),bk})}return(t){return Ip(this,void 0,void 0,function*(){return yield this.close(),bk})}read(t){return Ip(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Ip(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(bk)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class $B extends M6t{write(t){if((t=Lr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?lH(this.toUint8Array(!0)):this.toUint8Array(!1).then(lH)}toUint8Array(t=!1){return t?xh(this._values)[0]:Ip(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=q2(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return xh(o,a)[0]})}}class GMe extends k5{constructor(t){super(t),this._values=new P5(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Lr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class L6t extends Zu{constructor(t){super(t),this._values=new zMe}setValue(t,n){this._values.set(t,+n)}}class R5 extends Um{}R5.prototype._setValue=J3e;class YMe extends R5{}YMe.prototype._setValue=cQ;class KMe extends R5{}KMe.prototype._setValue=fQ;class XMe extends Um{}XMe.prototype._setValue=tMe;class F6t extends Zu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new V0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=LM({type:this.type.indices,nullValues:n}),this.dictionary=LM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class QMe extends Um{}QMe.prototype._setValue=Q3e;class j6t extends Zu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new xE(this.type.listSize,new Gr(n,t.type,!0)),r}}class $5 extends Um{setValue(t,n){this._values.set(t,n)}}class B6t extends $5{setValue(t,n){super.setValue(t,Y3e(n))}}class z6t extends $5{}class U6t extends $5{}class N5 extends Um{}N5.prototype._setValue=iMe;class JMe extends N5{}JMe.prototype._setValue=bQ;class ZMe extends N5{}ZMe.prototype._setValue=wQ;class Mx extends Um{}Mx.prototype._setValue=sMe;class eLe extends Mx{}eLe.prototype._setValue=EQ;class tLe extends Mx{}tLe.prototype._setValue=xQ;class nLe extends Mx{}nLe.prototype._setValue=SQ;class rLe extends Mx{}rLe.prototype._setValue=TQ;class Vm extends Um{setValue(t,n){this._values.set(t,n)}}class V6t extends Vm{}class H6t extends Vm{}class q6t extends Vm{}class W6t extends Vm{}class G6t extends Vm{}class Y6t extends Vm{}class K6t extends Vm{}class X6t extends Vm{}class Q6t extends k5{constructor(t){super(t),this._offsets=new UMe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new EE(new Gr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class J6t extends k5{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new mA(new Gr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Z6t extends Zu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class e4t extends Zu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ha([...this.type.children,new Gr(n,t.type,!0)]),r}}class Lx extends Um{}Lx.prototype._setValue=Z3e;class iLe extends Lx{}iLe.prototype._setValue=dQ;class sLe extends Lx{}sLe.prototype._setValue=hQ;class oLe extends Lx{}oLe.prototype._setValue=pQ;class aLe extends Lx{}aLe.prototype._setValue=mQ;class Fx extends Um{}Fx.prototype._setValue=eMe;class uLe extends Fx{}uLe.prototype._setValue=gQ;class lLe extends Fx{}lLe.prototype._setValue=yQ;class cLe extends Fx{}cLe.prototype._setValue=vQ;class fLe extends Fx{}fLe.prototype._setValue=_Q;class RQ extends Zu{constructor(t){super(t),this._typeIds=new GI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Gr(n,t.type)];return this.type=new pA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class t4t extends RQ{}class n4t extends RQ{constructor(t){super(t),this._offsets=new GI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class dLe extends k5{constructor(t){super(t),this._values=new P5(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,KX(n))}_flushPending(t,n){}}dLe.prototype._flushPending=GMe.prototype._flushPending;class r4t extends Nn{visitNull(){return Z6t}visitBool(){return L6t}visitInt(){return Vm}visitInt8(){return V6t}visitInt16(){return H6t}visitInt32(){return q6t}visitInt64(){return W6t}visitUint8(){return G6t}visitUint16(){return Y6t}visitUint32(){return K6t}visitUint64(){return X6t}visitFloat(){return $5}visitFloat16(){return B6t}visitFloat32(){return z6t}visitFloat64(){return U6t}visitUtf8(){return dLe}visitBinary(){return GMe}visitFixedSizeBinary(){return QMe}visitDate(){return R5}visitDateDay(){return YMe}visitDateMillisecond(){return KMe}visitTimestamp(){return Lx}visitTimestampSecond(){return iLe}visitTimestampMillisecond(){return sLe}visitTimestampMicrosecond(){return oLe}visitTimestampNanosecond(){return aLe}visitTime(){return Fx}visitTimeSecond(){return uLe}visitTimeMillisecond(){return lLe}visitTimeMicrosecond(){return cLe}visitTimeNanosecond(){return fLe}visitDecimal(){return XMe}visitList(){return Q6t}visitStruct(){return e4t}visitUnion(){return RQ}visitDenseUnion(){return n4t}visitSparseUnion(){return t4t}visitDictionary(){return F6t}visitInterval(){return N5}visitIntervalDayTime(){return JMe}visitIntervalYearMonth(){return ZMe}visitDuration(){return Mx}visitDurationSecond(){return eLe}visitDurationMillisecond(){return tLe}visitDurationMicrosecond(){return nLe}visistDurationNanosecond(){return rLe}visitFixedSizeList(){return j6t}visitMap(){return J6t}}const i4t=new r4t;class on extends Nn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function su(e,t){return t instanceof e.constructor}function YI(e,t){return e===t||su(e,t)}function Hm(e,t){return e===t||su(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function D5(e,t){return e===t||su(e,t)&&e.precision===t.precision}function s4t(e,t){return e===t||su(e,t)&&e.byteWidth===t.byteWidth}function $Q(e,t){return e===t||su(e,t)&&e.unit===t.unit}function KI(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function XI(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function o4t(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}function a4t(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}function NQ(e,t){return e===t||su(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&W0.compareManyFields(e.children,t.children)}function u4t(e,t){return e===t||su(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&W0.visit(e.indices,t.indices)&&W0.visit(e.dictionary,t.dictionary)}function DQ(e,t){return e===t||su(e,t)&&e.unit===t.unit}function QI(e,t){return e===t||su(e,t)&&e.unit===t.unit}function l4t(e,t){return e===t||su(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}function c4t(e,t){return e===t||su(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&W0.compareManyFields(e.children,t.children)}on.prototype.visitNull=YI;on.prototype.visitBool=YI;on.prototype.visitInt=Hm;on.prototype.visitInt8=Hm;on.prototype.visitInt16=Hm;on.prototype.visitInt32=Hm;on.prototype.visitInt64=Hm;on.prototype.visitUint8=Hm;on.prototype.visitUint16=Hm;on.prototype.visitUint32=Hm;on.prototype.visitUint64=Hm;on.prototype.visitFloat=D5;on.prototype.visitFloat16=D5;on.prototype.visitFloat32=D5;on.prototype.visitFloat64=D5;on.prototype.visitUtf8=YI;on.prototype.visitBinary=YI;on.prototype.visitFixedSizeBinary=s4t;on.prototype.visitDate=$Q;on.prototype.visitDateDay=$Q;on.prototype.visitDateMillisecond=$Q;on.prototype.visitTimestamp=KI;on.prototype.visitTimestampSecond=KI;on.prototype.visitTimestampMillisecond=KI;on.prototype.visitTimestampMicrosecond=KI;on.prototype.visitTimestampNanosecond=KI;on.prototype.visitTime=XI;on.prototype.visitTimeSecond=XI;on.prototype.visitTimeMillisecond=XI;on.prototype.visitTimeMicrosecond=XI;on.prototype.visitTimeNanosecond=XI;on.prototype.visitDecimal=YI;on.prototype.visitList=o4t;on.prototype.visitStruct=a4t;on.prototype.visitUnion=NQ;on.prototype.visitDenseUnion=NQ;on.prototype.visitSparseUnion=NQ;on.prototype.visitDictionary=u4t;on.prototype.visitInterval=DQ;on.prototype.visitIntervalDayTime=DQ;on.prototype.visitIntervalYearMonth=DQ;on.prototype.visitDuration=QI;on.prototype.visitDurationSecond=QI;on.prototype.visitDurationMillisecond=QI;on.prototype.visitDurationMicrosecond=QI;on.prototype.visitDurationNanosecond=QI;on.prototype.visitFixedSizeList=l4t;on.prototype.visitMap=c4t;const W0=new on;function vH(e,t){return W0.compareSchemas(e,t)}function LM(e){const t=e.type,n=new(i4t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(LM(Object.assign(Object.assign({},l),{type:u})))}}return n}function NB(e,t){return f4t(e,t.map(n=>n.data.concat()))}function f4t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=d4t(n,o,c,t,i),o>0&&(r[s++]=ua({type:new ha(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new pl(e,f))]}function d4t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ua({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var hLe;class Eu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new kr([]),this._offsets=[0],this;let i,s;t[0]instanceof kr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof pl)return[u];if(u instanceof Eu)return u.batches;if(u instanceof Mr){if(u.type instanceof ha)return[new pl(new kr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new mr([u[h]])),f=new kr(l.map((h,p)=>new Gr(String(h),c[p].type))),[,d]=NB(f,c);return d.length===0?[new pl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new kr([]),!(i instanceof kr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof pl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!vH(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??kMe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=PMe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?kQ.visit(new mr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Eu(n,r.map(i=>new pl(n,i)))}slice(t,n){const r=this.schema;[t,n]=AMe({length:this.numRows},t,n);const i=RMe(this.data,this._offsets,t,n);return new Eu(r,i.map(s=>new pl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ua({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mr([ua({type:new bm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=NB(r,a)}return new Eu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Eu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Eu(...NB(s,o))}}hLe=Symbol.toStringTag;Eu[hLe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Ow(PQ),e.get=Ow(qu.getVisitFn(ie.Struct)),e.set=$Me(Tc.getVisitFn(ie.Struct)),e.indexOf=NMe(OM.getVisitFn(ie.Struct)),e.getByteLength=Ow(Ch.getVisitFn(ie.Struct)),"Table"))(Eu.prototype);var pLe;let pl=class XT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ua({nullCount:0,type:new ha(this.schema.fields),children:this.schema.fields.map(n=>ua({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Mr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Zme(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Gr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new kr(r),a=ua({type:new ha(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Zme(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=mLe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return qu.visit(this.data,t)}set(t,n){return Tc.visit(this.data,t,n)}indexOf(t,n){return OM.visit(this.data,t,n)}getByteLength(t){return Ch.visit(this.data,t)}[Symbol.iterator](){return kQ.visit(new mr([this.data]))}toArray(){return[...this]}concat(...t){return new Eu(this.schema,[this,...t])}slice(t,n){const[r]=new mr([this.data]).slice(t,n).data;return new XT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new mr([ua({type:new bm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new kr(s,new Map(this.schema.metadata)),i=ua({type:new ha(s),children:o})}return new XT(r,i)}select(t){const n=this.schema.select(t),r=new ha(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new XT(n,ua({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ua({type:new ha(n.fields),length:this.numRows,children:r});return new XT(n,i)}};pLe=Symbol.toStringTag;pl[pLe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(pl.prototype);function Zme(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ua({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ua({type:new ha(i),length:n,children:s})]}function mLe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])mLe(a.children,l==null?void 0:l.children,n);if($n.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class h4t extends pl{constructor(t){const n=t.fields.map(i=>ua({type:i.type})),r=ua({type:new ha(t.fields),nullCount:0,children:n});super(t,r)}}var FM;(function(e){e[e.BUFFER=0]="BUFFER"})(FM||(FM={}));var jM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(jM||(jM={}));class Ig{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ig).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Qr),(n||new Ig).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):jM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):FM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,jM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,FM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ig.startBodyCompression(t),Ig.addCodec(t,n),Ig.addMethod(t,r),Ig.endBodyCompression(t)}}let gLe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},yLe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},vp=class _H{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new _H).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Qr),(n||new _H).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new yLe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new gLe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ig).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Cb=class bH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new bH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Qr),(n||new bH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var BM;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(BM||(BM={}));let ug=class hd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new hd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Qr),(n||new hd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):SE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):BM.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,SE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,BM.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return hd.startMessage(t),hd.addVersion(t,n),hd.addHeaderType(t,r),hd.addHeader(t,i),hd.addBodyLength(t,s),hd.addCustomMetadata(t,o),hd.endMessage(t)}};class p4t extends Nn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Yv.startNull(n),Yv.endNull(n)}visitInt(t,n){return hl.startInt(n),hl.addBitWidth(n,t.bitWidth),hl.addIsSigned(n,t.isSigned),hl.endInt(n)}visitFloat(t,n){return jd.startFloatingPoint(n),jd.addPrecision(n,t.precision),jd.endFloatingPoint(n)}visitBinary(t,n){return qv.startBinary(n),qv.endBinary(n)}visitBool(t,n){return Wv.startBool(n),Wv.endBool(n)}visitUtf8(t,n){return Xv.startUtf8(n),Xv.endUtf8(n)}visitDecimal(t,n){return vu.startDecimal(n),vu.addScale(n,t.scale),vu.addPrecision(n,t.precision),vu.addBitWidth(n,t.bitWidth),vu.endDecimal(n)}visitDate(t,n){return t$.startDate(n),t$.addUnit(n,t.unit),t$.endDate(n)}visitTime(t,n){return YT.startTime(n),YT.addUnit(n,t.unit),YT.addBitWidth(n,t.bitWidth),YT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return KT.startTimestamp(n),KT.addUnit(n,t.unit),r!==void 0&&KT.addTimezone(n,r),KT.endTimestamp(n)}visitInterval(t,n){return Bd.startInterval(n),Bd.addUnit(n,t.unit),Bd.endInterval(n)}visitDuration(t,n){return Md.startDuration(n),Md.addUnit(n,t.unit),Md.endDuration(n)}visitList(t,n){return Gv.startList(n),Gv.endList(n)}visitStruct(t,n){return Kv.startStruct_(n),Kv.endStruct_(n)}visitUnion(t,n){pv.startTypeIdsVector(n,t.typeIds.length);const r=pv.createTypeIdsVector(n,t.typeIds);return pv.startUnion(n),pv.addMode(n,t.mode),pv.addTypeIds(n,r),pv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Pp.startDictionaryEncoding(n),Pp.addId(n,BigInt(t.id)),Pp.addIsOrdered(n,t.isOrdered),r!==void 0&&Pp.addIndexType(n,r),Pp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(n),Ld.addByteWidth(n,t.byteWidth),Ld.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Fd.startFixedSizeList(n),Fd.addListSize(n,t.listSize),Fd.endFixedSizeList(n)}visitMap(t,n){return n$.startMap(n),n$.addKeysSorted(n,t.keysSorted),n$.endMap(n)}}const DB=new p4t;function m4t(e,t=new Map){return new kr(y4t(e,t),i$(e.metadata),t)}function vLe(e){return new $l(e.count,_Le(e.columns),bLe(e.columns))}function g4t(e){return new Ah(vLe(e.data),e.id,e.isDelta)}function y4t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Gr.fromJSON(n,t))}function ege(e,t){return(e.children||[]).filter(Boolean).map(n=>Gr.fromJSON(n,t))}function _Le(e){return(e||[]).reduce((t,n)=>[...t,new G0(n.count,v4t(n.VALIDITY)),..._Le(n.children)],[])}function bLe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Gd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Gd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Gd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Gd(t.length,i.DATA.length)),t=bLe(i.children,t)}return t}function v4t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function _4t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=nge(e,ege(e,t)),i=new Gr(e.name,o,e.nullable,i$(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?tge(r):new z0,a=new V0(t.get(n),r,n,s.isOrdered),i=new Gr(e.name,a,e.nullable,i$(e.metadata))):(r=(r=s.indexType)?tge(r):new z0,t.set(n,o=nge(e,ege(e,t))),a=new V0(o,r,n,s.isOrdered),i=new Gr(e.name,a,e.nullable,i$(e.metadata))),i||null}function i$(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function tge(e){return new eu(e.isSigned,e.bitWidth)}function nge(e,t){const n=e.type.name;switch(n){case"NONE":return new bm;case"null":return new bm;case"binary":return new dA;case"utf8":return new _E;case"bool":return new hA;case"list":return new EE((t||[])[0]);case"struct":return new ha(t||[]);case"struct_":return new ha(t||[])}switch(n){case"int":{const r=e.type;return new eu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new U0($o[r.precision])}case"decimal":{const r=e.type;return new SM(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new bE(Sh[r.unit])}case"time":{const r=e.type;return new wm(tn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new TM(tn[r.unit],r.timezone)}case"interval":{const r=e.type;return new wE(Th[r.unit])}case"duration":{const r=e.type;return new CM(tn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new pA(Hu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new AM(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new xE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new mA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var b4t=HMe,w4t=kM;class zd{static fromJSON(t,n){const r=new zd(0,za.V5,n);return r._createHeader=E4t(t,n),r}static decode(t){t=new w4t(Lr(t));const n=ug.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new zd(r,i,s);return o._createHeader=x4t(n,s),o}static encode(t){const n=new b4t;let r=-1;return t.isSchema()?r=kr.encode(n,t.header()):t.isRecordBatch()?r=$l.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ah.encode(n,t.header())),ug.startMessage(n),ug.addVersion(n,za.V5),ug.addHeader(n,r),ug.addHeaderType(n,t.headerType),ug.addBodyLength(n,BigInt(t.bodyLength)),ug.finishMessageBuffer(n,ug.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof kr)return new zd(0,za.V5,eo.Schema,t);if(t instanceof $l)return new zd(n,za.V5,eo.RecordBatch,t);if(t instanceof Ah)return new zd(n,za.V5,eo.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===eo.Schema}isRecordBatch(){return this.headerType===eo.RecordBatch}isDictionaryBatch(){return this.headerType===eo.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Ff(t)}}class $l{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Ff(t)}}class Ah{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Ff(n)}}class Gd{constructor(t,n){this.offset=Ff(t),this.length=Ff(n)}}class G0{constructor(t,n){this.length=Ff(t),this.nullCount=Ff(n)}}function E4t(e,t){return()=>{switch(t){case eo.Schema:return kr.fromJSON(e);case eo.RecordBatch:return $l.fromJSON(e);case eo.DictionaryBatch:return Ah.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${eo[t]}, type: ${t} }`)}}function x4t(e,t){return()=>{switch(t){case eo.Schema:return kr.decode(e.header(new wd),new Map,e.version());case eo.RecordBatch:return $l.decode(e.header(new vp),e.version());case eo.DictionaryBatch:return Ah.decode(e.header(new Cb),e.version())}throw new Error(`Unrecognized Message type: { name: ${eo[t]}, type: ${t} }`)}}Gr.encode=N4t;Gr.decode=R4t;Gr.fromJSON=_4t;kr.encode=$4t;kr.decode=S4t;kr.fromJSON=m4t;$l.encode=D4t;$l.decode=T4t;$l.fromJSON=vLe;Ah.encode=M4t;Ah.decode=C4t;Ah.fromJSON=g4t;G0.encode=L4t;G0.decode=I4t;Gd.encode=F4t;Gd.decode=A4t;function S4t(e,t=new Map,n=za.V5){const r=k4t(e,t);return new kr(r,s$(e),t,n)}function T4t(e,t=za.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new $l(e.length(),O4t(e),P4t(e,t))}function C4t(e,t=za.V5){return new Ah($l.decode(e.data(),t),e.id(),e.isDelta())}function A4t(e){return new Gd(e.offset(),e.length())}function I4t(e){return new G0(e.length(),e.nullCount())}function O4t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=G0.decode(n));return t}function P4t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<za.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Gd.decode(r));return n}function k4t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Gr.decode(r,t));return n}function rge(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Gr.decode(r,t));return n}function R4t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=sge(e,rge(e,t)),r=new Gr(e.name(),i,e.nullable(),s$(e))):t.has(n=Ff(a.id()))?(s=(s=a.indexType())?ige(s):new z0,o=new V0(t.get(n),s,n,a.isOrdered()),r=new Gr(e.name(),o,e.nullable(),s$(e))):(s=(s=a.indexType())?ige(s):new z0,t.set(n,i=sge(e,rge(e,t))),o=new V0(i,s,n,a.isOrdered()),r=new Gr(e.name(),o,e.nullable(),s$(e))),r||null}function s$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ige(e){return new eu(e.isSigned(),e.bitWidth())}function sge(e,t){const n=e.typeType();switch(n){case Ii.NONE:return new bm;case Ii.Null:return new bm;case Ii.Binary:return new dA;case Ii.Utf8:return new _E;case Ii.Bool:return new hA;case Ii.List:return new EE((t||[])[0]);case Ii.Struct_:return new ha(t||[])}switch(n){case Ii.Int:{const r=e.type(new hl);return new eu(r.isSigned(),r.bitWidth())}case Ii.FloatingPoint:{const r=e.type(new jd);return new U0(r.precision())}case Ii.Decimal:{const r=e.type(new vu);return new SM(r.scale(),r.precision(),r.bitWidth())}case Ii.Date:{const r=e.type(new t$);return new bE(r.unit())}case Ii.Time:{const r=e.type(new YT);return new wm(r.unit(),r.bitWidth())}case Ii.Timestamp:{const r=e.type(new KT);return new TM(r.unit(),r.timezone())}case Ii.Interval:{const r=e.type(new Bd);return new wE(r.unit())}case Ii.Duration:{const r=e.type(new Md);return new CM(r.unit())}case Ii.Union:{const r=e.type(new pv);return new pA(r.mode(),r.typeIdsArray()||[],t||[])}case Ii.FixedSizeBinary:{const r=e.type(new Ld);return new AM(r.byteWidth())}case Ii.FixedSizeList:{const r=e.type(new Fd);return new xE(r.listSize(),(t||[])[0])}case Ii.Map:{const r=e.type(new n$);return new mA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ii[n]}" (${n})`)}function $4t(e,t){const n=t.fields.map(s=>Gr.encode(e,s));wd.startFieldsVector(e,n.length);const r=wd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?wd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ns.startKeyValue(e),Ns.addKey(e,a),Ns.addValue(e,u),Ns.endKeyValue(e)})):-1;return wd.startSchema(e),wd.addFields(e,r),wd.addEndianness(e,j4t?TE.Little:TE.Big),i!==-1&&wd.addCustomMetadata(e,i),wd.endSchema(e)}function N4t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;$n.isDictionary(s)?(o=s.dictionary.typeId,i=DB.visit(s,e),r=DB.visit(s.dictionary,e)):r=DB.visit(s,e);const a=(s.children||[]).map(c=>Gr.encode(e,c)),u=Jl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Jl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ns.startKeyValue(e),Ns.addKey(e,d),Ns.addValue(e,h),Ns.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Jl.startField(e),Jl.addType(e,r),Jl.addTypeType(e,o),Jl.addChildren(e,u),Jl.addNullable(e,!!t.nullable),n!==-1&&Jl.addName(e,n),i!==-1&&Jl.addDictionary(e,i),l!==-1&&Jl.addCustomMetadata(e,l),Jl.endField(e)}function D4t(e,t){const n=t.nodes||[],r=t.buffers||[];vp.startNodesVector(e,n.length);for(const o of n.slice().reverse())G0.encode(e,o);const i=e.endVector();vp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Gd.encode(e,o);const s=e.endVector();return vp.startRecordBatch(e),vp.addLength(e,BigInt(t.length)),vp.addNodes(e,i),vp.addBuffers(e,s),vp.endRecordBatch(e)}function M4t(e,t){const n=$l.encode(e,t.data);return Cb.startDictionaryBatch(e),Cb.addId(e,BigInt(t.id)),Cb.addIsDelta(e,t.isDelta),Cb.addData(e,n),Cb.endDictionaryBatch(e)}function L4t(e,t){return yLe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function F4t(e,t){return gLe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const j4t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),wH="ARROW1",MQ=new Uint8Array(wH.length);for(let e=0;e<wH.length;e+=1)MQ[e]=wH.codePointAt(e);MQ.length;class fs extends Nn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof pl?s.data.children:s.data),r=new fs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof mr)return this.visitMany(t.data),this;const{type:n}=t;if(!$n.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if($n.isUnion(n))this.nodes.push(new G0(r,0));else{const{nullCount:i}=t;$n.isNull(n)||Cf.call(this,i<=0?new Uint8Array(0):IM(t.offset,r,t.nullBitmap)),this.nodes.push(new G0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Cf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Gd(this._byteLength,t)),this._byteLength+=t,this}function B4t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Cf.call(this,i),n.mode===Hu.Sparse)return EH.call(this,e);if(n.mode===Hu.Dense){if(e.offset<=0)return Cf.call(this,s),EH.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Cf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function z4t(e){let t;return e.nullCount>=e.length?Cf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Cf.call(this,IM(e.offset,e.length,t)):Cf.call(this,OMe(e.values))}function qm(e){return Cf.call(this,e.values.subarray(0,e.length*e.stride))}function wLe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Cf.call(this,x3e(-i,t+1,r)),Cf.call(this,n.subarray(i,i+o)),this}function LQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Cf.call(this,x3e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function EH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}fs.prototype.visitBool=z4t;fs.prototype.visitInt=qm;fs.prototype.visitFloat=qm;fs.prototype.visitUtf8=wLe;fs.prototype.visitBinary=wLe;fs.prototype.visitFixedSizeBinary=qm;fs.prototype.visitDate=qm;fs.prototype.visitTimestamp=qm;fs.prototype.visitTime=qm;fs.prototype.visitDecimal=qm;fs.prototype.visitList=LQ;fs.prototype.visitStruct=EH;fs.prototype.visitUnion=B4t;fs.prototype.visitInterval=qm;fs.prototype.visitDuration=qm;fs.prototype.visitFixedSizeList=LQ;fs.prototype.visitMap=LQ;class ELe extends WMe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new $B,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ty(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return C5(t)?t.then(n=>this.writeAll(n)):A5(t)?zQ(this,t):BQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof $B?this._sink=t:(this._sink=new $B,t&&GMt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&YMt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!vH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Eu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof pl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!vH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof pl?t instanceof h4t||this._writeRecordBatch(t):t instanceof Eu?this.writeAll(t.batches):XX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=zd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===eo.RecordBatch?this._recordBatchBlocks.push(new q0(a,t.bodyLength,this._position)):t.headerType===eo.DictionaryBatch&&this._dictionaryBlocks.push(new q0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Lr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(zd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(MQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=fs.assemble(t),o=new $l(t.numRows,r,i),a=zd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=fs.assemble(new mr([t])),u=new $l(t.length,s,o),l=new Ah(u,n,r),c=zd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class FQ extends ELe{static writeAll(t,n){const r=new FQ(n);return C5(t)?t.then(i=>r.writeAll(i)):A5(t)?zQ(r,t):BQ(r,t)}}class jQ extends ELe{static writeAll(t){const n=new jQ;return C5(t)?t.then(r=>n.writeAll(r)):A5(t)?zQ(n,t):BQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=yH.encode(new yH(t,za.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function BQ(e,t){let n=t;t instanceof Eu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function zQ(e,t){var n,r,i,s,o,a,u;return Ip(this,void 0,void 0,function*(){try{for(n=!0,r=q2(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function U4t(e,t="stream"){return(t==="stream"?FQ:jQ).writeAll(e).toUint8Array(!0)}function UQ(e,t=1){return(e*t+63&-64||64)/t}function Y0(e,t,n=e.BYTES_PER_ELEMENT){return new e(UQ(t,n))}function VQ(e){return e instanceof Mr?e:new Mr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function V4t(e){return new mr([VQ(e)])}const HQ=new TextEncoder;function H4t(e,t,n){const r=HQ.encode(n);return e.set(r,t),r.length}function q4t(e,t,n){return HQ.encodeInto(n,e.subarray(t)).written}const W4t=HQ.encodeInto?q4t:H4t;function oge(e,t){const n=Y0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function G4t(e,t){const n=Y0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function Y4t(e,t){const n=Y0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function K4t(e,t){const n=Y0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function X4t(e){const t=LM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function Q4t(e,t,n){const r=Y0(Int32Array,t+1),i=Y0(Uint8Array,3*n);let s=0;return{set(o,a){s+=W4t(i,s,o),r[a+1]=s},data:()=>{const o=UQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function J4t(e,t){const n=[],r=Y0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:Z4t(e.dictionary,n,o)})}}function Z4t(e,t,n){const r=Q4t(e,t.length,n);return t.forEach(r.set),V4t(r.data())}function e5t(e,t){const n=Y0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function t5t(e,t,n=!0){let r;switch(e.typeId){case ie.Int:r=e.bitWidth<64?oge:null;break;case ie.Float:r=e.precision>0?oge:null;break;case ie.Dictionary:r=e.dictionary.typeId===ie.Utf8&&e.indices.typeId===ie.Int&&e.indices.bitWidth<64?J4t:null;break;case ie.Bool:r=G4t;break;case ie.Date:r=e.unit?K4t:Y4t;break}return r==null?X4t(e):n?e5t(r(e,t),t):r(e,t)}function n5t(e,t){const n=e.length,r=UQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),VQ({type:t,length:n,buffers:[null,i]})}function xLe(e,t,n,r,i=!0){const s=t5t(r,e,i);return t(n,s.set),VQ(s.data())}function qQ(e){if(e instanceof $n||e==null)return e;switch(e){case ie.Binary:return new dA;case ie.Bool:return new hA;case ie.DateDay:return new lLt;case ie.DateMillisecond:case ie.Date:return new cLt;case ie.Dictionary:return new V0(new _E,new z0);case ie.Float16:return new q3e;case ie.Float32:return new oQ;case ie.Float64:case ie.Float:return new aQ;case ie.Int8:return new ZX;case ie.Int16:return new eQ;case ie.Int32:case ie.Int:return new z0;case ie.Int64:return new tQ;case ie.IntervalDayTime:return new mLt;case ie.Interval:case ie.IntervalYearMonth:return new gLt;case ie.Null:return new bm;case ie.TimeMicrosecond:return new hLt;case ie.TimeMillisecond:case ie.Time:return new dLt;case ie.TimeNanosecond:return new pLt;case ie.TimeSecond:return new fLt;case ie.Uint8:return new nQ;case ie.Uint16:return new rQ;case ie.Uint32:return new iQ;case ie.Uint64:return new sQ;case ie.Utf8:return new _E;default:Pn(`Unsupported type code: ${Eh(e)}. Use a data type constructor instead?`)}}function r5t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function SLe(e,t){const n=xH();return e(t,n.add),n}function xH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(_m(t))++e.dates,r5t(t)&&++e.utcdays;else if(Vv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=xH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=xH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return qQ(i5t(e))}};return e}function i5t(e){const t=e.count-e.nulls;if(t===0)return ie.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ie.Float64:n<128?ie.Int8:n<32768?ie.Int16:ie.Int32:n>=2**32?ie.Float64:n<256?ie.Uint8:n<65536?ie.Uint16:ie.Uint32}else{if(e.nums===t)return ie.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ie.Int64:Pn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ie.Uint64:Pn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ie.Bool;if(e.utcdays===t)return ie.DateDay;if(e.dates===t)return ie.DateMillisecond;if(e.arrays===t){const n=Gr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new xE(e.minlen,n):new EE(n)}else if(e.structs===t){const n=e.struct_prof;return new ha(Object.keys(n).map(r=>Gr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ie.Dictionary;Pn("Type inference failure")}}}}function s5t(e,t,n,r,i,s=!0){if(i=qQ(i),!i){const o=SLe(r,t);s=o.nulls>0,i=o.type()}return xLe(n,r,t,i,s)}function o5t(e,t,n,r,i,s=!0){i=qQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=a5t(o);if(u&&a&&age(u.type,i))return u;const l=o.data;if(qI(l)){const c=u5t(l);if(a&&c&&age(c,i))return n5t(l,c);i=i||c,s=!1}if(!i){const c=SLe(r,o);s=c.nulls>0,i=c.type()}return xLe(n,r,o,i,s)}function a5t(e){return e instanceof mr?e:e.vector instanceof mr?e.vector:null}function u5t(e){const n={Float32Array:oQ,Float64Array:aQ,Int8Array:ZX,Int16Array:eQ,Int32Array:z0,Uint8Array:nQ,Uint16Array:rQ,Uint32Array:iQ,BigInt64Array:tQ,BigUint64Array:sQ}[e.constructor.name];return n?new n:null}function age(e,t){return!e||!t?!0:e.compareTo(t)}function l5t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function c5t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Vv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const f5t=()=>Pn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function d5t(){try{return Eu}catch{f5t()}}function TLe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=h5t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Pn("Column length mismatch"),a[l]=c});const u=d5t();return new u(a)}function h5t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Si(n)?n(e):pr(n)?n:null;if(pr(e))return{dataFrom:s5t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:l5t(e,r,i)};if(p5t(e))return{dataFrom:o5t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:c5t(e,r,i)};Pn("Unsupported input data type")}function p5t(e){return e&&Si(e.reify)}function m5t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return U4t(TLe(e,r),n)}function g5t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function y5t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&_m(u))++i,g5t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function M5(e,t){return Si(t)?t(e):t||e.columnNames()}function CLe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=y5t(v5t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function v5t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function WQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function _5t(e,t={}){const n=M5(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":_m(l)?S5(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return WQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function ALe(e,t={}){if(Si(t))return t(e)+"";const n=typeof e;if(n==="object"){if(_m(e))return t.utc?S5(e):KDe(e);{const r=JSON.stringify(e,(s,o)=>qI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function L5(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function b5t(e,t={}){const n=M5(e,t.columns),{align:r,format:i}=CLe(e,n,t),s=w5t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(ALe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return WQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function w5t(e){return L5(e.style,t=>Si(t)?t:()=>t)}function E5t(e,t=!0,n=!1){return e===void 0||e?t:n}const x5t=e=>_m(e)?S5(e,!0):e;function S5t(e,t={}){const n=E5t(t.schema),r=t.format||{},i=M5(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||x5t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function T5t(e,t={}){const n=M5(e,t.columns),{align:r,format:i}=CLe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return WQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(ALe(u,i[l]))+"|"}}),a+`
`}function ILe(e,t){for(const[n,r]of T5(t))e.set(n,r);return e}function C5t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Em(e,t,n=new Map){return t=Za(t)?e.columnName(t):t,zo(t)?n.set(t,t):pr(t)?t.forEach(r=>Em(e,r,n)):Si(t)?Em(e,t(e),n):Sa(t)?ILe(n,t):Pn(`Invalid column selection: ${Eh(t)}`),n}function F5(e,t){return e.toObject=t,e}function OLe(e){return pr(e)?e.map(OLe):e&&e.toObject?e.toObject():e}function CE(){return F5(e=>e.columnNames(),()=>({all:[]}))}function PLe(...e){return e=e.flat(),F5(t=>{const n=Em(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:OLe(e)}))}function A5t(e,t){return F5(n=>{let r=Za(e)?e:n.columnIndex(e),i=Za(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function I5t(e){return zo(e)&&(e=RegExp(C5t(e))),F5(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function O5t(e){return qI(e.data)?e.data.constructor:Array}class Ud extends W3t{static from(t,n){return new Ud(K3t(t,n),n)}static new(t,n){if(t instanceof Ud)return t;const r={},i=[];for(const[s,o]of T5(t))r[s]=o,i.push(s);return new Ud(r,n||i)}constructor(t,n,r,i,s,o){L5(t,Y3t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Ud(t||this._data,n||(t?null:this._names),o,i!==void 0?i:SMt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=ql(r).groupby(r.groups());return t.forEach(s=>{s=Ud.new(s),s.numRows()!==n&&Pn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Pn(`Unrecognized column: ${t}`)}object(t=0){return uge(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Em(this,t.columns||CE()),o=b3e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),CMt(this,u,a,n)}return a}*[Symbol.iterator](){const t=uge(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(O5t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=TMt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return TLe(this,t)}toArrowBuffer(t){return m5t(this,t)}toCSV(t){return _5t(this,t)}toHTML(t){return b5t(this,t)}toJSON(t){return S5t(this,t)}toMarkdown(t){return T5t(this,t)}}function uge(e){let t=e._builder;if(!t){const n=b3e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class P5t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function sr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=k5t[e.type];s&&s(e,t,n)}const wk=(e,t,n)=>{sr(e.argument,t,n,e)},MB=(e,t,n)=>{sr(e.left,t,n,e),sr(e.right,t,n,e)},lge=(e,t,n)=>{sr(e.test,t,n,e),sr(e.consequent,t,n,e),e.alternate&&sr(e.alternate,t,n,e)},LB=(e,t,n)=>{Ed(e.params,t,n,e),sr(e.body,t,n,e)},cge=(e,t,n)=>{sr(e.callee,t,n,e),Ed(e.arguments,t,n,e)},Ed=(e,t,n,r)=>{e.forEach(i=>sr(i,t,n,r))},k5t={TemplateLiteral:(e,t,n)=>{Ed(e.expressions,t,n,e),Ed(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{sr(e.object,t,n,e),sr(e.property,t,n,e)},CallExpression:cge,NewExpression:cge,ArrayExpression:(e,t,n)=>{Ed(e.elements,t,n,e)},AssignmentExpression:MB,AwaitExpression:wk,BinaryExpression:MB,LogicalExpression:MB,UnaryExpression:wk,UpdateExpression:wk,ConditionalExpression:lge,ObjectExpression:(e,t,n)=>{Ed(e.properties,t,n,e)},Property:(e,t,n)=>{sr(e.key,t,n,e),sr(e.value,t,n,e)},ArrowFunctionExpression:LB,FunctionExpression:LB,FunctionDeclaration:LB,VariableDeclaration:(e,t,n)=>{Ed(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{sr(e.id,t,n,e),sr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{sr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Ed(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{sr(e.expression,t,n,e)},IfStatement:lge,ForStatement:(e,t,n)=>{sr(e.init,t,n,e),sr(e.test,t,n,e),sr(e.update,t,n,e),sr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{sr(e.test,t,n,e),sr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{sr(e.body,t,n,e),sr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{sr(e.discriminant,t,n,e),Ed(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&sr(e.test,t,n,e),Ed(e.consequent,t,n,e)},ReturnStatement:wk,Program:(e,t,n)=>{sr(e.body[0],t,n,e)}};function kLe(e){delete e.start,delete e.end,delete e.optional}function fge(e){kLe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function R5t(e){return sr(e,null,{Column:fge,Constant:fge,Default:kLe}),e}function Ms(e,t){return t&&t.type===e}function $5t(e){return Ms(OMt,e)||Ms(IMt,e)}function N5t(e){return Si(e)?e:()=>e}const D5t="Escaped functions are not valid as rollup or pivot values.";function M5t(e,t,n){e.aggronly&&Pn(D5t);const r="(row,data)=>fn("+_3e(e.table.columnNames())+",$)";return{escape:GX.escape(r,N5t(t.expr),n)}}var L5t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],RLe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],F5t="-----------------------------------------------------------------------------------------------------------------------------------------------------",$Le="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",FB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},jB="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",j5t={5:jB,"5module":jB+" export import",6:jB+" const class extends export import super"},B5t=/^in(stanceof)?$/,z5t=new RegExp("["+$Le+"]"),U5t=new RegExp("["+$Le+F5t+"]");function SH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function xm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&z5t.test(String.fromCharCode(e)):t===!1?!1:SH(e,RLe)}function AE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&U5t.test(String.fromCharCode(e)):t===!1?!1:SH(e,RLe)||SH(e,L5t)}var ur=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Gl(e,t){return new ur(e,{beforeExpr:!0,binop:t})}var Yl={beforeExpr:!0},du={startsExpr:!0},GQ={};function Qn(e,t){return t===void 0&&(t={}),t.keyword=e,GQ[e]=new ur(e,t)}var X={num:new ur("num",du),regexp:new ur("regexp",du),string:new ur("string",du),name:new ur("name",du),privateId:new ur("privateId",du),eof:new ur("eof"),bracketL:new ur("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ur("]"),braceL:new ur("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ur("}"),parenL:new ur("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ur(")"),comma:new ur(",",Yl),semi:new ur(";",Yl),colon:new ur(":",Yl),dot:new ur("."),question:new ur("?",Yl),questionDot:new ur("?."),arrow:new ur("=>",Yl),template:new ur("template"),invalidTemplate:new ur("invalidTemplate"),ellipsis:new ur("...",Yl),backQuote:new ur("`",du),dollarBraceL:new ur("${",{beforeExpr:!0,startsExpr:!0}),eq:new ur("=",{beforeExpr:!0,isAssign:!0}),assign:new ur("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ur("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ur("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Gl("||",1),logicalAND:Gl("&&",2),bitwiseOR:Gl("|",3),bitwiseXOR:Gl("^",4),bitwiseAND:Gl("&",5),equality:Gl("==/!=/===/!==",6),relational:Gl("</>/<=/>=",7),bitShift:Gl("<</>>/>>>",8),plusMin:new ur("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Gl("%",10),star:Gl("*",10),slash:Gl("/",10),starstar:new ur("**",{beforeExpr:!0}),coalesce:Gl("??",1),_break:Qn("break"),_case:Qn("case",Yl),_catch:Qn("catch"),_continue:Qn("continue"),_debugger:Qn("debugger"),_default:Qn("default",Yl),_do:Qn("do",{isLoop:!0,beforeExpr:!0}),_else:Qn("else",Yl),_finally:Qn("finally"),_for:Qn("for",{isLoop:!0}),_function:Qn("function",du),_if:Qn("if"),_return:Qn("return",Yl),_switch:Qn("switch"),_throw:Qn("throw",Yl),_try:Qn("try"),_var:Qn("var"),_const:Qn("const"),_while:Qn("while",{isLoop:!0}),_with:Qn("with"),_new:Qn("new",{beforeExpr:!0,startsExpr:!0}),_this:Qn("this",du),_super:Qn("super",du),_class:Qn("class",du),_extends:Qn("extends",Yl),_export:Qn("export"),_import:Qn("import",du),_null:Qn("null",du),_true:Qn("true",du),_false:Qn("false",du),_in:Qn("in",{beforeExpr:!0,binop:7}),_instanceof:Qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Bc=/\r\n?|\n|\u2028|\u2029/,V5t=new RegExp(Bc.source,"g");function jx(e){return e===10||e===13||e===8232||e===8233}function NLe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(jx(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var DLe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ac=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,MLe=Object.prototype,H5t=MLe.hasOwnProperty,q5t=MLe.toString,JI=Object.hasOwn||function(e,t){return H5t.call(e,t)},dge=Array.isArray||function(e){return q5t.call(e)==="[object Array]"},hge=Object.create(null);function Gg(e){return hge[e]||(hge[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function K0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var W5t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,gA=function(t,n){this.line=t,this.column=n};gA.prototype.offset=function(t){return new gA(this.line,this.column+t)};var j5=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function LLe(e,t){for(var n=1,r=0;;){var i=NLe(e,r,t);if(i<0)return new gA(n,t-r);++n,r=i}}var TH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},pge=!1;function G5t(e){var t={};for(var n in TH)t[n]=e&&JI(e,n)?e[n]:TH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!pge&&typeof console=="object"&&console.warn&&(pge=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),dge(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return dge(t.onComment)&&(t.onComment=Y5t(t,t.onComment)),t}function Y5t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new j5(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var yA=1,Bx=2,YQ=4,FLe=8,jLe=16,BLe=32,KQ=64,zLe=128,ZI=256,XQ=yA|Bx|ZI;function QQ(e,t){return Bx|(e?YQ:0)|(t?FLe:0)}var zM=0,JQ=1,Wm=2,ULe=3,VLe=4,HLe=5,Hs=function(t,n,r){this.options=t=G5t(t),this.sourceFile=t.sourceFile,this.keywords=Gg(j5t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=FB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Gg(i);var s=(i?i+" ":"")+FB.strict;this.reservedWordsStrict=Gg(s),this.reservedWordsStrictBind=Gg(s+" "+FB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Bc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=X.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(yA),this.regexpState=null,this.privateNameStack=[]},Vh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Hs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Vh.inFunction.get=function(){return(this.currentVarScope().flags&Bx)>0};Vh.inGenerator.get=function(){return(this.currentVarScope().flags&FLe)>0&&!this.currentVarScope().inClassFieldInit};Vh.inAsync.get=function(){return(this.currentVarScope().flags&YQ)>0&&!this.currentVarScope().inClassFieldInit};Vh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&ZI)return!1;if(t.flags&Bx)return(t.flags&YQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Vh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&KQ)>0||n||this.options.allowSuperOutsideMethod};Vh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&zLe)>0};Vh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Vh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Bx|ZI))>0||n};Vh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ZI)>0};Hs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Hs.parse=function(t,n){return new this(n,t).parse()};Hs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Hs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Hs.prototype,Vh);var ou=Hs.prototype,K5t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ou.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){ac.lastIndex=e,e+=ac.exec(this.input)[0].length;var t=K5t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){ac.lastIndex=e+t[0].length;var n=ac.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Bc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,ac.lastIndex=e,e+=ac.exec(this.input)[0].length,this.input[e]===";"&&e++}};ou.eat=function(e){return this.type===e?(this.next(),!0):!1};ou.isContextual=function(e){return this.type===X.name&&this.value===e&&!this.containsEsc};ou.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ou.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ou.canInsertSemicolon=function(){return this.type===X.eof||this.type===X.braceR||Bc.test(this.input.slice(this.lastTokEnd,this.start))};ou.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ou.semicolon=function(){!this.eat(X.semi)&&!this.insertSemicolon()&&this.unexpected()};ou.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ou.expect=function(e){this.eat(e)||this.unexpected()};ou.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var B5=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ou.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ou.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ou.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ou.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var zt=Hs.prototype;zt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==X.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ZQ={kind:"loop"},X5t={kind:"switch"};zt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ac.lastIndex=this.pos;var t=ac.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(xm(r,!0)){for(var i=n+1;AE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!B5t.test(s))return!0}return!1};zt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ac.lastIndex=this.pos;var e=ac.exec(this.input),t=this.pos+e[0].length,n;return!Bc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(AE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};zt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=X._var,s="let"),r){case X._break:case X._continue:return this.parseBreakContinueStatement(i,r.keyword);case X._debugger:return this.parseDebuggerStatement(i);case X._do:return this.parseDoStatement(i);case X._for:return this.parseForStatement(i);case X._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case X._class:return e&&this.unexpected(),this.parseClass(i,!0);case X._if:return this.parseIfStatement(i);case X._return:return this.parseReturnStatement(i);case X._switch:return this.parseSwitchStatement(i);case X._throw:return this.parseThrowStatement(i);case X._try:return this.parseTryStatement(i);case X._const:case X._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case X._while:return this.parseWhileStatement(i);case X._with:return this.parseWithStatement(i);case X.braceL:return this.parseBlock(!0,i);case X.semi:return this.parseEmptyStatement(i);case X._export:case X._import:if(this.options.ecmaVersion>10&&r===X._import){ac.lastIndex=this.pos;var o=ac.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===X._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===X.name&&c.type==="Identifier"&&this.eat(X.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};zt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(X.semi)||this.insertSemicolon()?e.label=null:this.type!==X.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};zt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};zt.parseDoStatement=function(e){return this.next(),this.labels.push(ZQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(X._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(X.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};zt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ZQ),this.enterScope(0),this.expect(X.parenL),this.type===X.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===X._var||this.type===X._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new B5,u=this.parseExpression(t>-1?"await":!0,a);return this.type===X._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};zt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,G2|(n?0:CH),!1,t)};zt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(X._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};zt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(X.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};zt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(X.braceL),this.labels.push(X5t),this.enterScope(0);for(var t,n=!1;this.type!==X.braceR;)if(this.type===X._case||this.type===X._default){var r=this.type===X._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(X.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};zt.parseThrowStatement=function(e){return this.next(),Bc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Q5t=[];zt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?BLe:0),this.checkLValPattern(e,t?VLe:Wm),this.expect(X.parenR),e};zt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===X._catch){var t=this.startNode();this.next(),this.eat(X.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(X._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};zt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};zt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ZQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};zt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};zt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};zt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===X._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};zt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};zt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(X.braceL),e&&this.enterScope(0);this.type!==X.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};zt.parseFor=function(e,t){return e.init=t,this.expect(X.semi),e.test=this.type===X.semi?null:this.parseExpression(),this.expect(X.semi),e.update=this.type===X.parenR?null:this.parseExpression(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};zt.parseForIn=function(e,t){var n=this.type===X._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};zt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(X.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===X._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(X.comma))break}return e};zt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?JQ:Wm,!1)};var G2=1,CH=2,qLe=4;zt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===X.star&&t&CH&&this.unexpected(),e.generator=this.eat(X.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&G2&&(e.id=t&qLe&&this.type!==X.name?null:this.parseIdent(),e.id&&!(t&CH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?JQ:Wm:ULe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(QQ(e.async,e.generator)),t&G2||(e.id=this.type===X.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&G2?"FunctionDeclaration":"FunctionExpression")};zt.parseFunctionParams=function(e){this.expect(X.parenL),e.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};zt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(X.braceL);this.type!==X.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&J5t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};zt.parseClassElement=function(e){if(this.eat(X.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(X.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===X.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===X.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(X.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===X.parenL||o!=="method"||i||s){var l=!n.static&&UM(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};zt.isClassElementNameStart=function(){return this.type===X.name||this.type===X.privateId||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword};zt.parseClassElementName=function(e){this.type===X.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};zt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&UM(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};zt.parseClassField=function(e){if(UM(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&UM(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(X.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};zt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(ZI|KQ);this.type!==X.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};zt.parseClassId=function(e,t){this.type===X.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Wm,!1)):(t===!0&&this.unexpected(),e.id=null)};zt.parseClassSuper=function(e){e.superClass=this.eat(X._extends)?this.parseExprSubscripts(null,!1):null};zt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};zt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];JI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function J5t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function UM(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}zt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};zt.parseExport=function(e,t){if(this.next(),this.eat(X.star))return this.parseExportAllDeclaration(e,t);if(this.eat(X._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};zt.parseExportDeclaration=function(e){return this.parseStatement(null)};zt.parseExportDefaultDeclaration=function(){var e;if(this.type===X._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,G2|qLe,!1,e)}else if(this.type===X._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};zt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),JI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};zt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};zt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};zt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};zt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};zt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(X.braceL);!this.eat(X.braceR);){if(n)n=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;t.push(this.parseExportSpecifier(e))}return t};zt.parseImport=function(e){return this.next(),this.type===X.string?(e.specifiers=Q5t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===X.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};zt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Wm),this.finishNode(e,"ImportSpecifier")};zt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Wm),this.finishNode(e,"ImportDefaultSpecifier")};zt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Wm),this.finishNode(e,"ImportNamespaceSpecifier")};zt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===X.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(X.comma)))return e;if(this.type===X.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(X.braceL);!this.eat(X.braceR);){if(t)t=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;e.push(this.parseImportSpecifier())}return e};zt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===X.string){var e=this.parseLiteral(this.value);return W5t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};zt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};zt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var zc=Hs.prototype;zc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};zc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};zc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};zc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==X.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};zc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case X.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(X.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case X.braceL:return this.parseObj(!0)}return this.parseIdent()};zc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(X.comma),t&&this.type===X.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===X.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};zc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};zc.parseBindingListItem=function(e){return e};zc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(X.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};zc.checkLValSimple=function(e,t,n){t===void 0&&(t=zM);var r=t!==zM;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Wm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(JI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==HLe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};zc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=zM),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};zc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=zM),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Kc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},$i={b_stat:new Kc("{",!1),b_expr:new Kc("{",!0),b_tmpl:new Kc("${",!1),p_stat:new Kc("(",!1),p_expr:new Kc("(",!0),q_tmpl:new Kc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Kc("function",!1),f_expr:new Kc("function",!0),f_expr_gen:new Kc("function",!0,!1,null,!0),f_gen:new Kc("function",!1,!1,null,!0)},zx=Hs.prototype;zx.initialContext=function(){return[$i.b_stat]};zx.curContext=function(){return this.context[this.context.length-1]};zx.braceIsBlock=function(e){var t=this.curContext();return t===$i.f_expr||t===$i.f_stat?!0:e===X.colon&&(t===$i.b_stat||t===$i.b_expr)?!t.isExpr:e===X._return||e===X.name&&this.exprAllowed?Bc.test(this.input.slice(this.lastTokEnd,this.start)):e===X._else||e===X.semi||e===X.eof||e===X.parenR||e===X.arrow?!0:e===X.braceL?t===$i.b_stat:e===X._var||e===X._const||e===X.name?!1:!this.exprAllowed};zx.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};zx.updateContext=function(e){var t,n=this.type;n.keyword&&e===X.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};zx.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};X.parenR.updateContext=X.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===$i.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};X.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?$i.b_stat:$i.b_expr),this.exprAllowed=!0};X.dollarBraceL.updateContext=function(){this.context.push($i.b_tmpl),this.exprAllowed=!0};X.parenL.updateContext=function(e){var t=e===X._if||e===X._for||e===X._with||e===X._while;this.context.push(t?$i.p_stat:$i.p_expr),this.exprAllowed=!0};X.incDec.updateContext=function(){};X._function.updateContext=X._class.updateContext=function(e){e.beforeExpr&&e!==X._else&&!(e===X.semi&&this.curContext()!==$i.p_stat)&&!(e===X._return&&Bc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===X.colon||e===X.braceL)&&this.curContext()===$i.b_stat)?this.context.push($i.f_expr):this.context.push($i.f_stat),this.exprAllowed=!1};X.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};X.backQuote.updateContext=function(){this.curContext()===$i.q_tmpl?this.context.pop():this.context.push($i.q_tmpl),this.exprAllowed=!1};X.star.updateContext=function(e){if(e===X._function){var t=this.context.length-1;this.context[t]===$i.f_expr?this.context[t]=$i.f_expr_gen:this.context[t]=$i.f_gen}this.exprAllowed=!0};X.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==X.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var yn=Hs.prototype;yn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};yn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===X.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(X.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};yn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new B5,r=!0);var a=this.start,u=this.startLoc;(this.type===X.parenL||this.type===X.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===X.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===X.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};yn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(X.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(X.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};yn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};yn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==X._in)&&s>r){var o=this.type===X.logicalOR||this.type===X.logicalAND,a=this.type===X.coalesce;a&&(s=X.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===X.coalesce||a&&(this.type===X.logicalOR||this.type===X.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};yn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};yn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===X.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&WLe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===X.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==X._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(X.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function WLe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&WLe(e.expression)}yn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};yn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};yn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(X.arrow)};yn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};yn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(X.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(X.bracketL);if(l||u&&this.type!==X.parenL&&this.type!==X.backQuote||this.eat(X.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(X.bracketR)):this.type===X.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(X.parenL)){var f=new B5,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===X.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};yn.parseExprAtom=function(e,t,n){this.type===X.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case X._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===X.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==X.dot&&this.type!==X.bracketL&&this.type!==X.parenL&&this.unexpected(),this.finishNode(r,"Super");case X._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case X.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(X._function))return this.overrideContext($i.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(X.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===X.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(X.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case X.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case X.num:case X.string:return this.parseLiteral(this.value);case X._null:case X._true:case X._false:return r=this.startNode(),r.value=this.type===X._null?null:this.type===X._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case X.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case X.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(X.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case X.braceL:return this.overrideContext($i.b_expr),this.parseObj(!1,e);case X._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case X._class:return this.parseClass(this.startNode(),!1);case X._new:return this.parseNew();case X.backQuote:return this.parseTemplate();case X._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};yn.parseExprAtomDefault=function(){this.unexpected()};yn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===X.parenL&&!e)return this.parseDynamicImport(t);if(this.type===X.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};yn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(X.parenR)){var t=this.start;this.eat(X.comma)&&this.eat(X.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};yn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};yn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};yn.parseParenExpression=function(){this.expect(X.parenL);var e=this.parseExpression();return this.expect(X.parenR),e};yn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};yn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new B5,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==X.parenR;)if(l?l=!1:this.expect(X.comma),s&&this.afterTrailingComma(X.parenR,!0)){c=!0;break}else if(this.type===X.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(X.parenR),e&&this.shouldParseArrow(u)&&this.eat(X.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};yn.parseParenItem=function(e){return e};yn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Z5t=[];yn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===X.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(X.parenL)?e.arguments=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Z5t,this.finishNode(e,"NewExpression")};yn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===X.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===X.backQuote,this.finishNode(n,"TemplateElement")};yn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===X.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(X.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(X.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};yn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===X.name||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===X.star)&&!Bc.test(this.input.slice(this.lastTokEnd,this.start))};yn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(X.braceR);){if(r)r=!1;else if(this.expect(X.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(X.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};yn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(X.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===X.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(X.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(X.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};yn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};yn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===X.colon&&this.unexpected(),this.eat(X.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===X.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==X.comma&&this.type!==X.braceR&&this.type!==X.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===X.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};yn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(X.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(X.bracketR),e.key;e.computed=!1}return e.key=this.type===X.num||this.type===X.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};yn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};yn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(QQ(t,r.generator)|KQ|(n?zLe:0)),this.expect(X.parenL),r.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};yn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(QQ(n,!1)|jLe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};yn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==X.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,HLe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};yn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};yn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,JQ,t?null:n)}};yn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(X.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===X.comma?o=null:this.type===X.ellipsis?(o=this.parseSpread(r),r&&this.type===X.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};yn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};yn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};yn.parseIdentNode=function(){var e=this.startNode();return this.type===X.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=X.name):this.unexpected(),e};yn.parsePrivateIdent=function(){var e=this.startNode();return this.type===X.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};yn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===X.semi||this.canInsertSemicolon()||this.type!==X.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(X.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};yn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var VM=Hs.prototype;VM.raise=function(e,t){var n=LLe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};VM.raiseRecoverable=VM.raise;VM.curPosition=function(){if(this.options.locations)return new gA(this.curLine,this.pos-this.lineStart)};var Iy=Hs.prototype,eFt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Iy.enterScope=function(e){this.scopeStack.push(new eFt(e))};Iy.exitScope=function(){this.scopeStack.pop()};Iy.treatFunctionsAsVarInScope=function(e){return e.flags&Bx||!this.inModule&&e.flags&yA};Iy.declareName=function(e,t,n){var r=!1;if(t===Wm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&yA&&delete this.undefinedExports[e]}else if(t===VLe){var s=this.currentScope();s.lexical.push(e)}else if(t===ULe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&BLe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&yA&&delete this.undefinedExports[e],u.flags&XQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Iy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Iy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Iy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&XQ)return t}};Iy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&XQ&&!(t.flags&jLe))return t}};var z5=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new j5(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},eO=Hs.prototype;eO.startNode=function(){return new z5(this,this.start,this.startLoc)};eO.startNodeAt=function(e,t){return new z5(this,e,t)};function GLe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}eO.finishNode=function(e,t){return GLe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};eO.finishNodeAt=function(e,t,n,r){return GLe.call(this,e,t,n,r)};eO.copyNode=function(e){var t=new z5(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var YLe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",KLe=YLe+" Extended_Pictographic",XLe=KLe,QLe=XLe+" EBase EComp EMod EPres ExtPict",JLe=QLe,tFt=JLe,nFt={9:YLe,10:KLe,11:XLe,12:QLe,13:JLe,14:tFt},rFt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",iFt={9:"",10:"",11:"",12:"",13:"",14:rFt},mge="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",ZLe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",e6e=ZLe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",t6e=e6e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",n6e=t6e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",r6e=n6e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",sFt=r6e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",oFt={9:ZLe,10:e6e,11:t6e,12:n6e,13:r6e,14:sFt},i6e={};function aFt(e){var t=i6e[e]={binary:Gg(nFt[e]+" "+mge),binaryOfStrings:Gg(iFt[e]),nonBinary:{General_Category:Gg(mge),Script:Gg(oFt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var BB=0,gge=[9,10,11,12,13,14];BB<gge.length;BB+=1){var uFt=gge[BB];aFt(uFt)}var kt=Hs.prototype,Hh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=i6e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Hh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Hh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Hh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Hh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Hh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Hh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Hh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Hh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Hh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};kt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};kt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};kt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};kt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};kt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};kt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};kt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};kt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};kt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};kt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};kt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};kt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};kt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};kt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};kt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};kt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};kt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return s6e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function s6e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}kt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!s6e(n);)e.advance();return e.pos!==t};kt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};kt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};kt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};kt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=K0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=K0(e.lastIntValue);return!0}return!1};kt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),lFt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function lFt(e){return xm(e,!0)||e===36||e===95}kt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),cFt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function cFt(e){return AE(e,!0)||e===36||e===95||e===8204||e===8205}kt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};kt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};kt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};kt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};kt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};kt.regexp_eatZero=function(e){return e.current()===48&&!U5(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};kt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};kt.regexp_eatControlLetter=function(e){var t=e.current();return o6e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function o6e(e){return e>=65&&e<=90||e>=97&&e<=122}kt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&fFt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function fFt(e){return e>=0&&e<=1114111}kt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};kt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var a6e=0,Sm=1,cc=2;kt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(dFt(t))return e.lastIntValue=-1,e.advance(),Sm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===cc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return a6e};function dFt(e){return e===100||e===68||e===115||e===83||e===119||e===87}kt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Sm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return a6e};kt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){JI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};kt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Sm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return cc;e.raise("Invalid property name")};kt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";u6e(t=e.current());)e.lastStringValue+=K0(t),e.advance();return e.lastStringValue!==""};function u6e(e){return o6e(e)||e===95}kt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";hFt(t=e.current());)e.lastStringValue+=K0(t),e.advance();return e.lastStringValue!==""};function hFt(e){return u6e(e)||U5(e)}kt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};kt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===cc&&e.raise("Negated character class may contain strings"),!0}return!1};kt.regexp_classContents=function(e){return e.current()===93?Sm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Sm)};kt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};kt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||f6e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};kt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};kt.regexp_classSetExpression=function(e){var t=Sm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===cc&&(t=cc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==cc&&(t=Sm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===cc&&(t=cc)}};kt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};kt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Sm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};kt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===cc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};kt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};kt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===cc&&(t=cc);return t};kt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Sm:cc};kt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&pFt(n)||mFt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function pFt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function mFt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}kt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return gFt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function gFt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}kt.regexp_eatClassControlLetter=function(e){var t=e.current();return U5(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};kt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};kt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;U5(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function U5(e){return e>=48&&e<=57}kt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;l6e(n=e.current());)e.lastIntValue=16*e.lastIntValue+c6e(n),e.advance();return e.pos!==t};function l6e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function c6e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}kt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};kt.regexp_eatOctalDigit=function(e){var t=e.current();return f6e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function f6e(e){return e>=48&&e<=55}kt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!l6e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+c6e(i),e.advance()}return!0};var eJ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new j5(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Kn=Hs.prototype;Kn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new eJ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Kn.getToken=function(){return this.next(),new eJ(this)};typeof Symbol<"u"&&(Kn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===X.eof,value:t}}}});Kn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(X.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Kn.readToken=function(e){return xm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Kn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Kn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=NLe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Kn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!jx(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Kn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&DLe.test(String.fromCharCode(e)))++this.pos;else break e}}};Kn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Kn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(X.ellipsis)):(++this.pos,this.finishToken(X.dot))};Kn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(X.assign,2):this.finishOp(X.slash,1)};Kn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?X.star:X.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=X.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(X.assign,n+1):this.finishOp(r,n)};Kn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(X.assign,3)}return this.finishOp(e===124?X.logicalOR:X.logicalAND,2)}return t===61?this.finishOp(X.assign,2):this.finishOp(e===124?X.bitwiseOR:X.bitwiseAND,1)};Kn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(X.assign,2):this.finishOp(X.bitwiseXOR,1)};Kn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Bc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(X.incDec,2):t===61?this.finishOp(X.assign,2):this.finishOp(X.plusMin,1)};Kn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(X.assign,n+1):this.finishOp(X.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(X.relational,n))};Kn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(X.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(X.arrow)):this.finishOp(e===61?X.eq:X.prefix,1)};Kn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(X.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(X.assign,3)}return this.finishOp(X.coalesce,2)}}return this.finishOp(X.question,1)};Kn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),xm(t,!0)||t===92))return this.finishToken(X.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+K0(t)+"'")};Kn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(X.parenL);case 41:return++this.pos,this.finishToken(X.parenR);case 59:return++this.pos,this.finishToken(X.semi);case 44:return++this.pos,this.finishToken(X.comma);case 91:return++this.pos,this.finishToken(X.bracketL);case 93:return++this.pos,this.finishToken(X.bracketR);case 123:return++this.pos,this.finishToken(X.braceL);case 125:return++this.pos,this.finishToken(X.braceR);case 58:return++this.pos,this.finishToken(X.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(X.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(X.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+K0(e)+"'")};Kn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Kn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Bc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Hh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(X.regexp,{pattern:i,flags:o,value:u})};Kn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function yFt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function d6e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Kn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=d6e(this.input.slice(t,this.pos)),++this.pos):xm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,n)};Kn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=d6e(this.input.slice(t,this.pos));return++this.pos,xm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),xm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=yFt(this.input.slice(t,this.pos),n);return this.finishToken(X.num,s)};Kn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Kn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(jx(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(X.string,t)};var h6e={};Kn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===h6e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Kn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw h6e;this.raise(e,t)};Kn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===X.template||this.type===X.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(X.dollarBraceL)):(++this.pos,this.finishToken(X.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(X.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(jx(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Kn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(X.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Kn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return K0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return jx(t)?"":String.fromCharCode(t)}};Kn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Kn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(AE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?xm:AE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=K0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Kn.readWord=function(){var e=this.readWord1(),t=X.name;return this.keywords.test(e)&&(t=GQ[e]),this.finishToken(t,e)};var vFt="8.11.3";Hs.acorn={Parser:Hs,version:vFt,defaultOptions:TH,Position:gA,SourceLocation:j5,getLineInfo:LLe,Node:z5,TokenType:ur,tokTypes:X,keywordTypes:GQ,TokContext:Kc,tokContexts:$i,isIdentifierChar:AE,isIdentifierStart:xm,Token:eJ,isNewLine:jx,lineBreak:Bc,lineBreakG:V5t,nonASCIIwhitespace:DLe};function _Ft(e,t){return Hs.parse(e,t)}const tJ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},bFt={ecmaVersion:11},yge="$",wFt="d",EFt="d1",xFt="d2",xo=e=>(t,n)=>n.error(t,e+" not allowed"),SFt=xo("Aggregate function"),TFt=xo("Window function"),CFt="Invalid argument",nJ="Invalid column reference",AFt=nJ+" (must be input to an aggregate function)",p6e="Invalid function call",IFt="Invalid member expression",OFt="Invalid operator parameter",PFt="Invalid param reference",kFt="Invalid variable reference",RFt="Variable not accessible in operator call",$Ft="Unsupported variable declaration",NFt="Unsupported destructuring pattern",m6e="Table expressions do not support closures",g6e="Use aq.escape(fn) to use a function as-is (including closures)",DFt="use table.params({ name: value }) to define dynamic parameters",MFt="use aq.addFunction(name, fn) to add new op functions",LFt=`
Note: ${m6e}. ${g6e}, or ${DFt}.`,y6e=`
Note: ${m6e}. ${g6e}, or ${MFt}.`,FFt=`The ${y3e} method is not valid in multi-table expressions.`;function jFt(e,t){const n=BFt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,$5t(r)?(UFt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=EFt),e.scope.add(e.tuple2=xFt),e.scope.add(e.$param=yge)):(e.scope.add(e.tuple=wFt),e.scope.add(e.$param=yge)),sr(r,e,rJ),e.root}function BFt(e){try{const t=e.field?zFt(e):pr(e)?Eh(e):e;return _Ft(`expr=(${t})`,bFt).body[0].expression.right}catch{Pn(`Expression parse error: ${e+""}`)}}function zFt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const rJ={FunctionDeclaration:xo("Function definitions"),ForStatement:xo("For loops"),ForOfStatement:xo("For-of loops"),ForInStatement:xo("For-in loops"),WhileStatement:xo("While loops"),DoWhileStatement:xo("Do-while loops"),AwaitExpression:xo("Await expressions"),ArrowFunctionExpression:xo("Function definitions"),AssignmentExpression:xo("Assignments"),FunctionExpression:xo("Function definitions"),NewExpression:xo('Use of "new"'),UpdateExpression:xo("Update expressions"),VariableDeclarator(e,t){OH(e.id,t)},Identifier(e,t,n){b6e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,kFt,LFt)},CallExpression(e,t){const n=v6e(e.callee),r=p3e(n)||m3e(n);if(r){if((t.join||t.aggregate===!1)&&qX(n)&&SFt(e,t),(t.join||t.window===!1)&&WX(n)&&TFt(e,t),t.$op=1,t.ast)IH(e,n,t),e.arguments.forEach(i=>sr(i,t,AH));else{const i=t.op(VFt(t,r,n,e.arguments));Object.assign(e,{type:l3e,name:i.id})}return t.$op=0,!1}else h3e(n)?IH(e,n,t):t.error(e,p6e,y6e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ms(y0,r))return;const{name:s}=r;if(_6e(e)&&Ms(y0,i)&&Lf(tJ,i.name)){x6e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return vge(e,o,t,w6e,n);if(s===t.$param)return vge(e,o,t,qFt);t.paramsRef.has(s)?vA(e,t.paramsRef.get(s)):t.columnRef.has(s)?E6e(r,s,t,e):Lf(t.params,s)&&vA(r,s)}};function vge(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ms(Nx,s))a=s.value;else try{sr(s,n,rJ,e),a=n.param(s)}catch{n.error(e,IFt)}return r(e,a,t,n,i),!1}const AH={...rJ,VariableDeclarator:xo("Variable declaration in operator call"),Identifier(e,t,n){b6e(e,t,n)&&t.error(e,RFt)},CallExpression(e,t){const n=v6e(e.callee);h3e(n)?IH(e,n,t):t.error(e,p6e,y6e)}};function UFt(e,t){e.generator&&xo("Generator functions")(e,t),e.async&&xo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(tT(t,n[0],"tuple1",i(1)),r>1&&tT(t,n[1],"tuple2",i(2)),r>2&&tT(t,n[2],"$param",s)):(tT(t,n[0],"tuple",i(0)),r>1&&tT(t,n[1],"$param",s))),t.root=e.body}function tT(e,t,n,r){Ms(y0,t)?(e.scope.add(t.name),e[n]=t.name):Ms(a3e,t)&&t.properties.forEach(i=>{const s=Ms(y0,i.key)?i.key.name:Ms(Nx,i.key)?i.key.value:e.error(i,CFt);Ms(y0,i.value)||e.error(i.value,NFt),r(i.value.name,s)})}function VFt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(sr(u,e,AH),i.push(e.field(u))):l<a?(sr(u,e,AH),s.push(e.param(u))):e.error(u,OFt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function v6e(e){return Ms(y0,e)?e.name:Ms(o3e,e)?_6e(e)?HFt(e.property.name):e.property.name:null}function _6e(e){return Ms(y0,e.object)&&e.object.name==="Math"}function HFt(e){return e==="max"?"greatest":e==="min"?"least":e}function b6e(e,t,n){const{name:r}=e;if(!(Ms(o3e,n)&&n.property===e)){if(!(Ms(u3e,n)&&n.key===e))if(t.paramsRef.has(r))vA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))E6e(e,r,t,n);else if(Lf(t.params,r))vA(e,r);else if(Lf(tJ,r))x6e(e,r);else return!0}}function w6e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,nJ),r.aggronly&&!r.$op&&r.error(e,AFt),g3e(e,t,n,o,i)}function E6e(e,t,n,r){const[i,s]=n.columnRef.get(t);w6e(e,i,s,n,r)}function qFt(e,t,n,r){r.params&&!Lf(r.params,t)&&r.error(e,PFt),vA(e,t)}function vA(e,t){e.type=NMt,e.name=t}function x6e(e,t){e.type=kMt,e.name=t,e.raw=tJ[t]}function IH(e,t,n){if(t===y3e){const r=n.table;r||n.error(e,FFt),v3e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Za(s)?r.columnName(s):s;return r.column(o)||n.error(i,nJ),o}):r.columnNames())}else e.callee={type:$Mt,name:t}}function OH(e,t){Ms(y0,e)?t.scope.add(e.name):Ms(AMt,e)?e.elements.forEach(n=>OH(n,t)):Ms(a3e,e)?e.properties.forEach(n=>OH(n.value,t)):t.error(e.id,$Ft)}const WFt={[WI]:1,[l3e]:1};function Wu(e,t={}){const n=t.generate||wM,r=t.compiler||GX,i=YFt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=GFt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ms(Nx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?R5t(g):f(n(g),i));u.push(y),WFt[g.type]&&y!==g&&Sa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(d.spec).slice(v,_);Pn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of T5(e))d.value(m+"",g.escape?M5t(d,g,i):jFt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function GFt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function YFt(e){return(e.table?zB(e.table):e.join?{...zB(e.join[1]),...zB(e.join[0])}:{})||{}}function zB(e){return e&&Si(e.params)?e.params():{}}const S6e="Expr",Xc="ExprList",T6e="ExprNumber",QT="ExprObject",Kb="JoinKeys",HM="JoinValues",Zl="Options",iJ="OrderKeys",bg="SelectionList",Tv="TableRef",Xb="TableRefList",KFt="Descending",XFt="Query",QFt="Selection",JFt="Verb",ZFt="Window";function V5(e,t){return e&&e.expr?new _ge({...e,...t}):new _ge(t,e)}class _ge{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Si(this.expr)?{func:!0}:{}}}}function e8t(e){return V5(e,{desc:!0})}function N1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return V5(e,t?{expr:t,...r}:r)}function t8t(e,t,n){return V5(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function n8t(e){const t=n=>n;return t.toString=()=>e,t}function bge(e,t){return t=t&&Si(t.query)?t.query():t,t&&Si(t.evaluate)?t.evaluate(null,e):e(t)}function C6e(e){return Sa(e)&&(pr(e.all)||pr(e.matches)||pr(e.not)||pr(e.range))}function _A(e){return e&&Si(e.toObject)?e.toObject():Si(e)?{expr:String(e),func:!0}:pr(e)?e.map(_A):Sa(e)?L5(e,t=>_A(t)):e}function sJ(e){return pr(e)?e.map(sJ):Sa(e)?pr(e.verbs)?aJ.from(e):pr(e.all)?CE():pr(e.range)?A5t(...e.range):pr(e.match)?I5t(RegExp(...e.match)):pr(e.not)?PLe(e.not.map(_A)):r8t(e):e}function r8t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=N1(n):e.func===!0&&(t=n=n8t(n)),Sa(e.window)){const{frame:r,peers:i}=e.window;t=n=t8t(n,r,i)}e.desc===!0&&(t=e8t(n))}return e===t?L5(e,r=>sJ(r)):t}function i8t(e){return pr(e)?e.map(s8t):e}function s8t(e){const t=[];return Vu(e).forEach(n=>{Za(n)?t.push(n):zo(n)?t.push(N1(n,null)):Sa(n)&&n.expr||Si(n)?t.push(n):Pn(`Invalid key value: ${n+""}`)}),t}function o8t(e){return pr(e)?e.map(a8t):e}function a8t(e,t){return t<2?Vu(e):e}function u8t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Sa(r)&&!Si(r))for(const i in r)t.push(r[i]);else n=Za(r)?r:zo(r)?N1(n):Si(r)?n:Pn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const l8t={[S6e]:P6e,[Xc]:IE,[T6e]:m8t,[QT]:X0,[Kb]:g8t,[HM]:y8t,[iJ]:IE,[bg]:h8t};function c8t(e,t,n){return t===Tv?wge(e):t===Xb?e.map(wge):A6e(_A(e),t,n)}function A6e(e,t,n){return t===Zl?e&&f8t(e,n):l8t[t](e)}function f8t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?A6e(i,t[r]):i}return n}function d8t(e,t){return Wu({expr:e},{...t,ast:!0}).exprs[0]}function oJ(e){return{type:WI,name:e}}function I6e(e){return{type:WI,index:e}}function X0(e,t){if(zo(e))return d8t(e,t);if(e.expr){let n;if(e.field===!0?n=oJ(e.expr):e.func===!0&&(n=X0(e.expr,t)),n)return e.desc&&(n={type:KFt,expr:n}),e.window&&(n={type:ZFt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...X0(e[n],t),as:n}))}function O6e(e){const t=QFt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:IE(e.not)}:e.range?{type:t,operator:"range",arguments:IE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Pn("Invalid input")}function h8t(e){return Vu(e).map(p8t).flat()}function p8t(e){return C6e(e)?O6e(e):Za(e)?I6e(e):zo(e)?oJ(e):Sa(e)?Object.keys(e).map(t=>({type:WI,name:t,as:e[t]})):Pn("Invalid input")}function P6e(e){return C6e(e)?O6e(e):Za(e)?I6e(e):zo(e)?oJ(e):Sa(e)?X0(e):Pn("Invalid input")}function IE(e){return Vu(e).map(P6e).flat()}function m8t(e){return Za(e)?e:X0(e)}function g8t(e){return pr(e)?e.map(IE):X0(e,{join:!0})}function y8t(e){return pr(e)?e.map((t,n)=>n<2?IE(t):X0(t,{join:!0})):X0(e,{join:!0})}function wge(e){return e&&Si(e.toAST)?e.toAST():e}class k6e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Kb?i8t(a):o===HM?o8t(a):o===iJ?u8t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=PH[t.verb],r=(n.schema||[]).map(({name:i})=>sJ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Tv?bge(n,o):s===Xb?o.map(a=>bge(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=_A(this[n])}),t}toAST(){const t={type:JFt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=c8t(this[n],r,i)}),t}}function Wr(e,t){return Object.assign((...n)=>new k6e(e,t,n),{schema:t})}const PH={count:Wr("count",[{name:"options",type:Zl}]),derive:Wr("derive",[{name:"values",type:QT},{name:"options",type:Zl,props:{before:bg,after:bg}}]),filter:Wr("filter",[{name:"criteria",type:QT}]),groupby:Wr("groupby",[{name:"keys",type:Xc}]),orderby:Wr("orderby",[{name:"keys",type:iJ}]),relocate:Wr("relocate",[{name:"columns",type:bg},{name:"options",type:Zl,props:{before:bg,after:bg}}]),rename:Wr("rename",[{name:"columns",type:bg}]),rollup:Wr("rollup",[{name:"values",type:QT}]),sample:Wr("sample",[{name:"size",type:T6e},{name:"options",type:Zl,props:{weight:S6e}}]),select:Wr("select",[{name:"columns",type:bg}]),ungroup:Wr("ungroup"),unorder:Wr("unorder"),reify:Wr("reify"),dedupe:Wr("dedupe",[{name:"keys",type:Xc,default:[]}]),impute:Wr("impute",[{name:"values",type:QT},{name:"options",type:Zl,props:{expand:Xc}}]),fold:Wr("fold",[{name:"values",type:Xc},{name:"options",type:Zl}]),pivot:Wr("pivot",[{name:"keys",type:Xc},{name:"values",type:Xc},{name:"options",type:Zl}]),spread:Wr("spread",[{name:"values",type:Xc},{name:"options",type:Zl}]),unroll:Wr("unroll",[{name:"values",type:Xc},{name:"options",type:Zl,props:{drop:Xc}}]),lookup:Wr("lookup",[{name:"table",type:Tv},{name:"on",type:Kb},{name:"values",type:Xc}]),join:Wr("join",[{name:"table",type:Tv},{name:"on",type:Kb},{name:"values",type:HM},{name:"options",type:Zl}]),cross:Wr("cross",[{name:"table",type:Tv},{name:"values",type:HM},{name:"options",type:Zl}]),semijoin:Wr("semijoin",[{name:"table",type:Tv},{name:"on",type:Kb}]),antijoin:Wr("antijoin",[{name:"table",type:Tv},{name:"on",type:Kb}]),concat:Wr("concat",[{name:"tables",type:Xb}]),union:Wr("union",[{name:"tables",type:Xb}]),intersect:Wr("intersect",[{name:"tables",type:Xb}]),except:Wr("except",[{name:"tables",type:Xb}])};let aJ=class R6e extends GDe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new R6e(t.map(k6e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Ege(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Ege(this,"toAST",{type:XFt})}};function Ege(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function v8t(e,t){return new aJ(e._verbs.concat(t),e._params,e._table)}for(const e in PH){const t=PH[e];aJ.prototype["__"+e]=function(n,...r){return v8t(n,t(...r))}}function Ux(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function _8t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function uJ(e,t){const n=ql();return t.forEach((r,i)=>{const s=zo(r)?r:i;if(s){const o=e.column(i)||Pn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function $6e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Pn("relocate requires a before or after option."),i&&s&&Pn("relocate accepts only one of the before or after options."),t=Em(e,t);const o=[...Em(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),uJ(e,u)}function tO(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function lJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function b8t(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function w8t(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function Ek(e){return lA(e)?e:+e}function E8t(e,t){const n=e.length;if(!n)return lr;if((t=+t)<=0||n<2)return Ek(e[0]);if(t>=1)return Ek(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=Ek(e[i]);return lA(s)?s:s+(Ek(e[i+1])-s)*(r-i)}class x8t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:b8t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:w8t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(lJ)),E8t(this._sorted,t)}}const qM=(e,t,n)=>Ux(t,"{"+tO(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function S8t(e,t){const{ops:n,output:r}=T8t(e,t),i=e[0].fields,s=i.length,o=s===0?cJ:s===1?C8t:s===2?A8t:Pn("Unsupported field count: "+s);return new o(i,n,r,t)}function T8t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=p3e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class cJ extends P5t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new x8t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class C8t extends cJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=qM(n,s,"add"),this._rem=qM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,_f(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,_f(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class A8t extends cJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=qM(n,s,"add"),this._rem=qM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,_f(i)&&_f(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,_f(i)&&_f(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function w_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=Vx(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function Vx(e,t,n){if(!t.length)return n;const r=N6e(t),i=e.groups(),s=i?i.size:1;return n=n||x5(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=M6e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=D6e(e,o);o.write(a,n,0)}),n}function N6e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(S8t(r[i],t));return n}function D6e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function M6e(e,t,n){const{keys:r,size:i}=n,s=x5(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function L6e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function F6e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const xge=F6e(lJ);function I8t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?Ux(["w","r","k"],"{"+tO(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=xge.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=xge.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],b=a[E];for(let T=_;T<p.i0;++T)S.rem(b,s[T],e);for(let T=w;T<p.i1;++T)S.add(b,s[T],e);S.write(b,u,l)}return h(p,u,l),u}};return p}const O8t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),P8t=e=>!!e.peers;function k8t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=m3e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function R8t(e,t,n,r={},i){const s=e.data(),o=$8t(i,s),a=o.length,u=Ux(["r","d","op"],"{"+tO(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=N8t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function $8t(e,t){const n={};return e.forEach(r=>{const i=O8t(r),s=P8t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});qX(r.name)?a.push(r):u.push(k8t(r))}),Object.values(n).map(r=>I8t(t,r.frame,r.peers,r.winOps,N6e(r.aggOps,r.frame[0]!=null?-1:1)))}function N8t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function D8t(e){return WX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function fJ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=ql(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=M8t(r),c=e.isGrouped()?e.groups().size:1,f=Vx(e,u,x5(r.length,()=>Array(c)));return l.length?R8t(e,a,n,f,l):L8t(e,a,n,f),e.create(o)}function M8t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(D8t(s)?n:t).push(s)}return[t,n]}function L8t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function F8t(e,t,n={}){const r=fJ(e,Wu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:$6e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function j8t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const xk=2147483648,B8t=4294967295;class j6e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&xk>>>t}set(t){this._bits[t>>5]|=xk>>>t}clear(t){this._bits[t>>5]&=~(xk>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&B8t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=xk>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function z8t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new j6e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function U8t(e,t){const n=Wu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=fJ(e,n,{drop:!0}).column("p");r=s=>i[s]}return z8t(e,r)}function B6e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=w_(e,r,n),l=ql(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},_=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,b)=>{const T=Vu(w(S,b)),A=Math.min(T.length,s);v(S,A);for(let I=0;I<A;++I)E[m+I]=T[I];_(m,A),m+=A})}else e.scan((w,E)=>{let S=0;const b=u.map(T=>{const A=Vu(T(w,E));return S=Math.min(Math.max(S,A.length),s),A});v(w,S);for(let T=0;T<y;++T){const A=h[T],I=b[T];for(let k=0;k<S;++k)A[m+k]=I[k]}_(m,S),m+=S});return e.create(l.new())}function V8t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=w_(e,r,n);return B6e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function jf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Za(o)?t.columnName(o):o,zo(o)?i.set(o,N1(o)):Si(o)?Em(t,o).forEach(s):Sa(o)?ILe(i,o):Pn(`Invalid ${e} value: ${o+""}`)};return Vu(n).forEach(s),r.preparse&&r.preparse(i),Wu(i,{table:t,...r})}function H8t(e,t,n){return V8t(e,jf("fold",e,t),n)}function Sge(e,t,n,r){const i=n&&n.length;return q8t(i?W8t(e,n,r):e,t,i)}function q8t(e,{names:t,exprs:n,ops:r},i){const s=w_(e,r,n),o=i?null:ql(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=_f(p)?p:d(h)})}),i?e:e.create(o)}function W8t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=EM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=ql(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=EM(o.map((p,m)=>g=>g[m])),h=Ux("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Tge(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Tge(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Tge(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function dJ(e,{names:t,exprs:n,ops:r}){const i=ql(),s=e.groups();return s&&L6e(i,s),G8t(t,n,s,Vx(e,r),i),e.create(i.new())}function G8t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function Y8t(e,t,n={}){if(t=Wu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Pn(`Invalid impute column ${Eh(r)}`)),n.expand){const r={preparse:K8t,aggronly:!0},i=jf("impute",e,n.expand,r),s=dJ(e.ungroup(),i);return Sge(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Sge(e,t)}function K8t(e){e.forEach((t,n)=>t.field?e.set(n,n3e(t+"")):0)}function X8t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function z6e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function Q8t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function J8t(e,t){const n=["i","a","j","b"];return Ux(n,"{"+tO(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function Z8t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=ql(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=J8t(g,y);if((pr(n)?tjt:ejt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function ejt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function tjt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(S,b,T,A)=>e(T,A,S,b));const w=Q8t(v,m,g),E=p.length;for(let S=0;S<E;++S){const b=p[S],T=w.get(d(b,f));if(T){const A=T.length;for(let I=0;I<A;++I){const k=T[I];_(b,f,v[k],m),y[k]=1}h[S]=1}}}function WM(e,t,n){const r=new Map;Vu(n).forEach((s,o)=>{s=Za(s)?t.columnName(s):s,zo(s)?r.set(o,N1(s)):Si(s)||Sa(s)&&s.expr?r.set(o,s):Pn(`Invalid ${e} key value: ${s+""}`)});const i=Wu(r,{table:t,aggregate:!1,window:!1});return EM(i.exprs,!0)}function njt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function hJ(e,t,n){if(n)zo(n)?n=[n,n]:pr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=njt(e.columnNames(),t.columnNames());r.length||Pn("Natural join requires shared column names."),n=[r,r]}return n}function U6e(e,t,n,r){return n.length!==r.length&&Pn("Mismatched number of join keys"),[WM("join",e,n),WM("join",t,r)]}const rjt={aggregate:!1,window:!1},ijt={...rjt,index:1};function Cge(e,t,n,r,i={}){n=hJ(e,t,n);const s={join:[e,t]};let o;if(pr(n)){const[a,u]=n.map(Vu);o=U6e(e,t,a,u),r||(r=sjt(e,a,u,i))}else o=Wu({on:n},s).exprs[0],r||(r=[CE(),CE()]);return Z8t(e,t,o,ojt(e,t,r,s,i&&i.suffix),i)}function sjt(e,t,n,r){const i=[];t.forEach((o,a)=>zo(o)&&o===n[a]?i.push(o):0);const s=PLe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Eh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,CE()]:[CE(),s]}function ojt(e,t,n,r,i=[]){if(pr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=jf("join",e,n[0],r)),u--&&(o=jf("join",t,n[1],ijt)),u--&&(a=Wu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Age(s.names,l,i[0]||"_1"),i[1]!==""&&Age(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Wu(n,r)}function Age(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function ajt(e,t,n,r={}){const i=new j6e(e.totalRows());return(pr(n)?ujt:ljt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function ujt(e,t,n,[r,i]){const s=z6e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function ljt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Ige(e,t,n,r){n=hJ(e,t,n);const i=pr(n)?U6e(e,t,...n.map(Vu)):Wu({on:n},{join:[e,t]}).exprs[0];return ajt(e,t,i,r)}function cjt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=ql(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(lr)));const l=z6e(t,r),c=Ux(["lr","rr","data"],"{"+tO(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),w_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function fjt(e,t,n,r){return n=hJ(e,t,n),cjt(e,t,[WM("lookup",e,n[0]),WM("lookup",t,n[1])],jf("lookup",t,r))}const kH=(e,t)=>e??t;function djt(e,t,n,r={}){const{keys:i,keyColumn:s}=hjt(e,t,r),o=kH(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>Vx(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(pjt(n,a,e.groups(),u))}function hjt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=kH(n.sort,!0),s=kH(n.keySeparator,"_"),o=w_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=Vx(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function pjt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=ql(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&L6e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function mjt(e,t,n,r){return djt(e,jf("fold",e,t),jf("fold",e,n,{preparse:gjt,aggronly:!0}),r)}function gjt(e){e.forEach((t,n)=>t.field?e.set(n,ZDe(t+"")):0)}function yjt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),uJ(e,Em(e,t,n))}function Oge(e,t){return dJ(e,Wu(t,{table:e,aggronly:!0,window:!1}))}function vjt(e,t,n,r){return(t?r?bjt:_jt:r?Ejt:wjt)(e.length,e,n,r)}function _jt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*$x()|0];return t}function bjt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=F6e(lJ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*$x())];return t}function wjt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*$x();s<e&&(t[s|0]=n[i])}return t}function Ejt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log($x())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function xjt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=$x()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function Sjt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):vjt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&xjt(u),e.reify(u)}function Tjt(e,t,n={}){return Sjt(e,Cjt(e,t),Ajt(e,n.weight),n)}const V6e=e=>t=>e.get(t)||0;function Cjt(e,t){return Za(t)?()=>t:V6e(dJ(e,Wu({size:t},{table:e,window:!1})).column("size"))}function Ajt(e,t){return t==null?null:(t=Za(t)?e.columnName(t):t,V6e(zo(t)?e.column(t):fJ(e,Wu({w:t},{table:e}),{drop:!0}).column("w")))}function Ijt(e,t){return uJ(e,Em(e,t))}function Ojt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=w_(e,r,n),l=ql(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=Pjt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function Pjt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Vu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(lr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function kjt(e,t,n){return Ojt(e,jf("spread",e,t),n)}function Rjt(e,t){return e.concat(t).dedupe()}function $jt(e,t,n){return B6e(e,jf("unroll",e,t),n&&n.drop?{...n,drop:jf("unroll",e,n.drop).names}:n)}function Njt(e,t){return e.create({groups:Djt(e,t)})}function Djt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=w_(e,r,n);const o=EM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Mjt(e,t){return Njt(e,jf("groupby",e,t))}function Ljt(e,t){return e.create({order:t})}const Fjt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function jjt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Wu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([wM(p,{index:"a",op:o}),wM(p,{index:"b",op:a})])},window:!1}),l=Vx(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Fjt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Bjt(e,t){return Ljt(e,zjt(e,t))}function zjt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Sa(o)&&!Si(o))for(const a in o)i(o[a]);else i(Za(o)?N1(s,e.columnName(o)):zo(o)?N1(s):Si(o)?s:Pn(`Invalid orderby field: ${s+""}`))}),jjt(e,r)}function Ujt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=ql();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>lr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Vjt(e,t){const n=ql(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?M6e(e,t,r):[D6e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Hjt(e){return e.isGrouped()?e.create({groups:null}):e}function qjt(e){return e.isOrdered()?e.create({order:null}):e}const Wjt={__antijoin:(e,t,n)=>Ige(e,t,n,{anti:!0}),__count:(e,t={})=>Oge(e,{[t.as||"count"]:e3e()}),__cross:(e,t,n,r)=>Cge(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Ujt,__dedupe:_8t,__derive:F8t,__except:j8t,__filter:U8t,__fold:H8t,__impute:Y8t,__intersect:X8t,__join:Cge,__lookup:fjt,__pivot:mjt,__relocate:$6e,__rename:yjt,__rollup:Oge,__sample:Tjt,__select:Ijt,__semijoin:Ige,__spread:kjt,__union:Rjt,__unroll:$jt,__groupby:Mjt,__orderby:Bjt,__ungroup:Hjt,__unorder:qjt,__reduce:Vjt};Object.assign(Ud.prototype,Wjt);function Gjt(e,t){return Ud.new(e,t)}function pJ(e,t){return Ud.from(e,t)}function Sk(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,u=[r,i,s,o];let l=u.length;for(;l&&u[--l]==null;)u.pop();const c=u.length?", "+u.map(f=>f+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function Cv(e){return V5(e,{escape:!0,toString(){Pn("Escaped values can not be serialized.")}})}Ud.prototype;function Yjt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let Tk;const Kjt=new Uint8Array(16);function Xjt(){if(!Tk&&(Tk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tk(Kjt)}const _o=[];for(let e=0;e<256;++e)_o.push((e+256).toString(16).slice(1));function Qjt(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}const Jjt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pge={randomUUID:Jjt};function kge(e,t,n){if(Pge.randomUUID&&!t&&!e)return Pge.randomUUID();e=e||{};const r=e.random||(e.rng||Xjt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Qjt(r)}class sh{static get(){let t=kge();for(;this.ids.has(t);)t=kge();return this.ids.set(t,!0),t}}sh.ids=new Map;function Af(e){return"parent"in e}function Zjt(e){return!Af(e)}function e9t(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:sh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:sh.get(),createdOn:Date.now(),val:r}]:[];return{id:sh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function t9t({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:sh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:sh.get(),createdOn:Date.now(),val:s}]:[];return{id:sh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Xi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=c9t[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function D1(e){return!!e&&!!e[Nl]}function Q0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===f9t}(e)||Array.isArray(e)||!!e[Y2]||!!(!((t=e.constructor)===null||t===void 0)&&t[Y2])||H5(e)||q5(e))}function OE(e,t,n){n===void 0&&(n=!1),J0(e)===0?(n?Object.keys:bJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function J0(e){var t=e[Nl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:H5(e)?2:q5(e)?3:0}function bA(e,t){return J0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function o$(e,t){return J0(e)===2?e.get(t):e[t]}function H6e(e,t,n){var r=J0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function n9t(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function H5(e){return u9t&&e instanceof Map}function q5(e){return l9t&&e instanceof Set}function gv(e){return e.o||e.t}function mJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=d9t(e);delete t[Nl];for(var n=bJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function gJ(e,t){return t===void 0&&(t=!1),yJ(e)||D1(e)||!Q0(e)||(J0(e)>1&&(e.set=e.add=e.clear=e.delete=r9t),Object.freeze(e),t&&OE(e,function(n,r){return gJ(r,!0)},!0)),e}function r9t(){Xi(2)}function yJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function oh(e){var t=DH[e];return t||Xi(18,e),t}function i9t(e,t){DH[e]||(DH[e]=t)}function Rge(){return{}.NODE_ENV==="production"||PE||Xi(0),PE}function UB(e,t){t&&(oh("Patches"),e.u=[],e.s=[],e.v=t)}function GM(e){RH(e),e.p.forEach(s9t),e.p=null}function RH(e){e===PE&&(PE=e.l)}function $ge(e){return PE={p:[],l:PE,h:e,m:!0,_:0}}function s9t(e){var t=e[Nl];t.i===0||t.i===1?t.j():t.O=!0}function VB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||oh("ES5").S(t,e,r),r?(n[Nl].P&&(GM(t),Xi(4)),Q0(e)&&(e=YM(t,e),t.l||KM(t,e)),t.u&&oh("Patches").M(n[Nl].t,e,t.u,t.s)):e=YM(t,n,[]),GM(t),t.u&&t.v(t.u,t.s),e!==_J?e:void 0}function YM(e,t,n){if(yJ(t))return t;var r=t[Nl];if(!r)return OE(t,function(s,o){return Nge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return KM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=mJ(r.k):r.o;OE(r.i===3?new Set(i):i,function(s,o){return Nge(e,r,i,s,o,n)}),KM(e,i,!1),n&&e.u&&oh("Patches").R(r,n,e.u,e.s)}return r.o}function Nge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Xi(5),D1(i)){var o=YM(e,i,s&&t&&t.i!==3&&!bA(t.D,r)?s.concat(r):void 0);if(H6e(n,r,o),!D1(o))return;e.m=!1}if(Q0(i)&&!yJ(i)){if(!e.h.F&&e._<1)return;YM(e,i),t&&t.A.l||KM(e,i)}}function KM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&gJ(t,n)}function HB(e,t){var n=e[Nl];return(n?gv(n):e)[t]}function Dge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $H(e){e.P||(e.P=!0,e.l&&$H(e.l))}function qB(e){e.o||(e.o=mJ(e.t))}function NH(e,t,n){var r=H5(t)?oh("MapSet").N(t,n):q5(t)?oh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Rge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=MH;o&&(u=[a],l=JT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):oh("ES5").J(t,n);return(n?n.A:Rge()).p.push(r),r}function o9t(e){return D1(e)||Xi(22,e),function t(n){if(!Q0(n))return n;var r,i=n[Nl],s=J0(n);if(i){if(!i.P&&(i.i<4||!oh("ES5").K(i)))return i.t;i.I=!0,r=Mge(n,s),i.I=!1}else r=Mge(n,s);return OE(r,function(o,a){i&&o$(i.t,o)===a||H6e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Mge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return mJ(e)}function a9t(){function e(r){if(!Q0(r))return r;if(Array.isArray(r))return r.map(e);if(H5(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(q5(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return bA(r,Y2)&&(i[Y2]=r[Y2]),i}function t(r){return D1(r)?e(r):r}var n="add";i9t("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=J0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Xi(24),typeof u=="function"&&f==="prototype"&&Xi(24),typeof(u=o$(u,f))!="object"&&Xi(15,o.join("/"))}var d=J0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Xi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Xi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;OE(a.D,function(h,p){var m=o$(f,h),g=o$(d,h),y=p?bA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===_J?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Lge,PE,vJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",u9t=typeof Map<"u",l9t=typeof Set<"u",Fge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",_J=vJ?Symbol.for("immer-nothing"):((Lge={})["immer-nothing"]=!0,Lge),Y2=vJ?Symbol.for("immer-draftable"):"__$immer_draftable",Nl=vJ?Symbol.for("immer-state"):"__$immer_state",c9t={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},f9t=""+Object.prototype.constructor,bJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,d9t=Object.getOwnPropertyDescriptors||function(e){var t={};return bJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},DH={},MH={get:function(e,t){if(t===Nl)return e;var n=gv(e);if(!bA(n,t))return function(i,s,o){var a,u=Dge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Q0(r)?r:r===HB(e.t,t)?(qB(e),e.o[t]=NH(e.A.h,r,e)):r},has:function(e,t){return t in gv(e)},ownKeys:function(e){return Reflect.ownKeys(gv(e))},set:function(e,t,n){var r=Dge(gv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=HB(gv(e),t),s=i==null?void 0:i[Nl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(n9t(n,i)&&(n!==void 0||bA(e.t,t)))return!0;qB(e),$H(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return HB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,qB(e),$H(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=gv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Xi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Xi(12)}},JT={};OE(MH,function(e,t){JT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),JT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Xi(13),JT.set.call(this,e,t,void 0)},JT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Xi(14),MH.set.call(this,e[0],t,n,e[0])};var h9t=function(){function e(n){var r=this;this.g=Fge,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Xi(6),o!==void 0&&typeof o!="function"&&Xi(7),Q0(i)){var c=$ge(r),f=NH(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?GM(c):RH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return UB(c,o),VB(m,c)},function(m){throw GM(c),m}):(UB(c,o),VB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===_J&&(l=void 0),r.F&&gJ(l,!0),o){var h=[],p=[];oh("Patches").M(i,l,h,p),o(h,p)}return l}Xi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Q0(n)||Xi(8),D1(n)&&(n=o9t(n));var r=$ge(this),i=NH(this,n,void 0);return i[Nl].C=!0,RH(r),i},t.finishDraft=function(n,r){var i=n&&n[Nl];({}).NODE_ENV!=="production"&&(i&&i.C||Xi(9),i.I&&Xi(10));var s=i.A;return UB(s,r),VB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Fge&&Xi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=oh("Patches").$;return D1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Dl=new h9t,p9t=Dl.produce;Dl.produceWithPatches.bind(Dl);Dl.setAutoFreeze.bind(Dl);Dl.setUseProxies.bind(Dl);Dl.applyPatches.bind(Dl);Dl.createDraft.bind(Dl);Dl.finishDraft.bind(Dl);function m9t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=e9t({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return dRe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:sh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:sh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function g9t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=m9t(e),s=r2t();s.startListening({matcher:Ohe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Ohe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=cRe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:sh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var y9t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v9t=Object.prototype.hasOwnProperty;function LH(e,t){return v9t.call(e,t)}function FH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)LH(e,i)&&r.push(i);return r}function ku(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function jH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function yv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function q6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function BH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(BH(e[t]))return!0}else if(typeof e=="object"){for(var r=FH(e),i=r.length,s=0;s<i;s++)if(BH(e[r[s]]))return!0}}return!1}function jge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var W6e=function(e){y9t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,jge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=jge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=W6e,_9t=ku,Qb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=XM(n,this.path);r&&(r=ku(r));var i=l1(n,{op:"remove",path:this.from}).removed;return l1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=XM(n,this.from);return l1(n,{op:"add",path:this.path,value:ku(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:wA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},b9t={add:function(e,t,n){return jH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Qb.move,copy:Qb.copy,test:Qb.test,_get:Qb._get};function XM(e,t){if(t=="")return e;var n={op:"_get",path:t};return l1(e,n),n.value}function l1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):QM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=XM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=wA(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=ku(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=QM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=q6e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!jH(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);jH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=b9t[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Qb[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function W5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ku(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=l1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function w9t(e,t,n){var r=l1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function QM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Qb[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&BH(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=G6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function G6e(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)W5(ku(t),ku(e),n||!0);else{n=n||QM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function wA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!wA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!wA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const E9t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:wA,applyOperation:l1,applyPatch:W5,applyReducer:w9t,deepClone:_9t,getValueByPointer:XM,validate:G6e,validator:QM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var wJ=new WeakMap,x9t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),S9t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function T9t(e){return wJ.get(e)}function C9t(e,t){return e.observers.get(t)}function A9t(e,t){e.observers.delete(t.callback)}function I9t(e,t){t.unobserve()}function O9t(e,t){var n=[],r,i=T9t(e);if(!i)i=new x9t(e),wJ.set(e,i);else{var s=C9t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=ku(e),t){r.callback=t,r.next=null;var o=function(){zH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){zH(r),clearTimeout(r.next),A9t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new S9t(t,r)),r}function zH(e,t){t===void 0&&(t=!1);var n=wJ.get(e.object);EJ(n.value,e.object,e.patches,"",t),e.patches.length&&W5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function EJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=FH(t),o=FH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(LH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?EJ(c,f,n,r+"/"+yv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+yv(l),value:ku(c)}),n.push({op:"replace",path:r+"/"+yv(l),value:ku(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+yv(l),value:ku(c)}),n.push({op:"remove",path:r+"/"+yv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!LH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+yv(l),value:ku(t[l])})}}}function Y6e(e,t,n){n===void 0&&(n=!1);var r=[];return EJ(e,t,r,"",n),r}const P9t=Object.freeze(Object.defineProperty({__proto__:null,compare:Y6e,generate:zH,observe:O9t,unobserve:I9t},Symbol.toStringTag,{value:"Module"}));Object.assign({},E9t,P9t,{JsonPatchError:W6e,deepClone:ku,escapePathComponent:yv,unescapePathComponent:q6e});var ZT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(ZT||{});function a$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=K6e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=a$(i,t);return W5(a,ku(o),!0,!1).newDocument}function k9t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function UH({registry:e,initialState:t}){let n=!1;const r=Yjt(),i=g9t(t);function s(c){return i.backend.nodes[c]}r.listen(ZT.TRAVERSAL_START,()=>{n=!0}),r.listen(ZT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return a$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=a$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=Y6e(y,f);if(k9t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=t9t({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=a$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(ZT.TRAVERSAL_START);const f=K6e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);$9t(p,m)?Af(p)&&d.push(...p.sideEffects.undo):Af(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(ZT.TRAVERSAL_END)},undo(){const{current:c}=i;return Af(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return X6e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function R9t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Af(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Af(r)&&(r=n[r.parent]),Af(i)&&(i=n[i.parent]);return r.id}function K6e(e,t,n){const r=R9t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Af(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Af(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function $9t(e,t){if(Af(e)&&e.parent===t.id)return!0;if(Af(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function X6e(e,t){return{...e,children:e.children.map(n=>X6e(t[n],t)),name:`${e.label}`}}a9t();function N9t(e){return e.length===2?p9t(e):e}class EA{static create(){return new EA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:N9t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),nh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var D9t="Expected a function",Bge=NaN,M9t="[object Symbol]",L9t=/^\s+|\s+$/g,F9t=/^[-+]0x[0-9a-f]+$/i,j9t=/^0b[01]+$/i,B9t=/^0o[0-7]+$/i,z9t=parseInt,U9t=typeof Ua=="object"&&Ua&&Ua.Object===Object&&Ua,V9t=typeof self=="object"&&self&&self.Object===Object&&self,H9t=U9t||V9t||Function("return this")(),q9t=Object.prototype,W9t=q9t.toString,G9t=Math.max,Y9t=Math.min,WB=function(){return H9t.Date.now()};function K9t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(D9t);t=zge(t)||0,VH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?G9t(zge(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var b=r,T=i;return r=i=void 0,l=S,o=e.apply(T,b),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var b=S-u,T=S-l,A=t-b;return f?Y9t(A,s-T):A}function g(S){var b=S-u,T=S-l;return u===void 0||b>=t||b<0||f&&T>=s}function y(){var S=WB();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(WB())}function E(){var S=WB(),b=g(S);if(r=arguments,i=this,u=S,b){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=w,E}function VH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function X9t(e){return!!e&&typeof e=="object"}function Q9t(e){return typeof e=="symbol"||X9t(e)&&W9t.call(e)==M9t}function zge(e){if(typeof e=="number")return e;if(Q9t(e))return Bge;if(VH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(L9t,"");var n=j9t.test(e);return n||B9t.test(e)?z9t(e.slice(2),n?2:8):F9t.test(e)?Bge:+e}var J9t=K9t;const pd=Ju(J9t);function Q6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=C.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=C.useMemo(()=>Ix(".2s"),[]);return R.jsxs(R.Fragment,{children:[R.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:R.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:R.jsx(Ya,{children:R.jsx(yr,{spacing:3,children:R.jsx(it,{size:14,style:{color:"#878E95"},children:r})})})})}),R.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),R.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>R.jsxs("g",{transform:`translate(${n}, ${a})`,children:[R.jsx("line",{x2:"-6",stroke:"currentColor"}),R.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),R.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const Z9t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:Q6e},Symbol.toStringTag,{value:"Module"})),GB=15;function J6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:u}){const[l,c]=C.useState([0,0]),[f,d]=C.useState(!1);return C.useEffect(()=>{const h=So(u.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),f){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<GB&&Math.abs(t(v[r.y])-g[1])<GB);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(w=>{v.has(w[r.ids])&&v.delete(w[r.ids])});const _=Array.from(v);n([[l[0],l[1]],[l[0],l[1]]],e,t,_.length===0?"clear":"drag",s.id,_)}else{const v=Array.from(new Set([...a,...y.map(_=>_[r.ids])]));v.length>0&&n([[l[0],l[1]],[l[0],l[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{d(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{d(!1)})}},[l,s.id,a,i,f,o,r,n,u,e,t]),R.jsx("circle",{style:{cursor:f?"pointer":"default",pointerEvents:"none"},r:GB,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const eBt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:J6e},Symbol.toStringTag,{value:"Module"}));function Jb(e){const t=C.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return C.useLayoutEffect(()=>{t.current=e}),C.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const ri={top:15,left:100,right:15,bottom:130};function Z6e({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u}){const[l,{height:c,width:f}]=yc(),[d,h]=C.useState(i),[p]=yc(),[m]=yc(),g=C.useMemo(()=>f-ri.left-ri.right,[f]),y=C.useMemo(()=>c-ri.top-ri.bottom,[c]),v=C.useMemo(()=>{const $=Array.from(new Set(s.map(P=>P[d.category])));return Px(PDe).domain($)},[s,d.category]),{xMin:_,yMin:w,xMax:E,yMax:S}=C.useMemo(()=>{const $=s.map(V=>+V[d.x]).filter(V=>V!==null),[P,N]=P3($),F=s.map(V=>+V[d.y]).filter(V=>V!==null),[z,W]=P3(F);return{xMin:P,xMax:N,yMin:z,yMax:W}},[s,d.x,d.y]),b=C.useMemo(()=>{const $=E-_;return g<=0?null:d.dataType==="date"?SDe([ri.left,g+ri.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):_h([ri.left,g+ri.left]).domain([_-$/10,E+$/10]).nice()},[d.dataType,g,E,_]),T=C.useMemo(()=>{const $=S-w;return y<=0?null:_h([y+ri.top,ri.top]).domain([w-$/10,S+$/10]).nice()},[y,S,w]);C.useMemo(()=>{if(!b||!T)return()=>null;if(r==="Axis Selection"){const $=nkt().extent([[ri.left,ri.top+y-5],[ri.left+g,ri.top+y+5]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[N.selection[0],null],[N.selection[1],null]],b,T,N.mode,t.id)}),P=rkt().extent([[ri.left-5,ri.top],[ri.left+5,ri.top+y]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[null,N.selection[0]],[null,N.selection[1]]],b,T,N.mode,t.id)});return p.current&&m.current&&(So(m.current).call(P),So(p.current).call($),t.hasBrush||(So(m.current).call(P.move,[T(S),T(w)]),So(p.current).call($.move,[b(new Date("2015-01-02")),b(new Date("2015-12-31"))]),n([[b(new Date("2015-01-02")),T(S)],[b(new Date("2015-12-31")),T(w)]],b,T,"drag",t.id))),()=>{So(m.current).call(P.move,[T(S),T(w)]),So(p.current).call($.move,[b(new Date("2015-01-02")),b(new Date("2015-12-31"))]),n([[b(new Date("2015-01-02")),T(S)],[b(new Date("2015-12-31")),T(w)]],b,T,"clear",t.id)}}if(r==="Rectangular Selection"){const $=ikt().extent([[ri.left,ri.top],[ri.left+g,ri.top+y]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],b,T,P.mode,t.id)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(So(l.current).call($.move,null),e(null))});return So(l.current).call($),()=>{So(l.current).call($.move,null),n([[null,null],[null,null]],b,T,"clear",t.id)}}return r==="Slider Selection"?()=>n([[b(_),T(S)],[b(E),T(w)]],b,T,"clear",t.id):r==="Paintbrush Selection"?()=>n([[b(_),T(S)],[b(E),T(w)]],b,T,"clear",t.id,[]):()=>null},[t,r,p,m,y,l,n,g,E,_,b,S,w,T]),C.useEffect(()=>{r==="Slider Selection"&&b&&T&&n([[b(_),T(S)],[b(E),T(w)]],b,T,null,t.id)},[r,E,_,b,S,w,T]);const A=C.useMemo(()=>o.length===0?null:new Set(o),[o]),I=C.useMemo(()=>!b||!T?null:s.filter($=>d.year?+$.Year===d.year:!0).map(($,P)=>{if($[d.x]===null||$[d.y]===null)return null;const N=d.dataType==="date"?b(new Date($[d.x])):b($[d.x]);return R.jsx(Yp,{withinPortal:!0,label:$[d.ids],children:R.jsx("circle",{opacity:A&&!A.has($[d.ids])?.3:.7,r:3,fill:A&&!A.has($[d.ids])?"lightgray":d.hideCat?"gray":v($[d.category]),cx:N,cy:T($[d.y])},P)},P)}),[A,v,s,b,T,d]);C.useEffect(()=>{r==="Axis Selection"&&KIt(".handle").style("fill","darkgrey")},[t,r]);const k=Jb($=>{h({...d,year:$?+$:void 0})});return R.jsxs(Bi,{spacing:0,children:[R.jsx(yr,{mr:ri.right,style:{justifyContent:"space-between"},children:d.year?R.jsxs(Bi,{spacing:0,children:[R.jsx(it,{size:12,ml:ri.left,children:d.year}),R.jsx(aK,{min:2008,max:2022,value:d.year,onChange:k,ml:ri.left,style:{width:"150px"},label:d.year})]}):null}),R.jsxs(yr,{style:{width:"100%",height:"100%"},noWrap:!0,children:[R.jsxs("svg",{id:"scatterSvgBrushStudy",ref:l,style:{height:"500px",width:d.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b&&T?R.jsxs("g",{children:[R.jsx(Q6e,{yScale:T,label:d.y,horizontalPosition:ri.left,xRange:b.range()}),R.jsx(HI,{xScale:b,yRange:T.range(),isDate:d.dataType==="date",vertPosition:y+ri.top,label:d.x,ticks:b.ticks(d.brushType==="Axis Selection"?12:5).map($=>({value:$.toString(),offset:b($)}))})]}):null,I,R.jsx("g",{id:"brushXRef",ref:p}),R.jsx("g",{id:"brushYRef",ref:m}),b&&T&&r==="Paintbrush Selection"?R.jsx(J6e,{currSelected:o,svgRef:l,brushState:t,setBrushedSpace:n,params:d,data:s.filter($=>d.year?+$.Year===d.year:!0),isSelect:u,xScale:b,yScale:T}):null]}),r==="Slider Selection"&&b&&T?R.jsxs(Bi,{style:{flexGrow:1},spacing:50,children:[R.jsxs(Bi,{spacing:0,children:[R.jsx(it,{children:d.x}),R.jsx(UU,{minRange:1,label:null,min:b.domain()[0],max:b.domain()[1],labelAlwaysOn:!1,onChange:$=>{n([[b($[0]),t.y1],[b($[1]),t.y2]],b,T,"drag",t.id)},style:{width:"300px"},marks:b.ticks(5).map($=>({value:$,label:$})),value:[b.invert(t.x1),b.invert(t.x2)]})]}),R.jsxs(Bi,{spacing:0,children:[R.jsx(it,{children:d.y}),R.jsx(UU,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:$=>{n([[t.x1,T($[1])],[t.x2,T($[0])]],b,T,"drag",t.id)},style:{width:"300px"},marks:T.ticks(5).map($=>({value:$,label:$})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const tBt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Z6e},Symbol.toStringTag,{value:"Module"})),sl={top:15,left:100,right:15,bottom:130};function e4e({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,dataTable:l}){const[c,{height:f,width:d}]=yc(),[h,p]=C.useState(i),m=C.useMemo(()=>d-sl.left-sl.right,[d]),g=C.useMemo(()=>f-sl.top-sl.bottom,[f]),y=C.useMemo(()=>h.hideCat?l.groupby(t.xCol).count():l.groupby(t.xCol,"Survived").count(),[t.xCol,l,h.hideCat]),v=C.useMemo(()=>{if(!s)return null;const b=pJ(s);return h.hideCat?b.groupby(t.xCol).count():b.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),_=C.useMemo(()=>y?_h([sl.top,g+sl.top]).domain([0,vc(y.objects().map(b=>b.count))].reverse()).nice():null,[y,g]),w=C.useMemo(()=>y?c5([sl.left,m+sl.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),E=C.useMemo(()=>!w||!_||!v?null:v.objects().map((b,T)=>R.jsxs("g",{children:[h.hideCat?R.jsx("rect",{onClick:A=>n(l.objects().filter(I=>I[t.xCol]===b[t.xCol]).map(I=>I.Name),A),x:w(b[t.xCol]),y:g-(g-_(b.count)),fill:"gray",width:w.bandwidth(),height:sl.top+g-_(b.count)}):R.jsx("rect",{onClick:A=>n(l.objects().filter(I=>I[t.xCol]===b[t.xCol]&&I.Survived===b.Survived).map(I=>I.Name),A),x:b.Survived==="Yes"?w(b[t.xCol]):w(b[t.xCol])+w.bandwidth()/2,y:g-(g-_(b.count)),fill:b.Survived==="Yes"?"#f28e2c":"#4e79a7",width:w.bandwidth()/2,height:sl.top+g-_(b.count)}),R.jsx("text",{x:w(b[t.xCol])+(h.hideCat?w.bandwidth()/2:b.Survived==="Yes"?w.bandwidth()/4:w.bandwidth()*.75),y:_(b.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:b.count})]},`${T}fullRects`)),[v,t.xCol,l,g,h.hideCat,n,w,_]),S=C.useMemo(()=>!w||!_||!y?null:y.objects().map((b,T)=>R.jsx("g",{style:{cursor:"pointer"},children:R.jsx("rect",{onClick:A=>n(l.objects().filter(I=>I[t.xCol]===b[t.xCol]&&(h.hideCat?!0:I.Survived===b.Survived)).map(I=>I.Name),A),opacity:.7,x:b.Survived==="Yes"||h.hideCat?w(b[t.xCol]):w(b[t.xCol])+w.bandwidth()/2,fill:"lightgray",width:h.hideCat?w.bandwidth():w.bandwidth()/2,y:g-(g-_(b.count)),height:sl.top+g-_(b.count)})},`${T}survRects`)),[y,t.xCol,l,g,h.hideCat,n,w,_]);return _&&w&&v?R.jsx(Bi,{spacing:0,children:R.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[R.jsx(HI,{xScale:w,yRange:_.range(),vertPosition:g+sl.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(l.array(t.xCol))].map(b=>({value:b,offset:w(b)+w.bandwidth()/2}))}),_?R.jsx(E5,{label:"Count",yScale:_,horizontalPosition:sl.left,xRange:w.range(),ticks:_.ticks(5).map(b=>({value:b.toString(),offset:_(b)}))}):null,S,E]})}):null}const nBt=Object.freeze(Object.defineProperty({__proto__:null,Histogram:e4e},Symbol.toStringTag,{value:"Module"})),fd={top:15,left:100,right:15,bottom:130};function t4e({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:u,onClose:l,isPaintbrushSelect:c}){const[f,{height:d,width:h}]=yc(),[p,m]=C.useState(i),g=C.useMemo(()=>h-fd.left-fd.right,[h]),y=C.useMemo(()=>d-fd.top-fd.bottom,[d]),v=C.useMemo(()=>_h([fd.top,y+fd.top]).domain([0,vc(o.map(b=>+b[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),_=C.useMemo(()=>c5([fd.left,g+fd.left]).domain([...new Set(o.map(b=>b[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),w=C.useMemo(()=>pJ(o.map(b=>({...b,Age:+b.Age}))),[o]),E=C.useMemo(()=>new Set(s.map(b=>b[p.ids])),[s,p.ids]),S=C.useMemo(()=>{let b=p.hideCat?w.groupby(t.xCol,{group:Sk(t.yCol,{maxbins:20}),group_max:Sk(t.yCol,{maxbins:20,offset:1})}):w.groupby(t.xCol,"Survived",{group:Sk(t.yCol,{maxbins:20}),group_max:Sk(t.yCol,{maxbins:20,offset:1})});b=b.rollup({ids:H2.array_agg(p.ids),count:H2.count()}).orderby("group");const T=b.derive({ids:Cv($=>$.ids.filter(P=>E.has(P))),count:Cv($=>$.ids.filter(P=>E.has(P)).length)}).orderby("group"),A=_h([0,_.bandwidth()/2]).domain([0,vc(b.array("count"))]),I=gM($=>A($[1])+_.bandwidth()/2,$=>v($[0])).curve(aH),k=gM($=>_.bandwidth()/2-A($[1]),$=>v($[0])).curve(aH);return R.jsx("g",{children:_.domain().map($=>R.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?R.jsxs("g",{children:[R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$).map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_($)}, 0)`,d:`${I(b.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$).map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_($)}, 0)`,d:`${k(b.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$).map(N=>N.ids).flat(),P),transform:`translate(${_($)}, 0)`,d:`${I(T.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$).map(N=>N.ids).flat(),P),transform:`translate(${_($)}, 0)`,d:`${k(T.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):R.jsxs("g",{children:[R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$&&N.Survived==="Yes").map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_($)}, 0)`,d:`${I(b.objects().filter(P=>P[t.xCol]===$&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$&&N.Survived==="No").map(N=>N.ids).flat(),P),opacity:.7,transform:`translate(${_($)}, 0)`,d:`${k(b.objects().filter(P=>P[t.xCol]===$&&P.Survived==="No").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$&&N.Survived==="Yes").map(N=>N.ids).flat(),P),transform:`translate(${_($)}, 0)`,d:`${I(T.objects().filter(P=>P[t.xCol]===$&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),R.jsx("path",{onClick:P=>a(b.objects().filter(N=>N[t.xCol]===$&&N.Survived==="No").map(N=>N.ids).flat(),P),transform:`translate(${_($)}, 0)`,d:`${k(T.objects().filter(P=>P[t.xCol]===$&&P.Survived==="No").map(P=>[P.group,P.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},$))})},[t.xCol,t.yCol,E,w,p.hideCat,p.ids,a,_,v]);return R.jsx(Bi,{spacing:0,children:R.jsxs("svg",{id:"scatterSvgBrushStudy",ref:f,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[R.jsx(HI,{xScale:_,yRange:v.range(),vertPosition:y+fd.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:_.domain().map(b=>({value:b,offset:_(b)+_.bandwidth()/2}))}),v?R.jsx(E5,{label:t.yCol,yScale:v,horizontalPosition:fd.left,xRange:_.range(),ticks:v.ticks(5).map(b=>({value:b.toString(),offset:v(b)}))}):null,S]})})}const rBt=Object.freeze(Object.defineProperty({__proto__:null,Violin:t4e},Symbol.toStringTag,{value:"Module"}));function Uge({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=C.useState(null),[s,o]=C.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,u]=C.useState(!0),[l,c]=C.useState(null);C.useEffect(()=>{Dkt(`/ThinkAloud/data/${e.dataset}.csv`).then(S=>{c(S)})},[e]);const f=C.useMemo(()=>l?pJ(l):null,[l]);C.useEffect(()=>{if(n){const S=n.all.brush||n.all;o(S);const b=new Set(S.selection);if(f){const T=f.filter(Cv(A=>b.has(A[e.ids])));i(T)}}},[f,e.ids,n]);const{actions:d,trrack:h}=C.useMemo(()=>{const S=EA.create(),b=S.register("brush",($,P)=>($.all={brush:P},$)),T=S.register("brushMove",($,P)=>($.all={brush:P},$)),A=S.register("brushResize",($,P)=>($.all={brush:P},$)),I=S.register("brushClear",($,P)=>($.all={brush:P},$)),k=UH({registry:S,initialState:{all:s}});return{actions:{brush:b,brushMove:T,brushResize:A,clearBrush:I},trrack:k}},[]),p=C.useCallback((S,b)=>{S==="drag"?h.apply("Move Brush",d.brushMove(b)):(S==="handle"||S==="click")&&h.apply("Brush",d.brush(b)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[d,t,h]),m=C.useMemo(()=>pd(p,50,{maxWait:50}),[p]),g=C.useCallback((S,b,T,A,I,k)=>{if(!b||!T)return;const $=s[I],P=b.invert(S[0][0]||$.x1),N=b.invert(S[1][0]||$.x2),F=T.invert(S[1][1]||$.y2),z=T.invert(S[0][1]||$.y1);let W=null;if(A==="clear")W=f;else if(k){const M=new Set(k);W=f.filter(Cv(H=>M.has(H[e.ids])))}else e.brushType==="Axis Selection"?W=f.filter(Cv(M=>new Date(M[e.x])>=new Date(P)&&new Date(M[e.x])<=new Date(N)&&M[e.y]>=F&&M[e.y]<=z)):W=f.filter(Cv(M=>M[e.x]>=P&&M[e.x]<=N&&M[e.y]>=F&&M[e.y]<=z));const V={xCol:$.xCol,yCol:$.yCol,x1:S[0][0]||($==null?void 0:$.x1)||0,x2:S[1][0]||($==null?void 0:$.x2)||0,y1:S[0][1]||($==null?void 0:$.y1)||0,y2:S[1][1]||($==null?void 0:$.y2)||0,hasBrush:A!=="clear",id:I},G=A!=="clear"?W==null?void 0:W.array(e.ids):[];o({...s,[I]:V,selection:G}),A==="drag"||A==="handle"||A==="click"?m(A,{...s,[I]:V,selection:G}):A==="clear"&&h.apply("Clear Brush",d.clearBrush({...s,[I]:V,selection:G})),i(W)},[s,f,e,h,m,d]),y=C.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():f?f==null?void 0:f.groupby(e.category).count():null,[r,f,e.category]),v=C.useCallback(S=>{i(S)},[]),_=C.useCallback((S,b)=>{const T=new Set(b.ctrlKey||b.metaKey?[...s.selection,...S]:S),A=f.filter(Cv(I=>T.has(I[e.ids])));o({...s,selection:[...T]}),i(A),p("click",{...s,selection:[...T]})},[s,f,p,e.ids]),w=C.useMemo(()=>(f==null?void 0:f.objects())||[],[f]),E=C.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return l?R.jsxs(Bi,{spacing:"xs",children:[R.jsxs(yr,{children:[R.jsx(Fr,{ml:60,compact:!0,style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?R.jsx(xOe,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:S=>u(S==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?R.jsxs(R.Fragment,{children:[R.jsx(N0,{color:"#f28e2c"}),R.jsx(it,{children:"Survived"}),R.jsx(N0,{color:"#4e79a7"}),R.jsx(it,{children:"Died"})]}):null]}),R.jsxs(yr,{children:[Object.entries(s).map(S=>{const[b,T]=S;return b==="selection"?null:T.type==="histogram"?R.jsx(e4e,{onClose:A=>{const{[A]:I,...k}=s;o(k)},dataTable:f,setSelection:_,brushedPoints:s.selection,data:E.length>0?E:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},b):T.type==="violin"?R.jsx(t4e,{onClose:A=>{const{[A]:I,...k}=s;o(k)},allData:w,setSelection:_,brushedPoints:s.selection,data:E.length>0?E:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},b):R.jsx(Z6e,{onClose:A=>{const{[A]:I,...k}=s;o(k)},brushedPoints:s.selection,data:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},b)}),e.hideCat?null:R.jsx(uH,{fullTable:f,setSelection:_,data:w,parameters:e,barsTable:y})]})]}):R.jsx(ph,{})}const iBt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Uge,default:Uge},Symbol.toStringTag,{value:"Module"})),sBt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function n4e(e,t){return function(n){return t.map(r=>[r,l$e(n,i=>e(r-i))])}}function r4e(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function i4e(e,t){return e*t/(t-1)}function s4e(e,t,n){let r=Math.sqrt(i4e(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function oBt({values:e,xScale:t,ticks:n}){const r=Gjt({values:e}).rollup({variance:H2.variance("values"),q1:H2.quantile("values",.25),q3:H2.quantile("values",.75)}).objects()[0];return n4e(r4e(s4e(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const aBt=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:oBt,kernelDensityEstimator:n4e,kernelEpanechnikov:r4e,silvermans:s4e,toSampleVariance:i4e},Symbol.toStringTag,{value:"Module"})),uBt=Object.assign({"../public/ThinkAloud/AddPlot.tsx":MCt,"../public/ThinkAloud/AudioTest.tsx":JCt,"../public/ThinkAloud/Bar.tsx":H3t,"../public/ThinkAloud/BrushPlot.tsx":iBt,"../public/ThinkAloud/Histogram.tsx":nBt,"../public/ThinkAloud/Paintbrush.tsx":eBt,"../public/ThinkAloud/Scatter.tsx":tBt,"../public/ThinkAloud/Violin.tsx":rBt,"../public/ThinkAloud/XAxisBar.tsx":U3t,"../public/ThinkAloud/YAxis.tsx":Z9t,"../public/ThinkAloud/YAxisBar.tsx":V3t,"../public/ThinkAloud/types.ts":sBt,"../public/ThinkAloud/useKdeCalc.tsx":aBt});function lBt({currentConfig:e,provState:t}){const n=Yf(),r=jm()[n],i=`../public/${e.path}`,s=uBt[i].default,o=xc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Rl(),l=C.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[o,a,r,n,u]);return R.jsx(C.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:R.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})})}function cBt({currentConfig:e}){const[t,n]=C.useState(null);return C.useEffect(()=>{fetch(`${Nc}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:R.jsx(Ka,{text:t})}function Ih(){return xa(e=>e.config)}function xJ(){const{answers:e}=xa(i=>i),t=Yf(),r=`${jm()[t]}_${t}`;return e[r]}const fBt=tEe(aCt);var dBt=fBt;function hBt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function pBt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function mBt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function gBt(e){return e.__COMMENTS__}function yBt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var G5={EOL:dBt.EOL||`
`,tryParseNumber:hBt,createComment:pBt,removeComment:mBt,getComment:gBt,forceComment:yBt},vBt="3.2.1";function _Bt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Vge}else if(e.length===0)return Vge;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return wBt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),bBt.bind(null,n)}function bBt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Vge(){}function wBt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function o4e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}o4e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function a4e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}a4e.description="parse hexadecimal numbers prefixed with 0x";function u4e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}u4e.description="support ISO dates";var SJ={loadDsf:_Bt,std:{math:o4e,hex:a4e,date:u4e}},EBt=function(e,t){var n=G5,r=SJ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(N){return N==="{"||N==="}"||N==="["||N==="]"||N===","||N===":"}function d(N){var F,z=0,W=1;for(F=s-1;F>0&&i[F]!==`
`;F--,z++);for(;F>0;F--)i[F]===`
`&&W++;throw new Error(N+" at line "+W+","+z+" >>>"+i.substr(s-z,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(N){return i.charAt(s+N)}function m(N){for(var F="",z=o;h();){if(o===z)return h(),N&&z==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var W=0,V=0;V<4;V++){h();var G=o.charCodeAt(0),M;o>="0"&&o<="9"?M=G-48:o>="a"&&o<="f"?M=G-97+10:o>="A"&&o<="F"?M=G-65+10:d("Bad \\u char "+o),W=W*16+M}F+=String.fromCharCode(W)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var N="",F=0,z=0;;){var W=p(-z-5);if(!W||W===`
`)break;z++}function V(){for(var G=z;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),V());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return N.slice(-1)===`
`&&(N=N.slice(0,-1)),N;continue}else for(;F>0;)N+="'",F--;o===`
`?(N+=`
`,h(),V()):(o!=="\r"&&(N+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var N="",F=s,z=-1;;){if(o===":")return N?z>=0&&z!==N.length&&(s=F+z,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),N;o<=" "?o?z<0&&(z=N.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):N+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var N=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var z=N[0];switch(z){case"f":if(N.trim()==="false")return!1;break;case"n":if(N.trim()==="null")return null;break;case"t":if(N.trim()==="true")return!0;break;default:if(z==="-"||z>="0"&&z<="9"){var W=n.tryParseNumber(N);if(W!==void 0)return W}}if(F){N=N.trim();var V=l(N);return V!==void 0?V:N}}N+=o}}function w(N,F){var z;for(N--,z=s-2;z>N&&i[z]<=" "&&i[z]!==`
`;z--);i[z]===`
`&&z--,i[z]==="\r"&&z--;var W=i.substr(N,z-N+1);for(z=0;z<W.length;z++)if(W[z]>" "){var V=W.indexOf(`
`);if(V>=0){var G=[W.substr(0,V),W.substr(V+1)];return F&&G[0].trim().length===0&&G.shift(),G}else return[W]}return[]}function E(N){function F(W,V){var G,M,H,Y;switch(typeof W){case"string":W.indexOf(V)>=0&&(Y=W);break;case"object":if(Object.prototype.toString.apply(W)==="[object Array]")for(G=0,H=W.length;G<H;G++)Y=F(W[G],V)||Y;else for(M in W)Object.prototype.hasOwnProperty.call(W,M)&&(Y=F(W[M],V)||Y)}return Y}function z(W){var V=F(N,W);return V?"found '"+W+`' in a string value, your mistake could be with:
  > `+V+`
  (unquoted strings contain everything up to the next line!)`:""}return z("}")||z("]")}function S(){var N=[],F,z,W;try{if(u&&(F=n.createComment(N,{a:[]})),h(),z=s,v(),F&&(W=w(z,!0).join(`
`)),o==="]")return h(),F&&(F.e=[W]),N;for(;o;){if(N.push(T()),z=s,v(),o===","&&(h(),z=s,v()),F){var V=w(z);F.a.push([W||"",V[0]||""]),W=V[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=W||""),N;v()}d("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||E(N),G}}function b(N){var F="",z={},W,V,G;try{if(u&&(W=n.createComment(z,{c:{},o:[]})),N?V=1:(h(),V=s),v(),W&&(G=w(V,!0).join(`
`)),o==="}"&&!N)return W&&(W.e=[G]),h(),z;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),z[F]=T(),V=s,v(),o===","&&(h(),V=s,v()),W){var M=w(V);W.c[F]=[G||"",M[0]||""],G=M[1],W.o.push(F)}if(o==="}"&&!N)return h(),W&&(W.c[F][1]+=G||""),z;v()}if(N)return z;d("End of input while parsing an object (missing '}')")}catch(H){throw H.hint=H.hint||E(z),H}}function T(){switch(v(),o){case"{":return b();case"[":return S();case"'":case'"':return m(!0);default:return _()}}function A(N,F){var z=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var W=F.join(`
`),V=w(z).join(`
`);if(V||W){var G=n.createComment(N,n.getComment(N));G.r=[W,V]}}return N}function I(){v();var N=u?w(1):null;switch(o){case"{":return A(b(),N);case"[":return A(S(),N);default:return A(T(),N)}}function k(){v();var N=u?w(1):null;switch(o){case"{":return A(b(),N);case"[":return A(S(),N)}try{return A(b(!0),N)}catch(F){c();try{return A(T(),N)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var $=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,$=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf($,"parse"),i=e,c(),P?k():I()},xBt=function(e,t){var n=G5,r=SJ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),b=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},k=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,$="",P=0;function N(Y,L){return P+=Y[0].length+Y[1].length-Y[2]-Y[3],Y[0]+L+Y[1]}function F(Y){return Y.replace(S,function(L){var B=I[L];return typeof B=="string"?N(g.esc,B):N(g.uni,("0000"+L.charCodeAt(0).toString(16)).slice(-4))})}function z(Y,L,B,q){return Y?(b.lastIndex=0,A.lastIndex=0,c||B||b.test(Y)||n.tryParseNumber(Y,!0)!==void 0||A.test(Y)?(S.lastIndex=0,T.lastIndex=0,S.test(Y)?!T.test(Y)&&!q&&d?W(Y,L):N(g.qstr,F(Y)):N(g.qstr,Y)):N(g.str,Y)):N(g.qstr,"")}function W(Y,L){var B,q=Y.replace(/\r/g,"").split(`
`);if(L+=o,q.length===1)return N(g.mstr,q[0]);var Z=s+L+g.mstr[0];for(B=0;B<q.length;B++)Z+=s,q[B]&&(Z+=L+q[B]);return Z+s+L+g.mstr[1]}function V(Y){return Y?l||k.test(Y)?(S.lastIndex=0,N(g.qkey,S.test(Y)?F(Y):Y)):N(g.key,Y):'""'}function G(Y,L,B,q){function Z(bt){return bt&&bt[bt[0]==="\r"?1:0]===`
`}function ue(bt){return bt&&!Z(bt)}function he(bt,bn,Lt){if(!bt)return"";bt=n.forceComment(bt);var Ir,Fn=bt.length;for(Ir=0;Ir<Fn&&bt[Ir]<=" ";Ir++);return Lt&&Ir>0&&(bt=bt.substr(Ir)),Ir<Fn?bn+N(g.rem,bt):bt}var fe=w(Y);if(fe!==void 0)return N(g.dsf,fe);switch(typeof Y){case"string":return z(Y,$,L,q);case"number":return isFinite(Y)?N(g.num,String(Y)):N(g.lit,"null");case"boolean":return N(g.lit,String(Y));case"object":if(!Y)return N(g.lit,"null");var me;a&&(me=n.getComment(Y));var _e=Object.prototype.toString.apply(Y)==="[object Array]",ge=$;$+=o;var Be=s+ge,Me=s+$,ct=B||u?"":Be,Oe=[],Re,Ye=f?[]:null,Ut=c,Ft=d,Je=h?"":g.com[0],Ge=0,gt,at,lt,Et,ve,Se,Fe,Ue,mt;if(_e){for(gt=0,at=Y.length;gt<at;gt++){if(Re=gt<at-1,me?(Se=me.a[gt]||[],Fe=ue(Se[1]),Oe.push(he(Se[0],`
`)+Me),Ye&&(Se[0]||Se[1]||Fe)&&(Ye=null)):Oe.push(Me),P=0,Et=Y[gt],Oe.push(G(Et,me?Fe:!1,!0)+(Re?h:"")),Ye){switch(typeof Et){case"string":P=0,c=!0,d=0,Ye.push(G(Et,!1,!0)+(Re?g.com[0]:"")),c=Ut,d=Ft;break;case"object":if(Et){Ye=null;break}default:Ye.push(Oe[Oe.length-1]+(Re?Je:""));break}Re&&(P+=g.com[0].length-g.com[2]),Ge+=P}me&&Se[1]&&Oe.push(he(Se[1],Fe?" ":`
`,Fe))}at===0?me&&me.e&&Oe.push(he(me.e[0],`
`)+Be):Oe.push(Be),Oe.length===0?Ue=N(g.arr,""):(Ue=ct+N(g.arr,Oe.join("")),Ye&&(mt=Ye.join(" "),mt.length-Ge<=f&&(Ue=N(g.arr,mt))))}else{var cn=me?me.o.slice():[],Ve=[];for(lt in Y)Object.prototype.hasOwnProperty.call(Y,lt)&&cn.indexOf(lt)<0&&Ve.push(lt);m&&Ve.sort();var wt=cn.concat(Ve);for(gt=0,at=wt.length;gt<at;gt++)if(Re=gt<at-1,lt=wt[gt],me?(Se=me.c[lt]||[],Fe=ue(Se[1]),Oe.push(he(Se[0],`
`)+Me),Ye&&(Se[0]||Se[1]||Fe)&&(Ye=null)):Oe.push(Me),P=0,Et=Y[lt],ve=G(Et,me&&Fe),Oe.push(V(lt)+g.col[0]+(Z(ve)?"":" ")+ve+(Re?h:"")),me&&Se[1]&&Oe.push(he(Se[1],Fe?" ":`
`,Fe)),Ye){switch(typeof Et){case"string":P=0,c=!0,d=0,ve=G(Et,!1),c=Ut,d=Ft,Ye.push(V(lt)+g.col[0]+" "+ve+(Re?g.com[0]:""));break;case"object":if(Et){Ye=null;break}default:Ye.push(Oe[Oe.length-1]+(Re?Je:""));break}P+=g.col[0].length-g.col[2],Re&&(P+=g.com[0].length-g.com[2]),Ge+=P}at===0?me&&me.e&&Oe.push(he(me.e[0],`
`)+Be):Oe.push(Be),Oe.length===0?Ue=N(g.obj,""):(Ue=ct+N(g.obj,Oe.join("")),Ye&&(mt=Ye.join(" "),mt.length-Ge<=f&&(Ue=N(g.obj,mt))))}return $=ge,Ue}}w=r.loadDsf(p,"stringify");var M="",H=a?H=(n.getComment(e)||{}).r:null;return H&&H[0]&&(M=H[0]+`
`),M+=G(e,null,!0,!0),H&&(M+=H[1]||""),M},Pw=G5;function K2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function HH(e,t){if(!(e===null||typeof e!="object")){var n=Pw.getComment(e);n&&Pw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Hge(o.a,r,n.a[r],HH(e[r]))&&(s=!0);!s&&n.e&&(o.e=K2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Hge(o.s,l,n.c[l],HH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=K2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=K2(n.r[0],n.r[1])),s?o:void 0}}function SBt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function TBt(e,t){var n=[];if(qH(e,t,n,[]),n.length>0){var r=JM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+SBt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),JM(t,r,1)}}function Hge(e,t,n,r){var i=K2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function X2(e,t){var n=K2(t.b,t.a);return n.path=e,n}function Q2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(X2(s,o)),Q2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(X2(u,l)),Q2(l.x,t,u))});e.e&&t.push(X2(n,e.e))}}function qH(e,t,n,r){if(e){if(t===null||typeof t!="object"){Q2(e,n,r);return}var i,s=Pw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],qH(u.x,t[i],n,l)):(n.push(X2(l,u)),Q2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],qH(d.x,t[c],n,f))):d&&(n.push(X2(f,d)),Q2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function JM(e,t,n){var r=Pw.createComment(e,Pw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Pw.forceComment(t)),r.r[n]||""}var CBt={extract:function(e){return HH(e,!0)},merge:TBt,header:function(e,t){return JM(e,t,0)},footer:function(e,t){return JM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var qge=G5,ABt=vBt,Wge=EBt,Gge=xBt,IBt=CBt,OBt=SJ,TJ={parse:Wge,stringify:Gge,endOfLine:function(){return qge.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(qge.EOL=e)},version:ABt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Wge(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Gge(e,t)}},comments:IBt,dsf:OBt.std},WH={exports:{}},l4e={},If={},kE={},nO={},zn={},xA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(xA);var GH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=xA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(GH);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=xA,n=GH;var r=xA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=GH;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(B,q){return this}}class o extends s{constructor(B,q,Z){super(),this.varKind=B,this.name=q,this.rhs=Z}render({es5:B,_n:q}){const Z=B?n.varKinds.var:this.varKind,ue=this.rhs===void 0?"":` = ${this.rhs}`;return`${Z} ${this.name}${ue};`+q}optimizeNames(B,q){if(B[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,B,q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(B,q,Z){super(),this.lhs=B,this.rhs=q,this.sideEffects=Z}render({_n:B}){return`${this.lhs} = ${this.rhs};`+B}optimizeNames(B,q){if(!(this.lhs instanceof t.Name&&!B[this.lhs.str]&&!this.sideEffects))return this.rhs=N(this.rhs,B,q),this}get names(){const B=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(B,this.rhs)}}class u extends a{constructor(B,q,Z,ue){super(B,Z,ue),this.op=q}render({_n:B}){return`${this.lhs} ${this.op}= ${this.rhs};`+B}}class l extends s{constructor(B){super(),this.label=B,this.names={}}render({_n:B}){return`${this.label}:`+B}}class c extends s{constructor(B){super(),this.label=B,this.names={}}render({_n:B}){return`break${this.label?` ${this.label}`:""};`+B}}class f extends s{constructor(B){super(),this.error=B}render({_n:B}){return`throw ${this.error};`+B}get names(){return this.error.names}}class d extends s{constructor(B){super(),this.code=B}render({_n:B}){return`${this.code};`+B}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(B,q){return this.code=N(this.code,B,q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(B=[]){super(),this.nodes=B}render(B){return this.nodes.reduce((q,Z)=>q+Z.render(B),"")}optimizeNodes(){const{nodes:B}=this;let q=B.length;for(;q--;){const Z=B[q].optimizeNodes();Array.isArray(Z)?B.splice(q,1,...Z):Z?B[q]=Z:B.splice(q,1)}return B.length>0?this:void 0}optimizeNames(B,q){const{nodes:Z}=this;let ue=Z.length;for(;ue--;){const he=Z[ue];he.optimizeNames(B,q)||(F(B,he.names),Z.splice(ue,1))}return Z.length>0?this:void 0}get names(){return this.nodes.reduce((B,q)=>$(B,q.names),{})}}class p extends h{render(B){return"{"+B._n+super.render(B)+"}"+B._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(B,q){super(q),this.condition=B}render(B){let q=`if(${this.condition})`+super.render(B);return this.else&&(q+="else "+this.else.render(B)),q}optimizeNodes(){super.optimizeNodes();const B=this.condition;if(B===!0)return this.nodes;let q=this.else;if(q){const Z=q.optimizeNodes();q=this.else=Array.isArray(Z)?new g(Z):Z}if(q)return B===!1?q instanceof y?q:q.nodes:this.nodes.length?this:new y(z(B),q instanceof y?[q]:q.nodes);if(!(B===!1||!this.nodes.length))return this}optimizeNames(B,q){var Z;if(this.else=(Z=this.else)===null||Z===void 0?void 0:Z.optimizeNames(B,q),!!(super.optimizeNames(B,q)||this.else))return this.condition=N(this.condition,B,q),this}get names(){const B=super.names;return P(B,this.condition),this.else&&$(B,this.else.names),B}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(B){super(),this.iteration=B}render(B){return`for(${this.iteration})`+super.render(B)}optimizeNames(B,q){if(super.optimizeNames(B,q))return this.iteration=N(this.iteration,B,q),this}get names(){return $(super.names,this.iteration.names)}}class w extends v{constructor(B,q,Z,ue){super(),this.varKind=B,this.name=q,this.from=Z,this.to=ue}render(B){const q=B.es5?n.varKinds.var:this.varKind,{name:Z,from:ue,to:he}=this;return`for(${q} ${Z}=${ue}; ${Z}<${he}; ${Z}++)`+super.render(B)}get names(){const B=P(super.names,this.from);return P(B,this.to)}}class E extends v{constructor(B,q,Z,ue){super(),this.loop=B,this.varKind=q,this.name=Z,this.iterable=ue}render(B){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(B)}optimizeNames(B,q){if(super.optimizeNames(B,q))return this.iterable=N(this.iterable,B,q),this}get names(){return $(super.names,this.iterable.names)}}class S extends p{constructor(B,q,Z){super(),this.name=B,this.args=q,this.async=Z}render(B){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(B)}}S.kind="func";class b extends h{render(B){return"return "+super.render(B)}}b.kind="return";class T extends p{render(B){let q="try"+super.render(B);return this.catch&&(q+=this.catch.render(B)),this.finally&&(q+=this.finally.render(B)),q}optimizeNodes(){var B,q;return super.optimizeNodes(),(B=this.catch)===null||B===void 0||B.optimizeNodes(),(q=this.finally)===null||q===void 0||q.optimizeNodes(),this}optimizeNames(B,q){var Z,ue;return super.optimizeNames(B,q),(Z=this.catch)===null||Z===void 0||Z.optimizeNames(B,q),(ue=this.finally)===null||ue===void 0||ue.optimizeNames(B,q),this}get names(){const B=super.names;return this.catch&&$(B,this.catch.names),this.finally&&$(B,this.finally.names),B}}class A extends p{constructor(B){super(),this.error=B}render(B){return`catch(${this.error})`+super.render(B)}}A.kind="catch";class I extends p{render(B){return"finally"+super.render(B)}}I.kind="finally";class k{constructor(B,q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...q,_n:q.lines?`
`:""},this._extScope=B,this._scope=new n.Scope({parent:B}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(B){return this._scope.name(B)}scopeName(B){return this._extScope.name(B)}scopeValue(B,q){const Z=this._extScope.value(B,q);return(this._values[Z.prefix]||(this._values[Z.prefix]=new Set)).add(Z),Z}getScopeValue(B,q){return this._extScope.getValue(B,q)}scopeRefs(B){return this._extScope.scopeRefs(B,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(B,q,Z,ue){const he=this._scope.toName(q);return Z!==void 0&&ue&&(this._constants[he.str]=Z),this._leafNode(new o(B,he,Z)),he}const(B,q,Z){return this._def(n.varKinds.const,B,q,Z)}let(B,q,Z){return this._def(n.varKinds.let,B,q,Z)}var(B,q,Z){return this._def(n.varKinds.var,B,q,Z)}assign(B,q,Z){return this._leafNode(new a(B,q,Z))}add(B,q){return this._leafNode(new u(B,e.operators.ADD,q))}code(B){return typeof B=="function"?B():B!==t.nil&&this._leafNode(new d(B)),this}object(...B){const q=["{"];for(const[Z,ue]of B)q.length>1&&q.push(","),q.push(Z),(Z!==ue||this.opts.es5)&&(q.push(":"),(0,t.addCodeArg)(q,ue));return q.push("}"),new t._Code(q)}if(B,q,Z){if(this._blockNode(new y(B)),q&&Z)this.code(q).else().code(Z).endIf();else if(q)this.code(q).endIf();else if(Z)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(B){return this._elseNode(new y(B))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(B,q){return this._blockNode(B),q&&this.code(q).endFor(),this}for(B,q){return this._for(new _(B),q)}forRange(B,q,Z,ue,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const fe=this._scope.toName(B);return this._for(new w(he,fe,q,Z),()=>ue(fe))}forOf(B,q,Z,ue=n.varKinds.const){const he=this._scope.toName(B);if(this.opts.es5){const fe=q instanceof t.Name?q:this.var("_arr",q);return this.forRange("_i",0,(0,t._)`${fe}.length`,me=>{this.var(he,(0,t._)`${fe}[${me}]`),Z(he)})}return this._for(new E("of",ue,he,q),()=>Z(he))}forIn(B,q,Z,ue=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(B,(0,t._)`Object.keys(${q})`,Z);const he=this._scope.toName(B);return this._for(new E("in",ue,he,q),()=>Z(he))}endFor(){return this._endBlockNode(v)}label(B){return this._leafNode(new l(B))}break(B){return this._leafNode(new c(B))}return(B){const q=new b;if(this._blockNode(q),this.code(B),q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(b)}try(B,q,Z){if(!q&&!Z)throw new Error('CodeGen: "try" without "catch" and "finally"');const ue=new T;if(this._blockNode(ue),this.code(B),q){const he=this.name("e");this._currNode=ue.catch=new A(he),q(he)}return Z&&(this._currNode=ue.finally=new I,this.code(Z)),this._endBlockNode(A,I)}throw(B){return this._leafNode(new f(B))}block(B,q){return this._blockStarts.push(this._nodes.length),B&&this.code(B).endBlock(q),this}endBlock(B){const q=this._blockStarts.pop();if(q===void 0)throw new Error("CodeGen: not in self-balancing block");const Z=this._nodes.length-q;if(Z<0||B!==void 0&&Z!==B)throw new Error(`CodeGen: wrong number of nodes: ${Z} vs ${B} expected`);return this._nodes.length=q,this}func(B,q=t.nil,Z,ue){return this._blockNode(new S(B,q,Z)),ue&&this.code(ue).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(B=1){for(;B-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(B){return this._currNode.nodes.push(B),this}_blockNode(B){this._currNode.nodes.push(B),this._nodes.push(B)}_endBlockNode(B,q){const Z=this._currNode;if(Z instanceof B||q&&Z instanceof q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${q?`${B.kind}/${q.kind}`:B.kind}"`)}_elseNode(B){const q=this._currNode;if(!(q instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=q.else=B,this}get _root(){return this._nodes[0]}get _currNode(){const B=this._nodes;return B[B.length-1]}set _currNode(B){const q=this._nodes;q[q.length-1]=B}}e.CodeGen=k;function $(L,B){for(const q in B)L[q]=(L[q]||0)+(B[q]||0);return L}function P(L,B){return B instanceof t._CodeOrName?$(L,B.names):L}function N(L,B,q){if(L instanceof t.Name)return Z(L);if(!ue(L))return L;return new t._Code(L._items.reduce((he,fe)=>(fe instanceof t.Name&&(fe=Z(fe)),fe instanceof t._Code?he.push(...fe._items):he.push(fe),he),[]));function Z(he){const fe=q[he.str];return fe===void 0||B[he.str]!==1?he:(delete B[he.str],fe)}function ue(he){return he instanceof t._Code&&he._items.some(fe=>fe instanceof t.Name&&B[fe.str]===1&&q[fe.str]!==void 0)}}function F(L,B){for(const q in B)L[q]=(L[q]||0)-(B[q]||0)}function z(L){return typeof L=="boolean"||typeof L=="number"||L===null?!L:(0,t._)`!${Y(L)}`}e.not=z;const W=H(e.operators.AND);function V(...L){return L.reduce(W)}e.and=V;const G=H(e.operators.OR);function M(...L){return L.reduce(G)}e.or=M;function H(L){return(B,q)=>B===t.nil?q:q===t.nil?B:(0,t._)`${Y(B)} ${L} ${Y(q)}`}function Y(L){return L instanceof t.Name?L:(0,t._)`(${L})`}})(zn);var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.checkStrictMode=Tt.getErrorPath=Tt.Type=Tt.useFunc=Tt.setEvaluated=Tt.evaluatedPropsToName=Tt.mergeEvaluated=Tt.eachItem=Tt.unescapeJsonPointer=Tt.escapeJsonPointer=Tt.escapeFragment=Tt.unescapeFragment=Tt.schemaRefOrVal=Tt.schemaHasRulesButRef=Tt.schemaHasRules=Tt.checkUnknownRules=Tt.alwaysValidSchema=Tt.toHash=void 0;const ii=zn,PBt=xA;function kBt(e){const t={};for(const n of e)t[n]=!0;return t}Tt.toHash=kBt;function RBt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(c4e(e,t),!f4e(t,e.self.RULES.all))}Tt.alwaysValidSchema=RBt;function c4e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||p4e(e,`unknown keyword: "${s}"`)}Tt.checkUnknownRules=c4e;function f4e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Tt.schemaHasRules=f4e;function $Bt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Tt.schemaHasRulesButRef=$Bt;function NBt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,ii._)`${n}`}return(0,ii._)`${e}${t}${(0,ii.getProperty)(r)}`}Tt.schemaRefOrVal=NBt;function DBt(e){return d4e(decodeURIComponent(e))}Tt.unescapeFragment=DBt;function MBt(e){return encodeURIComponent(CJ(e))}Tt.escapeFragment=MBt;function CJ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Tt.escapeJsonPointer=CJ;function d4e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Tt.unescapeJsonPointer=d4e;function LBt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Tt.eachItem=LBt;function Yge({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof ii.Name?(s instanceof ii.Name?e(i,s,o):t(i,s,o),o):s instanceof ii.Name?(t(i,o,s),s):n(s,o);return a===ii.Name&&!(u instanceof ii.Name)?r(i,u):u}}Tt.mergeEvaluated={props:Yge({mergeNames:(e,t,n)=>e.if((0,ii._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,ii._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,ii._)`${n} || {}`).code((0,ii._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,ii._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,ii._)`${n} || {}`),AJ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:h4e}),items:Yge({mergeNames:(e,t,n)=>e.if((0,ii._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,ii._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,ii._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,ii._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function h4e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,ii._)`{}`);return t!==void 0&&AJ(e,n,t),n}Tt.evaluatedPropsToName=h4e;function AJ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,ii._)`${t}${(0,ii.getProperty)(r)}`,!0))}Tt.setEvaluated=AJ;const Kge={};function FBt(e,t){return e.scopeValue("func",{ref:t,code:Kge[t.code]||(Kge[t.code]=new PBt._Code(t.code))})}Tt.useFunc=FBt;var YH;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(YH||(Tt.Type=YH={}));function jBt(e,t,n){if(e instanceof ii.Name){const r=t===YH.Num;return n?r?(0,ii._)`"[" + ${e} + "]"`:(0,ii._)`"['" + ${e} + "']"`:r?(0,ii._)`"/" + ${e}`:(0,ii._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,ii.getProperty)(e).toString():"/"+CJ(e)}Tt.getErrorPath=jBt;function p4e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Tt.checkStrictMode=p4e;var qh={};Object.defineProperty(qh,"__esModule",{value:!0});const ea=zn,BBt={data:new ea.Name("data"),valCxt:new ea.Name("valCxt"),instancePath:new ea.Name("instancePath"),parentData:new ea.Name("parentData"),parentDataProperty:new ea.Name("parentDataProperty"),rootData:new ea.Name("rootData"),dynamicAnchors:new ea.Name("dynamicAnchors"),vErrors:new ea.Name("vErrors"),errors:new ea.Name("errors"),this:new ea.Name("this"),self:new ea.Name("self"),scope:new ea.Name("scope"),json:new ea.Name("json"),jsonPos:new ea.Name("jsonPos"),jsonLen:new ea.Name("jsonLen"),jsonPart:new ea.Name("jsonPart")};qh.default=BBt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=zn,n=Tt,r=qh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:E,compositeRule:S,allErrors:b}=w,T=f(g,y,v);_??(S||b)?u(E,T):l(w,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:E,allErrors:S}=_,b=f(g,y,v);u(w,b),E||S||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,b=>{g.const(S,(0,t._)`${r.default.vErrors}[${b}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:E,schemaValue:S,it:b}=g,{opts:T,propertyName:A,topSchemaRef:I,schemaPath:k}=b;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&_.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&_.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${k}`],[r.default.data,E]),A&&_.push([c.propertyName,A])}})(nO);Object.defineProperty(kE,"__esModule",{value:!0});kE.boolOrEmptySchema=kE.topBoolOrEmptySchema=void 0;const zBt=nO,UBt=zn,VBt=qh,HBt={message:"boolean schema is false"};function qBt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?m4e(e,!1):typeof n=="object"&&n.$async===!0?t.return(VBt.default.data):(t.assign((0,UBt._)`${r}.errors`,null),t.return(!0))}kE.topBoolOrEmptySchema=qBt;function WBt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),m4e(e)):n.var(t,!0)}kE.boolOrEmptySchema=WBt;function m4e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,zBt.reportError)(i,HBt,void 0,t)}var $s={},M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.getRules=M1.isJSONType=void 0;const GBt=["string","number","integer","boolean","null","object","array"],YBt=new Set(GBt);function KBt(e){return typeof e=="string"&&YBt.has(e)}M1.isJSONType=KBt;function XBt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}M1.getRules=XBt;var Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.shouldUseRule=Zp.shouldUseGroup=Zp.schemaHasRulesForType=void 0;function QBt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&g4e(e,r)}Zp.schemaHasRulesForType=QBt;function g4e(e,t){return t.rules.some(n=>y4e(e,n))}Zp.shouldUseGroup=g4e;function y4e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Zp.shouldUseRule=y4e;Object.defineProperty($s,"__esModule",{value:!0});$s.reportTypeError=$s.checkDataTypes=$s.checkDataType=$s.coerceAndCheckDataType=$s.getJSONTypes=$s.getSchemaTypes=$s.DataType=void 0;const JBt=M1,ZBt=Zp,e7t=nO,On=zn,v4e=Tt;var kw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(kw||($s.DataType=kw={}));function t7t(e){const t=_4e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}$s.getSchemaTypes=t7t;function _4e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(JBt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}$s.getJSONTypes=_4e;function n7t(e,t){const{gen:n,data:r,opts:i}=e,s=r7t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,ZBt.schemaHasRulesForType)(e,t[0]));if(o){const a=IJ(t,r,i.strictNumbers,kw.Wrong);n.if(a,()=>{s.length?i7t(e,t,s):OJ(e)})}return o}$s.coerceAndCheckDataType=n7t;const b4e=new Set(["string","number","integer","boolean","null"]);function r7t(e,t){return t?e.filter(n=>b4e.has(n)||t==="array"&&n==="array"):[]}function i7t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,On._)`typeof ${i}`),a=r.let("coerced",(0,On._)`undefined`);s.coerceTypes==="array"&&r.if((0,On._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,On._)`${i}[0]`).assign(o,(0,On._)`typeof ${i}`).if(IJ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,On._)`${a} !== undefined`);for(const l of n)(b4e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),OJ(e),r.endIf(),r.if((0,On._)`${a} !== undefined`,()=>{r.assign(i,a),s7t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,On._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,On._)`"" + ${i}`).elseIf((0,On._)`${i} === null`).assign(a,(0,On._)`""`);return;case"number":r.elseIf((0,On._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,On._)`+${i}`);return;case"integer":r.elseIf((0,On._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,On._)`+${i}`);return;case"boolean":r.elseIf((0,On._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,On._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,On._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,On._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,On._)`[${i}]`)}}}function s7t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,On._)`${t} !== undefined`,()=>e.assign((0,On._)`${t}[${n}]`,r))}function KH(e,t,n,r=kw.Correct){const i=r===kw.Correct?On.operators.EQ:On.operators.NEQ;let s;switch(e){case"null":return(0,On._)`${t} ${i} null`;case"array":s=(0,On._)`Array.isArray(${t})`;break;case"object":s=(0,On._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,On._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,On._)`typeof ${t} ${i} ${e}`}return r===kw.Correct?s:(0,On.not)(s);function o(a=On.nil){return(0,On.and)((0,On._)`typeof ${t} == "number"`,a,n?(0,On._)`isFinite(${t})`:On.nil)}}$s.checkDataType=KH;function IJ(e,t,n,r){if(e.length===1)return KH(e[0],t,n,r);let i;const s=(0,v4e.toHash)(e);if(s.array&&s.object){const o=(0,On._)`typeof ${t} != "object"`;i=s.null?o:(0,On._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=On.nil;s.number&&delete s.integer;for(const o in s)i=(0,On.and)(i,KH(o,t,n,r));return i}$s.checkDataTypes=IJ;const o7t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,On._)`{type: ${e}}`:(0,On._)`{type: ${t}}`};function OJ(e){const t=a7t(e);(0,e7t.reportError)(t,o7t)}$s.reportTypeError=OJ;function a7t(e){const{gen:t,data:n,schema:r}=e,i=(0,v4e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var Y5={};Object.defineProperty(Y5,"__esModule",{value:!0});Y5.assignDefaults=void 0;const ob=zn,u7t=Tt;function l7t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Xge(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Xge(e,s,i.default))}Y5.assignDefaults=l7t;function Xge(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,ob._)`${s}${(0,ob.getProperty)(t)}`;if(i){(0,u7t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,ob._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,ob._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,ob._)`${a} = ${(0,ob.stringify)(n)}`)}var Yd={},jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.validateUnion=jn.validateArray=jn.usePattern=jn.callValidateCode=jn.schemaProperties=jn.allSchemaProperties=jn.noPropertyInData=jn.propertyInData=jn.isOwnProperty=jn.hasPropFunc=jn.reportMissingProp=jn.checkMissingProp=jn.checkReportMissingProp=void 0;const _i=zn,PJ=Tt,lg=qh,c7t=Tt;function f7t(e,t){const{gen:n,data:r,it:i}=e;n.if(RJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,_i._)`${t}`},!0),e.error()})}jn.checkReportMissingProp=f7t;function d7t({gen:e,data:t,it:{opts:n}},r,i){return(0,_i.or)(...r.map(s=>(0,_i.and)(RJ(e,t,s,n.ownProperties),(0,_i._)`${i} = ${s}`)))}jn.checkMissingProp=d7t;function h7t(e,t){e.setParams({missingProperty:t},!0),e.error()}jn.reportMissingProp=h7t;function w4e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,_i._)`Object.prototype.hasOwnProperty`})}jn.hasPropFunc=w4e;function kJ(e,t,n){return(0,_i._)`${w4e(e)}.call(${t}, ${n})`}jn.isOwnProperty=kJ;function p7t(e,t,n,r){const i=(0,_i._)`${t}${(0,_i.getProperty)(n)} !== undefined`;return r?(0,_i._)`${i} && ${kJ(e,t,n)}`:i}jn.propertyInData=p7t;function RJ(e,t,n,r){const i=(0,_i._)`${t}${(0,_i.getProperty)(n)} === undefined`;return r?(0,_i.or)(i,(0,_i.not)(kJ(e,t,n))):i}jn.noPropertyInData=RJ;function E4e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}jn.allSchemaProperties=E4e;function m7t(e,t){return E4e(t).filter(n=>!(0,PJ.alwaysValidSchema)(e,t[n]))}jn.schemaProperties=m7t;function g7t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,_i._)`${e}, ${t}, ${r}${i}`:t,f=[[lg.default.instancePath,(0,_i.strConcat)(lg.default.instancePath,s)],[lg.default.parentData,o.parentData],[lg.default.parentDataProperty,o.parentDataProperty],[lg.default.rootData,lg.default.rootData]];o.opts.dynamicRef&&f.push([lg.default.dynamicAnchors,lg.default.dynamicAnchors]);const d=(0,_i._)`${c}, ${n.object(...f)}`;return u!==_i.nil?(0,_i._)`${a}.call(${u}, ${d})`:(0,_i._)`${a}(${d})`}jn.callValidateCode=g7t;const y7t=(0,_i._)`new RegExp`;function v7t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,_i._)`${i.code==="new RegExp"?y7t:(0,c7t.useFunc)(e,i)}(${n}, ${r})`})}jn.usePattern=v7t;function _7t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,_i._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:PJ.Type.Num},s),t.if((0,_i.not)(s),a)})}}jn.validateArray=_7t;function b7t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,PJ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,_i._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,_i.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}jn.validateUnion=b7t;Object.defineProperty(Yd,"__esModule",{value:!0});Yd.validateKeywordUsage=Yd.validSchemaType=Yd.funcKeywordCode=Yd.macroKeywordCode=void 0;const Da=zn,Av=qh,w7t=jn,E7t=nO;function x7t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=x4e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Da.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Yd.macroKeywordCode=x7t;function S7t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;C7t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=x4e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Qge(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Qge(e),g(()=>T7t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Da._)`await `),v=>r.assign(f,!1).if((0,Da._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Da._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Da._)`${c}.errors`;return r.assign(y,null),m(Da.nil),y}function m(y=t.async?(0,Da._)`await `:Da.nil){const v=u.opts.passContext?Av.default.this:Av.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Da._)`${y}${(0,w7t.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Da.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Yd.funcKeywordCode=S7t;function Qge(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Da._)`${r.parentData}[${r.parentDataProperty}]`))}function T7t(e,t){const{gen:n}=e;n.if((0,Da._)`Array.isArray(${t})`,()=>{n.assign(Av.default.vErrors,(0,Da._)`${Av.default.vErrors} === null ? ${t} : ${Av.default.vErrors}.concat(${t})`).assign(Av.default.errors,(0,Da._)`${Av.default.vErrors}.length`),(0,E7t.extendErrors)(e)},()=>e.error())}function C7t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function x4e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Da.stringify)(n)})}function A7t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Yd.validSchemaType=A7t;function I7t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Yd.validateKeywordUsage=I7t;var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.extendSubschemaMode=v0.extendSubschemaData=v0.getSubschema=void 0;const Vd=zn,S4e=Tt;function O7t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Vd._)`${e.schemaPath}${(0,Vd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Vd._)`${e.schemaPath}${(0,Vd.getProperty)(t)}${(0,Vd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,S4e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}v0.getSubschema=O7t;function P7t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Vd._)`${t.data}${(0,Vd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Vd.str)`${l}${(0,S4e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Vd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Vd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}v0.extendSubschemaData=P7t;function k7t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}v0.extendSubschemaMode=k7t;var Io={},$J=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const XH=Ju($J);var T4e={exports:{}},Yg=T4e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};u$(t,r,i,e,"",e)};Yg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Yg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Yg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Yg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function u$(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Yg.arrayKeywords)for(var d=0;d<f.length;d++)u$(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Yg.propsKeywords){if(f&&typeof f=="object")for(var h in f)u$(e,t,n,f[h],i+"/"+c+"/"+R7t(h),s,i,c,r,h)}else(c in Yg.keywords||e.allKeys&&!(c in Yg.skipKeywords))&&u$(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function R7t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var $7t=T4e.exports;Object.defineProperty(Io,"__esModule",{value:!0});Io.getSchemaRefs=Io.resolveUrl=Io.normalizeId=Io._getFullPath=Io.getFullPath=Io.inlineRef=void 0;const N7t=Tt,D7t=$J,M7t=$7t,L7t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function F7t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!QH(e):t?C4e(e)<=t:!1}Io.inlineRef=F7t;const j7t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function QH(e){for(const t in e){if(j7t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(QH)||typeof n=="object"&&QH(n))return!0}return!1}function C4e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!L7t.has(n)&&(typeof e[n]=="object"&&(0,N7t.eachItem)(e[n],r=>t+=C4e(r)),t===1/0))return 1/0}return t}function A4e(e,t="",n){n!==!1&&(t=Rw(t));const r=e.parse(t);return I4e(e,r)}Io.getFullPath=A4e;function I4e(e,t){return e.serialize(t).split("#")[0]+"#"}Io._getFullPath=I4e;const B7t=/#\/?$/;function Rw(e){return e?e.replace(B7t,""):""}Io.normalizeId=Rw;function z7t(e,t,n){return n=Rw(n),e.resolve(t,n)}Io.resolveUrl=z7t;const U7t=/^[a-z_][-a-z0-9._]*$/i;function V7t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Rw(e[n]||t),s={"":i},o=A4e(r,i,!1),a={},u=new Set;return M7t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=Rw(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,_):_!==Rw(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!U7t.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!D7t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Io.getSchemaRefs=V7t;Object.defineProperty(If,"__esModule",{value:!0});If.getData=If.KeywordCxt=If.validateFunctionCode=void 0;const O4e=kE,Jge=$s,NJ=Zp,ZM=$s,H7t=Y5,J2=Yd,YB=v0,Bt=zn,pn=qh,q7t=Io,em=Tt,nT=nO;function W7t(e){if(R4e(e)&&($4e(e),k4e(e))){K7t(e);return}P4e(e,()=>(0,O4e.topBoolOrEmptySchema)(e))}If.validateFunctionCode=W7t;function P4e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Bt._)`${pn.default.data}, ${pn.default.valCxt}`,r.$async,()=>{e.code((0,Bt._)`"use strict"; ${Zge(n,i)}`),Y7t(e,i),e.code(s)}):e.func(t,(0,Bt._)`${pn.default.data}, ${G7t(i)}`,r.$async,()=>e.code(Zge(n,i)).code(s))}function G7t(e){return(0,Bt._)`{${pn.default.instancePath}="", ${pn.default.parentData}, ${pn.default.parentDataProperty}, ${pn.default.rootData}=${pn.default.data}${e.dynamicRef?(0,Bt._)`, ${pn.default.dynamicAnchors}={}`:Bt.nil}}={}`}function Y7t(e,t){e.if(pn.default.valCxt,()=>{e.var(pn.default.instancePath,(0,Bt._)`${pn.default.valCxt}.${pn.default.instancePath}`),e.var(pn.default.parentData,(0,Bt._)`${pn.default.valCxt}.${pn.default.parentData}`),e.var(pn.default.parentDataProperty,(0,Bt._)`${pn.default.valCxt}.${pn.default.parentDataProperty}`),e.var(pn.default.rootData,(0,Bt._)`${pn.default.valCxt}.${pn.default.rootData}`),t.dynamicRef&&e.var(pn.default.dynamicAnchors,(0,Bt._)`${pn.default.valCxt}.${pn.default.dynamicAnchors}`)},()=>{e.var(pn.default.instancePath,(0,Bt._)`""`),e.var(pn.default.parentData,(0,Bt._)`undefined`),e.var(pn.default.parentDataProperty,(0,Bt._)`undefined`),e.var(pn.default.rootData,pn.default.data),t.dynamicRef&&e.var(pn.default.dynamicAnchors,(0,Bt._)`{}`)})}function K7t(e){const{schema:t,opts:n,gen:r}=e;P4e(e,()=>{n.$comment&&t.$comment&&D4e(e),ezt(e),r.let(pn.default.vErrors,null),r.let(pn.default.errors,0),n.unevaluated&&X7t(e),N4e(e),rzt(e)})}function X7t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Bt._)`${n}.evaluated`),t.if((0,Bt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Bt._)`${e.evaluated}.props`,(0,Bt._)`undefined`)),t.if((0,Bt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Bt._)`${e.evaluated}.items`,(0,Bt._)`undefined`))}function Zge(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Bt._)`/*# sourceURL=${n} */`:Bt.nil}function Q7t(e,t){if(R4e(e)&&($4e(e),k4e(e))){J7t(e,t);return}(0,O4e.boolOrEmptySchema)(e,t)}function k4e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function R4e(e){return typeof e.schema!="boolean"}function J7t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&D4e(e),tzt(e),nzt(e);const s=r.const("_errs",pn.default.errors);N4e(e,s),r.var(t,(0,Bt._)`${s} === ${pn.default.errors}`)}function $4e(e){(0,em.checkUnknownRules)(e),Z7t(e)}function N4e(e,t){if(e.opts.jtd)return e0e(e,[],!1,t);const n=(0,Jge.getSchemaTypes)(e.schema),r=(0,Jge.coerceAndCheckDataType)(e,n);e0e(e,n,!r,t)}function Z7t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,em.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function ezt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,em.checkStrictMode)(e,"default is ignored in the schema root")}function tzt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,q7t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function nzt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function D4e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Bt._)`${pn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Bt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Bt._)`${pn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function rzt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Bt._)`${pn.default.errors} === 0`,()=>t.return(pn.default.data),()=>t.throw((0,Bt._)`new ${i}(${pn.default.vErrors})`)):(t.assign((0,Bt._)`${r}.errors`,pn.default.vErrors),s.unevaluated&&izt(e),t.return((0,Bt._)`${pn.default.errors} === 0`))}function izt({gen:e,evaluated:t,props:n,items:r}){n instanceof Bt.Name&&e.assign((0,Bt._)`${t}.props`,n),r instanceof Bt.Name&&e.assign((0,Bt._)`${t}.items`,r)}function e0e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,em.schemaHasRulesButRef)(s,c))){i.block(()=>F4e(e,"$ref",c.all.$ref.definition));return}u.jtd||szt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,NJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,ZM.checkDataType)(d.type,o,u.strictNumbers)),t0e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,ZM.reportTypeError)(e)),i.endIf()):t0e(e,d),a||i.if((0,Bt._)`${pn.default.errors} === ${r||0}`))}}function t0e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,H7t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,NJ.shouldUseRule)(r,s)&&F4e(e,s.keyword,s.definition,t.type)})}function szt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(ozt(e,t),e.opts.allowUnionTypes||azt(e,t),uzt(e,e.dataTypes))}function ozt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{M4e(e.dataTypes,n)||DJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),czt(e,t)}}function azt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&DJ(e,"use allowUnionTypes to allow union type keyword")}function uzt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,NJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>lzt(t,o))&&DJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function lzt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function M4e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function czt(e,t){const n=[];for(const r of e.dataTypes)M4e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function DJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,em.checkStrictMode)(e,t,e.opts.strictTypes)}class L4e{constructor(t,n,r){if((0,J2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,em.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",j4e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,J2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",pn.default.errors))}result(t,n,r){this.failResult((0,Bt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Bt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Bt._)`${n} !== undefined && (${(0,Bt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?nT.reportExtraError:nT.reportError)(this,this.def.error,n)}$dataError(){(0,nT.reportError)(this,this.def.$dataError||nT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,nT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Bt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Bt.nil,n=Bt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Bt.or)((0,Bt._)`${i} === undefined`,n)),t!==Bt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Bt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Bt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Bt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Bt._)`${(0,ZM.checkDataTypes)(u,n,s.opts.strictNumbers,ZM.DataType.Wrong)}`}return Bt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Bt._)`!${u}(${n})`}return Bt.nil}}subschema(t,n){const r=(0,YB.getSubschema)(this.it,t);(0,YB.extendSubschemaData)(r,this.it,t),(0,YB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Q7t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=em.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=em.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Bt.Name)),!0}}If.KeywordCxt=L4e;function F4e(e,t,n,r){const i=new L4e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,J2.funcKeywordCode)(i,n):"macro"in n?(0,J2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,J2.funcKeywordCode)(i,n)}const fzt=/^\/(?:[^~]|~0|~1)*$/,dzt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function j4e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return pn.default.rootData;if(e[0]==="/"){if(!fzt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=pn.default.rootData}else{const l=dzt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Bt._)`${s}${(0,Bt.getProperty)((0,em.unescapeJsonPointer)(l))}`,o=(0,Bt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}If.getData=j4e;var rO={};Object.defineProperty(rO,"__esModule",{value:!0});class hzt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}rO.default=hzt;var Hx={};Object.defineProperty(Hx,"__esModule",{value:!0});const KB=Io;class pzt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,KB.resolveUrl)(t,n,r),this.missingSchema=(0,KB.normalizeId)((0,KB.getFullPath)(t,this.missingRef))}}Hx.default=pzt;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.resolveSchema=Tu.getCompilingSchema=Tu.resolveRef=Tu.compileSchema=Tu.SchemaEnv=void 0;const Gc=zn,mzt=rO,Yy=qh,pf=Io,n0e=Tt,gzt=If;class K5{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,pf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Tu.SchemaEnv=K5;function MJ(e){const t=B4e.call(this,e);if(t)return t;const n=(0,pf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Gc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:mzt.default,code:(0,Gc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Yy.default.data,parentData:Yy.default.parentData,parentDataProperty:Yy.default.parentDataProperty,dataNames:[Yy.default.data],dataPathArr:[Gc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Gc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Gc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Gc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,gzt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Yy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Yy.default.self}`,`${Yy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Gc.Name?void 0:p,items:m instanceof Gc.Name?void 0:m,dynamicProps:p instanceof Gc.Name,dynamicItems:m instanceof Gc.Name},h.source&&(h.source.evaluated=(0,Gc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Tu.compileSchema=MJ;function yzt(e,t,n){var r;n=(0,pf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=bzt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new K5({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=vzt.call(this,s)}Tu.resolveRef=yzt;function vzt(e){return(0,pf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:MJ.call(this,e)}function B4e(e){for(const t of this._compilations)if(_zt(t,e))return t}Tu.getCompilingSchema=B4e;function _zt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function bzt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||X5.call(this,e,t)}function X5(e,t){const n=this.opts.uriResolver.parse(t),r=(0,pf._getFullPath)(this.opts.uriResolver,n);let i=(0,pf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return XB.call(this,n,e);const s=(0,pf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=X5.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:XB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||MJ.call(this,o),s===(0,pf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,pf.resolveUrl)(this.opts.uriResolver,i,l)),new K5({schema:a,schemaId:u,root:e,baseId:i})}return XB.call(this,n,o)}}Tu.resolveSchema=X5;const wzt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function XB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,n0e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!wzt.has(a)&&l&&(t=(0,pf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,n0e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,pf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=X5.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new K5({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Ezt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",xzt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Szt="object",Tzt=["$data"],Czt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Azt=!1,Izt={$id:Ezt,description:xzt,type:Szt,required:Tzt,properties:Czt,additionalProperties:Azt};var LJ={},JH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ua,function(n){function r(){for(var ae=arguments.length,ne=Array(ae),le=0;le<ae;le++)ne[le]=arguments[le];if(ne.length>1){ne[0]=ne[0].slice(0,-1);for(var Ee=ne.length-1,xe=1;xe<Ee;++xe)ne[xe]=ne[xe].slice(1,-1);return ne[Ee]=ne[Ee].slice(1),ne.join("")}else return ne[0]}function i(ae){return"(?:"+ae+")"}function s(ae){return ae===void 0?"undefined":ae===null?"null":Object.prototype.toString.call(ae).split(" ").pop().split("]").shift().toLowerCase()}function o(ae){return ae.toUpperCase()}function a(ae){return ae!=null?ae instanceof Array?ae:typeof ae.length!="number"||ae.split||ae.setInterval||ae.call?[ae]:Array.prototype.slice.call(ae):[]}function u(ae,ne){var le=ae;if(ne)for(var Ee in ne)le[Ee]=ne[Ee];return le}function l(ae){var ne="[A-Za-z]",le="[0-9]",Ee=r(le,"[A-Fa-f]"),xe=i(i("%[EFef]"+Ee+"%"+Ee+Ee+"%"+Ee+Ee)+"|"+i("%[89A-Fa-f]"+Ee+"%"+Ee+Ee)+"|"+i("%"+Ee+Ee)),St="[\\:\\/\\?\\#\\[\\]\\@]",It="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",je=r(St,It),Rt=ae?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",en=ae?"[\\uE000-\\uF8FF]":"[]",ht=r(ne,le,"[\\-\\.\\_\\~]",Rt);i(ne+r(ne,le,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(ht,It,"[\\:]"))+"*");var kn=i(i("25[0-5]")+"|"+i("2[0-4]"+le)+"|"+i("1"+le+le)+"|"+i("0?[1-9]"+le)+"|0?0?"+le),In=i(kn+"\\."+kn+"\\."+kn+"\\."+kn),Gt=i(Ee+"{1,4}"),Xn=i(i(Gt+"\\:"+Gt)+"|"+In),$r=i(i(Gt+"\\:")+"{6}"+Xn),Qt=i("\\:\\:"+i(Gt+"\\:")+"{5}"+Xn),ui=i(i(Gt)+"?\\:\\:"+i(Gt+"\\:")+"{4}"+Xn),Li=i(i(i(Gt+"\\:")+"{0,1}"+Gt)+"?\\:\\:"+i(Gt+"\\:")+"{3}"+Xn),qr=i(i(i(Gt+"\\:")+"{0,2}"+Gt)+"?\\:\\:"+i(Gt+"\\:")+"{2}"+Xn),Is=i(i(i(Gt+"\\:")+"{0,3}"+Gt)+"?\\:\\:"+Gt+"\\:"+Xn),Ti=i(i(i(Gt+"\\:")+"{0,4}"+Gt)+"?\\:\\:"+Xn),Ci=i(i(i(Gt+"\\:")+"{0,5}"+Gt)+"?\\:\\:"+Gt),Ys=i(i(i(Gt+"\\:")+"{0,6}"+Gt)+"?\\:\\:"),gs=i([$r,Qt,ui,Li,qr,Is,Ti,Ci,Ys].join("|")),xt=i(i(ht+"|"+xe)+"+");i("[vV]"+Ee+"+\\."+r(ht,It,"[\\:]")+"+"),i(i(xe+"|"+r(ht,It))+"*");var Rn=i(xe+"|"+r(ht,It,"[\\:\\@]"));return i(i(xe+"|"+r(ht,It,"[\\@]"))+"+"),i(i(Rn+"|"+r("[\\/\\?]",en))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ne,le,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",ht,It),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",ht,It),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",ht,It),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",ht,It),"g"),NOT_QUERY:new RegExp(r("[^\\%]",ht,It,"[\\:\\@\\/\\?]",en),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",ht,It,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",ht,It),"g"),UNRESERVED:new RegExp(ht,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",ht,je),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+In+")$"),IPV6ADDRESS:new RegExp("^\\[?("+gs+")"+i(i("\\%25|\\%(?!"+Ee+"{2})")+"("+xt+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ae(ne,le){var Ee=[],xe=!0,St=!1,It=void 0;try{for(var je=ne[Symbol.iterator](),Rt;!(xe=(Rt=je.next()).done)&&(Ee.push(Rt.value),!(le&&Ee.length===le));xe=!0);}catch(en){St=!0,It=en}finally{try{!xe&&je.return&&je.return()}finally{if(St)throw It}}return Ee}return function(ne,le){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return ae(ne,le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ae){if(Array.isArray(ae)){for(var ne=0,le=Array(ae.length);ne<ae.length;ne++)le[ne]=ae[ne];return le}else return Array.from(ae)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,E=128,S="-",b=/^xn--/,T=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,$=Math.floor,P=String.fromCharCode;function N(ae){throw new RangeError(I[ae])}function F(ae,ne){for(var le=[],Ee=ae.length;Ee--;)le[Ee]=ne(ae[Ee]);return le}function z(ae,ne){var le=ae.split("@"),Ee="";le.length>1&&(Ee=le[0]+"@",ae=le[1]),ae=ae.replace(A,".");var xe=ae.split("."),St=F(xe,ne).join(".");return Ee+St}function W(ae){for(var ne=[],le=0,Ee=ae.length;le<Ee;){var xe=ae.charCodeAt(le++);if(xe>=55296&&xe<=56319&&le<Ee){var St=ae.charCodeAt(le++);(St&64512)==56320?ne.push(((xe&1023)<<10)+(St&1023)+65536):(ne.push(xe),le--)}else ne.push(xe)}return ne}var V=function(ne){return String.fromCodePoint.apply(String,h(ne))},G=function(ne){return ne-48<10?ne-22:ne-65<26?ne-65:ne-97<26?ne-97:m},M=function(ne,le){return ne+22+75*(ne<26)-((le!=0)<<5)},H=function(ne,le,Ee){var xe=0;for(ne=Ee?$(ne/_):ne>>1,ne+=$(ne/le);ne>k*y>>1;xe+=m)ne=$(ne/k);return $(xe+(k+1)*ne/(ne+v))},Y=function(ne){var le=[],Ee=ne.length,xe=0,St=E,It=w,je=ne.lastIndexOf(S);je<0&&(je=0);for(var Rt=0;Rt<je;++Rt)ne.charCodeAt(Rt)>=128&&N("not-basic"),le.push(ne.charCodeAt(Rt));for(var en=je>0?je+1:0;en<Ee;){for(var ht=xe,kn=1,In=m;;In+=m){en>=Ee&&N("invalid-input");var Gt=G(ne.charCodeAt(en++));(Gt>=m||Gt>$((p-xe)/kn))&&N("overflow"),xe+=Gt*kn;var Xn=In<=It?g:In>=It+y?y:In-It;if(Gt<Xn)break;var $r=m-Xn;kn>$(p/$r)&&N("overflow"),kn*=$r}var Qt=le.length+1;It=H(xe-ht,Qt,ht==0),$(xe/Qt)>p-St&&N("overflow"),St+=$(xe/Qt),xe%=Qt,le.splice(xe++,0,St)}return String.fromCodePoint.apply(String,le)},L=function(ne){var le=[];ne=W(ne);var Ee=ne.length,xe=E,St=0,It=w,je=!0,Rt=!1,en=void 0;try{for(var ht=ne[Symbol.iterator](),kn;!(je=(kn=ht.next()).done);je=!0){var In=kn.value;In<128&&le.push(P(In))}}catch(Pe){Rt=!0,en=Pe}finally{try{!je&&ht.return&&ht.return()}finally{if(Rt)throw en}}var Gt=le.length,Xn=Gt;for(Gt&&le.push(S);Xn<Ee;){var $r=p,Qt=!0,ui=!1,Li=void 0;try{for(var qr=ne[Symbol.iterator](),Is;!(Qt=(Is=qr.next()).done);Qt=!0){var Ti=Is.value;Ti>=xe&&Ti<$r&&($r=Ti)}}catch(Pe){ui=!0,Li=Pe}finally{try{!Qt&&qr.return&&qr.return()}finally{if(ui)throw Li}}var Ci=Xn+1;$r-xe>$((p-St)/Ci)&&N("overflow"),St+=($r-xe)*Ci,xe=$r;var Ys=!0,gs=!1,xt=void 0;try{for(var Rn=ne[Symbol.iterator](),ys;!(Ys=(ys=Rn.next()).done);Ys=!0){var K=ys.value;if(K<xe&&++St>p&&N("overflow"),K==xe){for(var oe=St,ee=m;;ee+=m){var de=ee<=It?g:ee>=It+y?y:ee-It;if(oe<de)break;var ye=oe-de,pe=m-de;le.push(P(M(de+ye%pe,0))),oe=$(ye/pe)}le.push(P(M(oe,0))),It=H(St,Ci,Xn==Gt),St=0,++Xn}}}catch(Pe){gs=!0,xt=Pe}finally{try{!Ys&&Rn.return&&Rn.return()}finally{if(gs)throw xt}}++St,++xe}return le.join("")},B=function(ne){return z(ne,function(le){return b.test(le)?Y(le.slice(4).toLowerCase()):le})},q=function(ne){return z(ne,function(le){return T.test(le)?"xn--"+L(le):le})},Z={version:"2.1.0",ucs2:{decode:W,encode:V},decode:Y,encode:L,toASCII:q,toUnicode:B},ue={};function he(ae){var ne=ae.charCodeAt(0),le=void 0;return ne<16?le="%0"+ne.toString(16).toUpperCase():ne<128?le="%"+ne.toString(16).toUpperCase():ne<2048?le="%"+(ne>>6|192).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase():le="%"+(ne>>12|224).toString(16).toUpperCase()+"%"+(ne>>6&63|128).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase(),le}function fe(ae){for(var ne="",le=0,Ee=ae.length;le<Ee;){var xe=parseInt(ae.substr(le+1,2),16);if(xe<128)ne+=String.fromCharCode(xe),le+=3;else if(xe>=194&&xe<224){if(Ee-le>=6){var St=parseInt(ae.substr(le+4,2),16);ne+=String.fromCharCode((xe&31)<<6|St&63)}else ne+=ae.substr(le,6);le+=6}else if(xe>=224){if(Ee-le>=9){var It=parseInt(ae.substr(le+4,2),16),je=parseInt(ae.substr(le+7,2),16);ne+=String.fromCharCode((xe&15)<<12|(It&63)<<6|je&63)}else ne+=ae.substr(le,9);le+=9}else ne+=ae.substr(le,3),le+=3}return ne}function me(ae,ne){function le(Ee){var xe=fe(Ee);return xe.match(ne.UNRESERVED)?xe:Ee}return ae.scheme&&(ae.scheme=String(ae.scheme).replace(ne.PCT_ENCODED,le).toLowerCase().replace(ne.NOT_SCHEME,"")),ae.userinfo!==void 0&&(ae.userinfo=String(ae.userinfo).replace(ne.PCT_ENCODED,le).replace(ne.NOT_USERINFO,he).replace(ne.PCT_ENCODED,o)),ae.host!==void 0&&(ae.host=String(ae.host).replace(ne.PCT_ENCODED,le).toLowerCase().replace(ne.NOT_HOST,he).replace(ne.PCT_ENCODED,o)),ae.path!==void 0&&(ae.path=String(ae.path).replace(ne.PCT_ENCODED,le).replace(ae.scheme?ne.NOT_PATH:ne.NOT_PATH_NOSCHEME,he).replace(ne.PCT_ENCODED,o)),ae.query!==void 0&&(ae.query=String(ae.query).replace(ne.PCT_ENCODED,le).replace(ne.NOT_QUERY,he).replace(ne.PCT_ENCODED,o)),ae.fragment!==void 0&&(ae.fragment=String(ae.fragment).replace(ne.PCT_ENCODED,le).replace(ne.NOT_FRAGMENT,he).replace(ne.PCT_ENCODED,o)),ae}function _e(ae){return ae.replace(/^0*(.*)/,"$1")||"0"}function ge(ae,ne){var le=ae.match(ne.IPV4ADDRESS)||[],Ee=d(le,2),xe=Ee[1];return xe?xe.split(".").map(_e).join("."):ae}function Be(ae,ne){var le=ae.match(ne.IPV6ADDRESS)||[],Ee=d(le,3),xe=Ee[1],St=Ee[2];if(xe){for(var It=xe.toLowerCase().split("::").reverse(),je=d(It,2),Rt=je[0],en=je[1],ht=en?en.split(":").map(_e):[],kn=Rt.split(":").map(_e),In=ne.IPV4ADDRESS.test(kn[kn.length-1]),Gt=In?7:8,Xn=kn.length-Gt,$r=Array(Gt),Qt=0;Qt<Gt;++Qt)$r[Qt]=ht[Qt]||kn[Xn+Qt]||"";In&&($r[Gt-1]=ge($r[Gt-1],ne));var ui=$r.reduce(function(Ci,Ys,gs){if(!Ys||Ys==="0"){var xt=Ci[Ci.length-1];xt&&xt.index+xt.length===gs?xt.length++:Ci.push({index:gs,length:1})}return Ci},[]),Li=ui.sort(function(Ci,Ys){return Ys.length-Ci.length})[0],qr=void 0;if(Li&&Li.length>1){var Is=$r.slice(0,Li.index),Ti=$r.slice(Li.index+Li.length);qr=Is.join(":")+"::"+Ti.join(":")}else qr=$r.join(":");return St&&(qr+="%"+St),qr}else return ae}var Me=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ct="".match(/(){0}/)[1]===void 0;function Oe(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le={},Ee=ne.iri!==!1?f:c;ne.reference==="suffix"&&(ae=(ne.scheme?ne.scheme+":":"")+"//"+ae);var xe=ae.match(Me);if(xe){ct?(le.scheme=xe[1],le.userinfo=xe[3],le.host=xe[4],le.port=parseInt(xe[5],10),le.path=xe[6]||"",le.query=xe[7],le.fragment=xe[8],isNaN(le.port)&&(le.port=xe[5])):(le.scheme=xe[1]||void 0,le.userinfo=ae.indexOf("@")!==-1?xe[3]:void 0,le.host=ae.indexOf("//")!==-1?xe[4]:void 0,le.port=parseInt(xe[5],10),le.path=xe[6]||"",le.query=ae.indexOf("?")!==-1?xe[7]:void 0,le.fragment=ae.indexOf("#")!==-1?xe[8]:void 0,isNaN(le.port)&&(le.port=ae.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),le.host&&(le.host=Be(ge(le.host,Ee),Ee)),le.scheme===void 0&&le.userinfo===void 0&&le.host===void 0&&le.port===void 0&&!le.path&&le.query===void 0?le.reference="same-document":le.scheme===void 0?le.reference="relative":le.fragment===void 0?le.reference="absolute":le.reference="uri",ne.reference&&ne.reference!=="suffix"&&ne.reference!==le.reference&&(le.error=le.error||"URI is not a "+ne.reference+" reference.");var St=ue[(ne.scheme||le.scheme||"").toLowerCase()];if(!ne.unicodeSupport&&(!St||!St.unicodeSupport)){if(le.host&&(ne.domainHost||St&&St.domainHost))try{le.host=Z.toASCII(le.host.replace(Ee.PCT_ENCODED,fe).toLowerCase())}catch(It){le.error=le.error||"Host's domain name can not be converted to ASCII via punycode: "+It}me(le,c)}else me(le,Ee);St&&St.parse&&St.parse(le,ne)}else le.error=le.error||"URI can not be parsed.";return le}function Re(ae,ne){var le=ne.iri!==!1?f:c,Ee=[];return ae.userinfo!==void 0&&(Ee.push(ae.userinfo),Ee.push("@")),ae.host!==void 0&&Ee.push(Be(ge(String(ae.host),le),le).replace(le.IPV6ADDRESS,function(xe,St,It){return"["+St+(It?"%25"+It:"")+"]"})),(typeof ae.port=="number"||typeof ae.port=="string")&&(Ee.push(":"),Ee.push(String(ae.port))),Ee.length?Ee.join(""):void 0}var Ye=/^\.\.?\//,Ut=/^\/\.(\/|$)/,Ft=/^\/\.\.(\/|$)/,Je=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(ae){for(var ne=[];ae.length;)if(ae.match(Ye))ae=ae.replace(Ye,"");else if(ae.match(Ut))ae=ae.replace(Ut,"/");else if(ae.match(Ft))ae=ae.replace(Ft,"/"),ne.pop();else if(ae==="."||ae==="..")ae="";else{var le=ae.match(Je);if(le){var Ee=le[0];ae=ae.slice(Ee.length),ne.push(Ee)}else throw new Error("Unexpected dot segment condition")}return ne.join("")}function gt(ae){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=ne.iri?f:c,Ee=[],xe=ue[(ne.scheme||ae.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(ae,ne),ae.host&&!le.IPV6ADDRESS.test(ae.host)){if(ne.domainHost||xe&&xe.domainHost)try{ae.host=ne.iri?Z.toUnicode(ae.host):Z.toASCII(ae.host.replace(le.PCT_ENCODED,fe).toLowerCase())}catch(je){ae.error=ae.error||"Host's domain name can not be converted to "+(ne.iri?"Unicode":"ASCII")+" via punycode: "+je}}me(ae,le),ne.reference!=="suffix"&&ae.scheme&&(Ee.push(ae.scheme),Ee.push(":"));var St=Re(ae,ne);if(St!==void 0&&(ne.reference!=="suffix"&&Ee.push("//"),Ee.push(St),ae.path&&ae.path.charAt(0)!=="/"&&Ee.push("/")),ae.path!==void 0){var It=ae.path;!ne.absolutePath&&(!xe||!xe.absolutePath)&&(It=Ge(It)),St===void 0&&(It=It.replace(/^\/\//,"/%2F")),Ee.push(It)}return ae.query!==void 0&&(Ee.push("?"),Ee.push(ae.query)),ae.fragment!==void 0&&(Ee.push("#"),Ee.push(ae.fragment)),Ee.join("")}function at(ae,ne){var le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=arguments[3],xe={};return Ee||(ae=Oe(gt(ae,le),le),ne=Oe(gt(ne,le),le)),le=le||{},!le.tolerant&&ne.scheme?(xe.scheme=ne.scheme,xe.userinfo=ne.userinfo,xe.host=ne.host,xe.port=ne.port,xe.path=Ge(ne.path||""),xe.query=ne.query):(ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0?(xe.userinfo=ne.userinfo,xe.host=ne.host,xe.port=ne.port,xe.path=Ge(ne.path||""),xe.query=ne.query):(ne.path?(ne.path.charAt(0)==="/"?xe.path=Ge(ne.path):((ae.userinfo!==void 0||ae.host!==void 0||ae.port!==void 0)&&!ae.path?xe.path="/"+ne.path:ae.path?xe.path=ae.path.slice(0,ae.path.lastIndexOf("/")+1)+ne.path:xe.path=ne.path,xe.path=Ge(xe.path)),xe.query=ne.query):(xe.path=ae.path,ne.query!==void 0?xe.query=ne.query:xe.query=ae.query),xe.userinfo=ae.userinfo,xe.host=ae.host,xe.port=ae.port),xe.scheme=ae.scheme),xe.fragment=ne.fragment,xe}function lt(ae,ne,le){var Ee=u({scheme:"null"},le);return gt(at(Oe(ae,Ee),Oe(ne,Ee),Ee,!0),Ee)}function Et(ae,ne){return typeof ae=="string"?ae=gt(Oe(ae,ne),ne):s(ae)==="object"&&(ae=Oe(gt(ae,ne),ne)),ae}function ve(ae,ne,le){return typeof ae=="string"?ae=gt(Oe(ae,le),le):s(ae)==="object"&&(ae=gt(ae,le)),typeof ne=="string"?ne=gt(Oe(ne,le),le):s(ne)==="object"&&(ne=gt(ne,le)),ae===ne}function Se(ae,ne){return ae&&ae.toString().replace(!ne||!ne.iri?c.ESCAPE:f.ESCAPE,he)}function Fe(ae,ne){return ae&&ae.toString().replace(!ne||!ne.iri?c.PCT_ENCODED:f.PCT_ENCODED,fe)}var Ue={scheme:"http",domainHost:!0,parse:function(ne,le){return ne.host||(ne.error=ne.error||"HTTP URIs must have a host."),ne},serialize:function(ne,le){var Ee=String(ne.scheme).toLowerCase()==="https";return(ne.port===(Ee?443:80)||ne.port==="")&&(ne.port=void 0),ne.path||(ne.path="/"),ne}},mt={scheme:"https",domainHost:Ue.domainHost,parse:Ue.parse,serialize:Ue.serialize};function cn(ae){return typeof ae.secure=="boolean"?ae.secure:String(ae.scheme).toLowerCase()==="wss"}var Ve={scheme:"ws",domainHost:!0,parse:function(ne,le){var Ee=ne;return Ee.secure=cn(Ee),Ee.resourceName=(Ee.path||"/")+(Ee.query?"?"+Ee.query:""),Ee.path=void 0,Ee.query=void 0,Ee},serialize:function(ne,le){if((ne.port===(cn(ne)?443:80)||ne.port==="")&&(ne.port=void 0),typeof ne.secure=="boolean"&&(ne.scheme=ne.secure?"wss":"ws",ne.secure=void 0),ne.resourceName){var Ee=ne.resourceName.split("?"),xe=d(Ee,2),St=xe[0],It=xe[1];ne.path=St&&St!=="/"?St:void 0,ne.query=It,ne.resourceName=void 0}return ne.fragment=void 0,ne}},wt={scheme:"wss",domainHost:Ve.domainHost,parse:Ve.parse,serialize:Ve.serialize},bt={},bn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Lt="[0-9A-Fa-f]",Ir=i(i("%[EFef]"+Lt+"%"+Lt+Lt+"%"+Lt+Lt)+"|"+i("%[89A-Fa-f]"+Lt+"%"+Lt+Lt)+"|"+i("%"+Lt+Lt)),Fn="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ar="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",oi=r(ar,'[\\"\\\\]'),yo="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",wr=new RegExp(bn,"g"),nr=new RegExp(Ir,"g"),Vo=new RegExp(r("[^]",Fn,"[\\.]",'[\\"]',oi),"g"),Hr=new RegExp(r("[^]",bn,yo),"g"),Zr=Hr;function Pt(ae){var ne=fe(ae);return ne.match(wr)?ne:ae}var Xt={scheme:"mailto",parse:function(ne,le){var Ee=ne,xe=Ee.to=Ee.path?Ee.path.split(","):[];if(Ee.path=void 0,Ee.query){for(var St=!1,It={},je=Ee.query.split("&"),Rt=0,en=je.length;Rt<en;++Rt){var ht=je[Rt].split("=");switch(ht[0]){case"to":for(var kn=ht[1].split(","),In=0,Gt=kn.length;In<Gt;++In)xe.push(kn[In]);break;case"subject":Ee.subject=Fe(ht[1],le);break;case"body":Ee.body=Fe(ht[1],le);break;default:St=!0,It[Fe(ht[0],le)]=Fe(ht[1],le);break}}St&&(Ee.headers=It)}Ee.query=void 0;for(var Xn=0,$r=xe.length;Xn<$r;++Xn){var Qt=xe[Xn].split("@");if(Qt[0]=Fe(Qt[0]),le.unicodeSupport)Qt[1]=Fe(Qt[1],le).toLowerCase();else try{Qt[1]=Z.toASCII(Fe(Qt[1],le).toLowerCase())}catch(ui){Ee.error=Ee.error||"Email address's domain name can not be converted to ASCII via punycode: "+ui}xe[Xn]=Qt.join("@")}return Ee},serialize:function(ne,le){var Ee=ne,xe=a(ne.to);if(xe){for(var St=0,It=xe.length;St<It;++St){var je=String(xe[St]),Rt=je.lastIndexOf("@"),en=je.slice(0,Rt).replace(nr,Pt).replace(nr,o).replace(Vo,he),ht=je.slice(Rt+1);try{ht=le.iri?Z.toUnicode(ht):Z.toASCII(Fe(ht,le).toLowerCase())}catch(Xn){Ee.error=Ee.error||"Email address's domain name can not be converted to "+(le.iri?"Unicode":"ASCII")+" via punycode: "+Xn}xe[St]=en+"@"+ht}Ee.path=xe.join(",")}var kn=ne.headers=ne.headers||{};ne.subject&&(kn.subject=ne.subject),ne.body&&(kn.body=ne.body);var In=[];for(var Gt in kn)kn[Gt]!==bt[Gt]&&In.push(Gt.replace(nr,Pt).replace(nr,o).replace(Hr,he)+"="+kn[Gt].replace(nr,Pt).replace(nr,o).replace(Zr,he));return In.length&&(Ee.query=In.join("&")),Ee}},rr=/^([^\:]+)\:(.*)/,Gs={scheme:"urn",parse:function(ne,le){var Ee=ne.path&&ne.path.match(rr),xe=ne;if(Ee){var St=le.scheme||xe.scheme||"urn",It=Ee[1].toLowerCase(),je=Ee[2],Rt=St+":"+(le.nid||It),en=ue[Rt];xe.nid=It,xe.nss=je,xe.path=void 0,en&&(xe=en.parse(xe,le))}else xe.error=xe.error||"URN can not be parsed.";return xe},serialize:function(ne,le){var Ee=le.scheme||ne.scheme||"urn",xe=ne.nid,St=Ee+":"+(le.nid||xe),It=ue[St];It&&(ne=It.serialize(ne,le));var je=ne,Rt=ne.nss;return je.path=(xe||le.nid)+":"+Rt,je}},mi=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ai={scheme:"urn:uuid",parse:function(ne,le){var Ee=ne;return Ee.uuid=Ee.nss,Ee.nss=void 0,!le.tolerant&&(!Ee.uuid||!Ee.uuid.match(mi))&&(Ee.error=Ee.error||"UUID is not valid."),Ee},serialize:function(ne,le){var Ee=ne;return Ee.nss=(ne.uuid||"").toLowerCase(),Ee}};ue[Ue.scheme]=Ue,ue[mt.scheme]=mt,ue[Ve.scheme]=Ve,ue[wt.scheme]=wt,ue[Xt.scheme]=Xt,ue[Gs.scheme]=Gs,ue[ai.scheme]=ai,n.SCHEMES=ue,n.pctEncChar=he,n.pctDecChars=fe,n.parse=Oe,n.removeDotSegments=Ge,n.serialize=gt,n.resolveComponents=at,n.resolve=lt,n.normalize=Et,n.equal=ve,n.escapeComponent=Se,n.unescapeComponent=Fe,Object.defineProperty(n,"__esModule",{value:!0})})})(JH,JH.exports);var Ozt=JH.exports;Object.defineProperty(LJ,"__esModule",{value:!0});const z4e=Ozt;z4e.code='require("ajv/dist/runtime/uri").default';LJ.default=z4e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=If;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=zn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=rO,i=Hx,s=M1,o=Tu,a=zn,u=Io,l=$s,c=Tt,f=Izt,d=LJ,h=(M,H)=>new RegExp(M,H);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(M){var H,Y,L,B,q,Z,ue,he,fe,me,_e,ge,Be,Me,ct,Oe,Re,Ye,Ut,Ft,Je,Ge,gt,at,lt;const Et=M.strict,ve=(H=M.code)===null||H===void 0?void 0:H.optimize,Se=ve===!0||ve===void 0?1:ve||0,Fe=(L=(Y=M.code)===null||Y===void 0?void 0:Y.regExp)!==null&&L!==void 0?L:h,Ue=(B=M.uriResolver)!==null&&B!==void 0?B:d.default;return{strictSchema:(Z=(q=M.strictSchema)!==null&&q!==void 0?q:Et)!==null&&Z!==void 0?Z:!0,strictNumbers:(he=(ue=M.strictNumbers)!==null&&ue!==void 0?ue:Et)!==null&&he!==void 0?he:!0,strictTypes:(me=(fe=M.strictTypes)!==null&&fe!==void 0?fe:Et)!==null&&me!==void 0?me:"log",strictTuples:(ge=(_e=M.strictTuples)!==null&&_e!==void 0?_e:Et)!==null&&ge!==void 0?ge:"log",strictRequired:(Me=(Be=M.strictRequired)!==null&&Be!==void 0?Be:Et)!==null&&Me!==void 0?Me:!1,code:M.code?{...M.code,optimize:Se,regExp:Fe}:{optimize:Se,regExp:Fe},loopRequired:(ct=M.loopRequired)!==null&&ct!==void 0?ct:v,loopEnum:(Oe=M.loopEnum)!==null&&Oe!==void 0?Oe:v,meta:(Re=M.meta)!==null&&Re!==void 0?Re:!0,messages:(Ye=M.messages)!==null&&Ye!==void 0?Ye:!0,inlineRefs:(Ut=M.inlineRefs)!==null&&Ut!==void 0?Ut:!0,schemaId:(Ft=M.schemaId)!==null&&Ft!==void 0?Ft:"$id",addUsedSchema:(Je=M.addUsedSchema)!==null&&Je!==void 0?Je:!0,validateSchema:(Ge=M.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(gt=M.validateFormats)!==null&&gt!==void 0?gt:!0,unicodeRegExp:(at=M.unicodeRegExp)!==null&&at!==void 0?at:!0,int32range:(lt=M.int32range)!==null&&lt!==void 0?lt:!0,uriResolver:Ue}}class w{constructor(H={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,H=this.opts={...H,..._(H)};const{es5:Y,lines:L}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:Y,lines:L}),this.logger=$(H.logger);const B=H.validateFormats;H.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,H,"NOT SUPPORTED"),E.call(this,y,H,"DEPRECATED","warn"),this._metaOpts=I.call(this),H.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),H.keywords&&A.call(this,H.keywords),typeof H.meta=="object"&&this.addMetaSchema(H.meta),b.call(this),H.validateFormats=B}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:H,meta:Y,schemaId:L}=this.opts;let B=f;L==="id"&&(B={...f},B.id=B.$id,delete B.$id),Y&&H&&this.addMetaSchema(B,B[L],!1)}defaultMeta(){const{meta:H,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof H=="object"?H[Y]||H:void 0}validate(H,Y){let L;if(typeof H=="string"){if(L=this.getSchema(H),!L)throw new Error(`no schema with key or ref "${H}"`)}else L=this.compile(H);const B=L(Y);return"$async"in L||(this.errors=L.errors),B}compile(H,Y){const L=this._addSchema(H,Y);return L.validate||this._compileSchemaEnv(L)}compileAsync(H,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:L}=this.opts;return B.call(this,H,Y);async function B(me,_e){await q.call(this,me.$schema);const ge=this._addSchema(me,_e);return ge.validate||Z.call(this,ge)}async function q(me){me&&!this.getSchema(me)&&await B.call(this,{$ref:me},!0)}async function Z(me){try{return this._compileSchemaEnv(me)}catch(_e){if(!(_e instanceof i.default))throw _e;return ue.call(this,_e),await he.call(this,_e.missingSchema),Z.call(this,me)}}function ue({missingSchema:me,missingRef:_e}){if(this.refs[me])throw new Error(`AnySchema ${me} is loaded but ${_e} cannot be resolved`)}async function he(me){const _e=await fe.call(this,me);this.refs[me]||await q.call(this,_e.$schema),this.refs[me]||this.addSchema(_e,me,Y)}async function fe(me){const _e=this._loading[me];if(_e)return _e;try{return await(this._loading[me]=L(me))}finally{delete this._loading[me]}}}addSchema(H,Y,L,B=this.opts.validateSchema){if(Array.isArray(H)){for(const Z of H)this.addSchema(Z,void 0,L,B);return this}let q;if(typeof H=="object"){const{schemaId:Z}=this.opts;if(q=H[Z],q!==void 0&&typeof q!="string")throw new Error(`schema ${Z} must be string`)}return Y=(0,u.normalizeId)(Y||q),this._checkUnique(Y),this.schemas[Y]=this._addSchema(H,L,Y,B,!0),this}addMetaSchema(H,Y,L=this.opts.validateSchema){return this.addSchema(H,Y,!0,L),this}validateSchema(H,Y){if(typeof H=="boolean")return!0;let L;if(L=H.$schema,L!==void 0&&typeof L!="string")throw new Error("$schema must be a string");if(L=L||this.opts.defaultMeta||this.defaultMeta(),!L)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const B=this.validate(L,H);if(!B&&Y){const q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(q);else throw new Error(q)}return B}getSchema(H){let Y;for(;typeof(Y=S.call(this,H))=="string";)H=Y;if(Y===void 0){const{schemaId:L}=this.opts,B=new o.SchemaEnv({schema:{},schemaId:L});if(Y=o.resolveSchema.call(this,B,H),!Y)return;this.refs[H]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(H){if(H instanceof RegExp)return this._removeAllSchemas(this.schemas,H),this._removeAllSchemas(this.refs,H),this;switch(typeof H){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=S.call(this,H);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[H],delete this.refs[H],this}case"object":{const Y=H;this._cache.delete(Y);let L=H[this.opts.schemaId];return L&&(L=(0,u.normalizeId)(L),delete this.schemas[L],delete this.refs[L]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(H){for(const Y of H)this.addKeyword(Y);return this}addKeyword(H,Y){let L;if(typeof H=="string")L=H,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=L);else if(typeof H=="object"&&Y===void 0){if(Y=H,L=Y.keyword,Array.isArray(L)&&!L.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(N.call(this,L,Y),!Y)return(0,c.eachItem)(L,q=>F.call(this,q)),this;W.call(this,Y);const B={...Y,type:(0,l.getJSONTypes)(Y.type),schemaType:(0,l.getJSONTypes)(Y.schemaType)};return(0,c.eachItem)(L,B.type.length===0?q=>F.call(this,q,B):q=>B.type.forEach(Z=>F.call(this,q,B,Z))),this}getKeyword(H){const Y=this.RULES.all[H];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(H){const{RULES:Y}=this;delete Y.keywords[H],delete Y.all[H];for(const L of Y.rules){const B=L.rules.findIndex(q=>q.keyword===H);B>=0&&L.rules.splice(B,1)}return this}addFormat(H,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[H]=Y,this}errorsText(H=this.errors,{separator:Y=", ",dataVar:L="data"}={}){return!H||H.length===0?"No errors":H.map(B=>`${L}${B.instancePath} ${B.message}`).reduce((B,q)=>B+Y+q)}$dataMetaSchema(H,Y){const L=this.RULES.all;H=JSON.parse(JSON.stringify(H));for(const B of Y){const q=B.split("/").slice(1);let Z=H;for(const ue of q)Z=Z[ue];for(const ue in L){const he=L[ue];if(typeof he!="object")continue;const{$data:fe}=he.definition,me=Z[ue];fe&&me&&(Z[ue]=G(me))}}return H}_removeAllSchemas(H,Y){for(const L in H){const B=H[L];(!Y||Y.test(L))&&(typeof B=="string"?delete H[L]:B&&!B.meta&&(this._cache.delete(B.schema),delete H[L]))}}_addSchema(H,Y,L,B=this.opts.validateSchema,q=this.opts.addUsedSchema){let Z;const{schemaId:ue}=this.opts;if(typeof H=="object")Z=H[ue];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof H!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(H);if(he!==void 0)return he;L=(0,u.normalizeId)(Z||L);const fe=u.getSchemaRefs.call(this,H,L);return he=new o.SchemaEnv({schema:H,schemaId:ue,meta:Y,baseId:L,localRefs:fe}),this._cache.set(he.schema,he),q&&!L.startsWith("#")&&(L&&this._checkUnique(L),this.refs[L]=he),B&&this.validateSchema(H,!0),he}_checkUnique(H){if(this.schemas[H]||this.refs[H])throw new Error(`schema with key or id "${H}" already exists`)}_compileSchemaEnv(H){if(H.meta?this._compileMetaSchema(H):o.compileSchema.call(this,H),!H.validate)throw new Error("ajv implementation error");return H.validate}_compileMetaSchema(H){const Y=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,H)}finally{this.opts=Y}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(M,H,Y,L="error"){for(const B in M){const q=B;q in H&&this.logger[L](`${Y}: option ${B}. ${M[q]}`)}}function S(M){return M=(0,u.normalizeId)(M),this.schemas[M]||this.refs[M]}function b(){const M=this.opts.schemas;if(M)if(Array.isArray(M))this.addSchema(M);else for(const H in M)this.addSchema(M[H],H)}function T(){for(const M in this.opts.formats){const H=this.opts.formats[M];H&&this.addFormat(M,H)}}function A(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const H in M){const Y=M[H];Y.keyword||(Y.keyword=H),this.addKeyword(Y)}}function I(){const M={...this.opts};for(const H of p)delete M[H];return M}const k={log(){},warn(){},error(){}};function $(M){if(M===!1)return k;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function N(M,H){const{RULES:Y}=this;if((0,c.eachItem)(M,L=>{if(Y.keywords[L])throw new Error(`Keyword ${L} is already defined`);if(!P.test(L))throw new Error(`Keyword ${L} has invalid name`)}),!!H&&H.$data&&!("code"in H||"validate"in H))throw new Error('$data keyword must have "code" or "validate" function')}function F(M,H,Y){var L;const B=H==null?void 0:H.post;if(Y&&B)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:q}=this;let Z=B?q.post:q.rules.find(({type:he})=>he===Y);if(Z||(Z={type:Y,rules:[]},q.rules.push(Z)),q.keywords[M]=!0,!H)return;const ue={keyword:M,definition:{...H,type:(0,l.getJSONTypes)(H.type),schemaType:(0,l.getJSONTypes)(H.schemaType)}};H.before?z.call(this,Z,ue,H.before):Z.rules.push(ue),q.all[M]=ue,(L=H.implements)===null||L===void 0||L.forEach(he=>this.addKeyword(he))}function z(M,H,Y){const L=M.rules.findIndex(B=>B.keyword===Y);L>=0?M.rules.splice(L,0,H):(M.rules.push(H),this.logger.warn(`rule ${Y} is not defined`))}function W(M){let{metaSchema:H}=M;H!==void 0&&(M.$data&&this.opts.$data&&(H=G(H)),M.validateSchema=this.compile(H,!0))}const V={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(M){return{anyOf:[M,V]}}})(l4e);var FJ={},jJ={},BJ={};Object.defineProperty(BJ,"__esModule",{value:!0});const Pzt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};BJ.default=Pzt;var L1={};Object.defineProperty(L1,"__esModule",{value:!0});L1.callRef=L1.getValidate=void 0;const kzt=Hx,r0e=jn,mu=zn,ab=qh,i0e=Tu,Ck=Tt,Rzt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=i0e.resolveRef.call(u,l,i,n);if(c===void 0)throw new kzt.default(r.opts.uriResolver,i,n);if(c instanceof i0e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return l$(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return l$(e,(0,mu._)`${p}.validate`,l,l.$async)}function d(p){const m=U4e(e,p);l$(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,mu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:mu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function U4e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,mu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}L1.getValidate=U4e;function l$(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?ab.default.this:mu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,mu._)`await ${(0,r0e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,mu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,r0e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,mu._)`${p}.errors`;i.assign(ab.default.vErrors,(0,mu._)`${ab.default.vErrors} === null ? ${m} : ${ab.default.vErrors}.concat(${m})`),i.assign(ab.default.errors,(0,mu._)`${ab.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=Ck.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,mu._)`${p}.evaluated.props`);s.props=Ck.mergeEvaluated.props(i,y,s.props,mu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=Ck.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,mu._)`${p}.evaluated.items`);s.items=Ck.mergeEvaluated.items(i,y,s.items,mu.Name)}}}L1.callRef=l$;L1.default=Rzt;Object.defineProperty(jJ,"__esModule",{value:!0});const $zt=BJ,Nzt=L1,Dzt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$zt.default,Nzt.default];jJ.default=Dzt;var zJ={},UJ={};Object.defineProperty(UJ,"__esModule",{value:!0});const eL=zn,cg=eL.operators,tL={maximum:{okStr:"<=",ok:cg.LTE,fail:cg.GT},minimum:{okStr:">=",ok:cg.GTE,fail:cg.LT},exclusiveMaximum:{okStr:"<",ok:cg.LT,fail:cg.GTE},exclusiveMinimum:{okStr:">",ok:cg.GT,fail:cg.LTE}},Mzt={message:({keyword:e,schemaCode:t})=>(0,eL.str)`must be ${tL[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,eL._)`{comparison: ${tL[e].okStr}, limit: ${t}}`},Lzt={keyword:Object.keys(tL),type:"number",schemaType:"number",$data:!0,error:Mzt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,eL._)`${n} ${tL[t].fail} ${r} || isNaN(${n})`)}};UJ.default=Lzt;var VJ={};Object.defineProperty(VJ,"__esModule",{value:!0});const Z2=zn,Fzt={message:({schemaCode:e})=>(0,Z2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Z2._)`{multipleOf: ${e}}`},jzt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Fzt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Z2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Z2._)`${o} !== parseInt(${o})`;e.fail$data((0,Z2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};VJ.default=jzt;var HJ={},qJ={};Object.defineProperty(qJ,"__esModule",{value:!0});function V4e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}qJ.default=V4e;V4e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(HJ,"__esModule",{value:!0});const Iv=zn,Bzt=Tt,zzt=qJ,Uzt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Iv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Iv._)`{limit: ${e}}`},Vzt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Uzt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Iv.operators.GT:Iv.operators.LT,o=i.opts.unicode===!1?(0,Iv._)`${n}.length`:(0,Iv._)`${(0,Bzt.useFunc)(e.gen,zzt.default)}(${n})`;e.fail$data((0,Iv._)`${o} ${s} ${r}`)}};HJ.default=Vzt;var WJ={};Object.defineProperty(WJ,"__esModule",{value:!0});const Hzt=jn,nL=zn,qzt={message:({schemaCode:e})=>(0,nL.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,nL._)`{pattern: ${e}}`},Wzt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:qzt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,nL._)`(new RegExp(${i}, ${o}))`:(0,Hzt.usePattern)(e,r);e.fail$data((0,nL._)`!${a}.test(${t})`)}};WJ.default=Wzt;var GJ={};Object.defineProperty(GJ,"__esModule",{value:!0});const eC=zn,Gzt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,eC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,eC._)`{limit: ${e}}`},Yzt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Gzt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?eC.operators.GT:eC.operators.LT;e.fail$data((0,eC._)`Object.keys(${n}).length ${i} ${r}`)}};GJ.default=Yzt;var YJ={};Object.defineProperty(YJ,"__esModule",{value:!0});const rT=jn,tC=zn,Kzt=Tt,Xzt={message:({params:{missingProperty:e}})=>(0,tC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,tC._)`{missingProperty: ${e}}`},Qzt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Xzt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Kzt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(tC.nil,f);else for(const h of n)(0,rT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,rT.checkMissingProp)(e,n,h)),(0,rT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,rT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,rT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,tC.not)(p),()=>{e.error(),t.break()})},tC.nil)}}};YJ.default=Qzt;var KJ={};Object.defineProperty(KJ,"__esModule",{value:!0});const nC=zn,Jzt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,nC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,nC._)`{limit: ${e}}`},Zzt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Jzt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?nC.operators.GT:nC.operators.LT;e.fail$data((0,nC._)`${n}.length ${i} ${r}`)}};KJ.default=Zzt;var XJ={},iO={};Object.defineProperty(iO,"__esModule",{value:!0});const H4e=$J;H4e.code='require("ajv/dist/runtime/equal").default';iO.default=H4e;Object.defineProperty(XJ,"__esModule",{value:!0});const QB=$s,wo=zn,eUt=Tt,tUt=iO,nUt={message:({params:{i:e,j:t}})=>(0,wo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,wo._)`{i: ${e}, j: ${t}}`},rUt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:nUt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,QB.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,wo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,wo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,wo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,QB.checkDataTypes)(l,g,a.opts.strictNumbers,QB.DataType.Wrong),v=t.const("indices",(0,wo._)`{}`);t.for((0,wo._)`;${p}--;`,()=>{t.let(g,(0,wo._)`${n}[${p}]`),t.if(y,(0,wo._)`continue`),l.length>1&&t.if((0,wo._)`typeof ${g} == "string"`,(0,wo._)`${g} += "_"`),t.if((0,wo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,wo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,wo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,eUt.useFunc)(t,tUt.default),y=t.name("outer");t.label(y).for((0,wo._)`;${p}--;`,()=>t.for((0,wo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,wo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};XJ.default=rUt;var QJ={};Object.defineProperty(QJ,"__esModule",{value:!0});const ZH=zn,iUt=Tt,sUt=iO,oUt={message:"must be equal to constant",params:({schemaCode:e})=>(0,ZH._)`{allowedValue: ${e}}`},aUt={keyword:"const",$data:!0,error:oUt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,ZH._)`!${(0,iUt.useFunc)(t,sUt.default)}(${n}, ${i})`):e.fail((0,ZH._)`${s} !== ${n}`)}};QJ.default=aUt;var JJ={};Object.defineProperty(JJ,"__esModule",{value:!0});const e2=zn,uUt=Tt,lUt=iO,cUt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,e2._)`{allowedValues: ${e}}`},fUt={keyword:"enum",schemaType:"array",$data:!0,error:cUt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,uUt.useFunc)(t,lUt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,e2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,e2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,e2._)`${l()}(${n}, ${h}[${p}])`:(0,e2._)`${n} === ${m}`}}};JJ.default=fUt;Object.defineProperty(zJ,"__esModule",{value:!0});const dUt=UJ,hUt=VJ,pUt=HJ,mUt=WJ,gUt=GJ,yUt=YJ,vUt=KJ,_Ut=XJ,bUt=QJ,wUt=JJ,EUt=[dUt.default,hUt.default,pUt.default,mUt.default,gUt.default,yUt.default,vUt.default,_Ut.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},bUt.default,wUt.default];zJ.default=EUt;var ZJ={},qx={};Object.defineProperty(qx,"__esModule",{value:!0});qx.validateAdditionalItems=void 0;const Ov=zn,eq=Tt,xUt={message:({params:{len:e}})=>(0,Ov.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ov._)`{limit: ${e}}`},SUt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:xUt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,eq.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}q4e(e,r)}};function q4e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Ov._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Ov._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,eq.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Ov._)`${a} <= ${t.length}`);n.if((0,Ov.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:eq.Type.Num},l),o.allErrors||n.if((0,Ov.not)(l),()=>n.break())})}}qx.validateAdditionalItems=q4e;qx.default=SUt;var eZ={},Wx={};Object.defineProperty(Wx,"__esModule",{value:!0});Wx.validateTuple=void 0;const s0e=zn,c$=Tt,TUt=jn,CUt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return W4e(e,"additionalItems",t);n.items=!0,!(0,c$.alwaysValidSchema)(n,t)&&e.ok((0,TUt.validateArray)(e))}};function W4e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=c$.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,s0e._)`${s}.length`);n.forEach((f,d)=>{(0,c$.alwaysValidSchema)(a,f)||(r.if((0,s0e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,c$.checkStrictMode)(a,g,d.strictTuples)}}}Wx.validateTuple=W4e;Wx.default=CUt;Object.defineProperty(eZ,"__esModule",{value:!0});const AUt=Wx,IUt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,AUt.validateTuple)(e,"items")};eZ.default=IUt;var tZ={};Object.defineProperty(tZ,"__esModule",{value:!0});const o0e=zn,OUt=Tt,PUt=jn,kUt=qx,RUt={message:({params:{len:e}})=>(0,o0e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,o0e._)`{limit: ${e}}`},$Ut={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:RUt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,OUt.alwaysValidSchema)(r,t)&&(i?(0,kUt.validateAdditionalItems)(e,i):e.ok((0,PUt.validateArray)(e)))}};tZ.default=$Ut;var nZ={};Object.defineProperty(nZ,"__esModule",{value:!0});const tc=zn,Ak=Tt,NUt={message:({params:{min:e,max:t}})=>t===void 0?(0,tc.str)`must contain at least ${e} valid item(s)`:(0,tc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,tc._)`{minContains: ${e}}`:(0,tc._)`{minContains: ${e}, maxContains: ${t}}`},DUt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:NUt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,tc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,Ak.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Ak.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Ak.alwaysValidSchema)(s,n)){let m=(0,tc._)`${c} >= ${o}`;a!==void 0&&(m=(0,tc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,tc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:Ak.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,tc._)`${m}++`),a===void 0?t.if((0,tc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,tc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,tc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};nZ.default=DUt;var G4e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=zn,n=Tt,r=jn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(G4e);var rZ={};Object.defineProperty(rZ,"__esModule",{value:!0});const Y4e=zn,MUt=Tt,LUt={message:"property name must be valid",params:({params:e})=>(0,Y4e._)`{propertyName: ${e.propertyName}}`},FUt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:LUt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,MUt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,Y4e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};rZ.default=FUt;var Q5={};Object.defineProperty(Q5,"__esModule",{value:!0});const Ik=jn,Qc=zn,jUt=qh,Ok=Tt,BUt={message:"must NOT have additional properties",params:({params:e})=>(0,Qc._)`{additionalProperty: ${e.additionalProperty}}`},zUt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:BUt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Ok.alwaysValidSchema)(o,n))return;const l=(0,Ik.allSchemaProperties)(r.properties),c=(0,Ik.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Qc._)`${s} === ${jUt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,Ok.schemaRefOrVal)(o,r.properties,"properties");y=(0,Ik.isOwnProperty)(t,v,g)}else l.length?y=(0,Qc.or)(...l.map(v=>(0,Qc._)`${g} === ${v}`)):y=Qc.nil;return c.length&&(y=(0,Qc.or)(y,...c.map(v=>(0,Qc._)`${(0,Ik.usePattern)(e,v)}.test(${g})`))),(0,Qc.not)(y)}function h(g){t.code((0,Qc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,Ok.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Qc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Qc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:Ok.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};Q5.default=zUt;var iZ={};Object.defineProperty(iZ,"__esModule",{value:!0});const UUt=If,a0e=jn,JB=Tt,u0e=Q5,VUt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&u0e.default.code(new UUt.KeywordCxt(s,u0e.default,"additionalProperties"));const o=(0,a0e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=JB.mergeEvaluated.props(t,(0,JB.toHash)(o),s.props));const a=o.filter(f=>!(0,JB.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,a0e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};iZ.default=VUt;var sZ={};Object.defineProperty(sZ,"__esModule",{value:!0});const l0e=jn,Pk=zn,c0e=Tt,f0e=Tt,HUt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,l0e.allSchemaProperties)(n),u=a.filter(m=>(0,c0e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof Pk.Name)&&(s.props=(0,f0e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,c0e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,Pk._)`${(0,l0e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:f0e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,Pk._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,Pk.not)(c),()=>t.break())})})}}};sZ.default=HUt;var oZ={};Object.defineProperty(oZ,"__esModule",{value:!0});const qUt=Tt,WUt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,qUt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};oZ.default=WUt;var aZ={};Object.defineProperty(aZ,"__esModule",{value:!0});const GUt=jn,YUt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:GUt.validateUnion,error:{message:"must match a schema in anyOf"}};aZ.default=YUt;var uZ={};Object.defineProperty(uZ,"__esModule",{value:!0});const f$=zn,KUt=Tt,XUt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,f$._)`{passingSchemas: ${e.passing}}`},QUt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:XUt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,KUt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,f$._)`${u} && ${o}`).assign(o,!1).assign(a,(0,f$._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,f$.Name)})})}}};uZ.default=QUt;var lZ={};Object.defineProperty(lZ,"__esModule",{value:!0});const JUt=Tt,ZUt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,JUt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};lZ.default=ZUt;var cZ={};Object.defineProperty(cZ,"__esModule",{value:!0});const rL=zn,K4e=Tt,eVt={message:({params:e})=>(0,rL.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,rL._)`{failingKeyword: ${e.ifClause}}`},tVt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:eVt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,K4e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=d0e(r,"then"),s=d0e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,rL.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,rL._)`${c}`):e.setParams({ifClause:c})}}}};function d0e(e,t){const n=e.schema[t];return n!==void 0&&!(0,K4e.alwaysValidSchema)(e,n)}cZ.default=tVt;var fZ={};Object.defineProperty(fZ,"__esModule",{value:!0});const nVt=Tt,rVt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,nVt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};fZ.default=rVt;Object.defineProperty(ZJ,"__esModule",{value:!0});const iVt=qx,sVt=eZ,oVt=Wx,aVt=tZ,uVt=nZ,lVt=G4e,cVt=rZ,fVt=Q5,dVt=iZ,hVt=sZ,pVt=oZ,mVt=aZ,gVt=uZ,yVt=lZ,vVt=cZ,_Vt=fZ;function bVt(e=!1){const t=[pVt.default,mVt.default,gVt.default,yVt.default,vVt.default,_Vt.default,cVt.default,fVt.default,lVt.default,dVt.default,hVt.default];return e?t.push(sVt.default,aVt.default):t.push(iVt.default,oVt.default),t.push(uVt.default),t}ZJ.default=bVt;var dZ={},hZ={};Object.defineProperty(hZ,"__esModule",{value:!0});const ss=zn,wVt={message:({schemaCode:e})=>(0,ss.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ss._)`{format: ${e}}`},EVt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:wVt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ss._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ss._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ss._)`${m}.type || "string"`).assign(y,(0,ss._)`${m}.validate`),()=>n.assign(g,(0,ss._)`"string"`).assign(y,m)),e.fail$data((0,ss.or)(v(),_()));function v(){return u.strictSchema===!1?ss.nil:(0,ss._)`${o} && !${y}`}function _(){const w=c.$async?(0,ss._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ss._)`${y}(${r})`,E=(0,ss._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ss._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(E){const S=E instanceof RegExp?(0,ss.regexpCode)(E):u.code.formats?(0,ss._)`${u.code.formats}${(0,ss.getProperty)(s)}`:void 0,b=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ss._)`${b}.validate`]:["string",E,b]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ss._)`await ${y}(${r})`}return typeof g=="function"?(0,ss._)`${y}(${r})`:(0,ss._)`${y}.test(${r})`}}}};hZ.default=EVt;Object.defineProperty(dZ,"__esModule",{value:!0});const xVt=hZ,SVt=[xVt.default];dZ.default=SVt;var RE={};Object.defineProperty(RE,"__esModule",{value:!0});RE.contentVocabulary=RE.metadataVocabulary=void 0;RE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];RE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(FJ,"__esModule",{value:!0});const TVt=jJ,CVt=zJ,AVt=ZJ,IVt=dZ,h0e=RE,OVt=[TVt.default,CVt.default,(0,AVt.default)(),IVt.default,h0e.metadataVocabulary,h0e.contentVocabulary];FJ.default=OVt;var pZ={},J5={};Object.defineProperty(J5,"__esModule",{value:!0});J5.DiscrError=void 0;var p0e;(function(e){e.Tag="tag",e.Mapping="mapping"})(p0e||(J5.DiscrError=p0e={}));Object.defineProperty(pZ,"__esModule",{value:!0});const Ab=zn,tq=J5,m0e=Tu,PVt=Hx,kVt=Tt,RVt={message:({params:{discrError:e,tagName:t}})=>e===tq.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Ab._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},$Vt={keyword:"discriminator",type:"object",schemaType:"object",error:RVt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,Ab._)`${n}${(0,Ab.getProperty)(a)}`);t.if((0,Ab._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:tq.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,Ab._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:tq.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,Ab.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,kVt.schemaHasRulesButRef)(E,s.self.RULES)){const b=E.$ref;if(E=m0e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,b),E instanceof m0e.SchemaEnv&&(E=E.schema),E===void 0)throw new PVt.default(s.opts.uriResolver,s.baseId,b)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)_(w.const,E);else if(w.enum)for(const S of w.enum)_(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};pZ.default=$Vt;const NVt="http://json-schema.org/draft-07/schema#",DVt="http://json-schema.org/draft-07/schema#",MVt="Core schema meta-schema",LVt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},FVt=["object","boolean"],jVt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},BVt={$schema:NVt,$id:DVt,title:MVt,definitions:LVt,type:FVt,properties:jVt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=l4e,r=FJ,i=pZ,s=BVt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=If;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=zn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=rO;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=Hx;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(WH,WH.exports);var zVt=WH.exports;const X4e=Ju(zVt),UVt="#/definitions/StudyConfig",VVt="http://json-schema.org/draft-07/schema#",HVt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](./Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](./ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta10/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "<study-name>/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},qVt={$ref:UVt,$schema:VVt,definitions:HVt},WVt="#/definitions/GlobalConfig",GVt="http://json-schema.org/draft-07/schema#",YVt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},KVt={$ref:WVt,$schema:GVt,definitions:YVt},Q4e=new X4e;Q4e.addSchema(KVt);const g0e=Q4e.getSchema("#/definitions/GlobalConfig"),J4e=new X4e;J4e.addSchema(qVt);const y0e=J4e.getSchema("#/definitions/StudyConfig");function XVt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function Z5(e){return e.baseComponent!==void 0}function QVt(e){const t=TJ.parse(e),n=g0e(t),r=XVt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...g0e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function JVt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return Z5(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function Z4e(e,t){const n=TJ.parse(e),r=y0e(n),i=JVt(n);if(r&&i[0])return n;const s=[...y0e.errors||[]];return console.error(`${t} parsing errors`,s),{...n,errors:s}}function e5e(){const e=Yf(),{setAlertModal:t}=Rl(),n=xc();C.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const v0e=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],_0e=["participantId","trialId","trialOrder","responseId"];function mZ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function ZVt(e,t,n){const r=(Object.entries(e.answers).length/(Lu(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=Z5(u)&&u.baseComponent&&t.baseComponents?JK({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(_=>_.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function eHt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=C.useState([...v0e].filter(c=>c!=="meta")),a=C.useMemo(()=>{const c=[..._0e,...s],f=c,d=i.map(h=>ZVt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=C.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);mZ(c,n)},[n,a.header,a.rows]),l=C.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return R.jsxs(Gp,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[R.jsx(iK,{searchable:!0,nothingFound:"Property not found",data:[...v0e],value:s,onChange:c=>o(c),label:"Included optional columns:",icon:R.jsx(Eyt,{}),variant:"filled"}),R.jsx(s1,{h:"md"}),R.jsx(dt,{mih:300,style:{width:"100%",overflow:"scroll"},children:R.jsxs(uK,{striped:!0,captionSide:"bottom",withBorder:!0,children:[R.jsx("thead",{children:R.jsx("tr",{children:a.header.map(c=>R.jsx("th",{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:R.jsxs(vi,{direction:"row",justify:"space-between",align:"center",children:[c,!_0e.includes(c)&&R.jsx(dm,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},children:R.jsx(fPe,{size:16})})]})},c))})}),R.jsx("tbody",{children:a.rows.slice(0,5).map((c,f)=>R.jsx("tr",{children:a.header.map(d=>R.jsx("td",{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),R.jsx(s1,{h:"sm"}),R.jsx(vi,{justify:"center",fz:"sm",c:"dimmed",children:R.jsx(it,{children:l})}),R.jsx(s1,{h:"md"}),R.jsxs(yr,{position:"right",children:[R.jsx(Fr,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),R.jsx(Fr,{leftIcon:R.jsx(cPe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function t5e(){const e=Ih(),{storageEngine:t}=fo(),{answers:n}=xa(m=>m),[r,i]=C.useState(!1);C.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),e5e();const[s,o]=C.useState(),[a,u]=C.useState(""),l=e.studyMetadata.title.replace(" ","_");C.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=C.useCallback(async()=>{mZ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=C.useState(Math.floor(d/1e3));return C.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),R.jsx(Ya,{style:{height:"100%"},children:R.jsx(vi,{direction:"column",children:r?R.jsx(it,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?R.jsx(Ka,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):R.jsxs(R.Fragment,{children:[R.jsx(it,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),R.jsx(s1,{h:"lg"}),R.jsx(Ya,{children:R.jsx(ph,{color:"blue"})})]})})})}function tHt(e){const{email:t}=e;return R.jsx(Lm,{pt:100,children:R.jsx(Ya,{children:R.jsxs(fa,{order:3,children:["Trial not found, please contact the administrator at"," ",R.jsxs(yI,{span:!0,c:"blue",href:`mailto:${t}`,children:[t," "]})]})})})}function tm(e){return structuredClone(e)}const n5e=C.createContext(null);function nHt(){const e=C.useContext(n5e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function b0e(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function rHt(){const e=Yf(),t=jm(),r=`${t[e]}_${e}`,{trialValidation:i,sequence:s,answers:o}=xa(E=>E),a=xJ(),u=xc(),{saveTrialAnswer:l,setIframeAnswers:c}=Rl(),{storageEngine:f}=fo(),h=!OCt(r),p=a==null?void 0:a.answer,m=Vl(),g=Ih(),y=W4(),v=C.useMemo(()=>Date.now(),[]),_=nHt(),w=C.useCallback(()=>{const E=tm(i[r]),S=Object.values(E).reduce((N,F)=>Object.hasOwn(F,"values")?{...N,...F.values}:N,{}),{provenanceGraph:b}=E,T=Date.now(),A=_&&"current"in _&&_.current?_.current.splice(0,_.current.length):[];Object.keys(p||{}).length===0&&(u(l({identifier:r,answer:S,startTime:v,endTime:T,provenanceGraph:b,windowEvents:A})),f&&f.saveAnswer(r,{answer:S,startTime:v,endTime:T,provenanceGraph:b,windowEvents:A}),u(c({})));let I=e+1;const k=URe(s,e),$=k!==null&&k.some(N=>Object.hasOwn(N.currentBlock,"skip")&&N.currentBlock.skip!==void 0),P={...o,[r]:{answer:S,startTime:v,endTime:T,provenanceGraph:b,windowEvents:A}};$&&[...k.flatMap(F=>F.currentBlock.skip?F.currentBlock.skip.map(z=>({...z,firstIndex:F.firstIndex,lastIndex:F.lastIndex})):[])].some(F=>{let z=!1;const W=Object.fromEntries(Object.entries(P).filter(([G])=>{const M=parseInt(G.slice(G.lastIndexOf("_")+1),10);return M>=F.firstIndex&&M<=e})),V=F.check!=="block"?Object.entries(W).filter(([G])=>G.slice(0,G.lastIndexOf("_"))===F.name):Object.entries(W);if(V.length===0)return!1;if(V.some(([G,M])=>!M))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(F,null,2)}`);if(F.check==="response"||F.check==="responses"){const[G,M]=V[0];F.check==="response"?z=F.value!==M.answer[F.responseId]:z=!b0e(M.answer,G,g.components[G.slice(0,G.lastIndexOf("_"))],g)}else if(F.check==="block"||F.check==="repeatedComponent"){if(V.length<F.value)return!1;const G=V.map(([Y,L])=>b0e(L.answer,Y,g.components[Y.slice(0,Y.lastIndexOf("_"))],g)),M=G.filter(Y=>Y).length,H=G.length-M;z=F.condition==="numCorrect"&&M===F.value||F.condition==="numIncorrect"&&H===F.value}if(z){const G=t.indexOf(F.to),M=G===-1?ACt(s,F.to):-1;return I=G===-1?M:G,!0}return!1}),m(`/${y}/${I}${window.location.search}`)},[i,r,_,p,e,s,o,v,m,y,u,l,f,c,g,t]);return{isNextDisabled:h,goToNextStep:w}}function iHt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=rHt(),o=C.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return R.jsx(Fr,{type:"submit",disabled:t||i,onClick:o,children:e})}function nq(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var sHt=Object.defineProperty,w0e=Object.getOwnPropertySymbols,oHt=Object.prototype.hasOwnProperty,aHt=Object.prototype.propertyIsEnumerable,E0e=(e,t,n)=>t in e?sHt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uHt=(e,t)=>{for(var n in t||(t={}))oHt.call(t,n)&&E0e(e,n,t[n]);if(w0e)for(var n of w0e(t))aHt.call(t,n)&&E0e(e,n,t[n]);return e};function r5e(e,t){if(t===null||typeof t!="object")return{};const n=uHt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const lHt="__MANTINE_FORM_INDEX__";function x0e(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${lHt}`)):!1:!1}function S0e(e,t,n){typeof n.value=="object"&&(n.value=Zb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Zb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Zb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Zb(a),Zb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Zb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)S0e(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||S0e(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function i5e(e){return typeof e!="string"?[]:e.split(".")}function eF(e,t,n){const r=i5e(e);if(r.length===0)return n;const i=Zb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function kp(e,t){const n=i5e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function T0e(e){const t=nq(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function rq(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=kp(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>rq(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||rq(o,t,a,i)),i},r)}function iq(e,t){return T0e(typeof e=="function"?e(t):rq(e,t))}function kk(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=iq(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function cHt(e,{from:t,to:n},r){const i=kp(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),eF(e,s,r)}var fHt=Object.defineProperty,C0e=Object.getOwnPropertySymbols,dHt=Object.prototype.hasOwnProperty,hHt=Object.prototype.propertyIsEnumerable,A0e=(e,t,n)=>t in e?fHt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pHt=(e,t)=>{for(var n in t||(t={}))dHt.call(t,n)&&A0e(e,n,t[n]);if(C0e)for(var n of C0e(t))hHt.call(t,n)&&A0e(e,n,t[n]);return e};function mHt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=pHt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function gHt(e,t,n){const r=kp(e,n);return Array.isArray(r)?eF(e,r.filter((i,s)=>s!==t),n):n}var yHt=Object.defineProperty,I0e=Object.getOwnPropertySymbols,vHt=Object.prototype.hasOwnProperty,_Ht=Object.prototype.propertyIsEnumerable,O0e=(e,t,n)=>t in e?yHt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bHt=(e,t)=>{for(var n in t||(t={}))vHt.call(t,n)&&O0e(e,n,t[n]);if(I0e)for(var n of I0e(t))_Ht.call(t,n)&&O0e(e,n,t[n]);return e};function P0e(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function k0e(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=r5e(`${i}.${t}`,s));const o=bHt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=P0e(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=P0e(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function wHt(e,t,n,r){const i=kp(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),eF(e,s,r)}function R0e(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function EHt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var xHt=Object.defineProperty,SHt=Object.defineProperties,THt=Object.getOwnPropertyDescriptors,$0e=Object.getOwnPropertySymbols,CHt=Object.prototype.hasOwnProperty,AHt=Object.prototype.propertyIsEnumerable,N0e=(e,t,n)=>t in e?xHt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fg=(e,t)=>{for(var n in t||(t={}))CHt.call(t,n)&&N0e(e,n,t[n]);if($0e)for(var n of $0e(t))AHt.call(t,n)&&N0e(e,n,t[n]);return e},ZB=(e,t)=>SHt(e,THt(t));function s5e({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=C.useState(r),[f,d]=C.useState(n),[h,p]=C.useState(e),[m,g]=C.useState(nq(t)),y=C.useRef(e),v=q=>{y.current=q},_=C.useCallback(()=>c({}),[]),w=q=>{const Z=q?fg(fg({},h),q):h;v(Z),d({})},E=C.useCallback(q=>g(Z=>nq(typeof q=="function"?q(Z):q)),[]),S=C.useCallback(()=>g({}),[]),b=C.useCallback(()=>{p(e),S(),v(e),d({}),_()},[]),T=C.useCallback((q,Z)=>E(ue=>ZB(fg({},ue),{[q]:Z})),[]),A=C.useCallback(q=>E(Z=>{if(typeof q!="string")return Z;const ue=fg({},Z);return delete ue[q],ue}),[]),I=C.useCallback(q=>d(Z=>{if(typeof q!="string")return Z;const ue=r5e(q,Z);return delete ue[q],ue}),[]),k=C.useCallback((q,Z)=>{const ue=x0e(q,s);I(q),c(he=>ZB(fg({},he),{[q]:!0})),p(he=>{const fe=eF(q,Z,he);if(ue){const me=kk(q,u,fe);me.hasError?T(q,me.error):A(q)}return fe}),!ue&&i&&T(q,null)},[]),$=C.useCallback(q=>{p(Z=>{const ue=typeof q=="function"?q(Z):q;return fg(fg({},Z),ue)}),i&&S()},[]),P=C.useCallback((q,Z)=>{I(q),p(ue=>cHt(q,Z,ue)),g(ue=>mHt(q,Z,ue))},[]),N=C.useCallback((q,Z)=>{I(q),p(ue=>gHt(q,Z,ue)),g(ue=>k0e(q,Z,ue,-1))},[]),F=C.useCallback((q,Z,ue)=>{I(q),p(he=>wHt(q,Z,ue,he)),g(he=>k0e(q,ue,he,1))},[]),z=C.useCallback(()=>{const q=iq(u,h);return g(q.errors),q},[h,u]),W=C.useCallback(q=>{const Z=kk(q,u,h);return Z.hasError?T(q,Z.error):A(q),Z},[h,u]),V=(q,{type:Z="input",withError:ue=!0,withFocus:he=!0}={})=>{const me={onChange:EHt(_e=>k(q,_e))};return ue&&(me.error=m[q]),Z==="checkbox"?me.checked=kp(q,h):me.value=kp(q,h),he&&(me.onFocus=()=>c(_e=>ZB(fg({},_e),{[q]:!0})),me.onBlur=()=>{if(x0e(q,o)){const _e=kk(q,u,h);_e.hasError?T(q,_e.error):A(q)}}),me},G=(q,Z)=>ue=>{ue==null||ue.preventDefault();const he=z();he.hasErrors?Z==null||Z(he.errors,h,ue):q==null||q(a(h),ue)},M=q=>a(q||h),H=C.useCallback(q=>{q.preventDefault(),b()},[]),Y=q=>{if(q){const ue=kp(q,f);if(typeof ue=="boolean")return ue;const he=kp(q,h),fe=kp(q,y.current);return!XH(he,fe)}return Object.keys(f).length>0?R0e(f):!XH(h,y.current)},L=C.useCallback(q=>R0e(l,q),[l]),B=C.useCallback(q=>q?!kk(q,u,h).hasError:!iq(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:$,setErrors:E,setFieldValue:k,setFieldError:T,clearFieldError:A,clearErrors:S,reset:b,validate:z,validateField:W,reorderListItem:P,removeListItem:N,insertListItem:F,getInputProps:V,onSubmit:G,onReset:H,isDirty:Y,isTouched:L,setTouched:c,setDirty:d,resetTouched:_,resetDirty:w,isValid:B,getTransformedValues:M}}function IHt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function OHt(e){return IHt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const PHt=new URLSearchParams(window.location.search),kHt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?PHt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},RHt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function $Ht(e,t,n){const[r,i]=C.useState(null),s=s5e({initialValues:kHt(e,n),validate:RHt(e)});return C.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function E_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function NHt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return R.jsx(iE.Group,{label:R.jsx(Ka,{text:r,required:i}),...n,error:E_(e,n,s),size:"md",children:s.map(o=>R.jsx(iE,{disabled:t,value:o.value,label:o.label},o.value))})}function DHt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return R.jsx(Kp,{disabled:t,label:R.jsx(Ka,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:E_(e,n,o)})}function MHt({response:e,answer:t}){const{prompt:n}=e;return R.jsxs(R.Fragment,{children:[R.jsx(it,{fz:"md",fw:500,children:R.jsx(Ka,{text:n})}),R.jsx(i1,{children:Array.isArray(t.value)?t.value.map(r=>R.jsx(i1.Item,{children:r},r)):R.jsx(i1.Item,{children:t.value})})]})}function o5e({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return R.jsxs(JD.Group,{name:`radioInput${e.id}`,label:R.jsx(Ka,{text:r,required:i}),size:"md",...n,error:E_(e,n,s),children:[o?R.jsx(it,{mt:-7,children:o}):null,s.map(u=>R.jsx(JD,{disabled:t,value:u.value,label:u.label},u.label)),R.jsx(it,{mt:-7,children:a})]},e.id)}function LHt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return R.jsx(o5e,{disabled:t,response:s,answer:n})}function FHt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return R.jsx(tOe,{disabled:t,placeholder:a,label:R.jsx(Ka,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:E_(e,n)})}function jHt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=E_(e,n);return R.jsx(Ts.Wrapper,{label:R.jsx(Ka,{text:r,required:i}),error:o,size:"md",children:R.jsx(aK,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function BHt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(vx,{disabled:t,placeholder:r,label:R.jsx(Ka,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:E_(e,n)})}function zHt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return R.jsx(oIe,{disabled:t,placeholder:r,label:R.jsx(Ka,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:E_(e,n)})}function UHt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=hY(),o=C.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return R.jsxs(dt,{py:20,sx:{padding:5},children:[e.type==="numerical"&&R.jsx(FHt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&R.jsx(BHt,{response:e,disabled:o,answer:r}),e.type==="longText"&&R.jsx(zHt,{response:e,disabled:o,answer:r}),e.type==="likert"&&R.jsx(LHt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&R.jsx(DHt,{response:e,disabled:o,answer:r}),e.type==="slider"&&R.jsx(jHt,{response:e,disabled:o,answer:r}),e.type==="radio"&&R.jsx(o5e,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&R.jsx(NHt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&R.jsx(MHt,{response:e,answer:r})]})}function iL({config:e,location:t,status:n,style:r}){var w;const i=Yf(),s=jm()[i],o=n==null?void 0:n.answer,a=e,u=C.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=xc(),{updateResponseBlockValidation:c}=Rl(),f=$Ht(u,i,o||{}),[d,h]=C.useState(void 0),[p,m]=C.useState(!1),{iframeAnswers:g,iframeProvenance:y}=xa(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return C.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),C.useEffect(()=>{y&&h(y)},[y]),C.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:tm(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),R.jsxs("div",{style:r,children:[u.map(E=>{var S,b;return R.jsx(j.Fragment,{children:E.hidden?"":R.jsxs(R.Fragment,{children:[R.jsx(UHt,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E}),v&&p&&R.jsx(it,{children:`The correct answer is: ${(b=(S=a.correctAnswer)==null?void 0:S.find(T=>T.id===E.id))==null?void 0:b.answer}`})]})},`${E.id}-${i}`)}),R.jsxs(yr,{position:"right",spacing:"xs",mt:"xl",children:[v&&_&&R.jsx(Fr,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),_&&R.jsx(iHt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function e7({provState:e}){var T;const t=Ih(),n=fo(),r=Yf(),i=jm()[r]||"Notfound",s=t.components[i],o=xJ(),a=Z5(s)&&t.baseComponents?JK({},(T=t.baseComponents)==null?void 0:T[s.baseComponent],s):s,u=a.instruction||"",{instructionLocation:l}=a,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[f,d]=C.useState(null),h=xc(),{setIsRecording:p,setAnalysisTrialName:m}=Rl(),{analysisTrialName:g,analysisProvState:y}=xa(A=>A),v=Vl(),[_,w]=C.useState(null);C.useEffect(()=>{h(m(i))},[h,m,r,i]),C.useEffect(()=>{r&&g&&i!==g&&v(`../${g}`)},[g,i,r,v]),C.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(f&&_&&n.storageEngine.saveAudio(f,_),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(w(null),d(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(I=>{const k=new MediaRecorder(I);k.start(),d(k),h(p(!0))}),w(i)))},[i]),e5e();const{storageEngine:E}=fo(),S=xc(),{setAlertModal:b}=Rl();return C.useEffect(()=>{(E==null?void 0:E.getEngine())!=="firebase"&&S(b({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[b,E,S]),i==="end"?R.jsx(t5e,{}):i==="Notfound"?R.jsx(tHt,{email:t.uiConfig.contactEmail}):R.jsxs(R.Fragment,{children:[l==="aboveStimulus"&&R.jsx(Ka,{text:u}),R.jsx(iL,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),R.jsxs(C.Suspense,{fallback:R.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&R.jsx(cBt,{currentConfig:a}),a.type==="website"&&R.jsx(RCt,{currentConfig:a}),a.type==="image"&&R.jsx(NCt,{currentConfig:a}),a.type==="react-component"&&R.jsx(lBt,{currentConfig:a,provState:y})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&R.jsx(Ka,{text:u}),R.jsx(iL,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function sq(e){const[t]=hY();return R.jsx(dY,{...e,to:{pathname:e.to,search:t.toString()}})}function VHt(e,t=!1){return typeof e=="number"?D0e(e,t):D0e(e.length,t).map(r=>r.map(i=>e[i]))}function D0e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function a5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=a5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function HHt(e,t){const n=tm(e);return a5e(n,t,"root")}function u5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&u5e(s,t,i,o)})}function qHt(e){const t=[];return u5e(e,t,"",0),t}function M0e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return VHt(i.sort(()=>.5-Math.random()),!0)}function WHt(e){const n=qHt(e.sequence).map(s=>({[s]:M0e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=HHt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=M0e(e,o))})}),i}function l5e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=l5e(o,t,n,r),r.includes(o.orderPath))break}return i}function c5e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=c5e(s,r)}}),n}function GHt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function YHt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s}){const o=W4(),a=Vl(),u=Yf(),l=Ih(),[c,{close:f,open:d}]=NT(!1),h=e in l.components&&l.components[e],p=s&&s.components.slice(r).includes(e)?l5e(n,e,r,s.orderPath):-1,m=u===p;return R.jsxs(cr,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:c,offset:20,children:[R.jsx(cr.Target,{children:R.jsx("div",{onMouseEnter:d,onMouseLeave:f,children:R.jsx(KIe,{active:m,style:{lineHeight:"32px",height:"32px"},label:R.jsxs("div",{children:[i&&R.jsx(dyt,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),m?R.jsx("strong",{children:e}):e]}),onClick:()=>a(`/${o}/${p}`),disabled:t})})}),h&&(h.description||h.meta)&&c_.createPortal(R.jsx(cr.Dropdown,{onMouseLeave:f,children:R.jsx(it,{size:"sm",children:R.jsxs("div",{children:[h.description&&R.jsxs("div",{children:[R.jsx(it,{fw:900,display:"inline-block",mr:2,children:"Description:"}),R.jsx(it,{fw:400,component:"span",children:h.description})]}),h.meta&&R.jsxs(it,{children:[R.jsx(it,{fw:"900",component:"span",children:"Task Meta: "}),R.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(h.meta,null,2)}`})]})]})})}),document.body)]})}function f5e({configSequence:e,fullSequence:t,participantSequence:n}){let r=tm(e.components);return n&&(r=GHt(tm(e.components),tm(n.components))),R.jsx("div",{children:r.map((i,s)=>{if(typeof i=="string")return R.jsx(YHt,{step:i,disabled:(n==null?void 0:n.components[s])!==i,fullSequence:t,startIndex:s,interruption:e.interruptions&&e.interruptions.findIndex(l=>l.components.includes(i))>-1||!1,subSequence:n},s);const o=n==null?void 0:n.components.find(l=>typeof l!="string"&&l.orderPath===i.orderPath),a=o?Lu(o).length-c5e(i,o):0,u=Lu(i);return R.jsx(KIe,{label:R.jsxs("div",{style:{opacity:a>0?1:.5},children:["Group:",R.jsxs(pw,{ml:5,children:[a,"/",u.length]}),i.interruptions&&R.jsx(pw,{ml:5,color:"orange",children:(o==null?void 0:o.components.filter(l=>{var c;return typeof l=="string"&&((c=i.interruptions)==null?void 0:c.flatMap(f=>f.components).includes(l))}).length)||0}),R.jsx(it,{c:"dimmed",display:"inline",mr:5,ml:5,children:i.order}),i.order==="random"||i.order==="latinSquare"?R.jsx(cyt,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:R.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:R.jsx(f5e,{configSequence:i,participantSequence:o,fullSequence:t})})},s)})})}function d5e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>d5e(n,`${t}-${r}`))}}function KHt(){const{showStudyBrowser:e,sequence:t}=xa(u=>u),{toggleStudyBrowser:n}=Rl(),r=Yf(),i=jm()[r],s=Ih(),o=xc(),a=C.useMemo(()=>{let u=tm(s.sequence);return u=d5e(u,"root"),u.components.push("end"),u},[s.sequence]);return e||i==="end"&&s.uiConfig.autoDownloadStudy?R.jsxs(k2,{p:"0",width:{base:300},style:{zIndex:0},children:[R.jsxs(k2.Section,{children:[R.jsx(Bh,{style:{position:"absolute",right:"10px",top:"10px",zIndex:5},onClick:()=>o(n())}),R.jsx(it,{size:"md",p:10,weight:"bold",children:"Study Browser"})]}),R.jsx(k2.Section,{grow:!0,component:I2e,children:R.jsx(f5e,{configSequence:a,participantSequence:t,fullSequence:t})})]}):null}var L0e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},XHt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},gZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h5e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):XHt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new QHt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class QHt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JHt=function(e){const t=h5e(e);return gZ.encodeByteArray(t,!0)},sL=function(e){return JHt(e).replace(/\./g,"")},p5e=function(e){try{return gZ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZHt=()=>m5e().__FIREBASE_DEFAULTS__,eqt=()=>{if(typeof process>"u"||typeof L0e>"u")return;const e=L0e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},tqt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&p5e(e[1]);return t&&JSON.parse(t)},tF=()=>{try{return ZHt()||eqt()||tqt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},g5e=e=>{var t,n;return(n=(t=tF())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},nqt=e=>{const t=g5e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},y5e=()=>{var e;return(e=tF())===null||e===void 0?void 0:e.config},v5e=e=>{var t;return(t=tF())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rqt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sL(JSON.stringify(n)),sL(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iqt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jo())}function sqt(){var e;const t=(e=tF())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oqt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function aqt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uqt(){const e=jo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function lqt(){return!sqt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yZ(){try{return typeof indexedDB=="object"}catch{return!1}}function cqt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fqt="FirebaseError";class Wh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=fqt,Object.setPrototypeOf(this,Wh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gx.prototype.create)}}class Gx{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?dqt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Wh(i,a,r)}}function dqt(e,t){return e.replace(hqt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const hqt=/\{\$([^}]+)}/g;function pqt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function TA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(F0e(s)&&F0e(o)){if(!TA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function F0e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function mqt(e,t){const n=new gqt(e,t);return n.subscribe.bind(n)}class gqt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yqt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=t7),i.error===void 0&&(i.error=t7),i.complete===void 0&&(i.complete=t7);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yqt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function t7(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vqt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _qt=1e3,bqt=2,wqt=4*60*60*1e3,Eqt=.5;function xqt(e,t=_qt,n=bqt){const r=t*Math.pow(n,e),i=Math.round(Eqt*r*(Math.random()-.5)*2);return Math.min(wqt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}class Oh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sqt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new SA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Cqt(t))try{this.getOrInitializeService({instanceIdentifier:vv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=vv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=vv){return this.instances.has(t)}getOptions(t=vv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tqt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=vv){return this.component?this.component.multipleInstances?t:vv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tqt(e){return e===vv?void 0:e}function Cqt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aqt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Sqt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Jn||(Jn={}));const Iqt={debug:Jn.DEBUG,verbose:Jn.VERBOSE,info:Jn.INFO,warn:Jn.WARN,error:Jn.ERROR,silent:Jn.SILENT},Oqt=Jn.INFO,Pqt={[Jn.DEBUG]:"log",[Jn.VERBOSE]:"log",[Jn.INFO]:"info",[Jn.WARN]:"warn",[Jn.ERROR]:"error"},kqt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Pqt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class nF{constructor(t){this.name=t,this._logLevel=Oqt,this._logHandler=kqt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Jn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Iqt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Jn.DEBUG,...t),this._logHandler(this,Jn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Jn.VERBOSE,...t),this._logHandler(this,Jn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Jn.INFO,...t),this._logHandler(this,Jn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Jn.WARN,...t),this._logHandler(this,Jn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Jn.ERROR,...t),this._logHandler(this,Jn.ERROR,...t)}}const Rqt=(e,t)=>t.some(n=>e instanceof n);let j0e,B0e;function $qt(){return j0e||(j0e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nqt(){return B0e||(B0e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _5e=new WeakMap,oq=new WeakMap,b5e=new WeakMap,n7=new WeakMap,vZ=new WeakMap;function Dqt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(_0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&_5e.set(n,e)}).catch(()=>{}),vZ.set(t,e),t}function Mqt(e){if(oq.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});oq.set(e,t)}let aq={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return oq.get(e);if(t==="objectStoreNames")return e.objectStoreNames||b5e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Lqt(e){aq=e(aq)}function Fqt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(r7(this),t,...n);return b5e.set(r,t.sort?t.sort():[t]),_0(r)}:Nqt().includes(e)?function(...t){return e.apply(r7(this),t),_0(_5e.get(this))}:function(...t){return _0(e.apply(r7(this),t))}}function jqt(e){return typeof e=="function"?Fqt(e):(e instanceof IDBTransaction&&Mqt(e),Rqt(e,$qt())?new Proxy(e,aq):e)}function _0(e){if(e instanceof IDBRequest)return Dqt(e);if(n7.has(e))return n7.get(e);const t=jqt(e);return t!==e&&(n7.set(e,t),vZ.set(t,e)),t}const r7=e=>vZ.get(e);function Bqt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=_0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_0(o.result),u.oldVersion,u.newVersion,_0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const zqt=["get","getKey","getAll","getAllKeys","count"],Uqt=["put","add","delete","clear"],i7=new Map;function z0e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(i7.get(t))return i7.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Uqt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zqt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return i7.set(t,s),s}Lqt(e=>({...e,get:(t,n,r)=>z0e(t,n)||e.get(t,n,r),has:(t,n)=>!!z0e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vqt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hqt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Hqt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const uq="@firebase/app",U0e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=new nF("@firebase/app"),qqt="@firebase/app-compat",Wqt="@firebase/analytics-compat",Gqt="@firebase/analytics",Yqt="@firebase/app-check-compat",Kqt="@firebase/app-check",Xqt="@firebase/auth",Qqt="@firebase/auth-compat",Jqt="@firebase/database",Zqt="@firebase/database-compat",eWt="@firebase/functions",tWt="@firebase/functions-compat",nWt="@firebase/installations",rWt="@firebase/installations-compat",iWt="@firebase/messaging",sWt="@firebase/messaging-compat",oWt="@firebase/performance",aWt="@firebase/performance-compat",uWt="@firebase/remote-config",lWt="@firebase/remote-config-compat",cWt="@firebase/storage",fWt="@firebase/storage-compat",dWt="@firebase/firestore",hWt="@firebase/vertexai-preview",pWt="@firebase/firestore-compat",mWt="firebase",gWt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq="[DEFAULT]",yWt={[uq]:"fire-core",[qqt]:"fire-core-compat",[Gqt]:"fire-analytics",[Wqt]:"fire-analytics-compat",[Kqt]:"fire-app-check",[Yqt]:"fire-app-check-compat",[Xqt]:"fire-auth",[Qqt]:"fire-auth-compat",[Jqt]:"fire-rtdb",[Zqt]:"fire-rtdb-compat",[eWt]:"fire-fn",[tWt]:"fire-fn-compat",[nWt]:"fire-iid",[rWt]:"fire-iid-compat",[iWt]:"fire-fcm",[sWt]:"fire-fcm-compat",[oWt]:"fire-perf",[aWt]:"fire-perf-compat",[uWt]:"fire-rc",[lWt]:"fire-rc-compat",[cWt]:"fire-gcs",[fWt]:"fire-gcs-compat",[dWt]:"fire-fst",[pWt]:"fire-fst-compat",[hWt]:"fire-vertex","fire-js":"fire-js",[mWt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=new Map,vWt=new Map,cq=new Map;function V0e(e,t){try{e.container.addComponent(t)}catch(n){F1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Tm(e){const t=e.name;if(cq.has(t))return F1.debug(`There were multiple attempts to register component ${t}.`),!1;cq.set(t,e);for(const n of oL.values())V0e(n,e);for(const n of vWt.values())V0e(n,e);return!0}function Yx(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Wt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},b0=new Gx("app","Firebase",_Wt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bWt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=gWt;function w5e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:lq,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw b0.create("bad-app-name",{appName:String(i)});if(n||(n=y5e()),!n)throw b0.create("no-options");const s=oL.get(i);if(s){if(TA(n,s.options)&&TA(r,s.config))return s;throw b0.create("duplicate-app",{appName:i})}const o=new Aqt(i);for(const u of cq.values())o.addComponent(u);const a=new bWt(n,r,o);return oL.set(i,a),a}function _Z(e=lq){const t=oL.get(e);if(!t&&e===lq&&y5e())return w5e();if(!t)throw b0.create("no-app",{appName:e});return t}function Of(e,t,n){var r;let i=(r=yWt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),F1.warn(a.join(" "));return}Tm(new Oh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wWt="firebase-heartbeat-database",EWt=1,CA="firebase-heartbeat-store";let s7=null;function E5e(){return s7||(s7=Bqt(wWt,EWt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(CA)}catch(n){console.warn(n)}}}}).catch(e=>{throw b0.create("idb-open",{originalErrorMessage:e.message})})),s7}async function xWt(e){try{const n=(await E5e()).transaction(CA),r=await n.objectStore(CA).get(x5e(e));return await n.done,r}catch(t){if(t instanceof Wh)F1.warn(t.message);else{const n=b0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});F1.warn(n.message)}}}async function H0e(e,t){try{const r=(await E5e()).transaction(CA,"readwrite");await r.objectStore(CA).put(t,x5e(e)),await r.done}catch(n){if(n instanceof Wh)F1.warn(n.message);else{const r=b0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});F1.warn(r.message)}}}function x5e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SWt=1024,TWt=30*24*60*60*1e3;class CWt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IWt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=q0e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=TWt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=q0e(),{heartbeatsToSend:r,unsentEntries:i}=AWt(this._heartbeatsCache.heartbeats),s=sL(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function q0e(){return new Date().toISOString().substring(0,10)}function AWt(e,t=SWt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),W0e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),W0e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IWt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yZ()?cqt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xWt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return H0e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return H0e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function W0e(e){return sL(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OWt(e){Tm(new Oh("platform-logger",t=>new Vqt(t),"PRIVATE")),Tm(new Oh("heartbeat",t=>new CWt(t),"PRIVATE")),Of(uq,U0e,e),Of(uq,U0e,"esm2017"),Of("fire-js","")}OWt("");function S5e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PWt=S5e,T5e=new Gx("auth","Firebase",S5e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=new nF("@firebase/auth");function kWt(e,...t){aL.logLevel<=Jn.WARN&&aL.warn(`Auth (${x_}): ${e}`,...t)}function d$(e,...t){aL.logLevel<=Jn.ERROR&&aL.error(`Auth (${x_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(e,...t){throw wZ(e,...t)}function Pf(e,...t){return wZ(e,...t)}function bZ(e,t,n){const r=Object.assign(Object.assign({},PWt()),{[t]:n});return new Gx("auth","Firebase",r).create(t,{appName:e.name})}function w0(e){return bZ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function RWt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Ph(e,"argument-error"),bZ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wZ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return T5e.create(e,...t)}function mn(e,t,...n){if(!e)throw wZ(t,...n)}function Bp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d$(t),new Error(t)}function Cm(e,t){e||Bp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function $Wt(){return G0e()==="http:"||G0e()==="https:"}function G0e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NWt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($Wt()||oqt()||"connection"in navigator)?navigator.onLine:!0}function DWt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(t,n){this.shortDelay=t,this.longDelay=n,Cm(n>t,"Short delay should be less than long delay!"),this.isMobile=iqt()||aqt()}get(){return NWt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(e,t){Cm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MWt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LWt=new oO(3e4,6e4);function rF(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Kx(e,t,n,r,i={}){return A5e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=sO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),C5e.fetch()(O5e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function A5e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},MWt),t);try{const i=new FWt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rk(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Rk(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw Rk(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw bZ(e,c,l);Ph(e,c)}}catch(i){if(i instanceof Wh)throw i;Ph(e,"network-request-failed",{message:String(i)})}}async function I5e(e,t,n,r,i={}){const s=await Kx(e,t,n,r,i);return"mfaPendingCredential"in s&&Ph(e,"multi-factor-auth-required",{_serverResponse:s}),s}function O5e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?EZ(e.config,i):`${e.config.apiScheme}://${i}`}class FWt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pf(this.auth,"network-request-failed")),LWt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jWt(e,t){return Kx(e,"POST","/v1/accounts:delete",t)}async function P5e(e,t){return Kx(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function BWt(e,t=!1){const n=es(e),r=await n.getIdToken(t),i=xZ(r);mn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rC(o7(i.auth_time)),issuedAtTime:rC(o7(i.iat)),expirationTime:rC(o7(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function o7(e){return Number(e)*1e3}function xZ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return d$("JWT malformed, contained fewer than 3 sections"),null;try{const i=p5e(n);return i?JSON.parse(i):(d$("Failed to decode base64 JWT payload"),null)}catch(i){return d$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Y0e(e){const t=xZ(e);return mn(t,"internal-error"),mn(typeof t.exp<"u","internal-error"),mn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Wh&&zWt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function zWt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UWt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rC(this.lastLoginAt),this.creationTime=rC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(e){var t;const n=e.auth,r=await e.getIdToken(),i=await AA(e,P5e(n,{idToken:r}));mn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?k5e(s.providerUserInfo):[],a=HWt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dq(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function VWt(e){const t=es(e);await uL(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function HWt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function k5e(e){return e.map(t=>{var{providerId:n}=t,r=YX(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qWt(e,t){const n=await A5e(e,{},async()=>{const r=sO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=O5e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",C5e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WWt(e,t){return Kx(e,"POST","/v2/accounts:revokeToken",rF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){mn(t.idToken,"internal-error"),mn(typeof t.idToken<"u","internal-error"),mn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Y0e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){mn(t.length!==0,"internal-error");const n=Y0e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qWt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new $w;return r&&(mn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(mn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(mn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new $w,this.toJSON())}_performRefresh(){return Bp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(e,t){mn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class zp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=YX(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UWt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dq(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await AA(this,this.stsTokenManager.getToken(this.auth,t));return mn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return BWt(this,t)}reload(){return VWt(this)}_assign(t){this!==t&&(mn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){mn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await uL(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kd(this.auth.app))return Promise.reject(w0(this.auth));const t=await this.getIdToken();return await AA(this,jWt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:b}=n;mn(_&&b,t,"internal-error");const T=$w.fromJSON(this.name,b);mn(typeof _=="string",t,"internal-error"),dg(f,t.name),dg(d,t.name),mn(typeof w=="boolean",t,"internal-error"),mn(typeof E=="boolean",t,"internal-error"),dg(h,t.name),dg(p,t.name),dg(m,t.name),dg(g,t.name),dg(y,t.name),dg(v,t.name);const A=new zp({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(I=>Object.assign({},I))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new $w;i.updateFromServerResponse(n);const s=new zp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await uL(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];mn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?k5e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new $w;a.updateFromIdToken(r);const u=new zp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dq(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0e=new Map;function Up(e){Cm(e instanceof Function,"Expected a class definition");let t=K0e.get(e);return t?(Cm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,K0e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}R5e.type="NONE";const X0e=R5e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(e,t,n){return`firebase:${e}:${t}:${n}`}class Nw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=h$(this.userKey,i.apiKey,s),this.fullPersistenceKey=h$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?zp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Nw(Up(X0e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Up(X0e);const o=h$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=zp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Nw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Nw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(D5e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($5e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(L5e(t))return"Blackberry";if(F5e(t))return"Webos";if(SZ(t))return"Safari";if((t.includes("chrome/")||N5e(t))&&!t.includes("edge/"))return"Chrome";if(M5e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $5e(e=jo()){return/firefox\//i.test(e)}function SZ(e=jo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function N5e(e=jo()){return/crios\//i.test(e)}function D5e(e=jo()){return/iemobile/i.test(e)}function M5e(e=jo()){return/android/i.test(e)}function L5e(e=jo()){return/blackberry/i.test(e)}function F5e(e=jo()){return/webos/i.test(e)}function iF(e=jo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function GWt(e=jo()){var t;return iF(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function YWt(){return uqt()&&document.documentMode===10}function j5e(e=jo()){return iF(e)||M5e(e)||F5e(e)||L5e(e)||/windows phone/i.test(e)||D5e(e)}function KWt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B5e(e,t=[]){let n;switch(e){case"Browser":n=Q0e(jo());break;case"Worker":n=`${Q0e(jo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${x_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XWt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QWt(e,t={}){return Kx(e,"GET","/v2/passwordPolicy",rF(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JWt=6;class ZWt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:JWt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eGt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J0e(this),this.idTokenSubscription=new J0e(this),this.beforeStateQueue=new XWt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=T5e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Up(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Nw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await P5e(this,{idToken:t}),r=await zp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Kd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await uL(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=DWt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kd(this.app))return Promise.reject(w0(this));const n=t?es(t):null;return n&&mn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&mn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kd(this.app)?Promise.reject(w0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kd(this.app)?Promise.reject(w0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Up(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await QWt(this),n=new ZWt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Gx("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WWt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Up(t)||this._popupRedirectResolver;mn(n,this,"argument-error"),this.redirectPersistenceManager=await Nw.create(this,[Up(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return mn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=B5e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&kWt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function aO(e){return es(e)}class J0e{constructor(t){this.auth=t,this.observer=null,this.addObserver=mqt(n=>this.observer=n)}get next(){return mn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TZ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tGt(e){TZ=e}function nGt(e){return TZ.loadJS(e)}function rGt(){return TZ.gapiScript}function iGt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sGt(e,t){const n=Yx(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(TA(s,t??{}))return i;Ph(i,"already-initialized")}return n.initialize({options:t})}function oGt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Up);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function aGt(e,t,n){const r=aO(e);mn(r._canInitEmulator,r,"emulator-config-failed"),mn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=z5e(t),{host:o,port:a}=uGt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),lGt()}function z5e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function uGt(e){const t=z5e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Z0e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Z0e(o)}}}function Z0e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function lGt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Bp("not implemented")}_getIdTokenResponse(t){return Bp("not implemented")}_linkToIdToken(t,n){return Bp("not implemented")}_getReauthenticationResolver(t){return Bp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(e,t){return I5e(e,"POST","/v1/accounts:signInWithIdp",rF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cGt="http://localhost";class j1 extends U5e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new j1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ph("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=YX(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new j1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Dw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Dw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Dw(t,n)}buildRequest(){const t={requestUri:cGt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=sO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO extends CZ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends uO{constructor(){super("facebook.com")}static credential(t){return j1._fromParams({providerId:Mg.PROVIDER_ID,signInMethod:Mg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mg.credentialFromTaggedObject(t)}static credentialFromError(t){return Mg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mg.credential(t.oauthAccessToken)}catch{return null}}}Mg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp extends uO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return j1._fromParams({providerId:Rp.PROVIDER_ID,signInMethod:Rp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Rp.credentialFromTaggedObject(t)}static credentialFromError(t){return Rp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Rp.credential(n,r)}catch{return null}}}Rp.GOOGLE_SIGN_IN_METHOD="google.com";Rp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends uO{constructor(){super("github.com")}static credential(t){return j1._fromParams({providerId:Lg.PROVIDER_ID,signInMethod:Lg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lg.credentialFromTaggedObject(t)}static credentialFromError(t){return Lg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lg.credential(t.oauthAccessToken)}catch{return null}}}Lg.GITHUB_SIGN_IN_METHOD="github.com";Lg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends uO{constructor(){super("twitter.com")}static credential(t,n){return j1._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fg.credential(n,r)}catch{return null}}}Fg.TWITTER_SIGN_IN_METHOD="twitter.com";Fg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fGt(e,t){return I5e(e,"POST","/v1/accounts:signUp",rF(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await zp._fromIdTokenResponse(t,r,i),o=eye(r);return new Z0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=eye(r);return new Z0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function eye(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dGt(e){var t;if(Kd(e.app))return Promise.reject(w0(e));const n=aO(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Z0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await fGt(n,{returnSecureToken:!0}),i=await Z0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL extends Wh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lL.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new lL(t,n,r,i)}}function V5e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lL._fromErrorAndOperation(e,s,t,r):s})}async function hGt(e,t,n=!1){const r=await AA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Z0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pGt(e,t,n=!1){const{auth:r}=e;if(Kd(r.app))return Promise.reject(w0(r));const i="reauthenticate";try{const s=await AA(e,V5e(r,i,t,e),n);mn(s.idToken,r,"internal-error");const o=xZ(s.idToken);mn(o,r,"internal-error");const{sub:a}=o;return mn(e.uid===a,r,"user-mismatch"),Z0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ph(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mGt(e,t,n=!1){if(Kd(e.app))return Promise.reject(w0(e));const r="signIn",i=await V5e(e,r,t),s=await Z0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function gGt(e,t,n,r){return es(e).onIdTokenChanged(t,n,r)}function yGt(e,t,n){return es(e).beforeAuthStateChanged(t,n)}function vGt(e,t,n,r){return es(e).onAuthStateChanged(t,n,r)}function _Gt(e){return es(e).signOut()}const cL="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cL,"1"),this.storage.removeItem(cL),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bGt(){const e=jo();return SZ(e)||iF(e)}const wGt=1e3,EGt=10;class q5e extends H5e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=bGt()&&KWt(),this.fallbackToPolling=j5e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);YWt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,EGt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},wGt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}q5e.type="LOCAL";const xGt=q5e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5e extends H5e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}W5e.type="SESSION";const G5e=W5e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SGt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new sF(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await SGt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sF.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AZ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TGt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=AZ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(){return window}function CGt(e){ah().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5e(){return typeof ah().WorkerGlobalScope<"u"&&typeof ah().importScripts=="function"}async function AGt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IGt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function OGt(){return Y5e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5e="firebaseLocalStorageDb",PGt=1,fL="firebaseLocalStorage",X5e="fbase_key";class lO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oF(e,t){return e.transaction([fL],t?"readwrite":"readonly").objectStore(fL)}function kGt(){const e=indexedDB.deleteDatabase(K5e);return new lO(e).toPromise()}function hq(){const e=indexedDB.open(K5e,PGt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(fL,{keyPath:X5e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(fL)?t(r):(r.close(),await kGt(),t(await hq()))})})}async function tye(e,t,n){const r=oF(e,!0).put({[X5e]:t,value:n});return new lO(r).toPromise()}async function RGt(e,t){const n=oF(e,!1).get(t),r=await new lO(n).toPromise();return r===void 0?null:r.value}function nye(e,t){const n=oF(e,!0).delete(t);return new lO(n).toPromise()}const $Gt=800,NGt=3;class Q5e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>NGt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y5e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sF._getInstance(OGt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await AGt(),!this.activeServiceWorker)return;this.sender=new TGt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||IGt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await hq();return await tye(t,cL,"1"),await nye(t,cL),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tye(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>RGt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>nye(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=oF(i,!1).getAll();return new lO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$Gt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Q5e.type="LOCAL";const DGt=Q5e;new oO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5e(e,t){return t?Up(t):(mn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ extends U5e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Dw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Dw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Dw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function MGt(e){return mGt(e.auth,new IZ(e),e.bypassAuthState)}function LGt(e){const{auth:t,user:n}=e;return mn(n,t,"internal-error"),pGt(n,new IZ(e),e.bypassAuthState)}async function FGt(e){const{auth:t,user:n}=e;return mn(n,t,"internal-error"),hGt(n,new IZ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return MGt;case"linkViaPopup":case"linkViaRedirect":return FGt;case"reauthViaPopup":case"reauthViaRedirect":return LGt;default:Ph(this.auth,"internal-error")}}resolve(t){Cm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Cm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jGt=new oO(2e3,1e4);async function BGt(e,t,n){if(Kd(e.app))return Promise.reject(Pf(e,"operation-not-supported-in-this-environment"));const r=aO(e);RWt(e,t,CZ);const i=J5e(r,n);return new Qv(r,"signInViaPopup",t,i).executeNotNull()}class Qv extends Z5e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Qv.currentPopupAction&&Qv.currentPopupAction.cancel(),Qv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return mn(t,this.auth,"internal-error"),t}async onExecution(){Cm(this.filter.length===1,"Popup operations only handle one event");const t=AZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Pf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,jGt.get())};t()}}Qv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zGt="pendingRedirect",p$=new Map;class UGt extends Z5e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=p$.get(this.auth._key());if(!t){try{const r=await VGt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}p$.set(this.auth._key(),t)}return this.bypassAuthState||p$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VGt(e,t){const n=WGt(t),r=qGt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HGt(e,t){p$.set(e._key(),t)}function qGt(e){return Up(e._redirectPersistence)}function WGt(e){return h$(zGt,e.config.apiKey,e.name)}async function GGt(e,t,n=!1){if(Kd(e.app))return Promise.reject(w0(e));const r=aO(e),i=J5e(r,t),o=await new UGt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YGt=10*60*1e3;class KGt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!XGt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!eFe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=YGt&&this.cachedEventUids.clear(),this.cachedEventUids.has(rye(t))}saveEventToCache(t){this.cachedEventUids.add(rye(t)),this.lastProcessedEventTime=Date.now()}}function rye(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function eFe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function XGt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eFe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QGt(e,t={}){return Kx(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JGt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZGt=/^https?/;async function eYt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await QGt(e);for(const n of t)try{if(tYt(n))return}catch{}Ph(e,"unauthorized-domain")}function tYt(e){const t=fq(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZGt.test(n))return!1;if(JGt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nYt=new oO(3e4,6e4);function iye(){const e=ah().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function rYt(e){return new Promise((t,n)=>{var r,i,s;function o(){iye(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{iye(),n(Pf(e,"network-request-failed"))},timeout:nYt.get()})}if(!((i=(r=ah().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=ah().gapi)===null||s===void 0)&&s.load)o();else{const a=iGt("iframefcb");return ah()[a]=()=>{gapi.load?o():n(Pf(e,"network-request-failed"))},nGt(`${rGt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw m$=null,t})}let m$=null;function iYt(e){return m$=m$||rYt(e),m$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sYt=new oO(5e3,15e3),oYt="__/auth/iframe",aYt="emulator/auth/iframe",uYt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lYt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cYt(e){const t=e.config;mn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?EZ(t,aYt):`https://${e.config.authDomain}/${oYt}`,r={apiKey:t.apiKey,appName:e.name,v:x_},i=lYt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${sO(r).slice(1)}`}async function fYt(e){const t=await iYt(e),n=ah().gapi;return mn(n,e,"internal-error"),t.open({where:document.body,url:cYt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uYt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pf(e,"network-request-failed"),a=ah().setTimeout(()=>{s(o)},sYt.get());function u(){ah().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dYt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hYt=500,pYt=600,mYt="_blank",gYt="http://localhost";class sye{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yYt(e,t,n,r=hYt,i=pYt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},dYt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=jo().toLowerCase();n&&(a=N5e(l)?mYt:n),$5e(l)&&(t=t||gYt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(GWt(l)&&a!=="_self")return vYt(t||"",a),new sye(null);const f=window.open(t||"",a,c);mn(f,e,"popup-blocked");try{f.focus()}catch{}return new sye(f)}function vYt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Yt="__/auth/handler",bYt="emulator/auth/handler",wYt=encodeURIComponent("fac");async function oye(e,t,n,r,i,s){mn(e.config.authDomain,e,"auth-domain-config-required"),mn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:x_,eventId:i};if(t instanceof CZ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pqt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof uO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${wYt}=${encodeURIComponent(u)}`:"";return`${EYt(e)}?${sO(a).slice(1)}${l}`}function EYt({config:e}){return e.emulator?EZ(e,bYt):`https://${e.authDomain}/${_Yt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a7="webStorageSupport";class xYt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G5e,this._completeRedirectFn=GGt,this._overrideRedirectResult=HGt}async _openPopup(t,n,r,i){var s;Cm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await oye(t,n,r,fq(),i);return yYt(t,o,AZ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await oye(t,n,r,fq(),i);return CGt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Cm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await fYt(t),r=new KGt(t);return n.register("authEvent",i=>(mn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(a7,{type:a7},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[a7];o!==void 0&&n(!!o),Ph(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=eYt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return j5e()||SZ()||iF()}}const SYt=xYt;var aye="@firebase/auth",uye="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TYt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CYt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AYt(e){Tm(new Oh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:B5e(e)},l=new eGt(r,i,s,u);return oGt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Tm(new Oh("auth-internal",t=>{const n=aO(t.getProvider("auth").getImmediate());return(r=>new TYt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Of(aye,uye,CYt(e)),Of(aye,uye,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IYt=5*60,OYt=v5e("authIdTokenMaxAge")||IYt;let lye=null;const PYt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OYt)return;const i=n==null?void 0:n.token;lye!==i&&(lye=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function dL(e=_Z()){const t=Yx(e,"auth");if(t.isInitialized())return t.getImmediate();const n=sGt(e,{popupRedirectResolver:SYt,persistence:[DGt,xGt,G5e]}),r=v5e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=PYt(s.toString());yGt(n,o,()=>o(n.currentUser)),gGt(n,a=>o(a))}}const i=g5e("auth");return i&&aGt(n,`http://${i}`),n}function kYt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}tGt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Pf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kYt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AYt("Browser");var RYt="firebase",$Yt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Of(RYt,$Yt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tFe="firebasestorage.googleapis.com",nFe="storageBucket",NYt=2*60*1e3,DYt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Wh{constructor(t,n,r=0){super(u7(t),`Firebase Storage: ${n} (${u7(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return u7(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function u7(e){return"storage/"+e}function OZ(){const e="An unknown error occurred, please check the error payload for server response.";return new ns(ts.UNKNOWN,e)}function MYt(e){return new ns(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function LYt(e){return new ns(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function FYt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ns(ts.UNAUTHENTICATED,e)}function jYt(){return new ns(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BYt(e){return new ns(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function zYt(){return new ns(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UYt(){return new ns(ts.CANCELED,"User canceled the upload/download.")}function VYt(e){return new ns(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function HYt(e){return new ns(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function qYt(){return new ns(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nFe+"' property when initializing the app?")}function WYt(){return new ns(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function GYt(){return new ns(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function YYt(e){return new ns(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pq(e){return new ns(ts.INVALID_ARGUMENT,e)}function rFe(){return new ns(ts.APP_DELETED,"The Firebase app was deleted.")}function KYt(e){return new ns(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iC(e,t){return new ns(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function iT(e){throw new ns(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=_l.makeFromUrl(t,n)}catch{return new _l(t,"")}if(r.path==="")return r;throw HYt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===tFe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const E=_[w],S=E.regex.exec(t);if(S){const b=S[E.indices.bucket];let T=S[E.indices.path];T||(T=""),r=new _l(b,T),E.postModify(r);break}}if(r==null)throw VYt(t);return r}}class XYt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QYt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function JYt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZYt(e){return e!==void 0}function eKt(e){return typeof e=="object"&&!Array.isArray(e)}function PZ(e){return typeof e=="string"||e instanceof String}function cye(e){return kZ()&&e instanceof Blob}function kZ(){return typeof Blob<"u"}function fye(e,t,n,r){if(r<t)throw pq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw pq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RZ(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function iFe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(c1||(c1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tKt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nKt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new $k(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===c1.NO_ERROR,u=s.getStatus();if(!a||tKt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===c1.ABORT;r(!1,new $k(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new $k(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());ZYt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=OZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?rFe():UYt();o(u)}else{const u=zYt();o(u)}};this.canceled_?n(!1,new $k(!1,null,!0)):this.backoffId_=QYt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&JYt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $k{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function rKt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function iKt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function sKt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function oKt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function aKt(e,t,n,r,i,s,o=!0){const a=iFe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return sKt(l,t),rKt(l,n),iKt(l,s),oKt(l,r),new nKt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uKt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lKt(...e){const t=uKt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(kZ())return new Blob(e);throw new ns(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function cKt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fKt(e){if(typeof atob>"u")throw YYt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class l7{constructor(t,n){this.data=t,this.contentType=n||null}}function dKt(e,t){switch(e){case Xd.RAW:return new l7(sFe(t));case Xd.BASE64:case Xd.BASE64URL:return new l7(oFe(e,t));case Xd.DATA_URL:return new l7(pKt(t),mKt(t))}throw OZ()}function sFe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function hKt(e){let t;try{t=decodeURIComponent(e)}catch{throw iC(Xd.DATA_URL,"Malformed data URL.")}return sFe(t)}function oFe(e,t){switch(e){case Xd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw iC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw iC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=fKt(t)}catch(i){throw i.message.includes("polyfill")?i:iC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class aFe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw iC(Xd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=gKt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function pKt(e){const t=new aFe(e);return t.base64?oFe(Xd.BASE64,t.rest):hKt(t.rest)}function mKt(e){return new aFe(e).contentType}function gKt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t,n){let r=0,i="";cye(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cye(this.data_)){const r=this.data_,i=cKt(r,t,n);return i===null?null:new jg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new jg(r,!0)}}static getBlob(...t){if(kZ()){const n=t.map(r=>r instanceof jg?r.data_:r);return new jg(lKt.apply(null,n))}else{const n=t.map(o=>PZ(o)?dKt(Xd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new jg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uFe(e){let t;try{t=JSON.parse(e)}catch{return null}return eKt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yKt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function vKt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function lFe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Kt(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||_Kt}}let Nk=null;function bKt(e){return!PZ(e)||e.length<2?e:lFe(e)}function cFe(){if(Nk)return Nk;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return bKt(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),Nk=e,Nk}function wKt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new _l(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function EKt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return wKt(r,e),r}function fFe(e,t,n){const r=uFe(t);return r===null?null:EKt(e,r,n)}function xKt(e,t,n,r){const i=uFe(t);if(i===null||!PZ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=RZ(d,n,r),p=iFe({alt:"media",token:l});return h+p})[0]}function SKt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class dFe{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hFe(e){if(!e)throw OZ()}function TKt(e,t){function n(r,i){const s=fFe(e,i,t);return hFe(s!==null),s}return n}function CKt(e,t){function n(r,i){const s=fFe(e,i,t);return hFe(s!==null),xKt(s,i,e.host,e._protocol)}return n}function pFe(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=jYt():i=FYt():n.getStatus()===402?i=LYt(e.bucket):n.getStatus()===403?i=BYt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function AKt(e){const t=pFe(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=MYt(e.path)),s.serverResponse=i.serverResponse,s}return n}function IKt(e,t,n){const r=t.fullServerUrl(),i=RZ(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new dFe(i,s,CKt(e,n),o);return a.errorHandler=AKt(t),a}function OKt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function PKt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=OKt(null,t)),r}function kKt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=PKt(t,r,i),c=SKt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=jg.getBlob(f,r,d);if(h===null)throw WYt();const p={name:l.fullPath},m=RZ(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new dFe(m,g,TKt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=pFe(t),v}class RKt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=c1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=c1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=c1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw iT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw iT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw iT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw iT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw iT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class $Kt extends RKt{initXhr(){this.xhr_.responseType="text"}}function mFe(){return new $Kt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(t,n){this._service=t,n instanceof _l?this._location=n:this._location=_l.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new B1(t,n)}get root(){const t=new _l(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lFe(this._location.path)}get storage(){return this._service}get parent(){const t=yKt(this._location.path);if(t===null)return null;const n=new _l(this._location.bucket,t);return new B1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw KYt(t)}}function NKt(e,t,n){e._throwIfRoot("uploadBytes");const r=kKt(e.storage,e._location,cFe(),new jg(t,!0),n);return e.storage.makeRequestWithTokens(r,mFe).then(i=>({metadata:i,ref:e}))}function DKt(e){e._throwIfRoot("getDownloadURL");const t=IKt(e.storage,e._location,cFe());return e.storage.makeRequestWithTokens(t,mFe).then(n=>{if(n===null)throw GYt();return n})}function MKt(e,t){const n=vKt(e._location.path,t),r=new _l(e._location.bucket,n);return new B1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LKt(e){return/^[A-Za-z]+:\/\//.test(e)}function FKt(e,t){return new B1(e,t)}function gFe(e,t){if(e instanceof $Z){const n=e;if(n._bucket==null)throw qYt();const r=new B1(n,n._bucket);return t!=null?gFe(r,t):r}else return t!==void 0?MKt(e,t):e}function jKt(e,t){if(t&&LKt(t)){if(e instanceof $Z)return FKt(e,t);throw pq("To use ref(service, url), the first argument must be a Storage instance.")}else return gFe(e,t)}function dye(e,t){const n=t==null?void 0:t[nFe];return n==null?null:_l.makeFromBucketSpec(n,e)}function BKt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:rqt(i,e.app.options.projectId))}class $Z{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=tFe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NYt,this._maxUploadRetryTime=DYt,this._requests=new Set,i!=null?this._bucket=_l.makeFromBucketSpec(i,this._host):this._bucket=dye(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=_l.makeFromBucketSpec(this._url,t):this._bucket=dye(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){fye("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){fye("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new B1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new XYt(rFe());{const o=aKt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const hye="@firebase/storage",pye="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yFe="storage";function mye(e,t,n){return e=es(e),NKt(e,t,n)}function sT(e){return e=es(e),DKt(e)}function hg(e,t){return e=es(e),jKt(e,t)}function pg(e=_Z(),t){e=es(e);const r=Yx(e,yFe).getImmediate({identifier:t}),i=nqt("storage");return i&&zKt(r,...i),r}function zKt(e,t,n,r={}){BKt(e,t,n,r)}function UKt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new $Z(n,r,i,t,x_)}function VKt(){Tm(new Oh(yFe,UKt,"PUBLIC").setMultipleInstances(!0)),Of(hye,pye,""),Of(hye,pye,"esm2017")}VKt();var gye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f1,vFe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,T){function A(){}A.prototype=T.prototype,b.D=T.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(I,k,$){for(var P=Array(arguments.length-2),N=2;N<arguments.length;N++)P[N-2]=arguments[N];return T.prototype[k].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,T,A){A||(A=0);var I=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)I[k]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(k=0;16>k;++k)I[k]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=b.g[0],A=b.g[1],k=b.g[2];var $=b.g[3],P=T+($^A&(k^$))+I[0]+3614090360&4294967295;T=A+(P<<7&4294967295|P>>>25),P=$+(k^T&(A^k))+I[1]+3905402710&4294967295,$=T+(P<<12&4294967295|P>>>20),P=k+(A^$&(T^A))+I[2]+606105819&4294967295,k=$+(P<<17&4294967295|P>>>15),P=A+(T^k&($^T))+I[3]+3250441966&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+($^A&(k^$))+I[4]+4118548399&4294967295,T=A+(P<<7&4294967295|P>>>25),P=$+(k^T&(A^k))+I[5]+1200080426&4294967295,$=T+(P<<12&4294967295|P>>>20),P=k+(A^$&(T^A))+I[6]+2821735955&4294967295,k=$+(P<<17&4294967295|P>>>15),P=A+(T^k&($^T))+I[7]+4249261313&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+($^A&(k^$))+I[8]+1770035416&4294967295,T=A+(P<<7&4294967295|P>>>25),P=$+(k^T&(A^k))+I[9]+2336552879&4294967295,$=T+(P<<12&4294967295|P>>>20),P=k+(A^$&(T^A))+I[10]+4294925233&4294967295,k=$+(P<<17&4294967295|P>>>15),P=A+(T^k&($^T))+I[11]+2304563134&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+($^A&(k^$))+I[12]+1804603682&4294967295,T=A+(P<<7&4294967295|P>>>25),P=$+(k^T&(A^k))+I[13]+4254626195&4294967295,$=T+(P<<12&4294967295|P>>>20),P=k+(A^$&(T^A))+I[14]+2792965006&4294967295,k=$+(P<<17&4294967295|P>>>15),P=A+(T^k&($^T))+I[15]+1236535329&4294967295,A=k+(P<<22&4294967295|P>>>10),P=T+(k^$&(A^k))+I[1]+4129170786&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^k&(T^A))+I[6]+3225465664&4294967295,$=T+(P<<9&4294967295|P>>>23),P=k+(T^A&($^T))+I[11]+643717713&4294967295,k=$+(P<<14&4294967295|P>>>18),P=A+($^T&(k^$))+I[0]+3921069994&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(k^$&(A^k))+I[5]+3593408605&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^k&(T^A))+I[10]+38016083&4294967295,$=T+(P<<9&4294967295|P>>>23),P=k+(T^A&($^T))+I[15]+3634488961&4294967295,k=$+(P<<14&4294967295|P>>>18),P=A+($^T&(k^$))+I[4]+3889429448&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(k^$&(A^k))+I[9]+568446438&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^k&(T^A))+I[14]+3275163606&4294967295,$=T+(P<<9&4294967295|P>>>23),P=k+(T^A&($^T))+I[3]+4107603335&4294967295,k=$+(P<<14&4294967295|P>>>18),P=A+($^T&(k^$))+I[8]+1163531501&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(k^$&(A^k))+I[13]+2850285829&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^k&(T^A))+I[2]+4243563512&4294967295,$=T+(P<<9&4294967295|P>>>23),P=k+(T^A&($^T))+I[7]+1735328473&4294967295,k=$+(P<<14&4294967295|P>>>18),P=A+($^T&(k^$))+I[12]+2368359562&4294967295,A=k+(P<<20&4294967295|P>>>12),P=T+(A^k^$)+I[5]+4294588738&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^k)+I[8]+2272392833&4294967295,$=T+(P<<11&4294967295|P>>>21),P=k+($^T^A)+I[11]+1839030562&4294967295,k=$+(P<<16&4294967295|P>>>16),P=A+(k^$^T)+I[14]+4259657740&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(A^k^$)+I[1]+2763975236&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^k)+I[4]+1272893353&4294967295,$=T+(P<<11&4294967295|P>>>21),P=k+($^T^A)+I[7]+4139469664&4294967295,k=$+(P<<16&4294967295|P>>>16),P=A+(k^$^T)+I[10]+3200236656&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(A^k^$)+I[13]+681279174&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^k)+I[0]+3936430074&4294967295,$=T+(P<<11&4294967295|P>>>21),P=k+($^T^A)+I[3]+3572445317&4294967295,k=$+(P<<16&4294967295|P>>>16),P=A+(k^$^T)+I[6]+76029189&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(A^k^$)+I[9]+3654602809&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^k)+I[12]+3873151461&4294967295,$=T+(P<<11&4294967295|P>>>21),P=k+($^T^A)+I[15]+530742520&4294967295,k=$+(P<<16&4294967295|P>>>16),P=A+(k^$^T)+I[2]+3299628645&4294967295,A=k+(P<<23&4294967295|P>>>9),P=T+(k^(A|~$))+I[0]+4096336452&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~k))+I[7]+1126891415&4294967295,$=T+(P<<10&4294967295|P>>>22),P=k+(T^($|~A))+I[14]+2878612391&4294967295,k=$+(P<<15&4294967295|P>>>17),P=A+($^(k|~T))+I[5]+4237533241&4294967295,A=k+(P<<21&4294967295|P>>>11),P=T+(k^(A|~$))+I[12]+1700485571&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~k))+I[3]+2399980690&4294967295,$=T+(P<<10&4294967295|P>>>22),P=k+(T^($|~A))+I[10]+4293915773&4294967295,k=$+(P<<15&4294967295|P>>>17),P=A+($^(k|~T))+I[1]+2240044497&4294967295,A=k+(P<<21&4294967295|P>>>11),P=T+(k^(A|~$))+I[8]+1873313359&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~k))+I[15]+4264355552&4294967295,$=T+(P<<10&4294967295|P>>>22),P=k+(T^($|~A))+I[6]+2734768916&4294967295,k=$+(P<<15&4294967295|P>>>17),P=A+($^(k|~T))+I[13]+1309151649&4294967295,A=k+(P<<21&4294967295|P>>>11),P=T+(k^(A|~$))+I[4]+4149444226&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~k))+I[11]+3174756917&4294967295,$=T+(P<<10&4294967295|P>>>22),P=k+(T^($|~A))+I[2]+718787259&4294967295,k=$+(P<<15&4294967295|P>>>17),P=A+($^(k|~T))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+$&4294967295}r.prototype.u=function(b,T){T===void 0&&(T=b.length);for(var A=T-this.blockSize,I=this.B,k=this.h,$=0;$<T;){if(k==0)for(;$<=A;)i(this,b,$),$+=this.blockSize;if(typeof b=="string"){for(;$<T;)if(I[k++]=b.charCodeAt($++),k==this.blockSize){i(this,I),k=0;break}}else for(;$<T;)if(I[k++]=b[$++],k==this.blockSize){i(this,I),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;var A=8*this.o;for(T=b.length-8;T<b.length;++T)b[T]=A&255,A/=256;for(this.u(b),b=Array(16),T=A=0;4>T;++T)for(var I=0;32>I;I+=8)b[A++]=this.g[T]>>>I&255;return b};function s(b,T){var A=a;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=T(b)}function o(b,T){this.h=T;for(var A=[],I=!0,k=b.length-1;0<=k;k--){var $=b[k]|0;I&&$==T||(A[k]=$,I=!1)}this.g=A}var a={};function u(b){return-128<=b&&128>b?s(b,function(T){return new o([T|0],0>T?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(l(-b));for(var T=[],A=1,I=0;b>=A;I++)T[I]=b/A|0,A*=4294967296;return new o(T,0)}function c(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return g(c(b.substring(1),T));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(T,8)),I=f,k=0;k<b.length;k+=8){var $=Math.min(8,b.length-k),P=parseInt(b.substring(k,k+$),T);8>$?($=l(Math.pow(T,$)),I=I.j($).add(l(P))):(I=I.j(A),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var b=0,T=1,A=0;A<this.g.length;A++){var I=this.i(A);b+=(0<=I?I:4294967296+I)*T,T*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(p(this))return"0";if(m(this))return"-"+g(this).toString(b);for(var T=l(Math.pow(b,6)),A=this,I="";;){var k=w(A,T).g;A=y(A,k.j(T));var $=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=k,p(A))return $+I;for(;6>$.length;)$="0"+$;I=$+I}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function p(b){if(b.h!=0)return!1;for(var T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function m(b){return b.h==-1}e.l=function(b){return b=y(this,b),m(b)?-1:p(b)?0:1};function g(b){for(var T=b.g.length,A=[],I=0;I<T;I++)A[I]=~b.g[I];return new o(A,~b.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0,k=0;k<=T;k++){var $=I+(this.i(k)&65535)+(b.i(k)&65535),P=($>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);I=P>>>16,$&=65535,P&=65535,A[k]=P<<16|$}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(b,T){return b.add(g(T))}e.j=function(b){if(p(this)||p(b))return f;if(m(this))return m(b)?g(this).j(g(b)):g(g(this).j(b));if(m(b))return g(this.j(g(b)));if(0>this.l(h)&&0>b.l(h))return l(this.m()*b.m());for(var T=this.g.length+b.g.length,A=[],I=0;I<2*T;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<b.g.length;k++){var $=this.i(I)>>>16,P=this.i(I)&65535,N=b.i(k)>>>16,F=b.i(k)&65535;A[2*I+2*k]+=P*F,v(A,2*I+2*k),A[2*I+2*k+1]+=$*F,v(A,2*I+2*k+1),A[2*I+2*k+1]+=P*N,v(A,2*I+2*k+1),A[2*I+2*k+2]+=$*N,v(A,2*I+2*k+2)}for(I=0;I<T;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=T;I<2*T;I++)A[I]=0;return new o(A,0)};function v(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function _(b,T){this.g=b,this.h=T}function w(b,T){if(p(T))throw Error("division by zero");if(p(b))return new _(f,f);if(m(b))return T=w(g(b),T),new _(g(T.g),g(T.h));if(m(T))return T=w(b,g(T)),new _(g(T.g),T.h);if(30<b.g.length){if(m(b)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var A=d,I=T;0>=I.l(b);)A=E(A),I=E(I);var k=S(A,1),$=S(I,1);for(I=S(I,2),A=S(A,2);!p(I);){var P=$.add(I);0>=P.l(b)&&(k=k.add(A),$=P),I=S(I,1),A=S(A,1)}return T=y(b,k.j(T)),new _(k,T)}for(k=f;0<=b.l(T);){for(A=Math.max(1,Math.floor(b.m()/T.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),$=l(A),P=$.j(T);m(P)||0<P.l(b);)A-=I,$=l(A),P=$.j(T);p($)&&($=d),k=k.add($),b=y(b,P)}return new _(k,b)}e.A=function(b){return w(this,b).h},e.and=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)&b.i(I);return new o(A,this.h&b.h)},e.or=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)|b.i(I);return new o(A,this.h|b.h)},e.xor=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],I=0;I<T;I++)A[I]=this.i(I)^b.i(I);return new o(A,this.h^b.h)};function E(b){for(var T=b.g.length+1,A=[],I=0;I<T;I++)A[I]=b.i(I)<<1|b.i(I-1)>>>31;return new o(A,b.h)}function S(b,T){var A=T>>5;T%=32;for(var I=b.g.length-A,k=[],$=0;$<I;$++)k[$]=0<T?b.i($+A)>>>T|b.i($+A+1)<<32-T:b.i($+A);return new o(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vFe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,f1=o}).apply(typeof gye<"u"?gye:typeof self<"u"?self:typeof window<"u"?window:{});var Dk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _Fe,bFe,t2,wFe,g$,mq,EFe,xFe,SFe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,D,U){return x==Array.prototype||x==Object.prototype||(x[D]=U.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dk=="object"&&Dk];for(var D=0;D<x.length;++D){var U=x[D];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var r=n(this);function i(x,D){if(D)e:{var U=r;x=x.split(".");for(var J=0;J<x.length-1;J++){var be=x[J];if(!(be in U))break e;U=U[be]}x=x[x.length-1],J=U[x],D=D(J),D!=J&&D!=null&&t(U,x,{configurable:!0,writable:!0,value:D})}}function s(x,D){x instanceof String&&(x+="");var U=0,J=!1,be={next:function(){if(!J&&U<x.length){var Ie=U++;return{value:D(Ie,x[Ie]),done:!1}}return J=!0,{done:!0,value:void 0}}};return be[Symbol.iterator]=function(){return be},be}i("Array.prototype.values",function(x){return x||function(){return s(this,function(D,U){return U})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var D=typeof x;return D=D!="object"?D:x?Array.isArray(x)?"array":D:"null",D=="array"||D=="object"&&typeof x.length=="number"}function l(x){var D=typeof x;return D=="object"&&x!=null||D=="function"}function c(x,D,U){return x.call.apply(x.bind,arguments)}function f(x,D,U){if(!x)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(be,J),x.apply(D,be)}}return function(){return x.apply(D,arguments)}}function d(x,D,U){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,D){var U=Array.prototype.slice.call(arguments,1);return function(){var J=U.slice();return J.push.apply(J,arguments),x.apply(this,J)}}function p(x,D){function U(){}U.prototype=D.prototype,x.aa=D.prototype,x.prototype=new U,x.prototype.constructor=x,x.Qb=function(J,be,Ie){for(var ft=Array(arguments.length-2),ni=2;ni<arguments.length;ni++)ft[ni-2]=arguments[ni];return D.prototype[be].apply(J,ft)}}function m(x){const D=x.length;if(0<D){const U=Array(D);for(let J=0;J<D;J++)U[J]=x[J];return U}return[]}function g(x,D){for(let U=1;U<arguments.length;U++){const J=arguments[U];if(u(J)){const be=x.length||0,Ie=J.length||0;x.length=be+Ie;for(let ft=0;ft<Ie;ft++)x[be+ft]=J[ft]}else x.push(J)}}class y{constructor(D,U){this.i=D,this.j=U,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function v(x){return/^[\s\xa0]*$/.test(x)}function _(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function S(x,D,U){for(const J in x)D.call(U,x[J],J,x)}function b(x,D){for(const U in x)D.call(void 0,x[U],U,x)}function T(x){const D={};for(const U in x)D[U]=x[U];return D}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(x,D){let U,J;for(let be=1;be<arguments.length;be++){J=arguments[be];for(U in J)x[U]=J[U];for(let Ie=0;Ie<A.length;Ie++)U=A[Ie],Object.prototype.hasOwnProperty.call(J,U)&&(x[U]=J[U])}}function k(x){var D=1;x=x.split(":");const U=[];for(;0<D&&x.length;)U.push(x.shift()),D--;return x.length&&U.push(x.join(":")),U}function $(x){a.setTimeout(()=>{throw x},0)}function P(){var x=G;let D=null;return x.g&&(D=x.g,x.g=x.g.next,x.g||(x.h=null),D.next=null),D}class N{constructor(){this.h=this.g=null}add(D,U){const J=F.get();J.set(D,U),this.h?this.h.next=J:this.g=J,this.h=J}}var F=new y(()=>new z,x=>x.reset());class z{constructor(){this.next=this.g=this.h=null}set(D,U){this.h=D,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let W,V=!1,G=new N,M=()=>{const x=a.Promise.resolve(void 0);W=()=>{x.then(H)}};var H=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(U){$(U)}var D=F;D.j(x),100>D.h&&(D.h++,x.next=D.g,D.g=x)}V=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(x,D){this.type=x,this.g=this.target=D,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,D=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const U=()=>{};a.addEventListener("test",U,D),a.removeEventListener("test",U,D)}catch{}return x}();function q(x,D){if(L.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var U=this.type=x.type,J=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=D,D=x.relatedTarget){if(E){e:{try{w(D.nodeName);var be=!0;break e}catch{}be=!1}be||(D=null)}}else U=="mouseover"?D=x.fromElement:U=="mouseout"&&(D=x.toElement);this.relatedTarget=D,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:Z[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&q.aa.h.call(this)}}p(q,L);var Z={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(x,D,U,J,be){this.listener=x,this.proxy=null,this.src=D,this.type=U,this.capture=!!J,this.ha=be,this.key=++he,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function _e(x){this.src=x,this.g={},this.h=0}_e.prototype.add=function(x,D,U,J,be){var Ie=x.toString();x=this.g[Ie],x||(x=this.g[Ie]=[],this.h++);var ft=Be(x,D,J,be);return-1<ft?(D=x[ft],U||(D.fa=!1)):(D=new fe(D,this.src,Ie,!!J,be),D.fa=U,x.push(D)),D};function ge(x,D){var U=D.type;if(U in x.g){var J=x.g[U],be=Array.prototype.indexOf.call(J,D,void 0),Ie;(Ie=0<=be)&&Array.prototype.splice.call(J,be,1),Ie&&(me(D),x.g[U].length==0&&(delete x.g[U],x.h--))}}function Be(x,D,U,J){for(var be=0;be<x.length;++be){var Ie=x[be];if(!Ie.da&&Ie.listener==D&&Ie.capture==!!U&&Ie.ha==J)return be}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),ct={};function Oe(x,D,U,J,be){if(Array.isArray(D)){for(var Ie=0;Ie<D.length;Ie++)Oe(x,D[Ie],U,J,be);return null}return U=lt(U),x&&x[ue]?x.K(D,U,l(J)?!!J.capture:!!J,be):Re(x,D,U,!1,J,be)}function Re(x,D,U,J,be,Ie){if(!D)throw Error("Invalid event type");var ft=l(be)?!!be.capture:!!be,ni=gt(x);if(ni||(x[Me]=ni=new _e(x)),U=ni.add(D,U,J,ft,Ie),U.proxy)return U;if(J=Ye(),U.proxy=J,J.src=x,J.listener=U,x.addEventListener)B||(be=ft),be===void 0&&(be=!1),x.addEventListener(D.toString(),J,be);else if(x.attachEvent)x.attachEvent(Je(D.toString()),J);else if(x.addListener&&x.removeListener)x.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Ye(){function x(U){return D.call(x.src,x.listener,U)}const D=Ge;return x}function Ut(x,D,U,J,be){if(Array.isArray(D))for(var Ie=0;Ie<D.length;Ie++)Ut(x,D[Ie],U,J,be);else J=l(J)?!!J.capture:!!J,U=lt(U),x&&x[ue]?(x=x.i,D=String(D).toString(),D in x.g&&(Ie=x.g[D],U=Be(Ie,U,J,be),-1<U&&(me(Ie[U]),Array.prototype.splice.call(Ie,U,1),Ie.length==0&&(delete x.g[D],x.h--)))):x&&(x=gt(x))&&(D=x.g[D.toString()],x=-1,D&&(x=Be(D,U,J,be)),(U=-1<x?D[x]:null)&&Ft(U))}function Ft(x){if(typeof x!="number"&&x&&!x.da){var D=x.src;if(D&&D[ue])ge(D.i,x);else{var U=x.type,J=x.proxy;D.removeEventListener?D.removeEventListener(U,J,x.capture):D.detachEvent?D.detachEvent(Je(U),J):D.addListener&&D.removeListener&&D.removeListener(J),(U=gt(D))?(ge(U,x),U.h==0&&(U.src=null,D[Me]=null)):me(x)}}}function Je(x){return x in ct?ct[x]:ct[x]="on"+x}function Ge(x,D){if(x.da)x=!0;else{D=new q(D,this);var U=x.listener,J=x.ha||x.src;x.fa&&Ft(x),x=U.call(J,D)}return x}function gt(x){return x=x[Me],x instanceof _e?x:null}var at="__closure_events_fn_"+(1e9*Math.random()>>>0);function lt(x){return typeof x=="function"?x:(x[at]||(x[at]=function(D){return x.handleEvent(D)}),x[at])}function Et(){Y.call(this),this.i=new _e(this),this.M=this,this.F=null}p(Et,Y),Et.prototype[ue]=!0,Et.prototype.removeEventListener=function(x,D,U,J){Ut(this,x,D,U,J)};function ve(x,D){var U,J=x.F;if(J)for(U=[];J;J=J.F)U.push(J);if(x=x.M,J=D.type||D,typeof D=="string")D=new L(D,x);else if(D instanceof L)D.target=D.target||x;else{var be=D;D=new L(J,x),I(D,be)}if(be=!0,U)for(var Ie=U.length-1;0<=Ie;Ie--){var ft=D.g=U[Ie];be=Se(ft,J,!0,D)&&be}if(ft=D.g=x,be=Se(ft,J,!0,D)&&be,be=Se(ft,J,!1,D)&&be,U)for(Ie=0;Ie<U.length;Ie++)ft=D.g=U[Ie],be=Se(ft,J,!1,D)&&be}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var x=this.i,D;for(D in x.g){for(var U=x.g[D],J=0;J<U.length;J++)me(U[J]);delete x.g[D],x.h--}}this.F=null},Et.prototype.K=function(x,D,U,J){return this.i.add(String(x),D,!1,U,J)},Et.prototype.L=function(x,D,U,J){return this.i.add(String(x),D,!0,U,J)};function Se(x,D,U,J){if(D=x.i.g[String(D)],!D)return!0;D=D.concat();for(var be=!0,Ie=0;Ie<D.length;++Ie){var ft=D[Ie];if(ft&&!ft.da&&ft.capture==U){var ni=ft.listener,vo=ft.ha||ft.src;ft.fa&&ge(x.i,ft),be=ni.call(vo,J)!==!1&&be}}return be&&!J.defaultPrevented}function Fe(x,D,U){if(typeof x=="function")U&&(x=d(x,U));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:a.setTimeout(x,D||0)}function Ue(x){x.g=Fe(()=>{x.g=null,x.i&&(x.i=!1,Ue(x))},x.l);const D=x.h;x.h=null,x.m.apply(null,D)}class mt extends Y{constructor(D,U){super(),this.m=D,this.l=U,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cn(x){Y.call(this),this.h=x,this.g={}}p(cn,Y);var Ve=[];function wt(x){S(x.g,function(D,U){this.g.hasOwnProperty(U)&&Ft(D)},x),x.g={}}cn.prototype.N=function(){cn.aa.N.call(this),wt(this)},cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bt=a.JSON.stringify,bn=a.JSON.parse,Lt=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function Ir(){}Ir.prototype.h=null;function Fn(x){return x.h||(x.h=x.i())}function ar(){}var oi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yo(){L.call(this,"d")}p(yo,L);function wr(){L.call(this,"c")}p(wr,L);var nr={},Vo=null;function Hr(){return Vo=Vo||new Et}nr.La="serverreachability";function Zr(x){L.call(this,nr.La,x)}p(Zr,L);function Pt(x){const D=Hr();ve(D,new Zr(D))}nr.STAT_EVENT="statevent";function Xt(x,D){L.call(this,nr.STAT_EVENT,x),this.stat=D}p(Xt,L);function rr(x){const D=Hr();ve(D,new Xt(D,x))}nr.Ma="timingevent";function Gs(x,D){L.call(this,nr.Ma,x),this.size=D}p(Gs,L);function mi(x,D){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},D)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function ae(x,D,U,J,be,Ie){x.info(function(){if(x.g)if(Ie)for(var ft="",ni=Ie.split("&"),vo=0;vo<ni.length;vo++){var hr=ni[vo].split("=");if(1<hr.length){var Wo=hr[0];hr=hr[1];var Go=Wo.split("_");ft=2<=Go.length&&Go[1]=="type"?ft+(Wo+"="+hr+"&"):ft+(Wo+"=redacted&")}}else ft=null;else ft=Ie;return"XMLHTTP REQ ("+J+") [attempt "+be+"]: "+D+`
`+U+`
`+ft})}function ne(x,D,U,J,be,Ie,ft){x.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+be+"]: "+D+`
`+U+`
`+Ie+" "+ft})}function le(x,D,U,J){x.info(function(){return"XMLHTTP TEXT ("+D+"): "+xe(x,U)+(J?" "+J:"")})}function Ee(x,D){x.info(function(){return"TIMEOUT: "+D})}ai.prototype.info=function(){};function xe(x,D){if(!x.g)return D;if(!D)return null;try{var U=JSON.parse(D);if(U){for(x=0;x<U.length;x++)if(Array.isArray(U[x])){var J=U[x];if(!(2>J.length)){var be=J[1];if(Array.isArray(be)&&!(1>be.length)){var Ie=be[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var ft=1;ft<be.length;ft++)be[ft]=""}}}}return bt(U)}catch{return D}}var St={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},It={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},je;function Rt(){}p(Rt,Ir),Rt.prototype.g=function(){return new XMLHttpRequest},Rt.prototype.i=function(){return{}},je=new Rt;function en(x,D,U,J){this.j=x,this.i=D,this.l=U,this.R=J||1,this.U=new cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var kn={},In={};function Gt(x,D,U){x.L=1,x.v=Hn(qe(D)),x.m=U,x.P=!0,Xn(x,null)}function Xn(x,D){x.F=Date.now(),ui(x),x.A=qe(x.v);var U=x.A,J=x.R;Array.isArray(J)||(J=[String(J)]),rP(U.i,"t",J),x.C=0,U=x.j.J,x.h=new ht,x.g=yse(x.j,U?D:null,!x.m),0<x.O&&(x.M=new mt(d(x.Y,x,x.g),x.O)),D=x.U,U=x.g,J=x.ca;var be="readystatechange";Array.isArray(be)||(be&&(Ve[0]=be.toString()),be=Ve);for(var Ie=0;Ie<be.length;Ie++){var ft=Oe(U,be[Ie],J||D.handleEvent,!1,D.h||D);if(!ft)break;D.g[ft.key]=ft}D=x.H?T(x.H):{},x.m?(x.u||(x.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,D)):(x.u="GET",x.g.ea(x.A,x.u,null,D)),Pt(),ae(x.i,x.u,x.A,x.l,x.R,x.m)}en.prototype.ca=function(x){x=x.target;const D=this.M;D&&rs(x)==3?D.j():this.Y(x)},en.prototype.Y=function(x){try{if(x==this.g)e:{const Go=rs(this.g);var D=this.g.Ba();const G_=this.g.Z();if(!(3>Go)&&(Go!=3||this.g&&(this.h.h||this.g.oa()||qo(this.g)))){this.J||Go!=4||D==7||(D==8||0>=G_?Pt(3):Pt(2)),qr(this);var U=this.g.Z();this.X=U;t:if($r(this)){var J=qo(this.g);x="";var be=J.length,Ie=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),Is(this);var ft="";break t}this.h.i=new a.TextDecoder}for(D=0;D<be;D++)this.h.h=!0,x+=this.h.i.decode(J[D],{stream:!(Ie&&D==be-1)});J.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=U==200,ne(this.i,this.u,this.A,this.l,this.R,Go,U),this.o){if(this.T&&!this.K){t:{if(this.g){var ni,vo=this.g;if((ni=vo.g?vo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ni)){var hr=ni;break t}}hr=null}if(U=hr)le(this.i,this.l,U,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ci(this,U);else{this.o=!1,this.s=3,rr(12),Ti(this),Is(this);break e}}if(this.P){U=!0;let qc;for(;!this.J&&this.C<ft.length;)if(qc=Qt(this,ft),qc==In){Go==4&&(this.s=4,rr(14),U=!1),le(this.i,this.l,null,"[Incomplete Response]");break}else if(qc==kn){this.s=4,rr(15),le(this.i,this.l,ft,"[Invalid Chunk]"),U=!1;break}else le(this.i,this.l,qc,null),Ci(this,qc);if($r(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Go!=4||ft.length!=0||this.h.h||(this.s=1,rr(16),U=!1),this.o=this.o&&U,!U)le(this.i,this.l,ft,"[Invalid Chunked Response]"),Ti(this),Is(this);else if(0<ft.length&&!this.W){this.W=!0;var Wo=this.j;Wo.g==this&&Wo.ba&&!Wo.M&&(Wo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),dj(Wo),Wo.M=!0,rr(11))}}else le(this.i,this.l,ft,null),Ci(this,ft);Go==4&&Ti(this),this.o&&!this.J&&(Go==4?hse(this.j,this):(this.o=!1,ui(this)))}else Hy(this.g),U==400&&0<ft.indexOf("Unknown SID")?(this.s=3,rr(12)):(this.s=0,rr(13)),Ti(this),Is(this)}}}catch{}finally{}};function $r(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Qt(x,D){var U=x.C,J=D.indexOf(`
`,U);return J==-1?In:(U=Number(D.substring(U,J)),isNaN(U)?kn:(J+=1,J+U>D.length?In:(D=D.slice(J,J+U),x.C=J+U,D)))}en.prototype.cancel=function(){this.J=!0,Ti(this)};function ui(x){x.S=Date.now()+x.I,Li(x,x.I)}function Li(x,D){if(x.B!=null)throw Error("WatchDog timer not null");x.B=mi(d(x.ba,x),D)}function qr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}en.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ee(this.i,this.A),this.L!=2&&(Pt(),rr(17)),Ti(this),this.s=2,Is(this)):Li(this,this.S-x)};function Is(x){x.j.G==0||x.J||hse(x.j,x)}function Ti(x){qr(x);var D=x.M;D&&typeof D.ma=="function"&&D.ma(),x.M=null,wt(x.U),x.g&&(D=x.g,x.g=null,D.abort(),D.ma())}function Ci(x,D){try{var U=x.j;if(U.G!=0&&(U.g==x||ys(U.h,x))){if(!x.K&&ys(U.h,x)&&U.G==3){try{var J=U.Da.g.parse(D)}catch{J=null}if(Array.isArray(J)&&J.length==3){var be=J;if(be[0]==0){e:if(!U.u){if(U.g)if(U.g.F+3e3<x.F)cP(U),uP(U);else break e;fj(U),rr(18)}}else U.za=be[1],0<U.za-U.T&&37500>be[2]&&U.F&&U.v==0&&!U.C&&(U.C=mi(d(U.Za,U),6e3));if(1>=Rn(U.h)&&U.ca){try{U.ca()}catch{}U.ca=void 0}}else qy(U,11)}else if((x.K||U.g==x)&&cP(U),!v(D))for(be=U.Da.g.parse(D),D=0;D<be.length;D++){let hr=be[D];if(U.T=hr[0],hr=hr[1],U.G==2)if(hr[0]=="c"){U.K=hr[1],U.ia=hr[2];const Wo=hr[3];Wo!=null&&(U.la=Wo,U.j.info("VER="+U.la));const Go=hr[4];Go!=null&&(U.Aa=Go,U.j.info("SVER="+U.Aa));const G_=hr[5];G_!=null&&typeof G_=="number"&&0<G_&&(J=1.5*G_,U.L=J,U.j.info("backChannelRequestTimeoutMs_="+J)),J=U;const qc=x.g;if(qc){const dP=qc.g?qc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(dP){var Ie=J.h;Ie.g||dP.indexOf("spdy")==-1&&dP.indexOf("quic")==-1&&dP.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(K(Ie,Ie.h),Ie.h=null))}if(J.D){const hj=qc.g?qc.g.getResponseHeader("X-HTTP-Session-Id"):null;hj&&(J.ya=hj,jt(J.I,J.D,hj))}}U.G=3,U.l&&U.l.ua(),U.ba&&(U.R=Date.now()-x.F,U.j.info("Handshake RTT: "+U.R+"ms")),J=U;var ft=x;if(J.qa=gse(J,J.J?J.ia:null,J.W),ft.K){oe(J.h,ft);var ni=ft,vo=J.L;vo&&(ni.I=vo),ni.B&&(qr(ni),ui(ni)),J.g=ft}else fse(J);0<U.i.length&&lP(U)}else hr[0]!="stop"&&hr[0]!="close"||qy(U,7);else U.G==3&&(hr[0]=="stop"||hr[0]=="close"?hr[0]=="stop"?qy(U,7):q_(U):hr[0]!="noop"&&U.l&&U.l.ta(hr),U.v=0)}}Pt(4)}catch{}}var Ys=class{constructor(x,D){this.g=x,this.map=D}};function gs(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xt(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Rn(x){return x.h?1:x.g?x.g.size:0}function ys(x,D){return x.h?x.h==D:x.g?x.g.has(D):!1}function K(x,D){x.g?x.g.add(D):x.h=D}function oe(x,D){x.h&&x.h==D?x.h=null:x.g&&x.g.has(D)&&x.g.delete(D)}gs.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function ee(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let D=x.i;for(const U of x.g.values())D=D.concat(U.D);return D}return m(x.i)}function de(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var D=[],U=x.length,J=0;J<U;J++)D.push(x[J]);return D}D=[],U=0;for(J in x)D[U++]=x[J];return D}function ye(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var D=[];x=x.length;for(var U=0;U<x;U++)D.push(U);return D}D=[],U=0;for(const J in x)D[U++]=J;return D}}}function pe(x,D){if(x.forEach&&typeof x.forEach=="function")x.forEach(D,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,D,void 0);else for(var U=ye(x),J=de(x),be=J.length,Ie=0;Ie<be;Ie++)D.call(void 0,J[Ie],U&&U[Ie],x)}var Pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(x,D){if(x){x=x.split("&");for(var U=0;U<x.length;U++){var J=x[U].indexOf("="),be=null;if(0<=J){var Ie=x[U].substring(0,J);be=x[U].substring(J+1)}else Ie=x[U];D(Ie,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function He(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof He){this.h=x.h,rt(this,x.j),this.o=x.o,this.g=x.g,At(this,x.s),this.l=x.l;var D=x.i,U=new Wl;U.i=D.i,D.g&&(U.g=new Map(D.g),U.h=D.h),xn(this,U),this.m=x.m}else x&&(D=String(x).match(Pe))?(this.h=!1,rt(this,D[1]||"",!0),this.o=Nr(D[2]||""),this.g=Nr(D[3]||"",!0),At(this,D[4]),this.l=Nr(D[5]||"",!0),xn(this,D[6]||"",!0),this.m=Nr(D[7]||"")):(this.h=!1,this.i=new Wl(null,this.h))}He.prototype.toString=function(){var x=[],D=this.j;D&&x.push(Dr(D,ad,!0),":");var U=this.g;return(U||D=="file")&&(x.push("//"),(D=this.o)&&x.push(Dr(D,ad,!0),"@"),x.push(encodeURIComponent(String(U)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.s,U!=null&&x.push(":",String(U))),(U=this.l)&&(this.g&&U.charAt(0)!="/"&&x.push("/"),x.push(Dr(U,U.charAt(0)=="/"?ES:rp,!0))),(U=this.i.toString())&&x.push("?",U),(U=this.m)&&x.push("#",Dr(U,nP)),x.join("")};function qe(x){return new He(x)}function rt(x,D,U){x.j=U?Nr(D,!0):D,x.j&&(x.j=x.j.replace(/:$/,""))}function At(x,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);x.s=D}else x.s=null}function xn(x,D,U){D instanceof Wl?(x.i=D,xS(x.i,x.h)):(U||(D=Dr(D,By)),x.i=new Wl(D,x.h))}function jt(x,D,U){x.i.set(D,U)}function Hn(x){return jt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Nr(x,D){return x?D?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Dr(x,D,U){return typeof x=="string"?(x=encodeURI(x).replace(D,Ho),U&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Ho(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var ad=/[#\/\?@]/g,rp=/[#\?:]/g,ES=/[#\?]/g,By=/[#\?@]/g,nP=/#/g;function Wl(x,D){this.h=this.g=null,this.i=x||null,this.j=!!D}function uu(x){x.g||(x.g=new Map,x.h=0,x.i&&ze(x.i,function(D,U){x.add(decodeURIComponent(D.replace(/\+/g," ")),U)}))}e=Wl.prototype,e.add=function(x,D){uu(this),this.i=null,x=sp(this,x);var U=this.g.get(x);return U||this.g.set(x,U=[]),U.push(D),this.h+=1,this};function ip(x,D){uu(x),D=sp(x,D),x.g.has(D)&&(x.i=null,x.h-=x.g.get(D).length,x.g.delete(D))}function V_(x,D){return uu(x),D=sp(x,D),x.g.has(D)}e.forEach=function(x,D){uu(this),this.g.forEach(function(U,J){U.forEach(function(be){x.call(D,be,J,this)},this)},this)},e.na=function(){uu(this);const x=Array.from(this.g.values()),D=Array.from(this.g.keys()),U=[];for(let J=0;J<D.length;J++){const be=x[J];for(let Ie=0;Ie<be.length;Ie++)U.push(D[J])}return U},e.V=function(x){uu(this);let D=[];if(typeof x=="string")V_(this,x)&&(D=D.concat(this.g.get(sp(this,x))));else{x=Array.from(this.g.values());for(let U=0;U<x.length;U++)D=D.concat(x[U])}return D},e.set=function(x,D){return uu(this),this.i=null,x=sp(this,x),V_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[D]),this.h+=1,this},e.get=function(x,D){return x?(x=this.V(x),0<x.length?String(x[0]):D):D};function rP(x,D,U){ip(x,D),0<U.length&&(x.i=null,x.g.set(sp(x,D),m(U)),x.h+=U.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],D=Array.from(this.g.keys());for(var U=0;U<D.length;U++){var J=D[U];const Ie=encodeURIComponent(String(J)),ft=this.V(J);for(J=0;J<ft.length;J++){var be=Ie;ft[J]!==""&&(be+="="+encodeURIComponent(String(ft[J]))),x.push(be)}}return this.i=x.join("&")};function sp(x,D){return D=String(D),x.j&&(D=D.toLowerCase()),D}function xS(x,D){D&&!x.j&&(uu(x),x.i=null,x.g.forEach(function(U,J){var be=J.toLowerCase();J!=be&&(ip(this,J),rP(this,be,U))},x)),x.j=D}function iP(x,D){const U=new ai;if(a.Image){const J=new Image;J.onload=h(lu,U,"TestLoadImage: loaded",!0,D,J),J.onerror=h(lu,U,"TestLoadImage: error",!1,D,J),J.onabort=h(lu,U,"TestLoadImage: abort",!1,D,J),J.ontimeout=h(lu,U,"TestLoadImage: timeout",!1,D,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=x}else D(!1)}function op(x,D){const U=new ai,J=new AbortController,be=setTimeout(()=>{J.abort(),lu(U,"TestPingServer: timeout",!1,D)},1e4);fetch(x,{signal:J.signal}).then(Ie=>{clearTimeout(be),Ie.ok?lu(U,"TestPingServer: ok",!0,D):lu(U,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(be),lu(U,"TestPingServer: error",!1,D)})}function lu(x,D,U,J,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),J(U)}catch{}}function cj(){this.g=new Lt}function sP(x,D,U){const J=U||"";try{pe(x,function(be,Ie){let ft=be;l(be)&&(ft=bt(be)),D.push(J+Ie+"="+encodeURIComponent(ft))})}catch(be){throw D.push(J+"type="+encodeURIComponent("_badmap")),be}}function zy(x){this.l=x.Ub||null,this.j=x.eb||!1}p(zy,Ir),zy.prototype.g=function(){return new Uy(this.l,this.j)},zy.prototype.i=function(x){return function(){return x}}({});function Uy(x,D){Et.call(this),this.D=x,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Uy,Et),e=Uy.prototype,e.open=function(x,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=D,this.readyState=1,ng(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(D.body=x),(this.D||a).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vy(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ng(this)),this.g&&(this.readyState=3,ng(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oP(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function oP(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var D=x.value?x.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!x.done}))&&(this.response=this.responseText+=D)}x.done?Vy(this):ng(this),this.readyState==3&&oP(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,Vy(this))},e.Qa=function(x){this.g&&(this.response=x,Vy(this))},e.ga=function(){this.g&&Vy(this)};function Vy(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ng(x)}e.setRequestHeader=function(x,D){this.u.append(x,D)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],D=this.h.entries();for(var U=D.next();!U.done;)U=U.value,x.push(U[0]+": "+U[1]),U=D.next();return x.join(`\r
`)};function ng(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Uy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function aP(x){let D="";return S(x,function(U,J){D+=J,D+=":",D+=U,D+=`\r
`}),D}function re(x,D,U){e:{for(J in U){var J=!1;break e}J=!0}J||(U=aP(U),typeof x=="string"?U!=null&&encodeURIComponent(String(U)):jt(x,D,U))}function ce(x){Et.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ce,Et);var Te=/^https?$/i,$t=["POST","PUT"];e=ce.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,D,U,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);D=D?D.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?Fn(this.o):Fn(je),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(D,String(x),!0),this.B=!1}catch(Ie){Un(this,Ie);return}if(x=U||"",U=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var be in J)U.set(be,J[be]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ie of J.keys())U.set(Ie,J.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(U.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),be=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call($t,D,void 0))||J||be||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,ft]of U)this.g.setRequestHeader(Ie,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ti(this),this.u=!0,this.g.send(x),this.u=!1}catch(Ie){Un(this,Ie)}};function Un(x,D){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=D,x.m=5,Or(x),qn(x)}function Or(x){x.A||(x.A=!0,ve(x,"complete"),ve(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,ve(this,"complete"),ve(this,"abort"),qn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qn(this,!0)),ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ei(this):this.bb())},e.bb=function(){ei(this)};function ei(x){if(x.h&&typeof o<"u"&&(!x.v[1]||rs(x)!=4||x.Z()!=2)){if(x.u&&rs(x)==4)Fe(x.Ea,0,x);else if(ve(x,"readystatechange"),rs(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var U;if(!(U=D)){var J;if(J=ft===0){var be=String(x.D).match(Pe)[1]||null;!be&&a.self&&a.self.location&&(be=a.self.location.protocol.slice(0,-1)),J=!Te.test(be?be.toLowerCase():"")}U=J}if(U)ve(x,"complete"),ve(x,"success");else{x.m=6;try{var Ie=2<rs(x)?x.g.statusText:""}catch{Ie=""}x.l=Ie+" ["+x.Z()+"]",Or(x)}}finally{qn(x)}}}}function qn(x,D){if(x.g){ti(x);const U=x.g,J=x.v[0]?()=>{}:null;x.g=null,x.v=null,D||ve(x,"ready");try{U.onreadystatechange=J}catch{}}}function ti(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function rs(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var D=this.g.responseText;return x&&D.indexOf(x)==0&&(D=D.substring(x.length)),bn(D)}};function qo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Hy(x){const D={};x=(x.g&&2<=rs(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<x.length;J++){if(v(x[J]))continue;var U=k(x[J]);const be=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Ie=D[be]||[];D[be]=Ie,Ie.push(U)}b(D,function(J){return J.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ap(x,D,U){return U&&U.internalChannelParams&&U.internalChannelParams[x]||D}function H_(x){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ap("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ap("baseRetryDelayMs",5e3,x),this.cb=ap("retryDelaySeedMs",1e4,x),this.Wa=ap("forwardChannelMaxRetries",2,x),this.wa=ap("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new gs(x&&x.concurrentRequestLimit),this.Da=new cj,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=H_.prototype,e.la=8,e.G=1,e.connect=function(x,D,U,J){rr(0),this.W=x,this.H=D||{},U&&J!==void 0&&(this.H.OSID=U,this.H.OAID=J),this.F=this.X,this.I=gse(this,null,this.W),lP(this)};function q_(x){if(use(x),x.G==3){var D=x.U++,U=qe(x.I);if(jt(U,"SID",x.K),jt(U,"RID",D),jt(U,"TYPE","terminate"),SS(x,U),D=new en(x,x.j,D),D.L=2,D.v=Hn(qe(U)),U=!1,a.navigator&&a.navigator.sendBeacon)try{U=a.navigator.sendBeacon(D.v.toString(),"")}catch{}!U&&a.Image&&(new Image().src=D.v,U=!0),U||(D.g=yse(D.j,null),D.g.ea(D.v)),D.F=Date.now(),ui(D)}mse(x)}function uP(x){x.g&&(dj(x),x.g.cancel(),x.g=null)}function use(x){uP(x),x.u&&(a.clearTimeout(x.u),x.u=null),cP(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function lP(x){if(!xt(x.h)&&!x.s){x.s=!0;var D=x.Ga;W||M(),V||(W(),V=!0),G.add(D,x),x.B=0}}function gGe(x,D){return Rn(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=D.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=mi(d(x.Ga,x,D),pse(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const be=new en(this,this.j,x);let Ie=this.o;if(this.S&&(Ie?(Ie=T(Ie),I(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(be.H=Ie,Ie=null),this.P)e:{for(var D=0,U=0;U<this.i.length;U++){t:{var J=this.i[U];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(D+=J,4096<D){D=U;break e}if(D===4096||U===this.i.length-1){D=U+1;break e}}D=1e3}else D=1e3;D=cse(this,be,D),U=qe(this.I),jt(U,"RID",x),jt(U,"CVER",22),this.D&&jt(U,"X-HTTP-Session-Id",this.D),SS(this,U),Ie&&(this.O?D="headers="+encodeURIComponent(String(aP(Ie)))+"&"+D:this.m&&re(U,this.m,Ie)),K(this.h,be),this.Ua&&jt(U,"TYPE","init"),this.P?(jt(U,"$req",D),jt(U,"SID","null"),be.T=!0,Gt(be,U,null)):Gt(be,U,D),this.G=2}}else this.G==3&&(x?lse(this,x):this.i.length==0||xt(this.h)||lse(this))};function lse(x,D){var U;D?U=D.l:U=x.U++;const J=qe(x.I);jt(J,"SID",x.K),jt(J,"RID",U),jt(J,"AID",x.T),SS(x,J),x.m&&x.o&&re(J,x.m,x.o),U=new en(x,x.j,U,x.B+1),x.m===null&&(U.H=x.o),D&&(x.i=D.D.concat(x.i)),D=cse(x,U,1e3),U.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),K(x.h,U),Gt(U,J,D)}function SS(x,D){x.H&&S(x.H,function(U,J){jt(D,J,U)}),x.l&&pe({},function(U,J){jt(D,J,U)})}function cse(x,D,U){U=Math.min(x.i.length,U);var J=x.l?d(x.l.Na,x.l,x):null;e:{var be=x.i;let Ie=-1;for(;;){const ft=["count="+U];Ie==-1?0<U?(Ie=be[0].g,ft.push("ofs="+Ie)):Ie=0:ft.push("ofs="+Ie);let ni=!0;for(let vo=0;vo<U;vo++){let hr=be[vo].g;const Wo=be[vo].map;if(hr-=Ie,0>hr)Ie=Math.max(0,be[vo].g-100),ni=!1;else try{sP(Wo,ft,"req"+hr+"_")}catch{J&&J(Wo)}}if(ni){J=ft.join("&");break e}}}return x=x.i.splice(0,U),D.D=x,J}function fse(x){if(!x.g&&!x.u){x.Y=1;var D=x.Fa;W||M(),V||(W(),V=!0),G.add(D,x),x.v=0}}function fj(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=mi(d(x.Fa,x),pse(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,dse(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=mi(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rr(10),uP(this),dse(this))};function dj(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function dse(x){x.g=new en(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var D=qe(x.qa);jt(D,"RID","rpc"),jt(D,"SID",x.K),jt(D,"AID",x.T),jt(D,"CI",x.F?"0":"1"),!x.F&&x.ja&&jt(D,"TO",x.ja),jt(D,"TYPE","xmlhttp"),SS(x,D),x.m&&x.o&&re(D,x.m,x.o),x.L&&(x.g.I=x.L);var U=x.g;x=x.ia,U.L=1,U.v=Hn(qe(D)),U.m=null,U.P=!0,Xn(U,x)}e.Za=function(){this.C!=null&&(this.C=null,uP(this),fj(this),rr(19))};function cP(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function hse(x,D){var U=null;if(x.g==D){cP(x),dj(x),x.g=null;var J=2}else if(ys(x.h,D))U=D.D,oe(x.h,D),J=1;else return;if(x.G!=0){if(D.o)if(J==1){U=D.m?D.m.length:0,D=Date.now()-D.F;var be=x.B;J=Hr(),ve(J,new Gs(J,U)),lP(x)}else fse(x);else if(be=D.s,be==3||be==0&&0<D.X||!(J==1&&gGe(x,D)||J==2&&fj(x)))switch(U&&0<U.length&&(D=x.h,D.i=D.i.concat(U)),be){case 1:qy(x,5);break;case 4:qy(x,10);break;case 3:qy(x,6);break;default:qy(x,2)}}}function pse(x,D){let U=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(U*=2),U*D}function qy(x,D){if(x.j.info("Error code "+D),D==2){var U=d(x.fb,x),J=x.Xa;const be=!J;J=new He(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rt(J,"https"),Hn(J),be?iP(J.toString(),U):op(J.toString(),U)}else rr(2);x.G=0,x.l&&x.l.sa(D),mse(x),use(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),rr(2)):(this.j.info("Failed to ping google.com"),rr(1))};function mse(x){if(x.G=0,x.ka=[],x.l){const D=ee(x.h);(D.length!=0||x.i.length!=0)&&(g(x.ka,D),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function gse(x,D,U){var J=U instanceof He?qe(U):new He(U);if(J.g!="")D&&(J.g=D+"."+J.g),At(J,J.s);else{var be=a.location;J=be.protocol,D=D?D+"."+be.hostname:be.hostname,be=+be.port;var Ie=new He(null);J&&rt(Ie,J),D&&(Ie.g=D),be&&At(Ie,be),U&&(Ie.l=U),J=Ie}return U=x.D,D=x.ya,U&&D&&jt(J,U,D),jt(J,"VER",x.la),SS(x,J),J}function yse(x,D,U){if(D&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=x.Ca&&!x.pa?new ce(new zy({eb:U})):new ce(x.pa),D.Ha(x.J),D}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function vse(){}e=vse.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function fP(){}fP.prototype.g=function(x,D){return new nl(x,D)};function nl(x,D){Et.call(this),this.g=new H_(D),this.l=x,this.h=D&&D.messageUrlParams||null,x=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(x?x["X-WebChannel-Content-Type"]=D.messageContentType:x={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(x?x["X-WebChannel-Client-Profile"]=D.va:x={"X-WebChannel-Client-Profile":D.va}),this.g.S=x,(x=D&&D.Sb)&&!v(x)&&(this.g.m=x),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!v(D)&&(this.g.D=D,x=this.h,x!==null&&D in x&&(x=this.h,D in x&&delete x[D])),this.j=new W_(this)}p(nl,Et),nl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nl.prototype.close=function(){q_(this.g)},nl.prototype.o=function(x){var D=this.g;if(typeof x=="string"){var U={};U.__data__=x,x=U}else this.u&&(U={},U.__data__=bt(x),x=U);D.i.push(new Ys(D.Ya++,x)),D.G==3&&lP(D)},nl.prototype.N=function(){this.g.l=null,delete this.j,q_(this.g),delete this.g,nl.aa.N.call(this)};function _se(x){yo.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var D=x.__sm__;if(D){e:{for(const U in D){x=U;break e}x=void 0}(this.i=x)&&(x=this.i,D=D!==null&&x in D?D[x]:void 0),this.data=D}else this.data=x}p(_se,yo);function bse(){wr.call(this),this.status=1}p(bse,wr);function W_(x){this.g=x}p(W_,vse),W_.prototype.ua=function(){ve(this.g,"a")},W_.prototype.ta=function(x){ve(this.g,new _se(x))},W_.prototype.sa=function(x){ve(this.g,new bse)},W_.prototype.ra=function(){ve(this.g,"b")},fP.prototype.createWebChannel=fP.prototype.g,nl.prototype.send=nl.prototype.o,nl.prototype.open=nl.prototype.m,nl.prototype.close=nl.prototype.close,SFe=function(){return new fP},xFe=function(){return Hr()},EFe=nr,mq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,g$=St,It.COMPLETE="complete",wFe=It,ar.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Et.prototype.listen=Et.prototype.K,t2=ar,bFe=zy,ce.prototype.listenOnce=ce.prototype.L,ce.prototype.getLastError=ce.prototype.Ka,ce.prototype.getLastErrorCode=ce.prototype.Ba,ce.prototype.getStatus=ce.prototype.Z,ce.prototype.getResponseJson=ce.prototype.Oa,ce.prototype.getResponseText=ce.prototype.oa,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Ha,_Fe=ce}).apply(typeof Dk<"u"?Dk:typeof self<"u"?self:typeof window<"u"?window:{});const yye="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gu.UNAUTHENTICATED=new gu(null),gu.GOOGLE_CREDENTIALS=new gu("google-credentials-uid"),gu.FIRST_PARTY=new gu("first-party-uid"),gu.MOCK_USER=new gu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xx="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new nF("@firebase/firestore");function oT(){return z1.logLevel}function Nt(e,...t){if(z1.logLevel<=Jn.DEBUG){const n=t.map(NZ);z1.debug(`Firestore (${Xx}): ${e}`,...n)}}function Am(e,...t){if(z1.logLevel<=Jn.ERROR){const n=t.map(NZ);z1.error(`Firestore (${Xx}): ${e}`,...n)}}function IA(e,...t){if(z1.logLevel<=Jn.WARN){const n=t.map(NZ);z1.warn(`Firestore (${Xx}): ${e}`,...n)}}function NZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(e="Unexpected state"){const t=`FIRESTORE (${Xx}) INTERNAL ASSERTION FAILED: `+e;throw Am(t),new Error(t)}function hi(e,t){e||gn()}function En(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ct extends Wh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HKt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qKt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(gu.UNAUTHENTICATED))}shutdown(){}}class WKt{constructor(t){this.t=t,this.currentUser=gu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new nm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(hi(typeof r.accessToken=="string"),new HKt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return hi(t===null||typeof t=="string"),new gu(t)}}class GKt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=gu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YKt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new GKt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(gu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KKt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XKt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Nt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(hi(typeof n.token=="string"),this.R=n.token,new KKt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QKt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TFe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=QKt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Sr(e,t){return e<t?-1:e>t?1:0}function $E(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ct(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return zs.fromMillis(Date.now())}static fromDate(t){return zs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new zs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Sr(this.nanoseconds,t.nanoseconds):Sr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new wn(t)}static min(){return new wn(new zs(0,0))}static max(){return new wn(new zs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(t,n,r){n===void 0?n=0:n>t.length&&gn(),r===void 0?r=t.length-n:r>t.length-n&&gn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return OA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof OA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class bi extends OA{construct(t,n,r){return new bi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ct(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new bi(n)}static emptyPath(){return new bi([])}}const JKt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oo extends OA{construct(t,n,r){return new Oo(t,n,r)}static isValidIdentifier(t){return JKt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Oo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ct(Le.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ct(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ct(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ct(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Oo(n)}static emptyPath(){return new Oo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t){this.path=t}static fromPath(t){return new Kt(bi.fromString(t))}static fromName(t){return new Kt(bi.fromString(t).popFirst(5))}static empty(){return new Kt(bi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&bi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return bi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Kt(new bi(t.slice()))}}function ZKt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=wn.fromTimestamp(r===1e9?new zs(n+1,0):new zs(n,r));return new ey(i,Kt.empty(),t)}function eXt(e){return new ey(e.readTime,e.key,-1)}class ey{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new ey(wn.min(),Kt.empty(),-1)}static max(){return new ey(wn.max(),Kt.empty(),-1)}}function tXt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Kt.comparator(e.documentKey,t.documentKey),n!==0?n:Sr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nXt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rXt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(e){if(e.code!==Le.FAILED_PRECONDITION||e.message!==nXt)throw e;Nt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&gn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ke((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ke?n:Ke.resolve(n)}catch(n){return Ke.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ke.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ke.reject(n)}static resolve(t){return new Ke((n,r)=>{n(t)})}static reject(t){return new Ke((n,r)=>{r(t)})}static waitFor(t){return new Ke((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ke.resolve(!1);for(const r of t)n=n.next(i=>i?Ke.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ke((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ke((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function iXt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fO(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}DZ.oe=-1;function aF(e){return e==null}function hL(e){return e===0&&1/e==-1/0}function sXt(e){return typeof e=="number"&&Number.isInteger(e)&&!hL(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vye(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function S_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function CFe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n){this.comparator=t,this.root=n||To.EMPTY}insert(t,n){return new Vi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,To.BLACK,null,null))}remove(t){return new Vi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,To.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mk(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mk(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mk(this.root,t,this.comparator,!0)}}class Mk{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class To{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??To.RED,this.left=i??To.EMPTY,this.right=s??To.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new To(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return To.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gn();const t=this.left.check();if(t!==this.right.check())throw gn();return t+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1;To.EMPTY=new class{constructor(){this.size=0}get key(){throw gn()}get value(){throw gn()}get color(){throw gn()}get left(){throw gn()}get right(){throw gn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new To(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t){this.comparator=t,this.data=new Vi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _ye(this.data.getIterator())}getIteratorFrom(t){return new _ye(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new No(this.comparator);return n.data=t,n}}class _ye{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this.fields=t,t.sort(Oo.comparator)}static empty(){return new bl([])}unionWith(t){let n=new No(Oo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new bl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return $E(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AFe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AFe("Invalid base64 string: "+s):s}}(t);return new Ta(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ta(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Sr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ta.EMPTY_BYTE_STRING=new Ta("");const oXt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ty(e){if(hi(!!e),typeof e=="string"){let t=0;const n=oXt.exec(e);if(hi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bs(e.seconds),nanos:bs(e.nanos)}}function bs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function U1(e){return typeof e=="string"?Ta.fromBase64String(e):Ta.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function LZ(e){const t=e.mapValue.fields.__previous_value__;return MZ(t)?LZ(t):t}function PA(e){const t=ty(e.mapValue.fields.__local_write_time__.timestampValue);return new zs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aXt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class kA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new kA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof kA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function V1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?MZ(e)?4:uXt(e)?9007199254740991:10:gn()}function kh(e,t){if(e===t)return!0;const n=V1(e);if(n!==V1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return PA(e).isEqual(PA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ty(i.timestampValue),a=ty(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return U1(i.bytesValue).isEqual(U1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return bs(i.geoPointValue.latitude)===bs(s.geoPointValue.latitude)&&bs(i.geoPointValue.longitude)===bs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bs(i.integerValue)===bs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bs(i.doubleValue),a=bs(s.doubleValue);return o===a?hL(o)===hL(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return $E(e.arrayValue.values||[],t.arrayValue.values||[],kh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vye(o)!==vye(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!kh(o[u],a[u])))return!1;return!0}(e,t);default:return gn()}}function RA(e,t){return(e.values||[]).find(n=>kh(n,t))!==void 0}function NE(e,t){if(e===t)return 0;const n=V1(e),r=V1(t);if(n!==r)return Sr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=bs(s.integerValue||s.doubleValue),u=bs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return bye(e.timestampValue,t.timestampValue);case 4:return bye(PA(e),PA(t));case 5:return Sr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=U1(s),u=U1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Sr(a[l],u[l]);if(c!==0)return c}return Sr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Sr(bs(s.latitude),bs(o.latitude));return a!==0?a:Sr(bs(s.longitude),bs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=NE(a[l],u[l]);if(c)return c}return Sr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Lk.mapValue&&o===Lk.mapValue)return 0;if(s===Lk.mapValue)return 1;if(o===Lk.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Sr(u[f],c[f]);if(d!==0)return d;const h=NE(a[u[f]],l[c[f]]);if(h!==0)return h}return Sr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw gn()}}function bye(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Sr(e,t);const n=ty(e),r=ty(t),i=Sr(n.seconds,r.seconds);return i!==0?i:Sr(n.nanos,r.nanos)}function DE(e){return gq(e)}function gq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ty(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return U1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Kt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=gq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gq(n.fields[o])}`;return i+"}"}(e.mapValue):gn()}function wye(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function yq(e){return!!e&&"integerValue"in e}function FZ(e){return!!e&&"arrayValue"in e}function Eye(e){return!!e&&"nullValue"in e}function xye(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function y$(e){return!!e&&"mapValue"in e}function sC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return S_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=sC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function uXt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t){this.value=t}static empty(){return new Cu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!y$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=sC(n)}setAll(t){let n=Oo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());y$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return kh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];y$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){S_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Cu(sC(this.value))}}function IFe(e){const t=[];return S_(e.fields,(n,r)=>{const i=new Oo([n]);if(y$(r)){const s=IFe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new bl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new da(t,0,wn.min(),wn.min(),wn.min(),Cu.empty(),0)}static newFoundDocument(t,n,r,i){return new da(t,1,n,wn.min(),r,i,0)}static newNoDocument(t,n){return new da(t,2,n,wn.min(),wn.min(),Cu.empty(),0)}static newUnknownDocument(t,n){return new da(t,3,n,wn.min(),wn.min(),Cu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(wn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof da&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new da(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pL=class{constructor(t,n){this.position=t,this.inclusive=n}};function Sye(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Kt.comparator(Kt.fromName(o.referenceValue),n.key):r=NE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Tye(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!kh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t,n="asc"){this.field=t,this.dir=n}}function lXt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OFe=class{};class Ss extends OFe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new fXt(t,n,r):n==="array-contains"?new pXt(t,r):n==="in"?new mXt(t,r):n==="not-in"?new gXt(t,r):n==="array-contains-any"?new yXt(t,r):new Ss(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new dXt(t,r):new hXt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(NE(n,this.value)):n!==null&&V1(this.value)===V1(n)&&this.matchesComparison(NE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return gn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bf extends OFe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Bf(t,n)}matches(t){return PFe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function PFe(e){return e.op==="and"}function kFe(e){return cXt(e)&&PFe(e)}function cXt(e){for(const t of e.filters)if(t instanceof Bf)return!1;return!0}function vq(e){if(e instanceof Ss)return e.field.canonicalString()+e.op.toString()+DE(e.value);if(kFe(e))return e.filters.map(t=>vq(t)).join(",");{const t=e.filters.map(n=>vq(n)).join(",");return`${e.op}(${t})`}}function RFe(e,t){return e instanceof Ss?function(r,i){return i instanceof Ss&&r.op===i.op&&r.field.isEqual(i.field)&&kh(r.value,i.value)}(e,t):e instanceof Bf?function(r,i){return i instanceof Bf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&RFe(o,i.filters[a]),!0):!1}(e,t):void gn()}function $Fe(e){return e instanceof Ss?function(n){return`${n.field.canonicalString()} ${n.op} ${DE(n.value)}`}(e):e instanceof Bf?function(n){return n.op.toString()+" {"+n.getFilters().map($Fe).join(" ,")+"}"}(e):"Filter"}class fXt extends Ss{constructor(t,n,r){super(t,n,r),this.key=Kt.fromName(r.referenceValue)}matches(t){const n=Kt.comparator(t.key,this.key);return this.matchesComparison(n)}}class dXt extends Ss{constructor(t,n){super(t,"in",n),this.keys=NFe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class hXt extends Ss{constructor(t,n){super(t,"not-in",n),this.keys=NFe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function NFe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Kt.fromName(r.referenceValue))}class pXt extends Ss{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return FZ(n)&&RA(n.arrayValue,this.value)}}class mXt extends Ss{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&RA(this.value.arrayValue,n)}}class gXt extends Ss{constructor(t,n){super(t,"not-in",n)}matches(t){if(RA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!RA(this.value.arrayValue,n)}}class yXt extends Ss{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!FZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>RA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vXt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Cye(e,t=null,n=[],r=[],i=null,s=null,o=null){return new vXt(e,t,n,r,i,s,o)}function jZ(e){const t=En(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>vq(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),aF(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>DE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>DE(r)).join(",")),t.ue=n}return t.ue}function BZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lXt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!RFe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tye(e.startAt,t.startAt)&&Tye(e.endAt,t.endAt)}function _q(e){return Kt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _Xt(e,t,n,r,i,s,o,a){return new Qx(e,t,n,r,i,s,o,a)}function zZ(e){return new Qx(e)}function Aye(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function DFe(e){return e.collectionGroup!==null}function oC(e){const t=En(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new No(Oo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new $A(s,r))}),n.has(Oo.keyField().canonicalString())||t.ce.push(new $A(Oo.keyField(),r))}return t.ce}function uh(e){const t=En(e);return t.le||(t.le=bXt(t,oC(e))),t.le}function bXt(e,t){if(e.limitType==="F")return Cye(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $A(i.field,s)});const n=e.endAt?new pL(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pL(e.startAt.position,e.startAt.inclusive):null;return Cye(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function bq(e,t){const n=e.filters.concat([t]);return new Qx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wq(e,t,n){return new Qx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function uF(e,t){return BZ(uh(e),uh(t))&&e.limitType===t.limitType}function MFe(e){return`${jZ(uh(e))}|lt:${e.limitType}`}function Ib(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$Fe(i)).join(", ")}]`),aF(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>DE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>DE(i)).join(",")),`Target(${r})`}(uh(e))}; limitType=${e.limitType})`}function lF(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Kt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of oC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Sye(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,oC(r),i)||r.endAt&&!function(o,a,u){const l=Sye(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,oC(r),i))}(e,t)}function wXt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function LFe(e){return(t,n)=>{let r=!1;for(const i of oC(e)){const s=EXt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function EXt(e,t,n){const r=e.field.isKeyField()?Kt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?NE(u,l):gn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){S_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return CFe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xXt=new Vi(Kt.comparator);function Im(){return xXt}const FFe=new Vi(Kt.comparator);function n2(...e){let t=FFe;for(const n of e)t=t.insert(n.key,n);return t}function jFe(e){let t=FFe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Jv(){return aC()}function BFe(){return aC()}function aC(){return new Jx(e=>e.toString(),(e,t)=>e.isEqual(t))}const SXt=new Vi(Kt.comparator),TXt=new No(Kt.comparator);function Wn(...e){let t=TXt;for(const n of e)t=t.add(n);return t}const CXt=new No(Sr);function AXt(){return CXt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zFe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hL(t)?"-0":t}}function UFe(e){return{integerValue:""+e}}function IXt(e,t){return sXt(t)?UFe(t):zFe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(){this._=void 0}}function OXt(e,t,n){return e instanceof NA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&MZ(s)&&(s=LZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof DA?HFe(e,t):e instanceof MA?qFe(e,t):function(i,s){const o=VFe(i,s),a=Iye(o)+Iye(i.Pe);return yq(o)&&yq(i.Pe)?UFe(a):zFe(i.serializer,a)}(e,t)}function PXt(e,t,n){return e instanceof DA?HFe(e,t):e instanceof MA?qFe(e,t):n}function VFe(e,t){return e instanceof mL?function(r){return yq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class NA extends cF{}class DA extends cF{constructor(t){super(),this.elements=t}}function HFe(e,t){const n=WFe(t);for(const r of e.elements)n.some(i=>kh(i,r))||n.push(r);return{arrayValue:{values:n}}}class MA extends cF{constructor(t){super(),this.elements=t}}function qFe(e,t){let n=WFe(t);for(const r of e.elements)n=n.filter(i=>!kh(i,r));return{arrayValue:{values:n}}}class mL extends cF{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Iye(e){return bs(e.integerValue||e.doubleValue)}function WFe(e){return FZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kXt{constructor(t,n){this.field=t,this.transform=n}}function RXt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof DA&&i instanceof DA||r instanceof MA&&i instanceof MA?$E(r.elements,i.elements,kh):r instanceof mL&&i instanceof mL?kh(r.Pe,i.Pe):r instanceof NA&&i instanceof NA}(e.transform,t.transform)}class $Xt{constructor(t,n){this.version=t,this.transformResults=n}}class kf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new kf}static exists(t){return new kf(void 0,t)}static updateTime(t){return new kf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function v$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class fF{}function GFe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new UZ(e.key,kf.none()):new dO(e.key,e.data,kf.none());{const n=e.data,r=Cu.empty();let i=new No(Oo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Oy(e.key,r,new bl(i.toArray()),kf.none())}}function NXt(e,t,n){e instanceof dO?function(i,s,o){const a=i.value.clone(),u=Pye(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Oy?function(i,s,o){if(!v$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Pye(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(YFe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function uC(e,t,n,r){return e instanceof dO?function(s,o,a,u){if(!v$(s.precondition,o))return a;const l=s.value.clone(),c=kye(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Oy?function(s,o,a,u){if(!v$(s.precondition,o))return a;const l=kye(s.fieldTransforms,u,o),c=o.data;return c.setAll(YFe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return v$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function DXt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=VFe(r.transform,i||null);s!=null&&(n===null&&(n=Cu.empty()),n.set(r.field,s))}return n||null}function Oye(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$E(r,i,(s,o)=>RXt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dO extends fF{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oy extends fF{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function YFe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Pye(e,t,n){const r=new Map;hi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,PXt(o,a,n[i]))}return r}function kye(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,OXt(s,o,t))}return r}class UZ extends fF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MXt extends fF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LXt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&NXt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=uC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=uC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=BFe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=GFe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(wn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Wn())}isEqual(t){return this.batchId===t.batchId&&$E(this.mutations,t.mutations,(n,r)=>Oye(n,r))&&$E(this.baseMutations,t.baseMutations,(n,r)=>Oye(n,r))}}class VZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){hi(t.mutations.length===r.length);let i=function(){return SXt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new VZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FXt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jXt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,ir;function BXt(e){switch(e){default:return gn();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function KFe(e){if(e===void 0)return Am("GRPC error has no .code"),Le.UNKNOWN;switch(e){case vs.OK:return Le.OK;case vs.CANCELLED:return Le.CANCELLED;case vs.UNKNOWN:return Le.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Le.INTERNAL;case vs.UNAVAILABLE:return Le.UNAVAILABLE;case vs.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case vs.NOT_FOUND:return Le.NOT_FOUND;case vs.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case vs.ABORTED:return Le.ABORTED;case vs.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case vs.DATA_LOSS:return Le.DATA_LOSS;default:return gn()}}(ir=vs||(vs={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zXt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UXt=new f1([4294967295,4294967295],0);function Rye(e){const t=zXt().encode(e),n=new vFe;return n.update(t),new Uint8Array(n.digest())}function $ye(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new f1([n,r],0),new f1([i,s],0)]}class HZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new r2(`Invalid padding: ${n}`);if(r<0)throw new r2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new r2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new r2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=f1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(f1.fromNumber(r)));return i.compare(UXt)===1&&(i=new f1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Rye(t),[r,i]=$ye(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new HZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Rye(t),[r,i]=$ye(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class r2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,hO.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new dF(wn.min(),i,new Vi(Sr),Im(),Wn())}}class hO{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new hO(r,n,Wn(),Wn(),Wn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class XFe{constructor(t,n){this.targetId=t,this.me=n}}class QFe{constructor(t,n,r=Ta.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Nye{constructor(){this.fe=0,this.ge=Mye(),this.pe=Ta.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Wn(),n=Wn(),r=Wn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:gn()}}),new hO(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Mye()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,hi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VXt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Im(),this.qe=Dye(),this.Qe=new Vi(Sr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:gn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(_q(s))if(r===0){const o=new Kt(s.path);this.Ue(n,o,da.newNoDocument(o,wn.min()))}else hi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=U1(r).toUint8Array()}catch(u){if(u instanceof AFe)return IA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new HZ(o,i,s)}catch(u){return IA(u instanceof r2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&_q(a.target)){const u=new Kt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,da.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Wn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new dF(t,n,this.Qe,this.ke,r);return this.ke=Im(),this.qe=Dye(),this.Qe=new Vi(Sr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Nye,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new No(Sr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Nt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Nye),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Dye(){return new Vi(Kt.comparator)}function Mye(){return new Vi(Kt.comparator)}const HXt={asc:"ASCENDING",desc:"DESCENDING"},qXt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WXt={and:"AND",or:"OR"};class GXt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Eq(e,t){return e.useProto3Json||aF(t)?t:{value:t}}function gL(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function JFe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function YXt(e,t){return gL(e,t.toTimestamp())}function lh(e){return hi(!!e),wn.fromTimestamp(function(n){const r=ty(n);return new zs(r.seconds,r.nanos)}(e))}function qZ(e,t){return xq(e,t).canonicalString()}function xq(e,t){const n=function(i){return new bi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function ZFe(e){const t=bi.fromString(e);return hi(i8e(t)),t}function Sq(e,t){return qZ(e.databaseId,t.path)}function c7(e,t){const n=ZFe(t);if(n.get(1)!==e.databaseId.projectId)throw new Ct(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ct(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kt(t8e(n))}function e8e(e,t){return qZ(e.databaseId,t)}function KXt(e){const t=ZFe(e);return t.length===4?bi.emptyPath():t8e(t)}function Tq(e){return new bi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function t8e(e){return hi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Lye(e,t,n){return{name:Sq(e,t),fields:n.value.mapValue.fields}}function XXt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:gn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(hi(c===void 0||typeof c=="string"),Ta.fromBase64String(c||"")):(hi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ta.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Le.UNKNOWN:KFe(l.code);return new Ct(c,l.message||"")}(o);n=new QFe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=c7(e,r.document.name),s=lh(r.document.updateTime),o=r.document.createTime?lh(r.document.createTime):wn.min(),a=new Cu({mapValue:{fields:r.document.fields}}),u=da.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new _$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=c7(e,r.document),s=r.readTime?lh(r.readTime):wn.min(),o=da.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=c7(e,r.document),s=r.removedTargetIds||[];n=new _$([],s,i,null)}else{if(!("filter"in t))return gn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jXt(i,s),a=r.targetId;n=new XFe(a,o)}}return n}function QXt(e,t){let n;if(t instanceof dO)n={update:Lye(e,t.key,t.value)};else if(t instanceof UZ)n={delete:Sq(e,t.key)};else if(t instanceof Oy)n={update:Lye(e,t.key,t.data),updateMask:oQt(t.fieldMask)};else{if(!(t instanceof MXt))return gn();n={verify:Sq(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof NA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof DA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof MA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mL)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw gn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:YXt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gn()}(e,t.precondition)),n}function JXt(e,t){return e&&e.length>0?(hi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?lh(i.updateTime):lh(s);return o.isEqual(wn.min())&&(o=lh(s)),new $Xt(o,i.transformResults||[])}(n,t))):[]}function ZXt(e,t){return{documents:[e8e(e,t.path)]}}function eQt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=e8e(e,i);const s=function(l){if(l.length!==0)return r8e(Bf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Ob(d.field),direction:rQt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Eq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function tQt(e){let t=KXt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){hi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=n8e(f);return d instanceof Bf&&kFe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new $A(Pb(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,aF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new pL(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new pL(h,d)}(n.endAt)),_Xt(t,i,o,s,a,"F",u,l)}function nQt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function n8e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Pb(n.unaryFilter.field);return Ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pb(n.unaryFilter.field);return Ss.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pb(n.unaryFilter.field);return Ss.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pb(n.unaryFilter.field);return Ss.create(o,"!=",{nullValue:"NULL_VALUE"});default:return gn()}}(e):e.fieldFilter!==void 0?function(n){return Ss.create(Pb(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Bf.create(n.compositeFilter.filters.map(r=>n8e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gn()}}(n.compositeFilter.op))}(e):gn()}function rQt(e){return HXt[e]}function iQt(e){return qXt[e]}function sQt(e){return WXt[e]}function Ob(e){return{fieldPath:e.canonicalString()}}function Pb(e){return Oo.fromServerFormat(e.fieldPath)}function r8e(e){return e instanceof Ss?function(n){if(n.op==="=="){if(xye(n.value))return{unaryFilter:{field:Ob(n.field),op:"IS_NAN"}};if(Eye(n.value))return{unaryFilter:{field:Ob(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xye(n.value))return{unaryFilter:{field:Ob(n.field),op:"IS_NOT_NAN"}};if(Eye(n.value))return{unaryFilter:{field:Ob(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ob(n.field),op:iQt(n.op),value:n.value}}}(e):e instanceof Bf?function(n){const r=n.getFilters().map(i=>r8e(i));return r.length===1?r[0]:{compositeFilter:{op:sQt(n.op),filters:r}}}(e):gn()}function oQt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function i8e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,n,r,i,s=wn.min(),o=wn.min(),a=Ta.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Kg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQt{constructor(t){this.ct=t}}function uQt(e){const t=tQt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQt{constructor(){this._n=new cQt}addToCollectionParentIndex(t,n){return this._n.add(n),Ke.resolve()}getCollectionParents(t,n){return Ke.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ke.resolve()}deleteFieldIndex(t,n){return Ke.resolve()}deleteAllFieldIndexes(t){return Ke.resolve()}createTargetIndexes(t,n){return Ke.resolve()}getDocumentsMatchingTarget(t,n){return Ke.resolve(null)}getIndexType(t,n){return Ke.resolve(0)}getFieldIndexes(t,n){return Ke.resolve([])}getNextCollectionGroupToUpdate(t){return Ke.resolve(null)}getMinOffset(t,n){return Ke.resolve(ey.min())}getMinOffsetFromCollectionGroup(t,n){return Ke.resolve(ey.min())}updateCollectionGroup(t,n,r){return Ke.resolve()}updateIndexEntries(t,n){return Ke.resolve()}}class cQt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new No(bi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new No(bi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new ME(0)}static Ln(){return new ME(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQt{constructor(){this.changes=new Jx(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,da.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ke.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&uC(r.mutation,i,bl.empty(),zs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Wn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Wn()){const i=Jv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=n2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Jv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Wn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Im();const o=aC(),a=function(){return aC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Oy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),uC(c.mutation,l,c.mutation.getFieldMask(),zs.now())):o.set(l.key,bl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new dQt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=aC();let i=new Vi((o,a)=>o-a),s=Wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||bl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Wn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=BFe();c.forEach(d=>{if(!s.has(d)){const h=GFe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ke.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Kt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):DFe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ke.resolve(Jv());let a=-1,u=s;return o.next(l=>Ke.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ke.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Wn())).next(c=>({batchId:a,changes:jFe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Kt(n)).next(r=>{let i=n2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=n2();return this.indexManager.getCollectionParents(t,s).next(a=>Ke.forEach(a,u=>{const l=function(f,d){return new Qx(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,da.newInvalidDocument(c)))});let a=n2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&uC(c.mutation,l,bl.empty(),zs.now()),lF(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ke.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lh(i.createTime)}}(n)),Ke.resolve()}getNamedQuery(t,n){return Ke.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:uQt(i.bundledQuery),readTime:lh(i.readTime)}}(n)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQt{constructor(){this.overlays=new Vi(Kt.comparator),this.hr=new Map}getOverlay(t,n){return Ke.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Jv();return Ke.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Ke.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ke.resolve()}getOverlaysForCollection(t,n,r){const i=Jv(),s=n.length+1,o=new Kt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ke.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Vi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Jv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Jv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ke.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FXt(n,r));let s=this.hr.get(n);s===void 0&&(s=Wn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WZ{constructor(){this.Pr=new No(Js.Ir),this.Tr=new No(Js.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Js(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Js(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Kt(new bi([])),r=new Js(n,t),i=new Js(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Kt(new bi([])),r=new Js(n,t),i=new Js(n,t+1);let s=Wn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Js(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Js{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Kt.comparator(t.key,n.key)||Sr(t.pr,n.pr)}static Er(t,n){return Sr(t.pr,n.pr)||Kt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new No(Js.Ir)}checkEmpty(t){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LXt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Js(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ke.resolve(o)}lookupMutationBatch(t,n){return Ke.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Js(n,0),i=new Js(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new No(Sr);return n.forEach(i=>{const s=new Js(i,0),o=new Js(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ke.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Kt.isDocumentKey(s)||(s=s.child(""));const o=new Js(new Kt(s),0);let a=new No(Sr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Ke.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){hi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ke.forEach(n.mutations,i=>{const s=new Js(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Js(n,0),i=this.wr.firstAfterOrEqual(r);return Ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ke.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQt{constructor(t){this.vr=t,this.docs=function(){return new Vi(Kt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ke.resolve(r?r.document.mutableCopy():da.newInvalidDocument(n))}getEntries(t,n){let r=Im();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():da.newInvalidDocument(i))}),Ke.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Im();const o=n.path,a=new Kt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||tXt(eXt(c),r)<=0||(i.has(c.key)||lF(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ke.resolve(s)}getAllFromCollectionGroup(t,n,r,i){gn()}Fr(t,n){return Ke.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new vQt(this)}getSize(t){return Ke.resolve(this.size)}}class vQt extends fQt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ke.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Qt{constructor(t){this.persistence=t,this.Mr=new Jx(n=>jZ(n),BZ),this.lastRemoteSnapshotVersion=wn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new WZ,this.targetCount=0,this.Lr=ME.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ke.resolve()}getLastRemoteSnapshotVersion(t){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ke.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ke.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new ME(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ke.resolve()}updateTargetData(t,n){return this.qn(n),Ke.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ke.waitFor(s).next(()=>i)}getTargetCount(t){return Ke.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ke.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ke.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ke.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ke.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ke.resolve(r)}containsKey(t,n){return Ke.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQt{constructor(t,n){this.Br={},this.overlays={},this.kr=new DZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new _Qt(this),this.indexManager=new lQt,this.remoteDocumentCache=function(i){return new yQt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new aQt(n),this.$r=new pQt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new mQt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new gQt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Nt("MemoryPersistence","Starting transaction:",t);const i=new wQt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Ke.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class wQt extends rXt{constructor(t){super(),this.currentSequenceNumber=t}}class GZ{constructor(t){this.persistence=t,this.zr=new WZ,this.jr=null}static Hr(t){return new GZ(t)}get Jr(){if(this.jr)return this.jr;throw gn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ke.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ke.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ke.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Jr,r=>{const i=Kt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,wn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ke.or([()=>Ke.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Wn(),i=Wn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new YZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EQt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xQt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return lqt()?8:iXt(jo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new EQt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(oT()<=Jn.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",Ib(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ke.resolve()):(oT()<=Jn.DEBUG&&Nt("QueryEngine","Query:",Ib(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(oT()<=Jn.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",Ib(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,uh(n))):Ke.resolve())}ji(t,n){if(Aye(n))return Ke.resolve(null);let r=uh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wq(n,null,"F"),r=uh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Wn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,wq(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Aye(n)||i.isEqual(wn.min())?Ke.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ke.resolve(null):(oT()<=Jn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ib(n)),this.es(t,o,n,ZKt(i,-1)).next(a=>a))})}Zi(t,n){let r=new No(LFe(t));return n.forEach((i,s)=>{lF(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return oT()<=Jn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Ib(n)),this.zi.getDocumentsMatchingQuery(t,n,ey.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Vi(Sr),this.rs=new Jx(s=>jZ(s),BZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hQt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function TQt(e,t,n,r){return new SQt(e,t,n,r)}async function s8e(e,t){const n=En(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Wn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function CQt(e,t){const n=En(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ke.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);hi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Wn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function o8e(e){const t=En(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function AQt(e,t){const n=En(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ta.EMPTY_BYTE_STRING,wn.min()).withLastLimboFreeSnapshotVersion(wn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Im(),l=Wn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(IQt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(wn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ke.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function IQt(e,t,n){let r=Wn(),i=Wn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Im();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(wn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Nt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function OQt(e,t){const n=En(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function PQt(e,t){const n=En(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Ke.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Kg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Cq(e,t,n){const r=En(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fO(o))throw o;Nt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Fye(e,t,n){const r=En(e);let i=wn.min(),s=Wn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=En(u),d=f.rs.get(c);return d!==void 0?Ke.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,uh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:wn.min(),n?s:Wn())).next(a=>(kQt(r,wXt(t),a),{documents:a,hs:s})))}function kQt(e,t,n){let r=e.ss.get(t)||wn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class jye{constructor(){this.activeTargetIds=AXt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class RQt{constructor(){this.no=new jye,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new jye,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Qt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bye{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fk=null;function f7(){return Fk===null?Fk=function(){return 268435456+Math.round(2147483648*Math.random())}():Fk++,"0x"+Fk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="WebChannelConnection";class MQt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=f7(),u=this.vo(n,r.toUriEncodedString());Nt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Nt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw IA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xx}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=NQt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=f7();return new Promise((o,a)=>{const u=new _Fe;u.setWithCredentials(!0),u.listenOnce(wFe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case g$.NO_ERROR:const c=u.getResponseJson();Nt(ta,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case g$.TIMEOUT:Nt(ta,`RPC '${t}' ${s} timed out`),a(new Ct(Le.DEADLINE_EXCEEDED,"Request time out"));break;case g$.HTTP_ERROR:const f=u.getStatus();if(Nt(ta,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(y)>=0?y:Le.UNKNOWN}(h.status);a(new Ct(p,h.message))}else a(new Ct(Le.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Ct(Le.UNAVAILABLE,"Connection failed."));break;default:gn()}}finally{Nt(ta,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Nt(ta,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=f7(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=SFe(),a=xFe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new bFe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Nt(ta,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new DQt({lo:g=>{h?Nt(ta,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Nt(ta,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Nt(ta,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,t2.EventType.OPEN,()=>{h||(Nt(ta,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,t2.EventType.CLOSE,()=>{h||(h=!0,Nt(ta,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,t2.EventType.ERROR,g=>{h||(h=!0,IA(ta,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Ct(Le.UNAVAILABLE,"The operation could not be completed")))}),m(f,t2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];hi(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){Nt(ta,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(A){const I=vs[A];if(I!==void 0)return KFe(I)}(E),b=w.message;S===void 0&&(S=Le.INTERNAL,b="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new Ct(S,b)),f.close()}else Nt(ta,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,EFe.STAT_EVENT,g=>{g.stat===mq.PROXY?Nt(ta,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===mq.NOPROXY&&Nt(ta,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function d7(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(e){return new GXt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8e{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new a8e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Le.RESOURCE_EXHAUSTED?(Am(n.toString()),Am("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Ct(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LQt extends u8e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=XXt(this.serializer,t),r=function(s){if(!("targetChange"in s))return wn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?wn.min():o.readTime?lh(o.readTime):wn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=Tq(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=_q(u)?{documents:ZXt(s,u)}:{query:eQt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=JFe(s,o.resumeToken);const l=Eq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(wn.min())>0){a.readTime=gL(s,o.snapshotVersion.toTimestamp());const l=Eq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=nQt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=Tq(this.serializer),n.removeTarget=t,this.i_(n)}}class FQt extends u8e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(hi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=JXt(t.writeResults,t.commitTime),r=lh(t.commitTime);return this.listener.A_(r,n)}return hi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Tq(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>QXt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jQt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ct(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,xq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ct(Le.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,xq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ct(Le.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class BQt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Am(n),this.y_=!1):Nt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{T_(this)&&(Nt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=En(u);l.M_.add(4),await mO(l),l.N_.set("Unknown"),l.M_.delete(4),await pO(l)}(this))})}),this.N_=new BQt(r,i)}}async function pO(e){if(T_(e))for(const t of e.x_)await t(!0)}async function mO(e){for(const t of e.x_)await t(!1)}function l8e(e,t){const n=En(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),JZ(n)?QZ(n):Zx(n).Xo()&&XZ(n,t))}function KZ(e,t){const n=En(e),r=Zx(n);n.F_.delete(t),r.Xo()&&c8e(n,t),n.F_.size===0&&(r.Xo()?r.n_():T_(n)&&n.N_.set("Unknown"))}function XZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Zx(e).P_(t)}function c8e(e,t){e.L_.xe(t),Zx(e).I_(t)}function QZ(e){e.L_=new VXt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Zx(e).start(),e.N_.w_()}function JZ(e){return T_(e)&&!Zx(e).Zo()&&e.F_.size>0}function T_(e){return En(e).M_.size===0}function f8e(e){e.L_=void 0}async function UQt(e){e.N_.set("Online")}async function VQt(e){e.F_.forEach((t,n)=>{XZ(e,t)})}async function HQt(e,t){f8e(e),JZ(e)?(e.N_.D_(t),QZ(e)):e.N_.set("Unknown")}async function qQt(e,t,n){if(e.N_.set("Online"),t instanceof QFe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Nt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await yL(e,r)}else if(t instanceof _$?e.L_.Ke(t):t instanceof XFe?e.L_.He(t):e.L_.We(t),!n.isEqual(wn.min()))try{const r=await o8e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ta.EMPTY_BYTE_STRING,c.snapshotVersion)),c8e(s,u);const f=new Kg(c.target,u,l,c.sequenceNumber);XZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Nt("RemoteStore","Failed to raise snapshot:",r),await yL(e,r)}}async function yL(e,t,n){if(!fO(t))throw t;e.M_.add(1),await mO(e),e.N_.set("Offline"),n||(n=()=>o8e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Nt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await pO(e)})}function d8e(e,t){return t().catch(n=>yL(e,n,t))}async function pF(e){const t=En(e),n=ny(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;WQt(t);)try{const i=await OQt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,GQt(t,i)}catch(i){await yL(t,i)}h8e(t)&&p8e(t)}function WQt(e){return T_(e)&&e.v_.length<10}function GQt(e,t){e.v_.push(t);const n=ny(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function h8e(e){return T_(e)&&!ny(e).Zo()&&e.v_.length>0}function p8e(e){ny(e).start()}async function YQt(e){ny(e).V_()}async function KQt(e){const t=ny(e);for(const n of e.v_)t.d_(n.mutations)}async function XQt(e,t,n){const r=e.v_.shift(),i=VZ.from(r,t,n);await d8e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await pF(e)}async function QQt(e,t){t&&ny(e).E_&&await async function(r,i){if(function(o){return BXt(o)&&o!==Le.ABORTED}(i.code)){const s=r.v_.shift();ny(r).t_(),await d8e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pF(r)}}(e,t),h8e(e)&&p8e(e)}async function zye(e,t){const n=En(e);n.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const r=T_(n);n.M_.add(3),await mO(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await pO(n)}async function JQt(e,t){const n=En(e);t?(n.M_.delete(2),await pO(n)):t||(n.M_.add(2),await mO(n),n.N_.set("Unknown"))}function Zx(e){return e.B_||(e.B_=function(n,r,i){const s=En(n);return s.f_(),new LQt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:UQt.bind(null,e),To:VQt.bind(null,e),Ao:HQt.bind(null,e),h_:qQt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),JZ(e)?QZ(e):e.N_.set("Unknown")):(await e.B_.stop(),f8e(e))})),e.B_}function ny(e){return e.k_||(e.k_=function(n,r,i){const s=En(n);return s.f_(),new FQt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:YQt.bind(null,e),Ao:QQt.bind(null,e),R_:KQt.bind(null,e),A_:XQt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await pF(e)):(await e.k_.stop(),e.v_.length>0&&(Nt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new nm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new ZZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ct(Le.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eee(e,t){if(Am("AsyncQueue",`${t}: ${e}`),fO(e))return new Ct(Le.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Kt.comparator(n.key,r.key):(n,r)=>Kt.comparator(n.key,r.key),this.keyedMap=n2(),this.sortedSet=new Vi(this.comparator)}static emptySet(t){return new Mw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Mw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Mw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uye{constructor(){this.q_=new Vi(Kt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):gn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class LE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new LE(t,n,Mw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&uF(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZQt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class eJt{constructor(){this.queries=new Jx(t=>MFe(t),uF),this.onlineState="Unknown",this.z_=new Set}}async function m8e(e,t){const n=En(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new ZQt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=eee(o,`Initialization of query '${Ib(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&tee(n)}async function g8e(e,t){const n=En(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tJt(e,t){const n=En(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&tee(n)}function nJt(e,t,n){const r=En(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function tee(e){e.z_.forEach(t=>{t.next()})}var Aq,Vye;(Vye=Aq||(Aq={})).J_="default",Vye.Cache="cache";class y8e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new LE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=LE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Aq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8e{constructor(t){this.key=t}}class _8e{constructor(t){this.key=t}}class rJt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Wn(),this.mutatedKeys=Wn(),this.Ia=LFe(t),this.Ta=new Mw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Uye,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=lF(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new LE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Uye,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Wn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new _8e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new v8e(r))}),n}pa(t){this.la=t.hs,this.Pa=Wn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return LE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class iJt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class sJt{constructor(t){this.key=t,this.wa=!1}}class oJt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Jx(a=>MFe(a),uF),this.Da=new Map,this.Ca=new Set,this.va=new Vi(Kt.comparator),this.Fa=new Map,this.Ma=new WZ,this.xa={},this.Oa=new Map,this.Na=ME.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function aJt(e,t,n=!0){const r=T8e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await b8e(r,t,n,!0),i}async function uJt(e,t){const n=T8e(e);await b8e(n,t,!0,!1)}async function b8e(e,t,n,r){const i=await PQt(e.localStore,uh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await lJt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&l8e(e.remoteStore,i),a}async function lJt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await Fye(m.localStore,g.query,!1).then(({documents:b})=>g.view.da(b,_)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(_,m.isPrimaryClient,w,E);return qye(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Fye(e.localStore,t,!0),o=new rJt(t,s.hs),a=o.da(s.documents),u=hO.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);qye(e,n,l.fa);const c=new iJt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function cJt(e,t,n){const r=En(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!uF(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&KZ(r.remoteStore,i.targetId),Iq(r,i.targetId)}).catch(cO)):(Iq(r,i.targetId),await Cq(r.localStore,i.targetId,!0))}async function fJt(e,t){const n=En(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),KZ(n.remoteStore,r.targetId))}async function dJt(e,t,n){const r=_Jt(e);try{const i=await function(o,a){const u=En(o),l=zs.now(),c=a.reduce((h,p)=>h.add(p.key),Wn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Im(),m=Wn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=DXt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new Oy(v.key,_,IFe(_.value.mapValue),kf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:jFe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Vi(Sr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await gO(r,i.changes),await pF(r.remoteStore)}catch(i){const s=eee(i,"Failed to persist write");n.reject(s)}}async function w8e(e,t){const n=En(e);try{const r=await AQt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(hi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?hi(o.wa):i.removedDocuments.size>0&&(hi(o.wa),o.wa=!1))}),await gO(n,r,t)}catch(r){await cO(r)}}function Hye(e,t,n){const r=En(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=En(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&tee(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function hJt(e,t,n){const r=En(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Vi(Kt.comparator);o=o.insert(s,da.newNoDocument(s,wn.min()));const a=Wn().add(s),u=new dF(wn.min(),new Map,new Vi(Sr),o,a);await w8e(r,u),r.va=r.va.remove(s),r.Fa.delete(t),nee(r)}else await Cq(r.localStore,t,!1).then(()=>Iq(r,t,n)).catch(cO)}async function pJt(e,t){const n=En(e),r=t.batch.batchId;try{const i=await CQt(n.localStore,t);x8e(n,r,null),E8e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gO(n,i)}catch(i){await cO(i)}}async function mJt(e,t,n){const r=En(e);try{const i=await function(o,a){const u=En(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(hi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);x8e(r,t,n),E8e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await gO(r,i)}catch(i){await cO(i)}}function E8e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function x8e(e,t,n){const r=En(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Iq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||S8e(e,r)})}function S8e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(KZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),nee(e))}function qye(e,t,n){for(const r of n)r instanceof v8e?(e.Ma.addReference(r.key,t),gJt(e,r)):r instanceof _8e?(Nt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||S8e(e,r.key)):gn()}function gJt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Nt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),nee(e))}function nee(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Kt(bi.fromString(t)),r=e.Na.next();e.Fa.set(r,new sJt(n)),e.va=e.va.insert(n,r),l8e(e.remoteStore,new Kg(uh(zZ(n.path)),r,"TargetPurposeLimboResolution",DZ.oe))}}async function gO(e,t,n){const r=En(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=YZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=En(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ke.forEach(l,d=>Ke.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ke.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!fO(f))throw f;Nt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function yJt(e,t){const n=En(e);if(!n.currentUser.isEqual(t)){Nt("SyncEngine","User change. New user:",t.toKey());const r=await s8e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Ct(Le.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await gO(n,r.us)}}function vJt(e,t){const n=En(e),r=n.Fa.get(t);if(r&&r.wa)return Wn().add(r.key);{let i=Wn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function T8e(e){const t=En(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=w8e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vJt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hJt.bind(null,t),t.Sa.h_=tJt.bind(null,t.eventManager),t.Sa.ka=nJt.bind(null,t.eventManager),t}function _Jt(e){const t=En(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pJt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mJt.bind(null,t),t}class Wye{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=hF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return TQt(this.persistence,new xQt,t.initialUser,this.serializer)}createPersistence(t){return new bQt(GZ.Hr,this.serializer)}createSharedClientState(t){return new RQt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bJt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hye(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yJt.bind(null,this.syncEngine),await JQt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new eJt}()}createDatastore(t){const n=hF(t.databaseInfo.databaseId),r=function(s){return new MQt(s)}(t.databaseInfo);return function(s,o,a,u){return new jQt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new zQt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Hye(this.syncEngine,n,0),function(){return Bye.D()?new Bye:new $Qt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new oJt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=En(r);Nt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await mO(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Am("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gu.UNAUTHENTICATED,this.clientId=TFe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Nt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Nt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ct(Le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=eee(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function h7(e,t){e.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await s8e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Gye(e,t){e.asyncQueue.verifyOperationInProgress();const n=await A8e(e);Nt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>zye(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>zye(t.remoteStore,i)),e._onlineComponents=t}function EJt(e){return e.name==="FirebaseError"?e.code===Le.FAILED_PRECONDITION||e.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function A8e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Nt("FirestoreClient","Using user provided OfflineComponentProvider");try{await h7(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!EJt(n))throw n;IA("Error using user provided cache. Falling back to memory cache: "+n),await h7(e,new Wye)}}else Nt("FirestoreClient","Using default OfflineComponentProvider"),await h7(e,new Wye);return e._offlineComponents}async function ree(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Nt("FirestoreClient","Using user provided OnlineComponentProvider"),await Gye(e,e._uninitializedComponentsProvider._online)):(Nt("FirestoreClient","Using default OnlineComponentProvider"),await Gye(e,new bJt))),e._onlineComponents}function xJt(e){return A8e(e).then(t=>t.persistence)}function SJt(e){return ree(e).then(t=>t.remoteStore)}function TJt(e){return ree(e).then(t=>t.syncEngine)}async function I8e(e){const t=await ree(e),n=t.eventManager;return n.onListen=aJt.bind(null,t.syncEngine),n.onUnlisten=cJt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=uJt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fJt.bind(null,t.syncEngine),n}function CJt(e){return e.asyncQueue.enqueue(async()=>{const t=await xJt(e),n=await SJt(e);return t.setNetworkEnabled(!0),function(i){const s=En(i);return s.M_.delete(0),pO(s)}(n)})}function AJt(e,t,n={}){const r=new nm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new C8e({next:d=>{o.enqueueAndForget(()=>g8e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Ct(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Ct(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new y8e(zZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return m8e(s,f)}(await I8e(e),e.asyncQueue,t,n,r)),r.promise}function IJt(e,t,n={}){const r=new nm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new C8e({next:d=>{o.enqueueAndForget(()=>g8e(s,f)),d.fromCache&&u.source==="server"?l.reject(new Ct(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new y8e(a,c,{includeMetadataChanges:!0,ra:!0});return m8e(s,f)}(await I8e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yye=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8e(e,t,n){if(!n)throw new Ct(Le.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function OJt(e,t,n,r){if(t===!0&&r===!0)throw new Ct(Le.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Kye(e){if(!Kt.isDocumentKey(e))throw new Ct(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Xye(e){if(Kt.isDocumentKey(e))throw new Ct(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function mF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":gn()}function Rh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ct(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mF(e);throw new Ct(Le.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qye{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ct(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ct(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}OJt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O8e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ct(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ct(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ct(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class iee{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qye({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ct(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Ct(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qye(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qKt;switch(r.type){case"firstParty":return new YKt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ct(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Yye.get(n);r&&(Nt("ComponentProvider","Removing Datastore"),Yye.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new C_(this.firestore,t,this._query)}}class Wa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new E0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wa(this.firestore,t,this._key)}}class E0 extends C_{constructor(t,n,r){super(t,n,zZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wa(this.firestore,null,new Kt(t))}withConverter(t){return new E0(this.firestore,t,this._path)}}function Ky(e,t,...n){if(e=es(e),P8e("collection","path",t),e instanceof iee){const r=bi.fromString(t,...n);return Xye(r),new E0(e,null,r)}{if(!(e instanceof Wa||e instanceof E0))throw new Ct(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bi.fromString(t,...n));return Xye(r),new E0(e.firestore,null,r)}}function ks(e,t,...n){if(e=es(e),arguments.length===1&&(t=TFe.newId()),P8e("doc","path",t),e instanceof iee){const r=bi.fromString(t,...n);return Kye(r),new Wa(e,null,new Kt(r))}{if(!(e instanceof Wa||e instanceof E0))throw new Ct(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(bi.fromString(t,...n));return Kye(r),new Wa(e.firestore,e instanceof E0?e.converter:null,new Kt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new a8e(this,"async_queue_retry"),this.hu=()=>{const n=d7();n&&Nt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=d7();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=d7();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new nm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!fO(t))throw t;Nt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Am("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=ZZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&gn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class A_ extends iee{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new PJt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||k8e(this),this._firestoreClient.terminate()}}function kJt(e,t,n){n||(n="(default)");const r=Yx(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(TA(s,t))return i;throw new Ct(Le.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ct(Le.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ct(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function gF(e){return e._firestoreClient||k8e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function k8e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new aXt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,O8e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new wJt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function RJt(e){return CJt(gF(e=Rh(e,A_)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new FE(Ta.fromBase64String(t))}catch(n){throw new Ct(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new FE(Ta.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ct(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let see=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ct(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ct(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Sr(this._lat,t._lat)||Sr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Jt=/^__.*__$/;class NJt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Oy(t,this.data,this.fieldMask,n,this.fieldTransforms):new dO(t,this.data,n,this.fieldTransforms)}}class R8e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Oy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function $8e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gn()}}class oee{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new oee(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return vL(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if($8e(this.fu)&&$Jt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class DJt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||hF(t)}Fu(t,n,r,i=!1){return new oee({fu:t,methodName:n,vu:r,path:Oo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aee(e){const t=e._freezeSettings(),n=hF(e._databaseId);return new DJt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function MJt(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);lee("Data must be an object, but it was:",o,r);const a=N8e(r,o);let u,l;if(s.merge)u=new bl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=Oq(t,f,n);if(!o.contains(d))throw new Ct(Le.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);M8e(c,d)||c.push(d)}u=new bl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new NJt(new Cu(a),u,l)}class _F extends vF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _F}}class uee extends vF{_toFieldTransform(t){return new kXt(t.path,new NA)}isEqual(t){return t instanceof uee}}function LJt(e,t,n,r){const i=e.Fu(1,t,n);lee("Data must be an object, but it was:",i,r);const s=[],o=Cu.empty();S_(r,(u,l)=>{const c=cee(t,u,n);l=es(l);const f=i.Su(c);if(l instanceof _F)s.push(c);else{const d=yO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new bl(s);return new R8e(o,a,i.fieldTransforms)}function FJt(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Oq(t,r,n)],u=[i];if(s.length%2!=0)throw new Ct(Le.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Oq(t,s[d])),u.push(s[d+1]);const l=[],c=Cu.empty();for(let d=a.length-1;d>=0;--d)if(!M8e(l,a[d])){const h=a[d];let p=u[d];p=es(p);const m=o.Su(h);if(p instanceof _F)l.push(h);else{const g=yO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new bl(l);return new R8e(c,f,o.fieldTransforms)}function jJt(e,t,n,r=!1){return yO(n,e.Fu(r?4:3,t))}function yO(e,t){if(D8e(e=es(e)))return lee("Unsupported field value:",t,e),N8e(e,t);if(e instanceof vF)return function(r,i){if(!$8e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=yO(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IXt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zs.fromDate(r);return{timestampValue:gL(i.serializer,s)}}if(r instanceof zs){const s=new zs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gL(i.serializer,s)}}if(r instanceof see)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof FE)return{bytesValue:JFe(i.serializer,r._byteString)};if(r instanceof Wa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${mF(r)}`)}(e,t)}function N8e(e,t){const n={};return CFe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):S_(e,(r,i)=>{const s=yO(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function D8e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zs||e instanceof see||e instanceof FE||e instanceof Wa||e instanceof vF)}function lee(e,t,n){if(!D8e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=mF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Oq(e,t,n){if((t=es(t))instanceof yF)return t._internalPath;if(typeof t=="string")return cee(e,t);throw vL("Field path arguments must be of type string or ",e,!1,void 0,n)}const BJt=new RegExp("[~\\*/\\[\\]]");function cee(e,t,n){if(t.search(BJt)>=0)throw vL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new yF(...t.split("."))._internalPath}catch{throw vL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function vL(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ct(Le.INVALID_ARGUMENT,a+e+u)}function M8e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new zJt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(bF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zJt extends L8e{data(){return super.data()}}function bF(e,t){return typeof t=="string"?cee(e,t):t instanceof yF?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UJt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ct(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fee{}class F8e extends fee{}function Jye(e,t,...n){let r=[];t instanceof fee&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof dee).length,a=s.filter(u=>u instanceof wF).length;if(o>1||o>0&&a>0)throw new Ct(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class wF extends F8e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new wF(t,n,r)}_apply(t){const n=this._parse(t);return j8e(t._query,n),new C_(t.firestore,t.converter,bq(t._query,n))}_parse(t){const n=aee(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ct(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){eve(f,c);const h=[];for(const p of f)h.push(Zye(u,s,p));d={arrayValue:{values:h}}}else d=Zye(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||eve(f,c),d=jJt(a,o,f,c==="in"||c==="not-in");return Ss.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function VJt(e,t,n){const r=t,i=bF("where",e);return wF._create(i,r,n)}class dee extends fee{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new dee(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)j8e(o,u),o=bq(o,u)}(t._query,n),new C_(t.firestore,t.converter,bq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hee extends F8e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new hee(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Ct(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ct(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $A(s,o)}(t._query,this._field,this._direction);return new C_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Qx(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function HJt(e,t="asc"){const n=t,r=bF("orderBy",e);return hee._create(r,n)}function Zye(e,t,n){if(typeof(n=es(n))=="string"){if(n==="")throw new Ct(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DFe(t)&&n.indexOf("/")!==-1)throw new Ct(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(bi.fromString(n));if(!Kt.isDocumentKey(r))throw new Ct(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wye(e,new Kt(r))}if(n instanceof Wa)return wye(e,n._key);throw new Ct(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mF(n)}.`)}function eve(e,t){if(!Array.isArray(e)||e.length===0)throw new Ct(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function j8e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ct(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ct(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class qJt{convertValue(t,n="none"){switch(V1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(U1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw gn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return S_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new see(bs(t.latitude),bs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=LZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(PA(t));default:return null}}convertTimestamp(t){const n=ty(t);return new zs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=bi.fromString(t);hi(i8e(r));const i=new kA(r.get(1),r.get(3)),s=new Kt(r.popFirst(5));return i.isEqual(n)||Am(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJt(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class B8e extends L8e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new b$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(bF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class b$ extends B8e{data(t={}){return super.data(t)}}class GJt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new i2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new b$(this._firestore,this._userDataWriter,r.key,r,new i2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ct(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new b$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new i2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new b$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new i2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:YJt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YJt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(e){e=Rh(e,Wa);const t=Rh(e.firestore,A_);return AJt(gF(t),e._key).then(n=>XJt(t,e,n))}class z8e extends qJt{constructor(t){super(),this.firestore=t}convertBytes(t){return new FE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wa(this.firestore,null,n)}}function uT(e){e=Rh(e,C_);const t=Rh(e.firestore,A_),n=gF(t),r=new z8e(t);return UJt(e._query),IJt(n,e._query).then(i=>new GJt(t,r,e,i))}function Kl(e,t,n){e=Rh(e,Wa);const r=Rh(e.firestore,A_),i=WJt(e.converter,t,n);return pee(r,[MJt(aee(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,kf.none())])}function tve(e,t,n,...r){e=Rh(e,Wa);const i=Rh(e.firestore,A_),s=aee(i);let o;return o=typeof(t=es(t))=="string"||t instanceof yF?FJt(s,"updateDoc",e._key,t,n,r):LJt(s,"updateDoc",e._key,t),pee(i,[o.toMutation(e._key,kf.exists(!0))])}function KJt(e){return pee(Rh(e.firestore,A_),[new UZ(e._key,kf.none())])}function pee(e,t){return function(r,i){const s=new nm;return r.asyncQueue.enqueueAndForget(async()=>dJt(await TJt(r),i,s)),s.promise}(gF(e),t)}function XJt(e,t,n){const r=n.docs.get(t._key),i=new z8e(e);return new B8e(e,i,t._key,r,new i2(n.hasPendingWrites,n.fromCache),t.converter)}function QJt(){return new uee("serverTimestamp")}(function(t,n=!0){(function(i){Xx=i})(x_),Tm(new Oh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new A_(new WKt(r.getProvider("auth-internal")),new XKt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ct(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Of(yye,"4.6.3",t),Of(yye,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=new Map,U8e={activated:!1,tokenObservers:[]},JJt={initialized:!1,enabled:!1};function Us(e){return Pq.get(e)||Object.assign({},U8e)}function ZJt(e,t){return Pq.set(e,t),Pq.get(e)}function EF(){return JJt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8e="https://content-firebaseappcheck.googleapis.com/v1",eZt="exchangeRecaptchaV3Token",tZt="exchangeDebugToken",nve={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},nZt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new SA,this.pending.promise.catch(n=>{}),await iZt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new SA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function iZt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sZt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ru=new Gx("appCheck","AppCheck",sZt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rve(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function mee(e){if(!Us(e).activated)throw Ru.create("use-before-activation",{appName:e.name})}function H8e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=jk(n)+"d:"),r&&(o+=jk(r)+"h:"),o+=jk(i)+"m:"+jk(s)+"s",o}function jk(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gee({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Ru.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Ru.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Ru.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ru.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function oZt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${V8e}/projects/${n}/apps/${r}:${eZt}?key=${i}`,body:{recaptcha_v3_token:t}}}function q8e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${V8e}/projects/${n}/apps/${r}:${tZt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aZt="firebase-app-check-database",uZt=1,LA="firebase-app-check-store",W8e="debug-token";let Bk=null;function G8e(){return Bk||(Bk=new Promise((e,t)=>{try{const n=indexedDB.open(aZt,uZt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ru.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(LA,{keyPath:"compositeKey"})}}}catch(n){t(Ru.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Bk)}function lZt(e){return K8e(X8e(e))}function cZt(e,t){return Y8e(X8e(e),t)}function fZt(e){return Y8e(W8e,e)}function dZt(){return K8e(W8e)}async function Y8e(e,t){const r=(await G8e()).transaction(LA,"readwrite"),s=r.objectStore(LA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Ru.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function K8e(e){const n=(await G8e()).transaction(LA,"readonly"),i=n.objectStore(LA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Ru.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function X8e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new nF("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hZt(e){if(yZ()){let t;try{t=await lZt(e)}catch(n){FA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function p7(e,t){return yZ()?cZt(e,t).catch(n=>{FA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function pZt(){let e;try{e=await dZt()}catch{}if(e)return e;{const t=vqt();return fZt(t).catch(n=>FA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yee(){return EF().enabled}async function vee(){const e=EF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function mZt(){const e=m5e(),t=EF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new SA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(pZt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gZt={error:"UNKNOWN_ERROR"};function yZt(e){return gZ.encodeString(JSON.stringify(e),!1)}async function kq(e,t=!1){const n=e.app;mee(n);const r=Us(n);let i=r.token,s;if(i&&!ew(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(ew(u)?i=u:await p7(n,void 0))}if(!t&&i&&ew(i))return{token:i.token};let o=!1;if(yee()){r.exchangeTokenPromise||(r.exchangeTokenPromise=gee(q8e(n,await vee()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await p7(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?FA.warn(u.message):FA.error(u),s=u}let a;return i?s?ew(i)?a={token:i.token,internalError:s}:a=sve(s):(a={token:i.token},r.token=i,await p7(n,i)):a=sve(s),o&&Z8e(n,a),a}async function vZt(e){const t=e.app;mee(t);const{provider:n}=Us(t);if(yee()){const r=await vee(),{token:i}=await gee(q8e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function Q8e(e,t,n,r){const{app:i}=e,s=Us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ew(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),ive(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ive(e))}function J8e(e,t){const n=Us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function ive(e){const{app:t}=e,n=Us(t);let r=n.tokenRefresher;r||(r=_Zt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function _Zt(e){const{app:t}=e;return new rZt(async()=>{const n=Us(t);let r;if(n.token?r=await kq(e,!0):r=await kq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},nve.RETRIAL_MIN_WAIT,nve.RETRIAL_MAX_WAIT)}function Z8e(e,t){const n=Us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function ew(e){return e.expireTimeMillis-Date.now()>0}function sve(e){return{token:yZt(gZt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Us(this.app);for(const n of t)J8e(this.app,n.next);return Promise.resolve()}}function wZt(e,t){return new bZt(e,t)}function EZt(e){return{getToken:t=>kq(e,t),getLimitedUseToken:()=>vZt(e),addTokenListener:t=>Q8e(e,"INTERNAL",t),removeTokenListener:t=>J8e(e.app,t)}}const xZt="@firebase/app-check",SZt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZt="https://www.google.com/recaptcha/api.js";function CZt(e,t){const n=new SA,r=Us(e);r.reCAPTCHAState={initialized:n};const i=AZt(e),s=rve(!1);return s?ove(e,t,s,i,n):PZt(()=>{const o=rve(!1);if(!o)throw new Error("no recaptcha");ove(e,t,o,i,n)}),n.promise}function ove(e,t,n,r,i){n.ready(()=>{OZt(e,t,n,r),i.resolve(n)})}function AZt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function IZt(e){mee(e);const n=await Us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function OZt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Us(e).reCAPTCHAState.succeeded=!1}}),s=Us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function PZt(e){const t=document.createElement("script");t.src=TZt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ee{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;RZt(this._throttleData);const i=await IZt(this._app).catch(o=>{throw Ru.create("recaptcha-error")});if(!(!((t=Us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ru.create("recaptcha-error");let s;try{s=await gee(oZt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=kZt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ru.create("throttled",{time:H8e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=Yx(t,"heartbeat"),CZt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof _ee?this._siteKey===t._siteKey:!1}}function kZt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+nZt,httpStatus:e};{const n=t?t.backoffCount:0,r=xqt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function RZt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ru.create("throttled",{time:H8e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Zt(e=_Z(),t){e=es(e);const n=Yx(e,"app-check");if(EF().initialized||mZt(),yee()&&vee().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ru.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return NZt(e,t.provider,t.isTokenAutoRefreshEnabled),Us(e).isTokenAutoRefreshEnabled&&Q8e(r,"INTERNAL",()=>{}),r}function NZt(e,t,n){const r=ZJt(e,Object.assign({},U8e));r.activated=!0,r.provider=t,r.cachedTokenPromise=hZt(e).then(i=>(i&&ew(i)&&(r.token=i,Z8e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const DZt="app-check",ave="app-check-internal";function MZt(){Tm(new Oh(DZt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return wZt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(ave).initialize()})),Tm(new Oh(ave,e=>{const t=e.getProvider("app-check").getImmediate();return EZt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Of(xZt,SZt)}MZt();function zk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var eje={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof zk=="function"&&zk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof zk=="function"&&zk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var b=new this.constructor(o);if(this.state!==c){var T=this.state===l?E:S;h(b,T,this.outcome)}else this.queue.push(new d(b,E,S));return b};function d(E,S,b){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,b){s(function(){var T;try{T=S(b)}catch(A){return a.reject(E,A)}T===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,T)})}a.resolve=function(E,S){var b=g(p,S);if(b.status==="error")return a.reject(E,b.value);var T=b.value;if(T)m(E,T);else{E.state=l,E.outcome=S;for(var A=-1,I=E.queue.length;++A<I;)E.queue[A].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var b=-1,T=E.queue.length;++b<T;)E.queue[b].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var b=!1;function T($){b||(b=!0,a.reject(E,$))}function A($){b||(b=!0,a.resolve(E,$))}function I(){S(A,T)}var k=g(I);k.status==="error"&&T(k.value)}function g(E,S){var b={};try{b.value=E(S),b.status="success"}catch(T){b.status="error",b.value=T}return b}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=E.length,T=!1;if(!b)return this.resolve([]);for(var A=new Array(b),I=0,k=-1,$=new this(o);++k<b;)P(E[k],k);return $;function P(N,F){S.resolve(N).then(z,function(W){T||(T=!0,a.reject($,W))});function z(W){A[F]=W,++I===b&&!T&&(T=!0,a.resolve($,A))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=E.length,T=!1;if(!b)return this.resolve([]);for(var A=-1,I=new this(o);++A<b;)k(E[A]);return I;function k($){S.resolve($).then(function(P){T||(T=!0,a.resolve(I,P))},function(P){T||(T=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),oe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||oe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,oe){K=K||[],oe=oe||{};try{return new Blob(K,oe)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,de=new ee,ye=0;ye<K.length;ye+=1)de.append(K[ye]);return de.getBlob(oe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(K,oe){oe&&K.then(function(ee){oe(null,ee)},function(ee){oe(ee)})}function h(K,oe,ee){typeof oe=="function"&&K.then(oe),typeof ee=="function"&&K.catch(ee)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",E="readwrite";function S(K){for(var oe=K.length,ee=new ArrayBuffer(oe),de=new Uint8Array(ee),ye=0;ye<oe;ye++)de[ye]=K.charCodeAt(ye);return ee}function b(K){return new f(function(oe){var ee=K.transaction(g,E),de=c([""]);ee.objectStore(g).put(de,"key"),ee.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),oe(!1)},ee.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);oe(pe||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function T(K){return typeof y=="boolean"?f.resolve(y):b(K).then(function(oe){return y=oe,y})}function A(K){var oe=v[K.name],ee={};ee.promise=new f(function(de,ye){ee.resolve=de,ee.reject=ye}),oe.deferredOperations.push(ee),oe.dbReady?oe.dbReady=oe.dbReady.then(function(){return ee.promise}):oe.dbReady=ee.promise}function I(K){var oe=v[K.name],ee=oe.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function k(K,oe){var ee=v[K.name],de=ee.deferredOperations.pop();if(de)return de.reject(oe),de.promise}function $(K,oe){return new f(function(ee,de){if(v[K.name]=v[K.name]||Y(),K.db)if(oe)A(K),K.db.close();else return ee(K.db);var ye=[K.name];oe&&ye.push(K.version);var pe=u.open.apply(u,ye);oe&&(pe.onupgradeneeded=function(Pe){var ze=pe.result;try{ze.createObjectStore(K.storeName),Pe.oldVersion<=1&&ze.createObjectStore(g)}catch(He){if(He.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+Pe.oldVersion+" to version "+Pe.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw He}}),pe.onerror=function(Pe){Pe.preventDefault(),de(pe.error)},pe.onsuccess=function(){var Pe=pe.result;Pe.onversionchange=function(ze){ze.target.close()},ee(Pe),I(K)}})}function P(K){return $(K,!1)}function N(K){return $(K,!0)}function F(K,oe){if(!K.db)return!0;var ee=!K.db.objectStoreNames.contains(K.storeName),de=K.version<K.db.version,ye=K.version>K.db.version;if(de&&(K.version!==oe&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),ye||ee){if(ee){var pe=K.db.version+1;pe>K.version&&(K.version=pe)}return!0}return!1}function z(K){return new f(function(oe,ee){var de=new FileReader;de.onerror=ee,de.onloadend=function(ye){var pe=btoa(ye.target.result||"");oe({__local_forage_encoded_blob:!0,data:pe,type:K.type})},de.readAsBinaryString(K)})}function W(K){var oe=S(atob(K.data));return c([oe],{type:K.type})}function V(K){return K&&K.__local_forage_encoded_blob}function G(K){var oe=this,ee=oe._initReady().then(function(){var de=v[oe._dbInfo.name];if(de&&de.dbReady)return de.dbReady});return h(ee,K,K),ee}function M(K){A(K);for(var oe=v[K.name],ee=oe.forages,de=0;de<ee.length;de++){var ye=ee[de];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return K.db=null,P(K).then(function(pe){return K.db=pe,F(K)?N(K):pe}).then(function(pe){K.db=oe.db=pe;for(var Pe=0;Pe<ee.length;Pe++)ee[Pe]._dbInfo.db=pe}).catch(function(pe){throw k(K,pe),pe})}function H(K,oe,ee,de){de===void 0&&(de=1);try{var ye=K.db.transaction(K.storeName,oe);ee(null,ye)}catch(pe){if(de>0&&(!K.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!K.db||pe.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),N(K)}).then(function(){return M(K).then(function(){H(K,oe,ee,de-1)})}).catch(ee);ee(pe)}}function Y(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(K){var oe=this,ee={db:null};if(K)for(var de in K)ee[de]=K[de];var ye=v[ee.name];ye||(ye=Y(),v[ee.name]=ye),ye.forages.push(oe),oe._initReady||(oe._initReady=oe.ready,oe.ready=G);var pe=[];function Pe(){return f.resolve()}for(var ze=0;ze<ye.forages.length;ze++){var He=ye.forages[ze];He!==oe&&pe.push(He._initReady().catch(Pe))}var qe=ye.forages.slice(0);return f.all(pe).then(function(){return ee.db=ye.db,P(ee)}).then(function(rt){return ee.db=rt,F(ee,oe._defaultConfig.version)?N(ee):rt}).then(function(rt){ee.db=ye.db=rt,oe._dbInfo=ee;for(var At=0;At<qe.length;At++){var xn=qe[At];xn!==oe&&(xn._dbInfo.db=ee.db,xn._dbInfo.version=ee.version)}})}function B(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){H(ee._dbInfo,w,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=He.get(K);qe.onsuccess=function(){var rt=qe.result;rt===void 0&&(rt=null),V(rt)&&(rt=W(rt)),ye(rt)},qe.onerror=function(){pe(qe.error)}}catch(rt){pe(rt)}})}).catch(pe)});return d(de,oe),de}function q(K,oe){var ee=this,de=new f(function(ye,pe){ee.ready().then(function(){H(ee._dbInfo,w,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=He.openCursor(),rt=1;qe.onsuccess=function(){var At=qe.result;if(At){var xn=At.value;V(xn)&&(xn=W(xn));var jt=K(xn,At.key,rt++);jt!==void 0?ye(jt):At.continue()}else ye()},qe.onerror=function(){pe(qe.error)}}catch(At){pe(At)}})}).catch(pe)});return d(de,oe),de}function Z(K,oe,ee){var de=this;K=p(K);var ye=new f(function(pe,Pe){var ze;de.ready().then(function(){return ze=de._dbInfo,_.call(oe)==="[object Blob]"?T(ze.db).then(function(He){return He?oe:z(oe)}):oe}).then(function(He){H(de._dbInfo,E,function(qe,rt){if(qe)return Pe(qe);try{var At=rt.objectStore(de._dbInfo.storeName);He===null&&(He=void 0);var xn=At.put(He,K);rt.oncomplete=function(){He===void 0&&(He=null),pe(He)},rt.onabort=rt.onerror=function(){var jt=xn.error?xn.error:xn.transaction.error;Pe(jt)}}catch(jt){Pe(jt)}})}).catch(Pe)});return d(ye,ee),ye}function ue(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){H(ee._dbInfo,E,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=He.delete(K);ze.oncomplete=function(){ye()},ze.onerror=function(){pe(qe.error)},ze.onabort=function(){var rt=qe.error?qe.error:qe.transaction.error;pe(rt)}}catch(rt){pe(rt)}})}).catch(pe)});return d(de,oe),de}function he(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){H(oe._dbInfo,E,function(pe,Pe){if(pe)return ye(pe);try{var ze=Pe.objectStore(oe._dbInfo.storeName),He=ze.clear();Pe.oncomplete=function(){de()},Pe.onabort=Pe.onerror=function(){var qe=He.error?He.error:He.transaction.error;ye(qe)}}catch(qe){ye(qe)}})}).catch(ye)});return d(ee,K),ee}function fe(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){H(oe._dbInfo,w,function(pe,Pe){if(pe)return ye(pe);try{var ze=Pe.objectStore(oe._dbInfo.storeName),He=ze.count();He.onsuccess=function(){de(He.result)},He.onerror=function(){ye(He.error)}}catch(qe){ye(qe)}})}).catch(ye)});return d(ee,K),ee}function me(K,oe){var ee=this,de=new f(function(ye,pe){if(K<0){ye(null);return}ee.ready().then(function(){H(ee._dbInfo,w,function(Pe,ze){if(Pe)return pe(Pe);try{var He=ze.objectStore(ee._dbInfo.storeName),qe=!1,rt=He.openKeyCursor();rt.onsuccess=function(){var At=rt.result;if(!At){ye(null);return}K===0||qe?ye(At.key):(qe=!0,At.advance(K))},rt.onerror=function(){pe(rt.error)}}catch(At){pe(At)}})}).catch(pe)});return d(de,oe),de}function _e(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){H(oe._dbInfo,w,function(pe,Pe){if(pe)return ye(pe);try{var ze=Pe.objectStore(oe._dbInfo.storeName),He=ze.openKeyCursor(),qe=[];He.onsuccess=function(){var rt=He.result;if(!rt){de(qe);return}qe.push(rt.key),rt.continue()},He.onerror=function(){ye(He.error)}}catch(rt){ye(rt)}})}).catch(ye)});return d(ee,K),ee}function ge(K,oe){oe=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var de=this,ye;if(!K.name)ye=f.reject("Invalid arguments");else{var pe=K.name===ee.name&&de._dbInfo.db,Pe=pe?f.resolve(de._dbInfo.db):P(K).then(function(ze){var He=v[K.name],qe=He.forages;He.db=ze;for(var rt=0;rt<qe.length;rt++)qe[rt]._dbInfo.db=ze;return ze});K.storeName?ye=Pe.then(function(ze){if(ze.objectStoreNames.contains(K.storeName)){var He=ze.version+1;A(K);var qe=v[K.name],rt=qe.forages;ze.close();for(var At=0;At<rt.length;At++){var xn=rt[At];xn._dbInfo.db=null,xn._dbInfo.version=He}var jt=new f(function(Hn,Nr){var Dr=u.open(K.name,He);Dr.onerror=function(Ho){var ad=Dr.result;ad.close(),Nr(Ho)},Dr.onupgradeneeded=function(){var Ho=Dr.result;Ho.deleteObjectStore(K.storeName)},Dr.onsuccess=function(){var Ho=Dr.result;Ho.close(),Hn(Ho)}});return jt.then(function(Hn){qe.db=Hn;for(var Nr=0;Nr<rt.length;Nr++){var Dr=rt[Nr];Dr._dbInfo.db=Hn,I(Dr._dbInfo)}}).catch(function(Hn){throw(k(K,Hn)||f.resolve()).catch(function(){}),Hn})}}):ye=Pe.then(function(ze){A(K);var He=v[K.name],qe=He.forages;ze.close();for(var rt=0;rt<qe.length;rt++){var At=qe[rt];At._dbInfo.db=null}var xn=new f(function(jt,Hn){var Nr=u.deleteDatabase(K.name);Nr.onerror=function(){var Dr=Nr.result;Dr&&Dr.close(),Hn(Nr.error)},Nr.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},Nr.onsuccess=function(){var Dr=Nr.result;Dr&&Dr.close(),jt(Dr)}});return xn.then(function(jt){He.db=jt;for(var Hn=0;Hn<qe.length;Hn++){var Nr=qe[Hn];I(Nr._dbInfo)}}).catch(function(jt){throw(k(K,jt)||f.resolve()).catch(function(){}),jt})})}return d(ye,oe),ye}var Be={_driver:"asyncStorage",_initStorage:L,_support:l(),iterate:q,getItem:B,setItem:Z,removeItem:ue,clear:he,length:fe,key:me,keys:_e,dropInstance:ge};function Me(){return typeof openDatabase=="function"}var ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oe="~~local_forage_type~",Re=/^~~local_forage_type~([^~]+)~/,Ye="__lfsc__:",Ut=Ye.length,Ft="arbf",Je="blob",Ge="si08",gt="ui08",at="uic8",lt="si16",Et="si32",ve="ur16",Se="ui32",Fe="fl32",Ue="fl64",mt=Ut+Ft.length,cn=Object.prototype.toString;function Ve(K){var oe=K.length*.75,ee=K.length,de,ye=0,pe,Pe,ze,He;K[K.length-1]==="="&&(oe--,K[K.length-2]==="="&&oe--);var qe=new ArrayBuffer(oe),rt=new Uint8Array(qe);for(de=0;de<ee;de+=4)pe=ct.indexOf(K[de]),Pe=ct.indexOf(K[de+1]),ze=ct.indexOf(K[de+2]),He=ct.indexOf(K[de+3]),rt[ye++]=pe<<2|Pe>>4,rt[ye++]=(Pe&15)<<4|ze>>2,rt[ye++]=(ze&3)<<6|He&63;return qe}function wt(K){var oe=new Uint8Array(K),ee="",de;for(de=0;de<oe.length;de+=3)ee+=ct[oe[de]>>2],ee+=ct[(oe[de]&3)<<4|oe[de+1]>>4],ee+=ct[(oe[de+1]&15)<<2|oe[de+2]>>6],ee+=ct[oe[de+2]&63];return oe.length%3===2?ee=ee.substring(0,ee.length-1)+"=":oe.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function bt(K,oe){var ee="";if(K&&(ee=cn.call(K)),K&&(ee==="[object ArrayBuffer]"||K.buffer&&cn.call(K.buffer)==="[object ArrayBuffer]")){var de,ye=Ye;K instanceof ArrayBuffer?(de=K,ye+=Ft):(de=K.buffer,ee==="[object Int8Array]"?ye+=Ge:ee==="[object Uint8Array]"?ye+=gt:ee==="[object Uint8ClampedArray]"?ye+=at:ee==="[object Int16Array]"?ye+=lt:ee==="[object Uint16Array]"?ye+=ve:ee==="[object Int32Array]"?ye+=Et:ee==="[object Uint32Array]"?ye+=Se:ee==="[object Float32Array]"?ye+=Fe:ee==="[object Float64Array]"?ye+=Ue:oe(new Error("Failed to get type for BinaryArray"))),oe(ye+wt(de))}else if(ee==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Pe=Oe+K.type+"~"+wt(this.result);oe(Ye+Je+Pe)},pe.readAsArrayBuffer(K)}else try{oe(JSON.stringify(K))}catch(Pe){console.error("Couldn't convert value into a JSON string: ",K),oe(null,Pe)}}function bn(K){if(K.substring(0,Ut)!==Ye)return JSON.parse(K);var oe=K.substring(mt),ee=K.substring(Ut,mt),de;if(ee===Je&&Re.test(oe)){var ye=oe.match(Re);de=ye[1],oe=oe.substring(ye[0].length)}var pe=Ve(oe);switch(ee){case Ft:return pe;case Je:return c([pe],{type:de});case Ge:return new Int8Array(pe);case gt:return new Uint8Array(pe);case at:return new Uint8ClampedArray(pe);case lt:return new Int16Array(pe);case ve:return new Uint16Array(pe);case Et:return new Int32Array(pe);case Se:return new Uint32Array(pe);case Fe:return new Float32Array(pe);case Ue:return new Float64Array(pe);default:throw new Error("Unkown type: "+ee)}}var Lt={serialize:bt,deserialize:bn,stringToBuffer:Ve,bufferToString:wt};function Ir(K,oe,ee,de){K.executeSql("CREATE TABLE IF NOT EXISTS "+oe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,de)}function Fn(K){var oe=this,ee={db:null};if(K)for(var de in K)ee[de]=typeof K[de]!="string"?K[de].toString():K[de];var ye=new f(function(pe,Pe){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(ze){return Pe(ze)}ee.db.transaction(function(ze){Ir(ze,ee,function(){oe._dbInfo=ee,pe()},function(He,qe){Pe(qe)})},Pe)});return ee.serializer=Lt,ye}function ar(K,oe,ee,de,ye,pe){K.executeSql(ee,de,ye,function(Pe,ze){ze.code===ze.SYNTAX_ERR?Pe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[oe.storeName],function(He,qe){qe.rows.length?pe(He,ze):Ir(He,oe,function(){He.executeSql(ee,de,ye,pe)},pe)},pe):pe(Pe,ze)},pe)}function oi(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"SELECT * FROM "+Pe.storeName+" WHERE key = ? LIMIT 1",[K],function(He,qe){var rt=qe.rows.length?qe.rows.item(0).value:null;rt&&(rt=Pe.serializer.deserialize(rt)),ye(rt)},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function yo(K,oe){var ee=this,de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"SELECT * FROM "+Pe.storeName,[],function(He,qe){for(var rt=qe.rows,At=rt.length,xn=0;xn<At;xn++){var jt=rt.item(xn),Hn=jt.value;if(Hn&&(Hn=Pe.serializer.deserialize(Hn)),Hn=K(Hn,jt.key,xn+1),Hn!==void 0){ye(Hn);return}}ye()},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function wr(K,oe,ee,de){var ye=this;K=p(K);var pe=new f(function(Pe,ze){ye.ready().then(function(){oe===void 0&&(oe=null);var He=oe,qe=ye._dbInfo;qe.serializer.serialize(oe,function(rt,At){At?ze(At):qe.db.transaction(function(xn){ar(xn,qe,"INSERT OR REPLACE INTO "+qe.storeName+" (key, value) VALUES (?, ?)",[K,rt],function(){Pe(He)},function(jt,Hn){ze(Hn)})},function(xn){if(xn.code===xn.QUOTA_ERR){if(de>0){Pe(wr.apply(ye,[K,He,ee,de-1]));return}ze(xn)}})})}).catch(ze)});return d(pe,ee),pe}function nr(K,oe,ee){return wr.apply(this,[K,oe,ee,1])}function Vo(K,oe){var ee=this;K=p(K);var de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"DELETE FROM "+Pe.storeName+" WHERE key = ?",[K],function(){ye()},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function Hr(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){var pe=oe._dbInfo;pe.db.transaction(function(Pe){ar(Pe,pe,"DELETE FROM "+pe.storeName,[],function(){de()},function(ze,He){ye(He)})})}).catch(ye)});return d(ee,K),ee}function Zr(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){var pe=oe._dbInfo;pe.db.transaction(function(Pe){ar(Pe,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(ze,He){var qe=He.rows.item(0).c;de(qe)},function(ze,He){ye(He)})})}).catch(ye)});return d(ee,K),ee}function Pt(K,oe){var ee=this,de=new f(function(ye,pe){ee.ready().then(function(){var Pe=ee._dbInfo;Pe.db.transaction(function(ze){ar(ze,Pe,"SELECT key FROM "+Pe.storeName+" WHERE id = ? LIMIT 1",[K+1],function(He,qe){var rt=qe.rows.length?qe.rows.item(0).key:null;ye(rt)},function(He,qe){pe(qe)})})}).catch(pe)});return d(de,oe),de}function Xt(K){var oe=this,ee=new f(function(de,ye){oe.ready().then(function(){var pe=oe._dbInfo;pe.db.transaction(function(Pe){ar(Pe,pe,"SELECT key FROM "+pe.storeName,[],function(ze,He){for(var qe=[],rt=0;rt<He.rows.length;rt++)qe.push(He.rows.item(rt).key);de(qe)},function(ze,He){ye(He)})})}).catch(ye)});return d(ee,K),ee}function rr(K){return new f(function(oe,ee){K.transaction(function(de){de.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,pe){for(var Pe=[],ze=0;ze<pe.rows.length;ze++)Pe.push(pe.rows.item(ze).name);oe({db:K,storeNames:Pe})},function(ye,pe){ee(pe)})},function(de){ee(de)})})}function Gs(K,oe){oe=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var de=this,ye;return K.name?ye=new f(function(pe){var Pe;K.name===ee.name?Pe=de._dbInfo.db:Pe=openDatabase(K.name,"","",0),K.storeName?pe({db:Pe,storeNames:[K.storeName]}):pe(rr(Pe))}).then(function(pe){return new f(function(Pe,ze){pe.db.transaction(function(He){function qe(jt){return new f(function(Hn,Nr){He.executeSql("DROP TABLE IF EXISTS "+jt,[],function(){Hn()},function(Dr,Ho){Nr(Ho)})})}for(var rt=[],At=0,xn=pe.storeNames.length;At<xn;At++)rt.push(qe(pe.storeNames[At]));f.all(rt).then(function(){Pe()}).catch(function(jt){ze(jt)})},function(He){ze(He)})})}):ye=f.reject("Invalid arguments"),d(ye,oe),ye}var mi={_driver:"webSQLStorage",_initStorage:Fn,_support:Me(),iterate:yo,getItem:oi,setItem:nr,removeItem:Vo,clear:Hr,length:Zr,key:Pt,keys:Xt,dropInstance:Gs};function ai(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ae(K,oe){var ee=K.name+"/";return K.storeName!==oe.storeName&&(ee+=K.storeName+"/"),ee}function ne(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function le(){return!ne()||localStorage.length>0}function Ee(K){var oe=this,ee={};if(K)for(var de in K)ee[de]=K[de];return ee.keyPrefix=ae(K,oe._defaultConfig),le()?(oe._dbInfo=ee,ee.serializer=Lt,f.resolve()):f.reject()}function xe(K){var oe=this,ee=oe.ready().then(function(){for(var de=oe._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var pe=localStorage.key(ye);pe.indexOf(de)===0&&localStorage.removeItem(pe)}});return d(ee,K),ee}function St(K,oe){var ee=this;K=p(K);var de=ee.ready().then(function(){var ye=ee._dbInfo,pe=localStorage.getItem(ye.keyPrefix+K);return pe&&(pe=ye.serializer.deserialize(pe)),pe});return d(de,oe),de}function It(K,oe){var ee=this,de=ee.ready().then(function(){for(var ye=ee._dbInfo,pe=ye.keyPrefix,Pe=pe.length,ze=localStorage.length,He=1,qe=0;qe<ze;qe++){var rt=localStorage.key(qe);if(rt.indexOf(pe)===0){var At=localStorage.getItem(rt);if(At&&(At=ye.serializer.deserialize(At)),At=K(At,rt.substring(Pe),He++),At!==void 0)return At}}});return d(de,oe),de}function je(K,oe){var ee=this,de=ee.ready().then(function(){var ye=ee._dbInfo,pe;try{pe=localStorage.key(K)}catch{pe=null}return pe&&(pe=pe.substring(ye.keyPrefix.length)),pe});return d(de,oe),de}function Rt(K){var oe=this,ee=oe.ready().then(function(){for(var de=oe._dbInfo,ye=localStorage.length,pe=[],Pe=0;Pe<ye;Pe++){var ze=localStorage.key(Pe);ze.indexOf(de.keyPrefix)===0&&pe.push(ze.substring(de.keyPrefix.length))}return pe});return d(ee,K),ee}function en(K){var oe=this,ee=oe.keys().then(function(de){return de.length});return d(ee,K),ee}function ht(K,oe){var ee=this;K=p(K);var de=ee.ready().then(function(){var ye=ee._dbInfo;localStorage.removeItem(ye.keyPrefix+K)});return d(de,oe),de}function kn(K,oe,ee){var de=this;K=p(K);var ye=de.ready().then(function(){oe===void 0&&(oe=null);var pe=oe;return new f(function(Pe,ze){var He=de._dbInfo;He.serializer.serialize(oe,function(qe,rt){if(rt)ze(rt);else try{localStorage.setItem(He.keyPrefix+K,qe),Pe(pe)}catch(At){(At.name==="QuotaExceededError"||At.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ze(At),ze(At)}})})});return d(ye,ee),ye}function In(K,oe){if(oe=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var ee=this.config();K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName}var de=this,ye;return K.name?ye=new f(function(pe){K.storeName?pe(ae(K,de._defaultConfig)):pe(K.name+"/")}).then(function(pe){for(var Pe=localStorage.length-1;Pe>=0;Pe--){var ze=localStorage.key(Pe);ze.indexOf(pe)===0&&localStorage.removeItem(ze)}}):ye=f.reject("Invalid arguments"),d(ye,oe),ye}var Gt={_driver:"localStorageWrapper",_initStorage:Ee,_support:ai(),iterate:It,getItem:St,setItem:kn,removeItem:ht,clear:xe,length:en,key:je,keys:Rt,dropInstance:In},Xn=function(oe,ee){return oe===ee||typeof oe=="number"&&typeof ee=="number"&&isNaN(oe)&&isNaN(ee)},$r=function(oe,ee){for(var de=oe.length,ye=0;ye<de;){if(Xn(oe[ye],ee))return!0;ye++}return!1},Qt=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},ui={},Li={},qr={INDEXEDDB:Be,WEBSQL:mi,LOCALSTORAGE:Gt},Is=[qr.INDEXEDDB._driver,qr.WEBSQL._driver,qr.LOCALSTORAGE._driver],Ti=["dropInstance"],Ci=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ti),Ys={description:"",driver:Is.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function gs(K,oe){K[oe]=function(){var ee=arguments;return K.ready().then(function(){return K[oe].apply(K,ee)})}}function xt(){for(var K=1;K<arguments.length;K++){var oe=arguments[K];if(oe)for(var ee in oe)oe.hasOwnProperty(ee)&&(Qt(oe[ee])?arguments[0][ee]=oe[ee].slice():arguments[0][ee]=oe[ee])}return arguments[0]}var Rn=function(){function K(oe){o(this,K);for(var ee in qr)if(qr.hasOwnProperty(ee)){var de=qr[ee],ye=de._driver;this[ee]=ye,ui[ye]||this.defineDriver(de)}this._defaultConfig=xt({},Ys),this._config=xt({},this._defaultConfig,oe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var de in ee){if(de==="storeName"&&(ee[de]=ee[de].replace(/\W/g,"_")),de==="version"&&typeof ee[de]!="number")return new Error("Database version must be a number.");this._config[de]=ee[de]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},K.prototype.defineDriver=function(ee,de,ye){var pe=new f(function(Pe,ze){try{var He=ee._driver,qe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){ze(qe);return}for(var rt=Ci.concat("_initStorage"),At=0,xn=rt.length;At<xn;At++){var jt=rt[At],Hn=!$r(Ti,jt);if((Hn||ee[jt])&&typeof ee[jt]!="function"){ze(qe);return}}var Nr=function(){for(var ad=function(Wl){return function(){var uu=new Error("Method "+Wl+" is not implemented by the current driver"),ip=f.reject(uu);return d(ip,arguments[arguments.length-1]),ip}},rp=0,ES=Ti.length;rp<ES;rp++){var By=Ti[rp];ee[By]||(ee[By]=ad(By))}};Nr();var Dr=function(ad){ui[He]&&console.info("Redefining LocalForage driver: "+He),ui[He]=ee,Li[He]=ad,Pe()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(Dr,ze):Dr(!!ee._support):Dr(!0)}catch(Ho){ze(Ho)}});return h(pe,de,ye),pe},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(ee,de,ye){var pe=ui[ee]?f.resolve(ui[ee]):f.reject(new Error("Driver not found."));return h(pe,de,ye),pe},K.prototype.getSerializer=function(ee){var de=f.resolve(Lt);return h(de,ee),de},K.prototype.ready=function(ee){var de=this,ye=de._driverSet.then(function(){return de._ready===null&&(de._ready=de._initDriver()),de._ready});return h(ye,ee,ee),ye},K.prototype.setDriver=function(ee,de,ye){var pe=this;Qt(ee)||(ee=[ee]);var Pe=this._getSupportedDrivers(ee);function ze(){pe._config.driver=pe.driver()}function He(At){return pe._extend(At),ze(),pe._ready=pe._initStorage(pe._config),pe._ready}function qe(At){return function(){var xn=0;function jt(){for(;xn<At.length;){var Hn=At[xn];return xn++,pe._dbInfo=null,pe._ready=null,pe.getDriver(Hn).then(He).catch(jt)}ze();var Nr=new Error("No available storage method found.");return pe._driverSet=f.reject(Nr),pe._driverSet}return jt()}}var rt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=rt.then(function(){var At=Pe[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(At).then(function(xn){pe._driver=xn._driver,ze(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=qe(Pe)})}).catch(function(){ze();var At=new Error("No available storage method found.");return pe._driverSet=f.reject(At),pe._driverSet}),h(this._driverSet,de,ye),this._driverSet},K.prototype.supports=function(ee){return!!Li[ee]},K.prototype._extend=function(ee){xt(this,ee)},K.prototype._getSupportedDrivers=function(ee){for(var de=[],ye=0,pe=ee.length;ye<pe;ye++){var Pe=ee[ye];this.supports(Pe)&&de.push(Pe)}return de},K.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,de=Ci.length;ee<de;ee++)gs(this,Ci[ee])},K.prototype.createInstance=function(ee){return new K(ee)},K}(),ys=new Rn;r.exports=ys},{3:3}]},{},[4])(4)})})(eje);var LZt=eje.exports;const Rq=Ju(LZt);class tje{constructor(t){rl(this,"engine");rl(this,"connected",!1);rl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Lw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class Id extends tje{constructor(){super("firebase");rl(this,"RECAPTCHAV3TOKEN","6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ");rl(this,"firestore");rl(this,"collectionPrefix","prod-");rl(this,"studyCollection");rl(this,"studyId","");rl(this,"localForage",Rq.createInstance({name:"currentParticipantId"}));rl(this,"localProvenanceCopy",{});rl(this,"localWindowEvents",{});const n=TJ.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=w5e(n);this.firestore=kJt(r,{});try{$Zt(r,{provider:new _ee(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}async connect(){try{await RJt(this.firestore);const n=await ks(this.firestore,".info/connected");await aT(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=dL();if(!i.currentUser&&(await dGt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Lw(JSON.stringify(r));this.studyCollection=Ky(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const a=ks(this.studyCollection,"configs"),u=Ky(a,"configs"),l=ks(u,o);return s&&s!==o&&(this._deleteFromFirebaseStorage("","sequenceArray"),await this.clearCurrentParticipantId()),await this.localForage.setItem("currentConfigHash",o),await Kl(l,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=ks(this.studyCollection,this.currentParticipantId),a=(await aT(o)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([c,f])=>{a===null||!a.answers[c]||(f===void 0||f.length===0?a.answers[c].windowEvents=[]:a.answers[c].windowEvents=f)}),a)return a;const u=await Lw(JSON.stringify(r)),l={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await Kl(o,l),l}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ks(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=ks(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await Kl(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=pg(),o=hg(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);mye(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=pg(),s=await Promise.all(n.map(async a=>await sT(hg(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,f=URL.createObjectURL(c);u(f)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=pg(),s=await Promise.all(n.map(async a=>await sT(hg(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(f=>{u(f)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=ks(this.studyCollection,"sequenceAssignment"),s=Ky(i,"sequenceAssignment"),o=ks(s,this.currentParticipantId),a=Jye(s,VJt("participantId","==","")),u=await uT(a);if(u.docs.length>0){const p=u.docs[0],m=p.data().timestamp;await KJt(p.ref),await Kl(o,{participantId:this.currentParticipantId,timestamp:m})}else await Kl(o,{participantId:this.currentParticipantId,timestamp:QJt()});const l=Jye(s,HJt("timestamp","asc")),d=(await uT(l)).docs.map(p=>p.data()).findIndex(p=>p.participantId===n||this.currentParticipantId),h=r[d%r.length];if(!h)throw new Error("Latin square is empty");return h}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await uT(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray"||s.id==="audioTags"||s.id==="sequenceAssignment"||s.id==="configs")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let r=null;if(this.currentParticipantId!==null){const i=ks(this.studyCollection,n||this.currentParticipantId);if(r=(await aT(i)).data(),r!==null){const s=await this._getFromFirebaseStorage(n||this.currentParticipantId,"provenance"),o=await this._getFromFirebaseStorage(n||this.currentParticipantId,"windowEvents");Object.entries(r.answers).forEach(([a,u])=>{u!==void 0&&(u.provenanceGraph=s[a],u.windowEvents=o[a])})}}return r}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=ks(this.studyCollection),s=i.id;await this.localForage.setItem("currentParticipantId",s),this.currentParticipantId=s;let o=null;if(this.currentParticipantId!==null&&(o=(await aT(i)).data()),!o){const a=await Lw(JSON.stringify(n)),u={participantId:s,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await Kl(i,u),o=u}return o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=ks(this.studyCollection,this.currentParticipantId);return await Kl(r,{completed:!0},{merge:!0}),n.completed=!0,!0}async getUserManagementData(n){const r=Ky(this.firestore,"user-management"),i=await uT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Kl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Kl(ks(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Kl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Kl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Kl(ks(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Ky(this.firestore,`${this.collectionPrefix}${n}`),i=await uT(r),s=[],o=i.docs.map(async a=>{if(a.id==="config"||a.id==="sequenceArray")return;const u=a.data(),l=await this._getFromFirebaseStorage(u.participantId,"provenance"),c=await this._getFromFirebaseStorage(u.participantId,"windowEvents");u.answers=Object.fromEntries(Object.entries(u.answers).map(([f,d])=>{if(d===void 0)return[f,d];const h=l[f],p=c[f];return[f,{...d,provenanceGraph:h,windowEvents:p}]})),s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Ky(this.firestore,`${this.collectionPrefix}${n}`),s=ks(i,r),o=(await aT(s)).data();try{if(!o||o.rejected)return;await tve(s,{rejected:!0});const a=ks(i,"sequenceAssignment"),u=Ky(a,"sequenceAssignment"),l=ks(u,r);await tve(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=pg(),s=hg(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await sT(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=pg(),o=hg(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await mye(o,a)}}async _deleteFromFirebaseStorage(n,r){const i=pg();hg(i,`${this.studyId}/${n}_${r}`)}async _getFirebaseProvenance(n){const r=pg(),i=hg(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await sT(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=pg(),i=hg(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await sT(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}}const nje=C.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),eS=()=>C.useContext(nje);function FZt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=C.useState(t),[o,a]=C.useState(!1),{storageEngine:u}=fo(),l=async()=>{const h=dL();try{await _Gt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;C.useEffect(()=>{s(t);let h;if(u instanceof Id)try{h=dL()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof Id){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=vGt(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=C.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return R.jsx(nje.Provider,{value:d,children:i.determiningStatus?R.jsx(Fm,{visible:!0}):e})}function jZt(){const{config:e,metadata:t}=xa(S=>S),n=jm(),r=xc(),{toggleShowHelpText:i,toggleStudyBrowser:s}=Rl(),{storageEngine:o}=fo(),a=xa(S=>S.isRecording),u=Yf(),l=eS(),c=n.length-1,f=u/c*100,[d,h]=C.useState(!1),p=e==null?void 0:e.uiConfig.logoPath,m=e==null?void 0:e.uiConfig.withProgressBar,g=W4(),y=bSe(`/${g}`);function v(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=y}).catch(S=>{console.error(S)})}const _=C.useRef(null),[w,E]=C.useState(!1);return C.useEffect(()=>{const S=_.current;S&&E(S.scrollWidth>S.offsetWidth)},[e]),R.jsx(IY,{height:"70",p:"md",children:R.jsxs(yf,{mt:-7,align:"center",children:[R.jsx(yf.Col,{span:4,children:R.jsxs(yr,{align:"center",noWrap:!0,children:[R.jsx(p_,{maw:40,src:`${Nc}${p}`,alt:"Study Logo"}),R.jsx(s1,{w:"md"}),R.jsx(fa,{order:4,children:e==null?void 0:e.studyMetadata.title}),a?R.jsxs(yr,{spacing:20,noWrap:!0,children:[R.jsx(it,{color:"red",children:"Recording audio"}),R.jsx(e$e,{})]}):null]})}),R.jsx(yf.Col,{span:4,children:m&&R.jsx(pOe,{radius:"md",size:"lg",value:f})}),R.jsx(yf.Col,{span:4,children:R.jsxs(yr,{noWrap:!0,position:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&R.jsx(Fr,{variant:"outline",onClick:()=>r(i()),children:"Help"}),l.user.isAdmin&&R.jsxs(ic,{shadow:"md",width:200,zIndex:1,opened:d,onChange:h,children:[R.jsx(ic.Target,{children:R.jsx(dm,{size:"lg",className:"studyBrowserMenuDropdown",children:R.jsx(_yt,{})})}),R.jsxs(ic.Dropdown,{children:[R.jsx(ic.Item,{icon:R.jsx(nde,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),R.jsx(ic.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:R.jsx(xyt,{size:14}),children:"Contact"}),R.jsx(ic.Item,{icon:R.jsx(nde,{size:14}),onClick:()=>v(),children:"Next Participant"})]})]})]})})]})})}function BZt(){var l;const e=(l=Ih())==null?void 0:l.uiConfig.sidebar,t=Ih(),n=Yf(),r=jm()[n],i=t.components[r],s=C.useMemo(()=>{var c;return i?Z5(i)&&t.baseComponents?JK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i,t.baseComponents]),o=xJ(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?R.jsxs(P2,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&R.jsx(P2.Section,{bg:"gray.3",p:"xl",children:R.jsxs(it,{c:"gray.9",children:[R.jsx(it,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),R.jsx(Ka,{text:a})]})}),R.jsx(P2.Section,{p:"sm",children:R.jsx(iL,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):R.jsx(iL,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function zZt(){const{showHelpText:e,config:t}=xa(o=>o),n=xc(),{toggleShowHelpText:r}=Rl(),[i,s]=C.useState("");return C.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${Nc}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),R.jsx(Gp,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:R.jsx(Ka,{text:i})})}function UZt(){const{alertModal:e}=xa(o=>o),{setAlertModal:t}=Rl(),n=xc(),[r,i]=C.useState(e.show),s=C.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return C.useEffect(()=>i(e.show),[e.show]),R.jsx(Gp,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:R.jsxs(zTe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:R.jsx(oyt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[R.jsx(it,{my:"md",children:e.message}),R.jsx(dt,{style:{float:"right"},color:"red",children:R.jsx(Fr,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function VZt(){const e=C.useRef([]),n=Ih().uiConfig.windowEventDebounceTime??100;return C.useEffect(()=>{const r=pd(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=pd(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=pd(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=pd(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=pd(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=pd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=pd(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=pd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=pd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),R.jsx(n5e.Provider,{value:e,children:R.jsxs(vI,{navbar:R.jsx(BZt,{}),aside:R.jsx(KHt,{}),header:R.jsx(jZt,{}),children:[R.jsx(zZt,{}),R.jsx(UZt,{}),R.jsx($Xe,{})]})})}var uve=Object.prototype.hasOwnProperty;function lve(e,t,n){for(n of e.keys())if(lC(n,t))return n}function lC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&lC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=lve(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=lve(t,i),!i)||!lC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(uve.call(e,n)&&++r&&!uve.call(t,n)||!(n in t)||!lC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function HZt(e){var t=C.useRef(e),n=C.useRef(0);return lC(e,t.current)||(t.current=e,n.current+=1),C.useMemo(function(){return t.current},[n.current])}function qZt(e,t){return C.useEffect(e,HZt(t))}const rje=(e,t=null)=>{const[n,r]=C.useState("idle"),[i,s]=C.useState(null),[o,a]=C.useState(null),u=C.useRef(),l=C.useRef(!1);C.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=C.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return qZt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Uk=3,ub=25,Vk=25,Hk=20,cve=1;function WZt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=C.useState(!1),[l,{width:c}]=yc();return R.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[R.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+cve,width:e(t.endTime)-e(t.startTime)-cve*2,y:r-ub,height:ub}),R.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-Uk,width:c+Uk*2,y:r-ub-Vk-o,height:Hk,fill:"whitesmoke"}),R.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-Uk,x2:c+e(t.startTime)+Uk,y1:r-ub-Vk+Hk-o,y2:r-ub-Vk+Hk-o}),R.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-ub-Vk-o,height:Hk,children:R.jsx(Ya,{style:{width:"fit-content"},children:R.jsx(it,{weight:600,lineClamp:1,ref:l,mx:0,style:{width:"fit-content"},size:12,children:n})})})]})}function GZt({xScale:e,answer:t,height:n,labelHeight:r=0}){return R.jsx("g",{children:R.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const fve=25,YZt=8;function ije({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=xa(l=>l),a=C.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(f=>s?f[0]===s:!0).sort((f,d)=>f[1].startTime-d[1].startTime);return c.map((f,d)=>{const[h,p]=f,m=d>0?c[d-l-1]:null;return m&&m[0].length*YZt+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:R.jsx(GZt,{labelHeight:l*fve,answer:p,height:r,xScale:e},h),label:R.jsx(WZt,{labelHeight:l*fve,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=C.useMemo(()=>Object.entries(t.answers||{}).sort((c,f)=>c[1].startTime-f[1].startTime).map(c=>{const[f,d]=c,h=[];let p=[-1,-1],m="visible";if(d.windowEvents)for(let g=0;g<d.windowEvents.length;g+=1)d.windowEvents[g][1]==="visibility"&&(d.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[d.windowEvents[g][0],-1],m="hidden"):d.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=d.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>R.jsx(Yp,{withinPortal:!0,label:"Browsed away",children:R.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:R.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}const m7={left:5,top:0,right:5,bottom:0};function KZt(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function XZt({participant:e,maxDuration:t}){const n=Vl(),r=by(),i=C.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,f)=>c.startTime-f.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=yc(),a=C.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:XC(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=C.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(d=>[d.startTime,d.endTime]).flat(),c=P3(l);return _h([m7.left,o+m7.left+m7.right]).domain(c).clamp(!0)},[e,o]);return R.jsx(Ya,{children:R.jsxs(Bi,{spacing:25,ref:s,style:{width:"75%"},children:[R.jsxs(yr,{position:"apart",children:[R.jsx(yI,{size:25,component:WXe,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/${Lu(e.sequence)[0]}`),children:e.participantId}),R.jsx(it,{size:"xl",children:`${a}`}),R.jsx(it,{size:"xl",children:`${KZt(i)}`})]}),u?R.jsx(ije,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function QZt(e){return e?e.getAllParticipantsData():null}const dve=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],hve=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function JZt(){const{storageEngine:e}=fo(),{value:t,status:n}=rje(QZt,[e]),r=C.useMemo(()=>{if(!(n!=="success"||!t))return vc(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return C.useMemo(()=>{if(!t)return 0;const i=t==null?void 0:t.filter(s=>hve.includes(s.participantId)).map(s=>!s.answers||Object.entries(s.answers).length===0?0:XC(Object.values(s.answers).map(a=>a.provenanceGraph?Object.keys(a.provenanceGraph.nodes).length:0)));return $3(i)},[t]),C.useMemo(()=>{if(!t)return 0;const i=t==null?void 0:t.filter(s=>dve.includes(s.participantId)).map(s=>!s.answers||Object.entries(s.answers).length===0?0:XC(Object.values(s.answers).map(a=>a.provenanceGraph?Object.keys(a.provenanceGraph.nodes).length:0)));return $3(i)},[t]),n==="success"&&t?R.jsx(Bi,{spacing:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>hve.includes(i.participantId)||dve.includes(i.participantId)).map(i=>R.jsx(XZt,{maxDuration:r,participant:i},i.participantId))}):R.jsx(ph,{})}var sje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Ua,()=>(()=>{var n={d:(c,f)=>{for(var d in f)n.o(f,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:f[d]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(c)}function s(c){return function(f){if(Array.isArray(f))return o(f)}(c)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(c)||function(f,d){if(f){if(typeof f=="string")return o(f,d);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(f,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,h=new Array(f);d<f;d++)h[d]=c[d];return h}function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var _=v.call(g,y||"default");if(i(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var f,d;return f=c,d=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(_){return _.headers.has("Content-Type")&&!_.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(_.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),_.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),_=m.getChannelData(g).length-1;_>=0;_--)y[_]+=v[_];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),_=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),E=0;E<h.numberOfChannels;E++)for(var S=h.getChannelData(E),b=w.getChannelData(E),T=0;T<v;T++)b[T]=S[_+T],T<g*this._sampleRate&&(b[T]*=T/(g*this._sampleRate)),T>v-y*this._sampleRate&&(b[T]*=(v-T)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,_=new ArrayBuffer(8+v),w=new DataView(_);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,E){return w+E.length},0),y=new Float32Array(g),v=0,_=0;v<g;)p.forEach(function(w){y[v++]=w[_]}),_++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],d&&u(f.prototype,d),Object.defineProperty(f,"prototype",{writable:!1}),c}();return r})())})(sje);var ZZt=sje.exports;const een=Ju(ZZt);function ten(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function nen(e,t){const n=ten(e),r=C.useRef(),i=C.useRef(),s=C.useRef(!0),o=C.useRef(t),a=C.useRef(-1),u=()=>window.clearTimeout(a.current),l=C.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=C.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=C.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return C.useEffect(()=>{o.current=t},[t]),[f,u]}function ren(e,t){const[n,r]=C.useState(e),[i,s]=nen(r,t);return C.useEffect(()=>s,[]),[n,i]}function ien({cx:e,cy:t,r:n,color:r}){return R.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function sen({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return R.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return R.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:R.jsx(ien,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?R.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const pve={left:5,top:0,right:5,bottom:0};function oen({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const f=C.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{trialFilter:d}=fm();C.useEffect(()=>{if(!d||!t)return;const m=t.answers[d].provenanceGraph;if(!m)return;const{startTime:g}=t.answers.introduction,y=g+o;if(!i||!m.nodes[i]){s(m.root);return}let v=m.nodes[i];for(;;)if(y<v.createdOn){if(Zjt(v))break;{const _=v.parent;if(y<m.nodes[_].createdOn)v=m.nodes[_];else break}}else if(v.children.length>0){const _=v.children[0];if(y>m.nodes[_].createdOn)v=m.nodes[_];else break}else break;v.id!==i&&s(v.id)},[i,t,o,s,d]);const h=C.useCallback((m,g,y)=>{a(g,(g-e.domain()[0])/f),s(m)},[s,a,f,e]),p=C.useMemo(()=>Object.entries(t.answers).filter(m=>d?d===m[0]:!0).map(m=>{const[g,y]=m;return R.jsx(sen,{taskName:g,answer:y,height:r,currentNode:i,setCurrentNode:h,xScale:e},g)}),[i,h,r,t.answers,d,e]);return R.jsx(Bi,{children:R.jsxs("svg",{style:{width:n,height:r},children:[R.jsx("line",{stroke:"black",strokeWidth:1,x1:pve.left,x2:n+pve.left,y1:r/2,y2:r/2}),p]})})}const mve={top:5,left:5,right:5,bottom:5};function aen({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=C.useMemo(()=>e.map(s=>R.jsxs("g",{children:[R.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:mve.top,y2:mve.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>R.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),f=t(n+s.end*1e3);return R.jsx("foreignObject",{x:c+(f-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:R.jsx(Yp,{label:u.name,withArrow:!0,arrowSize:6,children:R.jsx(N0,{size:12,color:u.color})})},u.name)})},a))]},s.start)),[r,n,e,t]);return R.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}const uen=C.forwardRef(({color:e,name:t,...n},r)=>R.jsx("div",{ref:r,...n,children:R.jsxs(yr,{spacing:"xs",noWrap:!0,children:[R.jsx(N0,{size:10,color:e}),R.jsx(it,{children:t})]})}));function len({value:e,label:t,color:n,onRemove:r,classNames:i,...s}){const o=JC(n).l;return R.jsx("div",{...s,children:R.jsxs(dt,{sx:a=>({display:"flex",cursor:"default",alignItems:"center",backgroundColor:n,border:`1px solid ${a.colorScheme==="dark"?a.colors.dark[7]:a.colors.gray[4]}`,paddingLeft:4,borderRadius:4}),children:[R.jsx(it,{color:o>.7?"dark":"white",sx:{lineHeight:1,fontSize:12},children:t}),R.jsx(Bh,{onMouseDown:r,color:o>.7?"dark":"white",sx:{color:o>.7?"black":"white"},variant:"transparent",size:22,iconSize:14,tabIndex:-1})]})})}function cen({start:e,current:t,end:n,text:r,tags:i,selectedTags:s,addTag:o,onTextChange:a,deleteRowCallback:u,addRowCallback:l,onSelectTags:c,addRef:f}){return R.jsxs(yr,{position:"apart",style:{width:"100%"},noWrap:!0,children:[R.jsxs(yr,{noWrap:!0,spacing:0,style:{width:"100%"},children:[R.jsx(Syt,{height:40,width:20,viewBox:"10 0 14 24",strokeWidth:2,color:t>=e&&t<=n?"cornflowerblue":"lightgray"}),R.jsx(vx,{ref:d=>d?f(d):null,style:{width:"100%"},variant:"unstyled",value:r,onChange:d=>{a(d.currentTarget.value)},onKeyDown:d=>{d.key==="Enter"&&d.currentTarget.selectionStart!==null?l(d.currentTarget.selectionStart):d.key==="Backspace"&&d.currentTarget.selectionStart===0&&d.currentTarget.selectionEnd===0&&(u(),d.preventDefault(),d.stopPropagation())}})]}),R.jsxs(yr,{noWrap:!0,style:{width:"400px"},children:[R.jsx(HC,{orientation:"vertical",size:"xs"}),R.jsx(iK,{nothingFound:"No tags found. Add more via the + button.",valueComponent:len,itemComponent:uen,value:s.map(d=>d.name),onChange:d=>c(d.map(h=>i.find(p=>p.name===h))),style:{width:"380px"},data:i.map(d=>({...d,value:d.name,label:d.name}))})]})]})}function gve({addTagCallback:e,currentNames:t,editTag:n=!1}){const[r,i]=C.useState(""),[s,o]=C.useState("#fd7e14");return R.jsxs(Bi,{spacing:"xs",children:[R.jsxs(yr,{children:[R.jsx(N0,{color:s}),R.jsx(vx,{required:!0,placeholder:"Enter tag name",value:r,onChange:a=>i(a.currentTarget.value),error:t.includes(r)?"Tag with this name already exists":null})]}),R.jsx(MAe,{withPicker:!1,style:{width:"100%"},value:s,onChange:a=>o(a),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),R.jsx(Fr,{disabled:r.length===0||t.includes(r),compact:!0,onClick:()=>e({color:s,name:r}),children:n?"Edit Tag":"Add Tag"})]})}function fen({createTagCallback:e,tags:t}){const[n,r]=C.useState(!1);return R.jsxs(Bi,{style:{width:"300px"},spacing:"xs",children:[t.length===0?R.jsx(it,{color:"dimmed",children:"No tags found. Create new tags below."}):null,t.map(i=>R.jsxs(yr,{position:"apart",children:[R.jsxs(yr,{children:[R.jsx(N0,{color:i.color}),R.jsx(it,{children:i.name})]}),R.jsxs(cr,{trapFocus:!0,children:[R.jsx(cr.Target,{children:R.jsx(byt,{color:"lightgray"})}),R.jsx(cr.Dropdown,{children:R.jsx(gve,{editTag:!0,currentNames:t.map(s=>s.name),addTagCallback:s=>{e(s),r(!1)}})})]})]},i.name)),R.jsxs(cr,{trapFocus:!0,opened:n,children:[R.jsx(cr.Target,{children:R.jsx(Fr,{variant:"light",onClick:()=>r(!n),children:"Create new tag"})}),R.jsx(cr.Dropdown,{children:R.jsx(gve,{currentNames:t.map(i=>i.name),addTagCallback:i=>{r(!1),e(i)}})})]})]})}function den({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){const[a,u]=C.useState(null),{trrackId:l,studyId:c,trialFilter:f}=fm(),[d,h]=C.useState([]),{storageEngine:p}=fo(),m=Ih(),g=C.useRef([]),y=Jb((E,S)=>{const b=[...s];b[E].text=S,o(b)}),v=Jb((E,S)=>{const b=[...s];b[E].selectedTags=S,o(b)}),_=Jb(E=>{if(E===0)return;const S=structuredClone(s);S[E-1].text=s[E-1].text+s[E].text,S[E-1].transcriptMappingEnd=s[E].transcriptMappingEnd,S[E-1].selectedTags=[...s[E-1].selectedTags,...s[E].selectedTags.filter(b=>!s[E-1].selectedTags.find(T=>T.name===b.name))],S.splice(E,1),S.filter(b=>b.transcriptMappingStart===S[E-1].transcriptMappingStart).forEach(b=>{b.transcriptMappingEnd=S[E-1].transcriptMappingEnd}),o(S),setTimeout(()=>{g.current[E-1].focus(),g.current[E-1].setSelectionRange(s[E-1].text.length,s[E-1].text.length,"none")})}),w=Jb((E,S)=>{const b=structuredClone(s),T=b[E];b.splice(E+1,0,{transcriptMappingEnd:T.transcriptMappingEnd,transcriptMappingStart:T.transcriptMappingStart,text:T.text.slice(S),selectedTags:T.selectedTags}),b[E].text=b[E].text.slice(0,S),o(b),setTimeout(()=>{g.current[E+1].focus(),g.current[E+1].setSelectionRange(0,0)})});return C.useEffect(()=>{const E=[];s.forEach((S,b)=>{a&&(b===0||S.transcriptMappingStart!==s[b-1].transcriptMappingStart)&&E.push({start:b===0?0:a.results[S.transcriptMappingStart-1].resultEndTime,end:a.results[S.transcriptMappingEnd].resultEndTime,lineStart:S.transcriptMappingStart,lineEnd:S.transcriptMappingEnd,tags:s.filter(T=>T.transcriptMappingStart===S.transcriptMappingStart&&T.transcriptMappingEnd===S.transcriptMappingEnd).map(T=>T.selectedTags)})}),n(E)},[s,n,a]),C.useEffect(()=>{c&&l&&e&&(p==null||p.getTranscription(Lu(e.sequence).filter(E=>m.tasksToNotRecordAudio===void 0||!m.tasksToNotRecordAudio.includes(E)).filter(E=>f?E===f:!0),l).then(E=>{const S=E.map(A=>JSON.parse(A));let b=0;const T=S.map(A=>{const I=A.results.map(k=>({...k,resultEndTime:+k.resultEndTime.split("s")[0]+b}));return b+=+A.results[A.results.length-1].resultEndTime.split("s")[0],I}).flat();u({results:T}),o(T.map((A,I)=>{var k;return{transcriptMappingStart:I,transcriptMappingEnd:I,text:((k=A.alternatives[0].transcript)==null?void 0:k.trim())||"",selectedTags:[]}})),i(0)}))},[p,c,l,m.tasksToNotRecordAudio,e,f,o,i]),C.useEffect(()=>{if(a&&r!==null&&e&&t>0){let E=r;const S=f?e.answers[f].startTime:e.answers.audioTest.startTime,b=Math.abs(t-S)/1e3;if(b>a.results[E].resultEndTime){for(;b>a.results[E].resultEndTime;)if(E+=1,E>a.results.length-1){E=a.results.length-1;break}}else if(E>0&&b<a.results[E-1].resultEndTime)for(;E>0&&b<a.results[E-1].resultEndTime;)E-=1;if(r===E)return;i(E)}},[r,e,t,i,a,f]),R.jsxs(Bi,{spacing:0,children:[R.jsxs(yr,{mb:"xl",position:"apart",noWrap:!0,children:[R.jsx(it,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),R.jsxs(cr,{children:[R.jsx(cr.Target,{children:R.jsxs(yr,{position:"center",style:{width:"380px",cursor:"pointer"},children:[R.jsx(lPe,{}),R.jsx(it,{children:"Tags"})]})}),R.jsx(cr.Dropdown,{children:R.jsx(fen,{createTagCallback:E=>{h([...d,E])},tags:d})})]})]}),s.map((E,S)=>R.jsx(cen,{addRef:b=>{g.current[S]=b},onSelectTags:b=>v(S,b),addRowCallback:b=>w(S,b),deleteRowCallback:()=>_(S),onTextChange:b=>y(S,b),tags:d,selectedTags:E.selectedTags,addTag:b=>{h([...d,b]),v(S,[...E.selectedTags,b])},text:E.text,start:E.transcriptMappingStart,end:E.transcriptMappingEnd,current:r===null?0:r},S))]})}const g7={left:5,top:0,right:5,bottom:0};function hen(e,t){return t?t.getParticipantData(e):null}const yve=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],vve=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function pen(){const{trrackId:e,trialFilter:t}=fm(),{storageEngine:n}=fo(),[r,i]=C.useState(0),[s,{width:o}]=yc(),[a,u]=C.useState(null),{value:l,status:c}=rje(hen,[e,n]),{saveAnalysisState:f}=Rl(),d=xc(),[h,p]=C.useState(!1),[m,g]=ren(0,50),y=C.useRef(null),v=Ih(),_=Vl(),{analysisTrialName:w}=xa(L=>L),{setAnalysisTrialName:E}=Rl(),[S,b]=C.useState(!0),T=C.useRef(null),[A,I]=C.useState([]),[k,$]=C.useState([]),P=C.useMemo(()=>[...yve,...vve],[]);C.useEffect(()=>{if(w&&l){const L=EA.create(),B=UH({registry:L,initialState:{}});l.answers[w].provenanceGraph&&(B.importObject(tm(l.answers[w].provenanceGraph)),T.current=B)}},[l,w]);const N=C.useCallback(L=>{var B;w&&l&&T.current&&(d(f(T.current.getState((B=l.answers[w].provenanceGraph)==null?void 0:B.nodes[L]))),T.current.to(L)),u(L)},[l,f,d,w,T]),F=C.useCallback(L=>{var B;if(L!==w)if(d(E(L)),d(f(null)),l&&l.answers[L].provenanceGraph){const q=EA.create(),Z=UH({registry:q,initialState:{}});Z.importObject(tm(l.answers[L].provenanceGraph)),T.current=Z,N(((B=l.answers[L].provenanceGraph)==null?void 0:B.root)||"")}else d(f(null)),u(null),T.current=null},[N,l,f,E,d,w]);C.useEffect(()=>{t&&F(t)},[F,t]);const z=Jb(L=>{if(l&&w&&(l.answers[w].endTime-l.answers.audioTest.startTime)/1e3<L){const B=Lu(l.sequence);F(B[B.indexOf(w)+1])}else l&&w&&T.current&&T.current.current.children.length>0&&(T.current.graph.backend.nodes[T.current.current.children[0]].createdOn-l.answers.audioTest.startTime)/1e3<L&&N(T.current.current.children[0]);if(l&&w){const B=t?l.answers[t].startTime:l.answers.audioTest.startTime;g(L*1e3+B)}}),W=C.useCallback(L=>{if(L&&l&&e){const B=new een;n==null||n.getAudio(Lu(l.sequence).filter(q=>v.tasksToNotRecordAudio===void 0||!v.tasksToNotRecordAudio.includes(q)).filter(q=>t?q===t:!0),e).then(q=>{L&&B.fetchAudio(...q).then(Z=>B.concatAudio(Z)).then(Z=>B.export(Z,"audio/mp3")).then(Z=>L.loadBlob(Z.blob).then(()=>b(!1))).catch(Z=>{throw new Error(Z)}),L.on("timeupdate",z)})}},[v.tasksToNotRecordAudio,l,n,z,t,e]),V=QRe({container:y.current,plugins:[],onMount:W});C.useEffect(()=>{W(V)},[W,l,V]);const G=C.useCallback((L,B)=>{g(L),V&&B&&(V==null||V.seekTo(B))},[g,V]),M=C.useCallback(L=>{p(L),V&&(L?V.play():V.pause())},[V]),H=C.useMemo(()=>{if(!l)return null;const L=Object.values(l.answers||{}).map(Z=>[Z.startTime,Z.endTime]).flat(),B=P3(L);return _h([g7.left,o+g7.left+g7.right]).domain(t?[l.answers[t].startTime,l.answers[t].endTime]:B).clamp(!0)},[l,t,o]),Y=C.useCallback(L=>{if(!l)return;const B=P.indexOf(l.participantId);L?_(`../../${t?"../":""}${P[B+1]}/ui/${t||""}`,{relative:"path"}):_(`../../${t?"../":""}${P[B-1]}/ui/${t||""}`,{relative:"path"})},[P,_,l,t]);return R.jsx(yr,{noWrap:!0,spacing:25,children:R.jsxs(Bi,{ref:s,style:{width:"100%"},spacing:25,children:[R.jsx(Ya,{children:R.jsxs(yr,{children:[R.jsx(dm,{children:R.jsx(uyt,{onClick:()=>Y(!1)})}),R.jsx(Kp,{style:{width:"300px"},value:l==null?void 0:l.participantId,onChange:L=>_(`../../${t?"../":""}${L}/ui/${t||""}`,{relative:"path"}),data:[...yve,...vve]}),R.jsx(Kp,{style:{width:"300px"},clearable:!0,value:t,data:l?[...Lu(l.sequence)]:[],onChange:L=>_(`${t?"../":""}${L||""}`,{relative:"path"})}),R.jsx(dm,{children:R.jsx(lyt,{onClick:()=>Y(!0)})})]})}),c==="success"&&l&&H?R.jsx(ije,{trialFilter:t,xScale:H,setSelectedTask:F,participantData:l,width:o,height:200}):R.jsx(Ya,{style:{height:"275px"},children:R.jsx(ph,{})}),H&&l!==null?R.jsxs(R.Fragment,{children:[R.jsxs(dt,{ref:y,ml:l&&H?H(l.answers.audioTest.startTime):0,mr:l&&H?H(l.answers["post-study-survey"].startTime):0,style:{WebkitBoxSizing:"border-box",width:`${l&&H?H(l.answers["post-study-survey"].startTime)-H(l.answers.audioTest.startTime):0}px`},children:[R.jsx(WRe.Provider,{value:V,children:R.jsx(ZK,{id:"waveform"})},l.participantId),S?R.jsx(ph,{}):null]}),R.jsx(aen,{startTime:t?H.domain()[0]:l.answers.audioTest.startTime,xScale:H,transcriptLines:A,currentShownTranscription:r})]}):null,c==="success"&&l&&H?R.jsx(oen,{xScale:H,setSelectedTask:F,playTime:m-l.answers.introduction.startTime,setPlayTime:G,isPlaying:h,setIsPlaying:M,currentNode:a,setCurrentNode:N,participantData:l,width:o,height:50}):null,R.jsxs(yr,{children:[R.jsx(Fr,{onClick:()=>M(!0),children:"Play"}),R.jsx(Fr,{onClick:()=>M(!1),children:"Pause"}),R.jsx(it,{children:new Date(m).toLocaleString()})]}),R.jsx(Bi,{children:l?R.jsx(den,{transcriptList:k,setTranscriptList:$,setCurrentShownTranscription:i,currentShownTranscription:r,participant:l,playTime:m,setTranscriptLines:I}):null})]})})}function men({setProvState:e}){return R.jsx("div",{children:R.jsx(pen,{})})}function gen(){return R.jsx(Lm,{pt:100,children:R.jsx(Ya,{children:R.jsxs(fa,{order:3,children:[R.jsx(it,{span:!0,c:"orange",children:"Study ID"})," ","not Found, please check valid Study ID on your global config, or contact the administrator."]})})})}async function yen(e,t){const n=await(await fetch(`${Nc}${e}`)).text();return Z4e(n,t)}async function bee(e,t){const n=t.configsList.find(r=>fK(r)===e);if(n){const r=t.configs[n];return await yen(`${r.path}`,n)}return null}function ven({studyId:e,config:t}){const{sequence:n}=xa(i=>i),r=C.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:R.jsx(sq,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors?R.jsxs(R.Fragment,{children:[R.jsx(fa,{order:2,mb:8,children:"Error loading config"}),R.jsx(Hke,{errors:t.errors})]}):R.jsx(e7,{})}),i.push({path:"/analysis/:trrackId/:trialName/",element:R.jsx(e7,{})}),i.push({path:"/analysis/:trrackId/ui/:trialFilter?/",element:R.jsx(men,{setProvState:()=>null})}),i.push({path:"/analysis",element:R.jsx(JZt,{})}),i.push({path:"/:trialName",element:R.jsx(e7,{})}),i.push({path:"/end",element:R.jsx(t5e,{})}),[{element:R.jsx(VZt,{}),children:i}]}return[]},[t,n,e]);return xSe(r)}function _en({globalConfig:e}){const t=W4(),[n,r]=C.useState(null),i=e.configsList.find(f=>fK(f)===t),s=eS();C.useEffect(()=>{bee(t,e).then(f=>{r(f)})},[e,t]);const[o,a]=C.useState(null),{storageEngine:u}=fo(),[l]=hY();C.useEffect(()=>{async function f(){if(!u||!n||!t)return;await u.initializeStudyDb(t,n),await u.getSequenceArray()||await u.setSequenceArray(await WHt(n));const h=n.uiConfig.urlParticipantIdParam&&l.get(n.uiConfig.urlParticipantIdParam)||void 0,p=Object.fromEntries(l.entries()),m=await fetch("https://api.ipify.org?format=json").catch(w=>""),g=m instanceof Response?await m.json():{ip:""},y={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:g.ip},v=await u.initializeParticipantSession(p,n,y,h),_=await ICt(t,n,v.sequence,y,v.answers,s.user.isAdmin);a(_)}f()},[u,n,t,l,s.user.isAdmin]);const c=o?R.jsx(qRe.Provider,{value:o,children:R.jsx(ZSt,{store:o.store,children:R.jsx(ven,{studyId:t,config:n})})}):R.jsx(Fm,{visible:!0});return i?c:R.jsx(gen,{})}function cC({studyIds:e}){const t=Vl(),{studyId:n}=fm(),r=by(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=fo(),{user:o,logout:a}=eS(),[u,l]=C.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:R.jsx(wyt,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:R.jsx(pyt,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:R.jsx(Iyt,{}),href:"/settings",needAdmin:!0}];return R.jsx(IY,{height:70,p:"md",children:R.jsxs(yf,{mt:-7,align:"center",children:[R.jsx(yf.Col,{span:6,children:R.jsxs(vi,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),sx:{cursor:"pointer"},children:[R.jsx(p_,{maw:40,src:`${Nc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsx(s1,{w:"md"}),R.jsx(fa,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),R.jsx(yf.Col,{span:6,children:R.jsxs(vi,{justify:"flex-end",direction:"row",children:[c&&R.jsx(Kp,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),R.jsx(DCe,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),R.jsx(HAe,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:R.jsxs(vi,{direction:"column",mt:20,children:[R.jsx(it,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?R.jsx(Fr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:R.jsx(Fr,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),R.jsxs(dt,{ml:10,children:[R.jsx(HC,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?R.jsx(it,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):R.jsx(it,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function ben({cellData:e}){return R.jsx("td",{children:R.jsx(Bi,{miw:100,children:Object.entries(e.answer).map(([t,n])=>R.jsxs(dt,{children:[R.jsxs(it,{fw:700,span:!0,children:[" ",`${t}: `]}),R.jsx(it,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function _ve({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return R.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function wen(e){const{metaData:t}=e;return R.jsx("td",{children:R.jsx(jOe,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:R.jsxs(Bi,{spacing:"xs",children:[R.jsxs(dt,{children:["IP:"," ",t.ip]}),R.jsxs(dt,{children:["Language:"," ",t.language]}),R.jsxs(dt,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),R.jsxs(dt,{children:["User Agent:"," ",t.userAgent]})]})})})}function Een({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=fo(),{studyId:s}=fm(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),r())},[a,u]=C.useState([]),[l,c]=C.useState(!1),f=()=>V0t({title:"Confirm rejecting participants",children:R.jsxs(it,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",R.jsx(it,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=HRe(n.sequence),p=[R.jsx("th",{children:R.jsx(vi,{justify:"center",children:R.jsx(iE,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),R.jsx("th",{children:"ID"},"ID"),R.jsx("th",{children:"Status"},"status"),R.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[R.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),R.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),R.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>R.jsxs("tr",{children:[R.jsx("td",{children:R.jsx(vi,{justify:"center",children:R.jsx(iE,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),R.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),R.jsx("td",{children:R.jsxs(vi,{direction:"row",align:"center",children:[g.rejected?R.jsx(Yp,{label:"Rejected",children:R.jsx(fPe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?R.jsx(Yp,{label:"Completed",children:R.jsx(yyt,{size:16,color:"teal",style:{marginBottom:-3}})}):R.jsx(Yp,{label:"In Progress",children:R.jsx(Cyt,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&R.jsxs(it,{size:"sm",mb:-1,ml:4,children:[Object.entries(g.answers).length/(Lu(g.sequence).length-1)*100,"%"]})]})}),g.metadata?R.jsx(wen,{metaData:g.metadata}):R.jsx("td",{children:"N/A"}),h.map(y=>{const v=URe(g.sequence,y.orderPath),_=v&&Object.entries(g.answers).sort((w,E)=>{const S=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),b=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10);return S-b}).filter(([w])=>{const E=w.slice(0,w.lastIndexOf("_")),S=parseInt(w.slice(w.lastIndexOf("_")+1),10);return E===y.componentName&&S<=v[0].lastIndex&&S>=v[0].firstIndex});return _!==null&&_.length>=y.timesSeenInBlock+1?R.jsxs(j.Fragment,{children:[R.jsx(ben,{cellData:_[y.timesSeenInBlock][1]}),R.jsx(_ve,{cellData:_[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):R.jsxs(j.Fragment,{children:[R.jsx("td",{children:"N/A"}),R.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),R.jsx(_ve,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?R.jsxs(R.Fragment,{children:[R.jsx(Fm,{visible:l,overlayBlur:2}),R.jsxs(vi,{justify:"space-between",mb:8,p:8,children:[R.jsx(yr,{children:R.jsx(Kp,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,icon:R.jsx(Ayt,{size:14}),onChange:g=>g&&d(g)})}),R.jsx(yr,{children:R.jsx(Fr,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),R.jsxs(uK,{striped:!0,withBorder:!0,children:[R.jsx("thead",{children:R.jsx("tr",{children:p})}),R.jsx("tbody",{children:m})]})]}):R.jsx(vi,{justify:"center",align:"center",style:{height:"100%"},children:R.jsx(it,{children:"No data available"})})}function xen(e){const{globalConfig:t}=e,{studyId:n}=fm(),[r,i]=C.useState([]),[s,o]=C.useState(void 0),[a,u]=C.useState(!1),{storageEngine:l}=fo(),c=Vl(),{tab:f}=fm(),d=C.useCallback(async()=>{if(u(!0),n){const m=await bee(n,t);if(!m||!l)return;await l.initializeStudyDb(n,m);const g=await l.getAllParticipantsData();i(g),o(m),u(!1)}},[t,l,n]);C.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=C.useMemo(()=>{const m=r.filter(y=>y.completed),g=r.filter(y=>!y.completed);return[m,g]},[r]);return R.jsxs(vI,{children:[R.jsx(cC,{studyIds:e.globalConfig.configsList}),R.jsxs(Lm,{fluid:!0,style:{height:"100%"},children:[R.jsx(Fm,{visible:a}),R.jsxs(ec,{variant:"outline",value:f,onTabChange:m=>c(`./../${m}`),style:{height:"100%"},children:[R.jsxs(ec.List,{children:[R.jsx(ec.Tab,{value:"table",icon:R.jsx(Oyt,{size:16}),children:"Table View"}),R.jsx(ec.Tab,{value:"stats",icon:R.jsx(myt,{size:16}),children:"Trial Stats"}),R.jsx(ec.Tab,{value:"settings",icon:R.jsx(Tyt,{size:16}),children:"Individual Replay"})]}),R.jsx(ec.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&R.jsx(Een,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),R.jsx(ec.Panel,{value:"stats",pt:"xs",children:"statsboard"}),R.jsx(ec.Panel,{value:"settings",pt:"xs",children:"Settings tab content"})]})]})]})}function y7({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=eS(),{storageEngine:i}=fo();return C.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?R.jsx(Fm,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?R.jsx(dY,{to:"/login"}):R.jsx(R.Fragment,{children:e})}async function oje(e,t,n){if(e instanceof Id){t(!0);const r=new Rp,i=dL();try{await BGt(i,r)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function Sen(){const{user:e}=eS(),[t,n]=C.useState(null),[r,i]=C.useState(!1),{storageEngine:s}=fo();return C.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?R.jsx(dY,{to:"/"}):R.jsx(Lm,{children:R.jsx(p4,{p:"lg",children:R.jsxs(vi,{align:"center",direction:"column",justify:"center",children:[R.jsx(p_,{maw:200,mt:50,mb:100,src:`${Nc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),R.jsxs(R.Fragment,{children:[R.jsx(it,{mb:20,children:"To access admin settings, please sign in using your Google account."}),R.jsx(Fr,{onClick:()=>oje(s,i,n),leftIcon:R.jsx(hyt,{}),variant:"filled",children:"Sign In With Google"})]}),t?R.jsx(pw,{size:"lg",color:"red",mt:30,children:t}):null,R.jsx(Fm,{visible:r})]})})})}function Ten(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function aje(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function Cen(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=Ten(i,t),o=aje(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var uje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ua,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var F=["th","st","nd","rd"],z=N%100;return"["+N+(F[(z-20)%10]||F[z]||F[0])+"]"}},_=function(N,F,z){var W=String(N);return!W||W.length>=F?N:""+Array(F+1-W.length).join(z)+N},w={s:_,z:function(N){var F=-N.utcOffset(),z=Math.abs(F),W=Math.floor(z/60),V=z%60;return(F<=0?"+":"-")+_(W,2,"0")+":"+_(V,2,"0")},m:function N(F,z){if(F.date()<z.date())return-N(z,F);var W=12*(z.year()-F.year())+(z.month()-F.month()),V=F.clone().add(W,f),G=z-V<0,M=F.clone().add(W+(G?-1:1),f);return+(-(W+(z-V)/(G?V-M:M-V))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},E="en",S={};S[E]=v;var b="$isDayjsObject",T=function(N){return N instanceof $||!(!N||!N[b])},A=function N(F,z,W){var V;if(!F)return E;if(typeof F=="string"){var G=F.toLowerCase();S[G]&&(V=G),z&&(S[G]=z,V=G);var M=F.split("-");if(!V&&M.length>1)return N(M[0])}else{var H=F.name;S[H]=F,V=H}return!W&&V&&(E=V),V||!W&&E},I=function(N,F){if(T(N))return N.clone();var z=typeof F=="object"?F:{};return z.date=N,z.args=arguments,new $(z)},k=w;k.l=A,k.i=T,k.w=function(N,F){return I(N,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var $=function(){function N(z){this.$L=A(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[b]=!0}var F=N.prototype;return F.parse=function(z){this.$d=function(W){var V=W.date,G=W.utc;if(V===null)return new Date(NaN);if(k.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var M=V.match(g);if(M){var H=M[2]-1||0,Y=(M[7]||"0").substring(0,3);return G?new Date(Date.UTC(M[1],H,M[3]||1,M[4]||0,M[5]||0,M[6]||0,Y)):new Date(M[1],H,M[3]||1,M[4]||0,M[5]||0,M[6]||0,Y)}}return new Date(V)}(z),this.init()},F.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},F.$utils=function(){return k},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(z,W){var V=I(z);return this.startOf(W)<=V&&V<=this.endOf(W)},F.isAfter=function(z,W){return I(z)<this.startOf(W)},F.isBefore=function(z,W){return this.endOf(W)<I(z)},F.$g=function(z,W,V){return k.u(z)?this[W]:this.set(V,z)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(z,W){var V=this,G=!!k.u(W)||W,M=k.p(z),H=function(fe,me){var _e=k.w(V.$u?Date.UTC(V.$y,me,fe):new Date(V.$y,me,fe),V);return G?_e:_e.endOf(l)},Y=function(fe,me){return k.w(V.toDate()[fe].apply(V.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(me)),V)},L=this.$W,B=this.$M,q=this.$D,Z="set"+(this.$u?"UTC":"");switch(M){case h:return G?H(1,0):H(31,11);case f:return G?H(1,B):H(0,B+1);case c:var ue=this.$locale().weekStart||0,he=(L<ue?L+7:L)-ue;return H(G?q-he:q+(6-he),B);case l:case p:return Y(Z+"Hours",0);case u:return Y(Z+"Minutes",1);case a:return Y(Z+"Seconds",2);case o:return Y(Z+"Milliseconds",3);default:return this.clone()}},F.endOf=function(z){return this.startOf(z,!1)},F.$set=function(z,W){var V,G=k.p(z),M="set"+(this.$u?"UTC":""),H=(V={},V[l]=M+"Date",V[p]=M+"Date",V[f]=M+"Month",V[h]=M+"FullYear",V[u]=M+"Hours",V[a]=M+"Minutes",V[o]=M+"Seconds",V[s]=M+"Milliseconds",V)[G],Y=G===l?this.$D+(W-this.$W):W;if(G===f||G===h){var L=this.clone().set(p,1);L.$d[H](Y),L.init(),this.$d=L.set(p,Math.min(this.$D,L.daysInMonth())).$d}else H&&this.$d[H](Y);return this.init(),this},F.set=function(z,W){return this.clone().$set(z,W)},F.get=function(z){return this[k.p(z)]()},F.add=function(z,W){var V,G=this;z=Number(z);var M=k.p(W),H=function(B){var q=I(G);return k.w(q.date(q.date()+Math.round(B*z)),G)};if(M===f)return this.set(f,this.$M+z);if(M===h)return this.set(h,this.$y+z);if(M===l)return H(1);if(M===c)return H(7);var Y=(V={},V[a]=r,V[u]=i,V[o]=n,V)[M]||1,L=this.$d.getTime()+z*Y;return k.w(L,this)},F.subtract=function(z,W){return this.add(-1*z,W)},F.format=function(z){var W=this,V=this.$locale();if(!this.isValid())return V.invalidDate||m;var G=z||"YYYY-MM-DDTHH:mm:ssZ",M=k.z(this),H=this.$H,Y=this.$m,L=this.$M,B=V.weekdays,q=V.months,Z=V.meridiem,ue=function(me,_e,ge,Be){return me&&(me[_e]||me(W,G))||ge[_e].slice(0,Be)},he=function(me){return k.s(H%12||12,me,"0")},fe=Z||function(me,_e,ge){var Be=me<12?"AM":"PM";return ge?Be.toLowerCase():Be};return G.replace(y,function(me,_e){return _e||function(ge){switch(ge){case"YY":return String(W.$y).slice(-2);case"YYYY":return k.s(W.$y,4,"0");case"M":return L+1;case"MM":return k.s(L+1,2,"0");case"MMM":return ue(V.monthsShort,L,q,3);case"MMMM":return ue(q,L);case"D":return W.$D;case"DD":return k.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return ue(V.weekdaysMin,W.$W,B,2);case"ddd":return ue(V.weekdaysShort,W.$W,B,3);case"dddd":return B[W.$W];case"H":return String(H);case"HH":return k.s(H,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return fe(H,Y,!0);case"A":return fe(H,Y,!1);case"m":return String(Y);case"mm":return k.s(Y,2,"0");case"s":return String(W.$s);case"ss":return k.s(W.$s,2,"0");case"SSS":return k.s(W.$ms,3,"0");case"Z":return M}return null}(me)||M.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(z,W,V){var G,M=this,H=k.p(W),Y=I(z),L=(Y.utcOffset()-this.utcOffset())*r,B=this-Y,q=function(){return k.m(M,Y)};switch(H){case h:G=q()/12;break;case f:G=q();break;case d:G=q()/3;break;case c:G=(B-L)/6048e5;break;case l:G=(B-L)/864e5;break;case u:G=B/i;break;case a:G=B/r;break;case o:G=B/n;break;default:G=B}return V?G:k.a(G)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(z,W){if(!z)return this.$L;var V=this.clone(),G=A(z,W,!0);return G&&(V.$L=G),V},F.clone=function(){return k.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},N}(),P=$.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(N){P[N[1]]=function(F){return this.$g(F,N[0],N[1])}}),I.extend=function(N,F){return N.$i||(N(F,$,I),N.$i=!0),I},I.locale=A,I.isDayjs=T,I.unix=function(N){return I(1e3*N)},I.en=S[E],I.Ls=S,I.p={},I})})(uje);var Aen=uje.exports;const Mn=Ju(Aen);function Ien(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(Mn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function Oen(e,t="monday",n="dd"){const r=[],i=aje(new Date,t);for(let s=0;s<7;s+=1)r.push(Mn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function lje(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function Om(e,t){return lje(e,t)&&e.getDate()===t.getDate()}function Pen(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var ken=Object.defineProperty,Ren=Object.defineProperties,$en=Object.getOwnPropertyDescriptors,_L=Object.getOwnPropertySymbols,cje=Object.prototype.hasOwnProperty,fje=Object.prototype.propertyIsEnumerable,bve=(e,t,n)=>t in e?ken(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wve=(e,t)=>{for(var n in t||(t={}))cje.call(t,n)&&bve(e,n,t[n]);if(_L)for(var n of _L(t))fje.call(t,n)&&bve(e,n,t[n]);return e},Nen=(e,t)=>Ren(e,$en(t)),Den=(e,t)=>{var n={};for(var r in e)cje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_L)for(var r of _L(e))t.indexOf(r)<0&&fje.call(e,r)&&(n[r]=e[r]);return n};function $q(e){var t=e,{direction:n,style:r}=t,i=Den(t,["direction","style"]);const s=ps();return j.createElement("svg",wve({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:Nen(wve({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),j.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}$q.displayName="@mantine/dates/ArrowIcon";var Men=Object.defineProperty,Len=Object.defineProperties,Fen=Object.getOwnPropertyDescriptors,Eve=Object.getOwnPropertySymbols,jen=Object.prototype.hasOwnProperty,Ben=Object.prototype.propertyIsEnumerable,xve=(e,t,n)=>t in e?Men(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zen=(e,t)=>{for(var n in t||(t={}))jen.call(t,n)&&xve(e,n,t[n]);if(Eve)for(var n of Eve(t))Ben.call(t,n)&&xve(e,n,t[n]);return e},Uen=(e,t)=>Len(e,Fen(t));const v7={xs:32,sm:40,md:44,lg:50,xl:54};var Ven=pt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:v7}),height:e.fn.size({size:t,sizes:v7}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:Uen(zen({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:v7}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),Hen=Object.defineProperty,bL=Object.getOwnPropertySymbols,dje=Object.prototype.hasOwnProperty,hje=Object.prototype.propertyIsEnumerable,Sve=(e,t,n)=>t in e?Hen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qen=(e,t)=>{for(var n in t||(t={}))dje.call(t,n)&&Sve(e,n,t[n]);if(bL)for(var n of bL(t))hje.call(t,n)&&Sve(e,n,t[n]);return e},Wen=(e,t)=>{var n={};for(var r in e)dje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bL)for(var r of bL(e))t.indexOf(r)<0&&hje.call(e,r)&&(n[r]=e[r]);return n};const Gen={xs:12,sm:14,md:18,lg:22,xl:28};function xF(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,w=Wen(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:E,cx:S,theme:b}=Ven({size:c},{classNames:f,styles:d,unstyled:v,name:h}),T=b.fn.size({size:c,sizes:Gen});return j.createElement("div",qen({className:S(E.calendarHeader,a)},w),j.createElement(dm,{className:E.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:A=>y&&A.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},j.createElement($q,{direction:"left",width:T,height:T})),j.createElement(Nm,{unstyled:v,className:E.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:A=>y&&A.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&j.createElement(jIe,{error:!1,size:c,className:E.calendarHeaderLevelIcon})),j.createElement(dm,{className:E.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:A=>y&&A.preventDefault(),"data-mantine-stop-propagation":_||void 0},j.createElement($q,{direction:"right",width:T,height:T})))}xF.displayName="@mantine/dates/CalendarHeader";function w$(e,t){return Mn(new Date(e,1,1)).format(t)}var Yen=Object.defineProperty,Ken=Object.defineProperties,Xen=Object.getOwnPropertyDescriptors,Tve=Object.getOwnPropertySymbols,Qen=Object.prototype.hasOwnProperty,Jen=Object.prototype.propertyIsEnumerable,Cve=(e,t,n)=>t in e?Yen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_7=(e,t)=>{for(var n in t||(t={}))Qen.call(t,n)&&Cve(e,n,t[n]);if(Tve)for(var n of Tve(t))Jen.call(t,n)&&Cve(e,n,t[n]);return e},Zen=(e,t)=>Ken(e,Xen(t));const etn={xs:32,sm:40,md:46,lg:52,xl:56};var ttn=pt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:Zen(_7({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:etn}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":_7({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:_7({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),ntn=Object.defineProperty,wL=Object.getOwnPropertySymbols,pje=Object.prototype.hasOwnProperty,mje=Object.prototype.propertyIsEnumerable,Ave=(e,t,n)=>t in e?ntn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rtn=(e,t)=>{for(var n in t||(t={}))pje.call(t,n)&&Ave(e,n,t[n]);if(wL)for(var n of wL(t))mje.call(t,n)&&Ave(e,n,t[n]);return e},itn=(e,t)=>{var n={};for(var r in e)pje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wL)for(var r of wL(e))t.indexOf(r)<0&&mje.call(e,r)&&(n[r]=e[r]);return n};function gje(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=itn(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=ttn({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[w,E]=C.useState(s),S=Pen(w),b=S.map(T=>j.createElement(Nm,{key:T,unstyled:p,onClick:()=>o(T),disabled:T<u||T>l,onMouseDown:A=>h&&A.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:T===s})},w$(T,m)));return j.createElement("div",rtn({className:_(v.yearPicker,n)},y),j.createElement(xF,{unstyled:p,label:`${w$(S[0],m)}  ${w$(S[S.length-1],m)}`,hasPrevious:typeof u=="number"?u<S[0]:!0,hasNext:typeof l=="number"?l>S[S.length-1]:!0,onNext:()=>E(T=>T+10),onPrevious:()=>E(T=>T-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),j.createElement("div",{className:v.yearPickerControls},b))}gje.displayName="@mantine/dates/YearPicker";function Nq({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=Mn(e).endOf("month"),o=Mn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var stn=Object.defineProperty,otn=Object.defineProperties,atn=Object.getOwnPropertyDescriptors,Ive=Object.getOwnPropertySymbols,utn=Object.prototype.hasOwnProperty,ltn=Object.prototype.propertyIsEnumerable,Ove=(e,t,n)=>t in e?stn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b7=(e,t)=>{for(var n in t||(t={}))utn.call(t,n)&&Ove(e,n,t[n]);if(Ive)for(var n of Ive(t))ltn.call(t,n)&&Ove(e,n,t[n]);return e},ctn=(e,t)=>otn(e,atn(t));const ftn={xs:32,sm:40,md:46,lg:52,xl:56};var dtn=pt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:ctn(b7({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:ftn}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":b7({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:b7({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),htn=Object.defineProperty,EL=Object.getOwnPropertySymbols,yje=Object.prototype.hasOwnProperty,vje=Object.prototype.propertyIsEnumerable,Pve=(e,t,n)=>t in e?htn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ptn=(e,t)=>{for(var n in t||(t={}))yje.call(t,n)&&Pve(e,n,t[n]);if(EL)for(var n of EL(t))vje.call(t,n)&&Pve(e,n,t[n]);return e},mtn=(e,t)=>{var n={};for(var r in e)yje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EL)for(var r of EL(e))t.indexOf(r)<0&&vje.call(e,r)&&(n[r]=e[r]);return n};function _je(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:w}=t,E=mtn(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:S,cx:b}=dtn({size:f},{classNames:i,styles:r,unstyled:v,name:p}),T=Ien(a),A=d instanceof Date?d.getFullYear():void 0,I=h instanceof Date?h.getFullYear():void 0,k=T.map(($,P)=>j.createElement(Nm,{key:$,unstyled:v,onClick:()=>o(P),className:b(S.monthPickerControl,{[S.monthPickerControlActive]:P===s.month&&u===s.year}),disabled:!Nq({date:new Date(u,P),minDate:d,maxDate:h}),onMouseDown:N=>y&&N.preventDefault(),"data-mantine-stop-propagation":w||void 0},$));return j.createElement("div",ptn({className:b(S.monthPicker,n)},E),j.createElement(xF,{label:w$(u,_),hasNext:typeof I=="number"?u<I:!0,hasPrevious:typeof A=="number"?u>A:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:w}),j.createElement("div",{className:S.monthPickerControls},k))}_je.displayName="@mantine/dates/MonthPicker";function gtn({month:e,locale:t,format:n}){return Hg(Mn(e).locale(t).format(n))}function ytn({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function vtn({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var _tn=Object.defineProperty,btn=Object.defineProperties,wtn=Object.getOwnPropertyDescriptors,kve=Object.getOwnPropertySymbols,Etn=Object.prototype.hasOwnProperty,xtn=Object.prototype.propertyIsEnumerable,Rve=(e,t,n)=>t in e?_tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,w7=(e,t)=>{for(var n in t||(t={}))Etn.call(t,n)&&Rve(e,n,t[n]);if(kve)for(var n of kve(t))xtn.call(t,n)&&Rve(e,n,t[n]);return e},$ve=(e,t)=>btn(e,wtn(t));const E$={xs:34,sm:38,md:46,lg:58,xl:66};var Stn=pt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:$ve(w7($ve(w7(w7({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:E$}),height:e.fn.size({size:t,sizes:E$}),lineHeight:`${e.fn.size({size:t,sizes:E$})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),Ttn=Object.defineProperty,Ctn=Object.defineProperties,Atn=Object.getOwnPropertyDescriptors,xL=Object.getOwnPropertySymbols,bje=Object.prototype.hasOwnProperty,wje=Object.prototype.propertyIsEnumerable,Nve=(e,t,n)=>t in e?Ttn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Itn=(e,t)=>{for(var n in t||(t={}))bje.call(t,n)&&Nve(e,n,t[n]);if(xL)for(var n of xL(t))wje.call(t,n)&&Nve(e,n,t[n]);return e},Otn=(e,t)=>Ctn(e,Atn(t)),Ptn=(e,t)=>{var n={};for(var r in e)bje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xL)for(var r of xL(e))t.indexOf(r)<0&&wje.call(e,r)&&(n[r]=e[r]);return n};const Eje=C.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:w,renderDay:E,unstyled:S,disabled:b,stopPropagation:T}=n,A=Ptn(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:I,cx:k}=Stn({size:g,fullWidth:y,hideOutsideDates:w},{classNames:l,styles:c,unstyled:S,name:p});return j.createElement("button",Otn(Itn({},A),{type:"button",ref:t,disabled:b,onMouseEnter:$=>u(i,$),tabIndex:ytn({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":vtn({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":T||void 0,"data-outside":a&&!b||void 0,"data-weekend":o&&!b||void 0,"data-selected":s&&!b||void 0,"data-in-range":m&&!b||void 0,"data-first-in-range":d&&!b||void 0,"data-last-in-range":h&&!b||void 0,className:k(I.day,r)}),typeof E=="function"?E(i):i.getDate())});Eje.displayName="@mantine/core/Day";function ktn(e,t=[0,6]){return t.includes(e.getDay())}function Rtn(e,t){return!lje(e,t)}function $tn({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&Mn(t).isBefore(i,"day"),a=e instanceof Date&&Mn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function Ntn(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[Mn(t[0]).subtract(1,"day"),Mn(t[1]).add(1,"day")],i=n&&Om(e,t[0]),s=n&&Om(e,t[1]),o=n&&Mn(e).isAfter(r[0],"day")&&Mn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function Dve({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=Rtn(e,t),f=n&&(Array.isArray(s)?s.some(g=>Om(g,e)):Om(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=Ntn(e,u);return{disabled:$tn({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:ktn(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var Dtn=Object.defineProperty,Mtn=Object.defineProperties,Ltn=Object.getOwnPropertyDescriptors,Mve=Object.getOwnPropertySymbols,Ftn=Object.prototype.hasOwnProperty,jtn=Object.prototype.propertyIsEnumerable,Lve=(e,t,n)=>t in e?Dtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Btn=(e,t)=>{for(var n in t||(t={}))Ftn.call(t,n)&&Lve(e,n,t[n]);if(Mve)for(var n of Mve(t))jtn.call(t,n)&&Lve(e,n,t[n]);return e},ztn=(e,t)=>Mtn(e,Ltn(t)),Utn=pt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:ztn(Btn({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),Vtn=Object.defineProperty,SL=Object.getOwnPropertySymbols,xje=Object.prototype.hasOwnProperty,Sje=Object.prototype.propertyIsEnumerable,Fve=(e,t,n)=>t in e?Vtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Htn=(e,t)=>{for(var n in t||(t={}))xje.call(t,n)&&Fve(e,n,t[n]);if(SL)for(var n of SL(t))Sje.call(t,n)&&Fve(e,n,t[n]);return e},qtn=(e,t)=>{var n={};for(var r in e)xje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SL)for(var r of SL(e))t.indexOf(r)<0&&Sje.call(e,r)&&(n[r]=e[r]);return n};const qk=()=>!1,Wtn={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},Tje=C.forwardRef((e,t)=>{const n=ut("Month",Wtn,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:w,fullWidth:E,preventFocus:S,focusable:b,firstDayOfWeek:T,onDayKeyDown:A,daysRefs:I,hideOutsideDates:k,isDateInRange:$=qk,isDateFirstInRange:P=qk,isDateLastInRange:N=qk,renderDay:F,weekdayLabelFormat:z,unstyled:W,weekendDays:V,__stopPropagation:G}=n,M=qtn(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:H,cx:Y,theme:L}=Utn({fullWidth:E},{classNames:f,styles:d,unstyled:W,name:_}),B=u||L.datesLocale,q=Cen(i,T),Z=Oen(B,T,z).map(_e=>j.createElement("th",{className:H.weekdayCell,key:_e},j.createElement(it,{size:w,className:H.weekday},_e.length>=2?Hg(_e):_e))),ue=Array.isArray(s)?s.every(_e=>_e instanceof Date):s instanceof Date,he=s instanceof Date&&Mn(s).isAfter(Mn(i).startOf("month"))&&Mn(s).isBefore(Mn(i).endOf("month")),fe=C.useMemo(()=>q.flatMap(_e=>_e).find(_e=>{const ge=Dve({date:_e,month:i,hasValue:ue,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:V});return!ge.disabled&&!ge.outside})||Mn(i).startOf("month").toDate(),[]),me=q.map((_e,ge)=>{const Be=_e.map((Me,ct)=>{const Oe=Dve({date:Me,month:i,hasValue:ue,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:V}),Re={rowIndex:ge,cellIndex:ct,date:Me};return j.createElement("td",{className:H.cell,key:ct},j.createElement(Eje,{unstyled:W,ref:Ye=>{I&&(Array.isArray(I[ge])||(I[ge]=[]),I[ge][ct]=Ye)},onClick:()=>typeof o=="function"&&o(Me),onMouseDown:Ye=>S&&Ye.preventDefault(),value:Me,outside:Oe.outside,weekend:Oe.weekend,inRange:Oe.inRange||$(Me,Oe),firstInRange:Oe.firstInRange||P(Me,Oe),lastInRange:Oe.lastInRange||N(Me,Oe),firstInMonth:Om(Me,fe),selected:Oe.selected||Oe.selectedInRange,hasValue:he,onKeyDown:Ye=>typeof A=="function"&&A(Re,Ye),className:typeof l=="function"?l(Me,Oe):null,style:typeof c=="function"?c(Me,Oe):null,disabled:Oe.disabled,onMouseEnter:typeof g=="function"?g:qk,size:w,fullWidth:E,focusable:b,hideOutsideDates:k,__staticSelector:_,styles:d,classNames:f,renderDay:F,stopPropagation:G}))});return j.createElement("tr",{key:ge},Be)});return j.createElement(dt,Htn({component:"table",className:Y(H.month,r),ref:t},M),!v&&j.createElement("thead",null,j.createElement("tr",null,Z)),j.createElement("tbody",null,me))});Tje.displayName="@mantine/dates/Month";var Gtn=Object.defineProperty,TL=Object.getOwnPropertySymbols,Cje=Object.prototype.hasOwnProperty,Aje=Object.prototype.propertyIsEnumerable,jve=(e,t,n)=>t in e?Gtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ytn=(e,t)=>{for(var n in t||(t={}))Cje.call(t,n)&&jve(e,n,t[n]);if(TL)for(var n of TL(t))Aje.call(t,n)&&jve(e,n,t[n]);return e},Ktn=(e,t)=>{var n={};for(var r in e)Cje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TL)for(var r of TL(e))t.indexOf(r)<0&&Aje.call(e,r)&&(n[r]=e[r]);return n};function Ije(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:w,preventFocus:E,renderDay:S,unstyled:b,__stopPropagation:T}=t,A=Ktn(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const I=Mn(i).add(n,"months").toDate(),k=Mn(i).subtract(1,"months").toDate(),$=Array(n).fill(0).map((P,N)=>{const F=Mn(i).add(N,"months").toDate();return j.createElement("div",{key:N},j.createElement(xF,{hasNext:N+1===n&&Nq({date:I,minDate:o,maxDate:a}),hasPrevious:N===0&&Nq({date:k,minDate:o,maxDate:a}),label:gtn({month:F,locale:s,format:_}),onNext:()=>f(Mn(i).add(r,"months").toDate()),onPrevious:()=>f(Mn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:N>0,preventFocus:E,unstyled:b,__stopPropagation:T}),j.createElement(Tje,Ytn({month:F,daysRefs:c.current[N],onDayKeyDown:(...z)=>h(N,...z),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:N===0,preventFocus:E,renderDay:S,weekdayLabelFormat:w,unstyled:b,__stopPropagation:T},A)))});return j.createElement(j.Fragment,null,$)}Ije.displayName="@mantine/dates/MonthsList";var Xtn=pt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:E$})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),Qtn=Object.defineProperty,CL=Object.getOwnPropertySymbols,Oje=Object.prototype.hasOwnProperty,Pje=Object.prototype.propertyIsEnumerable,Bve=(e,t,n)=>t in e?Qtn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jtn=(e,t)=>{for(var n in t||(t={}))Oje.call(t,n)&&Bve(e,n,t[n]);if(CL)for(var n of CL(t))Pje.call(t,n)&&Bve(e,n,t[n]);return e},Ztn=(e,t)=>{var n={};for(var r in e)Oje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CL)for(var r of CL(e))t.indexOf(r)<0&&Pje.call(e,r)&&(n[r]=e[r]);return n};const wee=C.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:E,hideWeekdays:S,fullWidth:b,preventFocus:T,firstDayOfWeek:A="monday",value:I,onChange:k,onDayMouseEnter:$,range:P,nextDecadeLabel:N,nextMonthLabel:F,nextYearLabel:z,previousDecadeLabel:W,previousMonthLabel:V,previousYearLabel:G,labelFormat:M="MMMM YYYY",weekdayLabelFormat:H,hideOutsideDates:Y,isDateInRange:L,isDateFirstInRange:B,isDateLastInRange:q,renderDay:Z,unstyled:ue,weekendDays:he,__stopPropagation:fe,yearLabelFormat:me="YYYY"}=n,_e=Ztn(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[ge,Be]=C.useState(p),{classes:Me,cx:ct,theme:Oe}=Xtn({size:d,fullWidth:b,amountOfMonths:ge==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:ue}),Re=l||Oe.datesLocale,Ye=C.useRef(Array(c).fill(0).map(()=>[])),[Ut,Ft]=Fo({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[Je,Ge]=C.useState(Ut.getFullYear()),gt=m instanceof Date?m.getFullYear():100,at=g instanceof Date?g.getFullYear():1e4,lt=6,Et=(Se,Fe,Ue,mt=1)=>{var cn;const Ve=["down","up"].includes(Se),wt=Ve?Ue.rowIndex+(Se==="down"?mt:-mt):Ue.rowIndex,bt=Ve?Ue.cellIndex:Ue.cellIndex+(Se==="right"?mt:-mt),bn=(cn=Ye.current[Fe][wt])==null?void 0:cn[bt];bn&&(bn.disabled?Et(Se,Fe,Ue,mt+1):bn.focus())},ve=(Se,Fe,Ue)=>{var mt;switch(Ue.key){case"ArrowDown":{Ue.preventDefault(),Fe.rowIndex+1<Ye.current[Se].length&&Et("down",Se,Fe);break}case"ArrowUp":{Ue.preventDefault(),Fe.rowIndex>0&&Et("up",Se,Fe);break}case"ArrowRight":{Ue.preventDefault(),Fe.cellIndex!==lt?Et("right",Se,Fe):Se+1<c&&Ye.current[Se+1][Fe.rowIndex]&&((mt=Ye.current[Se+1][Fe.rowIndex][0])==null||mt.focus());break}case"ArrowLeft":Ue.preventDefault(),Fe.cellIndex!==0?Et("left",Se,Fe):Se>0&&Ye.current[Se-1][Fe.rowIndex]&&Ye.current[Se-1][Fe.rowIndex][lt].focus()}};return j.createElement(dt,Jtn({className:ct(Me.calendarBase,r),ref:t},_e),ge==="year"&&j.createElement(gje,{size:d,value:Je,minYear:gt,maxYear:at,onChange:Se=>{Ge(Se),Be("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:fe,nextDecadeLabel:N,previousDecadeLabel:W,preventFocus:T,unstyled:ue,yearLabelFormat:me}),ge==="month"&&j.createElement(_je,{size:d,value:{month:Ut.getMonth(),year:Ut.getFullYear()},year:Je,onYearChange:Ge,onNextLevel:()=>Be("year"),locale:Re,minDate:m,maxDate:g,onChange:Se=>{Ft(new Date(Je,Se,1)),Be("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:fe,nextYearLabel:z,previousYearLabel:G,preventFocus:T,unstyled:ue,yearLabelFormat:me}),ge==="date"&&j.createElement(Ije,{amountOfMonths:c,paginateBy:f,month:Ut,locale:Re,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:Ye,onMonthChange:Ft,onNextLevel:()=>Be("month"),onDayKeyDown:ve,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:E,hideWeekdays:S,fullWidth:b,preventFocus:T,firstDayOfWeek:A,value:I,range:P,onChange:k,nextMonthLabel:F,previousMonthLabel:V,labelFormat:M,weekdayLabelFormat:H,onDayMouseEnter:$,renderDay:Z,hideOutsideDates:Y,isDateInRange:L,isDateFirstInRange:B,isDateLastInRange:q,unstyled:ue,weekendDays:he,__stopPropagation:fe}))});wee.displayName="@mantine/dates/CalendarBase";var enn=Object.defineProperty,AL=Object.getOwnPropertySymbols,kje=Object.prototype.hasOwnProperty,Rje=Object.prototype.propertyIsEnumerable,zve=(e,t,n)=>t in e?enn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tnn=(e,t)=>{for(var n in t||(t={}))kje.call(t,n)&&zve(e,n,t[n]);if(AL)for(var n of AL(t))Rje.call(t,n)&&zve(e,n,t[n]);return e},nnn=(e,t)=>{var n={};for(var r in e)kje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AL)for(var r of AL(e))t.indexOf(r)<0&&Rje.call(e,r)&&(n[r]=e[r]);return n};const rnn={__staticSelector:"Calendar"};function $je(e){const t=ut("Calendar",rnn,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=nnn(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>Om(c,u));return s(l?i.filter(c=>!Om(c,u)):[...i,u])};return j.createElement(wee,tnn({__staticSelector:n,onChange:a,value:i},o))}$je.displayName="@mantine/dates/Calendar";var inn=Object.defineProperty,snn=Object.defineProperties,onn=Object.getOwnPropertyDescriptors,Uve=Object.getOwnPropertySymbols,ann=Object.prototype.hasOwnProperty,unn=Object.prototype.propertyIsEnumerable,Vve=(e,t,n)=>t in e?inn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lnn=(e,t)=>{for(var n in t||(t={}))ann.call(t,n)&&Vve(e,n,t[n]);if(Uve)for(var n of Uve(t))unn.call(t,n)&&Vve(e,n,t[n]);return e},cnn=(e,t)=>snn(e,onn(t)),fnn=pt(e=>({wrapper:cnn(lnn({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),dnn=Object.defineProperty,hnn=Object.defineProperties,pnn=Object.getOwnPropertyDescriptors,IL=Object.getOwnPropertySymbols,Nje=Object.prototype.hasOwnProperty,Dje=Object.prototype.propertyIsEnumerable,Hve=(e,t,n)=>t in e?dnn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lT=(e,t)=>{for(var n in t||(t={}))Nje.call(t,n)&&Hve(e,n,t[n]);if(IL)for(var n of IL(t))Dje.call(t,n)&&Hve(e,n,t[n]);return e},qve=(e,t)=>hnn(e,pnn(t)),mnn=(e,t)=>{var n={};for(var r in e)Nje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IL)for(var r of IL(e))t.indexOf(r)<0&&Dje.call(e,r)&&(n[r]=e[r]);return n};const gnn={xs:24,sm:30,md:34,lg:40,xl:44},ynn={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},Eee=C.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=ynn,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:w,inputLabel:E,__staticSelector:S="DatePickerBase",dropdownOpened:b,setDropdownOpened:T,dropdownType:A="popover",dropdownPosition:I="flip",clearable:k=!0,clearButtonLabel:$,onClear:P,positionDependencies:N=[],zIndex:F,withinPortal:z=!1,onBlur:W,onFocus:V,onChange:G,onKeyDown:M,name:H="date",sx:Y,amountOfMonths:L=1,onDropdownClose:B,onDropdownOpen:q,clickOutsideEvents:Z=["mousedown","touchstart"],modalZIndex:ue,errorProps:he,labelProps:fe,descriptionProps:me,clearButtonTabIndex:_e=0,unstyled:ge,inputContainer:Be,inputWrapperOrder:Me,modalProps:ct,withAsterisk:Oe}=n,Re=mnn(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:Ye,cx:Ut,theme:Ft}=fnn(null,{classNames:r,styles:o,unstyled:ge,name:S}),{systemStyles:Je,rest:Ge}=Wf(Re),gt=Ia(d),at=C.useRef(),lt=()=>{T(!1),B==null||B()},Et=()=>{T(!0),q==null||q()},ve=()=>{T(!b),b?B==null||B():q==null||q()},Se=Ve=>{Ve.key==="Escape"&&(lt(),window.setTimeout(()=>{var wt;return(wt=at.current)==null?void 0:wt.focus()},0))},Fe=k?j.createElement(Bh,{variant:"transparent","aria-label":$,onClick:P,size:_,tabIndex:_e,unstyled:ge}):null,Ue=Ve=>{typeof W=="function"&&W(Ve),l&&lt()},mt=Ve=>{typeof V=="function"&&V(Ve),l&&Et()},cn=Ve=>{typeof M=="function"&&M(Ve),(Ve.key==="Space"||Ve.key==="Enter")&&!l&&(Ve.preventDefault(),Et())};return j.createElement(Ts.Wrapper,lT(lT({required:u,id:gt,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:S,sx:Y,errorProps:he,descriptionProps:me,labelProps:fe,inputContainer:Be,inputWrapperOrder:Me,unstyled:ge,withAsterisk:Oe},Je),a),j.createElement(cr,{__staticSelector:S,withinPortal:z,offset:10,opened:b,transitionDuration:y,transition:g,positionDependencies:N,middlewares:{flip:I==="flip",shift:!1},position:I==="flip"?"bottom-start":I,shadow:m,onClose:lt,trapFocus:!l,withRoles:!1,clickOutsideEvents:Z,zIndex:F,classNames:r,styles:o,unstyled:ge},j.createElement(cr.Target,null,j.createElement("div",{className:Ye.wrapper},j.createElement(Ts,lT({classNames:qve(lT({},r),{input:Ut(Ye.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?Et():ve(),onKeyDown:cn,id:gt,ref:As(t,at),__staticSelector:S,size:_,name:H,placeholder:p,value:E,required:u,invalid:!!f,readOnly:!l,rightSection:Fe,rightSectionWidth:Ft.fn.size({size:_,sizes:gnn}),onBlur:Ue,onFocus:mt,onChange:G,autoComplete:"off",unstyled:ge},Ge)))),A==="popover"?j.createElement(cr.Dropdown,null,j.createElement("div",{"data-mantine-stop-propagation":b,onKeyDownCapture:Se,"aria-hidden":l||void 0},w)):j.createElement(Gp,qve(lT({},ct),{opened:b,onClose:lt,withCloseButton:!1,size:L*400,zIndex:ue,unstyled:ge}),w)))});Eee.displayName="@mantine/dates/DatePickerBase";var vnn=Object.defineProperty,OL=Object.getOwnPropertySymbols,Mje=Object.prototype.hasOwnProperty,Lje=Object.prototype.propertyIsEnumerable,Wve=(e,t,n)=>t in e?vnn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_nn=(e,t)=>{for(var n in t||(t={}))Mje.call(t,n)&&Wve(e,n,t[n]);if(OL)for(var n of OL(t))Lje.call(t,n)&&Wve(e,n,t[n]);return e},bnn=(e,t)=>{var n={};for(var r in e)Mje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OL)for(var r of OL(e))t.indexOf(r)<0&&Lje.call(e,r)&&(n[r]=e[r]);return n};const wnn={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},Enn=C.forwardRef((e,t)=>{const n=ut("DatePicker",wnn,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:E,excludeDate:S,initialMonth:b,initiallyOpened:T,name:A,size:I,dropdownType:k,dropdownPosition:$,clearable:P,disabled:N,clearButtonLabel:F,fixOnBlur:z,allowFreeInput:W,withinPortal:V,dateParser:G,firstDayOfWeek:M,onFocus:H,onBlur:Y,amountOfMonths:L,allowLevelChange:B,initialLevel:q,onDropdownClose:Z,onDropdownOpen:ue,hideOutsideDates:he,hideWeekdays:fe,renderDay:me,type:_e,openDropdownOnClear:ge,unstyled:Be,weekendDays:Me,yearLabelFormat:ct,nextDecadeLabel:Oe,nextYearLabel:Re,previousDecadeLabel:Ye,previousYearLabel:Ut}=n,Ft=bnn(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Je=ps(),Ge=l||Je.datesLocale,gt=_e==="date"?"YYYY-MM-DD":c||Je.dateFormat,[at,lt]=C.useState(T),Et=I==="lg"||I==="xl"?"md":"sm",ve=C.useRef(),[Se,Fe]=C.useState(s??null),[Ue,mt]=Fo({value:r,defaultValue:s,finalValue:null,onChange:i}),[cn,Ve]=C.useState(Ue||b||new Date),[wt,bt]=C.useState(!1),[bn,Lt]=C.useState(Ue instanceof Date?Hg(Mn(Ue).locale(Ge).format(gt)):""),Ir=()=>{lt(!1),Z==null||Z()},Fn=()=>{lt(!0),ue==null||ue()};C.useEffect(()=>{r===null&&!wt&&Lt(""),r instanceof Date&&!wt&&Lt(Hg(Mn(r).locale(Ge).format(gt)))},[r,wt]);const ar=Pt=>{mt(Pt),Lt(Hg(Mn(Pt).locale(Ge).format(gt))),m&&Ir(),window.setTimeout(()=>{var Xt;return(Xt=ve.current)==null?void 0:Xt.focus()},0)},oi=()=>{var Pt;mt(null),Fe(null),Lt(""),ge&&Fn(),(Pt=ve.current)==null||Pt.focus()},yo=Pt=>G?G(Pt):Mn(Pt,gt,Ge).toDate(),wr=()=>{let Pt=typeof Ue=="string"?yo(Ue):Ue;E&&Mn(Pt).isAfter(E)&&(Pt=E),w&&Mn(Pt).isBefore(w)&&(Pt=w),Mn(Pt).isValid()?(mt(Pt),Fe(Pt),Lt(Hg(Mn(Pt).locale(Ge).format(gt))),Ve(Pt)):z&&mt(Se)},nr=Pt=>{typeof Y=="function"&&Y(Pt),bt(!1),W&&wr()},Vo=Pt=>{Pt.key==="Enter"&&W&&(Ir(),wr())},Hr=Pt=>{typeof H=="function"&&H(Pt),bt(!0)},Zr=Pt=>{Fn();const Xt=yo(Pt.target.value);Mn(Xt).isValid()?(mt(Xt),Fe(Xt),Lt(Pt.target.value),Ve(Xt)):Lt(Pt.target.value)};return j.createElement(Eee,_nn({allowFreeInput:W,dropdownOpened:at,setDropdownOpened:lt,shadow:u,transitionDuration:f,ref:As(t,ve),size:I,styles:a,classNames:o,onChange:Zr,onBlur:nr,onFocus:Hr,onKeyDown:Vo,name:A,inputLabel:bn,__staticSelector:"DatePicker",dropdownType:k,dropdownPosition:$,clearable:_e==="date"?!1:P&&!!Ue&&!N,clearButtonLabel:F,onClear:oi,disabled:N,withinPortal:V,amountOfMonths:L,onDropdownClose:Z,onDropdownOpen:ue,type:_e,unstyled:Be},Ft),j.createElement($je,{classNames:o,styles:a,locale:Ge,nextMonthLabel:h,previousMonthLabel:p,month:W?cn:void 0,initialMonth:b||(Ue instanceof Date?Ue:new Date),onMonthChange:Ve,value:Ue instanceof Date?Ue:Mn(Ue).toDate(),onChange:ar,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:E,excludeDate:S,__staticSelector:"DatePicker",fullWidth:k==="modal",__stopPropagation:k!=="modal",size:k==="modal"?"lg":Et,firstDayOfWeek:M,preventFocus:W,amountOfMonths:L,allowLevelChange:B,initialLevel:q,hideOutsideDates:he,hideWeekdays:fe,renderDay:me,unstyled:Be,weekendDays:Me,yearLabelFormat:ct,nextDecadeLabel:Oe,nextYearLabel:Re,previousDecadeLabel:Ye,previousYearLabel:Ut}))});Enn.displayName="@mantine/dates/DatePicker";var xnn=Object.defineProperty,PL=Object.getOwnPropertySymbols,Fje=Object.prototype.hasOwnProperty,jje=Object.prototype.propertyIsEnumerable,Gve=(e,t,n)=>t in e?xnn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Snn=(e,t)=>{for(var n in t||(t={}))Fje.call(t,n)&&Gve(e,n,t[n]);if(PL)for(var n of PL(t))jje.call(t,n)&&Gve(e,n,t[n]);return e},Tnn=(e,t)=>{var n={};for(var r in e)Fje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PL)for(var r of PL(e))t.indexOf(r)<0&&jje.call(e,r)&&(n[r]=e[r]);return n};const Cnn={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},Bje=C.forwardRef((e,t)=>{const n=ut("RangeCalendar",Cnn,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=Tnn(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=C.useState(null),[p,m]=C.useState(null),g=E=>{if(p instanceof Date){if(Om(E,p)&&!u)return m(null),h(null),null;const S=[E,p];return S.sort((b,T)=>b.getTime()-T.getTime()),i(S),m(null),null}return r[0]&&Om(E,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([E,null]),m(E),null)},y=E=>{typeof o=="function"&&o(E),h(null)},v=(E,S)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),!S.selected&&Mn(E).subtract(1,"day").isBefore(b[1])&&Mn(E).add(1,"day").isAfter(b[0])}return!1},_=(E,S)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),S.selected&&Mn(E).isBefore(b[1])}return!1},w=(E,S)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),S.selected&&Mn(E).isAfter(b[0])}return!1};return j.createElement(wee,Snn({dayStyle:s,onMouseLeave:y,onDayMouseEnter:E=>h(E),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:w},f))});Bje.displayName="@mantine/dates/RangeCalendar";var Ann=Object.defineProperty,kL=Object.getOwnPropertySymbols,zje=Object.prototype.hasOwnProperty,Uje=Object.prototype.propertyIsEnumerable,Yve=(e,t,n)=>t in e?Ann(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Inn=(e,t)=>{for(var n in t||(t={}))zje.call(t,n)&&Yve(e,n,t[n]);if(kL)for(var n of kL(t))Uje.call(t,n)&&Yve(e,n,t[n]);return e},Onn=(e,t)=>{var n={};for(var r in e)zje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kL)for(var r of kL(e))t.indexOf(r)<0&&Uje.call(e,r)&&(n[r]=e[r]);return n};const Kve=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),Pnn=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,knn={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},Vje=C.forwardRef((e,t)=>{const n=ut("DateRangePicker",knn,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:E,excludeDate:S,initialMonth:b,initiallyOpened:T,size:A,dropdownType:I,labelSeparator:k,clearable:$,clearButtonLabel:P,firstDayOfWeek:N,allowLevelChange:F,allowSingleDateInRange:z,amountOfMonths:W,withinPortal:V,initialLevel:G,onDropdownClose:M,onDropdownOpen:H,hideOutsideDates:Y,hideWeekdays:L,renderDay:B,openDropdownOnClear:q,unstyled:Z,weekendDays:ue,yearLabelFormat:he,nextDecadeLabel:fe,nextYearLabel:me,previousDecadeLabel:_e,previousYearLabel:ge}=n,Be=Onn(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Me=ps(),ct=l||Me.datesLocale,Oe=c||Me.dateFormat,[Re,Ye]=C.useState(T),Ut=A==="lg"||A==="xl"?"md":"sm",Ft=C.useRef(),[Je,Ge]=Fo({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),gt=Ue=>{Ge(Ue),m&&Kve(Ue)&&(Ye(!1),M==null||M(),window.setTimeout(()=>{var mt;return(mt=Ft.current)==null?void 0:mt.focus()},0))},at=Kve(Je),lt=Pnn(Je),Et=Je[0]?Hg(Mn(Je[0]).locale(ct).format(Oe)):"",ve=Je[1]?Hg(Mn(Je[1]).locale(ct).format(Oe)):"",Se=()=>{var Ue;Ge([null,null]),Ye(!0),q&&(H==null||H()),(Ue=Ft.current)==null||Ue.focus()},Fe=Ue=>{!Ue&&lt&&Je[1]===null&&Se(),Ye(Ue)};return j.createElement(Eee,Inn({dropdownOpened:Re,setDropdownOpened:Fe,shadow:u,transitionDuration:f,ref:As(t,Ft),size:A,styles:a,classNames:o,inputLabel:lt?`${Et} ${k} ${ve}`:"",__staticSelector:"DateRangePicker",dropdownType:I,clearable:$&&lt,clearButtonLabel:P,onClear:Se,withinPortal:V,amountOfMonths:W,onDropdownClose:M,onDropdownOpen:H,unstyled:Z},Be),j.createElement(Bje,{classNames:o,styles:a,locale:ct,nextMonthLabel:h,previousMonthLabel:p,initialMonth:at?Je[0]:b,value:Je,onChange:gt,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:E,excludeDate:S,__staticSelector:"DateRangePicker",fullWidth:I==="modal",firstDayOfWeek:N,size:I==="modal"?"lg":Ut,allowLevelChange:F,allowSingleDateInRange:z,amountOfMonths:W,initialLevel:G,hideOutsideDates:Y,hideWeekdays:L,renderDay:B,unstyled:Z,weekendDays:ue,yearLabelFormat:he,nextDecadeLabel:fe,nextYearLabel:me,previousDecadeLabel:_e,previousYearLabel:ge}))});Vje.displayName="@mantine/dates/DateRangePicker";function x0(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var Rnn=Object.defineProperty,$nn=Object.defineProperties,Nnn=Object.getOwnPropertyDescriptors,Xve=Object.getOwnPropertySymbols,Dnn=Object.prototype.hasOwnProperty,Mnn=Object.prototype.propertyIsEnumerable,Qve=(e,t,n)=>t in e?Rnn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lnn=(e,t)=>{for(var n in t||(t={}))Dnn.call(t,n)&&Qve(e,n,t[n]);if(Xve)for(var n of Xve(t))Mnn.call(t,n)&&Qve(e,n,t[n]);return e},Fnn=(e,t)=>$nn(e,Nnn(t));const jnn={xs:20,sm:23,md:25,lg:27,xl:29};var Hje=pt((e,{size:t,hasValue:n})=>({timeInput:Fnn(Lnn({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:jnn}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),Bnn=Object.defineProperty,RL=Object.getOwnPropertySymbols,qje=Object.prototype.hasOwnProperty,Wje=Object.prototype.propertyIsEnumerable,Jve=(e,t,n)=>t in e?Bnn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,znn=(e,t)=>{for(var n in t||(t={}))qje.call(t,n)&&Jve(e,n,t[n]);if(RL)for(var n of RL(t))Wje.call(t,n)&&Jve(e,n,t[n]);return e},Unn=(e,t)=>{var n={};for(var r in e)qje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RL)for(var r of RL(e))t.indexOf(r)<0&&Wje.call(e,r)&&(n[r]=e[r]);return n};const x$=C.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=Unn(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=C.useState(0),{classes:y,cx:v,theme:_}=Hje({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),w=C.useRef(),E=I=>{typeof i=="function"&&i(I),w.current.select(),g(0)},S=I=>{typeof s=="function"&&s(I),m===1&&typeof o=="function"&&o(I.currentTarget.value,!1)},b=I=>{I.stopPropagation(),w.current.select()},T=I=>{if(I.key==="ArrowUp"){I.preventDefault();const k=x0(Tl(parseInt(I.currentTarget.value,10)+1,f,c).toString());d!==k&&o(k,!1)}if(I.key==="ArrowDown"){I.preventDefault();const k=x0(Tl(parseInt(I.currentTarget.value,10)-1,f,c).toString());d!==k&&o(k,!1)}},A=I=>{g(m+1);const k=parseInt(I.currentTarget.value,10).toString();if(k==="0"&&m===0){a("00");return}o(k,!0,m>0)};return j.createElement(j.Fragment,null,j.createElement("input",znn({type:"text",inputMode:"numeric",ref:As(w,t),onChange:A,onClick:b,onFocus:E,onBlur:S,onKeyDown:T,value:d,className:v(y.timeInput,r)},p)),u&&j.createElement(it,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});x$.displayName="@mantine/dates/TimeField";function E7(e){return Math.floor(e/10)}function x7({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>E7(r)||a){const f=c%10;let d,h;c>r&&i&&f<=E7(i)?(d=x0(E7(c).toString()),h=x0(f.toString())):d=x0(Tl(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var Vnn=pt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:aa})-2}})),Hnn=Object.defineProperty,$L=Object.getOwnPropertySymbols,Gje=Object.prototype.hasOwnProperty,Yje=Object.prototype.propertyIsEnumerable,Zve=(e,t,n)=>t in e?Hnn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qnn=(e,t)=>{for(var n in t||(t={}))Gje.call(t,n)&&Zve(e,n,t[n]);if($L)for(var n of $L(t))Yje.call(t,n)&&Zve(e,n,t[n]);return e},Wnn=(e,t)=>{var n={};for(var r in e)Gje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$L)for(var r of $L(e))t.indexOf(r)<0&&Yje.call(e,r)&&(n[r]=e[r]);return n};const Kje=C.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=Wnn(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=Hje({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=C.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const w=_.target.value.slice(-1).toLowerCase();if(w==="p"){_.preventDefault(),i(c,!0);return}if(w==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return j.createElement("input",qnn({type:"text",ref:As(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});Kje.displayName="@mantine/dates/AmPmInput";function Gnn({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function Ynn(e,t,n,r,i,s){const o=Mn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function e1e(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:x0(i.toString()),minutes:x0(e.getMinutes().toString()),seconds:x0(e.getSeconds().toString()),amPm:s?r:n}}var Knn=Object.defineProperty,Xnn=Object.defineProperties,Qnn=Object.getOwnPropertyDescriptors,NL=Object.getOwnPropertySymbols,Xje=Object.prototype.hasOwnProperty,Qje=Object.prototype.propertyIsEnumerable,t1e=(e,t,n)=>t in e?Knn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mg=(e,t)=>{for(var n in t||(t={}))Xje.call(t,n)&&t1e(e,n,t[n]);if(NL)for(var n of NL(t))Qje.call(t,n)&&t1e(e,n,t[n]);return e},S7=(e,t)=>Xnn(e,Qnn(t)),Jnn=(e,t)=>{var n={};for(var r in e)Xje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&NL)for(var r of NL(e))t.indexOf(r)<0&&Qje.call(e,r)&&(n[r]=e[r]);return n};const Znn={xs:24,sm:30,md:34,lg:40,xl:44},ern={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},Dq=C.forwardRef((e,t)=>{const n=ut("TimeInput",ern,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,amLabel:E,pmLabel:S,name:b,hoursLabel:T,minutesLabel:A,secondsLabel:I,amPmLabel:k,timePlaceholder:$,amPmPlaceholder:P,disabled:N,sx:F,nextRef:z,labelProps:W,descriptionProps:V,errorProps:G,unstyled:M,withAsterisk:H}=n,Y=Jnn(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:L,cx:B,theme:q}=Vnn({size:l},{classNames:f,styles:d,unstyled:M,name:"TimeInput"}),{systemStyles:Z,rest:ue}=Wf(Y),he=Ia(h),fe=C.useRef(),me=C.useRef(),_e=C.useRef(),ge=C.useRef(),[Be,Me]=C.useState(e1e(p||m,w,E,S)),[ct,Oe]=C.useState(p||m);cs(()=>{Me(e1e(ct,w,E,S))},[ct,w,E,S]),cs(()=>{(p==null?void 0:p.getTime())!==(ct==null?void 0:ct.getTime())&&Oe(p)},[p]);const Re=at=>{const lt=mg(mg({},Be),at),Et=Ynn(lt.hours,lt.minutes,lt.seconds,w,S,lt.amPm);Oe(Et),typeof g=="function"&&g(Et)},Ye=x7({onChange:(at,lt)=>{Re({hours:at,minutes:lt??Be.minutes})},min:w==="12"?1:0,max:w==="12"?12:23,nextRef:me,nextMax:59}),Ut=x7({onChange:(at,lt)=>{Re({minutes:at,seconds:lt??Be.seconds})},min:0,max:59,nextRef:y?_e:w==="12"?ge:z,nextMax:y?59:void 0}),Ft=x7({onChange:at=>{Re({seconds:at})},min:0,max:59,nextRef:w==="12"?ge:z}),Je=Gnn({amLabel:E,pmLabel:S,onChange:at=>{Re({amPm:at})},nextRef:z}),Ge=()=>{Me({hours:"",minutes:"",seconds:"",amPm:""}),Oe(null),g==null||g(null),fe.current.focus()},gt=v&&ct&&!N?j.createElement(Bh,{variant:"transparent","aria-label":_,onClick:Ge,size:l,unstyled:M}):null;return j.createElement(Ts.Wrapper,mg(mg({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:he,sx:F,errorProps:G,descriptionProps:V,labelProps:W,unstyled:M,withAsterisk:H},Z),c),j.createElement(Ts,mg({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>fe.current.focus(),size:l,className:B({[L.disabled]:N}),classNames:f,styles:d,disabled:N,rightSection:gt,rightSectionWidth:q.fn.size({size:l,sizes:Znn}),unstyled:M},ue),j.createElement("div",{className:L.controls},j.createElement(x$,{ref:As(fe,t),value:Be.hours,onChange:Ye,setValue:at=>Me(lt=>S7(mg({},lt),{hours:at})),id:he,className:L.timeInput,withSeparator:!0,size:l,max:w==="12"?12:23,placeholder:$,"aria-label":T,disabled:N,name:b,unstyled:M}),j.createElement(x$,{ref:me,value:Be.minutes,onChange:Ut,setValue:at=>Me(lt=>S7(mg({},lt),{minutes:at})),className:L.timeInput,withSeparator:y,size:l,max:59,placeholder:$,"aria-label":A,disabled:N,unstyled:M}),y&&j.createElement(x$,{ref:_e,value:Be.seconds,onChange:Ft,setValue:at=>Me(lt=>S7(mg({},lt),{seconds:at})),className:L.timeInput,size:l,max:59,placeholder:$,"aria-label":I,disabled:N,unstyled:M}),w==="12"&&j.createElement(Kje,{ref:ge,value:Be.amPm,onChange:Je,placeholder:P,amLabel:E,pmLabel:S,size:l,"aria-label":k,disabled:N,unstyled:M}))))});Dq.displayName="@mantine/dates/TimeInput";var trn=pt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:aa})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),nrn=Object.defineProperty,DL=Object.getOwnPropertySymbols,Jje=Object.prototype.hasOwnProperty,Zje=Object.prototype.propertyIsEnumerable,n1e=(e,t,n)=>t in e?nrn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cT=(e,t)=>{for(var n in t||(t={}))Jje.call(t,n)&&n1e(e,n,t[n]);if(DL)for(var n of DL(t))Zje.call(t,n)&&n1e(e,n,t[n]);return e},rrn=(e,t)=>{var n={};for(var r in e)Jje.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DL)for(var r of DL(e))t.indexOf(r)<0&&Zje.call(e,r)&&(n[r]=e[r]);return n};const irn={xs:24,sm:30,md:34,lg:40,xl:44},srn={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},orn=C.forwardRef((e,t)=>{const n=ut("TimeRangeInput",srn,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,name:E,hoursLabel:S,minutesLabel:b,secondsLabel:T,amPmLabel:A,timePlaceholder:I,amPmPlaceholder:k,labelSeparator:$,disabled:P,sx:N,labelProps:F,descriptionProps:z,errorProps:W,unstyled:V,withAsterisk:G}=n,M=rrn(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:H,cx:Y,theme:L}=trn({size:l},{classNames:f,styles:d,unstyled:V,name:"TimeRangeInput"}),{systemStyles:B,rest:q}=Wf(M),Z=Ia(h),ue=C.useRef(),he=C.useRef(),[fe,me]=C.useState(p??m);cs(()=>{typeof g=="function"&&g(fe)},[fe]),cs(()=>{var Me,ct,Oe,Re;(((Me=p[0])==null?void 0:Me.getTime())!==((ct=fe[0])==null?void 0:ct.getTime())||((Oe=p[1])==null?void 0:Oe.getTime())!==((Re=fe[1])==null?void 0:Re.getTime()))&&me(p)},[p]);const _e=()=>{var Me;me([null,null]),(Me=ue.current)==null||Me.focus()},ge=v&&fe.filter(Me=>!!Me).length>0?j.createElement(Bh,{variant:"transparent","aria-label":_,onClick:_e,size:l,unstyled:V}):null,Be={amPmLabel:A,amPmPlaceholder:k,disabled:P,format:w,hoursLabel:S,minutesLabel:b,secondsLabel:T,size:l,timePlaceholder:I,withSeconds:y};return j.createElement(Ts.Wrapper,cT(cT({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:Z,sx:N,errorProps:W,descriptionProps:z,labelProps:F,unstyled:V,withAsterisk:G},B),c),j.createElement(Ts,cT({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var Me;(Me=ue.current)==null||Me.focus()},size:l,className:Y({[H.disabled]:P}),classNames:f,styles:d,disabled:P,rightSection:ge,rightSectionWidth:L.fn.size({size:l,sizes:irn}),unstyled:V},q),j.createElement("div",{className:H.inputWrapper},j.createElement(Dq,cT({ref:As(ue,t),variant:"unstyled",value:fe[0],onChange:Me=>me([Me,fe[1]]),name:E,nextRef:he,id:Z,unstyled:V},Be)),j.createElement("span",{className:H.separator,style:{color:L.colorScheme==="dark"?L.colors.dark[2]:L.colors.gray[7]}},$),j.createElement(Dq,cT({ref:he,variant:"unstyled",value:fe[1],onChange:Me=>me([fe[0],Me]),unstyled:V},Be)))))});orn.displayName="@mantine/dates/TimeRangeInput";const r1e={};function Mq(e,t){e===void 0&&(e=r1e),t===void 0&&(t=r1e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var arn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),urn=Object.prototype.hasOwnProperty;function Lq(e,t){return urn.call(e,t)}function Fq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Lq(e,i)&&r.push(i);return r}function wl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function jq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function _v(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function e9e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Bq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Bq(e[t]))return!0}else if(typeof e=="object"){for(var r=Fq(e),i=r.length,s=0;s<i;s++)if(Bq(e[r[s]]))return!0}}return!1}function i1e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var t9e=function(e){arn(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,i1e(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=i1e(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=t9e,lrn=wl,tw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=ML(n,this.path);r&&(r=wl(r));var i=d1(n,{op:"remove",path:this.from}).removed;return d1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=ML(n,this.from);return d1(n,{op:"add",path:this.path,value:wl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:jA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},crn={add:function(e,t,n){return jq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:tw.move,copy:tw.copy,test:tw.test,_get:tw._get};function ML(e,t){if(t=="")return e;var n={op:"_get",path:t};return d1(e,n),n.value}function d1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):LL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=ML(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=jA(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=wl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=LL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=e9e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!jq(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);jq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=crn[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=tw[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function SF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=wl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=d1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function frn(e,t,n){var r=d1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function LL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(tw[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Bq(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=n9e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function n9e(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)SF(wl(t),wl(e),n||!0);else{n=n||LL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function jA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!jA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!jA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const drn=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:jA,applyOperation:d1,applyPatch:SF,applyReducer:frn,deepClone:lrn,getValueByPointer:ML,validate:n9e,validator:LL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var xee=new WeakMap,hrn=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),prn=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function mrn(e){return xee.get(e)}function grn(e,t){return e.observers.get(t)}function yrn(e,t){e.observers.delete(t.callback)}function vrn(e,t){t.unobserve()}function _rn(e,t){var n=[],r,i=mrn(e);if(!i)i=new hrn(e),xee.set(e,i);else{var s=grn(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=wl(e),t){r.callback=t,r.next=null;var o=function(){zq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){zq(r),clearTimeout(r.next),yrn(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new prn(t,r)),r}function zq(e,t){t===void 0&&(t=!1);var n=xee.get(e.object);See(n.value,e.object,e.patches,"",t),e.patches.length&&SF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function See(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Fq(t),o=Fq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Lq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?See(c,f,n,r+"/"+_v(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+_v(l),value:wl(c)}),n.push({op:"replace",path:r+"/"+_v(l),value:wl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+_v(l),value:wl(c)}),n.push({op:"remove",path:r+"/"+_v(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Lq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+_v(l),value:wl(t[l])})}}}function brn(e,t,n){n===void 0&&(n=!1);var r=[];return See(e,t,r,"",n),r}const wrn=Object.freeze(Object.defineProperty({__proto__:null,compare:brn,generate:zq,observe:_rn,unobserve:vrn},Symbol.toStringTag,{value:"Module"}));Object.assign({},drn,wrn,{JsonPatchError:t9e,deepClone:wl,escapePathComponent:_v,unescapePathComponent:e9e});var Ern=/("(?:[^\\"]|\\.)*")|[:,]/g,xrn=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(Ern,function(S,b){return b||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const T7=Ju(xrn);function el(e,t,n){return e.fields=t||[],e.fname=n,e}function Zi(e){return e==null?null:e.fname}function va(e){return e==null?null:e.fields}function r9e(e){return e.length===1?Srn(e[0]):Trn(e)}const Srn=e=>function(t){return t[e]},Trn=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function $e(e){throw Error(e)}function Gh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||$e("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&$e("Access path missing closing bracket: "+e),r&&$e("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Cc(e,t,n){const r=Gh(e);return e=r.length===1?r[0]:e,el((n&&n.get||r9e)(r),[e],t||e)}const vO=Cc("id"),Ca=el(e=>e,[],"identity"),Bg=el(()=>0,[],"zero"),tS=el(()=>1,[],"one"),Ac=el(()=>!0,[],"true"),wg=el(()=>!1,[],"false");function Crn(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const i9e=0,Tee=1,Cee=2,s9e=3,o9e=4;function Aee(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Crn,r=e||i9e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Tee&&n(t||"error","ERROR",arguments),this},warn(){return r>=Cee&&n(t||"warn","WARN",arguments),this},info(){return r>=s9e&&n(t||"log","INFO",arguments),this},debug(){return r>=o9e&&n(t||"log","DEBUG",arguments),this}}}var De=Array.isArray;function _t(e){return e===Object(e)}const s1e=e=>e!=="__proto__";function nS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Arn(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;rS(r,s,i[s],o)}return r},{})}function rS(e,t,n,r){if(!s1e(t))return;let i,s;if(_t(n)&&!De(n)){s=_t(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?rS(s,i,n[i]):s1e(i)&&(s[i]=n[i])}else e[t]=n}function Arn(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function tr(e){return e[e.length-1]}function ma(e){return e==null||e===""?null:+e}const a9e=e=>t=>e*Math.exp(t),u9e=e=>t=>Math.log(e*t),l9e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),c9e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,FL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function TF(e,t,n,r){const i=n(e[0]),s=n(tr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function f9e(e,t){return TF(e,t,ma,Ca)}function d9e(e,t){var n=Math.sign(e[0]);return TF(e,t,u9e(n),a9e(n))}function h9e(e,t,n){return TF(e,t,FL(n),FL(1/n))}function p9e(e,t,n){return TF(e,t,l9e(n),c9e(n))}function CF(e,t,n,r,i){const s=r(e[0]),o=r(tr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Iee(e,t,n){return CF(e,t,n,ma,Ca)}function Oee(e,t,n){const r=Math.sign(e[0]);return CF(e,t,n,u9e(r),a9e(r))}function jL(e,t,n,r){return CF(e,t,n,FL(r),FL(1/r))}function Pee(e,t,n,r){return CF(e,t,n,l9e(r),c9e(r))}function m9e(e){return 1+~~(new Date(e).getMonth()/3)}function g9e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function yt(e){return e!=null?De(e)?e:[e]:[]}function y9e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function An(e){return typeof e=="function"}const Irn="descending";function kee(e,t,n){n=n||{},t=yt(t)||[];const r=[],i=[],s={},o=n.comparator||Orn;return yt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Irn?-1:1),i.push(a=An(a)?a:Cc(a,null,n)),(va(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:el(o(i,r),Object.keys(s))}const AF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Orn=(e,t)=>e.length===1?Prn(e[0],t[0]):krn(e,t,e.length),Prn=(e,t)=>function(n,r){return AF(e(n),e(r))*t},krn=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=AF(s(r),s(i));return o*t[a]});function Aa(e){return An(e)?e:()=>e}function Ree(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Cn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function $h(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function v9e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Rrn=Object.prototype.hasOwnProperty;function Wt(e,t){return Rrn.call(e,t)}const Wk={};function iS(e){let t={},n;function r(s){return Wt(t,s)&&t[s]!==Wk}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Wk&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Wk),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==Wk&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function _9e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=tr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function ot(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Cn(r,n)}function nw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Py(e){return typeof e=="boolean"}function S0(e){return Object.prototype.toString.call(e)==="[object Date]"}function b9e(e){return e&&An(e[Symbol.iterator])}function dr(e){return typeof e=="number"}function w9e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function vt(e){return typeof e=="string"}function $ee(e,t,n){e&&(e=t?yt(e).map(a=>a.replace(/\\(.)/g,"$1")):yt(e));const r=e&&e.length,i=n&&n.get||r9e,s=a=>i(t?[a]:Gh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return el(o,e,"key")}function E9e(e,t){const n=e[0],r=tr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const $rn=1e4;function x9e(e){e=+e||$rn;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Wt(t,o)||Wt(n,o),get:o=>Wt(t,o)?t[o]:Wt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Wt(t,o)?t[o]=a:s(o,a)}}function S9e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function s2(e,t){let n="";for(;--t>=0;)n+=e;return n}function T9e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?s2(i,o)+s:r==="center"?s2(i,~~(o/2))+s+s2(i,Math.ceil(o/2)):s+s2(i,o)}function _O(e){return e&&tr(e)-e[0]||0}function nt(e){return De(e)?"["+e.map(nt)+"]":_t(e)||vt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Nee(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Nrn=e=>dr(e)||S0(e)?e:Date.parse(e);function Dee(e,t){return t=t||Nrn,e==null||e===""?null:t(e)}function Mee(e){return e==null||e===""?null:e+""}function zf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function C9e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Og(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Drn(e){return e}function Mrn(e){if(e==null)return Drn;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Lrn(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Frn(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return o1e(e,n)})}:o1e(e,t)}function o1e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=A9e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function A9e(e,t){var n=Mrn(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Lrn(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function jrn(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Brn(e){return A9e(e,zrn.apply(this,arguments))}function zrn(e,t,n){var r,i,s;if(arguments.length>1)r=Urn(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:jrn(e,r)}}function Urn(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Do="year",Gu="quarter",_a="month",js="week",Yu="date",pa="day",Nh="dayofyear",Ml="hours",Ll="minutes",Ic="seconds",Uf="milliseconds",Lee=[Do,Gu,_a,js,Yu,pa,Nh,Ml,Ll,Ic,Uf],C7=Lee.reduce((e,t,n)=>(e[t]=1+n,e),{});function Fee(e){const t=yt(e).slice(),n={};return t.length||$e("Missing time unit."),t.forEach(i=>{Wt(C7,i)?n[i]=1:$e(`Invalid time unit: ${i}.`)}),(n[js]||n[pa]?1:0)+(n[Gu]||n[_a]||n[Yu]?1:0)+(n[Nh]?1:0)>1&&$e(`Incompatible time units: ${e}`),t.sort((i,s)=>C7[i]-C7[s]),t}const Vrn={[Do]:"%Y ",[Gu]:"Q%q ",[_a]:"%b ",[Yu]:"%d ",[js]:"W%U ",[pa]:"%a ",[Nh]:"%j ",[Ml]:"%H:00",[Ll]:"00:%M",[Ic]:":%S",[Uf]:".%L",[`${Do}-${_a}`]:"%Y-%m ",[`${Do}-${_a}-${Yu}`]:"%Y-%m-%d ",[`${Ml}-${Ll}`]:"%H:%M"};function I9e(e,t){const n=Cn({},Vrn,t),r=Fee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Pv=new Date;function jee(e){return Pv.setFullYear(e),Pv.setMonth(0),Pv.setDate(1),Pv.setHours(0,0,0,0),Pv}function O9e(e){return k9e(new Date(e))}function P9e(e){return Uq(new Date(e))}function k9e(e){return Jp.count(jee(e.getFullYear())-1,e)}function Uq(e){return kx.count(jee(e.getFullYear())-1,e)}function Vq(e){return jee(e).getDay()}function Hrn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function R9e(e){return N9e(new Date(e))}function $9e(e){return Hq(new Date(e))}function N9e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return g0.count(t-1,e)}function Hq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Rx.count(t-1,e)}function qq(e){return Pv.setTime(Date.UTC(e,0,1)),Pv.getUTCDay()}function qrn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function D9e(e,t,n,r,i){const s=t||1,o=tr(e),a=(y,v,_)=>(_=_||y,Wrn(n[_],r[_],y===o&&s,v)),u=new Date,l=zf(e),c=l[Do]?a(Do):Aa(2012),f=l[_a]?a(_a):l[Gu]?a(Gu):Bg,d=l[js]&&l[pa]?a(pa,1,js+pa):l[js]?a(js,1):l[pa]?a(pa,1):l[Yu]?a(Yu,1):l[Nh]?a(Nh,1):tS,h=l[Ml]?a(Ml):Bg,p=l[Ll]?a(Ll):Bg,m=l[Ic]?a(Ic):Bg,g=l[Uf]?a(Uf):Bg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function Wrn(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function jE(e,t,n){return t+e*7-(n+6)%7}const Grn={[Do]:e=>e.getFullYear(),[Gu]:e=>Math.floor(e.getMonth()/3),[_a]:e=>e.getMonth(),[Yu]:e=>e.getDate(),[Ml]:e=>e.getHours(),[Ll]:e=>e.getMinutes(),[Ic]:e=>e.getSeconds(),[Uf]:e=>e.getMilliseconds(),[Nh]:e=>k9e(e),[js]:e=>Uq(e),[js+pa]:(e,t)=>jE(Uq(e),e.getDay(),Vq(t)),[pa]:(e,t)=>jE(1,e.getDay(),Vq(t))},Yrn={[Gu]:e=>3*e,[js]:(e,t)=>jE(e,0,Vq(t))};function M9e(e,t){return D9e(e,t||1,Grn,Yrn,Hrn)}const Krn={[Do]:e=>e.getUTCFullYear(),[Gu]:e=>Math.floor(e.getUTCMonth()/3),[_a]:e=>e.getUTCMonth(),[Yu]:e=>e.getUTCDate(),[Ml]:e=>e.getUTCHours(),[Ll]:e=>e.getUTCMinutes(),[Ic]:e=>e.getUTCSeconds(),[Uf]:e=>e.getUTCMilliseconds(),[Nh]:e=>N9e(e),[js]:e=>Hq(e),[pa]:(e,t)=>jE(1,e.getUTCDay(),qq(t)),[js+pa]:(e,t)=>jE(Hq(e),e.getUTCDay(),qq(t))},Xrn={[Gu]:e=>3*e,[js]:(e,t)=>jE(e,0,qq(t))};function L9e(e,t){return D9e(e,t||1,Krn,Xrn,qrn)}const Qrn={[Do]:bh,[Gu]:aA.every(3),[_a]:aA,[js]:kx,[Yu]:Jp,[pa]:Jp,[Nh]:Jp,[Ml]:p5,[Ll]:d5,[Ic]:jp,[Uf]:pE},Jrn={[Do]:wh,[Gu]:uA.every(3),[_a]:uA,[js]:Rx,[Yu]:g0,[pa]:g0,[Nh]:g0,[Ml]:m5,[Ll]:h5,[Ic]:jp,[Uf]:pE};function sS(e){return Qrn[e]}function oS(e){return Jrn[e]}function F9e(e,t,n){return e?e.offset(t,n):void 0}function j9e(e,t,n){return F9e(sS(e),t,n)}function B9e(e,t,n){return F9e(oS(e),t,n)}function z9e(e,t,n,r){return e?e.range(t,n,r):void 0}function U9e(e,t,n,r){return z9e(sS(e),t,n,r)}function V9e(e,t,n,r){return z9e(oS(e),t,n,r)}const o2=1e3,a2=o2*60,u2=a2*60,IF=u2*24,Zrn=IF*7,a1e=IF*30,Wq=IF*365,H9e=[Do,_a,Yu,Ml,Ll,Ic,Uf],l2=H9e.slice(0,-1),c2=l2.slice(0,-1),f2=c2.slice(0,-1),ein=f2.slice(0,-1),tin=[Do,js],u1e=[Do,_a],q9e=[Do],fT=[[l2,1,o2],[l2,5,5*o2],[l2,15,15*o2],[l2,30,30*o2],[c2,1,a2],[c2,5,5*a2],[c2,15,15*a2],[c2,30,30*a2],[f2,1,u2],[f2,3,3*u2],[f2,6,6*u2],[f2,12,12*u2],[ein,1,IF],[tin,1,Zrn],[u1e,1,a1e],[u1e,3,3*a1e],[q9e,1,Wq]];function W9e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(_O(t))/n;let i=Cx(a=>a[2]).right(fT,r),s,o;return i===fT.length?(s=q9e,o=F0(t[0]/Wq,t[1]/Wq,n)):i?(i=fT[r/fT[i-1][2]<fT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=H9e,o=Math.max(F0(t[0],t[1],n),1)),{units:s,step:o}}function d2(e){const t={};return n=>t[n]||(t[n]=e(n))}function nin(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=rin(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function rin(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function G9e(e){const t=d2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=P1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return nin(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=P1(o??",f");const a=F0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=lNe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=cNe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=uNe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let Gq;Y9e();function Y9e(){return Gq=G9e({format:Ix,formatPrefix:_X})}function K9e(e){return G9e(aNe(e))}function BL(e){return arguments.length?Gq=K9e(e):Gq}function l1e(e,t,n){n=n||{},_t(n)||$e(`Invalid time multi-format specifier: ${n}`);const r=t(Ic),i=t(Ll),s=t(Ml),o=t(Yu),a=t(js),u=t(_a),l=t(Gu),c=t(Do),f=e(n[Uf]||".%L"),d=e(n[Ic]||":%S"),h=e(n[Ll]||"%I:%M"),p=e(n[Ml]||"%I %p"),m=e(n[Yu]||n[pa]||"%a %d"),g=e(n[js]||"%b %d"),y=e(n[_a]||"%B"),v=e(n[Gu]||"%B"),_=e(n[Do]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function X9e(e){const t=d2(e.format),n=d2(e.utcFormat);return{timeFormat:r=>vt(r)?t(r):l1e(t,sS,r),utcFormat:r=>vt(r)?n(r):l1e(n,oS,r),timeParse:d2(e.parse),utcParse:d2(e.utcParse)}}let Yq;Q9e();function Q9e(){return Yq=X9e({format:$X,parse:EDe,utcFormat:g5,utcParse:xDe})}function J9e(e){return X9e(yDe(e))}function BA(e){return arguments.length?Yq=J9e(e):Yq}const Kq=(e,t)=>Cn({},e,t);function Z9e(e,t){const n=e?K9e(e):BL(),r=t?J9e(t):BA();return Kq(n,r)}function Bee(e,t){const n=arguments.length;return n&&n!==2&&$e("defaultLocale expects either zero or two arguments."),n?Kq(BL(e),BA(t)):Kq(BL(),BA())}function iin(){return Y9e(),Q9e(),Bee()}const sin=/^(data:|([A-Za-z]+:)?\/\/)/,oin=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ain=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,c1e="file://";function uin(e,t){return n=>({options:n||{},sanitize:cin,load:lin,fileAccess:!!t,file:fin(t),http:hin(e)})}async function lin(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function cin(e,t){t=Cn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=oin.test(e.replace(ain,""));(e==null||typeof e!="string"||!a)&&$e("Sanitize failure, invalid URI: "+nt(e));const u=sin.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(c1e))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(c1e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function fin(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):din}async function din(){$e("No file system access.")}function hin(e){return e?async function(t,n){const r=Cn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?An(s[i])?s[i]():s.text():$e(s.status+""+s.statusText)}:pin}async function pin(){$e("No HTTP fetch method available.")}const min=e=>e!=null&&e===e,gin=e=>e==="true"||e==="false"||e===!0||e===!1,yin=e=>!Number.isNaN(Date.parse(e)),eBe=e=>!Number.isNaN(+e)&&!(e instanceof Date),vin=e=>eBe(e)&&Number.isInteger(+e),Xq={boolean:Nee,integer:ma,number:ma,date:Dee,string:Mee,unknown:Ca},Gk=[gin,vin,eBe,yin],_in=["boolean","integer","number","date"];function tBe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Gk.length,i=Gk.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&min(u)&&!Gk[a](u)&&(i[a]=0,++o,o===Gk.length))return"string";return _in[i.reduce((s,o)=>s===0?o:s,0)-1]}function nBe(e,t){return t.reduce((n,r)=>(n[r]=tBe(e,r),n),{})}function f1e(e){const t=function(n,r){const i={delimiter:e};return zee(n,r?Cn(r,i):i)};return t.responseType="text",t}function zee(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),iNe(t.delimiter).parse(e+"")}zee.responseType="text";function bin(e){return typeof Buffer=="function"&&An(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Uee(e,t){const n=t&&t.property?Cc(t.property):Ca;return _t(e)&&!bin(e)?win(n(e),t):n(JSON.parse(e))}Uee.responseType="json";function win(e,t){return!De(e)&&b9e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Ein={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function rBe(e,t){let n,r,i,s;return e=Uee(e,t),t&&t.feature?(n=Frn,i=t.feature):t&&t.mesh?(n=Brn,i=t.mesh,s=Ein[t.filter]):$e("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):$e("Invalid TopoJSON object: "+i),r&&r.features||[r]}rBe.responseType="json";const S$={dsv:zee,csv:f1e(","),tsv:f1e("	"),json:Uee,topojson:rBe};function Vee(e,t){return arguments.length>1?(S$[e]=t,this):Wt(S$,e)?S$[e]:null}function iBe(e){const t=Vee(e);return t&&t.responseType||"text"}function sBe(e,t,n,r){t=t||{};const i=Vee(t.type||"json");return i||$e("Unknown data format type: "+t.type),e=i(e,t),t.parse&&xin(e,t.parse,n,r),Wt(e,"columns")&&delete e.columns,e}function xin(e,t,n,r){if(!e.length)return;const i=BA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=nBe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Xq[p])throw Error("Illegal format pattern: "+h+":"+p);return Xq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const OF=uin(typeof fetch<"u"&&fetch,null);function PF(e){const t=e||Ca,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function T$(e,t){try{await t(e)}catch(n){e.error(n)}}const oBe=Symbol("vega_id");let Sin=1;function kF(e){return!!(e&&Ht(e))}function Ht(e){return e[oBe]}function aBe(e,t){return e[oBe]=t,e}function Ar(e){const t=e===Object(e)?e:{data:e};return Ht(t)?t:aBe(t,Sin++)}function Hee(e){return RF(e,Ar({}))}function RF(e,t){for(const n in e)t[n]=e[n];return t}function uBe(e,t){return aBe(t,Ht(e))}function I_(e,t){return e?t?(n,r)=>e(n,r)||Ht(t(n))-Ht(t(r)):(n,r)=>e(n,r)||Ht(n)-Ht(r):null}function lBe(e){return e&&e.constructor===O_}function O_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:O_,insert(a){const u=yt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=An(a)?r:t,l=yt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Aa(l)};return An(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return An(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ht(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ht(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Ht(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ht(m),l[g]?l[g]=1:a.add.push(Ar(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ht(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[Ht(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ht(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Ht(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Ht(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const C$="_:mod:_";function $F(){Object.defineProperty(this,C$,{writable:!0,value:{}})}$F.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[C$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=De(n)?1+n.length:-1),i},modified(e,t){const n=this[C$];if(arguments.length){if(De(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[C$]={},this}};let Tin=0;const Cin="pulse",Ain=new $F,Iin=1,Oin=2;function si(e,t,n,r){this.id=++Tin,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function d1e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}si.prototype={targets(){return this._targets||(this._targets=PF(vO))},set(e){return this.value!==e?(this.value=e,1):0},skip:d1e(Iin),modified:d1e(Oin),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new $F,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof si?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===Cin)yt(a).forEach(f=>{f instanceof si?f!==this&&(f.targets().add(this),s.push(f)):$e("Pulse parameters must be operator instances.")}),this.source=a;else if(De(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Ain,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function Pin(e,t,n,r){let i=1,s;return e instanceof si?s=e:e&&e.prototype instanceof si?s=new e:An(e)?s=new si(null,e):(i=0,s=new si(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function kin(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Rin=0;function NF(e,t,n){this.id=++Rin,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Eg(e,t,n){return new NF(e,t,n)}NF.prototype={_filter:Ac,_apply:Ca,targets(){return this._targets||(this._targets=PF(vO))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Eg(e);return this.targets().add(t),t},apply(e){const t=Eg(null,e);return this.targets().add(t),t},merge(){const e=Eg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Eg();return this.targets().add(Eg(null,null,Ree(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Eg(null,null,()=>n=!0)),t.targets().add(Eg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ac,this._targets=null}};function $in(e,t,n,r){const i=this,s=Eg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=yt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function Nin(e,t){const n=this.locale();return sBe(e,t,n.timeParse,n.utcParse)}function Din(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Min(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:iBe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Lin(e,t,n){const r=this,i=r._pending||Fin(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ac).insert(s.data||[])),i.done(),s}function Fin(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const jin={skip:!0};function Bin(e,t,n,r,i){return(e instanceof si?Uin:zin)(this,e,t,n,r,i),this}function zin(e,t,n,r,i,s){const o=Cn({},s,jin);let a,u;An(n)||(n=Aa(n)),r===void 0?a=l=>e.touch(n(l)):An(r)?(u=new si(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;lBe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function Uin(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new si(null,Vin(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Vin(e,t){return t=An(t)?t:Aa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Hin(e){e.rank=++this._rank}function qin(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&$e("Cycle detected in dataflow graph.")}const zL={},Sd=1,Pg=2,_p=4,Win=Sd|Pg,h1e=Sd|_p,lb=Sd|Pg|_p,p1e=8,dT=16,m1e=32,g1e=64;function T0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function A7(e,t){const n=[];return Og(e,t,r=>n.push(r)),n}function y1e(e,t){const n={};return e.visit(t,r=>{n[Ht(r)]=1}),r=>n[Ht(r)]?null:r}function Yk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}T0.prototype={StopPropagation:zL,ADD:Sd,REM:Pg,MOD:_p,ADD_REM:Win,ADD_MOD:h1e,ALL:lb,REFLOW:p1e,SOURCE:dT,NO_SOURCE:m1e,NO_FIELDS:g1e,fork(e){return new T0(this.dataflow).init(this,e)},clone(){const e=this.fork(lb);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(lb|dT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new T0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&g1e)&&(n.fields=e.fields),t&Sd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Pg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&_p?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&m1e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||lb;return t&Sd&&this.add.length||t&Pg&&this.rem.length||t&_p&&this.mod.length},reflow(e){if(e)return this.fork(lb).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(_p,y1e(this,Sd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return De(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?De(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Sd&&(n.addF=Yk(n.addF,t)),e&Pg&&(n.remF=Yk(n.remF,t)),e&_p&&(n.modF=Yk(n.modF,t)),e&dT&&(n.srcF=Yk(n.srcF,t)),n},materialize(e){e=e||lb;const t=this;return e&Sd&&t.addF&&(t.add=A7(t.add,t.addF),t.addF=null),e&Pg&&t.remF&&(t.rem=A7(t.rem,t.remF),t.remF=null),e&_p&&t.modF&&(t.mod=A7(t.mod,t.modF),t.modF=null),e&dT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&dT)return Og(n.source,n.srcF,r),n;e&Sd&&Og(n.add,n.addF,r),e&Pg&&Og(n.rem,n.remF,r),e&_p&&Og(n.mod,n.modF,r);const i=n.source;if(e&p1e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Og(i,y1e(n,h1e),r):Og(i,n.srcF,r))}return n}};function qee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ot(qee,T0,{fork(e){const t=new T0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?De(e)?e.some(r=>n[r]):n[e]:0},filter(){$e("MultiPulse does not support filtering.")},materialize(){$e("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Gin(e,t,n){const r=this,i=[];if(r._pulse)return cBe(r);if(r._pending&&await r._pending,t&&await T$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new T0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=PF(vO);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=zL),u!==zL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await T$(r,c[f].callback)}return n&&await T$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Yin(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Kin(e,t,n){return this._pulse?cBe(this):(this.evaluate(e,t,n),this)}function Xin(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function cBe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Qin(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Jin(e,t){const n=e.source,r=this._clock;return n&&De(n)?new qee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Zin(this._pulse,n&&n.pulse)}function Zin(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==zL&&(e.source=t.source),e)}const Wee={skip:!1,force:!1};function esn(e,t){const n=t||Wee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function tsn(e,t,n){const r=n||Wee;return(e.set(t)||r.force)&&this.touch(e,r),this}function nsn(e,t,n){this.touch(e,n||Wee);const r=new T0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function rsn(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),fBe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,isn(t,0,e)):r=n,r}}}function fBe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function isn(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,fBe(e,r,t,n)}function Fw(){this.logger(Aee()),this.logLevel(Tee),this._clock=0,this._rank=0,this._locale=Bee();try{this._loader=OF()}catch{}this._touched=PF(vO),this._input={},this._pulse=null,this._heap=rsn((e,t)=>e.qrank-t.qrank),this._postrun=[]}function hT(e){return function(){return this._log[e].apply(this,arguments)}}Fw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:hT("error"),warn:hT("warn"),info:hT("info"),debug:hT("debug"),logLevel:hT("level"),cleanThreshold:1e4,add:Pin,connect:kin,rank:Hin,rerank:qin,pulse:nsn,touch:esn,update:tsn,changeset:O_,ingest:Din,parse:Nin,preload:Lin,request:Min,events:$in,on:Bin,evaluate:Gin,run:Kin,runAsync:Yin,runAfter:Xin,_enqueue:Qin,_getPulse:Jin};function Ae(e,t){si.call(this,e,null,t)}ot(Ae,si,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const BE={};function dBe(e){const t=hBe(e);return t&&t.Definition||null}function hBe(e){return e=e&&e.toLowerCase(),Wt(BE,e)?BE[e]:null}function*pBe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Gee(e,t,n){const r=Float64Array.from(pBe(e,n));return r.sort(Xp),t.map(i=>u$e(r,i))}function Yee(e,t){return Gee(e,[.25,.5,.75],t)}function Kee(e,t){const n=e.length,r=iAt(e,t),i=Yee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function mBe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Oc=Math.random;function ssn(e){Oc=e}function gBe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(pBe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Oc()*s)];c[l]=a/s}return c.sort(Xp),[EV(c,n/2),EV(c,1-n/2)]}function yBe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?osn(s,t+t/4):s}function osn(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function asn(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function usn(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Oc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const vBe=Math.sqrt(2*Math.PI),lsn=Math.SQRT2;let pT=NaN;function DF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(pT===pT)n=pT,pT=NaN;else{do n=Oc()*2-1,r=Oc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,pT=r*s}return e+n*t}function Xee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*vBe)}function MF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function LF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*lsn*csn(2*e-1)}function csn(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Qee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>DF(n,r),pdf:s=>Xee(s,n,r),cdf:s=>MF(s,n,r),icdf:s=>LF(s,n,r)};return i.mean(e).stdev(t)}function Jee(e,t){const n=Qee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Kee(e)),i):t},sample(){return e[~~(Oc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Zee(e,t){return e=e||0,t=t??1,Math.exp(e+DF()*t)}function ete(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*vBe*e)}function tte(e,t,n){return MF(Math.log(e),t,n)}function nte(e,t,n){return Math.exp(LF(e,t,n))}function _Be(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Zee(n,r),pdf:s=>ete(s,n,r),cdf:s=>tte(s,n,r),icdf:s=>nte(s,n,r)};return i.mean(e).stdev(t)}function bBe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Oc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function rte(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Oc()}function ite(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function ste(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function ote(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function wBe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>rte(n,r),pdf:s=>ite(s,n,r),cdf:s=>ste(s,n,r),icdf:s=>ote(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function ate(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function bO(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function FF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function wO(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function aS(e,t,n,r,i){let s=0,o=0;return wO(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function ute(e,t,n){let r=0,i=0,s=0,o=0,a=0;wO(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=bO(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:aS(e,t,n,i,l)}}function EBe(e,t,n){let r=0,i=0,s=0,o=0,a=0;wO(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=bO(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:aS(e,t,n,i,l)}}function xBe(e,t,n){const[r,i,s,o]=FF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;wO(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=bO(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:aS(e,t,n,o,y)}}function SBe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;wO(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=bO(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:aS(e,t,n,a,c)}}function lte(e,t,n){const[r,i,s,o]=FF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-_*u,S=b=>(b=b-s,_*b*b+w*b+E+o);return{coef:[E-w*s+_*s*s+o,w-2*_*s,_],predict:S,rSquared:aS(e,t,n,o,S)}}function TBe(e,t,n,r){if(r===0)return ate(e,t,n);if(r===1)return ute(e,t,n);if(r===2)return lte(e,t,n);const[i,s,o,a]=FF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=dsn(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:fsn(f,y,-o,a),predict:v,rSquared:aS(e,t,n,a,v)}}function fsn(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function dsn(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const v1e=2,_1e=1e-12;function CBe(e,t,n,r){const[i,s,o,a]=FF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=v1e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let E=0,S=0,b=0,T=0,A=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=_;++P){const N=i[P],F=s[P],z=hsn(Math.abs(y-N)*I)*d[P],W=N*z;E+=z,S+=W,b+=F*z,T+=F*W,A+=N*W}const[k,$]=bO(S/E,b/E,T/E,A/E);c[g]=k+$*y,f[g]=Math.abs(s[g]-c[g]),psn(i,g+1,p)}if(h===v1e)break;const m=$3(f);if(Math.abs(m)<_1e)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?_1e:(v=1-y*y)*v}return msn(i,c,o,a)}function hsn(e){return(e=1-e*e*e)*e*e}function psn(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function msn(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const gsn=.5*Math.PI/180;function jF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=ysn(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&vsn(f,m,d,h,p)>gsn?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function ysn(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function vsn(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function _sn(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Qq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:_sn(e)}function ABe(e,t,n){return n||e+(t?"_"+t:"")}const I7=()=>{},bsn={init:I7,add:I7,rem:I7,idx:0},zA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},EO=Object.keys(zA).filter(e=>e!=="__count__");function wsn(e,t){return(n,r)=>Cn({name:e,aggregate_param:r,out:n||e},bsn,t)}[...EO,"__count__"].forEach(e=>{zA[e]=wsn(e,zA[e])});function IBe(e,t,n){return zA[e](n,t)}function OBe(e,t){return e.idx-t.idx}function Esn(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=zA[i]())})};return e.forEach(n),Object.values(t).sort(OBe)}function xsn(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Ssn(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Tsn(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Csn(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function PBe(e,t){const n=t||Ca,r=Esn(e),i=e.slice().sort(OBe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=xsn,s.prototype.add=Ssn,s.prototype.rem=Tsn,s.prototype.set=Csn,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function cte(e){this._key=e?Cc(e):Ht,this.reset()}const Uo=cte.prototype;Uo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Uo.add=function(e){this._add.push(e)};Uo.rem=function(e){this._rem.push(e)};Uo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Uo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Wt(n,s)||(n[s]=1,++i);return i};Uo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=v9e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Uo.argmin=function(e){return this.extent(e)[0]||{}};Uo.argmax=function(e){return this.extent(e)[1]||{}};Uo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Uo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Uo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Yee(this.values(),e),this._get=e),this._q};Uo.q1=function(e){return this.quartile(e)[0]};Uo.q2=function(e){return this.quartile(e)[1]};Uo.q3=function(e){return this.quartile(e)[2]};Uo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=gBe(this.values(),1e3,.05,e),this._get=e),this._ci};Uo.ci0=function(e){return this.ci(e)[0]};Uo.ci1=function(e){return this.ci(e)[1]};function ry(e){Ae.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ry.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:EO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ot(ry,Ae,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=yt(va(v)),w=_.length;let E=0,S;for(;E<w;++E)r[S=_[E]]||(r[S]=1,t.push(S))}this._dims=yt(e.groupby),this._dnames=this._dims.map(v=>{const _=Zi(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:Qq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&$e("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&$e("Null aggregate field specified."),m=Zi(f),g=ABe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(IBe(d,h,g))}return this._measures=this._measures.map(v=>PBe(v,v.field)),Object.create(null)},cellkey:Qq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new cte),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?uBe(t.tuple,s):Ar(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Asn=1e-14;function fte(e){Ae.call(this,null,e)}fte.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ot(fte,Ae,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(va(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=mBe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ma(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Asn+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=el(u,va(t),e.name||"bin_"+Zi(t))}});function kBe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?S9e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function dte(e){Ae.call(this,[],e)}dte.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ot(dte,Ae,{transform(e,t){const n=t.fork(t.ALL),r=kBe(Ht,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(I_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function RBe(e){si.call(this,null,Isn,e)}ot(RBe,si);function Isn(e){return this.value&&!e.modified()?this.value:kee(e.fields,e.orders)}function hte(e){Ae.call(this,null,e)}hte.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Osn(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ot(hte,Ae,{transform(e,t){const n=f=>d=>{for(var h=Osn(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Ar({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function pte(e){Ae.call(this,null,e)}pte.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ot(pte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Psn(a,i,s,e.filter||Ac)):n.mod=a,n.source=this.value,n.modifies(r)}});function Psn(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Ar(s)),s={},s[t]=l);return i}const b1e={kde:Jee,mixture:bBe,normal:Qee,lognormal:_Be,uniform:wBe},ksn="distributions",w1e="function",Rsn="field";function $Be(e,t){const n=e[w1e];Wt(b1e,n)||$e("Unknown distribution function: "+n);const r=b1e[n]();for(const i in e)i===Rsn?r.data((e.from||t()).map(e[i])):i===ksn?r[i](e[i].map(s=>$Be(s,t))):typeof r[i]===w1e&&r[i](e[i]);return r}function mte(e){Ae.call(this,null,e)}const NBe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],$sn={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:NBe},{name:"weights",type:"number",array:!0}]};mte.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:NBe.concat($sn)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ot(mte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=$Be(e.distribution,Nsn(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&$e("Invalid density method: "+o),!e.extent&&!r.data&&$e("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||$h(r.data()),l=jF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ar(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function Nsn(e){return()=>e.materialize(e.SOURCE).source}function DBe(e,t){return e?e.map((n,r)=>t[r]||Zi(n)):null}function gte(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const MBe="bin";function yte(e){Ae.call(this,null,e)}yte.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:MBe}]};const Dsn=(e,t)=>_O($h(e,t))/30;ot(yte,Ae,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=gte(t.source,e.groupby,Ca),i=e.smooth||!1,s=e.field,o=e.step||Dsn(n,s),a=I_((p,m)=>s(p)-s(m)),u=e.as||MBe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of yBe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function LBe(e){si.call(this,null,Msn,e),this.modified(!0)}ot(LBe,si);function Msn(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:el(n=>t(n,e),va(t),Zi(t))}function vte(e){Ae.call(this,[void 0,void 0],e)}vte.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ot(vte,Ae,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ma(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Zi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function _te(e,t){si.call(this,e),this.parent=t,this.count=0}ot(_te,si,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function BF(e){Ae.call(this,{},e),this._keys=iS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ot(BF,Ae,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Wt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new _te(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ht(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ht(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ht(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ht(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ht(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function FBe(e){si.call(this,null,Lsn,e)}ot(FBe,si);function Lsn(e){return this.value&&!e.modified()?this.value:De(e.name)?yt(e.name).map(t=>Cc(t)):Cc(e.name,e.as)}function bte(e){Ae.call(this,iS(),e)}bte.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ot(bte,Ae,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ht(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ht(f),1)});function c(f){const d=Ht(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function wte(e){Ae.call(this,[],e)}wte.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ot(wte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=DBe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Hee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Ete(e){Ae.call(this,[],e)}Ete.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ot(Ete,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Hee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function xte(e){Ae.call(this,null,e)}xte.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ot(xte,Ae,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function jBe(e){Ae.call(this,[],e)}ot(jBe,Ae,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Ar(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const Kk={value:"value",median:$3,mean:l$e,min:wV,max:vc},Fsn=[];function Ste(e){Ae.call(this,[],e)}Ste.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function jsn(e){var t=e.method||Kk.value,n;if(Kk[t]==null)$e("Unrecognized imputation method: "+t);else return t===Kk.value?(n=e.value!==void 0?e.value:0,()=>n):Kk[t]}function Bsn(e){const t=e.field;return n=>n?t(n):NaN}ot(Ste,Ae,{transform(e,t){var n=t.fork(t.ALL),r=jsn(e),i=Bsn(e),s=Zi(e.field),o=Zi(e.key),a=(e.groupby||[]).map(Zi),u=zsn(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,E;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Ar(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function zsn(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):Fsn)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Tte(e){ry.call(this,e)}Tte.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:EO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ot(Tte,ry,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Cn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Cte(e){Ae.call(this,null,e)}Cte.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ot(Cte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=gte(r,e.groupby,e.field),s=(e.groupby||[]).map(Zi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&$e("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=$h(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Jee(h,o)[a],m=e.counts?h.length:1,g=c||$h(h);jF(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Ar(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function BBe(e){si.call(this,null,Usn,e)}ot(BBe,si);function Usn(e){return this.value&&!e.modified()?this.value:$ee(e.fields,e.flat)}function zBe(e){Ae.call(this,[],e),this._pending=null}ot(zBe,Ae,{transform(e,t){const n=t.dataflow;return this._pending?O7(this,t,this._pending):Vsn(e)?t.StopPropagation:e.values?O7(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=yt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>O7(this,t,yt(r.data)))}});function Vsn(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function O7(e,t,n){n.forEach(Ar);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Ate(e){Ae.call(this,{},e)}Ate.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ot(Ate,Ae,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&$e('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&$e('The "as" parameter has too few output field names.'),c=c||i.map(Zi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||$e("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function UBe(e){si.call(this,null,Hsn,e)}ot(UBe,si);function Hsn(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function VBe(e){si.call(this,null,qsn,e)}ot(VBe,si);function qsn(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function HBe(e){Ae.call(this,null,e)}ot(HBe,Ae,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Ite(e){ry.call(this,e)}Ite.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:EO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ot(Ite,ry,{_transform:ry.prototype.transform,transform(e,t){return this._transform(Wsn(e,t),t)}});function Wsn(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=va(n).concat(va(r)),o=Ysn(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Gsn(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Gsn(e,t,n,r){return el(i=>t(i)===e?n(i):NaN,r,e+"")}function Ysn(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(AF),t?i.slice(0,t):i}function qBe(e){BF.call(this,e)}ot(qBe,BF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ht(s),n,t,s);return(e.modified("field")||r&&t.modified(va(r)))&&$e("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Ar(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Ote(e){Ae.call(this,null,e)}Ote.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ot(Ote,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=DBe(e.fields,e.as||[]),s=r?(a,u)=>Ksn(a,u,r,i):RF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ht(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Ar({}));o[Ht(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ht(a)]))}),n}});function Ksn(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function WBe(e){Ae.call(this,null,e)}ot(WBe,Ae,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Pte(e){Ae.call(this,null,e)}Pte.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Xsn=1e-14;ot(Pte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=gte(i,e.groupby,e.field),o=(e.groupby||[]).map(Zi),a=[],u=e.step||.01,l=e.probs||Ou(u/2,1-Xsn,u),c=l.length;return s.forEach(f=>{const d=Gee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Ar(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function GBe(e){Ae.call(this,null,e)}ot(GBe,Ae,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ht(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Hee(i);r[Ht(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ht(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function kte(e){Ae.call(this,[],e),this.count=0}kte.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ot(kte,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ht(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Oc()),d<o.length&&d>=u&&(f=o[d],s[Ht(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ht(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ht(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ht(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ht(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ht(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ht(c)])),this.count=a,this.value=n.source=o,n}});function Rte(e){Ae.call(this,null,e)}Rte.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ot(Rte,Ae,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ou(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Ar(s)}),n.add=t.add.concat(this.value),n}});function YBe(e){Ae.call(this,null,e),this.modified(!0)}ot(YBe,Ae,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function $te(e){Ae.call(this,null,e)}const KBe=["unit0","unit1"];$te.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Lee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:KBe}]};ot($te,Ae,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?oS:sS)(s.unit).offset,a=e.as||KBe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(va(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:W9e({extent:e.extent||$h(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Fee(r),o=this.value||{},a=(n?L9e:M9e)(s,i);return a.unit=tr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function XBe(e){Ae.call(this,iS(),e)}ot(XBe,Ae,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function QBe(e){Ae.call(this,null,e)}ot(QBe,Ae,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(I_(e.sort)):t.source).map(e.field))}});function Qsn(e,t,n,r){const i=UA[e](t,n);return{init:i.init||Bg,update:function(s,o){o[r]=i.next(s)}}}const UA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=UA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||$e("ntile num must be greater than zero.");const n=UA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||$e("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Jsn(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Jsn(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Zsn=Object.keys(UA);function JBe(e){const t=yt(e.ops),n=yt(e.fields),r=yt(e.params),i=yt(e.aggregate_params),s=yt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){yt(va(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Zi(g),w=ABe(p,_,s[m]);if(h(g),o.push(w),Wt(UA,p))a.push(Qsn(p,g,y,w));else{if(g==null&&p!=="count"&&$e("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[_];E||(E=l[_]=[],E.field=g,f.push(E)),E.push(IBe(p,v,w))}}),(c.length||f.length)&&(this.cell=eon(f,c,d)),this.inputs=Object.keys(u)}const ZBe=JBe.prototype;ZBe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};ZBe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function eon(e,t,n){e=e.map(u=>PBe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new cte;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Nte(e){Ae.call(this,{},e),this._mlen=0,this._mods=[]}Nte.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Zsn.concat(EO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ot(Nte,Ae,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=I_(e.sort),i=Qq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new JBe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)ton(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=kBe(Ht),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function ton(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Cx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Aa(-1)};t.init();for(let f=0;f<u;++f)non(c,o,f,u),s&&ron(c,l),t.update(c,a[f])}function non(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function ron(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const ion=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ry,bin:fte,collect:dte,compare:RBe,countpattern:hte,cross:pte,density:mte,dotbin:yte,expression:LBe,extent:vte,facet:BF,field:FBe,filter:bte,flatten:wte,fold:Ete,formula:xte,generate:jBe,impute:Ste,joinaggregate:Tte,kde:Cte,key:BBe,load:zBe,lookup:Ate,multiextent:UBe,multivalues:VBe,params:HBe,pivot:Ite,prefacet:qBe,project:Ote,proxy:WBe,quantile:Pte,relay:GBe,sample:kte,sequence:Rte,sieve:YBe,subflow:_te,timeunit:$te,tupleindex:XBe,values:QBe,window:Nte},Symbol.toStringTag,{value:"Module"}));function C0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const son=()=>typeof Image<"u"?Image:null;function Dte(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const oon="identity",zE="linear",Pm="log",xO="pow",SO="sqrt",zF="symlog",H1="time",q1="utc",ch="sequential",uS="diverging",UE="quantile",UF="quantize",VF="threshold",Mte="ordinal",Jq="point",e7e="band",Lte="bin-ordinal",Ws="continuous",TO="discrete",CO="discretizing",Uc="interpolating",Fte="temporal";function aon(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function uon(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function jte(){const e=Px().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Dte(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ou(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,L0(h,m)-1),v=m===g?y:L0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return jte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function t7e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return t7e(t())},e}function lon(){return t7e(jte().paddingInner(1))}var con=Array.prototype.map;function fon(e){return con.call(e,ma)}const don=Array.prototype.slice;function n7e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(L0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=fon(r),n):e.slice()},n.range=function(r){return arguments.length?(t=don.call(r),n):t.slice()},n.tickFormat=function(r,i){return aDe(e[0],tr(e),r??10,i)},n.copy=function(){return n7e().domain(n.domain()).range(n.range())},n}const UL=new Map,r7e=Symbol("vega_scale");function i7e(e){return e[r7e]=!0,e}function hon(e){return e&&e[r7e]===!0}function pon(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?aon(s):s.invertExtent?uon(s):void 0),s.type=e,i7e(s)};return r.metadata=zf(yt(n)),r}function _r(e,t,n){return arguments.length>1?(UL.set(e,pon(e,t,n)),this):s7e(e)?UL.get(e):void 0}_r(oon,uDe);_r(zE,_h,Ws);_r(Pm,cDe,[Ws,Pm]);_r(xO,kX,Ws);_r(SO,zNt,Ws);_r(zF,fDe,Ws);_r(H1,SDe,[Ws,Fte]);_r(q1,n3t,[Ws,Fte]);_r(ch,DX,[Ws,Uc]);_r(`${ch}-${zE}`,DX,[Ws,Uc]);_r(`${ch}-${Pm}`,TDe,[Ws,Uc,Pm]);_r(`${ch}-${xO}`,MX,[Ws,Uc]);_r(`${ch}-${SO}`,r3t,[Ws,Uc]);_r(`${ch}-${zF}`,CDe,[Ws,Uc]);_r(`${uS}-${zE}`,ADe,[Ws,Uc]);_r(`${uS}-${Pm}`,IDe,[Ws,Uc,Pm]);_r(`${uS}-${xO}`,LX,[Ws,Uc]);_r(`${uS}-${SO}`,i3t,[Ws,Uc]);_r(`${uS}-${zF}`,ODe,[Ws,Uc]);_r(UE,dDe,[CO,UE]);_r(UF,hDe,CO);_r(VF,pDe,CO);_r(Lte,n7e,[TO,CO]);_r(Mte,Px,TO);_r(e7e,jte,TO);_r(Jq,lon,TO);function s7e(e){return UL.has(e)}function P_(e,t){const n=UL.get(e);return n&&n.metadata[t]}function Bte(e){return P_(e,Ws)}function VE(e){return P_(e,TO)}function Zq(e){return P_(e,CO)}function o7e(e){return P_(e,Pm)}function mon(e){return P_(e,Fte)}function a7e(e){return P_(e,Uc)}function u7e(e){return P_(e,UE)}const gon=["clamp","base","constant","exponent"];function l7e(e,t){const n=t[0],r=tr(t)-n;return function(i){return e(n+i*r)}}function HF(e,t,n){return lX(zte(t||"rgb",n),e)}function c7e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function f7e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Aa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=_r(s)().domain([t,n]).range([0,1]),gon.forEach(a=>e[a]?o[a](e[a]()):0),o)}function zte(e,t){const n=NOt[yon(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function yon(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const von={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},_on={accent:o3t,category10:s3t,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:a3t,observable10:u3t,paired:l3t,pastel1:c3t,pastel2:f3t,set1:d3t,set2:h3t,set3:p3t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function d7e(e){if(De(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function h7e(e,t){for(const n in e)Ute(n,t(e[n]))}const E1e={};h7e(_on,d7e);h7e(von,e=>HF(d7e(e)));function Ute(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(E1e[e]=t,this):E1e[e]}const A$="symbol",bon="discrete",won="gradient",Eon=e=>De(e)?e.map(t=>String(t)):String(e),xon=(e,t)=>e[1]-t[1],Son=(e,t)=>t[1]-e[1];function Vte(e,t,n){let r;return dr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(_O(e.domain())/n||1)+1))),_t(t)&&(r=t.step,t=t.interval),vt(t)&&(t=e.type===H1?sS(t):e.type==q1?oS(t):$e("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function p7e(e,t,n){let r=e.range(),i=r[0],s=tr(r),o=xon;if(i>s&&(r=s,s=i,i=r,o=Son),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],tr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Hte(e,t){return e.bins?p7e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function m7e(e,t,n,r,i,s){const o=t.type;let a=Eon;if(o===H1||i===H1)a=e.timeFormat(r);else if(o===q1||i===q1)a=e.utcFormat(r);else if(o7e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=g7e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function g7e(e,t,n){const r=Hte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const eW={[UE]:"quantiles",[UF]:"thresholds",[VF]:"domain"},y7e={[UE]:"quantiles",[UF]:"domain"};function v7e(e,t){return e.bins?Aon(e.bins):e.type===Pm?g7e(e,t,!0):eW[e.type]?Con(e[eW[e.type]]()):Hte(e,t)}function Ton(e,t,n){const r=t[y7e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function Con(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Aon(e){const t=e.slice(0,-1);return t.max=tr(e),t}const Ion=e=>eW[e.type]||e.bins;function _7e(e,t,n,r,i,s,o){const a=y7e[t.type]&&s!==H1&&s!==q1?Ton(e,t,i):m7e(e,t,n,i,s,o);return r===A$&&Ion(t)?Oon(a):r===bon?Pon(a):kon(a)}const Oon=e=>(t,n,r)=>{const i=x1e(r[n+1],x1e(r.max,1/0)),s=S1e(t,e),o=S1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},x1e=(e,t)=>e??t,Pon=e=>(t,n)=>n?e(t):null,kon=e=>t=>e(t),S1e=(e,t)=>Number.isFinite(e)?t(e):null;function Ron(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+tr(t),s=i-r;if(e.type===VF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function $on(e,t,n,r){const i=r||t.type;return vt(n)&&mon(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===H1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===q1?e.utcFormat("%A, %d %B %Y, %X UTC"):_7e(e,t,5,null,n,r,!0)}function b7e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=$on(e,t,n.format,n.formatType);if(Zq(t.type)){const s=v7e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(VE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(tr(s))}`}}let w7e=0;function Non(){w7e=0}const VL="p_";function qte(e){return e&&e.gradient}function E7e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?VL:"";return i||(i=e.id="gradient_"+w7e++,r==="radial"?(e.x1=dd(e.x1,.5),e.y1=dd(e.y1,.5),e.r1=dd(e.r1,0),e.x2=dd(e.x2,.5),e.y2=dd(e.y2,.5),e.r2=dd(e.r2,.5),s=VL):(e.x1=dd(e.x1,0),e.y1=dd(e.y1,0),e.x2=dd(e.x2,1),e.y2=dd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function dd(e,t){return e??t}function x7e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const T1e={basis:{curve:aH},"basis-closed":{curve:C3t},"basis-open":{curve:A3t},bundle:{curve:I3t,tension:"beta",value:.85},cardinal:{curve:O3t,tension:"tension",value:0},"cardinal-open":{curve:k3t,tension:"tension",value:0},"cardinal-closed":{curve:P3t,tension:"tension",value:0},"catmull-rom":{curve:R3t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:$3t,tension:"alpha",value:.5},"catmull-rom-open":{curve:N3t,tension:"alpha",value:.5},linear:{curve:FX},"linear-closed":{curve:D3t},monotone:{horizontal:L3t,vertical:M3t},natural:{curve:F3t},step:{curve:j3t},"step-after":{curve:z3t},"step-before":{curve:B3t}};function Wte(e,t,n){var r=Wt(T1e,e)&&T1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Don={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Mon=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Lon=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Fon=/^((\s+,?\s*)|(,\s*))/,jon=/^[01]/;function HE(e){const t=[];return(e.match(Mon)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Don[s],a=Bon(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Bon(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?jon:Lon,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(Fon);u!==null&&(i+=u[0].length)}return r}const iy=Math.PI/180,zon=1e-14,kv=Math.PI/2,Hd=Math.PI*2,cb=Math.sqrt(3)/2;var P7={},k7={},S7e=[].join;function Uon(e,t,n,r,i,s,o,a,u){const l=S7e.call(arguments);if(P7[l])return P7[l];const c=o*iy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,E=v*a+_*u,S=g*e+y*t,b=v*e+_*t;let A=1/((S-w)*(S-w)+(b-E)*(b-E))-.25;A<0&&(A=0);let I=Math.sqrt(A);s==i&&(I=-I);const k=.5*(w+S)-I*(b-E),$=.5*(E+b)+I*(S-w),P=Math.atan2(E-$,w-k);let F=Math.atan2(b-$,S-k)-P;F<0&&s===1?F+=Hd:F>0&&s===0&&(F-=Hd);const z=Math.ceil(Math.abs(F/(kv+.001))),W=[];for(let V=0;V<z;++V){const G=P+V*F/z,M=P+(V+1)*F/z;W[V]=[k,$,G,M,n,r,f,d]}return P7[l]=W}function Von(e){const t=S7e.call(e);if(k7[t])return k7[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),E=n+p-w*m,S=r+m+w*p,b=n+g,T=r+y,A=b+w*y,I=T-w*g;return k7[t]=[c*E+f*S,d*E+h*S,c*A+f*I,d*A+h*I,c*b+f*T,d*b+h*T]}const Xl=["l",0,0,0,0,0,0,0];function Hon(e,t,n){const r=Xl[0]=e[0];if(r==="a"||r==="A")Xl[1]=t*e[1],Xl[2]=n*e[2],Xl[3]=e[3],Xl[4]=e[4],Xl[5]=e[5],Xl[6]=t*e[6],Xl[7]=n*e[7];else if(r==="h"||r==="H")Xl[1]=t*e[1];else if(r==="v"||r==="V")Xl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Xl[i]=(i%2==1?t:n)*e[i];return Xl}function VA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=Hon(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":C1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":C1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function C1e(e,t,n,r){const i=Uon(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Von(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const A1e=.5773502691896257,I1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Hd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=cb*n,i=r-n*A1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=cb*n,i=r-n*A1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cb*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cb*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cb*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=cb*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function T7e(e){return Wt(I1e,e)?I1e[e]:qon(e)}var R7={};function qon(e){if(!Wt(R7,e)){const t=HE(e);R7[e]={draw:function(n,r){VA(n,t,0,0,Math.sqrt(r)/2)}}}return R7[e]}const gg=.448084975506;function Won(e){return e.x}function Gon(e){return e.y}function Yon(e){return e.width}function Kon(e){return e.height}function cp(e){return typeof e=="function"?e:()=>+e}function Xk(e,t,n){return Math.max(t,Math.min(e,n))}function C7e(){var e=Won,t=Gon,n=Yon,r=Kon,i=cp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=Xk(+i.call(this,c),0,v),w=Xk(+s.call(this,c),0,v),E=Xk(+o.call(this,c),0,v),S=Xk(+a.call(this,c),0,v);if(u||(u=h=s5()),_<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var b=p+g,T=m+y;u.moveTo(p+_,m),u.lineTo(b-w,m),u.bezierCurveTo(b-gg*w,m,b,m+gg*w,b,m+w),u.lineTo(b,T-S),u.bezierCurveTo(b,T-gg*S,b-gg*S,T,b-S,T),u.lineTo(p+E,T),u.bezierCurveTo(p+gg*E,T,p,T-gg*E,p,T-E),u.lineTo(p,m+_),u.bezierCurveTo(p,m+gg*_,p+gg*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=cp(c),l):e},l.y=function(c){return arguments.length?(t=cp(c),l):t},l.width=function(c){return arguments.length?(n=cp(c),l):n},l.height=function(c){return arguments.length?(r=cp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=cp(c),s=f!=null?cp(f):i,a=d!=null?cp(d):i,o=h!=null?cp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function A7e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Hd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=s5()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function AO(e,t){return e??t}const IO=e=>e.x||0,OO=e=>e.y||0,Xon=e=>e.width||0,Qon=e=>e.height||0,Jon=e=>(e.x||0)+(e.width||0),Zon=e=>(e.y||0)+(e.height||0),ean=e=>e.startAngle||0,tan=e=>e.endAngle||0,nan=e=>e.padAngle||0,ran=e=>e.innerRadius||0,ian=e=>e.outerRadius||0,san=e=>e.cornerRadius||0,oan=e=>AO(e.cornerRadiusTopLeft,e.cornerRadius)||0,aan=e=>AO(e.cornerRadiusTopRight,e.cornerRadius)||0,uan=e=>AO(e.cornerRadiusBottomRight,e.cornerRadius)||0,lan=e=>AO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,can=e=>AO(e.size,64),fan=e=>e.size||1,qF=e=>e.defined!==!1,dan=e=>T7e(e.shape||"circle"),han=x3t().startAngle(ean).endAngle(tan).padAngle(nan).innerRadius(ran).outerRadius(ian).cornerRadius(san),pan=MDe().x(IO).y1(OO).y0(Zon).defined(qF),man=MDe().y(OO).x1(IO).x0(Jon).defined(qF),gan=gM().x(IO).y(OO).defined(qF),yan=C7e().x(IO).y(OO).width(Xon).height(Qon).cornerRadius(oan,aan,uan,lan),van=T3t().type(dan).size(can),_an=A7e().x(IO).y(OO).defined(qF).size(fan);function Gte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function ban(e,t){return han.context(e)(t)}function wan(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?man:pan).curve(Wte(r,n.orient,n.tension)).context(e)(t)}function Ean(e,t){const n=t[0],r=n.interpolate||"linear";return gan.curve(Wte(r,n.orient,n.tension)).context(e)(t)}function lS(e,t,n,r){return yan.context(e)(t,n,r)}function xan(e,t){return(t.mark.shape||t.shape).context(e)(t)}function San(e,t){return van.context(e)(t)}function Tan(e,t){return _an.context(e)(t)}var I7e=1;function O7e(){I7e=1}function Yte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+I7e++),o=i.clipping[s]||(i.clipping[s]={id:s});return An(r)?o.path=r(null):Gte(n)?o.path=lS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Cs(e){this.clear(),e&&this.union(e)}Cs.prototype={clone(){return new Cs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function WF(e){this.mark=e,this.bounds=this.bounds||new Cs}function GF(e){WF.call(this,e),this.items=this.items||[]}ot(GF,WF);class P7e{constructor(t){this._pending=0,this._loader=t||OF()}pending(){return this._pending}sanitizeURL(t){const n=this;return O1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(mT(n),r)).catch(()=>(mT(n),null))}loadImage(t){const n=this,r=son();return O1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Wt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>mT(n),o.onerror=()=>mT(n),o.src=s,o}).catch(i=>(mT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function O1e(e){e._pending+=1}function mT(e){e._pending-=1}function Gm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Can(t,r):0))}return e}function Can(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Aan=Hd-1e-8;let YF,I$,O$,Zv,tW,P$,nW,rW;const Xg=(e,t)=>YF.add(e,t),k$=(e,t)=>Xg(I$=e,O$=t),P1e=e=>Xg(e,YF.y1),k1e=e=>Xg(YF.x1,e),Rv=(e,t)=>tW*e+nW*t,$v=(e,t)=>P$*e+rW*t,$7=(e,t)=>Xg(Rv(e,t),$v(e,t)),N7=(e,t)=>k$(Rv(e,t),$v(e,t));function PO(e,t){return YF=e,t?(Zv=t*iy,tW=rW=Math.cos(Zv),P$=Math.sin(Zv),nW=-P$):(tW=rW=1,Zv=P$=nW=0),Ian}const Ian={beginPath(){},closePath(){},moveTo:N7,lineTo:N7,rect(e,t,n,r){Zv?($7(e+n,t),$7(e+n,t+r),$7(e,t+r),N7(e,t)):(Xg(e+n,t+r),k$(e,t))},quadraticCurveTo(e,t,n,r){const i=Rv(e,t),s=$v(e,t),o=Rv(n,r),a=$v(n,r);R1e(I$,i,o,P1e),R1e(O$,s,a,k1e),k$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Rv(e,t),a=$v(e,t),u=Rv(n,r),l=$v(n,r),c=Rv(i,s),f=$v(i,s);$1e(I$,o,u,c,P1e),$1e(O$,a,l,f,k1e),k$(c,f)},arc(e,t,n,r,i,s){if(r+=Zv,i+=Zv,I$=n*Math.cos(i)+e,O$=n*Math.sin(i)+t,Math.abs(i-r)>Aan)Xg(e-n,t-n),Xg(e+n,t+n);else{const o=l=>Xg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Hd,r<0&&(r+=Hd),i=i%Hd,i<0&&(i+=Hd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Hd,a=r-r%kv,u=0;u<4&&a>i;++u,a-=kv)o(a);else for(a=r-r%kv+kv,u=0;u<4&&a<i;++u,a=a+kv)o(a)}}};function R1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function $1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>zon?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(N1e(u,e,t,n,r)),0<l&&l<1&&i(N1e(l,e,t,n,r))}function N1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var A0=(A0=C0(1,1))?A0.getContext("2d"):null;const iW=new Cs;function Kte(e){return function(t,n){if(!A0)return!0;e(A0,t),iW.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=iW;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(A0.isPointInPath(u,a))return!0;return!1}}function Xte(e,t){return t.contains(e.x||0,e.y||0)}function k7e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(iW.set(n,r,n+i,r+s))}function R7e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return rw(t,n,r,i,s)}function rw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function qE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Jc(e,t){return e??t}function D1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Oan(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Jc(t.x1,.5)*r,n.y1+Jc(t.y1,.5)*i,Math.max(r,i)*Jc(t.r1,0),n.x1+Jc(t.x2,.5)*r,n.y1+Jc(t.y2,.5)*i,Math.max(r,i)*Jc(t.r2,.5));else{const o=Jc(t.x1,0),a=Jc(t.y1,0),u=Jc(t.x2,1),l=Jc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=C0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=D1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return D1e(s,t.stops)}function $7e(e,t,n){return qte(n)?Oan(e,n,t.bounds):n}function HL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=$7e(e,t,t.fill),!0):!1}var Pan=[];function WE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=$7e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Pan),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function kan(e,t){return e.zindex-t.zindex||e.index-t.index}function Qte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(kan)}function Vf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Qte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function qL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Qte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Jte(e){return function(t,n,r){Vf(n,i=>{(!r||r.intersects(i.bounds))&&N7e(e,t,i,i)})}}function Ran(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&N7e(e,t,n.items[0],n.items)}}function N7e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(qE(t,n),n.fill&&HL(t,n,i)&&t.fill(),n.stroke&&WE(t,n,i)&&t.stroke()))}function KF(e){return e=e||Ac,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,qL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function kO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Zte(e){return KF(kO(e))}function h1(e,t){return"translate("+e+","+t+")"}function ene(e){return"rotate("+e+")"}function $an(e,t){return"scale("+e+","+t+")"}function D7e(e){return h1(e.x||0,e.y||0)}function Nan(e){return h1(e.x||0,e.y||0)+(e.angle?" "+ene(e.angle):"")}function Dan(e){return h1(e.x||0,e.y||0)+(e.angle?" "+ene(e.angle):"")+(e.scaleX||e.scaleY?" "+$an(e.scaleX||1,e.scaleY||1):"")}function tne(e,t,n){function r(o,a){o("transform",Nan(a)),o("d",t(null,a))}function i(o,a){return t(PO(o,a.angle),a),Gm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=iy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Jte(s),pick:Zte(s),isect:n||Kte(s)}}var Man=tne("arc",ban);function Lan(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Fan(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function jan(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function nne(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(PO(u),c),Gm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=kO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Ran(s),pick:a,isect:Xte,tip:n}}var Ban=nne("area",wan,Lan);function zan(e,t){var n=t.clip;e.save(),An(n)?(e.beginPath(),n(e),e.clip()):M7e(e,t.group)}function M7e(e,t){e.beginPath(),Gte(t)?lS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function L7e(e){const t=Jc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Uan(e,t){e("transform",D7e(t))}function F7e(e,t){const n=L7e(t);e("d",lS(null,t,n,n))}function Van(e,t){e("class","background"),e("aria-hidden",!0),F7e(e,t)}function Han(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?F7e(e,t):e("d","")}function qan(e,t,n){const r=t.clip?Yte(n,t,t):null;e("clip-path",r)}function Wan(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Gm(e,t),e.translate(t.x||0,t.y||0)}function HA(e,t,n,r){const i=L7e(t);e.beginPath(),lS(e,t,(n||0)+i,(r||0)+i)}const Gan=kO(HA),Yan=kO(HA,!1),Kan=kO(HA,!0);function Xan(e,t,n,r){Vf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(HA(e,i,s,o),qE(e,i),i.fill&&HL(e,i,u)&&e.fill(),i.stroke&&!a&&WE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&M7e(e,i),n&&n.translate(-s,-o),Vf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(HA(e,i,s,o),qE(e,i),WE(e,i,u)&&e.stroke())})}function Qan(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return qL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Gte(u)&&!Kan(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Yan(e,u,o,a)?(e.restore(),u):(l=qL(u,v=>Jan(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Gan(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Jan(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Zan={type:"group",tag:"g",nested:!1,attr:Uan,bound:Wan,draw:Xan,pick:Qan,isect:k7e,content:qan,background:Van,foreground:Han},qA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function rne(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function ine(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function sne(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function XF(e,t){return e==="center"?t/2:e==="right"?t:0}function QF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function eun(e,t,n){const r=rne(t,n),i=ine(t,r),s=sne(t,r),o=(t.x||0)-XF(t.align,i),a=(t.y||0)-QF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,qA["xmlns:xlink"],"xlink:href"),e("transform",h1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function tun(e,t){const n=t.image,r=ine(t,n),i=sne(t,n),s=(t.x||0)-XF(t.align,r),o=(t.y||0)-QF(t.baseline,i);return e.set(s,o,s+r,o+i)}function nun(e,t,n){Vf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=rne(r,this);let s=ine(r,i),o=sne(r,i);if(s===0||o===0)return;let a=(r.x||0)-XF(r.align,s),u=(r.y||0)-QF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(qE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var run={type:"image",tag:"image",nested:!1,attr:eun,bound:tun,draw:nun,pick:KF(),isect:Ac,get:rne,xOffset:XF,yOffset:QF},iun=nne("line",Ean,Fan);function sun(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Dan(t)),e("d",t.path)}function R$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*iy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=HE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),VA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):VA(e,u,r,i,s,o)}function oun(e,t){return R$(PO(e,t.angle),t)?e.set(0,0,0,0):Gm(e,t,!0)}var aun={type:"path",tag:"path",nested:!1,attr:sun,bound:oun,draw:Jte(R$),pick:Zte(R$),isect:Kte(R$)};function uun(e,t){e("d",lS(null,t))}function lun(e,t){var n,r;return Gm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function M1e(e,t){e.beginPath(),lS(e,t)}var cun={type:"rect",tag:"path",nested:!1,attr:uun,bound:lun,draw:Jte(M1e),pick:Zte(M1e),isect:k7e};function fun(e,t){e("transform",D7e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function dun(e,t){var n,r;return Gm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function j7e(e,t,n){var r,i,s,o;return t.stroke&&WE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function hun(e,t,n){Vf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&j7e(e,r,i)&&(qE(e,r),e.stroke())}})}function pun(e,t,n,r){return e.isPointInStroke?j7e(e,t,1)&&e.isPointInStroke(n,r):!1}var mun={type:"rule",tag:"line",nested:!1,attr:fun,bound:dun,draw:hun,pick:KF(pun),isect:R7e},gun=tne("shape",xan),yun=tne("symbol",San,Xte);const L1e=x9e();var Al={height:Yh,measureWidth:one,estimateWidth:WL,width:WL,canvas:B7e};B7e(!0);function B7e(e){Al.width=e&&A0?one:WL}function WL(e,t){return z7e(oy(e,t),Yh(e))}function z7e(e,t){return~~(.8*e.length*t)}function one(e,t){return Yh(e)<=0||!(t=oy(e,t))?0:U7e(t,JF(e))}function U7e(e,t){const n=`(${t}) ${e}`;let r=L1e.get(n);return r===void 0&&(A0.font=t,r=A0.measureText(e).width,L1e.set(n,r)),r}function Yh(e){return e.fontSize!=null?+e.fontSize||0:11}function sy(e){return e.lineHeight!=null?e.lineHeight:Yh(e)+2}function vun(e){return De(e)?e.length>1?e:e[0]:e}function RO(e){return vun(e.lineBreak&&e.text&&!De(e.text)?e.text.split(e.lineBreak):e.text)}function ane(e){const t=RO(e);return(De(t)?t.length-1:0)*sy(e)}function oy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?bun(e,n):n}function _un(e){if(Al.width===one){const t=JF(e);return n=>U7e(n,t)}else if(Al.width===WL){const t=Yh(e);return n=>z7e(n,t)}else return t=>Al.width(e,t)}function bun(e,t){var n=+e.limit,r=_un(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function $O(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function JF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Yh(e)+"px "+$O(e,t)}function une(e){var t=e.baseline,n=Yh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*sy(e):t==="line-bottom"?.29*n-.5*sy(e):0)}const wun={left:"start",center:"middle",right:"end"},fC=new Cs;function ZF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-kv,t+=r*Math.cos(i),n+=r*Math.sin(i)),fC.x1=t,fC.y1=n,fC}function Eun(e,t){var n=t.dx||0,r=(t.dy||0)+une(t),i=ZF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",wun[t.align]||"start"),a?(u=h1(s,o)+" "+ene(a),(n||r)&&(u+=" "+h1(n,r))):u=h1(s+n,o+r),e("transform",u)}function lne(e,t,n){var r=Al.height(t),i=t.align,s=ZF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+une(t)-Math.round(.8*r),c=RO(t),f;if(De(c)?(r+=sy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Al.width(t,h)),0)):f=Al.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*iy,o,a);else if(n===2)return e.rotatedPoints(t.angle*iy,o,a);return e}function xun(e,t,n){Vf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=JF(r),e.textAlign=r.align||"left",s=ZF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*iy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+une(r),c=RO(r),qE(e,r),De(c))for(l=sy(r),u=0;u<c.length;++u)f=oy(r,c[u]),r.fill&&HL(e,r,i)&&e.fillText(f,o,a),r.stroke&&WE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=oy(r,c),r.fill&&HL(e,r,i)&&e.fillText(f,o,a),r.stroke&&WE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Sun(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=ZF(t),a=o.x1,u=o.y1,l=lne(fC,t,1),c=-t.angle*iy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function Tun(e,t){const n=lne(fC,e,2);return rw(t,n[0],n[1],n[2],n[3])||rw(t,n[0],n[1],n[4],n[5])||rw(t,n[4],n[5],n[6],n[7])||rw(t,n[2],n[3],n[6],n[7])}var Cun={type:"text",tag:"text",nested:!1,attr:Eun,bound:lne,draw:xun,pick:KF(Sun),isect:Tun},Aun=nne("trail",Tan,jan),Fl={arc:Man,area:Ban,group:Zan,image:run,line:iun,path:aun,rect:cun,rule:mun,shape:gun,symbol:yun,text:Cun,trail:Aun};function sW(e,t,n){var r=Fl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Cs),e,n)}var F1e={mark:null};function V7e(e,t,n){var r=Fl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(F1e.mark=e,l=F1e),c=sW(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Cs,o)for(a=0,u=s.length;a<u;++a)t.union(sW(s[a],i,n));return e.bounds=t}const Iun=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function H7e(e,t){return JSON.stringify(e,Iun,t)}function q7e(e){const t=typeof e=="string"?JSON.parse(e):e;return W7e(t)}function W7e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&W7e(n[i]);return t&&V7e(e),e}class G7e{constructor(t){arguments.length?this.root=q7e(t):(this.root=j1e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GF(this.root)])}toJSON(t){return H7e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=j1e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function j1e(e,t){const n={bounds:new Cs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Qg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function cne(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ls(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Qg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function uc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Y7e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function e8(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Oun(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Fl[i.marktype]).tip){for(o=e8(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let fne=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||OF(),this._tooltip=n||Pun}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Qg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Oun(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function Pun(e,t,n,r){e.element().setAttribute("title",r||"")}class NO{constructor(t){this._el=null,this._bgcolor=null,this._loader=new P7e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const kun="keydown",Run="keypress",$un="keyup",K7e="dragenter",$$="dragleave",X7e="dragover",oW="pointerdown",Nun="pointerup",GL="pointermove",N$="pointerout",Q7e="pointerover",aW="mousedown",Dun="mouseup",J7e="mousemove",YL="mouseout",Z7e="mouseover",KL="click",Mun="dblclick",Lun="wheel",eze="mousewheel",XL="touchstart",QL="touchmove",JL="touchend",Fun=[kun,Run,$un,K7e,$$,X7e,oW,Nun,GL,N$,Q7e,aW,Dun,J7e,YL,Z7e,KL,Mun,Lun,eze,XL,QL,JL],uW=GL,dC=YL,lW=KL;class DO extends fne{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Fun,this.pointermove=z1e([GL,J7e],[Q7e,Z7e],[N$,YL]),this.dragover=z1e([X7e],[K7e],[$$]),this.pointerout=U1e([N$,YL]),this.dragleave=U1e([$$])}initialize(t,n,r){return this._canvas=t&&cne(t,"canvas"),[KL,aW,oW,GL,N$,$$].forEach(i=>B1e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(eze,t)}pointerdown(t){this._down=this._active,this.fire(oW,t)}mousedown(t){this._down=this._active,this.fire(aW,t)}click(t){this._down===this._active&&(this.fire(KL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(XL,t,!0)}touchmove(t){this.fire(QL,t,!0)}touchend(t){this.fire(JL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===lW&&i&&i.href?this.handleHref(n,i,i.href):(t===uW||t===dC)&&this.handleTooltip(n,i,t!==dC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(B1e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=e8(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Fl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const jun=e=>e===XL||e===QL||e===JL?[XL,QL,JL]:[e];function B1e(e,t){jun(t).forEach(n=>Bun(e,n))}function Bun(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function h2(e,t,n){t.forEach(r=>e.fire(r,n))}function z1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?h2(this,e,r):((!i||!i.exit)&&h2(this,n,r),this._active=s,h2(this,t,r),h2(this,e,r))}}function U1e(e){return function(t){h2(this,e,t),this._active=null}}function zun(){return typeof window<"u"&&window.devicePixelRatio||1}function Uun(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?zun():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class ZL extends NO{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Cs,this._tempb=new Cs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:C0(1,1,this._options.type),t&&this._canvas&&(uc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Uun(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||$e("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=Vun(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):Hun(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Fl[n.marktype];n.clip&&zan(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const Vun=(e,t,n)=>new Cs().set(0,0,t,n).translate(-e[0],-e[1]);function Hun(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class tze extends fne{constructor(t,n){super(t,n);const r=this;r._hrefHandler=D7(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=D7(r,(i,s)=>{r.handleTooltip(i,s,i.type!==dC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(lW,this._hrefHandler),i.removeEventListener(uW,this._tooltipHandler),i.removeEventListener(dC,this._tooltipHandler)),this._svg=i=t&&cne(t,"svg"),i&&(i.addEventListener(lW,this._hrefHandler),i.addEventListener(uW,this._tooltipHandler),i.addEventListener(dC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:D7(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const D7=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},nze="aria-hidden",dne="aria-label",hne="role",pne="aria-roledescription",rze="graphics-object",mne="graphics-symbol",ize=(e,t,n)=>({[hne]:e,[pne]:t,[dne]:n||void 0}),qun=zf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),V1e={axis:{desc:"axis",caption:Yun},legend:{desc:"legend",caption:Kun},"title-text":{desc:"title",caption:e=>`Title text '${q1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${q1e(e)}'`}},H1e={ariaRole:hne,ariaRoleDescription:pne,description:dne};function sze(e,t){const n=t.aria===!1;if(e(nze,n||void 0),n||t.description==null)for(const r in H1e)e(H1e[r],void 0);else{const r=t.mark.marktype;e(dne,t.description),e(hne,t.ariaRole||(r==="group"?rze:mne)),e(pne,t.ariaRoleDescription||`${r} mark`)}}function oze(e){return e.aria===!1?{[nze]:!0}:qun[e.role]?null:V1e[e.role]?Gun(e,V1e[e.role]):Wun(e)}function Wun(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return ize(n?rze:mne,`${t} mark container`,e.description)}function Gun(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return ize(t.role||mne,t.desc,n.description||r(n))}catch{return null}}function q1e(e){return yt(e.text).join(" ")}function Yun(e){const t=e.datum,n=e.orient,r=t.title?aze(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${VE(a)?"discrete":a} scale with ${b7e(o,s,e)}`}function Kun(e){const t=e.datum,n=t.title?aze(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Qun(r)+(n?` titled '${n}'`:"")+` for ${Xun(s)} with ${b7e(u,a,e)}`}function aze(e){try{return yt(tr(e.items).items[0].text).join(" ")}catch{return null}}function Xun(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+tr(e)}function Qun(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const uze=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Jun=e=>uze(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function gne(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Jun(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=uze(u),a),toString:()=>e};return a}const lze=e=>cze(gne(),e)+"";function cze(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):cze(e,r)}return e.close()}const e6={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},t6={blend:"mix-blend-mode"},fze={fill:"none","stroke-miterlimit":10},gT=0,W1e="http://www.w3.org/2000/xmlns/",Ds=qA.xmlns;class yne extends NO{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ls(t,0,"svg",Ds),this._svg.setAttributeNS(W1e,"xmlns",Ds),this._svg.setAttributeNS(W1e,"xmlns:xlink",qA["xmlns:xlink"]),this._svg.setAttribute("version",qA.version),this._svg.setAttribute("class","marks"),uc(t,1),this._root=Ls(this._svg,gT,"g",Ds),Jg(this._root,fze),uc(this._svg,gT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Jg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ls(t,gT,"rect",Ds),Jg(r,{width:this._width,height:this._height,fill:n}));const i=lze(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),uc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Fl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,G1e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,G1e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Fl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Y1e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return uc(c,0),n._svg;c.setAttribute("class",Y7e(n));const f=oze(n);for(const m in f)$a(c,m,f[m]);l||$a(c,"pointer-events",u),$a(c,"clip-path",n.clip?Yte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Y1e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&tln(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Vf(n,p),uc(c,h),c}_update(t,n,r){Vp=n,oa=n.__values__,sze(hC,r),t.attr(hC,r,this);const i=rln[t.type];i&&i.call(this,t,n,r),Vp&&this.style(Vp,r)}style(t,n){if(n!=null){for(const r in e6){let i=r==="font"?$O(n):n[r];if(i===oa[r])continue;const s=e6[r];i==null?t.removeAttribute(s):(qte(i)&&(i=E7e(i,this._defs.gradient,dze())),t.setAttribute(s,i+"")),oa[r]=i}for(const r in t6)D$(t,t6[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ls(t,gT+1,"defs",Ds)),i=Zun(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ls(t,gT+1,"defs",Ds)),i=eln(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):uc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function G1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Zun(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ls(e,n++,"pattern",Ds);Jg(o,{id:VL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ls(o,0,"rect",Ds),Jg(o,{width:1,height:1,fill:`url(${dze()}#${t.id})`}),e=Ls(e,n++,"radialGradient",Ds),Jg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ls(e,n++,"linearGradient",Ds),Jg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ls(e,r,"stop",Ds),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return uc(e,r),n}function eln(e,t,n){let r;return e=Ls(e,n,"clipPath",Ds),e.setAttribute("id",t.id),t.path?(r=Ls(e,0,"path",Ds),r.setAttribute("d",t.path)):(r=Ls(e,0,"rect",Ds),Jg(r,{x:0,y:0,width:t.width,height:t.height})),uc(e,1),n+1}function tln(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Vf(n,o=>{i=e.mark(t,o,i,r),++s}),uc(t,1+s)}function Y1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Qg(o,r,Ds),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Qg(o,"path",Ds);s.appendChild(a),a.__data__=e;const u=Qg(o,"g",Ds);s.appendChild(u),u.__data__=e;const l=Qg(o,"path",Ds);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||nln(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function nln(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Vp=null,oa=null;const rln={group(e,t,n){const r=Vp=t.childNodes[2];oa=r.__values__,e.foreground(hC,n,this),oa=t.__values__,Vp=t.childNodes[1],e.content(hC,n,this);const i=Vp=t.childNodes[0];e.background(hC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==oa.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),oa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),oa=r.__values__,this.style(r,n),o&&(n.fill=o),Vp=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(D$(t,"image-rendering","optimizeSpeed"),D$(t,"image-rendering","pixelated")):D$(t,"image-rendering",null)},text(e,t,n){const r=RO(n);let i,s,o,a;De(r)?(s=r.map(u=>oy(n,u)),i=s.join(`
`),i!==oa.text&&(uc(t,0),o=t.ownerDocument,a=sy(n),s.forEach((u,l)=>{const c=Qg(o,"tspan",Ds);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),oa.text=i)):(s=oy(n,r),s!==oa.text&&(t.textContent=s,oa.text=s)),$a(t,"font-family",$O(n)),$a(t,"font-size",Yh(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function hC(e,t,n){t!==oa[e]&&(n?iln(Vp,e,t,n):$a(Vp,e,t),oa[e]=t)}function D$(e,t,n){n!==oa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),oa[t]=n)}function Jg(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function iln(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function dze(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class hze extends NO{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=gne();n.open("svg",Cn({},qA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",fze,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Fl[n.marktype],i=r.tag,s=[sze,r.attr];t.open("g",{class:Y7e(n),"clip-path":n.clip?Yte(this,n,n.group):null},oze(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=RO(a);if(De(l)){const c={x:0,dy:sy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(oy(a,l[f])).close()}else t.text(oy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Vf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Vf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&sln(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:VL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function sln(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=$O(t),e["font-size"]=Yh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in e6){let a=t[o];const u=e6[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(qte(a)&&(a=E7e(a,i.gradient,"")),e[u]=a)}for(const o in t6){const a=t[o];a!=null&&(s=s||[],s.push(`${t6[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const of={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function oln(e){of.svgMarkTypes=e.svgMarkTypes??["text"],of.svgOnTop=e.svgOnTop??!0,of.debug=e.debug??!1}class cW extends NO{constructor(t){super(t),this._svgRenderer=new yne(t),this._canvasRenderer=new ZL(t)}initialize(t,n,r,i,s){this._root_el=Ls(t,0,"div");const o=Ls(this._root_el,0,"div"),a=Ls(this._root_el,1,"div");return this._root_el.style.position="relative",of.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=of.svgOnTop?a:o,this._canvasEl=of.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return of.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!of.svgMarkTypes.includes(s));this._svgRenderer.render(t,of.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return of.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class pze extends DO{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ls(Ls(t,0,"div"),of.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const mze="canvas",gze="hybrid",yze="png",vze="svg",_ze="none",Zg={Canvas:mze,PNG:yze,SVG:vze,Hybrid:gze,None:_ze},W1={};W1[mze]=W1[yze]={renderer:ZL,headless:ZL,handler:DO};W1[vze]={renderer:yne,headless:hze,handler:tze};W1[gze]={renderer:cW,headless:cW,handler:pze};W1[_ze]={};function t8(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(W1[e]=t,this):W1[e]}function bze(e,t,n){const r=[],i=new Cs().union(t),s=e.marktype;return s?wze(e,i,n,r):s==="group"?Eze(e,i,n,r):$e("Intersect scene must be mark node or group item.")}function wze(e,t,n,r){if(aln(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)Eze(i[a],t,n,r);else for(const u=Fl[s].isect;a<o;++a){const l=i[a];xze(l,t,u)&&r.push(l)}}return r}function aln(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Eze(e,t,n,r){n&&n(e.mark)&&xze(e,t,Fl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)wze(i[u],t,n,r);t.translate(o,a)}return r}function xze(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const M7=new Cs;function Sze(e){const t=e.clip;if(An(t))t(PO(M7.clear()));else if(t)M7.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(M7)}const uln=1e-9;function vne(e,t,n){return e===t?!0:n==="path"?Tze(e,t):e instanceof Date&&t instanceof Date?+e==+t:dr(e)&&dr(t)?Math.abs(e-t)<=uln:!e||!t||!_t(e)&&!_t(t)?e==t:lln(e,t)}function Tze(e,t){return vne(HE(e),HE(t))}function lln(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!vne(e[i],t[i],i))return!1;return typeof e==typeof t}function cln(){O7e(),Non()}const GE="top",mf="left",bf="right",ay="bottom",fln="top-left",dln="top-right",hln="bottom-left",pln="bottom-right",_ne="start",fW="middle",Ma="end",mln="x",gln="y",n8="group",bne="axis",wne="title",yln="frame",vln="scope",Ene="legend",Cze="row-header",Aze="row-footer",Ize="row-title",Oze="column-header",Pze="column-footer",kze="column-title",_ln="padding",bln="symbol",Rze="fit",$ze="fit-x",Nze="fit-y",wln="pad",xne="none",Qk="all",dW="each",Sne="flush",e0="column",t0="row";function Dze(e){Ae.call(this,null,e)}ot(Dze,Ae,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Fl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=Jk(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===n8||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(Jk(l,o))),r.role){case bne:case Ene:case wne:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(Jk(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(Jk(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return Sze(r),t.modifies("bounds")}});function Jk(e,t,n){return t(e.bounds.clear(),e,n)}const K1e=":vega_identifier:";function Tne(e){Ae.call(this,0,e)}Tne.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ot(Tne,Ae,{transform(e,t){const n=Eln(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Eln(e){return e._signals[K1e]||(e._signals[K1e]=e.add(0))}function Mze(e){Ae.call(this,null,e)}ot(Mze,Ae,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,xln(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===n8?GF:WF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function xln(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Lze(e){Ae.call(this,null,e)}const X1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Fze(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Fze=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Q1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(Fze(i,s=e[n].bounds,t))return!0},Sln=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Tln=(e,t,n)=>{var r=e.range(),i=new Cs;return t===GE||t===ay?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},J1e=e=>(e.forEach(t=>t.opacity=1),e),Z1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");ot(Lze,Ae,{transform(e,t){const n=X1e[e.method]||X1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(J1e(i),t=Z1e(t,e)),t;if(i=i.filter(Sln),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=J1e(i),t=Z1e(t,e),s.length>=3&&Q1e(s,r)){do s=n(s,r);while(s.length>=3&&Q1e(s,r));s.length<3&&!tr(i).opacity&&(s.length>1&&(tr(s).opacity=0),tr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Tln(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function jze(e){Ae.call(this,null,e)}ot(jze,Ae,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ia=new Cs;function iw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Cln(e){var t=e.items[0].orient;return t===mf||t===bf}function Aln(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Iln(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Aln(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&ane(p),v=0,_=0,w,E;switch(ia.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case GE:v=f||0,_=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&Zk(e,p,E,m,y,0,-1,g);break;case mf:v=-c,_=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&Zk(e,p,E,m,y,1,-1,g);break;case bf:v=n+c,_=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&Zk(e,p,E,m,y,1,1,g);break;case ay:v=f||0,_=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&Zk(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return Gm(g.translate(v,_),i),iw(i,"x",v+o)|iw(i,"y",_+o)&&(i.bounds=ia,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Zk(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const e_e=(e,t)=>Math.floor(Math.min(e,t)),t_e=(e,t)=>Math.ceil(Math.max(e,t));function Oln(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===n8)switch(i.role){case bne:case Ene:case wne:break;case Cze:o.rowheaders.push(...s);break;case Aze:o.rowfooters.push(...s);break;case Oze:o.colheaders.push(...s);break;case Pze:o.colfooters.push(...s);break;case Ize:o.rowtitle=s[0];break;case kze:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Pln(e){return new Cs().set(0,0,e.width||0,e.height||0)}function kln(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Oi(e,t,n){const r=_t(e)?e[t]:e;return r??(n!==void 0?n:0)}function n_e(e){return e<0?Math.ceil(-e):0}function Bze(e,t,n){var r=!n.nodirty,i=n.bounds===Sne?Pln:kln,s=ia.set(0,0,0,0),o=Oi(n.align,e0),a=Oi(n.align,t0),u=Oi(n.padding,e0),l=Oi(n.padding,t0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),E=Array(d),S,b,T,A,I,k,$,P,N,F,z;for(b=0;b<c;++b)p[b]=0;for(b=0;b<f;++b)y[b]=0;for(b=0;b<d;++b)k=t[b],I=E[b]=i(k),k.x=k.x||0,_[b]=0,k.y=k.y||0,w[b]=0,T=b%c,A=~~(b/c),m=Math.max(m,$=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[T]=Math.max(p[T],$),y[A]=Math.max(y[A],P),h[b]=u+n_e(I.x1),g[b]=l+n_e(I.y1),r&&e.dirty(t[b]);for(b=0;b<d;++b)b%c===0&&(h[b]=0),b<c&&(g[b]=0);if(o===dW)for(T=1;T<c;++T){for(z=0,b=T;b<d;b+=c)z<h[b]&&(z=h[b]);for(b=T;b<d;b+=c)h[b]=z+p[T-1]}else if(o===Qk){for(z=0,b=0;b<d;++b)b%c&&z<h[b]&&(z=h[b]);for(b=0;b<d;++b)b%c&&(h[b]=z+m)}else for(o=!1,T=1;T<c;++T)for(b=T;b<d;b+=c)h[b]+=p[T-1];if(a===dW)for(A=1;A<f;++A){for(z=0,b=A*c,S=b+c;b<S;++b)z<g[b]&&(z=g[b]);for(b=A*c;b<S;++b)g[b]=z+y[A-1]}else if(a===Qk){for(z=0,b=c;b<d;++b)z<g[b]&&(z=g[b]);for(b=c;b<d;++b)g[b]=z+v}else for(a=!1,A=1;A<f;++A)for(b=A*c,S=b+c;b<S;++b)g[b]+=y[A-1];for(N=0,b=0;b<d;++b)N=h[b]+(b%c?N:0),_[b]+=N-t[b].x;for(T=0;T<c;++T)for(F=0,b=T;b<d;b+=c)F+=g[b],w[b]+=F-t[b].y;if(o&&Oi(n.center,e0)&&f>1)for(b=0;b<d;++b)I=o===Qk?m:p[b%c],N=I-E[b].x2-t[b].x-_[b],N>0&&(_[b]+=N/2);if(a&&Oi(n.center,t0)&&c!==1)for(b=0;b<d;++b)I=a===Qk?v:y[~~(b/c)],F=I-E[b].y2-t[b].y-w[b],F>0&&(w[b]+=F/2);for(b=0;b<d;++b)s.union(E[b].translate(_[b],w[b]));switch(N=Oi(n.anchor,mln),F=Oi(n.anchor,gln),Oi(n.anchor,e0)){case Ma:N-=s.width();break;case fW:N-=s.width()/2}switch(Oi(n.anchor,t0)){case Ma:F-=s.height();break;case fW:F-=s.height()/2}for(N=Math.round(N),F=Math.round(F),s.clear(),b=0;b<d;++b)t[b].mark.bounds.clear();for(b=0;b<d;++b)k=t[b],k.x+=_[b]+=N,k.y+=w[b]+=F,s.union(k.mark.bounds.union(k.bounds.translate(_[b],w[b]))),r&&e.dirty(k);return s}function Rln(e,t,n){var r=Oln(t),i=r.marks,s=n.bounds===Sne?$ln:Nln,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=Bze(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Oi(n.headerBand,t0,null),c=eR(e,r.rowheaders,i,a,u,-Oi(o,"rowHeader"),e_e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Oi(n.headerBand,e0,null),f=eR(e,r.colheaders,i,a,a,-Oi(o,"columnHeader"),e_e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Oi(n.footerBand,t0,null),d=eR(e,r.rowfooters,i,a,u,Oi(o,"rowFooter"),t_e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Oi(n.footerBand,e0,null),h=eR(e,r.colfooters,i,a,a,Oi(o,"columnFooter"),t_e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Oi(n.titleAnchor,t0),g=Oi(o,"rowTitle"),g=p===Ma?d+g:c-g,m=Oi(n.titleBand,t0,.5),r_e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Oi(n.titleAnchor,e0),g=Oi(o,"columnTitle"),g=p===Ma?h+g:f-g,m=Oi(n.titleBand,e0,.5),r_e(e,r.coltitle,g,1,y,m))}function $ln(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Nln(e,t){return e.bounds[t]}function eR(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,E,S,b,T,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,_=y;_>=0&&(b=n[_])==null;_-=d);a?(T=h==null?b.x:Math.round(b.bounds.x1+h*b.bounds.width()),A=m):(T=m,A=h==null?b.y:Math.round(b.bounds.y1+h*b.bounds.height())),E.union(S.bounds.translate(T-(S.x||0),A-(S.y||0))),S.x=T,S.y=A,e.dirty(S),g=o(g,E[l])}return g}function r_e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Dln(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Mln(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Lln(e,t,n,r,i,s,o){const a=Dln(n,t),u=Mln(e,a("offset",0)),l=a("anchor",_ne),c=l===Ma?1:l===fW?.5:0,f={align:dW,bounds:a("bounds",Sne),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case mf:f.anchor={x:Math.floor(r.x1)-u,column:Ma,y:c*(o||r.height()+2*r.y1),row:l};break;case bf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case GE:f.anchor={y:Math.floor(i.y1)-u,row:Ma,x:c*(s||i.width()+2*i.x1),column:l};break;case ay:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case fln:f.anchor={x:u,y:u};break;case dln:f.anchor={x:s-u,y:u,column:Ma};break;case hln:f.anchor={x:u,y:o-u,row:Ma};break;case pln:f.anchor={x:s-u,y:o-u,column:Ma,row:Ma};break}return f}function Fln(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Bln(e,n,n.items[0].items[0]),s=jln(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===bln&&zln(n.items[0].items[0].items[0].items),i!==xne&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Gm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function jln(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Bln(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&yT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case mf:i+=Math.ceil(o.bounds.width())+u;break;case bf:case ay:break;default:s+=o.bounds.height()+u}switch((i||s)&&yT(e,n,i,s),o.orient){case mf:c+=fb(t,n,o,a,1,1);break;case bf:l+=fb(t,n,o,Ma,0,0)+u,c+=fb(t,n,o,a,1,1);break;case ay:l+=fb(t,n,o,a,0,0),c+=fb(t,n,o,Ma,-1,0,1)+u;break;default:l+=fb(t,n,o,a,0,0)}(l||c)&&yT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(yT(e,n,-l,0),yT(e,o,-l,0))}}function fb(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:ane(n);return Math.round(r===_ne?f:r===Ma?d-h:.5*(c-h))}function yT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function zln(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Uln(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===mf||a===bf?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==n8?a===mf?(p=i.y2,h=i.y1):a===bf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===mf&&(p=r,h=0),_=u===_ne?p:u===Ma?h:(p+h)/2,d&&d.text){switch(a){case GE:case ay:v=f.bounds.height()+c;break;case mf:y=f.bounds.width()+c;break;case bf:y=-f.bounds.width()-c;break}ia.clear().union(d.bounds),ia.translate(y-(d.x||0),v-(d.y||0)),iw(d,"x",y)|iw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ia),d.mark.bounds.clear().union(ia),e.dirty(d)),ia.clear().union(d.bounds)}else ia.clear();switch(ia.union(f.bounds),a){case GE:m=_,g=i.y1-ia.height()-l;break;case mf:m=i.x1-ia.width()-l,g=_;break;case bf:m=i.x2+ia.width()+l,g=_;break;case ay:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return iw(s,"x",m)|iw(s,"y",g)&&(ia.translate(m,g),e.dirty(s),s.bounds.clear().union(ia),t.bounds.clear().union(ia),e.dirty(s)),s.bounds}function zze(e){Ae.call(this,null,e)}ot(zze,Ae,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Rln(n,r,e.layout),Hln(n,r,e)}),Vln(e.mark.group)?t.reflow():t}});function Vln(e){return e&&e.mark.role!=="legend-entry"}function Hln(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Cs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case bne:h=Cln(f)?a:u,h.union(Iln(e,f,i,s));break;case wne:c=f;break;case Ene:l.push(Fln(e,f));break;case yln:case vln:case Cze:case Aze:case Ize:case Oze:case Pze:case kze:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||bf,d!==xne&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];Bze(e,v,Lln(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===Rze||n.autosize.type===$ze||n.autosize.type===Nze))switch(y.orient){case mf:case bf:o.add(v.x1,0).add(v.x2,0);break;case GE:case ay:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(Uln(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),qln(e,t,o,n)}function qln(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===_ln){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===xne?(l=0,f=0,u=o,c=a):s===Rze?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===$ze?(u=Math.max(0,o-l-d),a=c+f+h):s===Nze?(o=u+l+d,c=Math.max(0,a-f-h)):s===wln&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Wln=Object.freeze(Object.defineProperty({__proto__:null,bound:Dze,identifier:Tne,mark:Mze,overlap:Lze,render:jze,viewlayout:zze},Symbol.toStringTag,{value:"Module"}));function Uze(e){Ae.call(this,null,e)}ot(Uze,Ae,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Vte(s,o,e.minstep),u=e.format||m7e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?p7e(s,e.values,a):Hte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Ar({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Ar({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Vze(e){Ae.call(this,null,e)}function Gln(){return Ar({})}function Yln(e){const t=iS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ot(Vze,Ae,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Gln,s=e.key||Ht,o=this.value;return De(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&$e("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Yln(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function Hze(e){Ae.call(this,null,e)}ot(Hze,Ae,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(De(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||wg,u=i.enter||wg,l=i.exit||wg,c=(s&&!o?i[s]:a)||wg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==wg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==wg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==wg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function qze(e){Ae.call(this,[],e)}ot(qze,Ae,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||A$,o=e.scale,a=+e.limit,u=Vte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===A$,c=e.format||_7e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||v7e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===A$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,An(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Aa(m=p||8),i=i.map((y,v)=>Ar({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Ar({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===won?(d=o.domain(),h=f7e(o,d[0],tr(d)),f.length<3&&!e.values&&d[0]!==tr(d)&&(f=[d[0],tr(d)]),i=f.map((y,v)=>Ar({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=Ron(o),i=f.map((y,v)=>Ar({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Kln=e=>e.source.x,Xln=e=>e.source.y,Qln=e=>e.target.x,Jln=e=>e.target.y;function Cne(e){Ae.call(this,{},e)}Cne.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ot(Cne,Ae,{transform(e,t){var n=e.sourceX||Kln,r=e.sourceY||Xln,i=e.targetX||Qln,s=e.targetY||Jln,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=i_e.get(u+"-"+a)||i_e.get(u);return l||$e("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const Wze=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Zln=(e,t,n,r)=>Wze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Gze=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},ecn=(e,t,n,r)=>Gze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Yze=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},tcn=(e,t,n,r)=>Yze(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ncn=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,rcn=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,icn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},scn=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ocn=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},acn=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},i_e=iS({line:Wze,"line-radial":Zln,arc:Gze,"arc-radial":ecn,curve:Yze,"curve-radial":tcn,"orthogonal-horizontal":ncn,"orthogonal-vertical":rcn,"orthogonal-radial":icn,"diagonal-horizontal":scn,"diagonal-vertical":ocn,"diagonal-radial":acn});function Ane(e){Ae.call(this,null,e)}Ane.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ot(Ane,Ae,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||tS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/XC(l),h=Ou(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ucn=5;function lcn(e){const t=e.type;return!e.bins&&(t===zE||t===xO||t===SO)}function Kze(e){return Bte(e)&&e!==ch}const ccn=zf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Xze(e){Ae.call(this,null,e),this.modified(!0)}ot(Xze,Ae,{transform(e,t){var n=t.dataflow,r=this.value,i=fcn(e);(!r||i!==r.type)&&(this.value=r=_r(i)());for(i in e)if(!ccn[i]){if(i==="padding"&&Kze(r.type))continue;An(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return ycn(r,e,gcn(r,e,hcn(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function fcn(e){var t=e.type,n="",r;return t===ch?ch+"-"+zE:(dcn(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?ch+"-":r===3?uS+"-":""),(n+t||zE).toLowerCase())}function dcn(e){const t=e.type;return Bte(t)&&t!==H1&&t!==q1&&(e.scheme||e.range&&e.range.length&&e.range.every(vt))}function hcn(e,t,n){const r=pcn(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&lcn(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return Kze(s)&&t.padding&&i[0]!==tr(i)&&(i=mcn(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Qze(s,i,n)),s===Mte&&e.unknown(t.domainImplicit?iH:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Vte(e,t.nice)||null),i.length}function pcn(e,t,n){return t?(e.domain(Qze(e.type,t,n)),t.length):-1}function mcn(e,t,n,r,i,s){var o=Math.abs(tr(n)-n[0]),a=o/(o-2*r),u=e===Pm?Oee(t,null,a):e===SO?jL(t,null,a,.5):e===xO?jL(t,null,a,i||1):e===zF?Pee(t,null,a,s||1):Iee(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function Qze(e,t,n){if(o7e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function gcn(e,t,n){let r=t.bins;if(r&&!De(r)){const i=e.domain(),s=i[0],o=tr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||$e("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Ou(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Lte&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function ycn(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=vcn(r,t,n);else if(t.scheme&&(s=_cn(r,t,n),An(s))){if(e.interpolator)return e.interpolator(s);$e(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&a7e(r))return e.interpolator(HF(hW(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(zte(t.interpolate,t.interpolateGamma)):An(e.round)?e.round(i):An(e.rangeRound)&&e.interpolate(i?FI:Bm),s&&e.range(hW(s,t.reverse))}function vcn(e,t,n){e!==e7e&&e!==Jq&&$e("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Jq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Dte(n,i,r)]}function _cn(e,t,n){var r=t.schemeExtent,i,s;return De(t.scheme)?s=HF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Ute(i),s||$e(`Unrecognized scheme name: ${t.scheme}`)),n=e===VF?n+1:e===Lte?n-1:e===UE||e===UF?+t.schemeCount||ucn:n,a7e(e)?s_e(s,r,t.reverse):An(s)?c7e(s_e(s,r),n):e===Mte?s:s.slice(0,n)}function s_e(e,t,n){return An(e)&&(t||n)?l7e(e,hW(t||[0,1],n)):e}function hW(e,t){return t?e.slice().reverse():e}function Jze(e){Ae.call(this,null,e)}ot(Jze,Ae,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(I_(e.sort)),this.modified(n),t}});const o_e="zero",Zze="center",eUe="normalize",tUe=["y0","y1"];function Ine(e){Ae.call(this,null,e)}Ine.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:o_e,values:[o_e,Zze,eUe]},{name:"as",type:"string",array:!0,length:2,default:tUe}]};ot(Ine,Ae,{transform(e,t){var n=e.as||tUe,r=n[0],i=n[1],s=I_(e.sort),o=e.field||tS,a=e.offset===Zze?bcn:e.offset===eUe?wcn:Ecn,u,l,c,f;for(u=xcn(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function bcn(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function wcn(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Ecn(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function xcn(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Scn=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Uze,datajoin:Vze,encode:Hze,legendentries:qze,linkpath:Cne,pie:Ane,scale:Xze,sortitems:Jze,stack:Ine},Symbol.toStringTag,{value:"Module"}));var Tcn=Math.abs,pW=Math.cos,n6=Math.sin,Ccn=1e-6,nUe=Math.PI,mW=nUe/2,a_e=Acn(2);function u_e(e){return e>1?mW:e<-1?-mW:Math.asin(e)}function Acn(e){return e>0?Math.sqrt(e):0}function Icn(e,t){var n=e*n6(t),r=30,i;do t-=i=(t+n6(t)-n)/(1+pW(t));while(Tcn(i)>Ccn&&--r>0);return t/2}function Ocn(e,t,n){function r(i,s){return[e*i*pW(s=Icn(n,s)),t*n6(s)]}return r.invert=function(i,s){return s=u_e(s/t),[i/(e*pW(s)),u_e((2*s+n6(2*s))/n)]},r}var Pcn=Ocn(a_e/mW,a_e,nUe);function kcn(){return Uh(Pcn).scale(169.529)}const Rcn=jNe(),gW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function $cn(e,t){return function n(){const r=t();return r.type=e,r.path=jNe().projection(r),r.copy=r.copy||function(){const i=n();return gW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},i7e(r)}}function One(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(r6[e]=$cn(e,t),this):r6[e]||null}function rUe(e){return e&&e.path||Rcn}const r6={albers:zNe,albersusa:h$t,azimuthalequalarea:p$t,azimuthalequidistant:m$t,conicconformal:v$t,conicequalarea:cM,conicequidistant:w$t,equalEarth:x$t,equirectangular:_$t,gnomonic:S$t,identity:T$t,mercator:g$t,mollweide:kcn,naturalEarth1:C$t,orthographic:A$t,stereographic:I$t,transversemercator:O$t};for(const e in r6)One(e,r6[e]);function Ncn(){}const fp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function iUe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),Dcn(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(Mcn((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,fp[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,fp[m|g<<1].forEach(_);for(fp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,fp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,fp[m|g<<1|y<<2|v<<3].forEach(_);fp[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,fp[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,fp[y<<2|v<<3].forEach(_);fp[y<<3].forEach(_);function _(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],b=o(E),T=o(S),A,I;(A=d[b])?(I=f[T])?(delete d[A.end],delete f[I.start],A===I?(A.ring.push(S),c(A.ring)):f[A.start]=d[I.end]={start:A.start,end:I.end,ring:A.ring.concat(I.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=T]=A):(A=f[T])?(I=d[b])?(delete f[A.start],delete d[I.end],A===I?(A.ring.push(S),c(A.ring)):f[I.start]=d[A.end]={start:I.start,end:A.end,ring:I.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=b]=A):f[b]=d[T]={start:b,end:T,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||$e("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:Ncn,r):n===a},r}function Dcn(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Mcn(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Lcn(e,t[n]))return i;return 0}function Lcn(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Fcn(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Fcn(e,t,n){var r;return jcn(e,t,n)&&Bcn(e[r=+(e[0]===t[0])],n[r],t[r])}function jcn(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Bcn(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function sUe(e,t,n){return function(r){var i=$h(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?F0(s,o,e):a/(e+1);return Ou(s+u,o,u)}}function Pne(e){Ae.call(this,null,e)}Pne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ot(Pne,Ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ca,s=iUe().smooth(e.smooth!==!1),o=e.thresholds||zcn(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,De(o)?o:o(c.values));Ucn(f,c,l,e),f.forEach(d=>{u.push(RF(l,Ar(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function zcn(e,t,n){const r=sUe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>vc(t(i).values)))}function Ucn(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(An(i)&&(i=i(n,r)),An(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(dr(i)?i:i[0])||1,a=(dr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(oUe(t,o,a,u,l))}function oUe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function l_e(e,t,n){const r=e>=0?e:Kee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function L7(e){return An(e)?e:Aa(+e)}function aUe(){var e=u=>u[0],t=u=>u[1],n=tS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=l_e(r[0],u,e)>>o,f=l_e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(db(p,m,g,y,c),hb(p,m,y,g,f),db(p,m,g,y,c),hb(p,m,y,g,f),db(p,m,g,y,c),hb(p,m,y,g,f)):c>0?(db(p,m,g,y,c),db(p,m,y,g,c),db(p,m,g,y,c),v=y):f>0&&(hb(p,m,g,y,f),hb(p,m,y,g,f),hb(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/XC(v);for(let w=0,E=p*m;w<E;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=L7(u),a):e},a.y=function(u){return arguments.length?(t=L7(u),a):t},a.weight=function(u){return arguments.length?(n=L7(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||$e("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||$e("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=yt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&$e("invalid bandwidth"),r=u,a):r},a}function db(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function hb(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function kne(e){Ae.call(this,null,e)}kne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Vcn=["x","y","weight","size","cellSize","bandwidth"];function uUe(e,t){return Vcn.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ot(kne,Ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Hcn(r,e.groupby),s=(e.groupby||[]).map(Zi),o=uUe(aUe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Ar(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Hcn(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Rne(e){Ae.call(this,null,e)}Rne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ot(Rne,Ae,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=iUe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||sUe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=uUe(aUe(),e)(i,!0),u=oUe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=De(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Ar),n}});const yW="Feature",$ne="FeatureCollection",qcn="MultiPoint";function Nne(e){Ae.call(this,null,e)}Nne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ot(Nne,Ae,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ca,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(va(a))||s&&t.modified(va(s))||o&&t.modified(va(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:yW,geometry:{type:qcn,coordinates:r}})),this.value={type:$ne,features:n}}});function Dne(e){Ae.call(this,null,e)}Dne.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ot(Dne,Ae,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ca,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=rUe(e.projection),n.materialize().reflow()):o=i===Ca||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Wcn(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Wcn(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Mne(e){Ae.call(this,null,e)}Mne.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ot(Mne,Ae,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Lne(e){Ae.call(this,null,e)}Lne.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ot(Lne,Ae,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Gcn(rUe(e.projection),e.field||Cc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Gcn(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Fne(e){Ae.call(this,[],e),this.generator=WRt()}Fne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ot(Fne,Ae,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)An(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(uBe(n[0],i)):t.add.push(Ar(i)),n[0]=i,t}});function jne(e){Ae.call(this,null,e)}jne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ot(jne,Ae,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ca,s=Kcn(e.opacity,e),o=Ycn(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?vc(n.map(l=>vc(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Cn({},l,u);r||(f.$max=vc(c.values||[])),l[a]=Xcn(c,f,o.dep?o:Aa(o(f)),s.dep?s:Aa(s(f)))}),t.reflow(!0).modifies(a)}});function Ycn(e,t){let n;return An(e)?(n=r=>j0(e(r,t)),n.dep=lUe(e)):n=Aa(j0(e||"#888")),n}function Kcn(e,t){let n;return An(e)?(n=r=>e(r,t),n.dep=lUe(e)):e?n=Aa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function lUe(e){if(!An(e))return!1;const t=zf(va(e));return t.$x||t.$y||t.$value||t.$max}function Xcn(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Bg,d=C0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function cUe(e){Ae.call(this,null,e),this.modified(!0)}ot(cUe,Ae,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Jcn(e.type),gW.forEach(r=>{e[r]!=null&&c_e(n,r,e[r])})):gW.forEach(r=>{e.modified(r)&&c_e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Qcn(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Qcn(e,t){const n=Zcn(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Jcn(e){const t=One((e||"mercator").toLowerCase());return t||$e("Unrecognized projection type: "+e),t()}function c_e(e,t,n){An(e[t])&&e[t](n)}function Zcn(e){return e=yt(e),e.length===1?e[0]:{type:$ne,features:e.reduce((t,n)=>t.concat(efn(n)),[])}}function efn(e){return e.type===$ne?e.features:yt(e).filter(t=>t!=null).map(t=>t.type===yW?t:{type:yW,geometry:t})}const tfn=Object.freeze(Object.defineProperty({__proto__:null,contour:Rne,geojson:Nne,geopath:Dne,geopoint:Mne,geoshape:Lne,graticule:Fne,heatmap:jne,isocontour:Pne,kde2d:kne,projection:cUe},Symbol.toStringTag,{value:"Module"})),f_e={center:Mkt,collide:tRt,nbody:dRt,link:rRt,x:hRt,y:pRt},p2="forces",vW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],nfn=["static","iterations"],fUe=["x","y","vx","vy"];function Bne(e){Ae.call(this,null,e)}Bne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:fUe}]};ot(Bne,Ae,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(vW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&dUe(n,e,0,t)):(this.value=n=ifn(t.source,e),n.on("tick",rfn(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(nfn)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==p2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(fUe)}});function rfn(e,t){return()=>e.touch(t).run()}function ifn(e,t){const n=fRt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),dUe(n,t,!0).on("end",()=>s=!0)}function dUe(e,t,n,r){var i=yt(t.forces),s,o,a,u;for(s=0,o=vW.length;s<o;++s)a=vW[s],a!==p2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=p2+s,a=n||t.modified(p2,s)?ofn(i[s]):r&&sfn(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(p2+s,null);return e.numForces=i.length,e}function sfn(e,t){var n,r;for(n in e)if(An(r=e[n])&&t.modified(va(r)))return 1;return 0}function ofn(e){var t,n;Wt(f_e,e.force)||$e("Unrecognized force: "+e.force),t=f_e[e.force]();for(n in e)An(t[n])&&afn(t[n],e[n],e);return t}function afn(e,t,n){e(An(t)?r=>t(r,n):t)}const ufn=Object.freeze(Object.defineProperty({__proto__:null,force:Bne},Symbol.toStringTag,{value:"Module"}));function _W(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function zne(e){Ae.call(this,null,e)}zne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const lfn=e=>e.values;ot(zne,Ae,{transform(e,t){t.source||$e("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&kF(o.data)&&i.rem.push(o.data)}),this.value=s=AX({values:yt(e.keys).reduce((o,a)=>(o.key(a),o),cfn()).entries(i.source)},lfn),n&&s.each(o=>{o.children&&(o=Ar(o.data),i.add.push(o),i.source.push(o))}),_W(s,Ht,Ht)),i.source.root=s,i}});function cfn(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Ym(e){Ae.call(this,null,e)}const ffn=(e,t)=>e.parent===t.parent?1:2;ot(Ym,Ae,{transform(e,t){(!t.source||!t.source.root)&&$e(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(I_(e.sort,o=>o.data)),dfn(n,this.params,e),n.separation&&n.separation(e.separation!==!1?ffn:tS);try{this.value=n(i)}catch(o){$e(o)}return i.each(o=>hfn(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function dfn(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function hfn(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const bW=["x","y","r","depth","children"];function Une(e){Ym.call(this,e)}Une.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bW.length,default:bW}]};ot(Une,Ym,{layout:pNt,params:["radius","size","padding"],fields:bW});const wW=["x0","y0","x1","y1","depth","children"];function Vne(e){Ym.call(this,e)}Vne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:wW.length,default:wW}]};ot(Vne,Ym,{layout:mNt,params:["size","round","padding"],fields:wW});function Hne(e){Ae.call(this,null,e)}Hne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ot(Hne,Ae,{transform(e,t){t.source||$e("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?_W(lme().id(e.key).parentId(e.parentKey)(i.source),e.key,Ac):_W(lme()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const d_e={tidy:TNt,cluster:L$t},EW=["x","y","depth","children"];function qne(e){Ym.call(this,e)}qne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:EW.length,default:EW}]};ot(qne,Ym,{layout(e){const t=e||"tidy";if(Wt(d_e,t))return d_e[t]();$e("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:EW});function Wne(e){Ae.call(this,[],e)}Wne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ot(Wne,Ae,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||$e("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ht(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ht(a)]&&s[Ht(u)]&&i.add.push(Ar({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ht(o)]=1),n.forEach(o=>{(s[Ht(o.source)]||s[Ht(o.target)])&&i.mod.push(o)})),i}});const h_e={binary:ANt,dice:UI,slice:l5,slicedice:INt,squarify:sDe,resquarify:ONt},xW=["x0","y0","x1","y1","depth","children"];function Gne(e){Ym.call(this,e)}Gne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xW.length,default:xW}]};ot(Gne,Ym,{layout(){const e=CNt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Wt(h_e,t)?e.tile(h_e[t]):$e("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:xW});const pfn=Object.freeze(Object.defineProperty({__proto__:null,nest:zne,pack:Une,partition:Vne,stratify:Hne,tree:qne,treelinks:Wne,treemap:Gne},Symbol.toStringTag,{value:"Module"})),F7=4278190080;function mfn(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function gfn(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=C0(s,o).getContext("2d"),l=C0(s,o).getContext("2d"),c=a&&C0(s,o).getContext("2d");n.forEach(T=>M$(u,T,!1)),M$(l,t,!1),a&&M$(c,t,!0);const f=j7(u,s,o),d=j7(l,s,o),h=a&&j7(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,E,S,b;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&F7,b=d[w]&F7,S=a&&h[w]&F7,(E||S||b)&&(v=e(g),_=e(y),!i&&(E||b)&&p.set(v,_),a&&(E||S)&&m.set(v,_));return[p,m]}function j7(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function M$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>M$(e,s.items,n))}):Fl[r].draw(e,{items:n?t.map(yfn):t})}function yfn(e){const t=RF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const dp=5,Ra=31,WA=32,kg=new Uint32Array(WA+1),cf=new Uint32Array(WA+1);cf[0]=0;kg[0]=~cf[0];for(let e=1;e<=WA;++e)cf[e]=cf[e-1]<<1|1,kg[e]=~cf[e];function vfn(e,t){const n=new Uint32Array(~~((e*t+WA)/WA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>dp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>dp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>dp,~(1<<(a&Ra)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>dp,h=f>>>dp,d===h){if(n[d]&kg[c&Ra]&cf[(f&Ra)+1])return!0}else{if(n[d]&kg[c&Ra]||n[h]&cf[(f&Ra)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>dp,d=c>>>dp,f===d)r(f,kg[l&Ra]&cf[(c&Ra)+1]);else for(r(f,kg[l&Ra]),r(d,cf[(c&Ra)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>dp,d=c>>>dp,f===d)i(f,cf[l&Ra]|kg[(c&Ra)+1]);else for(i(f,cf[l&Ra]),i(d,kg[(c&Ra)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function _fn(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>vfn(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function bfn(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Al.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function i6(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function n0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function wfn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!i6(p,m,d,h,i,s)&&!n0(e,p,m,h,d,g,o,a)&&!n0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,n0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Al.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,E,S,b,T,A,I,k,$,P,N,F,z,W,V;for(let G=0;G<f;++G){for(v=c[G].x,w=c[G].y,_=c[G].x2===void 0?v:c[G].x2,E=c[G].y2===void 0?w:c[G].y2,v>_&&(V=v,v=_,_=V),w>E&&(V=w,w=E,E=V),I=e(v),$=e(_),k=~~((I+$)/2),P=e(w),F=e(E),N=~~((P+F)/2),T=k;T>=I;--T)for(A=N;A>=P;--A)W=u(T,A,p,h,d),W&&([l.x,l.y,p,m]=W);for(T=k;T<=$;++T)for(A=N;A<=F;++A)W=u(T,A,p,h,d),W&&([l.x,l.y,p,m]=W);!m&&!n&&(z=Math.abs(_-v+E-w),S=(v+_)/2,b=(w+E)/2,z>=y&&!i6(S,b,h,d,i,s)&&!n0(e,S,b,d,h,d,o,null)&&(y=z,l.x=S,l.y=b,g=!0))}return m||g?(S=h/2,b=d/2,o.setRange(e(l.x-S),e(l.y-b),e(l.x+S),e(l.y+b)),l.align="center",l.baseline="middle",!0):!1}}const Efn=[-1,-1,1,1],xfn=[-1,1,-1,1];function Sfn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Al.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,E,S,b,T,A,I,k,$,P,N;for(let F=0;F<f;++F){for(_=c[F].x,E=c[F].y,w=c[F].x2===void 0?_:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((_+w)/2),e((E+S)/2)]);p.length;)if([A,I]=p.pop(),!(o.get(A,I)||a.get(A,I)||u.get(A,I))){u.set(A,I);for(let z=0;z<4;++z)b=A+Efn[z],T=I+xfn[z],u.outOfBounds(b,T,b,T)||p.push([b,T]);if(b=e.invert(A),T=e.invert(I),k=m,$=s,!i6(b,T,h,d,i,s)&&!n0(e,b,T,d,h,k,o,a)&&!n0(e,b,T,d,h,d,o,null)){for(;$-k>=1;)P=(k+$)/2,n0(e,b,T,d,h,P,o,a)?$=P:k=P;k>m&&(l.x=b,l.y=T,m=k,g=!0)}}!g&&!n&&(N=Math.abs(w-_+S-E),b=(_+w)/2,T=(E+S)/2,N>=v&&!i6(b,T,h,d,i,s)&&!n0(e,b,T,d,h,d,o,null)&&(v=N,l.x=b,l.y=T,y=!0))}return g||y?(b=h/2,T=d/2,o.setRange(e(l.x-b),e(l.y-T),e(l.x+b),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const Tfn=["right","center","left"],Cfn=["bottom","middle","top"];function Afn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,E,S,b,T,A,I,k;for(let $=0;$<u;++$){if(h=(n[$]&3)-1,p=(n[$]>>>2&3)-1,m=h===0&&p===0||r[$]<0,g=h&&p?Math.SQRT1_2:1,y=r[$]<0?-1:1,v=c[1+h]+r[$]*h*g,b=c[4+p]+y*f*p/2+r[$]*p*g,w=b-f/2,E=b+f/2,T=e(v),I=e(w),k=e(E),!d)if(p_e(T,T,I,k,o,a,v,v,w,E,c,m))d=Al.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,_=S+d/2,T=e(v),A=e(_),p_e(T,A,I,k,o,a,v,_,w,E,c,m))return l.x=h?h*y<0?_:v:S,l.y=p?p*y<0?E:w:b,l.align=Tfn[h*y+1],l.baseline=Cfn[p*y+1],o.setRange(T,I,A,k),!0}return!1}}function p_e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const B7=0,z7=4,U7=8,V7=0,H7=1,q7=2,Ifn={"top-left":B7+V7,top:B7+H7,"top-right":B7+q7,left:z7+V7,middle:z7+H7,right:z7+q7,"bottom-left":U7+V7,bottom:U7+H7,"bottom-right":U7+q7},Ofn={naive:bfn,"reduced-search":wfn,floodfill:Sfn};function Pfn(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=kfn(r,f),h=Rfn(i,f),p=$fn(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=Nfn(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,E=-1;const S=e.map(I=>{const k=v?Al.width(I,I.text):void 0;return w=Math.max(w,k),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:k}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const b=_fn(t[0],t[1],l);let T;if(!_){n&&S.sort(($,P)=>n($.datum,P.datum));let I=!1;for(let $=0;$<h.length&&!I;++$)I=h[$]===5||d[$]<0;const k=(p&&o||g)&&e.map($=>$.datum);T=s.length||k?gfn(b,k||[],s,I,g):mfn(b,o&&S)}const A=g?Ofn[c](b,T,o,u):Afn(b,T,h,d);return S.forEach(I=>I.opacity=+A(I)),S}function kfn(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Rfn(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Ifn[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function $fn(e){return e&&e.mark&&e.mark.marktype}function Nfn(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const SW=["x","y","opacity","align","baseline"],hUe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Yne(e){Ae.call(this,null,e)}Yne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:hUe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:SW.length,default:SW}]};ot(Yne,Ae,{transform(e,t){function n(s){const o=e[s];return An(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&$e("Size parameter should be specified as a [width, height] array.");const i=e.as||SW;return Pfn(t.materialize(t.SOURCE).source||[],e.size,e.sort,yt(e.offset==null?1:e.offset),yt(e.anchor||hUe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Dfn=Object.freeze(Object.defineProperty({__proto__:null,label:Yne},Symbol.toStringTag,{value:"Module"}));function pUe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Kne(e){Ae.call(this,null,e)}Kne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ot(Kne,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=pUe(r,e.groupby),s=(e.groupby||[]).map(Zi),o=s.length,a=e.as||[Zi(e.x),Zi(e.y)],u=[];i.forEach(l=>{CBe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Ar(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const TW={constant:ate,linear:ute,log:EBe,exp:xBe,pow:SBe,quad:lte,poly:TBe},Mfn=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Xne(e){Ae.call(this,null,e)}Xne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(TW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ot(Xne,Ae,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=pUe(r,e.groupby),s=(e.groupby||[]).map(Zi),o=e.method||"linear",a=e.order==null?3:e.order,u=Mfn(o,a),l=e.as||[Zi(e.x),Zi(e.y)],c=TW[o],f=[];let d=e.extent;Wt(TW,o)||$e("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Ar({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||$h(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Ar(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):jF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Lfn=Object.freeze(Object.defineProperty({__proto__:null,loess:Kne,regression:Xne},Symbol.toStringTag,{value:"Module"}));function Qne(e){Ae.call(this,null,e)}Qne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Ffn=[-1e5,-1e5,1e5,1e5];ot(Qne,Ae,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Ffn;const s=this.value=mX.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Bfn(u)?jfn(u):null}return t.reflow(e.modified()).modifies(n)}});function jfn(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Bfn(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const zfn=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Qne},Symbol.toStringTag,{value:"Module"}));var W7=Math.PI/180,m2=64,L$=2048;function Ufn(){var e=[256,256],t,n,r,i,s,o,a,u=mUe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(C0()),m=Yfn((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,b)=>b.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,Vfn(p,E,w,v),E.hasText&&h(m,E,g)&&(_.push(E),g?qfn(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(m2<<5)/m,p.height=L$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,b,T,A;(b=w(S+=E))&&(T=~~b[0],A=~~b[1],!(Math.min(Math.abs(T),Math.abs(A))>=_));)if(m.x=y+T,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Hfn(m,p,e[0]))&&(!g||Wfn(m,g))){for(var I=m.sprite,k=m.width>>5,$=e[0]>>5,P=m.x-(k<<4),N=P&127,F=32-N,z=m.y1-m.y0,W=(m.y+m.y0)*$+(P>>5),V,G=0;G<z;G++){V=0;for(var M=0;M<=k;M++)p[W+M]|=V<<F|(M<k?(V=I[G*k+M])>>>N:0);W+=$}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Xy(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Xy(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Xy(p),f):s},f.rotate=function(p){return arguments.length?(o=Xy(p),f):o},f.text=function(p){return arguments.length?(t=Xy(p),f):t},f.spiral=function(p){return arguments.length?(u=Kfn[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Xy(p),f):r},f.padding=function(p){return arguments.length?(a=Xy(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Vfn(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(m2<<5)/s,L$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*W7),g=Math.cos(t.rotate*W7),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=m2<<5&&(o=0,a+=u,u=0),a+d>=L$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*W7),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(m2<<5)/s,L$/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var b=0,T=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),I=E[(a+p)*(m2<<5)+(o+h)<<2]?1<<31-h%32:0;S[A]|=I,b|=I}b?T=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+T,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Hfn(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function qfn(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Wfn(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function mUe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Gfn(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Yfn(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Xy(e){return typeof e=="function"?e:function(){return e}}var Kfn={archimedean:mUe,rectangular:Gfn};const gUe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Xfn=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Jne(e){Ae.call(this,Ufn(),e)}Jne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:gUe}]};ot(Jne,Ae,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&$e("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return An(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Xfn.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||gUe;let a=e.fontSize||14,u;if(An(a)?u=e.fontSizeRange:a=Aa(a),u){const p=a,m=_r("sqrt")().domain($h(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Oc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Qfn=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Jne},Symbol.toStringTag,{value:"Module"})),Jfn=e=>new Uint8Array(e),Zfn=e=>new Uint16Array(e),pC=e=>new Uint32Array(e);function edn(){let e=8,t=[],n=pC(0),r=tR(0,e),i=tR(0,e);return{data:()=>t,seen:()=>n=tdn(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=tR(s,e,r),i=tR(s,e))}}}function tdn(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function tR(e,t,n){const r=(t<257?Jfn:t<65537?Zfn:pC)(e);return n&&r.set(n),r}function m_e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function g_e(){let e=pC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=pC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=ndn(h,d),c)p=t,m=e,t=Array(c+f),e=pC(c+f),rdn(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[nAt(u,a[0],0,l),L0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function ndn(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),sAt(e,t)}function rdn(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Zne(e){Ae.call(this,edn(),e),this._indices=null,this._dims=null}Zne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ot(Zne,Ae,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=g_e()),s.push(m_e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,E,S,b;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)b=r[E],(!o[E]||e.modified("fields",E)||t.modified(b.fields))&&(y=b.fname,(m=p[y])||(s[y]=g=g_e(),p[y]=m=g.insert(b,t.source,0)),o[E]=m_e(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)_[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function ere(e){Ae.call(this,null,e)}ere.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ot(ere,Ae,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const idn=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Zne,resolvefilter:ere},Symbol.toStringTag,{value:"Module"})),sdn="RawCode",G1="Literal",odn="Property",adn="Identifier",udn="ArrayExpression",ldn="BinaryExpression",yUe="CallExpression",cdn="ConditionalExpression",fdn="LogicalExpression",ddn="MemberExpression",hdn="ObjectExpression",pdn="UnaryExpression";function Zf(e){this.type=e}Zf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=mdn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function mdn(e){switch(e.type){case udn:return e.elements;case ldn:case fdn:return[e.left,e.right];case yUe:return[e.callee].concat(e.arguments);case cdn:return[e.test,e.consequent,e.alternate];case ddn:return[e.object,e.property];case hdn:return e.properties;case odn:return[e.key,e.value];case pdn:return[e.argument];case adn:case G1:case sdn:default:return[]}}var Kh,Dt,ke,ba,jr,r8=1,MO=2,Y1=3,ky=4,i8=5,k_=6,_u=7,LO=8,gdn=9;Kh={};Kh[r8]="Boolean";Kh[MO]="<end>";Kh[Y1]="Identifier";Kh[ky]="Keyword";Kh[i8]="Null";Kh[k_]="Numeric";Kh[_u]="Punctuator";Kh[LO]="String";Kh[gdn]="RegularExpression";var ydn="ArrayExpression",vdn="BinaryExpression",_dn="CallExpression",bdn="ConditionalExpression",vUe="Identifier",wdn="Literal",Edn="LogicalExpression",xdn="MemberExpression",Sdn="ObjectExpression",Tdn="Property",Cdn="UnaryExpression",oo="Unexpected token %0",Adn="Unexpected number",Idn="Unexpected string",Odn="Unexpected identifier",Pdn="Unexpected reserved word",kdn="Unexpected end of input",CW="Invalid regular expression",G7="Invalid regular expression: missing /",_Ue="Octal literals are not allowed in strict mode.",Rdn="Duplicate data property in object literal not allowed in strict mode",ko="ILLEGAL",GA="Disabled.",$dn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ndn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function s8(e,t){if(!e)throw new Error("ASSERT: "+t)}function Sp(e){return e>=48&&e<=57}function tre(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function mC(e){return"01234567".indexOf(e)>=0}function Ddn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function YA(e){return e===10||e===13||e===8232||e===8233}function FO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&$dn.test(String.fromCharCode(e))}function s6(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Ndn.test(String.fromCharCode(e))}const Mdn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function bUe(){for(;ke<ba;){const e=Dt.charCodeAt(ke);if(Ddn(e)||YA(e))++ke;else break}}function AW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ke<ba&&tre(Dt[ke])?(r=Dt[ke++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):gr({},oo,ko);return String.fromCharCode(i)}function Ldn(){var e,t,n,r;for(e=Dt[ke],t=0,e==="}"&&gr({},oo,ko);ke<ba&&(e=Dt[ke++],!!tre(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&gr({},oo,ko),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function wUe(){var e,t;for(e=Dt.charCodeAt(ke++),t=String.fromCharCode(e),e===92&&(Dt.charCodeAt(ke)!==117&&gr({},oo,ko),++ke,e=AW("u"),(!e||e==="\\"||!FO(e.charCodeAt(0)))&&gr({},oo,ko),t=e);ke<ba&&(e=Dt.charCodeAt(ke),!!s6(e));)++ke,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Dt.charCodeAt(ke)!==117&&gr({},oo,ko),++ke,e=AW("u"),(!e||e==="\\"||!s6(e.charCodeAt(0)))&&gr({},oo,ko),t+=e);return t}function Fdn(){var e,t;for(e=ke++;ke<ba;){if(t=Dt.charCodeAt(ke),t===92)return ke=e,wUe();if(s6(t))++ke;else break}return Dt.slice(e,ke)}function jdn(){var e,t,n;return e=ke,t=Dt.charCodeAt(ke)===92?wUe():Fdn(),t.length===1?n=Y1:Mdn.hasOwnProperty(t)?n=ky:t==="null"?n=i8:t==="true"||t==="false"?n=r8:n=Y1,{type:n,value:t,start:e,end:ke}}function Y7(){var e=ke,t=Dt.charCodeAt(ke),n,r=Dt[ke],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ke,{type:_u,value:String.fromCharCode(t),start:e,end:ke};default:if(n=Dt.charCodeAt(ke+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ke+=2,{type:_u,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ke};case 33:case 61:return ke+=2,Dt.charCodeAt(ke)===61&&++ke,{type:_u,value:Dt.slice(e,ke),start:e,end:ke}}}if(o=Dt.substr(ke,4),o===">>>=")return ke+=4,{type:_u,value:o,start:e,end:ke};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ke+=3,{type:_u,value:s,start:e,end:ke};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return ke+=2,{type:_u,value:i,start:e,end:ke};if(i==="//"&&gr({},oo,ko),"<>=!+-*%&|^/".indexOf(r)>=0)return++ke,{type:_u,value:r,start:e,end:ke};gr({},oo,ko)}function Bdn(e){let t="";for(;ke<ba&&tre(Dt[ke]);)t+=Dt[ke++];return t.length===0&&gr({},oo,ko),FO(Dt.charCodeAt(ke))&&gr({},oo,ko),{type:k_,value:parseInt("0x"+t,16),start:e,end:ke}}function zdn(e){let t="0"+Dt[ke++];for(;ke<ba&&mC(Dt[ke]);)t+=Dt[ke++];return(FO(Dt.charCodeAt(ke))||Sp(Dt.charCodeAt(ke)))&&gr({},oo,ko),{type:k_,value:parseInt(t,8),octal:!0,start:e,end:ke}}function y_e(){var e,t,n;if(n=Dt[ke],s8(Sp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ke,e="",n!=="."){if(e=Dt[ke++],n=Dt[ke],e==="0"){if(n==="x"||n==="X")return++ke,Bdn(t);if(mC(n))return zdn(t);n&&Sp(n.charCodeAt(0))&&gr({},oo,ko)}for(;Sp(Dt.charCodeAt(ke));)e+=Dt[ke++];n=Dt[ke]}if(n==="."){for(e+=Dt[ke++];Sp(Dt.charCodeAt(ke));)e+=Dt[ke++];n=Dt[ke]}if(n==="e"||n==="E")if(e+=Dt[ke++],n=Dt[ke],(n==="+"||n==="-")&&(e+=Dt[ke++]),Sp(Dt.charCodeAt(ke)))for(;Sp(Dt.charCodeAt(ke));)e+=Dt[ke++];else gr({},oo,ko);return FO(Dt.charCodeAt(ke))&&gr({},oo,ko),{type:k_,value:parseFloat(e),start:t,end:ke}}function Udn(){var e="",t,n,r,i,s=!1;for(t=Dt[ke],s8(t==="'"||t==='"',"String literal must starts with a quote"),n=ke,++ke;ke<ba;)if(r=Dt[ke++],r===t){t="";break}else if(r==="\\")if(r=Dt[ke++],!r||!YA(r.charCodeAt(0)))switch(r){case"u":case"x":Dt[ke]==="{"?(++ke,e+=Ldn()):e+=AW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:mC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ke<ba&&mC(Dt[ke])&&(s=!0,i=i*8+"01234567".indexOf(Dt[ke++]),"0123".indexOf(r)>=0&&ke<ba&&mC(Dt[ke])&&(i=i*8+"01234567".indexOf(Dt[ke++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Dt[ke]===`
`&&++ke;else{if(YA(r.charCodeAt(0)))break;e+=r}return t!==""&&gr({},oo,ko),{type:LO,value:e,octal:s,start:n,end:ke}}function Vdn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";gr({},CW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{gr({},CW)}try{return new RegExp(e,t)}catch{return null}}function Hdn(){var e,t,n,r,i;for(e=Dt[ke],s8(e==="/","Regular expression literal must start with a slash"),t=Dt[ke++],n=!1,r=!1;ke<ba;)if(e=Dt[ke++],t+=e,e==="\\")e=Dt[ke++],YA(e.charCodeAt(0))&&gr({},G7),t+=e;else if(YA(e.charCodeAt(0)))gr({},G7);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||gr({},G7),i=t.substr(1,t.length-2),{value:i,literal:t}}function qdn(){var e,t,n;for(t="",n="";ke<ba&&(e=Dt[ke],!!s6(e.charCodeAt(0)));)++ke,e==="\\"&&ke<ba?gr({},oo,ko):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gr({},CW,n),{value:n,literal:t}}function Wdn(){var e,t,n,r;return jr=null,bUe(),e=ke,t=Hdn(),n=qdn(),r=Vdn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ke}}function Gdn(e){return e.type===Y1||e.type===ky||e.type===r8||e.type===i8}function EUe(){if(bUe(),ke>=ba)return{type:MO,start:ke,end:ke};const e=Dt.charCodeAt(ke);return FO(e)?jdn():e===40||e===41||e===59?Y7():e===39||e===34?Udn():e===46?Sp(Dt.charCodeAt(ke+1))?y_e():Y7():Sp(e)?y_e():Y7()}function Au(){const e=jr;return ke=e.end,jr=EUe(),ke=e.end,e}function xUe(){const e=ke;jr=EUe(),ke=e}function Ydn(e){const t=new Zf(ydn);return t.elements=e,t}function v_e(e,t,n){const r=new Zf(e==="||"||e==="&&"?Edn:vdn);return r.operator=e,r.left=t,r.right=n,r}function Kdn(e,t){const n=new Zf(_dn);return n.callee=e,n.arguments=t,n}function Xdn(e,t,n){const r=new Zf(bdn);return r.test=e,r.consequent=t,r.alternate=n,r}function nre(e){const t=new Zf(vUe);return t.name=e,t}function g2(e){const t=new Zf(wdn);return t.value=e.value,t.raw=Dt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function __e(e,t,n){const r=new Zf(xdn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Qdn(e){const t=new Zf(Sdn);return t.properties=e,t}function b_e(e,t,n){const r=new Zf(Tdn);return r.key=t,r.value=n,r.kind=e,r}function Jdn(e,t){const n=new Zf(Cdn);return n.operator=e,n.argument=t,n.prefix=!0,n}function gr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(s8(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ke,n.description=i,n}function o8(e){e.type===MO&&gr(e,kdn),e.type===k_&&gr(e,Adn),e.type===LO&&gr(e,Idn),e.type===Y1&&gr(e,Odn),e.type===ky&&gr(e,Pdn),gr(e,oo,e.value)}function wa(e){const t=Au();(t.type!==_u||t.value!==e)&&o8(t)}function wi(e){return jr.type===_u&&jr.value===e}function K7(e){return jr.type===ky&&jr.value===e}function Zdn(){const e=[];for(ke=jr.start,wa("[");!wi("]");)wi(",")?(Au(),e.push(null)):(e.push(K1()),wi("]")||wa(","));return Au(),Ydn(e)}function w_e(){ke=jr.start;const e=Au();return e.type===LO||e.type===k_?(e.octal&&gr(e,_Ue),g2(e)):nre(e.value)}function ehn(){var e,t,n,r;if(ke=jr.start,e=jr,e.type===Y1)return n=w_e(),wa(":"),r=K1(),b_e("init",n,r);if(e.type===MO||e.type===_u)o8(e);else return t=w_e(),wa(":"),r=K1(),b_e("init",t,r)}function thn(){var e=[],t,n,r,i={},s=String;for(ke=jr.start,wa("{");!wi("}");)t=ehn(),t.key.type===vUe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?gr({},Rdn):i[r]=!0,e.push(t),wi("}")||wa(",");return wa("}"),Qdn(e)}function nhn(){wa("(");const e=rre();return wa(")"),e}const rhn={if:1};function ihn(){var e,t,n;if(wi("("))return nhn();if(wi("["))return Zdn();if(wi("{"))return thn();if(e=jr.type,ke=jr.start,e===Y1||rhn[jr.value])n=nre(Au().value);else if(e===LO||e===k_)jr.octal&&gr(jr,_Ue),n=g2(Au());else{if(e===ky)throw new Error(GA);e===r8?(t=Au(),t.value=t.value==="true",n=g2(t)):e===i8?(t=Au(),t.value=null,n=g2(t)):wi("/")||wi("/=")?(n=g2(Wdn()),xUe()):o8(Au())}return n}function shn(){const e=[];if(wa("("),!wi(")"))for(;ke<ba&&(e.push(K1()),!wi(")"));)wa(",");return wa(")"),e}function ohn(){ke=jr.start;const e=Au();return Gdn(e)||o8(e),nre(e.value)}function ahn(){return wa("."),ohn()}function uhn(){wa("[");const e=rre();return wa("]"),e}function lhn(){var e,t,n;for(e=ihn();;)if(wi("."))n=ahn(),e=__e(".",e,n);else if(wi("("))t=shn(),e=Kdn(e,t);else if(wi("["))n=uhn(),e=__e("[",e,n);else break;return e}function E_e(){const e=lhn();if(jr.type===_u&&(wi("++")||wi("--")))throw new Error(GA);return e}function F$(){var e,t;if(jr.type!==_u&&jr.type!==ky)t=E_e();else{if(wi("++")||wi("--"))throw new Error(GA);if(wi("+")||wi("-")||wi("~")||wi("!"))e=Au(),t=F$(),t=Jdn(e.value,t);else{if(K7("delete")||K7("void")||K7("typeof"))throw new Error(GA);t=E_e()}}return t}function x_e(e){let t=0;if(e.type!==_u&&e.type!==ky)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function chn(){var e,t,n,r,i,s,o,a,u,l;if(e=jr,u=F$(),r=jr,i=x_e(r),i===0)return u;for(r.prec=i,Au(),t=[e,jr],o=F$(),s=[u,r,o];(i=x_e(jr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=v_e(a,u,o),s.push(n);r=Au(),r.prec=i,s.push(r),t.push(jr),n=F$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=v_e(s[l-1].value,s[l-2],n),l-=2;return n}function K1(){var e,t,n;return e=chn(),wi("?")&&(Au(),t=K1(),wa(":"),n=K1(),e=Xdn(e,t,n)),e}function rre(){const e=K1();if(wi(","))throw new Error(GA);return e}function ire(e){Dt=e,ke=0,ba=Dt.length,jr=null,xUe();const t=rre();if(jr.type!==MO)throw new Error("Unexpect token after expression.");return t}var SUe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function TUe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&$e("Missing arguments to clamp function."),o.length>3&&$e("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&$e("Missing arguments to if function."),o.length>3&&$e("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function fhn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function CUe(e){e=e||{};const t=e.allowed?zf(e.allowed):{},n=e.forbidden?zf(e.forbidden):{},r=e.constants||SUe,i=(e.functions||TUe)(f),s=e.globalvar,o=e.fieldvar,a=An(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(vt(p))return p;const m=d[p.type];return m==null&&$e("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Wt(n,m)?$e("Illegal identifier: "+m):Wt(r,m)?r[m]:Wt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[fhn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&$e("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Wt(i,m)&&i[m];return y||$e("Unrecognized function: "+m),An(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const S_e=Symbol("vega_selection_getter");function AUe(e){return(!e.getter||!e.getter[S_e])&&(e.getter=Cc(e.field),e.getter[S_e]=!0),e.getter}const sre="intersect",T_e="union",dhn="vlMulti",hhn="vlPoint",C_e="or",phn="and",Od="_vgsid_",KA=Cc(Od),mhn="E",ghn="R",yhn="R-E",vhn="R-LE",_hn="R-RE",o6="index:unit";function A_e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=AUe(a)(e),S0(o)&&(o=ma(o)),S0(r[s])&&(r[s]=ma(r[s])),De(r[s])&&S0(r[s][0])&&(r[s]=r[s].map(ma)),a.type===mhn){if(De(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===ghn){if(!nw(o,r[s]))return!1}else if(a.type===_hn){if(!nw(o,r[s],!0,!1))return!1}else if(a.type===yhn){if(!nw(o,r[s],!1,!1))return!1}else if(a.type===vhn&&!nw(o,r[s],!1,!0))return!1;return!0}function bhn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[o6]&&r[o6].value:void 0,o=n===sre,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=A_e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=A_e(t,l),o^h)return h;return a&&o}const IUe=Cx(KA),whn=IUe.left,Ehn=IUe.right;function xhn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[o6]&&r[o6].value:void 0,o=n===sre,a=KA(t),u=whn(i,a);if(u===i.length||KA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Ehn(i,a)-u<s.size)return!1}return!0}function Shn(e,t){return e.map(n=>Cn(t.fields?{values:t.fields.map(r=>AUe(r)(n.datum))}:{[Od]:KA(n.datum)},t))}function Thn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,w=0,E,S;w<_;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=X7[`${y}_union`],m[d]=v(g,yt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(yt(f).reduce((b,T,A)=>(b[c[A].field]=T,b),{})))}else h=Od,p=KA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Od]:p}));if(t=t||T_e,o[Od]?o[Od]=X7[`${Od}_${t}`](...Object.values(o[Od])):Object.keys(o).forEach(b=>{o[b]=Object.keys(o[b]).map(T=>o[b][T]).reduce((T,A)=>T===void 0?A:X7[`${u[b]}_${t}`](T,A))}),s=Object.keys(a),n&&s.length){const b=r?hhn:dhn;o[b]=t===T_e?{[C_e]:s.reduce((T,A)=>(T.push(...a[A]),T),[])}:{[phn]:s.map(T=>({[C_e]:a[T]}))}}return o}var X7={[`${Od}_union`]:hAt,[`${Od}_intersect`]:fAt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ma(t[0]),r=ma(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ma(t[0]),r=ma(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Chn=":",Ahn="@";function ore(e,t,n,r){t[0].type!==G1&&$e("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&tr(t).value,o="unit",a=Ahn+o,u=Chn+i;s===sre&&!Wt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Wt(r,u)||(r[u]=n.getData(i).tuplesRef())}function OUe(e){const t=this.context.data[e];return t?t.values.value:[]}function Ihn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ohn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ac).insert(t)),1}function Phn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const jO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},khn=jO("format"),PUe=jO("timeFormat"),Rhn=jO("utcFormat"),$hn=jO("timeParse"),Nhn=jO("utcParse"),nR=new Date(2e3,0,1);function a8(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(nR.setYear(2e3),nR.setMonth(e),nR.setDate(t),PUe.call(this,nR,n))}function Dhn(e){return a8.call(this,e,1,"%B")}function Mhn(e){return a8.call(this,e,1,"%b")}function Lhn(e){return a8.call(this,0,2+e,"%A")}function Fhn(e){return a8.call(this,0,2+e,"%a")}const jhn=":",Bhn="@",IW="%",kUe="$";function are(e,t,n,r){t[0].type!==G1&&$e("First argument to data functions must be a string literal.");const i=t[0].value,s=jhn+i;if(!Wt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function zhn(e,t,n,r){t[0].type!==G1&&$e("First argument to indata must be a string literal."),t[1].type!==G1&&$e("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Bhn+s;Wt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ga(e,t,n,r){if(t[0].type===G1)I_e(n,r,t[0].value);else for(e in n.scales)I_e(n,r,e)}function I_e(e,t,n){const r=IW+n;if(!Wt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Xh(e,t){if(An(e))return e;if(vt(e)){const n=t.scales[e];return n&&hon(n.value)?n.value:void 0}}function Uhn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ga,n._range=Ga,n._scale=Ga;const r=i=>"_["+(i.type===G1?nt(IW+i.value):nt(IW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function ure(e,t){return function(n,r,i){if(n){const s=Xh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Vhn=ure("area",TRt),Hhn=ure("bounds",ORt),qhn=ure("centroid",DRt);function Whn(e,t){const n=Xh(e,(t||this).context);return n&&n.scale()}function Ghn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function lre(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Yhn(){return lre(this.context.dataflow,"warn",arguments)}function Khn(){return lre(this.context.dataflow,"info",arguments)}function Xhn(){return lre(this.context.dataflow,"debug",arguments)}function Q7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function OW(e){const t=j0(e),n=Q7(t.r),r=Q7(t.g),i=Q7(t.b);return .2126*n+.7152*r+.0722*i}function Qhn(e,t){const n=OW(e),r=OW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Jhn(){const e=[].slice.call(arguments);return e.unshift({}),Cn(...e)}function RUe(e,t){return e===t||e!==e&&t!==t?!0:De(e)?De(t)&&e.length===t.length?Zhn(e,t):!1:_t(e)&&_t(t)?$Ue(e,t):!1}function Zhn(e,t){for(let n=0,r=e.length;n<r;++n)if(!RUe(e[n],t[n]))return!1;return!0}function $Ue(e,t){for(const n in e)if(!RUe(e[n],t[n]))return!1;return!0}function O_e(e){return t=>$Ue(e,t)}function epn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ac:De(n)||kF(n)?n:O_e(n),c.remove(f)),t&&c.insert(t),r&&(f=O_e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function tpn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function npn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const P_e={};function rpn(e,t){const n=P_e[t]||(P_e[t]=Cc(t));return De(e)?e.map(n):n(e)}function cre(e){return De(e)||ArrayBuffer.isView(e)?e:null}function fre(e){return cre(e)||(vt(e)?e:null)}function ipn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return cre(e).join(...n)}function spn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fre(e).indexOf(...n)}function opn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fre(e).lastIndexOf(...n)}function apn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fre(e).slice(...n)}function upn(e,t,n){return An(n)&&$e("Function argument passed to replace."),String(e).replace(t,n)}function lpn(e){return cre(e).slice().reverse()}function cpn(e,t,n){return Dte(e||0,t||0,n||0)}function fpn(e,t){const n=Xh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function dpn(e,t){const n=Xh(e,(t||this).context);return n?n.copy():void 0}function hpn(e,t){const n=Xh(e,(t||this).context);return n?n.domain():[]}function ppn(e,t,n){const r=Xh(e,(n||this).context);return r?De(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function mpn(e,t){const n=Xh(e,(t||this).context);return n&&n.range?n.range():[]}function gpn(e,t,n){const r=Xh(e,(n||this).context);return r?r(t):void 0}function ypn(e,t,n,r,i){e=Xh(e,(i||this).context);const s=x7e(t,n);let o=e.domain(),a=o[0],u=tr(o),l=Ca;return u-a?l=f7e(e,a,u):e=(e.interpolator?_r("sequential")().interpolator(e.interpolator()):_r("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==tr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function vpn(e,t,n){const r=Xh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function _pn(e){let t=null;return function(n){return n?VA(n,t=t||HE(e)):e}}const NUe=e=>e.data;function DUe(e,t){const n=OUe.call(t,e);return n.root&&n.root.lookup||{}}function bpn(e,t,n){const r=DUe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(NUe):void 0}function wpn(e,t){const n=DUe(e,this)[t];return n?n.ancestors().map(NUe):void 0}const MUe=()=>typeof window<"u"&&window||null;function Epn(){const e=MUe();return e?e.screen:{}}function xpn(){const e=MUe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Spn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function LUe(e,t,n){if(!e)return[];const[r,i]=e,s=new Cs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return bze(o,s,Tpn(t))}function Tpn(e){let t=null;if(e){const n=yt(e.marktype),r=yt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Cpn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=yt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Apn(e){return yt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Ipn(e,t,n){const{x:r,y:i,mark:s}=n,o=new Cs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),LUe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Opn(u.x,u.y,t))}function Opn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const XA={random(){return Oc()},cumulativeNormal:MF,cumulativeLogNormal:tte,cumulativeUniform:ste,densityNormal:Xee,densityLogNormal:ete,densityUniform:ite,quantileNormal:LF,quantileLogNormal:nte,quantileUniform:ote,sampleNormal:DF,sampleLogNormal:Zee,sampleUniform:rte,isArray:De,isBoolean:Py,isDate:S0,isDefined(e){return e!==void 0},isNumber:dr,isObject:_t,isRegExp:w9e,isString:vt,isTuple:kF,isValid(e){return e!=null&&e===e},toBoolean:Nee,toDate(e){return Dee(e)},toNumber:ma,toString:Mee,indexof:spn,join:ipn,lastindexof:opn,replace:upn,reverse:lpn,slice:apn,flush:_9e,lerp:E9e,merge:Jhn,pad:T9e,peek:tr,pluck:rpn,span:_O,inrange:nw,truncate:C9e,rgb:j0,lab:L3,hcl:F3,hsl:JC,luminance:OW,contrast:Qhn,sequence:Ou,format:khn,utcFormat:Rhn,utcParse:Nhn,utcOffset:B9e,utcSequence:V9e,timeFormat:PUe,timeParse:$hn,timeOffset:j9e,timeSequence:U9e,timeUnitSpecifier:I9e,monthFormat:Dhn,monthAbbrevFormat:Mhn,dayFormat:Lhn,dayAbbrevFormat:Fhn,quarter:m9e,utcquarter:g9e,week:P9e,utcweek:$9e,dayofyear:O9e,utcdayofyear:R9e,warn:Yhn,info:Khn,debug:Xhn,extent(e){return $h(e)},inScope:Ghn,intersect:LUe,clampRange:y9e,pinchDistance:tpn,pinchAngle:npn,screen:Epn,containerSize:Spn,windowSize:xpn,bandspace:cpn,setdata:Ohn,pathShape:_pn,panLinear:f9e,panLog:d9e,panPow:h9e,panSymlog:p9e,zoomLinear:Iee,zoomLog:Oee,zoomPow:jL,zoomSymlog:Pee,encode:Phn,modify:epn,lassoAppend:Cpn,lassoPath:Apn,intersectLasso:Ipn},Ppn=["view","item","group","xy","x","y"],kpn="event.vega.",FUe="this.",dre={},jUe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(kUe+e)}]`,functions:Rpn,constants:SUe,visitors:dre},PW=CUe(jUe);function Rpn(e){const t=TUe(e);Ppn.forEach(n=>t[n]=kpn+n);for(const n in XA)t[n]=FUe+n;return Cn(t,Uhn(e,XA,dre)),t}function ms(e,t,n){return arguments.length===1?XA[e]:(XA[e]=t,n&&(dre[e]=n),PW&&(PW.functions[e]=FUe+e),this)}ms("bandwidth",fpn,Ga);ms("copy",dpn,Ga);ms("domain",hpn,Ga);ms("range",mpn,Ga);ms("invert",ppn,Ga);ms("scale",gpn,Ga);ms("gradient",ypn,Ga);ms("geoArea",Vhn,Ga);ms("geoBounds",Hhn,Ga);ms("geoCentroid",qhn,Ga);ms("geoShape",vpn,Ga);ms("geoScale",Whn,Ga);ms("indata",Ihn,zhn);ms("data",OUe,are);ms("treePath",bpn,are);ms("treeAncestors",wpn,are);ms("vlSelectionTest",bhn,ore);ms("vlSelectionIdTest",xhn,ore);ms("vlSelectionResolve",Thn,ore);ms("vlSelectionTuples",Shn);function Dh(e,t){const n={};let r;try{e=vt(e)?e:nt(e)+"",r=ire(e)}catch{$e("Expression parse error: "+e)}r.visit(s=>{if(s.type!==yUe)return;const o=s.callee.name,a=jUe.visitors[o];a&&a(o,s.arguments,t,n)});const i=PW(r);return i.globals.forEach(s=>{const o=kUe+s;!Wt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Cn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function $pn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Npn=zf(["rule"]),k_e=zf(["group","image","rect"]);function Dpn(e,t){let n="";return Npn[t]||(e.x2&&(e.x?(k_e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(k_e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function hre(e){return(e+"").toLowerCase()}function Mpn(e){return hre(e)==="operator"}function Lpn(e){return hre(e)==="collect"}function vT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Fpn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var jpn={operator:(e,t)=>vT(e,["_"],t.code),parameter:(e,t)=>vT(e,["datum","_"],t.code),event:(e,t)=>vT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return vT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Dpn(r,n),i+="return m;",vT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Fpn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Bpn(e){const t=this;Mpn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function zpn(e){const t=this;if(e.params){const n=t.get(e.id);n||$e("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Upn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=De(i)?i.map(s=>R_e(s,n,t)):R_e(i,n,t)}return t}function R_e(e,t,n){if(!e||!_t(e))return e;for(let r=0,i=$_e.length,s;r<i;++r)if(s=$_e[r],Wt(e,s.key))return s.parse(e,t,n);return e}var $_e=[{key:"$ref",parse:Vpn},{key:"$key",parse:qpn},{key:"$expr",parse:Hpn},{key:"$field",parse:Wpn},{key:"$encode",parse:Ypn},{key:"$compare",parse:Gpn},{key:"$context",parse:Kpn},{key:"$subflow",parse:Xpn},{key:"$tupleid",parse:Qpn}];function Vpn(e,t){return t.get(e.$ref)||$e("Operator not defined: "+e.$ref)}function Hpn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=el(t.parameterExpression(e.$expr),e.$fields))}function qpn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$ee(e.$key,e.$flat,t.expr.codegen))}function Wpn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Cc(e.$field,e.$name,t.expr.codegen))}function Gpn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=yt(e.$compare).map(i=>i&&i.$tupleid?Ht:i);return t.fn[n]||(t.fn[n]=kee(r,e.$order,t.expr.codegen))}function Ypn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=el(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Kpn(e,t){return t}function Xpn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Qpn(){return Ht}function Jpn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&$e("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Zpn(e){var t=this,n=_t(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||$e("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const emn={skip:!0};function tmn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function nmn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],emn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Ac).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function BUe(e,t,n,r){return new zUe(e,t,n,r)}function zUe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||jpn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function N_e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}zUe.prototype=N_e.prototype={fork(){const e=new N_e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Lpn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[hre(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:$pn,parseOperator:Bpn,parseOperatorParameters:zpn,parseParameters:Upn,parseStream:Jpn,parseUpdate:Zpn,getState:tmn,setState:nmn};function rmn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),UUe(t,e.description()))}function UUe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function imn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const J7="default";function smn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:J7,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?vt(i)?i:i.user:J7,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return vt(r)||(i=r.item,r=r.user),kW(e,r&&r!==J7?r:i||r),i},{cursor:t})}function kW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function a6(e,t){var n=e._runtime.data;return Wt(n,t)||$e("Unrecognized data set: "+t),n[t]}function omn(e,t){return arguments.length<2?a6(this,e).values.value:u8.call(this,e,O_().remove(Ac).insert(t))}function u8(e,t){lBe(t)||$e("Second argument to changes must be a changeset.");const n=a6(this,e);return n.modified=!0,this.pulse(n.input,t)}function amn(e,t){return u8.call(this,e,O_().insert(t))}function umn(e,t){return u8.call(this,e,O_().remove(t))}function VUe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function HUe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function l8(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function lmn(e){var t=l8(e),n=VUe(e),r=HUe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function cmn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=l8(e),o=t.changedTouches?t.changedTouches[0]:t,s=e8(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=fmn(e,n,s),t}function fmn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;vt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Aa(e),item:Aa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const D_e="view",dmn="timer",hmn="window",pmn={trap:!1};function mmn(e){const t=Cn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{De(r[s])&&(r[s]=zf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function qUe(e,t,n,r){e._eventListeners.push({type:n,sources:yt(t),handler:r})}function gmn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function rR(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||_t(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function ymn(e,t,n){var r=this,i=new NF(n),s=function(l,c){r.runAsync(null,()=>{e===D_e&&gmn(r,t)&&l.preventDefault(),i.receive(cmn(r,l,c))})},o;if(e===dmn)rR(r,"timer",t)&&r.timer(s,t);else if(e===D_e)rR(r,"view",t)&&r.addEventListener(t,s,pmn);else if(e===hmn?rR(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&rR(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);qUe(r,o,t,s)}return i}function M_e(e){return e.item}function L_e(e){return e.item.mark.source}function F_e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function vmn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",M_e),L_e,F_e(e)),this.on(this.events("view","pointerout",M_e),L_e,F_e(t)),this}function _mn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Il(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const bmn="vega-bind",wmn="vega-bind-name",Emn="vega-bind-radio";function xmn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Ree(r.debounce,i.update))),(r.input==null&&r.element?Smn:Cmn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Smn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),qUe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Tmn(i))}}function Tmn(e){return typeof Event<"u"?new Event(e):{type:e}}function Cmn(e,t,n,r){const i=r.signal(n.signal),s=Il("div",{class:bmn}),o=n.input==="radio"?s:s.appendChild(Il("label"));o.appendChild(Il("span",{class:wmn},n.name||n.signal)),t.appendChild(s);let a=Amn;switch(n.input){case"checkbox":a=Imn;break;case"select":a=Omn;break;case"radio":a=Pmn;break;case"range":a=kmn;break}a(e,o,n,i)}function Amn(e,t,n,r){const i=Il("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Imn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Il("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Omn(e,t,n,r){const i=Il("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};u6(o,r)&&(u.selected=!0),i.appendChild(Il("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(u6(n.options[a],o)){i.selectedIndex=a;return}}}function Pmn(e,t,n,r){const i=Il("span",{class:Emn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};u6(o,r)&&(u.checked=!0);const l=Il("input",u);l.addEventListener("change",()=>e.update(o));const c=Il("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)u6(a[l].value,o)&&(a[l].checked=!0)}}function kmn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||F0(s,i,100),a=Il("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Il("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function u6(e,t){return e===t||e+""==t+""}function WUe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,VUe(e),HUe(e),l8(e),i,s).background(e.background())}function pre(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Rmn(e,t,n,r){const i=new r(e.loader(),pre(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,l8(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function $mn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=t8(r);e=n._el=e?Z7(n,e,!0):null,rmn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||DO,a=e?s.renderer:s.headless;return n._renderer=a?WUe(n,n._renderer,e,a):null,n._handler=Rmn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Z7(n,t,!0):e.appendChild(Il("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=Z7(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{xmn(n,u.element||t,u)})),n}function Z7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const _T=e=>+e||0,Nmn=e=>({top:e,bottom:e,left:e,right:e});function j_e(e){return _t(e)?{top:_T(e.top),bottom:_T(e.bottom),left:_T(e.left),right:_T(e.right)}:Nmn(_T(e))}async function mre(e,t,n,r){const i=t8(t),s=i&&i.headless;return s||$e("Unrecognized renderer type: "+t),await e.runAsync(),WUe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Dmn(e,t){e!==Zg.Canvas&&e!==Zg.SVG&&e!==Zg.PNG&&$e("Unrecognized image type: "+e);const n=await mre(this,e,t);return e===Zg.SVG?Mmn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Mmn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Lmn(e,t){return(await mre(this,Zg.Canvas,e,t)).canvas()}async function Fmn(e){return(await mre(this,Zg.SVG,e)).svg()}function jmn(e,t,n){return BUe(e,BE,XA,n).parse(t)}function Bmn(e){var t=this._runtime.scales;return Wt(t,e)||$e("Unrecognized scale or projection: "+e),t[e].value}var GUe="width",YUe="height",gre="padding",B_e={skip:!0};function KUe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===gre?r.left+r.right:0)}function XUe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===gre?r.top+r.bottom:0)}function zmn(e){var t=e._signals,n=t[GUe],r=t[YUe],i=t[gre];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=KUe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=XUe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Umn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(GUe,n,B_e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(YUe,r,B_e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Vmn(e){return this._runtime.getState(e||{data:Hmn,signals:qmn,recurse:!0})}function Hmn(e,t){return t.modified&&De(t.input.value)&&!e.startsWith("_:vega:_")}function qmn(e,t){return!(e==="parent"||t instanceof BE.proxy)}function Wmn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Gmn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(jOt(n,t))}function Ymn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Kmn(r))}function Kmn(e){return e==null?"":De(e)?QUe(e):_t(e)&&!S0(e)?Xmn(e):e+""}function Xmn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(De(n)?QUe(n):JUe(n))}).join(`
`)}function QUe(e){return"["+e.map(JUe).join(", ")+"]"}function JUe(e){return De(e)?"[]":_t(e)&&!S0(e)?"{}":e}function Qmn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function ZUe(e,t){const n=this;if(t=t||{},Fw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Cn({},e.locale,t.locale);n.locale(Z9e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Zg.Canvas,n._scenegraph=new G7e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Ymn,n._redraw=!0,n._handler=new DO().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=mmn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=jmn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Cn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=KUe(n,n._width),n._viewHeight=XUe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,zmn(n),imn(n),smn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function iR(e,t){return Wt(e._signals,t)?e._signals[t]:$e("Unrecognized signal name: "+nt(t))}function eVe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function z_e(e,t,n,r){let i=eVe(n,r);return i||(i=pre(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function U_e(e,t,n){const r=eVe(t,n);return r&&t._targets.remove(r),e}ot(ZUe,Fw,{async evaluate(e,t,n){if(await Fw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,lmn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&T$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&UUe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=iR(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",j_e(e)):j_e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(t8(e)||$e("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Fw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(iR(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Umn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=pre(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return z_e(this,e,iR(this,e),t)},removeSignalListener(e,t){return U_e(this,iR(this,e),t)},addDataListener(e,t){return z_e(this,e,a6(this,e).values,t)},removeDataListener(e,t){return U_e(this,a6(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=kW(this,null);this._globalCursor=!!e,t&&kW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Gmn,events:ymn,finalize:_mn,hover:vmn,data:omn,change:u8,insert:amn,remove:umn,scale:Bmn,initialize:$mn,toImageURL:Dmn,toCanvas:Lmn,toSVG:Fmn,getState:Vmn,setState:Wmn,_watchPixelRatio:Qmn});const Jmn="view",l6="[",c6="]",tVe="{",nVe="}",Zmn=":",rVe=",",egn="@",tgn=">",ngn=/[[\]{}]/,rgn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let iVe,sVe;function Ry(e,t,n){return iVe=t||Jmn,sVe=n||rgn,oVe(e.trim()).map(RW)}function ign(e){return sVe[e]}function gC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function oVe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=gC(e,i,rVe,l6+tVe,c6+nVe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function RW(e){return e[0]==="["?sgn(e):ogn(e)}function sgn(e){const t=e.length;let n=1,r;if(n=gC(e,n,c6,l6,c6),n===t)throw"Empty between selector: "+e;if(r=oVe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==tgn)throw"Expected '>' after between selector: "+e;r=r.map(RW);const i=RW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function ogn(e){const t={source:iVe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===nVe){if(a=e.lastIndexOf(tVe),a>=0){try{r=agn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===egn&&(i=++a),u=gC(e,a,Zmn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=gC(e,a,l6),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=gC(e,a,c6),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==l6)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||ngn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):ign(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function agn(e){const t=e.split(rVe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function ugn(e){return _t(e)?e:{type:e||"pad"}}const bT=e=>+e||0,lgn=e=>({top:e,bottom:e,left:e,right:e});function cgn(e){return _t(e)?e.signal?e:{top:bT(e.top),bottom:bT(e.bottom),left:bT(e.left),right:bT(e.right)}:lgn(bT(e))}const ao=e=>_t(e)&&!De(e)?Cn({},e):{value:e};function V_e(e,t,n,r){return n!=null?(_t(n)&&!De(n)||De(n)&&n.length&&_t(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Bo(e,t,n){for(const r in t)V_e(e,r,t[r]);for(const r in n)V_e(e,r,n[r],"update")}function cS(e,t,n){for(const r in t)n&&Wt(n,r)||(e[r]=Cn(e[r]||{},t[r]));return e}function kb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const yre="mark",vre="frame",_re="scope",fgn="axis",dgn="axis-domain",hgn="axis-grid",pgn="axis-label",mgn="axis-tick",ggn="axis-title",ygn="legend",vgn="legend-band",_gn="legend-entry",bgn="legend-gradient",aVe="legend-label",wgn="legend-symbol",Egn="legend-title",xgn="title",Sgn="title-text",Tgn="title-subtitle";function Cgn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!kb(u,e)&&ez(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===vre?i.group:n===yre?Cn({},i.mark,i[t]):null;for(u in c)l=kb(u,e)||(u==="fill"||u==="stroke")&&(kb("fill",e)||kb("stroke",e)),l||ez(s,u,c[u]);yt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)kb(h,e)||ez(s,h,d[h])}),e=Cn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Cn(o,e.enter),a&&(e.update=Cn(a,e.update)),e}function ez(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const uVe=e=>vt(e)?nt(e):e.signal?`(${e.signal})`:lVe(e);function c8(e){if(e.gradient!=null)return Ign(e);let t=e.signal?`(${e.signal})`:e.color?Agn(e.color):e.field!=null?lVe(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=Ogn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${j$(e.exponent)})`),e.mult!=null&&(t+=`*${j$(e.mult)}`),e.offset!=null&&(t+=`+${j$(e.offset)}`),e.round&&(t=`round(${t})`),t}const sR=(e,t,n,r)=>`(${e}(${[t,n,r].map(c8).join(",")})+'')`;function Agn(e){return e.c?sR("hcl",e.h,e.c,e.l):e.h||e.s?sR("hsl",e.h,e.s,e.l):e.l||e.a?sR("lab",e.l,e.a,e.b):e.r||e.g||e.b?sR("rgb",e.r,e.g,e.b):null}function Ign(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&tr(t)==null;)t.pop();return t.unshift(uVe(e.gradient)),`gradient(${t.join(",")})`}function j$(e){return _t(e)?"("+c8(e)+")":e}function lVe(e){return cVe(_t(e)?e:{datum:e})}function cVe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):$e("Invalid field reference: "+nt(e));return e.signal||(r=vt(r)?Gh(r).map(nt).join("]["):cVe(r)),t+"["+r+"]"}function Ogn(e,t){const n=uVe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+j$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Pgn(e){let t="";return e.forEach(n=>{const r=c8(n);t+=n.test?`(${n.test})?${r}:`:r}),tr(t)===":"&&(t+="null"),t}function fVe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Cgn(e,t,n,r,i.config);for(const a in e)o[a]=kgn(e[a],t,s,i);return s}function kgn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=$gn(Rgn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Rgn(e){return De(e)?Pgn(e):c8(e)}function $gn(e,t,n,r){const i=Dh(e,t);return i.$fields.forEach(s=>r[s]=1),Cn(n,i.$params),i.$expr}const Ngn="outer",Dgn=["value","update","init","react","bind"];function H_e(e,t){$e(e+' for "outer" push: '+nt(t))}function dVe(e,t){const n=e.name;if(e.push===Ngn)t.signals[n]||H_e("No prior signal definition",n),Dgn.forEach(r=>{e[r]!==void 0&&H_e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function $W(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function f8(e,t,n,r){return new $W(e,t,n,r)}function f6(e,t){return f8("operator",e,t)}function Vt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function QA(e,t){return t?{$field:e,$name:t}:{$field:e}}const NW=QA("key");function q_e(e,t){return{$compare:e,$order:t}}function Mgn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Lgn="ascending",Fgn="descending";function jgn(e){return _t(e)?(e.order===Fgn?"-":"+")+d8(e.op,e.field):""}function d8(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const bre="scope",DW="view";function Vs(e){return e&&e.signal}function Bgn(e){return e&&e.expr}function B$(e){if(Vs(e))return!0;if(_t(e)){for(const t in e)if(B$(e[t]))return!0}return!1}function af(e,t){return e??t}function p1(e){return e&&e.signal||e}const W_e="timer";function JA(e,t){return(e.merge?Ugn:e.stream?Vgn:e.type?Hgn:$e("Invalid stream specification: "+nt(e)))(e,t)}function zgn(e){return e===bre?DW:e||DW}function Ugn(e,t){const n=e.merge.map(i=>JA(i,t)),r=wre({merge:n},e,t);return t.addStream(r).id}function Vgn(e,t){const n=JA(e.stream,t),r=wre({stream:n},e,t);return t.addStream(r).id}function Hgn(e,t){let n;e.type===W_e?(n=t.event(W_e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(zgn(e.source),e.type);const r=wre({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function wre(e,t,n){let r=t.between;return r&&(r.length!==2&&$e('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[JA(r[0],n),JA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(qgn(t.marktype,t.markname,t.markrole)),t.source===bre&&r.push("inScope(event.item)"),r.length&&(e.filter=Dh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function qgn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Wgn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Ggn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||$e("Signal update missing events specification."),vt(s)&&(s=Ry(s,t.isSubscope()?bre:DW)),s=yt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Kgn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&$e("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=vt(o)?Dh(o,t):o.expr!=null?Dh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Wgn,$params:{$value:t.signalRef(o.signal)}}:$e("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Cn(Ygn(u,t),i)))}function Ygn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):JA(e,t)}}function Kgn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Xgn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?$e("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Dh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Ggn(i,t,n.id))}const Jr=e=>(t,n,r)=>f8(e,n,t||void 0,r),hVe=Jr("aggregate"),Qgn=Jr("axisticks"),pVe=Jr("bound"),ed=Jr("collect"),G_e=Jr("compare"),Jgn=Jr("datajoin"),mVe=Jr("encode"),Zgn=Jr("expression"),e0n=Jr("facet"),t0n=Jr("field"),n0n=Jr("key"),r0n=Jr("legendentries"),i0n=Jr("load"),s0n=Jr("mark"),o0n=Jr("multiextent"),a0n=Jr("multivalues"),u0n=Jr("overlap"),l0n=Jr("params"),gVe=Jr("prefacet"),c0n=Jr("projection"),f0n=Jr("proxy"),d0n=Jr("relay"),yVe=Jr("render"),h0n=Jr("scale"),R_=Jr("sieve"),p0n=Jr("sortitems"),vVe=Jr("viewlayout"),m0n=Jr("values");let g0n=0;const _Ve={min:"min",max:"max",count:"sum"};function y0n(e,t){const n=e.type||"linear";s7e(n)||$e("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function v0n(e,t){const n=t.getScale(e.name).params;let r;n.domain=bVe(e.domain,e,t),e.range!=null&&(n.range=EVe(e,t,n)),e.interpolate!=null&&I0n(e.interpolate,n),e.nice!=null&&(n.nice=A0n(e.nice,t)),e.bins!=null&&(n.bins=C0n(e.bins,t));for(r in e)Wt(n,r)||r==="name"||(n[r]=pc(e[r],t))}function pc(e,t){return _t(e)?e.signal?t.signalRef(e.signal):$e("Unsupported object: "+nt(e)):e}function z$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>pc(n,t))}function h8(e){$e("Can not find data set: "+nt(e))}function bVe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&$e("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(De(e)?_0n:e.fields?w0n:b0n)(e,t,n)}function _0n(e,t,n){return e.map(r=>pc(r,n))}function b0n(e,t,n){const r=n.getData(e.data);return r||h8(e.data),VE(t.type)?r.valuesRef(n,e.field,wVe(e.sort,!1)):u7e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function w0n(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=vt(o)?{data:r,field:o}:De(o)||o.signal?E0n(o,n):o,s.push(o),s),[]);return(VE(t.type)?x0n:u7e(t.type)?S0n:T0n)(e,n,i)}function E0n(e,t){const n="_:vega:_"+g0n++,r=ed({});if(De(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,R_({})]),{data:n,field:"data"}}function x0n(e,t,n){const r=wVe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||h8(l.data),c.countsRef(t,l.field,r)}),a={groupby:NW,pulse:o};r&&(i=r.op||"count",s=r.field?d8(i,r.field):"count",a.ops=[_Ve[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(hVe(a));const u=t.add(ed({pulse:Vt(i)}));return s=t.add(m0n({field:NW,sort:t.sortRef(r),pulse:Vt(u)})),Vt(s)}function wVe(e,t){return e&&(!e.field&&!e.op?_t(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?$e("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!_Ve[e.op]&&$e("Multiple domain scales can not be sorted using "+e.op)),e}function S0n(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||h8(i.data),s.domainRef(t,i.field)});return Vt(t.add(a0n({values:r})))}function T0n(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||h8(i.data),s.extentRef(t,i.field)});return Vt(t.add(o0n({extents:r})))}function C0n(e,t){return e.signal||De(e)?z$(e,t):t.objectProperty(e)}function A0n(e,t){return e.signal?t.signalRef(e.signal):_t(e)?{interval:pc(e.interval),step:pc(e.step)}:pc(e)}function I0n(e,t){t.interpolate=pc(e.type||e),e.gamma!=null&&(t.interpolateGamma=pc(e.gamma))}function EVe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(vt(i)){if(r&&Wt(r,i))return e=Cn({},e,{range:r[i]}),EVe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=VE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:$e("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=De(i.scheme)?z$(i.scheme,t):pc(i.scheme,t),i.extent&&(n.schemeExtent=z$(i.extent,t)),i.count&&(n.schemeCount=pc(i.count,t));return}else if(i.step){n.rangeStep=pc(i.step,t);return}else{if(VE(e.type)&&!De(i))return bVe(i,e,t);De(i)||$e("Unsupported range type: "+nt(i))}return i.map(s=>(De(s)?z$:pc)(s,t))}function O0n(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=MW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=MW(n[i],i,t));t.addProjection(e.name,r)}function MW(e,t,n){return De(e)?e.map(r=>MW(r,t,n)):_t(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:$e("Unsupported parameter object: "+nt(e)):e}const td="top",fS="left",dS="right",uy="bottom",xVe="center",P0n="vertical",k0n="start",R0n="middle",$0n="end",LW="index",Ere="label",N0n="offset",YE="perc",D0n="perc2",_c="value",BO="guide-label",xre="guide-title",M0n="group-title",L0n="group-subtitle",Y_e="symbol",U$="gradient",FW="discrete",jW="size",F0n="shape",j0n="fill",B0n="stroke",z0n="strokeWidth",U0n="strokeDash",V0n="opacity",Sre=[jW,F0n,j0n,B0n,z0n,U0n,V0n],zO={name:1,style:1,interactive:1},or={value:0},bc={value:1},p8="group",SVe="rect",Tre="rule",H0n="symbol",$_="text";function ZA(e){return e.type=p8,e.interactive=e.interactive||!1,e}function tl(e,t){const n=(r,i)=>af(e[r],af(t[r],i));return n.isVertical=r=>P0n===af(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>af(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>af(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>af(e.columns,af(t.columns,+n.isVertical(!0))),n}function TVe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function q0n(e,t,n){const r=t.config.style[n];return r&&r[e]}function m8(e,t,n){return`item.anchor === '${k0n}' ? ${e} : item.anchor === '${$0n}' ? ${t} : ${n}`}const Cre=m8(nt(fS),nt(dS),nt(xVe));function W0n(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},_t(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function CVe(e,t){return t?e?_t(e)?Object.assign({},e,{offset:CVe(e.offset,t)}):{value:e,offset:t}:t:e}function jl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=cS(e.encode,t,zO)):e.interactive=!1,e}function G0n(e,t,n,r){const i=tl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:or,x:or,y:or,width:ao(f),height:ao(d)},update:Cn({},u,{opacity:bc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:or}};return Bo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),jl({type:SVe,role:bgn,encode:h},r)}function Y0n(e,t,n,r,i){const s=tl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:or,fill:{scale:t,field:_c}};p[l]={signal:h+"datum."+YE,mult:u},p[c]=or,p[f]={signal:h+"datum."+D0n,mult:u},p[d]=ao(a);const m={enter:p,update:Cn({},p,{opacity:bc}),exit:{opacity:or}};return Bo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),jl({type:SVe,role:vgn,key:_c,from:i,encode:m},r)}const K0n=`datum.${YE}<=0?"${fS}":datum.${YE}>=1?"${dS}":"${xVe}"`,X0n=`datum.${YE}<=0?"${uy}":datum.${YE}>=1?"${td}":"${R0n}"`;function K_e(e,t,n,r){const i=tl(e,t),s=i.isVertical(),o=ao(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:or},update:c={opacity:bc,text:{field:Ere}},exit:{opacity:or}};return Bo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:af(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:X0n},f="y",d="x",h="1-"):(l.align=c.align={signal:K0n},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+YE,mult:a},l[d]=c[d]=o,o.offset=af(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+LW}:void 0,jl({type:$_,role:aVe,style:BO,key:_c,from:r,encode:p,overlap:u},n)}function Q0n(e,t,n,r,i){const s=tl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${N0n} : datum.${jW}`,h=l?ao(l):{field:jW},p=`datum.${LW}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:or,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:bc,x:y.x,y:y.y},exit:{opacity:or}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Bo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Sre.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:_c})});const b=jl({type:H0n,role:wgn,key:_c,from:f,clip:l?!0:void 0,encode:g},n.symbols),T=ao(c);T.offset=s("labelOffset"),g={enter:y={opacity:or,x:{signal:d,offset:T},y:h},update:v={opacity:bc,text:{field:Ere},x:y.x,y:y.y},exit:{opacity:or}},Bo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=jl({type:$_,role:aVe,style:BO,key:_c,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:or,height:l?ao(l):or,opacity:or},exit:{opacity:or},update:v={opacity:bc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:LW}},ZA({role:_re,from:r,encode:cS(g,o,zO),marks:[b,A],name:u,interactive:a,sort:w})}function J0n(e,t){const n=tl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Are='item.orient === "left"',Ire='item.orient === "right"',g8=`(${Are} || ${Ire})`,Z0n=`datum.vgrad && ${g8}`,eyn=m8('"top"','"bottom"','"middle"'),tyn=m8('"right"','"left"','"center"'),nyn=`datum.vgrad && ${Ire} ? (${tyn}) : (${g8} && !(datum.vgrad && ${Are})) ? "left" : ${Cre}`,ryn=`item._anchor || (${g8} ? "middle" : "start")`,iyn=`${Z0n} ? (${Are} ? -90 : 90) : 0`,syn=`${g8} ? (datum.vgrad ? (${Ire} ? "bottom" : "top") : ${eyn}) : "top"`;function oyn(e,t,n,r){const i=tl(e,t),s={enter:{opacity:or},update:{opacity:bc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:or}};return Bo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:ryn},angle:{signal:iyn},align:{signal:nyn},baseline:{signal:syn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),jl({type:$_,role:Egn,style:xre,from:r,encode:s},n)}function ayn(e,t){let n;return _t(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+X_e(e.path)+")":e.sphere&&(n="geoShape("+X_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function X_e(e){return _t(e)&&e.signal?e.signal:nt(e)}function AVe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===p8?_re:t||yre}function uyn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||AVe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function lyn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Ore(e,t){const n=dBe(e.type);n||$e("Unrecognized transform type: "+nt(e.type));const r=f8(n.type.toLowerCase(),null,IVe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function IVe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=cyn(o,t,n)}return r}function cyn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return fyn(e,t,n);if(i===void 0){e.required&&$e("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return dyn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vs(i)?i.map(s=>Q_e(e,s,n)):Q_e(e,i,n)}function Q_e(e,t,n){const r=e.type;if(Vs(t))return Z_e(r)?$e("Expression references can not be signals."):tz(r)?n.fieldRef(t):ebe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||tz(r);return i&&hyn(t)?n.exprRef(t.expr,t.as):i&&pyn(t)?QA(t.field,t.as):Z_e(r)?Dh(t,n):myn(r)?Vt(n.getData(t).values):tz(r)?QA(t):ebe(r)?n.compareRef(t):t}}function fyn(e,t,n){return vt(t.from)||$e('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function dyn(e,t,n){const r=t[e.name];return e.array?(De(r)||$e("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>J_e(e,i,n))):J_e(e,r,n)}function J_e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||$e("Unsupported parameter: "+nt(t));const s=Cn(IVe(i,t,n),i.key);return Vt(n.add(l0n(s)))}const hyn=e=>e&&e.expr,pyn=e=>e&&e.field,myn=e=>e==="data",Z_e=e=>e==="expr",tz=e=>e==="field",ebe=e=>e==="compare";function gyn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||$e("Only group marks can be faceted."),r.field!=null?o=a=V$(r,n):(e.data?a=Vt(n.getData(e.data).aggregate):(s=Ore(Cn({type:"aggregate",groupby:yt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=V$(r,n),o=a=Vt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Vt(n.add(ed(null,[{}]))),o||(o=V$(e,n)),{key:i,pulse:o,parent:a}}function V$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Vt(t.getData(e.data).output)}function X1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}X1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Vt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new X1(e,s,i,r,o)};function OVe(e){return vt(e)?e:null}function tbe(e,t,n){const r=d8(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function wT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=jgn(s);let l=OVe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:NW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Vt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(f8(r,void 0,d)),o&&(t.index[i]=f),c=Vt(f),l!=null&&(a[l]=c)}return c}X1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=OVe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&tbe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Vt(r.output)},n&&n.field&&tbe(e,u,n),a=e.add(hVe(u)),o=e.add(ed({pulse:Vt(a)})),o={agg:a,ref:Vt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Vt(this.values)},extentRef(e,t){return wT(e,this,"extent","extent",t,!1)},domainRef(e,t){return wT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return wT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return wT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return wT(e,this,"indata","tupleindex",t,!0,!0)}};function yyn(e,t,n){const r=e.from.facet,i=r.name,s=V$(r,t);let o;r.name||$e("Facet must have a name: "+nt(r)),r.data||$e("Facet must reference a data set: "+nt(r)),r.field?o=t.add(gVe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(e0n({key:t.keyRef(r.groupby),group:Vt(t.proxy(n.parent)),pulse:s})):$e("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(ed()),l=a.add(R_({pulse:Vt(u)}));a.addData(i,new X1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function vyn(e,t,n){const r=t.add(gVe({pulse:n.pulse})),i=t.fork();i.add(R_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function PVe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(f6()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Dh(l,t);u.update=c.$expr,u.params=c.$params}function y8(e,t){const n=AVe(e),r=e.type===p8,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===_re||n===vre,a,u,l,c,f,d,h;const p=n===yre||o||i,m=gyn(e.from,r,t);u=t.add(Jgn({key:m.key||(e.key?QA(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Vt(u);u=l=t.add(ed({pulse:g})),u=t.add(s0n({markdef:uyn(e),interactive:lyn(e.interactive,t),clip:ayn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Vt(u)}));const y=Vt(u);u=c=t.add(mVe(fVe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const b=Ore(S,t),T=b.metadata;(T.generates||T.changes)&&$e("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),b.params.pulse=Vt(u),t.add(u=b)}),e.sort&&(u=t.add(p0n({sort:t.compareRef(e.sort),pulse:Vt(u)})));const v=Vt(u);(i||o)&&(o=t.add(vVe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Vt(o));const _=t.add(pVe({mark:y,pulse:d||v}));h=Vt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?yyn(e,t,m):p?vyn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=_yn(s,h,t));const w=t.add(yVe({pulse:h})),E=t.add(R_({pulse:Vt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new X1(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&$e("Marks only support modify triggers."),PVe(S,t,f)}))}function _yn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vs(s)?n.signalRef(s.signal):s,method:Vs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Vt(n.add(u0n(o)))}function byn(e,t){const n=t.config.legend,r=e.encode||{},i=tl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Sre.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||$e("Missing valid scale for legend.");const p=wyn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Vt(t.add(ed(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Vt(t.add(r0n(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===U$?(h=[G0n(e,c,n,r.gradient),K_e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${p1(i.gradientLength())})/100))`)):p===FW?h=[Y0n(e,c,n,r.gradient,v),K_e(e,n,r.labels,v)]:(f=J0n(e,n),h=[Q0n(e,n,r,v,p1(f.columns))],d.size=Syn(e,t,h[0].marks)),h=[ZA({role:_gn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(oyn(e,n,r.title,g)),y8(ZA({role:ygn,from:g,encode:cS(xyn(i,e,n),s,zO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function wyn(e,t){let n=e.type||Y_e;return!e.type&&Eyn(e)===1&&(e.fill||e.stroke)&&(n=Bte(t)?U$:Zq(t)?FW:Y_e),n!==U$?n:Zq(t)?FW:U$}function Eyn(e){return Sre.reduce((t,n)=>t+(e[n]?1:0),0)}function xyn(e,t,n){const r={enter:{},update:{}};return Bo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Syn(e,t,n){const r=p1(nbe("size",e,n)),i=p1(nbe("strokeWidth",e,n)),s=p1(Tyn(n[1].encode,t,BO));return Dh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function nbe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:TVe(e,n[0].encode)}function Tyn(e,t,n){return TVe("fontSize",e)||q0n("fontSize",t,n)}const Cyn=`item.orient==="${fS}"?-90:item.orient==="${dS}"?90:0`;function Ayn(e,t){e=vt(e)?{text:e}:e;const n=tl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Vt(t.add(ed(null,[l])));return u.push(Pyn(e,n,Iyn(e),c)),e.subtitle&&u.push(kyn(e,n,r.subtitle,c)),y8(ZA({role:xgn,from:c,encode:Oyn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Iyn(e){const t=e.encode;return t&&t.title||Cn({name:e.name,interactive:e.interactive,style:e.style},t)}function Oyn(e,t){const n={enter:{},update:{}};return Bo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Cre},angle:{signal:Cyn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),cS(n,t,zO)}function Pyn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Bo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:$_,role:Sgn,style:M0n,from:r,encode:o},n)}function kyn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Bo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:$_,role:Tgn,style:L0n,from:r,encode:o},n)}function Ryn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Ore(r,t))}),e.on&&e.on.forEach(r=>{PVe(r,t,e.name)}),t.addDataPipeline(e.name,$yn(e,t,n))}function $yn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vs(e.values)||B$(e.format)?(r.push(rbe(t,e)),r.push(i=Qy())):r.push(i=Qy({$ingest:e.values,$format:e.format})):e.url?B$(e.url)||B$(e.format)?(r.push(rbe(t,e)),r.push(i=Qy())):r.push(i=Qy({$request:e.url,$format:e.format})):e.source&&(i=a=yt(e.source).map(d=>Vt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Qy()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=d0n({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Qy())),i||r.push(Qy()),r.push(R_({})),r}function Qy(e){const t=ed({},e);return t.metadata={source:!0},t}function rbe(e,t){return i0n({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const kVe=e=>e===uy||e===td,v8=(e,t,n)=>Vs(e)?Lyn(e.signal,t,n):e===fS||e===td?t:n,uo=(e,t,n)=>Vs(e)?Dyn(e.signal,t,n):kVe(e)?t:n,Rf=(e,t,n)=>Vs(e)?Myn(e.signal,t,n):kVe(e)?n:t,RVe=(e,t,n)=>Vs(e)?Fyn(e.signal,t,n):e===td?{value:t}:{value:n},Nyn=(e,t,n)=>Vs(e)?jyn(e.signal,t,n):e===dS?{value:t}:{value:n},Dyn=(e,t,n)=>$Ve(`${e} === '${td}' || ${e} === '${uy}'`,t,n),Myn=(e,t,n)=>$Ve(`${e} !== '${td}' && ${e} !== '${uy}'`,t,n),Lyn=(e,t,n)=>Pre(`${e} === '${fS}' || ${e} === '${td}'`,t,n),Fyn=(e,t,n)=>Pre(`${e} === '${td}'`,t,n),jyn=(e,t,n)=>Pre(`${e} === '${dS}'`,t,n),$Ve=(e,t,n)=>(t=t!=null?ao(t):t,n=n!=null?ao(n):n,ibe(t)&&ibe(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Cn({test:e},t)].concat(n||[])),ibe=e=>e==null||Object.keys(e).length===1,Pre=(e,t,n)=>({signal:`${e} ? (${sw(t)}) : (${sw(n)})`}),Byn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${fS}' ? (${sw(r)}) : `:"")+(n!=null?`${e} === '${uy}' ? (${sw(n)}) : `:"")+(i!=null?`${e} === '${dS}' ? (${sw(i)}) : `:"")+(t!=null?`${e} === '${td}' ? (${sw(t)}) : `:"")+"(null)"}),sw=e=>Vs(e)?e.signal:e==null?null:nt(e),zyn=(e,t)=>t===0?0:Vs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},jw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function pb(e,t,n,r){let i;if(t&&Wt(t,e))return t[e];if(Wt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[xre][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[BO][i]}return null}function sbe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Uyn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vs(o)){const f=sbe([n.axisX,n.axisY]),d=sbe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=uo(o,pb(l,n.axisX,i,r),pb(l,n.axisY,i,r));u={};for(l of d)u[l]=Byn(o.signal,pb(l,n.axisTop,i,r),pb(l,n.axisBottom,i,r),pb(l,n.axisLeft,i,r),pb(l,n.axisRight,i,r))}else a=o===td||o===uy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Cn({},i,a,u,s):i}function Vyn(e,t,n,r){const i=tl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:or},update:a={opacity:bc},exit:{opacity:or}};Bo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=obe(e,0),c=obe(e,1);return o.x=a.x=uo(s,l,or),o.x2=a.x2=uo(s,c),o.y=a.y=Rf(s,l,or),o.y2=a.y2=Rf(s,c),jl({type:Tre,role:dgn,from:r,encode:u},n)}function obe(e,t){return{scale:e.scale,range:t}}function Hyn(e,t,n,r,i){const s=tl(e,t),o=e.orient,a=e.gridScale,u=v8(o,1,-1),l=qyn(e.offset,u);let c,f,d;const h={enter:c={opacity:or},update:d={opacity:bc},exit:f={opacity:or}};Bo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:_c,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=uo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Cn(m,{mult:u,offset:l});return c.x=d.x=uo(o,p,g),c.y=d.y=Rf(o,p,g),c.x2=d.x2=Rf(o,y),c.y2=d.y2=uo(o,y),f.x=uo(o,p),f.y=Rf(o,p),jl({type:Tre,role:hgn,key:_c,from:r,encode:h},n)}function qyn(e,t){if(t!==1)if(!_t(e))e=Vs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Cn({},e);for(;n.mult!=null;)if(_t(n.mult))n=n.mult=Cn({},n.mult);else return n.mult=Vs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Wyn(e,t,n,r,i,s){const o=tl(e,t),a=e.orient,u=v8(a,-1,1);let l,c,f;const d={enter:l={opacity:or},update:f={opacity:bc},exit:c={opacity:or}};Bo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ao(i);h.mult=u;const p={scale:e.scale,field:_c,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=uo(a,or,p),f.y2=l.y2=uo(a,h),c.x=uo(a,p),f.x=l.x=Rf(a,or,p),f.x2=l.x2=Rf(a,h),c.y=Rf(a,p),jl({type:Tre,role:mgn,key:_c,from:r,encode:d},n)}function nz(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Gyn(e,t,n,r,i,s){const o=tl(e,t),a=e.orient,u=e.scale,l=v8(a,-1,1),c=p1(o("labelFlush")),f=p1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ao(i);g.mult=l,g.offset=ao(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:_c,band:.5,offset:CVe(s.offset,o("labelOffset"))},v=uo(a,p?nz(u,c,'"left"','"right"','"center"'):{value:"center"},Nyn(a,"left","right")),_=uo(a,RVe(a,"bottom","top"),p?nz(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=nz(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:or,x:uo(a,y,g),y:Rf(a,y,g)},S={enter:E,update:m={opacity:bc,text:{field:Ere},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:or,x:E.x,y:E.y}};Bo(S,{dx:!d&&p?uo(a,w):null,dy:!h&&p?Rf(a,w):null}),Bo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const b=o("labelBound");let T=o("labelOverlap");return T=T||b?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:b?{scale:u,orient:a,tolerance:b}:null}:void 0,m.align!==v&&(m.align=jw(m.align,v)),m.baseline!==_&&(m.baseline=jw(m.baseline,_)),jl({type:$_,role:pgn,style:BO,key:_c,from:r,encode:S,overlap:T},n)}function Yyn(e,t,n,r){const i=tl(e,t),s=e.orient,o=v8(s,-1,1);let a,u;const l={enter:a={opacity:or,anchor:ao(i("titleAnchor",null)),align:{signal:Cre}},update:u=Cn({},a,{opacity:bc,text:ao(e.title)}),exit:{opacity:or}},c={signal:`lerp(range("${e.scale}"), ${m8(0,1,.5)})`};return u.x=uo(s,c),u.y=Rf(s,c),a.angle=uo(s,or,zyn(o,90)),a.baseline=uo(s,RVe(s,uy,td),{value:uy}),u.angle=a.angle,u.baseline=a.baseline,Bo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Kyn(i,s,l,n),l.update.align=jw(l.update.align,a.align),l.update.angle=jw(l.update.angle,a.angle),l.update.baseline=jw(l.update.baseline,a.baseline),jl({type:$_,role:ggn,style:xre,from:r,encode:l},n)}function Kyn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=jw(ao(a),n.update[u]),!1):!kb(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ao(o):uo(t,ao(o),ao(s))}function Xyn(e,t){const n=Uyn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=tl(e,n),l=W0n(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Vt(t.add(ed({},[c]))),d=Vt(t.add(Qgn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Hyn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Wyn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Gyn(e,n,r.labels,d,p,l))),c.domain&&h.push(Vyn(e,n,r.domain,f)),c.title&&h.push(Yyn(e,n,r.title,f)),y8(ZA({role:fgn,from:f,encode:cS(Qyn(u,e),i,zO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Qyn(e,t){const n={enter:{},update:{}};return Bo(n,{orient:e("orient"),offset:e("offset")||0,position:af(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function NVe(e,t,n){const r=yt(e.signals),i=yt(e.scales);return n||r.forEach(s=>dVe(s,t)),yt(e.projections).forEach(s=>O0n(s,t)),i.forEach(s=>y0n(s,t)),yt(e.data).forEach(s=>Ryn(s,t)),i.forEach(s=>v0n(s,t)),(n||r).forEach(s=>Xgn(s,t)),yt(e.axes).forEach(s=>Xyn(s,t)),yt(e.marks).forEach(s=>y8(s,t)),yt(e.legends).forEach(s=>byn(s,t)),e.title&&Ayn(e.title,t),t.parseLambdas(),t}const Jyn=e=>cS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Zyn(e,t){const n=t.config,r=Vt(t.root=t.add(f6())),i=evn(e,n);i.forEach(l=>dVe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(ed()),o=t.add(mVe(fVe(Jyn(e.encode),p8,vre,e.style,t,{pulse:Vt(s)}))),a=t.add(vVe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Vt(o)}));t.operators.pop(),t.pushState(Vt(o),Vt(a),null),NVe(e,t,i),t.operators.push(a);let u=t.add(pVe({mark:r,pulse:Vt(a)}));return u=t.add(yVe({pulse:Vt(u)})),u=t.add(R_({pulse:Vt(u)})),t.addData("root",new X1(t,s,s,u)),t}function ET(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function evn(e,t){const n=o=>af(e[o],t[o]),r=[ET("background",n("background")),ET("autosize",ugn(n("autosize"))),ET("padding",cgn(n("padding"))),ET("width",n("width")||0),ET("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return yt(e.signals).forEach(o=>{Wt(i,o.name)?o=Cn(i[o.name],o):r.push(o),s[o.name]=o}),yt(t.signals).forEach(o=>{!Wt(s,o.name)&&!Wt(i,o.name)&&r.push(o)}),r}function DVe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function abe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}DVe.prototype=abe.prototype={parse(e){return NVe(e,this)},fork(){return new abe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof $W?Vt(e):e;return this.add(f0n({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Vt(this.add(R_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Vt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return tr(this._parent)},encode(){return tr(this._encode)},lookup(){return tr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(vt(e))return QA(e,t);e.signal||$e("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Vt(this.add(t0n(i)))}return r},compareRef(e){let t=!1;const n=s=>Vs(s)?(t=!0,this.signalRef(s.signal)):Bgn(s)?(t=!0,this.exprRef(s.expr)):s,r=yt(e.field).map(n),i=yt(e.order).map(n);return t?Vt(this.add(G_e({fields:r,orders:i}))):q_e(r,i)},keyRef(e,t){let n=!1;const r=s=>Vs(s)?(n=!0,Vt(i[s.signal])):s,i=this.signals;return e=yt(e).map(r),n?Vt(this.add(n0n({fields:e,flat:t}))):Mgn(e,t)},sortRef(e){if(!e)return e;const t=d8(e.op,e.field),n=e.order||Lgn;return n.signal?Vt(this.add(G_e({fields:t,orders:this.signalRef(n.signal)}))):q_e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Wt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&$e("Duplicate signal name: "+nt(e));const n=t instanceof $W?t:this.add(f6(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||$e("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Vt(this.signals[e]):(Wt(this.lambdas,e)||(this.lambdas[e]=this.add(f6(null))),Vt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Dh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!_t(e)?e:this.signalRef(e.signal||kre(e))},exprRef(e,t){const n={expr:Dh(e,this)};return t&&(n.expr.$name=t),Vt(this.add(Zgn(n)))},addBinding(e,t){this.bindings||$e("Nested signals do not support binding: "+nt(e)),this.bindings.push(Cn({signal:e},t))},addScaleProj(e,t){Wt(this.scales,e)&&$e("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,h0n(t))},addProjection(e,t){this.addScaleProj(e,c0n(t))},getScale(e){return this.scales[e]||$e("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return Vt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Wt(this.data,e)&&$e("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||$e("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Wt(this.data,e)&&$e("Duplicate data set name: "+nt(e)),this.addData(e,X1.fromEntries(this,t))}};function kre(e){return(De(e)?tvn:nvn)(e)}function tvn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(_t(i)?i.signal||kre(i):nt(i))}return n+"]"}function nvn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(_t(i)?i.signal||kre(i):nt(i));return t+"}"}function rvn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function ivn(e,t,n){return _t(e)||$e("Input Vega specification must be an object."),t=nS(rvn(),t,e.config),Zyn(e,new DVe(t,n)).toRuntime()}var svn="5.29.0";Cn(BE,ion,Wln,Scn,tfn,ufn,Dfn,pfn,Lfn,zfn,Qfn,idn);const ovn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Cs,CanvasHandler:DO,CanvasRenderer:ZL,DATE:Yu,DAY:pa,DAYOFYEAR:Nh,Dataflow:Fw,Debug:o9e,Error:Tee,EventStream:NF,Gradient:x7e,GroupItem:GF,HOURS:Ml,Handler:fne,HybridHandler:pze,HybridRenderer:cW,Info:s9e,Item:WF,MILLISECONDS:Uf,MINUTES:Ll,MONTH:_a,Marks:Fl,MultiPulse:qee,None:i9e,Operator:si,Parameters:$F,Pulse:T0,QUARTER:Gu,RenderType:Zg,Renderer:NO,ResourceLoader:P7e,SECONDS:Ic,SVGHandler:tze,SVGRenderer:yne,SVGStringRenderer:hze,Scenegraph:G7e,TIME_UNITS:Lee,Transform:Ae,View:ZUe,WEEK:js,Warn:Cee,YEAR:Do,accessor:el,accessorFields:va,accessorName:Zi,array:yt,ascending:AF,bandwidthNRD:Kee,bin:mBe,bootstrapCI:gBe,boundClip:Sze,boundContext:PO,boundItem:sW,boundMark:V7e,boundStroke:Gm,changeset:O_,clampRange:y9e,codegenExpression:CUe,compare:kee,constant:Aa,cumulativeLogNormal:tte,cumulativeNormal:MF,cumulativeUniform:ste,dayofyear:O9e,debounce:Ree,defaultLocale:Bee,definition:dBe,densityLogNormal:ete,densityNormal:Xee,densityUniform:ite,domChild:Ls,domClear:uc,domCreate:Qg,domFind:cne,dotbin:yBe,error:$e,expressionFunction:ms,extend:Cn,extent:$h,extentIndex:v9e,falsy:wg,fastmap:iS,field:Cc,flush:_9e,font:JF,fontFamily:$O,fontSize:Yh,format:S$,formatLocale:BL,formats:Vee,hasOwnProperty:Wt,id:vO,identity:Ca,inferType:tBe,inferTypes:nBe,ingest:Ar,inherits:ot,inrange:nw,interpolate:zte,interpolateColors:HF,interpolateRange:l7e,intersect:bze,intersectBoxLine:rw,intersectPath:Kte,intersectPoint:Xte,intersectRule:R7e,isArray:De,isBoolean:Py,isDate:S0,isFunction:An,isIterable:b9e,isNumber:dr,isObject:_t,isRegExp:w9e,isString:vt,isTuple:kF,key:$ee,lerp:E9e,lineHeight:sy,loader:OF,locale:Z9e,logger:Aee,lruCache:x9e,markup:gne,merge:S9e,mergeConfig:nS,multiLineOffset:ane,one:tS,pad:T9e,panLinear:f9e,panLog:d9e,panPow:h9e,panSymlog:p9e,parse:ivn,parseExpression:ire,parseSelector:Ry,path:s5,pathCurves:Wte,pathEqual:Tze,pathParse:HE,pathRectangle:C7e,pathRender:VA,pathSymbols:T7e,pathTrail:A7e,peek:tr,point:e8,projection:One,quantileLogNormal:nte,quantileNormal:LF,quantileUniform:ote,quantiles:Gee,quantizeInterpolator:c7e,quarter:m9e,quartiles:Yee,get random(){return Oc},randomInteger:usn,randomKDE:Jee,randomLCG:asn,randomLogNormal:_Be,randomMixture:bBe,randomNormal:Qee,randomUniform:wBe,read:sBe,regressionConstant:ate,regressionExp:xBe,regressionLinear:ute,regressionLoess:CBe,regressionLog:EBe,regressionPoly:TBe,regressionPow:SBe,regressionQuad:lte,renderModule:t8,repeat:s2,resetDefaultLocale:iin,resetSVGClipId:O7e,resetSVGDefIds:cln,responseType:iBe,runtimeContext:BUe,sampleCurve:jF,sampleLogNormal:Zee,sampleNormal:DF,sampleUniform:rte,scale:_r,sceneEqual:vne,sceneFromJSON:q7e,scenePickVisit:qL,sceneToJSON:H7e,sceneVisit:Vf,sceneZOrder:Qte,scheme:Ute,serializeXML:lze,setHybridRendererOptions:oln,setRandom:ssn,span:_O,splitAccessPath:Gh,stringValue:nt,textMetrics:Al,timeBin:W9e,timeFloor:M9e,timeFormatLocale:BA,timeInterval:sS,timeOffset:j9e,timeSequence:U9e,timeUnitSpecifier:I9e,timeUnits:Fee,toBoolean:Nee,toDate:Dee,toNumber:ma,toSet:zf,toString:Mee,transform:hBe,transforms:BE,truncate:C9e,truthy:Ac,tupleid:Ht,typeParsers:Xq,utcFloor:L9e,utcInterval:oS,utcOffset:B9e,utcSequence:V9e,utcdayofyear:R9e,utcquarter:g9e,utcweek:$9e,version:svn,visitArray:Og,week:P9e,writeConfig:rS,zero:Bg,zoomLinear:Iee,zoomLog:Oee,zoomPow:jL,zoomSymlog:Pee},Symbol.toStringTag,{value:"Module"}));function avn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var uvn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},lvn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},cvn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const fvn=Array.prototype.slice,Jy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,fvn.call(t,1))},dvn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var hvn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:dvn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Jy("join",arguments)},indexof:function(){return Jy("indexOf",arguments)},lastindexof:function(){return Jy("lastIndexOf",arguments)},slice:function(){return Jy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Jy("substring",arguments,String)},split:function(){return Jy("split",arguments,String)},replace:function(){return Jy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const pvn=["view","item","group","xy","x","y"],BW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&BW.add(setImmediate);const mvn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:uvn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),BW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||hvn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>lvn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>cvn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,BW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function xT(e,t,n,r,i,s){const o=a=>mvn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,pvn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var gvn={operator(e,t){const n=t.ast,r=e.functions;return i=>xT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>xT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>xT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return xT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=xT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&avn(o,r,s),l}}};const yvn="vega-lite",vvn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',_vn="5.18.1",bvn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],wvn="https://vega.github.io/vega-lite/",Evn="Vega-Lite is a concise high-level language for interactive visualization.",xvn=["vega","chart","visualization"],Svn="build/vega-lite.js",Tvn="build/vega-lite.min.js",Cvn="build/vega-lite.min.js",Avn="build/src/index",Ivn="build/src/index.d.ts",Ovn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Pvn=["bin","build","src","vega-lite*","tsconfig.json"],kvn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Rvn={type:"git",url:"https://github.com/vega/vega-lite.git"},$vn="BSD-3-Clause",Nvn={url:"https://github.com/vega/vega-lite/issues"},Dvn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Mvn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Lvn={vega:"^5.24.0"},Fvn={node:">=18"},jvn="yarn@1.22.19",Bvn={name:yvn,author:vvn,version:_vn,collaborators:bvn,homepage:wvn,description:Evn,keywords:xvn,main:Svn,unpkg:Tvn,jsdelivr:Cvn,module:Avn,types:Ivn,bin:Ovn,files:Pvn,scripts:kvn,repository:Rvn,license:$vn,bugs:Nvn,devDependencies:Dvn,dependencies:Mvn,peerDependencies:Lvn,engines:Fvn,packageManager:jvn};function Rre(e){return!!e.or}function $re(e){return!!e.and}function Nre(e){return!!e.not}function H$(e,t){if(Nre(e))H$(e.not,t);else if($re(e))for(const n of e.and)H$(n,t);else if(Rre(e))for(const n of e.or)H$(n,t);else t(e)}function Bw(e,t){return Nre(e)?{not:Bw(e.not,t)}:$re(e)?{and:e.and.map(n=>Bw(n,t))}:Rre(e)?{or:e.or.map(n=>Bw(n,t))}:t(e)}const dn=structuredClone;function MVe(e){throw new Error(e)}function KE(e,t){const n={};for(const r of t)Wt(e,r)&&(n[r]=e[r]);return n}function Fu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Kr(e)).join(",")})`};function Gn(e){if(dr(e))return e;const t=vt(e)?e:Kr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function zW(e){return e===!1||e===null}function Yn(e,t){return e.includes(t)}function Q1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Dre(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function LVe(e,...t){for(const n of t)zvn(e,n??{});return e}function zvn(e,t){for(const n of We(t))rS(e,n,t[n],!0)}function Qd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Uvn(e,t){const n=We(e),r=We(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function FVe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Mre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function UW(e){const t=new Set;for(const n of e){const i=Gh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Lre(e,t){return e===void 0||t===void 0?!0:Mre(UW(e),UW(t))}function Yr(e){return We(e).length===0}const We=Object.keys,Mo=Object.values,ly=Object.entries;function eI(e){return e===!0||e===!1}function Di(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function yC(e,t){return Nre(e)?`!(${yC(e.not,t)})`:$re(e)?`(${e.and.map(n=>yC(n,t)).join(") && (")})`:Rre(e)?`(${e.or.map(n=>yC(n,t)).join(") || (")})`:t(e)}function d6(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&d6(e[n],t)&&delete e[n],Yr(e)}function UO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Fre(e,t="datum"){const n=Gh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function jVe(e,t="datum"){return`${t}[${nt(Gh(e).join("."))}]`}function Vvn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Pc(e){return`${Gh(e).map(Vvn).join("\\.")}`}function J1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function hS(e){return`${Gh(e).join(".")}`}function XE(e){return e?Gh(e).length:0}function ds(...e){for(const t of e)if(t!==void 0)return t}let BVe=42;function zVe(e){const t=++BVe;return e?String(e)+t:t}function Hvn(){BVe=42}function UVe(e){return VVe(e)?e:`__${e}`}function VVe(e){return e.startsWith("__")}function tI(e){if(e!==void 0)return(e%360+360)%360}function _8(e){return dr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const ube=Object.getPrototypeOf(structuredClone({}));function El(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!El(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!El(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==ube.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==ube.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!El(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Kr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const rm="row",im="column",b8="facet",Mi="x",go="y",nd="x2",Qh="y2",$y="xOffset",pS="yOffset",rd="radius",Km="radius2",Vc="theta",Xm="theta2",id="latitude",sd="longitude",od="latitude2",kc="longitude2",Ku="color",Jh="fill",Zh="stroke",Xu="shape",Qm="size",N_="angle",Jm="opacity",Ny="fillOpacity",Dy="strokeOpacity",My="strokeWidth",Ly="strokeDash",VO="text",QE="order",HO="detail",w8="key",Z1="tooltip",E8="href",x8="url",S8="description",qvn={x:1,y:1,x2:1,y2:1},HVe={theta:1,theta2:1,radius:1,radius2:1};function qVe(e){return e in HVe}const jre={longitude:1,longitude2:1,latitude:1,latitude2:1};function WVe(e){switch(e){case id:return"y";case od:return"y2";case sd:return"x";case kc:return"x2"}}function GVe(e){return e in jre}const Wvn=We(jre),Bre={...qvn,...HVe,...jre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function zw(e){return e===Ku||e===Jh||e===Zh}const YVe={row:1,column:1,facet:1},mc=We(YVe),zre={...Bre,...YVe},Gvn=We(zre),{order:FIn,detail:jIn,tooltip:BIn,...Yvn}=zre,{row:zIn,column:UIn,facet:VIn,...Kvn}=Yvn;function Xvn(e){return!!Kvn[e]}function KVe(e){return!!zre[e]}const Qvn=[nd,Qh,od,kc,Xm,Km];function XVe(e){return D_(e)!==e}function D_(e){switch(e){case nd:return Mi;case Qh:return go;case od:return id;case kc:return sd;case Xm:return Vc;case Km:return rd}return e}function cy(e){if(qVe(e))switch(e){case Vc:return"startAngle";case Xm:return"endAngle";case rd:return"outerRadius";case Km:return"innerRadius"}return e}function ep(e){switch(e){case Mi:return nd;case go:return Qh;case id:return od;case sd:return kc;case Vc:return Xm;case rd:return Km}}function Qu(e){switch(e){case Mi:case nd:return"width";case go:case Qh:return"height"}}function QVe(e){switch(e){case Mi:return"xOffset";case go:return"yOffset";case nd:return"x2Offset";case Qh:return"y2Offset";case Vc:return"thetaOffset";case rd:return"radiusOffset";case Xm:return"theta2Offset";case Km:return"radius2Offset"}}function Ure(e){switch(e){case Mi:return"xOffset";case go:return"yOffset"}}function Jvn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Zvn=We(Bre),{x:HIn,y:qIn,x2:WIn,y2:GIn,xOffset:YIn,yOffset:KIn,latitude:XIn,longitude:QIn,latitude2:JIn,longitude2:ZIn,theta:eOn,theta2:tOn,radius:nOn,radius2:rOn,...Vre}=Bre,e1n=We(Vre),Hre={x:1,y:1},tp=We(Hre);function hs(e){return e in Hre}const qre={theta:1,radius:1},t1n=We(qre);function T8(e){return e==="width"?Mi:go}const JVe={xOffset:1,yOffset:1};function qO(e){return e in JVe}const{text:iOn,tooltip:sOn,href:oOn,url:aOn,description:uOn,detail:lOn,key:cOn,order:fOn,...ZVe}=Vre,n1n=We(ZVe);function r1n(e){return!!Vre[e]}function i1n(e){switch(e){case Ku:case Jh:case Zh:case Qm:case Xu:case Jm:case My:case Ly:return!0;case Ny:case Dy:case N_:return!1}}const eHe={...Hre,...qre,...JVe,...ZVe},C8=We(eHe);function Zm(e){return!!eHe[e]}function s1n(e,t){return a1n(e)[t]}const tHe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dOn,...o1n}=tHe;function a1n(e){switch(e){case Ku:case Jh:case Zh:case S8:case HO:case w8:case Z1:case E8:case QE:case Jm:case Ny:case Dy:case My:case b8:case rm:case im:return tHe;case Mi:case go:case $y:case pS:case id:case sd:return o1n;case nd:case Qh:case od:case kc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Qm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ly:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Xu:return{point:"always",geoshape:"always"};case VO:return{text:"always"};case N_:return{point:"always",square:"always",text:"always"};case x8:return{image:"always"};case Vc:return{text:"always",arc:"always"};case rd:return{text:"always",arc:"always"};case Xm:case Km:return{arc:"always"}}}function rz(e){switch(e){case Mi:case go:case Vc:case rd:case $y:case pS:case Qm:case N_:case My:case Jm:case Ny:case Dy:case nd:case Qh:case Xm:case Km:return;case b8:case rm:case im:case Xu:case Ly:case VO:case Z1:case E8:case x8:case S8:return"discrete";case Ku:case Jh:case Zh:return"flexible";case id:case sd:case od:case kc:case HO:case w8:case QE:return}}const u1n={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},l1n={count:1,min:1,max:1};function km(e){return!!e&&!!e.argmin}function Fy(e){return!!e&&!!e.argmax}function Wre(e){return vt(e)&&!!u1n[e]}const c1n=new Set(["count","valid","missing","distinct"]);function nHe(e){return vt(e)&&c1n.has(e)}function f1n(e){return vt(e)&&Yn(["min","max"],e)}const d1n=new Set(["count","sum","distinct","valid","missing"]),h1n=new Set(["mean","average","median","q1","q3","min","max"]);function rHe(e){return Py(e)&&(e=F8(e,void 0)),"bin"+We(e).map(t=>A8(e[t])?Di(`_${t}_${ly(e[t])}`):Di(`_${t}_${e[t]}`)).join("")}function pi(e){return e===!0||M_(e)&&!e.binned}function Co(e){return e==="binned"||M_(e)&&e.binned===!0}function M_(e){return _t(e)}function A8(e){return e==null?void 0:e.param}function lbe(e){switch(e){case rm:case im:case Qm:case Ku:case Jh:case Zh:case My:case Jm:case Ny:case Dy:case Xu:return 6;case Ly:return 4;default:return 10}}function WO(e){return!!(e!=null&&e.expr)}function xu(e){const t=We(e||{}),n={};for(const r of t)n[r]=ml(e[r]);return n}function iHe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=KE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function Rg(e){return vt(e)||De(e)&&vt(e[0])}function Mt(e){return!!(e!=null&&e.signal)}function jy(e){return!!e.step}function p1n(e){return De(e)?!1:"fields"in e&&!("data"in e)}function m1n(e){return De(e)?!1:"fields"in e&&"data"in e}function Hp(e){return De(e)?!1:"field"in e&&"data"in e}const g1n={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},y1n=We(g1n),v1n={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},VW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function sHe(e){const t=De(e.condition)?e.condition.map(cbe):cbe(e.condition);return{...ml(e),condition:t}}function ml(e){if(WO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function cbe(e){if(WO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ei(e){if(WO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Mt(e)?e:e!==void 0?{value:e}:void 0}function _1n(e){return Mt(e)?e.signal:nt(e)}function fbe(e){return Mt(e)?e.signal:nt(e.value)}function wf(e){return Mt(e)?e.signal:e==null?null:nt(e)}function b1n(e,t,n){for(const r of n){const i=Rm(r,t.markDef,t.config);i!==void 0&&(e[r]=Ei(i))}return e}function oHe(e){return[].concat(e.type,e.style??[])}function Cr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Rm(e,t,n,r)}function Rm(e,t,n,{vgChannel:r}={}){return ds(r?h6(e,t,n.style):void 0,h6(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function h6(e,t,n){return aHe(e,oHe(t),n)}function aHe(e,t,n){t=yt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function uHe(e,t){return yt(e).reduce((n,r)=>(n.field.push(st(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function lHe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(El(i,r))return;n.push(r)}),n}function cHe(e,t){return El(e,t)||!t?e:e?[...yt(e),...yt(t)].join(", "):t}function fHe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Rg(n)||Mt(n))&&(Rg(r)||Mt(r)))return{explicit:e.explicit,value:cHe(n,r)};if(Rg(n)||Mt(n))return{explicit:e.explicit,value:n};if(Rg(r)||Mt(r))return{explicit:e.explicit,value:r};if(!Rg(n)&&!Mt(n)&&!Rg(r)&&!Mt(r))return{explicit:e.explicit,value:lHe(n,r)};throw new Error("It should never reach here")}function Gre(e){return`Invalid specification ${Kr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const w1n='Autosize "fit" only works for single views and layered views.';function dbe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function hbe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function pbe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Qu(e)}.`:'Dropping "fit" because spec has discrete size.'}function Yre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function mbe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function E1n(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function x1n(e){return`The "nearest" transform is not supported for ${e} marks.`}function dHe(e){return`Selection not supported for ${e} yet.`}function S1n(e){return`Cannot find a selection named "${e}".`}const T1n="Scale bindings are currently only supported for scales with unbinned, continuous domains.",C1n="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",A1n="Legend bindings are only supported for selections over an individual field or encoding channel.";function I1n(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function O1n(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const P1n="The same selection must be used to override scale domains in a layered view.",k1n='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function R1n(e){return`Unknown repeated value "${e}".`}function gbe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const $1n="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function N1n(e){return`Unrecognized parse "${e}".`}function ybe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const D1n="Attempt to add the same child twice.";function M1n(e){return`Ignoring an invalid transform: ${Kr(e)}.`}const L1n='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function vbe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function F1n(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Kr(t)} is overridden by a child projection ${Kr(n)}.`}const j1n="Arc marks uses theta channel rather than angle, replacing angle with theta.";function B1n(e){return`${e}Offset dropped because ${e} is continuous`}function z1n(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Kr(n)}}.`}function hHe(e){return`Invalid field type "${e}".`}function U1n(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function V1n(e){return`Invalid aggregation operator "${e}".`}function pHe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function H1n(e){return`Position range does not support relative band size for ${e}.`}function HW(e,t){return`Dropping ${Kr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const q1n="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function I8(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function W1n(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function G1n(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Y1n(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function K1n(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function iz(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function X1n(e){return`The ${e} for range marks cannot be an expression`}function Q1n(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function J1n(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Z1n(e){return`Cannot use the scale property "${e}" with non-color channel.`}function e_n(e){return`Cannot use the relative band size with ${e} scale.`}function t_n(e){return`Using unaggregated domain with raw field has no effect (${Kr(e)}).`}function n_n(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function r_n(e){return`Unaggregated domain is currently unsupported for log scale (${Kr(e)}).`}function i_n(e){return`Cannot apply size to non-oriented mark "${e}".`}function s_n(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function o_n(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function mHe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function gHe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function a_n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Kr(n)} and ${Kr(r)}). Using ${Kr(n)}.`}function u_n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Kr(n)} and ${Kr(r)}). Using the union of the two domains.`}function l_n(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function c_n(e){return`Dropping sort property ${Kr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const _be="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",f_n="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",d_n="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",h_n="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function p_n(e){return`Cannot stack "${e}" if there is already "${e}2".`}function m_n(e){return`Stack is applied to a non-linear scale (${e}).`}function g_n(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function p6(e,t){return`Invalid ${e}: ${Kr(t)}.`}function y_n(e){return`Dropping day from datetime ${Kr(e)} as day cannot be combined with other units.`}function v_n(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function __n(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function b_n(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function bbe(e){return`1D error band does not support ${e}.`}function yHe(e){return`Channel ${e} is required for "binned" bin.`}function w_n(e){return`Channel ${e} should not be used with "binned" bin.`}function E_n(e){return`Domain for ${e} is required for threshold scale.`}const vHe=Aee(Cee);let JE=vHe;function x_n(e){return JE=e,JE}function S_n(){return JE=vHe,JE}function Qe(...e){JE.warn(...e)}function T_n(...e){JE.debug(...e)}function L_(e){if(e&&_t(e)){for(const t of Xre)if(t in e)return!0}return!1}const _He=["january","february","march","april","may","june","july","august","september","october","november","december"],C_n=_He.map(e=>e.substr(0,3)),bHe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],A_n=bHe.map(e=>e.substr(0,3));function I_n(e){if(_8(e)&&(e=+e),dr(e))return e>4&&Qe(p6("quarter",e)),e-1;throw new Error(p6("quarter",e))}function O_n(e){if(_8(e)&&(e=+e),dr(e))return e-1;{const t=e.toLowerCase(),n=_He.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=C_n.indexOf(r);if(i!==-1)return i;throw new Error(p6("month",e))}}function P_n(e){if(_8(e)&&(e=+e),dr(e))return e%7;{const t=e.toLowerCase(),n=bHe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=A_n.indexOf(r);if(i!==-1)return i;throw new Error(p6("day",e))}}function Kre(e,t){const n=[];if(t&&e.day!==void 0&&We(e).length>1&&(Qe(y_n(e)),e=dn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?O_n(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?I_n(e.quarter):e.quarter;n.push(dr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?P_n(e.day):e.day;n.push(dr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function e_(e){const n=Kre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function k_n(e){const n=Kre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function R_n(e){const t=Kre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const wHe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Xre=We(wHe);function $_n(e){return!!wHe[e]}function F_(e){return _t(e)?e.binned:EHe(e)}function EHe(e){return e&&e.startsWith("binned")}function Qre(e){return e.startsWith("utc")}function N_n(e){return e.substring(3)}const D_n={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function O8(e){return Xre.filter(t=>SHe(e,t))}function xHe(e){const t=O8(e);return t[t.length-1]}function SHe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function M_n(e,t,{end:n}={end:!1}){const r=Fre(t),i=Qre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Xre)SHe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),k_n(a)}function THe(e){if(!e)return;const t=O8(e);return`timeUnitSpecifier(${Kr(t)}, ${Kr(D_n)})`}function L_n(e,t,n){if(!e)return;const r=THe(e);return`${n||Qre(e)?"utc":"time"}Format(${t}, ${r})`}function co(e){if(!e)return;let t;return vt(e)?EHe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:_t(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Qre(t.unit)&&(t.utc=!0,t.unit=N_n(t.unit)),t}function F_n(e){const{utc:t,...n}=co(e);return n.unit?(t?"utc":"")+We(n).map(r=>Di(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+We(n).map(r=>Di(`_${r}_${n[r]}`)).join("")}function CHe(e,t=n=>n){const n=co(e),r=xHe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=AHe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(e_(a))} - ${t(e_(i))}`}}const j_n={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function B_n(e){return!!j_n[e]}function AHe(e,t=1){if(B_n(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function z_n(e){return e==null?void 0:e.param}function Jre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Zre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function eie(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function tie(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function nie(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function rie(e){if(e!=null&&e.field){if(De(e.range)&&e.range.length===2)return!0;if(Mt(e.range))return!0}return!1}function iie(e){return!!(e!=null&&e.field)&&(De(e.oneOf)||De(e.in))}function U_n(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function IHe(e){return iie(e)||Jre(e)||rie(e)||Zre(e)||tie(e)||eie(e)||nie(e)}function md(e,t){return j8(e,{timeUnit:t,wrapTime:!0})}function V_n(e,t){return e.map(n=>md(n,t))}function OHe(e,t=!0){const{field:n}=e,r=co(e.timeUnit),{unit:i,binned:s}=r||{},o=st(e,{expr:"datum"}),a=i?`time(${s?o:M_n(i,n)})`:o;if(Jre(e))return`${a}===${md(e.equal,i)}`;if(Zre(e)){const u=e.lt;return`${a}<${md(u,i)}`}else if(tie(e)){const u=e.gt;return`${a}>${md(u,i)}`}else if(eie(e)){const u=e.lte;return`${a}<=${md(u,i)}`}else if(nie(e)){const u=e.gte;return`${a}>=${md(u,i)}`}else{if(iie(e))return`indexof([${V_n(e.oneOf,i).join(",")}], ${a}) !== -1`;if(U_n(e))return sie(a,e.valid);if(rie(e)){const{range:u}=e,l=Mt(u)?{signal:`${u.signal}[0]`}:u[0],c=Mt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+md(l,i)+", "+md(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${md(l,i)}`),c!==null&&f.push(`${a} <= ${md(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Kr(e)}`)}function sie(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function H_n(e){return IHe(e)&&e.timeUnit?{...e,timeUnit:co(e.timeUnit)}:e}const GO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function q_n(e){return e==="quantitative"||e==="temporal"}function PHe(e){return e==="ordinal"||e==="nominal"}const t_=GO.quantitative,oie=GO.ordinal,ZE=GO.temporal,aie=GO.nominal,mS=GO.geojson;function W_n(e){if(e)switch(e=e.toLowerCase(),e){case"q":case t_:return"quantitative";case"t":case ZE:return"temporal";case"o":case oie:return"ordinal";case"n":case aie:return"nominal";case mS:return"geojson"}}const ju={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},qW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function G_n(e,t){const n=qW[e],r=qW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Y_n={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function wbe(e){return Y_n[e]}const kHe=new Set(["linear","log","pow","sqrt","symlog"]),RHe=new Set([...kHe,"time","utc"]);function $He(e){return kHe.has(e)}const NHe=new Set(["quantile","quantize","threshold"]),K_n=new Set([...RHe,...NHe,"sequential","identity"]),X_n=new Set(["ordinal","bin-ordinal","point","band"]);function ho(e){return X_n.has(e)}function Bl(e){return K_n.has(e)}function Ef(e){return RHe.has(e)}function ex(e){return NHe.has(e)}const Q_n={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function J_n(e){return!vt(e)&&!!e.name}function DHe(e){return e==null?void 0:e.param}function Z_n(e){return e==null?void 0:e.unionWith}function ebn(e){return _t(e)&&"field"in e}const tbn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:hOn,domain:pOn,range:mOn,rangeMax:gOn,rangeMin:yOn,scheme:vOn,...nbn}=tbn,rbn=We(nbn);function WW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ef(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ef(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ef(e);case"nice":return Ef(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Bl(e)&&!Yn(["log","time","utc","threshold","quantile"],e)}}function MHe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return zw(e)?void 0:Z1n(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function ibn(e,t){return Yn([oie,aie],t)?e===void 0||ho(e):t===ZE?Yn([ju.TIME,ju.UTC,void 0],e):t===t_?$He(e)||ex(e)||e===void 0:!0}function sbn(e,t,n=!1){if(!Zm(e))return!1;switch(e){case Mi:case go:case $y:case pS:case Vc:case rd:return Ef(t)||t==="band"?!0:t==="point"?!n:!1;case Qm:case My:case Jm:case Ny:case Dy:case N_:return Ef(t)||ex(t)||Yn(["band","point","ordinal"],t);case Ku:case Jh:case Zh:return t!=="band";case Ly:case Xu:return t==="ordinal"||ex(t)}}function uie(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=cie(e);return Ze(n)&&!nHe(n.aggregate)&&i&&Ef(i.get("type"))?obn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function obn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Cr("invalid",n,i)===null?[abn(e,t),r]:r}function abn(e,t){const n=lie(e,!0),i=D_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function lie(e,t=!0){return sie(vt(e)?e:st(e,{expr:"datum"}),!t)}function ubn(e){const{datum:t}=e;return L_(t)?e_(t):`${Kr(t)}`}function m1(e,t,n,r){const i={};if(t&&(i.scale=t),np(e)){const{datum:s}=e;L_(s)?i.signal=e_(s):Mt(s)?i.signal=s.signal:WO(s)?i.signal=s.expr:i.value=s}else i.field=st(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function m6({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Mt(o)&&0<o&&o<1?"datum":void 0,u=st(t,{expr:a,suffix:i}),l=n!==void 0?st(n,{expr:a}):st(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Mt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function lbn({scaleName:e,fieldDef:t}){const n=st(t,{expr:"datum"}),r=st(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function cie({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(vn(t)){const f=o==null?void 0:o.get("type");if(tu(t)){c??(c=fy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(pi(d)||c&&h&&p===ZE)return a!=null&&a.impute?m1(t,s,{binSuffix:"mid"},{offset:u}):c&&!ho(f)?m6({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):m1(t,s,QO(t,e)?{binSuffix:"range"}:{},{offset:u});if(Co(d)){if(Ze(n))return m6({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Qe(yHe(e===Mi?nd:Qh))}}return m1(t,s,ho(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Hf(t)){const f=t.value,d=u?{offset:u}:{};return{...vC(e,f),...d}}}return An(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function vC(e,t){return Yn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Yn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ei(t)}function n_(e){return e&&e!=="number"&&e!=="time"}function LHe(e,t,n){return`${e}(${t}${n?`, ${Kr(n)}`:""})`}const cbn="  ";function fie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(n_(n))return xf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=FHe(e,r,i),a=tx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return xf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return xf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return xf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(rx(e)){const c=dbn({field:o,timeUnit:Ze(e)?(u=co(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:B_(e)&&((l=e.scale)==null?void 0:l.type)===ju.UTC});return c?{signal:c}:void 0}if(t=GW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&pi(e.bin)){const c=st(e,{expr:r,binSuffix:"end"});return{signal:YO(o,c,t,n,s)}}else return t||tx(e)==="quantitative"?{signal:`${zHe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function FHe(e,t,n){return Ze(e)?n?`${st(e,{expr:t,suffix:"end"})}-${st(e,{expr:t,suffix:"start"})}`:st(e,{expr:t}):ubn(e)}function xf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=FHe(e,r,i)),o!=="datum.value"&&Ze(e)&&pi(e.bin)){const a=st(e,{expr:r,binSuffix:"end"});return{signal:YO(o,a,t,n,s)}}return{signal:LHe(n,o,t)}}function jHe(e,t,n,r,i,s){var o;if(!(vt(r)&&n_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&tx(e)==="quantitative"&&(i.normalizedNumberFormatType&&nx(e)&&e.stack==="normalize"||i.numberFormatType))){if(nx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return GW({type:"quantitative",config:i,normalizeStack:!0});if(rx(e)){const a=Ze(e)?(o=co(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:fbn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return GW({type:t,specifiedFormat:n,config:i})}}function BHe(e,t,n){var r;if(e&&(Mt(e)||e==="number"||e==="time"))return e;if(rx(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=co(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function GW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(vt(t))return t;if(e===t_)return r?n.normalizedNumberFormat:n.numberFormat}function fbn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:THe(t)}:r?void 0:n.timeFormat)}function zHe(e,t){return`format(${e}, "${t||""}")`}function Ebe(e,t,n,r){return n_(n)?LHe(n,e,t):zHe(e,(vt(t)?t:void 0)??r.numberFormat)}function YO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return YO(e,t,i.numberFormat,i.numberFormatType,i);const s=Ebe(e,n,r,i),o=Ebe(t,n,r,i);return`${sie(e,!1)} ? "null" : ${s} + "${cbn}" + ${o}`}function dbn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=vt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):L_n(t,e,s)}const au={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},UHe=au.arc,P8=au.area,k8=au.bar,hbn=au.image,R8=au.line,$8=au.point,pbn=au.rect,g6=au.rule,VHe=au.text,die=au.tick,mbn=au.trail,hie=au.circle,pie=au.square,HHe=au.geoshape;function j_(e){return["line","area","trail"].includes(e)}function nI(e){return["rect","bar","image","arc"].includes(e)}const gbn=new Set(We(au));function Mh(e){return e.type}const ybn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],vbn=["fill","fillOpacity"],_bn=[...ybn,...vbn],bbn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},xbe=We(bbn),wbn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Ebn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},xbn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},qHe=We(xbn);function r_(e){return e&&e.band!=null}const Sbn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},WHe=5,Tbn={binSpacing:1,continuousBandSize:WHe,minBandSize:.25,timeUnitBandPosition:.5},Cbn={binSpacing:0,continuousBandSize:WHe,minBandSize:.25,timeUnitBandPosition:.5},Abn={thickness:1};function Ibn(e){return Mh(e)?e.type:e}const N8="min",Obn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Sbe(e){return e in Obn}function GHe(e){return!!(e!=null&&e.encoding)}function fh(e){return e&&(e.op==="count"||!!e.field)}function YHe(e){return e&&De(e)}function KO(e){return"row"in e||"column"in e}function mie(e){return!!e&&"header"in e}function D8(e){return"facet"in e}function Pbn(e){return e.param}function kbn(e){return e&&!vt(e)&&"repeat"in e}function Tbe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function gie(e){return"sort"in e}function fy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(vn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Rm("timeUnitBandPosition",n,r);if(pi(s))return .5}}function KHe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Qu(e),u=Cr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Rm("timeUnitBandSize",r,i)};if(pi(h)&&!ho(s))return{band:1}}if(nI(r.type))return s?ho(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function XHe(e,t,n,r){return pi(e.bin)||e.timeUnit&&tu(e)&&e.type==="temporal"?fy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function QHe(e){return e&&!!e.sort&&!e.field}function M8(e){return e&&"condition"in e}function L8(e){const t=e==null?void 0:e.condition;return!!t&&!De(t)&&Ze(t)}function XO(e){const t=e==null?void 0:e.condition;return!!t&&!De(t)&&vn(t)}function Rbn(e){const t=e==null?void 0:e.condition;return!!t&&(De(t)||Hf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function tx(e){return e==null?void 0:e.type}function np(e){return e&&"datum"in e}function r0(e){return tu(e)&&!v6(e)||y6(e)}function Cbe(e){return tu(e)&&e.type==="quantitative"&&!e.bin||y6(e)}function y6(e){return np(e)&&dr(e.datum)}function vn(e){return Ze(e)||np(e)}function tu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Hf(e){return e&&"value"in e&&"value"in e}function B_(e){return e&&("scale"in e||"sort"in e)}function nx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function JHe(e){return e&&"legend"in e}function ZHe(e){return e&&("format"in e||"formatType"in e)}function $bn(e){return Fu(e,["legend","axis","header","scale"])}function Nbn(e){return"op"in e}function st(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Mbn(e))n=UVe("count");else{let o;if(!t.nofn)if(Nbn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;pi(a)?(o=rHe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Fy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):km(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!F_(l)&&(o=F_n(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?hS(n):t.expr?jVe(n,t.expr)+s:Pc(n)+s}function v6(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(hHe(e.type))}function Dbn(e){var t;return B_(e)&&ex((t=e.scale)==null?void 0:t.type)}function Mbn(e){return e.aggregate==="count"}function Lbn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(pi(r))return`${n} (binned)`;if(i&&!F_(i)){const a=(o=co(i))==null?void 0:o.unit;if(a)return`${n} (${O8(a).join("-")})`}else if(s)return Fy(s)?`${n} for max ${s.argmax}`:km(s)?`${n} for min ${s.argmin}`:`${UO(s)} of ${n}`;return n}function Fbn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Fy(t))return`${i} for argmax(${t.argmax})`;if(km(t))return`${i} for argmin(${t.argmin})`;const s=r&&!F_(r)?co(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||pi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const eqe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Fbn(e);default:return Lbn(e,t)}};let tqe=eqe;function nqe(e){tqe=e}function jbn(){nqe(eqe)}function Uw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=yie(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?vie(s,t):void 0;return n?ds(i,s.title,o):i??s.title??o}function yie(e){if(nx(e)&&e.axis)return e.axis;if(JHe(e)&&e.legend)return e.legend;if(mie(e)&&e.header)return e.header}function vie(e,t){return tqe(e,t)}function _6(e){if(ZHe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=yie(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Bbn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(gie(e)&&De(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Fy(n)&&!km(n))return"quantitative";if(B_(e)&&((s=e.scale)!=null&&s.type))switch(qW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Lh(e){if(Ze(e))return e;if(L8(e))return e.condition}function Bs(e){if(vn(e))return e;if(XO(e))return e.condition}function rqe(e,t,n,r={}){if(vt(e)||dr(e)||Py(e)){const i=vt(e)?"string":dr(e)?"number":"boolean";return Qe(z1n(t,i,e)),{value:e}}return vn(e)?b6(e,t,n,r):XO(e)?{...e,condition:b6(e.condition,t,n,r)}:e}function b6(e,t,n,r){if(ZHe(e)){const{format:i,formatType:s,...o}=e;if(n_(s)&&!n.customFormatTypes)return Qe(vbe(t)),b6(o,t,n,r)}else{const i=nx(e)?"axis":JHe(e)?"legend":mie(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(n_(o)&&!n.customFormatTypes)return Qe(vbe(t)),b6({...e,[i]:a},t,n,r)}}return Ze(e)?_ie(e,t,r):zbn(e)}function zbn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=dr(n)?"quantitative":vt(n)?"nominal":L_(n)?"temporal":void 0,{...e,type:t}}function _ie(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Wre(r)&&!Fy(r)&&!km(r)&&(Qe(V1n(r)),delete a.aggregate),i&&(a.timeUnit=co(i)),o&&(a.field=`${o}`),pi(s)&&(a.bin=F8(s,t)),Co(s)&&!hs(t)&&Qe(w_n(t)),tu(a)){const{type:u}=a,l=W_n(u);u!==l&&(a.type=l),u!=="quantitative"&&nHe(r)&&(Qe(U1n(u,r)),a.type="quantitative")}else if(!XVe(t)){const u=Bbn(a,t);a.type=u}if(tu(a)){const{compatible:u,warning:l}=Ubn(a,t)||{};u===!1&&Qe(l)}if(gie(a)&&vt(a.sort)){const{sort:u}=a;if(Sbe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Sbe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(mie(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function F8(e,t){return Py(e)?{maxbins:lbe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:lbe(t)}:e}const mb={compatible:!0};function Ubn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case rm:case im:case b8:return v6(e)?mb:{compatible:!1,warning:G1n(t)};case Mi:case go:case $y:case pS:case Ku:case Jh:case Zh:case VO:case HO:case w8:case Z1:case E8:case x8:case N_:case Vc:case rd:case S8:return mb;case sd:case kc:case id:case od:return n!==t_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:mb;case Jm:case Ny:case Dy:case My:case Qm:case Xm:case Km:case nd:case Qh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:mb;case Xu:case Ly:return!v6(e)&&!Dbn(e)?{compatible:!1,warning:Y1n(t)}:mb;case QE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:mb}}function rx(e){const{formatType:t}=_6(e);return t==="time"||!t&&Vbn(e)}function Vbn(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function j8(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=co(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return WO(e)?a=e.expr:Mt(e)?a=e.signal:L_(e)?(o=!0,a=e_(e)):(vt(e)||dr(e))&&o&&(a=`datetime(${Kr(e)})`,$_n(s)&&(dr(e)&&e<1e4||vt(e)&&isNaN(Date.parse(e)))&&(a=e_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Kr(e)}function iqe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!F_(e.timeUnit)?e.timeUnit:void 0,s=j8(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function QO(e,t){return pi(e.bin)?Zm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Abe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function JO(e){return e==null?void 0:e.condition}const sqe=["domain","grid","labels","ticks","title"],Hbn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},oqe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},qbn={...oqe,style:1,labelExpr:1,encoding:1};function Ibe(e){return!!qbn[e]}const Wbn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},aqe=We(Wbn);function eg(e){return"mark"in e}class B8{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return eg(t)?Ibn(t.mark)===this.name:!1}}function g1(e,t){const n=e&&e[t];return n?De(n)?Q1(n,r=>!!r.field):Ze(n)||L8(n):!1}function uqe(e,t){const n=e&&e[t];return n?De(n)?Q1(n,r=>!!r.field):Ze(n)||np(n)||XO(n):!1}function lqe(e,t){if(hs(t)){const n=e[t];if((Ze(n)||np(n))&&(PHe(n.type)||Ze(n)&&n.timeUnit)){const r=Ure(t);return uqe(e,r)}}return!1}function bie(e){return Q1(Gvn,t=>{if(g1(e,t)){const n=e[t];if(De(n))return Q1(n,r=>!!r.aggregate);{const r=Lh(n);return r&&!!r.aggregate}}return!1})}function cqe(e,t){const n=[],r=[],i=[],s=[],o={};return wie(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=yie(a),m=p==null?void 0:p.title;let g=st(a,{forAs:!0});const y={...m?[]:{title:Uw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Fy(c)?(v="argmax",g=st({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):km(c)?(v="argmin",g=st({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),tu(a)&&pi(f)){if(r.push({bin:f,field:l,as:g}),n.push(st(a,{binSuffix:"end"})),QO(a,u)&&n.push(st(a,{binSuffix:"range"})),hs(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",XVe(u)||(y.type=t_)}else if(d&&!F_(d)){i.push({timeUnit:d,field:l,as:g});const v=tu(a)&&a.type!==ZE&&"time";v&&(u===VO||u===Z1?y.formatType=v:r1n(u)?y.legend={formatType:v,...y.legend}:hs(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Gbn(e,t,n){const r=s1n(t,n);if(r){if(r==="binned"){const i=e[t===nd?Mi:go];return!!(Ze(i)&&Ze(e[t])&&Co(i.bin))}}else return!1;return!0}function Ybn(e,t,n,r){const i={};for(const s of We(e))KVe(s)||Qe(W1n(s));for(let s of Zvn){if(!e[s])continue;const o=e[s];if(qO(s)){const a=Jvn(s),u=i[a];if(Ze(u)&&q_n(u.type)&&Ze(o)&&!u.timeUnit){Qe(B1n(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Qe(j1n),s=Vc),!Gbn(e,s,t)){Qe(I8(s,t));continue}if(s===Qm&&t==="line"){const a=Lh(e[s]);if(a!=null&&a.aggregate){Qe(q1n);continue}}if(s===Ku&&(n?"fill"in e:"stroke"in e)){Qe(pHe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===HO||s===QE&&!De(o)&&!Hf(o)||s===Z1&&De(o)){if(o){if(s===QE){const a=e[s];if(QHe(a)){i[s]=a;continue}}i[s]=yt(o).reduce((a,u)=>(Ze(u)?a.push(_ie(u,s)):Qe(HW(u,s)),a),[])}}else{if(s===Z1&&o===null)i[s]=null;else if(!Ze(o)&&!np(o)&&!Hf(o)&&!M8(o)&&!Mt(o)){Qe(HW(o,s));continue}i[s]=rqe(o,s,r)}}return i}function z8(e,t){const n={};for(const r of We(e)){const i=rqe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Kbn(e){const t=[];for(const n of We(e))if(g1(e,n)){const r=e[n],i=yt(r);for(const s of i)Ze(s)?t.push(s):L8(s)&&t.push(s.condition)}return t}function wie(e,t,n){if(e)for(const r of We(e)){const i=e[r];if(De(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Xbn(e,t,n,r){return e?We(e).reduce((i,s)=>{const o=e[s];return De(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function fqe(e,t){return We(t).reduce((n,r)=>{switch(r){case Mi:case go:case E8:case S8:case x8:case nd:case Qh:case $y:case pS:case Vc:case Xm:case rd:case Km:case id:case sd:case od:case kc:case VO:case Xu:case N_:case Z1:return n;case QE:if(e==="line"||e==="trail")return n;case HO:case w8:{const i=t[r];if(De(i)||Ze(i))for(const s of yt(i))s.aggregate||n.push(st(s,{}));return n}case Qm:if(e==="trail")return n;case Ku:case Jh:case Zh:case Jm:case Ny:case Dy:case Ly:case My:{const i=Lh(t[r]);return i&&!i.aggregate&&n.push(st(i,{})),n}}},[])}function Qbn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(De(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return De(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function YW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Eie(t)}`:"";return{field:o+t.field,type:t.type,title:Mt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Kbn(n).map($bn);return{tooltip:[...i,...Qd(s,Gn)]}}function Eie(e){const{title:t,field:n}=e;return ds(t,n)}function xie(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Eie(n);return dqe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...vt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function dqe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Mh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Py(e[t])?{}:e[t]}}]:[]}function hqe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:oR(s,n),continuousAxisChannelDef2:oR(o,n),continuousAxisChannelDefError:oR(a,n),continuousAxisChannelDefError2:oR(u,n),continuousAxis:i}}function oR(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Qe(b_n(n,t)),r}else return e}function pqe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Mh(n)&&n.orient)return n.orient;if(r0(i)){if(r0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return rx(s)&&!rx(i)?"horizontal":"vertical"}return"horizontal"}else{if(r0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const w6="boxplot",Jbn=["box","median","outliers","rule","ticks"],Zbn=new B8(w6,gqe);function mqe(e){return dr(e)?"tukey":e}function gqe(e,{config:t}){e={...e,encoding:z8(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Mh(n)?n:{type:n};i&&Qe(dHe("boxplot"));const u=a.extent??t.boxplot.extent,l=Cr("size",a,t),c=a.invalid,f=mqe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=ewn(e,u,t),b=hS(m.field),{color:T,size:A,...I}=_,k=Ye=>xie(a,g,m,Ye,t.boxplot),$=k(I),P=k(_),N=(_t(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=k({...I,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...T||{value:N}}}}),z=YW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),W={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},V=f==="min-max"?z:YW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),G=[...$({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...$({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...$({partName:"ticks",mark:W,positionPrefix:"lower_whisker",extraEncoding:V}),...$({partName:"ticks",mark:W,positionPrefix:"upper_whisker",extraEncoding:V})],M=[...f!=="tukey"?G:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:z}),...F({partName:"median",mark:{type:"tick",invalid:c,..._t(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:z})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:M};const H=`datum["lower_box_${m.field}"]`,Y=`datum["upper_box_${m.field}"]`,L=`(${Y} - ${H})`,B=`${H} - ${u} * ${L}`,q=`${Y} + ${u} * ${L}`,Z=`datum["${m.field}"]`,ue={joinaggregate:yqe(m.field),groupby:y},he={transform:[{filter:`(${B} <= ${Z}) && (${Z} <= ${q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${b}`},{op:"max",field:m.field,as:`upper_whisker_${b}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${b}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${b}`},...v],groupby:y}],layer:G},{tooltip:fe,...me}=I,{scale:_e,axis:ge}=m,Be=Eie(m),Me=Fu(ge,["title"]),ct=dqe(a,"outliers",t.boxplot,{transform:[{filter:`(${Z} < ${B}) || (${Z} > ${q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Be!==void 0?{title:Be}:{},..._e!==void 0?{scale:_e}:{},...Yr(Me)?{}:{axis:Me}},...me,...T?{color:T}:{},...S?{tooltip:S}:{}}})[0];let Oe;const Re=[...d,...h,ue];return ct?Oe={transform:Re,layer:[ct,he]}:(Oe=he,Oe.transform.unshift(...Re)),{...o,layer:[Oe,{transform:p,layer:M}]}}function yqe(e){const t=hS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function ewn(e,t,n){const r=pqe(e,w6),{continuousAxisChannelDef:i,continuousAxis:s}=hqe(e,r,w6),o=i.field,a=hS(o),u=mqe(t),l=[...yqe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Qbn(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=cqe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Sie="errorbar",twn=["ticks","rule"],nwn=new B8(Sie,vqe);function vqe(e,{config:t}){e={...e,encoding:z8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=_qe(e,Sie,t);delete s.size;const c=xie(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function rwn(e,t){const{encoding:n}=e;if(iwn(n))return{orient:pqe(e,t),inputType:"raw"};const r=swn(n),i=own(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(vn(a)&&vn(u))throw new Error(`${t} cannot have both x2 and y2`);if(vn(a)){if(r0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(vn(u)){if(r0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(vn(u)&&!vn(a))throw new Error(`${t} cannot have xError2 without xError`);if(vn(c)&&!vn(l))throw new Error(`${t} cannot have yError2 without yError`);if(vn(a)&&vn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(vn(a)){if(r0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(vn(l)){if(r0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function iwn(e){return(vn(e.x)||vn(e.y))&&!vn(e.x2)&&!vn(e.y2)&&!vn(e.xError)&&!vn(e.xError2)&&!vn(e.yError)&&!vn(e.yError2)}function swn(e){return vn(e.x2)||vn(e.y2)}function own(e){return vn(e.xError)||vn(e.xError2)||vn(e.yError)||vn(e.yError2)}function _qe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Mh(r)?r:{type:r};s&&Qe(dHe(t));const{orient:l,inputType:c}=rwn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=hqe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=awn(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:b,...T}=i,{bins:A,timeUnits:I,aggregate:k,groupby:$,encoding:P}=cqe(T,n),N=[...k,...g],F=c!=="raw"?[]:$,z=YW(v,f,P,_);return{transform:[...a.transform??[],...A,...I,...N.length===0?[]:[{aggregate:N,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:z}}function awn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Qe(__n(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:UO(h)},{fieldPrefix:"upper_",titlePrefix:Obe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Obe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Uw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Uw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Uw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Qe(v_n(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:J1(J1(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Obe(e,t,n){return`${UO(e)} ${n} ${t}`}const Tie="errorband",uwn=["band","borders"],lwn=new B8(Tie,bqe);function bqe(e,{config:t}){e={...e,encoding:z8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=_qe(e,Tie,t),l=o,c=xie(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Qe(bbe("interpolate")):l.tension&&Qe(bbe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const wqe={};function Cie(e,t,n){const r=new B8(e,t);wqe[e]={normalizer:r,parts:n}}function cwn(){return We(wqe)}Cie(w6,gqe,Jbn);Cie(Sie,vqe,twn);Cie(Tie,bqe,uwn);const fwn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Eqe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},xqe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},dwn=We(Eqe),hwn=We(xqe),pwn={header:1,headerRow:1,headerColumn:1,headerFacet:1},Sqe=We(pwn),Tqe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],mwn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},gwn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},qf="_vgsid_",ywn={point:{on:"click",fields:[qf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Aie(e){return e==="legend"||!!(e!=null&&e.legend)}function sz(e){return Aie(e)&&_t(e)}function Iie(e){return!!(e!=null&&e.select)}function Cqe(e){const t=[];for(const n of e||[]){if(Iie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function vwn(e){return U8(e)||Pie(e)||Oie(e)}function Oie(e){return"concat"in e}function U8(e){return"vconcat"in e}function Pie(e){return"hconcat"in e}function Aqe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Fh(e){return _t(e)&&e.step!==void 0}function Pbe(e){return e.view||e.width||e.height}const kbe=20,_wn={align:1,bounds:1,center:1,columns:1,spacing:1},bwn=We(_wn);function wwn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(D8(e)&&!KO(e.facet)||Oie(e))&&(i.columns=o),U8(e)&&(i.columns=1);for(const a of bwn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=dr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function KW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function E6(e,t){const n=x6(e,t);return Fh(n)?n.step:Iqe}function x6(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ds(n,{step:e.step})}const Iqe=20,Ewn={continuousWidth:200,continuousHeight:200,step:Iqe},xwn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Ewn,mark:Ebn,arc:{},area:{},bar:Tbn,circle:{},geoshape:{},image:{},line:{},point:{},rect:Cbn,rule:{color:"black"},square:{},text:{color:"black"},tick:Abn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Q_n,projection:{},legend:mwn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:ywn,style:{},title:{},facet:{spacing:kbe},concat:{spacing:kbe},normalizedNumberFormat:".0%"},hp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Rbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},$be={blue:hp[0],orange:hp[1],red:hp[2],teal:hp[3],green:hp[4],yellow:hp[5],purple:hp[6],pink:hp[7],brown:hp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Swn(e={}){return{signals:[{name:"color",value:_t(e)?{...$be,...e}:$be}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Twn(e){return{signals:[{name:"fontSize",value:_t(e)?{...Rbe,...e}:Rbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Cwn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Oqe(e){const t=We(e||{}),n={};for(const r of t){const i=e[r];n[r]=JO(i)?sHe(i):ml(i)}return n}function Awn(e){const t=We(e),n={};for(const r of t)n[r]=Oqe(e[r]);return n}const Iwn=[...qHe,...aqe,...Sqe,"background","padding","legend","lineBreak","scale","style","title","view"];function Pqe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=nS({},dn(xwn),n?Cwn(n):{},t?Swn(t):{},r?Twn(r):{},s||{});i&&rS(o,"selection",i,!0);const a=Fu(o,Iwn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=ml(o[u]));for(const u of qHe)o[u]&&(a[u]=xu(o[u]));for(const u of aqe)o[u]&&(a[u]=Oqe(o[u]));for(const u of Sqe)o[u]&&(a[u]=xu(o[u]));return o.legend&&(a.legend=xu(o.legend)),o.scale&&(a.scale=xu(o.scale)),o.style&&(a.style=Awn(o.style)),o.title&&(a.title=xu(o.title)),o.view&&(a.view=xu(o.view)),a}const Own=new Set(["view",...gbn]),Pwn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],kwn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...wbn};function Rwn(e){e=dn(e);for(const t of Pwn)delete e[t];if(e.axis)for(const t in e.axis)JO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of fwn)delete e.legend[t];if(e.mark){for(const t of xbe)delete e.mark[t];e.mark.tooltip&&_t(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Cqe(e.params)),delete e.params);for(const t of Own){for(const r of xbe)delete e[t][r];const n=kwn[t];if(n)for(const r of n)delete e[t][r];Nwn(e,t)}for(const t of cwn())delete e[t];$wn(e);for(const t in e)_t(e[t])&&Yr(e[t])&&delete e[t];return Yr(e)?void 0:e}function $wn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=iHe(e.title);Yr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Yr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Yr(r)?delete e.title:e.title=r}function Nwn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Yr(s)||(e.style[n??t]=s),delete e[t]}function V8(e){return"layer"in e}function Dwn(e){return"repeat"in e}function Mwn(e){return!De(e.repeat)&&e.repeat.layer}class kie{map(t,n){return D8(t)?this.mapFacet(t,n):Dwn(t)?this.mapRepeat(t,n):Pie(t)?this.mapHConcat(t,n):U8(t)?this.mapVConcat(t,n):Oie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(V8(t))return this.mapLayer(t,n);if(eg(t))return this.mapUnit(t,n);throw new Error(Gre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Lwn={zero:1,center:1,normalize:1};function Fwn(e){return e in Lwn}const jwn=new Set([UHe,k8,P8,g6,$8,hie,pie,R8,VHe,die]),Bwn=new Set([k8,P8,UHe]);function gb(e){return Ze(e)&&tx(e)==="quantitative"&&!e.bin}function Nbe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(gb(o)&&gb(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(gb(o))return t;if(gb(a))return i}else{if(gb(o))return s&&n==="vertical"?void 0:t;if(gb(a))return s&&n==="horizontal"?void 0:i}}function zwn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function kqe(e,t){var m,g;const n=Mh(e)?e:{type:e},r=n.type;if(!jwn.has(r))return null;const i=Nbe(t,"x",n)||Nbe(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?st(s,{}):void 0,a=zwn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?st(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?st(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=e1n.reduce((y,v)=>{if(v!=="tooltip"&&g1(t,v)){const _=t[v];for(const w of yt(_)){const E=Lh(w);if(E.aggregate)continue;const S=st(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Py(s.stack)?p=s.stack?"zero":null:p=s.stack:Bwn.has(r)&&(p="zero"),!p||!Fwn(p)||bie(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==ju.LINEAR&&s!=null&&s.stack&&Qe(m_n(s.scale.type)),vn(t[ep(i)])?(s.stack!==void 0&&Qe(p_n(i)),null):(Ze(s)&&s.aggregate&&!d1n.has(s.aggregate)&&Qe(g_n(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:j_(r),stackBy:h,offset:p}))}function Rqe(e,t,n){const r=xu(e),i=Cr("orient",r,n);if(r.orient=qwn(r.type,t,i),i!==void 0&&i!==r.orient&&Qe(J1n(r.orient,i)),r.type==="bar"&&r.orient){const u=Cr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Sbn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Cr("opacity",r,n),o=Cr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Vwn(r.type,t)),Cr("cursor",r,n)===void 0&&(r.cursor=Uwn(r,t,n)),r}function Uwn(e,t,n){return t.href||e.href||Cr("href",e,n)?"pointer":e.cursor}function Vwn(e,t){if(Yn([$8,die,hie,pie],e)&&!bie(t))return .7}function Hwn(e,t,{graticule:n}){if(n)return!1;const r=Rm("filled",e,t),i=e.type;return ds(r,i!==$8&&i!==R8&&i!==g6)}function qwn(e,t,n){switch(e){case $8:case hie:case pie:case VHe:case pbn:case hbn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case k8:if(Ze(r)&&(Co(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Co(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===t_&&!pi(r.bin)||y6(r))&&Ze(i)&&Co(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===t_&&!pi(i.bin)||y6(i))&&Ze(r)&&Co(r.bin)?"vertical":"horizontal"}case g6:if(s&&!(Ze(r)&&Co(r.bin))&&o&&!(Ze(i)&&Co(i.bin)))return;case P8:if(o)return Ze(i)&&Co(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Co(r.bin)?"vertical":"horizontal";if(e===g6){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case R8:case die:{const a=Cbe(r),u=Cbe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=tu(r)&&r.type===ZE,c=tu(i)&&i.type===ZE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Wwn(e){const{point:t,line:n,...r}=e;return We(r).length>1?r:r.type}function Gwn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Fu(e[t],["point","line"])});return e}function oz(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?_t(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?_t(t.point)?t.point:{}:void 0}function Dbe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Ywn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(eg(t)){const{mark:r,encoding:i}=t,s=Mh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!oz(s,n[s.type],i);case"area":return!!oz(s,n[s.type],i)||!!Dbe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=z8(l,i),d=Mh(a)?a:{type:a},h=oz(d,i[d.type],f),p=d.type==="area"&&Dbe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Wwn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Fu(f,["shape"])}],g=kqe(Rqe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Fu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...KE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...KE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Gwn(i)})}}function Kwn(e,t){return t?KO(e)?Nqe(e,t):$qe(e,t):e}function az(e,t){return t?Nqe(e,t):e}function XW(e,t,n){const r=t[e];if(kbn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Qe(R1n(r.repeat));return}return t}function $qe(e,t){if(e=XW("field",e,t),e!==void 0){if(e===null)return null;if(gie(e)&&fh(e.sort)){const n=XW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Mbe(e,t){if(Ze(e))return $qe(e,t);{const n=XW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Lbe(e,t){if(vn(e)){const n=Mbe(e,t);if(n)return n;if(M8(e))return{condition:e.condition}}else{if(XO(e)){const n=Mbe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function Nqe(e,t){const n={};for(const r in e)if(Wt(e,r)){const i=e[r];if(De(i))n[r]=i.map(s=>Lbe(s,t)).filter(s=>s);else{const s=Lbe(i,t);s!==void 0&&(n[r]=s)}}return n}class Xwn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(eg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Mh(r)&&r.type==="line")for(const i of Qvn){const s=D_(i),o=n[s];if(n[i]&&(Ze(o)&&!Co(o.bin)||np(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Qe(Q1n(!!i.x2,!!i.y2)),r({...t,mark:_t(s)?{...s,type:"rule"}:"rule"},n)}}class Qwn extends kie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Zbn,nwn,lwn,new Ywn,new Xwn]}map(t,n){if(eg(t)){const r=g1(t.encoding,rm),i=g1(t.encoding,im),s=g1(t.encoding,b8);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=az(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Mwn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Di(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!De(r)&&t.columns&&(t=Fu(t,["columns"]),Qe(gbe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!De(r)&&r.row||[u?u.row:null],f=!De(r)&&r.column||[u?u.column:null],d=De(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(De(r)?`${Di(p)}`:(r.row?`row_${Di(m)}`:"")+(r.column?`column_${Di(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Fu(_,["data"]))}const h=De(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return KO(r)&&t.columns&&(t=Fu(t,["columns"]),Qe(gbe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=jbe({parentProjection:o,projection:i}),l=Fbe({parentEncoding:s,encoding:az(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=az(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Qe(K1n([...r?[rm]:[],...i?[im]:[]]));const o={},a={};for(const u of[rm,im]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Kwn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Fbe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:jbe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Fbe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...We(e),...We(t)]);for(const s of i){const o=t[s],a=e[s];if(vn(o)){const u={...a,...o};r[s]=u}else XO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Hf(a)||Mt(a)||vn(a)||De(a))&&(r[s]=a)}}else r=t;return!r||Yr(r)?void 0:r}function jbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Qe(F1n({parentProjection:t,projection:n})),n??t}function Rie(e){return"filter"in e}function Jwn(e){return(e==null?void 0:e.stop)!==void 0}function Dqe(e){return"lookup"in e}function Zwn(e){return"data"in e}function eEn(e){return"param"in e}function tEn(e){return"pivot"in e}function nEn(e){return"density"in e}function rEn(e){return"quantile"in e}function iEn(e){return"regression"in e}function sEn(e){return"loess"in e}function oEn(e){return"sample"in e}function aEn(e){return"window"in e}function uEn(e){return"joinaggregate"in e}function lEn(e){return"flatten"in e}function cEn(e){return"calculate"in e}function Mqe(e){return"bin"in e}function fEn(e){return"impute"in e}function dEn(e){return"timeUnit"in e}function hEn(e){return"aggregate"in e}function pEn(e){return"stack"in e}function mEn(e){return"fold"in e}function gEn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function yEn(e){return e.map(t=>Rie(t)?{filter:Bw(t.filter,H_n)}:t)}class vEn extends kie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Bbe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Bbe(t,n),t.encoding){const r={};for(const[i,s]of ly(t.encoding))r[i]=Lqe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:ly(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Bbe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Rie(s))return{filter:QW(s,t)};if(Mqe(s)&&M_(s.bin))return{...s,bin:Fqe(s.bin)};if(Dqe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function Lqe(e,t){var r,i;const n=dn(e);if(Ze(n)&&M_(n.bin)&&(n.bin=Fqe(n.bin)),B_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(M8(n))if(De(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:QW(s,t)}});else{const{selection:s,param:o,test:a,...u}=Lqe(n.condition,t);n.condition=o?n.condition:{...u,test:QW(n.condition,t)}}return n}function Fqe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function QW(e,t){const n=r=>Bw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Bw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class JW extends kie{map(t,n){const r=n.selections??[];if(t.params&&!eg(t)){const i=[];for(const s of t.params)Iie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(vt(a)&&(a===t.name||i.includes(a))||De(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=JW.prototype[e];JW.prototype[e]=function(n,r){return t.call(this,n,_En(n,r))}}function _En(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function jqe(e,t){t===void 0&&(t=Pqe(e.config));const n=xEn(e,t),{width:r,height:i}=e,s=SEn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const bEn=new Qwn,wEn=new vEn,EEn=new JW;function xEn(e,t={}){const n={config:t};return EEn.map(bEn.map(wEn.map(e,n),n),n)}function zbe(e){return vt(e)?{type:e}:e??{}}function SEn(e,t,n){let{width:r,height:i}=t;const s=eg(e)||V8(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Qe(dbe("width")),r=void 0),i=="container"&&(Qe(dbe("height")),i=void 0));const a={type:"pad",...o,...n?zbe(n.autosize):{},...zbe(e.autosize)};if(a.type==="fit"&&!s&&(Qe(w1n),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Qe(hbe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Qe(hbe("height")),!El(a,{type:"pad"}))return a}function TEn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function CEn(e){return e?`fit-${T8(e)}`:"fit"}const AEn=["background","padding"];function Ube(e,t){const n={};for(const r of AEn)e&&e[r]!==void 0&&(n[r]=ml(e[r]));return t&&(n.params=e.params),n}class tg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new tg(dn(this.explicit),dn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ds(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of We(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Td(e){return{explicit:!0,value:e}}function al(e){return{explicit:!1,value:e}}function Bqe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:H8(t,n,r,i)}}function H8(e,t,n,r){return e.explicit&&t.explicit&&Qe(a_n(n,r,e.value,t.value)),e}function dy(e,t,n,r,i=H8){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:El(e.value,t.value)?e:i(e,t,n,r)}class IEn extends tg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function ix(e){return"url"in e}function rI(e){return"values"in e}function zqe(e){return"name"in e&&!ix(e)&&!rI(e)&&!I0(e)}function I0(e){return e&&(Uqe(e)||Vqe(e)||$ie(e))}function Uqe(e){return"sequence"in e}function Vqe(e){return"sphere"in e}function $ie(e){return"graticule"in e}var ki;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ki||(ki={}));function Hqe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Pc(i.field),i}function i_(e,t=!0,n=Ca){if(De(e)){const r=e.map(i=>i_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(L_(e))return n(t?e_(e):R_n(e));return t?n(Kr(e)):e}function OEn(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${py}, ${n.resolve==="global"?"true":`{unit: ${y1(e)}}`}`;for(const s of Y8)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+axn,on:[{events:{signal:n.name+py},update:`modify(${nt(n.name+s_)}, ${i})`}]})}return Nie(t)}function PEn(e,t){if(e.component.selection&&We(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ry("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Nie(t)}function kEn(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=nt(i+s_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${uWe}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of Y8)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Nie(t)}function REn(e,t){const n=[...t],r=y1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+s_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:qf}}]),i.init){const a=i.project.items.map(Hqe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[qf]:i_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:i_(u,!1)}))}n.filter(a=>a.name===i.name+s_).length||n.push(s)}return n}function qqe(e,t){for(const n of Mo(e.component.selection??{}))for(const r of Y8)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function $En(e,t){for(const n of e.children)Qi(n)&&(t=qqe(n,t));return t}function NEn(e,t,n,r){const i=hWe(e,t.param,t);return{signal:Bl(n.get("type"))&&De(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Nie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Vr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Qe(D1n);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Bu extends Vr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${zVe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function uz(e){return e.as!==void 0}function Vbe(e){return`${e}_end`}class dh extends Vr{clone(){return new dh(null,dn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(F_(u)){if(Qi(n)){const{mark:c,markDef:f,config:d}=n,h=fy({fieldDef:s,markDef:f,config:d});(nI(c)||h)&&(l={timeUnit:co(u),field:a})}}else l={as:st(s,{forAs:!0}),field:a,timeUnit:u};if(Qi(n)){const{mark:c,markDef:f,config:d}=n,h=fy({fieldDef:s,markDef:f,config:d});nI(c)&&hs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Gn(l)]=l)}return i},{});return Yr(r)?null:new dh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=co(r),o={...i,timeUnit:s};return new dh(t,{[Gn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of ly(this.timeUnits)){const s=uz(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>uz(t)?t.as:Vbe(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Gn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=co(n.timeUnit);if(uz(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Pc(s),type:"timeunit",...a?{units:O8(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Hbe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=Wqe({timeUnit:i,field:o}),u=Vbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...Hbe([o,u],r,i))}}return t}}const q8="offsetted_rect_start",W8="offsetted_rect_end";function Wqe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=xHe(r),{part:o,step:a}=AHe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Hbe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:qbe([Wqe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${q8}`},{type:"formula",expr:qbe([i,s],n+.5),as:`${e}_${W8}`}]}return[]}function qbe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const ZO="_tuple_fields";class DEn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const MEn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new DEn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Di(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Di(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?yt(n.value):null;let{fields:d,encodings:h}=_t(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(_t(p))for(const m of We(p))Xvn(m)?(h||(h=[])).push(m):l==="interval"?(Qe(k1n),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Qe(E1n(p,m.aggregate));continue}else if(!g){Qe(mbe(p));continue}if(m.timeUnit&&!F_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Gn(y)]=y}if(!s[g]){const y=l==="interval"&&Zm(p)&&Bl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===qf,GVe(p)?(v.geoChannel=p,v.channel=WVe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Qe(mbe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===qf}f&&(t.init=f.map(p=>i.items.map(m=>_t(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Yr(o)||(i.timeUnit=new dh(null,o))},signals:(e,t,n)=>{const r=t.name+ZO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(Hqe)})}},sm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Zm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Qe(C1n),!s||!Bl(o)){Qe(T1n);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Wbe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(uWe)>=0)i.update=`{${r.map(o=>`${nt(Pc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt(Pc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Wbe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function ZW(e,t){return`domain(${nt(e.scaleName(t))})`}function Wbe(e){return e.parent&&bS(e.parent)&&!e.parent.parent}const Vw="_brush",Gqe="_scale_trigger",ST="geo_interval_init_tick",Yqe="_init",LEn="_center",FEn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={..._t(n.select)?n.select:{}};i.fields=[qf],i.encodings||(i.encodings=n.value?We(n.value):[sd,id]),n.select={type:"interval",...i}}if(t.translate&&!sm.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+Vw)}`;for(const s of t.events){if(!s.between){Qe(`${s} is not an ordered event stream for interval selections.`);continue}const o=yt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+py,s=Mo(t.project.hasChannel).filter(a=>a.channel===Mi||a.channel===go),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(jEn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+LEn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+Yqe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${y1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:ST}]:[]],update:_}]})}else{if(!sm.defined(t)){const l=r+Gqe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Bl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${y1(e)}, fields: ${r+ZO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${i_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Qi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===ST).length||n.unshift({name:ST,value:null,on:[{events:"timer{1}",update:`${ST} === null ? {} : ${ST}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+s_)})`;if(sm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of We(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${y1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=We(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Vw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Vw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function jEn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Mi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=sm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:i_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+Gqe},update:Bl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:i_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Mi?0:1,h=t.name+Yqe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const BEn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+ZO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Vw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${y1(e)}, `;if(t.project.hasSelectionId)l+=`${qf}: ${o}[${nt(qf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+py,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function gS(e,t,n,r){const i=M8(t)&&t.condition,s=r(t);if(i){const a=yt(i).map(u=>{const l=r(u);if(Pbn(u)){const{param:c,empty:f}=u;return{test:dWe(e,{param:c,empty:f}),...l}}else return{test:C6(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Die(e,t="text"){const n=e.encoding[t];return gS(e,n,t,r=>G8(r,e.config))}function G8(e,t,n="datum"){if(e){if(Hf(e))return Ei(e.value);if(vn(e)){const{format:r,formatType:i}=_6(e);return fie({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Kqe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(De(o))return{tooltip:Gbe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return gS(e,o,"tooltip",u=>{const l=G8(u,i,a);if(l)return l;if(u===null)return;let c=Cr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),vt(c))return{value:c};if(_t(c))return Mt(c)?c:c.content==="encoding"?Gbe(n,s,i,t):{signal:a}})}}function Xqe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=D_(f),h=tu(c)?c:{...c,type:e[d].type},p=h.title||vie(h,i),m=yt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(hs(f)){const y=f==="x"?"x2":"y2",v=Lh(e[y]);if(Co(h.bin)&&v){const _=st(h,{expr:o}),w=st(v,{expr:o}),{format:E,formatType:S}=_6(h);g=YO(_,w,E,S,i),s[y]=!0}}if((hs(f)||f===Vc||f===rd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=_6(h);g=fie({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=G8(h,i,o).signal),a.push({channel:f,key:m,value:g})}wie(e,(c,f)=>{Ze(c)?u(c,f):L8(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Gbe(e,t,n,{reactiveGeom:r}={}){const i=Xqe(e,t,n,{reactiveGeom:r}),s=ly(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function zEn(e){const{markDef:t,config:n}=e,r=Cr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...UEn(e),...VEn(e)}}function UEn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Cr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in v1n?{}:{ariaRoleDescription:{value:t}}}function VEn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return gS(e,s,"description",u=>G8(u,e.config));const o=Cr("description",n,r);if(o!=null)return{description:Ei(o)};if(r.aria===!1)return{};const a=Xqe(t,i,r);if(!Yr(a))return{description:{signal:ly(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function ro(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Cr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Ei(u)));const l=i[e];return gS(t,l,o??e,c=>cie({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function Qqe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Cr("filled",n,i),a=Yn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Cr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Cr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Ei(u)}:{},...l?{stroke:Ei(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Qe(pHe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ro("color",e,{vgChannel:c,defaultValue:o?u:l}),...ro("fill",e,{defaultValue:r.fill?u:void 0}),...ro("stroke",e,{defaultValue:r.stroke?l:void 0})}}function HEn(e){const{encoding:t,mark:n}=e,r=t.order;return!j_(n)&&Hf(r)?gS(e,r,"zindex",i=>Ei(i.value)):{}}function sx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:cie({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Ei(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ga(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[ep(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=sx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Mie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&hs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:qEn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function qEn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(vn(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return m6({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return m1(n,r,{suffix:"end"},{offset:s})}return uie(e)}function Mie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=D_(n),u=cy(n),l=Cr(n,s,o,{vgChannel:u});if(l!==void 0)return vC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Yn([ju.LOG,ju.TIME,ju.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Qu(n)],mult:.5}}}}const WEn={left:"x",center:"xc",right:"x2"},GEn={top:"y",middle:"yc",bottom:"y2"};function Jqe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return cy(e);const i=e==="x"?"align":"baseline",s=Cr(i,t,n);let o;return Mt(s)?(Qe(X1n(i)),o=void 0):o=s,e==="x"?WEn[o||(r==="top"?"left":"center")]:GEn[o||r]}function S6(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Zqe(e,t,{defaultPos:n,defaultPos2:r}):ga(e,t,{defaultPos:n})}function Zqe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ep(e),a=Qu(e),u=YEn(t,r,o),l=u[a]?Jqe(e,i,s):cy(e);return{...ga(e,t,{defaultPos:n,vgChannel:l}),...u}}function YEn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=D_(n),l=Qu(n),c=cy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?sx({channel:n,markDef:s,encoding:r,model:e}):sx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Qu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=KEn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:aR(n,s)||aR(n,{[n]:h6(n,s,a.style),[l]:h6(l,s,a.style)})||aR(n,a[i])||aR(n,a.mark)||{[c]:Mie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function KEn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return vn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?m1(t,s,{suffix:"start"},{offset:u}):uie({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function aR(e,t){const n=Qu(e),r=cy(e);if(t[r]!==void 0)return{[r]:vC(e,t[r])};if(t[e]!==void 0)return{[r]:vC(e,t[e])};if(t[n]){const i=t[n];if(r_(i))Qe(H1n(n));else return{[n]:vC(e,i)}}}function hy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ep(t),a=Qu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Cr("size",i,n,{vgChannel:a}),p=QVe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(pi(u.bin)||Co(u.bin)||u.timeUnit&&!l)&&!(h&&!r_(h))&&!r[p]&&!ho(f)?JEn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(vn(u)&&ho(f)||m)&&!l?QEn(u,t,e):Zqe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function XEn(e,t,n,r,i,s,o){if(r_(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Rm("minBandSize",{type:o},r);return{signal:c?`max(${wf(c)}, ${l})`:l}}else i.band!==1&&(Qe(e_n(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Mt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(jy(u)&&dr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ds(u,o==="bar"?l:c);if(Mt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(dr(f))return{signal:`${1-f} * ${e}`}}return{value:E6(r.view,e)-2}}function QEn(e,t,n){var A,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Qu(t),f=ep(t),d=QVe(t),h=n.scaleName(d),p=n.getScaleComponent(Ure(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=ro("size",n,{vgChannel:c,defaultRef:Ei(r.size)}):Qe(i_n(r.type)));const y=!!g,v=KHe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:XEn(c,h||u,p||l,s,v,!!e,r.type)};const _=((I=l||p)==null?void 0:I.get("type"))==="band"&&r_(v)&&!y?"top":"middle",w=Jqe(t,r,s,_),E=w==="xc"||w==="yc",{offset:S,offsetType:b}=sx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),T=uie({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:Mie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?b==="encoding"?0:.5:Mt(v)?{signal:`(1-${v})/2`}:r_(v)?(1-v.band)/2:0});if(c)return{[w]:T,...g};{const k=cy(f),$=g[c],P=S?{...$,offset:S}:$;return{[w]:T,[k]:De(T)?[T[0],{...T[1],offset:P}]:{...T,offset:P}}}}function Ybe(e,t,n,r,i,s,o){if(qVe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Mt(n)||Mt(i)||Mt(r)||s){const l=wf(n),c=wf(i),f=wf(r),d=wf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function JEn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=KHe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=hs(n)?Cr("binSpacing",s,i)??0:0,m=ep(n),g=cy(n),y=cy(m),v=Rm("minBandSize",s,i),{offset:_}=sx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=sx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=lbn({fieldDef:e,scaleName:u}),S=Ybe(n,p,c,h,_,v,E),b=Ybe(m,p,c,h,w??_,v,E),T=Mt(f)?{signal:`(1-${f.signal})/2`}:r_(f)?(1-f.band)/2:.5,A=fy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(pi(e.bin)||e.timeUnit){const k=e.timeUnit&&A!==.5;return{[y]:Kbe({fieldDef:e,scaleName:u,bandPosition:T,offset:b,useRectOffsetField:k}),[g]:Kbe({fieldDef:e,scaleName:u,bandPosition:Mt(T)?{signal:`1-${T.signal}`}:1-T,offset:S,useRectOffsetField:k})}}else if(Co(e.bin)){const k=m1(e,u,{},{offset:b});if(Ze(t))return{[y]:k,[g]:m1(t,u,{},{offset:S})};if(M_(e.bin)&&e.bin.step)return{[y]:k,[g]:{signal:`scale("${u}", ${st(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Qe(yHe(m))}function Kbe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return m6({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:q8,endSuffix:W8}:{}})}const ZEn=new Set(["aria","width","height"]);function Hc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Qqe(e):{};return{...exn(e.markDef,t),...Xbe(e,"fill",n),...Xbe(e,"stroke",r),...ro("opacity",e),...ro("fillOpacity",e),...ro("strokeOpacity",e),...ro("strokeWidth",e),...ro("strokeDash",e),...HEn(e),...Kqe(e),...Die(e,"href"),...zEn(e)}}function Xbe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Cr("invalid",s,r)==="hide"&&n&&!j_(i)){const a=txn(e,{invalid:!0,channels:C8});if(a)return{[t]:[{test:a,value:null},...yt(n)]}}return n?{[t]:n}:{}}function exn(e,t){return y1n.reduce((n,r)=>(!ZEn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Ei(e[r])),n),{})}function txn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Bl(u)&&(s[l]=!0)}return s},{}),i=We(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>lie(o,t)).join(` ${s} `)}}function Lie(e){const{config:t,markDef:n}=e;if(Cr("invalid",n,t)){const i=nxn(e,{channels:tp});if(i)return{defined:{signal:i}}}return{}}function nxn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Bl(l)&&(s[c]=!0)}return s},{}),i=We(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>lie(o,t)).join(` ${s} `)}}function Qbe(e,t){if(t!==void 0)return{[e]:Ei(t)}}const lz="voronoi",eWe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(lz)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(j_(s))return Qe(x1n(s)),n;const o={name:e.getName(lz),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Kqe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(lz)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},tWe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Aie(e.bind),parse:(e,t,n)=>lWe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=eWe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Di(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:i_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+py)[0],o=r+ZO,a=i.items.map(l=>Di(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},T6="_toggle",nWe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+T6,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+py,r=t.name+T6;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${y1(e)}}, `)+`${r} ? ${n} : null`}},rxn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=vt(t.clear)?Ry(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(tWe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Di(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+py);r(i,"null"),nWe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+T6),r(i,"false"))}return n}},rWe={defined:e=>{const t=e.resolve==="global"&&e.bind&&Aie(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==qf;return t&&!n&&Qe(A1n),t&&n},parse:(e,t,n)=>{const r=dn(n);if(r.select=vt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},lWe(t,r),_t(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=yt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=sz(t.bind)?t.bind.legend:"click",s=vt(i)?Ry(i,"view"):yt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=sz(t.bind)&&t.bind.legend,s=o=>a=>{const u=dn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Di(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+py),o=r+ZO,a=i.items.filter(d=>d.hasLegend).map(d=>Di(`${r}_${Di(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+T6),f=sz(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function ixn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&rWe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const iWe="_translate_anchor",sWe="_translate_delta",sxn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=sm.defined(t),s=r+iWe,{x:o,y:a}=t.project.hasChannel;let u=Ry(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Vw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?ZW(e,Mi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?ZW(e,go):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+sWe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Jbe(e,t,o,"width",n),a!==void 0&&Jbe(e,t,a,"height",n),n}};function Jbe(e,t,n,r,i){const s=t.name,o=s+iWe,a=s+sWe,u=n.channel,l=sm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Mi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const oWe="_zoom_anchor",aWe="_zoom_delta",oxn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=sm.defined(t),s=r+aWe,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(Mi)),l=nt(e.scaleName(go));let c=Ry(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Vw,f))),n.push({name:r+oWe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Zbe(e,t,o,"width",n),a!==void 0&&Zbe(e,t,a,"height",n),n}};function Zbe(e,t,n,r,i){const s=t.name,o=n.channel,a=sm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?ZW(e,o):u.name,h=s+aWe,p=`${s}${oWe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const s_="_store",py="_tuple",axn="_modify",uWe="vlSelectionResolve",Y8=[BEn,FEn,MEn,nWe,tWe,sm,rWe,rxn,sxn,oxn,eWe];function uxn(e){let t=e.parent;for(;t&&!Ol(t);)t=t.parent;return t}function y1(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=uxn(e);if(r){const{facet:i}=r;for(const s of mc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function Fie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function lWe(e,t){(vt(t.select)||!t.select.on)&&delete e.events,(vt(t.select)||!t.select.clear)&&delete e.clear,(vt(t.select)||!t.select.toggle)&&delete e.toggle}function eG(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...eG(e.object)),t.push(...eG(e.property))),t)}function cWe(e){return e.object.type==="MemberExpression"?cWe(e.object):e.object.name==="datum"}function fWe(e){const t=ire(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&cWe(r)&&n.add(eG(r).slice(1).join("."))}),n}class yS extends Vr{clone(){return new yS(null,this.model,dn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=C6(this.model,this.filter,this),this._dependentFields=fWe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function lxn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Di(i.name),o=i.select,a=vt(o)?o:o.type,u=_t(o)?dn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=dn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:vt(u.on)?Ry(u.on,"scope"):yt(dn(u.on))},f=dn(i);for(const d of Y8)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function dWe(e,t,n,r="datum"){const i=vt(t)?t:t.param,s=Di(i),o=nt(s+s_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function hWe(e,t,n){const r=Di(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Qe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Qe((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt(Pc(s))}]`}function cxn(e,t){for(const[n,r]of ly(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Bu(new yS(t,e,{param:n}),i,ki.Lookup,e.component.data.outputNodeRefCounts)}}function C6(e,t,n){return yC(t,r=>vt(r)?r:z_n(r)?dWe(e,r,n):OHe(r))}function fxn(e,t){if(e)return De(e)&&!Rg(e)?e.map(n=>vie(n,t)).join(", "):e}function cz(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function y2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Hbn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(JO(m)){const{condition:g,...y}=m,v=yt(g),_=Abe[h];if(_){const{vgProp:w,part:E}=_,S=[...v.map(b=>{const{test:T,...A}=b;return{test:C6(null,T),...A}}),y];cz(c,E,w,S),delete c[h]}else if(_===null){const w={signal:v.map(E=>{const{test:S,...b}=E;return`${C6(null,S)} ? ${fbe(b)} : `}).join("")+fbe(y)};c[h]=w}}else if(Mt(m)){const g=Abe[h];if(g){const{vgProp:y,part:v}=g;cz(c,v,y,m),delete c[h]}}Yn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Yr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ds(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Mt(c.encode.labels.update.text)&&(p=J1(a,"datum.label",c.encode.labels.update.text.signal)),cz(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of sqe)e.hasAxisPart(p)||delete c.encode[p];Yr(c.encode)&&delete c.encode}const h=fxn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ds(l,0)}}}}function pWe(e){const{axes:t}=e.component,n=[];for(const r of tp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function dxn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>y2(i,"grid",t)),...r.map(i=>y2(i,"grid",t)),...n.map(i=>y2(i,"main",t)),...r.map(i=>y2(i,"main",t))].filter(i=>i)}function ewe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...We(o),...We(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${wf(o[c])} : ${wf(a[c])}`};return l}return t[i]})])}function hxn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$He(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Mt(n)?"axisOrient":`axis${UO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:ewe(a,r,e,n),vgAxisConfig:ewe(u,r,e,n),axisConfigStyle:pxn([...u,...a],r)}}function pxn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=yt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function tG(e,t,n,r={}){var s;const i=aHe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const twe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??mxn(n,e),gridScale:({model:e,channel:t})=>gxn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||gWe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||mWe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??vxn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??_xn(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??wxn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Exn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=yWe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return lHe(i?[Tbe(i)]:[],Ze(o)?[Tbe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>xxn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Sxn(n,t)};function mxn(e,t){return!ho(e)&&Ze(t)&&!pi(t==null?void 0:t.bin)&&!Co(t==null?void 0:t.bin)}function gxn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function yxn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Mt(s)?s:tI(s);{const{configValue:o}=tG("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?tI(o):n===Mi&&Yn([aie,oie],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function nG(e){return`(((${e.signal} % 360) + 360) % 360)`}function mWe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Mt(e)){const i=nG(e),s=Mt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Mt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Mt(e)){const i=nG(e),s=Mt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Mt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function gWe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Mt(e)){const o=nG(e),a=Mt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Mt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function vxn(e,t){if(t==="x"&&Yn(["quantitative","temporal"],e))return!0}function _xn(e,t,n,r){if(n&&!_t(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function bxn(e){return e==="x"?"bottom":"left"}function wxn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ho(t)&&t!=="log"){if(Ze(e)){if(pi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Yn(["month","hours","day","quarter"],(i=co(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Exn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=CHe(n);if(r)return{signal:r}}}}function yWe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return cHe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function xxn(e,t){const n=e.values;if(De(n))return iqe(t,n);if(Mt(n))return n}function Sxn(e,t){return e==="rect"&&v6(t)?1:0}class ox extends Vr{clone(){return new ox(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=fWe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(B_(r)&&YHe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${OHe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new ox(t,{calculate:u,as:ax(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Gn(this.transform)}`}}function ax(e,t,n){return st(e,{prefix:t,suffix:"sort_index",...n})}function K8(e,t){return Yn(["top","bottom"],t)?"column":Yn(["left","right"],t)||e==="row"?"row":"column"}function ux(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ds((t||{})[e],i[e],n.header[e])}function X8(e,t,n,r){const i={};for(const s of e){const o=ux(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const jie=["row","column"],Bie=["header","footer"];function Txn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=X8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=K8(t,a),l=tI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",..._We(l,u),...vWe(u,l,s),...bWe(r,i,t,dwn,Eqe)}}}function vWe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=gWe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function _We(e,t){const n=mWe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Cxn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Bie)if(n[i])for(const s of n[i]){const o=Ixn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Axn(e,t){const{sort:n}=e;return fh(n)?{field:st(n,{expr:"datum"}),order:n.order??"ascending"}:De(n)?{field:ax(e,t,{expr:"datum"}),order:"ascending"}:{field:st(e,{expr:"datum"}),order:n??"ascending"}}function rG(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=X8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=fie({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=K8(t,a);return{text:{signal:u?J1(J1(u,"datum.label",l),"datum.value",st(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",..._We(s,c),...vWe(c,s,o),...bWe(n,e,t,hwn,xqe)}}function Ixn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=X8(["labelOrient"],o.header,a,t);(t==="row"&&!Yn(["top","bottom"],f)||t==="column"&&!Yn(["left","right"],f))&&(s=rG(o,t,a))}const u=Ol(e)&&!KO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Axn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Oxn={column:{start:0,end:1},row:{start:1,end:0}};function Pxn(e,t){return Oxn[t][e]}function kxn(e,t){const n={};for(const r of mc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=X8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=K8(r,o),u=Pxn(s,a);u!==void 0&&(n[a]=u)}}return Yr(n)?void 0:n}function bWe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=ux(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function zie(e){return[...uR(e,"width"),...uR(e,"height"),...uR(e,"childWidth"),...uR(e,"childHeight")]}function uR(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ho(o)&&jy(a)){const u=e.scaleName(n);return Ol(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[nwe(u,a)]:[nwe(u,a),{name:i,update:wWe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=KW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function nwe(e,t){const n=`${e}_step`;return Mt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function wWe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ds(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${wf(o)}, ${wf(s)}) * ${e}_step`}function EWe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function xWe(e,t){return We(e).reduce((n,r)=>{const i=e[r];return{...n,...gS(t,i,r,s=>Ei(s.value))}},{})}function SWe(e,t){if(Ol(t))return e==="theta"?"independent":"shared";if(bS(t))return"shared";if(Yie(t))return hs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Uie(e,t){const n=e.scale[t],r=hs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Qe(l_n(t)),"independent"):e[r][t]||"shared"}const Rxn={...gwn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},TWe=We(Rxn);class $xn extends tg{}const rwe={symbols:Nxn,gradient:Dxn,labels:Mxn,entries:Lxn};function Nxn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...b1n({},n,_bn),...Qqe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?CWe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Ku)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Ei(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Ei(m??1));else if(De(f.fill)){const g=iG(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=Ei(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Ku)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(De(f.stroke)){const g=ds(iG(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Jm){const g=Ze(t)&&IWe(n,i,t);g?f.opacity=[{test:g,...Ei(m??1)},Ei(u.legend.unselectedOpacity)]:m&&(f.opacity=Ei(m))}return f={...f,...e},Yr(f)?void 0:f}function Dxn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?CWe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Ei(l)),a={...a,...e},Yr(a)?void 0:a}function Mxn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?IWe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;n_(c)?f=xf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=xf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=xf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Yr(d)?void 0:d}function Lxn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function CWe(e){return AWe(e,(t,n)=>Math.max(t,n.value))}function iG(e){return AWe(e,(t,n)=>ds(t,n.value))}function AWe(e,t){if(Rbn(e))return yt(e.condition).reduce(t,e.value);if(Hf(e))return e.value}function IWe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(Di(s)+s_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const iwe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return jHe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return BHe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Hxn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??qxn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??jxn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Uw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(zw(n)&&Ef(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Fxn(t,e)};function Fxn(e,t){const n=e.values;if(De(n))return iqe(t,n);if(Mt(n))return n}function jxn(e,t,n,r){if(t!=="shape"){const i=iG(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Bxn(e){const{legend:t}=e;return ds(t.type,zxn(e))}function zxn({channel:e,timeUnit:t,scaleType:n}){if(zw(e)){if(Yn(["quarter","month","day"],t))return"symbol";if(Ef(n))return"gradient"}return"symbol"}function Uxn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Vxn(n,t)}function Vxn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Hxn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Ef(i))return n==="horizontal"?r==="top"||r==="bottom"?swe(t,"width",o,s):o:swe(t,"height",u,a)}function swe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function qxn(e){if(Yn(["quantile","threshold","log","symlog"],e))return"greedy"}function OWe(e){const t=Qi(e)?Wxn(e):Xxn(e);return e.component.legends=t,t}function Wxn(e){const{encoding:t}=e,n={};for(const r of[Ku,...Tqe]){const i=Bs(t[r]);!i||!e.getScaleComponent(r)||r===Xu&&Ze(i)&&i.type===mS||(n[r]=Kxn(e,r))}return n}function Gxn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Yxn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Kxn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new $xn({},Gxn(e,t));ixn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Bs(i[t]),f=Ze(c)?(w=co(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=Bxn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Uxn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of TWe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in iwe?iwe[E](m):n[E];if(S!==void 0){const b=Yxn(S,E,n,e.fieldDef(t));(b||s.legend[E]===void 0)&&a.set(E,S,b)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=xWe(g[E]??{},e),b=E in rwe?rwe[E](S,_):S;b!==void 0&&!Yr(b)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${Di(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:b})}return Yr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Xxn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){OWe(r);for(const i of We(r.component.legends))n.legend[i]=Uie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=PWe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of We(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function PWe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of TWe){const c=dy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Qxn(f,d);case"title":return fHe(f,d);case"type":return i=!0,al("symbol")}return H8(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&d6(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&d6(e.explicit,["encode","gradient"])),e}function Qxn(e,t){return t.value==="circle"?t:e}function Jxn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function kWe(e){const t=e.component.legends,n={};for(const i of We(t)){const s=e.getScaleComponent(i),o=Kr(s.get("domains"));if(n[o])for(const a of n[o])PWe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>Zxn(i,e.config)).filter(i=>i!==void 0)}function Zxn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of Tqe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Mt(s.encode.labels.update.text)&&(l=J1(r,"datum.label",s.encode.labels.update.text.signal)),Jxn(s,"labels","text",{signal:l})}return s}}function eSn(e){return bS(e)||Yie(e)?tSn(e):RWe(e)}function tSn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),RWe(e))}function RWe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Mt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Yn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const nSn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class $We extends tg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function NWe(e){e.component.projection=Qi(e)?rSn(e):oSn(e)}function rSn(e){if(e.hasProjection){const t=xu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?iSn(e):void 0,s=new $We(e.projectionName(!0),{...xu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function iSn(e){const t=[],{encoding:n}=e;for(const r of[[sd,id],[kc,od]])(Bs(n[r[0]])||Bs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Xu)&&e.typedFieldDef(Xu).type===mS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ki.Main)),t}function sSn(e,t){const n=Dre(nSn,i=>!!(!Wt(e.explicit,i)&&!Wt(t.explicit,i)||Wt(e.explicit,i)&&Wt(t.explicit,i)&&El(e.get(i),t.get(i))));if(El(e.size,t.size)){if(n)return e;if(El(e.explicit,{}))return t;if(El(t.explicit,{}))return e}return null}function oSn(e){if(e.children.length===0)return;let t;for(const r of e.children)NWe(r);const n=Dre(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=sSn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new $We(r,t.specifiedProjection,t.size,dn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function aSn(e,t,n,r){if(QO(t,n)){const i=Qi(e)?e.axis(n)??e.legend(n)??{}:{},s=st(t,{expr:"datum"}),o=st(t,{expr:"datum",binSuffix:"end"});return{formulaAs:st(t,{binSuffix:"range",forAs:!0}),formula:YO(s,o,i.format,i.formatType,r)}}return{}}function DWe(e,t){return`${rHe(e)}_${t}`}function uSn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Vie(e,t,n){const r=F8(n,void 0)??{},i=DWe(r,t);return e.getName(`${i}_bins`)}function lSn(e){return"as"in e}function owe(e,t,n){let r,i;lSn(e)?r=vt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[st(e,{forAs:!0}),st(e,{binSuffix:"end",forAs:!0})];const s={...F8(t,void 0)},o=DWe(s,e.field),{signal:a,extentSignal:u}=uSn(n,o);if(A8(s.extent)){const c=s.extent;i=hWe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class hh extends Vr{clone(){return new hh(null,dn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(tu(s)&&pi(s.bin)){const{key:a,binComponent:u}=owe(s,s.bin,n);i[a]={...u,...i[a],...aSn(n,s,o,n.config)}}return i},{});return Yr(r)?null:new hh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=owe(n,n.bin,r);return new hh(t,{[i]:s})}merge(t,n){for(const r of We(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Qd([...this.bins[r].as,...t.bins[r].as],Gn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${Gn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Pc(t.field),as:r,signal:t.signal,...A8(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Pc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:st({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function cSn(e,t,n,r){var s;const i=Qi(r)?r.encoding[ep(t)]:void 0;if(tu(n)&&Qi(r)&&XHe(n,i,r.markDef,r.config)){e.add(st(n,{})),e.add(st(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=fy({fieldDef:n,markDef:a,config:u});nI(o)&&l!==.5&&hs(t)&&(e.add(st(n,{suffix:q8})),e.add(st(n,{suffix:W8}))),n.bin&&QO(n,t)&&e.add(st(n,{binSuffix:"range"}))}else if(GVe(t)){const o=WVe(t);e.add(r.getName(o))}else e.add(st(n));return B_(n)&&ebn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function fSn(e,t){for(const n of We(t)){const r=t[n];for(const i of We(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class $f extends Vr{clone(){return new $f(null,new Set(this.dimensions),dn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([st(o,{forAs:!0})]);else{if(km(u)||Fy(u)){const c=km(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([st({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([st(o,{forAs:!0})]);Zm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([st({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([st({field:l,aggregate:"max"},{forAs:!0})]))}else cSn(s,a,o,n)}),s.size+We(i).length===0)?null:new $f(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||st(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||st(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+We(i).length===0?null:new $f(t,r,i)}merge(t){return FVe(this.dimensions,t.dimensions)?(fSn(this.measures,t.measures),!0):(T_n("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...We(this.measures)])}producedFields(){const t=new Set;for(const n of We(this.measures))for(const r of We(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Gn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of We(this.measures))for(const o of We(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Pc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Pc),ops:t,fields:n,as:r}}}class vS extends Vr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of mc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[st(o),...pi(a)?[st(o,{binSuffix:"end"})]:[]],...fh(u)?{sortField:u}:De(u)?{sortIndexField:ax(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of mc)this[n]&&(t+=` ${n.charAt(0)}:${Gn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of mc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of mc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of tp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ho(i)&&jy(s)){const o=Q8(this.childModel,n),a=Gie(o);a?t[n]=a:Qe(Yre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=N8,field:f}=u;s.push(f),o.push(c),a.push(st(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of jie){for(const c of Bie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[im,rm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function awe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function dSn(e,t){const n=Fre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=awe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=awe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Qe(N1n(t)),null}function hSn(e){const t={};return H$(e.filter,n=>{if(IHe(n)){let r=null;Jre(n)?r=ml(n.equal):eie(n)?r=ml(n.lte):Zre(n)?r=ml(n.lt):tie(n)?r=ml(n.gt):nie(n)?r=ml(n.gte):rie(n)?r=n.range[0]:iie(n)&&(r=(n.oneOf??n.in)[0]),r&&(L_(r)?t[n.field]="date":dr(r)?t[n.field]="number":vt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function pSn(e){const t={};function n(r){rx(r)?t[r.field]="date":r.type==="quantitative"&&f1n(r.aggregate)?t[r.field]="number":XE(r.field)>1?r.field in t||(t[r.field]="flatten"):B_(r)&&fh(r.sort)&&XE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Qi(e)||Ol(e))&&e.forEachFieldDef((r,i)=>{if(tu(r))n(r);else{const s=D_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Qi(e)){const{mark:r,markDef:i,encoding:s}=e;if(j_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function mSn(e){const t={};if(Qi(e)&&e.component.selection)for(const n of We(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&XE(i.field)>1&&(t[i.field]="flatten")}return t}class ya extends Vr{clone(){return new ya(null,dn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Gn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!I0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of We(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Qe(ybe(a,r[a],u.value)))}for(const a of We(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Qe(ybe(a,n[a],u)))}const s=new tg(n,r);i.copyAll(s);const o={};for(const a of We(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return We(o).length===0||i.parseNothing?null:new ya(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of We(this._parse)){const r=this._parse[n];XE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(We(this._parse))}dependentFields(){return new Set(We(this._parse))}assembleTransforms(t=!1){return We(this._parse).filter(n=>t?XE(n)>1:!0).map(n=>{const r=dSn(n,this._parse[n]);return r?{type:"formula",expr:r,as:hS(n)}:null}).filter(n=>n!==null)}}class my extends Vr{clone(){return new my(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([qf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:qf}}}class eP extends Vr{clone(){return new eP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Gn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class tP extends Vr{clone(){return new tP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Gn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class o_ extends Vr{constructor(t){super(null),t??(t={name:"source"});let n;if(I0(t)||(n=t.format?{...Fu(t.format,["parse"])}:{}),rI(t))this._data={values:t.values};else if(ix(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Yn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else Vqe(t)?this._data={values:[{type:"Sphere"}]}:(zqe(t)||I0(t))&&(this._data={});this._generator=I0(t),t.name&&(this._name=t.name),n&&!Yr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var uwe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},gSn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},v2;function Hie(e){return e instanceof o_||e instanceof eP||e instanceof tP}class qie{constructor(){v2.set(this,void 0),uwe(this,v2,!1,"f")}setModified(){uwe(this,v2,!0,"f")}get modifiedFlag(){return gSn(this,v2,"f")}}v2=new WeakMap;class z_ extends qie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Wie extends qie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class ySn extends Wie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of We(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class vSn extends Wie{constructor(t){super(),this.requiresSelectionId=t&&Fie(t)}run(t){t instanceof my&&(this.requiresSelectionId&&(Hie(t.parent)||t.parent instanceof $f||t.parent instanceof ya)||(this.setModified(),t.remove()))}}class _Sn extends qie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof dh&&(r=t.producedFields(),Mre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class bSn extends Wie{constructor(){super()}run(t){t instanceof Bu&&!t.isRequired()&&(this.setModified(),t.remove())}}class wSn extends z_{run(t){if(!Hie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ya)if(t instanceof ya)this.setModified(),t.merge(n);else{if(Lre(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class ESn extends z_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ya);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of We(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Yr(i)){this.setModified();const o=new ya(t,i);for(const a of n){if(a instanceof ya)for(const u of We(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ya&&We(a.parse).length===0&&a.remove()}}}}}class xSn extends z_{run(t){t instanceof Bu||t.numChildren()>0||t instanceof vS||t instanceof o_||(this.setModified(),t.remove())}}class SSn extends z_{run(t){const n=t.children.filter(i=>i instanceof dh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class TSn extends z_{run(t){const n=t.children.filter(i=>i instanceof $f),r={};for(const i of n){const s=Gn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of We(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class CSn extends z_{constructor(t){super(),this.model=t}run(t){const n=!(Hie(t)||t instanceof yS||t instanceof ya||t instanceof my),r=[],i=[];for(const s of t.children)s instanceof hh&&(n&&!Lre(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof hh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class ASn extends z_{run(t){const n=[...t.children];if(!Q1(n,o=>o instanceof Bu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Bu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Bu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class U_ extends Vr{clone(){return new U_(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??st(t)}hash(){return`JoinAggregateTransform ${Gn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function ISn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=st(r);return i&&t.push(i),t},[])}function OSn(e){return De(e)&&e.every(t=>vt(t))&&e.length>1}class om extends Vr{clone(){return new om(null,dn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ds(f.order,"ascending"));const l={field:a,order:u};let c;return OSn(s)?c=s:vt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new om(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Lh(p)}).filter(h=>!!h),c=ISn(n),f=n.encoding.order;let d;if(De(f)||Ze(f))d=uHe(f);else{const h=QHe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new om(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Gn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[st(i,{binSuffix:"mid"})]:[st(i,{}),st(i,{binSuffix:"end"})]:[st(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=st(c,{expr:"datum"}),p=st(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:st(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:st(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class _S extends Vr{clone(){return new _S(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??st(t)}hash(){return`WindowTransform ${Gn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Wre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function PSn(e){function t(n){if(!(n instanceof vS)){const r=n.clone();if(r instanceof Bu){const i=oG+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof $f||r instanceof om||r instanceof _S||r instanceof U_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function sG(e){if(e instanceof vS)if(e.numChildren()===1&&!(e.children[0]instanceof Bu)){const t=e.children[0];(t instanceof $f||t instanceof om||t instanceof _S||t instanceof U_)&&t.addDimensions(e.fields),t.swapWithParent(),sG(e)}else{const t=e.model.component.data.main;MWe(t);const n=PSn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(sG)}function MWe(e){if(e instanceof Bu&&e.type===ki.Main&&e.numChildren()===1){const t=e.children[0];t instanceof vS||(t.swapWithParent(),MWe(e))}}const oG="scale_",lR=5;function aG(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!aG(t.children))return!1}return!0}function Yc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function lwe(e,t,n){let r=e.sources,i=!1;return i=Yc(new bSn,r)||i,i=Yc(new vSn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Yc(new xSn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Yc(new wSn,r)||i,i=Yc(new CSn(t),r)||i,i=Yc(new _Sn,r)||i,i=Yc(new ESn,r)||i,i=Yc(new TSn,r)||i,i=Yc(new SSn,r)||i,i=Yc(new ySn,r)||i,i=Yc(new ASn,r)||i),e.sources=r,i}function kSn(e,t){aG(e.sources);let n=0,r=0;for(let i=0;i<lR&&lwe(e,t,!0);i++)n++;e.sources.map(sG);for(let i=0;i<lR&&lwe(e,t,!1);i++)r++;aG(e.sources),Math.max(n,r)===lR&&Qe(`Maximum optimization runs(${lR}) reached.`)}class to{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new to(()=>t(n))}}function LWe(e){Qi(e)?RSn(e):$Sn(e)}function RSn(e){const t=e.component.scales;for(const n of We(t)){const r=DSn(e,n);if(t[n].setWithExplicit("domains",r),LSn(e,n),e.component.data.isFaceted){let s=e;for(;!Ol(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Hp(a)&&(a.data=oG+a.data.replace(oG,""))}}}function $Sn(e){for(const n of e.children)LWe(n);const t=e.component.scales;for(const n of We(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=dy(r,o.getWithExplicit("domains"),"domains","scale",uG);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Qe(P1n),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function NSn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=cwe(t,n);if(!i){Qe(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=cwe(t,n);if(i)return"unaggregated"}return e}function DSn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=NSn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Bs(r.x2)?Bs(r.x)?dy(xg(n,i,e,"x"),xg(n,i,e,"x2"),"domain","scale",uG):xg(n,i,e,"x2"):t==="y"&&Bs(r.y2)?Bs(r.y)?dy(xg(n,i,e,"y"),xg(n,i,e,"y2"),"domain","scale",uG):xg(n,i,e,"y2"):xg(n,i,e,t)}function MSn(e,t,n){return e.map(r=>({signal:`{data: ${j8(r,{timeUnit:n,type:t})}}`}))}function fz(e,t,n){var i;const r=(i=co(n))==null?void 0:i.unit;return t==="temporal"||r?MSn(e,t,r):[e]}function xg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Bs(i[r]),{type:c}=l,f=l.timeUnit;if(Z_n(t)){const p=xg(e,void 0,n,r),m=fz(t.unionWith,c,f);return Td([...m,...p.value])}else{if(Mt(t))return Td([t]);if(t&&t!=="unaggregated"&&!DHe(t))return Td(fz(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return al([[0,1]]);const p=n.requestDataName(ki.Main);return al([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Zm(r)&&Ze(l)?FSn(n,r,e):void 0;if(np(l)){const p=fz([l.datum],c,f);return al(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ki.Main),{field:m}=l;return al([{data:p,field:st({field:m,aggregate:"min"})},{data:p,field:st({field:m,aggregate:"max"})}])}else if(pi(h.bin)){if(ho(e))return al(e==="bin-ordinal"?[]:[{data:eI(d)?n.requestDataName(ki.Main):n.requestDataName(ki.Raw),field:n.vgField(r,QO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!_t(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(pi(p)){const m=Vie(n,h.field,p);return al([new to(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return al([{data:n.requestDataName(ki.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Yn(["time","utc"],e)){const p=i[ep(r)];if(XHe(h,p,s,a)){const m=n.requestDataName(ki.Main),g=fy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=nI(o)&&g!==.5&&hs(r);return al([{data:m,field:n.vgField(r,y?{suffix:q8}:{})},{data:m,field:n.vgField(r,{suffix:y?W8:"end"})}])}}return al(d?[{data:eI(d)?n.requestDataName(ki.Main):n.requestDataName(ki.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ki.Main),field:n.vgField(r)}])}function dz(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":N8),...r?{field:Pc(r)}:{},...i?{order:i}:{}}}function LSn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=DHe(r)&&r,o=M_(i)&&A8(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function FSn(e,t,n){if(!ho(n))return;const r=e.fieldDef(t),i=r.sort;if(YHe(i))return{op:"min",field:ax(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(fh(i)){const a=s&&!o.has(i.field);return dz(i,a)}else if(GHe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(km(c)||Fy(c))return dz({field:st(l),order:u},d);if(Wre(c)||!c)return dz({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Yn(["ascending",void 0],i))return!0}}function cwe(e,t){const{aggregate:n,type:r}=e;return n?vt(n)&&!h1n.has(n)?{valid:!1,reason:n_n(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:r_n(e)}:{valid:!0}:{valid:!1,reason:t_n(e)}}function uG(e,t,n,r){return e.explicit&&t.explicit&&Qe(u_n(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function jSn(e){const t=Qd(e.map(o=>{if(Hp(o)){const{sort:a,...u}=o;return u}return o}),Gn),n=Qd(e.map(o=>{if(Hp(o)){const a=o.sort;return a!==void 0&&!eI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Gn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Hp(o)&&n.length>0){let a=n[0];if(n.length>1){Qe(_be);const u=n.filter(l=>_t(l)&&"op"in l&&l.op!=="min");n.every(l=>_t(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(_t(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Qd(n.map(o=>eI(o)||!("op"in o)||vt(o.op)&&o.op in l1n?o:(Qe(c_n(o)),!0)),Gn);let i;r.length===1?i=r[0]:r.length>1&&(Qe(_be),i=!0);const s=Qd(e.map(o=>Hp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Gie(e){if(Hp(e)&&vt(e.field))return e.field;if(p1n(e)){let t;for(const n of e.fields)if(Hp(n)&&vt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Qe(f_n),t}return Qe(d_n),t}else if(m1n(e)){Qe(h_n);const t=e.fields[0];return vt(t)?t:void 0}}function Q8(e,t){const r=e.component.scales[t].get("domains").map(i=>(Hp(i)&&(i.data=e.lookupDataSource(i.data)),i));return jSn(r)}function FWe(e){return bS(e)||Yie(e)?e.children.reduce((t,n)=>t.concat(FWe(n)),fwe(e)):fwe(e)}function fwe(e){return We(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=BSn(i.range,s,n,e),h=Q8(e,n),p=a?NEn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function BSn(e,t,n,r){if(hs(n)){if(jy(e))return{step:{signal:`${t}_step`}}}else if(_t(e)&&Hp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class jWe extends tg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Q1(this.get("domains"),t=>De(t)&&t.length===2&&dr(t[0])&&t[0]<=0&&dr(t[1])&&t[1]>=0)}}const zSn=["range","scheme"];function USn(e){const t=e.component.scales;for(const n of C8){const r=t[n];if(!r)continue;const i=VSn(n,e);r.setWithExplicit("range",i)}}function dwe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Qu(t),o=e.getName(s);if(_t(r)&&r.binned&&r.step!==void 0)return new to(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(pi(r)){const a=Vie(e,i,r);return new to(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function VSn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of zSn)if(n[f]!==void 0){const d=WW(s,f),h=MHe(e,f);if(!d)Qe(mHe(s,f,e));else if(h)Qe(h);else switch(f){case"range":{const p=n.range;if(De(p)){if(hs(e))return Td(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return to.fromName(y,g)}return m}))}else if(_t(p))return Td({data:t.requestDataName(ki.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Td(p)}case"scheme":return Td(HSn(n[f]))}}const o=e===Mi||e==="xOffset"?"width":"height",a=r[o];if(Fh(a)){if(hs(e))if(ho(s)){const f=zWe(a,t,e);if(f)return Td({step:f})}else Qe(gHe(o));else if(qO(e)){const f=e===$y?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=UWe(a,s);if(p)return Td(p)}}}const{rangeMin:u,rangeMax:l}=n,c=qSn(e,t);return(u!==void 0||l!==void 0)&&WW(s,"rangeMin")&&De(c)&&c.length===2?Td([u??c[0],l??c[1]]):al(c)}function HSn(e){return J_n(e)?{scheme:e.name,...Fu(e,["name"])}:{scheme:e}}function BWe(e,t,n,{center:r}={}){const i=Qu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===go&&Bl(n)?r?[to.fromName(a=>`${o(a)}/2`,s),to.fromName(a=>`-${o(a)}/2`,s)]:[to.fromName(o,s),0]:r?[to.fromName(a=>`-${o(a)}/2`,s),to.fromName(a=>`${o(a)}/2`,s)]:[0,to.fromName(o,s)]}function qSn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Bs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Mi:case go:{if(Yn(["point","band"],u)){const f=VWe(e,n,r.view);if(Fh(f))return{step:zWe(f,t,e)}}return BWe(e,t,u)}case $y:case pS:return WSn(e,t,u);case Qm:{const f=t.component.scales[e].get("zero"),d=HWe(i,f,r),h=KSn(i,n,t,r);return ex(u)?YSn(d,h,GSn(u,r,l,e)):[d,h]}case Vc:return[0,Math.PI*2];case N_:return[0,360];case rd:return[0,new to(()=>{const f=t.getSignalName(Ol(t.parent)?"child_width":"width"),d=t.getSignalName(Ol(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case My:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ly:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Xu:return"symbol";case Ku:case Jh:case Zh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Jm:case Ny:case Dy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function zWe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Ure(n),o=r[s];if(Aqe({step:e,offsetIsDiscrete:vn(o)&&PHe(o.type)})==="offset"&&uqe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${_1n(f)})`}}else return e.step}function UWe(e,t){if(Aqe({step:e,offsetIsDiscrete:ho(t)})==="offset")return{step:e.step}}function WSn(e,t,n){const r=e===$y?"x":"y",i=t.getScaleComponent(r);if(!i)return BWe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=VWe(r,t.size,t.config.view);if(Fh(l)){const c=UWe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=CHe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=fy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Mt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Mt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return MVe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function VWe(e,t,n){const r=e===Mi?"width":"height",i=t[r];return i||x6(n,r)}function GSn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&De(n)?n.length+1:(Qe(E_n(r)),3)}}function YSn(e,t,n){const r=()=>{const i=wf(t),s=wf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Mt(t)?new to(r):{signal:r()}}function HWe(e,t,n){if(t)return Mt(t)?{signal:`${t.signal} ? 0 : ${HWe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(I8("size",e))}const hwe=.95;function KSn(e,t,n,r){const i={x:dwe(n,"x"),y:dwe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=pwe(t,i,r.view);return dr(s)?s-1:new to(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=pwe(t,i,r.view);return dr(s)?Math.pow(hwe*s,2):new to(()=>`pow(${hwe} * ${s.signal}, 2)`)}}throw new Error(I8("size",e))}function pwe(e,t,n){const r=Fh(e.width)?e.width.step:E6(n,"width"),i=Fh(e.height)?e.height.step:E6(n,"height");return t.x||t.y?new to(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function qWe(e,t){Qi(e)?XSn(e,t):GWe(e,t)}function XSn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of We(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Bs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=WW(h,t),y=MHe(a,t);if(d!==void 0&&(g?y&&Qe(y):Qe(mHe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":L_(u[t])||_==="temporal"||v?l.set(t,{signal:j8(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in mwe?mwe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:lqe(i,a),hasSecondaryRangeChannel:!!i[ep(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const mwe={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?QSn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>JSn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ZSn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>eTn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>tTn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>nTn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return rTn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>iTn(e,t,n,r,i,s.scale,o)};function WWe(e){Qi(e)?USn(e):GWe(e,"range")}function GWe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?WWe(r):qWe(r,t);for(const r of We(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=dy(i,a,t,"scale",Bqe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function QSn(e,t){const n=t.bin;if(pi(n)){const r=Vie(e,t.field,n);return new to(()=>e.getSignalName(r))}else if(Co(n)&&M_(n)&&n.step!==void 0)return{step:n.step}}function JSn(e,t){if(Yn([Ku,Jh,Zh],e)&&t!=="nominal")return"hcl"}function ZSn(e,t,n,r,i,s){var o;if(!((o=Lh(s))!=null&&o.bin||De(n)||i!=null||r!=null||Yn([ju.TIME,ju.UTC],e)))return hs(t)?!0:void 0}function eTn(e,t,n,r,i,s){if(hs(e)){if(Ef(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ju.POINT)return n.pointPadding}}function tTn(e,t,n,r,i,s=!1){if(e===void 0){if(hs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ds(o,n==="bar"?a:u)}else if(qO(t)&&r===ju.BAND)return i.offsetBandPaddingInner}}function nTn(e,t,n,r,i,s=!1){if(e===void 0){if(hs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ju.BAND)return ds(o,Mt(r)?{signal:`${r.signal}/2`}:r/2)}else if(qO(t)){if(n===ju.POINT)return .5;if(n===ju.BAND)return i.offsetBandPaddingOuter}}}function rTn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Bl(e)&&t==="descending"?Mt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Bl(e)&&t==="descending")return!0}function iTn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Bl(i)){if(De(n)){const u=n[0],l=n[n.length-1];if(dr(u)&&u<=0&&dr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ex(i))return!0;if(!(Ze(t)&&t.bin)&&Yn([...tp,...t1n],e)){const{orient:u,type:l}=r;return Yn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Yn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function sTn(e,t,n,r,i=!1){const s=oTn(t,n,r,i),{type:o}=e;return Zm(t)?o!==void 0?sbn(t,o)?Ze(n)&&!ibn(o,n.type)?(Qe(o_n(o,s)),s):o:(Qe(s_n(t,o,s)),s):s:null}function oTn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(zw(e)||rz(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Qe(iz(e,"ordinal")),"ordinal";if(hs(e)||qO(e)){if(Yn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in qre)return"band";const s=n[Qu(e)];return r_(s)||nx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return zw(e)?"time":rz(e)==="discrete"?(Qe(iz(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&co(t.timeUnit).utc?"utc":"time";case"quantitative":return zw(e)?Ze(t)&&pi(t.bin)?"bin-ordinal":"linear":rz(e)==="discrete"?(Qe(iz(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(hHe(t.type))}function aTn(e,{ignoreRange:t}={}){YWe(e),LWe(e);for(const n of rbn)qWe(e,n);t||WWe(e)}function YWe(e){Qi(e)?e.component.scales=uTn(e):e.component.scales=cTn(e)}function uTn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of C8){const o=Bs(t[s]);if(o&&n===HHe&&s===Xu&&o.type===mS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=lqe(t,s),l=sTn(a,s,o,r,u);i[s]=new jWe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const lTn=Bqe((e,t)=>wbe(e)-wbe(t));function cTn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){YWe(s);for(const o of We(s.component.scales))if((t=i.scale)[o]??(t[o]=SWe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?G_n(a.value,u.value)?r[o]=dy(a,u,"type","scale",lTn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of We(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new jWe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class hz{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Qi(e){return(e==null?void 0:e.type)==="unit"}function Ol(e){return(e==null?void 0:e.type)==="facet"}function Yie(e){return(e==null?void 0:e.type)==="concat"}function bS(e){return(e==null?void 0:e.type)==="layer"}class Kie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=xu(a),this.name=t.name??i,this.title=Rg(t.title)?{text:t.title}:t.title?xu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new hz,this.projectionNameMap=r?r.projectionNameMap:new hz,this.signalNameMap=r?r.signalNameMap:new hz,this.data=t.data,this.description=t.description,this.transforms=yEn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:wwn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:D8(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new tg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?dn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){aTn(this)}parseProjection(){NWe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){OWe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of We(r)){const o=r[s];o!==void 0&&(i[s]=Ei(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ei(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Yr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=kxn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of mc)t[r].title&&n.push(Txn(this,r));for(const r of jie)n=n.concat(Cxn(this,r));return n}assembleAxes(){return dxn(this.component.axes,this.config)}assembleLegends(){return kWe(this)}assembleProjections(){return eSn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...iHe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Yn(["unit","layer"],this.type)?Yn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Yr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Ol(this.parent)?FWe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Di((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ki[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Ol(this.parent)){const n=EWe(t),r=T8(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ho(s)&&jy(o)){const a=i.get("name"),u=Q8(this,r),l=Gie(u);if(l){const c=st({aggregate:"distinct",field:l},{expr:"datum"});return{signal:wWe(a,i,c)}}else return Qe(Yre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(KVe(t)&&Zm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(S1n(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class KWe extends Kie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return st(r,n)}reduceFieldDef(t,n){return Xbn(this.getMapping(),(r,i,s)=>{const o=Lh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){wie(this.getMapping(),(r,i)=>{const s=Lh(r);s&&t(s,i)},n)}}class J8 extends Vr{clone(){return new J8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Gn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Z8 extends Vr{clone(){return new Z8(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Gn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class iI extends Vr{clone(){return new iI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Cr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Zm(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Bl(d)&&l.aggregate!=="count"&&!j_(i)&&(u[l.field]=l)}return u},{});return We(a).length?new iI(t,a):null}dependentFields(){return new Set(We(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Gn(this.filter)}`}assemble(){const t=We(this.filter).reduce((n,r)=>{const i=this.filter[r],s=st(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class ej extends Vr{clone(){return new ej(this.parent,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Gn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class tj extends Vr{clone(){return new tj(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Gn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Hw extends Vr{clone(){return new Hw(null,dn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[sd,id],[kc,od]]){const s=i.map(o=>{const a=Bs(n.encoding[o]);return Ze(a)?a.field:np(a)?{expr:`${a.datum}`}:Hf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Hw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Xu)){const i=n.typedFieldDef(Xu);i.type===mS&&(t=new Hw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(vt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Gn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sI extends Vr{clone(){return new sI(null,this.projection,dn(this.fields),dn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[sd,id],[kc,od]]){const i=r.map(o=>{const a=Bs(n.encoding[o]);return Ze(a)?a.field:np(a)?{expr:`${a.datum}`}:Hf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===kc?"2":"";(i[0]||i[1])&&(t=new sI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(vt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Gn(this.fields)} ${Gn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class v1 extends Vr{clone(){return new v1(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new v1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=fqe(n.mark,r);return new v1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Gn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Jwn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class nj extends Vr{clone(){return new nj(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Gn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class oI extends Vr{clone(){return new oI(null,dn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Zwn(o)){let u=JWe(o.data,s);u||(u=new o_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Bu(u,l,ki.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(eEn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Di(u),u)}catch{throw new Error(I1n(u))}if(a=l.materialized,!a)throw new Error(O1n(u))}return new oI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?yt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Gn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:yt(this.transform.as)}:{}};else{let n=this.transform.as;vt(n)||(Qe(L1n),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class rj extends Vr{clone(){return new rj(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Gn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class ij extends Vr{clone(){return new ij(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=dn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Gn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class sj extends Vr{clone(){return new sj(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Gn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class oj extends Vr{clone(){return new oj(null,dn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Gn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function XWe(e){let t=0;function n(r,i){if(r instanceof o_&&!r.isGenerator&&!ix(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ya&&(r.parent instanceof o_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof vS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof eP||r instanceof tP||r instanceof iI||r instanceof yS||r instanceof ox||r instanceof sI||r instanceof $f||r instanceof oI||r instanceof _S||r instanceof U_||r instanceof tj||r instanceof ej||r instanceof J8||r instanceof nj||r instanceof rj||r instanceof ij||r instanceof my||r instanceof oj||r instanceof sj||r instanceof Z8)&&i.transform.push(r.assemble()),(r instanceof hh||r instanceof dh||r instanceof v1||r instanceof om||r instanceof Hw)&&i.transform.push(...r.assemble()),r instanceof Bu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Bu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Bu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function fTn(e){const t=[],n=XWe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function dTn(e,t){const n=[],r=XWe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function hTn(e){return e==="top"||e==="left"||Mt(e)?"header":"footer"}function pTn(e){for(const t of mc)mTn(e,t);gwe(e,"x"),gwe(e,"y")}function mTn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=ux("title",null,r,t);let l=Uw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=De(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=ux("labelOrient",a.header,r,t),f=a.header!==null?ds((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Yn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[QWe(e,t,f)]}}}function QWe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function gwe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Uie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=hTn(a.get("orient"));o[u]??(o[u]=[QWe(e,s,!1)]);const l=y2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function gTn(e){Xie(e),A6(e,"width"),A6(e,"height")}function yTn(e){Xie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";A6(e,t),A6(e,n)}function Xie(e){for(const t of e.children)t.parseLayoutSize()}function A6(e,t){const n=EWe(t),r=T8(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??SWe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=dy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function vTn(e){const{size:t,component:n}=e;for(const r of tp){const i=Qu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Fh(s)?"step":s,!0)}else{const s=_Tn(e,i);n.layoutSize.set(i,s,!1)}}}function _Tn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ho(s)){const a=x6(r.view,t);return jy(o)||Fh(a)?"step":a}else return KW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return KW(r.view,t);{const s=x6(r.view,t);return Fh(s)?s.step:s}}}function lG(e,t,n){return st(t,{suffix:`by_${st(e)}`,...n})}class _C extends KWe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=tse(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!KO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=We(t),r={};for(const i of n){if(![rm,im].includes(i)){Qe(I8(i,"facet"));break}const s=t[i];if(s.field===void 0){Qe(HW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=_ie(t,n);return r.header?r.header=xu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=aj(this),this.child.parseData()}parseLayoutSize(){Xie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),pTn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of mc)for(const r of Bie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=ux("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=K8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof _C))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof _C?{...this.channelHasField("column")?{encode:{update:{columns:{field:st(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof _C){if(this.child.channelHasField("column")){const i=st(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of tp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ho(o)&&jy(a)){const u=Q8(this.child,i),l=Gie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Qe(Yre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of mc){const f=this.facet[c];if(f){u.push(st(f));const{bin:d,sort:h}=f;if(pi(d)&&u.push(st(f,{binSuffix:"end"})),fh(h)){const{field:p,op:m=N8}=h,g=lG(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(De(h)){const p=ax(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?fh(r.sort)?[lG(r,r.sort,{expr:"datum"})]:De(r.sort)?[ax(r,t,{expr:"datum"})]:[st(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(fh(i)?i.order:!De(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return rG(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of jie)if(t[s]){const o=ux("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return rG(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=fTn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:mc.map(u=>this.facetSortFields(u)).flat(),order:mc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(PEn(this,[]))}]}getMapping(){return this.facet}}function bTn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(fh(s.sort)){const{field:o,op:a=N8}=s.sort;e=i=new U_(e,{joinaggregate:[{op:a,field:o,as:lG(s,s.sort,{forAs:!0})}],groupby:[st(s)]})}return i}return null}function JWe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(rI(e)&&rI(a)){if(El(e.values,a.values))return o}else if(ix(e)&&ix(a)){if(e.url===a.url)return o}else if(zqe(e)&&e.name===o.dataName)return o}}return null}function wTn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new o_({values:[]});return t.push(r),r}const n=JWe(e.data,t);if(n)return I0(e.data)||(n.data.format=LVe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new o_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function ETn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(cEn(i))o=e=new ox(e,i),s="derived";else if(Rie(i)){const a=hSn(i);o=e=ya.makeWithAncestors(e,{},a,n)??e,e=new yS(e,t,i.filter)}else if(Mqe(i))o=e=hh.makeFromTransform(e,i,t),s="number";else if(dEn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ya(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=dh.makeFromTransform(e,i);else if(hEn(i))o=e=$f.makeFromTransform(e,i),s="number",Fie(t)&&(e=new my(e));else if(Dqe(i))o=e=oI.make(e,t,i,r++),s="derived";else if(aEn(i))o=e=new _S(e,i),s="number";else if(uEn(i))o=e=new U_(e,i),s="number";else if(pEn(i))o=e=om.makeFromTransform(e,i),s="derived";else if(mEn(i))o=e=new tj(e,i),s="derived";else if(gEn(i))o=e=new Z8(e,i),s="derived";else if(lEn(i))o=e=new ej(e,i),s="derived";else if(tEn(i))o=e=new sj(e,i),s="derived";else if(oEn(i))e=new oj(e,i);else if(fEn(i))o=e=v1.makeFromTransform(e,i),s="derived";else if(nEn(i))o=e=new J8(e,i),s="derived";else if(rEn(i))o=e=new rj(e,i),s="derived";else if(iEn(i))o=e=new ij(e,i),s="derived";else if(sEn(i))o=e=new nj(e,i),s="derived";else{Qe(M1n(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function aj(e){var h;let t=wTn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(I0(i)||ix(i)||rI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new IEn;I0(i)?(Uqe(i)?t=new tP(t,i.sequence):$ie(i)&&(t=new eP(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ya.makeExplicit(t,e,o)??t,t=new my(t);const a=e.parent&&bS(e.parent);(Qi(e)||Ol(e))&&a&&(t=hh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=ETn(t,e,o));const u=mSn(e),l=pSn(e);t=ya.makeWithAncestors(t,{},{...u,...l},o)??t,Qi(e)&&(t=Hw.parseAll(t,e),t=sI.parseAll(t,e)),(Qi(e)||Ol(e))&&(a||(t=hh.makeFromEncoding(t,e)??t),t=dh.makeFromEncoding(t,e)??t,t=ox.parseAllForSortIndex(t,e));const c=t=ywe(ki.Raw,e,t);if(Qi(e)){const p=$f.makeFromEncoding(t,e);p&&(t=p,Fie(e)&&(t=new my(t))),t=v1.makeFromEncoding(t,e)??t,t=om.makeFromEncoding(t,e)??t}Qi(e)&&(t=iI.make(t,e)??t);const f=t=ywe(ki.Main,e,t);Qi(e)&&cxn(e,f);let d=null;if(Ol(e)){const p=e.getName("facet");t=bTn(t,e.facet)??t,d=new vS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function ywe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Bu(n,s,e,i);return r[s]=o,o}class xTn extends Kie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Qe($1n),this.children=this.getChildren(t).map((l,c)=>tse(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=aj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return U8(t)?t.vconcat:Pie(t)?t.hconcat:t.concat}parseLayoutSize(){yTn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=zie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function STn(e){return e===!1||e===null}const TTn={disable:1,gridScale:1,scale:1,...oqe,labelExpr:1,encode:1},ZWe=We(TTn);class Qie extends tg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Qie(dn(this.explicit),dn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!STn(this.get(t))}hasOrientSignalRef(){return Mt(this.explicit.orient)}}function CTn(e,t,n){const{encoding:r,config:i}=e,s=Bs(r[t])??Bs(r[ep(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(n_(u))return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(tx(s)==="quantitative"){if(nx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(tx(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:xf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function ATn(e){return tp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[NTn(n,e)]),t),{})}const ITn={bottom:"top",top:"bottom",left:"right",right:"left"};function OTn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of We(i.component.axes))n.axis[s]=Uie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=PTn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of tp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Mt(a)){if(r[a]>0&&!u){const l=ITn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function PTn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=kTn(i,s)}}}else return t.map(n=>n.clone());return e}function kTn(e,t){for(const n of ZWe){const r=dy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return fHe(i,s);case"gridScale":return{explicit:i.explicit,value:ds(i.value,s.value)}}return H8(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function RTn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Mt(n.labelAngle)?n.labelAngle:tI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===yWe(r,i))return!0}return e===n[t]}const $Tn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function NTn(e,t){var y,v;let n=t.axis(e);const r=new Qie,i=Bs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||bxn(e),u=t.getScaleComponent(e).get("type"),l=hxn(e,u,a,t.config),c=n!==void 0?!n:tG("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=yxn(i,n,e,o.style,l),d=BHe(n.formatType,i,u),h=jHe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of ZWe){const w=_ in twe?twe[_](p):Ibe(_)?n[_]:void 0,E=w!==void 0,S=RTn(w,_,n,t,e);if(E&&S)r.set(_,w,S);else{const{configValue:b=void 0,configFrom:T=void 0}=Ibe(_)&&_!=="values"?tG(_,o.style,n.style,l):{},A=b!==void 0;E&&!A?r.set(_,w,S):(T!=="vgAxisConfig"||$Tn.has(_)&&A||JO(b)||Mt(b))&&r.set(_,b,!1)}}const m=n.encoding??{},g=sqe.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const E=xWe(m[w]??{},t),S=w==="labels"?CTn(t,e,E):E;return S!==void 0&&!Yr(S)&&(_[w]={update:S}),_},{});return Yr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function DTn({encoding:e,size:t}){for(const n of tp){const r=Qu(n);Fh(t[r])&&r0(e[n])&&(delete t[r],Qe(gHe(r)))}return t}const MTn={vgMark:"arc",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...hy(e,"radius"),...hy(e,"theta")})},LTn={vgMark:"area",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...S6("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...S6("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Lie(e)})},FTn={vgMark:"rect",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...hy(e,"x"),...hy(e,"y")})},jTn={vgMark:"shape",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===mS?{field:st(n,{expr:"datum"})}:{}}]}},BTn={vgMark:"image",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...hy(e,"x"),...hy(e,"y"),...Die(e,"url")})},zTn={vgMark:"line",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...ro("size",e,{vgChannel:"strokeWidth"}),...Lie(e)})},UTn={vgMark:"trail",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...ro("size",e),...Lie(e)})};function Jie(e,t){const{config:n}=e;return{...Hc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...ro("size",e),...ro("angle",e),...VTn(e,n,t)}}function VTn(e,t,n){return n?{shape:{value:n}}:ro("shape",e)}const HTn={vgMark:"symbol",encodeEntry:e=>Jie(e)},qTn={vgMark:"symbol",encodeEntry:e=>Jie(e,"circle")},WTn={vgMark:"symbol",encodeEntry:e=>Jie(e,"square")},GTn={vgMark:"rect",encodeEntry:e=>({...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...hy(e,"x"),...hy(e,"y")})},YTn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...S6("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...S6("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ro("size",e,{vgChannel:"strokeWidth"})}}},KTn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Hc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...Die(e),...ro("size",e,{vgChannel:"fontSize"}),...ro("angle",e),...Qbe("align",XTn(e.markDef,n,t)),...Qbe("baseline",QTn(e.markDef,n,t)),...ga("radius",e,{defaultPos:null}),...ga("theta",e,{defaultPos:null})}}};function XTn(e,t,n){if(Cr("align",e,n)===void 0)return"center"}function QTn(e,t,n){if(Cr("baseline",e,n)===void 0)return"middle"}const JTn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Hc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ga("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ro("size",e,{defaultValue:ZTn(e),vgChannel:i}),[s]:Ei(Cr("thickness",n,t))}}};function ZTn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Cr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&jy(a)&&dr(a.step)?a.step*3/4:E6(t.view,i)*3/4}}const cR={arc:MTn,area:LTn,bar:FTn,circle:qTn,geoshape:jTn,image:BTn,line:zTn,point:HTn,rect:GTn,rule:YTn,square:WTn,text:KTn,tick:JTn,trail:UTn};function e2n(e){if(Yn([R8,P8,mbn],e.mark)){const t=fqe(e.mark,e.encoding);if(t.length>0)return t2n(e,t)}else if(e.mark===k8){const t=VW.some(n=>Cr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return n2n(e)}return Zie(e)}const vwe="faceted_path_";function t2n(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:vwe+e.requestDataName(ki.Main),data:e.requestDataName(ki.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Zie(e,{fromPrefix:vwe})}]}const _we="stack_group_";function n2n(e){var l;const[t]=Zie(e,{fromPrefix:_we}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...KE(t.encode.update,["y","yc","y2","height",...VW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Fu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...KE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Fu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of VW){const f=Rm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Ei(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=st(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(st(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Rm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Ei(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ki.Main),name:_we+e.requestDataName(ki.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function r2n(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!De(o)&&Hf(o)&&zW(o.value)||!o&&zW(Cr("order",i,s)))){if((De(o)||Ze(o))&&!n)return uHe(o,{expr:"datum"});if(j_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(De(c))return{field:st(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(fh(c))return{field:st({aggregate:bie(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(GHe(c)){const f=e.fieldDef(c.encoding);return{field:st(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:st(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Zie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ds(r.clip,i2n(e),s2n(e)),a=oHe(r),u=i.key,l=r2n(e),c=o2n(e),f=Cr("aria",r,s),d=cR[n].postEncodingTransform?cR[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:cR[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ki.Main)},encode:{update:cR[n].encodeEntry(e)},...d?{transform:d}:{}}]}function i2n(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function s2n(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function o2n(e){if(!e.component.selection)return null;const t=We(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=We(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class eGe extends KWe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Pbe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Mh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Hwn(o,s,{graticule:t.data&&$ie(t.data)}));const u=this.encoding=Ybn(t.encoding||{},a,o.filled,s);this.markDef=Rqe(o,u,s),this.size=DTn({encoding:u,size:Pbe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=kqe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Iie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===HHe,r=t&&Wvn.some(i=>vn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return C8.reduce((r,i)=>{const s=Bs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=xu(t);return De(n)&&(i.domain=n.map(ml)),De(r)&&(i.range=r.map(ml)),i}initAxes(t){return tp.reduce((n,r)=>{const i=t[r];if(vn(i)||r===Mi&&vn(t.x2)||r===go&&vn(t.y2)){const s=vn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=We(t),r={};for(const i of n){const s=t[i];r[i]=JO(s)?sHe(s):ml(s)}return r}initLegends(t){return n1n.reduce((n,r)=>{const i=Bs(t[r]);if(i&&i1n(r)){const s=i.legend;n[r]=s&&xu(s)}return n},{})}parseData(){this.component.data=aj(this)}parseLayoutSize(){vTn(this)}parseSelections(){this.component.selection=lxn(this,this.selection)}parseMarkGroup(){this.component.mark=e2n(this)}parseAxesAndHeaders(){this.component.axes=ATn(this)}assembleSelectionTopLevelSignals(t){return kEn(this,t)}assembleSignals(){return[...pWe(this),...OEn(this,[])]}assembleSelectionData(t){return REn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return zie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!bS(this.parent))&&(t=qqe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return g1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Lh(n)}typedFieldDef(t){const n=this.fieldDef(t);return tu(n)?n:null}}class ese extends Kie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(V8(a))return new ese(a,this,this.getName(`layer_${u}`),o,s);if(eg(a))return new eGe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Gre(a))})}parseData(){this.component.data=aj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){gTn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of We(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){OTn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),pWe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),zie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of yt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return $En(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),kWe(this))}}function tse(e,t,n,r,i){if(D8(e))return new _C(e,t,n,i);if(V8(e))return new ese(e,t,n,r,i);if(eg(e))return new eGe(e,t,n,r,i);if(vwn(e))return new xTn(e,t,n,i);throw new Error(Gre(e))}function a2n(e,t={}){t.logger&&x_n(t.logger),t.fieldTitle&&nqe(t.fieldTitle);try{const n=Pqe(nS(t.config,e.config)),r=jqe(e,n),i=tse(r,null,"",void 0,n);return i.parse(),kSn(i.component.data,i),{spec:l2n(i,u2n(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&S_n(),t.fieldTitle&&jbn()}}function u2n(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):vt(t)&&(t={type:t}),i&&s&&TEn(t.type)){if(i==="step"&&s==="step")Qe(pbe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Qe(pbe(T8(o)));const a=o==="width"?"height":"width";t.type=CEn(a)}}return{...We(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Ube(n,!1),...Ube(e,!0)}}function l2n(e,t,n={},r){const i=e.config?Rwn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),dTn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Cqe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const c2n=Bvn.version,f2n=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:XE,accessPathWithDatum:Fre,compile:a2n,contains:Yn,deepEqual:El,deleteNestedProperty:d6,duplicate:dn,entries:ly,every:Dre,fieldIntersection:Lre,flatAccessWithDatum:jVe,getFirstDefined:ds,hasIntersection:Mre,hash:Gn,internalField:UVe,isBoolean:eI,isEmpty:Yr,isEqual:Uvn,isInternalField:VVe,isNullOrFalse:zW,isNumeric:_8,keys:We,logicalExpr:yC,mergeDeep:LVe,never:MVe,normalize:jqe,normalizeAngle:tI,omit:Fu,pick:KE,prefixGenerator:UW,removePathFromField:hS,replaceAll:J1,replacePathInField:Pc,resetIdCounter:Hvn,setEqual:FVe,some:Q1,stringify:Kr,titleCase:UO,unique:Qd,uniqueId:zVe,vals:Mo,varName:Di,version:c2n},Symbol.toStringTag,{value:"Module"}));function tGe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var d2n="vega-themes",h2n="2.15.0",p2n="Themes for stylized Vega and Vega-Lite visualizations.",m2n=["vega","vega-lite","themes","style"],g2n="BSD-3-Clause",y2n={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},v2n=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],_2n="build/vega-themes.js",nse="build/vega-themes.module.js",b2n="build/vega-themes.min.js",w2n="build/vega-themes.min.js",E2n="build/vega-themes.module.d.ts",x2n={type:"git",url:"https://github.com/vega/vega-themes.git"},S2n=["src","build"],T2n={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},C2n={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},A2n={vega:"*","vega-lite":"*"},I2n={},O2n={name:d2n,version:h2n,description:p2n,keywords:m2n,license:g2n,author:y2n,contributors:v2n,main:_2n,module:nse,unpkg:b2n,jsdelivr:w2n,types:E2n,repository:x2n,files:S2n,scripts:T2n,devDependencies:C2n,peerDependencies:A2n,dependencies:I2n};const yb="#fff",bwe="#888",P2n={background:"#333",view:{stroke:bwe},title:{color:yb,subtitleColor:yb},style:{"guide-label":{fill:yb},"guide-title":{fill:yb}},axis:{domainColor:yb,gridColor:bwe,tickColor:yb}},Zy="#4572a7",k2n={background:"#fff",arc:{fill:Zy},area:{fill:Zy},line:{stroke:Zy,strokeWidth:2},path:{stroke:Zy},rect:{fill:Zy},shape:{stroke:Zy},symbol:{fill:Zy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ev="#30a2da",pz="#cbcbcb",R2n="#999",$2n="#333",wwe="#f0f0f0",Ewe="#333",N2n={arc:{fill:ev},area:{fill:ev},axis:{domainColor:pz,grid:!0,gridColor:pz,gridWidth:1,labelColor:R2n,labelFontSize:10,titleColor:$2n,tickColor:pz,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:wwe,group:{fill:wwe},legend:{labelColor:Ewe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Ewe,titleFontSize:14,titlePadding:10},line:{stroke:ev,strokeWidth:2},path:{stroke:ev,strokeWidth:.5},rect:{fill:ev},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ev},bar:{binSpacing:2,fill:ev,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},tv="#000",D2n={group:{fill:"#e5e5e5"},arc:{fill:tv},area:{fill:tv},line:{stroke:tv},path:{stroke:tv},rect:{fill:tv},shape:{stroke:tv},symbol:{fill:tv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},M2n=22,L2n="normal",xwe="Benton Gothic, sans-serif",Swe=11.5,F2n="normal",nv="#82c6df",mz="Benton Gothic Bold, sans-serif",Twe="normal",Cwe=13,TT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},j2n={background:"#ffffff",title:{anchor:"start",color:"#000000",font:mz,fontSize:M2n,fontWeight:L2n},arc:{fill:nv},area:{fill:nv},line:{stroke:nv,strokeWidth:2},path:{stroke:nv},rect:{fill:nv},shape:{stroke:nv},symbol:{fill:nv,size:30},axis:{labelFont:xwe,labelFontSize:Swe,labelFontWeight:F2n,titleFont:mz,titleFontSize:Cwe,titleFontWeight:Twe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:xwe,labelFontSize:Swe,symbolType:"square",titleFont:mz,titleFontSize:Cwe,titleFontWeight:Twe},range:{category:TT["category-6"],diverging:TT["fireandice-6"],heatmap:TT["fire-7"],ordinal:TT["fire-7"],ramp:TT["fire-7"]}},rv="#ab5787",fR="#979797",B2n={background:"#f9f9f9",arc:{fill:rv},area:{fill:rv},line:{stroke:rv},path:{stroke:rv},rect:{fill:rv},shape:{stroke:rv},symbol:{fill:rv,size:30},axis:{domainColor:fR,domainWidth:.5,gridWidth:.2,labelColor:fR,tickColor:fR,tickWidth:.2,titleColor:fR},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},iv="#3e5c69",z2n={background:"#fff",arc:{fill:iv},area:{fill:iv},line:{stroke:iv},path:{stroke:iv},rect:{fill:iv},shape:{stroke:iv},symbol:{fill:iv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ql="#1696d2",Awe="#000000",U2n="#FFFFFF",dR="Lato",gz="Lato",V2n="Lato",H2n="#DEDDDD",q2n=18,CT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},W2n={background:U2n,title:{anchor:"start",fontSize:q2n,font:dR},axisX:{domain:!0,domainColor:Awe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:gz,labelAngle:0,tickColor:Awe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:dR},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:H2n,gridWidth:1,labelFontSize:12,labelFont:gz,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:dR,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:gz,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:dR,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:CT["six-groups-cat-1"],diverging:CT["diverging-colors"],heatmap:CT["diverging-colors"],ordinal:CT["six-groups-seq"],ramp:CT["shades-blue"]},area:{fill:Ql},rect:{fill:Ql},line:{color:Ql,stroke:Ql,strokeWidth:5},trail:{color:Ql,stroke:Ql,strokeWidth:0,size:1},path:{stroke:Ql,strokeWidth:.5},point:{filled:!0},text:{font:V2n,color:Ql,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ql,stroke:null}},arc:{fill:Ql},shape:{stroke:Ql},symbol:{fill:Ql,size:30}},sv="#3366CC",Iwe="#ccc",hR="Arial, sans-serif",G2n={arc:{fill:sv},area:{fill:sv},path:{stroke:sv},rect:{fill:sv},shape:{stroke:sv},symbol:{stroke:sv},circle:{fill:sv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:hR,fontSize:12},"guide-title":{font:hR,fontSize:12},"group-title":{font:hR,fontSize:12}},title:{font:hR,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Iwe,tickColor:Iwe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},rse=e=>e*(1/3+1),Owe=rse(9),Pwe=rse(10),kwe=rse(12),AT="Segoe UI",Rwe="wf_standard-font, helvetica, arial, sans-serif",$we="#252423",IT="#605E5C",Nwe="transparent",Y2n="#C8C6C4",Zc="#118DFF",K2n="#12239E",X2n="#E66C37",Q2n="#6B007B",J2n="#E044A7",Z2n="#744EC2",eCn="#D9B300",tCn="#D64550",nGe=Zc,rGe="#DEEFFF",Dwe=[rGe,nGe],nCn=[rGe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",nGe],rCn={view:{stroke:Nwe},background:Nwe,font:AT,header:{titleFont:Rwe,titleFontSize:kwe,titleColor:$we,labelFont:AT,labelFontSize:Pwe,labelColor:IT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:IT,labelFontSize:Owe,titleFont:Rwe,titleColor:$we,titleFontSize:kwe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Y2n,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zc},line:{stroke:Zc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:AT,fontSize:Owe,fill:IT},arc:{fill:Zc},area:{fill:Zc,line:!0,opacity:.6},path:{stroke:Zc},rect:{fill:Zc},point:{fill:Zc,filled:!0,size:75},shape:{stroke:Zc},symbol:{fill:Zc,strokeWidth:1.5,size:50},legend:{titleFont:AT,titleFontWeight:"bold",titleColor:IT,labelFont:AT,labelFontSize:Pwe,labelColor:IT,symbolType:"circle",symbolSize:75},range:{category:[Zc,K2n,X2n,Q2n,J2n,Z2n,eCn,tCn],diverging:Dwe,heatmap:Dwe,ordinal:nCn}},yz='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',iCn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',vz=400,pR={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},sCn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],oCn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function uj({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=pR.gridBg[e],i=pR.textPrimary[e],s=pR.textSecondary[e],o=n==="dark"?sCn:oCn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:yz,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:iCn,labelFontWeight:vz,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:pR.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:yz,fill:s,fontWeight:vz},"guide-title":{font:yz,fill:s,fontWeight:vz}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const aCn=uj({theme:"white",background:"#ffffff"}),uCn=uj({theme:"g10",background:"#f4f4f4"}),lCn=uj({theme:"g90",background:"#262626"}),cCn=uj({theme:"g100",background:"#161616"}),fCn=O2n.version,dCn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:uCn,carbong100:cCn,carbong90:lCn,carbonwhite:aCn,dark:P2n,excel:k2n,fivethirtyeight:N2n,ggplot2:D2n,googlecharts:G2n,latimes:j2n,powerbi:rCn,quartz:B2n,urbaninstitute:W2n,version:fCn,vox:z2n},Symbol.toStringTag,{value:"Module"}));function hCn(e,t,n,r){if(De(e))return`[${e.map(i=>t(vt(i)?i:Mwe(i,n))).join(", ")}]`;if(_t(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(_t(c)&&(c=Mwe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function pCn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Mwe(e,t){return JSON.stringify(e,pCn(t))}var mCn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const iGe="vg-tooltip-element",gCn={offsetX:10,offsetY:10,id:iGe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:yCn,maxDepth:2,formatTooltip:hCn,baseURL:""};function yCn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function vCn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return mCn.toString().replace(iGe,e)}function _Cn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class bCn{constructor(t){this.options={...gCn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=vCn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=_Cn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var _z={};function wCn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bz,Lwe;function ECn(){return Lwe||(Lwe=1,bz=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),bz}var xCn=br;br.Node=a_;br.create=br;function br(e){var t=this;if(t instanceof br||(t=new br),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}br.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};br.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};br.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};br.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)TCn(this,arguments[e]);return this.length};br.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)CCn(this,arguments[e]);return this.length};br.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};br.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};br.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};br.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};br.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};br.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};br.prototype.map=function(e,t){t=t||this;for(var n=new br,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};br.prototype.mapReverse=function(e,t){t=t||this;for(var n=new br,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};br.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};br.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};br.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};br.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};br.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new br;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};br.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new br;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};br.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=SCn(this,i,n[r]);return s};br.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function SCn(e,t,n){var r=t===e.head?new a_(n,null,t,e):new a_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function TCn(e,t){e.tail=new a_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function CCn(e,t){e.head=new a_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a_(e,t,n,r){if(!(this instanceof a_))return new a_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{ECn()(br)}catch{}const ACn=xCn,Nv=Symbol("max"),Tp=Symbol("length"),vb=Symbol("lengthCalculator"),bC=Symbol("allowStale"),e1=Symbol("maxAge"),bp=Symbol("dispose"),Fwe=Symbol("noDisposeOnSet"),Xs=Symbol("lruList"),ef=Symbol("cache"),sGe=Symbol("updateAgeOnGet"),wz=()=>1;class ICn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Nv]=t.max||1/0;const n=t.length||wz;if(this[vb]=typeof n!="function"?wz:n,this[bC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[e1]=t.maxAge||0,this[bp]=t.dispose,this[Fwe]=t.noDisposeOnSet||!1,this[sGe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Nv]=t||1/0,OT(this)}get max(){return this[Nv]}set allowStale(t){this[bC]=!!t}get allowStale(){return this[bC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[e1]=t,OT(this)}get maxAge(){return this[e1]}set lengthCalculator(t){typeof t!="function"&&(t=wz),t!==this[vb]&&(this[vb]=t,this[Tp]=0,this[Xs].forEach(n=>{n.length=this[vb](n.value,n.key),this[Tp]+=n.length})),OT(this)}get lengthCalculator(){return this[vb]}get length(){return this[Tp]}get itemCount(){return this[Xs].length}rforEach(t,n){n=n||this;for(let r=this[Xs].tail;r!==null;){const i=r.prev;jwe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Xs].head;r!==null;){const i=r.next;jwe(this,t,r,n),r=i}}keys(){return this[Xs].toArray().map(t=>t.key)}values(){return this[Xs].toArray().map(t=>t.value)}reset(){this[bp]&&this[Xs]&&this[Xs].length&&this[Xs].forEach(t=>this[bp](t.key,t.value)),this[ef]=new Map,this[Xs]=new ACn,this[Tp]=0}dump(){return this[Xs].map(t=>I6(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Xs]}set(t,n,r){if(r=r||this[e1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[vb](n,t);if(this[ef].has(t)){if(s>this[Nv])return qw(this,this[ef].get(t)),!1;const u=this[ef].get(t).value;return this[bp]&&(this[Fwe]||this[bp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Tp]+=s-u.length,u.length=s,this.get(t),OT(this),!0}const o=new OCn(t,n,s,i,r);return o.length>this[Nv]?(this[bp]&&this[bp](t,n),!1):(this[Tp]+=o.length,this[Xs].unshift(o),this[ef].set(t,this[Xs].head),OT(this),!0)}has(t){if(!this[ef].has(t))return!1;const n=this[ef].get(t).value;return!I6(this,n)}get(t){return Ez(this,t,!0)}peek(t){return Ez(this,t,!1)}pop(){const t=this[Xs].tail;return t?(qw(this,t),t.value):null}del(t){qw(this,this[ef].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[ef].forEach((t,n)=>Ez(this,n,!1))}}const Ez=(e,t,n)=>{const r=e[ef].get(t);if(r){const i=r.value;if(I6(e,i)){if(qw(e,r),!e[bC])return}else n&&(e[sGe]&&(r.value.now=Date.now()),e[Xs].unshiftNode(r));return i.value}},I6=(e,t)=>{if(!t||!t.maxAge&&!e[e1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[e1]&&n>e[e1]},OT=e=>{if(e[Tp]>e[Nv])for(let t=e[Xs].tail;e[Tp]>e[Nv]&&t!==null;){const n=t.prev;qw(e,t),t=n}},qw=(e,t)=>{if(t){const n=t.value;e[bp]&&e[bp](n.key,n.value),e[Tp]-=n.length,e[ef].delete(n.key),e[Xs].removeNode(t)}};class OCn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const jwe=(e,t,n,r)=>{let i=n.value;I6(e,i)&&(qw(e,n),e[bC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var PCn=ICn;const kCn=Object.freeze({loose:!0}),RCn=Object.freeze({}),$Cn=e=>e?typeof e!="object"?kCn:e:RCn;var ise=$Cn,cG={exports:{}};const NCn="2.0.0",oGe=256,DCn=Number.MAX_SAFE_INTEGER||9007199254740991,MCn=16,LCn=oGe-6,FCn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var sse={MAX_LENGTH:oGe,MAX_SAFE_COMPONENT_LENGTH:MCn,MAX_SAFE_BUILD_LENGTH:LCn,MAX_SAFE_INTEGER:DCn,RELEASE_TYPES:FCn,SEMVER_SPEC_VERSION:NCn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const jCn=typeof process=="object"&&_z&&_z.NODE_DEBUG&&/\bsemver\b/i.test(_z.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var lj=jCn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=sse,s=lj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(cG,cG.exports);var ose=cG.exports;const Bwe=/^[0-9]+$/,aGe=(e,t)=>{const n=Bwe.test(e),r=Bwe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},BCn=(e,t)=>aGe(t,e);var zCn={compareIdentifiers:aGe,rcompareIdentifiers:BCn};const mR=lj,{MAX_LENGTH:zwe,MAX_SAFE_INTEGER:gR}=sse,{safeRe:Uwe,t:Vwe}=ose,UCn=ise,{compareIdentifiers:_b}=zCn;let VCn=class gd{constructor(t,n){if(n=UCn(n),t instanceof gd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>zwe)throw new TypeError(`version is longer than ${zwe} characters`);mR("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Uwe[Vwe.LOOSE]:Uwe[Vwe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gR||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gR||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gR||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<gR)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(mR("SemVer.compare",this.version,this.options,t),!(t instanceof gd)){if(typeof t=="string"&&t===this.version)return 0;t=new gd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof gd||(t=new gd(t,this.options)),_b(this.major,t.major)||_b(this.minor,t.minor)||_b(this.patch,t.patch)}comparePre(t){if(t instanceof gd||(t=new gd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(mR("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return _b(r,i)}while(++n)}compareBuild(t){t instanceof gd||(t=new gd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(mR("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return _b(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),_b(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ase=VCn;const Hwe=ase,HCn=(e,t,n)=>new Hwe(e,n).compare(new Hwe(t,n));var wS=HCn;const qCn=wS,WCn=(e,t,n)=>qCn(e,t,n)===0;var GCn=WCn;const YCn=wS,KCn=(e,t,n)=>YCn(e,t,n)!==0;var XCn=KCn;const QCn=wS,JCn=(e,t,n)=>QCn(e,t,n)>0;var ZCn=JCn;const eAn=wS,tAn=(e,t,n)=>eAn(e,t,n)>=0;var nAn=tAn;const rAn=wS,iAn=(e,t,n)=>rAn(e,t,n)<0;var sAn=iAn;const oAn=wS,aAn=(e,t,n)=>oAn(e,t,n)<=0;var uAn=aAn;const lAn=GCn,cAn=XCn,fAn=ZCn,dAn=nAn,hAn=sAn,pAn=uAn,mAn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return lAn(e,n,r);case"!=":return cAn(e,n,r);case">":return fAn(e,n,r);case">=":return dAn(e,n,r);case"<":return hAn(e,n,r);case"<=":return pAn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var gAn=mAn,xz,qwe;function yAn(){if(qwe)return xz;qwe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}xz=t;const n=ise,{safeRe:r,t:i}=ose,s=gAn,o=lj,a=ase,u=uGe();return xz}var Sz,Wwe;function uGe(){if(Wwe)return Sz;Wwe=1;class e{constructor(N,F){if(F=r(F),N instanceof e)return N.loose===!!F.loose&&N.includePrerelease===!!F.includePrerelease?N:new e(N.raw,F);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=N.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(z=>this.parseRange(z.trim())).filter(z=>z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const z=this.set[0];if(this.set=this.set.filter(W=>!p(W[0])),this.set.length===0)this.set=[z];else if(this.set.length>1){for(const W of this.set)if(W.length===1&&m(W[0])){this.set=[W];break}}}this.format()}format(){return this.range=this.set.map(N=>N.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(N){const z=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+N,W=n.get(z);if(W)return W;const V=this.options.loose,G=V?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];N=N.replace(G,k(this.options.includePrerelease)),s("hyphen replace",N),N=N.replace(a[u.COMPARATORTRIM],l),s("comparator trim",N),N=N.replace(a[u.TILDETRIM],c),s("tilde trim",N),N=N.replace(a[u.CARETTRIM],f),s("caret trim",N);let M=N.split(" ").map(B=>y(B,this.options)).join(" ").split(/\s+/).map(B=>I(B,this.options));V&&(M=M.filter(B=>(s("loose invalid filter",B,this.options),!!B.match(a[u.COMPARATORLOOSE])))),s("range list",M);const H=new Map,Y=M.map(B=>new i(B,this.options));for(const B of Y){if(p(B))return[B];H.set(B.value,B)}H.size>1&&H.has("")&&H.delete("");const L=[...H.values()];return n.set(z,L),L}intersects(N,F){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some(z=>g(z,F)&&N.set.some(W=>g(W,F)&&z.every(V=>W.every(G=>V.intersects(G,F)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new o(N,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if($(this.set[F],N,this.options))return!0;return!1}}Sz=e;const t=PCn,n=new t({max:1e3}),r=ise,i=yAn(),s=lj,o=ase,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=ose,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=sse,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,N)=>{let F=!0;const z=P.slice();let W=z.pop();for(;F&&z.length;)F=z.every(V=>W.intersects(V,N)),W=z.pop();return F},y=(P,N)=>(s("comp",P,N),P=E(P,N),s("caret",P),P=_(P,N),s("tildes",P),P=b(P,N),s("xrange",P),P=A(P,N),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",_=(P,N)=>P.trim().split(/\s+/).map(F=>w(F,N)).join(" "),w=(P,N)=>{const F=N.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(z,W,V,G,M)=>{s("tilde",P,z,W,V,G,M);let H;return v(W)?H="":v(V)?H=`>=${W}.0.0 <${+W+1}.0.0-0`:v(G)?H=`>=${W}.${V}.0 <${W}.${+V+1}.0-0`:M?(s("replaceTilde pr",M),H=`>=${W}.${V}.${G}-${M} <${W}.${+V+1}.0-0`):H=`>=${W}.${V}.${G} <${W}.${+V+1}.0-0`,s("tilde return",H),H})},E=(P,N)=>P.trim().split(/\s+/).map(F=>S(F,N)).join(" "),S=(P,N)=>{s("caret",P,N);const F=N.loose?a[u.CARETLOOSE]:a[u.CARET],z=N.includePrerelease?"-0":"";return P.replace(F,(W,V,G,M,H)=>{s("caret",P,W,V,G,M,H);let Y;return v(V)?Y="":v(G)?Y=`>=${V}.0.0${z} <${+V+1}.0.0-0`:v(M)?V==="0"?Y=`>=${V}.${G}.0${z} <${V}.${+G+1}.0-0`:Y=`>=${V}.${G}.0${z} <${+V+1}.0.0-0`:H?(s("replaceCaret pr",H),V==="0"?G==="0"?Y=`>=${V}.${G}.${M}-${H} <${V}.${G}.${+M+1}-0`:Y=`>=${V}.${G}.${M}-${H} <${V}.${+G+1}.0-0`:Y=`>=${V}.${G}.${M}-${H} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?G==="0"?Y=`>=${V}.${G}.${M}${z} <${V}.${G}.${+M+1}-0`:Y=`>=${V}.${G}.${M}${z} <${V}.${+G+1}.0-0`:Y=`>=${V}.${G}.${M} <${+V+1}.0.0-0`),s("caret return",Y),Y})},b=(P,N)=>(s("replaceXRanges",P,N),P.split(/\s+/).map(F=>T(F,N)).join(" ")),T=(P,N)=>{P=P.trim();const F=N.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(z,W,V,G,M,H)=>{s("xRange",P,z,W,V,G,M,H);const Y=v(V),L=Y||v(G),B=L||v(M),q=B;return W==="="&&q&&(W=""),H=N.includePrerelease?"-0":"",Y?W===">"||W==="<"?z="<0.0.0-0":z="*":W&&q?(L&&(G=0),M=0,W===">"?(W=">=",L?(V=+V+1,G=0,M=0):(G=+G+1,M=0)):W==="<="&&(W="<",L?V=+V+1:G=+G+1),W==="<"&&(H="-0"),z=`${W+V}.${G}.${M}${H}`):L?z=`>=${V}.0.0${H} <${+V+1}.0.0-0`:B&&(z=`>=${V}.${G}.0${H} <${V}.${+G+1}.0-0`),s("xRange return",z),z})},A=(P,N)=>(s("replaceStars",P,N),P.trim().replace(a[u.STAR],"")),I=(P,N)=>(s("replaceGTE0",P,N),P.trim().replace(a[N.includePrerelease?u.GTE0PRE:u.GTE0],"")),k=P=>(N,F,z,W,V,G,M,H,Y,L,B,q,Z)=>(v(z)?F="":v(W)?F=`>=${z}.0.0${P?"-0":""}`:v(V)?F=`>=${z}.${W}.0${P?"-0":""}`:G?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(Y)?H="":v(L)?H=`<${+Y+1}.0.0-0`:v(B)?H=`<${Y}.${+L+1}.0-0`:q?H=`<=${Y}.${L}.${B}-${q}`:P?H=`<${Y}.${L}.${+B+1}-0`:H=`<=${H}`,`${F} ${H}`.trim()),$=(P,N,F)=>{for(let z=0;z<P.length;z++)if(!P[z].test(N))return!1;if(N.prerelease.length&&!F.includePrerelease){for(let z=0;z<P.length;z++)if(s(P[z].semver),P[z].semver!==i.ANY&&P[z].semver.prerelease.length>0){const W=P[z].semver;if(W.major===N.major&&W.minor===N.minor&&W.patch===N.patch)return!0}return!1}return!0};return Sz}const vAn=uGe(),_An=(e,t,n)=>{try{t=new vAn(t,n)}catch{return!1}return t.test(e)};var bAn=_An,lGe=wCn(bAn);function wAn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var EAn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function cGe(e,...t){for(const n of t)xAn(e,n);return e}function xAn(e,t){for(const n of Object.keys(t))rS(e,n,t[n],!0)}const nf=ovn;let aI=f2n;const yR=typeof window<"u"?window:void 0;var eEe;aI===void 0&&((eEe=yR==null?void 0:yR.vl)!=null&&eEe.compile)&&(aI=yR.vl);const SAn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},TAn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},_2={vega:"Vega","vega-lite":"Vega-Lite"},O6={vega:nf.version,"vega-lite":aI?aI.version:"not available"},CAn={vega:e=>e,"vega-lite":(e,t)=>aI.compile(e,{config:t}).spec},AAn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,IAn="chart-wrapper";function OAn(e){return typeof e=="function"}function Gwe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${_2[r]} JSON Source`}function PAn(e,t){if(e.$schema){const n=tGe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${_2[n.library]}, but mode argument sets ${_2[t]??t}.`);const r=n.library;return lGe(O6[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${_2[r]} ${n.version}, but the current version of ${_2[r]} is v${O6[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function fGe(e){return!!(e&&"load"in e)}function Ywe(e){return fGe(e)?e:nf.loader(e)}function kAn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return vt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function RAn(e,t,n={}){let r,i;vt(t)?(i=Ywe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=kAn(r),o=s.loader;(!i||o)&&(i=Ywe(n.loader??o));const a=await Kwe(s,i),u=await Kwe(n,i),l={...cGe(u,a),config:nS(u.config??{},a.config??{})};return await NAn(e,r,l,i)}async function Kwe(e,t){const n=vt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=vt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function $An(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function NAn(e,t,n={},r){const i=n.theme?nS(dCn[n.theme],n.config??{}):n.config,s=Py(n.actions)?n.actions:cGe({},SAn,n.actions??{}),o={...TAn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??nf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:b}=$An(c);if(!S.getElementById(E)){const T=document.createElement("style");T.id=E,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?EAn.toString():n.defaultStyle,b.appendChild(T)}}const f=PAn(t,n.mode);let d=CAn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=tGe(d.$schema);lGe(O6.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${O6.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(IAn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):SF(d,p,!0,!1).newDocument),n.formatLocale&&nf.formatLocale(n.formatLocale),n.timeFormatLocale&&nf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?nf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&nf.expressionFunction(E,S)}const{ast:m}=n,g=nf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||nf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:nf.expressionInterpreter??n.expr??gvn}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:b}=S;b=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):b=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):b=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,b=E&&!fGe(E)?E==null?void 0:E.baseURL:void 0,T=OAn(S)?S:new bCn({baseURL:b,...S===!0?{}:S}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const b=document.createElement("details");b.title=o.CLICK_TO_VIEW_ACTIONS,c.append(b),E=b;const T=document.createElement("summary");T.innerHTML=AAn,b.append(T),_=A=>{b.contains(A.target)||b.removeAttribute("open")},document.addEventListener("click",_)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const b of["svg","png"])if(s===!0||s.export===!0||s.export[b]){const T=o[`${b.toUpperCase()}_ACTION`],A=document.createElement("a"),I=_t(n.scaleFactor)?n.scaleFactor[b]:n.scaleFactor;A.text=T,A.href="#",A.target="_blank",A.download=`${l}.${b}`,A.addEventListener("mousedown",async function(k){k.preventDefault();const $=await y.toImageURL(b,I);this.href=$}),S.append(A)}}if(s===!0||s.source!==!1){const b=document.createElement("a");b.text=o.SOURCE_ACTION,b.href="#",b.addEventListener("click",function(T){Gwe(T7(t),n.sourceHeader??"",n.sourceFooter??"",f),T.preventDefault()}),S.append(b)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const b=document.createElement("a");b.text=o.COMPILED_ACTION,b.href="#",b.addEventListener("click",function(T){Gwe(T7(d),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),S.append(b)}if(s===!0||s.editor!==!1){const b=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(A){wAn(window,b,{config:i,mode:f,renderer:a,spec:T7(t)}),A.preventDefault()}),S.append(T)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function DAn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function MAn(e,t,n){n&&(DAn(n)?n(e.data(t)):e.change(t,nf.changeset().remove(()=>!0).insert(n)))}function LAn(e,t){Object.keys(t).forEach(n=>{MAn(e,n,t[n])})}function dGe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const hGe=()=>{};function Tz(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function FAn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=dGe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!XH(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Xwe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Cz(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function b2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class pGe extends j.PureComponent{constructor(){super(...arguments),b2(this,"containerRef",j.createRef()),b2(this,"resultPromise",void 0),b2(this,"handleError",t=>{const{onError:n=hGe}=this.props;n(t,this.containerRef.current),console.warn(t)}),b2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=dGe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=FAn(Cz(this.props),Cz(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!Mq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Xwe(a,s),i&&Tz(a,i)),a.run()})}else Mq(i,s)||this.modifyView(o=>{s&&Xwe(o,s),i&&Tz(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Cz(this.props);this.resultPromise=RAn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;Tz(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return j.createElement("div",{ref:this.containerRef,className:t,style:n})}}b2(pGe,"propTypes",{className:Jt.string,onError:Jt.func});function fG(){return fG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fG.apply(this,arguments)}function dG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const jAn={};class mGe extends j.PureComponent{constructor(){super(...arguments),dG(this,"vegaEmbed",j.createRef()),dG(this,"handleNewView",t=>{this.update();const{onNewView:n=hGe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Mq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{LAn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return j.createElement(pGe,fG({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}dG(mGe,"defaultProps",{data:jAn});function hG(){return hG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hG.apply(this,arguments)}function BAn(e){return j.createElement(mGe,hG({},e,{mode:"vega-lite"}))}function Qwe(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function zAn(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=NT(!1),a=Vl(),[u,l]=yc(),c=n.filter(I=>I.completed).map(I=>Math.max(...Object.values(I.answers).map(k=>k.endTime))),[f,d]=C.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=C.useMemo(()=>n.filter(I=>I.completed&&Qwe(I.answers,f)),[n,f]),p=C.useMemo(()=>n.filter(I=>!I.completed&&Qwe(I.answers,f)),[n,f]),m=C.useMemo(()=>{var I,k;return h.length>0?[{Date:(I=f[0])==null?void 0:I.getTime(),Participants:0},...h.map($=>Math.max(...Object.values($.answers).map(P=>P.endTime).flat())).sort(($,P)=>$-P).map(($,P)=>({Date:$,Participants:P})),{Date:(k=f[1])==null?void 0:k.getTime(),Participants:h.length}]:[]},[h,f]),g=C.useMemo(()=>{var I,k;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(I=f[0])==null?void 0:I.getTime(),(k=f[1])==null?void 0:k.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:_}]=NT(!1),[w,{close:E,open:S}]=NT(!1),[b,{close:T,open:A}]=NT(!1);return R.jsxs(Lm,{children:[R.jsxs(p4,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[R.jsxs(vi,{align:"center",mb:16,justify:"space-between",children:[R.jsxs(vi,{direction:"column",children:[R.jsx(fa,{order:5,mb:4,children:t}),R.jsxs(vi,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[R.jsxs(pw,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),R.jsxs(pw,{size:"sm",color:"green",children:["Completed:",h.length]}),R.jsxs(pw,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),R.jsxs(yr,{children:[R.jsxs(cr,{opened:y,children:[R.jsx(cr.Target,{children:R.jsx(Fr,{variant:"light",disabled:n.length===0,onClick:()=>{mZ(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:_,onMouseLeave:v,px:4,children:R.jsx(vyt,{})})}),R.jsx(cr.Dropdown,{children:R.jsx(it,{children:"Download all participants data as JSON"})})]}),R.jsxs(cr,{opened:w,children:[R.jsx(cr.Target,{children:R.jsx(Fr,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:S,onMouseLeave:E,px:4,children:R.jsx(cPe,{})})}),R.jsx(cr.Dropdown,{children:R.jsx(it,{children:"Download all participants data as a tidy CSV"})})]}),R.jsxs(cr,{opened:b,children:[R.jsx(cr.Target,{children:R.jsx(Fr,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:A,onMouseLeave:T,px:4,children:R.jsx(gyt,{})})}),R.jsx(cr.Dropdown,{children:R.jsx(it,{children:"Analyze study data"})})]})]})]}),R.jsx(Vje,{label:R.jsx(it,{children:"Time Filter:"}),placeholder:"Pick dates range",value:f,onChange:d}),m.length>0?R.jsxs(R.Fragment,{children:[R.jsx(it,{mt:16,children:"Finished Participants"}),R.jsx(BAn,{spec:g,actions:!1})]}):R.jsx(dt,{h:293.4,children:R.jsx(Ya,{style:{height:"100%"},children:R.jsx(it,{children:"Not enough participants for chart"})})})]}),i&&R.jsx(eHt,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function UAn(e){const{globalConfig:t}=e,[n,r]=C.useState(!1),[i,s]=C.useState({}),[o,a]=C.useState({}),{storageEngine:u}=fo();return C.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await bee(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),R.jsxs(dt,{children:[R.jsx(fa,{mb:20,order:4,children:"Your Studies:"}),R.jsxs(yf,{children:[t.configsList.map(l=>i[l]&&R.jsx(yf.Col,{md:12,xl:6,children:R.jsx(zAn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),R.jsx(Fm,{visible:n})]})]})}function VAn({globalConfig:e}){return R.jsxs(vI,{children:[R.jsx(cC,{studyIds:e.configsList}),R.jsx(Lm,{fluid:!0,children:R.jsx(UAn,{globalConfig:e})})]})}function HAn(){const{user:e,triggerAuth:t}=eS(),{storageEngine:n}=fo(),[r,i]=C.useState(!1),[s,o]=C.useState([]),[a,u]=C.useState(!1),[l,c]=C.useState(!1),[f,d]=C.useState(!1),[h,p]=C.useState(!1),[m,g]=C.useState(""),[y,v]=C.useState(null),_=s5e({initialValues:{email:""},validate:{email:OHt("Invalid email")}});C.useEffect(()=>{(async()=>{if(u(!0),n instanceof Id){const k=await(n==null?void 0:n.getUserManagementData("authentication"));i(k==null?void 0:k.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof Id){const I=await oje(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},E=async I=>{u(!0),n instanceof Id&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof Id){await n.addAdminUser({email:_.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(k=>k.email))}u(!1),c(!1),_.setValues({email:""})},b=I=>{d(!0),g(I)},T=async()=>{if(u(!0),n instanceof Id){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(k=>k.email))}d(!1),u(!1)},A=C.useMemo(()=>n instanceof Id,[n]);return R.jsxs(R.Fragment,{children:[R.jsx(Lm,{children:R.jsxs(p4,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[R.jsx(fa,{mb:20,order:3,children:"Authentication"}),r?R.jsx(vi,{children:R.jsx(it,{children:"Authentication is enabled."})}):R.jsxs(vi,{justify:"space-between",children:[R.jsx(dt,{children:R.jsx(it,{children:"Authentication is currently disabled."})}),R.jsx(Yp,{label:"You can only enable auth when using Firebase",disabled:A,children:R.jsx(Fr,{onClick:I=>A?w():I.preventDefault(),color:"green","data-disabled":A?void 0:!0,sx:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?R.jsxs(vi,{mt:40,direction:"column",children:[R.jsxs(vi,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[R.jsx(fa,{order:6,children:"Enabled Users"}),R.jsx(kyt,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var k;return R.jsxs(vi,{justify:"space-between",mb:10,children:[R.jsx(it,{children:I}),I===((k=e.user)==null?void 0:k.email)?R.jsx(it,{color:"blue",size:"xs",children:"You"}):R.jsx(dm,{variant:"subtle",onClick:()=>b(I),children:R.jsx(Pyt,{color:"red"})})]},I)}):null]}):null]})}),R.jsx(Gp,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:R.jsxs(dt,{component:"form",onSubmit:_.onSubmit(()=>S()),children:[R.jsx(vx,{icon:R.jsx(fyt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),R.jsxs(vi,{mt:30,justify:"right",children:[R.jsx(Fr,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),R.jsx(Fr,{type:"submit",children:"Save"})]})]})}),R.jsxs(Gp,{opened:f,size:"large",onClose:()=>d(!1),title:R.jsxs(it,{fw:700,children:["Remove",m,"?"]}),children:[R.jsxs(it,{mt:40,children:["Are you sure you want to remove",R.jsx("b",{children:m})," ","as an administrator?"]}),R.jsxs(vi,{mt:40,justify:"right",children:[R.jsx(Fr,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),R.jsx(Fr,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),R.jsxs(Gp,{opened:h,size:"md",onClose:()=>d(!1),title:R.jsx(it,{fw:700,children:"Enable Authentication?"}),children:[R.jsxs(it,{mt:40,children:["User"," ",R.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),R.jsxs(vi,{mt:40,justify:"right",children:[R.jsx(Fr,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),R.jsx(Fr,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),R.jsx(Fm,{visible:a})]})}var qAn={VITE_BASE_PATH:"/ThinkAloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ",VITE_REVISIT_MODE:"private",BASE_URL:"/ThinkAloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function WAn(){const t=await(await fetch(`${Nc}global.json`)).text();return QVt(t)}async function GAn(e){const t={},n=e.configsList.filter(o=>qAn.VITE_CI==="true"?!0:!e.configs[o].test).map(o=>`${Nc}${e.configs[o].path}`),r=await Promise.all(n.map(o=>fetch(o))),i=await Promise.all(r.map(o=>o.text())),s=await Promise.all(i.map((o,a)=>Z4e(o,e.configsList[a])));return e.configsList.forEach((o,a)=>{t[o]=s[a]}),t}function YAn(){const[e,t]=C.useState(null),[n,r]=C.useState({});return C.useEffect(()=>{async function i(){e&&r(await GAn(e))}i()},[e]),C.useEffect(()=>{e||WAn().then(i=>{t(i)})},[e]),e?R.jsx(VXe,{basename:Nc,children:R.jsx(FZt,{children:R.jsx(Y0t,{children:R.jsxs(DXe,{children:[R.jsx(pp,{path:"/",element:R.jsxs(R.Fragment,{children:[R.jsx(cC,{studyIds:e.configsList}),R.jsx(vSt,{globalConfig:e,studyConfigs:n})]})}),R.jsx(pp,{path:"/:studyId/*",element:R.jsx(_en,{globalConfig:e})}),R.jsx(pp,{path:"/analysis/dashboard",element:R.jsx(y7,{children:R.jsx(VAn,{globalConfig:e})})}),R.jsx(pp,{path:"/analysis",element:R.jsx(sq,{to:"/analysis/dashboard"})}),R.jsx(pp,{path:"/analysis/stats/:studyId/:tab",element:R.jsx(y7,{children:R.jsx(xen,{globalConfig:e})})}),R.jsx(pp,{path:"/analysis/stats/:studyId",element:R.jsx(sq,{to:"./table",replace:!0})}),R.jsx(pp,{path:"/settings",element:R.jsx(y7,{children:R.jsxs(vI,{children:[R.jsx(cC,{studyIds:e.configsList}),R.jsx(HAn,{})]})})}),R.jsx(pp,{path:"/login",element:R.jsxs(R.Fragment,{children:[R.jsx(cC,{studyIds:e.configsList}),R.jsx(Sen,{})]})})]})})})}):null}let vR;const KAn=new Uint8Array(16);function XAn(){if(!vR&&(vR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vR))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vR(KAn)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function QAn(e,t=0){return bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]}const JAn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jwe={randomUUID:JAn};function Zwe(e,t,n){if(Jwe.randomUUID&&!t&&!e)return Jwe.randomUUID();e=e||{};const r=e.random||(e.rng||XAn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,QAn(r)}class ZAn extends tje{constructor(){super("localStorage");rl(this,"studyDatabase")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await Rq.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Lw(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await Lw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=Zwe();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Rq.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=Zwe();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await Lw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function eIn(){let e,t=!1;{const n=new Id;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new ZAn;await n.connect(),e=n}return e}function tIn(){const{storageEngine:e,setStorageEngine:t}=fo();return C.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await eIn();t(r)}n()},[t,e]),R.jsx(YAn,{})}Az.createRoot(document.getElementById("root")).render(R.jsx(j.StrictMode,{children:R.jsx(WKe,{children:R.jsx(tIn,{})})}))});export default nIn();
