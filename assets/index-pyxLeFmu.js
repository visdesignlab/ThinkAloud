var $je=Object.defineProperty;var Mje=(e,t,n)=>t in e?$je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lje=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var hl=(e,t,n)=>(Mje(e,typeof t!="symbol"?t+"":t,n),n);var Sun=Lje((Bln,Aie)=>{function Fje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var No=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ho(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rye(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Nye={exports:{}},RM={},Pye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II=Symbol.for("react.element"),jje=Symbol.for("react.portal"),Bje=Symbol.for("react.fragment"),Uje=Symbol.for("react.strict_mode"),zje=Symbol.for("react.profiler"),Vje=Symbol.for("react.provider"),Hje=Symbol.for("react.context"),qje=Symbol.for("react.forward_ref"),Wje=Symbol.for("react.suspense"),Gje=Symbol.for("react.memo"),Yje=Symbol.for("react.lazy"),Wie=Symbol.iterator;function Kje(e){return e===null||typeof e!="object"?null:(e=Wie&&e[Wie]||e["@@iterator"],typeof e=="function"?e:null)}var Oye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dye=Object.assign,$ye={};function Rx(e,t,n){this.props=e,this.context=t,this.refs=$ye,this.updater=n||Oye}Rx.prototype.isReactComponent={};Rx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Mye(){}Mye.prototype=Rx.prototype;function Uq(e,t,n){this.props=e,this.context=t,this.refs=$ye,this.updater=n||Oye}var zq=Uq.prototype=new Mye;zq.constructor=Uq;Dye(zq,Rx.prototype);zq.isPureReactComponent=!0;var Gie=Array.isArray,Lye=Object.prototype.hasOwnProperty,Vq={current:null},Fye={key:!0,ref:!0,__self:!0,__source:!0};function jye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Lye.call(t,r)&&!Fye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:II,type:e,key:s,ref:o,props:i,_owner:Vq.current}}function Xje(e,t){return{$$typeof:II,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Hq(e){return typeof e=="object"&&e!==null&&e.$$typeof===II}function Qje(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yie=/\/+/g;function s8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qje(""+e.key):t.toString(36)}function RP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case II:case jje:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+s8(o,0):r,Gie(i)?(n="",e!=null&&(n=e.replace(Yie,"$&/")+"/"),RP(i,t,n,"",function(l){return l})):i!=null&&(Hq(i)&&(i=Xje(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Gie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+s8(s,a);o+=RP(s,t,n,u,i)}else if(u=Kje(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+s8(s,a++),o+=RP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function LR(e,t,n){if(e==null)return e;var r=[],i=0;return RP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Jje(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var uu={current:null},NP={transition:null},Zje={ReactCurrentDispatcher:uu,ReactCurrentBatchConfig:NP,ReactCurrentOwner:Vq};function Bye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:LR,forEach:function(e,t,n){LR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return LR(e,function(){t++}),t},toArray:function(e){return LR(e,function(t){return t})||[]},only:function(e){if(!Hq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Rx;Mn.Fragment=Bje;Mn.Profiler=zje;Mn.PureComponent=Uq;Mn.StrictMode=Uje;Mn.Suspense=Wje;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zje;Mn.act=Bye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Dye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Vq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Lye.call(t,u)&&!Fye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:II,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:Hje,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Vje,_context:e},e.Consumer=e};Mn.createElement=jye;Mn.createFactory=function(e){var t=jye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:qje,render:e}};Mn.isValidElement=Hq;Mn.lazy=function(e){return{$$typeof:Yje,_payload:{_status:-1,_result:e},_init:Jje}};Mn.memo=function(e,t){return{$$typeof:Gje,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=NP.transition;NP.transition={};try{e()}finally{NP.transition=t}};Mn.unstable_act=Bye;Mn.useCallback=function(e,t){return uu.current.useCallback(e,t)};Mn.useContext=function(e){return uu.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return uu.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return uu.current.useEffect(e,t)};Mn.useId=function(){return uu.current.useId()};Mn.useImperativeHandle=function(e,t,n){return uu.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return uu.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return uu.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return uu.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return uu.current.useReducer(e,t,n)};Mn.useRef=function(e){return uu.current.useRef(e)};Mn.useState=function(e){return uu.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return uu.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return uu.current.useTransition()};Mn.version="18.3.1";Pye.exports=Mn;var I=Pye.exports;const Cr=Ho(I),Uye=Fje({__proto__:null,default:Cr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e9e=I,t9e=Symbol.for("react.element"),n9e=Symbol.for("react.fragment"),r9e=Object.prototype.hasOwnProperty,i9e=e9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s9e={key:!0,ref:!0,__self:!0,__source:!0};function zye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)r9e.call(t,r)&&!s9e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:t9e,type:e,key:s,ref:o,props:i,_owner:i9e.current}}RM.Fragment=n9e;RM.jsx=zye;RM.jsxs=zye;Nye.exports=RM;var _=Nye.exports,t7={},Vye={exports:{}},Yl={},Hye={exports:{}},qye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var $=U.length;U.push(H);e:for(;0<$;){var z=$-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[$]=W,$=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],$=U.pop();if($!==H){U[0]=$;e:for(var z=0,W=U.length,F=W>>>1;z<F;){var V=2*(z+1)-1,G=U[V],ee=V+1,le=U[ee];if(0>i(G,$))ee<W&&0>i(le,G)?(U[z]=le,U[ee]=$,z=ee):(U[z]=G,U[V]=$,z=V);else if(ee<W&&0>i(le,$))U[z]=le,U[ee]=$,z=ee;else break e}}return H}function i(U,H){var $=U.sortIndex-H.sortIndex;return $!==0?$:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,j(x);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function x(U,H){p=!1,m&&(m=!1,y(S),S=-1),h=!0;var $=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var F=!0;else{var V=n(l);V!==null&&B(w,V.startTime-H),F=!1}return F}finally{f=null,d=$,h=!1}}var C=!1,E=null,S=-1,A=5,k=-1;function R(){return!(e.unstable_now()-k<A)}function D(){if(E!==null){var U=e.unstable_now();k=U;var H=!0;try{H=E(!0,U)}finally{H?P():(C=!1,E=null)}}else C=!1}var P;if(typeof v=="function")P=function(){v(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,L=O.port2;O.port1.onmessage=D,P=function(){L.postMessage(null)}}else P=function(){g(D,0)};function j(U){E=U,C||(C=!0,P())}function B(U,H){S=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,j(x))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var $=d;d=H;try{return U()}finally{d=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var $=d;d=U;try{return H()}finally{d=$}},e.unstable_scheduleCallback=function(U,H,$){var z=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?z+$:z):$=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=$+W,U={id:c++,callback:H,priorityLevel:U,startTime:$,expirationTime:W,sortIndex:-1},$>z?(U.sortIndex=$,t(l,U),n(u)===null&&U===n(l)&&(m?(y(S),S=-1):m=!0,B(w,$-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,j(x))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var H=d;return function(){var $=d;d=H;try{return U.apply(this,arguments)}finally{d=$}}}})(qye);Hye.exports=qye;var o9e=Hye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a9e=I,$l=o9e;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wye=new Set,z2={};function Ib(e,t){hE(e,t),hE(e+"Capture",t)}function hE(e,t){for(z2[e]=t,e=0;e<t.length;e++)Wye.add(t[e])}var Sm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n7=Object.prototype.hasOwnProperty,u9e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kie={},Xie={};function l9e(e){return n7.call(Xie,e)?!0:n7.call(Kie,e)?!1:u9e.test(e)?Xie[e]=!0:(Kie[e]=!0,!1)}function c9e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function f9e(e,t,n,r){if(t===null||typeof t>"u"||c9e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var jo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){jo[e]=new lu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];jo[t]=new lu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){jo[e]=new lu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){jo[e]=new lu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){jo[e]=new lu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){jo[e]=new lu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){jo[e]=new lu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){jo[e]=new lu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){jo[e]=new lu(e,5,!1,e.toLowerCase(),null,!1,!1)});var qq=/[\-:]([a-z])/g;function Wq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qq,Wq);jo[t]=new lu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qq,Wq);jo[t]=new lu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qq,Wq);jo[t]=new lu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){jo[e]=new lu(e,1,!1,e.toLowerCase(),null,!1,!1)});jo.xlinkHref=new lu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){jo[e]=new lu(e,1,!1,e.toLowerCase(),null,!0,!0)});function Gq(e,t,n,r){var i=jo.hasOwnProperty(t)?jo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(f9e(t,n,i,r)&&(n=null),r||i===null?l9e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qm=a9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,FR=Symbol.for("react.element"),ew=Symbol.for("react.portal"),tw=Symbol.for("react.fragment"),Yq=Symbol.for("react.strict_mode"),r7=Symbol.for("react.profiler"),Gye=Symbol.for("react.provider"),Yye=Symbol.for("react.context"),Kq=Symbol.for("react.forward_ref"),i7=Symbol.for("react.suspense"),s7=Symbol.for("react.suspense_list"),Xq=Symbol.for("react.memo"),Lg=Symbol.for("react.lazy"),Kye=Symbol.for("react.offscreen"),Qie=Symbol.iterator;function ZS(e){return e===null||typeof e!="object"?null:(e=Qie&&e[Qie]||e["@@iterator"],typeof e=="function"?e:null)}var Fi=Object.assign,o8;function JT(e){if(o8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);o8=t&&t[1]||""}return`
`+o8+e}var a8=!1;function u8(e,t){if(!e||a8)return"";a8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{a8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?JT(e):""}function d9e(e){switch(e.tag){case 5:return JT(e.type);case 16:return JT("Lazy");case 13:return JT("Suspense");case 19:return JT("SuspenseList");case 0:case 2:case 15:return e=u8(e.type,!1),e;case 11:return e=u8(e.type.render,!1),e;case 1:return e=u8(e.type,!0),e;default:return""}}function o7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tw:return"Fragment";case ew:return"Portal";case r7:return"Profiler";case Yq:return"StrictMode";case i7:return"Suspense";case s7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yye:return(e.displayName||"Context")+".Consumer";case Gye:return(e._context.displayName||"Context")+".Provider";case Kq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xq:return t=e.displayName||null,t!==null?t:o7(e.type)||"Memo";case Lg:t=e._payload,e=e._init;try{return o7(e(t))}catch{}}return null}function h9e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return o7(t);case 8:return t===Yq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function z0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function p9e(e){var t=Xye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jR(e){e._valueTracker||(e._valueTracker=p9e(e))}function Qye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function XO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function a7(e,t){var n=t.checked;return Fi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Jie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=z0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jye(e,t){t=t.checked,t!=null&&Gq(e,"checked",t,!1)}function u7(e,t){Jye(e,t);var n=z0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?l7(e,t.type,n):t.hasOwnProperty("defaultValue")&&l7(e,t.type,z0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function l7(e,t,n){(t!=="number"||XO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ZT=Array.isArray;function Cw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function c7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Fi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ese(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(ZT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:z0(n)}}function Zye(e,t){var n=z0(t.value),r=z0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tse(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eve(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eve(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var BR,tve=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(BR=BR||document.createElement("div"),BR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=BR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function V2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var VC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m9e=["Webkit","ms","Moz","O"];Object.keys(VC).forEach(function(e){m9e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),VC[t]=VC[e]})});function nve(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||VC.hasOwnProperty(e)&&VC[e]?(""+t).trim():t+"px"}function rve(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nve(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var g9e=Fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function d7(e,t){if(t){if(g9e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function h7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p7=null;function Qq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var m7=null,Aw=null,Iw=null;function nse(e){if(e=NI(e)){if(typeof m7!="function")throw Error(et(280));var t=e.stateNode;t&&(t=$M(t),m7(e.stateNode,e.type,t))}}function ive(e){Aw?Iw?Iw.push(e):Iw=[e]:Aw=e}function sve(){if(Aw){var e=Aw,t=Iw;if(Iw=Aw=null,nse(e),t)for(e=0;e<t.length;e++)nse(t[e])}}function ove(e,t){return e(t)}function ave(){}var l8=!1;function uve(e,t,n){if(l8)return e(t,n);l8=!0;try{return ove(e,t,n)}finally{l8=!1,(Aw!==null||Iw!==null)&&(ave(),sve())}}function H2(e,t){var n=e.stateNode;if(n===null)return null;var r=$M(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var g7=!1;if(Sm)try{var eT={};Object.defineProperty(eT,"passive",{get:function(){g7=!0}}),window.addEventListener("test",eT,eT),window.removeEventListener("test",eT,eT)}catch{g7=!1}function y9e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var HC=!1,QO=null,JO=!1,y7=null,v9e={onError:function(e){HC=!0,QO=e}};function b9e(e,t,n,r,i,s,o,a,u){HC=!1,QO=null,y9e.apply(v9e,arguments)}function _9e(e,t,n,r,i,s,o,a,u){if(b9e.apply(this,arguments),HC){if(HC){var l=QO;HC=!1,QO=null}else throw Error(et(198));JO||(JO=!0,y7=l)}}function kb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lve(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rse(e){if(kb(e)!==e)throw Error(et(188))}function w9e(e){var t=e.alternate;if(!t){if(t=kb(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rse(i),e;if(s===r)return rse(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function cve(e){return e=w9e(e),e!==null?fve(e):null}function fve(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fve(e);if(t!==null)return t;e=e.sibling}return null}var dve=$l.unstable_scheduleCallback,ise=$l.unstable_cancelCallback,E9e=$l.unstable_shouldYield,x9e=$l.unstable_requestPaint,us=$l.unstable_now,S9e=$l.unstable_getCurrentPriorityLevel,Jq=$l.unstable_ImmediatePriority,hve=$l.unstable_UserBlockingPriority,ZO=$l.unstable_NormalPriority,T9e=$l.unstable_LowPriority,pve=$l.unstable_IdlePriority,NM=null,yh=null;function C9e(e){if(yh&&typeof yh.onCommitFiberRoot=="function")try{yh.onCommitFiberRoot(NM,e,void 0,(e.current.flags&128)===128)}catch{}}var zf=Math.clz32?Math.clz32:k9e,A9e=Math.log,I9e=Math.LN2;function k9e(e){return e>>>=0,e===0?32:31-(A9e(e)/I9e|0)|0}var UR=64,zR=4194304;function eC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=eC(a):(s&=o,s!==0&&(r=eC(s)))}else o=n&~i,o!==0?r=eC(o):s!==0&&(r=eC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zf(t),i=1<<n,r|=e[n],t&=~i;return r}function R9e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N9e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-zf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=R9e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function v7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mve(){var e=UR;return UR<<=1,!(UR&4194240)&&(UR=64),e}function c8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zf(t),e[t]=n}function P9e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-zf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Zq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $r=0;function gve(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yve,eW,vve,bve,_ve,b7=!1,VR=[],v0=null,b0=null,_0=null,q2=new Map,W2=new Map,Wg=[],O9e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sse(e,t){switch(e){case"focusin":case"focusout":v0=null;break;case"dragenter":case"dragleave":b0=null;break;case"mouseover":case"mouseout":_0=null;break;case"pointerover":case"pointerout":q2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":W2.delete(t.pointerId)}}function tT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=NI(t),t!==null&&eW(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function D9e(e,t,n,r,i){switch(t){case"focusin":return v0=tT(v0,e,t,n,r,i),!0;case"dragenter":return b0=tT(b0,e,t,n,r,i),!0;case"mouseover":return _0=tT(_0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return q2.set(s,tT(q2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,W2.set(s,tT(W2.get(s)||null,e,t,n,r,i)),!0}return!1}function wve(e){var t=e1(e.target);if(t!==null){var n=kb(t);if(n!==null){if(t=n.tag,t===13){if(t=lve(n),t!==null){e.blockedOn=t,_ve(e.priority,function(){vve(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function PP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);p7=r,n.target.dispatchEvent(r),p7=null}else return t=NI(n),t!==null&&eW(t),e.blockedOn=n,!1;t.shift()}return!0}function ose(e,t,n){PP(e)&&n.delete(t)}function $9e(){b7=!1,v0!==null&&PP(v0)&&(v0=null),b0!==null&&PP(b0)&&(b0=null),_0!==null&&PP(_0)&&(_0=null),q2.forEach(ose),W2.forEach(ose)}function nT(e,t){e.blockedOn===t&&(e.blockedOn=null,b7||(b7=!0,$l.unstable_scheduleCallback($l.unstable_NormalPriority,$9e)))}function G2(e){function t(i){return nT(i,e)}if(0<VR.length){nT(VR[0],e);for(var n=1;n<VR.length;n++){var r=VR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(v0!==null&&nT(v0,e),b0!==null&&nT(b0,e),_0!==null&&nT(_0,e),q2.forEach(t),W2.forEach(t),n=0;n<Wg.length;n++)r=Wg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wg.length&&(n=Wg[0],n.blockedOn===null);)wve(n),n.blockedOn===null&&Wg.shift()}var kw=Qm.ReactCurrentBatchConfig,tD=!0;function M9e(e,t,n,r){var i=$r,s=kw.transition;kw.transition=null;try{$r=1,tW(e,t,n,r)}finally{$r=i,kw.transition=s}}function L9e(e,t,n,r){var i=$r,s=kw.transition;kw.transition=null;try{$r=4,tW(e,t,n,r)}finally{$r=i,kw.transition=s}}function tW(e,t,n,r){if(tD){var i=_7(e,t,n,r);if(i===null)_8(e,t,r,nD,n),sse(e,r);else if(D9e(i,e,t,n,r))r.stopPropagation();else if(sse(e,r),t&4&&-1<O9e.indexOf(e)){for(;i!==null;){var s=NI(i);if(s!==null&&yve(s),s=_7(e,t,n,r),s===null&&_8(e,t,r,nD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _8(e,t,r,null,n)}}var nD=null;function _7(e,t,n,r){if(nD=null,e=Qq(r),e=e1(e),e!==null)if(t=kb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lve(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nD=e,null}function Eve(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S9e()){case Jq:return 1;case hve:return 4;case ZO:case T9e:return 16;case pve:return 536870912;default:return 16}default:return 16}}var r0=null,nW=null,OP=null;function xve(){if(OP)return OP;var e,t=nW,n=t.length,r,i="value"in r0?r0.value:r0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return OP=i.slice(e,1<r?1-r:void 0)}function DP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function HR(){return!0}function ase(){return!1}function Kl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?HR:ase,this.isPropagationStopped=ase,this}return Fi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=HR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=HR)},persist:function(){},isPersistent:HR}),t}var Nx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rW=Kl(Nx),RI=Fi({},Nx,{view:0,detail:0}),F9e=Kl(RI),f8,d8,rT,PM=Fi({},RI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rT&&(rT&&e.type==="mousemove"?(f8=e.screenX-rT.screenX,d8=e.screenY-rT.screenY):d8=f8=0,rT=e),f8)},movementY:function(e){return"movementY"in e?e.movementY:d8}}),use=Kl(PM),j9e=Fi({},PM,{dataTransfer:0}),B9e=Kl(j9e),U9e=Fi({},RI,{relatedTarget:0}),h8=Kl(U9e),z9e=Fi({},Nx,{animationName:0,elapsedTime:0,pseudoElement:0}),V9e=Kl(z9e),H9e=Fi({},Nx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),q9e=Kl(H9e),W9e=Fi({},Nx,{data:0}),lse=Kl(W9e),G9e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y9e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K9e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X9e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=K9e[e])?!!t[e]:!1}function iW(){return X9e}var Q9e=Fi({},RI,{key:function(e){if(e.key){var t=G9e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=DP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Y9e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iW,charCode:function(e){return e.type==="keypress"?DP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?DP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J9e=Kl(Q9e),Z9e=Fi({},PM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cse=Kl(Z9e),eBe=Fi({},RI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iW}),tBe=Kl(eBe),nBe=Fi({},Nx,{propertyName:0,elapsedTime:0,pseudoElement:0}),rBe=Kl(nBe),iBe=Fi({},PM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sBe=Kl(iBe),oBe=[9,13,27,32],sW=Sm&&"CompositionEvent"in window,qC=null;Sm&&"documentMode"in document&&(qC=document.documentMode);var aBe=Sm&&"TextEvent"in window&&!qC,Sve=Sm&&(!sW||qC&&8<qC&&11>=qC),fse=" ",dse=!1;function Tve(e,t){switch(e){case"keyup":return oBe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cve(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nw=!1;function uBe(e,t){switch(e){case"compositionend":return Cve(t);case"keypress":return t.which!==32?null:(dse=!0,fse);case"textInput":return e=t.data,e===fse&&dse?null:e;default:return null}}function lBe(e,t){if(nw)return e==="compositionend"||!sW&&Tve(e,t)?(e=xve(),OP=nW=r0=null,nw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sve&&t.locale!=="ko"?null:t.data;default:return null}}var cBe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cBe[e.type]:t==="textarea"}function Ave(e,t,n,r){ive(r),t=rD(t,"onChange"),0<t.length&&(n=new rW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var WC=null,Y2=null;function fBe(e){Fve(e,0)}function OM(e){var t=sw(e);if(Qye(t))return e}function dBe(e,t){if(e==="change")return t}var Ive=!1;if(Sm){var p8;if(Sm){var m8="oninput"in document;if(!m8){var pse=document.createElement("div");pse.setAttribute("oninput","return;"),m8=typeof pse.oninput=="function"}p8=m8}else p8=!1;Ive=p8&&(!document.documentMode||9<document.documentMode)}function mse(){WC&&(WC.detachEvent("onpropertychange",kve),Y2=WC=null)}function kve(e){if(e.propertyName==="value"&&OM(Y2)){var t=[];Ave(t,Y2,e,Qq(e)),uve(fBe,t)}}function hBe(e,t,n){e==="focusin"?(mse(),WC=t,Y2=n,WC.attachEvent("onpropertychange",kve)):e==="focusout"&&mse()}function pBe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return OM(Y2)}function mBe(e,t){if(e==="click")return OM(t)}function gBe(e,t){if(e==="input"||e==="change")return OM(t)}function yBe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ed=typeof Object.is=="function"?Object.is:yBe;function K2(e,t){if(ed(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!n7.call(t,i)||!ed(e[i],t[i]))return!1}return!0}function gse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yse(e,t){var n=gse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gse(n)}}function Rve(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rve(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nve(){for(var e=window,t=XO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=XO(e.document)}return t}function oW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vBe(e){var t=Nve(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Rve(n.ownerDocument.documentElement,n)){if(r!==null&&oW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=yse(n,s);var o=yse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bBe=Sm&&"documentMode"in document&&11>=document.documentMode,rw=null,w7=null,GC=null,E7=!1;function vse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;E7||rw==null||rw!==XO(r)||(r=rw,"selectionStart"in r&&oW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),GC&&K2(GC,r)||(GC=r,r=rD(w7,"onSelect"),0<r.length&&(t=new rW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rw)))}function qR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var iw={animationend:qR("Animation","AnimationEnd"),animationiteration:qR("Animation","AnimationIteration"),animationstart:qR("Animation","AnimationStart"),transitionend:qR("Transition","TransitionEnd")},g8={},Pve={};Sm&&(Pve=document.createElement("div").style,"AnimationEvent"in window||(delete iw.animationend.animation,delete iw.animationiteration.animation,delete iw.animationstart.animation),"TransitionEvent"in window||delete iw.transitionend.transition);function DM(e){if(g8[e])return g8[e];if(!iw[e])return e;var t=iw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pve)return g8[e]=t[n];return e}var Ove=DM("animationend"),Dve=DM("animationiteration"),$ve=DM("animationstart"),Mve=DM("transitionend"),Lve=new Map,bse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ay(e,t){Lve.set(e,t),Ib(t,[e])}for(var y8=0;y8<bse.length;y8++){var v8=bse[y8],_Be=v8.toLowerCase(),wBe=v8[0].toUpperCase()+v8.slice(1);Ay(_Be,"on"+wBe)}Ay(Ove,"onAnimationEnd");Ay(Dve,"onAnimationIteration");Ay($ve,"onAnimationStart");Ay("dblclick","onDoubleClick");Ay("focusin","onFocus");Ay("focusout","onBlur");Ay(Mve,"onTransitionEnd");hE("onMouseEnter",["mouseout","mouseover"]);hE("onMouseLeave",["mouseout","mouseover"]);hE("onPointerEnter",["pointerout","pointerover"]);hE("onPointerLeave",["pointerout","pointerover"]);Ib("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ib("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ib("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ib("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ib("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ib("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EBe=new Set("cancel close invalid load scroll toggle".split(" ").concat(tC));function _se(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,_9e(r,t,void 0,e),e.currentTarget=null}function Fve(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;_se(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;_se(i,a,l),s=u}}}if(JO)throw e=y7,JO=!1,y7=null,e}function di(e,t){var n=t[A7];n===void 0&&(n=t[A7]=new Set);var r=e+"__bubble";n.has(r)||(jve(t,e,2,!1),n.add(r))}function b8(e,t,n){var r=0;t&&(r|=4),jve(n,e,r,t)}var WR="_reactListening"+Math.random().toString(36).slice(2);function X2(e){if(!e[WR]){e[WR]=!0,Wye.forEach(function(n){n!=="selectionchange"&&(EBe.has(n)||b8(n,!1,e),b8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[WR]||(t[WR]=!0,b8("selectionchange",!1,t))}}function jve(e,t,n,r){switch(Eve(t)){case 1:var i=M9e;break;case 4:i=L9e;break;default:i=tW}n=i.bind(null,t,n,e),i=void 0,!g7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function _8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=e1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uve(function(){var l=s,c=Qq(n),f=[];e:{var d=Lve.get(e);if(d!==void 0){var h=rW,p=e;switch(e){case"keypress":if(DP(n)===0)break e;case"keydown":case"keyup":h=J9e;break;case"focusin":p="focus",h=h8;break;case"focusout":p="blur",h=h8;break;case"beforeblur":case"afterblur":h=h8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=use;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=B9e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=tBe;break;case Ove:case Dve:case $ve:h=V9e;break;case Mve:h=rBe;break;case"scroll":h=F9e;break;case"wheel":h=sBe;break;case"copy":case"cut":case"paste":h=q9e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=cse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=H2(v,y),w!=null&&m.push(Q2(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==p7&&(p=n.relatedTarget||n.fromElement)&&(e1(p)||p[Tm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?e1(p):null,p!==null&&(g=kb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=use,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=cse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:sw(h),b=p==null?d:sw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,e1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=p_(b))v++;for(b=0,w=y;w;w=p_(w))b++;for(;0<v-b;)m=p_(m),v--;for(;0<b-v;)y=p_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=p_(m),y=p_(y)}m=null}else m=null;h!==null&&wse(f,d,h,m,!1),p!==null&&g!==null&&wse(f,g,p,m,!0)}}e:{if(d=l?sw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=dBe;else if(hse(d))if(Ive)x=gBe;else{x=pBe;var C=hBe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=mBe);if(x&&(x=x(e,l))){Ave(f,x,n,c);break e}C&&C(e,d,l),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&l7(d,"number",d.value)}switch(C=l?sw(l):window,e){case"focusin":(hse(C)||C.contentEditable==="true")&&(rw=C,w7=l,GC=null);break;case"focusout":GC=w7=rw=null;break;case"mousedown":E7=!0;break;case"contextmenu":case"mouseup":case"dragend":E7=!1,vse(f,n,c);break;case"selectionchange":if(bBe)break;case"keydown":case"keyup":vse(f,n,c)}var E;if(sW)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else nw?Tve(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Sve&&n.locale!=="ko"&&(nw||S!=="onCompositionStart"?S==="onCompositionEnd"&&nw&&(E=xve()):(r0=c,nW="value"in r0?r0.value:r0.textContent,nw=!0)),C=rD(l,S),0<C.length&&(S=new lse(S,e,null,n,c),f.push({event:S,listeners:C}),E?S.data=E:(E=Cve(n),E!==null&&(S.data=E)))),(E=aBe?uBe(e,n):lBe(e,n))&&(l=rD(l,"onBeforeInput"),0<l.length&&(c=new lse("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}Fve(f,t)})}function Q2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=H2(e,n),s!=null&&r.unshift(Q2(e,s,i)),s=H2(e,t),s!=null&&r.push(Q2(e,s,i))),e=e.return}return r}function p_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=H2(n,s),u!=null&&o.unshift(Q2(n,u,a))):i||(u=H2(n,s),u!=null&&o.push(Q2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xBe=/\r\n?/g,SBe=/\u0000|\uFFFD/g;function Ese(e){return(typeof e=="string"?e:""+e).replace(xBe,`
`).replace(SBe,"")}function GR(e,t,n){if(t=Ese(t),Ese(e)!==t&&n)throw Error(et(425))}function iD(){}var x7=null,S7=null;function T7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var C7=typeof setTimeout=="function"?setTimeout:void 0,TBe=typeof clearTimeout=="function"?clearTimeout:void 0,xse=typeof Promise=="function"?Promise:void 0,CBe=typeof queueMicrotask=="function"?queueMicrotask:typeof xse<"u"?function(e){return xse.resolve(null).then(e).catch(ABe)}:C7;function ABe(e){setTimeout(function(){throw e})}function w8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),G2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);G2(t)}function w0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Px=Math.random().toString(36).slice(2),Xd="__reactFiber$"+Px,J2="__reactProps$"+Px,Tm="__reactContainer$"+Px,A7="__reactEvents$"+Px,IBe="__reactListeners$"+Px,kBe="__reactHandles$"+Px;function e1(e){var t=e[Xd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Tm]||n[Xd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Sse(e);e!==null;){if(n=e[Xd])return n;e=Sse(e)}return t}e=n,n=e.parentNode}return null}function NI(e){return e=e[Xd]||e[Tm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function $M(e){return e[J2]||null}var I7=[],ow=-1;function Iy(e){return{current:e}}function vi(e){0>ow||(e.current=I7[ow],I7[ow]=null,ow--)}function si(e,t){ow++,I7[ow]=e.current,e.current=t}var V0={},Sa=Iy(V0),Uu=Iy(!1),L1=V0;function pE(e,t){var n=e.type.contextTypes;if(!n)return V0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function zu(e){return e=e.childContextTypes,e!=null}function sD(){vi(Uu),vi(Sa)}function Tse(e,t,n){if(Sa.current!==V0)throw Error(et(168));si(Sa,t),si(Uu,n)}function Bve(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,h9e(e)||"Unknown",i));return Fi({},n,r)}function oD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||V0,L1=Sa.current,si(Sa,e),si(Uu,Uu.current),!0}function Cse(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=Bve(e,t,L1),r.__reactInternalMemoizedMergedChildContext=e,vi(Uu),vi(Sa),si(Sa,e)):vi(Uu),si(Uu,n)}var zp=null,MM=!1,E8=!1;function Uve(e){zp===null?zp=[e]:zp.push(e)}function RBe(e){MM=!0,Uve(e)}function ky(){if(!E8&&zp!==null){E8=!0;var e=0,t=$r;try{var n=zp;for($r=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zp=null,MM=!1}catch(i){throw zp!==null&&(zp=zp.slice(e+1)),dve(Jq,ky),i}finally{$r=t,E8=!1}}return null}var aw=[],uw=0,aD=null,uD=0,cc=[],fc=0,F1=null,Zp=1,em="";function Cv(e,t){aw[uw++]=uD,aw[uw++]=aD,aD=e,uD=t}function zve(e,t,n){cc[fc++]=Zp,cc[fc++]=em,cc[fc++]=F1,F1=e;var r=Zp;e=em;var i=32-zf(r)-1;r&=~(1<<i),n+=1;var s=32-zf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zp=1<<32-zf(t)+i|n<<i|r,em=s+e}else Zp=1<<s|n<<i|r,em=e}function aW(e){e.return!==null&&(Cv(e,1),zve(e,1,0))}function uW(e){for(;e===aD;)aD=aw[--uw],aw[uw]=null,uD=aw[--uw],aw[uw]=null;for(;e===F1;)F1=cc[--fc],cc[fc]=null,em=cc[--fc],cc[fc]=null,Zp=cc[--fc],cc[fc]=null}var Nl=null,Tl=null,Ti=!1,Cf=null;function Vve(e,t){var n=vc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ase(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nl=e,Tl=w0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nl=e,Tl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=F1!==null?{id:Zp,overflow:em}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=vc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nl=e,Tl=null,!0):!1;default:return!1}}function k7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function R7(e){if(Ti){var t=Tl;if(t){var n=t;if(!Ase(e,t)){if(k7(e))throw Error(et(418));t=w0(n.nextSibling);var r=Nl;t&&Ase(e,t)?Vve(r,n):(e.flags=e.flags&-4097|2,Ti=!1,Nl=e)}}else{if(k7(e))throw Error(et(418));e.flags=e.flags&-4097|2,Ti=!1,Nl=e}}}function Ise(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nl=e}function YR(e){if(e!==Nl)return!1;if(!Ti)return Ise(e),Ti=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!T7(e.type,e.memoizedProps)),t&&(t=Tl)){if(k7(e))throw Hve(),Error(et(418));for(;t;)Vve(e,t),t=w0(t.nextSibling)}if(Ise(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Tl=w0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Tl=null}}else Tl=Nl?w0(e.stateNode.nextSibling):null;return!0}function Hve(){for(var e=Tl;e;)e=w0(e.nextSibling)}function mE(){Tl=Nl=null,Ti=!1}function lW(e){Cf===null?Cf=[e]:Cf.push(e)}var NBe=Qm.ReactCurrentBatchConfig;function iT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function KR(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kse(e){var t=e._init;return t(e._payload)}function qve(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=T0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=k8(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var x=b.type;return x===tw?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Lg&&kse(x)===v.type)?(w=i(v,b.props),w.ref=iT(y,v,b),w.return=y,w):(w=UP(b.type,b.key,b.props,null,y.mode,w),w.ref=iT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=R8(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,x){return v===null||v.tag!==7?(v=E1(b,y.mode,w,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=k8(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case FR:return b=UP(v.type,v.key,v.props,null,y.mode,b),b.ref=iT(y,null,v),b.return=y,b;case ew:return v=R8(v,y.mode,b),v.return=y,v;case Lg:var w=v._init;return f(y,w(v._payload),b)}if(ZT(v)||ZS(v))return v=E1(v,y.mode,b,null),v.return=y,v;KR(y,v)}return null}function d(y,v,b,w){var x=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case FR:return b.key===x?u(y,v,b,w):null;case ew:return b.key===x?l(y,v,b,w):null;case Lg:return x=b._init,d(y,v,x(b._payload),w)}if(ZT(b)||ZS(b))return x!==null?null:c(y,v,b,w,null);KR(y,b)}return null}function h(y,v,b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case FR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,x);case ew:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,x);case Lg:var C=w._init;return h(y,v,b,C(w._payload),x)}if(ZT(w)||ZS(w))return y=y.get(b)||null,c(v,y,w,x,null);KR(v,w)}return null}function p(y,v,b,w){for(var x=null,C=null,E=v,S=v=0,A=null;E!==null&&S<b.length;S++){E.index>S?(A=E,E=null):A=E.sibling;var k=d(y,E,b[S],w);if(k===null){E===null&&(E=A);break}e&&E&&k.alternate===null&&t(y,E),v=s(k,v,S),C===null?x=k:C.sibling=k,C=k,E=A}if(S===b.length)return n(y,E),Ti&&Cv(y,S),x;if(E===null){for(;S<b.length;S++)E=f(y,b[S],w),E!==null&&(v=s(E,v,S),C===null?x=E:C.sibling=E,C=E);return Ti&&Cv(y,S),x}for(E=r(y,E);S<b.length;S++)A=h(E,y,S,b[S],w),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?S:A.key),v=s(A,v,S),C===null?x=A:C.sibling=A,C=A);return e&&E.forEach(function(R){return t(y,R)}),Ti&&Cv(y,S),x}function m(y,v,b,w){var x=ZS(b);if(typeof x!="function")throw Error(et(150));if(b=x.call(b),b==null)throw Error(et(151));for(var C=x=null,E=v,S=v=0,A=null,k=b.next();E!==null&&!k.done;S++,k=b.next()){E.index>S?(A=E,E=null):A=E.sibling;var R=d(y,E,k.value,w);if(R===null){E===null&&(E=A);break}e&&E&&R.alternate===null&&t(y,E),v=s(R,v,S),C===null?x=R:C.sibling=R,C=R,E=A}if(k.done)return n(y,E),Ti&&Cv(y,S),x;if(E===null){for(;!k.done;S++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,S),C===null?x=k:C.sibling=k,C=k);return Ti&&Cv(y,S),x}for(E=r(y,E);!k.done;S++,k=b.next())k=h(E,y,S,k.value,w),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?S:k.key),v=s(k,v,S),C===null?x=k:C.sibling=k,C=k);return e&&E.forEach(function(D){return t(y,D)}),Ti&&Cv(y,S),x}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===tw&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case FR:e:{for(var x=b.key,C=v;C!==null;){if(C.key===x){if(x=b.type,x===tw){if(C.tag===7){n(y,C.sibling),v=i(C,b.props.children),v.return=y,y=v;break e}}else if(C.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Lg&&kse(x)===C.type){n(y,C.sibling),v=i(C,b.props),v.ref=iT(y,C,b),v.return=y,y=v;break e}n(y,C);break}else t(y,C);C=C.sibling}b.type===tw?(v=E1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=UP(b.type,b.key,b.props,null,y.mode,w),w.ref=iT(y,v,b),w.return=y,y=w)}return o(y);case ew:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=R8(b,y.mode,w),v.return=y,y=v}return o(y);case Lg:return C=b._init,g(y,v,C(b._payload),w)}if(ZT(b))return p(y,v,b,w);if(ZS(b))return m(y,v,b,w);KR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=k8(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var gE=qve(!0),Wve=qve(!1),lD=Iy(null),cD=null,lw=null,cW=null;function fW(){cW=lw=cD=null}function dW(e){var t=lD.current;vi(lD),e._currentValue=t}function N7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rw(e,t){cD=e,cW=lw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($u=!0),e.firstContext=null)}function Nc(e){var t=e._currentValue;if(cW!==e)if(e={context:e,memoizedValue:t,next:null},lw===null){if(cD===null)throw Error(et(308));lw=e,cD.dependencies={lanes:0,firstContext:e}}else lw=lw.next=e;return t}var t1=null;function hW(e){t1===null?t1=[e]:t1.push(e)}function Gve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,hW(t)):(n.next=i.next,i.next=n),t.interleaved=n,Cm(e,r)}function Cm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fg=!1;function pW(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yve(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function E0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Cm(e,n)}return i=r.interleaved,i===null?(t.next=t,hW(r)):(t.next=i.next,i.next=t),r.interleaved=t,Cm(e,n)}function $P(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zq(e,n)}}function Rse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fD(e,t,n,r){var i=e.updateQueue;Fg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Fi({},f,d);break e;case 2:Fg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);B1|=o,e.lanes=o,e.memoizedState=f}}function Nse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var PI={},vh=Iy(PI),Z2=Iy(PI),eA=Iy(PI);function n1(e){if(e===PI)throw Error(et(174));return e}function mW(e,t){switch(si(eA,t),si(Z2,e),si(vh,PI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:f7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=f7(t,e)}vi(vh),si(vh,t)}function yE(){vi(vh),vi(Z2),vi(eA)}function Kve(e){n1(eA.current);var t=n1(vh.current),n=f7(t,e.type);t!==n&&(si(Z2,e),si(vh,n))}function gW(e){Z2.current===e&&(vi(vh),vi(Z2))}var Oi=Iy(0);function dD(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var x8=[];function yW(){for(var e=0;e<x8.length;e++)x8[e]._workInProgressVersionPrimary=null;x8.length=0}var MP=Qm.ReactCurrentDispatcher,S8=Qm.ReactCurrentBatchConfig,j1=0,$i=null,As=null,Js=null,hD=!1,YC=!1,tA=0,PBe=0;function Jo(){throw Error(et(321))}function vW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ed(e[n],t[n]))return!1;return!0}function bW(e,t,n,r,i,s){if(j1=s,$i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,MP.current=e===null||e.memoizedState===null?MBe:LBe,e=n(r,i),YC){s=0;do{if(YC=!1,tA=0,25<=s)throw Error(et(301));s+=1,Js=As=null,t.updateQueue=null,MP.current=FBe,e=n(r,i)}while(YC)}if(MP.current=pD,t=As!==null&&As.next!==null,j1=0,Js=As=$i=null,hD=!1,t)throw Error(et(300));return e}function _W(){var e=tA!==0;return tA=0,e}function jd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Js===null?$i.memoizedState=Js=e:Js=Js.next=e,Js}function Pc(){if(As===null){var e=$i.alternate;e=e!==null?e.memoizedState:null}else e=As.next;var t=Js===null?$i.memoizedState:Js.next;if(t!==null)Js=t,As=e;else{if(e===null)throw Error(et(310));As=e,e={memoizedState:As.memoizedState,baseState:As.baseState,baseQueue:As.baseQueue,queue:As.queue,next:null},Js===null?$i.memoizedState=Js=e:Js=Js.next=e}return Js}function nA(e,t){return typeof t=="function"?t(e):t}function T8(e){var t=Pc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=As,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((j1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,$i.lanes|=c,B1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,ed(r,t.memoizedState)||($u=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,$i.lanes|=s,B1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function C8(e){var t=Pc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);ed(s,t.memoizedState)||($u=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Xve(){}function Qve(e,t){var n=$i,r=Pc(),i=t(),s=!ed(r.memoizedState,i);if(s&&(r.memoizedState=i,$u=!0),r=r.queue,wW(e1e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Js!==null&&Js.memoizedState.tag&1){if(n.flags|=2048,rA(9,Zve.bind(null,n,r,i,t),void 0,null),uo===null)throw Error(et(349));j1&30||Jve(n,t,i)}return i}function Jve(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$i.updateQueue,t===null?(t={lastEffect:null,stores:null},$i.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Zve(e,t,n,r){t.value=n,t.getSnapshot=r,t1e(t)&&n1e(e)}function e1e(e,t,n){return n(function(){t1e(t)&&n1e(e)})}function t1e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ed(e,n)}catch{return!0}}function n1e(e){var t=Cm(e,1);t!==null&&Vf(t,e,1,-1)}function Pse(e){var t=jd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nA,lastRenderedState:e},t.queue=e,e=e.dispatch=$Be.bind(null,$i,e),[t.memoizedState,e]}function rA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=$i.updateQueue,t===null?(t={lastEffect:null,stores:null},$i.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function r1e(){return Pc().memoizedState}function LP(e,t,n,r){var i=jd();$i.flags|=e,i.memoizedState=rA(1|t,n,void 0,r===void 0?null:r)}function LM(e,t,n,r){var i=Pc();r=r===void 0?null:r;var s=void 0;if(As!==null){var o=As.memoizedState;if(s=o.destroy,r!==null&&vW(r,o.deps)){i.memoizedState=rA(t,n,s,r);return}}$i.flags|=e,i.memoizedState=rA(1|t,n,s,r)}function Ose(e,t){return LP(8390656,8,e,t)}function wW(e,t){return LM(2048,8,e,t)}function i1e(e,t){return LM(4,2,e,t)}function s1e(e,t){return LM(4,4,e,t)}function o1e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function a1e(e,t,n){return n=n!=null?n.concat([e]):null,LM(4,4,o1e.bind(null,t,e),n)}function EW(){}function u1e(e,t){var n=Pc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function l1e(e,t){var n=Pc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function c1e(e,t,n){return j1&21?(ed(n,t)||(n=mve(),$i.lanes|=n,B1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$u=!0),e.memoizedState=n)}function OBe(e,t){var n=$r;$r=n!==0&&4>n?n:4,e(!0);var r=S8.transition;S8.transition={};try{e(!1),t()}finally{$r=n,S8.transition=r}}function f1e(){return Pc().memoizedState}function DBe(e,t,n){var r=S0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d1e(e))h1e(t,n);else if(n=Gve(e,t,n,r),n!==null){var i=Xa();Vf(n,e,r,i),p1e(n,t,r)}}function $Be(e,t,n){var r=S0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d1e(e))h1e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ed(a,o)){var u=t.interleaved;u===null?(i.next=i,hW(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Gve(e,t,i,r),n!==null&&(i=Xa(),Vf(n,e,r,i),p1e(n,t,r))}}function d1e(e){var t=e.alternate;return e===$i||t!==null&&t===$i}function h1e(e,t){YC=hD=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function p1e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zq(e,n)}}var pD={readContext:Nc,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useInsertionEffect:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useDeferredValue:Jo,useTransition:Jo,useMutableSource:Jo,useSyncExternalStore:Jo,useId:Jo,unstable_isNewReconciler:!1},MBe={readContext:Nc,useCallback:function(e,t){return jd().memoizedState=[e,t===void 0?null:t],e},useContext:Nc,useEffect:Ose,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,LP(4194308,4,o1e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return LP(4194308,4,e,t)},useInsertionEffect:function(e,t){return LP(4,2,e,t)},useMemo:function(e,t){var n=jd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=DBe.bind(null,$i,e),[r.memoizedState,e]},useRef:function(e){var t=jd();return e={current:e},t.memoizedState=e},useState:Pse,useDebugValue:EW,useDeferredValue:function(e){return jd().memoizedState=e},useTransition:function(){var e=Pse(!1),t=e[0];return e=OBe.bind(null,e[1]),jd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=$i,i=jd();if(Ti){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),uo===null)throw Error(et(349));j1&30||Jve(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ose(e1e.bind(null,r,s,e),[e]),r.flags|=2048,rA(9,Zve.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=jd(),t=uo.identifierPrefix;if(Ti){var n=em,r=Zp;n=(r&~(1<<32-zf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=PBe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LBe={readContext:Nc,useCallback:u1e,useContext:Nc,useEffect:wW,useImperativeHandle:a1e,useInsertionEffect:i1e,useLayoutEffect:s1e,useMemo:l1e,useReducer:T8,useRef:r1e,useState:function(){return T8(nA)},useDebugValue:EW,useDeferredValue:function(e){var t=Pc();return c1e(t,As.memoizedState,e)},useTransition:function(){var e=T8(nA)[0],t=Pc().memoizedState;return[e,t]},useMutableSource:Xve,useSyncExternalStore:Qve,useId:f1e,unstable_isNewReconciler:!1},FBe={readContext:Nc,useCallback:u1e,useContext:Nc,useEffect:wW,useImperativeHandle:a1e,useInsertionEffect:i1e,useLayoutEffect:s1e,useMemo:l1e,useReducer:C8,useRef:r1e,useState:function(){return C8(nA)},useDebugValue:EW,useDeferredValue:function(e){var t=Pc();return As===null?t.memoizedState=e:c1e(t,As.memoizedState,e)},useTransition:function(){var e=C8(nA)[0],t=Pc().memoizedState;return[e,t]},useMutableSource:Xve,useSyncExternalStore:Qve,useId:f1e,unstable_isNewReconciler:!1};function _f(e,t){if(e&&e.defaultProps){t=Fi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function P7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var FM={isMounted:function(e){return(e=e._reactInternals)?kb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xa(),i=S0(e),s=fm(r,i);s.payload=t,n!=null&&(s.callback=n),t=E0(e,s,i),t!==null&&(Vf(t,e,i,r),$P(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xa(),i=S0(e),s=fm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=E0(e,s,i),t!==null&&(Vf(t,e,i,r),$P(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xa(),r=S0(e),i=fm(n,r);i.tag=2,t!=null&&(i.callback=t),t=E0(e,i,r),t!==null&&(Vf(t,e,r,n),$P(t,e,r))}};function Dse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!K2(n,r)||!K2(i,s):!0}function m1e(e,t,n){var r=!1,i=V0,s=t.contextType;return typeof s=="object"&&s!==null?s=Nc(s):(i=zu(t)?L1:Sa.current,r=t.contextTypes,s=(r=r!=null)?pE(e,i):V0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=FM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function $se(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&FM.enqueueReplaceState(t,t.state,null)}function O7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},pW(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Nc(s):(s=zu(t)?L1:Sa.current,i.context=pE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(P7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&FM.enqueueReplaceState(i,i.state,null),fD(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function vE(e,t){try{var n="",r=t;do n+=d9e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function A8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function D7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var jBe=typeof WeakMap=="function"?WeakMap:Map;function g1e(e,t,n){n=fm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gD||(gD=!0,H7=r),D7(e,t)},n}function y1e(e,t,n){n=fm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){D7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){D7(e,t),typeof r!="function"&&(x0===null?x0=new Set([this]):x0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Mse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new jBe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ZBe.bind(null,e,t,n),t.then(e,e))}function Lse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fm(-1,1),t.tag=2,E0(n,t,1))),n.lanes|=1),e)}var BBe=Qm.ReactCurrentOwner,$u=!1;function Ba(e,t,n,r){t.child=e===null?Wve(t,null,n,r):gE(t,e.child,n,r)}function jse(e,t,n,r,i){n=n.render;var s=t.ref;return Rw(t,i),r=bW(e,t,n,r,s,i),n=_W(),e!==null&&!$u?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Am(e,t,i)):(Ti&&n&&aW(t),t.flags|=1,Ba(e,t,r,i),t.child)}function Bse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!RW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,v1e(e,t,s,r,i)):(e=UP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:K2,n(o,r)&&e.ref===t.ref)return Am(e,t,i)}return t.flags|=1,e=T0(s,r),e.ref=t.ref,e.return=t,t.child=e}function v1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(K2(s,r)&&e.ref===t.ref)if($u=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&($u=!0);else return t.lanes=e.lanes,Am(e,t,i)}return $7(e,t,n,r,i)}function b1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},si(fw,vl),vl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,si(fw,vl),vl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,si(fw,vl),vl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,si(fw,vl),vl|=r;return Ba(e,t,i,n),t.child}function _1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function $7(e,t,n,r,i){var s=zu(n)?L1:Sa.current;return s=pE(t,s),Rw(t,i),n=bW(e,t,n,r,s,i),r=_W(),e!==null&&!$u?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Am(e,t,i)):(Ti&&r&&aW(t),t.flags|=1,Ba(e,t,n,i),t.child)}function Use(e,t,n,r,i){if(zu(n)){var s=!0;oD(t)}else s=!1;if(Rw(t,i),t.stateNode===null)FP(e,t),m1e(t,n,r),O7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Nc(l):(l=zu(n)?L1:Sa.current,l=pE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&$se(t,o,r,l),Fg=!1;var d=t.memoizedState;o.state=d,fD(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Uu.current||Fg?(typeof c=="function"&&(P7(t,n,c,r),u=t.memoizedState),(a=Fg||Dse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Yve(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:_f(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nc(u):(u=zu(n)?L1:Sa.current,u=pE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&$se(t,o,r,u),Fg=!1,d=t.memoizedState,o.state=d,fD(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Uu.current||Fg?(typeof h=="function"&&(P7(t,n,h,r),p=t.memoizedState),(l=Fg||Dse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return M7(e,t,n,r,s,i)}function M7(e,t,n,r,i,s){_1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Cse(t,n,!1),Am(e,t,s);r=t.stateNode,BBe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=gE(t,e.child,null,s),t.child=gE(t,null,a,s)):Ba(e,t,a,s),t.memoizedState=r.state,i&&Cse(t,n,!0),t.child}function w1e(e){var t=e.stateNode;t.pendingContext?Tse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tse(e,t.context,!1),mW(e,t.containerInfo)}function zse(e,t,n,r,i){return mE(),lW(i),t.flags|=256,Ba(e,t,n,r),t.child}var L7={dehydrated:null,treeContext:null,retryLane:0};function F7(e){return{baseLanes:e,cachePool:null,transitions:null}}function E1e(e,t,n){var r=t.pendingProps,i=Oi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),si(Oi,i&1),e===null)return R7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=UM(o,r,0,null),e=E1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=F7(n),t.memoizedState=L7,e):xW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return UBe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=T0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=T0(a,s):(s=E1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?F7(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=L7,r}return s=e.child,e=s.sibling,r=T0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function xW(e,t){return t=UM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function XR(e,t,n,r){return r!==null&&lW(r),gE(t,e.child,null,n),e=xW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function UBe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=A8(Error(et(422))),XR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=UM({mode:"visible",children:r.children},i,0,null),s=E1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&gE(t,e.child,null,o),t.child.memoizedState=F7(o),t.memoizedState=L7,s);if(!(t.mode&1))return XR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=A8(s,r,void 0),XR(e,t,o,r)}if(a=(o&e.childLanes)!==0,$u||a){if(r=uo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Cm(e,i),Vf(r,e,i,-1))}return kW(),r=A8(Error(et(421))),XR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=e7e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Tl=w0(i.nextSibling),Nl=t,Ti=!0,Cf=null,e!==null&&(cc[fc++]=Zp,cc[fc++]=em,cc[fc++]=F1,Zp=e.id,em=e.overflow,F1=t),t=xW(t,r.children),t.flags|=4096,t)}function Vse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),N7(e.return,t,n)}function I8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function x1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ba(e,t,r.children,n),r=Oi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vse(e,n,t);else if(e.tag===19)Vse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(si(Oi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&dD(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),I8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&dD(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}I8(t,!0,n,null,s);break;case"together":I8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function FP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Am(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),B1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=T0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=T0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zBe(e,t,n){switch(t.tag){case 3:w1e(t),mE();break;case 5:Kve(t);break;case 1:zu(t.type)&&oD(t);break;case 4:mW(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;si(lD,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(si(Oi,Oi.current&1),t.flags|=128,null):n&t.child.childLanes?E1e(e,t,n):(si(Oi,Oi.current&1),e=Am(e,t,n),e!==null?e.sibling:null);si(Oi,Oi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return x1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),si(Oi,Oi.current),r)break;return null;case 22:case 23:return t.lanes=0,b1e(e,t,n)}return Am(e,t,n)}var S1e,j7,T1e,C1e;S1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};j7=function(){};T1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,n1(vh.current);var s=null;switch(n){case"input":i=a7(e,i),r=a7(e,r),s=[];break;case"select":i=Fi({},i,{value:void 0}),r=Fi({},r,{value:void 0}),s=[];break;case"textarea":i=c7(e,i),r=c7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=iD)}d7(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(z2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(z2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&di("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};C1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function sT(e,t){if(!Ti)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function VBe(e,t,n){var r=t.pendingProps;switch(uW(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zo(t),null;case 1:return zu(t.type)&&sD(),Zo(t),null;case 3:return r=t.stateNode,yE(),vi(Uu),vi(Sa),yW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(YR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cf!==null&&(G7(Cf),Cf=null))),j7(e,t),Zo(t),null;case 5:gW(t);var i=n1(eA.current);if(n=t.type,e!==null&&t.stateNode!=null)T1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Zo(t),null}if(e=n1(vh.current),YR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xd]=t,r[J2]=s,e=(t.mode&1)!==0,n){case"dialog":di("cancel",r),di("close",r);break;case"iframe":case"object":case"embed":di("load",r);break;case"video":case"audio":for(i=0;i<tC.length;i++)di(tC[i],r);break;case"source":di("error",r);break;case"img":case"image":case"link":di("error",r),di("load",r);break;case"details":di("toggle",r);break;case"input":Jie(r,s),di("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},di("invalid",r);break;case"textarea":ese(r,s),di("invalid",r)}d7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&GR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&GR(r.textContent,a,e),i=["children",""+a]):z2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&di("scroll",r)}switch(n){case"input":jR(r),Zie(r,s,!0);break;case"textarea":jR(r),tse(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=iD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eve(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Xd]=t,e[J2]=r,S1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=h7(n,r),n){case"dialog":di("cancel",e),di("close",e),i=r;break;case"iframe":case"object":case"embed":di("load",e),i=r;break;case"video":case"audio":for(i=0;i<tC.length;i++)di(tC[i],e);i=r;break;case"source":di("error",e),i=r;break;case"img":case"image":case"link":di("error",e),di("load",e),i=r;break;case"details":di("toggle",e),i=r;break;case"input":Jie(e,r),i=a7(e,r),di("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Fi({},r,{value:void 0}),di("invalid",e);break;case"textarea":ese(e,r),i=c7(e,r),di("invalid",e);break;default:i=r}d7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?rve(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&tve(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&V2(e,u):typeof u=="number"&&V2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(z2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&di("scroll",e):u!=null&&Gq(e,s,u,o))}switch(n){case"input":jR(e),Zie(e,r,!1);break;case"textarea":jR(e),tse(e);break;case"option":r.value!=null&&e.setAttribute("value",""+z0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Cw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Cw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=iD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zo(t),null;case 6:if(e&&t.stateNode!=null)C1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=n1(eA.current),n1(vh.current),YR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xd]=t,(s=r.nodeValue!==n)&&(e=Nl,e!==null))switch(e.tag){case 3:GR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&GR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xd]=t,t.stateNode=r}return Zo(t),null;case 13:if(vi(Oi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ti&&Tl!==null&&t.mode&1&&!(t.flags&128))Hve(),mE(),t.flags|=98560,s=!1;else if(s=YR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Xd]=t}else mE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zo(t),s=!1}else Cf!==null&&(G7(Cf),Cf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oi.current&1?Os===0&&(Os=3):kW())),t.updateQueue!==null&&(t.flags|=4),Zo(t),null);case 4:return yE(),j7(e,t),e===null&&X2(t.stateNode.containerInfo),Zo(t),null;case 10:return dW(t.type._context),Zo(t),null;case 17:return zu(t.type)&&sD(),Zo(t),null;case 19:if(vi(Oi),s=t.memoizedState,s===null)return Zo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)sT(s,!1);else{if(Os!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=dD(e),o!==null){for(t.flags|=128,sT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return si(Oi,Oi.current&1|2),t.child}e=e.sibling}s.tail!==null&&us()>bE&&(t.flags|=128,r=!0,sT(s,!1),t.lanes=4194304)}else{if(!r)if(e=dD(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ti)return Zo(t),null}else 2*us()-s.renderingStartTime>bE&&n!==1073741824&&(t.flags|=128,r=!0,sT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=us(),t.sibling=null,n=Oi.current,si(Oi,r?n&1|2:n&1),t):(Zo(t),null);case 22:case 23:return IW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?vl&1073741824&&(Zo(t),t.subtreeFlags&6&&(t.flags|=8192)):Zo(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function HBe(e,t){switch(uW(t),t.tag){case 1:return zu(t.type)&&sD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yE(),vi(Uu),vi(Sa),yW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gW(t),null;case 13:if(vi(Oi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));mE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vi(Oi),null;case 4:return yE(),null;case 10:return dW(t.type._context),null;case 22:case 23:return IW(),null;case 24:return null;default:return null}}var QR=!1,da=!1,qBe=typeof WeakSet=="function"?WeakSet:Set,xt=null;function cw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gi(e,t,r)}else n.current=null}function B7(e,t,n){try{n()}catch(r){Gi(e,t,r)}}var Hse=!1;function WBe(e,t){if(x7=tD,e=Nve(),oW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(S7={focusedElem:e,selectionRange:n},tD=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:_f(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Gi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Hse,Hse=!1,p}function KC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&B7(t,n,s)}i=i.next}while(i!==r)}}function jM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function U7(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function A1e(e){var t=e.alternate;t!==null&&(e.alternate=null,A1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xd],delete t[J2],delete t[A7],delete t[IBe],delete t[kBe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function I1e(e){return e.tag===5||e.tag===3||e.tag===4}function qse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||I1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function z7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=iD));else if(r!==4&&(e=e.child,e!==null))for(z7(e,t,n),e=e.sibling;e!==null;)z7(e,t,n),e=e.sibling}function V7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(V7(e,t,n),e=e.sibling;e!==null;)V7(e,t,n),e=e.sibling}var xo=null,Ef=!1;function Eg(e,t,n){for(n=n.child;n!==null;)k1e(e,t,n),n=n.sibling}function k1e(e,t,n){if(yh&&typeof yh.onCommitFiberUnmount=="function")try{yh.onCommitFiberUnmount(NM,n)}catch{}switch(n.tag){case 5:da||cw(n,t);case 6:var r=xo,i=Ef;xo=null,Eg(e,t,n),xo=r,Ef=i,xo!==null&&(Ef?(e=xo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xo.removeChild(n.stateNode));break;case 18:xo!==null&&(Ef?(e=xo,n=n.stateNode,e.nodeType===8?w8(e.parentNode,n):e.nodeType===1&&w8(e,n),G2(e)):w8(xo,n.stateNode));break;case 4:r=xo,i=Ef,xo=n.stateNode.containerInfo,Ef=!0,Eg(e,t,n),xo=r,Ef=i;break;case 0:case 11:case 14:case 15:if(!da&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&B7(n,t,o),i=i.next}while(i!==r)}Eg(e,t,n);break;case 1:if(!da&&(cw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gi(n,t,a)}Eg(e,t,n);break;case 21:Eg(e,t,n);break;case 22:n.mode&1?(da=(r=da)||n.memoizedState!==null,Eg(e,t,n),da=r):Eg(e,t,n);break;default:Eg(e,t,n)}}function Wse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new qBe),t.forEach(function(r){var i=t7e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function lf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:xo=a.stateNode,Ef=!1;break e;case 3:xo=a.stateNode.containerInfo,Ef=!0;break e;case 4:xo=a.stateNode.containerInfo,Ef=!0;break e}a=a.return}if(xo===null)throw Error(et(160));k1e(s,o,i),xo=null,Ef=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Gi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)R1e(t,e),t=t.sibling}function R1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(lf(t,e),Rd(e),r&4){try{KC(3,e,e.return),jM(3,e)}catch(m){Gi(e,e.return,m)}try{KC(5,e,e.return)}catch(m){Gi(e,e.return,m)}}break;case 1:lf(t,e),Rd(e),r&512&&n!==null&&cw(n,n.return);break;case 5:if(lf(t,e),Rd(e),r&512&&n!==null&&cw(n,n.return),e.flags&32){var i=e.stateNode;try{V2(i,"")}catch(m){Gi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Jye(i,s),h7(a,o);var l=h7(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?rve(i,f):c==="dangerouslySetInnerHTML"?tve(i,f):c==="children"?V2(i,f):Gq(i,c,f,l)}switch(a){case"input":u7(i,s);break;case"textarea":Zye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Cw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Cw(i,!!s.multiple,s.defaultValue,!0):Cw(i,!!s.multiple,s.multiple?[]:"",!1))}i[J2]=s}catch(m){Gi(e,e.return,m)}}break;case 6:if(lf(t,e),Rd(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Gi(e,e.return,m)}}break;case 3:if(lf(t,e),Rd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{G2(t.containerInfo)}catch(m){Gi(e,e.return,m)}break;case 4:lf(t,e),Rd(e);break;case 13:lf(t,e),Rd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(CW=us())),r&4&&Wse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(da=(l=da)||c,lf(t,e),da=l):lf(t,e),Rd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:KC(4,d,d.return);break;case 1:cw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Gi(r,n,m)}}break;case 5:cw(d,d.return);break;case 22:if(d.memoizedState!==null){Yse(f);continue}}h!==null?(h.return=d,xt=h):Yse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=nve("display",o))}catch(m){Gi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Gi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:lf(t,e),Rd(e),r&4&&Wse(e);break;case 21:break;default:lf(t,e),Rd(e)}}function Rd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(I1e(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(V2(i,""),r.flags&=-33);var s=qse(e);V7(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qse(e);z7(e,a,o);break;default:throw Error(et(161))}}catch(u){Gi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GBe(e,t,n){xt=e,N1e(e)}function N1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||QR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||da;a=QR;var l=da;if(QR=o,(da=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?Kse(i):u!==null?(u.return=o,xt=u):Kse(i);for(;s!==null;)xt=s,N1e(s),s=s.sibling;xt=i,QR=a,da=l}Gse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Gse(e)}}function Gse(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:da||jM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!da)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:_f(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Nse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Nse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&G2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}da||t.flags&512&&U7(t)}catch(d){Gi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Yse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Kse(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{jM(4,t)}catch(u){Gi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Gi(t,i,u)}}var s=t.return;try{U7(t)}catch(u){Gi(t,s,u)}break;case 5:var o=t.return;try{U7(t)}catch(u){Gi(t,o,u)}}}catch(u){Gi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var YBe=Math.ceil,mD=Qm.ReactCurrentDispatcher,SW=Qm.ReactCurrentOwner,Cc=Qm.ReactCurrentBatchConfig,ur=0,uo=null,Es=null,Do=0,vl=0,fw=Iy(0),Os=0,iA=null,B1=0,BM=0,TW=0,XC=null,Au=null,CW=0,bE=1/0,Lp=null,gD=!1,H7=null,x0=null,JR=!1,i0=null,yD=0,QC=0,q7=null,jP=-1,BP=0;function Xa(){return ur&6?us():jP!==-1?jP:jP=us()}function S0(e){return e.mode&1?ur&2&&Do!==0?Do&-Do:NBe.transition!==null?(BP===0&&(BP=mve()),BP):(e=$r,e!==0||(e=window.event,e=e===void 0?16:Eve(e.type)),e):1}function Vf(e,t,n,r){if(50<QC)throw QC=0,q7=null,Error(et(185));kI(e,n,r),(!(ur&2)||e!==uo)&&(e===uo&&(!(ur&2)&&(BM|=n),Os===4&&Gg(e,Do)),Vu(e,r),n===1&&ur===0&&!(t.mode&1)&&(bE=us()+500,MM&&ky()))}function Vu(e,t){var n=e.callbackNode;N9e(e,t);var r=eD(e,e===uo?Do:0);if(r===0)n!==null&&ise(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ise(n),t===1)e.tag===0?RBe(Xse.bind(null,e)):Uve(Xse.bind(null,e)),CBe(function(){!(ur&6)&&ky()}),n=null;else{switch(gve(r)){case 1:n=Jq;break;case 4:n=hve;break;case 16:n=ZO;break;case 536870912:n=pve;break;default:n=ZO}n=j1e(n,P1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function P1e(e,t){if(jP=-1,BP=0,ur&6)throw Error(et(327));var n=e.callbackNode;if(Nw()&&e.callbackNode!==n)return null;var r=eD(e,e===uo?Do:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vD(e,r);else{t=r;var i=ur;ur|=2;var s=D1e();(uo!==e||Do!==t)&&(Lp=null,bE=us()+500,w1(e,t));do try{QBe();break}catch(a){O1e(e,a)}while(!0);fW(),mD.current=s,ur=i,Es!==null?t=0:(uo=null,Do=0,t=Os)}if(t!==0){if(t===2&&(i=v7(e),i!==0&&(r=i,t=W7(e,i))),t===1)throw n=iA,w1(e,0),Gg(e,r),Vu(e,us()),n;if(t===6)Gg(e,r);else{if(i=e.current.alternate,!(r&30)&&!KBe(i)&&(t=vD(e,r),t===2&&(s=v7(e),s!==0&&(r=s,t=W7(e,s))),t===1))throw n=iA,w1(e,0),Gg(e,r),Vu(e,us()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:Av(e,Au,Lp);break;case 3:if(Gg(e,r),(r&130023424)===r&&(t=CW+500-us(),10<t)){if(eD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Xa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=C7(Av.bind(null,e,Au,Lp),t);break}Av(e,Au,Lp);break;case 4:if(Gg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-zf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=us()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*YBe(r/1960))-r,10<r){e.timeoutHandle=C7(Av.bind(null,e,Au,Lp),r);break}Av(e,Au,Lp);break;case 5:Av(e,Au,Lp);break;default:throw Error(et(329))}}}return Vu(e,us()),e.callbackNode===n?P1e.bind(null,e):null}function W7(e,t){var n=XC;return e.current.memoizedState.isDehydrated&&(w1(e,t).flags|=256),e=vD(e,t),e!==2&&(t=Au,Au=n,t!==null&&G7(t)),e}function G7(e){Au===null?Au=e:Au.push.apply(Au,e)}function KBe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ed(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gg(e,t){for(t&=~TW,t&=~BM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zf(t),r=1<<n;e[n]=-1,t&=~r}}function Xse(e){if(ur&6)throw Error(et(327));Nw();var t=eD(e,0);if(!(t&1))return Vu(e,us()),null;var n=vD(e,t);if(e.tag!==0&&n===2){var r=v7(e);r!==0&&(t=r,n=W7(e,r))}if(n===1)throw n=iA,w1(e,0),Gg(e,t),Vu(e,us()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Av(e,Au,Lp),Vu(e,us()),null}function AW(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(bE=us()+500,MM&&ky())}}function U1(e){i0!==null&&i0.tag===0&&!(ur&6)&&Nw();var t=ur;ur|=1;var n=Cc.transition,r=$r;try{if(Cc.transition=null,$r=1,e)return e()}finally{$r=r,Cc.transition=n,ur=t,!(ur&6)&&ky()}}function IW(){vl=fw.current,vi(fw)}function w1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,TBe(n)),Es!==null)for(n=Es.return;n!==null;){var r=n;switch(uW(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sD();break;case 3:yE(),vi(Uu),vi(Sa),yW();break;case 5:gW(r);break;case 4:yE();break;case 13:vi(Oi);break;case 19:vi(Oi);break;case 10:dW(r.type._context);break;case 22:case 23:IW()}n=n.return}if(uo=e,Es=e=T0(e.current,null),Do=vl=t,Os=0,iA=null,TW=BM=B1=0,Au=XC=null,t1!==null){for(t=0;t<t1.length;t++)if(n=t1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}t1=null}return e}function O1e(e,t){do{var n=Es;try{if(fW(),MP.current=pD,hD){for(var r=$i.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hD=!1}if(j1=0,Js=As=$i=null,YC=!1,tA=0,SW.current=null,n===null||n.return===null){Os=1,iA=t,Es=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Do,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Lse(o);if(h!==null){h.flags&=-257,Fse(h,o,a,s,t),h.mode&1&&Mse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Mse(s,l,t),kW();break e}u=Error(et(426))}}else if(Ti&&a.mode&1){var g=Lse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Fse(g,o,a,s,t),lW(vE(u,a));break e}}s=u=vE(u,a),Os!==4&&(Os=2),XC===null?XC=[s]:XC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=g1e(s,u,t);Rse(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(x0===null||!x0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=y1e(s,a,t);Rse(s,w);break e}}s=s.return}while(s!==null)}M1e(n)}catch(x){t=x,Es===n&&n!==null&&(Es=n=n.return);continue}break}while(!0)}function D1e(){var e=mD.current;return mD.current=pD,e===null?pD:e}function kW(){(Os===0||Os===3||Os===2)&&(Os=4),uo===null||!(B1&268435455)&&!(BM&268435455)||Gg(uo,Do)}function vD(e,t){var n=ur;ur|=2;var r=D1e();(uo!==e||Do!==t)&&(Lp=null,w1(e,t));do try{XBe();break}catch(i){O1e(e,i)}while(!0);if(fW(),ur=n,mD.current=r,Es!==null)throw Error(et(261));return uo=null,Do=0,Os}function XBe(){for(;Es!==null;)$1e(Es)}function QBe(){for(;Es!==null&&!E9e();)$1e(Es)}function $1e(e){var t=F1e(e.alternate,e,vl);e.memoizedProps=e.pendingProps,t===null?M1e(e):Es=t,SW.current=null}function M1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=HBe(n,t),n!==null){n.flags&=32767,Es=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Os=6,Es=null;return}}else if(n=VBe(n,t,vl),n!==null){Es=n;return}if(t=t.sibling,t!==null){Es=t;return}Es=t=e}while(t!==null);Os===0&&(Os=5)}function Av(e,t,n){var r=$r,i=Cc.transition;try{Cc.transition=null,$r=1,JBe(e,t,n,r)}finally{Cc.transition=i,$r=r}return null}function JBe(e,t,n,r){do Nw();while(i0!==null);if(ur&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(P9e(e,s),e===uo&&(Es=uo=null,Do=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||JR||(JR=!0,j1e(ZO,function(){return Nw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Cc.transition,Cc.transition=null;var o=$r;$r=1;var a=ur;ur|=4,SW.current=null,WBe(e,n),R1e(n,e),vBe(S7),tD=!!x7,S7=x7=null,e.current=n,GBe(n),x9e(),ur=a,$r=o,Cc.transition=s}else e.current=n;if(JR&&(JR=!1,i0=e,yD=i),s=e.pendingLanes,s===0&&(x0=null),C9e(n.stateNode),Vu(e,us()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gD)throw gD=!1,e=H7,H7=null,e;return yD&1&&e.tag!==0&&Nw(),s=e.pendingLanes,s&1?e===q7?QC++:(QC=0,q7=e):QC=0,ky(),null}function Nw(){if(i0!==null){var e=gve(yD),t=Cc.transition,n=$r;try{if(Cc.transition=null,$r=16>e?16:e,i0===null)var r=!1;else{if(e=i0,i0=null,yD=0,ur&6)throw Error(et(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:KC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(A1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:KC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jM(9,a)}}catch(x){Gi(a,a.return,x)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,ky(),yh&&typeof yh.onPostCommitFiberRoot=="function")try{yh.onPostCommitFiberRoot(NM,e)}catch{}r=!0}return r}finally{$r=n,Cc.transition=t}}return!1}function Qse(e,t,n){t=vE(n,t),t=g1e(e,t,1),e=E0(e,t,1),t=Xa(),e!==null&&(kI(e,1,t),Vu(e,t))}function Gi(e,t,n){if(e.tag===3)Qse(e,e,n);else for(;t!==null;){if(t.tag===3){Qse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(x0===null||!x0.has(r))){e=vE(n,e),e=y1e(t,e,1),t=E0(t,e,1),e=Xa(),t!==null&&(kI(t,1,e),Vu(t,e));break}}t=t.return}}function ZBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xa(),e.pingedLanes|=e.suspendedLanes&n,uo===e&&(Do&n)===n&&(Os===4||Os===3&&(Do&130023424)===Do&&500>us()-CW?w1(e,0):TW|=n),Vu(e,t)}function L1e(e,t){t===0&&(e.mode&1?(t=zR,zR<<=1,!(zR&130023424)&&(zR=4194304)):t=1);var n=Xa();e=Cm(e,t),e!==null&&(kI(e,t,n),Vu(e,n))}function e7e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),L1e(e,n)}function t7e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),L1e(e,n)}var F1e;F1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Uu.current)$u=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $u=!1,zBe(e,t,n);$u=!!(e.flags&131072)}else $u=!1,Ti&&t.flags&1048576&&zve(t,uD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;FP(e,t),e=t.pendingProps;var i=pE(t,Sa.current);Rw(t,n),i=bW(null,t,r,e,i,n);var s=_W();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zu(r)?(s=!0,oD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pW(t),i.updater=FM,t.stateNode=i,i._reactInternals=t,O7(t,r,e,n),t=M7(null,t,r,!0,s,n)):(t.tag=0,Ti&&s&&aW(t),Ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(FP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=r7e(r),e=_f(r,e),i){case 0:t=$7(null,t,r,e,n);break e;case 1:t=Use(null,t,r,e,n);break e;case 11:t=jse(null,t,r,e,n);break e;case 14:t=Bse(null,t,r,_f(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_f(r,i),$7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_f(r,i),Use(e,t,r,i,n);case 3:e:{if(w1e(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Yve(e,t),fD(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=vE(Error(et(423)),t),t=zse(e,t,r,n,i);break e}else if(r!==i){i=vE(Error(et(424)),t),t=zse(e,t,r,n,i);break e}else for(Tl=w0(t.stateNode.containerInfo.firstChild),Nl=t,Ti=!0,Cf=null,n=Wve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mE(),r===i){t=Am(e,t,n);break e}Ba(e,t,r,n)}t=t.child}return t;case 5:return Kve(t),e===null&&R7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,T7(r,i)?o=null:s!==null&&T7(r,s)&&(t.flags|=32),_1e(e,t),Ba(e,t,o,n),t.child;case 6:return e===null&&R7(t),null;case 13:return E1e(e,t,n);case 4:return mW(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gE(t,null,r,n):Ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_f(r,i),jse(e,t,r,i,n);case 7:return Ba(e,t,t.pendingProps,n),t.child;case 8:return Ba(e,t,t.pendingProps.children,n),t.child;case 12:return Ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,si(lD,r._currentValue),r._currentValue=o,s!==null)if(ed(s.value,o)){if(s.children===i.children&&!Uu.current){t=Am(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=fm(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),N7(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),N7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Rw(t,n),i=Nc(i),r=r(i),t.flags|=1,Ba(e,t,r,n),t.child;case 14:return r=t.type,i=_f(r,t.pendingProps),i=_f(r.type,i),Bse(e,t,r,i,n);case 15:return v1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:_f(r,i),FP(e,t),t.tag=1,zu(r)?(e=!0,oD(t)):e=!1,Rw(t,n),m1e(t,r,i),O7(t,r,i,n),M7(null,t,r,!0,e,n);case 19:return x1e(e,t,n);case 22:return b1e(e,t,n)}throw Error(et(156,t.tag))};function j1e(e,t){return dve(e,t)}function n7e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vc(e,t,n,r){return new n7e(e,t,n,r)}function RW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r7e(e){if(typeof e=="function")return RW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Kq)return 11;if(e===Xq)return 14}return 2}function T0(e,t){var n=e.alternate;return n===null?(n=vc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function UP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")RW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case tw:return E1(n.children,i,s,t);case Yq:o=8,i|=8;break;case r7:return e=vc(12,n,t,i|2),e.elementType=r7,e.lanes=s,e;case i7:return e=vc(13,n,t,i),e.elementType=i7,e.lanes=s,e;case s7:return e=vc(19,n,t,i),e.elementType=s7,e.lanes=s,e;case Kye:return UM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Gye:o=10;break e;case Yye:o=9;break e;case Kq:o=11;break e;case Xq:o=14;break e;case Lg:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=vc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function E1(e,t,n,r){return e=vc(7,e,r,t),e.lanes=n,e}function UM(e,t,n,r){return e=vc(22,e,r,t),e.elementType=Kye,e.lanes=n,e.stateNode={isHidden:!1},e}function k8(e,t,n){return e=vc(6,e,null,t),e.lanes=n,e}function R8(e,t,n){return t=vc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i7e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c8(0),this.expirationTimes=c8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function NW(e,t,n,r,i,s,o,a,u){return e=new i7e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=vc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pW(s),e}function s7e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ew,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function B1e(e){if(!e)return V0;e=e._reactInternals;e:{if(kb(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(zu(n))return Bve(e,n,t)}return t}function U1e(e,t,n,r,i,s,o,a,u){return e=NW(n,r,!0,e,i,s,o,a,u),e.context=B1e(null),n=e.current,r=Xa(),i=S0(n),s=fm(r,i),s.callback=t??null,E0(n,s,i),e.current.lanes=i,kI(e,i,r),Vu(e,r),e}function zM(e,t,n,r){var i=t.current,s=Xa(),o=S0(i);return n=B1e(n),t.context===null?t.context=n:t.pendingContext=n,t=fm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=E0(i,t,o),e!==null&&(Vf(e,i,o,s),$P(e,i,o)),o}function bD(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function PW(e,t){Jse(e,t),(e=e.alternate)&&Jse(e,t)}function o7e(){return null}var z1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function OW(e){this._internalRoot=e}VM.prototype.render=OW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));zM(e,t,null,null)};VM.prototype.unmount=OW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;U1(function(){zM(null,e,null,null)}),t[Tm]=null}};function VM(e){this._internalRoot=e}VM.prototype.unstable_scheduleHydration=function(e){if(e){var t=bve();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wg.length&&t!==0&&t<Wg[n].priority;n++);Wg.splice(n,0,e),n===0&&wve(e)}};function DW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function HM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zse(){}function a7e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=bD(o);s.call(l)}}var o=U1e(t,r,e,0,null,!1,!1,"",Zse);return e._reactRootContainer=o,e[Tm]=o.current,X2(e.nodeType===8?e.parentNode:e),U1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=bD(u);a.call(l)}}var u=NW(e,0,!1,null,null,!1,!1,"",Zse);return e._reactRootContainer=u,e[Tm]=u.current,X2(e.nodeType===8?e.parentNode:e),U1(function(){zM(t,u,n,r)}),u}function qM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=bD(o);a.call(u)}}zM(t,o,e,i)}else o=a7e(n,t,e,i,r);return bD(o)}yve=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=eC(t.pendingLanes);n!==0&&(Zq(t,n|1),Vu(t,us()),!(ur&6)&&(bE=us()+500,ky()))}break;case 13:U1(function(){var r=Cm(e,1);if(r!==null){var i=Xa();Vf(r,e,1,i)}}),PW(e,1)}};eW=function(e){if(e.tag===13){var t=Cm(e,134217728);if(t!==null){var n=Xa();Vf(t,e,134217728,n)}PW(e,134217728)}};vve=function(e){if(e.tag===13){var t=S0(e),n=Cm(e,t);if(n!==null){var r=Xa();Vf(n,e,t,r)}PW(e,t)}};bve=function(){return $r};_ve=function(e,t){var n=$r;try{return $r=e,t()}finally{$r=n}};m7=function(e,t,n){switch(t){case"input":if(u7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$M(r);if(!i)throw Error(et(90));Qye(r),u7(r,i)}}}break;case"textarea":Zye(e,n);break;case"select":t=n.value,t!=null&&Cw(e,!!n.multiple,t,!1)}};ove=AW;ave=U1;var u7e={usingClientEntryPoint:!1,Events:[NI,sw,$M,ive,sve,AW]},oT={findFiberByHostInstance:e1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l7e={bundleType:oT.bundleType,version:oT.version,rendererPackageName:oT.rendererPackageName,rendererConfig:oT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cve(e),e===null?null:e.stateNode},findFiberByHostInstance:oT.findFiberByHostInstance||o7e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ZR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ZR.isDisabled&&ZR.supportsFiber)try{NM=ZR.inject(l7e),yh=ZR}catch{}}Yl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u7e;Yl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DW(t))throw Error(et(200));return s7e(e,t,null,n)};Yl.createRoot=function(e,t){if(!DW(e))throw Error(et(299));var n=!1,r="",i=z1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=NW(e,1,!1,null,null,n,!1,r,i),e[Tm]=t.current,X2(e.nodeType===8?e.parentNode:e),new OW(t)};Yl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=cve(t),e=e===null?null:e.stateNode,e};Yl.flushSync=function(e){return U1(e)};Yl.hydrate=function(e,t,n){if(!HM(t))throw Error(et(200));return qM(null,e,t,!0,n)};Yl.hydrateRoot=function(e,t,n){if(!DW(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=z1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=U1e(t,null,e,1,n??null,i,!1,s,o),e[Tm]=t.current,X2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new VM(t)};Yl.render=function(e,t,n){if(!HM(t))throw Error(et(200));return qM(null,e,t,!1,n)};Yl.unmountComponentAtNode=function(e){if(!HM(e))throw Error(et(40));return e._reactRootContainer?(U1(function(){qM(null,null,e,!1,function(){e._reactRootContainer=null,e[Tm]=null})}),!0):!1};Yl.unstable_batchedUpdates=AW;Yl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!HM(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return qM(e,t,n,!1,r)};Yl.version="18.3.1-next-f1338f8080-20240426";function V1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V1e)}catch(e){console.error(e)}}V1e(),Vye.exports=Yl;var OI=Vye.exports;const c7e=Ho(OI);var eoe=OI;t7.createRoot=eoe.createRoot,t7.hydrateRoot=eoe.hydrateRoot;var Qd=function(){return Qd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qd.apply(this,arguments)};function DI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Gp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function toe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function f7e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function r1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function N8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function JC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof toe=="function"?toe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var zP="right-scroll-bar-position",VP="width-before-scroll-bar",d7e="with-scroll-bars-hidden",h7e="--removed-body-scroll-bar-size";function P8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function p7e(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var m7e=typeof window<"u"?I.useLayoutEffect:I.useEffect,noe=new WeakMap;function g7e(e,t){var n=p7e(null,function(r){return e.forEach(function(i){return P8(i,r)})});return m7e(function(){var r=noe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||P8(a,null)}),s.forEach(function(a){i.has(a)||P8(a,o)})}noe.set(n,e)},[e]),n}function y7e(e){return e}function v7e(e,t){t===void 0&&(t=y7e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function b7e(e){e===void 0&&(e={});var t=v7e(null);return t.options=Qd({async:!0,ssr:!1},e),t}var H1e=function(e){var t=e.sideCar,n=DI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Qd({},n))};H1e.isSideCarExport=!0;function _7e(e,t){return e.useMedium(t),H1e}var q1e=b7e(),O8=function(){},WM=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:O8,onWheelCapture:O8,onTouchMoveCapture:O8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=DI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,x=g7e([n,t]),C=Qd(Qd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:q1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Qd(Qd({},C),{ref:x})):I.createElement(y,Qd({},C,{className:u,ref:x}),a))});WM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};WM.classNames={fullWidth:VP,zeroRight:zP};var w7e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function E7e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=w7e();return t&&e.setAttribute("nonce",t),e}function x7e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function S7e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var T7e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=E7e())&&(x7e(t,n),S7e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},C7e=function(){var e=T7e();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},W1e=function(){var e=C7e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},A7e={left:0,top:0,right:0,gap:0},D8=function(e){return parseInt(e||"",10)||0},I7e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[D8(n),D8(r),D8(i)]},k7e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return A7e;var t=I7e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},R7e=W1e(),Pw="data-scroll-locked",N7e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(d7e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Pw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(VP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(zP," .").concat(zP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(VP," .").concat(VP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Pw,`] {
    `).concat(h7e,": ").concat(a,`px;
  }
`)},roe=function(){var e=parseInt(document.body.getAttribute(Pw)||"0",10);return isFinite(e)?e:0},P7e=function(){I.useEffect(function(){return document.body.setAttribute(Pw,(roe()+1).toString()),function(){var e=roe()-1;e<=0?document.body.removeAttribute(Pw):document.body.setAttribute(Pw,e.toString())}},[])},O7e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;P7e();var s=I.useMemo(function(){return k7e(i)},[i]);return I.createElement(R7e,{styles:N7e(s,!t,i,n?"":"!important")})},Y7=!1;if(typeof window<"u")try{var eN=Object.defineProperty({},"passive",{get:function(){return Y7=!0,!0}});window.addEventListener("test",eN,eN),window.removeEventListener("test",eN,eN)}catch{Y7=!1}var m_=Y7?{passive:!1}:!1,D7e=function(e){return e.tagName==="TEXTAREA"},G1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!D7e(e)&&n[t]==="visible")},$7e=function(e){return G1e(e,"overflowY")},M7e=function(e){return G1e(e,"overflowX")},ioe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Y1e(e,r);if(i){var s=K1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},L7e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},F7e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Y1e=function(e,t){return e==="v"?$7e(t):M7e(t)},K1e=function(e,t){return e==="v"?L7e(t):F7e(t)},j7e=function(e,t){return e==="h"&&t==="rtl"?-1:1},B7e=function(e,t,n,r,i){var s=j7e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=K1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Y1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},tN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},soe=function(e){return[e.deltaX,e.deltaY]},ooe=function(e){return e&&"current"in e?e.current:e},U7e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},z7e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},V7e=0,g_=[];function H7e(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(V7e++)[0],s=I.useState(W1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=f7e([e.lockRef.current],(e.shards||[]).map(ooe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=tN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],x,C=m.target,E=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&E==="h"&&C.type==="range")return!1;var S=ioe(E,C);if(!S)return!0;if(S?x=E:(x=E==="v"?"h":"v",S=ioe(E,C)),!S)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=x),!x)return!0;var A=r.current||x;return B7e(A,g,m,A==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!g_.length||g_[g_.length-1]!==s)){var y="deltaY"in g?soe(g):tN(g),v=t.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&U7e(x.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(ooe).filter(Boolean).filter(function(x){return x.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:q7e(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=tN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,soe(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,tN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return g_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,m_),document.addEventListener("touchmove",u,m_),document.addEventListener("touchstart",c,m_),function(){g_=g_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,m_),document.removeEventListener("touchmove",u,m_),document.removeEventListener("touchstart",c,m_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:z7e(i)}):null,h?I.createElement(O7e,{gapMode:e.gapMode}):null)}function q7e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const W7e=_7e(q1e,H7e);var GM=I.forwardRef(function(e,t){return I.createElement(WM,Qd({},e,{ref:t,sideCar:W7e}))});GM.classNames=WM.classNames;function Mi(e){return Object.keys(e)}function $8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function $W(e,t){const n={...e},r=t;return $8(e)&&$8(t)&&Object.keys(t).forEach(i=>{$8(r[i])&&i in e?n[i]=$W(n[i],r[i]):n[i]=r[i]}),n}function G7e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Y7e(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function K7(e){const t=Y7e(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function M8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function X1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?M8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?M8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?M8(s):s}}return r}return n}const Ee=X1e("rem",{shouldScale:!0}),_D=X1e("em");function Ox(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Q1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Ry(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function ka(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Rb(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function aoe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function wD(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function K7e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function X7e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function Q7e(e,t,n){return wD(e,n)===wD(t,n)}function J1e({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=wD(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>Q7e(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=X7e(l,u,r),f=K7e(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const J7e={app:100,modal:200,popover:300,overlay:400,max:9999};function qc(e){return J7e[e]}const Z7e=()=>{};function eUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Z7e:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function un(e,t="size",n=!0){if(e!==void 0)return Q1e(e)?n?Ee(e):e:`var(--${t}-${e})`}function Ml(e){return un(e,"mantine-spacing")}function fi(e){return e===void 0?"var(--mantine-radius-default)":un(e,"mantine-radius")}function lo(e){return un(e,"mantine-font-size")}function Z1e(e){return un(e,"mantine-line-height",!1)}function MW(e){if(e)return un(e,"mantine-shadow",!1)}function tm(e,t){return n=>{e==null||e(n),t==null||t(n)}}function LW(e,t){return e in t.breakpoints?K7(t.breakpoints[e]):K7(e)}function ED(e,t){const n=e.map(r=>({value:r,px:LW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function nC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function tUe(e,t,n){var r;return n?Array.from(((r=wD(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function nUe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function bc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function ZC(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Yg(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function YM(e,t){const n=Yg(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const uoe=["mousedown","touchstart"];function rUe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||uoe).forEach(s=>document.addEventListener(s,i)),()=>{(t||uoe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function iUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function sUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function ebe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:sUe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),iUe(s.current,o=>i(o.matches))},[e]),r}function oUe(e,t){return ebe("(prefers-color-scheme: dark)",e==="dark",t)?"dark":"light"}const Nb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function td(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function tbe({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return td(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function aUe(e,t="body > :not(script)"){const n=ZC(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const uUe=/input|select|textarea|button|object/,nbe="a, input, select, textarea, button, object, [tabindex]";function lUe(e){return e.style.display==="none"}function cUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(lUe(n))return!1;n=n.parentNode}return!0}function rbe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function X7(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(rbe(e));return(uUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&cUe(e)}function ibe(e){const t=rbe(e);return(Number.isNaN(t)||t>=0)&&X7(e)}function fUe(e){return Array.from(e.querySelectorAll(nbe)).filter(ibe)}function dUe(e,t){const n=fUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function hUe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(nbe));o=a.find(ibe)||a.find(X7)||null,!o&&X7(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=aUe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&dUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const pUe=Cr.useId||(()=>{});function mUe(){const e=pUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function al(e){const t=mUe(),[n,r]=I.useState(t);return Nb(()=>{r(ZC())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function sbe(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function FW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function gUe(...e){return t=>{e.forEach(n=>FW(n,t))}}function ns(...e){return I.useCallback(gUe(...e),e)}function obe(e){return{x:bc(e.x,0,1),y:bc(e.y,0,1)}}function KM(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const E=bc((w-C.left)/C.width,0,1);e({x:n==="ltr"?E:1-E,y:bc((x-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Bo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function abe(e,t){return ebe("(prefers-reduced-motion: reduce)",e,t)}const yUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Hf(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(yUe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function vUe(e){const[t,{width:n,height:r}]=Hf(e);return{ref:t,width:n,height:r}}function rC(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function bUe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function _Ue(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function wUe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function EUe(e,t){const n=Yg(e),r=I.useRef(),i=I.useRef(),s=I.useRef(!0),o=I.useRef(t),a=I.useRef(-1),u=()=>window.clearTimeout(a.current),l=I.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=I.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=I.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return I.useEffect(()=>{o.current=t},[t]),[f,u]}function xUe(e,t){const[n,r]=I.useState(e),[i,s]=EUe(r,t);return I.useEffect(()=>s,[]),[n,i]}function SUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function TUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Nb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>SUe(`${e}:${String(r)}`,i[0])}return[t,n]}var CUe={};function ube(){return typeof process<"u"&&CUe?"production":"development"}function lbe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=lbe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function es(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=lbe(e))&&(r&&(r+=" "),r+=t);return r}const AUe={};function IUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=es(t[r],i):t[r]=i})}),t}function XM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||AUe);return IUe(s)}function xD({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const cbe=I.createContext(null);function Ny(){const e=I.useContext(cbe);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function kUe(){return Ny().cssVariablesResolver}function RUe(){return Ny().classNamesPrefix}function jW(){return Ny().getStyleNonce}function NUe(){return Ny().withStaticClasses}function PUe(){return Ny().headless}function OUe(){var e;return(e=Ny().stylesTransform)==null?void 0:e.sx}function DUe(){var e;return(e=Ny().stylesTransform)==null?void 0:e.styles}function $Ue(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function MUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function LUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function FUe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function BW(e){return $Ue(e)?MUe(e):e.startsWith("rgb")?LUe(e):e.startsWith("hsl")?FUe(e):{r:0,g:0,b:0,a:1}}function nN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=BW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function sA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function L8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function jUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function BUe(e){if(e.startsWith("oklch("))return(jUe(e)||0)/100;const{r:t,g:n,b:r}=BW(e),i=t/255,s=n/255,o=r/255,a=L8(i),u=L8(s),l=L8(o);return .2126*a+.7152*u+.0722*l}function aT(e,t=.179){return e.startsWith("var(")?!1:BUe(e)>t}function tp({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:aT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:aT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:aT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][sA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:aT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:aT(e,t.luminanceThreshold),shade:s,variable:void 0}}function ai(e,t){const n=tp({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Q7(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=ai(n.from,t),i=ai(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Bd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=BW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const y_=Bd,UUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=tp({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ee(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ee(1)} solid transparent`}:{background:e,hover:nN(e,.1),color:a,border:`${Ee(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Bd(a,.1),hover:Bd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ee(1)} solid transparent`}}return{background:Bd(e,.1),hover:Bd(e,.12),color:e,border:`${Ee(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ee(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Bd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ee(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Bd(e,.05),color:e,border:`${Ee(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Bd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ee(1)} solid transparent`}}return{background:"transparent",hover:Bd(e,.12),color:e,border:`${Ee(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ee(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:nN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:nN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:nN(t.white,.01),color:e,border:`${Ee(1)} solid transparent`}:n==="gradient"?{background:Q7(r,t),hover:Q7(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ee(1)} solid var(--mantine-color-default-border)`}:{}},zUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},loe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",UW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:zUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:UUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:loe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:loe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ee(34),lineHeight:"1.3"},h2:{fontSize:Ee(26),lineHeight:"1.35"},h3:{fontSize:Ee(22),lineHeight:"1.4"},h4:{fontSize:Ee(18),lineHeight:"1.45"},h5:{fontSize:Ee(16),lineHeight:"1.5"},h6:{fontSize:Ee(14),lineHeight:"1.5"}}},fontSizes:{xs:Ee(12),sm:Ee(14),md:Ee(16),lg:Ee(18),xl:Ee(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ee(2),sm:Ee(4),md:Ee(8),lg:Ee(16),xl:Ee(32)},spacing:{xs:Ee(10),sm:Ee(12),md:Ee(16),lg:Ee(20),xl:Ee(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), 0 ${Ee(1)} ${Ee(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(10)} ${Ee(15)} ${Ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ee(7)} ${Ee(7)} ${Ee(-5)}`,md:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(20)} ${Ee(25)} ${Ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ee(10)} ${Ee(10)} ${Ee(-5)}`,lg:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(28)} ${Ee(23)} ${Ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ee(12)} ${Ee(12)} ${Ee(-7)}`,xl:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(36)} ${Ee(28)} ${Ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ee(17)} ${Ee(17)} ${Ee(-7)}`},other:{},components:{}};function coe(e){return e==="auto"||e==="dark"||e==="light"}function VUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return coe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&coe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const HUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",foe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function F8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function doe(e){if(!(e.primaryColor in e.colors))throw new Error(HUe);if(typeof e.primaryShade=="object"&&(!F8(e.primaryShade.dark)||!F8(e.primaryShade.light)))throw new Error(foe);if(typeof e.primaryShade=="number"&&!F8(e.primaryShade))throw new Error(foe)}function qUe(e,t){var r;if(!t)return doe(e),e;const n=$W(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),doe(n),n}const zW=I.createContext(null),WUe=()=>I.useContext(zW)||UW;function Us(){const e=I.useContext(zW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function fbe({theme:e,children:t,inherit:n=!0}){const r=WUe(),i=I.useMemo(()=>qUe(n?r:UW,e),[e,r,n]);return _.jsx(zW.Provider,{value:i,children:t})}fbe.displayName="@mantine/core/MantineThemeProvider";function GUe(){const e=Us(),t=jW(),n=Mi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=K7(e.breakpoints[i]),a=s?`${o-.1}px`:_D(o-.1),u=s?`${o}px`:_D(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function j8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function B8(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function YUe(e,t){const n=j8(e.variables),r=n?B8(t,n):"",i=j8(e.dark),s=i?B8(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=j8(e.light),a=o?B8(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Py({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&tp({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function hoe(e,t){return Py({color:e.colors[e.primaryColor][sA(e,t)],theme:e,autoContrast:null})}function rN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=sA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:y_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:y_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:y_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=sA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:y_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:y_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:y_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function KUe(e){return Array.isArray(e)?e:Array(10).fill(e)}function XUe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function v_(e,t,n){Mi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const dbe=e=>{const t=sA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ee(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":hoe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":hoe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};v_(r.variables,e.breakpoints,"breakpoint"),v_(r.variables,e.spacing,"spacing"),v_(r.variables,e.fontSizes,"font-size"),v_(r.variables,e.lineHeights,"line-height"),v_(r.variables,e.shadows,"shadow"),v_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Mi(e.colors).forEach(s=>{const o=e.colors[s];if(XUe(o)){Object.assign(r.light,rN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,rN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,rN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,rN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Mi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function QUe({theme:e,generator:t}){const n=dbe(e),r=t==null?void 0:t(e);return r?$W(n,r):n}const U8=dbe(UW);function JUe(e){const t={variables:{},light:{},dark:{}};return Mi(e.variables).forEach(n=>{U8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Mi(e.light).forEach(n=>{U8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Mi(e.dark).forEach(n=>{U8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function ZUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function hbe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Us(),r=jW(),i=kUe(),s=QUe({theme:n,generator:i}),o=e===":root"&&t,a=o?JUe(s):s,u=YUe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":ZUe(e)}`}}):null}hbe.displayName="@mantine/CssVariables";function eze(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function b_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function tze({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(b_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),b_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Nb(()=>{b_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return b_(r,n),()=>{};r===void 0&&b_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&b_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function nze({respectReducedMotion:e,getRootElement:t}){Nb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}eze();function pbe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=VUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=tze({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return nze({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(cbe.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(fbe,{theme:e,children:[o&&_.jsx(hbe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(GUe,{}),t]})})}pbe.displayName="@mantine/core/MantineProvider";function Jm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Us();return{resolvedClassNames:XM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:xD({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const rze={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function ize({theme:e,options:t,unstyled:n}){return es((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||rze[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function sze({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return XM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function poe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return XM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function oze({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function aze({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function uze({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function lze({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=XM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function cze({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function fze({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return es(ize({theme:e,options:t,unstyled:a||h}),lze({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),cze({options:t,classes:o,selector:r,unstyled:a}),poe({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),poe({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),sze({selector:r,stylesCtx:f,options:t,props:c,theme:e}),oze({rootSelector:l,selector:r,className:u}),aze({selector:r,classes:o,unstyled:a||h}),d&&!h&&uze({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function dze({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return xD({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function J7({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...J7({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function hze(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Ox(n[r])}}),t),{})}function pze({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=hze([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function mze({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&dze({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&xD({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&xD({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...pze({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?J7({style:u,theme:e}):null,...J7({style:r==null?void 0:r.style,theme:e})}}function gze({props:e,stylesCtx:t,themeName:n}){var o;const r=Us(),i=(o=DUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function gt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Us(),h=RUe(),p=NUe(),m=PUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=gze({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:fze({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:mze({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Dx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=Us(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Ox(n)}}function z8(e){return Mi(e).reduce((t,n)=>e[n]!==void 0?`${t}${G7e(n)}:${e[n]};`:t,"").trim()}function yze({selector:e,styles:t,media:n,container:r}){const i=t?z8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${z8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${z8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function $I(e){const t=jW();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:yze(e)}})}function $x(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:x,opacity:C,ff:E,fz:S,fw:A,lts:k,ta:R,lh:D,fs:P,tt:O,td:L,w:j,miw:B,maw:U,h:H,mih:$,mah:z,bgsz:W,bgp:F,bgr:V,bga:G,pos:ee,top:le,left:de,bottom:he,right:ye,inset:Ce,display:ve,flex:Ye,hiddenFrom:Ue,visibleFrom:mt,lightHidden:it,darkHidden:be,sx:Ae,...Ve}=e;return{styleProps:Ox({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:x,opacity:C,ff:E,fz:S,fw:A,lts:k,ta:R,lh:D,fs:P,tt:O,td:L,w:j,miw:B,maw:U,h:H,mih:$,mah:z,bgsz:W,bgp:F,bgr:V,bga:G,pos:ee,top:le,left:de,bottom:he,right:ye,inset:Ce,display:ve,flex:Ye,hiddenFrom:Ue,visibleFrom:mt,lightHidden:it,darkHidden:be,sx:Ae}),rest:Ve}}const vze={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function VW(e,t){const n=tp({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function bze(e,t){const n=tp({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:VW(e,t)}function _ze(e,t){if(typeof e=="number")return Ee(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ee(n)}`;return r&&(s+=` ${r}`),KUe.length>0&&(s+=` ${VW(i.join(" "),t)}`),s.trim()}return e}const moe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function wze(e){return typeof e=="string"&&e in moe?moe[e]:e}const Eze=["h1","h2","h3","h4","h5","h6"];function xze(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Eze.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ee(e):e}function Sze(e){return e}const Tze=["h1","h2","h3","h4","h5","h6"];function Cze(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Tze.includes(e)?`var(--mantine-${e}-line-height)`:e}function Aze(e){return typeof e=="number"?Ee(e):e}function Ize(e,t){if(typeof e=="number")return Ee(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ee(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const V8={color:VW,textColor:bze,fontSize:xze,spacing:Ize,identity:Sze,size:Aze,lineHeight:Cze,fontFamily:wze,border:_ze};function goe(e){return e.replace("(min-width: ","").replace("em)","")}function kze({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(goe(i))-Number(goe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function Rze(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function Nze(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Pze(e){return typeof e=="object"&&e!==null?Mi(e).filter(t=>t!=="base"):[]}function Oze(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function mbe({styleProps:e,data:t,theme:n}){return kze(Mi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=Nze(e[i]);if(!Rze(e[i]))return o.forEach(l=>{r.inlineStyles[l]=V8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=Pze(e[i]);return o.forEach(l=>{a&&(r.styles[l]=V8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:V8[s.type](Oze(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function QM(){return`__m__-${I.useId().replace(/:/g,"")}`}function gbe(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...gbe(r,t)}),{}):typeof e=="function"?e(t):e??{}}function ybe(e){return e.startsWith("data-")?e:`data-${e}`}function Dze(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[ybe(n)]=e[n]),t},{})}function vbe(e){return e?typeof e=="string"?{[ybe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...vbe(n)}),{}):Dze(e):null}function Z7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Z7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function $ze({theme:e,style:t,vars:n,styleProps:r}){const i=Z7(t,e),s=Z7(n,e);return{...i,...s,...r}}const bbe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var S;const m=Us(),g=e||"div",{styleProps:y,rest:v}=$x(h),b=OUe(),w=(S=b==null?void 0:b())==null?void 0:S(y.sx),x=QM(),C=mbe({styleProps:y,theme:m,data:vze}),E={ref:p,style:$ze({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:es(r,w,{[x]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Q1e(o)?void 0:o||void 0,size:d,...vbe(s),...v};return _.jsxs(_.Fragment,{children:[C.hasResponsiveStyles&&_.jsx($I,{selector:`.${x}`,styles:C.styles,media:C.media}),typeof f=="function"?f(E):_.jsx(g,{...E})]})});bbe.displayName="@mantine/core/Box";const ke=bbe;function _be(e){return e}function je(e){const t=I.forwardRef(e);return t.extend=_be,t}function zs(e){const t=I.forwardRef(e);return t.extend=_be,t}const Mze=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function np(){return I.useContext(Mze)}const[Lze,Wc]=ka("ScrollArea.Root component was not found in tree");function _E(e,t){const n=Yg(t);Nb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const Fze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Wc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return _E(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),_E(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),jze=I.forwardRef((e,t)=>{const n=Wc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(Fze,{...e,ref:t}):null}),Bze={scrollHideDelay:1e3,type:"hover"},wbe=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",Bze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[x,C]=I.useState(!1),[E,S]=I.useState(!1),A=ns(t,k=>u(k));return _.jsx(Lze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:S,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(ke,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});wbe.displayName="@mantine/core/ScrollAreaRoot";function Ebe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function JM(e){const t=Ebe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function xbe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Uze(e,[t,n]){return Math.min(n,Math.max(t,e))}function yoe(e,t,n="ltr"){const r=JM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Uze(e,u);return xbe([0,o],[0,a])(l)}function zze(e,t,n,r="ltr"){const i=JM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return xbe([u,l],f)(e)}function Sbe(e,t){return e>0&&e<t}function SD(e){return e?parseInt(e,10):0}function x1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Vze,Tbe]=ka("ScrollAreaScrollbar was not found in tree"),Cbe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Wc(),[h,p]=I.useState(null),m=ns(t,S=>p(S)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Yg(l),x=Yg(a),C=YM(c,10),E=S=>{if(g.current){const A=S.clientX-g.current.left,k=S.clientY-g.current.top;u({x:A,y:k})}};return I.useEffect(()=>{const S=A=>{const k=A.target;(h==null?void 0:h.contains(k))&&w(A,b)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[v,h,b,w]),I.useEffect(x,[n,x]),_E(h,C),_E(d.content,C),_.jsx(Vze,{value:{scrollbar:h,hasThumb:r,onThumbChange:Yg(i),onThumbPointerUp:Yg(s),onThumbPositionChange:x,onThumbPointerDown:Yg(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:x1(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E(S))}),onPointerMove:x1(e.onPointerMove,E),onPointerUp:x1(e.onPointerUp,S=>{const A=S.target;A.hasPointerCapture(S.pointerId)&&A.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Hze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Wc(),[a,u]=I.useState(),l=I.useRef(null),c=ns(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(Cbe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${JM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Sbe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:SD(a.paddingLeft),paddingEnd:SD(a.paddingRight)}})}})}),qze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Wc(),[a,u]=I.useState(),l=I.useRef(null),c=ns(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(Cbe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${JM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Sbe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:SD(a.paddingTop),paddingEnd:SD(a.paddingBottom)}})}})}),HW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=np(),s=Wc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Ebe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>zze(h,a.current,u,p);return n==="horizontal"?_.jsx(Hze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=yoe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(qze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=yoe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Abe=I.forwardRef((e,t)=>{const n=Wc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=YM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return _E(n.viewport,u),_E(n.content,u),r||s?_.jsx(HW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Wze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(Abe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Gze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=YM(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(HW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:x1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:x1(e.onPointerLeave,()=>a("idle"))}):null}),voe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(Wze,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(Gze,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(Abe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(HW,{...r,ref:t}):null});function Yze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Kze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Wc(),s=Tbe(),{onThumbPositionChange:o}=s,a=ns(t,c=>s.onThumbChange(c)),u=I.useRef(),l=YM(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Yze(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:x1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:x1(e.onPointerUp,s.onThumbPointerUp)})}),boe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Tbe();return n||i.hasThumb?_.jsx(Kze,{ref:t,...r}):null}),Ibe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Wc(),s=ns(r,i.onViewportChange);return _.jsx(ke,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Ibe.displayName="@mantine/core/ScrollAreaViewport";var qW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const kbe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Xze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ee(t)}}),Mx=je((e,t)=>{const n=xe("ScrollArea",kbe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),x=gt({name:"ScrollArea",props:n,classes:qW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Xze});return _.jsxs(wbe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...x("root"),...v,children:[_.jsx(Ibe,{...d,...x("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:C=>{var E;(E=d==null?void 0:d.onScroll)==null||E.call(d,C),p==null||p({x:C.currentTarget.scrollLeft,y:C.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(voe,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(boe,{...x("thumb")})}),(y==="xy"||y==="y")&&_.jsx(voe,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(boe,{...x("thumb")})}),_.jsx(jze,{...x("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Mx.displayName="@mantine/core/ScrollArea";const WW=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",kbe,e);return _.jsx(ke,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(ke,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Mx,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Mx.classes=qW;WW.displayName="@mantine/core/ScrollAreaAutosize";WW.classes=qW;Mx.Autosize=WW;var Rbe={root:"m_87cf2631"};const Qze={__staticSelector:"UnstyledButton"},co=zs((e,t)=>{const n=xe("UnstyledButton",Qze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=gt({name:s,props:n,classes:Rbe,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(ke,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});co.classes=Rbe;co.displayName="@mantine/core/UnstyledButton";var Nbe={root:"m_515a97f8"};const Jze={},GW=je((e,t)=>{const n=xe("VisuallyHidden",Jze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=gt({name:"VisuallyHidden",classes:Nbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(ke,{component:"span",ref:t,...c("root"),...l})});GW.classes=Nbe;GW.displayName="@mantine/core/VisuallyHidden";var Pbe={root:"m_1b7284a3"};const Zze={},eVe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:fi(t),"--paper-shadow":MW(n)}}),ZM=zs((e,t)=>{const n=xe("Paper",Zze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=gt({name:"Paper",props:n,classes:Pbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:eVe});return _.jsx(ke,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});ZM.classes=Pbe;ZM.displayName="@mantine/core/Paper";function Lx(e){return Obe(e)?(e.nodeName||"").toLowerCase():"#document"}function Hu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zm(e){var t;return(t=(Obe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Obe(e){return e instanceof Node||e instanceof Hu(e).Node}function Ci(e){return e instanceof Element||e instanceof Hu(e).Element}function Ll(e){return e instanceof HTMLElement||e instanceof Hu(e).HTMLElement}function eU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Hu(e).ShadowRoot}function MI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Oc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function tVe(e){return["table","td","th"].includes(Lx(e))}function YW(e){const t=KW(),n=Oc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function nVe(e){let t=Im(e);for(;Ll(t)&&!H0(t);){if(YW(t))return t;t=Im(t)}return null}function KW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function H0(e){return["html","body","#document"].includes(Lx(e))}function Oc(e){return Hu(e).getComputedStyle(e)}function eL(e){return Ci(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Im(e){if(Lx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eU(e)&&e.host||Zm(e);return eU(t)?t.host:t}function Dbe(e){const t=Im(e);return H0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ll(t)&&MI(t)?t:Dbe(t)}function dm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Dbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Hu(i);return s?t.concat(o,o.visualViewport||[],MI(i)?i:[],o.frameElement&&n?dm(o.frameElement):[]):t.concat(i,dm(i,[],n))}function _oe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function oA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&eU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function $be(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Mbe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function rVe(e){return oVe()?!1:!woe()&&e.width===0&&e.height===0||woe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function iVe(){return/apple/i.test(navigator.vendor)}function woe(){const e=/android/i;return e.test($be())||e.test(Mbe())}function sVe(){return $be().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function oVe(){return Mbe().includes("jsdom/")}function tU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function aVe(e){return"nativeEvent"in e}function uVe(e){return e.matches("html,body")}function i1(e){return(e==null?void 0:e.ownerDocument)||document}function H8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function z_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const lVe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function cVe(e){return Ll(e)&&e.matches(lVe)}const Cl=Math.min,ha=Math.max,TD=Math.round,iN=Math.floor,q0=e=>({x:e,y:e}),fVe={left:"right",right:"left",bottom:"top",top:"bottom"},dVe={start:"end",end:"start"};function nU(e,t,n){return ha(e,Cl(t,n))}function km(e,t){return typeof e=="function"?e(t):e}function nd(e){return e.split("-")[0]}function Fx(e){return e.split("-")[1]}function XW(e){return e==="x"?"y":"x"}function QW(e){return e==="y"?"height":"width"}function Pb(e){return["top","bottom"].includes(nd(e))?"y":"x"}function JW(e){return XW(Pb(e))}function hVe(e,t,n){n===void 0&&(n=!1);const r=Fx(e),i=JW(e),s=QW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=CD(o)),[o,CD(o)]}function pVe(e){const t=CD(e);return[rU(e),t,rU(t)]}function rU(e){return e.replace(/start|end/g,t=>dVe[t])}function mVe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function gVe(e,t,n,r){const i=Fx(e);let s=mVe(nd(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(rU)))),s}function CD(e){return e.replace(/left|right|bottom|top/g,t=>fVe[t])}function yVe(e){return{top:0,right:0,bottom:0,left:0,...e}}function ZW(e){return typeof e!="number"?yVe(e):{top:e,right:e,bottom:e,left:e}}function wE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Eoe(e,t,n){let{reference:r,floating:i}=e;const s=Pb(t),o=JW(t),a=QW(o),u=nd(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Fx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const vVe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Eoe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:x}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=Eoe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function eG(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=km(t,e),p=ZW(h),g=a[d?f==="floating"?"reference":"floating":f],y=wE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=wE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-x.top+p.top)/w.y,bottom:(x.bottom-y.bottom+p.bottom)/w.y,left:(y.left-x.left+p.left)/w.x,right:(x.right-y.right+p.right)/w.x}}const bVe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=km(e,t)||{};if(l==null)return{};const f=ZW(c),d={x:n,y:r},h=JW(i),p=QW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],x=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[b]||s.floating[p]);const S=w/2-x/2,A=E/2-m[p]/2-1,k=Cl(f[y],A),R=Cl(f[v],A),D=k,P=E-m[p]-R,O=E/2-m[p]/2+S,L=nU(D,O,P),j=!u.arrow&&Fx(i)!=null&&O!==L&&s.reference[p]/2-(O<D?k:R)-m[p]/2<0,B=j?O<D?O-D:O-P:0;return{[h]:d[h]+B,data:{[h]:L,centerOffset:O-L-B,...j&&{alignmentOffset:B}},reset:j}}}),_Ve=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=km(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=nd(i),v=nd(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[CD(a)]:pVe(a));!d&&p!=="none"&&w.push(...gVe(a,m,p,b));const x=[a,...w],C=await eG(t,g),E=[];let S=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&E.push(C[y]),f){const D=hVe(i,o,b);E.push(C[D[0]],C[D[1]])}if(S=[...S,{placement:i,overflows:E}],!E.every(D=>D<=0)){var A,k;const D=(((A=s.flip)==null?void 0:A.index)||0)+1,P=x[D];if(P)return{data:{index:D,overflows:S},reset:{placement:P}};let O=(k=S.filter(L=>L.overflows[0]<=0).sort((L,j)=>L.overflows[1]-j.overflows[1])[0])==null?void 0:k.placement;if(!O)switch(h){case"bestFit":{var R;const L=(R=S.map(j=>[j.placement,j.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((j,B)=>j[1]-B[1])[0])==null?void 0:R[0];L&&(O=L);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function Lbe(e){const t=Cl(...e.map(s=>s.left)),n=Cl(...e.map(s=>s.top)),r=ha(...e.map(s=>s.right)),i=ha(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function wVe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>wE(Lbe(i)))}const EVe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=km(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=wVe(c),d=wE(Lbe(c)),h=ZW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Pb(n)==="y"){const k=f[0],R=f[f.length-1],D=nd(n)==="top",P=k.top,O=R.bottom,L=D?k.left:R.left,j=D?k.right:R.right,B=j-L,U=O-P;return{top:P,bottom:O,left:L,right:j,width:B,height:U,x:L,y:P}}const g=nd(n)==="left",y=ha(...f.map(k=>k.right)),v=Cl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,x=b[b.length-1].bottom,C=v,E=y,S=E-C,A=x-w;return{top:w,bottom:x,left:C,right:E,width:S,height:A,x:C,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function xVe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=nd(n),a=Fx(n),u=Pb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=km(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const SVe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await xVe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},TVe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=km(e,t),l={x:n,y:r},c=await eG(t,u),f=Pb(nd(i)),d=XW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=nU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=nU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},CVe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=km(e,t),c={x:n,y:r},f=Pb(i),d=XW(f);let h=c[d],p=c[f];const m=km(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,x=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(nd(i)),x=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),C=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<x?p=x:p>C&&(p=C)}return{[d]:h,[f]:p}}}},AVe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=km(e,t),u=await eG(t,a),l=nd(n),c=Fx(n),f=Pb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Cl(h-u[p],g),b=Cl(d-u[m],y),w=!t.middlewareData.shift;let x=v,C=b;if(f?C=c||w?Cl(b,y):y:x=c||w?Cl(v,g):g,w&&!c){const S=ha(u.left,0),A=ha(u.right,0),k=ha(u.top,0),R=ha(u.bottom,0);f?C=d-2*(S!==0||A!==0?S+A:ha(u.left,u.right)):x=h-2*(k!==0||R!==0?k+R:ha(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:x});const E=await i.getDimensions(s.floating);return d!==E.width||h!==E.height?{reset:{rects:!0}}:{}}}};function Fbe(e){const t=Oc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ll(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=TD(n)!==s||TD(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function tG(e){return Ci(e)?e:e.contextElement}function Ow(e){const t=tG(e);if(!Ll(t))return q0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Fbe(t);let o=(s?TD(n.width):n.width)/r,a=(s?TD(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const IVe=q0(0);function jbe(e){const t=Hu(e);return!KW()||!t.visualViewport?IVe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function kVe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Hu(e)?!1:t}function z1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=tG(e);let o=q0(1);t&&(r?Ci(r)&&(o=Ow(r)):o=Ow(e));const a=kVe(s,n,r)?jbe(s):q0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Hu(s),h=r&&Ci(r)?Hu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Ow(m),y=m.getBoundingClientRect(),v=Oc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Hu(m),m=p.frameElement}}return wE({width:c,height:f,x:u,y:l})}const RVe=[":popover-open",":modal"];function nG(e){return RVe.some(t=>{try{return e.matches(t)}catch{return!1}})}function NVe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Zm(r),a=t?nG(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=q0(1);const c=q0(0),f=Ll(r);if((f||!f&&!s)&&((Lx(r)!=="body"||MI(o))&&(u=eL(r)),Ll(r))){const d=z1(r);l=Ow(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function PVe(e){return Array.from(e.getClientRects())}function Bbe(e){return z1(Zm(e)).left+eL(e).scrollLeft}function OVe(e){const t=Zm(e),n=eL(e),r=e.ownerDocument.body,i=ha(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ha(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Bbe(e);const a=-n.scrollTop;return Oc(r).direction==="rtl"&&(o+=ha(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function DVe(e,t){const n=Hu(e),r=Zm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=KW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function $Ve(e,t){const n=z1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ll(e)?Ow(e):q0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function xoe(e,t,n){let r;if(t==="viewport")r=DVe(e,n);else if(t==="document")r=OVe(Zm(e));else if(Ci(t))r=$Ve(t,n);else{const i=jbe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return wE(r)}function Ube(e,t){const n=Im(e);return n===t||!Ci(n)||H0(n)?!1:Oc(n).position==="fixed"||Ube(n,t)}function MVe(e,t){const n=t.get(e);if(n)return n;let r=dm(e,[],!1).filter(a=>Ci(a)&&Lx(a)!=="body"),i=null;const s=Oc(e).position==="fixed";let o=s?Im(e):e;for(;Ci(o)&&!H0(o);){const a=Oc(o),u=YW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||MI(o)&&!u&&Ube(e,o))?r=r.filter(c=>c!==o):i=a,o=Im(o)}return t.set(e,r),r}function LVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?nG(t)?[]:MVe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=xoe(t,c,i);return l.top=ha(f.top,l.top),l.right=Cl(f.right,l.right),l.bottom=Cl(f.bottom,l.bottom),l.left=ha(f.left,l.left),l},xoe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function FVe(e){const{width:t,height:n}=Fbe(e);return{width:t,height:n}}function jVe(e,t,n){const r=Ll(t),i=Zm(t),s=n==="fixed",o=z1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=q0(0);if(r||!r&&!s)if((Lx(t)!=="body"||MI(i))&&(a=eL(t)),r){const f=z1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Bbe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function q8(e){return Oc(e).position==="static"}function Soe(e,t){return!Ll(e)||Oc(e).position==="fixed"?null:t?t(e):e.offsetParent}function zbe(e,t){const n=Hu(e);if(nG(e))return n;if(!Ll(e)){let i=Im(e);for(;i&&!H0(i);){if(Ci(i)&&!q8(i))return i;i=Im(i)}return n}let r=Soe(e,t);for(;r&&tVe(r)&&q8(r);)r=Soe(r,t);return r&&H0(r)&&q8(r)&&!YW(r)?n:r||nVe(e)||n}const BVe=async function(e){const t=this.getOffsetParent||zbe,n=this.getDimensions,r=await n(e.floating);return{reference:jVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function UVe(e){return Oc(e).direction==="rtl"}const zVe={convertOffsetParentRelativeRectToViewportRelativeRect:NVe,getDocumentElement:Zm,getClippingRect:LVe,getOffsetParent:zbe,getElementRects:BVe,getClientRects:PVe,getDimensions:FVe,getScale:Ow,isElement:Ci,isRTL:UVe};function VVe(e,t){let n=null,r;const i=Zm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=iN(c),p=iN(i.clientWidth-(l+f)),m=iN(i.clientHeight-(c+d)),g=iN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ha(0,Cl(1,u))||1};let b=!0;function w(x){const C=x[0].intersectionRatio;if(C!==u){if(!b)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function HVe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=tG(e),c=i||s?[...l?dm(l):[],...dm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?VVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?z1(e):null;u&&g();function g(){const y=z1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const qVe=SVe,WVe=TVe,GVe=_Ve,YVe=AVe,Toe=bVe,KVe=EVe,XVe=CVe,QVe=(e,t,n)=>{const r=new Map,i={platform:zVe,...n},s={...i.platform,_c:r};return vVe(e,t,{...i,platform:s})};var HP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function AD(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!AD(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!AD(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Vbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Coe(e,t){const n=Vbe(e);return Math.round(t*n)/n}function Aoe(e){const t=I.useRef(e);return HP(()=>{t.current=e}),t}function JVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);AD(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==C.current&&(C.current=B,m(B))},[]),b=I.useCallback(B=>{B!==E.current&&(E.current=B,y(B))},[]),w=s||p,x=o||g,C=I.useRef(null),E=I.useRef(null),S=I.useRef(c),A=u!=null,k=Aoe(u),R=Aoe(i),D=I.useCallback(()=>{if(!C.current||!E.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),QVe(C.current,E.current,B).then(U=>{const H={...U,isPositioned:!0};P.current&&!AD(S.current,H)&&(S.current=H,OI.flushSync(()=>{f(H)}))})},[d,t,n,R]);HP(()=>{l===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=I.useRef(!1);HP(()=>(P.current=!0,()=>{P.current=!1}),[]),HP(()=>{if(w&&(C.current=w),x&&(E.current=x),w&&x){if(k.current)return k.current(w,x,D);D()}},[w,x,D,k,A]);const O=I.useMemo(()=>({reference:C,floating:E,setReference:v,setFloating:b}),[v,b]),L=I.useMemo(()=>({reference:w,floating:x}),[w,x]),j=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!L.floating)return B;const U=Coe(L.floating,c.x),H=Coe(L.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Vbe(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,L.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:D,refs:O,elements:L,floatingStyles:j}),[c,D,O,L,j])}const ZVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Toe({element:r.current,padding:i}).fn(n):{}:r?Toe({element:r,padding:i}).fn(n):{}}}},Hbe=(e,t)=>({...qVe(e),options:[e,t]}),rG=(e,t)=>({...WVe(e),options:[e,t]}),Ioe=(e,t)=>({...XVe(e),options:[e,t]}),iU=(e,t)=>({...GVe(e),options:[e,t]}),eHe=(e,t)=>({...YVe(e),options:[e,t]}),sU=(e,t)=>({...KVe(e),options:[e,t]}),qbe=(e,t)=>({...ZVe(e),options:[e,t]}),Wbe={...Uye},tHe=Wbe.useInsertionEffect,nHe=tHe||(e=>e());function Kg(e){const t=I.useRef(()=>{});return nHe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var bh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let koe=!1,rHe=0;const Roe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+rHe++;function iHe(){const[e,t]=I.useState(()=>koe?Roe():void 0);return bh(()=>{e==null&&t(Roe())},[]),I.useEffect(()=>{koe=!0},[]),e}const sHe=Wbe.useId,Gbe=sHe||iHe;function oHe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const aHe=I.createContext(null),uHe=I.createContext(null),iG=()=>{var e;return((e=I.useContext(aHe))==null?void 0:e.id)||null},sG=()=>I.useContext(uHe);function oG(e){return"data-floating-ui-"+e}function Noe(e){const t=I.useRef(e);return bh(()=>{t.current=e}),t}const Poe=oG("safe-polygon");function qP(e,t,n){return n&&!tU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function lHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=sG(),m=iG(),g=Noe(c),y=Noe(l),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),x=I.useRef(-1),C=I.useRef(!0),E=I.useRef(!1),S=I.useRef(()=>{}),A=I.useCallback(()=>{var P;const O=(P=i.current.openEvent)==null?void 0:P.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function P(O){let{open:L}=O;L||(clearTimeout(b.current),clearTimeout(x.current),C.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function P(L){A()&&r(!1,L,"hover")}const O=i1(a).documentElement;return O.addEventListener("mouseleave",P),()=>{O.removeEventListener("mouseleave",P)}},[a,n,r,u,g,A]);const k=I.useCallback(function(P,O,L){O===void 0&&(O=!0),L===void 0&&(L="hover");const j=qP(y.current,"close",v.current);j&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,L),j)):O&&(clearTimeout(b.current),r(!1,P,L))},[y,r]),R=Kg(()=>{S.current(),w.current=void 0}),D=Kg(()=>{if(E.current){const P=i1(a).body;P.style.pointerEvents="",P.removeAttribute(Poe),E.current=!1}});return I.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function O(B){if(clearTimeout(b.current),C.current=!1,f&&!tU(v.current)||d>0&&!qP(y.current,"open"))return;const U=qP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function L(B){if(P())return;S.current();const U=i1(a);if(clearTimeout(x.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){D(),R(),k(B,!0,"safe-polygon")}});const $=w.current;U.addEventListener("mousemove",$),S.current=()=>{U.removeEventListener("mousemove",$)};return}(v.current==="touch"?!oA(a,B.relatedTarget):!0)&&k(B)}function j(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){D(),R(),k(B)}})(B))}if(Ci(o)){const B=o;return n&&B.addEventListener("mouseleave",j),a==null||a.addEventListener("mouseleave",j),h&&B.addEventListener("mousemove",O,{once:!0}),B.addEventListener("mouseenter",O),B.addEventListener("mouseleave",L),()=>{n&&B.removeEventListener("mouseleave",j),a==null||a.removeEventListener("mouseleave",j),h&&B.removeEventListener("mousemove",O),B.removeEventListener("mouseenter",O),B.removeEventListener("mouseleave",L)}}},[o,a,u,e,f,d,h,k,R,D,r,n,p,y,g,i]),bh(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&A()){const L=i1(a).body;if(L.setAttribute(Poe,""),L.style.pointerEvents="none",E.current=!0,Ci(o)&&a){var O;const j=o,B=p==null||(O=p.nodesRef.current.find(U=>U.id===m))==null||(O=O.context)==null?void 0:O.elements.floating;return B&&(B.style.pointerEvents=""),j.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{j.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),bh(()=>{n||(v.current=void 0,R(),D())},[n,R,D]),I.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(x.current),D()},[u,o,R,D]),I.useMemo(()=>{if(!u)return{};function P(O){v.current=O.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(O){function L(){C.current||r(!0,O.nativeEvent,"hover")}f&&!tU(v.current)||n||d===0||(clearTimeout(x.current),v.current==="touch"?L():x.current=window.setTimeout(L,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(O){k(O.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const oU=()=>{},Ybe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:oU,setState:oU,isInstantPhase:!1}),Kbe=()=>I.useContext(Ybe);function cHe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return bh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Ybe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function fHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Kbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return bh(()=>{u&&(f({delay:{open:1,close:qP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),bh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),bh(()=>{l===oU||!n||l(o)},[n,l,o]),a}function W8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const dHe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},hHe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ooe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function pHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=sG(),v=Kg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=I.useRef(!1),x=I.useRef(!1),{escapeKey:C,outsidePress:E}=Ooe(m),{escapeKey:S,outsidePress:A}=Ooe(g),k=Kg(O=>{var L;if(!n||!u||!l||O.key!=="Escape")return;const j=(L=a.current.floatingContext)==null?void 0:L.nodeId,B=y?W8(y.nodesRef.current,j):[];if(!C&&(O.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var $;if(($=H.context)!=null&&$.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,aVe(O)?O.nativeEvent:O,"escape-key")}),R=Kg(O=>{var L;const j=()=>{var B;k(O),(B=z_(O))==null||B.removeEventListener("keydown",j)};(L=z_(O))==null||L.addEventListener("keydown",j)}),D=Kg(O=>{var L;const j=w.current;w.current=!1;const B=x.current;if(x.current=!1,f==="click"&&B||j||typeof b=="function"&&!b(O))return;const U=z_(O),H="["+oG("inert")+"]",$=i1(o).querySelectorAll(H);let z=Ci(U)?U:null;for(;z&&!H0(z);){const G=Im(z);if(H0(G)||!Ci(G))break;z=G}if($.length&&Ci(U)&&!uVe(U)&&!oA(U,o)&&Array.from($).every(G=>!oA(z,G)))return;if(Ll(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ee=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let le=ee&&O.offsetX>U.clientWidth;if(ee&&Oc(U).direction==="rtl"&&(le=O.offsetX<=U.offsetWidth-U.clientWidth),le||G&&O.offsetY>U.clientHeight)return}const W=(L=a.current.floatingContext)==null?void 0:L.nodeId,F=y&&W8(y.nodesRef.current,W).some(G=>{var ee;return H8(O,(ee=G.context)==null?void 0:ee.elements.floating)});if(H8(O,o)||H8(O,s)||F)return;const V=y?W8(y.nodesRef.current,W):[];if(V.length>0){let G=!0;if(V.forEach(ee=>{var le;if((le=ee.context)!=null&&le.open&&!ee.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,O,"outside-press")}),P=Kg(O=>{var L;const j=()=>{var B;D(O),(B=z_(O))==null||B.removeEventListener(f,j)};(L=z_(O))==null||L.addEventListener(f,j)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=C,a.current.__outsidePressBubbles=E;function O(B){r(!1,B,"ancestor-scroll")}const L=i1(o);l&&L.addEventListener("keydown",S?R:k,S),b&&L.addEventListener(f,A?P:D,A);let j=[];return p&&(Ci(s)&&(j=dm(s)),Ci(o)&&(j=j.concat(dm(o))),!Ci(i)&&i&&i.contextElement&&(j=j.concat(dm(i.contextElement)))),j=j.filter(B=>{var U;return B!==((U=L.defaultView)==null?void 0:U.visualViewport)}),j.forEach(B=>{B.addEventListener("scroll",O,{passive:!0})}),()=>{l&&L.removeEventListener("keydown",S?R:k,S),b&&L.removeEventListener(f,A?P:D,A),j.forEach(B=>{B.removeEventListener("scroll",O)})}},[a,o,s,i,l,b,f,n,r,p,u,C,E,k,S,R,D,A,P]),I.useEffect(()=>{w.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[dHe[h]]:O=>{d&&r(!1,O.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[hHe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function mHe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Gbe(),s=I.useRef({}),[o]=I.useState(()=>oHe()),a=iG()!=null,[u,l]=I.useState(r.reference),c=Kg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function aG(e){e===void 0&&(e={});const{nodeId:t}=e,n=mHe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=sG();bh(()=>{c&&(f.current=c)},[c]);const h=JVe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=Ci(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(Ci(b)||b===null)&&(f.current=b,o(b)),(Ci(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ci(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return bh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function gHe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Hu(o);function h(){!n&&Ll(o)&&o===_oe(i1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){rVe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=z_(d.nativeEvent);if(u&&Ci(h))try{if(iVe()&&sVe())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!cVe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ci(h)&&h.hasAttribute(oG("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=_oe(o?o.ownerDocument:document);!h&&g===o||oA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||oA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Doe="active",$oe="selected";function G8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Doe]:o,[$oe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Doe,$oe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function yHe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>G8(s,e,"reference"),t),r=I.useCallback(s=>G8(s,e,"floating"),t),i=I.useCallback(s=>G8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const vHe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function bHe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=vHe.get(o))!=null?n:o,u=Gbe(),c=iG()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Xbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Moe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Loe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const _He={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function wHe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ee(t),height:Ee(t),transform:"rotate(45deg)",position:"absolute",[_He[u]]:Ee(r)},f=Ee(-t/2);return u==="left"?{...c,...Moe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Moe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Loe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Loe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const uG=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=np();return s?_.jsx("div",{...l,ref:c,style:{...u,...wHe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});uG.displayName="@mantine/core/FloatingArrow";const[EHe,Qbe]=ka("Popover component was not found in the tree");function tL({children:e,active:t=!0,refProp:n="ref"}){const r=hUe(t),i=ns(r,e==null?void 0:e.ref);return Ry(e)?I.cloneElement(e,{[n]:i}):e}function Jbe(e){return _.jsx(GW,{tabIndex:-1,"data-autofocus":!0,...e})}tL.displayName="@mantine/core/FocusTrap";Jbe.displayName="@mantine/core/FocusTrapInitialFocus";tL.InitialFocus=Jbe;function xHe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const SHe={},Zbe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",SHe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Nb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:xHe(i),FW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:OI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});Zbe.displayName="@mantine/core/Portal";function LI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(Zbe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}LI.displayName="@mantine/core/OptionalPortal";const uT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ee(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),sN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ee(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ee(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ee(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ee(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ee(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ee(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ee(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ee(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...uT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...uT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...uT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...uT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...uT("top"),common:{transformOrigin:"top right"}}},Foe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function THe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in sN?{transitionProperty:sN[e].transitionProperty,...i,...sN[e].common,...sN[e][Foe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Foe[t]]}}function CHe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Us(),l=abe(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const x=c?0:v?e:t;d(x),x===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{c7e.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},x)})})};return td(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function eg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=CHe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(THe({transition:t,duration:f,state:d,timingFunction:h}))})}eg.displayName="@mantine/core/Transition";var e_e={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const AHe={},lG=je((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",AHe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Qbe(),h=tbe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ns(t,d.floating);return d.disabled?null:_.jsx(LI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(eg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(tL,{active:d.trapFocus,children:_.jsxs(ke,{...p,...f,variant:u,ref:m,onKeyDownCapture:eUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ee(d.width)},i]}),children:[o,_.jsx(uG,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});lG.classes=e_e;lG.displayName="@mantine/core/PopoverDropdown";const IHe={refProp:"ref",popupType:"dialog"},t_e=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",IHe,e);if(!Ry(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Qbe(),u=ns(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:es(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});t_e.displayName="@mantine/core/PopoverTarget";function n_e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return HVe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),td(()=>{t.update()},r),td(()=>{s(o=>o+1)},[e])}function kHe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function RHe(e,t){const n=kHe(e.middlewares),r=[Hbe(e.offset)];return n.shift&&r.push(rG(typeof n.shift=="boolean"?{limiter:Ioe(),padding:5}:{limiter:Ioe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?iU():iU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?sU():sU(n.inline)),r.push(qbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(eHe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function NHe(e){const[t,n]=Bo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=aG({strategy:e.strategy,placement:e.position,middleware:RHe(e,()=>s)});return n_e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),td(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),td(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const PHe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:qc("popover"),__staticSelector:"Popover",width:"max-content"},OHe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:fi(t),"--popover-shadow":MW(n)}});function Kn(e){var be,Ae,Ve,lt,Nt,qe;const t=xe("Popover",PHe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:x,closeOnEscape:C,clickOutsideEvents:E,trapFocus:S,onClose:A,onOpen:k,onChange:R,zIndex:D,radius:P,shadow:O,id:L,defaultOpened:j,__staticSelector:B,withRoles:U,disabled:H,returnFocus:$,variant:z,keepMounted:W,vars:F,floatingStrategy:V,...G}=t,ee=gt({name:B,props:t,classes:e_e,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:F,varsResolver:OHe}),le=I.useRef(null),[de,he]=I.useState(null),[ye,Ce]=I.useState(null),{dir:ve}=np(),Ye=al(L),Ue=NHe({middlewares:c,width:l,position:Xbe(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:le,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:j,onChange:R,onOpen:k,onClose:A,strategy:V});rUe(()=>b&&Ue.onClose(),E,[de,ye]);const mt=I.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),it=I.useCallback(me=>{Ce(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return _.jsx(EHe,{value:{returnFocus:$,disabled:H,controlled:Ue.controlled,reference:mt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(Ve=(Ae=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:Ae.arrow)==null?void 0:Ve.x,arrowY:(qe=(Nt=(lt=Ue.floating)==null?void 0:lt.middlewareData)==null?void 0:Nt.arrow)==null?void 0:qe.y,opened:Ue.opened,arrowRef:le,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:S,withinPortal:w,portalProps:x,zIndex:D,radius:P,shadow:O,closeOnEscape:C,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ye}-target`,getDropdownId:()=>`${Ye}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ee},children:n})}Kn.Target=t_e;Kn.Dropdown=lG;Kn.displayName="@mantine/core/Popover";Kn.extend=e=>e;var $f={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const DHe=I.forwardRef(({className:e,...t},n)=>_.jsxs(ke,{component:"span",className:es($f.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:$f.bar}),_.jsx("span",{className:$f.bar}),_.jsx("span",{className:$f.bar})]})),$He=I.forwardRef(({className:e,...t},n)=>_.jsxs(ke,{component:"span",className:es($f.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:$f.dot}),_.jsx("span",{className:$f.dot}),_.jsx("span",{className:$f.dot})]})),MHe=I.forwardRef(({className:e,...t},n)=>_.jsx(ke,{component:"span",className:es($f.ovalLoader,e),...t,ref:n})),r_e={bars:DHe,oval:MHe,dots:$He},LHe={loaders:r_e,type:"oval"},FHe=(e,{size:t,color:n})=>({root:{"--loader-size":un(t,"loader-size"),"--loader-color":n?ai(n,e):void 0}}),Dc=je((e,t)=>{const n=xe("Loader",LHe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=gt({name:"Loader",props:n,classes:$f,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:FHe});return p?_.jsx(ke,{...g("root"),ref:t,...m,children:p}):_.jsx(ke,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Dc.defaultLoaders=r_e;Dc.classes=$f;Dc.displayName="@mantine/core/Loader";var nL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const joe={orientation:"horizontal"},jHe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ee(t)}}),cG=je((e,t)=>{const n=xe("ActionIconGroup",joe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",joe,e),p=gt({name:"ActionIconGroup",props:n,classes:nL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:jHe,rootSelector:"group"});return _.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});cG.classes=nL;cG.displayName="@mantine/core/ActionIconGroup";const BHe={},UHe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":un(t,"ai-size"),"--ai-radius":n===void 0?void 0:fi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},rd=zs((e,t)=>{const n=xe("ActionIcon",BHe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:x,...C}=n,E=gt({name:["ActionIcon",p],props:n,className:r,style:u,classes:nL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:UHe});return _.jsxs(co,{...E("root",{active:!v&&!l&&!b}),...C,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},x],children:[_.jsx(eg,{mounted:!!l,transition:"slide-down",duration:150,children:S=>_.jsx(ke,{component:"span",...E("loader",{style:S}),"aria-hidden":!0,children:_.jsx(Dc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(ke,{component:"span",mod:{loading:l},...E("icon"),children:y})]})});rd.classes=nL;rd.displayName="@mantine/core/ActionIcon";rd.Group=cG;const i_e=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));i_e.displayName="@mantine/core/CloseIcon";var s_e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const zHe={variant:"subtle"},VHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":un(t,"cb-size"),"--cb-radius":n===void 0?void 0:fi(n),"--cb-icon-size":Ee(r)}}),Ob=zs((e,t)=>{const n=xe("CloseButton",zHe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=gt({name:"CloseButton",props:n,className:a,style:l,classes:s_e,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:VHe});return _.jsxs(co,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(i_e,{}),i]})});Ob.classes=s_e;Ob.displayName="@mantine/core/CloseButton";function HHe(e){return I.Children.toArray(e).filter(Boolean)}var o_e={root:"m_4081bf90"};const qHe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},WHe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Ml(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),nr=je((e,t)=>{const n=xe("Group",qHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=HHe(u),x=w.length,C=Ml(l??"md"),S={childWidth:`calc(${100/x}% - (${C} - ${C} / ${x}))`},A=gt({name:"Group",props:n,stylesCtx:S,className:i,style:s,classes:o_e,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:WHe});return _.jsx(ke,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});nr.classes=o_e;nr.displayName="@mantine/core/Group";var a_e={root:"m_9814e45f"};const GHe={zIndex:qc("modal")},YHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Bd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ee(i)})`:void 0,"--overlay-radius":s===void 0?void 0:fi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),aA=zs((e,t)=>{const n=xe("Overlay",GHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=gt({name:"Overlay",props:n,classes:a_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YHe});return _.jsx(ke,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});aA.classes=a_e;aA.displayName="@mantine/core/Overlay";const[KHe,tg]=ka("ModalBase component was not found in tree");function XHe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=abe()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function QHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=al(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=XHe({opened:n,transitionDuration:d});return sbe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),tbe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const u_e=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:x,titleMounted:C,bodyMounted:E,shouldLockScroll:S,setTitleMounted:A,setBodyMounted:k}=QHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(LI,{...c,withinPortal:l,children:_.jsx(KHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:C,bodyMounted:E,setTitleMounted:A,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(GM,{enabled:S&&f,...v,children:_.jsx(ke,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||qc("modal")).toString(),"--mb-shadow":MW(p),"--mb-padding":Ml(m)},children:d})})})})});function JHe(){const e=tg();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var EE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const fG=I.forwardRef(({className:e,...t},n)=>{const r=JHe(),i=tg();return _.jsx(ke,{ref:n,...t,id:r,className:es({[EE.body]:!i.unstyled},e)})});fG.displayName="@mantine/core/ModalBaseBody";const dG=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=tg();return _.jsx(Ob,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:es({[EE.close]:!i.unstyled},e),unstyled:i.unstyled})});dG.displayName="@mantine/core/ModalBaseCloseButton";const l_e=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=tg();return _.jsx(eg,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:es({[EE.inner]:!a.unstyled},n.className),children:_.jsx(tL,{active:a.opened&&a.trapFocus,children:_.jsx(ZM,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:es({[EE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),hG=I.forwardRef(({className:e,...t},n)=>{const r=tg();return _.jsx(ke,{component:"header",ref:n,className:es({[EE.header]:!r.unstyled},e),...t})});hG.displayName="@mantine/core/ModalBaseHeader";const ZHe={duration:200,timingFunction:"ease",transition:"fade"};function eqe(e){const t=tg();return{...ZHe,...t.transitionProps,...e}}const pG=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=tg(),o=eqe(t);return _.jsx(eg,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(aA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});pG.displayName="@mantine/core/ModalBaseOverlay";function tqe(){const e=tg();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const mG=I.forwardRef(({className:e,...t},n)=>{const r=tqe(),i=tg();return _.jsx(ke,{component:"h2",ref:n,className:es({[EE.title]:!i.unstyled},e),...t,id:r})});mG.displayName="@mantine/core/ModalBaseTitle";function c_e({children:e}){return _.jsx(_.Fragment,{children:e})}const[nqe,jx]=Rb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Gc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Boe={},rqe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Ee(2)})`}}),rL=je((e,t)=>{const n=xe("InputDescription",Boe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Boe,n),p=jx(),m=gt({name:["InputWrapper",c],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:rqe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});rL.classes=Gc;rL.displayName="@mantine/core/InputDescription";const iqe={},sqe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Ee(2)})`}}),iL=je((e,t)=>{const n=xe("InputError",iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=gt({name:["InputWrapper",c],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:sqe}),m=jx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(ke,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});iL.classes=Gc;iL.displayName="@mantine/core/InputError";const Uoe={labelElement:"label"},oqe=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0}}),sL=je((e,t)=>{const n=xe("InputLabel",Uoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Uoe,n),b=gt({name:["InputWrapper",m],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:oqe}),w=jx(),x=(w==null?void 0:w.getStyles)||b;return _.jsxs(ke,{...x("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...v,children:[p,f&&_.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});sL.classes=Gc;sL.displayName="@mantine/core/InputLabel";const zoe={},gG=je((e,t)=>{const n=xe("InputPlaceholder",zoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",zoe,n),p=gt({name:["InputPlaceholder",l],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(ke,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});gG.classes=Gc;gG.displayName="@mantine/core/InputPlaceholder";function aqe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const uqe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},lqe=(e,{size:t})=>({label:{"--input-label-size":lo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${lo(t)} - ${Ee(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${lo(t)} - ${Ee(2)})`}}),yG=je((e,t)=>{const n=xe("InputWrapper",uqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:x,withAsterisk:C,id:E,required:S,__stylesApiProps:A,mod:k,...R}=n,D=gt({name:["InputWrapper",f],props:A||n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lqe}),P={size:l,variant:c,__staticSelector:f},O=al(E),L=typeof C=="boolean"?C:S,j=(b==null?void 0:b.id)||`${O}-error`,B=(v==null?void 0:v.id)||`${O}-description`,U=O,H=!!m&&typeof m!="boolean",$=!!g,z=`${H?j:""} ${$?B:""}`,W=z.trim().length>0?z.trim():void 0,F=(y==null?void 0:y.id)||`${O}-label`,V=p&&_.jsx(sL,{labelElement:w,id:F,htmlFor:U,required:L,...P,...y,children:p},"label"),G=$&&_.jsx(rL,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ee=_.jsx(I.Fragment,{children:d(x)},"input"),le=H&&I.createElement(iL,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||j},m),de=h.map(he=>{switch(he){case"label":return V;case"input":return ee;case"description":return G;case"error":return le;default:return null}});return _.jsx(nqe,{value:{getStyles:D,describedBy:W,inputId:U,labelId:F,...aqe(h,{hasDescription:$,hasError:H})},children:_.jsx(ke,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...D("root"),...R,children:de})})});yG.classes=Gc;yG.displayName="@mantine/core/InputWrapper";const cqe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},fqe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":un(t.size,"input-height"),"--input-fz":lo(t.size),"--input-radius":t.radius===void 0?void 0:fi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ee(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ee(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?un(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Li=zs((e,t)=>{const n=xe("Input",cqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:x,leftSectionPointerEvents:C,variant:E,vars:S,pointer:A,multiline:k,radius:R,id:D,withAria:P,withErrorStyles:O,mod:L,inputSize:j,...B}=n,{styleProps:U,rest:H}=$x(B),$=jx(),z={offsetBottom:$==null?void 0:$.offsetBottom,offsetTop:$==null?void 0:$.offsetTop},W=gt({name:["Input",l],props:c||n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:S,varsResolver:fqe}),F=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":$==null?void 0:$.describedBy,id:($==null?void 0:$.inputId)||D}:{};return _.jsxs(ke,{...W("wrapper"),...U,...d,mod:[{error:!!h&&O,pointer:A,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},L],variant:E,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(ke,{component:"input",...H,...F,ref:t,required:u,mod:{disabled:p,error:!!h&&O},variant:E,__size:j,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Li.classes=Gc;Li.Wrapper=yG;Li.Label=sL;Li.Error=iL;Li.Description=rL;Li.Placeholder=gG;Li.displayName="@mantine/core/Input";function f_e(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:x,inputWrapperOrder:C,withAsterisk:E,variant:S,vars:A,mod:k,...R}=r,{styleProps:D,rest:P}=$x(R),O={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:x,inputWrapperOrder:C,withAsterisk:E,variant:S,id:v,mod:k,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...O,...D},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:S,id:v}}}const dqe={__staticSelector:"InputBase",withAria:!0},Yc=zs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=f_e("InputBase",dqe,e);return _.jsx(Li.Wrapper,{...r,children:_.jsx(Li,{...n,...i,ref:t})})});Yc.classes={...Li.classes,...Li.Wrapper.classes};Yc.displayName="@mantine/core/InputBase";const hqe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var d_e={root:"m_8bffd616"};const pqe={},$n=zs((e,t)=>{const n=xe("Flex",pqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=gt({name:"Flex",classes:d_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Us(),b=QM(),w=mbe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:hqe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx($I,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(ke,{ref:t,...y("root",{className:b,style:Ox(w.inlineStyles)}),...g})]})});$n.classes=d_e;$n.displayName="@mantine/core/Flex";function mqe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function gqe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{mqe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),bUe(()=>{ube()!=="test"&&o(!0)},20,{autoInvoke:!0}),_Ue(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var h_e={root:"m_96b553a6"};const yqe={},vqe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),vG=je((e,t)=>{const n=xe("FloatingIndicator",yqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=gt({name:"FloatingIndicator",classes:h_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vqe}),g=I.useRef(null),{initialized:y,hidden:v}=gqe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ns(t,g);return!l||!c?null:_.jsx(ke,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});vG.displayName="@mantine/core/FloatingIndicator";vG.classes=h_e;function aU({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ee(t),height:Ee(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}aU.displayName="@mantine/core/AccordionChevron";var p_e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const bqe={},_qe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:fi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},bG=je((e,t)=>{const n=xe("Alert",bqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,x=gt({name:"Alert",classes:p_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_qe}),C=al(h),E=f&&`${C}-title`||void 0,S=`${C}-body`;return _.jsx(ke,{id:C,...x("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":S,"aria-labelledby":E,children:_.jsxs("div",{...x("wrapper"),children:[p&&_.jsx("div",{...x("icon"),children:p}),_.jsxs("div",{...x("body"),children:[f&&_.jsx("div",{...x("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:E,...x("label"),children:f})}),d&&_.jsx("div",{id:S,...x("message"),"data-variant":v,children:d})]}),m&&_.jsx(Ob,{...x("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});bG.classes=p_e;bG.displayName="@mantine/core/Alert";var m_e={root:"m_b6d8b162"};function wqe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const Eqe={inherit:!1},xqe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":lo(i),"--text-lh":Z1e(i),"--text-gradient":t==="gradient"?Q7(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?ai(s,e):void 0}}),tt=zs((e,t)=>{const n=xe("Text",Eqe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=gt({name:["Text",l],props:n,classes:m_e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:xqe});return _.jsx(ke,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":wqe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});tt.classes=m_e;tt.displayName="@mantine/core/Text";var g_e={root:"m_849cf0da"};const Sqe={underline:"hover"},Db=zs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",Sqe,e);return _.jsx(tt,{component:"a",ref:t,className:es({[g_e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Db.classes=g_e;Db.displayName="@mantine/core/Anchor";const[Tqe,Bx]=ka("AppShell was not found in tree");var Oy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Cqe={},_G=je((e,t)=>{const n=xe("AppShellAside",Cqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Bx();return h.disabled?null:_.jsx(ke,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});_G.classes=Oy;_G.displayName="@mantine/core/AppShellAside";const Aqe={},wG=je((e,t)=>{var p;const n=xe("AppShellFooter",Aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Bx();return h.disabled?null:_.jsx(ke,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:es({[GM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});wG.classes=Oy;wG.displayName="@mantine/core/AppShellFooter";const Iqe={},EG=je((e,t)=>{var p;const n=xe("AppShellHeader",Iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Bx();return h.disabled?null:_.jsx(ke,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:es({[GM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});EG.classes=Oy;EG.displayName="@mantine/core/AppShellHeader";const kqe={},xG=je((e,t)=>{const n=xe("AppShellMain",kqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Bx();return _.jsx(ke,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});xG.classes=Oy;xG.displayName="@mantine/core/AppShellMain";function FI(e){return typeof e=="object"?e.base:e}function jI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function BI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function Rqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),jI(s)){const f=Ee(FI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(BI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ee(s.base),e["--app-shell-aside-offset"]=Ee(s.base)),Mi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ee(s[f]),t[f]["--app-shell-aside-offset"]=Ee(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=LW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function Nqe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(jI(r)){const o=Ee(FI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}BI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ee(r.base),s&&(e["--app-shell-footer-offset"]=Ee(r.base))),Mi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ee(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ee(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function Pqe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(jI(r)){const o=Ee(FI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}BI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ee(r.base),s&&(e["--app-shell-header-offset"]=Ee(r.base))),Mi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ee(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ee(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function Oqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),jI(s)){const f=Ee(FI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(BI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ee(s.base),e["--app-shell-navbar-offset"]=Ee(s.base)),Mi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ee(s[f]),t[f]["--app-shell-navbar-offset"]=Ee(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=LW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Y8(e){return Number(e)===0?"0px":Ml(e)}function Dqe({padding:e,baseStyles:t,minMediaStyles:n}){jI(e)&&(t["--app-shell-padding"]=Y8(FI(e))),BI(e)&&(e.base&&(t["--app-shell-padding"]=Y8(e.base)),Mi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Y8(e[r]))}))}function $qe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};Oqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),Rqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),Pqe({baseStyles:u,minMediaStyles:o,header:t}),Nqe({baseStyles:u,minMediaStyles:o,footer:n}),Dqe({baseStyles:u,minMediaStyles:o,padding:i});const l=ED(Mi(o),s).map(d=>({query:`(min-width: ${_D(d.px)})`,styles:o[d.value]})),c=ED(Mi(a),s).map(d=>({query:`(max-width: ${_D(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function Mqe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Us(),o=Ny(),{media:a,baseStyles:u}=$qe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx($I,{media:a,styles:u,selector:o.cssVariablesSelector})}const Lqe={},SG=je((e,t)=>{const n=xe("AppShellNavbar",Lqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Bx();return h.disabled?null:_.jsx(ke,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});SG.classes=Oy;SG.displayName="@mantine/core/AppShellNavbar";const Fqe={},TG=zs((e,t)=>{const n=xe("AppShellSection",Fqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Bx();return _.jsx(ke,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});TG.classes=Oy;TG.displayName="@mantine/core/AppShellSection";function jqe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return sbe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Nb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Bqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:qc("app")},Uqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),fs=je((e,t)=>{const n=xe("AppShell",Bqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:x,...C}=n,E=gt({name:"AppShell",classes:Oy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Uqe}),S=jqe({disabled:y,transitionDuration:d});return _.jsxs(Tqe,{value:{getStyles:E,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(Mqe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(ke,{ref:t,...E("root"),mod:[{resizing:S,layout:g,disabled:y},x],...C})]})});fs.classes=Oy;fs.displayName="@mantine/core/AppShell";fs.Navbar=SG;fs.Header=EG;fs.Main=xG;fs.Aside=_G;fs.Footer=wG;fs.Section=TG;function y_e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>y_e(t))}:e}function v_e(e){return e?e.map(t=>y_e(t)):[]}function CG(e){return e.reduce((t,n)=>"group"in n?{...t,...CG(n.items)}:(t[n.value]=n,t),{})}var Xu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const zqe={error:null},Vqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":un(t,"combobox-chevron-size")}}),AG=je((e,t)=>{const n=xe("ComboboxChevron",zqe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=gt({name:"ComboboxChevron",classes:Xu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Vqe,rootSelector:"chevron"});return _.jsx(ke,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});AG.classes=Xu;AG.displayName="@mantine/core/ComboboxChevron";const[Hqe,Kc]=ka("Combobox component was not found in tree"),b_e=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Ob,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));b_e.displayName="@mantine/core/ComboboxClearButton";const qqe={},IG=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",qqe,e),u=Kc();return _.jsx(Kn.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});IG.classes=Xu;IG.displayName="@mantine/core/ComboboxDropdown";const Wqe={refProp:"ref"},__e=je((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",Wqe,e);if(Kc(),!Ry(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Kn.Target,{ref:t,refProp:r,children:n})});__e.displayName="@mantine/core/ComboboxDropdownTarget";const Gqe={},kG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",Gqe,e),u=Kc();return _.jsx(ke,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});kG.classes=Xu;kG.displayName="@mantine/core/ComboboxEmpty";function RG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Kc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Yqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},w_e=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",Yqe,e);if(!Ry(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Kc(),f=RG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:ns(t,c.store.targetRef,n==null?void 0:n.ref)})});w_e.displayName="@mantine/core/ComboboxEventsTarget";const Kqe={},NG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",Kqe,e),u=Kc();return _.jsx(ke,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});NG.classes=Xu;NG.displayName="@mantine/core/ComboboxFooter";const Xqe={},PG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",Xqe,e),c=Kc();return _.jsxs(ke,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});PG.classes=Xu;PG.displayName="@mantine/core/ComboboxGroup";const Qqe={},OG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",Qqe,e),u=Kc();return _.jsx(ke,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});OG.classes=Xu;OG.displayName="@mantine/core/ComboboxHeader";function E_e({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}E_e.displayName="@mantine/core/ComboboxHiddenInput";const Jqe={},DG=je((e,t)=>{const n=xe("ComboboxOption",Jqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Kc(),v=I.useId(),b=l||v;return _.jsx(ke,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var x;h?w.preventDefault():((x=y.onOptionSubmit)==null||x.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});DG.classes=Xu;DG.displayName="@mantine/core/ComboboxOption";const Zqe={},$G=je((e,t)=>{const n=xe("ComboboxOptions",Zqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Kc(),d=al(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(ke,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});$G.classes=Xu;$G.displayName="@mantine/core/ComboboxOptions";const eWe={withAriaAttributes:!0,withKeyboardNavigation:!0},MG=je((e,t)=>{const n=xe("ComboboxSearch",eWe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Kc(),h=d.getStyles("search"),p=RG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Li,{ref:ns(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});MG.classes=Xu;MG.displayName="@mantine/core/ComboboxSearch";const tWe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},x_e=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",tWe,e);if(!Ry(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Kc(),f=RG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(Kn.Target,{ref:ns(t,c.store.targetRef),children:d})});x_e.displayName="@mantine/core/ComboboxTarget";function nWe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function rWe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function iWe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function oL({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Bo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((j="unknown")=>{a||(u(!0),i==null||i(j))},[u,i,a]),y=I.useCallback((j="unknown")=>{a&&(u(!1),r==null||r(j))},[u,r,a]),v=I.useCallback((j="unknown")=>{a?y(j):g(j)},[y,g,a]),b=I.useCallback(()=>{const j=document.querySelector(`#${l.current} [data-combobox-selected]`);j==null||j.removeAttribute("data-combobox-selected"),j==null||j.removeAttribute("aria-selected")},[]),w=I.useCallback(j=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=j>=U.length?0:j<0?U.length-1:j;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),x=I.useCallback(()=>{const j=document.querySelector(`#${l.current} [data-combobox-active]`);if(j){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===j);return w(U)}return w(0)},[w]),C=I.useCallback(()=>w(rWe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),E=I.useCallback(()=>w(nWe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(iWe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((j="selected",B)=>{m.current=window.setTimeout(()=>{var $;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${j}`));c.current=H,B!=null&&B.scrollIntoView&&(($=U[H])==null||$.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),R=I.useCallback(()=>{const j=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=j==null?void 0:j[c.current];B==null||B.click()},[]),D=I.useCallback(j=>{l.current=j},[]),P=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),O=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),L=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:L,selectOption:w,selectFirstOption:S,selectActiveOption:x,selectNextOption:C,selectPreviousOption:E,resetSelectedOption:k,updateSelectedOptionIndex:A,listId:l.current,setListId:D,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:O}}const sWe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},oWe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":lo(t),"--combobox-option-padding":un(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ee(n),"--combobox-option-fz":lo(t),"--combobox-option-padding":un(t,"combobox-option-padding")}});function wn(e){const t=xe("Combobox",sWe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=oL(),y=o||g,v=gt({name:h||"Combobox",classes:Xu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:oWe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(Hqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Kn,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const aWe=e=>e;wn.extend=aWe;wn.classes=Xu;wn.displayName="@mantine/core/Combobox";wn.Target=x_e;wn.Dropdown=IG;wn.Options=$G;wn.Option=DG;wn.Search=MG;wn.Empty=kG;wn.Chevron=AG;wn.Footer=NG;wn.Header=OG;wn.EventsTarget=w_e;wn.DropdownTarget=__e;wn.Group=PG;wn.ClearButton=b_e;wn.HiddenInput=E_e;var S_e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const uWe=S_e,LG=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},x)=>{const C=gt({name:e,props:t,className:n,style:y,classes:S_e,classNames:r,styles:i,unstyled:s});return _.jsx(ke,{...C("root"),ref:x,__vars:{"--label-fz":lo(d),"--label-lh":un(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(ke,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,_.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(ke,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Li.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(Li.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});LG.displayName="@mantine/core/InlineInput";const T_e=I.createContext(null),lWe=T_e.Provider,C_e=()=>I.useContext(T_e),[cWe,fWe]=Rb();var A_e={card:"m_26775b0a"};const dWe={withBorder:!0},hWe=(e,{radius:t})=>({card:{"--card-radius":fi(t)}}),FG=je((e,t)=>{const n=xe("CheckboxCard",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=gt({name:"CheckboxCard",classes:A_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hWe,rootSelector:"card"}),g=C_e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(cWe,{value:{checked:y},children:_.jsx(co,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});FG.displayName="@mantine/core/CheckboxCard";FG.classes=A_e;function I_e({children:e,role:t}){const n=jx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const pWe={},jG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",pWe,e),[c,f]=Bo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(lWe,{value:{value:c,onChange:d,size:s},children:_.jsx(Li.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(I_e,{role:"group",children:a})})})});jG.classes=Li.Wrapper.classes;jG.displayName="@mantine/core/CheckboxGroup";function k_e({size:e,style:t,...n}){const r=e!==void 0?{width:Ee(e),height:Ee(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function R_e({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(k_e,{...t})}var N_e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const mWe={icon:R_e},gWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":un(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:fi(t),"--checkbox-color":s==="outline"?u:ai(n,e),"--checkbox-icon-color":i?ai(i,e):Dx(o,e)?Py({color:n,theme:e,autoContrast:o}):void 0}}},BG=je((e,t)=>{const n=xe("CheckboxIndicator",mWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,x=gt({name:"CheckboxIndicator",classes:N_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gWe,rootSelector:"indicator"}),C=fWe(),E=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return _.jsx(ke,{ref:t,...x("indicator",{variant:y}),variant:y,mod:[{checked:E,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...x("icon")})})});BG.displayName="@mantine/core/CheckboxIndicator";BG.classes=N_e;var P_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const yWe={labelPosition:"right",icon:R_e},vWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":un(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:fi(t),"--checkbox-color":s==="outline"?u:ai(n,e),"--checkbox-icon-color":i?ai(i,e):Dx(o,e)?Py({color:n,theme:e,autoContrast:o}):void 0}}},Rm=je((e,t)=>{const n=xe("Checkbox",yWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:x,indeterminate:C,icon:E,rootRef:S,iconColor:A,onChange:k,autoContrast:R,mod:D,...P}=n,O=C_e(),L=d||(O==null?void 0:O.size),j=E,B=gt({name:"Checkbox",props:n,classes:P_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vWe}),{styleProps:U,rest:H}=$x(P),$=al(f),z=O?{checked:O.value.includes(H.value),onChange:W=>{O.onChange(W),k==null||k(W)}}:{};return _.jsx(LG,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:$,size:L,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:x,ref:S,mod:D,...U,...p,children:_.jsxs(ke,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(ke,{component:"input",id:$,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:C},...B("input",{focusable:!0,variant:x}),onChange:k,...H,...z,type:"checkbox"}),_.jsx(j,{indeterminate:C,...B("icon")})]})})});Rm.classes={...P_e,...uWe};Rm.displayName="@mantine/core/Checkbox";Rm.Group=jG;Rm.Indicator=BG;Rm.Card=FG;function xE(e){return"group"in e}function O_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;xE(o)&&i.push({group:o.group,items:O_e({options:o.items,search:t,limit:n-i.length})}),xE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function bWe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function D_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(xE(n))D_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function _We(e,t){return Array.isArray(e)?e.includes(t):e===t}function $_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!xE(e)){const a=_We(n,e.value),u=t&&a&&_.jsx(k_e,{className:Xu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(wn.Option,{value:e.value,disabled:e.disabled,className:es({[Xu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx($_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(wn.Group,{label:e.group,children:o})}function M_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){D_e(e);const b=typeof i=="string"?(r||O_e)({options:e,search:u?i:"",limit:s??1/0}):e,w=bWe(b),x=b.map(C=>_.jsx($_e,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},xE(C)?C.group:C.value));return _.jsx(wn.Dropdown,{hidden:t||n&&w,children:_.jsxs(wn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Mx.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:x}):x,w&&d&&_.jsx(wn.Empty,{children:d})]})})}var L_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const wWe={},EWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":un(s,"badge-height"),"--badge-padding-x":un(s,"badge-padding-x"),"--badge-fz":un(s,"badge-fz"),"--badge-radius":t===void 0?void 0:fi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?ai(n,e):void 0}}},Dw=zs((e,t)=>{const n=xe("Badge",wWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,x=gt({name:"Badge",props:n,classes:L_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EWe});return _.jsxs(ke,{variant:m,mod:[{block:g,circle:v},b],...x("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...x("section"),"data-position":"left",children:d}),_.jsx("span",{...x("label"),children:p}),h&&_.jsx("span",{...x("section"),"data-position":"right",children:h})]})});Dw.classes=L_e;Dw.displayName="@mantine/core/Badge";var F_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const xWe={},SWe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?ai(t,e):void 0,"--burger-size":un(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),UG=je((e,t)=>{const n=xe("Burger",xWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=gt({name:"Burger",classes:F_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SWe});return _.jsxs(co,{...p("root"),ref:t,...h,children:[_.jsx(ke,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});UG.classes=F_e;UG.displayName="@mantine/core/Burger";var aL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Voe={orientation:"horizontal"},TWe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ee(t)}}),zG=je((e,t)=>{const n=xe("ButtonGroup",Voe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Voe,e),p=gt({name:"ButtonGroup",props:n,classes:aL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:TWe,rootSelector:"group"});return _.jsx(ke,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});zG.classes=aL;zG.displayName="@mantine/core/ButtonGroup";const CWe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ee(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},AWe={},IWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":un(s,"button-height"),"--button-padding-x":un(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?lo(s.replace("compact-","")):lo(s),"--button-radius":t===void 0?void 0:fi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},_n=zs((e,t)=>{const n=xe("Button",AWe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:x,mod:C,...E}=n,S=gt({name:"Button",props:n,classes:aL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:IWe}),A=!!l,k=!!c;return _.jsxs(co,{ref:t,...S("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":k},C],...E,children:[_.jsx(eg,{mounted:!!p,transition:CWe,duration:150,children:R=>_.jsx(ke,{component:"span",...S("loader",{style:R}),"aria-hidden":!0,children:_.jsx(Dc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...S("inner"),children:[l&&_.jsx(ke,{component:"span",...S("section"),mod:{position:"left"},children:l}),_.jsx(ke,{component:"span",mod:{loading:p},...S("label"),children:u}),c&&_.jsx(ke,{component:"span",...S("section"),mod:{position:"right"},children:c})]})]})});_n.classes=aL;_n.displayName="@mantine/core/Button";_n.Group=zG;const[kWe,RWe]=ka("Card component was not found in tree");var VG={root:"m_e615b15f",section:"m_599a2148"};const NWe={},uL=zs((e,t)=>{const n=xe("CardSection",NWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=RWe();return _.jsx(ke,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});uL.classes=VG;uL.displayName="@mantine/core/CardSection";const PWe={},OWe=(e,{padding:t})=>({root:{"--card-padding":Ml(t)}}),Dy=zs((e,t)=>{const n=xe("Card",PWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=gt({name:"Card",props:n,classes:VG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OWe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===uL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(kWe,{value:{getStyles:d},children:_.jsx(ZM,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Dy.classes=VG;Dy.displayName="@mantine/core/Card";Dy.Section=uL;var j_e={root:"m_4451eb3a"};const DWe={},eu=zs((e,t)=>{const n=xe("Center",DWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=gt({name:"Center",props:n,classes:j_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(ke,{ref:t,mod:[{inline:l},c],...d("root"),...f})});eu.classes=j_e;eu.displayName="@mantine/core/Center";var B_e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const Hoe={withShadow:!0},$We=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:fi(t),"--cs-size":Ee(n)}}),Dh=zs((e,t)=>{const n=xe("ColorSwatch",Hoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=xe("ColorSwatch",Hoe,n),g=gt({name:"ColorSwatch",props:n,classes:B_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$We});return _.jsxs(ke,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[_.jsx("span",{...g("alphaOverlay")}),d&&_.jsx("span",{...g("shadowOverlay")}),_.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),_.jsx("span",{...g("childrenOverlay"),children:h})]})});Dh.classes=B_e;Dh.displayName="@mantine/core/ColorSwatch";const[MWe,HG]=Rb(null),qG=I.forwardRef(({position:e,...t},n)=>_.jsx(ke,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));qG.displayName="@mantine/core/ColorPickerThumb";var WG={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const LWe={},GG=je((e,t)=>{var U;const n=xe("ColorSlider",LWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onChange:l,onChangeEnd:c,maxValue:f,round:d,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:b,__staticSelector:w="ColorPicker",...x}=n,C=gt({name:w,classes:WG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),S=((U=HG())==null?void 0:U.getStyles)||C,A=Us(),[k,R]=I.useState({y:0,x:m/f}),D=I.useRef(k),P=H=>d?Math.round(H*f):H*f,{ref:O}=KM(({x:H,y:$})=>{D.current={x:H,y:$},l==null||l(P(H))},{onScrubEnd:()=>{const{x:H}=D.current;c==null||c(P(H)),b==null||b()},onScrubStart:v});td(()=>{R({y:0,x:m/f})},[m]);const L=(H,$)=>{H.preventDefault();const z=obe($);l==null||l(P(z.x)),c==null||c(P(z.x))},j=H=>{switch(H.key){case"ArrowRight":{L(H,{x:k.x+.05,y:k.y});break}case"ArrowLeft":{L(H,{x:k.x-.05,y:k.y});break}}},B=g.map((H,$)=>I.createElement("div",{...S("sliderOverlay"),style:H,key:$}));return _.jsxs(ke,{...x,ref:ns(O,t),...S("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":f,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:j,"data-focus-ring":A.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[B,_.jsx(qG,{position:k,...S("thumb",{style:{top:Ee(1),background:y}})})]})});GG.displayName="@mantine/core/ColorSlider";function _c(e,t=0,n=10**t){return Math.round(n*e)/n}function FWe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const jWe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function BWe(e,t="deg"){return Number(e)*(jWe[t]||1)}const UWe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function qoe(e){const t=UWe.exec(e);return t?FWe({h:BWe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function uU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:_c(60*(o<0?o+6:o),3),s:_c(i?s/i*100:0,3),v:_c(i/255*100,3),a:r}}function lU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?uU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):uU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function zWe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>_c(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...lU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...lU(r),a:i}}const VWe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Woe(e){const t=VWe.exec(e);return t?uU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const U_e={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},HWe={hex:lU,hexa:zWe,rgb:Woe,rgba:Woe,hsl:qoe,hsla:qoe};function qWe(e){for(const[,t]of Object.entries(U_e))if(t.test(e))return!0;return!1}function oN(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(U_e))if(r.test(t))return HWe[n](t);return{h:0,s:0,v:0,a:1}}const WWe={},z_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=xe("AlphaSlider",WWe,e);return _.jsx(GG,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(_c(a,2)),onChangeEnd:a=>i==null?void 0:i(_c(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${Ee(8)} ${Ee(8)}`,backgroundPosition:`0 0, 0 ${Ee(4)}, ${Ee(4)} ${Ee(-4)}, ${Ee(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ee(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ee(4)} inset`}]})});z_e.displayName="@mantine/core/AlphaSlider";function V_e({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),f=a%6;return{r:_c([o,l,u,u,c,o][f]*255),g:_c([c,o,o,l,u,u][f]*255),b:_c([u,u,c,o,o,l][f]*255),a:_c(r,2)}}function Goe(e,t){const{r:n,g:r,b:i,a:s}=V_e(e);return t?`rgba(${n}, ${r}, ${i}, ${_c(s,2)})`:`rgb(${n}, ${r}, ${i})`}function Yoe({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${_c(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function WP(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function H_e(e){const{r:t,g:n,b:r}=V_e(e);return`#${WP(t)}${WP(n)}${WP(r)}`}function GWe(e){const t=Math.round(e.a*255);return`${H_e(e)}${WP(t)}`}const K8={hex:H_e,hexa:e=>GWe(e),rgb:e=>Goe(e,!1),rgba:e=>Goe(e,!0),hsl:e=>Yoe(e,!1),hsla:e=>Yoe(e,!0)};function Rg(e,t){return t?e in K8?K8[e](t):K8.hex(t):"#000000"}const q_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=xe("HueSlider",{},e);return _.jsx(GG,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ee(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ee(4)} inset`}]})});q_e.displayName="@mantine/core/HueSlider";function W_e({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:u,onScrubEnd:l,...c}){const{getStyles:f}=HG(),[d,h]=I.useState({x:r.s/100,y:1-r.v/100}),p=I.useRef(d),{ref:m}=KM(({x:v,y:b})=>{p.current={x:v,y:b},t({s:Math.round(v*100),v:Math.round((1-b)*100)})},{onScrubEnd:()=>{const{x:v,y:b}=p.current;n({s:Math.round(v*100),v:Math.round((1-b)*100)}),l==null||l()},onScrubStart:u});I.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,b)=>{v.preventDefault();const w=obe(b);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:d.y-.05,x:d.x});break}case"ArrowDown":{g(v,{y:d.y+.05,x:d.x});break}case"ArrowRight":{g(v,{x:d.x+.05,y:d.y});break}case"ArrowLeft":{g(v,{x:d.x-.05,y:d.y});break}}};return _.jsxs(ke,{...f("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":d.x,"aria-valuetext":Rg("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[_.jsx("div",{...f("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),_.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),_.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),_.jsx(qG,{position:d,...f("thumb",{style:{backgroundColor:a}})})]})}W_e.displayName="@mantine/core/Saturation";const G_e=I.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...u},l)=>{const c=HG(),f=o.map((d,h)=>I.createElement(Dh,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:d,key:h,radius:"sm",onClick:()=>{n(d),r==null||r(d)},"aria-label":d,tabIndex:s?0:-1,"data-swatch":!0}));return _.jsx(ke,{...c.getStyles("swatches"),ref:l,...u,children:f})});G_e.displayName="@mantine/core/Swatches";const YWe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},KWe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":un(t,"cp-preview-size"),"--cp-width":un(t,"cp-width"),"--cp-body-spacing":Ml(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":un(t,"cp-thumb-size"),"--cp-saturation-height":un(t,"cp-saturation-height")}}),YG=je((e,t)=>{const n=xe("ColorPicker",YWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,format:l,value:c,defaultValue:f,onChange:d,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:b,swatches:w,swatchesPerRow:x,fullWidth:C,onColorSwatchClick:E,__staticSelector:S,mod:A,...k}=n,R=gt({name:S,props:n,classes:WG,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:u,varsResolver:KWe}),D=I.useRef(l),P=I.useRef(),O=I.useRef(-1),L=I.useRef(!1),j=l==="hexa"||l==="rgba"||l==="hsla",[B,U,H]=Bo({value:c,defaultValue:f,finalValue:"#FFFFFF",onChange:d}),[$,z]=I.useState(oN(B)),W=()=>{window.clearTimeout(O.current),L.current=!0},F=()=>{window.clearTimeout(O.current),O.current=window.setTimeout(()=>{L.current=!1},200)},V=G=>{z(ee=>{const le={...ee,...G};return P.current=Rg(D.current,le),le}),U(P.current)};return td(()=>{qWe(c)&&!L.current&&z(oN(c))},[c]),td(()=>{D.current=l,U(Rg(l,$))},[l]),_.jsx(MWe,{value:{getStyles:R,unstyled:a},children:_.jsxs(ke,{ref:t,...R("wrapper"),size:m,mod:[{"full-width":C},A],...k,children:[p&&_.jsxs(_.Fragment,{children:[_.jsx(W_e,{value:$,onChange:V,onChangeEnd:({s:G,v:ee})=>h==null?void 0:h(Rg(D.current,{...$,s:G,v:ee})),color:B,size:m,focusable:b,saturationLabel:g,onScrubStart:W,onScrubEnd:F}),_.jsxs("div",{...R("body"),children:[_.jsxs("div",{...R("sliders"),children:[_.jsx(q_e,{value:$.h,onChange:G=>V({h:G}),onChangeEnd:G=>h==null?void 0:h(Rg(D.current,{...$,h:G})),size:m,focusable:b,"aria-label":y,onScrubStart:W,onScrubEnd:F}),j&&_.jsx(z_e,{value:$.a,onChange:G=>V({a:G}),onChangeEnd:G=>{h==null||h(Rg(D.current,{...$,a:G}))},size:m,color:Rg("hex",$),focusable:b,"aria-label":v,onScrubStart:W,onScrubEnd:F})]}),j&&_.jsx(Dh,{color:B,radius:"sm",size:"var(--cp-preview-size)",...R("preview")})]})]}),Array.isArray(w)&&_.jsx(G_e,{data:w,swatchesPerRow:x,focusable:b,setValue:U,onChangeEnd:G=>{const ee=Rg(l,oN(G));E==null||E(ee),h==null||h(ee),H||z(oN(G))}})]})})});YG.classes=WG;YG.displayName="@mantine/core/ColorPicker";var Y_e={root:"m_7485cace"};const XWe={},QWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:un(t,"container-size")}}),rp=je((e,t)=>{const n=xe("Container",XWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=gt({name:"Container",classes:Y_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QWe});return _.jsx(ke,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});rp.classes=Y_e;rp.displayName="@mantine/core/Container";var K_e={root:"m_3eebeb36",label:"m_9e365f20"};const JWe={orientation:"horizontal"},ZWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?ai(t,e):void 0,"--divider-border-style":n,"--divider-size":un(r,"divider-size")}}),lL=je((e,t)=>{const n=xe("Divider",JWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=gt({name:"Divider",classes:K_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZWe});return _.jsx(ke,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(ke,{component:"span",mod:{position:d},...m("label"),children:f})})});lL.classes=K_e;lL.displayName="@mantine/core/Divider";const[eGe,Ux]=ka("Drawer component was not found in tree");var ng={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const tGe={},cL=je((e,t)=>{const n=xe("DrawerBody",tGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return _.jsx(fG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});cL.classes=ng;cL.displayName="@mantine/core/DrawerBody";const nGe={},fL=je((e,t)=>{const n=xe("DrawerCloseButton",nGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return _.jsx(dG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});fL.classes=ng;fL.displayName="@mantine/core/DrawerCloseButton";const rGe={},dL=je((e,t)=>{const n=xe("DrawerContent",rGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Ux(),d=f.scrollAreaComponent||c_e;return _.jsx(l_e,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});dL.classes=ng;dL.displayName="@mantine/core/DrawerContent";const iGe={},hL=je((e,t)=>{const n=xe("DrawerHeader",iGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return _.jsx(hG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});hL.classes=ng;hL.displayName="@mantine/core/DrawerHeader";const sGe={},pL=je((e,t)=>{const n=xe("DrawerOverlay",sGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return _.jsx(pG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});pL.classes=ng;pL.displayName="@mantine/core/DrawerOverlay";function oGe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function aGe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const uGe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},lGe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},cGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),position:"left"},fGe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":un(n,"drawer-size"),"--drawer-flex":aGe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":oGe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ee(r)}}),mL=je((e,t)=>{const n=xe("DrawerRoot",cGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=np(),m=gt({name:"Drawer",classes:ng,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fGe}),g=(p==="rtl"?lGe:uGe)[c];return _.jsx(eGe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(u_e,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});mL.classes=ng;mL.displayName="@mantine/core/DrawerRoot";const dGe={},gL=je((e,t)=>{const n=xe("DrawerTitle",dGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return _.jsx(mG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});gL.classes=ng;gL.displayName="@mantine/core/DrawerTitle";const hGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),withOverlay:!0,withCloseButton:!0},ip=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",hGe,e),l=!!n||s;return _.jsxs(mL,{ref:t,...u,children:[r&&_.jsx(pL,{...i}),_.jsxs(dL,{children:[l&&_.jsxs(hL,{children:[n&&_.jsx(gL,{children:n}),s&&_.jsx(fL,{...o})]}),_.jsx(cL,{children:a})]})]})});ip.classes=ng;ip.displayName="@mantine/core/Drawer";ip.Root=mL;ip.Overlay=pL;ip.Content=dL;ip.Body=cL;ip.Header=hL;ip.Title=gL;ip.CloseButton=fL;function pGe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[mGe,X_e]=ka("Grid component was not found in tree"),cU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Koe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":cU(e,t),Xoe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Qoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function gGe({span:e,order:t,offset:n,selector:r}){var d;const i=Us(),s=X_e(),a=nC(e)===void 0?12:nC(e),u=Ox({"--col-order":(d=nC(t))==null?void 0:d.toString(),"--col-flex-grow":Xoe(a,s.grow),"--col-flex-basis":cU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Koe(a,s.columns,s.grow),"--col-offset":Qoe(nC(n),s.columns)}),l=Mi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Xoe(e[p],s.grow),h[p]["--col-flex-basis"]=cU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Koe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Qoe(n[p],s.columns)),h},{}),f=ED(Mi(l),i).filter(h=>Mi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx($I,{styles:u,media:f,selector:r})}var KG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const yGe={span:12},XG=je((e,t)=>{const n=xe("GridCol",yGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=X_e(),h=QM();return _.jsxs(_.Fragment,{children:[_.jsx(gGe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(ke,{ref:t,...d.getStyles("col",{className:es(i,h),style:s,classNames:r,styles:o}),...f})]})});XG.classes=KG;XG.displayName="@mantine/core/GridCol";function vGe({gutter:e,selector:t}){const n=Us(),r=Ox({"--grid-gutter":Ml(nC(e))}),i=Mi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Ml(e[u])),a),{}),o=ED(Mi(i),n).filter(a=>Mi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx($I,{styles:r,media:o,selector:t})}const bGe={gutter:"md",grow:!1,columns:12},_Ge=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),wc=je((e,t)=>{const n=xe("Grid",bGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=gt({name:"Grid",classes:KG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ge}),y=QM();return _.jsxs(mGe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(vGe,{selector:`.${y}`,...n}),_.jsx(ke,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});wc.classes=KG;wc.displayName="@mantine/core/Grid";wc.Col=XG;var Q_e={root:"m_9e117634"};const wGe={},EGe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:fi(t),"--image-object-fit":n}}),$y=zs((e,t)=>{const n=xe("Image",wGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=gt({name:"Image",classes:Q_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EGe});return g&&h?_.jsx(ke,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(ke,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});$y.classes=Q_e;$y.displayName="@mantine/core/Image";function fU(){return fU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fU.apply(null,arguments)}function xGe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var SGe=I.useLayoutEffect,TGe=function(t){var n=I.useRef(t);return SGe(function(){n.current=t}),n},Joe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},CGe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Joe(r.current,null),r.current=n,n&&Joe(n,i)},[n])},Zoe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},AGe=function(t){Object.keys(Zoe).forEach(function(n){t.style.setProperty(n,Zoe[n],"important")})},eae=AGe,Da=null,tae=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function IGe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Da||(Da=document.createElement("textarea"),Da.setAttribute("tabindex","-1"),Da.setAttribute("aria-hidden","true"),eae(Da)),Da.parentNode===null&&document.body.appendChild(Da);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Da.style[h]=o[h]}),eae(Da),Da.value=t;var u=tae(Da,e);Da.value=t,u=tae(Da,e),Da.value="x";var l=Da.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var nae=function(){},kGe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},RGe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],NGe=!!document.documentElement.currentStyle,PGe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=kGe(RGe,n),i=r.boxSizing;if(i==="")return null;NGe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},OGe=PGe;function J_e(e,t,n){var r=TGe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var DGe=function(t){J_e(window,"resize",t)},$Ge=function(t){J_e(document.fonts,"loadingdone",t)},MGe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],LGe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?nae:o,u=t.onHeightChange,l=u===void 0?nae:u,c=xGe(t,MGe),f=c.value!==void 0,d=I.useRef(null),h=CGe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:OGe(b);if(w){m.current=w;var x=IGe(w,b.value||b.placeholder||"x",s,i),C=x[0],E=x[1];p.current!==C&&(p.current=C,b.style.setProperty("height",C+"px","important"),l(C,{rowHeight:E}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),DGe(g),$Ge(g),I.createElement("textarea",fU({},c,{onChange:y,ref:h}))},FGe=I.forwardRef(LGe);const jGe={},yL=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",jGe,e),u=n&&ube()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Yc,{component:u?FGe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});yL.classes=Yc.classes;yL.displayName="@mantine/core/Textarea";const[BGe,UGe]=ka("List component was not found in tree");var QG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const zGe={},JG=je((e,t)=>{const n=xe("ListItem",zGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=UGe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(ke,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});JG.classes=QG;JG.displayName="@mantine/core/ListItem";const VGe={type:"unordered"},HGe=(e,{size:t,spacing:n})=>({root:{"--list-fz":lo(t),"--list-lh":Z1e(t),"--list-spacing":Ml(n)}}),qf=je((e,t)=>{const n=xe("List",VGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=gt({name:"List",classes:QG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HGe});return _.jsx(BGe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(ke,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});qf.classes=QG;qf.displayName="@mantine/core/List";qf.Item=JG;var Z_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const rae={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:qc("overlay")},qGe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),$c=je((e,t)=>{const n=xe("LoadingOverlay",rae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Us(),g=gt({name:"LoadingOverlay",classes:Z_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qGe}),y={...rae.overlayProps,...f};return _.jsx(eg,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(ke,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Dc,{...g("loader"),unstyled:a,...c}),_.jsx(aA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(aA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});$c.classes=Z_e;$c.displayName="@mantine/core/LoadingOverlay";const[WGe,UI]=ka("Menu component was not found in the tree");var zx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const GGe={},ZG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",GGe,e),u=UI();return _.jsx(ke,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});ZG.classes=zx;ZG.displayName="@mantine/core/MenuDivider";const YGe={},eY=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",YGe,e),f=I.useRef(null),d=UI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=tm(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=tm(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Kn.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ns(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});eY.classes=zx;eY.displayName="@mantine/core/MenuDropdown";const KGe={},tY=zs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",KGe,e),p=UI(),m=Us(),{dir:g}=np(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=tm(b.onMouseLeave,()=>p.setHovered(-1)),x=tm(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),C=tm(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),E=tm(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),S=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?tp({color:a,theme:m}):null;return _.jsxs(co,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:E,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ns(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:x,onMouseLeave:w,onClick:C,onKeyDown:J1e({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:S==null?void 0:S.color,"--menu-item-hover":S==null?void 0:S.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});tY.classes=zx;tY.displayName="@mantine/core/MenuItem";const XGe={},nY=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",XGe,e),u=UI();return _.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});nY.classes=zx;nY.displayName="@mantine/core/MenuLabel";const QGe={refProp:"ref"},ewe=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",QGe,e);if(!Ry(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=UI(),o=tm(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=tm(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=tm(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Kn.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});ewe.displayName="@mantine/core/MenuTarget";const JGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Iu(e){const t=xe("Menu",JGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:x,...C}=t,E=gt({name:"Menu",classes:zx,props:t,classNames:m,styles:g,unstyled:y}),[S,{setHovered:A,resetHovered:k}]=nUe(),[R,D]=Bo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,O]=I.useState(!1),L=()=>{D(!1),O(!1),R&&(i==null||i())},j=()=>{D(!0),!R&&(r==null||r())},B=()=>{R?L():j()},{openDropdown:U,closeDropdown:H}=pGe({open:j,close:L,closeDelay:p,openDelay:h}),$=F=>tUe("[data-menu-item]","[data-menu-dropdown]",F),{resolvedClassNames:z,resolvedStyles:W}=Jm({classNames:m,styles:g,props:t});return td(()=>{k()},[R]),_.jsx(WGe,{value:{getStyles:E,opened:R,toggleDropdown:B,getItemIndex:$,hovered:S,setHovered:A,openedViaClick:P,setOpenedViaClick:O,closeOnItemClick:l,closeDropdown:d==="click"?L:H,openDropdown:d==="click"?j:U,closeDropdownImmediately:L,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Kn,{...C,opened:R,onChange:B,defaultOpened:o,trapFocus:x?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:x,children:n})})}Iu.extend=e=>e;Iu.classes=zx;Iu.displayName="@mantine/core/Menu";Iu.Item=tY;Iu.Label=nY;Iu.Dropdown=eY;Iu.Target=ewe;Iu.Divider=ZG;const[ZGe,Vx]=ka("Modal component was not found in tree");var rg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const eYe={},vL=je((e,t)=>{const n=xe("ModalBody",eYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Vx();return _.jsx(fG,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});vL.classes=rg;vL.displayName="@mantine/core/ModalBody";const tYe={},bL=je((e,t)=>{const n=xe("ModalCloseButton",tYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Vx();return _.jsx(dG,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});bL.classes=rg;bL.displayName="@mantine/core/ModalCloseButton";const nYe={},_L=je((e,t)=>{const n=xe("ModalContent",nYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Vx(),f=c.scrollAreaComponent||c_e;return _.jsx(l_e,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ee(c.yOffset)} * 2))`},children:u})})});_L.classes=rg;_L.displayName="@mantine/core/ModalContent";const rYe={},wL=je((e,t)=>{const n=xe("ModalHeader",rYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Vx();return _.jsx(hG,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});wL.classes=rg;wL.displayName="@mantine/core/ModalHeader";const iYe={},EL=je((e,t)=>{const n=xe("ModalOverlay",iYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Vx();return _.jsx(pG,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});EL.classes=rg;EL.displayName="@mantine/core/ModalOverlay";const sYe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},oYe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:fi(t),"--modal-size":un(n,"modal-size"),"--modal-y-offset":Ee(r),"--modal-x-offset":Ee(i)}}),xL=je((e,t)=>{const n=xe("ModalRoot",sYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=gt({name:m,classes:rg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oYe});return _.jsx(ZGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(u_e,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});xL.classes=rg;xL.displayName="@mantine/core/ModalRoot";const aYe={},SL=je((e,t)=>{const n=xe("ModalTitle",aYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Vx();return _.jsx(mG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});SL.classes=rg;SL.displayName="@mantine/core/ModalTitle";const uYe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ss=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",uYe,e),c=!!n||s;return _.jsxs(xL,{ref:t,radius:u,...l,children:[r&&_.jsx(EL,{...i}),_.jsxs(_L,{radius:u,children:[c&&_.jsxs(wL,{children:[n&&_.jsx(SL,{children:n}),s&&_.jsx(bL,{...o})]}),_.jsx(vL,{children:a})]})]})});Ss.classes=rg;Ss.displayName="@mantine/core/Modal";Ss.Root=xL;Ss.Overlay=EL;Ss.Content=_L;Ss.Body=vL;Ss.Header=wL;Ss.Title=SL;Ss.CloseButton=bL;const[lYe,rY]=Rb(),[cYe,fYe]=Rb();var TL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const dYe={},hYe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?un(t):un(n,"pg-gap")}}),iY=je((e,t)=>{const n=xe("PillGroup",dYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=rY(),h=(d==null?void 0:d.size)||l||void 0,p=gt({name:"PillGroup",classes:TL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hYe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(cYe,{value:{size:h,disabled:c},children:_.jsx(ke,{ref:t,size:h,...p("group"),...f})})});iY.classes=TL;iY.displayName="@mantine/core/PillGroup";const pYe={variant:"default"},mYe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":un(n,"pill-fz"),"--pill-height":un(n,"pill-height"),"--pill-radius":t===void 0?void 0:fi(t)}}),V1=je((e,t)=>{const n=xe("Pill",pYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=fYe(),w=rY(),x=m||(b==null?void 0:b.size)||void 0,C=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",E=gt({name:"Pill",classes:TL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mYe,stylesCtx:{size:x}});return _.jsxs(ke,{component:"span",ref:t,variant:C,size:x,...E("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...E("label"),children:c}),f&&_.jsx(Ob,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...E("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:S=>{var A;S.preventDefault(),S.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,S)},onClick:S=>{var A;S.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,S)}})]})});V1.classes=TL;V1.displayName="@mantine/core/Pill";V1.Group=iY;var twe={field:"m_45c4369d"};const gYe={type:"visible"},sY=je((e,t)=>{const n=xe("PillsInputField",gYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=rY(),g=jx(),y=gt({name:"PillsInputField",classes:twe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(ke,{component:"input",ref:ns(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});sY.classes=twe;sY.displayName="@mantine/core/PillsInputField";const yYe={},SE=je((e,t)=>{const n=xe("PillsInput",yYe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(lYe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Yc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});SE.displayName="@mantine/core/PillsInput";SE.Field=sY;function vYe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(xE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const bYe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},oY=je((e,t)=>{const n=xe("MultiSelect",bYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:x,comboboxProps:C,filter:E,limit:S,withScrollArea:A,maxDropdownHeight:k,searchValue:R,defaultSearchValue:D,onSearchChange:P,readOnly:O,disabled:L,onFocus:j,onBlur:B,onPaste:U,radius:H,rightSection:$,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:F,leftSection:V,leftSectionWidth:G,leftSectionPointerEvents:ee,leftSectionProps:le,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:Ye,wrapperProps:Ue,description:mt,label:it,error:be,maxValues:Ae,searchable:Ve,nothingFoundMessage:lt,withCheckIcon:Nt,checkIconPosition:qe,hidePickedOptions:me,withErrorStyles:ft,name:yt,form:Et,id:pe,clearable:Ie,clearButtonProps:Ke,hiddenInputProps:bt,placeholder:Vt,hiddenInputValuesDivider:rr,required:qn,mod:Ln,renderOption:yn,onRemove:yr,onClear:Qt,scrollAreaProps:Wr,...ei}=n,Bi=al(pe),An=v_e(m),Ui=CG(An),Ir=oL({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Ir.resetSelectedOption()}}),{styleProps:ys,rest:{type:xp,autoComplete:fl,...Ad}}=$x(ei),[Er,Ri]=Bo({value:c,defaultValue:f,finalValue:[],onChange:d}),[ti,pu]=Bo({value:R,defaultValue:D,finalValue:"",onChange:P}),Na=gt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Pa,resolvedStyles:oe}=Jm({props:n,styles:o,classNames:r}),te=ot=>{h==null||h(ot),ot.key===" "&&!Ve&&(ot.preventDefault(),Ir.toggleDropdown()),ot.key==="Backspace"&&ti.length===0&&Er.length>0&&(yr==null||yr(Er[Er.length-1]),Ri(Er.slice(0,Er.length-1)))},ae=Er.map((ot,St)=>{var qt,On;return _.jsx(V1,{withRemoveButton:!O&&!((qt=Ui[ot])!=null&&qt.disabled),onRemove:()=>{Ri(Er.filter(Fn=>ot!==Fn)),yr==null||yr(ot)},unstyled:a,disabled:L,...Na("pill"),children:((On=Ui[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});I.useEffect(()=>{w&&Ir.selectFirstOption()},[w,Er]);const Te=Ie&&Er.length>0&&!L&&!O&&_.jsx(wn.ClearButton,{size:l,...Ke,onClear:()=>{Qt==null||Qt(),Ri([]),pu("")}}),Se=vYe({data:An,value:Er});return _.jsxs(_.Fragment,{children:[_.jsxs(wn,{store:Ir,classNames:Pa,styles:oe,unstyled:a,size:l,readOnly:O,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{x==null||x(ot),pu(""),Ir.updateSelectedOptionIndex("selected"),Er.includes(Ui[ot].value)?(Ri(Er.filter(St=>St!==Ui[ot].value)),yr==null||yr(Ui[ot].value)):Er.length<Ae&&Ri([...Er,Ui[ot].value])},...C,children:[_.jsx(wn.DropdownTarget,{children:_.jsx(SE,{...ys,__staticSelector:"MultiSelect",classNames:Pa,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:L,radius:H,rightSection:$||Te||_.jsx(wn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Te?"all":"none"),rightSectionWidth:z,rightSectionProps:F,leftSection:V,leftSectionWidth:G,leftSectionPointerEvents:ee,leftSectionProps:le,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:Ye,wrapperProps:Ue,description:mt,label:it,error:be,multiline:!0,withErrorStyles:ft,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Te?"all":"none"),multiline:!0},pointer:!Ve,onClick:()=>Ve?Ir.openDropdown():Ir.toggleDropdown(),"data-expanded":Ir.dropdownOpened||void 0,id:Bi,required:qn,mod:Ln,children:_.jsxs(V1.Group,{disabled:L,unstyled:a,...Na("pillsList"),children:[ae,_.jsx(wn.EventsTarget,{autoComplete:fl,children:_.jsx(SE.Field,{...Ad,ref:t,id:Bi,placeholder:Vt,type:!Ve&&!Vt?"hidden":"visible",...Na("inputField"),unstyled:a,onFocus:ot=>{j==null||j(ot),Ve&&Ir.openDropdown()},onBlur:ot=>{B==null||B(ot),Ir.closeDropdown(),pu("")},onKeyDown:te,value:ti,onChange:ot=>{pu(ot.currentTarget.value),Ve&&Ir.openDropdown(),w&&Ir.selectFirstOption()},disabled:L,readOnly:O||!Ve,pointer:!Ve})})]})})}),_.jsx(M_e,{data:me?Se:An,hidden:O||L,filter:E,search:ti,limit:S,hiddenWhenEmpty:!Ve||!lt||me&&Se.length===0&&ti.trim().length===0,withScrollArea:A,maxDropdownHeight:k,filterOptions:Ve,value:Er,checkIconPosition:qe,withCheckIcon:Nt,nothingFoundMessage:lt,unstyled:a,labelId:it?`${Bi}-label`:void 0,"aria-label":it?void 0:ei["aria-label"],renderOption:yn,scrollAreaProps:Wr})]}),_.jsx(wn.HiddenInput,{name:yt,valuesDivider:rr,value:Er,form:Et,disabled:L,...bt})]})});oY.classes={...Yc.classes,...wn.classes};oY.displayName="@mantine/core/MultiSelect";function nwe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var uA;(function(e){e.event="event",e.props="prop"})(uA||(uA={}));function Xg(){}function _Ye(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function lA(e){return!!(e||"").match(/\d/)}function $w(e){return e==null}function wYe(e){return typeof e=="number"&&isNaN(e)}function rwe(e){return $w(e)||wYe(e)||typeof e=="number"&&!isFinite(e)}function iwe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function EYe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function xYe(e,t,n){var r=EYe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function SYe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function aY(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function TYe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function swe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function iae(e,t){return Array(t+1).join(e)}function owe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+iae("0",Math.abs(o))+i:o>=a?i=i+iae("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function sae(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=aY(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=swe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function jv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var awe=_Ye(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),CYe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function AYe(e,t,n){return Math.min(Math.max(e,t),n)}function X8(e){return Math.max(e.selectionStart,e.selectionEnd)}function IYe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function kYe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function RYe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function NYe(e,t,n,r,i,s,o){o===void 0&&(o=RYe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function oae(e,t,n,r){var i=e.length;if(t=AYe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function PYe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(lA(e[n])||lA(e[n-1]));return t}function uwe(e,t,n,r,i,s){s===void 0&&(s=Xg);var o=SYe(function(p,m){var g,y;return rwe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?owe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o($w(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;$w(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function OYe(e){return e.replace(/[^0-9]/g,"")}function DYe(e){return e}function $Ye(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=DYe);var a=e.removeFormatting;a===void 0&&(a=OYe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Xg);var h=e.onKeyDown;h===void 0&&(h=Xg);var p=e.onMouseUp;p===void 0&&(p=Xg);var m=e.onFocus;m===void 0&&(m=Xg);var g=e.onBlur;g===void 0&&(g=Xg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=PYe);var b=e.isValidInputCharacter;b===void 0&&(b=lA);var w=e.isCharacterSame,x=nwe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=uwe(y,u,!!l,o,a,c),E=C[0],S=E.formattedValue,A=E.numAsString,k=C[1],R=I.useRef(),D=I.useRef({formattedValue:S,numAsString:A}),P=function(be,Ae){D.current={formattedValue:be.formattedValue,numAsString:be.value},k(be,Ae)},O=I.useState(!1),L=O[0],j=O[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return j(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,$=function(be,Ae){var Ve=parseFloat(Ae);return{formattedValue:be,value:Ae,floatValue:isNaN(Ve)?void 0:Ve}},z=function(be,Ae,Ve){be.selectionStart===0&&be.selectionEnd===be.value.length||(jv(be,Ae),U.current.setCaretTimeout=setTimeout(function(){be.value===Ve&&be.selectionStart!==Ae&&jv(be,Ae)},0))},W=function(be,Ae,Ve){return oae(be,Ae,v(be),Ve)},F=function(be,Ae,Ve){var lt=v(Ae),Nt=NYe(Ae,S,be,Ve,lt,b,w);return Nt=oae(Ae,Nt,lt),Nt},V=function(be){var Ae=be.formattedValue;Ae===void 0&&(Ae="");var Ve=be.input,lt=be.source,Nt=be.event,qe=be.numAsString,me;if(Ve){var ft=be.inputValue||Ve.value,yt=X8(Ve);Ve.value=Ae,me=F(ft,Ae,yt),me!==void 0&&z(Ve,me,Ae)}Ae!==S&&P($(Ae,qe),{event:Nt,source:lt})};I.useEffect(function(){var be=D.current,Ae=be.formattedValue,Ve=be.numAsString;(S!==Ae||A!==Ve)&&P($(S,A),{event:void 0,source:uA.props})},[S,A]);var G=B.current?X8(B.current):void 0,ee=typeof window<"u"?I.useLayoutEffect:I.useEffect;ee(function(){var be=B.current;if(S!==D.current.formattedValue&&be){var Ae=F(D.current.formattedValue,S,G);be.value=S,z(be,Ae,S)}},[S]);var le=function(be,Ae,Ve){var lt=Ae.target,Nt=R.current?CYe(R.current,lt.selectionEnd):awe(S,be),qe=Object.assign(Object.assign({},Nt),{lastValue:S}),me=a(be,qe),ft=H(me);if(me=a(ft,void 0),f&&!f($(ft,me))){var yt=Ae.target,Et=X8(yt),pe=F(be,S,Et);return yt.value=S,z(yt,pe,S),!1}return V({formattedValue:ft,numAsString:me,inputValue:be,event:Ae,source:Ve,input:Ae.target}),!0},de=function(be,Ae){Ae===void 0&&(Ae=0);var Ve=be.selectionStart,lt=be.selectionEnd;R.current={selectionStart:Ve,selectionEnd:lt+Ae}},he=function(be){var Ae=be.target,Ve=Ae.value,lt=le(Ve,be,uA.event);lt&&d(be),R.current=void 0},ye=function(be){var Ae=be.target,Ve=be.key,lt=Ae.selectionStart,Nt=Ae.selectionEnd,qe=Ae.value;qe===void 0&&(qe="");var me;Ve==="ArrowLeft"||Ve==="Backspace"?me=Math.max(lt-1,0):Ve==="ArrowRight"?me=Math.min(lt+1,qe.length):Ve==="Delete"&&(me=lt);var ft=0;Ve==="Delete"&&lt===Nt&&(ft=1);var yt=Ve==="ArrowLeft"||Ve==="ArrowRight";if(me===void 0||lt!==Nt&&!yt){h(be),de(Ae,ft);return}var Et=me;if(yt){var pe=Ve==="ArrowLeft"?"left":"right";Et=W(qe,me,pe),Et!==me&&be.preventDefault()}else Ve==="Delete"&&!b(qe[me])?Et=W(qe,me,"right"):Ve==="Backspace"&&!b(qe[me])&&(Et=W(qe,me,"left"));Et!==me&&z(Ae,Et,qe),h(be),de(Ae,ft)},Ce=function(be){var Ae=be.target,Ve=function(){var lt=Ae.selectionStart,Nt=Ae.selectionEnd,qe=Ae.value;if(qe===void 0&&(qe=""),lt===Nt){var me=W(qe,lt);me!==lt&&z(Ae,me,qe)}};Ve(),requestAnimationFrame(function(){Ve()}),p(be),de(Ae)},ve=function(be){be.persist&&be.persist();var Ae=be.target,Ve=be.currentTarget;B.current=Ae,U.current.focusTimeout=setTimeout(function(){var lt=Ae.selectionStart,Nt=Ae.selectionEnd,qe=Ae.value;qe===void 0&&(qe="");var me=W(qe,lt);me!==lt&&!(lt===0&&Nt===qe.length)&&z(Ae,me,qe),m(Object.assign(Object.assign({},be),{currentTarget:Ve}))},0)},Ye=function(be){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(be)},Ue=L&&IYe()?"numeric":void 0,mt=Object.assign({inputMode:Ue},x,{type:t,value:S,onChange:he,onKeyDown:ye,onMouseUp:Ce,onFocus:ve,onBlur:Ye});if(n==="text")return i?Cr.createElement(Cr.Fragment,null,i(S,x)||null):Cr.createElement("span",Object.assign({},x,{ref:s}),S);if(r){var it=r;return Cr.createElement(it,Object.assign({},mt,{ref:s}))}return Cr.createElement("input",Object.assign({},mt,{ref:s}))}function aae(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=CL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=aY(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=swe(p,n,!!r)),l&&(h=xYe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function CL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function MYe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function LYe(e,t){return new RegExp("(^-)|[0-9]|"+iwe(e),"g")}function FYe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function jYe(e,t,n){var r;t===void 0&&(t=kYe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=CL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(lA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var $=!1,z=!1;s.startsWith("-")?$=!1:B.startsWith("--")?($=!1,z=!0):o.startsWith("-")&&B.length===o.length?$=!1:B[0]==="-"&&($=!0);var W=$?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:$}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),x=w.start,C=w.end,E=w.value,S=e.substring(c,f);e.length&&E.length&&(x>E.length-o.length||C<s.length)&&!(S&&o.startsWith(S))&&(e=E);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var k=e.length,R=e.length-o.length;e.endsWith(o)?k=R:(f>R||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=MYe(b?"-"+e:e,i),e=(e.match(LYe(p))||[]).join("");var D=e.indexOf(p);e=e.replace(new RegExp(iwe(p),"g"),function(B,U){return U===D?".":""});var P=aY(e,i),O=P.beforeDecimal,L=P.afterDecimal,j=P.addNegation;return l.end-l.start<u.end-u.start&&O===""&&m&&!parseFloat(L)&&(e=j?"-":""),e}function BYe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function UYe(e){var t=CL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function zYe(e){e=UYe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Xg);var s=e.onBlur;s===void 0&&(s=Xg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=nwe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=CL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(j){return aae(j,e)},b=function(j,B){return jYe(j,B,e)},w=$w(f)?c:f,x=d??FYe(w,l,t);$w(f)?$w(c)||(x=x||typeof c=="number"):x=x||typeof f=="number";var C=function(j){return rwe(j)?j:(typeof j=="number"&&(j=owe(j)),x&&typeof a=="number"?sae(j,a,!!u):j)},E=uwe(C(f),C(c),!!x,v,b,h),S=E[0],A=S.numAsString,k=S.formattedValue,R=E[1],D=function(j){var B=j.target,U=j.key,H=B.selectionStart,$=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&$<l.length){j.preventDefault();return}if(H!==$){i(j);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&jv(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(jv(B,H-1),j.preventDefault()):U==="Delete"&&z[H]===g&&j.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&jv(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&jv(B,H-1),U==="Delete"&&z[H]===W&&jv(B,H+1),i(j)},P=function(j){var B=A;if(B.match(/\d/g)||(B=""),r||(B=TYe(B)),u&&a&&(B=sae(B,a,u)),B!==A){var U=aae(B,e);R({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:j,source:uA.event})}s(j)},O=function(j){return j===g?!0:lA(j)},L=function(j){var B=j.currentValue,U=j.lastValue,H=j.formattedValue,$=j.currentValueIndex,z=j.formattedValueIndex,W=B[$],F=H[z],V=awe(U,B),G=V.to;return $>=G.start&&$<G.end&&y&&y.includes(W)&&F===g?!0:W===F};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:O,isCharacterSame:L,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(j){return BYe(j,e)},onKeyDown:D,onBlur:P})}function VYe(e){var t=zYe(e);return Cr.createElement($Ye,Object.assign({},t))}function uae({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var dU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const HYe=/^(0\.0*|-0(\.0*)?)$/,qYe=/^-?0\d+(\.\d+)?\.?$/;function WYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function lae(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const GYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},YYe=(e,{size:t})=>({controls:{"--ni-chevron-size":un(t,"ni-chevron-size")}}),uY=je((e,t)=>{const n=xe("NumberInput",GYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:x,onKeyDown:C,onKeyDownCapture:E,handlersRef:S,startValue:A,disabled:k,rightSectionPointerEvents:R,allowNegative:D,readOnly:P,size:O,rightSectionWidth:L,stepHoldInterval:j,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:$,...z}=n,W=gt({name:"NumberInput",classes:dU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:YYe}),{resolvedClassNames:F,resolvedStyles:V}=Jm({classNames:i,styles:s,props:n}),[G,ee]=Bo({value:c,defaultValue:f,onChange:u}),le=B!==void 0&&j!==void 0,de=I.useRef(null),he=I.useRef(null),ye=I.useRef(0),Ce=(me,ft)=>{ft.source==="event"&&ee(WYe(me.floatValue)&&!HYe.test(me.value)&&!(U&&qYe.test(me.value))?me.floatValue:me.value),l==null||l(me,ft)},ve=me=>{const ft=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ft?Math.max(0,(ft[1]?ft[1].length:0)-(ft[2]?+ft[2]:0)):0},Ye=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=I.useRef();Ue.current=()=>{let me;const ft=ve(G),yt=ve(p),Et=Math.max(ft,yt),pe=10**Et;if(typeof G!="number"||Number.isNaN(G))me=bc(A,h,d);else if(d!==void 0){const Ke=(Math.round(G*pe)+Math.round(p*pe))/pe;me=Ke<=d?Ke:d}else me=(Math.round(G*pe)+Math.round(p*pe))/pe;const Ie=me.toFixed(Et);ee(parseFloat(Ie)),l==null||l({floatValue:parseFloat(Ie),formattedValue:Ie,value:Ie},{source:"increment"}),setTimeout(()=>{var Ke;return Ye((Ke=de.current)==null?void 0:Ke.value.length)},0)};const mt=I.useRef();mt.current=()=>{let me;const ft=h!==void 0?h:D?Number.MIN_SAFE_INTEGER:0,yt=ve(G),Et=ve(p),pe=Math.max(yt,Et),Ie=10**pe;if(typeof G!="number"||Number.isNaN(G))me=bc(A,ft,d);else{const bt=(Math.round(G*Ie)-Math.round(p*Ie))/Ie;me=ft!==void 0&&bt<ft?ft:bt}const Ke=me.toFixed(pe);ee(parseFloat(Ke)),l==null||l({floatValue:parseFloat(Ke),formattedValue:Ke,value:Ke},{source:"decrement"}),setTimeout(()=>{var bt;return Ye((bt=de.current)==null?void 0:bt.value.length)},0)};const it=me=>{C==null||C(me),!(P||!H)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),mt.current()))},be=me=>{if(E==null||E(me),me.key==="Backspace"){const ft=de.current;ft.selectionStart===0&&ft.selectionStart===ft.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ye(0),0))}};FW(S,{increment:Ue.current,decrement:mt.current});const Ae=me=>{me?Ue.current():mt.current(),ye.current+=1},Ve=me=>{if(Ae(me),le){const ft=typeof j=="number"?j:j(ye.current);he.current=window.setTimeout(()=>Ve(me),ft)}},lt=(me,ft)=>{var yt;me.preventDefault(),(yt=de.current)==null||yt.focus(),Ae(ft),le&&(he.current=window.setTimeout(()=>Ve(ft),B))},Nt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},qe=_.jsxs("div",{...W("controls"),children:[_.jsx(co,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{lt(me,!0)},onPointerUp:Nt,onPointerLeave:Nt,children:_.jsx(uae,{direction:"up"})}),_.jsx(co,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{lt(me,!1)},onPointerUp:Nt,onPointerLeave:Nt,children:_.jsx(uae,{direction:"down"})})]});return _.jsx(Yc,{component:VYe,allowNegative:D,className:es(dU.root,r),size:O,...z,readOnly:P,disabled:k,value:G,getInputRef:ns(t,de),onValueChange:Ce,rightSection:m||P?g:g||qe,classNames:F,styles:V,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?x:0,onKeyDown:it,onKeyDownCapture:be,rightSectionPointerEvents:R??(k?"none":void 0),rightSectionWidth:L??`var(--ni-right-section-width-${O||"sm"})`,allowLeadingZeros:U,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&bc(G,h,d)!==G&&ee(bc(G,h,d)),$&&typeof G=="string"){const ft=G.replace(/^0+/,""),yt=parseFloat(ft);ee(Number.isNaN(yt)?ft:yt)}},isAllowed:me=>v==="strict"?y?y(me)&&lae(me.floatValue,h,d):lae(me.floatValue,h,d):y?y(me):!0})});uY.classes={...Yc.classes,...dU};uY.displayName="@mantine/core/NumberInput";const[KYe,lwe]=ka("Progress.Root component was not found in tree");var zI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const XYe={},lY=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",XYe,e),u=lwe();return _.jsx(ke,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});lY.classes=zI;lY.displayName="@mantine/core/ProgressLabel";const QYe={},JYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":un(t,"progress-size"),"--progress-radius":n===void 0?void 0:fi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),AL=je((e,t)=>{const n=xe("ProgressRoot",QYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=gt({name:"Progress",classes:zI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JYe});return _.jsx(KYe,{value:{getStyles:d,autoContrast:l},children:_.jsx(ke,{ref:t,...d("root"),...f})})});AL.classes=zI;AL.displayName="@mantine/core/ProgressRoot";const ZYe={withAria:!0},IL=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",ZYe,e),p=lwe(),m=Us(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(ke,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":ai(l,m),"--progress-label-color":Dx(p.autoContrast,m)?Py({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});IL.classes=zI;IL.displayName="@mantine/core/ProgressSection";const eKe={},Hx=je((e,t)=>{const n=xe("Progress",eKe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Jm({classNames:i,styles:s,props:n});return _.jsx(AL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(IL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Hx.classes=zI;Hx.displayName="@mantine/core/Progress";Hx.Section=IL;Hx.Root=AL;Hx.Label=lY;const[tKe,cwe]=Rb(),[nKe,rKe]=Rb();var fwe={card:"m_9dc8ae12"};const iKe={withBorder:!0},sKe=(e,{radius:t})=>({card:{"--card-radius":fi(t)}}),cY=je((e,t)=>{const n=xe("RadioCard",iKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=gt({name:"RadioCard",classes:fwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sKe,rootSelector:"card"}),{dir:v}=np(),b=cwe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,x=p||(b==null?void 0:b.name),C=E=>{if(m==null||m(E),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(E.nativeEvent.code)){E.preventDefault();const S=Array.from(document.querySelectorAll(`[role="radio"][name="${x||"__mantine"}"]`)),A=S.findIndex(D=>D===E.target),k=A+1>=S.length?0:A+1,R=A-1<0?S.length-1:A-1;E.nativeEvent.code==="ArrowDown"&&(S[k].focus(),S[k].click()),E.nativeEvent.code==="ArrowUp"&&(S[R].focus(),S[R].click()),E.nativeEvent.code==="ArrowLeft"&&(S[v==="ltr"?R:k].focus(),S[v==="ltr"?R:k].click()),E.nativeEvent.code==="ArrowRight"&&(S[v==="ltr"?k:R].focus(),S[v==="ltr"?k:R].click())}};return _.jsx(nKe,{value:{checked:w},children:_.jsx(co,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:x,onClick:E=>{h==null||h(E),b==null||b.onChange(d||"")},onKeyDown:C})})});cY.displayName="@mantine/core/RadioCard";cY.classes=fwe;const oKe={},fY=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",oKe,e),f=al(u),[d,h]=Bo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(tKe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(Li.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(I_e,{role:"radiogroup",children:a})})})});fY.classes=Li.Wrapper.classes;fY.displayName="@mantine/core/RadioGroup";function dwe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ee(e),height:Ee(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var hwe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const aKe={icon:dwe},uKe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":un(r,"radio-size"),"--radio-radius":t===void 0?void 0:fi(t),"--radio-color":s==="outline"?u:ai(n,e),"--radio-icon-size":un(r,"radio-icon-size"),"--radio-icon-color":i?ai(i,e):Dx(o,e)?Py({color:n,theme:e,autoContrast:o}):void 0}}},dY=je((e,t)=>{const n=xe("RadioIndicator",aKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=gt({name:"RadioIndicator",classes:hwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uKe,rootSelector:"indicator"}),x=rKe(),C=typeof p=="boolean"?p:(x==null?void 0:x.checked)||!1;return _.jsx(ke,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});dY.displayName="@mantine/core/RadioIndicator";dY.classes=hwe;var pwe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const lKe={labelPosition:"right"},cKe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=tp({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":un(t,"radio-size"),"--radio-radius":n===void 0?void 0:fi(n),"--radio-color":s==="outline"?u:ai(r,e),"--radio-icon-color":i?ai(i,e):Dx(o,e)?Py({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":un(t,"radio-icon-size")}}},H1=je((e,t)=>{const n=xe("Radio",lKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=dwe,rootRef:x,iconColor:C,onChange:E,mod:S,...A}=n,k=gt({name:"Radio",classes:pwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cKe}),R=cwe(),D=(R==null?void 0:R.size)??c,P=n.size?c:D,{styleProps:O,rest:L}=$x(A),j=al(l),B=R?{checked:R.value===L.value,name:L.name??R.name,onChange:U=>{R.onChange(U),E==null||E(U)}}:{};return _.jsx(LG,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:j,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:x,mod:S,...O,...b,children:_.jsxs(ke,{...k("inner"),mod:{"label-position":d},children:[_.jsx(ke,{...k("radio",{focusable:!0,variant:y}),onChange:E,...L,...B,component:"input",mod:{error:!!p},ref:t,id:j,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});H1.classes=pwe;H1.displayName="@mantine/core/Radio";H1.Group=fY;H1.Card=cY;H1.Indicator=dY;const fKe={duration:100,transition:"fade"};function dKe(e,t){return{...fKe,...t,...e}}function hKe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=aG({placement:t,middleware:[rG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=dm(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var kL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const pKe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:qc("popover")},mKe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:fi(t),"--tooltip-bg":n?ai(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),hY=je((e,t)=>{const n=xe("TooltipFloating",pKe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:x,...C}=n,E=Us(),S=gt({name:"TooltipFloating",props:n,classes:kL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:mKe}),{handleMouseMove:A,x:k,y:R,opened:D,boundaryRef:P,floating:O,setOpened:L}=hKe({offset:p,position:m});if(!Ry(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const j=ns(P,r.ref,t),B=H=>{var $,z;(z=($=r.props).onMouseEnter)==null||z.call($,H),A(H),L(!0)},U=H=>{var $,z;(z=($=r.props).onMouseLeave)==null||z.call($,H),L(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(LI,{...x,withinPortal:s,children:_.jsx(ke,{...C,...S("tooltip",{style:{...gbe(o,E),zIndex:y,display:!v&&D?"block":"none",top:(R&&Math.round(R))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:O,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:j,onMouseEnter:B,onMouseLeave:U})]})});hY.classes=kL;hY.displayName="@mantine/core/TooltipFloating";const mwe=I.createContext(!1),gKe=mwe.Provider,yKe=()=>I.useContext(mwe),vKe={openDelay:0,closeDelay:0};function gwe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",vKe,e);return _.jsx(gKe,{value:!0,children:_.jsx(cHe,{delay:{open:t,close:n},children:r})})}gwe.displayName="@mantine/core/TooltipGroup";function bKe(e){var C,E,S;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=yKe(),o=al(),{delay:a,currentId:u,setCurrentId:l}=Kbe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=aG({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Hbe(e.offset),rG({padding:8}),iU(),qbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[sU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=yHe([lHe(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((E=e.events)!=null&&E.touch)}),gHe(h,{enabled:(S=e.events)==null?void 0:S.focus,visibleOnly:!0}),bHe(h,{role:"tooltip"}),pHe(h,{enabled:typeof e.opened>"u"}),fHe(h,{id:o})]);n_e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),td(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const x=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:x,opened:i,placement:g}}const cae={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:qc("popover"),positionDependencies:[]},_Ke=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:fi(t),"--tooltip-bg":n?ai(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ko=je((e,t)=>{const n=xe("Tooltip",cae,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:x,arrowRadius:C,arrowPosition:E,offset:S,transitionProps:A,multiline:k,events:R,zIndex:D,disabled:P,positionDependencies:O,onClick:L,onMouseEnter:j,onMouseLeave:B,inline:U,variant:H,keepMounted:$,vars:z,portalProps:W,mod:F,floatingStrategy:V,...G}=xe("Tooltip",cae,n),{dir:ee}=np(),le=I.useRef(null),de=bKe({position:Xbe(ee,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:le,arrowOffset:x,offset:typeof S=="number"?S+(b?w/2:0):S,positionDependencies:[...O,r],inline:U,strategy:V}),he=gt({name:"Tooltip",props:n,classes:kL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:_Ke});if(!Ry(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=ns(de.reference,r.ref,t),Ce=dKe(A,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(LI,{...W,withinPortal:f,children:_.jsx(eg,{...Ce,keepMounted:$,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ce.duration,children:ve=>_.jsxs(ke,{...G,variant:H,mod:[{multiline:k},F],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...ve,zIndex:D,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(uG,{ref:le,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:x,arrowRadius:C,arrowPosition:E,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:L,onMouseEnter:j,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:es(v,r.props.className),...r.props}))]})});ko.classes=kL;ko.displayName="@mantine/core/Tooltip";ko.Floating=hY;ko.Group=gwe;var ywe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const wKe={withItemsBorders:!0},EKe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:fi(t),"--sc-color":n?ai(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":un(i,"sc-padding"),"--sc-font-size":lo(i)}}),RL=je((e,t)=>{var ee,le;const n=xe("SegmentedControl",wKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:x,transitionTimingFunction:C,variant:E,autoContrast:S,withItemsBorders:A,mod:k,...R}=n,D=gt({name:"SegmentedControl",props:n,classes:ywe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EKe}),P=Us(),O=l.map(de=>typeof de=="string"?{label:de,value:de}:de),L=wUe(),[j,B]=I.useState(null),[U,H]=I.useState({}),$=(de,he)=>{U[he]=de,H(U)},[z,W]=Bo({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ee=O.find(de=>!de.disabled))==null?void 0:ee.value)??((le=l[0])==null?void 0:le.value)??null:null,onChange:d}),F=al(p),V=O.map(de=>I.createElement(ke,{...D("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...D("input"),disabled:m||de.disabled,type:"radio",name:F,value:de.value,id:`${F}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),I.createElement(ke,{component:"label",...D("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${F}-${de.value}`,ref:he=>$(he,de.value),__vars:{"--sc-label-color":w!==void 0?Py({color:w,theme:P,autoContrast:S}):void 0},key:`${de.value}-label`},_.jsx("span",{...D("innerLabel"),children:de.label})))),G=ns(t,de=>B(de));return l.length===0?null:_.jsxs(ke,{...D("root"),variant:E,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:L,"with-items-borders":A},k],...R,role:"radiogroup",children:[typeof z=="string"&&_.jsx(vG,{target:U[z],parent:j,component:"span",transitionDuration:"var(--sc-transition-duration)",...D("indicator")}),V]})});RL.classes=ywe;RL.displayName="@mantine/core/SegmentedControl";const xKe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},_h=je((e,t)=>{const n=xe("Select",xKe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:x,disabled:C,filter:E,limit:S,withScrollArea:A,maxDropdownHeight:k,size:R,searchable:D,rightSection:P,checkIconPosition:O,withCheckIcon:L,nothingFoundMessage:j,name:B,form:U,searchValue:H,defaultSearchValue:$,onSearchChange:z,allowDeselect:W,error:F,rightSectionPointerEvents:V,id:G,clearable:ee,clearButtonProps:le,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ce,scrollAreaProps:ve,...Ye}=n,Ue=I.useMemo(()=>v_e(m),[m]),mt=I.useMemo(()=>CG(Ue),[Ue]),it=al(G),[be,Ae,Ve]=Bo({value:g,defaultValue:y,finalValue:null,onChange:p}),lt=typeof be=="string"?mt[be]:void 0,[Nt,qe]=Bo({value:H,defaultValue:$,finalValue:lt?lt.label:"",onChange:z}),me=oL({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:ft,resolvedStyles:yt}=Jm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&me.selectFirstOption()},[v,be]),I.useEffect(()=>{g===null&&qe(""),typeof g=="string"&&lt&&qe(lt.label)},[g,lt]);const Et=ee&&!!be&&!C&&!x&&_.jsx(wn.ClearButton,{size:R,...le,onClear:()=>{Ae(null,null),qe(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(wn,{store:me,__staticSelector:"Select",classNames:ft,styles:yt,unstyled:s,readOnly:x,onOptionSubmit:pe=>{b==null||b(pe);const Ie=W&&mt[pe].value===be?null:mt[pe],Ke=Ie?Ie.value:null;Ae(Ke,Ie),!Ve&&qe(typeof Ke=="string"&&(Ie==null?void 0:Ie.label)||""),me.closeDropdown()},size:R,...w,children:[_.jsx(wn.Target,{targetType:D?"input":"button",autoComplete:Ce,children:_.jsx(Yc,{id:it,ref:t,rightSection:P||Et||_.jsx(wn.Chevron,{size:R,error:F,unstyled:s}),rightSectionPointerEvents:V||(Et?"all":"none"),...Ye,size:R,__staticSelector:"Select",disabled:C,readOnly:x||!D,value:Nt,onChange:pe=>{qe(pe.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:pe=>{D&&me.openDropdown(),f==null||f(pe)},onBlur:pe=>{var Ie;D&&me.closeDropdown(),qe(be!=null&&((Ie=mt[be])==null?void 0:Ie.label)||""),d==null||d(pe)},onClick:pe=>{D?me.openDropdown():me.toggleDropdown(),h==null||h(pe)},classNames:ft,styles:yt,unstyled:s,pointer:!D,error:F})}),_.jsx(M_e,{data:Ue,hidden:x||C,filter:E,search:Nt,limit:S,hiddenWhenEmpty:!D||!j,withScrollArea:A,maxDropdownHeight:k,filterOptions:D&&(lt==null?void 0:lt.label)!==Nt,value:be,checkIconPosition:O,withCheckIcon:L,nothingFoundMessage:j,unstyled:s,labelId:Ye.label?`${it}-label`:void 0,"aria-label":Ye.label?void 0:Ye["aria-label"],renderOption:he,scrollAreaProps:ve})]}),_.jsx(wn.HiddenInput,{value:be,name:B,form:U,disabled:C,...de})]})});_h.classes={...Yc.classes,...wn.classes};_h.displayName="@mantine/core/Select";const[vwe,NL]=ka("SliderProvider was not found in tree"),pY=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=NL();return _.jsx(ke,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});pY.displayName="@mantine/core/SliderRoot";const ID=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=NL(),[b,w]=I.useState(!1),x=l||s||b||h&&p;return _.jsxs(ke,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,_.jsx(eg,{mounted:i!=null&&!!x,transition:"fade",duration:0,...u,children:C=>_.jsx("div",{...v("label",{style:C}),children:i})})]})});ID.displayName="@mantine/core/SliderThumb";function kD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function SKe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function bwe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=NL();if(!e)return null;const u=e.map((l,c)=>I.createElement(ke,{...a("markWrapper"),__vars:{"--mark-offset":`${kD({value:l.value,min:t,max:n})}%`},key:c},_.jsx(ke,{...a("mark"),mod:{filled:SKe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}bwe.displayName="@mantine/core/SliderMarks";function mY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=NL();return _.jsx(_.Fragment,{children:_.jsx(ke,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(ke,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(ke,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(bwe,{...a,offset:i,disabled:r,inverted:s})]})})})}mY.displayName="@mantine/core/SliderTrack";function hU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function uc(e,t){return parseFloat(e.toFixed(t))}function _we(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var PL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const TKe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},CKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":un(t,"slider-size"),"--slider-color":n?ai(n,e):void 0,"--slider-radius":i===void 0?void 0:fi(i),"--slider-thumb-size":r!==void 0?Ee(r):"calc(var(--slider-size) * 2)"}}),OL=je((e,t)=>{const n=xe("Slider",TKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:x,disabled:C,unstyled:E,scale:S,inverted:A,className:k,style:R,vars:D,hiddenInputProps:P,...O}=n,L=gt({name:"Slider",props:n,classes:PL,classNames:r,className:k,styles:i,style:R,vars:D,varsResolver:CKe,unstyled:E}),{dir:j}=np(),[B,U]=I.useState(!1),[H,$]=Bo({value:typeof s=="number"?bc(s,l,c):s,defaultValue:typeof h=="number"?bc(h,l,c):h,finalValue:bc(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),F=I.useRef(),V=kD({value:H,min:l,max:c}),G=S(H),ee=typeof g=="function"?g(G):g,le=d??_we(f),de=I.useCallback(({x:ve})=>{if(!C){const Ye=hU({value:ve,min:l,max:c,step:f,precision:le});$(Ye),z.current=Ye}},[C,l,c,f,le,$]),{ref:he,active:ye}=KM(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},j),Ce=ve=>{var Ye,Ue,mt,it,be,Ae;if(!C)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(Ye=F.current)==null||Ye.focus();const Ve=uc(Math.min(Math.max(H+f,l),c),le);$(Ve),a==null||a(Ve);break}case"ArrowRight":{ve.preventDefault(),(Ue=F.current)==null||Ue.focus();const Ve=uc(Math.min(Math.max(j==="rtl"?H-f:H+f,l),c),le);$(Ve),a==null||a(Ve);break}case"ArrowDown":{ve.preventDefault(),(mt=F.current)==null||mt.focus();const Ve=uc(Math.min(Math.max(H-f,l),c),le);$(Ve),a==null||a(Ve);break}case"ArrowLeft":{ve.preventDefault(),(it=F.current)==null||it.focus();const Ve=uc(Math.min(Math.max(j==="rtl"?H+f:H-f,l),c),le);$(Ve),a==null||a(Ve);break}case"Home":{ve.preventDefault(),(be=F.current)==null||be.focus(),$(l),a==null||a(l);break}case"End":{ve.preventDefault(),(Ae=F.current)==null||Ae.focus(),$(c),a==null||a(c);break}}};return _.jsx(vwe,{value:{getStyles:L},children:_.jsxs(pY,{...O,ref:ns(t,W),onKeyDownCapture:Ce,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:C,children:[_.jsx(mY,{inverted:A,offset:0,filled:V,marks:m,min:l,max:c,value:G,disabled:C,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(ID,{max:c,min:l,value:G,position:V,dragging:ye,label:ee,ref:F,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:C,children:x})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});OL.classes=PL;OL.displayName="@mantine/core/Slider";function AKe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const IKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":un(t,"slider-size"),"--slider-color":n?ai(n,e):void 0,"--slider-radius":i===void 0?void 0:fi(i),"--slider-thumb-size":r!==void 0?Ee(r):"calc(var(--slider-size) * 2)"}}),kKe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},RD=je((e,t)=>{const n=xe("RangeSlider",kKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:x,thumbToLabel:C,showLabelOnHover:E,thumbChildren:S,disabled:A,unstyled:k,scale:R,inverted:D,className:P,style:O,vars:L,hiddenInputProps:j,...B}=n,U=gt({name:"Slider",props:n,classes:PL,classNames:r,className:P,styles:i,style:O,vars:L,varsResolver:IKe,unstyled:k}),{dir:H}=np(),[$,z]=I.useState(-1),[W,F]=I.useState(!1),[V,G]=Bo({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ee=I.useRef(V),le=I.useRef([]),de=I.useRef(void 0),he=[kD({value:V[0],min:l,max:c}),kD({value:V[1],min:l,max:c})],ye=p??_we(h),Ce=qe=>{G(qe),ee.current=qe};I.useEffect(()=>{Array.isArray(s)&&(ee.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(qe,me,ft)=>{const yt=[...ee.current];yt[me]=qe,me===0&&(qe>yt[1]-(f-1e-9)&&(yt[1]=Math.min(qe+f,c)),qe>(c-(f-1e-9)||l)&&(yt[me]=ee.current[me]),yt[1]-qe>d&&(yt[1]=qe+d)),me===1&&(qe<yt[0]+f&&(yt[0]=Math.max(qe-f,l)),qe<yt[0]+f&&(yt[me]=ee.current[me]),qe-yt[0]>d&&(yt[0]=qe-d)),yt[0]=uc(yt[0],ye),yt[1]=uc(yt[1],ye),Ce(yt),ft&&(a==null||a(ee.current))},Ye=qe=>{if(!A){const me=hU({value:qe,min:l,max:c,step:h,precision:ye});ve(me,de.current,!1)}},{ref:Ue,active:mt}=KM(({x:qe})=>Ye(qe),{onScrubEnd:()=>a==null?void 0:a(ee.current)},H);function it(qe){de.current=qe}const be=qe=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),ft=AKe(qe.nativeEvent),yt=hU({value:ft-me.left,max:c,min:l,step:h,containerWidth:me.width}),Et=Math.abs(V[0]-yt)>Math.abs(V[1]-yt)?1:0,pe=H==="ltr"?Et:Et===1?0:1;de.current=pe},Ae=()=>$!==1&&$!==0?(z(0),0):$,Ve=qe=>{if(!A)switch(qe.key){case"ArrowUp":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(uc(Math.min(Math.max(ee.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(uc(Math.min(Math.max(H==="rtl"?ee.current[me]-h:ee.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(uc(Math.min(Math.max(ee.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(uc(Math.min(Math.max(H==="rtl"?ee.current[me]+h:ee.current[me]-h,l),c),ye),me,!0);break}}},lt={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Nt=Array.isArray(S);return _.jsx(vwe,{value:{getStyles:U},children:_.jsxs(pY,{...B,size:u,ref:t,disabled:A,children:[_.jsxs(mY,{offset:he[0],marksOffset:V[0],filled:he[1]-he[0],marks:y,inverted:D,min:l,max:c,value:V[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:E?()=>F(!0):void 0,onMouseLeave:E?()=>F(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:Ve},children:[_.jsx(ID,{...lt,value:R(V[0]),position:he[0],dragging:mt,label:typeof v=="function"?v(uc(R(V[0]),ye)):v,ref:qe=>{le.current[0]=qe},thumbLabel:x,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:E,isHovered:W,disabled:A,children:Nt?S[0]:S}),_.jsx(ID,{...lt,thumbLabel:C,value:R(V[1]),position:he[1],dragging:mt,label:typeof v=="function"?v(uc(R(V[1]),ye)):v,ref:qe=>{le.current[1]=qe},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:E,isHovered:W,disabled:A,children:Nt?S[1]:S})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:V[0],...j}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:V[1],...j})]})})});RD.classes=PL;RD.displayName="@mantine/core/RangeSlider";const RKe={},Wf=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",RKe,e);return _.jsx(ke,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Wf.displayName="@mantine/core/Space";var wwe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const NKe={maxHeight:100,initialState:!1},PKe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),gY=je((e,t)=>{const n=xe("Spoiler",NKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=gt({name:"Spoiler",classes:wwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PKe}),b=al(g),w=`${b}-region`,[x,C]=I.useState(l),{ref:E,height:S}=vUe(),A=x?f:d,k=A!==null&&c<S;return _.jsxs(ke,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(Db,{component:"button",type:"button",ref:p,onClick:()=>C(R=>!R),"aria-expanded":x,"aria-controls":w,...v("control"),children:A}),_.jsx("div",{...v("content",{style:{maxHeight:x?S?Ee(S):void 0:Ee(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:E,children:h})})]})});gY.classes=wwe;gY.displayName="@mantine/core/Spoiler";var Ewe={root:"m_6d731127"};const OKe={gap:"md",align:"stretch",justify:"flex-start"},DKe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Ml(t),"--stack-align":n,"--stack-justify":r}}),Di=je((e,t)=>{const n=xe("Stack",OKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=gt({name:"Stack",props:n,classes:Ewe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DKe});return _.jsx(ke,{ref:t,...p("root"),variant:d,...h})});Di.classes=Ewe;Di.displayName="@mantine/core/Stack";const[$Ke,MKe]=ka("Table component was not found in the tree");var VI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function LKe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function $b(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=MKe();return _.jsx(ke,{component:e,ref:s,...LKe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=VI,r}const pU=$b("th",{columnBorder:!0}),xwe=$b("td",{columnBorder:!0}),GP=$b("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Swe=$b("thead",{stickyHeader:!0}),Twe=$b("tbody"),Cwe=$b("tfoot"),Awe=$b("caption",{captionSide:!0});function yY({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(Awe,{children:e.caption}),e.head&&_.jsx(Swe,{children:_.jsx(GP,{children:e.head.map((t,n)=>_.jsx(pU,{children:t},n))})}),e.body&&_.jsx(Twe,{children:e.body.map((t,n)=>_.jsx(GP,{children:t.map((r,i)=>_.jsx(xwe,{children:r},i))},n))}),e.foot&&_.jsx(Cwe,{children:_.jsx(GP,{children:e.foot.map((t,n)=>_.jsx(pU,{children:t},n))})})]})}yY.displayName="@mantine/core/TableDataRenderer";const FKe={type:"scrollarea"},jKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ee(t),"--table-overflow":n==="native"?"auto":void 0}}),vY=je((e,t)=>{const n=xe("TableScrollContainer",FKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=gt({name:"TableScrollContainer",classes:VI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jKe,rootSelector:"scrollContainer"});return _.jsx(ke,{component:f==="scrollarea"?Mx:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});vY.classes=VI;vY.displayName="@mantine/core/TableScrollContainer";const BKe={withRowBorders:!0,verticalSpacing:7},UKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Ml(r),"--table-vertical-spacing":Ml(i),"--table-border-color":s?ai(s,e):void 0,"--table-striped-color":u&&o?ai(o,e):void 0,"--table-highlight-on-hover-color":l&&a?ai(a,e):void 0,"--table-sticky-header-offset":f?Ee(c):void 0}}),Xl=je((e,t)=>{const n=xe("Table",BKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:x,data:C,children:E,stickyHeader:S,stickyHeaderOffset:A,mod:k,...R}=n,D=gt({name:"Table",props:n,className:i,style:s,classes:VI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:UKe});return _.jsx($Ke,{value:{getStyles:D,stickyHeader:S,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(ke,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":v},k],...D("table"),...R,children:E||!!C&&_.jsx(yY,{data:C})})})});Xl.classes=VI;Xl.displayName="@mantine/core/Table";Xl.Td=xwe;Xl.Th=pU;Xl.Tr=GP;Xl.Thead=Swe;Xl.Tbody=Twe;Xl.Tfoot=Cwe;Xl.Caption=Awe;Xl.ScrollContainer=vY;Xl.DataRenderer=yY;const[zKe,bY]=ka("Tabs component was not found in the tree");var HI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const VKe={},_Y=je((e,t)=>{const n=xe("TabsList",VKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=bY();return _.jsx(ke,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});_Y.classes=HI;_Y.displayName="@mantine/core/TabsList";const HKe={},wY=je((e,t)=>{const n=xe("TabsPanel",HKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=bY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(ke,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});wY.classes=HI;wY.displayName="@mantine/core/TabsPanel";const qKe={},EY=je((e,t)=>{const n=xe("TabsTab",qKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Us(),{dir:b}=np(),w=bY(),x=a===w.value,C=S=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(S)},E={classNames:h,styles:p,props:n};return _.jsxs(co,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...E}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:x,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":x,tabIndex:x||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:C,__vars:{"--tabs-color":f?ai(f,v):void 0},onKeyDown:J1e({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",E),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",E),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",E),"data-position":"right",children:s})]})});EY.classes=HI;EY.displayName="@mantine/core/TabsTab";const fae="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",WKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},GKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":fi(t),"--tabs-color":ai(n,e),"--tabs-text-color":Dx(r,e)?Py({color:n,theme:e,autoContrast:r}):void 0}}),Fa=je((e,t)=>{const n=xe("Tabs",WKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:x,style:C,vars:E,autoContrast:S,mod:A,...k}=n,R=al(l),[D,P]=Bo({value:i,defaultValue:r,finalValue:null,onChange:s}),O=gt({name:"Tabs",props:n,classes:HI,className:x,style:C,classNames:v,styles:b,unstyled:w,vars:E,varsResolver:GKe});return _.jsx(zKe,{value:{placement:g,value:D,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:aoe(`${R}-tab`,fae),getPanelId:aoe(`${R}-panel`,fae),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:O},children:_.jsx(ke,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...O("root"),...k,children:a})})});Fa.classes=HI;Fa.displayName="@mantine/core/Tabs";Fa.Tab=EY;Fa.Panel=wY;Fa.List=_Y;const YKe={},hm=je((e,t)=>{const n=xe("TextInput",YKe,e);return _.jsx(Yc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});hm.classes=Yc.classes;hm.displayName="@mantine/core/TextInput";const KKe=["h1","h2","h3","h4","h5","h6"];function XKe(e,t){const n=t!==void 0?t:`h${e}`;return KKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ee(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Iwe={root:"m_8a5d1357"};const QKe={order:1},JKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=XKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ls=je((e,t)=>{const n=xe("Title",QKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=gt({name:"Title",props:n,classes:Iwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:JKe});return[1,2,3,4,5,6].includes(u)?_.jsx(ke,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ls.classes=Iwe;ls.displayName="@mantine/core/Title";const kwe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),js=()=>I.useContext(kwe);function ZKe({children:e}){const[t,n]=Cr.useState(void 0),r=Cr.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(kwe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cA.apply(this,arguments)}var s0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(s0||(s0={}));const dae="popstate";function eXe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return mU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ND(i)}return nXe(t,n,null,e)}function ds(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tXe(){return Math.random().toString(36).substr(2,8)}function hae(e,t){return{usr:e.state,key:e.key,idx:t}}function mU(e,t,n,r){return n===void 0&&(n=null),cA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?qx(t):t,{state:n,key:t&&t.key||r||tXe()})}function ND(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function qx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function nXe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=s0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(cA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=s0.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=s0.Push;let v=mU(m.location,g,y);l=c()+1;let b=hae(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=s0.Replace;let v=mU(m.location,g,y);l=c();let b=hae(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:ND(g);return v=v.replace(/ $/,"%20"),ds(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(dae,f),u=g,()=>{i.removeEventListener(dae,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var pae;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pae||(pae={}));function rXe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?qx(t):t,i=xY(r.pathname||"/",n);if(i==null)return null;let s=Nwe(e);iXe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=gXe(i);o=hXe(s[a],u)}return o}function Nwe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ds(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=C0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ds(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Nwe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:fXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Pwe(s.path))i(s,o,u)}),t}function Pwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Pwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function iXe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:dXe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sXe=/^:[\w-]+$/,oXe=3,aXe=2,uXe=1,lXe=10,cXe=-2,mae=e=>e==="*";function fXe(e,t){let n=e.split("/"),r=n.length;return n.some(mae)&&(r+=cXe),t&&(r+=aXe),n.filter(i=>!mae(i)).reduce((i,s)=>i+(sXe.test(s)?oXe:s===""?uXe:lXe),r)}function dXe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function hXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=pXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:C0([i,c.pathname]),pathnameBase:_Xe(C0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=C0([i,c.pathnameBase]))}return s}function pXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=mXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function mXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Rwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function gXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Rwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function xY(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function yXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?qx(e):e;return{pathname:n?n.startsWith("/")?n:vXe(n,t):t,search:wXe(r),hash:EXe(i)}}function vXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Q8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function SY(e,t){let n=bXe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=qx(e):(i=cA({},e),ds(!i.pathname||!i.pathname.includes("?"),Q8("?","pathname","search",i)),ds(!i.pathname||!i.pathname.includes("#"),Q8("#","pathname","hash",i)),ds(!i.search||!i.search.includes("#"),Q8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=yXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const C0=e=>e.join("/").replace(/\/\/+/g,"/"),_Xe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Owe=["post","put","patch","delete"];new Set(Owe);const SXe=["get",...Owe];new Set(SXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fA(){return fA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fA.apply(this,arguments)}const CY=I.createContext(null),TXe=I.createContext(null),My=I.createContext(null),DL=I.createContext(null),sp=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Dwe=I.createContext(null);function $we(e,t){let{relative:n}=t===void 0?{}:t;Wx()||ds(!1);let{basename:r,navigator:i}=I.useContext(My),{hash:s,pathname:o,search:a}=Lwe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:C0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Wx(){return I.useContext(DL)!=null}function ig(){return Wx()||ds(!1),I.useContext(DL).location}function Mwe(e){I.useContext(My).static||I.useLayoutEffect(e)}function Xc(){let{isDataRoute:e}=I.useContext(sp);return e?jXe():CXe()}function CXe(){Wx()||ds(!1);let e=I.useContext(CY),{basename:t,future:n,navigator:r}=I.useContext(My),{matches:i}=I.useContext(sp),{pathname:s}=ig(),o=JSON.stringify(SY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Mwe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=TY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:C0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const AXe=I.createContext(null);function IXe(e){let t=I.useContext(sp).outlet;return t&&I.createElement(AXe.Provider,{value:e},t)}function Nm(){let{matches:e}=I.useContext(sp),t=e[e.length-1];return t?t.params:{}}function Lwe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(My),{matches:i}=I.useContext(sp),{pathname:s}=ig(),o=JSON.stringify(SY(i,r.v7_relativeSplatPath));return I.useMemo(()=>TY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Fwe(e,t){return kXe(e,t)}function kXe(e,t,n,r){Wx()||ds(!1);let{navigator:i}=I.useContext(My),{matches:s}=I.useContext(sp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=ig(),c;if(t){var f;let g=typeof t=="string"?qx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ds(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=rXe(e,{pathname:h}),m=DXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:C0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:C0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(DL.Provider,{value:{location:fA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:s0.Pop}},m):m}function RXe(){let e=FXe(),t=xXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const NXe=I.createElement(RXe,null);class PXe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(sp.Provider,{value:this.props.routeContext},I.createElement(Dwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OXe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(CY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(sp.Provider,{value:t},r)}function DXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ds(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||NXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(OXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(PXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var jwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jwe||{}),PD=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(PD||{});function $Xe(e){let t=I.useContext(CY);return t||ds(!1),t}function MXe(e){let t=I.useContext(TXe);return t||ds(!1),t}function LXe(e){let t=I.useContext(sp);return t||ds(!1),t}function Bwe(e){let t=LXe(),n=t.matches[t.matches.length-1];return n.route.id||ds(!1),n.route.id}function FXe(){var e;let t=I.useContext(Dwe),n=MXe(PD.UseRouteError),r=Bwe(PD.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function jXe(){let{router:e}=$Xe(jwe.UseNavigateStable),t=Bwe(PD.UseNavigateStable),n=I.useRef(!1);return Mwe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,fA({fromRouteId:t},s)))},[e,t])}function AY(e){let{to:t,replace:n,state:r,relative:i}=e;Wx()||ds(!1);let{future:s,static:o}=I.useContext(My),{matches:a}=I.useContext(sp),{pathname:u}=ig(),l=Xc(),c=TY(t,SY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function BXe(e){return IXe(e.context)}function $p(e){ds(!1)}function UXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=s0.Pop,navigator:s,static:o=!1,future:a}=e;Wx()&&ds(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:fA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=qx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=xY(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(My.Provider,{value:l},I.createElement(DL.Provider,{children:n,value:m}))}function zXe(e){let{children:t,location:n}=e;return Fwe(gU(t),n)}new Promise(()=>{});function gU(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,gU(r.props.children,s));return}r.type!==$p&&ds(!1),!r.props.index||!r.props.children||ds(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yU(){return yU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yU.apply(this,arguments)}function VXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function HXe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function qXe(e,t){return e.button===0&&(!t||t==="_self")&&!HXe(e)}function vU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function WXe(e,t){let n=vU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const GXe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],YXe="6";try{window.__reactRouterVersion=YXe}catch{}const KXe="startTransition",gae=Uye[KXe];function XXe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=eXe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&gae?gae(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(UXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const QXe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JXe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZXe=I.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=t,d=VXe(t,GXe),{basename:h}=I.useContext(My),p,m=!1;if(typeof l=="string"&&JXe.test(l)&&(p=l,QXe))try{let b=new URL(window.location.href),w=l.startsWith("//")?new URL(b.protocol+l):new URL(l),x=xY(w.pathname,h);w.origin===b.origin&&x!=null?l=x+w.search+w.hash:m=!0}catch{}let g=$we(l,{relative:i}),y=eQe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||y(b)}return I.createElement("a",yU({},d,{href:p||g,onClick:m||s?r:v,ref:n,target:u}))});var yae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yae||(yae={}));var vae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vae||(vae={}));function eQe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=Xc(),l=ig(),c=Lwe(e,{relative:o});return I.useCallback(f=>{if(qXe(f,n)){f.preventDefault();let d=r!==void 0?r:ND(l)===ND(c);u(e,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function IY(e){let t=I.useRef(vU(e)),n=I.useRef(!1),r=ig(),i=I.useMemo(()=>WXe(r.search,n.current?null:t.current),[r.search]),s=Xc(),o=I.useCallback((a,u)=>{const l=vU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const kY=I.createContext(null);kY.displayName="@mantine/modals/ModalsContext";function tQe(){const e=I.useContext(kY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function nQe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=tQe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(ke,{mb:"md",children:l}),_.jsxs(nr,{justify:"flex-end",...o,children:[_.jsx(_n,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(_n,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[rQe,$L]=TUe("mantine-modals");$L("openModal");$L("closeModal");$L("closeAllModals");const bU=$L("openConfirmModal");function bae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function iQe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;bae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{bae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function sQe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function oQe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(iQe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||ZC();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||ZC();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||ZC();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);rQe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=sQe(g.props);return{modalProps:y,content:_.jsx(nQe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(kY.Provider,{value:d,children:[_.jsx(Ss,{zIndex:qc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}var Uwe={exports:{}},aQe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uQe=aQe,lQe=uQe;function zwe(){}function Vwe(){}Vwe.resetWarningCache=zwe;var cQe=function(){function e(r,i,s,o,a,u){if(u!==lQe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Vwe,resetWarningCache:zwe};return n.PropTypes=n,n};Uwe.exports=cQe();var fQe=Uwe.exports;const Ut=Ho(fQe);var dQe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},hQe=Object.defineProperty,pQe=Object.defineProperties,mQe=Object.getOwnPropertyDescriptors,OD=Object.getOwnPropertySymbols,Hwe=Object.prototype.hasOwnProperty,qwe=Object.prototype.propertyIsEnumerable,_ae=(e,t,n)=>t in e?hQe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wae=(e,t)=>{for(var n in t||(t={}))Hwe.call(t,n)&&_ae(e,n,t[n]);if(OD)for(var n of OD(t))qwe.call(t,n)&&_ae(e,n,t[n]);return e},gQe=(e,t)=>pQe(e,mQe(t)),yQe=(e,t)=>{var n={};for(var r in e)Hwe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OD)for(var r of OD(e))t.indexOf(r)<0&&qwe.call(e,r)&&(n[r]=e[r]);return n},Ar=(e,t,n)=>{const r=I.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=yQe(o,["color","size","stroke","children"]);return I.createElement("svg",wae(gQe(wae({ref:s},dQe),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>I.createElement(d,h)),...c||[]])});return r.propTypes={color:Ut.string,size:Ut.oneOfType([Ut.string,Ut.number]),stroke:Ut.oneOfType([Ut.string,Ut.number])},r.displayName=`${t}`,r},vQe=Ar("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Eae=Ar("alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),bQe=Ar("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),_Qe=Ar("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),wQe=Ar("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),EQe=Ar("ballpen-filled","IconBallpenFilled",[["path",{d:"M17.828 2a3 3 0 0 1 1.977 .743l.145 .136l1.171 1.17a3 3 0 0 1 .136 4.1l-.136 .144l-1.706 1.707l2.292 2.293a1 1 0 0 1 .083 1.32l-.083 .094l-4 4a1 1 0 0 1 -1.497 -1.32l.083 -.094l3.292 -3.293l-1.586 -1.585l-7.464 7.464a3.828 3.828 0 0 1 -2.474 1.114l-.233 .008c-.674 0 -1.33 -.178 -1.905 -.508l-1.216 1.214a1 1 0 0 1 -1.497 -1.32l.083 -.094l1.214 -1.216a3.828 3.828 0 0 1 .454 -4.442l.16 -.17l10.586 -10.586a3 3 0 0 1 1.923 -.873l.198 -.006zm0 2a1 1 0 0 0 -.608 .206l-.099 .087l-1.707 1.707l2.586 2.585l1.707 -1.706a1 1 0 0 0 .284 -.576l.01 -.131a1 1 0 0 0 -.207 -.609l-.087 -.099l-1.171 -1.171a1 1 0 0 0 -.708 -.293z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),xQe=Ar("brand-google","IconBrandGoogle",[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]]),SQe=Ar("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),TQe=Ar("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),CQe=Ar("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),AQe=Ar("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),IQe=Ar("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),kQe=Ar("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),RQe=Ar("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),NQe=Ar("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),PQe=Ar("layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]),OQe=Ar("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),DQe=Ar("minus-vertical","IconMinusVertical",[["path",{d:"M12 5v14",key:"svg-0"}]]),$Qe=Ar("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),Wwe=Ar("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),MQe=Ar("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),LQe=Ar("refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),FQe=Ar("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),jQe=Ar("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),Gwe=Ar("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Ywe=Ar("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),BQe=Ar("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),Kwe=Ar("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),Xwe=Ar("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),Qwe=Ar("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function Jwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const op="/ThinkAloud/",xae=["http","https","mailto","tel"];function UQe(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<xae.length;){const s=xae[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var zQe=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const RY=Ho(zQe);function Mw(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Sae(e.position):"start"in e||"end"in e?Sae(e):"line"in e||"column"in e?_U(e):""}function _U(e){return Tae(e&&e.line)+":"+Tae(e&&e.column)}function Sae(e){return _U(e&&e.start)+"-"+_U(e&&e.end)}function Tae(e){return e&&typeof e=="number"?e:1}let Qc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Mw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Qc.prototype.file="";Qc.prototype.name="";Qc.prototype.reason="";Qc.prototype.message="";Qc.prototype.stack="";Qc.prototype.fatal=null;Qc.prototype.column=null;Qc.prototype.line=null;Qc.prototype.source=null;Qc.prototype.ruleId=null;Qc.prototype.position=null;const Ud={basename:VQe,dirname:HQe,extname:qQe,join:WQe,sep:"/"};function VQe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function HQe(e){if(qI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function qQe(e){qI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function WQe(...e){let t=-1,n;for(;++t<e.length;)qI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":GQe(n)}function GQe(e){qI(e);const t=e.charCodeAt(0)===47;let n=YQe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function YQe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function qI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const KQe={cwd:XQe};function XQe(){return"/"}function wU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function QQe(e){if(typeof e=="string")e=new URL(e);else if(!wU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return JQe(e)}function JQe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const J8=["history","path","basename","stem","extname","dirname"];let ZQe=class{constructor(t){let n;t?typeof t=="string"||eJe(t)?n={value:t}:wU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=KQe.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<J8.length;){const s=J8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)J8.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){wU(t)&&(t=QQe(t)),ej(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Ud.dirname(this.path):void 0}set dirname(t){Cae(this.basename,"dirname"),this.path=Ud.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Ud.basename(this.path):void 0}set basename(t){ej(t,"basename"),Z8(t,"basename"),this.path=Ud.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Ud.extname(this.path):void 0}set extname(t){if(Z8(t,"extname"),Cae(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ud.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Ud.basename(this.path,this.extname):void 0}set stem(t){ej(t,"stem"),Z8(t,"stem"),this.path=Ud.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Qc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function Z8(e,t){if(e&&e.includes(Ud.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ud.sep+"`")}function ej(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Cae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function eJe(e){return RY(e)}function Aae(e){if(e)throw e}var YP=Object.prototype.hasOwnProperty,Zwe=Object.prototype.toString,Iae=Object.defineProperty,kae=Object.getOwnPropertyDescriptor,Rae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Zwe.call(t)==="[object Array]"},Nae=function(t){if(!t||Zwe.call(t)!=="[object Object]")return!1;var n=YP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&YP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||YP.call(t,i)},Pae=function(t,n){Iae&&n.name==="__proto__"?Iae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Oae=function(t,n){if(n==="__proto__")if(YP.call(t,n)){if(kae)return kae(t,n).value}else return;return t[n]},tJe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Oae(a,n),i=Oae(t,n),a!==i&&(c&&i&&(Nae(i)||(s=Rae(i)))?(s?(s=!1,o=r&&Rae(r)?r:[]):o=r&&Nae(r)?r:{},Pae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Pae(a,{name:n,newValue:i}));return a};const Dae=Ho(tJe);function EU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function nJe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?rJe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function rJe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class Jc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Mw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Jc.prototype.file="";Jc.prototype.name="";Jc.prototype.reason="";Jc.prototype.message="";Jc.prototype.stack="";Jc.prototype.fatal=null;Jc.prototype.column=null;Jc.prototype.line=null;Jc.prototype.source=null;Jc.prototype.ruleId=null;Jc.prototype.position=null;const zd={basename:iJe,dirname:sJe,extname:oJe,join:aJe,sep:"/"};function iJe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');WI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function sJe(e){if(WI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function oJe(e){WI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function aJe(...e){let t=-1,n;for(;++t<e.length;)WI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":uJe(n)}function uJe(e){WI(e);const t=e.charCodeAt(0)===47;let n=lJe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function lJe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function WI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const cJe={cwd:fJe};function fJe(){return"/"}function xU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function dJe(e){if(typeof e=="string")e=new URL(e);else if(!xU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return hJe(e)}function hJe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const tj=["history","path","basename","stem","extname","dirname"];class pJe{constructor(t){let n;t?typeof t=="string"||mJe(t)?n={value:t}:xU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=cJe.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<tj.length;){const s=tj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)tj.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){xU(t)&&(t=dJe(t)),rj(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?zd.dirname(this.path):void 0}set dirname(t){$ae(this.basename,"dirname"),this.path=zd.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?zd.basename(this.path):void 0}set basename(t){rj(t,"basename"),nj(t,"basename"),this.path=zd.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?zd.extname(this.path):void 0}set extname(t){if(nj(t,"extname"),$ae(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zd.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?zd.basename(this.path,this.extname):void 0}set stem(t){rj(t,"stem"),nj(t,"stem"),this.path=zd.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Jc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function nj(e,t){if(e&&e.includes(zd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+zd.sep+"`")}function rj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function $ae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function mJe(e){return RY(e)}const gJe=tEe().freeze(),eEe={}.hasOwnProperty;function tEe(){const e=nJe(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=tEe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Dae(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(oj("data",r),n[m]=g,s):eEe.call(n,m)&&n[m]||null:m?(oj("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(oj("use",r),m!=null)if(typeof m=="function")x(m,...g);else if(typeof m=="object")Array.isArray(m)?w(m):b(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(C){if(typeof C=="function")x(C);else if(typeof C=="object")if(Array.isArray(C)){const[E,...S]=C;x(E,...S)}else b(C);else throw new TypeError("Expected usable value, not `"+C+"`")}function b(C){w(C.plugins),C.settings&&(y=Object.assign(y||{},C.settings))}function w(C){let E=-1;if(C!=null)if(Array.isArray(C))for(;++E<C.length;){const S=C[E];v(S)}else throw new TypeError("Expected a list of plugins, not `"+C+"`")}function x(C,E){let S=-1,A;for(;++S<t.length;)if(t[S][0]===C){A=t[S];break}A?(EU(A[1])&&EU(E)&&(E=Dae(!0,A[1],E)),A[1]=E):t.push([...arguments])}}function l(m){s.freeze();const g=lT(m),y=s.Parser;return ij("parse",y),Mae(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=lT(g),v=s.Compiler;return sj("stringify",v),Lae(m),Mae(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Lae(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(b,w){e.run(m,lT(g),x);function x(C,E,S){E=E||m,C?w(C):b?b(E):y(null,E,S)}}}function d(m,g){let y,v;return s.run(m,g,b),Fae("runSync","run",v),y;function b(w,x){Aae(w),y=x,v=!0}}function h(m,g){if(s.freeze(),ij("process",s.Parser),sj("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,b){const w=lT(m);s.run(s.parse(w),w,(C,E,S)=>{if(C||!E||!S)x(C);else{const A=s.stringify(E,S);A==null||(bJe(A)?S.value=A:S.result=A),x(C,S)}});function x(C,E){C||!E?b(C):v?v(E):g(null,E)}}}function p(m){let g;s.freeze(),ij("processSync",s.Parser),sj("processSync",s.Compiler);const y=lT(m);return s.process(y,v),Fae("processSync","process",g),y;function v(b){g=!0,Aae(b)}}}function Mae(e,t){return typeof e=="function"&&e.prototype&&(yJe(e.prototype)||t in e.prototype)}function yJe(e){let t;for(t in e)if(eEe.call(e,t))return!0;return!1}function ij(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function sj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function oj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Lae(e){if(!EU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Fae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function lT(e){return vJe(e)?e:new pJe(e)}function vJe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function bJe(e){return typeof e=="string"||RY(e)}const _Je={};function wJe(e,t){const n=_Je,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return nEe(e,r,i)}function nEe(e,t,n){if(EJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return jae(e.children,t,n)}return Array.isArray(e)?jae(e,t,n):""}function jae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=nEe(e[i],t,n);return r.join("")}function EJe(e){return!!(e&&typeof e=="object")}function $h(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function dc(e,t){return e.length>0?($h(e,e.length,0,t),e):t}const Bae={}.hasOwnProperty;function xJe(e){const t={};let n=-1;for(;++n<e.length;)SJe(t,e[n]);return t}function SJe(e,t){let n;for(n in t){const i=(Bae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Bae.call(i,o)||(i[o]=[]);const a=s[o];TJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function TJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);$h(e,0,0,r)}const CJe=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Jd=Ly(/[A-Za-z]/),Al=Ly(/[\dA-Za-z]/),AJe=Ly(/[#-'*+\--9=?A-Z^-~]/);function SU(e){return e!==null&&(e<32||e===127)}const TU=Ly(/\d/),IJe=Ly(/[\dA-Fa-f]/),kJe=Ly(/[!-/:-@[-`{-~]/);function tn(e){return e!==null&&e<-2}function qu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const RJe=Ly(CJe),NJe=Ly(/\s/);function Ly(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function oi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const PJe={tokenize:OJe};function OJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),oi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return tn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const DJe={tokenize:$Je},Uae={tokenize:MJe};function $Je(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let x=w,C;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){C=t.events[x][1].end;break}y(r);let E=w;for(;E<t.events.length;)t.events[E][1].end=Object.assign({},C),E++;return $h(t.events,x+1,0,t.events.slice(w)),t.events.length=E,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Uae,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Uae,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return tn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const x=t.sliceStream(b);if(w&&x.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(x),t.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const E=t.events.length;let S=E,A,k;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){if(A){k=t.events[S][1].end;break}A=!0}for(y(r),C=E;C<t.events.length;)t.events[C][1].end=Object.assign({},k),C++;$h(t.events,S+1,0,t.events.slice(E)),t.events.length=C}}function y(b){let w=n.length;for(;w-- >b;){const x=n[w];t.containerState=x[1],x[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function MJe(e,t,n){return oi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function zae(e){if(e===null||qu(e)||NJe(e))return 1;if(RJe(e))return 2}function NY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const CU={name:"attention",tokenize:FJe,resolveAll:LJe};function LJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Vae(f,-u),Vae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=dc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=dc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=dc(l,NY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=dc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=dc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,$h(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function FJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=zae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=zae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Vae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const jJe={name:"autolink",tokenize:BJe};function BJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Jd(h)?(e.consume(h),o):l(h)}function o(h){return h===43||h===45||h===46||Al(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Al(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||SU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):AJe(h)?(e.consume(h),l):n(h)}function c(h){return Al(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Al(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const ML={tokenize:UJe,partial:!0};function UJe(e,t,n){return r;function r(s){return br(s)?oi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||tn(s)?t(s):n(s)}}const rEe={name:"blockQuote",tokenize:zJe,continuation:{tokenize:VJe},exit:HJe};function zJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function VJe(e,t,n){const r=this;return i;function i(o){return br(o)?oi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(rEe,t,n)(o)}}function HJe(e){e.exit("blockQuote")}const iEe={name:"characterEscape",tokenize:qJe};function qJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return kJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Hae=document.createElement("i");function PY(e){const t="&"+e+";";Hae.innerHTML=t;const n=Hae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const sEe={name:"characterReference",tokenize:WJe};function WJe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Al,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=IJe,c):(e.enter("characterReferenceValue"),s=7,o=TU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Al&&!PY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const qae={tokenize:YJe,partial:!0},Wae={name:"codeFenced",tokenize:GJe,concrete:!0};function GJe(e,t,n){const r=this,i={tokenize:x,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const E=r.events[r.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),br(C)?oi(e,f,"whitespace")(C):f(C))}function f(C){return C===null||tn(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(qae,m,w)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||tn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):br(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),oi(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||tn(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||tn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,w,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),y}function y(C){return s>0&&br(C)?oi(e,v,"linePrefix",s+1)(C):v(C)}function v(C){return C===null||tn(C)?e.check(qae,m,w)(C):(e.enter("codeFlowValue"),b(C))}function b(C){return C===null||tn(C)?(e.exit("codeFlowValue"),v(C)):(e.consume(C),b)}function w(C){return e.exit("codeFenced"),t(C)}function x(C,E,S){let A=0;return k;function k(L){return C.enter("lineEnding"),C.consume(L),C.exit("lineEnding"),R}function R(L){return C.enter("codeFencedFence"),br(L)?oi(C,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):D(L)}function D(L){return L===a?(C.enter("codeFencedFenceSequence"),P(L)):S(L)}function P(L){return L===a?(A++,C.consume(L),P):A>=o?(C.exit("codeFencedFenceSequence"),br(L)?oi(C,O,"whitespace")(L):O(L)):S(L)}function O(L){return L===null||tn(L)?(C.exit("codeFencedFence"),E(L)):S(L)}}}function YJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const aj={name:"codeIndented",tokenize:XJe},KJe={tokenize:QJe,partial:!0};function XJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),oi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):tn(l)?e.attempt(KJe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||tn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function QJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):oi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):tn(o)?i(o):n(o)}}const JJe={name:"codeText",tokenize:tZe,resolve:ZJe,previous:eZe};function ZJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function eZe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tZe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):tn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||tn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function oEe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,nZe(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),$h(e,i,n-i+1,a))}}return!l}function nZe(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),$h(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const rZe={tokenize:oZe,resolve:sZe},iZe={tokenize:aZe,partial:!0};function sZe(e){return oEe(e),e}function oZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):tn(a)?e.check(iZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function aZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),oi(e,s,"linePrefix")}function s(o){if(o===null||tn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function aEe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||SU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||tn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||qu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||SU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function uEe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):tn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||tn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function lEe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):tn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),oi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||tn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function e2(e,t){let n;return r;function r(i){return tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?oi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function Lw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const uZe={name:"definition",tokenize:cZe},lZe={tokenize:fZe,partial:!0};function cZe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return uEe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Lw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return qu(h)?e2(e,l)(h):l(h)}function l(h){return aEe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(lZe,f,f)(h)}function f(h){return br(h)?oi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||tn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function fZe(e,t,n){return r;function r(a){return qu(a)?e2(e,i)(a):n(a)}function i(a){return lEe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?oi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||tn(a)?t(a):n(a)}}const dZe={name:"hardBreakEscape",tokenize:hZe};function hZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return tn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const pZe={name:"headingAtx",tokenize:gZe,resolve:mZe};function mZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},$h(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function gZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||qu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||tn(c)?(e.exit("atxHeading"),t(c)):br(c)?oi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||qu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const yZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gae=["pre","script","style","textarea"],vZe={name:"htmlFlow",tokenize:EZe,resolveTo:wZe,concrete:!0},bZe={tokenize:SZe,partial:!0},_Ze={tokenize:xZe,partial:!0};function wZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function EZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(F){return c(F)}function c(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),f}function f(F){return F===33?(e.consume(F),d):F===47?(e.consume(F),s=!0,m):F===63?(e.consume(F),i=3,r.interrupt?t:$):Jd(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function d(F){return F===45?(e.consume(F),i=2,h):F===91?(e.consume(F),i=5,a=0,p):Jd(F)?(e.consume(F),i=4,r.interrupt?t:$):n(F)}function h(F){return F===45?(e.consume(F),r.interrupt?t:$):n(F)}function p(F){const V="CDATA[";return F===V.charCodeAt(a++)?(e.consume(F),a===V.length?r.interrupt?t:D:p):n(F)}function m(F){return Jd(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function g(F){if(F===null||F===47||F===62||qu(F)){const V=F===47,G=o.toLowerCase();return!V&&!s&&Gae.includes(G)?(i=1,r.interrupt?t(F):D(F)):yZe.includes(o.toLowerCase())?(i=6,V?(e.consume(F),y):r.interrupt?t(F):D(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):s?v(F):b(F))}return F===45||Al(F)?(e.consume(F),o+=String.fromCharCode(F),g):n(F)}function y(F){return F===62?(e.consume(F),r.interrupt?t:D):n(F)}function v(F){return br(F)?(e.consume(F),v):k(F)}function b(F){return F===47?(e.consume(F),k):F===58||F===95||Jd(F)?(e.consume(F),w):br(F)?(e.consume(F),b):k(F)}function w(F){return F===45||F===46||F===58||F===95||Al(F)?(e.consume(F),w):x(F)}function x(F){return F===61?(e.consume(F),C):br(F)?(e.consume(F),x):b(F)}function C(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),u=F,E):br(F)?(e.consume(F),C):S(F)}function E(F){return F===u?(e.consume(F),u=null,A):F===null||tn(F)?n(F):(e.consume(F),E)}function S(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||qu(F)?x(F):(e.consume(F),S)}function A(F){return F===47||F===62||br(F)?b(F):n(F)}function k(F){return F===62?(e.consume(F),R):n(F)}function R(F){return F===null||tn(F)?D(F):br(F)?(e.consume(F),R):n(F)}function D(F){return F===45&&i===2?(e.consume(F),j):F===60&&i===1?(e.consume(F),B):F===62&&i===4?(e.consume(F),z):F===63&&i===3?(e.consume(F),$):F===93&&i===5?(e.consume(F),H):tn(F)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(bZe,W,P)(F)):F===null||tn(F)?(e.exit("htmlFlowData"),P(F)):(e.consume(F),D)}function P(F){return e.check(_Ze,O,W)(F)}function O(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),L}function L(F){return F===null||tn(F)?P(F):(e.enter("htmlFlowData"),D(F))}function j(F){return F===45?(e.consume(F),$):D(F)}function B(F){return F===47?(e.consume(F),o="",U):D(F)}function U(F){if(F===62){const V=o.toLowerCase();return Gae.includes(V)?(e.consume(F),z):D(F)}return Jd(F)&&o.length<8?(e.consume(F),o+=String.fromCharCode(F),U):D(F)}function H(F){return F===93?(e.consume(F),$):D(F)}function $(F){return F===62?(e.consume(F),z):F===45&&i===2?(e.consume(F),$):D(F)}function z(F){return F===null||tn(F)?(e.exit("htmlFlowData"),W(F)):(e.consume(F),z)}function W(F){return e.exit("htmlFlow"),t(F)}}function xZe(e,t,n){const r=this;return i;function i(o){return tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function SZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ML,t,n)}}const TZe={name:"htmlText",tokenize:CZe};function CZe(e,t,n){const r=this;let i,s,o;return a;function a($){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume($),u}function u($){return $===33?(e.consume($),l):$===47?(e.consume($),x):$===63?(e.consume($),b):Jd($)?(e.consume($),S):n($)}function l($){return $===45?(e.consume($),c):$===91?(e.consume($),s=0,p):Jd($)?(e.consume($),v):n($)}function c($){return $===45?(e.consume($),h):n($)}function f($){return $===null?n($):$===45?(e.consume($),d):tn($)?(o=f,B($)):(e.consume($),f)}function d($){return $===45?(e.consume($),h):f($)}function h($){return $===62?j($):$===45?d($):f($)}function p($){const z="CDATA[";return $===z.charCodeAt(s++)?(e.consume($),s===z.length?m:p):n($)}function m($){return $===null?n($):$===93?(e.consume($),g):tn($)?(o=m,B($)):(e.consume($),m)}function g($){return $===93?(e.consume($),y):m($)}function y($){return $===62?j($):$===93?(e.consume($),y):m($)}function v($){return $===null||$===62?j($):tn($)?(o=v,B($)):(e.consume($),v)}function b($){return $===null?n($):$===63?(e.consume($),w):tn($)?(o=b,B($)):(e.consume($),b)}function w($){return $===62?j($):b($)}function x($){return Jd($)?(e.consume($),C):n($)}function C($){return $===45||Al($)?(e.consume($),C):E($)}function E($){return tn($)?(o=E,B($)):br($)?(e.consume($),E):j($)}function S($){return $===45||Al($)?(e.consume($),S):$===47||$===62||qu($)?A($):n($)}function A($){return $===47?(e.consume($),j):$===58||$===95||Jd($)?(e.consume($),k):tn($)?(o=A,B($)):br($)?(e.consume($),A):j($)}function k($){return $===45||$===46||$===58||$===95||Al($)?(e.consume($),k):R($)}function R($){return $===61?(e.consume($),D):tn($)?(o=R,B($)):br($)?(e.consume($),R):A($)}function D($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),i=$,P):tn($)?(o=D,B($)):br($)?(e.consume($),D):(e.consume($),O)}function P($){return $===i?(e.consume($),i=void 0,L):$===null?n($):tn($)?(o=P,B($)):(e.consume($),P)}function O($){return $===null||$===34||$===39||$===60||$===61||$===96?n($):$===47||$===62||qu($)?A($):(e.consume($),O)}function L($){return $===47||$===62||qu($)?A($):n($)}function j($){return $===62?(e.consume($),e.exit("htmlTextData"),e.exit("htmlText"),t):n($)}function B($){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),U}function U($){return br($)?oi(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):H($)}function H($){return e.enter("htmlTextData"),o($)}}const OY={name:"labelEnd",tokenize:PZe,resolveTo:NZe,resolveAll:RZe},AZe={tokenize:OZe},IZe={tokenize:DZe},kZe={tokenize:$Ze};function RZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function NZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=dc(a,e.slice(s+1,s+r+3)),a=dc(a,[["enter",c,t]]),a=dc(a,NY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=dc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=dc(a,e.slice(o+1)),a=dc(a,[["exit",u,t]]),$h(e,s,e.length,a),e}function PZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Lw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(AZe,c,o?c:f)(d):d===91?e.attempt(IZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(kZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function OZe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return qu(f)?e2(e,s)(f):s(f)}function s(f){return f===41?c(f):aEe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return qu(f)?e2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?lEe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return qu(f)?e2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function DZe(e,t,n){const r=this;return i;function i(a){return uEe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Lw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function $Ze(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const MZe={name:"labelStartImage",tokenize:LZe,resolveAll:OY.resolveAll};function LZe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const FZe={name:"labelStartLink",tokenize:jZe,resolveAll:OY.resolveAll};function jZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const uj={name:"lineEnding",tokenize:BZe};function BZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),oi(e,t,"linePrefix")}}const KP={name:"thematicBreak",tokenize:UZe};function UZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||tn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?oi(e,a,"whitespace")(l):a(l))}}const _u={name:"list",tokenize:HZe,continuation:{tokenize:qZe},exit:GZe},zZe={tokenize:YZe,partial:!0},VZe={tokenize:WZe,partial:!0};function HZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:TU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(KP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return TU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(ML,r.interrupt?n:c,e.attempt(zZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function qZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ML,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,oi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(VZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,oi(e,e.attempt(_u,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function WZe(e,t,n){const r=this;return oi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function GZe(e){e.exit(this.containerState.type)}function YZe(e,t,n){const r=this;return oi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Yae={name:"setextUnderline",tokenize:XZe,resolveTo:KZe};function KZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function XZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?oi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||tn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const QZe={tokenize:JZe};function JZe(e){const t=this,n=e.attempt(ML,r,e.attempt(this.parser.constructs.flowInitial,i,oi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(rZe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const ZZe={resolveAll:fEe()},eet=cEe("string"),tet=cEe("text");function cEe(e){return{tokenize:t,resolveAll:fEe(e==="text"?net:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function fEe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function net(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function ret(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:E(x),check:E(C),interrupt:E(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=dc(o,R),g(),o[o.length-1]!==null?[]:(S(t,0),l.events=NY(s,l.events,l),l.events)}function d(R,D){return set(h(R),D)}function h(R){return iet(o,R)}function p(){const{line:R,column:D,offset:P,_index:O,_bufferIndex:L}=r;return{line:R,column:D,offset:P,_index:O,_bufferIndex:L}}function m(R){i[R.line]=R.column,k()}function g(){let R;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(R){c=c(R)}function v(R){tn(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,k()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,D){const P=D||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(R){const D=a.pop();return D.end=p(),l.events.push(["exit",D,l]),D}function x(R,D){S(R,D.from)}function C(R,D){D.restore()}function E(R,D){return P;function P(O,L,j){let B,U,H,$;return Array.isArray(O)?W(O):"tokenize"in O?W([O]):z(O);function z(ee){return le;function le(de){const he=de!==null&&ee[de],ye=de!==null&&ee.null,Ce=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ce)(de)}}function W(ee){return B=ee,U=0,ee.length===0?j:F(ee[U])}function F(ee){return le;function le(de){return $=A(),H=ee,ee.partial||(l.currentConstruct=ee),ee.name&&l.parser.constructs.disable.null.includes(ee.name)?G():ee.tokenize.call(D?Object.assign(Object.create(l),D):l,u,V,G)(de)}}function V(ee){return R(H,$),L}function G(ee){return $.restore(),++U<B.length?F(B[U]):j}}}function S(R,D){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&$h(l.events,D,l.events.length-D,R.resolve(l.events.slice(D),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function A(){const R=p(),D=l.previous,P=l.currentConstruct,O=l.events.length,L=Array.from(a);return{restore:j,from:O};function j(){r=R,l.previous=D,l.currentConstruct=P,l.events.length=O,a=L,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function iet(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function set(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const oet={42:_u,43:_u,45:_u,48:_u,49:_u,50:_u,51:_u,52:_u,53:_u,54:_u,55:_u,56:_u,57:_u,62:rEe},aet={91:uZe},uet={[-2]:aj,[-1]:aj,32:aj},cet={35:pZe,42:KP,45:[Yae,KP],60:vZe,61:Yae,95:KP,96:Wae,126:Wae},fet={38:sEe,92:iEe},det={[-5]:uj,[-4]:uj,[-3]:uj,33:MZe,38:sEe,42:CU,60:[jJe,TZe],91:FZe,92:[dZe,iEe],93:OY,95:CU,96:JJe},het={null:[CU,ZZe]},pet={null:[42,95]},met={null:[]},get=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:pet,contentInitial:aet,disable:met,document:oet,flow:cet,flowInitial:uet,insideSpan:het,string:fet,text:det},Symbol.toStringTag,{value:"Module"}));function yet(e){const n=xJe([get,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(PJe),document:i(DJe),flow:i(QZe),string:i(eet),text:i(tet)};return r;function i(s){return o;function o(a){return ret(r,s,a)}}}const Kae=/[\0\t\n\r]/g;function vet(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Kae.lastIndex=f,l=Kae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function bet(e){for(;!oEe(e););return e}function dEe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const _et=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function wet(e){return e.replace(_et,Eet)}function Eet(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return dEe(n.slice(s?2:1),s?16:10)}return PY(n)||e}const hEe={}.hasOwnProperty,xet=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Tet(n)(bet(yet(n).document().write(vet()(e,t,!0))))};function Tet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(lt),autolinkProtocol:R,autolinkEmail:R,atxHeading:a(it),blockQuote:a(Ce),characterEscape:R,characterReference:R,codeFenced:a(ve),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(ve,u),codeText:a(Ye,u),codeTextData:R,data:R,codeFlowValue:R,definition:a(Ue),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(mt),hardBreakEscape:a(be),hardBreakTrailing:a(be),htmlFlow:a(Ae,u),htmlFlowData:R,htmlText:a(Ae,u),htmlTextData:R,image:a(Ve),label:u,link:a(lt),listItem:a(qe),listItemValue:p,listOrdered:a(Nt,h),listUnordered:a(Nt),paragraph:a(me),reference:G,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(it),strong:a(ft),thematicBreak:a(Et)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:ye,autolinkProtocol:he,blockQuote:c(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:le,characterReferenceMarkerNumeric:le,characterReferenceValue:de,codeFenced:c(v),codeFencedFence:y,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:D,codeIndented:c(b),codeText:c(B),codeTextData:D,data:D,definition:c(),definitionDestinationString:C,definitionLabelString:w,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(O),hardBreakTrailing:c(O),htmlFlow:c(L),htmlFlowData:D,htmlText:c(j),htmlTextData:D,image:c(H),label:z,labelText:$,lineEnding:P,link:c(U),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ee,resourceDestinationString:W,resourceTitleString:F,resource:V,setextHeading:c(k),setextHeadingLineSequence:A,setextHeadingText:S,strong:c(),thematicBreak:c()}};pEe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ie={type:"root",children:[]};const Ke={stack:[Ie],tokenStack:[],config:t,enter:l,exit:f,buffer:u,resume:d,setData:s,getData:o},bt=[];let Vt=-1;for(;++Vt<pe.length;)if(pe[Vt][1].type==="listOrdered"||pe[Vt][1].type==="listUnordered")if(pe[Vt][0]==="enter")bt.push(Vt);else{const rr=bt.pop();Vt=i(pe,rr,Vt)}for(Vt=-1;++Vt<pe.length;){const rr=t[pe[Vt][0]];hEe.call(rr,pe[Vt][1].type)&&rr[pe[Vt][1].type].call(Object.assign({sliceSerialize:pe[Vt][2].sliceSerialize},Ke),pe[Vt][1])}if(Ke.tokenStack.length>0){const rr=Ke.tokenStack[Ke.tokenStack.length-1];(rr[1]||Xae).call(Ke,void 0,rr[0])}for(Ie.position={start:xg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:xg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},Vt=-1;++Vt<t.transforms.length;)Ie=t.transforms[Vt](Ie)||Ie;return Ie}function i(pe,Ie,Ke){let bt=Ie-1,Vt=-1,rr=!1,qn,Ln,yn,yr;for(;++bt<=Ke;){const Qt=pe[bt];if(Qt[1].type==="listUnordered"||Qt[1].type==="listOrdered"||Qt[1].type==="blockQuote"?(Qt[0]==="enter"?Vt++:Vt--,yr=void 0):Qt[1].type==="lineEndingBlank"?Qt[0]==="enter"&&(qn&&!yr&&!Vt&&!yn&&(yn=bt),yr=void 0):Qt[1].type==="linePrefix"||Qt[1].type==="listItemValue"||Qt[1].type==="listItemMarker"||Qt[1].type==="listItemPrefix"||Qt[1].type==="listItemPrefixWhitespace"||(yr=void 0),!Vt&&Qt[0]==="enter"&&Qt[1].type==="listItemPrefix"||Vt===-1&&Qt[0]==="exit"&&(Qt[1].type==="listUnordered"||Qt[1].type==="listOrdered")){if(qn){let Wr=bt;for(Ln=void 0;Wr--;){const ei=pe[Wr];if(ei[1].type==="lineEnding"||ei[1].type==="lineEndingBlank"){if(ei[0]==="exit")continue;Ln&&(pe[Ln][1].type="lineEndingBlank",rr=!0),ei[1].type="lineEnding",Ln=Wr}else if(!(ei[1].type==="linePrefix"||ei[1].type==="blockQuotePrefix"||ei[1].type==="blockQuotePrefixWhitespace"||ei[1].type==="blockQuoteMarker"||ei[1].type==="listItemIndent"))break}yn&&(!Ln||yn<Ln)&&(qn._spread=!0),qn.end=Object.assign({},Ln?pe[Ln][1].start:Qt[1].end),pe.splice(Ln||bt,0,["exit",qn,Qt[2]]),bt++,Ke++}Qt[1].type==="listItemPrefix"&&(qn={type:"listItem",_spread:!1,start:Object.assign({},Qt[1].start),end:void 0},pe.splice(bt,0,["enter",qn,Qt[2]]),bt++,Ke++,yn=void 0,yr=!0)}}return pe[Ie][1]._spread=rr,Ke}function s(pe,Ie){n[pe]=Ie}function o(pe){return n[pe]}function a(pe,Ie){return Ke;function Ke(bt){l.call(this,pe(bt),bt),Ie&&Ie.call(this,bt)}}function u(){this.stack.push({type:"fragment",children:[]})}function l(pe,Ie,Ke){return this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ie,Ke]),pe.position={start:xg(Ie.start)},pe}function c(pe){return Ie;function Ie(Ke){pe&&pe.call(this,Ke),f.call(this,Ke)}}function f(pe,Ie){const Ke=this.stack.pop(),bt=this.tokenStack.pop();if(bt)bt[0].type!==pe.type&&(Ie?Ie.call(this,pe,bt[0]):(bt[1]||Xae).call(this,pe,bt[0]));else throw new Error("Cannot close `"+pe.type+"` ("+Mw({start:pe.start,end:pe.end})+"): its not open");return Ke.position.end=xg(pe.end),Ke}function d(){return wJe(this.stack.pop())}function h(){s("expectingFirstListItemValue",!0)}function p(pe){if(o("expectingFirstListItemValue")){const Ie=this.stack[this.stack.length-2];Ie.start=Number.parseInt(this.sliceSerialize(pe),10),s("expectingFirstListItemValue")}}function m(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.lang=pe}function g(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.meta=pe}function y(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function v(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe.replace(/(\r?\n|\r)$/g,"")}function w(pe){const Ie=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=Ie,Ke.identifier=Lw(this.sliceSerialize(pe)).toLowerCase()}function x(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.title=pe}function C(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.url=pe}function E(pe){const Ie=this.stack[this.stack.length-1];if(!Ie.depth){const Ke=this.sliceSerialize(pe).length;Ie.depth=Ke}}function S(){s("setextHeadingSlurpLineEnding",!0)}function A(pe){const Ie=this.stack[this.stack.length-1];Ie.depth=this.sliceSerialize(pe).charCodeAt(0)===61?1:2}function k(){s("setextHeadingSlurpLineEnding")}function R(pe){const Ie=this.stack[this.stack.length-1];let Ke=Ie.children[Ie.children.length-1];(!Ke||Ke.type!=="text")&&(Ke=yt(),Ke.position={start:xg(pe.start)},Ie.children.push(Ke)),this.stack.push(Ke)}function D(pe){const Ie=this.stack.pop();Ie.value+=this.sliceSerialize(pe),Ie.position.end=xg(pe.end)}function P(pe){const Ie=this.stack[this.stack.length-1];if(o("atHardBreak")){const Ke=Ie.children[Ie.children.length-1];Ke.position.end=xg(pe.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Ie.type)&&(R.call(this,pe),D.call(this,pe))}function O(){s("atHardBreak",!0)}function L(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe}function j(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe}function B(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe}function U(){const pe=this.stack[this.stack.length-1];if(o("inReference")){const Ie=o("referenceType")||"shortcut";pe.type+="Reference",pe.referenceType=Ie,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;s("referenceType")}function H(){const pe=this.stack[this.stack.length-1];if(o("inReference")){const Ie=o("referenceType")||"shortcut";pe.type+="Reference",pe.referenceType=Ie,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;s("referenceType")}function $(pe){const Ie=this.sliceSerialize(pe),Ke=this.stack[this.stack.length-2];Ke.label=wet(Ie),Ke.identifier=Lw(Ie).toLowerCase()}function z(){const pe=this.stack[this.stack.length-1],Ie=this.resume(),Ke=this.stack[this.stack.length-1];if(s("inReference",!0),Ke.type==="link"){const bt=pe.children;Ke.children=bt}else Ke.alt=Ie}function W(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.url=pe}function F(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.title=pe}function V(){s("inReference")}function G(){s("referenceType","collapsed")}function ee(pe){const Ie=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=Ie,Ke.identifier=Lw(this.sliceSerialize(pe)).toLowerCase(),s("referenceType","full")}function le(pe){s("characterReferenceType",pe.type)}function de(pe){const Ie=this.sliceSerialize(pe),Ke=o("characterReferenceType");let bt;Ke?(bt=dEe(Ie,Ke==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):bt=PY(Ie);const Vt=this.stack.pop();Vt.value+=bt,Vt.position.end=xg(pe.end)}function he(pe){D.call(this,pe);const Ie=this.stack[this.stack.length-1];Ie.url=this.sliceSerialize(pe)}function ye(pe){D.call(this,pe);const Ie=this.stack[this.stack.length-1];Ie.url="mailto:"+this.sliceSerialize(pe)}function Ce(){return{type:"blockquote",children:[]}}function ve(){return{type:"code",lang:null,meta:null,value:""}}function Ye(){return{type:"inlineCode",value:""}}function Ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function mt(){return{type:"emphasis",children:[]}}function it(){return{type:"heading",depth:void 0,children:[]}}function be(){return{type:"break"}}function Ae(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function lt(){return{type:"link",title:null,url:"",children:[]}}function Nt(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function qe(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function ft(){return{type:"strong",children:[]}}function yt(){return{type:"text",value:""}}function Et(){return{type:"thematicBreak"}}}function xg(e){return{line:e.line,column:e.column,offset:e.offset}}function pEe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?pEe(e,r):Cet(e,r)}}function Cet(e,t){let n;for(n in t)if(hEe.call(t,n)){if(n==="canContainEols"){const r=t[n];r&&e[n].push(...r)}else if(n==="transforms"){const r=t[n];r&&e[n].push(...r)}else if(n==="enter"||n==="exit"){const r=t[n];r&&Object.assign(e[n],r)}}}function Xae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Mw({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Mw({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Mw({start:t.start,end:t.end})+") is still open")}function Aet(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return xet(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function Iet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function ket(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Ret(e,t){const n=t.value?t.value+`
`:"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function Net(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Pet(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Gx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Al(e.charCodeAt(n+1))&&Al(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function mEe(e,t){const n=String(t.identifier).toUpperCase(),r=Gx(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n],a={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,a);const u={type:"element",tagName:"sup",properties:{},children:[a]};return e.patch(t,u),e.applyData(t,u)}function Oet(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},mEe(e,{type:"footnoteReference",identifier:i,position:t.position})}function Det(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $et(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null}function gEe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+r};const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Met(e,t){const n=e.definition(t.identifier);if(!n)return gEe(e,t);const r={src:Gx(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,i),e.applyData(t,i)}function Let(e,t){const n={src:Gx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Fet(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function jet(e,t){const n=e.definition(t.identifier);if(!n)return gEe(e,t);const r={href:Gx(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function Bet(e,t){const n={href:Gx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Uet(e,t,n){const r=e.all(t),i=n?zet(n):yEe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function zet(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=yEe(n[r])}return t}function yEe(e){const t=e.spread;return t??e.children.length>1}function Vet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Het(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qet(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Wet(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const DY=vEe("start"),$Y=vEe("end");function Get(e){return{start:DY(e),end:$Y(e)}}function vEe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function Yet(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=DY(t.children[1]),u=$Y(t.children[t.children.length-1]);a.line&&u.line&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Ket(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(t,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Xet(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Qae=9,Jae=32;function Qet(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Zae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Zae(t.slice(i),i>0,!1)),s.join("")}function Zae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Qae||s===Jae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Qae||s===Jae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Jet(e,t){const n={type:"text",value:Qet(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Zet(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const ett={blockquote:Iet,break:ket,code:Ret,delete:Net,emphasis:Pet,footnoteReference:mEe,footnote:Oet,heading:Det,html:$et,imageReference:Met,image:Let,inlineCode:Fet,linkReference:jet,link:Bet,listItem:Uet,list:Vet,paragraph:Het,root:qet,strong:Wet,table:Yet,tableCell:Xet,tableRow:Ket,text:Jet,thematicBreak:Zet,toml:aN,yaml:aN,definition:aN,footnoteDefinition:aN};function aN(){return null}const bEe=function(e){if(e==null)return itt;if(typeof e=="string")return rtt(e);if(typeof e=="object")return Array.isArray(e)?ttt(e):ntt(e);if(typeof e=="function")return LL(e);throw new Error("Expected function, string, or object as test")};function ttt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=bEe(e[n]);return LL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function ntt(e){return LL(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function rtt(e){return LL(t);function t(n){return n&&n.type===e}}function LL(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function itt(){return!0}const stt=!0,eue=!1,ott="skip",att=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=bEe(t),s=r?-1:1;o(e,void 0,[])();function o(a,u,l){const c=a&&typeof a=="object"?a:{};if(typeof c.type=="string"){const d=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=[],h,p,m;if((!t||i(a,u,l[l.length-1]||null))&&(d=utt(n(a,l)),d[0]===eue))return d;if(a.children&&d[0]!==ott)for(p=(r?a.children.length:-1)+s,m=l.concat(a);p>-1&&p<a.children.length;){if(h=o(a.children[p],p,m)(),h[0]===eue)return h;p=typeof h[1]=="number"?h[1]:p+s}return d}}};function utt(e){return Array.isArray(e)?e:typeof e=="number"?[stt,e]:[e]}const MY=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),att(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}};function ltt(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const tue={}.hasOwnProperty;function ctt(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return MY(e,"definition",r=>{const i=nue(r.identifier);i&&!tue.call(t,i)&&(t[i]=r)}),n;function n(r){const i=nue(r);return i&&tue.call(t,i)?t[i]:null}}function nue(e){return String(e||"").toUpperCase()}const DD={}.hasOwnProperty;function ftt(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,o.handlers={...ett,...n.handlers},o.definition=ctt(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.patch=dtt,o.applyData=htt,o.one=a,o.all=u,o.wrap=mtt,o.augment=s,MY(e,"footnoteDefinition",l=>{const c=String(l.identifier).toUpperCase();DD.call(i,c)||(i[c]=l)}),o;function s(l,c){if(l&&"data"in l&&l.data){const f=l.data;f.hName&&(c.type!=="element"&&(c={type:"element",tagName:"",properties:{},children:[]}),c.tagName=f.hName),c.type==="element"&&f.hProperties&&(c.properties={...c.properties,...f.hProperties}),"children"in c&&c.children&&f.hChildren&&(c.children=f.hChildren)}if(l){const f="type"in l?l:{position:l};ltt(f)||(c.position={start:DY(f),end:$Y(f)})}return c}function o(l,c,f,d){return Array.isArray(f)&&(d=f,f={}),s(l,{type:"element",tagName:c,properties:f||{},children:d||[]})}function a(l,c){return _Ee(o,l,c)}function u(l){return LY(o,l)}}function dtt(e,t){e.position&&(t.position=Get(e))}function htt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;typeof r=="string"&&(n.type==="element"?n.tagName=r:n={type:"element",tagName:r,properties:{},children:[]}),n.type==="element"&&s&&(n.properties={...n.properties,...s}),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function _Ee(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return DD.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:LY(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):ptt(e,t)}function LY(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=_Ee(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}function ptt(e,t){const n=t.data||{},r="value"in t&&!(DD.call(n,"hProperties")||DD.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:LY(e,t)};return e.patch(t,r),e.applyData(t,r)}function mtt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function gtt(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const i=e.all(r),s=String(r.identifier).toUpperCase(),o=Gx(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:e.wrap(i,!0)};e.patch(r,c),t.push(c)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function wEe(e,t){const n=ftt(e,t),r=n.one(e,null),i=gtt(n);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const ytt=function(e,t){return e&&"run"in e?vtt(e,t):btt(e||t)};function vtt(e,t){return(n,r,i)=>{e.run(wEe(n,t),r,s=>{i(s)})}}function btt(e){return t=>wEe(t,e)}let GI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};GI.prototype.property={};GI.prototype.normal={};GI.prototype.space=null;function EEe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new GI(n,r,t)}function dA(e){return e.toLowerCase()}let Zc=class{constructor(t,n){this.property=t,this.attribute=n}};Zc.prototype.space=null;Zc.prototype.boolean=!1;Zc.prototype.booleanish=!1;Zc.prototype.overloadedBoolean=!1;Zc.prototype.number=!1;Zc.prototype.commaSeparated=!1;Zc.prototype.spaceSeparated=!1;Zc.prototype.commaOrSpaceSeparated=!1;Zc.prototype.mustUseProperty=!1;Zc.prototype.defined=!1;let _tt=0;const vn=Mb(),bs=Mb(),xEe=Mb(),nt=Mb(),ii=Mb(),Fw=Mb(),ml=Mb();function Mb(){return 2**++_tt}const AU=Object.freeze(Object.defineProperty({__proto__:null,boolean:vn,booleanish:bs,commaOrSpaceSeparated:ml,commaSeparated:Fw,number:nt,overloadedBoolean:xEe,spaceSeparated:ii},Symbol.toStringTag,{value:"Module"})),lj=Object.keys(AU);class FY extends Zc{constructor(t,n,r,i){let s=-1;if(super(t,n),rue(this,"space",i),typeof r=="number")for(;++s<lj.length;){const o=lj[s];rue(this,lj[s],(r&AU[o])===AU[o])}}}FY.prototype.defined=!0;function rue(e,t,n){n&&(e[t]=n)}const wtt={}.hasOwnProperty;function Yx(e){const t={},n={};let r;for(r in e.properties)if(wtt.call(e.properties,r)){const i=e.properties[r],s=new FY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[dA(r)]=r,n[dA(s.attribute)]=r}return new GI(t,n,e.space)}const SEe=Yx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),TEe=Yx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function CEe(e,t){return t in e?e[t]:t}function AEe(e,t){return CEe(e,t.toLowerCase())}const IEe=Yx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:AEe,properties:{xmlns:null,xmlnsXLink:null}}),kEe=Yx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:bs,ariaAutoComplete:null,ariaBusy:bs,ariaChecked:bs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ii,ariaCurrent:null,ariaDescribedBy:ii,ariaDetails:null,ariaDisabled:bs,ariaDropEffect:ii,ariaErrorMessage:null,ariaExpanded:bs,ariaFlowTo:ii,ariaGrabbed:bs,ariaHasPopup:null,ariaHidden:bs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ii,ariaLevel:nt,ariaLive:null,ariaModal:bs,ariaMultiLine:bs,ariaMultiSelectable:bs,ariaOrientation:null,ariaOwns:ii,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:bs,ariaReadOnly:bs,ariaRelevant:null,ariaRequired:bs,ariaRoleDescription:ii,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:bs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),Ett=Yx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:AEe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Fw,acceptCharset:ii,accessKey:ii,action:null,allow:null,allowFullScreen:vn,allowPaymentRequest:vn,allowUserMedia:vn,alt:null,as:null,async:vn,autoCapitalize:null,autoComplete:ii,autoFocus:vn,autoPlay:vn,blocking:ii,capture:null,charSet:null,checked:vn,cite:null,className:ii,cols:nt,colSpan:null,content:null,contentEditable:bs,controls:vn,controlsList:ii,coords:nt|Fw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vn,defer:vn,dir:null,dirName:null,disabled:vn,download:xEe,draggable:bs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vn,formTarget:null,headers:ii,height:nt,hidden:vn,high:nt,href:null,hrefLang:null,htmlFor:ii,httpEquiv:ii,id:null,imageSizes:null,imageSrcSet:null,inert:vn,inputMode:null,integrity:null,is:null,isMap:vn,itemId:null,itemProp:ii,itemRef:ii,itemScope:vn,itemType:ii,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:vn,muted:vn,name:null,nonce:null,noModule:vn,noValidate:vn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vn,optimum:nt,pattern:null,ping:ii,placeholder:null,playsInline:vn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vn,referrerPolicy:null,rel:ii,required:vn,reversed:vn,rows:nt,rowSpan:nt,sandbox:ii,scope:null,scoped:vn,seamless:vn,selected:vn,shadowRootClonable:vn,shadowRootDelegatesFocus:vn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:bs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:vn,useMap:null,value:bs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ii,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vn,declare:vn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:vn,noHref:vn,noShade:vn,noWrap:vn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:bs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vn,disableRemotePlayback:vn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),xtt=Yx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:CEe,properties:{about:ml,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ii,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:vn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Fw,g2:Fw,glyphName:Fw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:ml,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ii,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ml,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ml,rev:ml,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ml,requiredFeatures:ml,requiredFonts:ml,requiredFormats:ml,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:ml,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ml,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ml,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Stt=/^data[-\w.:]+$/i,iue=/-[a-z]/g,Ttt=/[A-Z]/g;function FL(e,t){const n=dA(t);let r=t,i=Zc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Stt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(iue,Att);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!iue.test(s)){let o=s.replace(Ttt,Ctt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=FY}return new i(r,t)}function Ctt(e){return"-"+e.toLowerCase()}function Att(e){return e.charAt(1).toUpperCase()}const sue={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},YI=EEe([TEe,SEe,IEe,kEe,Ett],"html"),Kx=EEe([TEe,SEe,IEe,kEe,xtt],"svg");function Itt(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{MY(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var REe={exports:{}},Mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jY=Symbol.for("react.element"),BY=Symbol.for("react.portal"),jL=Symbol.for("react.fragment"),BL=Symbol.for("react.strict_mode"),UL=Symbol.for("react.profiler"),zL=Symbol.for("react.provider"),VL=Symbol.for("react.context"),ktt=Symbol.for("react.server_context"),HL=Symbol.for("react.forward_ref"),qL=Symbol.for("react.suspense"),WL=Symbol.for("react.suspense_list"),GL=Symbol.for("react.memo"),YL=Symbol.for("react.lazy"),Rtt=Symbol.for("react.offscreen"),NEe;NEe=Symbol.for("react.module.reference");function ef(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jY:switch(e=e.type,e){case jL:case UL:case BL:case qL:case WL:return e;default:switch(e=e&&e.$$typeof,e){case ktt:case VL:case HL:case YL:case GL:case zL:return e;default:return t}}case BY:return t}}}Mr.ContextConsumer=VL;Mr.ContextProvider=zL;Mr.Element=jY;Mr.ForwardRef=HL;Mr.Fragment=jL;Mr.Lazy=YL;Mr.Memo=GL;Mr.Portal=BY;Mr.Profiler=UL;Mr.StrictMode=BL;Mr.Suspense=qL;Mr.SuspenseList=WL;Mr.isAsyncMode=function(){return!1};Mr.isConcurrentMode=function(){return!1};Mr.isContextConsumer=function(e){return ef(e)===VL};Mr.isContextProvider=function(e){return ef(e)===zL};Mr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jY};Mr.isForwardRef=function(e){return ef(e)===HL};Mr.isFragment=function(e){return ef(e)===jL};Mr.isLazy=function(e){return ef(e)===YL};Mr.isMemo=function(e){return ef(e)===GL};Mr.isPortal=function(e){return ef(e)===BY};Mr.isProfiler=function(e){return ef(e)===UL};Mr.isStrictMode=function(e){return ef(e)===BL};Mr.isSuspense=function(e){return ef(e)===qL};Mr.isSuspenseList=function(e){return ef(e)===WL};Mr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jL||e===UL||e===BL||e===qL||e===WL||e===Rtt||typeof e=="object"&&e!==null&&(e.$$typeof===YL||e.$$typeof===GL||e.$$typeof===zL||e.$$typeof===VL||e.$$typeof===HL||e.$$typeof===NEe||e.getModuleId!==void 0)};Mr.typeOf=ef;REe.exports=Mr;var Ntt=REe.exports;const Ptt=Ho(Ntt);function Ott(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function oue(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function PEe(e){return e.join(" ").trim()}function aue(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function OEe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var UY={exports:{}},uue=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Dtt=/\n/g,$tt=/^\s*/,Mtt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ltt=/^:\s*/,Ftt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,jtt=/^[;\s]*/,Btt=/^\s+|\s+$/g,Utt=`
`,lue="/",cue="*",Bv="",ztt="comment",Vtt="declaration",Htt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(Dtt);m&&(n+=m.length);var g=p.lastIndexOf(Utt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u($tt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(lue!=e.charAt(0)||cue!=e.charAt(1))){for(var m=2;Bv!=e.charAt(m)&&(cue!=e.charAt(m)||lue!=e.charAt(m+1));)++m;if(m+=2,Bv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:ztt,comment:g})}}function d(){var p=s(),m=u(Mtt);if(m){if(f(),!u(Ltt))return a("property missing ':'");var g=u(Ftt),y=p({type:Vtt,property:fue(m[0].replace(uue,Bv)),value:g?fue(g[0].replace(uue,Bv)):Bv});return u(jtt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function fue(e){return e?e.replace(Btt,Bv):Bv}var qtt=Htt;function DEe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=qtt(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}UY.exports=DEe;UY.exports.default=DEe;var Wtt=UY.exports;const Gtt=Ho(Wtt),IU={}.hasOwnProperty,Ytt=new Set(["table","thead","tbody","tfoot","tr"]);function $Ee(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(Ktt(e,i,r,t)):i.type==="text"?(t.type!=="element"||!Ytt.has(t.tagName)||!Ott(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function Ktt(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?UQe:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=Kx,e.schema=l),t.properties)for(c in t.properties)IU.call(t.properties,c)&&Qtt(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=$Ee(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&IU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===Cr.Fragment;if(!Ptt.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=n,a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=Xtt(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=cj(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=ent(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=cj(r,t),u.siblingCount=cj(r)),p||(u.node=t),f.length>0?Cr.createElement(h,u,f):Cr.createElement(h,u)}function Xtt(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function cj(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function Qtt(e,t,n,r){const i=FL(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?OEe(s):PEe(s)),i.property==="style"&&typeof s=="string"&&(s=Jtt(s)),i.space&&i.property?e[IU.call(sue,i.property)?sue[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function Jtt(e){const t={};try{Gtt(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,Ztt)]=i}}function Ztt(e,t){return t.toUpperCase()}function ent(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const due={}.hasOwnProperty,tnt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uN={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function MEe(e){for(const s in uN)if(due.call(uN,s)&&due.call(e,s)){const o=uN[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${tnt}#${o.id}> for more info)`),delete uN[s]}const t=gJe().use(Aet).use(e.remarkPlugins||[]).use(ytt,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(Itt,e),n=new ZQe;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=Cr.createElement(Cr.Fragment,{},$Ee({options:e,schema:YI,listDepth:0},r));return e.className&&(i=Cr.createElement("div",{className:e.className},i)),i}MEe.propTypes={children:Ut.string,className:Ut.string,allowElement:Ut.func,allowedElements:Ut.arrayOf(Ut.string),disallowedElements:Ut.arrayOf(Ut.string),unwrapDisallowed:Ut.bool,remarkPlugins:Ut.arrayOf(Ut.oneOfType([Ut.object,Ut.func,Ut.arrayOf(Ut.oneOfType([Ut.bool,Ut.string,Ut.object,Ut.func,Ut.arrayOf(Ut.any)]))])),rehypePlugins:Ut.arrayOf(Ut.oneOfType([Ut.object,Ut.func,Ut.arrayOf(Ut.oneOfType([Ut.bool,Ut.string,Ut.object,Ut.func,Ut.arrayOf(Ut.any)]))])),sourcePos:Ut.bool,rawSourcePos:Ut.bool,skipHtml:Ut.bool,includeElementIndex:Ut.bool,transformLinkUri:Ut.oneOfType([Ut.func,Ut.bool]),linkTarget:Ut.oneOfType([Ut.func,Ut.string]),transformImageUri:Ut.func,components:Ut.object};const LEe=-1,KL=0,$D=1,MD=2,zY=3,VY=4,HY=5,qY=6,FEe=7,jEe=8,hue=typeof self=="object"?self:globalThis,nnt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case KL:case LEe:return n(o,i);case $D:{const a=n([],i);for(const u of o)a.push(r(u));return a}case MD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case zY:return n(new Date(o),i);case VY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case HY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case qY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case FEe:{const{name:a,message:u}=o;return n(new hue[a](u),i)}case jEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new hue[s](o),i)};return r},pue=e=>nnt(new Map,e)(0),__="",{toString:rnt}={},{keys:int}=Object,cT=e=>{const t=typeof e;if(t!=="object"||!e)return[KL,t];const n=rnt.call(e).slice(8,-1);switch(n){case"Array":return[$D,__];case"Object":return[MD,__];case"Date":return[zY,__];case"RegExp":return[VY,__];case"Map":return[HY,__];case"Set":return[qY,__]}return n.includes("Array")?[$D,n]:n.includes("Error")?[FEe,n]:[MD,n]},lN=([e,t])=>e===KL&&(t==="function"||t==="symbol"),snt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=cT(o);switch(a){case KL:{let c=o;switch(u){case"bigint":a=jEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([LEe],o)}return i([a,c],o)}case $D:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case MD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of int(o))(e||!lN(cT(o[d])))&&c.push([s(d),s(o[d])]);return f}case zY:return i([a,o.toISOString()],o);case VY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case HY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(lN(cT(d))||lN(cT(h))))&&c.push([s(d),s(h)]);return f}case qY:{const c=[],f=i([a,c],o);for(const d of o)(e||!lN(cT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},mue=(e,{json:t,lossy:n}={})=>{const r=[];return snt(!(t||n),!!t,new Map,r)(e),r},gue=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?pue(mue(e,t)):structuredClone(e):(e,t)=>pue(mue(e,t)),yue=/[#.]/g;function ont(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){yue.lastIndex=i;const a=yue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const ant=new Set(["button","menu","reset","submit"]),kU={}.hasOwnProperty;function BEe(e,t,n){const r=n&&fnt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=ont(s,t),l.tagName=l.tagName.toLowerCase(),r&&kU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),unt(o,l.tagName)){let c;for(c in o)kU.call(o,c)&&lnt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)RU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function unt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?ant.has(e.type.toLowerCase()):!("value"in e)}function lnt(e,t,n,r){const i=FL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=oue(r):i.commaSeparated?o=aue(r):i.commaOrSpaceSeparated?o=oue(aue(r).join(" ")):o=vue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?cnt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=vue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function RU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)RU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?RU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function vue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||dA(n)===dA(t)))return!0}return n}function cnt(e){const t=[];let n;for(n in e)kU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function fnt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const dnt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],hnt=BEe(YI,"div"),pnt=BEe(Kx,"g",dnt),fj=/\r?\n|\r/g;function mnt(e){const t=String(e),n=[];for(fj.lastIndex=0;fj.test(t);)n.push(fj.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const s1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},UEe={}.hasOwnProperty,gnt=Object.prototype;function ynt(e,t){const n=t||{};return WY({file:n.file||void 0,location:!1,schema:n.space==="svg"?Kx:YI,verbose:n.verbose||!1},e)}function WY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},XP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:zEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=mnt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},XP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},XP(e,r,n),n}default:return n=vnt(e,t),n}}function zEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=WY(e,t[n]);r.push(i)}return r}function vnt(e,t){const n=e.schema;e.schema=t.namespaceURI===s1.svg?Kx:YI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;UEe.call(gnt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?pnt:hnt)(t.tagName,i,zEe(e,t.childNodes));if(XP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&dw(u.startTag),c=u&&u.endTag&&dw(u.endTag),f=WY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function XP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=bnt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function bnt(e,t,n){const r=dw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)UEe.call(n.attrs,o)&&(s[FL(e.schema,o).property]=dw(n.attrs[o]));n.startTag;const a=dw(n.startTag),u=n.endTag?dw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function dw(e){const t=bue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=bue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function bue(e){return e.line&&e.column?e:void 0}const _ue={}.hasOwnProperty;function VEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&_ue.call(i,e)){const u=String(i[e]);o=_ue.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const _nt={},wnt={}.hasOwnProperty,HEe=VEe("type",{handlers:{root:xnt,element:Int,text:Cnt,comment:Ant,doctype:Tnt}});function Ent(e,t){const r=(t||_nt).space;return HEe(e,r==="svg"?Kx:YI)}function xnt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=GY(e.children,n,t),Xx(e,n),n}function Snt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=GY(e.children,n,t),Xx(e,n),n}function Tnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Xx(e,t),t}function Cnt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Xx(e,t),t}function Ant(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Xx(e,t),t}function Int(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Kx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&wnt.call(e.properties,s)){const u=knt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:s1[o],childNodes:[],parentNode:null};return a.childNodes=GY(e.children,a,r),Xx(e,a),e.tagName==="template"&&e.content&&(a.content=Snt(e.content,r)),a}function knt(e,t,n){const r=FL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?OEe(n):PEe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=s1[r.space]}return i}function GY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=HEe(e[r],n);s.parentNode=t,i.push(s)}return i}function Xx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Rnt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Nnt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),_i="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const yu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function qEe(e){return e>=55296&&e<=57343}function Pnt(e){return e>=56320&&e<=57343}function Ont(e,t){return(e-55296)*1024+9216+t}function WEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function GEe(e){return e>=64976&&e<=65007||Nnt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const Dnt=65536;class $nt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Dnt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Pnt(n))return this.pos++,this._addGap(),Ont(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,qEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){WEe(t)?this._err(Ne.controlCharacterInInputStream):GEe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var In;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(In=In||(In={}));function YEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Ng=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Mnt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var dj;const Lnt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Fnt=(dj=String.fromCodePoint)!==null&&dj!==void 0?dj:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function jnt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Lnt.get(e))!==null&&t!==void 0?t:e}var to;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(to||(to={}));const Bnt=32;var fh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(fh||(fh={}));function NU(e){return e>=to.ZERO&&e<=to.NINE}function Unt(e){return e>=to.UPPER_A&&e<=to.UPPER_F||e>=to.LOWER_A&&e<=to.LOWER_F}function znt(e){return e>=to.UPPER_A&&e<=to.UPPER_Z||e>=to.LOWER_A&&e<=to.LOWER_Z||NU(e)}function Vnt(e){return e===to.EQUALS||znt(e)}var Ys;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ys||(Ys={}));var Uv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Uv||(Uv={}));class Hnt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ys.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Uv.Strict}startEntity(t){this.decodeMode=t,this.state=Ys.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ys.EntityStart:return t.charCodeAt(n)===to.NUM?(this.state=Ys.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ys.NamedEntity,this.stateNamedEntity(t,n));case Ys.NumericStart:return this.stateNumericStart(t,n);case Ys.NumericDecimal:return this.stateNumericDecimal(t,n);case Ys.NumericHex:return this.stateNumericHex(t,n);case Ys.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Bnt)===to.LOWER_X?(this.state=Ys.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ys.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(NU(i)||Unt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(NU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===to.SEMI)this.consumed+=1;else if(this.decodeMode===Uv.Strict)return 0;return this.emitCodePoint(jnt(this.result),this.consumed),this.errors&&(t!==to.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&fh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=XEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Uv.Attribute&&(s===0||Vnt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&fh.VALUE_LENGTH)>>14,s!==0){if(o===to.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Uv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&fh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~fh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ys.NamedEntity:return this.result!==0&&(this.decodeMode!==Uv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ys.NumericDecimal:return this.emitNumericEntity(0,2);case Ys.NumericHex:return this.emitNumericEntity(0,3);case Ys.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ys.EntityStart:return 0}}}function KEe(e){let t="";const n=new Hnt(e,r=>t+=Fnt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function XEe(e,t,n,r){const i=(t&fh.BRANCH_LENGTH)>>7,s=t&fh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}KEe(Ng);KEe(Mnt);var Le;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Le=Le||(Le={}));var A0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(A0=A0||(A0={}));var _l;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(_l=_l||(_l={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const qnt=new Map([[we.A,N.A],[we.ADDRESS,N.ADDRESS],[we.ANNOTATION_XML,N.ANNOTATION_XML],[we.APPLET,N.APPLET],[we.AREA,N.AREA],[we.ARTICLE,N.ARTICLE],[we.ASIDE,N.ASIDE],[we.B,N.B],[we.BASE,N.BASE],[we.BASEFONT,N.BASEFONT],[we.BGSOUND,N.BGSOUND],[we.BIG,N.BIG],[we.BLOCKQUOTE,N.BLOCKQUOTE],[we.BODY,N.BODY],[we.BR,N.BR],[we.BUTTON,N.BUTTON],[we.CAPTION,N.CAPTION],[we.CENTER,N.CENTER],[we.CODE,N.CODE],[we.COL,N.COL],[we.COLGROUP,N.COLGROUP],[we.DD,N.DD],[we.DESC,N.DESC],[we.DETAILS,N.DETAILS],[we.DIALOG,N.DIALOG],[we.DIR,N.DIR],[we.DIV,N.DIV],[we.DL,N.DL],[we.DT,N.DT],[we.EM,N.EM],[we.EMBED,N.EMBED],[we.FIELDSET,N.FIELDSET],[we.FIGCAPTION,N.FIGCAPTION],[we.FIGURE,N.FIGURE],[we.FONT,N.FONT],[we.FOOTER,N.FOOTER],[we.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[we.FORM,N.FORM],[we.FRAME,N.FRAME],[we.FRAMESET,N.FRAMESET],[we.H1,N.H1],[we.H2,N.H2],[we.H3,N.H3],[we.H4,N.H4],[we.H5,N.H5],[we.H6,N.H6],[we.HEAD,N.HEAD],[we.HEADER,N.HEADER],[we.HGROUP,N.HGROUP],[we.HR,N.HR],[we.HTML,N.HTML],[we.I,N.I],[we.IMG,N.IMG],[we.IMAGE,N.IMAGE],[we.INPUT,N.INPUT],[we.IFRAME,N.IFRAME],[we.KEYGEN,N.KEYGEN],[we.LABEL,N.LABEL],[we.LI,N.LI],[we.LINK,N.LINK],[we.LISTING,N.LISTING],[we.MAIN,N.MAIN],[we.MALIGNMARK,N.MALIGNMARK],[we.MARQUEE,N.MARQUEE],[we.MATH,N.MATH],[we.MENU,N.MENU],[we.META,N.META],[we.MGLYPH,N.MGLYPH],[we.MI,N.MI],[we.MO,N.MO],[we.MN,N.MN],[we.MS,N.MS],[we.MTEXT,N.MTEXT],[we.NAV,N.NAV],[we.NOBR,N.NOBR],[we.NOFRAMES,N.NOFRAMES],[we.NOEMBED,N.NOEMBED],[we.NOSCRIPT,N.NOSCRIPT],[we.OBJECT,N.OBJECT],[we.OL,N.OL],[we.OPTGROUP,N.OPTGROUP],[we.OPTION,N.OPTION],[we.P,N.P],[we.PARAM,N.PARAM],[we.PLAINTEXT,N.PLAINTEXT],[we.PRE,N.PRE],[we.RB,N.RB],[we.RP,N.RP],[we.RT,N.RT],[we.RTC,N.RTC],[we.RUBY,N.RUBY],[we.S,N.S],[we.SCRIPT,N.SCRIPT],[we.SECTION,N.SECTION],[we.SELECT,N.SELECT],[we.SOURCE,N.SOURCE],[we.SMALL,N.SMALL],[we.SPAN,N.SPAN],[we.STRIKE,N.STRIKE],[we.STRONG,N.STRONG],[we.STYLE,N.STYLE],[we.SUB,N.SUB],[we.SUMMARY,N.SUMMARY],[we.SUP,N.SUP],[we.TABLE,N.TABLE],[we.TBODY,N.TBODY],[we.TEMPLATE,N.TEMPLATE],[we.TEXTAREA,N.TEXTAREA],[we.TFOOT,N.TFOOT],[we.TD,N.TD],[we.TH,N.TH],[we.THEAD,N.THEAD],[we.TITLE,N.TITLE],[we.TR,N.TR],[we.TRACK,N.TRACK],[we.TT,N.TT],[we.U,N.U],[we.UL,N.UL],[we.SVG,N.SVG],[we.VAR,N.VAR],[we.WBR,N.WBR],[we.XMP,N.XMP]]);function Qx(e){var t;return(t=qnt.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Qe=N,Wnt={[Le.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Le.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Le.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set};function QEe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const Gnt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const cs={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function t2(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function iC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Ynt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Pg(e){return Ynt(e)||iC(e)}function PU(e){return Pg(e)||t2(e)}function JEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function ZEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function Knt(e){return t2(e)||JEe(e)||ZEe(e)}function cN(e){return e+32}function exe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Xnt(e){return e===X.EQUALS_SIGN||PU(e)}function wue(e){return exe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Qnt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new $nt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:In.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:In.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:In.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:In.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(YEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Qx(t.tagName),t.type===In.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case In.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case In.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case In.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:In.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=exe(t)?In.WHITESPACE_CHARACTER:t===X.NULL?In.NULL_CHARACTER:In.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(In.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Ng[0];s>=0&&(s=XEe(Ng,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Ng[s];const a=o&fh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Xnt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Ng[s]&~fh.VALUE_LENGTH]:u===1?[Ng[++s]]:[Ng[++s],Ng[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Pg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Pg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=_i;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(iC(t)?cN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Pg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Pg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Pg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Pg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Pg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(yu.SCRIPT,!1)&&wue(this.preprocessor.peek(yu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_i);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(yu.SCRIPT,!1)&&wue(this.preprocessor.peek(yu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=_i;break}default:this.currentAttr.name+=String.fromCodePoint(iC(t)?cN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=_i;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=_i;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=_i;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=_i;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(yu.DASH_DASH,!0)?(this._createCommentToken(yu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(yu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(yu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(yu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(yu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=_i;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(iC(t))this._createDoctypeToken(String.fromCharCode(cN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(_i),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=_i;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(iC(t)?cN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(yu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(yu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=_i;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:PU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){PU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:t2(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Knt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){JEe(t)?this.charRefCode=this.charRefCode*16+t-55:ZEe(t)?this.charRefCode=this.charRefCode*16+t-87:t2(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){t2(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(qEe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(GEe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(WEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=Gnt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const txe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),Eue=new Set([...txe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),fN=new Map([[N.APPLET,Le.HTML],[N.CAPTION,Le.HTML],[N.HTML,Le.HTML],[N.MARQUEE,Le.HTML],[N.OBJECT,Le.HTML],[N.TABLE,Le.HTML],[N.TD,Le.HTML],[N.TEMPLATE,Le.HTML],[N.TH,Le.HTML],[N.ANNOTATION_XML,Le.MATHML],[N.MI,Le.MATHML],[N.MN,Le.MATHML],[N.MO,Le.MATHML],[N.MS,Le.MATHML],[N.MTEXT,Le.MATHML],[N.DESC,Le.SVG],[N.FOREIGN_OBJECT,Le.SVG],[N.TITLE,Le.SVG]]),Jnt=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],Znt=[N.TR,N.TEMPLATE,N.HTML],ert=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],trt=[N.TABLE,N.TEMPLATE,N.HTML],nrt=[N.TD,N.TH];class rrt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Le.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Jnt,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(nrt,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(trt,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(ert,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(Znt,Le.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(fN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(QEe(n)&&r===Le.HTML)return!0;if(fN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if((r===N.UL||r===N.OL)&&i===Le.HTML||fN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(r===N.BUTTON&&i===Le.HTML||fN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Le.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;txe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Eue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Eue.has(this.currentTagId);)this.pop()}}const hj=3;var Af;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Af=Af||(Af={}));const xue={type:Af.Marker};class irt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Af.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<hj)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<hj)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=hj&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(xue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Af.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Af.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(xue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Af.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Af.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Af.Element&&n.element===t)}}function Sue(e){return{nodeName:"#text",value:e,parentNode:null}}const V_={createDocument(){return{nodeName:"#document",mode:_l.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};V_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(V_.isTextNode(n)){n.value+=t;return}}V_.appendChild(e,Sue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&V_.isTextNode(r)?r.value+=t:V_.insertBefore(e,Sue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},nxe="html",srt="about:legacy-compat",ort="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",rxe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],art=[...rxe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],urt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),ixe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],lrt=[...ixe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Tue(e,t){return t.some(n=>e.startsWith(n))}function crt(e){return e.name===nxe&&e.publicId===null&&(e.systemId===null||e.systemId===srt)}function frt(e){if(e.name!==nxe)return _l.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===ort)return _l.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),urt.has(n))return _l.QUIRKS;let r=t===null?art:rxe;if(Tue(n,r))return _l.QUIRKS;if(r=t===null?ixe:lrt,Tue(n,r))return _l.LIMITED_QUIRKS}return _l.NO_QUIRKS}const Cue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},drt="definitionurl",hrt="definitionURL",prt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),mrt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Le.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),grt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),yrt=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function vrt(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===A0.COLOR||r===A0.SIZE||r===A0.FACE)||yrt.has(t)}function sxe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===drt){e.attrs[t].name=hrt;break}}function oxe(e){for(let t=0;t<e.attrs.length;t++){const n=prt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function YY(e){for(let t=0;t<e.attrs.length;t++){const n=mrt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function brt(e){const t=grt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Qx(e.tagName))}function _rt(e,t){return t===Le.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function wrt(e,t,n){if(t===Le.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===A0.ENCODING){const i=n[r].value.toLowerCase();return i===Cue.TEXT_HTML||i===Cue.APPLICATION_XML}}return t===Le.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function Ert(e,t,n,r){return(!r||r===Le.HTML)&&wrt(e,t,n)||(!r||r===Le.MATHML)&&_rt(e,t)}const xrt="hidden",Srt=8,Trt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Crt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},axe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),Aue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:V_,onParseError:null};let Iue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Aue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Qnt(this.options,this),this.activeFormattingElements=new irt(this.treeAdapter),this.fragmentContextID=r?Qx(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new rrt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Aue,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Le.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Le.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Crt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Le.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Le.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=cs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=cs.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=cs.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=cs.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=cs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Le.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Le.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===In.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Le.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Le.HTML)}_processToken(t){switch(t.type){case In.CHARACTER:{this.onCharacter(t);break}case In.NULL_CHARACTER:{this.onNullCharacter(t);break}case In.COMMENT:{this.onComment(t);break}case In.DOCTYPE:{this.onDoctype(t);break}case In.START_TAG:{this._processStartTag(t);break}case In.END_TAG:{this.onEndTag(t);break}case In.EOF:{this.onEof(t);break}case In.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Ert(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Af.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ie.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ie.IN_TABLE;return}case N.BODY:{this.insertionMode=ie.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return axe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Wnt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nst(this,t);return}switch(this.insertionMode){case ie.INITIAL:{fT(this,t);break}case ie.BEFORE_HTML:{n2(this,t);break}case ie.BEFORE_HEAD:{r2(this,t);break}case ie.IN_HEAD:{i2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{s2(this,t);break}case ie.AFTER_HEAD:{o2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{lxe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{pj(this,t);break}case ie.IN_TABLE_TEXT:{mxe(this,t);break}case ie.IN_COLUMN_GROUP:{LD(this,t);break}case ie.AFTER_BODY:{FD(this,t);break}case ie.AFTER_AFTER_BODY:{QP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){tst(this,t);return}switch(this.insertionMode){case ie.INITIAL:{fT(this,t);break}case ie.BEFORE_HTML:{n2(this,t);break}case ie.BEFORE_HEAD:{r2(this,t);break}case ie.IN_HEAD:{i2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{s2(this,t);break}case ie.AFTER_HEAD:{o2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{pj(this,t);break}case ie.IN_COLUMN_GROUP:{LD(this,t);break}case ie.AFTER_BODY:{FD(this,t);break}case ie.AFTER_AFTER_BODY:{QP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){OU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{OU(this,t);break}case ie.IN_TABLE_TEXT:{dT(this,t);break}case ie.AFTER_BODY:{Ort(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Drt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{$rt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{dT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?rst(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{fT(this,t);break}case ie.BEFORE_HTML:{Mrt(this,t);break}case ie.BEFORE_HEAD:{Frt(this,t);break}case ie.IN_HEAD:{pd(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Urt(this,t);break}case ie.AFTER_HEAD:{Vrt(this,t);break}case ie.IN_BODY:{Ra(this,t);break}case ie.IN_TABLE:{TE(this,t);break}case ie.IN_TABLE_TEXT:{dT(this,t);break}case ie.IN_CAPTION:{jit(this,t);break}case ie.IN_COLUMN_GROUP:{QY(this,t);break}case ie.IN_TABLE_BODY:{JL(this,t);break}case ie.IN_ROW:{ZL(this,t);break}case ie.IN_CELL:{zit(this,t);break}case ie.IN_SELECT:{vxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Hit(this,t);break}case ie.IN_TEMPLATE:{Wit(this,t);break}case ie.AFTER_BODY:{Yit(this,t);break}case ie.IN_FRAMESET:{Kit(this,t);break}case ie.AFTER_FRAMESET:{Qit(this,t);break}case ie.AFTER_AFTER_BODY:{Zit(this,t);break}case ie.AFTER_AFTER_FRAMESET:{est(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?ist(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{fT(this,t);break}case ie.BEFORE_HTML:{Lrt(this,t);break}case ie.BEFORE_HEAD:{jrt(this,t);break}case ie.IN_HEAD:{Brt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{zrt(this,t);break}case ie.AFTER_HEAD:{Hrt(this,t);break}case ie.IN_BODY:{QL(this,t);break}case ie.TEXT:{kit(this,t);break}case ie.IN_TABLE:{hA(this,t);break}case ie.IN_TABLE_TEXT:{dT(this,t);break}case ie.IN_CAPTION:{Bit(this,t);break}case ie.IN_COLUMN_GROUP:{Uit(this,t);break}case ie.IN_TABLE_BODY:{DU(this,t);break}case ie.IN_ROW:{yxe(this,t);break}case ie.IN_CELL:{Vit(this,t);break}case ie.IN_SELECT:{bxe(this,t);break}case ie.IN_SELECT_IN_TABLE:{qit(this,t);break}case ie.IN_TEMPLATE:{Git(this,t);break}case ie.AFTER_BODY:{wxe(this,t);break}case ie.IN_FRAMESET:{Xit(this,t);break}case ie.AFTER_FRAMESET:{Jit(this,t);break}case ie.AFTER_AFTER_BODY:{QP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{fT(this,t);break}case ie.BEFORE_HTML:{n2(this,t);break}case ie.BEFORE_HEAD:{r2(this,t);break}case ie.IN_HEAD:{i2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{s2(this,t);break}case ie.AFTER_HEAD:{o2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{hxe(this,t);break}case ie.TEXT:{Rit(this,t);break}case ie.IN_TABLE_TEXT:{dT(this,t);break}case ie.IN_TEMPLATE:{_xe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{XY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{uxe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{pj(this,t);break}case ie.IN_TABLE_TEXT:{pxe(this,t);break}}}};function Art(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):dxe(e,t),n}function Irt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function krt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Trt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Rrt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Rrt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Nrt(e,t,n){const r=e.treeAdapter.getTagName(t),i=Qx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===Le.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Prt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function KY(e,t){for(let n=0;n<Srt;n++){const r=Art(e,t);if(!r)break;const i=Irt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=krt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Nrt(e,o,s),Prt(e,i,r)}}function OU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Ort(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Drt(e,t){e._appendCommentNode(t,e.document)}function XY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function $rt(e,t){e._setDocumentType(t);const n=t.forceQuirks?_l.QUIRKS:frt(t);crt(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function fT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,_l.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Mrt(e,t){t.tagID===N.HTML?(e._insertElement(t,Le.HTML),e.insertionMode=ie.BEFORE_HEAD):n2(e,t)}function Lrt(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&n2(e,t)}function n2(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Frt(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.HEAD:{e._insertElement(t,Le.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:r2(e,t)}}function jrt(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?r2(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function r2(e,t){e._insertFakeElement(we.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function pd(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,cs.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,cs.RAWTEXT):(e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,cs.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,cs.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:i2(e,t)}}function Brt(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{i2(e,t);break}case N.TEMPLATE:{Lb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Lb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function i2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function Urt(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{pd(e,t);break}case N.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:s2(e,t)}}function zrt(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case N.BR:{s2(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function s2(e,t){const n=t.type===In.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Vrt(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.BODY:{e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),pd(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:o2(e,t)}}function Hrt(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{o2(e,t);break}case N.TEMPLATE:{Lb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function o2(e,t){e._insertFakeElement(we.BODY,N.BODY),e.insertionMode=ie.IN_BODY,XL(e,t)}function XL(e,t){switch(t.type){case In.CHARACTER:{lxe(e,t);break}case In.WHITESPACE_CHARACTER:{uxe(e,t);break}case In.COMMENT:{OU(e,t);break}case In.START_TAG:{Ra(e,t);break}case In.END_TAG:{QL(e,t);break}case In.EOF:{hxe(e,t);break}}}function uxe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function lxe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function qrt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Wrt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Grt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET)}function Yrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Krt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),QEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Le.HTML)}function Xrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Qrt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),n||(e.formElement=e.openElements.current))}function Jrt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Zrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.tokenizer.state=cs.PLAINTEXT}function eit(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1}function tit(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(KY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function nit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function rit(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(KY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function iit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function sit(e,t){e.treeAdapter.getDocumentMode(e.document)!==_l.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function cxe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function fxe(e){const t=YEe(e,A0.TYPE);return t!=null&&t.toLowerCase()===xrt}function oit(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),fxe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function ait(e,t){e._appendElement(t,Le.HTML),t.ackSelfClosing=!0}function uit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function lit(e,t){t.tagName=we.IMG,t.tagID=N.IMG,cxe(e,t)}function cit(e,t){e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.tokenizer.state=cs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function fit(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function dit(e,t){e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function kue(e,t){e._switchToTextParsing(t,cs.RAWTEXT)}function hit(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function pit(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function mit(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Le.HTML)}function git(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,Le.HTML)}function yit(e,t){e._reconstructActiveFormattingElements(),sxe(t),YY(t),t.selfClosing?e._appendElement(t,Le.MATHML):e._insertElement(t,Le.MATHML),t.ackSelfClosing=!0}function vit(e,t){e._reconstructActiveFormattingElements(),oxe(t),YY(t),t.selfClosing?e._appendElement(t,Le.SVG):e._insertElement(t,Le.SVG),t.ackSelfClosing=!0}function Rue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function Ra(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{nit(e,t);break}case N.A:{tit(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Krt(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Yrt(e,t);break}case N.LI:case N.DD:case N.DT:{Jrt(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{cxe(e,t);break}case N.HR:{uit(e,t);break}case N.RB:case N.RTC:{mit(e,t);break}case N.RT:case N.RP:{git(e,t);break}case N.PRE:case N.LISTING:{Xrt(e,t);break}case N.XMP:{fit(e,t);break}case N.SVG:{vit(e,t);break}case N.HTML:{qrt(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{pd(e,t);break}case N.BODY:{Wrt(e,t);break}case N.FORM:{Qrt(e,t);break}case N.NOBR:{rit(e,t);break}case N.MATH:{yit(e,t);break}case N.TABLE:{sit(e,t);break}case N.INPUT:{oit(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{ait(e,t);break}case N.IMAGE:{lit(e,t);break}case N.BUTTON:{eit(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{iit(e,t);break}case N.IFRAME:{dit(e,t);break}case N.SELECT:{hit(e,t);break}case N.OPTION:case N.OPTGROUP:{pit(e,t);break}case N.NOEMBED:{kue(e,t);break}case N.FRAMESET:{Grt(e,t);break}case N.TEXTAREA:{cit(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?kue(e,t):Rue(e,t);break}case N.PLAINTEXT:{Zrt(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:Rue(e,t)}}function bit(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function _it(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,wxe(e,t))}function wit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Eit(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function xit(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(we.P,N.P),e._closePElement()}function Sit(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function Tit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Cit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Ait(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Iit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function dxe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function QL(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{KY(e,t);break}case N.P:{xit(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{wit(e,t);break}case N.LI:{Sit(e);break}case N.DD:case N.DT:{Tit(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Cit(e);break}case N.BR:{Iit(e);break}case N.BODY:{bit(e,t);break}case N.HTML:{_it(e,t);break}case N.FORM:{Eit(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Ait(e,t);break}case N.TEMPLATE:{Lb(e,t);break}default:dxe(e,t)}}function hxe(e,t){e.tmplInsertionModeStack.length>0?_xe(e,t):XY(e,t)}function kit(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Rit(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function pj(e,t){if(axe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case In.CHARACTER:{mxe(e,t);break}case In.WHITESPACE_CHARACTER:{pxe(e,t);break}}else KI(e,t)}function Nit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CAPTION}function Pit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Oit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,N.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,QY(e,t)}function Dit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_TABLE_BODY}function $it(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,N.TBODY),e.insertionMode=ie.IN_TABLE_BODY,JL(e,t)}function Mit(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Lit(e,t){fxe(t)?e._appendElement(t,Le.HTML):KI(e,t),t.ackSelfClosing=!0}function Fit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Le.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function TE(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{$it(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{pd(e,t);break}case N.COL:{Oit(e,t);break}case N.FORM:{Fit(e,t);break}case N.TABLE:{Mit(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Dit(e,t);break}case N.INPUT:{Lit(e,t);break}case N.CAPTION:{Nit(e,t);break}case N.COLGROUP:{Pit(e,t);break}default:KI(e,t)}}function hA(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Lb(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:KI(e,t)}}function KI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,XL(e,t),e.fosterParentingEnabled=n}function pxe(e,t){e.pendingCharacterTokens.push(t)}function mxe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function dT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)KI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const gxe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function jit(e,t){const n=t.tagID;gxe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,TE(e,t)):Ra(e,t)}function Bit(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===N.TABLE&&hA(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:QL(e,t)}}function QY(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.COL:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{pd(e,t);break}default:LD(e,t)}}function Uit(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TEMPLATE:{Lb(e,t);break}case N.COL:break;default:LD(e,t)}}function LD(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function JL(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,N.TR),e.insertionMode=ie.IN_ROW,ZL(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,TE(e,t));break}default:TE(e,t)}}function DU(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,hA(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:hA(e,t)}}function ZL(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,JL(e,t));break}default:TE(e,t)}}function yxe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,DU(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,DU(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:hA(e,t)}}function zit(e,t){const n=t.tagID;gxe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),ZL(e,t)):Ra(e,t)}function Vit(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),yxe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:QL(e,t)}}function vxe(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{pd(e,t);break}}}function bxe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Lb(e,t);break}}}function Hit(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):vxe(e,t)}function qit(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):bxe(e,t)}function Wit(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{pd(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,TE(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,QY(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,JL(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,ZL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ra(e,t)}}function Git(e,t){t.tagID===N.TEMPLATE&&Lb(e,t)}function _xe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):XY(e,t)}function Yit(e,t){t.tagID===N.HTML?Ra(e,t):FD(e,t)}function wxe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else FD(e,t)}function FD(e,t){e.insertionMode=ie.IN_BODY,XL(e,t)}function Kit(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.FRAMESET:{e._insertElement(t,Le.HTML);break}case N.FRAME:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{pd(e,t);break}}}function Xit(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Qit(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.NOFRAMES:{pd(e,t);break}}}function Jit(e,t){t.tagID===N.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Zit(e,t){t.tagID===N.HTML?Ra(e,t):QP(e,t)}function QP(e,t){e.insertionMode=ie.IN_BODY,XL(e,t)}function est(e,t){switch(t.tagID){case N.HTML:{Ra(e,t);break}case N.NOFRAMES:{pd(e,t);break}}}function tst(e,t){t.chars=_i,e._insertCharacters(t)}function nst(e,t){e._insertCharacters(t),e.framesetOk=!1}function Exe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Le.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function rst(e,t){if(vrt(t))Exe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Le.MATHML?sxe(t):r===Le.SVG&&(brt(t),oxe(t)),YY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function ist(e,t){if(t.tagID===N.P||t.tagID===N.BR){Exe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Le.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const xxe=Sxe("end"),Fb=Sxe("start");function Sxe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const Txe=function(e){if(e==null)return ust;if(typeof e=="function")return e6(e);if(typeof e=="object")return Array.isArray(e)?sst(e):ost(e);if(typeof e=="string")return ast(e);throw new Error("Expected function, string, or object as test")};function sst(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Txe(e[n]);return e6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function ost(e){const t=e;return e6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function ast(e){return e6(t);function t(n){return n&&n.type===e}}function e6(e){return t;function t(n,r,i){return!!(lst(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ust(){return!0}function lst(e){return e!==null&&typeof e=="object"&&"type"in e}const Cxe=[],cst=!0,Nue=!1,fst="skip";function dst(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Txe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Cxe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=hst(n(u,c)),h[0]===Nue))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==fst)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Nue)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function hst(e){return Array.isArray(e)?e:typeof e=="number"?[cst,e]:e==null?Cxe:[e]}function pst(e,t,n,r){let i,s,o;s=t,o=n,i=r,dst(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const mst=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Pue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Axe(e,t){const n=Tst(e),r=VEe("type",{handlers:{root:gst,element:yst,text:vst,comment:kxe,doctype:bst,raw:wst},unknown:Est}),i={parser:n?new Iue(Pue):Iue.getFragmentParser(void 0,Pue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Jx(i,Fb());const s=n?i.parser.document:i.parser.getFragment(),o=ynt(s,{file:i.options.file});return i.stitches&&pst(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Ixe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function gst(e,t){Ixe(e.children,t)}function yst(e,t){xst(e,t),Ixe(e.children,t),Sst(e,t)}function vst(e,t){const n={type:In.CHARACTER,chars:e.value,location:XI(e)};Jx(t,Fb(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function bst(e,t){const n={type:In.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:XI(e)};Jx(t,Fb(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function _st(e,t){t.stitches=!0;const n=Cst(e);if("children"in e&&"children"in n){const r=Axe({type:"root",children:e.children},t.options);n.children=r.children}kxe({type:"comment",value:{stitch:n}},t)}function kxe(e,t){const n=e.value,r={type:In.COMMENT,data:n,location:XI(e)};Jx(t,Fb(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function wst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Rxe(t,Fb(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Est(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))_st(n,t);else{let r="";throw mst.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Jx(e,t){Rxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=cs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Rxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function xst(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===cs.PLAINTEXT)return;Jx(t,Fb(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:s1.html;i===s1.html&&n==="svg"&&(i=s1.svg);const s=Ent({...e,children:[]},{space:i===s1.svg?"svg":"html"}),o={type:In.START_TAG,tagName:n,tagID:Qx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:XI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Sst(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Rnt.includes(n)||t.parser.tokenizer.state===cs.PLAINTEXT)return;Jx(t,xxe(e));const r={type:In.END_TAG,tagName:n,tagID:Qx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:XI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===cs.RCDATA||t.parser.tokenizer.state===cs.RAWTEXT||t.parser.tokenizer.state===cs.SCRIPT_DATA)&&(t.parser.tokenizer.state=cs.DATA)}function Tst(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function XI(e){const t=Fb(e)||{line:void 0,column:void 0,offset:void 0},n=xxe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Cst(e){return"children"in e?gue({...e,children:[]}):gue(e)}function Ast(e){return function(t,n){return Axe(t,{...e,file:n})}}function tu({text:e,required:t}){const n={img:({node:i,...s})=>_.jsx($y,{...s,h:s.height,w:s.width}),p:({node:i,...s})=>_.jsx(tt,{...s,pb:8}),h1:({node:i,...s})=>_.jsx(ls,{order:1,...s,pb:12}),h2:({node:i,...s})=>_.jsx(ls,{order:2,...s,pb:12}),h3:({node:i,...s})=>_.jsx(ls,{order:3,...s,pb:12}),h4:({node:i,...s})=>_.jsx(ls,{order:4,...s,pb:12}),h5:({node:i,...s})=>_.jsx(ls,{order:5,...s,pb:12}),h6:({node:i,...s})=>_.jsx(ls,{order:6,...s,pb:12}),a:({node:i,...s})=>_.jsx(Db,{...s}),ul:({node:i,...s})=>_.jsx(qf,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>_.jsx(qf,{type:"ordered",withPadding:!0,...s,pb:8})};return _.jsx(MEe,{components:n,rehypePlugins:[Ast],children:e+(t?' <span style="color: #fa5252">*</span>':"")})}function $U({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(tu,{text:n})}const Ist="https://github.com/revisit-studies/study/tree/main/public/";function kst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Xc();return _.jsx(fs.Main,{children:_.jsxs(rp,{size:"xs",px:"xs",children:[_.jsx($y,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${op}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(tt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Jwe(i);return _.jsx(co,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Dy,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(tt,{fw:"bold",children:i}),_.jsxs($n,{align:"center",direction:"row",children:[_.jsx(Eae,{color:"red"}),_.jsx(tt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx($U,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(tt,{fw:"bold",children:s.studyMetadata.title}),_.jsx(tt,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),_.jsx(tt,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(tt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Db,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Ist}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs($n,{align:"center",direction:"row",children:[_.jsx(Eae,{color:"orange"}),_.jsx(tt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx($U,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var Nxe={exports:{}},Pxe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE=I;function Rst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nst=typeof Object.is=="function"?Object.is:Rst,Pst=CE.useState,Ost=CE.useEffect,Dst=CE.useLayoutEffect,$st=CE.useDebugValue;function Mst(e,t){var n=t(),r=Pst({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return Dst(function(){i.value=n,i.getSnapshot=t,mj(i)&&s({inst:i})},[e,n,t]),Ost(function(){return mj(i)&&s({inst:i}),e(function(){mj(i)&&s({inst:i})})},[e]),$st(n),n}function mj(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nst(e,n)}catch{return!0}}function Lst(e,t){return t()}var Fst=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Lst:Mst;Pxe.useSyncExternalStore=CE.useSyncExternalStore!==void 0?CE.useSyncExternalStore:Fst;Nxe.exports=Pxe;var jst=Nxe.exports,Oxe={exports:{}},Dxe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=I,Bst=jst;function Ust(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zst=typeof Object.is=="function"?Object.is:Ust,Vst=Bst.useSyncExternalStore,Hst=t6.useRef,qst=t6.useEffect,Wst=t6.useMemo,Gst=t6.useDebugValue;Dxe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Hst(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Wst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,zst(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Vst(e,s[0],s[1]);return qst(function(){o.hasValue=!0,o.value=a},[a]),Gst(a),a};Oxe.exports=Dxe;var Yst=Oxe.exports;function Kst(e){e()}let $xe=Kst;const Xst=e=>$xe=e,Qst=()=>$xe,Oue=Symbol.for("react-redux-context"),Due=typeof globalThis<"u"?globalThis:{};function Jst(){var e;if(!I.createContext)return{};const t=(e=Due[Oue])!=null?e:Due[Oue]=new Map;let n=t.get(I.createContext);return n||(n=I.createContext(null),t.set(I.createContext,n)),n}const W0=Jst();function JY(e=W0){return function(){return I.useContext(e)}}const Mxe=JY(),Zst=()=>{throw new Error("uSES not initialized!")};let Lxe=Zst;const eot=e=>{Lxe=e},tot=(e,t)=>e===t;function not(e=W0){const t=e===W0?Mxe:JY(e);return function(r,i={}){const{equalityFn:s=tot,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:l,getServerState:c,stabilityCheck:f,noopCheck:d}=t();I.useRef(!0);const h=I.useCallback({[r.name](m){return r(m)}}[r.name],[r,f,o]),p=Lxe(l.addNestedSub,u.getState,c||u.getState,h,s);return I.useDebugValue(p),p}}const rot=not();var Fxe={exports:{}},Lr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var po=typeof Symbol=="function"&&Symbol.for,ZY=po?Symbol.for("react.element"):60103,eK=po?Symbol.for("react.portal"):60106,n6=po?Symbol.for("react.fragment"):60107,r6=po?Symbol.for("react.strict_mode"):60108,i6=po?Symbol.for("react.profiler"):60114,s6=po?Symbol.for("react.provider"):60109,o6=po?Symbol.for("react.context"):60110,tK=po?Symbol.for("react.async_mode"):60111,a6=po?Symbol.for("react.concurrent_mode"):60111,u6=po?Symbol.for("react.forward_ref"):60112,l6=po?Symbol.for("react.suspense"):60113,iot=po?Symbol.for("react.suspense_list"):60120,c6=po?Symbol.for("react.memo"):60115,f6=po?Symbol.for("react.lazy"):60116,sot=po?Symbol.for("react.block"):60121,oot=po?Symbol.for("react.fundamental"):60117,aot=po?Symbol.for("react.responder"):60118,uot=po?Symbol.for("react.scope"):60119;function Ql(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ZY:switch(e=e.type,e){case tK:case a6:case n6:case i6:case r6:case l6:return e;default:switch(e=e&&e.$$typeof,e){case o6:case u6:case f6:case c6:case s6:return e;default:return t}}case eK:return t}}}function jxe(e){return Ql(e)===a6}Lr.AsyncMode=tK;Lr.ConcurrentMode=a6;Lr.ContextConsumer=o6;Lr.ContextProvider=s6;Lr.Element=ZY;Lr.ForwardRef=u6;Lr.Fragment=n6;Lr.Lazy=f6;Lr.Memo=c6;Lr.Portal=eK;Lr.Profiler=i6;Lr.StrictMode=r6;Lr.Suspense=l6;Lr.isAsyncMode=function(e){return jxe(e)||Ql(e)===tK};Lr.isConcurrentMode=jxe;Lr.isContextConsumer=function(e){return Ql(e)===o6};Lr.isContextProvider=function(e){return Ql(e)===s6};Lr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ZY};Lr.isForwardRef=function(e){return Ql(e)===u6};Lr.isFragment=function(e){return Ql(e)===n6};Lr.isLazy=function(e){return Ql(e)===f6};Lr.isMemo=function(e){return Ql(e)===c6};Lr.isPortal=function(e){return Ql(e)===eK};Lr.isProfiler=function(e){return Ql(e)===i6};Lr.isStrictMode=function(e){return Ql(e)===r6};Lr.isSuspense=function(e){return Ql(e)===l6};Lr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===n6||e===a6||e===i6||e===r6||e===l6||e===iot||typeof e=="object"&&e!==null&&(e.$$typeof===f6||e.$$typeof===c6||e.$$typeof===s6||e.$$typeof===o6||e.$$typeof===u6||e.$$typeof===oot||e.$$typeof===aot||e.$$typeof===uot||e.$$typeof===sot)};Lr.typeOf=Ql;Fxe.exports=Lr;var lot=Fxe.exports,Bxe=lot,cot={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fot={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Uxe={};Uxe[Bxe.ForwardRef]=cot;Uxe[Bxe.Memo]=fot;var Vr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nK=Symbol.for("react.element"),rK=Symbol.for("react.portal"),d6=Symbol.for("react.fragment"),h6=Symbol.for("react.strict_mode"),p6=Symbol.for("react.profiler"),m6=Symbol.for("react.provider"),g6=Symbol.for("react.context"),dot=Symbol.for("react.server_context"),y6=Symbol.for("react.forward_ref"),v6=Symbol.for("react.suspense"),b6=Symbol.for("react.suspense_list"),_6=Symbol.for("react.memo"),w6=Symbol.for("react.lazy"),hot=Symbol.for("react.offscreen"),zxe;zxe=Symbol.for("react.module.reference");function tf(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case nK:switch(e=e.type,e){case d6:case p6:case h6:case v6:case b6:return e;default:switch(e=e&&e.$$typeof,e){case dot:case g6:case y6:case w6:case _6:case m6:return e;default:return t}}case rK:return t}}}Vr.ContextConsumer=g6;Vr.ContextProvider=m6;Vr.Element=nK;Vr.ForwardRef=y6;Vr.Fragment=d6;Vr.Lazy=w6;Vr.Memo=_6;Vr.Portal=rK;Vr.Profiler=p6;Vr.StrictMode=h6;Vr.Suspense=v6;Vr.SuspenseList=b6;Vr.isAsyncMode=function(){return!1};Vr.isConcurrentMode=function(){return!1};Vr.isContextConsumer=function(e){return tf(e)===g6};Vr.isContextProvider=function(e){return tf(e)===m6};Vr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===nK};Vr.isForwardRef=function(e){return tf(e)===y6};Vr.isFragment=function(e){return tf(e)===d6};Vr.isLazy=function(e){return tf(e)===w6};Vr.isMemo=function(e){return tf(e)===_6};Vr.isPortal=function(e){return tf(e)===rK};Vr.isProfiler=function(e){return tf(e)===p6};Vr.isStrictMode=function(e){return tf(e)===h6};Vr.isSuspense=function(e){return tf(e)===v6};Vr.isSuspenseList=function(e){return tf(e)===b6};Vr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===d6||e===p6||e===h6||e===v6||e===b6||e===hot||typeof e=="object"&&e!==null&&(e.$$typeof===w6||e.$$typeof===_6||e.$$typeof===m6||e.$$typeof===g6||e.$$typeof===y6||e.$$typeof===zxe||e.getModuleId!==void 0)};Vr.typeOf=tf;function pot(){const e=Qst();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const $ue={notify(){},get:()=>[]};function mot(e,t){let n,r=$ue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=pot())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=$ue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const got=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yot=got?I.useLayoutEffect:I.useEffect;function vot({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=I.useMemo(()=>{const l=mot(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),a=I.useMemo(()=>e.getState(),[e]);yot(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||W0;return I.createElement(u.Provider,{value:o},n)}function Vxe(e=W0){const t=e===W0?Mxe:JY(e);return function(){const{store:r}=t();return r}}const bot=Vxe();function _ot(e=W0){const t=e===W0?bot:Vxe(e);return function(){return t().dispatch}}const Hxe=_ot();eot(Yst.useSyncExternalStoreWithSelector);Xst(OI.unstable_batchedUpdates);function Rf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function G0(e){return!!e&&!!e[xi]}function Pm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===kot}(e)||Array.isArray(e)||!!e[zue]||!!(!((t=e.constructor)===null||t===void 0)&&t[zue])||iK(e)||sK(e))}function q1(e,t,n){n===void 0&&(n=!1),Zx(e)===0?(n?Object.keys:Bw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Zx(e){var t=e[xi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:iK(e)?2:sK(e)?3:0}function jw(e,t){return Zx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wot(e,t){return Zx(e)===2?e.get(t):e[t]}function qxe(e,t,n){var r=Zx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Wxe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function iK(e){return Aot&&e instanceof Map}function sK(e){return Iot&&e instanceof Set}function Iv(e){return e.o||e.t}function oK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Yxe(e);delete t[xi];for(var n=Bw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function aK(e,t){return t===void 0&&(t=!1),uK(e)||G0(e)||!Pm(e)||(Zx(e)>1&&(e.set=e.add=e.clear=e.delete=Eot),Object.freeze(e),t&&q1(e,function(n,r){return aK(r,!0)},!0)),e}function Eot(){Rf(2)}function uK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function wh(e){var t=jU[e];return t||Rf(18,e),t}function xot(e,t){jU[e]||(jU[e]=t)}function MU(){return pA}function gj(e,t){t&&(wh("Patches"),e.u=[],e.s=[],e.v=t)}function jD(e){LU(e),e.p.forEach(Sot),e.p=null}function LU(e){e===pA&&(pA=e.l)}function Mue(e){return pA={p:[],l:pA,h:e,m:!0,_:0}}function Sot(e){var t=e[xi];t.i===0||t.i===1?t.j():t.g=!0}function yj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||wh("ES5").S(t,e,r),r?(n[xi].P&&(jD(t),Rf(4)),Pm(e)&&(e=BD(t,e),t.l||UD(t,e)),t.u&&wh("Patches").M(n[xi].t,e,t.u,t.s)):e=BD(t,n,[]),jD(t),t.u&&t.v(t.u,t.s),e!==Gxe?e:void 0}function BD(e,t,n){if(uK(t))return t;var r=t[xi];if(!r)return q1(t,function(a,u){return Lue(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return UD(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=oK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),q1(s,function(a,u){return Lue(e,r,i,a,u,n,o)}),UD(e,i,!1),n&&e.u&&wh("Patches").N(r,n,e.u,e.s)}return r.o}function Lue(e,t,n,r,i,s,o){if(G0(i)){var a=BD(e,i,s&&t&&t.i!==3&&!jw(t.R,r)?s.concat(r):void 0);if(qxe(n,r,a),!G0(a))return;e.m=!1}else o&&n.add(i);if(Pm(i)&&!uK(i)){if(!e.h.D&&e._<1)return;BD(e,i),t&&t.A.l||UD(e,i)}}function UD(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&aK(t,n)}function vj(e,t){var n=e[xi];return(n?Iv(n):e)[t]}function Fue(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Qg(e){e.P||(e.P=!0,e.l&&Qg(e.l))}function bj(e){e.o||(e.o=oK(e.t))}function FU(e,t,n){var r=iK(t)?wh("MapSet").F(t,n):sK(t)?wh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:MU(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=mA;o&&(u=[a],l=sC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):wh("ES5").J(t,n);return(n?n.A:MU()).p.push(r),r}function Tot(e){return G0(e)||Rf(22,e),function t(n){if(!Pm(n))return n;var r,i=n[xi],s=Zx(n);if(i){if(!i.P&&(i.i<4||!wh("ES5").K(i)))return i.t;i.I=!0,r=jue(n,s),i.I=!1}else r=jue(n,s);return q1(r,function(o,a){i&&wot(i.t,o)===a||qxe(r,o,t(a))}),s===3?new Set(r):r}(e)}function jue(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return oK(e)}function Cot(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[xi];return mA.get(u,s)},set:function(u){var l=this[xi];mA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][xi];if(!a.P)switch(a.i){case 5:r(a)&&Qg(a);break;case 4:n(a)&&Qg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Bw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==xi){var f=o[c];if(f===void 0&&!jw(o,c))return!0;var d=a[c],h=d&&d[xi];if(h?h.t!==f:!Wxe(d,f))return!0}}var p=!!o[xi];return u.length!==Bw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};xot("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Yxe(f);delete p[xi];for(var m=Bw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:MU(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,xi,{value:l,writable:!0}),u},S:function(s,o,a){a?G0(o)&&o[xi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[xi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)q1(d,function(b){b!==xi&&(f[b]!==void 0||jw(f,b)?h[b]||u(d[b]):(h[b]=!0,Qg(c)))}),q1(f,function(b){d[b]!==void 0||jw(d,b)||(h[b]=!1,Qg(c))});else if(p===5){if(r(c)&&(Qg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Bue,pA,lK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Aot=typeof Map<"u",Iot=typeof Set<"u",Uue=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Gxe=lK?Symbol.for("immer-nothing"):((Bue={})["immer-nothing"]=!0,Bue),zue=lK?Symbol.for("immer-draftable"):"__$immer_draftable",xi=lK?Symbol.for("immer-state"):"__$immer_state",kot=""+Object.prototype.constructor,Bw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Yxe=Object.getOwnPropertyDescriptors||function(e){var t={};return Bw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},jU={},mA={get:function(e,t){if(t===xi)return e;var n=Iv(e);if(!jw(n,t))return function(i,s,o){var a,u=Fue(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Pm(r)?r:r===vj(e.t,t)?(bj(e),e.o[t]=FU(e.A.h,r,e)):r},has:function(e,t){return t in Iv(e)},ownKeys:function(e){return Reflect.ownKeys(Iv(e))},set:function(e,t,n){var r=Fue(Iv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=vj(Iv(e),t),s=i==null?void 0:i[xi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Wxe(n,i)&&(n!==void 0||jw(e.t,t)))return!0;bj(e),Qg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return vj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,bj(e),Qg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Iv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Rf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Rf(12)}},sC={};q1(mA,function(e,t){sC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),sC.deleteProperty=function(e,t){return sC.set.call(this,e,t,void 0)},sC.set=function(e,t,n){return mA.set.call(this,e[0],t,n,e[0])};var Rot=function(){function e(n){var r=this;this.O=Uue,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Rf(6),o!==void 0&&typeof o!="function"&&Rf(7),Pm(i)){var c=Mue(r),f=FU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?jD(c):LU(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return gj(c,o),yj(m,c)},function(m){throw jD(c),m}):(gj(c,o),yj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Gxe&&(l=void 0),r.D&&aK(l,!0),o){var h=[],p=[];wh("Patches").M(i,l,h,p),o(h,p)}return l}Rf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Pm(n)||Rf(8),G0(n)&&(n=Tot(n));var r=Mue(this),i=FU(this,n,void 0);return i[xi].C=!0,LU(r),i},t.finishDraft=function(n,r){var i=n&&n[xi],s=i.A;return gj(s,r),yj(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Uue&&Rf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=wh("Patches").$;return G0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Fl=new Rot,Not=Fl.produce;Fl.produceWithPatches.bind(Fl);Fl.setAutoFreeze.bind(Fl);Fl.setUseProxies.bind(Fl);Fl.applyPatches.bind(Fl);Fl.createDraft.bind(Fl);Fl.finishDraft.bind(Fl);const Kxe=Not;function gA(e){"@babel/helpers - typeof";return gA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gA(e)}function Pot(e,t){if(gA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oot(e){var t=Pot(e,"string");return gA(t)=="symbol"?t:t+""}function Dot(e,t,n){return(t=Oot(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Hue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vue(Object(n),!0).forEach(function(r){Dot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vue(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function la(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var que=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),_j=function(){return Math.random().toString(36).substring(7).split("").join(".")},zD={INIT:"@@redux/INIT"+_j(),REPLACE:"@@redux/REPLACE"+_j(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+_j()}};function $ot(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Xxe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(la(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(la(1));return n(Xxe)(e,t)}if(typeof e!="function")throw new Error(la(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(la(3));return s}function f(m){if(typeof m!="function")throw new Error(la(4));if(u)throw new Error(la(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(la(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!$ot(m))throw new Error(la(7));if(typeof m.type>"u")throw new Error(la(8));if(u)throw new Error(la(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(la(10));i=m,d({type:zD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(la(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[que]=function(){return this},m}return d({type:zD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[que]=p,r}function Mot(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:zD.INIT});if(typeof r>"u")throw new Error(la(12));if(typeof n(void 0,{type:zD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(la(13))})}function Lot(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Mot(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(la(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function VD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Fot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(la(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=VD.apply(void 0,a)(i.dispatch),Hue(Hue({},i),{},{dispatch:s})}}}function Qxe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var BU=Qxe();BU.withExtraArgument=Qxe;var Jxe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},W1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},jot=Object.defineProperty,Bot=Object.defineProperties,Uot=Object.getOwnPropertyDescriptors,Wue=Object.getOwnPropertySymbols,zot=Object.prototype.hasOwnProperty,Vot=Object.prototype.propertyIsEnumerable,Gue=function(e,t,n){return t in e?jot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},I0=function(e,t){for(var n in t||(t={}))zot.call(t,n)&&Gue(e,n,t[n]);if(Wue)for(var r=0,i=Wue(t);r<i.length;r++){var n=i[r];Vot.call(t,n)&&Gue(e,n,t[n])}return e},wj=function(e,t){return Bot(e,Uot(t))},JI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},Hot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?VD:VD.apply(null,arguments)};function Zxe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var qot=function(e){return e&&typeof e.match=="function"};function Eh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return I0(I0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Wot(e){return Zxe(e)&&"type"in e}var Got=function(e){Jxe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,W1([void 0],n[0].concat(this)))):new(t.bind.apply(t,W1([void 0],n.concat(this))))},t}(Array),Yot=function(e){Jxe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,W1([void 0],n[0].concat(this)))):new(t.bind.apply(t,W1([void 0],n.concat(this))))},t}(Array);function UU(e){return Pm(e)?Kxe(e,function(){}):e}function Kot(e){return typeof e=="boolean"}function Xot(){return function(t){return Qot(t)}}function Qot(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Got;return n&&(Kot(n)?r.push(BU):r.push(BU.withExtraArgument(n.extraArgument))),r}var Jot=!0;function eSe(e){var t=Xot(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Zxe(i))h=Lot(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Fot.apply(void 0,p),g=VD;u&&(g=Hot(I0({trace:!Jot},typeof u=="object"&&u)));var y=new Yot(m),v=y;Array.isArray(d)?v=W1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return Xxe(h,c,b)}function tSe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Zot(e){return typeof e=="function"}function eat(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?tSe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Zot(e))u=function(){return UU(e())};else{var l=UU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=W1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(G0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Pm(p))return Kxe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function tat(e,t){return e+"/"+t}function nSe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:UU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=tat(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Eh(d,p):Eh(d)});function u(){var c=typeof e.extraReducers=="function"?tSe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=I0(I0({},d),o);return eat(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,x=p;w<x.length;w++){var C=x[w];v.addMatcher(C.matcher,C.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var nat="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rSe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=nat[Math.random()*64|0];return t},rat=["name","message","stack","code"],Ej=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Yue=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),iat=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=rat;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Eh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:wj(I0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Eh(t+"/pending",function(l,c,f){return{payload:void 0,meta:wj(I0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Eh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||iat)(l||"Rejected"),meta:wj(I0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):rSe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return JI(this,null,function(){var v,b,w,x,C,E,S;return QI(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),oat(x)?[4,x]:[3,2];case 1:x=A.sent(),A.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(k,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,R){return new Ej(k,R)},fulfillWithValue:function(k,R){return new Yue(k,R)}})).then(function(k){if(k instanceof Ej)throw k;return k instanceof Yue?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return E=A.sent(),w=E instanceof Ej?o(null,h,l,E.payload,E.meta):o(E,h,l),[3,5];case 5:return S=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,S||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(sat)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function sat(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function oat(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var aat=function(e,t){return qot(e)?e.match(t):e(t)};function Kue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return aat(r,n)})}}var cK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},zU=function(){},iSe=function(e,t){return t===void 0&&(t=zU),e.catch(t),e},sSe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Uw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},uat="task",oSe="listener",aSe="completed",fK="cancelled",lat="task-"+fK,cat="task-"+aSe,uSe=oSe+"-"+fK,fat=oSe+"-"+aSe,E6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=uat+" "+fK+" (reason: "+t+")"}return e}(),zw=function(e){if(e.aborted)throw new E6(e.reason)};function lSe(e,t){var n=zU;return new Promise(function(r,i){var s=function(){return i(new E6(e.reason))};if(e.aborted){s();return}n=sSe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=zU})}var dat=function(e,t){return JI(void 0,null,function(){var n,r;return QI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof E6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},HD=function(e){return function(t){return iSe(lSe(e,t).then(function(n){return zw(e),n}))}},cSe=function(e){var t=HD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},hat=Object.assign,Xue={},ZI="listenerMiddleware",pat=function(e,t){var n=function(r){return sSe(e,function(){return Uw(r,e.reason)})};return function(r,i){cK(r,"taskExecutor");var s=new AbortController;n(s);var o=dat(function(){return JI(void 0,null,function(){var a;return QI(this,function(u){switch(u.label){case 0:return zw(e),zw(s.signal),[4,r({pause:HD(s.signal),delay:cSe(s.signal),signal:s.signal})];case 1:return a=u.sent(),zw(s.signal),[2,a]}})})},function(){return Uw(s,cat)});return i!=null&&i.autoJoin&&t.push(o),{result:HD(e)(o),cancel:function(){Uw(s,lat)}}}},mat=function(e,t){var n=function(r,i){return JI(void 0,null,function(){var s,o,a,u;return QI(this,function(l){switch(l.label){case 0:zw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,lSe(t,Promise.race(a))];case 2:return u=l.sent(),zw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return iSe(n(r,i))}},fSe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Eh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return cK(s,"options.listener"),{predicate:i,type:t,effect:s}},gat=function(e){var t=fSe(e),n=t.type,r=t.predicate,i=t.effect,s=rSe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},VU=function(e){e.pending.forEach(function(t){Uw(t,uSe)})},yat=function(e){return function(){e.forEach(VU),e.clear()}},Que=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},vat=Eh(ZI+"/add"),bat=Eh(ZI+"/removeAll"),_at=Eh(ZI+"/remove"),wat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,W1([ZI+"/error"],e))};function Eat(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?wat:i;cK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&VU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=gat(h)),o(p)},l=function(h){var p=fSe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&VU(v)),!!v},c=function(h,p,m,g){return JI(t,null,function(){var y,v,b,w;return QI(this,function(x){switch(x.label){case 0:y=new AbortController,v=mat(u,y.signal),b=[],x.label=1;case 1:return x.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,hat({},m,{getOriginalState:g,condition:function(C,E){return v(C,E).then(Boolean)},take:v,delay:cSe(y.signal),pause:HD(y.signal),extra:r,signal:y.signal,fork:pat(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,E,S){C!==y&&(Uw(C,uSe),S.delete(C))})}})))];case 2:return x.sent(),[3,6];case 3:return w=x.sent(),w instanceof E6||Que(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return x.sent(),Uw(y,fat),h.pending.delete(y),[7];case 6:return[2]}})})},f=yat(n),d=function(h){return function(p){return function(m){if(!Wot(m))return p(m);if(vat.match(m))return u(m.payload);if(bat.match(m)){f();return}if(_at.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Xue)throw new Error(ZI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),x=0,C=w;x<C.length;x++){var E=C[x],S=!1;try{S=E.predicate(m,b,g)}catch(A){S=!1,Que(s,A,{raisedBy:"predicate"})}S&&c(E,m,h,y)}}finally{g=Xue}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Jue;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Cot();var hi={};function xat(e){return!!(e&&typeof e.then=="function")}function qD(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function Sat(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function x6(){return Math.random().toString(36).substring(2)}var Zue=0,xj=0;function S6(){var e=new Date().getTime();return e===Zue?(xj++,e*1e3+xj):(Zue=e,xj=0,e*1e3)}var ek=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Tat=S6,Cat="native";function Aat(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function Iat(e){e.bc.close(),e.subFns=[]}function kat(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function Rat(e,t){e.messagesCallback=t}function Nat(){if(ek&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function Pat(){return 150}const Oat={create:Aat,close:Iat,onMessage:Rat,postMessage:kat,canBeUsed:Nat,type:Cat,averageResponseTime:Pat,microSeconds:Tat};var dSe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,hSe()),this.set.add(t),setTimeout(function(){Dat(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function Dat(e){for(var t=hSe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function hSe(){return new Date().getTime()}function T6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var $at=S6,Mat="pubkey.broadcast-channel-0-",Om="messages",Lat="idb";function pSe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Fat(e){var t=pSe(),n=Mat+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(Om,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function jat(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([Om],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(Om);u.add(i)})}function Bat(e,t){var n=e.transaction(Om).objectStore(Om),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function Uat(e,t){var n=e.transaction([Om],"readwrite").objectStore(Om).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function zat(e,t){var n=new Date().getTime()-t,r=e.transaction(Om).objectStore(Om),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function Vat(e,t){return zat(e,t).then(function(n){return Promise.all(n.map(function(r){return Uat(e,r.id)}))})}function Hat(e,t){return t=T6(t),Fat(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:x6(),eMIs:new dSe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},mSe(r),r})}function mSe(e){e.closed||gSe(e).then(function(){return qD(e.options.idb.fallbackInterval)}).then(function(){return mSe(e)})}function qat(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function gSe(e){return e.closed||!e.messagesCallback?Promise.resolve():Bat(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return qat(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function Wat(e){e.closed=!0,e.db.close()}function Gat(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return jat(e.db,e.uuid,t)}).then(function(){Sat(0,10)===0&&Vat(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function Yat(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,gSe(e)}function Kat(){if(ek)return!1;var e=pSe();return!!e}function Xat(e){return e.idb.fallbackInterval*2}const Qat={create:Hat,close:Wat,onMessage:Yat,postMessage:Gat,canBeUsed:Kat,type:Lat,averageResponseTime:Xat,microSeconds:$at};var Jat=S6,Zat="pubkey.broadcastChannel-",eut="localstorage";function ySe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function vSe(e){return Zat+e}function tut(e,t){return new Promise(function(n){qD().then(function(){var r=vSe(e.channelName),i={token:x6(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);ySe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function nut(e,t){var n=vSe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function rut(e){window.removeEventListener("storage",e)}function iut(e,t){if(t=T6(t),!bSe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=x6(),r=new dSe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=nut(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function sut(e){rut(e.listener)}function out(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function bSe(){if(ek)return!1;var e=ySe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function aut(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const uut={create:iut,close:sut,onMessage:out,postMessage:tut,canBeUsed:bSe,type:eut,averageResponseTime:aut,microSeconds:Jat};var lut=S6,cut="simulate",dK=new Set;function fut(e){var t={name:e,messagesCallback:null};return dK.add(t),t}function dut(e){dK.delete(e)}function hut(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(dK);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function put(e,t){e.messagesCallback=t}function mut(){return!0}function gut(){return 5}const yut={create:fut,close:dut,onMessage:put,postMessage:hut,canBeUsed:mut,type:cut,averageResponseTime:gut,microSeconds:lut};var HU=[Oat,Qat,uut];if(ek){var ele=require("../../src/methods/node.js");typeof ele.canBeUsed=="function"&&HU.push(ele)}function _Se(e){var t=[].concat(e.methods,HU).filter(Boolean);if(e.type){if(e.type==="simulate")return yut;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!ek&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(HU.map(function(i){return i.type})))}var hK=function(t,n){this.name=t,qU&&(n=qU),this.options=T6(n),this.method=_Se(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,_ut(this)};hK._pubkey=!0;function vut(e){e=T6(e);var t=_Se(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var qU;function but(e){qU=e}hK.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return tle(this,"message",t)},postInternal:function(t){return tle(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};rle(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,nle(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};nle(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});rle(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function tle(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function _ut(e){var t=e.method.create(e.name,e.options);xat(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function wSe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function nle(e,t,n){e._addEL[t].push(n),wut(e)}function rle(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),Eut(e)}function wut(e){if(!e._iL&&wSe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function Eut(e){if(e._iL&&!wSe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const xut=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function Sut(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const Tut={add:Sut},ESe={},Cut=Object.freeze(Object.defineProperty({__proto__:null,default:ESe},Symbol.toStringTag,{value:"Module"}));var Aut=xut?ESe:Tut,S1=new Set,ile=!1;function Iut(){ile||(ile=!0,Aut.add(xSe))}function kut(e){if(Iut(),typeof e!="function")throw new Error("Listener is no function");S1.add(e);var t={remove:function(){return S1.delete(e)},run:function(){return S1.delete(e),e()}};return t}function xSe(){var e=[];return S1.forEach(function(t){e.push(t()),S1.delete(t)}),Promise.all(e)}function Rut(){S1.clear()}function Nut(){return S1.size}const Put={add:kut,runAll:xSe,removeAll:Rut,getSize:Nut};var SSe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=x6(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};SSe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=o1(this,"apply").then(function(){return qD(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):o1(t,"apply")}).then(function(){return qD(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):o1(t)}).then(function(){return TSe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=Out(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),o1(this,"death")}};function Out(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function o1(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function TSe(e){e.isLeader=!0;var t=Put.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&o1(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),o1(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),o1(e,"tell")}function Dut(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function $ut(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=Dut(t,e);var n=new SSe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const Mut=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:hK,beLeader:TSe,clearNodeFolder:vut,createLeaderElection:$ut,enforceOptions:but},Symbol.toStringTag,{value:"Module"})),Lut=Rye(Mut);var pK,mK;Object.defineProperty(hi,"__esModule",{value:!0});hi.initMessageListener=mK=hi.initStateWithPrevTab=hi.withReduxStateSync=hi.createReduxStateSync=pK=hi.createStateSyncMiddleware=hi.WINDOW_STATE_SYNC_ID=hi.INIT_MESSAGE_LISTENER=hi.RECEIVE_INIT_STATE=hi.SEND_INIT_STATE=hi.GET_INIT_STATE=void 0;hi.generateUuidForAction=ISe;hi.isActionAllowed=kSe;hi.isActionSynced=Hut;hi.MessageListener=RSe;var Fut=Lut,WU=0,gK=hi.GET_INIT_STATE="&_GET_INIT_STATE",yK=hi.SEND_INIT_STATE="&_SEND_INIT_STATE",vK=hi.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",jut=hi.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",GU={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},But=function(){return{type:gK}},Uut=function(){return{type:yK}},zut=function(t){return{type:vK,payload:t}},Vut=function(){return{type:jut}};function Sg(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function CSe(){return""+Sg()+Sg()+"-"+Sg()+"-"+Sg()+"-"+Sg()+"-"+Sg()+Sg()+Sg()}var ASe=hi.WINDOW_STATE_SYNC_ID=CSe();function ISe(e){var t=e;return t.$uuid=CSe(),t.$wuid=ASe,t}function kSe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function Hut(e){return!!e.$isSync}function RSe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==ASe&&o.type!==vK&&o.$uuid&&o.$uuid!==WU&&(o.type===gK&&!s[o.$wuid]?(s[o.$wuid]=!0,n(Uut())):o.type===yK&&!s[o.$wuid]?i||(i=!0,n(zut(o.payload))):r(o)&&(WU=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}pK=hi.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:GU,n=kSe(t),r=new Fut.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||GU.prepareState,s=null;return function(o){var a=o.getState,u=o.dispatch;return function(l){return function(c){if(s||(s=new RSe({channel:r,dispatch:u,allowed:n})),c&&!c.$uuid){var f=ISe(c);WU=f.$uuid;try{if(c.type===yK)return a()&&(f.payload=i(a()),r.postMessage(f)),l(c);(n(f)||c.type===gK)&&r.postMessage(f)}catch{console.error("Your browser doesn't support cross tab communication")}}return l(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var qut=hi.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:GU.receiveState;return function(r,i){var s=r;return i.type===vK&&(s=n(r,i.payload)),t(s,i)}};hi.withReduxStateSync=qut;mK=hi.initStateWithPrevTab=function(t){var n=t.dispatch;n(But())};hi.initMessageListener=function(t){var n=t.dispatch;n(Vut())};function Ac(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:Ac(t))}function NSe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:NSe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function PSe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Ac(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Ac(e).length-1}];r+=1}else{const o=PSe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function OSe(e,t){const n=PSe(e,t,0);return typeof n=="number"?null:n}function DSe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=DSe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Wut(e,t){const n=DSe(e,t,0);return n.found?n.distance:-1}function $Se(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...$Se(i,`${t}-${s}`))}),n}async function Gut(e,t,n,r,i,s){const o=Ac(n),a=Object.fromEntries(o.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{}}])),u=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:Object.keys(i).length>0?i:a,isRecording:!1,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null},f=nSe({name:"storeSlice",initialState:c,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setAnalysisTrialName:(p,m)=>{p.analysisTrialName=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:w,windowEvents:x}=m;p.answers[g]={answer:y,startTime:v,endTime:b,provenanceGraph:w,windowEvents:x}}}}),d=[pK({})],h=eSe({reducer:f.reducer,preloadedState:c,middleware:d});return mK(h),{store:h,actions:f.actions}}const MSe=I.createContext(null);function jl(){return I.useContext(MSe).actions}const Mc=Hxe,Uo=rot;function Yut(e){return Uo(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function bK(){return Uo(e=>Ac(e.sequence))}function _K(){const{studyId:e}=Nm();return`${e}`}function Fy(){const{index:e}=Nm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function jy(){const e=Fy(),t=bK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var WD={exports:{}};WD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",x="[object Set]",C="[object String]",E="[object Undefined]",S="[object WeakMap]",A="[object ArrayBuffer]",k="[object DataView]",R="[object Float32Array]",D="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",j="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,F={};F[R]=F[D]=F[P]=F[O]=F[L]=F[j]=F[B]=F[U]=F[H]=!0,F[a]=F[u]=F[A]=F[c]=F[k]=F[f]=F[d]=F[h]=F[m]=F[g]=F[v]=F[w]=F[x]=F[C]=F[S]=!1;var V=typeof No=="object"&&No&&No.Object===Object&&No,G=typeof self=="object"&&self&&self.Object===Object&&self,ee=V||G||Function("return this")(),le=t&&!t.nodeType&&t,de=le&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===le,ye=he&&V.process,Ce=function(){try{var ne=de&&de.require&&de.require("util").types;return ne||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ce&&Ce.isTypedArray;function Ye(ne,ue,Re){switch(Re.length){case 0:return ne.call(ue);case 1:return ne.call(ue,Re[0]);case 2:return ne.call(ue,Re[0],Re[1]);case 3:return ne.call(ue,Re[0],Re[1],Re[2])}return ne.apply(ue,Re)}function Ue(ne,ue){for(var Re=-1,At=Array(ne);++Re<ne;)At[Re]=ue(Re);return At}function mt(ne){return function(ue){return ne(ue)}}function it(ne,ue){return ne==null?void 0:ne[ue]}function be(ne,ue){return function(Re){return ne(ue(Re))}}var Ae=Array.prototype,Ve=Function.prototype,lt=Object.prototype,Nt=ee["__core-js_shared__"],qe=Ve.toString,me=lt.hasOwnProperty,ft=function(){var ne=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),yt=lt.toString,Et=qe.call(Object),pe=RegExp("^"+qe.call(me).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=he?ee.Buffer:void 0,Ke=ee.Symbol,bt=ee.Uint8Array;Ie&&Ie.allocUnsafe;var Vt=be(Object.getPrototypeOf,Object),rr=Object.create,qn=lt.propertyIsEnumerable,Ln=Ae.splice,yn=Ke?Ke.toStringTag:void 0,yr=function(){try{var ne=He(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),Qt=Ie?Ie.isBuffer:void 0,Wr=Math.max,ei=Date.now,Bi=He(ee,"Map"),An=He(Object,"create"),Ui=function(){function ne(){}return function(ue){if(!Ap(ue))return{};if(rr)return rr(ue);ne.prototype=ue;var Re=new ne;return ne.prototype=void 0,Re}}();function Ir(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var At=ne[ue];this.set(At[0],At[1])}}function ys(){this.__data__=An?An(null):{},this.size=0}function xp(ne){var ue=this.has(ne)&&delete this.__data__[ne];return this.size-=ue?1:0,ue}function fl(ne){var ue=this.__data__;if(An){var Re=ue[ne];return Re===r?void 0:Re}return me.call(ue,ne)?ue[ne]:void 0}function Ad(ne){var ue=this.__data__;return An?ue[ne]!==void 0:me.call(ue,ne)}function Er(ne,ue){var Re=this.__data__;return this.size+=this.has(ne)?0:1,Re[ne]=An&&ue===void 0?r:ue,this}Ir.prototype.clear=ys,Ir.prototype.delete=xp,Ir.prototype.get=fl,Ir.prototype.has=Ad,Ir.prototype.set=Er;function Ri(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var At=ne[ue];this.set(At[0],At[1])}}function ti(){this.__data__=[],this.size=0}function pu(ne){var ue=this.__data__,Re=Jn(ue,ne);if(Re<0)return!1;var At=ue.length-1;return Re==At?ue.pop():Ln.call(ue,Re,1),--this.size,!0}function Na(ne){var ue=this.__data__,Re=Jn(ue,ne);return Re<0?void 0:ue[Re][1]}function Pa(ne){return Jn(this.__data__,ne)>-1}function oe(ne,ue){var Re=this.__data__,At=Jn(Re,ne);return At<0?(++this.size,Re.push([ne,ue])):Re[At][1]=ue,this}Ri.prototype.clear=ti,Ri.prototype.delete=pu,Ri.prototype.get=Na,Ri.prototype.has=Pa,Ri.prototype.set=oe;function te(ne){var ue=-1,Re=ne==null?0:ne.length;for(this.clear();++ue<Re;){var At=ne[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Ir,map:new(Bi||Ri),string:new Ir}}function Te(ne){var ue=ze(this,ne).delete(ne);return this.size-=ue?1:0,ue}function Se(ne){return ze(this,ne).get(ne)}function ot(ne){return ze(this,ne).has(ne)}function St(ne,ue){var Re=ze(this,ne),At=Re.size;return Re.set(ne,ue),this.size+=Re.size==At?0:1,this}te.prototype.clear=ae,te.prototype.delete=Te,te.prototype.get=Se,te.prototype.has=ot,te.prototype.set=St;function qt(ne){var ue=this.__data__=new Ri(ne);this.size=ue.size}function On(){this.__data__=new Ri,this.size=0}function Fn(ne){var ue=this.__data__,Re=ue.delete(ne);return this.size=ue.size,Re}function pn(ne){return this.__data__.get(ne)}function ir(ne){return this.__data__.has(ne)}function kr(ne,ue){var Re=this.__data__;if(Re instanceof Ri){var At=Re.__data__;if(!Bi||At.length<n-1)return At.push([ne,ue]),this.size=++Re.size,this;Re=this.__data__=new te(At)}return Re.set(ne,ue),this.size=Re.size,this}qt.prototype.clear=On,qt.prototype.delete=Fn,qt.prototype.get=pn,qt.prototype.has=ir,qt.prototype.set=kr;function Ht(ne,ue){var Re=Tp(ne),At=!Re&&mu(ne),Dn=!Re&&!At&&Cp(ne),xr=!Re&&!At&&!Dn&&kR(ne),Yr=Re||At||Dn||xr,Bn=Yr?Ue(ne.length,String):[],Kr=Bn.length;for(var is in ne)Yr&&(is=="length"||Dn&&(is=="offset"||is=="parent")||xr&&(is=="buffer"||is=="byteLength"||is=="byteOffset")||wt(is,Kr))||Bn.push(is);return Bn}function sr(ne,ue,Re){(Re!==void 0&&!tc(ne[ue],Re)||Re===void 0&&!(ue in ne))&&Ni(ne,ue,Re)}function Gr(ne,ue,Re){var At=ne[ue];(!(me.call(ne,ue)&&tc(At,Re))||Re===void 0&&!(ue in ne))&&Ni(ne,ue,Re)}function Jn(ne,ue){for(var Re=ne.length;Re--;)if(tc(ne[Re][0],ue))return Re;return-1}function Ni(ne,ue,Re){ue=="__proto__"&&yr?yr(ne,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):ne[ue]=Re}var qs=De();function ni(ne){return ne==null?ne===void 0?E:y:yn&&yn in Object(ne)?We(ne):Yo(ne)}function yo(ne){return gu(ne)&&ni(ne)==a}function zi(ne){if(!Ap(ne)||jn(ne))return!1;var ue=QS(ne)?pe:z;return ue.test(CR(ne))}function Vi(ne){return gu(ne)&&IR(ne.length)&&!!F[ni(ne)]}function Go(ne){if(!Ap(ne))return Nr(ne);var ue=Rr(ne),Re=[];for(var At in ne)At=="constructor"&&(ue||!me.call(ne,At))||Re.push(At);return Re}function Oa(ne,ue,Re,At,Dn){ne!==ue&&qs(ue,function(xr,Yr){if(Dn||(Dn=new qt),Ap(xr))Ws(ne,ue,Yr,Re,Oa,At,Dn);else{var Bn=At?At(Sp(ne,Yr),xr,Yr+"",ne,ue,Dn):void 0;Bn===void 0&&(Bn=xr),sr(ne,Yr,Bn)}},lv)}function Ws(ne,ue,Re,At,Dn,xr,Yr){var Bn=Sp(ne,Re),Kr=Sp(ue,Re),is=Yr.get(Kr);if(is){sr(ne,Re,is);return}var Ko=xr?xr(Bn,Kr,Re+"",ne,ue,Yr):void 0,fv=Ko===void 0;if(fv){var Ip=Tp(Kr),c_=!Ip&&Cp(Kr),f_=!Ip&&!c_&&kR(Kr);Ko=Kr,Ip||c_||f_?Tp(Bn)?Ko=Bn:AR(Bn)?Ko=fe(Bn):c_?(fv=!1,Ko=Y(Kr)):f_?(fv=!1,Ko=Z(Kr)):Ko=[]:t8(Kr)||mu(Kr)?(Ko=Bn,mu(Bn)?Ko=uv(Bn):(!Ap(Bn)||QS(Bn))&&(Ko=st(Kr))):fv=!1}fv&&(Yr.set(Kr,Ko),Dn(Ko,Kr,At,xr,Yr),Yr.delete(Kr)),sr(ne,Re,Ko)}function ec(ne,ue){return XS(kd(ne,ue,wg),ne+"")}var Id=yr?function(ne,ue){return yr(ne,"toString",{configurable:!0,enumerable:!1,value:cv(ue),writable:!0})}:wg;function Y(ne,ue){return ne.slice()}function se(ne){var ue=new ne.constructor(ne.byteLength);return new bt(ue).set(new bt(ne)),ue}function Z(ne,ue){var Re=se(ne.buffer);return new ne.constructor(Re,ne.byteOffset,ne.length)}function fe(ne,ue){var Re=-1,At=ne.length;for(ue||(ue=Array(At));++Re<At;)ue[Re]=ne[Re];return ue}function ge(ne,ue,Re,At){var Dn=!Re;Re||(Re={});for(var xr=-1,Yr=ue.length;++xr<Yr;){var Bn=ue[xr],Kr=void 0;Kr===void 0&&(Kr=ne[Bn]),Dn?Ni(Re,Bn,Kr):Gr(Re,Bn,Kr)}return Re}function ce(ne){return ec(function(ue,Re){var At=-1,Dn=Re.length,xr=Dn>1?Re[Dn-1]:void 0,Yr=Dn>2?Re[2]:void 0;for(xr=ne.length>3&&typeof xr=="function"?(Dn--,xr):void 0,Yr&&mn(Re[0],Re[1],Yr)&&(xr=Dn<3?void 0:xr,Dn=1),ue=Object(ue);++At<Dn;){var Bn=Re[At];Bn&&ne(ue,Bn,At,xr)}return ue})}function De(ne){return function(ue,Re,At){for(var Dn=-1,xr=Object(ue),Yr=At(ue),Bn=Yr.length;Bn--;){var Kr=Yr[++Dn];if(Re(xr[Kr],Kr,xr)===!1)break}return ue}}function ze(ne,ue){var Re=ne.__data__;return Pt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function He(ne,ue){var Re=it(ne,ue);return zi(Re)?Re:void 0}function We(ne){var ue=me.call(ne,yn),Re=ne[yn];try{ne[yn]=void 0;var At=!0}catch{}var Dn=yt.call(ne);return At&&(ue?ne[yn]=Re:delete ne[yn]),Dn}function st(ne){return typeof ne.constructor=="function"&&!Rr(ne)?Ui(Vt(ne)):{}}function wt(ne,ue){var Re=typeof ne;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<ue}function mn(ne,ue,Re){if(!Ap(Re))return!1;var At=typeof ue;return(At=="number"?l_(Re)&&wt(ue,Re.length):At=="string"&&ue in Re)?tc(Re[ue],ne):!1}function Pt(ne){var ue=typeof ne;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?ne!=="__proto__":ne===null}function jn(ne){return!!ft&&ft in ne}function Rr(ne){var ue=ne&&ne.constructor,Re=typeof ue=="function"&&ue.prototype||lt;return ne===Re}function Nr(ne){var ue=[];if(ne!=null)for(var Re in Object(ne))ue.push(Re);return ue}function Yo(ne){return yt.call(ne)}function kd(ne,ue,Re){return ue=Wr(ue===void 0?ne.length-1:ue,0),function(){for(var At=arguments,Dn=-1,xr=Wr(At.length-ue,0),Yr=Array(xr);++Dn<xr;)Yr[Dn]=At[ue+Dn];Dn=-1;for(var Bn=Array(ue+1);++Dn<ue;)Bn[Dn]=At[Dn];return Bn[ue]=Re(Yr),Ye(ne,this,Bn)}}function Sp(ne,ue){if(!(ue==="constructor"&&typeof ne[ue]=="function")&&ue!="__proto__")return ne[ue]}var XS=av(Id);function av(ne){var ue=0,Re=0;return function(){var At=ei(),Dn=s-(At-Re);if(Re=At,Dn>0){if(++ue>=i)return arguments[0]}else ue=0;return ne.apply(void 0,arguments)}}function CR(ne){if(ne!=null){try{return qe.call(ne)}catch{}try{return ne+""}catch{}}return""}function tc(ne,ue){return ne===ue||ne!==ne&&ue!==ue}var mu=yo(function(){return arguments}())?yo:function(ne){return gu(ne)&&me.call(ne,"callee")&&!qn.call(ne,"callee")},Tp=Array.isArray;function l_(ne){return ne!=null&&IR(ne.length)&&!QS(ne)}function AR(ne){return gu(ne)&&l_(ne)}var Cp=Qt||NR;function QS(ne){if(!Ap(ne))return!1;var ue=ni(ne);return ue==h||ue==p||ue==l||ue==b}function IR(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function Ap(ne){var ue=typeof ne;return ne!=null&&(ue=="object"||ue=="function")}function gu(ne){return ne!=null&&typeof ne=="object"}function t8(ne){if(!gu(ne)||ni(ne)!=v)return!1;var ue=Vt(ne);if(ue===null)return!0;var Re=me.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&qe.call(Re)==Et}var kR=ve?mt(ve):Vi;function uv(ne){return ge(ne,lv(ne))}function lv(ne){return l_(ne)?Ht(ne):Go(ne)}var RR=ce(function(ne,ue,Re){Oa(ne,ue,Re)});function cv(ne){return function(){return ne}}function wg(ne){return ne}function NR(){return!1}e.exports=RR})(WD,WD.exports);var Kut=WD.exports;const wK=Ho(Kut),hT="@REVISIT_COMMS",Xut={minHeight:"500px",width:"100%",border:0};function Qut({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=jl(),r=Mc(),i=Hxe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=jy(),u=Xc(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${hT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${hT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${hT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${hT}/ANSWERS`:r(t(d.message));break;case`${hT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${op}${e.path}?trialid=${a}&id=${o}`,style:Xut})}async function EK(e){const n=await(await fetch(`${op}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function tk({email:e,path:t}){const n=ig();return _.jsxs(rp,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ls,{order:2,children:_.jsx(tt,{span:!0,c:"orange",children:"404"})}),_.jsxs(tt,{children:[_.jsx(tt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Wf,{h:"lg"}),_.jsxs(qf,{children:[_.jsx(qf.Item,{children:_.jsx(tt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(qf.Item,{children:_.jsxs(tt,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Db,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Jut={maxWidth:"100%"};function Zut({currentConfig:e}){const t={...Jut,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await EK(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx($y,{mx:"auto",src:`${op}${e.path}`,style:t}):_.jsx(tk,{path:e.path})}function elt({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await EK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(tu,{text:t}):_.jsx(tk,{path:e.path})}function Dm(){return Uo(e=>e.config)}function xK(){const{answers:e}=Uo(i=>i),t=Fy(),r=`${jy()}_${t}`;return e[r]}const tlt=Rye(Cut);var nlt=tlt;function rlt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function ilt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function slt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function olt(e){return e.__COMMENTS__}function alt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var C6={EOL:nlt.EOL||`
`,tryParseNumber:rlt,createComment:ilt,removeComment:slt,getComment:olt,forceComment:alt},ult="3.2.1";function llt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return sle}else if(e.length===0)return sle;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return flt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),clt.bind(null,n)}function clt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function sle(){}function flt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function LSe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}LSe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function FSe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}FSe.description="parse hexadecimal numbers prefixed with 0x";function jSe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}jSe.description="support ISO dates";var SK={loadDsf:llt,std:{math:LSe,hex:FSe,date:jSe}},dlt=function(e,t){var n=C6,r=SK,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(O){return O==="{"||O==="}"||O==="["||O==="]"||O===","||O===":"}function d(O){var L,j=0,B=1;for(L=s-1;L>0&&i[L]!==`
`;L--,j++);for(;L>0;L--)i[L]===`
`&&B++;throw new Error(O+" at line "+B+","+j+" >>>"+i.substr(s-j,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(O){return i.charAt(s+O)}function m(O){for(var L="",j=o;h();){if(o===j)return h(),O&&j==="'"&&o==="'"&&L.length===0?(h(),g()):L;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),$;o>="0"&&o<="9"?$=H-48:o>="a"&&o<="f"?$=H-97+10:o>="A"&&o<="F"?$=H-65+10:d("Bad \\u char "+o),B=B*16+$}L+=String.fromCharCode(B)}else if(typeof a[o]=="string")L+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):L+=o}d("Bad string")}function g(){for(var O="",L=0,j=0;;){var B=p(-j-5);if(!B||B===`
`)break;j++}function U(){for(var H=j;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(L++,h(),L===3)return O.slice(-1)===`
`&&(O=O.slice(0,-1)),O;continue}else for(;L>0;)O+="'",L--;o===`
`?(O+=`
`,h(),U()):(o!=="\r"&&(O+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var O="",L=s,j=-1;;){if(o===":")return O?j>=0&&j!==O.length&&(s=L+j,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),O;o<=" "?o?j<0&&(j=O.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):O+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var O=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var L=o==="\r"||o===`
`||o==="";if(L||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var j=O[0];switch(j){case"f":if(O.trim()==="false")return!1;break;case"n":if(O.trim()==="null")return null;break;case"t":if(O.trim()==="true")return!0;break;default:if(j==="-"||j>="0"&&j<="9"){var B=n.tryParseNumber(O);if(B!==void 0)return B}}if(L){O=O.trim();var U=l(O);return U!==void 0?U:O}}O+=o}}function w(O,L){var j;for(O--,j=s-2;j>O&&i[j]<=" "&&i[j]!==`
`;j--);i[j]===`
`&&j--,i[j]==="\r"&&j--;var B=i.substr(O,j-O+1);for(j=0;j<B.length;j++)if(B[j]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return L&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function x(O){function L(B,U){var H,$,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=L(B[H],U)||W;else for($ in B)Object.prototype.hasOwnProperty.call(B,$)&&(W=L(B[$],U)||W)}return W}function j(B){var U=L(O,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return j("}")||j("]")}function C(){var O=[],L,j,B;try{if(u&&(L=n.createComment(O,{a:[]})),h(),j=s,v(),L&&(B=w(j,!0).join(`
`)),o==="]")return h(),L&&(L.e=[B]),O;for(;o;){if(O.push(S()),j=s,v(),o===","&&(h(),j=s,v()),L){var U=w(j);L.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),L&&(L.a[L.a.length-1][1]+=B||""),O;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||x(O),H}}function E(O){var L="",j={},B,U,H;try{if(u&&(B=n.createComment(j,{c:{},o:[]})),O?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!O)return B&&(B.e=[H]),h(),j;for(;o;){if(L=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),j[L]=S(),U=s,v(),o===","&&(h(),U=s,v()),B){var $=w(U);B.c[L]=[H||"",$[0]||""],H=$[1],B.o.push(L)}if(o==="}"&&!O)return h(),B&&(B.c[L][1]+=H||""),j;v()}if(O)return j;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||x(j),z}}function S(){switch(v(),o){case"{":return E();case"[":return C();case"'":case'"':return m(!0);default:return b()}}function A(O,L){var j=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=L.join(`
`),U=w(j).join(`
`);if(U||B){var H=n.createComment(O,n.getComment(O));H.r=[B,U]}}return O}function k(){v();var O=u?w(1):null;switch(o){case"{":return A(E(),O);case"[":return A(C(),O);default:return A(S(),O)}}function R(){v();var O=u?w(1):null;switch(o){case"{":return A(E(),O);case"[":return A(C(),O)}try{return A(E(!0),O)}catch(L){c();try{return A(S(),O)}catch{throw L}}}if(typeof e!="string")throw new Error("source is not a string");var D=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,D=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(D,"parse"),i=e,c(),P?R():k()},hlt=function(e,t){var n=C6,r=SK,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,x="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+x+"]","g"),E=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),S=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,D="",P=0;function O(W,F){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+F+W[1]}function L(W){return W.replace(C,function(F){var V=k[F];return typeof V=="string"?O(g.esc,V):O(g.uni,("0000"+F.charCodeAt(0).toString(16)).slice(-4))})}function j(W,F,V,G){return W?(E.lastIndex=0,A.lastIndex=0,c||V||E.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(C.lastIndex=0,S.lastIndex=0,C.test(W)?!S.test(W)&&!G&&d?B(W,F):O(g.qstr,L(W)):O(g.qstr,W)):O(g.str,W)):O(g.qstr,"")}function B(W,F){var V,G=W.replace(/\r/g,"").split(`
`);if(F+=o,G.length===1)return O(g.mstr,G[0]);var ee=s+F+g.mstr[0];for(V=0;V<G.length;V++)ee+=s,G[V]&&(ee+=F+G[V]);return ee+s+F+g.mstr[1]}function U(W){return W?l||R.test(W)?(C.lastIndex=0,O(g.qkey,C.test(W)?L(W):W)):O(g.key,W):'""'}function H(W,F,V,G){function ee(yn){return yn&&yn[yn[0]==="\r"?1:0]===`
`}function le(yn){return yn&&!ee(yn)}function de(yn,yr,Qt){if(!yn)return"";yn=n.forceComment(yn);var Wr,ei=yn.length;for(Wr=0;Wr<ei&&yn[Wr]<=" ";Wr++);return Qt&&Wr>0&&(yn=yn.substr(Wr)),Wr<ei?yr+O(g.rem,yn):yn}var he=w(W);if(he!==void 0)return O(g.dsf,he);switch(typeof W){case"string":return j(W,D,F,G);case"number":return isFinite(W)?O(g.num,String(W)):O(g.lit,"null");case"boolean":return O(g.lit,String(W));case"object":if(!W)return O(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ce=Object.prototype.toString.apply(W)==="[object Array]",ve=D;D+=o;var Ye=s+ve,Ue=s+D,mt=V||u?"":Ye,it=[],be,Ae=f?[]:null,Ve=c,lt=d,Nt=h?"":g.com[0],qe=0,me,ft,yt,Et,pe,Ie,Ke,bt,Vt;if(Ce){for(me=0,ft=W.length;me<ft;me++){if(be=me<ft-1,ye?(Ie=ye.a[me]||[],Ke=le(Ie[1]),it.push(de(Ie[0],`
`)+Ue),Ae&&(Ie[0]||Ie[1]||Ke)&&(Ae=null)):it.push(Ue),P=0,Et=W[me],it.push(H(Et,ye?Ke:!1,!0)+(be?h:"")),Ae){switch(typeof Et){case"string":P=0,c=!0,d=0,Ae.push(H(Et,!1,!0)+(be?g.com[0]:"")),c=Ve,d=lt;break;case"object":if(Et){Ae=null;break}default:Ae.push(it[it.length-1]+(be?Nt:""));break}be&&(P+=g.com[0].length-g.com[2]),qe+=P}ye&&Ie[1]&&it.push(de(Ie[1],Ke?" ":`
`,Ke))}ft===0?ye&&ye.e&&it.push(de(ye.e[0],`
`)+Ye):it.push(Ye),it.length===0?bt=O(g.arr,""):(bt=mt+O(g.arr,it.join("")),Ae&&(Vt=Ae.join(" "),Vt.length-qe<=f&&(bt=O(g.arr,Vt))))}else{var rr=ye?ye.o.slice():[],qn=[];for(yt in W)Object.prototype.hasOwnProperty.call(W,yt)&&rr.indexOf(yt)<0&&qn.push(yt);m&&qn.sort();var Ln=rr.concat(qn);for(me=0,ft=Ln.length;me<ft;me++)if(be=me<ft-1,yt=Ln[me],ye?(Ie=ye.c[yt]||[],Ke=le(Ie[1]),it.push(de(Ie[0],`
`)+Ue),Ae&&(Ie[0]||Ie[1]||Ke)&&(Ae=null)):it.push(Ue),P=0,Et=W[yt],pe=H(Et,ye&&Ke),it.push(U(yt)+g.col[0]+(ee(pe)?"":" ")+pe+(be?h:"")),ye&&Ie[1]&&it.push(de(Ie[1],Ke?" ":`
`,Ke)),Ae){switch(typeof Et){case"string":P=0,c=!0,d=0,pe=H(Et,!1),c=Ve,d=lt,Ae.push(U(yt)+g.col[0]+" "+pe+(be?g.com[0]:""));break;case"object":if(Et){Ae=null;break}default:Ae.push(it[it.length-1]+(be?Nt:""));break}P+=g.col[0].length-g.col[2],be&&(P+=g.com[0].length-g.com[2]),qe+=P}ft===0?ye&&ye.e&&it.push(de(ye.e[0],`
`)+Ye):it.push(Ye),it.length===0?bt=O(g.obj,""):(bt=mt+O(g.obj,it.join("")),Ae&&(Vt=Ae.join(" "),Vt.length-qe<=f&&(bt=O(g.obj,Vt))))}return D=ve,bt}}w=r.loadDsf(p,"stringify");var $="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&($=z[0]+`
`),$+=H(e,null,!0,!0),z&&($+=z[1]||""),$},Vw=C6;function a2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function YU(e,t){if(!(e===null||typeof e!="object")){var n=Vw.getComment(e);n&&Vw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)ole(o.a,r,n.a[r],YU(e[r]))&&(s=!0);!s&&n.e&&(o.e=a2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];ole(o.s,l,n.c[l],YU(e[l]))&&(s=!0)}!s&&n.e&&(o.e=a2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=a2(n.r[0],n.r[1])),s?o:void 0}}function plt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function mlt(e,t){var n=[];if(KU(e,t,n,[]),n.length>0){var r=GD(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+plt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),GD(t,r,1)}}function ole(e,t,n,r){var i=a2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function u2(e,t){var n=a2(t.b,t.a);return n.path=e,n}function l2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(u2(s,o)),l2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(u2(u,l)),l2(l.x,t,u))});e.e&&t.push(u2(n,e.e))}}function KU(e,t,n,r){if(e){if(t===null||typeof t!="object"){l2(e,n,r);return}var i,s=Vw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],KU(u.x,t[i],n,l)):(n.push(u2(l,u)),l2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],KU(d.x,t[c],n,f))):d&&(n.push(u2(f,d)),l2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function GD(e,t,n){var r=Vw.createComment(e,Vw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Vw.forceComment(t)),r.r[n]||""}var glt={extract:function(e){return YU(e,!0)},merge:mlt,header:function(e,t){return GD(e,t,0)},footer:function(e,t){return GD(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var ale=C6,ylt=ult,ule=dlt,lle=hlt,vlt=glt,blt=SK,TK={parse:ule,stringify:lle,endOfLine:function(){return ale.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(ale.EOL=e)},version:ylt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,ule(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,lle(e,t)}},comments:vlt,dsf:blt.std},XU={exports:{}},BSe={},Gf={},AE={},nk={},Pn={},yA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(yA);var QU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=yA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(QU);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=yA,n=QU;var r=yA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=QU;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(V,G){return this}}class o extends s{constructor(V,G,ee){super(),this.varKind=V,this.name=G,this.rhs=ee}render({es5:V,_n:G}){const ee=V?n.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${ee} ${this.name}${le};`+G}optimizeNames(V,G){if(V[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,V,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(V,G,ee){super(),this.lhs=V,this.rhs=G,this.sideEffects=ee}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,G){if(!(this.lhs instanceof t.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,V,G),this}get names(){const V=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(V,this.rhs)}}class u extends a{constructor(V,G,ee,le){super(V,ee,le),this.op=G}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class l extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class c extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends s{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends s{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,G){return this.code=O(this.code,V,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((G,ee)=>G+ee.render(V),"")}optimizeNodes(){const{nodes:V}=this;let G=V.length;for(;G--;){const ee=V[G].optimizeNodes();Array.isArray(ee)?V.splice(G,1,...ee):ee?V[G]=ee:V.splice(G,1)}return V.length>0?this:void 0}optimizeNames(V,G){const{nodes:ee}=this;let le=ee.length;for(;le--;){const de=ee[le];de.optimizeNames(V,G)||(L(V,de.names),ee.splice(le,1))}return ee.length>0?this:void 0}get names(){return this.nodes.reduce((V,G)=>D(V,G.names),{})}}class p extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(V,G){super(G),this.condition=V}render(V){let G=`if(${this.condition})`+super.render(V);return this.else&&(G+="else "+this.else.render(V)),G}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let G=this.else;if(G){const ee=G.optimizeNodes();G=this.else=Array.isArray(ee)?new g(ee):ee}if(G)return V===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(j(V),G instanceof y?[G]:G.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,G){var ee;if(this.else=(ee=this.else)===null||ee===void 0?void 0:ee.optimizeNames(V,G),!!(super.optimizeNames(V,G)||this.else))return this.condition=O(this.condition,V,G),this}get names(){const V=super.names;return P(V,this.condition),this.else&&D(V,this.else.names),V}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,G){if(super.optimizeNames(V,G))return this.iteration=O(this.iteration,V,G),this}get names(){return D(super.names,this.iteration.names)}}class w extends v{constructor(V,G,ee,le){super(),this.varKind=V,this.name=G,this.from=ee,this.to=le}render(V){const G=V.es5?n.varKinds.var:this.varKind,{name:ee,from:le,to:de}=this;return`for(${G} ${ee}=${le}; ${ee}<${de}; ${ee}++)`+super.render(V)}get names(){const V=P(super.names,this.from);return P(V,this.to)}}class x extends v{constructor(V,G,ee,le){super(),this.loop=V,this.varKind=G,this.name=ee,this.iterable=le}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,G){if(super.optimizeNames(V,G))return this.iterable=O(this.iterable,V,G),this}get names(){return D(super.names,this.iterable.names)}}class C extends p{constructor(V,G,ee){super(),this.name=V,this.args=G,this.async=ee}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}C.kind="func";class E extends h{render(V){return"return "+super.render(V)}}E.kind="return";class S extends p{render(V){let G="try"+super.render(V);return this.catch&&(G+=this.catch.render(V)),this.finally&&(G+=this.finally.render(V)),G}optimizeNodes(){var V,G;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(V,G){var ee,le;return super.optimizeNames(V,G),(ee=this.catch)===null||ee===void 0||ee.optimizeNames(V,G),(le=this.finally)===null||le===void 0||le.optimizeNames(V,G),this}get names(){const V=super.names;return this.catch&&D(V,this.catch.names),this.finally&&D(V,this.finally.names),V}}class A extends p{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}A.kind="catch";class k extends p{render(V){return"finally"+super.render(V)}}k.kind="finally";class R{constructor(V,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,G){const ee=this._extScope.value(V,G);return(this._values[ee.prefix]||(this._values[ee.prefix]=new Set)).add(ee),ee}getScopeValue(V,G){return this._extScope.getValue(V,G)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,G,ee,le){const de=this._scope.toName(G);return ee!==void 0&&le&&(this._constants[de.str]=ee),this._leafNode(new o(V,de,ee)),de}const(V,G,ee){return this._def(n.varKinds.const,V,G,ee)}let(V,G,ee){return this._def(n.varKinds.let,V,G,ee)}var(V,G,ee){return this._def(n.varKinds.var,V,G,ee)}assign(V,G,ee){return this._leafNode(new a(V,G,ee))}add(V,G){return this._leafNode(new u(V,e.operators.ADD,G))}code(V){return typeof V=="function"?V():V!==t.nil&&this._leafNode(new d(V)),this}object(...V){const G=["{"];for(const[ee,le]of V)G.length>1&&G.push(","),G.push(ee),(ee!==le||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,le));return G.push("}"),new t._Code(G)}if(V,G,ee){if(this._blockNode(new y(V)),G&&ee)this.code(G).else().code(ee).endIf();else if(G)this.code(G).endIf();else if(ee)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new y(V))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(V,G){return this._blockNode(V),G&&this.code(G).endFor(),this}for(V,G){return this._for(new b(V),G)}forRange(V,G,ee,le,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(V);return this._for(new w(de,he,G,ee),()=>le(he))}forOf(V,G,ee,le=n.varKinds.const){const de=this._scope.toName(V);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ee(de)})}return this._for(new x("of",le,de,G),()=>ee(de))}forIn(V,G,ee,le=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,t._)`Object.keys(${G})`,ee);const de=this._scope.toName(V);return this._for(new x("in",le,de,G),()=>ee(de))}endFor(){return this._endBlockNode(v)}label(V){return this._leafNode(new l(V))}break(V){return this._leafNode(new c(V))}return(V){const G=new E;if(this._blockNode(G),this.code(V),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(V,G,ee){if(!G&&!ee)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new S;if(this._blockNode(le),this.code(V),G){const de=this.name("e");this._currNode=le.catch=new A(de),G(de)}return ee&&(this._currNode=le.finally=new k,this.code(ee)),this._endBlockNode(A,k)}throw(V){return this._leafNode(new f(V))}block(V,G){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(G),this}endBlock(V){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ee=this._nodes.length-G;if(ee<0||V!==void 0&&ee!==V)throw new Error(`CodeGen: wrong number of nodes: ${ee} vs ${V} expected`);return this._nodes.length=G,this}func(V,G=t.nil,ee,le){return this._blockNode(new C(V,G,ee)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,G){const ee=this._currNode;if(ee instanceof V||G&&ee instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${V.kind}/${G.kind}`:V.kind}"`)}_elseNode(V){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const G=this._nodes;G[G.length-1]=V}}e.CodeGen=R;function D(F,V){for(const G in V)F[G]=(F[G]||0)+(V[G]||0);return F}function P(F,V){return V instanceof t._CodeOrName?D(F,V.names):F}function O(F,V,G){if(F instanceof t.Name)return ee(F);if(!le(F))return F;return new t._Code(F._items.reduce((de,he)=>(he instanceof t.Name&&(he=ee(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ee(de){const he=G[de.str];return he===void 0||V[de.str]!==1?de:(delete V[de.str],he)}function le(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&V[he.str]===1&&G[he.str]!==void 0)}}function L(F,V){for(const G in V)F[G]=(F[G]||0)-(V[G]||0)}function j(F){return typeof F=="boolean"||typeof F=="number"||F===null?!F:(0,t._)`!${W(F)}`}e.not=j;const B=z(e.operators.AND);function U(...F){return F.reduce(B)}e.and=U;const H=z(e.operators.OR);function $(...F){return F.reduce(H)}e.or=$;function z(F){return(V,G)=>V===t.nil?G:G===t.nil?V:(0,t._)`${W(V)} ${F} ${W(G)}`}function W(F){return F instanceof t.Name?F:(0,t._)`(${F})`}})(Pn);var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.checkStrictMode=_t.getErrorPath=_t.Type=_t.useFunc=_t.setEvaluated=_t.evaluatedPropsToName=_t.mergeEvaluated=_t.eachItem=_t.unescapeJsonPointer=_t.escapeJsonPointer=_t.escapeFragment=_t.unescapeFragment=_t.schemaRefOrVal=_t.schemaHasRulesButRef=_t.schemaHasRules=_t.checkUnknownRules=_t.alwaysValidSchema=_t.toHash=void 0;const Jr=Pn,_lt=yA;function wlt(e){const t={};for(const n of e)t[n]=!0;return t}_t.toHash=wlt;function Elt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(USe(e,t),!zSe(t,e.self.RULES.all))}_t.alwaysValidSchema=Elt;function USe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||qSe(e,`unknown keyword: "${s}"`)}_t.checkUnknownRules=USe;function zSe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}_t.schemaHasRules=zSe;function xlt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}_t.schemaHasRulesButRef=xlt;function Slt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Jr._)`${n}`}return(0,Jr._)`${e}${t}${(0,Jr.getProperty)(r)}`}_t.schemaRefOrVal=Slt;function Tlt(e){return VSe(decodeURIComponent(e))}_t.unescapeFragment=Tlt;function Clt(e){return encodeURIComponent(CK(e))}_t.escapeFragment=Clt;function CK(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}_t.escapeJsonPointer=CK;function VSe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}_t.unescapeJsonPointer=VSe;function Alt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}_t.eachItem=Alt;function cle({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Jr.Name?(s instanceof Jr.Name?e(i,s,o):t(i,s,o),o):s instanceof Jr.Name?(t(i,o,s),s):n(s,o);return a===Jr.Name&&!(u instanceof Jr.Name)?r(i,u):u}}_t.mergeEvaluated={props:cle({mergeNames:(e,t,n)=>e.if((0,Jr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Jr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Jr._)`${n} || {}`).code((0,Jr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Jr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Jr._)`${n} || {}`),AK(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:HSe}),items:cle({mergeNames:(e,t,n)=>e.if((0,Jr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Jr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Jr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Jr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function HSe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Jr._)`{}`);return t!==void 0&&AK(e,n,t),n}_t.evaluatedPropsToName=HSe;function AK(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Jr._)`${t}${(0,Jr.getProperty)(r)}`,!0))}_t.setEvaluated=AK;const fle={};function Ilt(e,t){return e.scopeValue("func",{ref:t,code:fle[t.code]||(fle[t.code]=new _lt._Code(t.code))})}_t.useFunc=Ilt;var JU;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(JU||(_t.Type=JU={}));function klt(e,t,n){if(e instanceof Jr.Name){const r=t===JU.Num;return n?r?(0,Jr._)`"[" + ${e} + "]"`:(0,Jr._)`"['" + ${e} + "']"`:r?(0,Jr._)`"/" + ${e}`:(0,Jr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Jr.getProperty)(e).toString():"/"+CK(e)}_t.getErrorPath=klt;function qSe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}_t.checkStrictMode=qSe;var ap={};Object.defineProperty(ap,"__esModule",{value:!0});const ea=Pn,Rlt={data:new ea.Name("data"),valCxt:new ea.Name("valCxt"),instancePath:new ea.Name("instancePath"),parentData:new ea.Name("parentData"),parentDataProperty:new ea.Name("parentDataProperty"),rootData:new ea.Name("rootData"),dynamicAnchors:new ea.Name("dynamicAnchors"),vErrors:new ea.Name("vErrors"),errors:new ea.Name("errors"),this:new ea.Name("this"),self:new ea.Name("self"),scope:new ea.Name("scope"),json:new ea.Name("json"),jsonPos:new ea.Name("jsonPos"),jsonLen:new ea.Name("jsonLen"),jsonPart:new ea.Name("jsonPart")};ap.default=Rlt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=_t,r=ap;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:x,compositeRule:C,allErrors:E}=w,S=f(g,y,v);b??(C||E)?u(x,S):l(w,(0,t._)`[${S}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:x,allErrors:C}=b,E=f(g,y,v);u(w,E),x||C||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:x}){if(w===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",w,r.default.errors,E=>{g.const(C,(0,t._)`${r.default.vErrors}[${E}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${C}.schema`,v),g.assign((0,t._)`${C}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,x=[h(w,v),p(g,v)];return m(g,y,x),b.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:x,schemaValue:C,it:E}=g,{opts:S,propertyName:A,topSchemaRef:k,schemaPath:R}=E;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),S.messages&&b.push([c.message,typeof v=="function"?v(g):v]),S.verbose&&b.push([c.schema,C],[c.parentSchema,(0,t._)`${k}${R}`],[r.default.data,x]),A&&b.push([c.propertyName,A])}})(nk);Object.defineProperty(AE,"__esModule",{value:!0});AE.boolOrEmptySchema=AE.topBoolOrEmptySchema=void 0;const Nlt=nk,Plt=Pn,Olt=ap,Dlt={message:"boolean schema is false"};function $lt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?WSe(e,!1):typeof n=="object"&&n.$async===!0?t.return(Olt.default.data):(t.assign((0,Plt._)`${r}.errors`,null),t.return(!0))}AE.topBoolOrEmptySchema=$lt;function Mlt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),WSe(e)):n.var(t,!0)}AE.boolOrEmptySchema=Mlt;function WSe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Nlt.reportError)(i,Dlt,void 0,t)}var Is={},G1={};Object.defineProperty(G1,"__esModule",{value:!0});G1.getRules=G1.isJSONType=void 0;const Llt=["string","number","integer","boolean","null","object","array"],Flt=new Set(Llt);function jlt(e){return typeof e=="string"&&Flt.has(e)}G1.isJSONType=jlt;function Blt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}G1.getRules=Blt;var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.shouldUseRule=pm.shouldUseGroup=pm.schemaHasRulesForType=void 0;function Ult({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&GSe(e,r)}pm.schemaHasRulesForType=Ult;function GSe(e,t){return t.rules.some(n=>YSe(e,n))}pm.shouldUseGroup=GSe;function YSe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}pm.shouldUseRule=YSe;Object.defineProperty(Is,"__esModule",{value:!0});Is.reportTypeError=Is.checkDataTypes=Is.checkDataType=Is.coerceAndCheckDataType=Is.getJSONTypes=Is.getSchemaTypes=Is.DataType=void 0;const zlt=G1,Vlt=pm,Hlt=nk,Sn=Pn,KSe=_t;var Hw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Hw||(Is.DataType=Hw={}));function qlt(e){const t=XSe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Is.getSchemaTypes=qlt;function XSe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(zlt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Is.getJSONTypes=XSe;function Wlt(e,t){const{gen:n,data:r,opts:i}=e,s=Glt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Vlt.schemaHasRulesForType)(e,t[0]));if(o){const a=IK(t,r,i.strictNumbers,Hw.Wrong);n.if(a,()=>{s.length?Ylt(e,t,s):kK(e)})}return o}Is.coerceAndCheckDataType=Wlt;const QSe=new Set(["string","number","integer","boolean","null"]);function Glt(e,t){return t?e.filter(n=>QSe.has(n)||t==="array"&&n==="array"):[]}function Ylt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Sn._)`typeof ${i}`),a=r.let("coerced",(0,Sn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Sn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Sn._)`${i}[0]`).assign(o,(0,Sn._)`typeof ${i}`).if(IK(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Sn._)`${a} !== undefined`);for(const l of n)(QSe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),kK(e),r.endIf(),r.if((0,Sn._)`${a} !== undefined`,()=>{r.assign(i,a),Klt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Sn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Sn._)`"" + ${i}`).elseIf((0,Sn._)`${i} === null`).assign(a,(0,Sn._)`""`);return;case"number":r.elseIf((0,Sn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Sn._)`+${i}`);return;case"integer":r.elseIf((0,Sn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Sn._)`+${i}`);return;case"boolean":r.elseIf((0,Sn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Sn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Sn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Sn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Sn._)`[${i}]`)}}}function Klt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Sn._)`${t} !== undefined`,()=>e.assign((0,Sn._)`${t}[${n}]`,r))}function ZU(e,t,n,r=Hw.Correct){const i=r===Hw.Correct?Sn.operators.EQ:Sn.operators.NEQ;let s;switch(e){case"null":return(0,Sn._)`${t} ${i} null`;case"array":s=(0,Sn._)`Array.isArray(${t})`;break;case"object":s=(0,Sn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Sn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Sn._)`typeof ${t} ${i} ${e}`}return r===Hw.Correct?s:(0,Sn.not)(s);function o(a=Sn.nil){return(0,Sn.and)((0,Sn._)`typeof ${t} == "number"`,a,n?(0,Sn._)`isFinite(${t})`:Sn.nil)}}Is.checkDataType=ZU;function IK(e,t,n,r){if(e.length===1)return ZU(e[0],t,n,r);let i;const s=(0,KSe.toHash)(e);if(s.array&&s.object){const o=(0,Sn._)`typeof ${t} != "object"`;i=s.null?o:(0,Sn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Sn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Sn.and)(i,ZU(o,t,n,r));return i}Is.checkDataTypes=IK;const Xlt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Sn._)`{type: ${e}}`:(0,Sn._)`{type: ${t}}`};function kK(e){const t=Qlt(e);(0,Hlt.reportError)(t,Xlt)}Is.reportTypeError=kK;function Qlt(e){const{gen:t,data:n,schema:r}=e,i=(0,KSe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var A6={};Object.defineProperty(A6,"__esModule",{value:!0});A6.assignDefaults=void 0;const w_=Pn,Jlt=_t;function Zlt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)dle(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>dle(e,s,i.default))}A6.assignDefaults=Zlt;function dle(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,w_._)`${s}${(0,w_.getProperty)(t)}`;if(i){(0,Jlt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,w_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,w_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,w_._)`${a} = ${(0,w_.stringify)(n)}`)}var dh={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.validateUnion=Rn.validateArray=Rn.usePattern=Rn.callValidateCode=Rn.schemaProperties=Rn.allSchemaProperties=Rn.noPropertyInData=Rn.propertyInData=Rn.isOwnProperty=Rn.hasPropFunc=Rn.reportMissingProp=Rn.checkMissingProp=Rn.checkReportMissingProp=void 0;const pi=Pn,RK=_t,Tg=ap,ect=_t;function tct(e,t){const{gen:n,data:r,it:i}=e;n.if(PK(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,pi._)`${t}`},!0),e.error()})}Rn.checkReportMissingProp=tct;function nct({gen:e,data:t,it:{opts:n}},r,i){return(0,pi.or)(...r.map(s=>(0,pi.and)(PK(e,t,s,n.ownProperties),(0,pi._)`${i} = ${s}`)))}Rn.checkMissingProp=nct;function rct(e,t){e.setParams({missingProperty:t},!0),e.error()}Rn.reportMissingProp=rct;function JSe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,pi._)`Object.prototype.hasOwnProperty`})}Rn.hasPropFunc=JSe;function NK(e,t,n){return(0,pi._)`${JSe(e)}.call(${t}, ${n})`}Rn.isOwnProperty=NK;function ict(e,t,n,r){const i=(0,pi._)`${t}${(0,pi.getProperty)(n)} !== undefined`;return r?(0,pi._)`${i} && ${NK(e,t,n)}`:i}Rn.propertyInData=ict;function PK(e,t,n,r){const i=(0,pi._)`${t}${(0,pi.getProperty)(n)} === undefined`;return r?(0,pi.or)(i,(0,pi.not)(NK(e,t,n))):i}Rn.noPropertyInData=PK;function ZSe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Rn.allSchemaProperties=ZSe;function sct(e,t){return ZSe(t).filter(n=>!(0,RK.alwaysValidSchema)(e,t[n]))}Rn.schemaProperties=sct;function oct({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,pi._)`${e}, ${t}, ${r}${i}`:t,f=[[Tg.default.instancePath,(0,pi.strConcat)(Tg.default.instancePath,s)],[Tg.default.parentData,o.parentData],[Tg.default.parentDataProperty,o.parentDataProperty],[Tg.default.rootData,Tg.default.rootData]];o.opts.dynamicRef&&f.push([Tg.default.dynamicAnchors,Tg.default.dynamicAnchors]);const d=(0,pi._)`${c}, ${n.object(...f)}`;return u!==pi.nil?(0,pi._)`${a}.call(${u}, ${d})`:(0,pi._)`${a}(${d})`}Rn.callValidateCode=oct;const act=(0,pi._)`new RegExp`;function uct({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,pi._)`${i.code==="new RegExp"?act:(0,ect.useFunc)(e,i)}(${n}, ${r})`})}Rn.usePattern=uct;function lct(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,pi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:RK.Type.Num},s),t.if((0,pi.not)(s),a)})}}Rn.validateArray=lct;function cct(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,RK.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,pi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,pi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Rn.validateUnion=cct;Object.defineProperty(dh,"__esModule",{value:!0});dh.validateKeywordUsage=dh.validSchemaType=dh.funcKeywordCode=dh.macroKeywordCode=void 0;const Ua=Pn,zv=ap,fct=Rn,dct=nk;function hct(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=eTe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Ua.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}dh.macroKeywordCode=hct;function pct(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;gct(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=eTe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&hle(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&hle(e),g(()=>mct(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Ua._)`await `),v=>r.assign(f,!1).if((0,Ua._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Ua._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Ua._)`${c}.errors`;return r.assign(y,null),m(Ua.nil),y}function m(y=t.async?(0,Ua._)`await `:Ua.nil){const v=u.opts.passContext?zv.default.this:zv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Ua._)`${y}${(0,fct.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Ua.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}dh.funcKeywordCode=pct;function hle(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Ua._)`${r.parentData}[${r.parentDataProperty}]`))}function mct(e,t){const{gen:n}=e;n.if((0,Ua._)`Array.isArray(${t})`,()=>{n.assign(zv.default.vErrors,(0,Ua._)`${zv.default.vErrors} === null ? ${t} : ${zv.default.vErrors}.concat(${t})`).assign(zv.default.errors,(0,Ua._)`${zv.default.vErrors}.length`),(0,dct.extendErrors)(e)},()=>e.error())}function gct({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function eTe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ua.stringify)(n)})}function yct(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}dh.validSchemaType=yct;function vct({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}dh.validateKeywordUsage=vct;var k0={};Object.defineProperty(k0,"__esModule",{value:!0});k0.extendSubschemaMode=k0.extendSubschemaData=k0.getSubschema=void 0;const Zd=Pn,tTe=_t;function bct(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Zd._)`${e.schemaPath}${(0,Zd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Zd._)`${e.schemaPath}${(0,Zd.getProperty)(t)}${(0,Zd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,tTe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}k0.getSubschema=bct;function _ct(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Zd._)`${t.data}${(0,Zd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Zd.str)`${l}${(0,tTe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Zd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Zd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}k0.extendSubschemaData=_ct;function wct(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}k0.extendSubschemaMode=wct;var Io={},OK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const JP=Ho(OK);var nTe={exports:{}},o0=nTe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};ZP(t,r,i,e,"",e)};o0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};o0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};o0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};o0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ZP(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in o0.arrayKeywords)for(var d=0;d<f.length;d++)ZP(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in o0.propsKeywords){if(f&&typeof f=="object")for(var h in f)ZP(e,t,n,f[h],i+"/"+c+"/"+Ect(h),s,i,c,r,h)}else(c in o0.keywords||e.allKeys&&!(c in o0.skipKeywords))&&ZP(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function Ect(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var xct=nTe.exports;Object.defineProperty(Io,"__esModule",{value:!0});Io.getSchemaRefs=Io.resolveUrl=Io.normalizeId=Io._getFullPath=Io.getFullPath=Io.inlineRef=void 0;const Sct=_t,Tct=OK,Cct=xct,Act=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Ict(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ez(e):t?rTe(e)<=t:!1}Io.inlineRef=Ict;const kct=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ez(e){for(const t in e){if(kct.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(ez)||typeof n=="object"&&ez(n))return!0}return!1}function rTe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Act.has(n)&&(typeof e[n]=="object"&&(0,Sct.eachItem)(e[n],r=>t+=rTe(r)),t===1/0))return 1/0}return t}function iTe(e,t="",n){n!==!1&&(t=qw(t));const r=e.parse(t);return sTe(e,r)}Io.getFullPath=iTe;function sTe(e,t){return e.serialize(t).split("#")[0]+"#"}Io._getFullPath=sTe;const Rct=/#\/?$/;function qw(e){return e?e.replace(Rct,""):""}Io.normalizeId=qw;function Nct(e,t,n){return n=qw(n),e.resolve(t,n)}Io.resolveUrl=Nct;const Pct=/^[a-z_][-a-z0-9._]*$/i;function Oct(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=qw(e[n]||t),s={"":i},o=iTe(r,i,!1),a={},u=new Set;return Cct(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=qw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let x=this.refs[b];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?l(f,x.schema,b):b!==qw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!Pct.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!Tct(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Io.getSchemaRefs=Oct;Object.defineProperty(Gf,"__esModule",{value:!0});Gf.getData=Gf.KeywordCxt=Gf.validateFunctionCode=void 0;const oTe=AE,ple=Is,DK=pm,YD=Is,Dct=A6,c2=dh,Sj=k0,Ot=Pn,sn=ap,$ct=Io,mm=_t,pT=nk;function Mct(e){if(lTe(e)&&(cTe(e),uTe(e))){jct(e);return}aTe(e,()=>(0,oTe.topBoolOrEmptySchema)(e))}Gf.validateFunctionCode=Mct;function aTe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${sn.default.data}, ${sn.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${mle(n,i)}`),Fct(e,i),e.code(s)}):e.func(t,(0,Ot._)`${sn.default.data}, ${Lct(i)}`,r.$async,()=>e.code(mle(n,i)).code(s))}function Lct(e){return(0,Ot._)`{${sn.default.instancePath}="", ${sn.default.parentData}, ${sn.default.parentDataProperty}, ${sn.default.rootData}=${sn.default.data}${e.dynamicRef?(0,Ot._)`, ${sn.default.dynamicAnchors}={}`:Ot.nil}}={}`}function Fct(e,t){e.if(sn.default.valCxt,()=>{e.var(sn.default.instancePath,(0,Ot._)`${sn.default.valCxt}.${sn.default.instancePath}`),e.var(sn.default.parentData,(0,Ot._)`${sn.default.valCxt}.${sn.default.parentData}`),e.var(sn.default.parentDataProperty,(0,Ot._)`${sn.default.valCxt}.${sn.default.parentDataProperty}`),e.var(sn.default.rootData,(0,Ot._)`${sn.default.valCxt}.${sn.default.rootData}`),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Ot._)`${sn.default.valCxt}.${sn.default.dynamicAnchors}`)},()=>{e.var(sn.default.instancePath,(0,Ot._)`""`),e.var(sn.default.parentData,(0,Ot._)`undefined`),e.var(sn.default.parentDataProperty,(0,Ot._)`undefined`),e.var(sn.default.rootData,sn.default.data),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Ot._)`{}`)})}function jct(e){const{schema:t,opts:n,gen:r}=e;aTe(e,()=>{n.$comment&&t.$comment&&dTe(e),Hct(e),r.let(sn.default.vErrors,null),r.let(sn.default.errors,0),n.unevaluated&&Bct(e),fTe(e),Gct(e)})}function Bct(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function mle(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function Uct(e,t){if(lTe(e)&&(cTe(e),uTe(e))){zct(e,t);return}(0,oTe.boolOrEmptySchema)(e,t)}function uTe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function lTe(e){return typeof e.schema!="boolean"}function zct(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&dTe(e),qct(e),Wct(e);const s=r.const("_errs",sn.default.errors);fTe(e,s),r.var(t,(0,Ot._)`${s} === ${sn.default.errors}`)}function cTe(e){(0,mm.checkUnknownRules)(e),Vct(e)}function fTe(e,t){if(e.opts.jtd)return gle(e,[],!1,t);const n=(0,ple.getSchemaTypes)(e.schema),r=(0,ple.coerceAndCheckDataType)(e,n);gle(e,n,!r,t)}function Vct(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,mm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Hct(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,mm.checkStrictMode)(e,"default is ignored in the schema root")}function qct(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,$ct.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Wct(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function dTe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${sn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${sn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Gct(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${sn.default.errors} === 0`,()=>t.return(sn.default.data),()=>t.throw((0,Ot._)`new ${i}(${sn.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,sn.default.vErrors),s.unevaluated&&Yct(e),t.return((0,Ot._)`${sn.default.errors} === 0`))}function Yct({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function gle(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,mm.schemaHasRulesButRef)(s,c))){i.block(()=>mTe(e,"$ref",c.all.$ref.definition));return}u.jtd||Kct(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,DK.shouldUseGroup)(s,d)&&(d.type?(i.if((0,YD.checkDataType)(d.type,o,u.strictNumbers)),yle(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,YD.reportTypeError)(e)),i.endIf()):yle(e,d),a||i.if((0,Ot._)`${sn.default.errors} === ${r||0}`))}}function yle(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,Dct.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,DK.shouldUseRule)(r,s)&&mTe(e,s.keyword,s.definition,t.type)})}function Kct(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Xct(e,t),e.opts.allowUnionTypes||Qct(e,t),Jct(e,e.dataTypes))}function Xct(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{hTe(e.dataTypes,n)||$K(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),eft(e,t)}}function Qct(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&$K(e,"use allowUnionTypes to allow union type keyword")}function Jct(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,DK.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Zct(t,o))&&$K(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Zct(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function hTe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function eft(e,t){const n=[];for(const r of e.dataTypes)hTe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function $K(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,mm.checkStrictMode)(e,t,e.opts.strictTypes)}class pTe{constructor(t,n,r){if((0,c2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,mm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",gTe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,c2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",sn.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?pT.reportExtraError:pT.reportError)(this,this.def.error,n)}$dataError(){(0,pT.reportError)(this,this.def.$dataError||pT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,pT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,YD.checkDataTypes)(u,n,s.opts.strictNumbers,YD.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${u}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,Sj.getSubschema)(this.it,t);(0,Sj.extendSubschemaData)(r,this.it,t),(0,Sj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Uct(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=mm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=mm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}Gf.KeywordCxt=pTe;function mTe(e,t,n,r){const i=new pTe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,c2.funcKeywordCode)(i,n):"macro"in n?(0,c2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,c2.funcKeywordCode)(i,n)}const tft=/^\/(?:[^~]|~0|~1)*$/,nft=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function gTe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return sn.default.rootData;if(e[0]==="/"){if(!tft.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=sn.default.rootData}else{const l=nft.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,mm.unescapeJsonPointer)(l))}`,o=(0,Ot._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Gf.getData=gTe;var rk={};Object.defineProperty(rk,"__esModule",{value:!0});class rft extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}rk.default=rft;var eS={};Object.defineProperty(eS,"__esModule",{value:!0});const Tj=Io;class ift extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Tj.resolveUrl)(t,n,r),this.missingSchema=(0,Tj.normalizeId)((0,Tj.getFullPath)(t,this.missingRef))}}eS.default=ift;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.resolveSchema=Pu.getCompilingSchema=Pu.resolveRef=Pu.compileSchema=Pu.SchemaEnv=void 0;const cf=Pn,sft=rk,hv=ap,Nf=Io,vle=_t,oft=Gf;class I6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Nf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Pu.SchemaEnv=I6;function MK(e){const t=yTe.call(this,e);if(t)return t;const n=(0,Nf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new cf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:sft.default,code:(0,cf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:hv.default.data,parentData:hv.default.parentData,parentDataProperty:hv.default.parentDataProperty,dataNames:[hv.default.data],dataPathArr:[cf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,cf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:cf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,cf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,oft.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(hv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${hv.default.self}`,`${hv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof cf.Name?void 0:p,items:m instanceof cf.Name?void 0:m,dynamicProps:p instanceof cf.Name,dynamicItems:m instanceof cf.Name},h.source&&(h.source.evaluated=(0,cf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Pu.compileSchema=MK;function aft(e,t,n){var r;n=(0,Nf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=cft.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new I6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=uft.call(this,s)}Pu.resolveRef=aft;function uft(e){return(0,Nf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:MK.call(this,e)}function yTe(e){for(const t of this._compilations)if(lft(t,e))return t}Pu.getCompilingSchema=yTe;function lft(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function cft(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||k6.call(this,e,t)}function k6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Nf._getFullPath)(this.opts.uriResolver,n);let i=(0,Nf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Cj.call(this,n,e);const s=(0,Nf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=k6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Cj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||MK.call(this,o),s===(0,Nf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Nf.resolveUrl)(this.opts.uriResolver,i,l)),new I6({schema:a,schemaId:u,root:e,baseId:i})}return Cj.call(this,n,o)}}Pu.resolveSchema=k6;const fft=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Cj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,vle.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!fft.has(a)&&l&&(t=(0,Nf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,vle.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Nf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=k6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new I6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const dft="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",hft="Meta-schema for $data reference (JSON AnySchema extension proposal)",pft="object",mft=["$data"],gft={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},yft=!1,vft={$id:dft,description:hft,type:pft,required:mft,properties:gft,additionalProperties:yft};var LK={},tz={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(No,function(n){function r(){for(var oe=arguments.length,te=Array(oe),ae=0;ae<oe;ae++)te[ae]=arguments[ae];if(te.length>1){te[0]=te[0].slice(0,-1);for(var Te=te.length-1,Se=1;Se<Te;++Se)te[Se]=te[Se].slice(1,-1);return te[Te]=te[Te].slice(1),te.join("")}else return te[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,te){var ae=oe;if(te)for(var Te in te)ae[Te]=te[Te];return ae}function l(oe){var te="[A-Za-z]",ae="[0-9]",Te=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+i("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+i("%"+Te+Te)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",qt=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Fn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(te,ae,"[\\-\\.\\_\\~]",On);i(te+r(te,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(pn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),kr=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Ht=i(Te+"{1,4}"),sr=i(i(Ht+"\\:"+Ht)+"|"+kr),Gr=i(i(Ht+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Ht+"\\:")+"{5}"+sr),Ni=i(i(Ht)+"?\\:\\:"+i(Ht+"\\:")+"{4}"+sr),qs=i(i(i(Ht+"\\:")+"{0,1}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{3}"+sr),ni=i(i(i(Ht+"\\:")+"{0,2}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{2}"+sr),yo=i(i(i(Ht+"\\:")+"{0,3}"+Ht)+"?\\:\\:"+Ht+"\\:"+sr),zi=i(i(i(Ht+"\\:")+"{0,4}"+Ht)+"?\\:\\:"+sr),Vi=i(i(i(Ht+"\\:")+"{0,5}"+Ht)+"?\\:\\:"+Ht),Go=i(i(i(Ht+"\\:")+"{0,6}"+Ht)+"?\\:\\:"),Oa=i([Gr,Jn,Ni,qs,ni,yo,zi,Vi,Go].join("|")),Ws=i(i(pn+"|"+Se)+"+");i("[vV]"+Te+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Se+"|"+r(pn,St))+"*");var ec=i(Se+"|"+r(pn,St,"[\\:\\@]"));return i(i(Se+"|"+r(pn,St,"[\\@]"))+"+"),i(i(ec+"|"+r("[\\/\\?]",Fn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",Fn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,qt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+kr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Oa+")"+i(i("\\%25|\\%(?!"+Te+"{2})")+"("+Ws+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(te,ae){var Te=[],Se=!0,ot=!1,St=void 0;try{for(var qt=te[Symbol.iterator](),On;!(Se=(On=qt.next()).done)&&(Te.push(On.value),!(ae&&Te.length===ae));Se=!0);}catch(Fn){ot=!0,St=Fn}finally{try{!Se&&qt.return&&qt.return()}finally{if(ot)throw St}}return Te}return function(te,ae){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return oe(te,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var te=0,ae=Array(oe.length);te<oe.length;te++)ae[te]=oe[te];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,x=128,C="-",E=/^xn--/,S=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,D=Math.floor,P=String.fromCharCode;function O(oe){throw new RangeError(k[oe])}function L(oe,te){for(var ae=[],Te=oe.length;Te--;)ae[Te]=te(oe[Te]);return ae}function j(oe,te){var ae=oe.split("@"),Te="";ae.length>1&&(Te=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Se=oe.split("."),ot=L(Se,te).join(".");return Te+ot}function B(oe){for(var te=[],ae=0,Te=oe.length;ae<Te;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Te){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?te.push(((Se&1023)<<10)+(ot&1023)+65536):(te.push(Se),ae--)}else te.push(Se)}return te}var U=function(te){return String.fromCodePoint.apply(String,h(te))},H=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:m},$=function(te,ae){return te+22+75*(te<26)-((ae!=0)<<5)},z=function(te,ae,Te){var Se=0;for(te=Te?D(te/b):te>>1,te+=D(te/ae);te>R*y>>1;Se+=m)te=D(te/R);return D(Se+(R+1)*te/(te+v))},W=function(te){var ae=[],Te=te.length,Se=0,ot=x,St=w,qt=te.lastIndexOf(C);qt<0&&(qt=0);for(var On=0;On<qt;++On)te.charCodeAt(On)>=128&&O("not-basic"),ae.push(te.charCodeAt(On));for(var Fn=qt>0?qt+1:0;Fn<Te;){for(var pn=Se,ir=1,kr=m;;kr+=m){Fn>=Te&&O("invalid-input");var Ht=H(te.charCodeAt(Fn++));(Ht>=m||Ht>D((p-Se)/ir))&&O("overflow"),Se+=Ht*ir;var sr=kr<=St?g:kr>=St+y?y:kr-St;if(Ht<sr)break;var Gr=m-sr;ir>D(p/Gr)&&O("overflow"),ir*=Gr}var Jn=ae.length+1;St=z(Se-pn,Jn,pn==0),D(Se/Jn)>p-ot&&O("overflow"),ot+=D(Se/Jn),Se%=Jn,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},F=function(te){var ae=[];te=B(te);var Te=te.length,Se=x,ot=0,St=w,qt=!0,On=!1,Fn=void 0;try{for(var pn=te[Symbol.iterator](),ir;!(qt=(ir=pn.next()).done);qt=!0){var kr=ir.value;kr<128&&ae.push(P(kr))}}catch(De){On=!0,Fn=De}finally{try{!qt&&pn.return&&pn.return()}finally{if(On)throw Fn}}var Ht=ae.length,sr=Ht;for(Ht&&ae.push(C);sr<Te;){var Gr=p,Jn=!0,Ni=!1,qs=void 0;try{for(var ni=te[Symbol.iterator](),yo;!(Jn=(yo=ni.next()).done);Jn=!0){var zi=yo.value;zi>=Se&&zi<Gr&&(Gr=zi)}}catch(De){Ni=!0,qs=De}finally{try{!Jn&&ni.return&&ni.return()}finally{if(Ni)throw qs}}var Vi=sr+1;Gr-Se>D((p-ot)/Vi)&&O("overflow"),ot+=(Gr-Se)*Vi,Se=Gr;var Go=!0,Oa=!1,Ws=void 0;try{for(var ec=te[Symbol.iterator](),Id;!(Go=(Id=ec.next()).done);Go=!0){var Y=Id.value;if(Y<Se&&++ot>p&&O("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,ce=m-fe;ae.push(P($(fe+ge%ce,0))),se=D(ge/ce)}ae.push(P($(se,0))),St=z(ot,Vi,sr==Ht),ot=0,++sr}}}catch(De){Oa=!0,Ws=De}finally{try{!Go&&ec.return&&ec.return()}finally{if(Oa)throw Ws}}++ot,++Se}return ae.join("")},V=function(te){return j(te,function(ae){return E.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(te){return j(te,function(ae){return S.test(ae)?"xn--"+F(ae):ae})},ee={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:F,toASCII:G,toUnicode:V},le={};function de(oe){var te=oe.charCodeAt(0),ae=void 0;return te<16?ae="%0"+te.toString(16).toUpperCase():te<128?ae="%"+te.toString(16).toUpperCase():te<2048?ae="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():ae="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var te="",ae=0,Te=oe.length;ae<Te;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)te+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Te-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);te+=String.fromCharCode((Se&31)<<6|ot&63)}else te+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Te-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),qt=parseInt(oe.substr(ae+7,2),16);te+=String.fromCharCode((Se&15)<<12|(St&63)<<6|qt&63)}else te+=oe.substr(ae,9);ae+=9}else te+=oe.substr(ae,3),ae+=3}return te}function ye(oe,te){function ae(Te){var Se=he(Te);return Se.match(te.UNRESERVED)?Se:Te}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(te.PCT_ENCODED,ae).toLowerCase().replace(te.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(te.PCT_ENCODED,ae).replace(te.NOT_USERINFO,de).replace(te.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(te.PCT_ENCODED,ae).toLowerCase().replace(te.NOT_HOST,de).replace(te.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(te.PCT_ENCODED,ae).replace(oe.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,de).replace(te.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(te.PCT_ENCODED,ae).replace(te.NOT_QUERY,de).replace(te.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(te.PCT_ENCODED,ae).replace(te.NOT_FRAGMENT,de).replace(te.PCT_ENCODED,o)),oe}function Ce(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,te){var ae=oe.match(te.IPV4ADDRESS)||[],Te=d(ae,2),Se=Te[1];return Se?Se.split(".").map(Ce).join("."):oe}function Ye(oe,te){var ae=oe.match(te.IPV6ADDRESS)||[],Te=d(ae,3),Se=Te[1],ot=Te[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),qt=d(St,2),On=qt[0],Fn=qt[1],pn=Fn?Fn.split(":").map(Ce):[],ir=On.split(":").map(Ce),kr=te.IPV4ADDRESS.test(ir[ir.length-1]),Ht=kr?7:8,sr=ir.length-Ht,Gr=Array(Ht),Jn=0;Jn<Ht;++Jn)Gr[Jn]=pn[Jn]||ir[sr+Jn]||"";kr&&(Gr[Ht-1]=ve(Gr[Ht-1],te));var Ni=Gr.reduce(function(Vi,Go,Oa){if(!Go||Go==="0"){var Ws=Vi[Vi.length-1];Ws&&Ws.index+Ws.length===Oa?Ws.length++:Vi.push({index:Oa,length:1})}return Vi},[]),qs=Ni.sort(function(Vi,Go){return Go.length-Vi.length})[0],ni=void 0;if(qs&&qs.length>1){var yo=Gr.slice(0,qs.index),zi=Gr.slice(qs.index+qs.length);ni=yo.join(":")+"::"+zi.join(":")}else ni=Gr.join(":");return ot&&(ni+="%"+ot),ni}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,mt="".match(/(){0}/)[1]===void 0;function it(oe){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Te=te.iri!==!1?f:c;te.reference==="suffix"&&(oe=(te.scheme?te.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){mt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ye(ve(ae.host,Te),Te)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+te.reference+" reference.");var ot=le[(te.scheme||ae.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(te.domainHost||ot&&ot.domainHost))try{ae.host=ee.toASCII(ae.host.replace(Te.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Te);ot&&ot.parse&&ot.parse(ae,te)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,te){var ae=te.iri!==!1?f:c,Te=[];return oe.userinfo!==void 0&&(Te.push(oe.userinfo),Te.push("@")),oe.host!==void 0&&Te.push(Ye(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Te.push(":"),Te.push(String(oe.port))),Te.length?Te.join(""):void 0}var Ae=/^\.\.?\//,Ve=/^\/\.(\/|$)/,lt=/^\/\.\.(\/|$)/,Nt=/^\/?(?:.|\n)*?(?=\/|$)/;function qe(oe){for(var te=[];oe.length;)if(oe.match(Ae))oe=oe.replace(Ae,"");else if(oe.match(Ve))oe=oe.replace(Ve,"/");else if(oe.match(lt))oe=oe.replace(lt,"/"),te.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Nt);if(ae){var Te=ae[0];oe=oe.slice(Te.length),te.push(Te)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function me(oe){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=te.iri?f:c,Te=[],Se=le[(te.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,te),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(te.domainHost||Se&&Se.domainHost)try{oe.host=te.iri?ee.toUnicode(oe.host):ee.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(qt){oe.error=oe.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+qt}}ye(oe,ae),te.reference!=="suffix"&&oe.scheme&&(Te.push(oe.scheme),Te.push(":"));var ot=be(oe,te);if(ot!==void 0&&(te.reference!=="suffix"&&Te.push("//"),Te.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Te.push("/")),oe.path!==void 0){var St=oe.path;!te.absolutePath&&(!Se||!Se.absolutePath)&&(St=qe(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Te.push(St)}return oe.query!==void 0&&(Te.push("?"),Te.push(oe.query)),oe.fragment!==void 0&&(Te.push("#"),Te.push(oe.fragment)),Te.join("")}function ft(oe,te){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Se={};return Te||(oe=it(me(oe,ae),ae),te=it(me(te,ae),ae)),ae=ae||{},!ae.tolerant&&te.scheme?(Se.scheme=te.scheme,Se.userinfo=te.userinfo,Se.host=te.host,Se.port=te.port,Se.path=qe(te.path||""),Se.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(Se.userinfo=te.userinfo,Se.host=te.host,Se.port=te.port,Se.path=qe(te.path||""),Se.query=te.query):(te.path?(te.path.charAt(0)==="/"?Se.path=qe(te.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+te.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+te.path:Se.path=te.path,Se.path=qe(Se.path)),Se.query=te.query):(Se.path=oe.path,te.query!==void 0?Se.query=te.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=te.fragment,Se}function yt(oe,te,ae){var Te=u({scheme:"null"},ae);return me(ft(it(oe,Te),it(te,Te),Te,!0),Te)}function Et(oe,te){return typeof oe=="string"?oe=me(it(oe,te),te):s(oe)==="object"&&(oe=it(me(oe,te),te)),oe}function pe(oe,te,ae){return typeof oe=="string"?oe=me(it(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof te=="string"?te=me(it(te,ae),ae):s(te)==="object"&&(te=me(te,ae)),oe===te}function Ie(oe,te){return oe&&oe.toString().replace(!te||!te.iri?c.ESCAPE:f.ESCAPE,de)}function Ke(oe,te){return oe&&oe.toString().replace(!te||!te.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var bt={scheme:"http",domainHost:!0,parse:function(te,ae){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,ae){var Te=String(te.scheme).toLowerCase()==="https";return(te.port===(Te?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},Vt={scheme:"https",domainHost:bt.domainHost,parse:bt.parse,serialize:bt.serialize};function rr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var qn={scheme:"ws",domainHost:!0,parse:function(te,ae){var Te=te;return Te.secure=rr(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function(te,ae){if((te.port===(rr(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var Te=te.resourceName.split("?"),Se=d(Te,2),ot=Se[0],St=Se[1];te.path=ot&&ot!=="/"?ot:void 0,te.query=St,te.resourceName=void 0}return te.fragment=void 0,te}},Ln={scheme:"wss",domainHost:qn.domainHost,parse:qn.parse,serialize:qn.serialize},yn={},yr="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Qt="[0-9A-Fa-f]",Wr=i(i("%[EFef]"+Qt+"%"+Qt+Qt+"%"+Qt+Qt)+"|"+i("%[89A-Fa-f]"+Qt+"%"+Qt+Qt)+"|"+i("%"+Qt+Qt)),ei="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Bi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",An=r(Bi,'[\\"\\\\]'),Ui="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ir=new RegExp(yr,"g"),ys=new RegExp(Wr,"g"),xp=new RegExp(r("[^]",ei,"[\\.]",'[\\"]',An),"g"),fl=new RegExp(r("[^]",yr,Ui),"g"),Ad=fl;function Er(oe){var te=he(oe);return te.match(Ir)?te:oe}var Ri={scheme:"mailto",parse:function(te,ae){var Te=te,Se=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var ot=!1,St={},qt=Te.query.split("&"),On=0,Fn=qt.length;On<Fn;++On){var pn=qt[On].split("=");switch(pn[0]){case"to":for(var ir=pn[1].split(","),kr=0,Ht=ir.length;kr<Ht;++kr)Se.push(ir[kr]);break;case"subject":Te.subject=Ke(pn[1],ae);break;case"body":Te.body=Ke(pn[1],ae);break;default:ot=!0,St[Ke(pn[0],ae)]=Ke(pn[1],ae);break}}ot&&(Te.headers=St)}Te.query=void 0;for(var sr=0,Gr=Se.length;sr<Gr;++sr){var Jn=Se[sr].split("@");if(Jn[0]=Ke(Jn[0]),ae.unicodeSupport)Jn[1]=Ke(Jn[1],ae).toLowerCase();else try{Jn[1]=ee.toASCII(Ke(Jn[1],ae).toLowerCase())}catch(Ni){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ni}Se[sr]=Jn.join("@")}return Te},serialize:function(te,ae){var Te=te,Se=a(te.to);if(Se){for(var ot=0,St=Se.length;ot<St;++ot){var qt=String(Se[ot]),On=qt.lastIndexOf("@"),Fn=qt.slice(0,On).replace(ys,Er).replace(ys,o).replace(xp,de),pn=qt.slice(On+1);try{pn=ae.iri?ee.toUnicode(pn):ee.toASCII(Ke(pn,ae).toLowerCase())}catch(sr){Te.error=Te.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[ot]=Fn+"@"+pn}Te.path=Se.join(",")}var ir=te.headers=te.headers||{};te.subject&&(ir.subject=te.subject),te.body&&(ir.body=te.body);var kr=[];for(var Ht in ir)ir[Ht]!==yn[Ht]&&kr.push(Ht.replace(ys,Er).replace(ys,o).replace(fl,de)+"="+ir[Ht].replace(ys,Er).replace(ys,o).replace(Ad,de));return kr.length&&(Te.query=kr.join("&")),Te}},ti=/^([^\:]+)\:(.*)/,pu={scheme:"urn",parse:function(te,ae){var Te=te.path&&te.path.match(ti),Se=te;if(Te){var ot=ae.scheme||Se.scheme||"urn",St=Te[1].toLowerCase(),qt=Te[2],On=ot+":"+(ae.nid||St),Fn=le[On];Se.nid=St,Se.nss=qt,Se.path=void 0,Fn&&(Se=Fn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(te,ae){var Te=ae.scheme||te.scheme||"urn",Se=te.nid,ot=Te+":"+(ae.nid||Se),St=le[ot];St&&(te=St.serialize(te,ae));var qt=te,On=te.nss;return qt.path=(Se||ae.nid)+":"+On,qt}},Na=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Pa={scheme:"urn:uuid",parse:function(te,ae){var Te=te;return Te.uuid=Te.nss,Te.nss=void 0,!ae.tolerant&&(!Te.uuid||!Te.uuid.match(Na))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function(te,ae){var Te=te;return Te.nss=(te.uuid||"").toLowerCase(),Te}};le[bt.scheme]=bt,le[Vt.scheme]=Vt,le[qn.scheme]=qn,le[Ln.scheme]=Ln,le[Ri.scheme]=Ri,le[pu.scheme]=pu,le[Pa.scheme]=Pa,n.SCHEMES=le,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=qe,n.serialize=me,n.resolveComponents=ft,n.resolve=yt,n.normalize=Et,n.equal=pe,n.escapeComponent=Ie,n.unescapeComponent=Ke,Object.defineProperty(n,"__esModule",{value:!0})})})(tz,tz.exports);var bft=tz.exports;Object.defineProperty(LK,"__esModule",{value:!0});const vTe=bft;vTe.code='require("ajv/dist/runtime/uri").default';LK.default=vTe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Gf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=rk,i=eS,s=G1,o=Pu,a=Pn,u=Io,l=Is,c=_t,f=vft,d=LK,h=($,z)=>new RegExp($,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b($){var z,W,F,V,G,ee,le,de,he,ye,Ce,ve,Ye,Ue,mt,it,be,Ae,Ve,lt,Nt,qe,me,ft,yt;const Et=$.strict,pe=(z=$.code)===null||z===void 0?void 0:z.optimize,Ie=pe===!0||pe===void 0?1:pe||0,Ke=(F=(W=$.code)===null||W===void 0?void 0:W.regExp)!==null&&F!==void 0?F:h,bt=(V=$.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(ee=(G=$.strictSchema)!==null&&G!==void 0?G:Et)!==null&&ee!==void 0?ee:!0,strictNumbers:(de=(le=$.strictNumbers)!==null&&le!==void 0?le:Et)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=$.strictTypes)!==null&&he!==void 0?he:Et)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ce=$.strictTuples)!==null&&Ce!==void 0?Ce:Et)!==null&&ve!==void 0?ve:"log",strictRequired:(Ue=(Ye=$.strictRequired)!==null&&Ye!==void 0?Ye:Et)!==null&&Ue!==void 0?Ue:!1,code:$.code?{...$.code,optimize:Ie,regExp:Ke}:{optimize:Ie,regExp:Ke},loopRequired:(mt=$.loopRequired)!==null&&mt!==void 0?mt:v,loopEnum:(it=$.loopEnum)!==null&&it!==void 0?it:v,meta:(be=$.meta)!==null&&be!==void 0?be:!0,messages:(Ae=$.messages)!==null&&Ae!==void 0?Ae:!0,inlineRefs:(Ve=$.inlineRefs)!==null&&Ve!==void 0?Ve:!0,schemaId:(lt=$.schemaId)!==null&&lt!==void 0?lt:"$id",addUsedSchema:(Nt=$.addUsedSchema)!==null&&Nt!==void 0?Nt:!0,validateSchema:(qe=$.validateSchema)!==null&&qe!==void 0?qe:!0,validateFormats:(me=$.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(ft=$.unicodeRegExp)!==null&&ft!==void 0?ft:!0,int32range:(yt=$.int32range)!==null&&yt!==void 0?yt:!0,uriResolver:bt}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:F}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:F}),this.logger=D(z.logger);const V=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,z,"NOT SUPPORTED"),x.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&S.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),E.call(this),z.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:F}=this.opts;let V=f;F==="id"&&(V={...f},V.id=V.$id,delete V.$id),W&&z&&this.addMetaSchema(V,V[F],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let F;if(typeof z=="string"){if(F=this.getSchema(z),!F)throw new Error(`no schema with key or ref "${z}"`)}else F=this.compile(z);const V=F(W);return"$async"in F||(this.errors=F.errors),V}compile(z,W){const F=this._addSchema(z,W);return F.validate||this._compileSchemaEnv(F)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:F}=this.opts;return V.call(this,z,W);async function V(ye,Ce){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ce);return ve.validate||ee.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await V.call(this,{$ref:ye},!0)}async function ee(ye){try{return this._compileSchemaEnv(ye)}catch(Ce){if(!(Ce instanceof i.default))throw Ce;return le.call(this,Ce),await de.call(this,Ce.missingSchema),ee.call(this,ye)}}function le({missingSchema:ye,missingRef:Ce}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ce} cannot be resolved`)}async function de(ye){const Ce=await he.call(this,ye);this.refs[ye]||await G.call(this,Ce.$schema),this.refs[ye]||this.addSchema(Ce,ye,W)}async function he(ye){const Ce=this._loading[ye];if(Ce)return Ce;try{return await(this._loading[ye]=F(ye))}finally{delete this._loading[ye]}}}addSchema(z,W,F,V=this.opts.validateSchema){if(Array.isArray(z)){for(const ee of z)this.addSchema(ee,void 0,F,V);return this}let G;if(typeof z=="object"){const{schemaId:ee}=this.opts;if(G=z[ee],G!==void 0&&typeof G!="string")throw new Error(`schema ${ee} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,F,W,V,!0),this}addMetaSchema(z,W,F=this.opts.validateSchema){return this.addSchema(z,W,!0,F),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let F;if(F=z.$schema,F!==void 0&&typeof F!="string")throw new Error("$schema must be a string");if(F=F||this.opts.defaultMeta||this.defaultMeta(),!F)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(F,z);if(!V&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return V}getSchema(z){let W;for(;typeof(W=C.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:F}=this.opts,V=new o.SchemaEnv({schema:{},schemaId:F});if(W=o.resolveSchema.call(this,V,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=C.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let F=z[this.opts.schemaId];return F&&(F=(0,u.normalizeId)(F),delete this.schemas[F],delete this.refs[F]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let F;if(typeof z=="string")F=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=F);else if(typeof z=="object"&&W===void 0){if(W=z,F=W.keyword,Array.isArray(F)&&!F.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,F,W),!W)return(0,c.eachItem)(F,G=>L.call(this,G)),this;B.call(this,W);const V={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(F,V.type.length===0?G=>L.call(this,G,V):G=>V.type.forEach(ee=>L.call(this,G,V,ee))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const F of W.rules){const V=F.rules.findIndex(G=>G.keyword===z);V>=0&&F.rules.splice(V,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:F="data"}={}){return!z||z.length===0?"No errors":z.map(V=>`${F}${V.instancePath} ${V.message}`).reduce((V,G)=>V+W+G)}$dataMetaSchema(z,W){const F=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const V of W){const G=V.split("/").slice(1);let ee=z;for(const le of G)ee=ee[le];for(const le in F){const de=F[le];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ee[le];he&&ye&&(ee[le]=H(ye))}}return z}_removeAllSchemas(z,W){for(const F in z){const V=z[F];(!W||W.test(F))&&(typeof V=="string"?delete z[F]:V&&!V.meta&&(this._cache.delete(V.schema),delete z[F]))}}_addSchema(z,W,F,V=this.opts.validateSchema,G=this.opts.addUsedSchema){let ee;const{schemaId:le}=this.opts;if(typeof z=="object")ee=z[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;F=(0,u.normalizeId)(ee||F);const he=u.getSchemaRefs.call(this,z,F);return de=new o.SchemaEnv({schema:z,schemaId:le,meta:W,baseId:F,localRefs:he}),this._cache.set(de.schema,de),G&&!F.startsWith("#")&&(F&&this._checkUnique(F),this.refs[F]=de),V&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function x($,z,W,F="error"){for(const V in $){const G=V;G in z&&this.logger[F](`${W}: option ${V}. ${$[G]}`)}}function C($){return $=(0,u.normalizeId)($),this.schemas[$]||this.refs[$]}function E(){const $=this.opts.schemas;if($)if(Array.isArray($))this.addSchema($);else for(const z in $)this.addSchema($[z],z)}function S(){for(const $ in this.opts.formats){const z=this.opts.formats[$];z&&this.addFormat($,z)}}function A($){if(Array.isArray($)){this.addVocabulary($);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in $){const W=$[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const $={...this.opts};for(const z of p)delete $[z];return $}const R={log(){},warn(){},error(){}};function D($){if($===!1)return R;if($===void 0)return console;if($.log&&$.warn&&$.error)return $;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function O($,z){const{RULES:W}=this;if((0,c.eachItem)($,F=>{if(W.keywords[F])throw new Error(`Keyword ${F} is already defined`);if(!P.test(F))throw new Error(`Keyword ${F} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function L($,z,W){var F;const V=z==null?void 0:z.post;if(W&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ee=V?G.post:G.rules.find(({type:de})=>de===W);if(ee||(ee={type:W,rules:[]},G.rules.push(ee)),G.keywords[$]=!0,!z)return;const le={keyword:$,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?j.call(this,ee,le,z.before):ee.rules.push(le),G.all[$]=le,(F=z.implements)===null||F===void 0||F.forEach(de=>this.addKeyword(de))}function j($,z,W){const F=$.rules.findIndex(V=>V.keyword===W);F>=0?$.rules.splice(F,0,z):($.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B($){let{metaSchema:z}=$;z!==void 0&&($.$data&&this.opts.$data&&(z=H(z)),$.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H($){return{anyOf:[$,U]}}})(BSe);var FK={},jK={},BK={};Object.defineProperty(BK,"__esModule",{value:!0});const _ft={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};BK.default=_ft;var Y1={};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.callRef=Y1.getValidate=void 0;const wft=eS,ble=Rn,Eu=Pn,E_=ap,_le=Pu,dN=_t,Eft={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=_le.resolveRef.call(u,l,i,n);if(c===void 0)throw new wft.default(r.opts.uriResolver,i,n);if(c instanceof _le.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return eO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return eO(e,(0,Eu._)`${p}.validate`,l,l.$async)}function d(p){const m=bTe(e,p);eO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Eu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Eu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function bTe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Eu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Y1.getValidate=bTe;function eO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?E_.default.this:Eu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Eu._)`await ${(0,ble.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Eu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,ble.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Eu._)`${p}.errors`;i.assign(E_.default.vErrors,(0,Eu._)`${E_.default.vErrors} === null ? ${m} : ${E_.default.vErrors}.concat(${m})`),i.assign(E_.default.errors,(0,Eu._)`${E_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=dN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Eu._)`${p}.evaluated.props`);s.props=dN.mergeEvaluated.props(i,y,s.props,Eu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=dN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Eu._)`${p}.evaluated.items`);s.items=dN.mergeEvaluated.items(i,y,s.items,Eu.Name)}}}Y1.callRef=eO;Y1.default=Eft;Object.defineProperty(jK,"__esModule",{value:!0});const xft=BK,Sft=Y1,Tft=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",xft.default,Sft.default];jK.default=Tft;var UK={},zK={};Object.defineProperty(zK,"__esModule",{value:!0});const KD=Pn,Cg=KD.operators,XD={maximum:{okStr:"<=",ok:Cg.LTE,fail:Cg.GT},minimum:{okStr:">=",ok:Cg.GTE,fail:Cg.LT},exclusiveMaximum:{okStr:"<",ok:Cg.LT,fail:Cg.GTE},exclusiveMinimum:{okStr:">",ok:Cg.GT,fail:Cg.LTE}},Cft={message:({keyword:e,schemaCode:t})=>(0,KD.str)`must be ${XD[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,KD._)`{comparison: ${XD[e].okStr}, limit: ${t}}`},Aft={keyword:Object.keys(XD),type:"number",schemaType:"number",$data:!0,error:Cft,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,KD._)`${n} ${XD[t].fail} ${r} || isNaN(${n})`)}};zK.default=Aft;var VK={};Object.defineProperty(VK,"__esModule",{value:!0});const f2=Pn,Ift={message:({schemaCode:e})=>(0,f2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,f2._)`{multipleOf: ${e}}`},kft={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ift,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,f2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,f2._)`${o} !== parseInt(${o})`;e.fail$data((0,f2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};VK.default=kft;var HK={},qK={};Object.defineProperty(qK,"__esModule",{value:!0});function _Te(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}qK.default=_Te;_Te.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(HK,"__esModule",{value:!0});const Vv=Pn,Rft=_t,Nft=qK,Pft={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Vv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Vv._)`{limit: ${e}}`},Oft={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Pft,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Vv.operators.GT:Vv.operators.LT,o=i.opts.unicode===!1?(0,Vv._)`${n}.length`:(0,Vv._)`${(0,Rft.useFunc)(e.gen,Nft.default)}(${n})`;e.fail$data((0,Vv._)`${o} ${s} ${r}`)}};HK.default=Oft;var WK={};Object.defineProperty(WK,"__esModule",{value:!0});const Dft=Rn,QD=Pn,$ft={message:({schemaCode:e})=>(0,QD.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,QD._)`{pattern: ${e}}`},Mft={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:$ft,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,QD._)`(new RegExp(${i}, ${o}))`:(0,Dft.usePattern)(e,r);e.fail$data((0,QD._)`!${a}.test(${t})`)}};WK.default=Mft;var GK={};Object.defineProperty(GK,"__esModule",{value:!0});const d2=Pn,Lft={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,d2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,d2._)`{limit: ${e}}`},Fft={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Lft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?d2.operators.GT:d2.operators.LT;e.fail$data((0,d2._)`Object.keys(${n}).length ${i} ${r}`)}};GK.default=Fft;var YK={};Object.defineProperty(YK,"__esModule",{value:!0});const mT=Rn,h2=Pn,jft=_t,Bft={message:({params:{missingProperty:e}})=>(0,h2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,h2._)`{missingProperty: ${e}}`},Uft={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Bft,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,jft.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(h2.nil,f);else for(const h of n)(0,mT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,mT.checkMissingProp)(e,n,h)),(0,mT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,mT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,mT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,h2.not)(p),()=>{e.error(),t.break()})},h2.nil)}}};YK.default=Uft;var KK={};Object.defineProperty(KK,"__esModule",{value:!0});const p2=Pn,zft={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,p2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,p2._)`{limit: ${e}}`},Vft={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:zft,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?p2.operators.GT:p2.operators.LT;e.fail$data((0,p2._)`${n}.length ${i} ${r}`)}};KK.default=Vft;var XK={},ik={};Object.defineProperty(ik,"__esModule",{value:!0});const wTe=OK;wTe.code='require("ajv/dist/runtime/equal").default';ik.default=wTe;Object.defineProperty(XK,"__esModule",{value:!0});const Aj=Is,Eo=Pn,Hft=_t,qft=ik,Wft={message:({params:{i:e,j:t}})=>(0,Eo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Eo._)`{i: ${e}, j: ${t}}`},Gft={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Wft,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Aj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Eo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Eo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Eo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Aj.checkDataTypes)(l,g,a.opts.strictNumbers,Aj.DataType.Wrong),v=t.const("indices",(0,Eo._)`{}`);t.for((0,Eo._)`;${p}--;`,()=>{t.let(g,(0,Eo._)`${n}[${p}]`),t.if(y,(0,Eo._)`continue`),l.length>1&&t.if((0,Eo._)`typeof ${g} == "string"`,(0,Eo._)`${g} += "_"`),t.if((0,Eo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Eo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Eo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Hft.useFunc)(t,qft.default),y=t.name("outer");t.label(y).for((0,Eo._)`;${p}--;`,()=>t.for((0,Eo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Eo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};XK.default=Gft;var QK={};Object.defineProperty(QK,"__esModule",{value:!0});const nz=Pn,Yft=_t,Kft=ik,Xft={message:"must be equal to constant",params:({schemaCode:e})=>(0,nz._)`{allowedValue: ${e}}`},Qft={keyword:"const",$data:!0,error:Xft,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,nz._)`!${(0,Yft.useFunc)(t,Kft.default)}(${n}, ${i})`):e.fail((0,nz._)`${s} !== ${n}`)}};QK.default=Qft;var JK={};Object.defineProperty(JK,"__esModule",{value:!0});const oC=Pn,Jft=_t,Zft=ik,edt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,oC._)`{allowedValues: ${e}}`},tdt={keyword:"enum",schemaType:"array",$data:!0,error:edt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Jft.useFunc)(t,Zft.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,oC.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,oC._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,oC._)`${l()}(${n}, ${h}[${p}])`:(0,oC._)`${n} === ${m}`}}};JK.default=tdt;Object.defineProperty(UK,"__esModule",{value:!0});const ndt=zK,rdt=VK,idt=HK,sdt=WK,odt=GK,adt=YK,udt=KK,ldt=XK,cdt=QK,fdt=JK,ddt=[ndt.default,rdt.default,idt.default,sdt.default,odt.default,adt.default,udt.default,ldt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},cdt.default,fdt.default];UK.default=ddt;var ZK={},tS={};Object.defineProperty(tS,"__esModule",{value:!0});tS.validateAdditionalItems=void 0;const Hv=Pn,rz=_t,hdt={message:({params:{len:e}})=>(0,Hv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Hv._)`{limit: ${e}}`},pdt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:hdt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,rz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}ETe(e,r)}};function ETe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Hv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Hv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,rz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Hv._)`${a} <= ${t.length}`);n.if((0,Hv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:rz.Type.Num},l),o.allErrors||n.if((0,Hv.not)(l),()=>n.break())})}}tS.validateAdditionalItems=ETe;tS.default=pdt;var eX={},nS={};Object.defineProperty(nS,"__esModule",{value:!0});nS.validateTuple=void 0;const wle=Pn,tO=_t,mdt=Rn,gdt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return xTe(e,"additionalItems",t);n.items=!0,!(0,tO.alwaysValidSchema)(n,t)&&e.ok((0,mdt.validateArray)(e))}};function xTe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=tO.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,wle._)`${s}.length`);n.forEach((f,d)=>{(0,tO.alwaysValidSchema)(a,f)||(r.if((0,wle._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,tO.checkStrictMode)(a,g,d.strictTuples)}}}nS.validateTuple=xTe;nS.default=gdt;Object.defineProperty(eX,"__esModule",{value:!0});const ydt=nS,vdt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,ydt.validateTuple)(e,"items")};eX.default=vdt;var tX={};Object.defineProperty(tX,"__esModule",{value:!0});const Ele=Pn,bdt=_t,_dt=Rn,wdt=tS,Edt={message:({params:{len:e}})=>(0,Ele.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ele._)`{limit: ${e}}`},xdt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Edt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,bdt.alwaysValidSchema)(r,t)&&(i?(0,wdt.validateAdditionalItems)(e,i):e.ok((0,_dt.validateArray)(e)))}};tX.default=xdt;var nX={};Object.defineProperty(nX,"__esModule",{value:!0});const lc=Pn,hN=_t,Sdt={message:({params:{min:e,max:t}})=>t===void 0?(0,lc.str)`must contain at least ${e} valid item(s)`:(0,lc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,lc._)`{minContains: ${e}}`:(0,lc._)`{minContains: ${e}, maxContains: ${t}}`},Tdt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Sdt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,lc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,hN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,hN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,hN.alwaysValidSchema)(s,n)){let m=(0,lc._)`${c} >= ${o}`;a!==void 0&&(m=(0,lc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,lc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:hN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,lc._)`${m}++`),a===void 0?t.if((0,lc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,lc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,lc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};nX.default=Tdt;var STe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=_t,r=Rn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(STe);var rX={};Object.defineProperty(rX,"__esModule",{value:!0});const TTe=Pn,Cdt=_t,Adt={message:"property name must be valid",params:({params:e})=>(0,TTe._)`{propertyName: ${e.propertyName}}`},Idt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Adt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Cdt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,TTe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};rX.default=Idt;var R6={};Object.defineProperty(R6,"__esModule",{value:!0});const pN=Rn,pf=Pn,kdt=ap,mN=_t,Rdt={message:"must NOT have additional properties",params:({params:e})=>(0,pf._)`{additionalProperty: ${e.additionalProperty}}`},Ndt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Rdt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,mN.alwaysValidSchema)(o,n))return;const l=(0,pN.allSchemaProperties)(r.properties),c=(0,pN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,pf._)`${s} === ${kdt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,mN.schemaRefOrVal)(o,r.properties,"properties");y=(0,pN.isOwnProperty)(t,v,g)}else l.length?y=(0,pf.or)(...l.map(v=>(0,pf._)`${g} === ${v}`)):y=pf.nil;return c.length&&(y=(0,pf.or)(y,...c.map(v=>(0,pf._)`${(0,pN.usePattern)(e,v)}.test(${g})`))),(0,pf.not)(y)}function h(g){t.code((0,pf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,mN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,pf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,pf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:mN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};R6.default=Ndt;var iX={};Object.defineProperty(iX,"__esModule",{value:!0});const Pdt=Gf,xle=Rn,Ij=_t,Sle=R6,Odt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Sle.default.code(new Pdt.KeywordCxt(s,Sle.default,"additionalProperties"));const o=(0,xle.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Ij.mergeEvaluated.props(t,(0,Ij.toHash)(o),s.props));const a=o.filter(f=>!(0,Ij.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,xle.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};iX.default=Odt;var sX={};Object.defineProperty(sX,"__esModule",{value:!0});const Tle=Rn,gN=Pn,Cle=_t,Ale=_t,Ddt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Tle.allSchemaProperties)(n),u=a.filter(m=>(0,Cle.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof gN.Name)&&(s.props=(0,Ale.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Cle.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,gN._)`${(0,Tle.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Ale.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,gN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,gN.not)(c),()=>t.break())})})}}};sX.default=Ddt;var oX={};Object.defineProperty(oX,"__esModule",{value:!0});const $dt=_t,Mdt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,$dt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};oX.default=Mdt;var aX={};Object.defineProperty(aX,"__esModule",{value:!0});const Ldt=Rn,Fdt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ldt.validateUnion,error:{message:"must match a schema in anyOf"}};aX.default=Fdt;var uX={};Object.defineProperty(uX,"__esModule",{value:!0});const nO=Pn,jdt=_t,Bdt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,nO._)`{passingSchemas: ${e.passing}}`},Udt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Bdt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,jdt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,nO._)`${u} && ${o}`).assign(o,!1).assign(a,(0,nO._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,nO.Name)})})}}};uX.default=Udt;var lX={};Object.defineProperty(lX,"__esModule",{value:!0});const zdt=_t,Vdt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,zdt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};lX.default=Vdt;var cX={};Object.defineProperty(cX,"__esModule",{value:!0});const JD=Pn,CTe=_t,Hdt={message:({params:e})=>(0,JD.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,JD._)`{failingKeyword: ${e.ifClause}}`},qdt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Hdt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,CTe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Ile(r,"then"),s=Ile(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,JD.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,JD._)`${c}`):e.setParams({ifClause:c})}}}};function Ile(e,t){const n=e.schema[t];return n!==void 0&&!(0,CTe.alwaysValidSchema)(e,n)}cX.default=qdt;var fX={};Object.defineProperty(fX,"__esModule",{value:!0});const Wdt=_t,Gdt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Wdt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};fX.default=Gdt;Object.defineProperty(ZK,"__esModule",{value:!0});const Ydt=tS,Kdt=eX,Xdt=nS,Qdt=tX,Jdt=nX,Zdt=STe,eht=rX,tht=R6,nht=iX,rht=sX,iht=oX,sht=aX,oht=uX,aht=lX,uht=cX,lht=fX;function cht(e=!1){const t=[iht.default,sht.default,oht.default,aht.default,uht.default,lht.default,eht.default,tht.default,Zdt.default,nht.default,rht.default];return e?t.push(Kdt.default,Qdt.default):t.push(Ydt.default,Xdt.default),t.push(Jdt.default),t}ZK.default=cht;var dX={},hX={};Object.defineProperty(hX,"__esModule",{value:!0});const os=Pn,fht={message:({schemaCode:e})=>(0,os.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,os._)`{format: ${e}}`},dht={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:fht,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,os._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,os._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,os._)`${m}.type || "string"`).assign(y,(0,os._)`${m}.validate`),()=>n.assign(g,(0,os._)`"string"`).assign(y,m)),e.fail$data((0,os.or)(v(),b()));function v(){return u.strictSchema===!1?os.nil:(0,os._)`${o} && !${y}`}function b(){const w=c.$async?(0,os._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,os._)`${y}(${r})`,x=(0,os._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,os._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(x){const C=x instanceof RegExp?(0,os.regexpCode)(x):u.code.formats?(0,os._)`${u.code.formats}${(0,os.getProperty)(s)}`:void 0,E=n.scopeValue("formats",{key:s,ref:x,code:C});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,os._)`${E}.validate`]:["string",x,E]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,os._)`await ${y}(${r})`}return typeof g=="function"?(0,os._)`${y}(${r})`:(0,os._)`${y}.test(${r})`}}}};hX.default=dht;Object.defineProperty(dX,"__esModule",{value:!0});const hht=hX,pht=[hht.default];dX.default=pht;var IE={};Object.defineProperty(IE,"__esModule",{value:!0});IE.contentVocabulary=IE.metadataVocabulary=void 0;IE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];IE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(FK,"__esModule",{value:!0});const mht=jK,ght=UK,yht=ZK,vht=dX,kle=IE,bht=[mht.default,ght.default,(0,yht.default)(),vht.default,kle.metadataVocabulary,kle.contentVocabulary];FK.default=bht;var pX={},N6={};Object.defineProperty(N6,"__esModule",{value:!0});N6.DiscrError=void 0;var Rle;(function(e){e.Tag="tag",e.Mapping="mapping"})(Rle||(N6.DiscrError=Rle={}));Object.defineProperty(pX,"__esModule",{value:!0});const H_=Pn,iz=N6,Nle=Pu,_ht=eS,wht=_t,Eht={message:({params:{discrError:e,tagName:t}})=>e===iz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,H_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},xht={keyword:"discriminator",type:"object",schemaType:"object",error:Eht,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,H_._)`${n}${(0,H_.getProperty)(a)}`);t.if((0,H_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:iz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,H_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:iz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,H_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let x=o[w];if(x!=null&&x.$ref&&!(0,wht.schemaHasRulesButRef)(x,s.self.RULES)){const E=x.$ref;if(x=Nle.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E),x instanceof Nle.SchemaEnv&&(x=x.schema),x===void 0)throw new _ht.default(s.opts.uriResolver,s.baseId,E)}const C=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof C!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(C,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,x){if(w.const)b(w.const,x);else if(w.enum)for(const C of w.enum)b(C,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,x){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=x}}}};pX.default=xht;const Sht="http://json-schema.org/draft-07/schema#",Tht="http://json-schema.org/draft-07/schema#",Cht="Core schema meta-schema",Aht={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Iht=["object","boolean"],kht={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Rht={$schema:Sht,$id:Tht,title:Cht,definitions:Aht,type:Iht,properties:kht,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=BSe,r=FK,i=pX,s=Rht,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Gf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=rk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=eS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(XU,XU.exports);var Nht=XU.exports;const ATe=Ho(Nht),Pht="#/definitions/StudyConfig",Oht="http://json-schema.org/draft-07/schema#",Dht={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](./Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta11/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta11/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](./ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta11/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "<study-name>/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},$ht={$ref:Pht,$schema:Oht,definitions:Dht},Mht="#/definitions/GlobalConfig",Lht="http://json-schema.org/draft-07/schema#",Fht={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},jht={$ref:Mht,$schema:Lht,definitions:Fht},ITe=new ATe;ITe.addSchema(jht);const Ple=ITe.getSchema("#/definitions/GlobalConfig"),kTe=new ATe;kTe.addSchema($ht);const kj=kTe.getSchema("#/definitions/StudyConfig");function Bht(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function P6(e){return e.baseComponent!==void 0}function Uht(e){const t=TK.parse(e),n=Ple(t),r=Bht(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ple.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function RTe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):RTe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function zht(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;P6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=NSe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return RTe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function Vht(e){let t=!1,n;try{n=TK.parse(e),t=kj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=zht(n);r=[...kj.errors||[],...s],i=o}else r=kj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function NTe(){const e=Fy(),{setAlertModal:t}=jl(),n=Mc();I.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const Ole=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],Dle=["participantId","trialId","trialOrder","responseId"];function mX(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Hht(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Ac(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=P6(u)&&u.baseComponent&&t.baseComponents?wK({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function qht({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=I.useState([...Ole].filter(c=>c!=="meta")),a=I.useMemo(()=>{const c=[...Dle,...s],f=c,d=i.map(h=>Hht(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=I.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);mX(c,n)},[n,a.header,a.rows]),l=I.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return _.jsxs(Ss,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(oY,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Ole],value:s,onChange:c=>o(c),label:"Included optional columns:",leftSection:_.jsx(PQe,{}),variant:"filled"}),_.jsx(Wf,{h:"md"}),_.jsx(ke,{mih:300,style:{width:"100%",overflow:"scroll"},children:_.jsxs(Xl,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx("thead",{children:_.jsx("tr",{children:a.header.map(c=>_.jsx("th",{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:_.jsxs($n,{direction:"row",justify:"space-between",align:"center",children:[c,!Dle.includes(c)&&_.jsx(rd,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},children:_.jsx(Qwe,{size:16})})]})},c))})}),_.jsx("tbody",{children:a.rows.slice(0,5).map((c,f)=>_.jsx("tr",{children:a.header.map(d=>_.jsx("td",{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),_.jsx(Wf,{h:"sm"}),_.jsx($n,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(tt,{children:l})}),_.jsx(Wf,{h:"md"}),_.jsxs(nr,{justify:"right",children:[_.jsx(_n,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(_n,{leftSection:_.jsx(Ywe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function PTe(){const e=Dm(),{storageEngine:t}=js(),{answers:n}=Uo(m=>m),[r,i]=I.useState(!1);I.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),NTe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=I.useCallback(async()=>{mX(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));return I.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),_.jsx(eu,{style:{height:"100%"},children:_.jsx($n,{direction:"column",children:r?_.jsx(tt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(tu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(tt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Wf,{h:"lg"}),_.jsx(eu,{children:_.jsx(Dc,{color:"blue"})})]})})})}function kE(e){return structuredClone(e)}const OTe=I.createContext(null);function Wht(){const e=I.useContext(OTe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function $le(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Ght(){const e=Fy(),t=bK(),r=`${jy()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Uo(w=>w),a=Mc(),{saveTrialAnswer:u,setIframeAnswers:l}=jl(),{storageEngine:c}=js(),f=Yut(r),d=typeof e!="number"||!f,h=xK(),p=Xc(),m=Dm(),g=_K(),y=I.useMemo(()=>Date.now(),[]),v=Wht(),b=I.useCallback(()=>{if(typeof e!="number")return;const w=kE(i[r]),x=Object.values(w).reduce((P,O)=>Object.hasOwn(O,"values")?{...P,...O.values}:P,{}),{provenanceGraph:C}=w,E=Date.now(),S=v&&"current"in v&&v.current?v.current.splice(0,v.current.length):[];h.endTime||(a(u({identifier:r,answer:x,startTime:y,endTime:E,provenanceGraph:C,windowEvents:S})),c&&c.saveAnswers({...o,[r]:{answer:x,startTime:y,endTime:E,provenanceGraph:C,windowEvents:S}}),a(l({})));let A=e+1;const k=OSe(s,e),R=k!==null&&k.some(P=>Object.hasOwn(P.currentBlock,"skip")&&P.currentBlock.skip!==void 0),D={...o,[r]:{answer:x,startTime:y,endTime:E,provenanceGraph:C,windowEvents:S}};R&&[...k.flatMap(O=>O.currentBlock.skip?O.currentBlock.skip.map(L=>({...L,firstIndex:O.firstIndex,lastIndex:O.lastIndex})):[])].some(O=>{let L=!1;const j=Object.fromEntries(Object.entries(D).filter(([U])=>{const H=parseInt(U.slice(U.lastIndexOf("_")+1),10);return H>=O.firstIndex&&H<=e})),B=O.check!=="block"?Object.entries(j).filter(([U])=>U.slice(0,U.lastIndexOf("_"))===O.name):Object.entries(j);if(B.length===0)return!1;if(B.some(([U,H])=>!H))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(O,null,2)}`);if(O.check==="response"||O.check==="responses"){const[U,H]=B[0];O.check==="response"?L=O.value!==H.answer[O.responseId]:L=!$le(H.answer,U,m.components[U.slice(0,U.lastIndexOf("_"))],m)}else if(O.check==="block"||O.check==="repeatedComponent"){if(B.length<O.value)return!1;const U=B.map(([z,W])=>$le(W.answer,z,m.components[z.slice(0,z.lastIndexOf("_"))],m)),H=U.filter(z=>z).length,$=U.length-H;L=O.condition==="numCorrect"&&H===O.value||O.condition==="numIncorrect"&&$===O.value}if(L){const U=t.indexOf(O.to),H=U===-1?Wut(s,O.to):-1;return A=U===-1?H:U,!0}return!1}),p(`/${g}/${A}${window.location.search}`)},[i,r,v,h,e,s,o,y,p,g,a,u,c,l,m,t]);return{isNextDisabled:d,goToNextStep:b}}function Yht({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Ght(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(_n,{type:"submit",disabled:t||i,onClick:o,children:e})}function Kht(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Xht=typeof window<"u"?I.useLayoutEffect:I.useEffect;function bo(e,t){Xht(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Qht(e,t){e&&Kht(e),bo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),bo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),bo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),bo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),bo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),bo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),bo(`mantine-form:${e}:clear-errors`,t.clearErrors),bo(`mantine-form:${e}:reset`,t.reset),bo(`mantine-form:${e}:validate`,t.validate),bo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),bo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),bo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),bo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),bo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),bo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),bo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),bo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Jht(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function sz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Zht(e){const[t,n]=I.useState(sz(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=sz(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function DTe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Mle(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Lle(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=DTe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Mle(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Mle(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function ept(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Fle(e,t,n){typeof n.value=="object"&&(n.value=hw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function hw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(hw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(hw(a),hw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(hw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Fle(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Fle(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function $Te(e){return typeof e!="string"?[]:e.split(".")}function Mu(e,t){const n=$Te(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function O6(e,t,n){const r=$Te(e);if(r.length===0)return n;const i=hw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function tpt(e,{from:t,to:n},r){const i=Mu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),O6(e,s,r)}function npt(e,t,n,r){const i=Mu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),O6(e,s,r)}function rpt(e,t,n){const r=Mu(e,n);return Array.isArray(r)?O6(e,r.filter((i,s)=>s!==t),n):n}function ipt({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>ept(o,a,u)),e.setValues({values:tpt(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Lle(o,a,u,-1)),e.setValues({values:rpt(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Lle(o,u,l,1)),e.setValues({values:npt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function yN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function spt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(x=>{const C=typeof x=="function"?x(u.current):x;u.current=C,n==="controlled"&&s(C)},[]),f=I.useCallback(x=>{const C=typeof x=="function"?x(l.current):x;l.current=C,n==="controlled"&&a(C)},[]),d=I.useCallback(()=>c({}),[]),h=x=>{const C=x?{...x,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(C),f({})},p=I.useCallback((x,C)=>{c(E=>yN(E,x)===C?E:{...E,[x]:C})},[]),m=I.useCallback((x,C)=>{f(E=>yN(E,x)===C?E:{...E,[x]:C})},[]),g=I.useCallback(x=>yN(u.current,x),[]),y=I.useCallback(x=>f(C=>{if(typeof x!="string")return C;const E=DTe(x,C);return delete E[x],JP(E,C)?C:E}),[]),v=I.useCallback(x=>{if(x){const E=Mu(x,l.current);if(typeof E=="boolean")return E;const S=Mu(x,r.refValues.current),A=Mu(x,r.valuesSnapshot.current);return!JP(S,A)}return Object.keys(l.current).length>0?yN(l.current):!JP(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function opt({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(x=>x({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=Mu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=O6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function apt({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Mu(i,o.previousValues),value:Mu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function jle(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Ble(e){const t=sz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function oz(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Mu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>oz(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||oz(o,t,a,i)),i},r)}function az(e,t){return Ble(typeof e=="function"?e(t):oz(e,t))}function vN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=az(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const upt="__MANTINE_FORM_INDEX__";function Ule(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${upt}`)):!1:!1}function MTe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Zht(r),p=opt({initialValues:n,onValuesChange:l,mode:t}),m=spt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=ipt({$values:p,$errors:h,$status:m}),y=apt({$status:m}),[v,b]=I.useState(0),[w,x]=I.useState({}),C=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b($=>$+1)},[]),E=I.useCallback($=>{p.initialize($,()=>t==="uncontrolled"&&b(z=>z+1))},[]),S=I.useCallback(($,z,W)=>{const F=Ule($,a);m.clearFieldDirty($),m.setFieldTouched($,!0),!F&&o&&h.clearFieldError($),p.setFieldValue({path:$,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers($),F?V=>{const G=vN($,d,V.updatedValues);G.hasError?h.setFieldError($,G.error):h.clearFieldError($)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>x(V=>({...V,[$]:(V[$]||0)+1})):null]})},[l,d]),A=I.useCallback($=>{const z=p.refValues.current;p.setValues({values:$,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const F=Mu(W,p.refValues.current),V=Mu(W,z);F!==V&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const $=az(d,p.refValues.current);return h.setErrors($.errors),$},[d]),R=I.useCallback($=>{const z=vN($,d,p.refValues.current);return z.hasError?h.setFieldError($,z.error):h.clearFieldError($),z},[d]),D=($,{type:z="input",withError:W=!0,withFocus:F=!0,...V}={})=>{const ee={onChange:Jht(le=>S($,le,{forceUpdate:!1})),"data-path":jle(e,$)};return W&&(ee.error=h.errorsState[$]),z==="checkbox"?ee[t==="controlled"?"checked":"defaultChecked"]=Mu($,p.refValues.current):ee[t==="controlled"?"value":"defaultValue"]=Mu($,p.refValues.current),F&&(ee.onFocus=()=>m.setFieldTouched($,!0),ee.onBlur=()=>{if(Ule($,u)){const le=vN($,d,p.refValues.current);le.hasError?h.setFieldError($,le.error):h.clearFieldError($)}}),Object.assign(ee,f==null?void 0:f({inputProps:ee,field:$,options:{type:z,withError:W,withFocus:F,...V},form:H}))},P=($,z)=>W=>{W==null||W.preventDefault();const F=k();F.hasErrors?z==null||z(F.errors,p.refValues.current,W):$==null||$(c(p.refValues.current),W)},O=$=>c($||p.refValues.current),L=I.useCallback($=>{$.preventDefault(),C()},[]),j=I.useCallback($=>$?!vN($,d,p.refValues.current).hasError:!az(d,p.refValues.current).hasErrors,[d]),B=$=>`${v}-${$}-${w[$]||0}`,U=I.useCallback($=>document.querySelector(`[data-path="${jle(e,$)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:E,setValues:A,setFieldValue:S,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:C,validate:k,validateField:R,getInputProps:D,onSubmit:P,onReset:L,isValid:j,getTransformedValues:O,key:B,getInputNode:U};return Qht(e,H),H}function lpt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function cpt(e){return lpt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const fpt=new URLSearchParams(window.location.search),dpt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?fpt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},hpt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function ppt(e,t,n){const[r,i]=I.useState(null),s=MTe({initialValues:dpt(e,n),validate:hpt(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function jb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function mpt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return _.jsx(Rm.Group,{label:_.jsx(tu,{text:r,required:i}),...n,error:jb(e,n,s),size:"md",children:_.jsx(nr,{mt:"lg",children:s.map(o=>_.jsx(Rm,{disabled:t,value:o.value,label:o.label},o.value))})})}function gpt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return _.jsx(_h,{disabled:t,label:_.jsx(tu,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:jb(e,n,o)})}function ypt({response:e,answer:t}){const{prompt:n}=e;return _.jsxs(_.Fragment,{children:[_.jsx(tt,{fz:"md",fw:500,children:_.jsx(tu,{text:n})}),_.jsx(qf,{children:Array.isArray(t.value)?t.value.map(r=>_.jsx(qf.Item,{children:r},r)):_.jsx(qf.Item,{children:t.value})})]})}function LTe({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return _.jsx(H1.Group,{my:"md",name:`radioInput${e.id}`,label:_.jsx(tu,{text:r,required:i}),...n,error:jb(e,n,s),children:_.jsxs(nr,{gap:"lg",mt:"lg",children:[o?_.jsx(tt,{style:{textAlign:"center"},children:o}):null,s.map(u=>_.jsx(H1,{disabled:t,value:u.value,label:u.label},u.label)),_.jsx(tt,{children:a})]})},e.id)}function vpt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return _.jsx(LTe,{disabled:t,response:s,answer:n})}function bpt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return _.jsx(uY,{disabled:t,placeholder:a,label:_.jsx(tu,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:jb(e,n)})}function _pt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=jb(e,n);return _.jsx(Li.Wrapper,{label:_.jsx(tu,{text:r,required:i}),error:o,size:"md",children:_.jsx(OL,{disabled:t,labelAlwaysOn:!0,style:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function wpt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return _.jsx(hm,{disabled:t,placeholder:r,label:_.jsx(tu,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:jb(e,n)})}function Ept({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return _.jsx(yL,{disabled:t,placeholder:r,label:_.jsx(tu,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:jb(e,n)})}function xpt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=IY(),o=I.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return _.jsxs(ke,{style:{margin:10,padding:5},children:[e.type==="numerical"&&_.jsx(bpt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&_.jsx(wpt,{response:e,disabled:o,answer:r}),e.type==="longText"&&_.jsx(Ept,{response:e,disabled:o,answer:r}),e.type==="likert"&&_.jsx(vpt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&_.jsx(gpt,{response:e,disabled:o,answer:r}),e.type==="slider"&&_.jsx(_pt,{response:e,disabled:o,answer:r}),e.type==="radio"&&_.jsx(LTe,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&_.jsx(mpt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&_.jsx(ypt,{response:e,answer:r})]})}function ZD({config:e,location:t,status:n,style:r}){var w;const i=Fy(),s=jy(),o=n==null?void 0:n.answer,a=e,u=I.useMemo(()=>{var x;return((x=a==null?void 0:a.response)==null?void 0:x.filter(C=>C.location?C.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Mc(),{updateResponseBlockValidation:c}=jl(),f=ppt(u,i,o||{}),[d,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Uo(x=>x),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const x=u.find(C=>C.type==="iframe");if(g&&x){const C=x.id;f.setValues({...f.values,[C]:g[C]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:kE(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map(x=>{var C,E;return _.jsx(Cr.Fragment,{children:x.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(xpt,{storedAnswer:o?o[x.id]:void 0,answer:{...f.getInputProps(x.id,{type:x.type==="checkbox"?"checkbox":"input"})},response:x}),v&&p&&_.jsx(tt,{children:`The correct answer is: ${(E=(C=a.correctAnswer)==null?void 0:C.find(S=>S.id===x.id))==null?void 0:E.answer}`})]})},`${x.id}-${i}`)}),_.jsxs(nr,{justify:"right",gap:"xs",mt:"xl",children:[v&&b&&_.jsx(_n,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Yht,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function Spt({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=I.useState(!1),[o,a]=I.useState(null),[u,l]=I.useState(null),[c,f]=I.useState(null);return i?_.jsxs(Di,{children:[_.jsx(_h,{data:e,onChange:d=>a(d),placeholder:"Select X Column"}),_.jsx(_h,{data:e,onChange:d=>l(d),placeholder:"Select Y Column"}),_.jsx(_n,{disabled:!o||!u,onClick:()=>{n(o,u),s(!1)},children:"Create plot"}),_.jsx(_h,{data:t,onChange:d=>f(d),placeholder:"Select X Column"}),_.jsx(_n,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):_.jsx(Di,{children:_.jsx(rd,{variant:"light",size:150,onClick:()=>s(!0),children:_.jsx(Wwe,{size:50})})})}const Tpt=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:Spt},Symbol.toStringTag,{value:"Module"})),FTe=I.createContext(null),gX=({id:e="waveform",children:t})=>Cr.createElement("div",{id:e},t),Cpt=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],Apt=e=>e?Cpt.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};function ws(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let sk=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const zle={decode:function(e,t){return ws(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function jTe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(jTe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Vle(e,t,n){const r=jTe(e,t||{});return n==null||n.appendChild(r),r}var Ipt=Object.freeze({__proto__:null,createElement:Vle,default:Vle});const kpt={fetchBlob:function(e,t,n){return ws(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){ws(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>ws(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>ws(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let Rpt=class extends sk{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const r=n instanceof Blob&&this.canPlayType(n.type)?URL.createObjectURL(n):t;this.media.src=r}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return ws(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},BTe=class UTe extends sk{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientY-i.top;return[s/i.width,o/i.height]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=x=>{if(x.preventDefault(),x.stopPropagation(),u&&Date.now()-m<a)return;const C=x.clientX,E=x.clientY,S=C-d,A=E-h;if(p||Math.abs(S)>s||Math.abs(A)>s){const k=t.getBoundingClientRect(),{left:R,top:D}=k;p||(r==null||r(d-R,h-D),p=!0),n(S,A,C-R,E-D),d=C,h=E}},y=x=>{if(p){const C=x.clientX,E=x.clientY,S=t.getBoundingClientRect(),{left:A,top:k}=S;i==null||i(C-A,E-k)}l()},v=x=>{x.relatedTarget&&x.relatedTarget!==document.documentElement||y(x)},b=x=>{p&&(x.stopPropagation(),x.preventDefault())},w=x=>{p&&x.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t;this.subscriptions.forEach(n=>n()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=window.devicePixelRatio||1,d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let w=0;w<=a;w++){const x=Math.round(w*m);if(x>y){const S=Math.round(v*c*i),A=S+Math.round(b*c*i)||1;let k=c-S;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-A),r[g](y*(d+h),k,d,A,p),y=x,v=0,b=0}const C=Math.abs(s[w]||0),E=Math.abs(o[w]||0);C>v&&(v=C),E>b&&(b=E)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=window.devicePixelRatio||1,l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){return ws(this,void 0,void 0,function*(){const a=window.devicePixelRatio||1,u=r/a;let l=Math.min(UTe.MAX_CANVAS_WIDTH,this.scrollContainer.clientWidth);if(n.barWidth||n.barGap){const p=n.barWidth||.5,m=p+(n.barGap||p/2);l%m!=0&&(l=Math.floor(l/m)*m)}const c=p=>{const m=p*l,g=Math.min(u-m,l),y=t.map(v=>{const b=Math.floor(m/u*v.length),w=Math.floor((m+g)/u*v.length);return v.slice(b,w)});this.renderSingleCanvas(y,n,g,i,m,s,o)},f=Math.ceil(u/l);if(f===1)return void c(0);const d=this.scrollContainer.scrollLeft/u,h=Math.floor(d*f);c(h),c(h+1),yield Promise.all([ws(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h-1;m>=0;m--)yield p(),c(m)}),ws(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h+2;m<f;m++)yield p(),c(m)})])})}renderChannel(t,n,r,i){return ws(this,void 0,void 0,function*(){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),yield this.renderMultiCanvas(t,o,r,u,a,l)})}render(t){return ws(this,void 0,void 0,function*(){this.timeouts.forEach(a=>a()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=i>r;const s=this.options.fillParent&&!this.isScrollable,o=(s?r:i)*n;this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:t.numberOfChannels}).map((a,u)=>{var l;const c=Object.assign(Object.assign({},this.options),(l=this.options.splitChannels)===null||l===void 0?void 0:l[u]);return this.renderChannel([t.getChannelData(u)],c,o,u)}));else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),yield this.renderChannel(a,this.options,o,0)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return ws(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};BTe.MAX_CANVAS_WIDTH=4e3;class Npt extends sk{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Hle extends sk{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ws(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ws(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return ws(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const Ppt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let uz=class zTe extends Rpt{static create(t){return new zTe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Hle:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Ppt,t),this.timer=new Npt;const r=n?void 0:this.getMediaElement();this.renderer=new BTe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return ws(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield kpt.fetchBlob(t,u,a)}this.setSrc(t,n);const o=i||this.getDuration()||(yield new Promise(a=>{this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0})}));if(!t&&!n){const a=this.getMediaElement();a instanceof Hle&&(a.duration=o)}if(r)this.decodedData=zle.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield zle.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return ws(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return ws(this,void 0,void 0,function*(){try{return yield this.loadAudio("blob",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return ws(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return ws(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};uz.BasePlugin=class extends sk{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},uz.dom=Ipt;function Opt(e){return uz.create(e)}function qle(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Dpt=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var $pt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function VTe(e){var{container:t,plugins:n=[],onMount:r}=e,i=$pt(e,["container","plugins","onMount"]);const s=I.useRef([]),[o,a]=I.useState(null);return I.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(qle)),s.current=u;const l=Opt(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),I.useEffect(()=>{if(o){const u=n.map(qle),{disabled:l,enabled:c}=Dpt(s.current,u);s.current=u,l.forEach(f=>{f.name&&(o==null||o.destroyPlugin(f.name))}),c.forEach(f=>{f.name&&(o==null||o.addPlugin(f).initPlugin(f.name))})}},[n]),o}function Mpt(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var Lpt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const HTe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=Lpt(e,["children","plugins","onMount"]);const s=I.useMemo(()=>{let a={};return I.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!Mpt(u))return;const{props:l,type:c}=u;if(c===gX){const{id:f}=l;a=Apt(l),a=Object.assign(Object.assign({},a),{container:"#"+f})}}),a},[t]),o=VTe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return Cr.createElement(FTe.Provider,{value:o},t)};HTe.defaultProps={children:null,plugins:[]};function Rj(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let qTe=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},Fpt=class extends qTe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class jpt extends qTe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const Bpt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class yX extends Fpt{constructor(t){var n,r,i,s;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,renderRecordedAudio:(s=t.renderRecordedAudio)===null||s===void 0||s})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new jpt,this.subscriptions.push(this.timer.on("tick",()=>{const o=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+o,this.emit("record-progress",this.duration)}))}static create(t){return new yX(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s);let a;const u=Math.floor((this.options.scrollingWaveformWindow||0)*n.sampleRate),l=()=>{var c;if(this.isWaveformPaused)return void(a=requestAnimationFrame(l));if(i.getFloatTimeDomainData(o),this.options.scrollingWaveform){const d=Math.min(u,this.dataWindow?this.dataWindow.length+s:s),h=new Float32Array(u);if(this.dataWindow){const p=Math.max(0,u-this.dataWindow.length);h.set(this.dataWindow.slice(-d+s),p)}h.set(o,u-s),this.dataWindow=h}else this.dataWindow=o;const f=this.options.scrollingWaveformWindow;this.wavesurfer&&((c=this.originalOptions)!==null&&c!==void 0||(this.originalOptions={cursorWidth:this.wavesurfer.options.cursorWidth,interact:this.wavesurfer.options.interact}),this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[this.dataWindow],f)),a=requestAnimationFrame(l)};return l(),{onDestroy:()=>{cancelAnimationFrame(a),r==null||r.disconnect(),n==null||n.close()},onEnd:()=>{this.isWaveformPaused=!0,cancelAnimationFrame(a),this.stopMic()}}}startMic(t){return Rj(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return Rj(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Bpt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Rj(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.options.cursorWidth=this.originalOptions.cursorWidth,this.wavesurfer.options.interact=this.originalOptions.interact,delete this.originalOptions)}}function WTe({width:e=70,height:t=50}){const n=I.useRef(null),r=I.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(yX.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return _.jsx(ke,{style:{width:`${e}px`,height:`${t}px`},children:_.jsx(HTe,{onMount:r,children:_.jsx(gX,{id:"waveform"})})})}function Wle({parameters:e,setAnswer:t}){return I.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),_.jsx(eu,{style:{height:"70%",width:"100%"},children:_.jsxs(Di,{children:[_.jsx(tt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),_.jsx(tt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),_.jsx(tt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please close it now."}),_.jsx(eu,{children:_.jsx(WTe,{height:200,width:400})})]})})}const Upt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Wle,default:Wle},Symbol.toStringTag,{value:"Module"}));function gm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zpt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rS(e){let t,n,r;e.length!==2?(t=gm,n=(a,u)=>gm(e(a),u),r=(a,u)=>e(a)-u):(t=e===gm||e===zpt?e:Vpt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Vpt(){return 0}function GTe(e){return e===null?NaN:+e}function*Hpt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const YTe=rS(gm),Y0=YTe.right,qpt=YTe.left;rS(GTe).center;function Wpt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Gpt(e,t){const n=Wpt(e,t);return n&&Math.sqrt(n)}function e3(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Qa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Gle extends Map{constructor(t,n=QTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(lz(this,t))}has(t){return super.has(lz(this,t))}set(t,n){return super.set(KTe(this,t),n)}delete(t){return super.delete(XTe(this,t))}}class t3 extends Set{constructor(t,n=QTe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(lz(this,t))}add(t){return super.add(KTe(this,t))}delete(t){return super.delete(XTe(this,t))}}function lz({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function KTe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function XTe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function QTe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ypt(e,t){return Array.from(t,n=>e[n])}function Kpt(e=gm){if(e===gm)return JTe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function JTe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xpt=Math.sqrt(50),Qpt=Math.sqrt(10),Jpt=Math.sqrt(2);function n3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Xpt?10:s>=Qpt?5:s>=Jpt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?n3(e,t,n*2):[a,u,l]}function cz(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?n3(t,e,n):n3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function fz(e,t,n){return t=+t,e=+e,n=+n,n3(e,t,n)[2]}function K0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?fz(t,e,n):fz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ic(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function dz(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ZTe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?JTe:Kpt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));ZTe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(gT(e,n,t),i(e[r],s)>0&&gT(e,n,r);o<a;){for(gT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?gT(e,n,a):(++a,gT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function gT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function hz(e,t,n){if(e=Float64Array.from(Hpt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return dz(e);if(t>=1)return Ic(e);var r,i=(r-1)*t,s=Math.floor(i),o=Ic(ZTe(e,s).subarray(0,s+1)),a=dz(e.subarray(s+1));return o+(a-o)*(i-s)}}function eCe(e,t,n=GTe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function tCe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function nCe(e,t){return hz(e,.5,t)}function*Zpt(e){for(const t of e)yield*t}function rCe(e){return Array.from(Zpt(e))}function Lu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function vX(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function emt(e,...t){e=new t3(e),t=t.map(tmt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function tmt(e){return e instanceof t3?e:new t3(e)}function nmt(...e){const t=new t3;for(const n of e)for(const r of n)t.add(r);return t}var rmt={value:()=>{}};function D6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new rO(n)}function rO(e){this._=e}function imt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}rO.prototype=D6.prototype={constructor:rO,on:function(e,t){var n=this._,r=imt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=smt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Yle(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Yle(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rO(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function smt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Yle(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=rmt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var pz="http://www.w3.org/1999/xhtml";const Kle={svg:"http://www.w3.org/2000/svg",xhtml:pz,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kle.hasOwnProperty(t)?{space:Kle[t],local:e}:e}function omt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pz&&t.documentElement.namespaceURI===pz?t.createElement(e):t.createElementNS(n,e)}}function amt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function iCe(e){var t=$6(e);return(t.local?amt:omt)(t)}function umt(){}function bX(e){return e==null?umt:function(){return this.querySelector(e)}}function lmt(e){typeof e!="function"&&(e=bX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new nu(r,this._parents)}function sCe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cmt(){return[]}function oCe(e){return e==null?cmt:function(){return this.querySelectorAll(e)}}function fmt(e){return function(){return sCe(e.apply(this,arguments))}}function dmt(e){typeof e=="function"?e=fmt(e):e=oCe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new nu(r,i)}function aCe(e){return function(){return this.matches(e)}}function uCe(e){return function(t){return t.matches(e)}}var hmt=Array.prototype.find;function pmt(e){return function(){return hmt.call(this.children,e)}}function mmt(){return this.firstElementChild}function gmt(e){return this.select(e==null?mmt:pmt(typeof e=="function"?e:uCe(e)))}var ymt=Array.prototype.filter;function vmt(){return Array.from(this.children)}function bmt(e){return function(){return ymt.call(this.children,e)}}function _mt(e){return this.selectAll(e==null?vmt:bmt(typeof e=="function"?e:uCe(e)))}function wmt(e){typeof e!="function"&&(e=aCe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new nu(r,this._parents)}function lCe(e){return new Array(e.length)}function Emt(){return new nu(this._enter||this._groups.map(lCe),this._parents)}function r3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}r3.prototype={constructor:r3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xmt(e){return function(){return e}}function Smt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new r3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Tmt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new r3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Cmt(e){return e.__data__}function Amt(e,t){if(!arguments.length)return Array.from(this,Cmt);var n=t?Tmt:Smt,r=this._parents,i=this._groups;typeof e!="function"&&(e=xmt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Imt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,x;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(x=g[b])&&++b<p;);w._next=x||null}}return o=new nu(o,r),o._enter=a,o._exit=u,o}function Imt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kmt(){return new nu(this._exit||this._groups.map(lCe),this._parents)}function Rmt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Nmt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new nu(a,this._parents)}function Pmt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Omt(e){e||(e=Dmt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new nu(i,this._parents).order()}function Dmt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $mt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mmt(){return Array.from(this)}function Lmt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Fmt(){let e=0;for(const t of this)++e;return e}function jmt(){return!this.node()}function Bmt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Umt(e){return function(){this.removeAttribute(e)}}function zmt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vmt(e,t){return function(){this.setAttribute(e,t)}}function Hmt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qmt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Wmt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gmt(e,t){var n=$6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?zmt:Umt:typeof t=="function"?n.local?Wmt:qmt:n.local?Hmt:Vmt)(n,t))}function cCe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ymt(e){return function(){this.style.removeProperty(e)}}function Kmt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Xmt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qmt(e,t,n){return arguments.length>1?this.each((t==null?Ymt:typeof t=="function"?Xmt:Kmt)(e,t,n??"")):RE(this.node(),e)}function RE(e,t){return e.style.getPropertyValue(t)||cCe(e).getComputedStyle(e,null).getPropertyValue(t)}function Jmt(e){return function(){delete this[e]}}function Zmt(e,t){return function(){this[e]=t}}function egt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tgt(e,t){return arguments.length>1?this.each((t==null?Jmt:typeof t=="function"?egt:Zmt)(e,t)):this.node()[e]}function fCe(e){return e.trim().split(/^|\s+/)}function _X(e){return e.classList||new dCe(e)}function dCe(e){this._node=e,this._names=fCe(e.getAttribute("class")||"")}dCe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hCe(e,t){for(var n=_X(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pCe(e,t){for(var n=_X(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ngt(e){return function(){hCe(this,e)}}function rgt(e){return function(){pCe(this,e)}}function igt(e,t){return function(){(t.apply(this,arguments)?hCe:pCe)(this,e)}}function sgt(e,t){var n=fCe(e+"");if(arguments.length<2){for(var r=_X(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?igt:t?ngt:rgt)(n,t))}function ogt(){this.textContent=""}function agt(e){return function(){this.textContent=e}}function ugt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lgt(e){return arguments.length?this.each(e==null?ogt:(typeof e=="function"?ugt:agt)(e)):this.node().textContent}function cgt(){this.innerHTML=""}function fgt(e){return function(){this.innerHTML=e}}function dgt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function hgt(e){return arguments.length?this.each(e==null?cgt:(typeof e=="function"?dgt:fgt)(e)):this.node().innerHTML}function pgt(){this.nextSibling&&this.parentNode.appendChild(this)}function mgt(){return this.each(pgt)}function ggt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ygt(){return this.each(ggt)}function vgt(e){var t=typeof e=="function"?e:iCe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bgt(){return null}function _gt(e,t){var n=typeof e=="function"?e:iCe(e),r=t==null?bgt:typeof t=="function"?t:bX(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wgt(){var e=this.parentNode;e&&e.removeChild(this)}function Egt(){return this.each(wgt)}function xgt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sgt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tgt(e){return this.select(e?Sgt:xgt)}function Cgt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Agt(e){return function(t){e.call(this,t,this.__data__)}}function Igt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function kgt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Rgt(e,t,n){return function(){var r=this.__on,i,s=Agt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Ngt(e,t,n){var r=Igt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Rgt:kgt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function mCe(e,t,n){var r=cCe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pgt(e,t){return function(){return mCe(this,e,t)}}function Ogt(e,t){return function(){return mCe(this,e,t.apply(this,arguments))}}function Dgt(e,t){return this.each((typeof t=="function"?Ogt:Pgt)(e,t))}function*$gt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var wX=[null];function nu(e,t){this._groups=e,this._parents=t}function ok(){return new nu([[document.documentElement]],wX)}function Mgt(){return this}nu.prototype=ok.prototype={constructor:nu,select:lmt,selectAll:dmt,selectChild:gmt,selectChildren:_mt,filter:wmt,data:Amt,enter:Emt,exit:kmt,join:Rmt,merge:Nmt,selection:Mgt,order:Pmt,sort:Omt,call:$mt,nodes:Mmt,node:Lmt,size:Fmt,empty:jmt,each:Bmt,attr:Gmt,style:Qmt,property:tgt,classed:sgt,text:lgt,html:hgt,raise:mgt,lower:ygt,append:vgt,insert:_gt,remove:Egt,clone:Tgt,datum:Cgt,on:Ngt,dispatch:Dgt,[Symbol.iterator]:$gt};function To(e){return typeof e=="string"?new nu([[document.querySelector(e)]],[document.documentElement]):new nu([[e]],wX)}function Lgt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xle(e,t){if(e=Lgt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Fgt(e){return typeof e=="string"?new nu([document.querySelectorAll(e)],[document.documentElement]):new nu([sCe(e)],wX)}const mz={capture:!0,passive:!1};function gz(e){e.preventDefault(),e.stopImmediatePropagation()}function jgt(e){var t=e.document.documentElement,n=To(e).on("dragstart.drag",gz,mz);"onselectstart"in t?n.on("selectstart.drag",gz,mz):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bgt(e,t){var n=e.document.documentElement,r=To(e).on("dragstart.drag",null);t&&(r.on("click.drag",gz,mz),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function iS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ak(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function By(){}var K1=.7,NE=1/K1,Ww="\\s*([+-]?\\d+)\\s*",vA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ugt=/^#([0-9a-f]{3,8})$/,zgt=new RegExp(`^rgb\\(${Ww},${Ww},${Ww}\\)$`),Vgt=new RegExp(`^rgb\\(${xh},${xh},${xh}\\)$`),Hgt=new RegExp(`^rgba\\(${Ww},${Ww},${Ww},${vA}\\)$`),qgt=new RegExp(`^rgba\\(${xh},${xh},${xh},${vA}\\)$`),Wgt=new RegExp(`^hsl\\(${vA},${xh},${xh}\\)$`),Ggt=new RegExp(`^hsla\\(${vA},${xh},${xh},${vA}\\)$`),Qle={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iS(By,X1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jle,formatHex:Jle,formatHex8:Ygt,formatHsl:Kgt,formatRgb:Zle,toString:Zle});function Jle(){return this.rgb().formatHex()}function Ygt(){return this.rgb().formatHex8()}function Kgt(){return gCe(this).formatHsl()}function Zle(){return this.rgb().formatRgb()}function X1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ugt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ece(t):n===3?new ro(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?bN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?bN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zgt.exec(e))?new ro(t[1],t[2],t[3],1):(t=Vgt.exec(e))?new ro(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Hgt.exec(e))?bN(t[1],t[2],t[3],t[4]):(t=qgt.exec(e))?bN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Wgt.exec(e))?rce(t[1],t[2]/100,t[3]/100,1):(t=Ggt.exec(e))?rce(t[1],t[2]/100,t[3]/100,t[4]):Qle.hasOwnProperty(e)?ece(Qle[e]):e==="transparent"?new ro(NaN,NaN,NaN,0):null}function ece(e){return new ro(e>>16&255,e>>8&255,e&255,1)}function bN(e,t,n,r){return r<=0&&(e=t=n=NaN),new ro(e,t,n,r)}function EX(e){return e instanceof By||(e=X1(e)),e?(e=e.rgb(),new ro(e.r,e.g,e.b,e.opacity)):new ro}function X0(e,t,n,r){return arguments.length===1?EX(e):new ro(e,t,n,r??1)}function ro(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}iS(ro,X0,ak(By,{brighter(e){return e=e==null?NE:Math.pow(NE,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?K1:Math.pow(K1,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ro(T1(this.r),T1(this.g),T1(this.b),i3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tce,formatHex:tce,formatHex8:Xgt,formatRgb:nce,toString:nce}));function tce(){return`#${a1(this.r)}${a1(this.g)}${a1(this.b)}`}function Xgt(){return`#${a1(this.r)}${a1(this.g)}${a1(this.b)}${a1((isNaN(this.opacity)?1:this.opacity)*255)}`}function nce(){const e=i3(this.opacity);return`${e===1?"rgb(":"rgba("}${T1(this.r)}, ${T1(this.g)}, ${T1(this.b)}${e===1?")":`, ${e})`}`}function i3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function T1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function a1(e){return e=T1(e),(e<16?"0":"")+e.toString(16)}function rce(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pf(e,t,n,r)}function gCe(e){if(e instanceof Pf)return new Pf(e.h,e.s,e.l,e.opacity);if(e instanceof By||(e=X1(e)),!e)return new Pf;if(e instanceof Pf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Pf(o,a,u,e.opacity)}function bA(e,t,n,r){return arguments.length===1?gCe(e):new Pf(e,t,n,r??1)}function Pf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}iS(Pf,bA,ak(By,{brighter(e){return e=e==null?NE:Math.pow(NE,e),new Pf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?K1:Math.pow(K1,e),new Pf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ro(Nj(e>=240?e-240:e+120,i,r),Nj(e,i,r),Nj(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Pf(ice(this.h),_N(this.s),_N(this.l),i3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=i3(this.opacity);return`${e===1?"hsl(":"hsla("}${ice(this.h)}, ${_N(this.s)*100}%, ${_N(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ice(e){return e=(e||0)%360,e<0?e+360:e}function _N(e){return Math.max(0,Math.min(1,e||0))}function Nj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yCe=Math.PI/180,vCe=180/Math.PI,s3=18,bCe=.96422,_Ce=1,wCe=.82521,ECe=4/29,Gw=6/29,xCe=3*Gw*Gw,Qgt=Gw*Gw*Gw;function SCe(e){if(e instanceof Sh)return new Sh(e.l,e.a,e.b,e.opacity);if(e instanceof nm)return TCe(e);e instanceof ro||(e=EX(e));var t=$j(e.r),n=$j(e.g),r=$j(e.b),i=Pj((.2225045*t+.7168786*n+.0606169*r)/_Ce),s,o;return t===n&&n===r?s=o=i:(s=Pj((.4360747*t+.3850649*n+.1430804*r)/bCe),o=Pj((.0139322*t+.0971045*n+.7141733*r)/wCe)),new Sh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function o3(e,t,n,r){return arguments.length===1?SCe(e):new Sh(e,t,n,r??1)}function Sh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}iS(Sh,o3,ak(By,{brighter(e){return new Sh(this.l+s3*(e??1),this.a,this.b,this.opacity)},darker(e){return new Sh(this.l-s3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=bCe*Oj(t),e=_Ce*Oj(e),n=wCe*Oj(n),new ro(Dj(3.1338561*t-1.6168667*e-.4906146*n),Dj(-.9787684*t+1.9161415*e+.033454*n),Dj(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Pj(e){return e>Qgt?Math.pow(e,1/3):e/xCe+ECe}function Oj(e){return e>Gw?e*e*e:xCe*(e-ECe)}function Dj(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function $j(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Jgt(e){if(e instanceof nm)return new nm(e.h,e.c,e.l,e.opacity);if(e instanceof Sh||(e=SCe(e)),e.a===0&&e.b===0)return new nm(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*vCe;return new nm(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function a3(e,t,n,r){return arguments.length===1?Jgt(e):new nm(e,t,n,r??1)}function nm(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function TCe(e){if(isNaN(e.h))return new Sh(e.l,0,0,e.opacity);var t=e.h*yCe;return new Sh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}iS(nm,a3,ak(By,{brighter(e){return new nm(this.h,this.c,this.l+s3*(e??1),this.opacity)},darker(e){return new nm(this.h,this.c,this.l-s3*(e??1),this.opacity)},rgb(){return TCe(this).rgb()}}));var CCe=-.14861,xX=1.78277,SX=-.29227,M6=-.90649,_A=1.97294,sce=_A*M6,oce=_A*xX,ace=xX*SX-M6*CCe;function Zgt(e){if(e instanceof C1)return new C1(e.h,e.s,e.l,e.opacity);e instanceof ro||(e=EX(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ace*r+sce*t-oce*n)/(ace+sce-oce),s=r-i,o=(_A*(n-i)-SX*s)/M6,a=Math.sqrt(o*o+s*s)/(_A*i*(1-i)),u=a?Math.atan2(o,s)*vCe-120:NaN;return new C1(u<0?u+360:u,a,i,e.opacity)}function yz(e,t,n,r){return arguments.length===1?Zgt(e):new C1(e,t,n,r??1)}function C1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}iS(C1,yz,ak(By,{brighter(e){return e=e==null?NE:Math.pow(NE,e),new C1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?K1:Math.pow(K1,e),new C1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*yCe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ro(255*(t+n*(CCe*r+xX*i)),255*(t+n*(SX*r+M6*i)),255*(t+n*(_A*r)),this.opacity)}}));function ACe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function ICe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return ACe((n-r/t)*t,o,i,s,a)}}function kCe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return ACe((n-r/t)*t,i,s,o,a)}}const L6=e=>()=>e;function RCe(e,t){return function(n){return e+n*t}}function e0t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function F6(e,t){var n=t-e;return n?RCe(e,n>180||n<-180?n-360*Math.round(n/360):n):L6(isNaN(e)?t:e)}function t0t(e){return(e=+e)==1?io:function(t,n){return n-t?e0t(t,n,e):L6(isNaN(t)?n:t)}}function io(e,t){var n=t-e;return n?RCe(e,n):L6(isNaN(e)?t:e)}const wA=function e(t){var n=t0t(t);function r(i,s){var o=n((i=X0(i)).r,(s=X0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=io(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function NCe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=X0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var n0t=NCe(ICe),r0t=NCe(kCe);function TX(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function PCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function i0t(e,t){return(PCe(t)?TX:OCe)(e,t)}function OCe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=sg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function DCe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $Ce(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=sg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var vz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mj=new RegExp(vz.source,"g");function s0t(e){return function(){return e}}function o0t(e){return function(t){return e(t)+""}}function CX(e,t){var n=vz.lastIndex=Mj.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=vz.exec(e))&&(i=Mj.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:hc(r,i)})),n=Mj.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?o0t(u[0].x):s0t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function sg(e,t){var n=typeof t,r;return t==null||n==="boolean"?L6(t):(n==="number"?hc:n==="string"?(r=X1(t))?(t=r,wA):CX:t instanceof X1?wA:t instanceof Date?DCe:PCe(t)?TX:Array.isArray(t)?OCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$Ce:hc)(e,t)}function a0t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function u0t(e,t){var n=F6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function uk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var uce=180/Math.PI,bz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function MCe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*uce,skewX:Math.atan(u)*uce,scaleX:o,scaleY:a}}var wN;function l0t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bz:MCe(t.a,t.b,t.c,t.d,t.e,t.f)}function c0t(e){return e==null||(wN||(wN=document.createElementNS("http://www.w3.org/2000/svg","g")),wN.setAttribute("transform",e),!(e=wN.transform.baseVal.consolidate()))?bz:(e=e.matrix,MCe(e.a,e.b,e.c,e.d,e.e,e.f))}function LCe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:hc(l,f)},{i:m-2,x:hc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:hc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:hc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:hc(l,f)},{i:m-2,x:hc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var FCe=LCe(l0t,"px, ","px)","deg)"),jCe=LCe(c0t,", ",")",")"),f0t=1e-12;function lce(e){return((e=Math.exp(e))+1/e)/2}function d0t(e){return((e=Math.exp(e))-1/e)/2}function h0t(e){return((e=Math.exp(2*e))-1)/(e+1)}const p0t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<f0t)y=Math.log(d/l)/t,g=function(E){return[a+E*h,u+E*p,l*Math.exp(t*E*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),x=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(w*w+1)-w);y=(C-x)/t,g=function(E){var S=E*y,A=lce(x),k=l/(n*v)*(A*h0t(t*S+x)-d0t(x));return[a+k*h,u+k*p,l*A/lce(t*S+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function BCe(e){return function(t,n){var r=e((t=bA(t)).h,(n=bA(n)).h),i=io(t.s,n.s),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const m0t=BCe(F6);var g0t=BCe(io);function y0t(e,t){var n=io((e=o3(e)).l,(t=o3(t)).l),r=io(e.a,t.a),i=io(e.b,t.b),s=io(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function UCe(e){return function(t,n){var r=e((t=a3(t)).h,(n=a3(n)).h),i=io(t.c,n.c),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const v0t=UCe(F6);var b0t=UCe(io);function zCe(e){return function t(n){n=+n;function r(i,s){var o=e((i=yz(i)).h,(s=yz(s)).h),a=io(i.s,s.s),u=io(i.l,s.l),l=io(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const _0t=zCe(F6);var w0t=zCe(io);function AX(e,t){t===void 0&&(t=e,e=sg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function E0t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const x0t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:sg,interpolateArray:i0t,interpolateBasis:ICe,interpolateBasisClosed:kCe,interpolateCubehelix:_0t,interpolateCubehelixLong:w0t,interpolateDate:DCe,interpolateDiscrete:a0t,interpolateHcl:v0t,interpolateHclLong:b0t,interpolateHsl:m0t,interpolateHslLong:g0t,interpolateHue:u0t,interpolateLab:y0t,interpolateNumber:hc,interpolateNumberArray:TX,interpolateObject:$Ce,interpolateRgb:wA,interpolateRgbBasis:n0t,interpolateRgbBasisClosed:r0t,interpolateRound:uk,interpolateString:CX,interpolateTransformCss:FCe,interpolateTransformSvg:jCe,interpolateZoom:p0t,piecewise:AX,quantize:E0t},Symbol.toStringTag,{value:"Module"}));var PE=0,aC=0,yT=0,VCe=1e3,u3,uC,l3=0,Q1=0,j6=0,EA=typeof performance=="object"&&performance.now?performance:Date,HCe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function B6(){return Q1||(HCe(S0t),Q1=EA.now()+j6)}function S0t(){Q1=0}function xA(){this._call=this._time=this._next=null}xA.prototype=IX.prototype={constructor:xA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?B6():+n)+(t==null?0:+t),!this._next&&uC!==this&&(uC?uC._next=this:u3=this,uC=this),this._call=e,this._time=n,_z()},stop:function(){this._call&&(this._call=null,this._time=1/0,_z())}};function IX(e,t,n){var r=new xA;return r.restart(e,t,n),r}function T0t(){B6(),++PE;for(var e=u3,t;e;)(t=Q1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--PE}function cce(){Q1=(l3=EA.now())+j6,PE=aC=0;try{T0t()}finally{PE=0,A0t(),Q1=0}}function C0t(){var e=EA.now(),t=e-l3;t>VCe&&(j6-=t,l3=e)}function A0t(){for(var e,t=u3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:u3=n);uC=e,_z(r)}function _z(e){if(!PE){aC&&(aC=clearTimeout(aC));var t=e-Q1;t>24?(e<1/0&&(aC=setTimeout(cce,e-EA.now()-j6)),yT&&(yT=clearInterval(yT))):(yT||(l3=EA.now(),yT=setInterval(C0t,VCe)),PE=1,HCe(cce))}}function fce(e,t,n){var r=new xA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function I0t(e,t,n){var r=new xA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?B6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var k0t=D6("start","end","cancel","interrupt"),R0t=[],qCe=0,dce=1,wz=2,iO=3,hce=4,Ez=5,sO=6;function U6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;N0t(e,n,{name:t,index:r,group:i,on:k0t,tween:R0t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:qCe})}function kX(e,t){var n=md(e,t);if(n.state>qCe)throw new Error("too late; already scheduled");return n}function up(e,t){var n=md(e,t);if(n.state>iO)throw new Error("too late; already running");return n}function md(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function N0t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=IX(s,0,n.time);function s(l){n.state=dce,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==dce)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===iO)return fce(o);h.state===hce?(h.state=sO,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=sO,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(fce(function(){n.state===iO&&(n.state=hce,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=wz,n.on.call("start",e,e.__data__,n.index,n.group),n.state===wz){for(n.state=iO,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ez,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===Ez&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=sO,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function xz(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>wz&&r.state<Ez,r.state=sO,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function P0t(e){return this.each(function(){xz(this,e)})}function O0t(e,t){var n,r;return function(){var i=up(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function D0t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=up(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function $0t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=md(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?O0t:D0t)(n,e,t))}function RX(e,t,n){var r=e._id;return e.each(function(){var i=up(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return md(i,r).value[t]}}function WCe(e,t){var n;return(typeof t=="number"?hc:t instanceof X1?wA:(n=X1(t))?(t=n,wA):CX)(e,t)}function M0t(e){return function(){this.removeAttribute(e)}}function L0t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function F0t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function j0t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function B0t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function U0t(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function z0t(e,t){var n=$6(e),r=n==="transform"?jCe:WCe;return this.attrTween(e,typeof t=="function"?(n.local?U0t:B0t)(n,r,RX(this,"attr."+e,t)):t==null?(n.local?L0t:M0t)(n):(n.local?j0t:F0t)(n,r,t))}function V0t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function H0t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function q0t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&H0t(e,s)),n}return i._value=t,i}function W0t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&V0t(e,s)),n}return i._value=t,i}function G0t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$6(e);return this.tween(n,(r.local?q0t:W0t)(r,t))}function Y0t(e,t){return function(){kX(this,e).delay=+t.apply(this,arguments)}}function K0t(e,t){return t=+t,function(){kX(this,e).delay=t}}function X0t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Y0t:K0t)(t,e)):md(this.node(),t).delay}function Q0t(e,t){return function(){up(this,e).duration=+t.apply(this,arguments)}}function J0t(e,t){return t=+t,function(){up(this,e).duration=t}}function Z0t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Q0t:J0t)(t,e)):md(this.node(),t).duration}function eyt(e,t){if(typeof t!="function")throw new Error;return function(){up(this,e).ease=t}}function tyt(e){var t=this._id;return arguments.length?this.each(eyt(t,e)):md(this.node(),t).ease}function nyt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;up(this,e).ease=n}}function ryt(e){if(typeof e!="function")throw new Error;return this.each(nyt(this._id,e))}function iyt(e){typeof e!="function"&&(e=aCe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new $m(r,this._parents,this._name,this._id)}function syt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new $m(o,this._parents,this._name,this._id)}function oyt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ayt(e,t,n){var r,i,s=oyt(t)?kX:up;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function uyt(e,t){var n=this._id;return arguments.length<2?md(this.node(),n).on.on(e):this.each(ayt(n,e,t))}function lyt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function cyt(){return this.on("end.remove",lyt(this._id))}function fyt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bX(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,U6(l[d],t,n,d,l,md(c,n)));return new $m(s,this._parents,t,n)}function dyt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oCe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=md(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&U6(h,t,n,m,d,p);s.push(d),o.push(c)}return new $m(s,o,t,n)}var hyt=ok.prototype.constructor;function pyt(){return new hyt(this._groups,this._parents)}function myt(e,t){var n,r,i;return function(){var s=RE(this,e),o=(this.style.removeProperty(e),RE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function GCe(e){return function(){this.style.removeProperty(e)}}function gyt(e,t,n){var r,i=n+"",s;return function(){var o=RE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function yyt(e,t,n){var r,i,s;return function(){var o=RE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),RE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function vyt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=up(this,e),l=u.on,c=u.value[s]==null?a||(a=GCe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function byt(e,t,n){var r=(e+="")=="transform"?FCe:WCe;return t==null?this.styleTween(e,myt(e,r)).on("end.style."+e,GCe(e)):typeof t=="function"?this.styleTween(e,yyt(e,r,RX(this,"style."+e,t))).each(vyt(this._id,e)):this.styleTween(e,gyt(e,r,t),n).on("end.style."+e,null)}function _yt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function wyt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&_yt(e,o,n)),r}return s._value=t,s}function Eyt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,wyt(e,t,n??""))}function xyt(e){return function(){this.textContent=e}}function Syt(e){return function(){var t=e(this);this.textContent=t??""}}function Tyt(e){return this.tween("text",typeof e=="function"?Syt(RX(this,"text",e)):xyt(e==null?"":e+""))}function Cyt(e){return function(t){this.textContent=e.call(this,t)}}function Ayt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Cyt(i)),t}return r._value=e,r}function Iyt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ayt(e))}function kyt(){for(var e=this._name,t=this._id,n=YCe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=md(u,t);U6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $m(r,this._parents,e,n)}function Ryt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=up(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Nyt=0;function $m(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function YCe(){return++Nyt}var kp=ok.prototype;$m.prototype={constructor:$m,select:fyt,selectAll:dyt,selectChild:kp.selectChild,selectChildren:kp.selectChildren,filter:iyt,merge:syt,selection:pyt,transition:kyt,call:kp.call,nodes:kp.nodes,node:kp.node,size:kp.size,empty:kp.empty,each:kp.each,on:uyt,attr:z0t,attrTween:G0t,style:byt,styleTween:Eyt,text:Tyt,textTween:Iyt,remove:cyt,tween:$0t,delay:X0t,duration:Z0t,ease:tyt,easeVarying:ryt,end:Ryt,[Symbol.iterator]:kp[Symbol.iterator]};function Pyt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Oyt={time:null,delay:0,duration:250,ease:Pyt};function Dyt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $yt(e){var t,n;e instanceof $m?(t=e._id,e=e._name):(t=YCe(),(n=Oyt).time=B6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&U6(u,e,t,l,o,n||Dyt(u,t));return new $m(r,this._parents,e,t)}ok.prototype.interrupt=P0t;ok.prototype.transition=$yt;const Lj=e=>()=>e;function Myt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Lyt(e){e.stopImmediatePropagation()}function Fj(e){e.preventDefault(),e.stopImmediatePropagation()}var pce={name:"drag"},jj={name:"space"},x_={name:"handle"},S_={name:"center"};const{abs:mce,max:ta,min:na}=Math;function gce(e){return[+e[0],+e[1]]}function Sz(e){return[gce(e[0]),gce(e[1])]}var oO={name:"x",handles:["w","e"].map(SA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},aO={name:"y",handles:["n","s"].map(SA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Fyt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(SA),input:function(e){return e==null?null:Sz(e)},output:function(e){return e}},Rp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yce={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},vce={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},jyt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Byt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function SA(e){return{type:e}}function Uyt(e){return!e.ctrlKey&&!e.button}function zyt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Vyt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bj(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Hyt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function qyt(){return NX(oO)}function Wyt(){return NX(aO)}function Gyt(){return NX(Fyt)}function NX(e){var t=zyt,n=Uyt,r=Vyt,i=!0,s=D6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([SA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Rp.overlay).merge(y).each(function(){var b=Bj(this).extent;To(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([SA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Rp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Rp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,x=c(b,arguments),C=w.selection,E=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),S=sg(C,E);function A(k){w.selection=k===1&&E===null?null:S(k),l.call(b),x.brush()}return C!==null&&E!==null?A:A(1)}):g.each(function(){var b=this,w=arguments,x=b.__brush,C=e.input(typeof y=="function"?y.apply(b,w):y,x.extent),E=c(b,w).beforestart();xz(b),x.selection=C===null?null:C,l.call(b),E.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=To(this),y=Bj(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=To(this.that).datum();s.call(g,this.that,new Myt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?pce:i&&g.altKey?S_:x_,w=e===aO?null:jyt[v],x=e===oO?null:Byt[v],C=Bj(y),E=C.extent,S=C.selection,A=E[0][0],k,R,D=E[0][1],P,O,L=E[1][0],j,B,U=E[1][1],H,$,z=0,W=0,F,V=w&&x&&i&&g.shiftKey,G,ee,le=Array.from(g.touches||[g],be=>{const Ae=be.identifier;return be=Xle(be,y),be.point0=be.slice(),be.identifier=Ae,be});xz(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){S&&(F=!0);const be=[le[0],le[1]||le[0]];C.selection=S=[[k=e===aO?A:na(be[0][0],be[1][0]),P=e===oO?D:na(be[0][1],be[1][1])],[j=e===aO?L:ta(be[0][0],be[1][0]),H=e===oO?U:ta(be[0][1],be[1][1])]],le.length>1&&Ye(g)}else k=S[0][0],P=S[0][1],j=S[1][0],H=S[1][1];R=k,O=P,B=j,$=H;var he=To(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",Rp[v]);if(g.touches)de.moved=ve,de.ended=Ue;else{var Ce=To(g.view).on("mousemove.brush",ve,!0).on("mouseup.brush",Ue,!0);i&&Ce.on("keydown.brush",mt,!0).on("keyup.brush",it,!0),jgt(g.view)}l.call(y),de.start(g,b.name);function ve(be){for(const Ae of be.changedTouches||[be])for(const Ve of le)Ve.identifier===Ae.identifier&&(Ve.cur=Xle(Ae,y));if(V&&!G&&!ee&&le.length===1){const Ae=le[0];mce(Ae.cur[0]-Ae[0])>mce(Ae.cur[1]-Ae[1])?ee=!0:G=!0}for(const Ae of le)Ae.cur&&(Ae[0]=Ae.cur[0],Ae[1]=Ae.cur[1]);F=!0,Fj(be),Ye(be)}function Ye(be){const Ae=le[0],Ve=Ae.point0;var lt;switch(z=Ae[0]-Ve[0],W=Ae[1]-Ve[1],b){case jj:case pce:{w&&(z=ta(A-k,na(L-j,z)),R=k+z,B=j+z),x&&(W=ta(D-P,na(U-H,W)),O=P+W,$=H+W);break}case x_:{le[1]?(w&&(R=ta(A,na(L,le[0][0])),B=ta(A,na(L,le[1][0])),w=1),x&&(O=ta(D,na(U,le[0][1])),$=ta(D,na(U,le[1][1])),x=1)):(w<0?(z=ta(A-k,na(L-k,z)),R=k+z,B=j):w>0&&(z=ta(A-j,na(L-j,z)),R=k,B=j+z),x<0?(W=ta(D-P,na(U-P,W)),O=P+W,$=H):x>0&&(W=ta(D-H,na(U-H,W)),O=P,$=H+W));break}case S_:{w&&(R=ta(A,na(L,k-z*w)),B=ta(A,na(L,j+z*w))),x&&(O=ta(D,na(U,P-W*x)),$=ta(D,na(U,H+W*x)));break}}B<R&&(w*=-1,lt=k,k=j,j=lt,lt=R,R=B,B=lt,v in yce&&ye.attr("cursor",Rp[v=yce[v]])),$<O&&(x*=-1,lt=P,P=H,H=lt,lt=O,O=$,$=lt,v in vce&&ye.attr("cursor",Rp[v=vce[v]])),C.selection&&(S=C.selection),G&&(R=S[0][0],B=S[1][0]),ee&&(O=S[0][1],$=S[1][1]),(S[0][0]!==R||S[0][1]!==O||S[1][0]!==B||S[1][1]!==$)&&(C.selection=[[R,O],[B,$]],l.call(y),de.brush(be,b.name))}function Ue(be){if(Lyt(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Bgt(be.view,F),Ce.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",Rp.overlay),C.selection&&(S=C.selection),Hyt(S)&&(C.selection=null,l.call(y)),de.end(be,b.name)}function mt(be){switch(be.keyCode){case 16:{V=w&&x;break}case 18:{b===x_&&(w&&(j=B-z*w,k=R+z*w),x&&(H=$-W*x,P=O+W*x),b=S_,Ye(be));break}case 32:{(b===x_||b===S_)&&(w<0?j=B-z:w>0&&(k=R-z),x<0?H=$-W:x>0&&(P=O-W),b=jj,ye.attr("cursor",Rp.selection),Ye(be));break}default:return}Fj(be)}function it(be){switch(be.keyCode){case 16:{V&&(G=ee=V=!1,Ye(be));break}case 18:{b===S_&&(w<0?j=B:w>0&&(k=R),x<0?H=$:x>0&&(P=O),b=x_,Ye(be));break}case 32:{b===jj&&(be.altKey?(w&&(j=B-z*w,k=R+z*w),x&&(H=$-W*x,P=O+W*x),b=S_):(w<0?j=B:w>0&&(k=R),x<0?H=$:x>0&&(P=O),b=x_),ye.attr("cursor",Rp[v]),Ye(be));break}default:return}Fj(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=Sz(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Lj(Sz(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Lj(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Lj(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const Tz=Math.PI,Cz=2*Tz,kv=1e-6,Yyt=Cz-kv;function KCe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Kyt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return KCe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let PX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?KCe:Kyt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>kv)if(!(Math.abs(f*u-l*c)>kv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((Tz-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,x=b/y;Math.abs(w-1)>kv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>kv||Math.abs(this._y1-c)>kv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Cz+Cz),d>Yyt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>kv&&this._append`A${r},${r},0,${+(d>=Tz)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function z6(){return new PX}z6.prototype=PX.prototype;const ym=11102230246251565e-32,ra=134217729,Xyt=(3+8*ym)*ym;function Uj(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Qyt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function lk(e){return new Float64Array(e)}const Jyt=(3+16*ym)*ym,Zyt=(2+12*ym)*ym,evt=(9+64*ym)*ym*ym,T_=lk(4),bce=lk(8),_ce=lk(12),wce=lk(16),$a=lk(4);function tvt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,x,C,E,S;const A=e-i,k=n-i,R=t-s,D=r-s;w=A*D,d=ra*A,h=d-(d-A),p=A-h,d=ra*D,m=d-(d-D),g=D-m,x=p*g-(w-h*m-p*m-h*g),C=R*k,d=ra*R,h=d-(d-R),p=R-h,d=ra*k,m=d-(d-k),g=k-m,E=p*g-(C-h*m-p*m-h*g),y=x-E,f=x-y,T_[0]=x-(y+f)+(f-E),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-C,f=b-y,T_[1]=b-(y+f)+(f-C),S=v+y,f=S-v,T_[2]=v-(S-f)+(y-f),T_[3]=S;let P=Qyt(4,T_),O=Zyt*o;if(P>=O||-P>=O||(f=e-A,a=e-(A+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-D,c=r-(D+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(O=evt*o+Xyt*Math.abs(P),P+=A*c+D*a-(R*l+k*u),P>=O||-P>=O))return P;w=a*D,d=ra*a,h=d-(d-a),p=a-h,d=ra*D,m=d-(d-D),g=D-m,x=p*g-(w-h*m-p*m-h*g),C=u*k,d=ra*u,h=d-(d-u),p=u-h,d=ra*k,m=d-(d-k),g=k-m,E=p*g-(C-h*m-p*m-h*g),y=x-E,f=x-y,$a[0]=x-(y+f)+(f-E),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-C,f=b-y,$a[1]=b-(y+f)+(f-C),S=v+y,f=S-v,$a[2]=v-(S-f)+(y-f),$a[3]=S;const L=Uj(4,T_,4,$a,bce);w=A*c,d=ra*A,h=d-(d-A),p=A-h,d=ra*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),C=R*l,d=ra*R,h=d-(d-R),p=R-h,d=ra*l,m=d-(d-l),g=l-m,E=p*g-(C-h*m-p*m-h*g),y=x-E,f=x-y,$a[0]=x-(y+f)+(f-E),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-C,f=b-y,$a[1]=b-(y+f)+(f-C),S=v+y,f=S-v,$a[2]=v-(S-f)+(y-f),$a[3]=S;const j=Uj(L,bce,4,$a,_ce);w=a*c,d=ra*a,h=d-(d-a),p=a-h,d=ra*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),C=u*l,d=ra*u,h=d-(d-u),p=u-h,d=ra*l,m=d-(d-l),g=l-m,E=p*g-(C-h*m-p*m-h*g),y=x-E,f=x-y,$a[0]=x-(y+f)+(f-E),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-C,f=b-y,$a[1]=b-(y+f)+(f-C),S=v+y,f=S-v,$a[2]=v-(S-f)+(y-f),$a[3]=S;const B=Uj(j,_ce,4,$a,wce);return wce[B-1]}function EN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Jyt*l?u:-tvt(e,t,n,r,i,s,l)}const Ece=Math.pow(2,-52),xN=new Uint32Array(512);class c3{static from(t,n=ovt,r=avt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new c3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const k=t[2*A],R=t[2*A+1];k<a&&(a=k),R<u&&(u=R),k>l&&(l=k),R>c&&(c=R),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,k=1/0;A<o;A++){const R=zj(f,d,t[2*A],t[2*A+1]);R<k&&(h=A,k=R)}const g=t[2*h],y=t[2*h+1];for(let A=0,k=1/0;A<o;A++){if(A===h)continue;const R=zj(g,y,t[2*A],t[2*A+1]);R<k&&R>0&&(p=A,k=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const k=ivt(g,y,v,b,t[2*A],t[2*A+1]);k<w&&(m=A,w=k)}let x=t[2*m],C=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];pw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let k=0;for(let R=0,D=-1/0;R<o;R++){const P=this._ids[R],O=this._dists[P];O>D&&(A[k++]=P,D=O)}this.hull=A.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(EN(g,y,v,b,x,C)<0){const A=p,k=v,R=b;p=m,v=x,b=C,m=A,x=k,C=R}const E=svt(g,y,v,b,x,C);this._cx=E.x,this._cy=E.y;for(let A=0;A<o;A++)this._dists[A]=zj(t[2*A],t[2*A+1],E.x,E.y);pw(this._ids,this._dists,0,o-1),this._hullStart=h;let S=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(x,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,k,R;A<this._ids.length;A++){const D=this._ids[A],P=t[2*D],O=t[2*D+1];if(A>0&&Math.abs(P-k)<=Ece&&Math.abs(O-R)<=Ece||(k=P,R=O,D===h||D===p||D===m))continue;let L=0;for(let $=0,z=this._hashKey(P,O);$<this._hashSize&&(L=s[(z+$)%this._hashSize],!(L!==-1&&L!==r[L]));$++);L=n[L];let j=L,B;for(;B=r[j],EN(P,O,t[2*j],t[2*j+1],t[2*B],t[2*B+1])>=0;)if(j=B,j===L){j=-1;break}if(j===-1)continue;let U=this._addTriangle(j,D,r[j],-1,-1,i[j]);i[D]=this._legalize(U+2),i[j]=U,S++;let H=r[j];for(;B=r[H],EN(P,O,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,D,B,i[D],-1,i[H]),i[D]=this._legalize(U+2),r[H]=H,S--,H=B;if(j===L)for(;B=n[j],EN(P,O,t[2*B],t[2*B+1],t[2*j],t[2*j+1])<0;)U=this._addTriangle(B,D,j,-1,i[j],i[B]),this._legalize(U+2),i[B]=U,r[j]=j,S--,j=B;this._hullStart=n[D]=j,r[j]=n[H]=D,r[D]=H,s[this._hashKey(P,O)]=D,s[this._hashKey(t[2*j],t[2*j+1])]=j}this.hull=new Uint32Array(S);for(let A=0,k=this._hullStart;A<S;A++)this.hull[A]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(nvt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=xN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(rvt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<xN.length&&(xN[s++]=v)}else{if(s===0)break;t=xN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function nvt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function zj(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function rvt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function ivt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function svt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function pw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;vT(e,i,s),t[e[n]]>t[e[r]]&&vT(e,n,r),t[e[s]]>t[e[r]]&&vT(e,s,r),t[e[n]]>t[e[s]]&&vT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;vT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(pw(e,t,s,r),pw(e,t,n,o-1)):(pw(e,t,n,o-1),pw(e,t,s,r))}}function vT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ovt(e){return e[0]}function avt(e){return e[1]}const xce=1e-6;class u1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>xce||Math.abs(this._y1-s)>xce)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Az{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let uvt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,x=r[m+1]*2,C=r[m+2]*2,E=t[w],S=t[w+1],A=t[x],k=t[x+1],R=t[C],D=t[C+1],P=A-E,O=k-S,L=R-E,j=D-S,B=(P*j-O*L)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-E)*j-(o-S)*L);v=(E+R)/2-U*j,b=(S+D)/2+U*L}else{const U=1/B,H=P*P+O*O,$=L*L+j*j;v=E+(j*H-O*$)*U,b=S+(P*$-L*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new u1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new u1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new u1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Az;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const lvt=2*Math.PI,C_=Math.pow;function cvt(e){return e[0]}function fvt(e){return e[1]}function dvt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function hvt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class OX{static from(t,n=cvt,r=fvt,i){return new OX("length"in t?pvt(t,n,r,i):Float64Array.from(mvt(t,n,r,i)))}constructor(t){this._delaunator=new c3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&dvt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=hvt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new c3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new uvt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=C_(n-l[t*2],2)+C_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=C_(n-l[p*2],2)+C_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&C_(n-l[h*2],2)+C_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new u1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new u1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,lvt)}return r&&r.value()}renderHull(t){const n=t==null?t=new u1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Az;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new u1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Az;return this.renderTriangle(t,n),n.value()}}function pvt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*mvt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Sce={},Vj={},Hj=34,bT=10,qj=13;function XCe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function gvt(e,t){var n=XCe(e);return function(r,i){return t(n(r),i,e)}}function Tce(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function wu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function yvt(e){return e<0?"-"+wu(-e,6):e>9999?"+"+wu(e,6):wu(e,4)}function vvt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":yvt(e.getUTCFullYear())+"-"+wu(e.getUTCMonth()+1,2)+"-"+wu(e.getUTCDate(),2)+(i?"T"+wu(t,2)+":"+wu(n,2)+":"+wu(r,2)+"."+wu(i,3)+"Z":r?"T"+wu(t,2)+":"+wu(n,2)+":"+wu(r,2)+"Z":n||t?"T"+wu(t,2)+":"+wu(n,2)+"Z":"")}function QCe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?gvt(g,d):XCe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===bT&&--p,f.charCodeAt(p-1)===qj&&--p;function w(){if(v)return Vj;if(b)return b=!1,Sce;var C,E=m,S;if(f.charCodeAt(E)===Hj){for(;m++<p&&f.charCodeAt(m)!==Hj||f.charCodeAt(++m)===Hj;);return(C=m)>=p?v=!0:(S=f.charCodeAt(m++))===bT?b=!0:S===qj&&(b=!0,f.charCodeAt(m)===bT&&++m),f.slice(E+1,C-1).replace(/""/g,'"')}for(;m<p;){if((S=f.charCodeAt(C=m++))===bT)b=!0;else if(S===qj)b=!0,f.charCodeAt(m)===bT&&++m;else if(S!==n)continue;return f.slice(E,C)}return v=!0,f.slice(E,p)}for(;(y=w())!==Vj;){for(var x=[];y!==Sce&&y!==Vj;)x.push(y),y=w();d&&(x=d(x,g++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Tce(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Tce(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?vvt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var bvt=QCe(","),_vt=bvt.parse;function wvt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Evt(e,t){return fetch(e,t).then(wvt)}function xvt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Evt(t,n).then(function(i){return e(i,r)})}}var Svt=xvt(_vt);function Tvt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Cvt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return JCe(this.cover(t,n),t,n,e)}function JCe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Avt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)JCe(this,o[n],a[n],e[n]);return this}function Ivt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function kvt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Rvt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Wa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Nvt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Wa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Wa(h[3],g,y,u,l),new Wa(h[2],o,y,g,l),new Wa(h[1],g,a,u,y),new Wa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var x=Math.sqrt(n=w);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function Pvt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Ovt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Dvt(){return this._root}function $vt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Mvt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Wa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Wa(i,l,c,a,u)),(i=r[2])&&t.push(new Wa(i,s,c,l,u)),(i=r[1])&&t.push(new Wa(i,l,o,a,c)),(i=r[0])&&t.push(new Wa(i,s,o,l,c))}return this}function Lvt(e){var t=[],n=[],r;for(this._root&&t.push(new Wa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Wa(s,o,a,c,f)),(s=i[1])&&t.push(new Wa(s,c,a,u,f)),(s=i[2])&&t.push(new Wa(s,o,f,c,l)),(s=i[3])&&t.push(new Wa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Fvt(e){return e[0]}function jvt(e){return arguments.length?(this._x=e,this):this._x}function Bvt(e){return e[1]}function Uvt(e){return arguments.length?(this._y=e,this):this._y}function DX(e,t,n){var r=new $X(t??Fvt,n??Bvt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function $X(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Cce(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var cu=DX.prototype=$X.prototype;cu.copy=function(){var e=new $X(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Cce(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Cce(r));return e};cu.add=Cvt;cu.addAll=Avt;cu.cover=Ivt;cu.data=kvt;cu.extent=Rvt;cu.find=Nvt;cu.remove=Pvt;cu.removeAll=Ovt;cu.root=Dvt;cu.size=$vt;cu.visit=Mvt;cu.visitAfter=Lvt;cu.x=jvt;cu.y=Uvt;function Ya(e){return function(){return e}}function a0(e){return(e()-.5)*1e-6}function zvt(e){return e.x+e.vx}function Vvt(e){return e.y+e.vy}function Hvt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ya(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=DX(t,zvt,Vvt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,x,C,E){var S=b.data,A=b.r,k=m+A;if(S){if(S.index>d.index){var R=h-S.x-S.vx,D=p-S.y-S.vy,P=R*R+D*D;P<k*k&&(R===0&&(R=a0(r),P+=R*R),D===0&&(D=a0(r),P+=D*D),P=(k-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(k=(A*=A)/(g+A)),d.vy+=(D*=P)*k,S.vx-=R*(k=1-k),S.vy-=D*k)}return}return w>h+k||C<h-k||x>p+k||E<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ya(+l),u(),o):e},o}function qvt(e){return e.index}function Ace(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Wvt(e){var t=qvt,n=f,r,i=Ya(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,x,C,E,S,A,k;b<v;++b)w=e[b],x=w.source,C=w.target,E=C.x+C.vx-x.x-x.vx||a0(l),S=C.y+C.vy-x.y-x.vy||a0(l),A=Math.sqrt(E*E+S*S),A=(A-s[b])/A*g*r[b],E*=A,S*=A,C.vx-=E*(k=u[b]),C.vy-=S*k,x.vx+=E*(k=1-k),x.vy+=S*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((x,C)=>[t(x,C,o),x])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Ace(b,w.source)),typeof w.target!="object"&&(w.target=Ace(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ya(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ya(+g),m(),d):i},d}const Gvt=1664525,Yvt=1013904223,Ice=4294967296;function Kvt(){let e=1;return()=>(e=(Gvt*e+Yvt)%Ice)/Ice}function Xvt(e){return e.x}function Qvt(e){return e.y}var Jvt=10,Zvt=Math.PI*(3-Math.sqrt(5));function e1t(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=IX(f),l=D6("tick","end"),c=Kvt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Jvt*Math.sqrt(.5+m),b=m*Zvt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,x,C,E,S;for(y==null?y=1/0:y*=y,v=0;v<b;++v)E=e[v],w=m-E.x,x=g-E.y,C=w*w+x*x,C<y&&(S=E,y=C);return S},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function t1t(){var e,t,n,r,i=Ya(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=DX(e,Xvt,Qvt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=a0(n),w+=y*y),v===0&&(v=a0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=a0(n),w+=y*y),v===0&&(v=a0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ya(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function n1t(e){var t=Ya(.1),n,r,i;typeof e!="function"&&(e=Ya(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ya(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ya(+a),o(),s):e},s}function r1t(e){var t=Ya(.1),n,r,i;typeof e!="function"&&(e=Ya(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ya(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ya(+a),o(),s):e},s}function i1t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function f3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function OE(e){return e=f3(Math.abs(e)),e?e[1]:NaN}function s1t(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function o1t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var a1t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function J1(e){if(!(t=a1t.exec(e)))throw new Error("invalid format: "+e);var t;return new MX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}J1.prototype=MX.prototype;function MX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}MX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u1t(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ZCe;function l1t(e,t){var n=f3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ZCe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+f3(e,Math.max(0,t+s-1))[0]}function kce(e,t){var n=f3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Rce={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:i1t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kce(e*100,t),r:kce,s:l1t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nce(e){return e}var Pce=Array.prototype.map,Oce=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function e2e(e){var t=e.grouping===void 0||e.thousands===void 0?Nce:s1t(Pce.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Nce:o1t(Pce.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=J1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,x=f.type;x==="n"?(v=!0,x="g"):Rce[x]||(b===void 0&&(b=12),w=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?r:/[%p]/.test(x)?o:"",S=Rce[x],A=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(R){var D=C,P=E,O,L,j;if(x==="c")P=S(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:S(Math.abs(R),b),w&&(R=u1t(R)),B&&+R==0&&p!=="+"&&(B=!1),D=(B?p==="("?p:a:p==="-"||p==="("?"":p)+D,P=(x==="s"?Oce[8+ZCe/3]:"")+P+(B&&p==="("?")":""),A){for(O=-1,L=R.length;++O<L;)if(j=R.charCodeAt(O),48>j||j>57){P=(j===46?i+R.slice(O+1):R.slice(O))+P,R=R.slice(0,O);break}}}v&&!g&&(R=t(R,1/0));var U=D.length+R.length+P.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(R=t(H+R,H.length?y-P.length:1/0),H=""),h){case"<":R=D+R+P+H;break;case"=":R=D+H+R+P;break;case"^":R=H.slice(0,U=H.length>>1)+D+R+P+H.slice(U);break;default:R=H+D+R+P;break}return s(R)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=J1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(OE(d)/3)))*3,m=Math.pow(10,-p),g=Oce[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var SN,sS,LX;c1t({thousands:",",grouping:[3],currency:["$",""]});function c1t(e){return SN=e2e(e),sS=SN.format,LX=SN.formatPrefix,SN}function t2e(e){return Math.max(0,-OE(Math.abs(e)))}function n2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(OE(t)/3)))*3-OE(Math.abs(e)))}function r2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,OE(t)-OE(e))+1}var jt=1e-6,d3=1e-12,Nn=Math.PI,Ji=Nn/2,h3=Nn/4,ru=Nn*2,as=180/Nn,kn=Nn/180,Xn=Math.abs,oS=Math.atan,Lc=Math.atan2,zt=Math.cos,TN=Math.ceil,i2e=Math.exp,Iz=Math.hypot,p3=Math.log,Wj=Math.pow,Lt=Math.sin,Ec=Math.sign||function(e){return e>0?1:e<0?-1:0},iu=Math.sqrt,FX=Math.tan;function s2e(e){return e>1?0:e<-1?Nn:Math.acos(e)}function Qu(e){return e>1?Ji:e<-1?-Ji:Math.asin(e)}function Po(){}function m3(e,t){e&&$ce.hasOwnProperty(e.type)&&$ce[e.type](e,t)}var Dce={Feature:function(e,t){m3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)m3(n[r].geometry,t)}},$ce={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){kz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kz(n[r],t,0)},Polygon:function(e,t){Mce(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Mce(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)m3(n[r],t)}};function kz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Mce(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)kz(e[n],t,1);t.polygonEnd()}function Yp(e,t){e&&Dce.hasOwnProperty(e.type)?Dce[e.type](e,t):m3(e,t)}var g3=new Qa,y3=new Qa,o2e,a2e,Rz,Nz,Pz,Mh={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){g3=new Qa,Mh.lineStart=f1t,Mh.lineEnd=d1t},polygonEnd:function(){var e=+g3;y3.add(e<0?ru+e:e),this.lineStart=this.lineEnd=this.point=Po},sphere:function(){y3.add(ru)}};function f1t(){Mh.point=h1t}function d1t(){u2e(o2e,a2e)}function h1t(e,t){Mh.point=u2e,o2e=e,a2e=t,e*=kn,t*=kn,Rz=e,Nz=zt(t=t/2+h3),Pz=Lt(t)}function u2e(e,t){e*=kn,t*=kn,t=t/2+h3;var n=e-Rz,r=n>=0?1:-1,i=r*n,s=zt(t),o=Lt(t),a=Pz*o,u=Nz*s+a*zt(i),l=a*r*Lt(i);g3.add(Lc(l,u)),Rz=e,Nz=s,Pz=o}function p1t(e){return y3=new Qa,Yp(e,Mh),y3*2}function v3(e){return[Lc(e[1],e[0]),Qu(e[2])]}function Z1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Lt(t),Lt(n)]}function CN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function DE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Gj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function AN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function b3(e){var t=iu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Pi,ku,Hi,wl,Rv,l2e,c2e,Yw,m2,jg,Mm,Vp={point:Oz,lineStart:Lce,lineEnd:Fce,polygonStart:function(){Vp.point=d2e,Vp.lineStart=m1t,Vp.lineEnd=g1t,m2=new Qa,Mh.polygonStart()},polygonEnd:function(){Mh.polygonEnd(),Vp.point=Oz,Vp.lineStart=Lce,Vp.lineEnd=Fce,g3<0?(Pi=-(Hi=180),ku=-(wl=90)):m2>jt?wl=90:m2<-jt&&(ku=-90),Mm[0]=Pi,Mm[1]=Hi},sphere:function(){Pi=-(Hi=180),ku=-(wl=90)}};function Oz(e,t){jg.push(Mm=[Pi=e,Hi=e]),t<ku&&(ku=t),t>wl&&(wl=t)}function f2e(e,t){var n=Z1([e*kn,t*kn]);if(Yw){var r=DE(Yw,n),i=[r[1],-r[0],0],s=DE(i,r);b3(s),s=v3(s);var o=e-Rv,a=o>0?1:-1,u=s[0]*as*a,l,c=Xn(o)>180;c^(a*Rv<u&&u<a*e)?(l=s[1]*as,l>wl&&(wl=l)):(u=(u+360)%360-180,c^(a*Rv<u&&u<a*e)?(l=-s[1]*as,l<ku&&(ku=l)):(t<ku&&(ku=t),t>wl&&(wl=t))),c?e<Rv?bl(Pi,e)>bl(Pi,Hi)&&(Hi=e):bl(e,Hi)>bl(Pi,Hi)&&(Pi=e):Hi>=Pi?(e<Pi&&(Pi=e),e>Hi&&(Hi=e)):e>Rv?bl(Pi,e)>bl(Pi,Hi)&&(Hi=e):bl(e,Hi)>bl(Pi,Hi)&&(Pi=e)}else jg.push(Mm=[Pi=e,Hi=e]);t<ku&&(ku=t),t>wl&&(wl=t),Yw=n,Rv=e}function Lce(){Vp.point=f2e}function Fce(){Mm[0]=Pi,Mm[1]=Hi,Vp.point=Oz,Yw=null}function d2e(e,t){if(Yw){var n=e-Rv;m2.add(Xn(n)>180?n+(n>0?360:-360):n)}else l2e=e,c2e=t;Mh.point(e,t),f2e(e,t)}function m1t(){Mh.lineStart()}function g1t(){d2e(l2e,c2e),Mh.lineEnd(),Xn(m2)>jt&&(Pi=-(Hi=180)),Mm[0]=Pi,Mm[1]=Hi,Yw=null}function bl(e,t){return(t-=e)<0?t+360:t}function y1t(e,t){return e[0]-t[0]}function jce(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function v1t(e){var t,n,r,i,s,o,a;if(wl=Hi=-(Pi=ku=1/0),jg=[],Yp(e,Vp),n=jg.length){for(jg.sort(y1t),t=1,r=jg[0],s=[r];t<n;++t)i=jg[t],jce(r,i[0])||jce(r,i[1])?(bl(r[0],i[1])>bl(r[0],r[1])&&(r[1]=i[1]),bl(i[0],r[1])>bl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=bl(r[1],i[0]))>o&&(o=a,Pi=i[0],Hi=r[1])}return jg=Mm=null,Pi===1/0||ku===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pi,ku],[Hi,wl]]}var lC,_3,w3,E3,x3,S3,T3,C3,Dz,$z,Mz,h2e,p2e,Va,Ha,qa,Mf={sphere:Po,point:jX,lineStart:Bce,lineEnd:Uce,polygonStart:function(){Mf.lineStart=w1t,Mf.lineEnd=E1t},polygonEnd:function(){Mf.lineStart=Bce,Mf.lineEnd=Uce}};function jX(e,t){e*=kn,t*=kn;var n=zt(t);ck(n*zt(e),n*Lt(e),Lt(t))}function ck(e,t,n){++lC,w3+=(e-w3)/lC,E3+=(t-E3)/lC,x3+=(n-x3)/lC}function Bce(){Mf.point=b1t}function b1t(e,t){e*=kn,t*=kn;var n=zt(t);Va=n*zt(e),Ha=n*Lt(e),qa=Lt(t),Mf.point=_1t,ck(Va,Ha,qa)}function _1t(e,t){e*=kn,t*=kn;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=Lc(iu((o=Ha*s-qa*i)*o+(o=qa*r-Va*s)*o+(o=Va*i-Ha*r)*o),Va*r+Ha*i+qa*s);_3+=o,S3+=o*(Va+(Va=r)),T3+=o*(Ha+(Ha=i)),C3+=o*(qa+(qa=s)),ck(Va,Ha,qa)}function Uce(){Mf.point=jX}function w1t(){Mf.point=x1t}function E1t(){m2e(h2e,p2e),Mf.point=jX}function x1t(e,t){h2e=e,p2e=t,e*=kn,t*=kn,Mf.point=m2e;var n=zt(t);Va=n*zt(e),Ha=n*Lt(e),qa=Lt(t),ck(Va,Ha,qa)}function m2e(e,t){e*=kn,t*=kn;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=Ha*s-qa*i,a=qa*r-Va*s,u=Va*i-Ha*r,l=Iz(o,a,u),c=Qu(l),f=l&&-c/l;Dz.add(f*o),$z.add(f*a),Mz.add(f*u),_3+=c,S3+=c*(Va+(Va=r)),T3+=c*(Ha+(Ha=i)),C3+=c*(qa+(qa=s)),ck(Va,Ha,qa)}function S1t(e){lC=_3=w3=E3=x3=S3=T3=C3=0,Dz=new Qa,$z=new Qa,Mz=new Qa,Yp(e,Mf);var t=+Dz,n=+$z,r=+Mz,i=Iz(t,n,r);return i<d3&&(t=S3,n=T3,r=C3,_3<jt&&(t=w3,n=E3,r=x3),i=Iz(t,n,r),i<d3)?[NaN,NaN]:[Lc(n,t)*as,Qu(r/i)*as]}function Lz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Fz(e,t){return Xn(e)>Nn&&(e-=Math.round(e/ru)*ru),[e,t]}Fz.invert=Fz;function g2e(e,t,n){return(e%=ru)?t||n?Lz(Vce(e),Hce(t,n)):Vce(e):t||n?Hce(t,n):Fz}function zce(e){return function(t,n){return t+=e,Xn(t)>Nn&&(t-=Math.round(t/ru)*ru),[t,n]}}function Vce(e){var t=zce(e);return t.invert=zce(-e),t}function Hce(e,t){var n=zt(e),r=Lt(e),i=zt(t),s=Lt(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[Lc(f*i-h*s,c*n-d*r),Qu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[Lc(f*i+d*s,c*n+h*r),Qu(h*n-c*r)]},o}function T1t(e){e=g2e(e[0]*kn,e[1]*kn,e.length>2?e[2]*kn:0);function t(n){return n=e(n[0]*kn,n[1]*kn),n[0]*=as,n[1]*=as,n}return t.invert=function(n){return n=e.invert(n[0]*kn,n[1]*kn),n[0]*=as,n[1]*=as,n},t}function C1t(e,t,n,r,i,s){if(n){var o=zt(t),a=Lt(t),u=r*n;i==null?(i=t+r*ru,s=t-u/2):(i=qce(o,i),s=qce(o,s),(r>0?i<s:i>s)&&(i+=r*ru));for(var l,c=i;r>0?c>s:c<s;c-=u)l=v3([o,-a*zt(c),-a*Lt(c)]),e.point(l[0],l[1])}}function qce(e,t){t=Z1(t),t[0]-=e,b3(t);var n=s2e(-t[1]);return((-t[2]<0?-n:n)+ru-jt)%ru}function y2e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Po,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function uO(e,t){return Xn(e[0]-t[0])<jt&&Xn(e[1]-t[1])<jt}function IN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function v2e(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(uO(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new IN(g,p,null,!0)),o.push(v.o=new IN(g,null,v,!1)),s.push(v=new IN(y,p,null,!1)),o.push(v.o=new IN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Wce(s),Wce(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Wce(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Yj(e){return Xn(e[0])<=Nn?e[0]:Ec(e[0])*((Xn(e[0])+Nn)%ru-Nn)}function A1t(e,t){var n=Yj(t),r=t[1],i=Lt(r),s=[Lt(n),-zt(n),0],o=0,a=0,u=new Qa;i===1?r=Ji+jt:i===-1&&(r=-Ji-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=Yj(h),m=h[1]/2+h3,g=Lt(m),y=zt(m),v=0;v<d;++v,p=w,g=C,y=E,h=b){var b=f[v],w=Yj(b),x=b[1]/2+h3,C=Lt(x),E=zt(x),S=w-p,A=S>=0?1:-1,k=A*S,R=k>Nn,D=g*C;if(u.add(Lc(D*A*Lt(k),y*E+D*zt(k))),o+=R?S+A*ru:S,R^p>=n^w>=n){var P=DE(Z1(h),Z1(b));b3(P);var O=DE(s,P);b3(O);var L=(R^S>=0?-1:1)*Qu(O[2]);(r>L||r===L&&(P[0]||P[1]))&&(a+=R^S>=0?1:-1)}}return(o<-jt||o<jt&&u<-d3)^a&1}function b2e(e,t,n,r){return function(i){var s=t(i),o=y2e(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=rCe(c);var w=A1t(l,r);c.length?(u||(i.polygonStart(),u=!0),v2e(c,k1t,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,x){e(w,x)&&i.point(w,x)}function p(w,x){s.point(w,x)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,x){f.push([w,x]),a.point(w,x)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),C,E=x.length,S,A,k;if(f.pop(),l.push(f),f=null,!!E){if(w&1){if(A=x[0],(S=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<S;++C)i.point((k=A[C])[0],k[1]);i.lineEnd()}return}E>1&&w&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(I1t))}}return d}}function I1t(e){return e.length>1}function k1t(e,t){return((e=e.x)[0]<0?e[1]-Ji-jt:Ji-e[1])-((t=t.x)[0]<0?t[1]-Ji-jt:Ji-t[1])}const Gce=b2e(function(){return!0},R1t,P1t,[-Nn,-Ji]);function R1t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Nn:-Nn,u=Xn(s-t);Xn(u-Nn)<jt?(e.point(t,n=(n+o)/2>0?Ji:-Ji),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Nn&&(Xn(t-r)<jt&&(t-=r*jt),Xn(s-a)<jt&&(s-=a*jt),n=N1t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function N1t(e,t,n,r){var i,s,o=Lt(e-n);return Xn(o)>jt?oS((Lt(t)*(s=zt(r))*Lt(n)-Lt(r)*(i=zt(t))*Lt(e))/(i*s*o)):(t+r)/2}function P1t(e,t,n,r){var i;if(e==null)i=n*Ji,r.point(-Nn,i),r.point(0,i),r.point(Nn,i),r.point(Nn,0),r.point(Nn,-i),r.point(0,-i),r.point(-Nn,-i),r.point(-Nn,0),r.point(-Nn,i);else if(Xn(e[0]-t[0])>jt){var s=e[0]<t[0]?Nn:-Nn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function O1t(e){var t=zt(e),n=2*kn,r=t>0,i=Xn(t)>jt;function s(c,f,d,h){C1t(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),x=r?w?0:l(g,y):w?l(g+(g<0?Nn:-Nn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||uO(f,b)||uO(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var C;!(x&d)&&(C=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}w&&(!f||!uO(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Z1(c),p=Z1(f),m=[1,0,0],g=DE(h,p),y=CN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,x=-t*v/b,C=DE(m,g),E=AN(m,w),S=AN(g,x);Gj(E,S);var A=C,k=CN(E,A),R=CN(A,A),D=k*k-R*(CN(E,E)-1);if(!(D<0)){var P=iu(D),O=AN(A,(-k-P)/R);if(Gj(O,E),O=v3(O),!d)return O;var L=c[0],j=f[0],B=c[1],U=f[1],H;j<L&&(H=L,L=j,j=H);var $=j-L,z=Xn($-Nn)<jt,W=z||$<jt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^O[1]<(Xn(O[0]-L)<jt?B:U):B<=O[1]&&O[1]<=U:$>Nn^(L<=O[0]&&O[0]<=j)){var F=AN(A,(-k+P)/R);return Gj(F,E),[O,v3(F)]}}}function l(c,f){var d=r?e:Nn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return b2e(o,a,s,r?[0,-e]:[-Nn,e-Nn])}function D1t(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var cC=1e9,kN=-cC;function _2e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<jt?c>0?0:3:Xn(l[0]-n)<jt?c>0?2:1:Xn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=y2e(),d,h,p,m,g,y,v,b,w,x,C,E={point:S,lineStart:D,lineEnd:P,polygonStart:k,polygonEnd:R};function S(L,j){i(L,j)&&c.point(L,j)}function A(){for(var L=0,j=0,B=h.length;j<B;++j)for(var U=h[j],H=1,$=U.length,z=U[0],W,F,V=z[0],G=z[1];H<$;++H)W=V,F=G,z=U[H],V=z[0],G=z[1],F<=r?G>r&&(V-W)*(r-F)>(G-F)*(e-W)&&++L:G<=r&&(V-W)*(r-F)<(G-F)*(e-W)&&--L;return L}function k(){c=f,d=[],h=[],C=!0}function R(){var L=A(),j=C&&L,B=(d=rCe(d)).length;(j||B)&&(l.polygonStart(),j&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&v2e(d,a,L,s,l),l.polygonEnd()),c=l,d=h=p=null}function D(){E.point=O,h&&h.push(p=[]),x=!0,w=!1,v=b=NaN}function P(){d&&(O(m,g),y&&w&&f.rejoin(),d.push(f.result())),E.point=S,w&&c.lineEnd()}function O(L,j){var B=i(L,j);if(h&&p.push([L,j]),x)m=L,g=j,y=B,x=!1,B&&(c.lineStart(),c.point(L,j));else if(B&&w)c.point(L,j);else{var U=[v=Math.max(kN,Math.min(cC,v)),b=Math.max(kN,Math.min(cC,b))],H=[L=Math.max(kN,Math.min(cC,L)),j=Math.max(kN,Math.min(cC,j))];D1t(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),C=!1):B&&(c.lineStart(),c.point(L,j),C=!1)}v=L,b=j,w=B}return E}}function Yce(e,t,n){var r=Lu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Kce(e,t,n){var r=Lu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function $1t(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Lu(TN(r/c)*c,n,c).map(p).concat(Lu(TN(a/f)*f,o,f).map(m)).concat(Lu(TN(t/u)*u,e,u).filter(function(b){return Xn(b%c)>jt}).map(d)).concat(Lu(TN(s/l)*l,i,l).filter(function(b){return Xn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Yce(s,i,90),h=Kce(t,e,g),p=Yce(a,o,90),m=Kce(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const TA=e=>e;var Kj=new Qa,jz=new Qa,w2e,E2e,Bz,Uz,Kp={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){Kp.lineStart=M1t,Kp.lineEnd=F1t},polygonEnd:function(){Kp.lineStart=Kp.lineEnd=Kp.point=Po,Kj.add(Xn(jz)),jz=new Qa},result:function(){var e=Kj/2;return Kj=new Qa,e}};function M1t(){Kp.point=L1t}function L1t(e,t){Kp.point=x2e,w2e=Bz=e,E2e=Uz=t}function x2e(e,t){jz.add(Uz*e-Bz*t),Bz=e,Uz=t}function F1t(){x2e(w2e,E2e)}var $E=1/0,A3=$E,CA=-$E,I3=CA,k3={point:j1t,lineStart:Po,lineEnd:Po,polygonStart:Po,polygonEnd:Po,result:function(){var e=[[$E,A3],[CA,I3]];return CA=I3=-(A3=$E=1/0),e}};function j1t(e,t){e<$E&&($E=e),e>CA&&(CA=e),t<A3&&(A3=t),t>I3&&(I3=t)}var zz=0,Vz=0,fC=0,R3=0,N3=0,mw=0,Hz=0,qz=0,dC=0,S2e,T2e,eh,th,gc={point:eb,lineStart:Xce,lineEnd:Qce,polygonStart:function(){gc.lineStart=z1t,gc.lineEnd=V1t},polygonEnd:function(){gc.point=eb,gc.lineStart=Xce,gc.lineEnd=Qce},result:function(){var e=dC?[Hz/dC,qz/dC]:mw?[R3/mw,N3/mw]:fC?[zz/fC,Vz/fC]:[NaN,NaN];return zz=Vz=fC=R3=N3=mw=Hz=qz=dC=0,e}};function eb(e,t){zz+=e,Vz+=t,++fC}function Xce(){gc.point=B1t}function B1t(e,t){gc.point=U1t,eb(eh=e,th=t)}function U1t(e,t){var n=e-eh,r=t-th,i=iu(n*n+r*r);R3+=i*(eh+e)/2,N3+=i*(th+t)/2,mw+=i,eb(eh=e,th=t)}function Qce(){gc.point=eb}function z1t(){gc.point=H1t}function V1t(){C2e(S2e,T2e)}function H1t(e,t){gc.point=C2e,eb(S2e=eh=e,T2e=th=t)}function C2e(e,t){var n=e-eh,r=t-th,i=iu(n*n+r*r);R3+=i*(eh+e)/2,N3+=i*(th+t)/2,mw+=i,i=th*e-eh*t,Hz+=i*(eh+e),qz+=i*(th+t),dC+=i*3,eb(eh=e,th=t)}function A2e(e){this._context=e}A2e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ru);break}}},result:Po};var Wz=new Qa,Xj,I2e,k2e,hC,pC,AA={point:Po,lineStart:function(){AA.point=q1t},lineEnd:function(){Xj&&R2e(I2e,k2e),AA.point=Po},polygonStart:function(){Xj=!0},polygonEnd:function(){Xj=null},result:function(){var e=+Wz;return Wz=new Qa,e}};function q1t(e,t){AA.point=R2e,I2e=hC=e,k2e=pC=t}function R2e(e,t){hC-=e,pC-=t,Wz.add(iu(hC*hC+pC*pC)),hC=e,pC=t}let Jce,P3,Zce,efe;class tfe{constructor(t){this._append=t==null?N2e:W1t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Zce||this._append!==P3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Zce=r,P3=this._append,efe=this._,this._=i}this._+=efe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function N2e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function W1t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return N2e;if(t!==Jce){const n=10**t;Jce=t,P3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return P3}function P2e(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Yp(a,i(s))),s.result()}return o.area=function(a){return Yp(a,i(Kp)),Kp.result()},o.measure=function(a){return Yp(a,i(AA)),AA.result()},o.bounds=function(a){return Yp(a,i(k3)),k3.result()},o.centroid=function(a){return Yp(a,i(gc)),gc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,TA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new tfe(n)):new A2e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new tfe(n)),o},o.projection(e).digits(n).context(t)}function V6(e){return function(t){var n=new Gz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Gz(){}Gz.prototype={constructor:Gz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function BX(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Yp(n,e.stream(k3)),t(k3.result()),r!=null&&e.clipExtent(r),e}function H6(e,t,n){return BX(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function UX(e,t,n){return H6(e,[[0,0],t],n)}function zX(e,t,n){return BX(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function VX(e,t,n){return BX(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var nfe=16,G1t=zt(30*kn);function rfe(e,t){return+t?K1t(e,t):Y1t(e)}function Y1t(e){return V6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function K1t(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,x=a+h,C=u+p,E=iu(w*w+x*x+C*C),S=Qu(C/=E),A=Xn(Xn(C)-1)<jt||Xn(s-f)<jt?(s+f)/2:Lc(x,w),k=e(A,S),R=k[0],D=k[1],P=R-r,O=D-i,L=v*P-y*O;(L*L/b>t||Xn((y*P+v*O)/b-.5)>.3||o*d+a*h+u*p<G1t)&&(n(r,i,s,o,a,u,R,D,A,w/=E,x/=E,C,m,g),g.point(R,D),n(R,D,A,w,x,C,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(S,A){S=e(S,A),r.point(S[0],S[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(S,A){var k=Z1([S,A]),R=e(S,A);n(f,d,c,h,p,m,f=R[0],d=R[1],c=S,h=k[0],p=k[1],m=k[2],nfe,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function x(){v(),g.point=C,g.lineEnd=E}function C(S,A){b(i=S,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function E(){n(f,d,c,h,p,m,s,o,i,a,u,l,nfe,r),g.lineEnd=w,w()}return g}}var X1t=V6({point:function(e,t){this.stream.point(e*kn,t*kn)}});function Q1t(e){return V6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function J1t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function ife(e,t,n,r,i,s){if(!s)return J1t(e,t,n,r,i);var o=zt(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function lp(e){return O2e(function(){return e})()}function O2e(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Gce,g=null,y,v,b,w=TA,x=.5,C,E,S,A,k;function R(L){return S(L[0]*kn,L[1]*kn)}function D(L){return L=S.invert(L[0],L[1]),L&&[L[0]*as,L[1]*as]}R.stream=function(L){return A&&k===L?A:A=X1t(Q1t(c)(m(C(w(k=L)))))},R.preclip=function(L){return arguments.length?(m=L,p=void 0,O()):m},R.postclip=function(L){return arguments.length?(w=L,g=y=v=b=null,O()):w},R.clipAngle=function(L){return arguments.length?(m=+L?O1t(p=L*kn):(p=null,Gce),O()):p*as},R.clipExtent=function(L){return arguments.length?(w=L==null?(g=y=v=b=null,TA):_2e(g=+L[0][0],y=+L[0][1],v=+L[1][0],b=+L[1][1]),O()):g==null?null:[[g,y],[v,b]]},R.scale=function(L){return arguments.length?(n=+L,P()):n},R.translate=function(L){return arguments.length?(r=+L[0],i=+L[1],P()):[r,i]},R.center=function(L){return arguments.length?(s=L[0]%360*kn,o=L[1]%360*kn,P()):[s*as,o*as]},R.rotate=function(L){return arguments.length?(a=L[0]%360*kn,u=L[1]%360*kn,l=L.length>2?L[2]%360*kn:0,P()):[a*as,u*as,l*as]},R.angle=function(L){return arguments.length?(f=L%360*kn,P()):f*as},R.reflectX=function(L){return arguments.length?(d=L?-1:1,P()):d<0},R.reflectY=function(L){return arguments.length?(h=L?-1:1,P()):h<0},R.precision=function(L){return arguments.length?(C=rfe(E,x=L*L),O()):iu(x)},R.fitExtent=function(L,j){return H6(R,L,j)},R.fitSize=function(L,j){return UX(R,L,j)},R.fitWidth=function(L,j){return zX(R,L,j)},R.fitHeight=function(L,j){return VX(R,L,j)};function P(){var L=ife(n,0,0,d,h,f).apply(null,t(s,o)),j=ife(n,r-L[0],i-L[1],d,h,f);return c=g2e(a,u,l),E=Lz(t,j),S=Lz(c,E),C=rfe(E,x),O()}function O(){return A=k=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&D,P()}}function HX(e){var t=0,n=Nn/3,r=O2e(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*kn,n=s[1]*kn):[t*as,n*as]},i}function Z1t(e){var t=zt(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Qu(i*t)]},n}function ebt(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Xn(r)<jt)return Z1t(e);var i=1+n*(2*r-n),s=iu(i)/r;function o(a,u){var l=iu(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=Lc(a,Xn(l))*Ec(l);return l*r<0&&(c-=Nn*Ec(a)*Ec(l)),[c/r,Qu((i-(a*a+l*l)*r*r)/(2*r))]},o}function O3(){return HX(ebt).scale(155.424).center([0,33.6442])}function D2e(){return O3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function tbt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function nbt(){var e,t,n=D2e(),r,i=O3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=O3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=tbt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return H6(c,d,h)},c.fitSize=function(d,h){return UX(c,d,h)},c.fitWidth=function(d,h){return zX(c,d,h)},c.fitHeight=function(d,h){return VX(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function $2e(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function fk(e){return function(t,n){var r=iu(t*t+n*n),i=e(r),s=Lt(i),o=zt(i);return[Lc(t*s,r*o),Qu(r&&n*s/r)]}}var M2e=$2e(function(e){return iu(2/(1+e))});M2e.invert=fk(function(e){return 2*Qu(e/2)});function rbt(){return lp(M2e).scale(124.75).clipAngle(180-.001)}var L2e=$2e(function(e){return(e=s2e(e))&&e/Lt(e)});L2e.invert=fk(function(e){return e});function ibt(){return lp(L2e).scale(79.4188).clipAngle(180-.001)}function q6(e,t){return[e,p3(FX((Ji+t)/2))]}q6.invert=function(e,t){return[e,2*oS(i2e(t))-Ji]};function sbt(){return F2e(q6).scale(961/ru)}function F2e(e){var t=lp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Nn*r(),d=t(T1t(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===q6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function RN(e){return FX((Ji+e)/2)}function obt(e,t){var n=zt(e),r=e===t?Lt(e):p3(n/zt(t))/p3(RN(t)/RN(e)),i=n*Wj(RN(e),r)/r;if(!r)return q6;function s(o,a){i>0?a<-Ji+jt&&(a=-Ji+jt):a>Ji-jt&&(a=Ji-jt);var u=i/Wj(RN(a),r);return[u*Lt(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Ec(r)*iu(o*o+u*u),c=Lc(o,Xn(u))*Ec(u);return u*r<0&&(c-=Nn*Ec(o)*Ec(u)),[c/r,2*oS(Wj(i/l,1/r))-Ji]},s}function abt(){return HX(obt).scale(109.5).parallels([30,30])}function D3(e,t){return[e,t]}D3.invert=D3;function ubt(){return lp(D3).scale(152.63)}function lbt(e,t){var n=zt(e),r=e===t?Lt(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<jt)return D3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=Lc(o,Xn(u))*Ec(u);return u*r<0&&(l-=Nn*Ec(o)*Ec(u)),[l/r,i-Ec(r)*iu(o*o+u*u)]},s}function cbt(){return HX(lbt).scale(131.154).center([0,13.9389])}var g2=1.340264,y2=-.081106,v2=893e-6,b2=.003796,$3=iu(3)/2,fbt=12;function j2e(e,t){var n=Qu($3*Lt(t)),r=n*n,i=r*r*r;return[e*zt(n)/($3*(g2+3*y2*r+i*(7*v2+9*b2*r))),n*(g2+y2*r+i*(v2+b2*r))]}j2e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<fbt&&(a=n*(g2+y2*r+i*(v2+b2*r))-t,u=g2+3*y2*r+i*(7*v2+9*b2*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<d3));++s);return[$3*e*(g2+3*y2*r+i*(7*v2+9*b2*r))/zt(n),Qu(Lt(n)/$3)]};function dbt(){return lp(j2e).scale(177.158)}function B2e(e,t){var n=zt(t),r=zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}B2e.invert=fk(oS);function hbt(){return lp(B2e).scale(144.049).clipAngle(60)}function pbt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=V6({point:function(w,x){var C=b([w,x]);this.stream.point(C[0],C[1])}}),m=TA,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var x=w[0]*d,C=w[1]*h;if(s){var E=C*o-x*a;x=x*o+C*a,C=E}return[x+t,C+n]}return b.invert=function(w){var x=w[0]-t,C=w[1]-n;if(s){var E=C*o+x*a;x=x*o-C*a,C=E}return[x/d,C/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,TA):_2e(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*kn,a=Lt(s),o=zt(s),v()):s*as},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,x){return H6(b,w,x)},b.fitSize=function(w,x){return UX(b,w,x)},b.fitWidth=function(w,x){return zX(b,w,x)},b.fitHeight=function(w,x){return VX(b,w,x)},b}function U2e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}U2e.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function mbt(){return lp(U2e).scale(175.295)}function z2e(e,t){return[zt(t)*Lt(e),Lt(t)]}z2e.invert=fk(Qu);function gbt(){return lp(z2e).scale(249.5).clipAngle(90+jt)}function V2e(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}V2e.invert=fk(function(e){return 2*oS(e)});function ybt(){return lp(V2e).scale(250).clipAngle(142)}function H2e(e,t){return[p3(FX((Ji+t)/2)),-e]}H2e.invert=function(e,t){return[-t,2*oS(i2e(e))-Ji]};function vbt(){var e=F2e(H2e),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function bbt(e,t){return e.parent===t.parent?1:2}function _bt(e){return e.reduce(wbt,0)/e.length}function wbt(e,t){return e+t.x}function Ebt(e){return 1+e.reduce(xbt,0)}function xbt(e,t){return Math.max(e,t.y)}function Sbt(e){for(var t;t=e.children;)e=t[0];return e}function Tbt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Cbt(){var e=bbt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=_bt(h),d.y=Ebt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Sbt(s),l=Tbt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Abt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Ibt(){return this.eachAfter(Abt)}function kbt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Rbt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Nbt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Pbt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Obt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Dbt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function $bt(e){for(var t=this,n=Mbt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Mbt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Lbt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Fbt(){return Array.from(this)}function jbt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Bbt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ubt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function qX(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Hbt)):t===void 0&&(t=Vbt);for(var n=new ME(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new ME(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(q2e)}function zbt(){return qX(this).eachBefore(qbt)}function Vbt(e){return e.children}function Hbt(e){return Array.isArray(e)?e[1]:null}function qbt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function q2e(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ME(e){this.data=e,this.depth=this.height=0,this.parent=null}ME.prototype=qX.prototype={constructor:ME,count:Ibt,each:kbt,eachAfter:Nbt,eachBefore:Rbt,find:Pbt,sum:Obt,sort:Dbt,path:$bt,ancestors:Lbt,descendants:Fbt,leaves:jbt,links:Bbt,copy:zbt,[Symbol.iterator]:Ubt};function lO(e){return e==null?null:W2e(e)}function W2e(e){if(typeof e!="function")throw new Error;return e}function qv(){return 0}function q_(e){return function(){return e}}const Wbt=1664525,Gbt=1013904223,sfe=4294967296;function Ybt(){let e=1;return()=>(e=(Wbt*e+Gbt)%sfe)/sfe}function Kbt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xbt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Qbt(e,t){for(var n=0,r=(e=Xbt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&G2e(o,s)?++n:(o=Zbt(i=Jbt(i,s)),n=0);return o}function Jbt(e,t){var n,r;if(Qj(t,e))return[t];for(n=0;n<e.length;++n)if(NN(t,e[n])&&Qj(mC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(NN(mC(e[n],e[r]),t)&&NN(mC(e[n],t),e[r])&&NN(mC(e[r],t),e[n])&&Qj(Y2e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function NN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function G2e(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Qj(e,t){for(var n=0;n<t.length;++n)if(!G2e(e,t[n]))return!1;return!0}function Zbt(e){switch(e.length){case 1:return e_t(e[0]);case 2:return mC(e[0],e[1]);case 3:return Y2e(e[0],e[1],e[2])}}function e_t(e){return{x:e.x,y:e.y,r:e.r}}function mC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function Y2e(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,x=h*p-d*m,C=(p*w-m*b)/(x*2)-r,E=(m*g-p*y)/x,S=(h*b-d*w)/(x*2)-i,A=(d*y-h*g)/x,k=E*E+A*A-1,R=2*(s+C*E+S*A),D=C*C+S*S-s*s,P=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*D))/(2*k):D/R);return{x:r+C+E*P,y:i+S+A*P,r:P}}function ofe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function afe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ufe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function PN(e){this._=e,this.next=null,this.previous=null}function t_t(e,t){if(!(s=(e=Kbt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;ofe(r,n,i=e[2]),n=new PN(n),r=new PN(r),i=new PN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){ofe(n._,r._,i=e[u]),i=new PN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(afe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(afe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=ufe(n);(i=i.next)!==r;)(a=ufe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Qbt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function n_t(e){return Math.sqrt(e.value)}function r_t(){var e=null,t=1,n=1,r=qv;function i(s){const o=Ybt();return s.x=t/2,s.y=n/2,e?s.eachBefore(lfe(e)).eachAfter(Jj(r,.5,o)).eachBefore(cfe(1)):s.eachBefore(lfe(n_t)).eachAfter(Jj(qv,1,o)).eachAfter(Jj(r,s.r/Math.min(t,n),o)).eachBefore(cfe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=lO(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:q_(+s),i):r},i}function lfe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Jj(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=t_t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function cfe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function K2e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function dk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function i_t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(K2e),o}function s(o,a){return function(u){u.children&&dk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var s_t={depth:-1},ffe={},Zj={};function o_t(e){return e.id}function a_t(e){return e.parentId}function dfe(){var e=o_t,t=a_t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,x)=>u_t(n(w,x,i))),v=y.map(hfe),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(hfe(w)),s.push(Zj));o=(w,x)=>y[x],a=(w,x)=>v[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new ME(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ffe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===ffe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===Zj&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===Zj);--y)h.data=null}if(f.parent=s_t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(q2e),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=lO(i),r):e},r.parentId=function(i){return arguments.length?(t=lO(i),r):t},r.path=function(i){return arguments.length?(n=lO(i),r):n},r}function u_t(e){e=`${e}`;let t=e.length;return Yz(e,t-1)&&!Yz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function hfe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Yz(e,t););return e.slice(0,t)}function Yz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function l_t(e,t){return e.parent===t.parent?1:2}function e9(e){var t=e.children;return t?t[0]:e.t}function t9(e){var t=e.children;return t?t[t.length-1]:e.t}function c_t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function f_t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function d_t(e,t,n){return e.a.parent===t.parent?e.a:n}function cO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}cO.prototype=Object.create(ME.prototype);function h_t(e){for(var t=new cO(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new cO(s[o],o)),i.parent=n;return(t.parent=new cO(null,0)).children=[t],t}function p_t(){var e=l_t,t=1,n=1,r=null;function i(l){var c=h_t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){f_t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=t9(p),d=e9(d),p&&d;)m=e9(m),h=t9(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(c_t(d_t(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!t9(h)&&(h.t=p,h.m+=v-y),d&&!e9(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function W6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var X2e=(1+Math.sqrt(5))/2;function Q2e(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,x,C;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),C=g*g*x,w=Math.max(v/C,C/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),C=g*g*x,b=Math.max(v/C,C/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?dk(u,n,r,i,m?r+=p*g/m:s):W6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const J2e=function e(t){function n(r,i,s,o,a){Q2e(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(X2e);function m_t(){var e=J2e,t=!1,n=1,r=1,i=[0],s=qv,o=qv,a=qv,u=qv,l=qv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(K2e),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=W2e(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:q_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:q_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:q_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:q_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:q_(+d),c):l},c}function g_t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,x=f+1,C=d-1;x<C;){var E=x+C>>>1;l[E]<w?x=E+1:C=E}w-l[x-1]<l[x]-w&&f+1<x&&--x;var S=l[x]-b,A=h-S;if(g-p>y-m){var k=h?(p*A+g*S)/h:g;c(f,x,S,p,m,k,y),c(x,d,A,k,m,g,y)}else{var R=h?(m*A+y*S)/h:y;c(f,x,S,p,m,g,R),c(x,d,A,p,R,g,y)}}}function y_t(e,t,n,r,i){(e.depth&1?W6:dk)(e,t,n,r,i)}const v_t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?dk(l,i,s,o,m?s+=(a-s)*l.value/m:a):W6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=Q2e(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(X2e);function gd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Uy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Kz=Symbol("implicit");function aS(){var e=new Gle,t=[],n=[],r=Kz;function i(s){let o=e.get(s);if(o===void 0){if(r!==Kz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Gle;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return aS(t,n).unknown(r)},gd.apply(i,arguments),i}function G6(){var e=aS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Lu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return G6(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},gd.apply(f(),arguments)}function b_t(e){return function(){return e}}function Xz(e){return+e}var pfe=[0,1];function Fu(e){return e}function Qz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:b_t(isNaN(t)?NaN:.5)}function __t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function w_t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Qz(i,r),s=n(o,s)):(r=Qz(r,i),s=n(s,o)),function(a){return s(r(a))}}function E_t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Qz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Y0(e,a,1,r)-1;return s[u](i[u](a))}}function hk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Y6(){var e=pfe,t=pfe,n=sg,r,i,s,o=Fu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Fu&&(o=__t(e[0],e[d-1])),a=d>2?E_t:w_t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),hc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Xz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=uk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Fu,c()):o!==Fu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function Z2e(){return Y6()(Fu,Fu)}function eAe(e,t,n,r){var i=K0(e,t,n),s;switch(r=J1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=n2e(i,o))&&(r.precision=s),LX(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=r2e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=t2e(i))&&(r.precision=s-(r.type==="%")*2);break}}return sS(r)}function Bb(e){var t=e.domain;return e.ticks=function(n){var r=t();return cz(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return eAe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=fz(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Lh(){var e=Z2e();return e.copy=function(){return hk(e,Lh())},gd.apply(e,arguments),Bb(e)}function tAe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Xz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return tAe(e).unknown(t)},e=arguments.length?Array.from(e,Xz):[0,1],Bb(n)}function nAe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function mfe(e){return Math.log(e)}function gfe(e){return Math.exp(e)}function x_t(e){return-Math.log(-e)}function S_t(e){return-Math.exp(-e)}function T_t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function C_t(e){return e===10?T_t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function A_t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yfe(e){return(t,n)=>-e(-t,n)}function WX(e){const t=e(mfe,gfe),n=t.domain;let r=10,i,s;function o(){return i=A_t(r),s=C_t(r),n()[0]<0?(i=yfe(i),s=yfe(s),e(x_t,S_t)):e(mfe,gfe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=cz(l,c,g))}else y=cz(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=J1(u)).precision==null&&(u.trim=!0),u=sS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(nAe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function rAe(){const e=WX(Y6()).domain([1,10]);return e.copy=()=>hk(e,rAe()).base(e.base()),gd.apply(e,arguments),e}function vfe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function bfe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GX(e){var t=1,n=e(vfe(t),bfe(t));return n.constant=function(r){return arguments.length?e(vfe(t=+r),bfe(t)):t},Bb(n)}function iAe(){var e=GX(Y6());return e.copy=function(){return hk(e,iAe()).constant(e.constant())},gd.apply(e,arguments)}function _fe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function I_t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function k_t(e){return e<0?-e*e:e*e}function YX(e){var t=e(Fu,Fu),n=1;function r(){return n===1?e(Fu,Fu):n===.5?e(I_t,k_t):e(_fe(n),_fe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Bb(t)}function KX(){var e=YX(Y6());return e.copy=function(){return hk(e,KX()).exponent(e.exponent())},gd.apply(e,arguments),e}function R_t(){return KX.apply(null,arguments).exponent(.5)}function sAe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=eCe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Y0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(gm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return sAe().domain(e).range(t).unknown(r)},gd.apply(s,arguments)}function oAe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Y0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return oAe().domain([e,t]).range(i).unknown(s)},gd.apply(Bb(o),arguments)}function aAe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Y0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return aAe().domain(e).range(t).unknown(n)},gd.apply(i,arguments)}const n9=new Date,r9=new Date;function Vs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Vs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(n9.setTime(+s),r9.setTime(+o),e(n9),e(r9),Math.floor(n(n9,r9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const LE=Vs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);LE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):LE);LE.range;const rm=1e3,xc=rm*60,im=xc*60,Lm=im*24,XX=Lm*7,wfe=Lm*30,i9=Lm*365,sm=Vs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*rm)},(e,t)=>(t-e)/rm,e=>e.getUTCSeconds());sm.range;const K6=Vs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rm)},(e,t)=>{e.setTime(+e+t*xc)},(e,t)=>(t-e)/xc,e=>e.getMinutes());K6.range;const X6=Vs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*xc)},(e,t)=>(t-e)/xc,e=>e.getUTCMinutes());X6.range;const Q6=Vs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rm-e.getMinutes()*xc)},(e,t)=>{e.setTime(+e+t*im)},(e,t)=>(t-e)/im,e=>e.getHours());Q6.range;const J6=Vs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*im)},(e,t)=>(t-e)/im,e=>e.getUTCHours());J6.range;const vm=Vs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*xc)/Lm,e=>e.getDate()-1);vm.range;const R0=Vs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lm,e=>e.getUTCDate()-1);R0.range;const uAe=Vs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lm,e=>Math.floor(e/Lm));uAe.range;function Ub(e){return Vs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*xc)/XX)}const uS=Ub(0),M3=Ub(1),N_t=Ub(2),P_t=Ub(3),FE=Ub(4),O_t=Ub(5),D_t=Ub(6);uS.range;M3.range;N_t.range;P_t.range;FE.range;O_t.range;D_t.range;function zb(e){return Vs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/XX)}const lS=zb(0),L3=zb(1),$_t=zb(2),M_t=zb(3),jE=zb(4),L_t=zb(5),F_t=zb(6);lS.range;L3.range;$_t.range;M_t.range;jE.range;L_t.range;F_t.range;const IA=Vs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());IA.range;const kA=Vs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kA.range;const Fh=Vs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Fh.range;const jh=Vs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());jh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});jh.range;function lAe(e,t,n,r,i,s){const o=[[sm,1,rm],[sm,5,5*rm],[sm,15,15*rm],[sm,30,30*rm],[s,1,xc],[s,5,5*xc],[s,15,15*xc],[s,30,30*xc],[i,1,im],[i,3,3*im],[i,6,6*im],[i,12,12*im],[r,1,Lm],[r,2,2*Lm],[n,1,XX],[t,1,wfe],[t,3,3*wfe],[e,1,i9]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=rS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(K0(l/i9,c/i9,f));if(h===0)return LE.every(Math.max(K0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[j_t,B_t]=lAe(jh,kA,lS,uAe,J6,X6),[U_t,z_t]=lAe(Fh,IA,uS,vm,Q6,K6);function s9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function o9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function _T(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function cAe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=wT(i),c=ET(i),f=wT(s),d=ET(s),h=wT(o),p=ET(o),m=wT(a),g=ET(a),y=wT(u),v=ET(u),b={a:B,A:U,b:H,B:$,c:null,d:Afe,e:Afe,f:fwt,g:wwt,G:xwt,H:uwt,I:lwt,j:cwt,L:fAe,m:dwt,M:hwt,p:z,q:W,Q:Rfe,s:Nfe,S:pwt,u:mwt,U:gwt,V:ywt,w:vwt,W:bwt,x:null,X:null,y:_wt,Y:Ewt,Z:Swt,"%":kfe},w={a:F,A:V,b:G,B:ee,c:null,d:Ife,e:Ife,f:Iwt,g:Fwt,G:Bwt,H:Twt,I:Cwt,j:Awt,L:hAe,m:kwt,M:Rwt,p:le,q:de,Q:Rfe,s:Nfe,S:Nwt,u:Pwt,U:Owt,V:Dwt,w:$wt,W:Mwt,x:null,X:null,y:Lwt,Y:jwt,Z:Uwt,"%":kfe},x={a:k,A:R,b:D,B:P,c:O,d:Tfe,e:Tfe,f:iwt,g:Sfe,G:xfe,H:Cfe,I:Cfe,j:ewt,L:rwt,m:Z_t,M:twt,p:A,q:J_t,Q:owt,s:awt,S:nwt,u:G_t,U:Y_t,V:K_t,w:W_t,W:X_t,x:L,X:j,y:Sfe,Y:xfe,Z:Q_t,"%":swt};b.x=C(n,b),b.X=C(r,b),b.c=C(t,b),w.x=C(n,w),w.X=C(r,w),w.c=C(t,w);function C(he,ye){return function(Ce){var ve=[],Ye=-1,Ue=0,mt=he.length,it,be,Ae;for(Ce instanceof Date||(Ce=new Date(+Ce));++Ye<mt;)he.charCodeAt(Ye)===37&&(ve.push(he.slice(Ue,Ye)),(be=Efe[it=he.charAt(++Ye)])!=null?it=he.charAt(++Ye):be=it==="e"?" ":"0",(Ae=ye[it])&&(it=Ae(Ce,be)),ve.push(it),Ue=Ye+1);return ve.push(he.slice(Ue,Ye)),ve.join("")}}function E(he,ye){return function(Ce){var ve=_T(1900,void 0,1),Ye=S(ve,he,Ce+="",0),Ue,mt;if(Ye!=Ce.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ue=o9(_T(ve.y,0,1)),mt=Ue.getUTCDay(),Ue=mt>4||mt===0?L3.ceil(Ue):L3(Ue),Ue=R0.offset(Ue,(ve.V-1)*7),ve.y=Ue.getUTCFullYear(),ve.m=Ue.getUTCMonth(),ve.d=Ue.getUTCDate()+(ve.w+6)%7):(Ue=s9(_T(ve.y,0,1)),mt=Ue.getDay(),Ue=mt>4||mt===0?M3.ceil(Ue):M3(Ue),Ue=vm.offset(Ue,(ve.V-1)*7),ve.y=Ue.getFullYear(),ve.m=Ue.getMonth(),ve.d=Ue.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),mt="Z"in ve?o9(_T(ve.y,0,1)).getUTCDay():s9(_T(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(mt+5)%7:ve.w+ve.U*7-(mt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,o9(ve)):s9(ve)}}function S(he,ye,Ce,ve){for(var Ye=0,Ue=ye.length,mt=Ce.length,it,be;Ye<Ue;){if(ve>=mt)return-1;if(it=ye.charCodeAt(Ye++),it===37){if(it=ye.charAt(Ye++),be=x[it in Efe?ye.charAt(Ye++):it],!be||(ve=be(he,Ce,ve))<0)return-1}else if(it!=Ce.charCodeAt(ve++))return-1}return ve}function A(he,ye,Ce){var ve=l.exec(ye.slice(Ce));return ve?(he.p=c.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function k(he,ye,Ce){var ve=h.exec(ye.slice(Ce));return ve?(he.w=p.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function R(he,ye,Ce){var ve=f.exec(ye.slice(Ce));return ve?(he.w=d.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function D(he,ye,Ce){var ve=y.exec(ye.slice(Ce));return ve?(he.m=v.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function P(he,ye,Ce){var ve=m.exec(ye.slice(Ce));return ve?(he.m=g.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function O(he,ye,Ce){return S(he,t,ye,Ce)}function L(he,ye,Ce){return S(he,n,ye,Ce)}function j(he,ye,Ce){return S(he,r,ye,Ce)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function $(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function F(he){return o[he.getUTCDay()]}function V(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ee(he){return a[he.getUTCMonth()]}function le(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=C(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=E(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=C(he+="",w);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=E(he+="",!0);return ye.toString=function(){return he},ye}}}var Efe={"-":"",_:" ",0:"0"},mo=/^\s*\d+/,V_t=/^%/,H_t=/[\\^$*+?|[\]().{}]/g;function pr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function q_t(e){return e.replace(H_t,"\\$&")}function wT(e){return new RegExp("^(?:"+e.map(q_t).join("|")+")","i")}function ET(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function W_t(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function G_t(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Y_t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function K_t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function X_t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function xfe(e,t,n){var r=mo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Sfe(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q_t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function J_t(e,t,n){var r=mo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Z_t(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Tfe(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ewt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Cfe(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function twt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function nwt(e,t,n){var r=mo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function rwt(e,t,n){var r=mo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function iwt(e,t,n){var r=mo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function swt(e,t,n){var r=V_t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function owt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function awt(e,t,n){var r=mo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Afe(e,t){return pr(e.getDate(),t,2)}function uwt(e,t){return pr(e.getHours(),t,2)}function lwt(e,t){return pr(e.getHours()%12||12,t,2)}function cwt(e,t){return pr(1+vm.count(Fh(e),e),t,3)}function fAe(e,t){return pr(e.getMilliseconds(),t,3)}function fwt(e,t){return fAe(e,t)+"000"}function dwt(e,t){return pr(e.getMonth()+1,t,2)}function hwt(e,t){return pr(e.getMinutes(),t,2)}function pwt(e,t){return pr(e.getSeconds(),t,2)}function mwt(e){var t=e.getDay();return t===0?7:t}function gwt(e,t){return pr(uS.count(Fh(e)-1,e),t,2)}function dAe(e){var t=e.getDay();return t>=4||t===0?FE(e):FE.ceil(e)}function ywt(e,t){return e=dAe(e),pr(FE.count(Fh(e),e)+(Fh(e).getDay()===4),t,2)}function vwt(e){return e.getDay()}function bwt(e,t){return pr(M3.count(Fh(e)-1,e),t,2)}function _wt(e,t){return pr(e.getFullYear()%100,t,2)}function wwt(e,t){return e=dAe(e),pr(e.getFullYear()%100,t,2)}function Ewt(e,t){return pr(e.getFullYear()%1e4,t,4)}function xwt(e,t){var n=e.getDay();return e=n>=4||n===0?FE(e):FE.ceil(e),pr(e.getFullYear()%1e4,t,4)}function Swt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pr(t/60|0,"0",2)+pr(t%60,"0",2)}function Ife(e,t){return pr(e.getUTCDate(),t,2)}function Twt(e,t){return pr(e.getUTCHours(),t,2)}function Cwt(e,t){return pr(e.getUTCHours()%12||12,t,2)}function Awt(e,t){return pr(1+R0.count(jh(e),e),t,3)}function hAe(e,t){return pr(e.getUTCMilliseconds(),t,3)}function Iwt(e,t){return hAe(e,t)+"000"}function kwt(e,t){return pr(e.getUTCMonth()+1,t,2)}function Rwt(e,t){return pr(e.getUTCMinutes(),t,2)}function Nwt(e,t){return pr(e.getUTCSeconds(),t,2)}function Pwt(e){var t=e.getUTCDay();return t===0?7:t}function Owt(e,t){return pr(lS.count(jh(e)-1,e),t,2)}function pAe(e){var t=e.getUTCDay();return t>=4||t===0?jE(e):jE.ceil(e)}function Dwt(e,t){return e=pAe(e),pr(jE.count(jh(e),e)+(jh(e).getUTCDay()===4),t,2)}function $wt(e){return e.getUTCDay()}function Mwt(e,t){return pr(L3.count(jh(e)-1,e),t,2)}function Lwt(e,t){return pr(e.getUTCFullYear()%100,t,2)}function Fwt(e,t){return e=pAe(e),pr(e.getUTCFullYear()%100,t,2)}function jwt(e,t){return pr(e.getUTCFullYear()%1e4,t,4)}function Bwt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?jE(e):jE.ceil(e),pr(e.getUTCFullYear()%1e4,t,4)}function Uwt(){return"+0000"}function kfe(){return"%"}function Rfe(e){return+e}function Nfe(e){return Math.floor(+e/1e3)}var A_,QX,mAe,Z6,gAe;zwt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zwt(e){return A_=cAe(e),QX=A_.format,mAe=A_.parse,Z6=A_.utcFormat,gAe=A_.utcParse,A_}function Vwt(e){return new Date(e)}function Hwt(e){return e instanceof Date?+e:+new Date(+e)}function JX(e,t,n,r,i,s,o,a,u,l){var c=Z2e(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function x(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?y:v:n(C)<C?b:w)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,Hwt)):d().map(Vwt)},c.ticks=function(C){var E=d();return e(E[0],E[E.length-1],C??10)},c.tickFormat=function(C,E){return E==null?x:l(E)},c.nice=function(C){var E=d();return(!C||typeof C.range!="function")&&(C=t(E[0],E[E.length-1],C??10)),C?d(nAe(E,C)):c},c.copy=function(){return hk(c,JX(e,t,n,r,i,s,o,a,u,l))},c}function yAe(){return gd.apply(JX(U_t,z_t,Fh,IA,uS,vm,Q6,K6,sm,QX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qwt(){return gd.apply(JX(j_t,B_t,jh,kA,lS,R0,J6,X6,sm,Z6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function e4(){var e=0,t=1,n,r,i,s,o=Fu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(sg),l.rangeRound=c(uk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function zy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZX(){var e=Bb(e4()(Fu));return e.copy=function(){return zy(e,ZX())},Uy.apply(e,arguments)}function vAe(){var e=WX(e4()).domain([1,10]);return e.copy=function(){return zy(e,vAe()).base(e.base())},Uy.apply(e,arguments)}function bAe(){var e=GX(e4());return e.copy=function(){return zy(e,bAe()).constant(e.constant())},Uy.apply(e,arguments)}function eQ(){var e=YX(e4());return e.copy=function(){return zy(e,eQ()).exponent(e.exponent())},Uy.apply(e,arguments)}function Wwt(){return eQ.apply(null,arguments).exponent(.5)}function t4(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Fu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=AX(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(sg),h.rangeRound=p(uk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function _Ae(){var e=Bb(t4()(Fu));return e.copy=function(){return zy(e,_Ae())},Uy.apply(e,arguments)}function wAe(){var e=WX(t4()).domain([.1,1,10]);return e.copy=function(){return zy(e,wAe()).base(e.base())},Uy.apply(e,arguments)}function EAe(){var e=GX(t4());return e.copy=function(){return zy(e,EAe()).constant(e.constant())},Uy.apply(e,arguments)}function tQ(){var e=YX(t4());return e.copy=function(){return zy(e,tQ()).exponent(e.exponent())},Uy.apply(e,arguments)}function Gwt(){return tQ.apply(null,arguments).exponent(.5)}function yd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Ywt=yd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Kwt=yd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Xwt=yd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Qwt=yd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Jwt=yd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Zwt=yd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),eEt=yd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),tEt=yd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),nEt=yd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),rEt=yd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),xAe=yd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Sr(e){return function(){return e}}const Pfe=Math.abs,ia=Math.atan2,pv=Math.cos,iEt=Math.max,a9=Math.min,Nd=Math.sin,l1=Math.sqrt,aa=1e-12,BE=Math.PI,F3=BE/2,SAe=2*BE;function sEt(e){return e>1?0:e<-1?BE:Math.acos(e)}function Ofe(e){return e>=1?F3:e<=-1?-F3:Math.asin(e)}function n4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new PX(t)}function oEt(e){return e.innerRadius}function aEt(e){return e.outerRadius}function uEt(e){return e.startAngle}function lEt(e){return e.endAngle}function cEt(e){return e&&e.padAngle}function fEt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<aa))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ON(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/l1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,x=i-s,C=d*m-p*h,E=(b<0?-1:1)*l1(iEt(0,x*x*w-C*C)),S=(C*b-v*E)/w,A=(-C*v-b*E)/w,k=(C*b+v*E)/w,R=(-C*v+b*E)/w,D=S-g,P=A-y,O=k-g,L=R-y;return D*D+P*P>O*O+L*L&&(S=k,A=R),{cx:S,cy:A,x01:-c,y01:-f,x11:S*(i/x-1),y11:A*(i/x-1)}}function dEt(){var e=oEt,t=aEt,n=Sr(0),r=null,i=uEt,s=lEt,o=cEt,a=null,u=n4(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-F3,m=s.apply(this,arguments)-F3,g=Pfe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>aa))a.moveTo(0,0);else if(g>SAe-aa)a.moveTo(h*pv(p),h*Nd(p)),a.arc(0,0,h,p,m,!y),d>aa&&(a.moveTo(d*pv(m),d*Nd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,x=m,C=g,E=g,S=o.apply(this,arguments)/2,A=S>aa&&(r?+r.apply(this,arguments):l1(d*d+h*h)),k=a9(Pfe(h-d)/2,+n.apply(this,arguments)),R=k,D=k,P,O;if(A>aa){var L=Ofe(A/d*Nd(S)),j=Ofe(A/h*Nd(S));(C-=L*2)>aa?(L*=y?1:-1,w+=L,x-=L):(C=0,w=x=(p+m)/2),(E-=j*2)>aa?(j*=y?1:-1,v+=j,b-=j):(E=0,v=b=(p+m)/2)}var B=h*pv(v),U=h*Nd(v),H=d*pv(x),$=d*Nd(x);if(k>aa){var z=h*pv(b),W=h*Nd(b),F=d*pv(w),V=d*Nd(w),G;if(g<BE)if(G=fEt(B,U,F,V,z,W,H,$)){var ee=B-G[0],le=U-G[1],de=z-G[0],he=W-G[1],ye=1/Nd(sEt((ee*de+le*he)/(l1(ee*ee+le*le)*l1(de*de+he*he)))/2),Ce=l1(G[0]*G[0]+G[1]*G[1]);R=a9(k,(d-Ce)/(ye-1)),D=a9(k,(h-Ce)/(ye+1))}else R=D=0}E>aa?D>aa?(P=ON(F,V,B,U,h,D,y),O=ON(z,W,H,$,h,D,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),D<k?a.arc(P.cx,P.cy,D,ia(P.y01,P.x01),ia(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,D,ia(P.y01,P.x01),ia(P.y11,P.x11),!y),a.arc(0,0,h,ia(P.cy+P.y11,P.cx+P.x11),ia(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,D,ia(O.y11,O.x11),ia(O.y01,O.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>aa)||!(C>aa)?a.lineTo(H,$):R>aa?(P=ON(H,$,z,W,d,-R,y),O=ON(B,U,F,V,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<k?a.arc(P.cx,P.cy,R,ia(P.y01,P.x01),ia(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,R,ia(P.y01,P.x01),ia(P.y11,P.x11),!y),a.arc(0,0,d,ia(P.cy+P.y11,P.cx+P.x11),ia(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,R,ia(O.y11,O.x11),ia(O.y01,O.x01),!y))):a.arc(0,0,d,x,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-BE/2;return[pv(f)*c,Nd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Sr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Sr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Sr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Sr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Sr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Sr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Sr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function TAe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CAe(e){this._context=e}CAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function nQ(e){return new CAe(e)}function AAe(e){return e[0]}function IAe(e){return e[1]}function j3(e,t){var n=Sr(!0),r=null,i=nQ,s=null,o=n4(a);e=typeof e=="function"?e:e===void 0?AAe:Sr(e),t=typeof t=="function"?t:t===void 0?IAe:Sr(t);function a(u){var l,c=(u=TAe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Sr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Sr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Sr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function kAe(e,t,n){var r=null,i=Sr(!0),s=null,o=nQ,a=null,u=n4(l);e=typeof e=="function"?e:e===void 0?AAe:Sr(+e),t=typeof t=="function"?t:Sr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?IAe:Sr(+n);function l(f){var d,h,p,m=(f=TAe(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return j3().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Sr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Sr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Sr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Sr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Sr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Sr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Sr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const hEt={draw(e,t){const n=l1(t/BE);e.moveTo(n,0),e.arc(0,0,n,0,SAe)}};function pEt(e,t){let n=null,r=n4(i);e=typeof e=="function"?e:Sr(e||hEt),t=typeof t=="function"?t:Sr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Sr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Sr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Q0(){}function B3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function r4(e){this._context=e}r4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jz(e){return new r4(e)}function RAe(e){this._context=e}RAe.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:B3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mEt(e){return new RAe(e)}function NAe(e){this._context=e}NAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:B3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gEt(e){return new NAe(e)}function PAe(e,t){this._basis=new r4(e),this._beta=t}PAe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const yEt=function e(t){function n(r){return t===1?new r4(r):new PAe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function U3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function rQ(e,t){this._context=e,this._k=(1-t)/6}rQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:U3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:U3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const vEt=function e(t){function n(r){return new rQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function iQ(e,t){this._context=e,this._k=(1-t)/6}iQ.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:U3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const bEt=function e(t){function n(r){return new iQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function sQ(e,t){this._context=e,this._k=(1-t)/6}sQ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:U3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _Et=function e(t){function n(r){return new sQ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function oQ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>aa){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>aa){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function OAe(e,t){this._context=e,this._alpha=t}OAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:oQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const wEt=function e(t){function n(r){return t?new OAe(r,t):new rQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function DAe(e,t){this._context=e,this._alpha=t}DAe.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:oQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const EEt=function e(t){function n(r){return t?new DAe(r,t):new iQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function $Ae(e,t){this._context=e,this._alpha=t}$Ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:oQ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const xEt=function e(t){function n(r){return t?new $Ae(r,t):new sQ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function MAe(e){this._context=e}MAe.prototype={areaStart:Q0,areaEnd:Q0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SEt(e){return new MAe(e)}function Dfe(e){return e<0?-1:1}function $fe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Dfe(s)+Dfe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Mfe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function u9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function z3(e){this._context=e}z3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:u9(this,this._t0,Mfe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,u9(this,Mfe(this,n=$fe(this,e,t)),n);break;default:u9(this,this._t0,n=$fe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function LAe(e){this._context=new FAe(e)}(LAe.prototype=Object.create(z3.prototype)).point=function(e,t){z3.prototype.point.call(this,t,e)};function FAe(e){this._context=e}FAe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function TEt(e){return new z3(e)}function CEt(e){return new LAe(e)}function jAe(e){this._context=e}jAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Lfe(e),i=Lfe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Lfe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function AEt(e){return new jAe(e)}function i4(e,t){this._context=e,this._t=t}i4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function IEt(e){return new i4(e,.5)}function kEt(e){return new i4(e,0)}function REt(e){return new i4(e,1)}function gC(e,t,n){this.k=e,this.x=t,this.y=n}gC.prototype={constructor:gC,scale:function(e){return e===1?this:new gC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new gC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};gC.prototype;function pk({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:u=!1,columnList:l,setColumn:c,stringTicks:f=!1}){const d=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=I.useCallback(p=>(s?Z6("%B"):sS(".2s"))(p),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:_.jsx(eu,{children:_.jsx(nr,{gap:3,children:_.jsx(tt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>_.jsxs("g",{transform:`translate(${m}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-d/2,y:10,width:d,height:20,children:_.jsx(eu,{children:_.jsx(ko,{withinPortal:!0,label:p,children:_.jsx(tt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:f?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const NEt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:pk},Symbol.toStringTag,{value:"Module"}));function s4({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>20?120:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(eu,{children:_.jsx(nr,{gap:3,children:_.jsx(tt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(nr,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(tt,{lineClamp:1,style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const PEt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:s4},Symbol.toStringTag,{value:"Module"})),vu={top:15,left:160,right:50,bottom:130};function Zz({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=Hf(),u=I.useMemo(()=>a-vu.left-vu.right,[a]),l=I.useMemo(()=>o-vu.top-vu.bottom,[o]),c=I.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),f=I.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return aS(xAe).domain(g)},[r,n.category]),d=I.useMemo(()=>c?Lh([vu.left,u+vu.left]).domain([0,Ic(c.objects().map(g=>g.count))]).nice():null,[c,u]),h=I.useMemo(()=>c?G6([vu.top,l+vu.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,l,n.category]),p=I.useMemo(()=>!d||!h||!f||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:_.jsxs("g",{style:{cursor:"pointer"},children:[_.jsx("rect",{onClick:v=>i(r.filter(b=>b[n.category]===g[n.category]).map(b=>b[n.ids]),v),x:vu.left,y:h(g[n.category]),fill:f(g[n.category]),height:h.bandwidth(),width:d(g.count)-vu.left},y),_.jsx("text",{x:d(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,f,r,n.category,n.ids,i,d,h]),m=I.useMemo(()=>!d||!h||!f||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:_.jsx("g",{style:{cursor:"pointer"},children:_.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(b=>b[n.category]===g[n.category]).map(b=>b[n.ids]),v),x:vu.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:d(g.count)-vu.left},y)},y)),[f,r,c,n.category,n.ids,i,d,h]);return h&&d?_.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(pk,{xScale:d,yRange:h.range(),vertPosition:l+vu.top,showLines:!1,label:"Count",ticks:d.ticks(5).map(g=>({value:g.toString(),offset:d(g)}))}),h?_.jsx(s4,{yScale:h,horizontalPosition:vu.left,xRange:d.range(),label:n.category,ticks:f.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):_.jsx(Dc,{})}const OEt=Object.freeze(Object.defineProperty({__proto__:null,Bar:Zz,default:Zz},Symbol.toStringTag,{value:"Module"})),fr=Array.isArray;function Ju(e){return e!=null?fr(e)?e:[e]:[]}function DEt(e=0,t=1/0){return`${Ffe(e)} < row_number() && row_number() <= ${Ffe(t)}`}function Ffe(e){return e<0?`count() + ${e}`:e}class BAe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(DEt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Ju(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Tn(e){throw Error(e)}function su(e){return typeof e=="number"}function bi(e){return typeof e=="function"}function o4(e,t){const n=Array(e);if(bi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let $Et=class extends BAe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Tn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Tn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Tn("Not implemented")}getter(t){Tn("Not implemented")}objects(t){Tn("Not implemented")}object(t){Tn("Not implemented")}[Symbol.iterator](){Tn("Not implemented")}print(t={}){su(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=o4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},MEt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},LEt=function(e){return e&&bi(e.get)?e:new MEt(e)};function Fm(e){return e instanceof Date}function Ta(e){return e===Object(e)}function V3(e){return e instanceof RegExp}function qo(e){return typeof e=="string"}function FEt(e,t){const n=r=>Tn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?jfe(e.entries(),t):Fm(e)?n("Date"):V3(e)?n("RegExp"):qo(e)?n():fr(e)?jEt(e,t):bi(e[Symbol.iterator])?BEt(e,t):Ta(e)?jfe(Object.entries(e),t):n()}function jfe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function jEt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function BEt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:UEt}=Object.prototype;function id(e,t){return UEt.call(e,t)}function Jl(e){return e?new Bfe({...e.data()},e.columnNames()):new Bfe}class Bfe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return id(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,zEt=Object.getPrototypeOf(Int8Array);function mk(e){return e instanceof zEt}function c1(e){return fr(e)||mk(e)}function Lf(e){return e!=null&&e===e}const xT=e=>c1(e)||qo(e),VEt={compact:e=>c1(e)?e.filter(t=>Lf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>xT(e)?e.includes(t,n):!1,indexof:(e,t)=>xT(e)?e.indexOf(t):-1,join:(e,t)=>c1(e)?e.join(t):ar,lastindexof:(e,t)=>xT(e)?e.lastIndexOf(t):-1,length:e=>xT(e)?e.length:0,pluck:(e,t)=>c1(e)?e.map(n=>Lf(n)?n[t]:ar):ar,reverse:e=>c1(e)?e.slice().reverse():qo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>xT(e)?e.slice(t,n):ar};function HEt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function fO(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Pd=e=>(e<10?"0":"")+e,qEt=e=>e<0?"-"+fO(-e,6):e>9999?"+"+fO(e,6):fO(e,4);function UAe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return qEt(e)+"-"+Pd(t+1)+"-"+Pd(n)+(!u||o?"T"+Pd(r)+":"+Pd(i)+":"+Pd(s)+"."+fO(o,3)+l:s?"T"+Pd(r)+":"+Pd(i)+":"+Pd(s)+l:i||r||!a?"T"+Pd(r)+":"+Pd(i)+l:"")}function zAe(e,t){return isNaN(e)?"Invalid Date":UAe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function a4(e,t){return isNaN(e)?"Invalid Date":UAe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const WEt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function GEt(e){return e.match(WEt)&&!isNaN(Date.parse(e))}function YEt(e,t=Date.parse){return GEt(e)?t(e):e}const VAe=6e4,HAe=864e5,qAe=6048e5,Yi=new Date,Ki=new Date,ss=e=>(Yi.setTime(typeof e=="string"?YEt(e):e),Yi);function KEt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function XEt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function QEt(e){Ki.setTime(+e),Ki.setHours(0,0,0,0),Yi.setTime(+Ki),Yi.setMonth(0),Yi.setDate(1);const t=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*VAe;return Math.floor(1+(Ki-Yi-t)/HAe)}function JEt(e){Ki.setTime(+e),Ki.setUTCHours(0,0,0,0);const t=Date.UTC(Ki.getUTCFullYear(),0,1);return Math.floor(1+(Ki-t)/HAe)}function ZEt(e,t){const n=t||0;Ki.setTime(+e),Ki.setDate(Ki.getDate()-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0),Yi.setTime(+e),Yi.setMonth(0),Yi.setDate(1),Yi.setDate(1-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0);const r=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*VAe;return Math.floor((1+(Ki-Yi)-r)/qAe)}function ext(e,t){const n=t||0;return Ki.setTime(+e),Ki.setUTCDate(Ki.getUTCDate()-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Yi.setTime(+e),Yi.setUTCMonth(0),Yi.setUTCDate(1),Yi.setUTCDate(1-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Math.floor((1+(Ki-Yi))/qAe)}const txt={format_date:(e,t)=>zAe(ss(e),!t),format_utcdate:(e,t)=>a4(ss(e),!t),timestamp:e=>+ss(e),year:e=>ss(e).getFullYear(),quarter:e=>Math.floor(ss(e).getMonth()/3),month:e=>ss(e).getMonth(),date:e=>ss(e).getDate(),dayofweek:e=>ss(e).getDay(),hours:e=>ss(e).getHours(),minutes:e=>ss(e).getMinutes(),seconds:e=>ss(e).getSeconds(),milliseconds:e=>ss(e).getMilliseconds(),utcyear:e=>ss(e).getUTCFullYear(),utcquarter:e=>Math.floor(ss(e).getUTCMonth()/3),utcmonth:e=>ss(e).getUTCMonth(),utcdate:e=>ss(e).getUTCDate(),utcdayofweek:e=>ss(e).getUTCDay(),utchours:e=>ss(e).getUTCHours(),utcminutes:e=>ss(e).getUTCMinutes(),utcseconds:e=>ss(e).getUTCSeconds(),utcmilliseconds:e=>ss(e).getUTCMilliseconds(),datetime:KEt,dayofyear:QEt,week:ZEt,utcdatetime:XEt,utcdayofyear:JEt,utcweek:ext,now:Date.now};function aQ(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Fm(e)||Fm(t)?+e==+t:V3(e)&&V3(t)?e+""==t+"":Ta(e)&&Ta(t)?nxt(e,t):!1}function nxt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Ufe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Ufe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!aQ(e[o],t[o]))return!1}return!0}function Ufe(e,t,n=aQ){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const rxt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let ixt=Math.random;function cS(){return ixt()}const sxt={random:cS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function uQ(e){return e instanceof Map}function oxt(e){return e instanceof Set}function dO(e){return uQ(e)||oxt(e)}function l9(e){return Array.from(e)}const axt={has:(e,t)=>dO(e)?e.has(t):e!=null?id(e,t):!1,keys:e=>uQ(e)?l9(e.keys()):e!=null?Object.keys(e):[],values:e=>dO(e)?l9(e.values()):e!=null?Object.values(e):[],entries:e=>dO(e)?l9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function uxt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(id(t,e))return t[e];return n!==void 0?n:e}function lxt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const cxt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},gw={bin:HEt,equal:aQ,recode:uxt,sequence:lxt,...VEt,...txt,...rxt,...sxt,...axt,...cxt};function RA(e){return typeof e=="bigint"}function Bh(e){return e===void 0?e+"":RA(e)?e+"n":JSON.stringify(e)}function bn(e,t=[],n=[]){return new fxt(e,Ju(t),Ju(n))}let fxt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Bh(n)}]`),...this.params.map(Bh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const WAe=e=>bn("any",e),GAe=()=>bn("count"),YAe=e=>bn("array_agg",e),KAe=e=>bn("array_agg_distinct",e),XAe=(e,t)=>bn("map_agg",[e,t]),QAe=(e,t)=>bn("object_agg",[e,t]),JAe=(e,t)=>bn("entries_agg",[e,t]),_2={...gw,row_object:(...e)=>bn("row_object",null,e.flat()),count:GAe,any:WAe,array_agg:YAe,array_agg_distinct:KAe,object_agg:QAe,map_agg:XAe,entries_agg:JAe,valid:e=>bn("valid",e),invalid:e=>bn("invalid",e),distinct:e=>bn("distinct",e),mode:e=>bn("mode",e),sum:e=>bn("sum",e),product:e=>bn("product",e),mean:e=>bn("mean",e),average:e=>bn("average",e),variance:e=>bn("variance",e),variancep:e=>bn("variancep",e),stdev:e=>bn("stdev",e),stdevp:e=>bn("stdevp",e),min:e=>bn("min",e),max:e=>bn("max",e),quantile:(e,t)=>bn("quantile",e,t),median:e=>bn("median",e),covariance:(e,t)=>bn("covariance",[e,t]),covariancep:(e,t)=>bn("covariancep",[e,t]),corr:(e,t)=>bn("corr",[e,t]),bins:(e,t,n,r)=>bn("bins",e,[t,n,r]),row_number:()=>bn("row_number"),rank:()=>bn("rank"),avg_rank:()=>bn("avg_rank"),dense_rank:()=>bn("dense_rank"),percent_rank:()=>bn("percent_rank"),cume_dist:()=>bn("cume_dist"),ntile:e=>bn("ntile",null,e),lag:(e,t,n)=>bn("lag",e,[t,n]),lead:(e,t,n)=>bn("lead",e,[t,n]),first_value:e=>bn("first_value",e),last_value:e=>bn("last_value",e),nth_value:(e,t)=>bn("nth_value",e,t),fill_down:(e,t)=>bn("fill_down",e,t),fill_up:(e,t)=>bn("fill_up",e,t)};function dxt(e,t){e=dO(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function hxt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function pxt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function mxt(e,t,n,r){const i=r==="map"||r===!0?XAe:r==="entries"?JAe:r==="object"?QAe:Tn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=dxt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:YAe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const gxt="ArrayPattern",yxt="ArrowFunctionExpression",vxt="FunctionExpression",N0="Identifier",fS="Literal",ZAe="MemberExpression",bxt="ObjectExpression",eIe="ObjectPattern",tIe="Property",gk="Column",_xt="Constant",wxt="Dictionary",Ext="Function",xxt="Parameter",nIe="Op",ri=(e,t)=>{const n=Sxt[e.type];return n?n(e,t):Tn(`Unsupported expression construct: ${e.type}`)},c9=(e,t)=>"("+ri(e.left,t)+" "+e.operator+" "+ri(e.right,t)+")",f9=(e,t)=>"("+Vd(e.params,t)+")=>"+ri(e.body,t),zfe=(e,t)=>ri(e.callee,t)+"("+Vd(e.arguments,t)+")",Vd=(e,t,n=",")=>e.map(r=>ri(r,t)).join(n),rIe=e=>e.computed?`[${Bh(e.name)}]`:`.${e.name}`,Vfe=(e,t,n)=>{const r=e.table||"";return`data${r}${rIe(e)}.${n}(${t.index}${r})`},Sxt={Constant:e=>e.raw,Column:(e,t)=>Vfe(e,t,"get"),Dictionary:(e,t)=>Vfe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${rIe(e)}`,Op:(e,t)=>`op(${Bh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ri(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ri(e.object,t),i=ri(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:zfe,NewExpression:(e,t)=>"new "+zfe(e,t),ArrayExpression:(e,t)=>"["+Vd(e.elements,t)+"]",AssignmentExpression:c9,BinaryExpression:c9,LogicalExpression:c9,UnaryExpression:(e,t)=>"("+e.operator+ri(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ri(e.test,t)+"?"+ri(e.consequent,t)+":"+ri(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Vd(e.properties,t)+"})",Property:(e,t)=>{const n=ri(e.key,t);return(e.computed?`[${n}]`:n)+":"+ri(e.value,t)},ArrowFunctionExpression:f9,FunctionExpression:f9,FunctionDeclaration:f9,ArrayPattern:(e,t)=>"["+Vd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Vd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Vd(e.declarations,t,","),VariableDeclarator:(e,t)=>ri(e.id,t)+"="+ri(e.init,t),SpreadElement:(e,t)=>"..."+ri(e.argument,t),BlockStatement:(e,t)=>"{"+Vd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ri(e.expression,t),IfStatement:(e,t)=>"if ("+ri(e.test,t)+")"+ri(e.consequent,t)+(e.alternate?" else "+ri(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ri(e.discriminant,t)+") {"+Vd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ri(e.test,t):"default")+": "+Vd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ri(e.argument,t),Program:(e,t)=>ri(e.body[0],t)};function H3(e,t={index:"row"}){return ri(e,t)}function Txt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function UE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Fm(e)?+e:fr(e)||mk(e)?`[${e.map(UE)}]`:V3(e)?e+"":Cxt(e)}function Cxt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${UE(e[r])}`;return t+="}",t}function q3(e,t){const n=e.length;return n===1?(r,i)=>UE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=UE(a)}return s}}function Axt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=UE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=UE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Hp(){}function Ixt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Cs(e){return e.init=e.init||Hp,e.add=e.add||Hp,e.rem=e.rem||Hp,e}function Hfe(e,t){return e.product_v=!1,e.product=t}const iIe={count:{create:()=>Cs({value:e=>e.count}),param:[]},array_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>Cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Axt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Cs({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>RA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Hfe(e,1),value:e=>e.valid?e.product_v?Hfe(e,Ixt(e.list.values())):e.product:void 0,add:(e,t)=>RA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Cs({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Cs({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Cs({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>Cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Cs({value:i=>Txt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},qfe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Wfe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},sIe={row_number:{create(){return{init:Hp,value:e=>e.index+1}},param:[]},rank:qfe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=qfe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Wfe,ntile:{create(e){e=+e,e>0||Tn("ntile num must be greater than zero.");const{init:t,value:n}=Wfe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:Hp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:Hp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Hp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Hp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Tn("nth_value nth must be greater than zero."),{init:Hp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Lf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=kxt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function kxt(e,t,n){for(const r=e.size;n<r;++n)if(Lf(e.value(n,t)))return n;return-1}function lQ(e){return id(iIe,e)}function cQ(e){return id(sIe,e)}function oIe(e){return id(gw,e)||e==="row_object"}function aIe(e){return lQ(e)&&iIe[e]}function uIe(e){return cQ(e)&&sIe[e]}function ST(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const fQ={escape:(e,t,n)=>ST(e,t,n),expr:(e,t)=>ST(`(row,data,op)=>${e}`,gw,t),expr2:(e,t)=>ST(`(row0,data0,row,data)=>${e}`,gw,t),join:(e,t)=>ST(`(row1,data1,row2,data2)=>${e}`,gw,t),param:(e,t)=>ST(e,gw,t)},Rxt={"==":1,"!=":1,"===":1,"!==":1};function lIe(e,t,n=0,r,i){if(e.type=gk,e.name=t,e.table=n,i&&r&&bi(r.keyFor)){const s=Rxt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===fS&&Nxt(i,e,s,r.keyFor(s.value))}return e}function Nxt(e,t,n,r){return r<0?(e.type=fS,e.value=!1,e.raw="false"):(t.type=wxt,n.value=r,n.raw=r+""),!0}function u4(e){return fr(e)?e:uQ(e)?e.entries():e?Object.entries(e):[]}const cIe="row_object";function fIe(e,t){e.type=bxt;const n=e.properties=[];for(const r of u4(t)){const[i,s]=fr(r)?r:[r,r];n.push({type:tIe,key:{type:fS,raw:Bh(s)},value:lIe({computed:!0},i)})}return e}function dIe(e){return H3(fIe({},e))}function hIe(e){return fQ.expr(dIe(e))}const Pxt=new TextDecoder("utf-8"),eV=e=>Pxt.decode(e),Oxt=new TextEncoder,dQ=e=>Oxt.encode(e),Dxt=e=>typeof e=="boolean",Su=e=>typeof e=="function",Vy=e=>e!=null&&Object(e)===e,l4=e=>Vy(e)&&Su(e.then),hQ=e=>Vy(e)&&Su(e[Symbol.iterator]),c4=e=>Vy(e)&&Su(e[Symbol.asyncIterator]),$xt=e=>Vy(e)&&"done"in e&&"value"in e,pIe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Mxt=e=>Vy(e)&&Su(e.abort)&&Su(e.getWriter)&&!pIe(e),Lxt=e=>Vy(e)&&Su(e.end)&&Su(e.write)&&Dxt(e.writable)&&!pIe(e),Fxt=e=>Vy(e)&&Su(e.clear)&&Su(e.bytes)&&Su(e.position)&&Su(e.setPosition)&&Su(e.capacity)&&Su(e.getBufferIdentifier)&&Su(e.createLong),pQ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function jxt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function W3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Uh(e,t){const n=jxt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?W3(o,s,a):o=s;break}W3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Xs(e,t){let n=$xt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=dQ(n)),n instanceof ArrayBuffer?new e(n):n instanceof pQ?new e(n):Fxt(n)?Xs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const TT=e=>Xs(Int32Array,e),Or=e=>Xs(Uint8Array,e),tV=e=>(e.next(),e);function*Bxt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof pQ?n(t):hQ(t)?t:n(t);return yield*tV(function*(i){let s=null;do s=i.next(yield Xs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Uxt=e=>Bxt(Uint8Array,e);function mIe(e,t){return r1(this,arguments,function*(){if(l4(t))return yield Yn(yield Yn(yield*N8(JC(mIe(e,yield Yn(t))))));const r=function(o){return r1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return r1(this,arguments,function*(){yield Yn(yield*N8(JC(tV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof pQ?r(t):hQ(t)?i(t):c4(t)?t:r(t);return yield Yn(yield*N8(JC(tV(function(o){return r1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Xs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const zxt=e=>mIe(Uint8Array,e);function gIe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Vxt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Gfe={fromIterable(e){return DN(Hxt(e))},fromAsyncIterable(e){return DN(qxt(e))},fromDOMStream(e){return DN(Wxt(e))},fromNodeStream(e){return DN(Yxt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},DN=e=>(e.next(),e);function*Hxt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Uh(r,o)[0]:([i,r,a]=Uh(r,o),i)}({cmd:s,size:o}=yield null);const l=Uxt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function qxt(e){return r1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Uh(i,a)[0]:([s,i,u]=Uh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=zxt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function Wxt(e){return r1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Uh(i,a)[0]:([s,i,u]=Uh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new Gxt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Or(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class Gxt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Gp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Gp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Or(n)),n})}}const d9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Yxt(e){return r1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Uh(l,a)[0]:([c,l,u]=Uh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=d9(e,"end"),n[1]=d9(e,"error");do{if(n[2]=d9(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Or(e.read(a-u)),c.byteLength<a-u&&(c=Or(e.read()))):c=Or(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ga;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ga||(Ga={}));var Zu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Zu||(Zu={}));var $o;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})($o||($o={}));var zh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(zh||(zh={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Vh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Vh||(Vh={}));var Zs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Zs||(Zs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Fp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Fp||(Fp={}));const Kxt=void 0;function tb(e){if(e===null)return"null";if(e===Kxt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>tb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Xxt=Symbol.for("isArrowBigNum");function vd(e,...t){return t.length===0?Object.setPrototypeOf(Xs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}vd.prototype[Xxt]=!0;vd.prototype.toJSON=function(){return`"${PA(this)}"`};vd.prototype.valueOf=function(){return yIe(this)};vd.prototype.toString=function(){return PA(this)};vd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return yIe(this);case"string":return PA(this);case"default":return Qxt(this)}return PA(this)};function Kw(...e){return vd.apply(this,e)}function Xw(...e){return vd.apply(this,e)}function NA(...e){return vd.apply(this,e)}Object.setPrototypeOf(Kw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Xw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(NA.prototype,Object.create(Uint32Array.prototype));Object.assign(Kw.prototype,vd.prototype,{constructor:Kw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Xw.prototype,vd.prototype,{constructor:Xw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(NA.prototype,vd.prototype,{constructor:NA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function yIe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const PA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return h9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return h9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${h9(t)}`},Qxt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:PA(e);function h9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class mQ{static new(t,n){switch(n){case!0:return new Kw(t);case!1:return new Xw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Kw(t)}return t.byteLength===16?new NA(t):new Xw(t)}static signed(t){return new Kw(t)}static unsigned(t){return new Xw(t)}static decimal(t){return new NA(t)}constructor(t,n){return mQ.new(t,n)}}function sd(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var vIe,bIe,_Ie,wIe,EIe,xIe,SIe,TIe,CIe,AIe,IIe,kIe,RIe,NIe,PIe,OIe,DIe,$Ie,MIe,LIe;class gn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return gn.isUnion(t)&&t.mode===Zu.Dense}static isSparseUnion(t){return gn.isUnion(t)&&t.mode===Zu.Sparse}get typeId(){return re.NONE}}vIe=Symbol.toStringTag;gn[vIe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(gn.prototype);let jm=class extends gn{toString(){return"Null"}get typeId(){return re.Null}};bIe=Symbol.toStringTag;jm[bIe]=(e=>e[Symbol.toStringTag]="Null")(jm.prototype);class ou extends gn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}_Ie=Symbol.toStringTag;ou[_Ie]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ou.prototype);class gQ extends ou{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class yQ extends ou{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class J0 extends ou{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class vQ extends ou{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class bQ extends ou{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class _Q extends ou{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class wQ extends ou{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class EQ extends ou{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(gQ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(yQ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(J0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(vQ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(bQ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(_Q.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(wQ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(EQ.prototype,"ArrayType",{value:BigUint64Array});class Z0 extends gn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case $o.HALF:return Uint16Array;case $o.SINGLE:return Float32Array;case $o.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}wIe=Symbol.toStringTag;Z0[wIe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Z0.prototype);class FIe extends Z0{constructor(){super($o.HALF)}}class xQ extends Z0{constructor(){super($o.SINGLE)}}class SQ extends Z0{constructor(){super($o.DOUBLE)}}Object.defineProperty(FIe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(xQ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(SQ.prototype,"ArrayType",{value:Float64Array});let OA=class extends gn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};EIe=Symbol.toStringTag;OA[EIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(OA.prototype);let zE=class extends gn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};xIe=Symbol.toStringTag;zE[xIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(zE.prototype);let DA=class extends gn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};SIe=Symbol.toStringTag;DA[SIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(DA.prototype);let G3=class extends gn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};TIe=Symbol.toStringTag;G3[TIe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(G3.prototype);class VE extends gn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${zh[this.unit]}>`}}CIe=Symbol.toStringTag;VE[CIe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(VE.prototype);class Jxt extends VE{constructor(){super(zh.DAY)}}class Zxt extends VE{constructor(){super(zh.MILLISECOND)}}class Bm extends gn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}AIe=Symbol.toStringTag;Bm[AIe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Bm.prototype);class eSt extends Bm{constructor(){super(Wt.SECOND,32)}}class tSt extends Bm{constructor(){super(Wt.MILLISECOND,32)}}class nSt extends Bm{constructor(){super(Wt.MICROSECOND,64)}}class rSt extends Bm{constructor(){super(Wt.NANOSECOND,64)}}class Y3 extends gn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}IIe=Symbol.toStringTag;Y3[IIe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Y3.prototype);class HE extends gn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Vh[this.unit]}>`}}kIe=Symbol.toStringTag;HE[kIe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(HE.prototype);class iSt extends HE{constructor(){super(Vh.DAY_TIME)}}class sSt extends HE{constructor(){super(Vh.YEAR_MONTH)}}let K3=class extends gn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};RIe=Symbol.toStringTag;K3[RIe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(K3.prototype);let qE=class extends gn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};NIe=Symbol.toStringTag;qE[NIe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(qE.prototype);class ma extends gn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}PIe=Symbol.toStringTag;ma[PIe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ma.prototype);class $A extends gn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}OIe=Symbol.toStringTag;$A[OIe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))($A.prototype);let X3=class extends gn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};DIe=Symbol.toStringTag;X3[DIe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(X3.prototype);let WE=class extends gn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};$Ie=Symbol.toStringTag;WE[$Ie]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(WE.prototype);class MA extends gn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}MIe=Symbol.toStringTag;MA[MIe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(MA.prototype);const oSt=(e=>()=>++e)(-1);class ey extends gn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?oSt():sd(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}LIe=Symbol.toStringTag;ey[LIe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(ey.prototype);function Wd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return aSt(this,t,n)}getVisitFnByTypeId(t,n=!0){return W_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function aSt(e,t,n=!0){return typeof t=="number"?W_(e,t,n):typeof t=="string"&&t in re?W_(e,re[t],n):t&&t instanceof gn?W_(e,Yfe(t),n):t!=null&&t.type&&t.type instanceof gn?W_(e,Yfe(t.type),n):W_(e,re.NONE,n)}function W_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Yfe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case $o.HALF:return re.Float16;case $o.SINGLE:return re.Float32;case $o.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case zh.DAY:return re.DateDay;case zh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Vh.DAY_TIME:return re.IntervalDayTime;case Vh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Zu.Dense:return re.DenseUnion;case Zu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const jIe=new Float64Array(1),I_=new Uint32Array(jIe.buffer);function BIe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function UIe(e){if(e!==e)return 32256;jIe[0]=e;const t=(I_[1]&2147483648)>>16&65535;let n=I_[1]&2146435072,r=0;return n>=1089470464?I_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(I_[1]&1048575)>>10):n<=1056964608?(r=1048576+(I_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(I_[1]&1048575)+512>>10),t|n|r&65535}class Jt extends Cn{}function rn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const uSt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},TQ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},lSt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},cSt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},zIe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},fSt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},og=({values:e},t,n)=>{e[t]=n},CQ=({values:e},t,n)=>{e[t]=n},VIe=({values:e},t,n)=>{e[t]=UIe(n)},dSt=(e,t,n)=>{switch(e.type.precision){case $o.HALF:return VIe(e,t,n);case $o.SINGLE:case $o.DOUBLE:return CQ(e,t,n)}},AQ=({values:e},t,n)=>{uSt(e,t,n.valueOf())},IQ=({values:e},t,n)=>{TQ(e,t*2,n.valueOf())},HIe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},hSt=({values:e,valueOffsets:t},n,r)=>zIe(e,t,n,r),pSt=({values:e,valueOffsets:t},n,r)=>{zIe(e,t,n,dQ(r))},qIe=(e,t,n)=>{e.type.unit===zh.DAY?AQ(e,t,n):IQ(e,t,n)},kQ=({values:e},t,n)=>TQ(e,t*2,n/1e3),RQ=({values:e},t,n)=>TQ(e,t*2,n),NQ=({values:e},t,n)=>lSt(e,t*2,n),PQ=({values:e},t,n)=>cSt(e,t*2,n),WIe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return kQ(e,t,n);case Wt.MILLISECOND:return RQ(e,t,n);case Wt.MICROSECOND:return NQ(e,t,n);case Wt.NANOSECOND:return PQ(e,t,n)}},OQ=({values:e},t,n)=>{e[t]=n},DQ=({values:e},t,n)=>{e[t]=n},$Q=({values:e},t,n)=>{e[t]=n},MQ=({values:e},t,n)=>{e[t]=n},GIe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return OQ(e,t,n);case Wt.MILLISECOND:return DQ(e,t,n);case Wt.MICROSECOND:return $Q(e,t,n);case Wt.NANOSECOND:return MQ(e,t,n)}},YIe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},mSt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Fc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},gSt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Fc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},ySt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),vSt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),bSt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),_St=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),wSt=(e,t,n)=>{const r=e.type.children.map(s=>Fc.getVisitFn(s.type)),i=n instanceof Map?bSt(t,n):n instanceof dr?vSt(t,n):Array.isArray(n)?ySt(t,n):_St(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},ESt=(e,t,n)=>{e.type.mode===Zu.Dense?KIe(e,t,n):XIe(e,t,n)},KIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Fc.visit(i,e.valueOffsets[t],n)},XIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Fc.visit(i,t,n)},xSt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},QIe=(e,t,n)=>{e.type.unit===Vh.DAY_TIME?LQ(e,t,n):FQ(e,t,n)},LQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},FQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},jQ=({values:e},t,n)=>{e[t]=n},BQ=({values:e},t,n)=>{e[t]=n},UQ=({values:e},t,n)=>{e[t]=n},zQ=({values:e},t,n)=>{e[t]=n},JIe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return jQ(e,t,n);case Wt.MILLISECOND:return BQ(e,t,n);case Wt.MICROSECOND:return UQ(e,t,n);case Wt.NANOSECOND:return zQ(e,t,n)}},SSt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Fc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Jt.prototype.visitBool=rn(fSt);Jt.prototype.visitInt=rn(og);Jt.prototype.visitInt8=rn(og);Jt.prototype.visitInt16=rn(og);Jt.prototype.visitInt32=rn(og);Jt.prototype.visitInt64=rn(og);Jt.prototype.visitUint8=rn(og);Jt.prototype.visitUint16=rn(og);Jt.prototype.visitUint32=rn(og);Jt.prototype.visitUint64=rn(og);Jt.prototype.visitFloat=rn(dSt);Jt.prototype.visitFloat16=rn(VIe);Jt.prototype.visitFloat32=rn(CQ);Jt.prototype.visitFloat64=rn(CQ);Jt.prototype.visitUtf8=rn(pSt);Jt.prototype.visitBinary=rn(hSt);Jt.prototype.visitFixedSizeBinary=rn(HIe);Jt.prototype.visitDate=rn(qIe);Jt.prototype.visitDateDay=rn(AQ);Jt.prototype.visitDateMillisecond=rn(IQ);Jt.prototype.visitTimestamp=rn(WIe);Jt.prototype.visitTimestampSecond=rn(kQ);Jt.prototype.visitTimestampMillisecond=rn(RQ);Jt.prototype.visitTimestampMicrosecond=rn(NQ);Jt.prototype.visitTimestampNanosecond=rn(PQ);Jt.prototype.visitTime=rn(GIe);Jt.prototype.visitTimeSecond=rn(OQ);Jt.prototype.visitTimeMillisecond=rn(DQ);Jt.prototype.visitTimeMicrosecond=rn($Q);Jt.prototype.visitTimeNanosecond=rn(MQ);Jt.prototype.visitDecimal=rn(YIe);Jt.prototype.visitList=rn(mSt);Jt.prototype.visitStruct=rn(wSt);Jt.prototype.visitUnion=rn(ESt);Jt.prototype.visitDenseUnion=rn(KIe);Jt.prototype.visitSparseUnion=rn(XIe);Jt.prototype.visitDictionary=rn(xSt);Jt.prototype.visitInterval=rn(QIe);Jt.prototype.visitIntervalDayTime=rn(LQ);Jt.prototype.visitIntervalYearMonth=rn(FQ);Jt.prototype.visitDuration=rn(JIe);Jt.prototype.visitDurationSecond=rn(jQ);Jt.prototype.visitDurationMillisecond=rn(BQ);Jt.prototype.visitDurationMicrosecond=rn(UQ);Jt.prototype.visitDurationNanosecond=rn(zQ);Jt.prototype.visitFixedSizeList=rn(SSt);Jt.prototype.visitMap=rn(gSt);const Fc=new Jt,xf=Symbol.for("parent"),Qw=Symbol.for("rowIndex");class VQ{constructor(t,n){return this[xf]=t,this[Qw]=n,new Proxy(this,new CSt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Qw],n=this[xf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=el.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${tb(t)}: ${tb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new TSt(this[xf],this[Qw])}}class TSt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,el.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(VQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[xf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Qw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class CSt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[xf].type.children.map(n=>n.name)}has(t,n){return t[xf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[xf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[xf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=el.visit(t[xf].children[r],t[Qw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[xf].type.children.findIndex(s=>s.name===n);return i!==-1?(Fc.visit(t[xf].children[i],t[Qw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Cn{}function Zt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const ASt=(e,t)=>864e5*e[t],HQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),ISt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,kSt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,ZIe=e=>new Date(e),RSt=(e,t)=>ZIe(ASt(e,t)),NSt=(e,t)=>ZIe(HQ(e,t)),PSt=(e,t)=>null,eke=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},OSt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},tke=({values:e},t)=>RSt(e,t),nke=({values:e},t)=>NSt(e,t*2),Hy=({stride:e,values:t},n)=>t[e*n],DSt=({stride:e,values:t},n)=>BIe(t[e*n]),rke=({values:e},t)=>e[t],$St=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),MSt=({values:e,valueOffsets:t},n)=>eke(e,t,n),LSt=({values:e,valueOffsets:t},n)=>{const r=eke(e,t,n);return r!==null?eV(r):null},FSt=({values:e},t)=>e[t],jSt=({type:e,values:t},n)=>e.precision!==$o.HALF?t[n]:BIe(t[n]),BSt=(e,t)=>e.type.unit===zh.DAY?tke(e,t):nke(e,t),ike=({values:e},t)=>1e3*HQ(e,t*2),ske=({values:e},t)=>HQ(e,t*2),oke=({values:e},t)=>ISt(e,t*2),ake=({values:e},t)=>kSt(e,t*2),USt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return ike(e,t);case Wt.MILLISECOND:return ske(e,t);case Wt.MICROSECOND:return oke(e,t);case Wt.NANOSECOND:return ake(e,t)}},uke=({values:e},t)=>e[t],lke=({values:e},t)=>e[t],cke=({values:e},t)=>e[t],fke=({values:e},t)=>e[t],zSt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return uke(e,t);case Wt.MILLISECOND:return lke(e,t);case Wt.MICROSECOND:return cke(e,t);case Wt.NANOSECOND:return fke(e,t)}},VSt=({values:e,stride:t},n)=>mQ.decimal(e.subarray(t*n,t*(n+1))),HSt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new dr([u])},qSt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new f4(o.slice(i,s-i))},WSt=(e,t)=>new VQ(e,t),GSt=(e,t)=>e.type.mode===Zu.Dense?dke(e,t):hke(e,t),dke=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return el.visit(r,e.valueOffsets[t])},hke=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return el.visit(r,t)},YSt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},KSt=(e,t)=>e.type.unit===Vh.DAY_TIME?pke(e,t):mke(e,t),pke=({values:e},t)=>e.subarray(2*t,2*(t+1)),mke=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},gke=({values:e},t)=>e[t],yke=({values:e},t)=>e[t],vke=({values:e},t)=>e[t],bke=({values:e},t)=>e[t],XSt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return gke(e,t);case Wt.MILLISECOND:return yke(e,t);case Wt.MICROSECOND:return vke(e,t);case Wt.NANOSECOND:return bke(e,t)}},QSt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new dr([s])};Gt.prototype.visitNull=Zt(PSt);Gt.prototype.visitBool=Zt(OSt);Gt.prototype.visitInt=Zt(FSt);Gt.prototype.visitInt8=Zt(Hy);Gt.prototype.visitInt16=Zt(Hy);Gt.prototype.visitInt32=Zt(Hy);Gt.prototype.visitInt64=Zt(rke);Gt.prototype.visitUint8=Zt(Hy);Gt.prototype.visitUint16=Zt(Hy);Gt.prototype.visitUint32=Zt(Hy);Gt.prototype.visitUint64=Zt(rke);Gt.prototype.visitFloat=Zt(jSt);Gt.prototype.visitFloat16=Zt(DSt);Gt.prototype.visitFloat32=Zt(Hy);Gt.prototype.visitFloat64=Zt(Hy);Gt.prototype.visitUtf8=Zt(LSt);Gt.prototype.visitBinary=Zt(MSt);Gt.prototype.visitFixedSizeBinary=Zt($St);Gt.prototype.visitDate=Zt(BSt);Gt.prototype.visitDateDay=Zt(tke);Gt.prototype.visitDateMillisecond=Zt(nke);Gt.prototype.visitTimestamp=Zt(USt);Gt.prototype.visitTimestampSecond=Zt(ike);Gt.prototype.visitTimestampMillisecond=Zt(ske);Gt.prototype.visitTimestampMicrosecond=Zt(oke);Gt.prototype.visitTimestampNanosecond=Zt(ake);Gt.prototype.visitTime=Zt(zSt);Gt.prototype.visitTimeSecond=Zt(uke);Gt.prototype.visitTimeMillisecond=Zt(lke);Gt.prototype.visitTimeMicrosecond=Zt(cke);Gt.prototype.visitTimeNanosecond=Zt(fke);Gt.prototype.visitDecimal=Zt(VSt);Gt.prototype.visitList=Zt(HSt);Gt.prototype.visitStruct=Zt(WSt);Gt.prototype.visitUnion=Zt(GSt);Gt.prototype.visitDenseUnion=Zt(dke);Gt.prototype.visitSparseUnion=Zt(hke);Gt.prototype.visitDictionary=Zt(YSt);Gt.prototype.visitInterval=Zt(KSt);Gt.prototype.visitIntervalDayTime=Zt(pke);Gt.prototype.visitIntervalYearMonth=Zt(mke);Gt.prototype.visitDuration=Zt(XSt);Gt.prototype.visitDurationSecond=Zt(gke);Gt.prototype.visitDurationMillisecond=Zt(yke);Gt.prototype.visitDurationMicrosecond=Zt(vke);Gt.prototype.visitDurationNanosecond=Zt(bke);Gt.prototype.visitFixedSizeList=Zt(QSt);Gt.prototype.visitMap=Zt(qSt);const el=new Gt,Of=Symbol.for("keys"),Jw=Symbol.for("vals");class f4{constructor(t){return this[Of]=new dr([t.children[0]]).memoize(),this[Jw]=t.children[1],new Proxy(this,new ZSt)}[Symbol.iterator](){return new JSt(this[Of],this[Jw])}get size(){return this[Of].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Of],n=this[Jw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=el.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${tb(t)}: ${tb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class JSt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),el.visit(this.vals,t)]})}}class ZSt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Of].toArray().map(String)}has(t,n){return t[Of].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Of].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Of].indexOf(n);if(r!==-1){const i=el.visit(Reflect.get(t,Jw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Of].indexOf(n);return i!==-1?(Fc.visit(Reflect.get(t,Jw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(f4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Of]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Jw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Kfe;function _ke(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Kfe=s,s=o,o=Kfe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Xfe=e=>e!==e;function dS(e){if(typeof e!=="object"||e===null)return Xfe(e)?Xfe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Vxt(e,n):!1:e instanceof Map?tTt(e):Array.isArray(e)?eTt(e):e instanceof dr?nTt(e):rTt(e,!0)}function eTt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=dS(e[n]);return d4(t)}function tTt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=dS(r);return d4(n)}function nTt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=dS(e.get(n));return d4(t)}function rTt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=dS(e[n[i]]);return d4(r,n)}function d4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return iTt(e,n);case Map:return Qfe(e,n,n.keys());case f4:case VQ:case Object:case void 0:return Qfe(e,n,t||Object.keys(n))}return n instanceof dr?sTt(e,n):!1}}function iTt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function sTt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Qfe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function wke(e,t,n,r){return(n&1<<r)!==0}function oTt(e,t,n,r){return(n&1<<r)>>r}function Q3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):Eke(new qQ(n,e,t,null,wke)).subarray(0,r)),i}return n}function Eke(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class qQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function nV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new qQ(e,t,n-t,e,oTt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return nV(e,t,i)+nV(e,r,n)+aTt(e,i>>3,r-i>>3)}function aTt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=p9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=p9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=p9(s.getUint8(i)),i+=1;return r}function p9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const uTt=-1;class Pr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return gn.isSparseUnion(t)?this.children.some(n=>n.nullable):gn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(gn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=uTt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-nV(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Pr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Wd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(gn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Zu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(gn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Zu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(Q3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Pr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(Q3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Fp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Fp.TYPE])&&(o[Fp.TYPE]=s.subarray(t,t+n)),(s=o[Fp.OFFSET])&&(o[Fp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Fp.DATA])&&(o[Fp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Pr.prototype.children=Object.freeze([]);class w2 extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Pr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.data),s=Or(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.data),s=Or(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Or(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Or(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Xs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(gn.isSparseUnion(n))return new Pr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=TT(t.valueOffsets);return new Pr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.indices.ArrayType,t.data),{["dictionary"]:o=new dr([new w2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Or(t.nullBitmap),s=Xs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new w2().visit({type:n.valueType})}=t,s=Or(t.nullBitmap),{["length"]:o=i.length/Wd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new w2().visit({type:n.childType})}=t,s=Or(t.nullBitmap),o=TT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,u,[o,void 0,s],[i])}}const lTt=new w2;function fa(e){return lTt.visit(e)}class Jfe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function xke(e){return e.reduce((t,n)=>t+n.nullCount,0)}function Ske(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function Tke(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function WQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function GQ(e,t){return e.getValid(t)}function Zw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return WQ(r,this._offsets,n,t)}}function Cke(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=WQ(s,this._offsets,r,n);return t=void 0,o}}function Ake(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):WQ(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Cn{}function cTt(e,t){return t===null&&e.length>0?0:-1}function fTt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new qQ(n,e.offset+(t||0),e.length,n,wke)){if(!i)return r;++r}return-1}function fn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return fTt(e,n)}const r=el.getVisitFn(e),i=dS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function Ike(e,t,n){const r=el.getVisitFn(e),i=dS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=cTt;Yt.prototype.visitBool=fn;Yt.prototype.visitInt=fn;Yt.prototype.visitInt8=fn;Yt.prototype.visitInt16=fn;Yt.prototype.visitInt32=fn;Yt.prototype.visitInt64=fn;Yt.prototype.visitUint8=fn;Yt.prototype.visitUint16=fn;Yt.prototype.visitUint32=fn;Yt.prototype.visitUint64=fn;Yt.prototype.visitFloat=fn;Yt.prototype.visitFloat16=fn;Yt.prototype.visitFloat32=fn;Yt.prototype.visitFloat64=fn;Yt.prototype.visitUtf8=fn;Yt.prototype.visitBinary=fn;Yt.prototype.visitFixedSizeBinary=fn;Yt.prototype.visitDate=fn;Yt.prototype.visitDateDay=fn;Yt.prototype.visitDateMillisecond=fn;Yt.prototype.visitTimestamp=fn;Yt.prototype.visitTimestampSecond=fn;Yt.prototype.visitTimestampMillisecond=fn;Yt.prototype.visitTimestampMicrosecond=fn;Yt.prototype.visitTimestampNanosecond=fn;Yt.prototype.visitTime=fn;Yt.prototype.visitTimeSecond=fn;Yt.prototype.visitTimeMillisecond=fn;Yt.prototype.visitTimeMicrosecond=fn;Yt.prototype.visitTimeNanosecond=fn;Yt.prototype.visitDecimal=fn;Yt.prototype.visitList=fn;Yt.prototype.visitStruct=fn;Yt.prototype.visitUnion=fn;Yt.prototype.visitDenseUnion=Ike;Yt.prototype.visitSparseUnion=Ike;Yt.prototype.visitDictionary=fn;Yt.prototype.visitInterval=fn;Yt.prototype.visitIntervalDayTime=fn;Yt.prototype.visitIntervalYearMonth=fn;Yt.prototype.visitDuration=fn;Yt.prototype.visitDurationSecond=fn;Yt.prototype.visitDurationMillisecond=fn;Yt.prototype.visitDurationMicrosecond=fn;Yt.prototype.visitDurationNanosecond=fn;Yt.prototype.visitFixedSizeList=fn;Yt.prototype.visitMap=fn;const J3=new Yt;class Kt extends Cn{}function en(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof ou&&t.bitWidth!==64||t instanceof Bm&&t.bitWidth!==64||t instanceof Z0&&t.precision!==$o.HALF))return new Jfe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Jfe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new dTt(o)})}class dTt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=en;Kt.prototype.visitBool=en;Kt.prototype.visitInt=en;Kt.prototype.visitInt8=en;Kt.prototype.visitInt16=en;Kt.prototype.visitInt32=en;Kt.prototype.visitInt64=en;Kt.prototype.visitUint8=en;Kt.prototype.visitUint16=en;Kt.prototype.visitUint32=en;Kt.prototype.visitUint64=en;Kt.prototype.visitFloat=en;Kt.prototype.visitFloat16=en;Kt.prototype.visitFloat32=en;Kt.prototype.visitFloat64=en;Kt.prototype.visitUtf8=en;Kt.prototype.visitBinary=en;Kt.prototype.visitFixedSizeBinary=en;Kt.prototype.visitDate=en;Kt.prototype.visitDateDay=en;Kt.prototype.visitDateMillisecond=en;Kt.prototype.visitTimestamp=en;Kt.prototype.visitTimestampSecond=en;Kt.prototype.visitTimestampMillisecond=en;Kt.prototype.visitTimestampMicrosecond=en;Kt.prototype.visitTimestampNanosecond=en;Kt.prototype.visitTime=en;Kt.prototype.visitTimeSecond=en;Kt.prototype.visitTimeMillisecond=en;Kt.prototype.visitTimeMicrosecond=en;Kt.prototype.visitTimeNanosecond=en;Kt.prototype.visitDecimal=en;Kt.prototype.visitList=en;Kt.prototype.visitStruct=en;Kt.prototype.visitUnion=en;Kt.prototype.visitDenseUnion=en;Kt.prototype.visitSparseUnion=en;Kt.prototype.visitDictionary=en;Kt.prototype.visitInterval=en;Kt.prototype.visitIntervalDayTime=en;Kt.prototype.visitIntervalYearMonth=en;Kt.prototype.visitDuration=en;Kt.prototype.visitDurationSecond=en;Kt.prototype.visitDurationMillisecond=en;Kt.prototype.visitDurationMicrosecond=en;Kt.prototype.visitDurationNanosecond=en;Kt.prototype.visitFixedSizeList=en;Kt.prototype.visitMap=en;const YQ=new Kt,hTt=(e,t)=>e+t;class qy extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Hh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Hh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const pTt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),mTt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),gTt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Hh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},yTt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Hh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},vTt=(e,t)=>e.type.mode===Zu.Dense?kke(e,t):Rke(e,t),kke=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Hh.visit(t[s],r[i])},Rke=({children:e},t)=>4+Hh.visitMany(e,e.map(()=>t)).reduce(hTt,0);qy.prototype.visitUtf8=pTt;qy.prototype.visitBinary=mTt;qy.prototype.visitList=gTt;qy.prototype.visitFixedSizeList=yTt;qy.prototype.visitUnion=vTt;qy.prototype.visitDenseUnion=kke;qy.prototype.visitSparseUnion=Rke;const Hh=new qy;var Nke;const Pke={},Oke={};class dr{constructor(t){var n,r,i;const s=t[0]instanceof dr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Pr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=Pke[o.typeId],f=s[0];this.isValid=d=>GQ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Oke[o.typeId]),this._offsets=Ske(s);break}this.data=s,this.type=o,this.stride=Wd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return xke(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return YQ.visit(this)}concat(...t){return new dr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new dr(_ke(this,t,n,({data:r,_offsets:i},s,o)=>Tke(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new dr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return gn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(gn.isDictionary(this.type)){const t=new Z3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return new Z3(this)}unmemoize(){if(gn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return this}}Nke=Symbol.toStringTag;dr[Nke]=(e=>{e.type=gn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=el.getVisitFnByTypeId(n),i=Fc.getVisitFnByTypeId(n),s=J3.getVisitFnByTypeId(n),o=Hh.getVisitFnByTypeId(n);Pke[n]={get:r,set:i,indexOf:s,byteLength:o},Oke[n]=Object.create(e,{isValid:{value:Zw(GQ)},get:{value:Zw(el.getVisitFnByTypeId(n))},set:{value:Cke(Fc.getVisitFnByTypeId(n))},indexOf:{value:Ake(J3.getVisitFnByTypeId(n))},getByteLength:{value:Zw(Hh.getVisitFnByTypeId(n))}})}return"Vector"})(dr.prototype);class Z3 extends dr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Z3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new dr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function bTt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${_Tt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function _Tt(e){return typeof e!="bigint"?tb(e):`${tb(e)}n`}const m9=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,wTt=(e,t=0)=>e.length>=t?e.subarray(0,t):W3(new e.constructor(t),e,0);class h4{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?m9(r*1,this.BYTES_PER_ELEMENT):m9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=m9(t*this.stride,this.BYTES_PER_ELEMENT);const n=wTt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=W3(new this.ArrayType(t),this.buffer)}}h4.prototype.offset=0;class yk extends h4{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class Dke extends yk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class $ke extends yk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let ul=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Wd(t),this._nulls=new Dke,n&&n.length>0&&(this._isValid=bTt(n))}toVector(){return new dr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),fa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};ul.prototype.length=1;ul.prototype.stride=1;ul.prototype.children=null;ul.prototype.finished=!1;ul.prototype.nullValues=null;ul.prototype._isValid=()=>!0;class ag extends ul{constructor(t){super(t),this._values=new yk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class p4 extends ul{constructor(t){super(t),this._pendingLength=0,this._offsets=new $ke}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof f4?n[Of].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class rV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const g9=2,nh=4,Xp=4,Hr=4,Bg=new Int32Array(2),Zfe=new Float32Array(Bg.buffer),ede=new Float64Array(Bg.buffer),$N=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var iV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(iV||(iV={}));let e$=class Mke{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Mke(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Bg[0]=this.readInt32(t),Zfe[0]}readFloat64(t){return Bg[$N?0:1]=this.readInt32(t),Bg[$N?1:0]=this.readInt32(t+4),ede[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Zfe[0]=n,this.writeInt32(t,Bg[0])}writeFloat64(t,n){ede[0]=n,this.writeInt32(t,Bg[$N?0:1]),this.writeInt32(t+4,Bg[$N?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+nh+Xp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Xp;n++)t+=String.fromCharCode(this.readInt8(this.position_+nh+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=nh;const i=this.bytes_.subarray(t,t+r);return n===iV.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+nh}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Xp)throw new Error("FlatBuffers: file identifier must be length "+Xp);for(let n=0;n<Xp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+nh+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},Lke=class Fke{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=e$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=Fke.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=e$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(nh,0),this.writeInt32(this.offset()-t+nh)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*g9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=g9;l<s;l+=g9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Hr:0;if(n){const s=n;if(this.prep(this.minalign,nh+Xp+i),s.length!=Xp)throw new TypeError("FlatBuffers: file identifier must be length "+Xp);for(let o=Xp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,nh+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(nh,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class ks{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ks).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Hr),(n||new ks).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ks.startKeyValue(t),ks.addKey(t,n),ks.addValue(t,r),ks.endKeyValue(t)}}var GE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(GE||(GE={}));var YE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(YE||(YE={}));var t$;(function(e){e[e.DenseArray=0]="DenseArray"})(t$||(t$={}));class El{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new El).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Hr),(n||new El).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return El.startInt(t),El.addBitWidth(t,n),El.addIsSigned(t,r),El.endInt(t)}}class Qp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Qp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Hr),(n||new Qp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new El).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):t$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,t$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Hr),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return f1.startBinary(t),f1.endBinary(t)}}class d1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Hr),(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return d1.startBool(t),d1.endBool(t)}}var n$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(n$||(n$={}));let hO=class G_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new G_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Hr),(n||new G_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):n$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,n$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return G_.startDate(t),G_.addUnit(t,n),G_.endDate(t)}};class Tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Hr),(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Tu.startDecimal(t),Tu.addPrecision(t,n),Tu.addScale(t,r),Tu.addBitWidth(t,i),Tu.endDecimal(t)}}var ty;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ty||(ty={}));class rh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new rh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Hr),(n||new rh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ty.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ty.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return rh.startDuration(t),rh.addUnit(t,n),rh.endDuration(t)}}class ih{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new ih).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Hr),(n||new ih).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return ih.startFixedSizeBinary(t),ih.addByteWidth(t,n),ih.endFixedSizeBinary(t)}}class sh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new sh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Hr),(n||new sh).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return sh.startFixedSizeList(t),sh.addListSize(t,n),sh.endFixedSizeList(t)}}var r$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(r$||(r$={}));class oh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Hr),(n||new oh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):r$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,r$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return oh.startFloatingPoint(t),oh.addPrecision(t,n),oh.endFloatingPoint(t)}}var i$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(i$||(i$={}));class ah{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new ah).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Hr),(n||new ah).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):i$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,i$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return ah.startInterval(t),ah.addUnit(t,n),ah.endInterval(t)}}class h1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Hr),(n||new h1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return h1.startList(t),h1.endList(t)}}let pO=class Y_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Y_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Hr),(n||new Y_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Y_.startMap(t),Y_.addKeysSorted(t,n),Y_.endMap(t)}};class p1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new p1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Hr),(n||new p1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return p1.startNull(t),p1.endNull(t)}}class m1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new m1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Hr),(n||new m1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return m1.startStruct_(t),m1.endStruct_(t)}}let yC=class Nv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Hr),(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ty.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ty.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Nv.startTime(t),Nv.addUnit(t,n),Nv.addBitWidth(t,r),Nv.endTime(t)}},vC=class Pv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Hr),(n||new Pv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ty.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ty.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Pv.startTimestamp(t),Pv.addUnit(t,n),Pv.addTimezone(t,r),Pv.endTimestamp(t)}};var s$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(s$||(s$={}));let Ov=class Dv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Dv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Hr),(n||new Dv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):s$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,s$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Dv.startUnion(t),Dv.addMode(t,n),Dv.addTypeIds(t,r),Dv.endUnion(t)}};class g1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new g1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Hr),(n||new g1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return g1.startUtf8(t),g1.endUtf8(t)}}var wi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(wi||(wi={}));let oc=class mO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new mO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Hr),(n||new mO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Qp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new mO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,wi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Hd=class Mp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Mp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Hr),(n||new Mp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):YE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new oc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,YE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Mp.startSchema(t),Mp.addEndianness(t,n),Mp.addFields(t,r),Mp.addCustomMetadata(t,i),Mp.addFeatures(t,s),Mp.endSchema(t)}};class yl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new yl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Hr),(n||new yl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):GE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Hd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new rV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new rV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,GE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Tr{constructor(t=[],n,r,i=Ga.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=oV(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Tr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Tr(n,this.metadata)}assign(...t){const n=t[0]instanceof Tr?t[0]:Array.isArray(t[0])?new Tr(t[0]):new Tr(t),r=[...this.fields],i=MN(MN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:MN(MN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=oV(s,new Map);return new Tr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Tr.prototype.fields=null;Tr.prototype.metadata=null;Tr.prototype.dictionaries=null;let Br=class sV{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new sV(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],sV.new(n,r,i,s)}};Br.prototype.type=null;Br.prototype.name=null;Br.prototype.nullable=null;Br.prototype.metadata=null;function MN(e,t){return new Map([...e||new Map,...t||new Map])}function oV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(gn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&oV(s.children,t)}return t}var ETt=Lke,xTt=e$;class aV{static decode(t){t=new xTt(Or(t));const n=yl.getRootAsFooter(t),r=Tr.decode(n.schema(),new Map,n.version());return new STt(r,n)}static encode(t){const n=new ETt,r=Tr.encode(n,t.schema);yl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())ny.encode(n,o);const i=n.endVector();yl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())ny.encode(n,o);const s=n.endVector();return yl.startFooter(n),yl.addSchema(n,r),yl.addVersion(n,Ga.V5),yl.addRecordBatches(n,i),yl.addDictionaries(n,s),yl.finishFooterBuffer(n,yl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ga.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class STt extends aV{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return ny.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return ny.decode(n)}return null}}class ny{static decode(t){return new ny(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return rV.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=sd(r),this.bodyLength=sd(n)}}const LN=Object.freeze({done:!0,value:void 0});class jke{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class TTt extends jke{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Gp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(LN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Gfe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Gfe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Gp(this,void 0,void 0,function*(){return yield this.abort(t),LN})}return(t){return Gp(this,void 0,void 0,function*(){return yield this.close(),LN})}read(t){return Gp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Gp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(LN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class y9 extends TTt{write(t){if((t=Or(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?eV(this.toUint8Array(!0)):this.toUint8Array(!1).then(eV)}toUint8Array(t=!1){return t?Uh(this._values)[0]:Gp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=JC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Uh(o,a)[0]})}}class Bke extends p4{constructor(t){super(t),this._values=new h4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Or(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class CTt extends ul{constructor(t){super(t),this._values=new Dke}setValue(t,n){this._values.set(t,+n)}}class m4 extends ag{}m4.prototype._setValue=qIe;class Uke extends m4{}Uke.prototype._setValue=AQ;class zke extends m4{}zke.prototype._setValue=IQ;class Vke extends ag{}Vke.prototype._setValue=YIe;class ATt extends ul{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new ey(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=o$({type:this.type.indices,nullValues:n}),this.dictionary=o$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Hke extends ag{}Hke.prototype._setValue=HIe;class ITt extends ul{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new WE(this.type.listSize,new Br(n,t.type,!0)),r}}class g4 extends ag{setValue(t,n){this._values.set(t,n)}}class kTt extends g4{setValue(t,n){super.setValue(t,UIe(n))}}class RTt extends g4{}class NTt extends g4{}class y4 extends ag{}y4.prototype._setValue=QIe;class qke extends y4{}qke.prototype._setValue=LQ;class Wke extends y4{}Wke.prototype._setValue=FQ;class hS extends ag{}hS.prototype._setValue=JIe;class Gke extends hS{}Gke.prototype._setValue=jQ;class Yke extends hS{}Yke.prototype._setValue=BQ;class Kke extends hS{}Kke.prototype._setValue=UQ;class Xke extends hS{}Xke.prototype._setValue=zQ;class ug extends ag{setValue(t,n){this._values.set(t,n)}}class PTt extends ug{}class OTt extends ug{}class DTt extends ug{}class $Tt extends ug{}class MTt extends ug{}class LTt extends ug{}class FTt extends ug{}class jTt extends ug{}class BTt extends p4{constructor(t){super(t),this._offsets=new $ke}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new qE(new Br(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class UTt extends p4{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new MA(new Br(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class zTt extends ul{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class VTt extends ul{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ma([...this.type.children,new Br(n,t.type,!0)]),r}}class pS extends ag{}pS.prototype._setValue=WIe;class Qke extends pS{}Qke.prototype._setValue=kQ;class Jke extends pS{}Jke.prototype._setValue=RQ;class Zke extends pS{}Zke.prototype._setValue=NQ;class eRe extends pS{}eRe.prototype._setValue=PQ;class mS extends ag{}mS.prototype._setValue=GIe;class tRe extends mS{}tRe.prototype._setValue=OQ;class nRe extends mS{}nRe.prototype._setValue=DQ;class rRe extends mS{}rRe.prototype._setValue=$Q;class iRe extends mS{}iRe.prototype._setValue=MQ;class KQ extends ul{constructor(t){super(t),this._typeIds=new yk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Br(n,t.type)];return this.type=new $A(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class HTt extends KQ{}class qTt extends KQ{constructor(t){super(t),this._offsets=new yk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class sRe extends p4{constructor(t){super(t),this._values=new h4(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,dQ(n))}_flushPending(t,n){}}sRe.prototype._flushPending=Bke.prototype._flushPending;class WTt extends Cn{visitNull(){return zTt}visitBool(){return CTt}visitInt(){return ug}visitInt8(){return PTt}visitInt16(){return OTt}visitInt32(){return DTt}visitInt64(){return $Tt}visitUint8(){return MTt}visitUint16(){return LTt}visitUint32(){return FTt}visitUint64(){return jTt}visitFloat(){return g4}visitFloat16(){return kTt}visitFloat32(){return RTt}visitFloat64(){return NTt}visitUtf8(){return sRe}visitBinary(){return Bke}visitFixedSizeBinary(){return Hke}visitDate(){return m4}visitDateDay(){return Uke}visitDateMillisecond(){return zke}visitTimestamp(){return pS}visitTimestampSecond(){return Qke}visitTimestampMillisecond(){return Jke}visitTimestampMicrosecond(){return Zke}visitTimestampNanosecond(){return eRe}visitTime(){return mS}visitTimeSecond(){return tRe}visitTimeMillisecond(){return nRe}visitTimeMicrosecond(){return rRe}visitTimeNanosecond(){return iRe}visitDecimal(){return Vke}visitList(){return BTt}visitStruct(){return VTt}visitUnion(){return KQ}visitDenseUnion(){return qTt}visitSparseUnion(){return HTt}visitDictionary(){return ATt}visitInterval(){return y4}visitIntervalDayTime(){return qke}visitIntervalYearMonth(){return Wke}visitDuration(){return hS}visitDurationSecond(){return Gke}visitDurationMillisecond(){return Yke}visitDurationMicrosecond(){return Kke}visistDurationNanosecond(){return Xke}visitFixedSizeList(){return ITt}visitMap(){return UTt}}const GTt=new WTt;class Xt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function fu(e,t){return t instanceof e.constructor}function vk(e,t){return e===t||fu(e,t)}function lg(e,t){return e===t||fu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function v4(e,t){return e===t||fu(e,t)&&e.precision===t.precision}function YTt(e,t){return e===t||fu(e,t)&&e.byteWidth===t.byteWidth}function XQ(e,t){return e===t||fu(e,t)&&e.unit===t.unit}function bk(e,t){return e===t||fu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function _k(e,t){return e===t||fu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function KTt(e,t){return e===t||fu(e,t)&&e.children.length===t.children.length&&ry.compareManyFields(e.children,t.children)}function XTt(e,t){return e===t||fu(e,t)&&e.children.length===t.children.length&&ry.compareManyFields(e.children,t.children)}function QQ(e,t){return e===t||fu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&ry.compareManyFields(e.children,t.children)}function QTt(e,t){return e===t||fu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ry.visit(e.indices,t.indices)&&ry.visit(e.dictionary,t.dictionary)}function JQ(e,t){return e===t||fu(e,t)&&e.unit===t.unit}function wk(e,t){return e===t||fu(e,t)&&e.unit===t.unit}function JTt(e,t){return e===t||fu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ry.compareManyFields(e.children,t.children)}function ZTt(e,t){return e===t||fu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ry.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=vk;Xt.prototype.visitBool=vk;Xt.prototype.visitInt=lg;Xt.prototype.visitInt8=lg;Xt.prototype.visitInt16=lg;Xt.prototype.visitInt32=lg;Xt.prototype.visitInt64=lg;Xt.prototype.visitUint8=lg;Xt.prototype.visitUint16=lg;Xt.prototype.visitUint32=lg;Xt.prototype.visitUint64=lg;Xt.prototype.visitFloat=v4;Xt.prototype.visitFloat16=v4;Xt.prototype.visitFloat32=v4;Xt.prototype.visitFloat64=v4;Xt.prototype.visitUtf8=vk;Xt.prototype.visitBinary=vk;Xt.prototype.visitFixedSizeBinary=YTt;Xt.prototype.visitDate=XQ;Xt.prototype.visitDateDay=XQ;Xt.prototype.visitDateMillisecond=XQ;Xt.prototype.visitTimestamp=bk;Xt.prototype.visitTimestampSecond=bk;Xt.prototype.visitTimestampMillisecond=bk;Xt.prototype.visitTimestampMicrosecond=bk;Xt.prototype.visitTimestampNanosecond=bk;Xt.prototype.visitTime=_k;Xt.prototype.visitTimeSecond=_k;Xt.prototype.visitTimeMillisecond=_k;Xt.prototype.visitTimeMicrosecond=_k;Xt.prototype.visitTimeNanosecond=_k;Xt.prototype.visitDecimal=vk;Xt.prototype.visitList=KTt;Xt.prototype.visitStruct=XTt;Xt.prototype.visitUnion=QQ;Xt.prototype.visitDenseUnion=QQ;Xt.prototype.visitSparseUnion=QQ;Xt.prototype.visitDictionary=QTt;Xt.prototype.visitInterval=JQ;Xt.prototype.visitIntervalDayTime=JQ;Xt.prototype.visitIntervalYearMonth=JQ;Xt.prototype.visitDuration=wk;Xt.prototype.visitDurationSecond=wk;Xt.prototype.visitDurationMillisecond=wk;Xt.prototype.visitDurationMicrosecond=wk;Xt.prototype.visitDurationNanosecond=wk;Xt.prototype.visitFixedSizeList=JTt;Xt.prototype.visitMap=ZTt;const ry=new Xt;function uV(e,t){return ry.compareSchemas(e,t)}function o$(e){const t=e.type,n=new(GTt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(o$(Object.assign(Object.assign({},l),{type:u})))}}return n}function v9(e,t){return eCt(e,t.map(n=>n.data.concat()))}function eCt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=tCt(n,o,c,t,i),o>0&&(r[s++]=fa({type:new ma(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new xl(e,f))]}function tCt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:fa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var oRe;class Ru{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Tr([]),this._offsets=[0],this;let i,s;t[0]instanceof Tr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof xl)return[u];if(u instanceof Ru)return u.batches;if(u instanceof Pr){if(u.type instanceof ma)return[new xl(new Tr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new dr([u[h]])),f=new Tr(l.map((h,p)=>new Br(String(h),c[p].type))),[,d]=v9(f,c);return d.length===0?[new xl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Tr([]),!(i instanceof Tr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof xl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!uV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??Ske(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=xke(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?YQ.visit(new dr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ru(n,r.map(i=>new xl(n,i)))}slice(t,n){const r=this.schema;[t,n]=_ke({length:this.numRows},t,n);const i=Tke(this.data,this._offsets,t,n);return new Ru(r,i.map(s=>new xl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=fa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new dr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new dr([fa({type:new jm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=v9(r,a)}return new Ru(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ru(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ru(...v9(s,o))}}oRe=Symbol.toStringTag;Ru[oRe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Zw(GQ),e.get=Zw(el.getVisitFn(re.Struct)),e.set=Cke(Fc.getVisitFn(re.Struct)),e.indexOf=Ake(J3.getVisitFn(re.Struct)),e.getByteLength=Zw(Hh.getVisitFn(re.Struct)),"Table"))(Ru.prototype);var aRe;let xl=class bC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Tr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=fa({nullCount:0,type:new ma(this.schema.fields),children:this.schema.fields.map(n=>fa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Pr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=tde(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Br.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Tr(r),a=fa({type:new ma(r),length:s,children:i,nullCount:0});[this.schema,this.data]=tde(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=uRe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return el.visit(this.data,t)}set(t,n){return Fc.visit(this.data,t,n)}indexOf(t,n){return J3.visit(this.data,t,n)}getByteLength(t){return Hh.visit(this.data,t)}[Symbol.iterator](){return YQ.visit(new dr([this.data]))}toArray(){return[...this]}concat(...t){return new Ru(this.schema,[this,...t])}slice(t,n){const[r]=new dr([this.data]).slice(t,n).data;return new bC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new dr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new dr([fa({type:new jm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Tr(s,new Map(this.schema.metadata)),i=fa({type:new ma(s),children:o})}return new bC(r,i)}select(t){const n=this.schema.select(t),r=new ma(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new bC(n,fa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=fa({type:new ma(n.fields),length:this.numRows,children:r});return new bC(n,i)}};aRe=Symbol.toStringTag;xl[aRe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(xl.prototype);function tde(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:fa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),fa({type:new ma(i),length:n,children:s})]}function uRe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])uRe(a.children,l==null?void 0:l.children,n);if(gn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class nCt extends xl{constructor(t){const n=t.fields.map(i=>fa({type:i.type})),r=fa({type:new ma(t.fields),nullCount:0,children:n});super(t,r)}}var a$;(function(e){e[e.BUFFER=0]="BUFFER"})(a$||(a$={}));var u$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(u$||(u$={}));class Ug{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ug).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Hr),(n||new Ug).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):u$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):a$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,u$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,a$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ug.startBodyCompression(t),Ug.addCodec(t,n),Ug.addMethod(t,r),Ug.endBodyCompression(t)}}let lRe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},cRe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},jp=class lV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new lV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Hr),(n||new lV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new cRe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new lRe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ug).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},K_=class cV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new cV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Hr),(n||new cV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new jp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var l$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(l$||(l$={}));let Ag=class $d{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new $d).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Hr),(n||new $d).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):GE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):l$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,GE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,l$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return $d.startMessage(t),$d.addVersion(t,n),$d.addHeaderType(t,r),$d.addHeader(t,i),$d.addBodyLength(t,s),$d.addCustomMetadata(t,o),$d.endMessage(t)}};class rCt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return p1.startNull(n),p1.endNull(n)}visitInt(t,n){return El.startInt(n),El.addBitWidth(n,t.bitWidth),El.addIsSigned(n,t.isSigned),El.endInt(n)}visitFloat(t,n){return oh.startFloatingPoint(n),oh.addPrecision(n,t.precision),oh.endFloatingPoint(n)}visitBinary(t,n){return f1.startBinary(n),f1.endBinary(n)}visitBool(t,n){return d1.startBool(n),d1.endBool(n)}visitUtf8(t,n){return g1.startUtf8(n),g1.endUtf8(n)}visitDecimal(t,n){return Tu.startDecimal(n),Tu.addScale(n,t.scale),Tu.addPrecision(n,t.precision),Tu.addBitWidth(n,t.bitWidth),Tu.endDecimal(n)}visitDate(t,n){return hO.startDate(n),hO.addUnit(n,t.unit),hO.endDate(n)}visitTime(t,n){return yC.startTime(n),yC.addUnit(n,t.unit),yC.addBitWidth(n,t.bitWidth),yC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return vC.startTimestamp(n),vC.addUnit(n,t.unit),r!==void 0&&vC.addTimezone(n,r),vC.endTimestamp(n)}visitInterval(t,n){return ah.startInterval(n),ah.addUnit(n,t.unit),ah.endInterval(n)}visitDuration(t,n){return rh.startDuration(n),rh.addUnit(n,t.unit),rh.endDuration(n)}visitList(t,n){return h1.startList(n),h1.endList(n)}visitStruct(t,n){return m1.startStruct_(n),m1.endStruct_(n)}visitUnion(t,n){Ov.startTypeIdsVector(n,t.typeIds.length);const r=Ov.createTypeIdsVector(n,t.typeIds);return Ov.startUnion(n),Ov.addMode(n,t.mode),Ov.addTypeIds(n,r),Ov.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Qp.startDictionaryEncoding(n),Qp.addId(n,BigInt(t.id)),Qp.addIsOrdered(n,t.isOrdered),r!==void 0&&Qp.addIndexType(n,r),Qp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return ih.startFixedSizeBinary(n),ih.addByteWidth(n,t.byteWidth),ih.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return sh.startFixedSizeList(n),sh.addListSize(n,t.listSize),sh.endFixedSizeList(n)}visitMap(t,n){return pO.startMap(n),pO.addKeysSorted(n,t.keysSorted),pO.endMap(n)}}const b9=new rCt;function iCt(e,t=new Map){return new Tr(oCt(e,t),gO(e.metadata),t)}function fRe(e){return new Bl(e.count,dRe(e.columns),hRe(e.columns))}function sCt(e){return new qh(fRe(e.data),e.id,e.isDelta)}function oCt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Br.fromJSON(n,t))}function nde(e,t){return(e.children||[]).filter(Boolean).map(n=>Br.fromJSON(n,t))}function dRe(e){return(e||[]).reduce((t,n)=>[...t,new iy(n.count,aCt(n.VALIDITY)),...dRe(n.children)],[])}function hRe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new hh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new hh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new hh(t.length,i.OFFSET.length)),i.DATA&&t.push(new hh(t.length,i.DATA.length)),t=hRe(i.children,t)}return t}function aCt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function uCt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=ide(e,nde(e,t)),i=new Br(e.name,o,e.nullable,gO(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?rde(r):new J0,a=new ey(t.get(n),r,n,s.isOrdered),i=new Br(e.name,a,e.nullable,gO(e.metadata))):(r=(r=s.indexType)?rde(r):new J0,t.set(n,o=ide(e,nde(e,t))),a=new ey(o,r,n,s.isOrdered),i=new Br(e.name,a,e.nullable,gO(e.metadata))),i||null}function gO(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function rde(e){return new ou(e.isSigned,e.bitWidth)}function ide(e,t){const n=e.type.name;switch(n){case"NONE":return new jm;case"null":return new jm;case"binary":return new OA;case"utf8":return new zE;case"bool":return new DA;case"list":return new qE((t||[])[0]);case"struct":return new ma(t||[]);case"struct_":return new ma(t||[])}switch(n){case"int":{const r=e.type;return new ou(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Z0($o[r.precision])}case"decimal":{const r=e.type;return new G3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new VE(zh[r.unit])}case"time":{const r=e.type;return new Bm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new Y3(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new HE(Vh[r.unit])}case"duration":{const r=e.type;return new K3(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new $A(Zu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new X3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new WE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new MA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var lCt=Lke,cCt=e$;class uh{static fromJSON(t,n){const r=new uh(0,Ga.V5,n);return r._createHeader=fCt(t,n),r}static decode(t){t=new cCt(Or(t));const n=Ag.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new uh(r,i,s);return o._createHeader=dCt(n,s),o}static encode(t){const n=new lCt;let r=-1;return t.isSchema()?r=Tr.encode(n,t.header()):t.isRecordBatch()?r=Bl.encode(n,t.header()):t.isDictionaryBatch()&&(r=qh.encode(n,t.header())),Ag.startMessage(n),Ag.addVersion(n,Ga.V5),Ag.addHeader(n,r),Ag.addHeaderType(n,t.headerType),Ag.addBodyLength(n,BigInt(t.bodyLength)),Ag.finishMessageBuffer(n,Ag.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Tr)return new uh(0,Ga.V5,Zs.Schema,t);if(t instanceof Bl)return new uh(n,Ga.V5,Zs.RecordBatch,t);if(t instanceof qh)return new uh(n,Ga.V5,Zs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Zs.Schema}isRecordBatch(){return this.headerType===Zs.RecordBatch}isDictionaryBatch(){return this.headerType===Zs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=sd(t)}}class Bl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=sd(t)}}class qh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=sd(n)}}class hh{constructor(t,n){this.offset=sd(t),this.length=sd(n)}}class iy{constructor(t,n){this.length=sd(t),this.nullCount=sd(n)}}function fCt(e,t){return()=>{switch(t){case Zs.Schema:return Tr.fromJSON(e);case Zs.RecordBatch:return Bl.fromJSON(e);case Zs.DictionaryBatch:return qh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Zs[t]}, type: ${t} }`)}}function dCt(e,t){return()=>{switch(t){case Zs.Schema:return Tr.decode(e.header(new Hd),new Map,e.version());case Zs.RecordBatch:return Bl.decode(e.header(new jp),e.version());case Zs.DictionaryBatch:return qh.decode(e.header(new K_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Zs[t]}, type: ${t} }`)}}Br.encode=xCt;Br.decode=wCt;Br.fromJSON=uCt;Tr.encode=ECt;Tr.decode=hCt;Tr.fromJSON=iCt;Bl.encode=SCt;Bl.decode=pCt;Bl.fromJSON=fRe;qh.encode=TCt;qh.decode=mCt;qh.fromJSON=sCt;iy.encode=CCt;iy.decode=yCt;hh.encode=ACt;hh.decode=gCt;function hCt(e,t=new Map,n=Ga.V5){const r=_Ct(e,t);return new Tr(r,yO(e),t,n)}function pCt(e,t=Ga.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Bl(e.length(),vCt(e),bCt(e,t))}function mCt(e,t=Ga.V5){return new qh(Bl.decode(e.data(),t),e.id(),e.isDelta())}function gCt(e){return new hh(e.offset(),e.length())}function yCt(e){return new iy(e.length(),e.nullCount())}function vCt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=iy.decode(n));return t}function bCt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ga.V4&&(r.bb_pos+=8*(i+1)),n[++s]=hh.decode(r));return n}function _Ct(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Br.decode(r,t));return n}function sde(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Br.decode(r,t));return n}function wCt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=ade(e,sde(e,t)),r=new Br(e.name(),i,e.nullable(),yO(e))):t.has(n=sd(a.id()))?(s=(s=a.indexType())?ode(s):new J0,o=new ey(t.get(n),s,n,a.isOrdered()),r=new Br(e.name(),o,e.nullable(),yO(e))):(s=(s=a.indexType())?ode(s):new J0,t.set(n,i=ade(e,sde(e,t))),o=new ey(i,s,n,a.isOrdered()),r=new Br(e.name(),o,e.nullable(),yO(e))),r||null}function yO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ode(e){return new ou(e.isSigned(),e.bitWidth())}function ade(e,t){const n=e.typeType();switch(n){case wi.NONE:return new jm;case wi.Null:return new jm;case wi.Binary:return new OA;case wi.Utf8:return new zE;case wi.Bool:return new DA;case wi.List:return new qE((t||[])[0]);case wi.Struct_:return new ma(t||[])}switch(n){case wi.Int:{const r=e.type(new El);return new ou(r.isSigned(),r.bitWidth())}case wi.FloatingPoint:{const r=e.type(new oh);return new Z0(r.precision())}case wi.Decimal:{const r=e.type(new Tu);return new G3(r.scale(),r.precision(),r.bitWidth())}case wi.Date:{const r=e.type(new hO);return new VE(r.unit())}case wi.Time:{const r=e.type(new yC);return new Bm(r.unit(),r.bitWidth())}case wi.Timestamp:{const r=e.type(new vC);return new Y3(r.unit(),r.timezone())}case wi.Interval:{const r=e.type(new ah);return new HE(r.unit())}case wi.Duration:{const r=e.type(new rh);return new K3(r.unit())}case wi.Union:{const r=e.type(new Ov);return new $A(r.mode(),r.typeIdsArray()||[],t||[])}case wi.FixedSizeBinary:{const r=e.type(new ih);return new X3(r.byteWidth())}case wi.FixedSizeList:{const r=e.type(new sh);return new WE(r.listSize(),(t||[])[0])}case wi.Map:{const r=e.type(new pO);return new MA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${wi[n]}" (${n})`)}function ECt(e,t){const n=t.fields.map(s=>Br.encode(e,s));Hd.startFieldsVector(e,n.length);const r=Hd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Hd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ks.startKeyValue(e),ks.addKey(e,a),ks.addValue(e,u),ks.endKeyValue(e)})):-1;return Hd.startSchema(e),Hd.addFields(e,r),Hd.addEndianness(e,ICt?YE.Little:YE.Big),i!==-1&&Hd.addCustomMetadata(e,i),Hd.endSchema(e)}function xCt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;gn.isDictionary(s)?(o=s.dictionary.typeId,i=b9.visit(s,e),r=b9.visit(s.dictionary,e)):r=b9.visit(s,e);const a=(s.children||[]).map(c=>Br.encode(e,c)),u=oc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?oc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ks.startKeyValue(e),ks.addKey(e,d),ks.addValue(e,h),ks.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),oc.startField(e),oc.addType(e,r),oc.addTypeType(e,o),oc.addChildren(e,u),oc.addNullable(e,!!t.nullable),n!==-1&&oc.addName(e,n),i!==-1&&oc.addDictionary(e,i),l!==-1&&oc.addCustomMetadata(e,l),oc.endField(e)}function SCt(e,t){const n=t.nodes||[],r=t.buffers||[];jp.startNodesVector(e,n.length);for(const o of n.slice().reverse())iy.encode(e,o);const i=e.endVector();jp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())hh.encode(e,o);const s=e.endVector();return jp.startRecordBatch(e),jp.addLength(e,BigInt(t.length)),jp.addNodes(e,i),jp.addBuffers(e,s),jp.endRecordBatch(e)}function TCt(e,t){const n=Bl.encode(e,t.data);return K_.startDictionaryBatch(e),K_.addId(e,BigInt(t.id)),K_.addIsDelta(e,t.isDelta),K_.addData(e,n),K_.endDictionaryBatch(e)}function CCt(e,t){return cRe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function ACt(e,t){return lRe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const ICt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),fV="ARROW1",ZQ=new Uint8Array(fV.length);for(let e=0;e<fV.length;e+=1)ZQ[e]=fV.codePointAt(e);ZQ.length;class hs extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof xl?s.data.children:s.data),r=new hs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof dr)return this.visitMany(t.data),this;const{type:n}=t;if(!gn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(gn.isUnion(n))this.nodes.push(new iy(r,0));else{const{nullCount:i}=t;gn.isNull(n)||Yf.call(this,i<=0?new Uint8Array(0):Q3(t.offset,r,t.nullBitmap)),this.nodes.push(new iy(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Yf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new hh(this._byteLength,t)),this._byteLength+=t,this}function kCt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Yf.call(this,i),n.mode===Zu.Sparse)return dV.call(this,e);if(n.mode===Zu.Dense){if(e.offset<=0)return Yf.call(this,s),dV.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Yf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function RCt(e){let t;return e.nullCount>=e.length?Yf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Yf.call(this,Q3(e.offset,e.length,t)):Yf.call(this,Eke(e.values))}function cg(e){return Yf.call(this,e.values.subarray(0,e.length*e.stride))}function pRe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Yf.call(this,gIe(-i,t+1,r)),Yf.call(this,n.subarray(i,i+o)),this}function eJ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Yf.call(this,gIe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function dV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}hs.prototype.visitBool=RCt;hs.prototype.visitInt=cg;hs.prototype.visitFloat=cg;hs.prototype.visitUtf8=pRe;hs.prototype.visitBinary=pRe;hs.prototype.visitFixedSizeBinary=cg;hs.prototype.visitDate=cg;hs.prototype.visitTimestamp=cg;hs.prototype.visitTime=cg;hs.prototype.visitDecimal=cg;hs.prototype.visitList=eJ;hs.prototype.visitStruct=dV;hs.prototype.visitUnion=kCt;hs.prototype.visitInterval=cg;hs.prototype.visitDuration=cg;hs.prototype.visitFixedSizeList=eJ;hs.prototype.visitMap=eJ;class mRe extends jke{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new y9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Vy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return l4(t)?t.then(n=>this.writeAll(n)):c4(t)?iJ(this,t):rJ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof y9?this._sink=t:(this._sink=new y9,t&&Mxt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Lxt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!uV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ru&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof xl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!uV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof xl?t instanceof nCt||this._writeRecordBatch(t):t instanceof Ru?this.writeAll(t.batches):hQ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=uh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Zs.RecordBatch?this._recordBatchBlocks.push(new ny(a,t.bodyLength,this._position)):t.headerType===Zs.DictionaryBatch&&this._dictionaryBlocks.push(new ny(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Or(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(uh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(ZQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=hs.assemble(t),o=new Bl(t.numRows,r,i),a=uh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=hs.assemble(new dr([t])),u=new Bl(t.length,s,o),l=new qh(u,n,r),c=uh.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class tJ extends mRe{static writeAll(t,n){const r=new tJ(n);return l4(t)?t.then(i=>r.writeAll(i)):c4(t)?iJ(r,t):rJ(r,t)}}class nJ extends mRe{static writeAll(t){const n=new nJ;return l4(t)?t.then(r=>n.writeAll(r)):c4(t)?iJ(n,t):rJ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=aV.encode(new aV(t,Ga.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function rJ(e,t){let n=t;t instanceof Ru&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function iJ(e,t){var n,r,i,s,o,a,u;return Gp(this,void 0,void 0,function*(){try{for(n=!0,r=JC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function NCt(e,t="stream"){return(t==="stream"?tJ:nJ).writeAll(e).toUint8Array(!0)}function sJ(e,t=1){return(e*t+63&-64||64)/t}function sy(e,t,n=e.BYTES_PER_ELEMENT){return new e(sJ(t,n))}function oJ(e){return e instanceof Pr?e:new Pr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function PCt(e){return new dr([oJ(e)])}const aJ=new TextEncoder;function OCt(e,t,n){const r=aJ.encode(n);return e.set(r,t),r.length}function DCt(e,t,n){return aJ.encodeInto(n,e.subarray(t)).written}const $Ct=aJ.encodeInto?DCt:OCt;function ude(e,t){const n=sy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function MCt(e,t){const n=sy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function LCt(e,t){const n=sy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function FCt(e,t){const n=sy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function jCt(e){const t=o$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function BCt(e,t,n){const r=sy(Int32Array,t+1),i=sy(Uint8Array,3*n);let s=0;return{set(o,a){s+=$Ct(i,s,o),r[a+1]=s},data:()=>{const o=sJ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function UCt(e,t){const n=[],r=sy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:zCt(e.dictionary,n,o)})}}function zCt(e,t,n){const r=BCt(e,t.length,n);return t.forEach(r.set),PCt(r.data())}function VCt(e,t){const n=sy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function HCt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?ude:null;break;case re.Float:r=e.precision>0?ude:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?UCt:null;break;case re.Bool:r=MCt;break;case re.Date:r=e.unit?FCt:LCt;break}return r==null?jCt(e):n?VCt(r(e,t),t):r(e,t)}function qCt(e,t){const n=e.length,r=sJ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),oJ({type:t,length:n,buffers:[null,i]})}function gRe(e,t,n,r,i=!0){const s=HCt(r,e,i);return t(n,s.set),oJ(s.data())}function uJ(e){if(e instanceof gn||e==null)return e;switch(e){case re.Binary:return new OA;case re.Bool:return new DA;case re.DateDay:return new Jxt;case re.DateMillisecond:case re.Date:return new Zxt;case re.Dictionary:return new ey(new zE,new J0);case re.Float16:return new FIe;case re.Float32:return new xQ;case re.Float64:case re.Float:return new SQ;case re.Int8:return new gQ;case re.Int16:return new yQ;case re.Int32:case re.Int:return new J0;case re.Int64:return new vQ;case re.IntervalDayTime:return new iSt;case re.Interval:case re.IntervalYearMonth:return new sSt;case re.Null:return new jm;case re.TimeMicrosecond:return new nSt;case re.TimeMillisecond:case re.Time:return new tSt;case re.TimeNanosecond:return new rSt;case re.TimeSecond:return new eSt;case re.Uint8:return new bQ;case re.Uint16:return new _Q;case re.Uint32:return new wQ;case re.Uint64:return new EQ;case re.Utf8:return new zE;default:Tn(`Unsupported type code: ${Bh(e)}. Use a data type constructor instead?`)}}function WCt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function yRe(e,t){const n=hV();return e(t,n.add),n}function hV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Fm(t))++e.dates,WCt(t)&&++e.utcdays;else if(c1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=hV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=hV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return uJ(GCt(e))}};return e}function GCt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:Tn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:Tn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Br.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new WE(e.minlen,n):new qE(n)}else if(e.structs===t){const n=e.struct_prof;return new ma(Object.keys(n).map(r=>Br.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;Tn("Type inference failure")}}}}function YCt(e,t,n,r,i,s=!0){if(i=uJ(i),!i){const o=yRe(r,t);s=o.nulls>0,i=o.type()}return gRe(n,r,t,i,s)}function KCt(e,t,n,r,i,s=!0){i=uJ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=XCt(o);if(u&&a&&lde(u.type,i))return u;const l=o.data;if(mk(l)){const c=QCt(l);if(a&&c&&lde(c,i))return qCt(l,c);i=i||c,s=!1}if(!i){const c=yRe(r,o);s=c.nulls>0,i=c.type()}return gRe(n,r,o,i,s)}function XCt(e){return e instanceof dr?e:e.vector instanceof dr?e.vector:null}function QCt(e){const n={Float32Array:xQ,Float64Array:SQ,Int8Array:gQ,Int16Array:yQ,Int32Array:J0,Uint8Array:bQ,Uint16Array:_Q,Uint32Array:wQ,BigInt64Array:vQ,BigUint64Array:EQ}[e.constructor.name];return n?new n:null}function lde(e,t){return!e||!t?!0:e.compareTo(t)}function JCt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function ZCt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&c1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const e2t=()=>Tn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function t2t(){try{return Ru}catch{e2t()}}function vRe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=n2t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Tn("Column length mismatch"),a[l]=c});const u=t2t();return new u(a)}function n2t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=bi(n)?n(e):fr(n)?n:null;if(fr(e))return{dataFrom:YCt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:JCt(e,r,i)};if(r2t(e))return{dataFrom:KCt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:ZCt(e,r,i)};Tn("Unsupported input data type")}function r2t(e){return e&&bi(e.reify)}function i2t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return NCt(vRe(e,r),n)}function s2t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function o2t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Fm(u))++i,s2t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function b4(e,t){return bi(t)?t(e):t||e.columnNames()}function bRe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=o2t(a2t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function a2t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function lJ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function u2t(e,t={}){const n=b4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Fm(l)?a4(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return lJ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function _Re(e,t={}){if(bi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Fm(e))return t.utc?a4(e):zAe(e);{const r=JSON.stringify(e,(s,o)=>mk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function _4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function l2t(e,t={}){const n=b4(e,t.columns),{align:r,format:i}=bRe(e,n,t),s=c2t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(_Re(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return lJ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function c2t(e){return _4(e.style,t=>bi(t)?t:()=>t)}function f2t(e,t=!0,n=!1){return e===void 0||e?t:n}const d2t=e=>Fm(e)?a4(e,!0):e;function h2t(e,t={}){const n=f2t(t.schema),r=t.format||{},i=b4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||d2t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function p2t(e,t={}){const n=b4(e,t.columns),{align:r,format:i}=bRe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return lJ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(_Re(u,i[l]))+"|"}}),a+`
`}function wRe(e,t){for(const[n,r]of u4(t))e.set(n,r);return e}function m2t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Um(e,t,n=new Map){return t=su(t)?e.columnName(t):t,qo(t)?n.set(t,t):fr(t)?t.forEach(r=>Um(e,r,n)):bi(t)?Um(e,t(e),n):Ta(t)?wRe(n,t):Tn(`Invalid column selection: ${Bh(t)}`),n}function w4(e,t){return e.toObject=t,e}function ERe(e){return fr(e)?e.map(ERe):e&&e.toObject?e.toObject():e}function KE(){return w4(e=>e.columnNames(),()=>({all:[]}))}function xRe(...e){return e=e.flat(),w4(t=>{const n=Um(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:ERe(e)}))}function g2t(e,t){return w4(n=>{let r=su(e)?e:n.columnIndex(e),i=su(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function y2t(e){return qo(e)&&(e=RegExp(m2t(e))),w4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function v2t(e){return mk(e.data)?e.data.constructor:Array}class lh extends $Et{static from(t,n){return new lh(FEt(t,n),n)}static new(t,n){if(t instanceof lh)return t;const r={},i=[];for(const[s,o]of u4(t))r[s]=o,i.push(s);return new lh(r,n||i)}constructor(t,n,r,i,s,o){_4(t,LEt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new lh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:hxt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Jl(r).groupby(r.groups());return t.forEach(s=>{s=lh.new(s),s.numRows()!==n&&Tn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Tn(`Unrecognized column: ${t}`)}object(t=0){return cde(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Um(this,t.columns||KE()),o=hIe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),mxt(this,u,a,n)}return a}*[Symbol.iterator](){const t=cde(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(v2t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=pxt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return vRe(this,t)}toArrowBuffer(t){return i2t(this,t)}toCSV(t){return u2t(this,t)}toHTML(t){return l2t(this,t)}toJSON(t){return h2t(this,t)}toMarkdown(t){return p2t(this,t)}}function cde(e){let t=e._builder;if(!t){const n=hIe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class b2t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=_2t[e.type];s&&s(e,t,n)}const FN=(e,t,n)=>{er(e.argument,t,n,e)},_9=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},fde=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},w9=(e,t,n)=>{qd(e.params,t,n,e),er(e.body,t,n,e)},dde=(e,t,n)=>{er(e.callee,t,n,e),qd(e.arguments,t,n,e)},qd=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},_2t={TemplateLiteral:(e,t,n)=>{qd(e.expressions,t,n,e),qd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:dde,NewExpression:dde,ArrayExpression:(e,t,n)=>{qd(e.elements,t,n,e)},AssignmentExpression:_9,AwaitExpression:FN,BinaryExpression:_9,LogicalExpression:_9,UnaryExpression:FN,UpdateExpression:FN,ConditionalExpression:fde,ObjectExpression:(e,t,n)=>{qd(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:w9,FunctionExpression:w9,FunctionDeclaration:w9,VariableDeclaration:(e,t,n)=>{qd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{qd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:fde,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),qd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),qd(e.consequent,t,n,e)},ReturnStatement:FN,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function SRe(e){delete e.start,delete e.end,delete e.optional}function hde(e){SRe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function w2t(e){return er(e,null,{Column:hde,Constant:hde,Default:SRe}),e}function Ns(e,t){return t&&t.type===e}function E2t(e){return Ns(vxt,e)||Ns(yxt,e)}function x2t(e){return bi(e)?e:()=>e}const S2t="Escaped functions are not valid as rollup or pivot values.";function T2t(e,t,n){e.aggronly&&Tn(S2t);const r="(row,data)=>fn("+dIe(e.table.columnNames())+",$)";return{escape:fQ.escape(r,x2t(t.expr),n)}}var C2t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],TRe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],A2t="-----------------------------------------------------------------------------------------------------------------------------------------------------",CRe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",E9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},x9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",I2t={5:x9,"5module":x9+" export import",6:x9+" const class extends export import super"},k2t=/^in(stanceof)?$/,R2t=new RegExp("["+CRe+"]"),N2t=new RegExp("["+CRe+A2t+"]");function pV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function zm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&R2t.test(String.fromCharCode(e)):t===!1?!1:pV(e,TRe)}function XE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&N2t.test(String.fromCharCode(e)):t===!1?!1:pV(e,TRe)||pV(e,C2t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function nc(e,t){return new or(e,{beforeExpr:!0,binop:t})}var rc={beforeExpr:!0},bu={startsExpr:!0},cJ={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,cJ[e]=new or(e,t)}var K={num:new or("num",bu),regexp:new or("regexp",bu),string:new or("string",bu),name:new or("name",bu),privateId:new or("privateId",bu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",rc),semi:new or(";",rc),colon:new or(":",rc),dot:new or("."),question:new or("?",rc),questionDot:new or("?."),arrow:new or("=>",rc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",rc),backQuote:new or("`",bu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:nc("||",1),logicalAND:nc("&&",2),bitwiseOR:nc("|",3),bitwiseXOR:nc("^",4),bitwiseAND:nc("&",5),equality:nc("==/!=/===/!==",6),relational:nc("</>/<=/>=",7),bitShift:nc("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:nc("%",10),star:nc("*",10),slash:nc("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:nc("??",1),_break:Wn("break"),_case:Wn("case",rc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",rc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",rc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",bu),_if:Wn("if"),_return:Wn("return",rc),_switch:Wn("switch"),_throw:Wn("throw",rc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",bu),_super:Wn("super",bu),_class:Wn("class",bu),_extends:Wn("extends",rc),_export:Wn("export"),_import:Wn("import",bu),_null:Wn("null",bu),_true:Wn("true",bu),_false:Wn("false",bu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},nf=/\r\n?|\n|\u2028|\u2029/,P2t=new RegExp(nf.source,"g");function gS(e){return e===10||e===13||e===8232||e===8233}function ARe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(gS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var IRe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,pc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,kRe=Object.prototype,O2t=kRe.hasOwnProperty,D2t=kRe.toString,Ek=Object.hasOwn||function(e,t){return O2t.call(e,t)},pde=Array.isArray||function(e){return D2t.call(e)==="[object Array]"},mde=Object.create(null);function u0(e){return mde[e]||(mde[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function oy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var $2t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,LA=function(t,n){this.line=t,this.column=n};LA.prototype.offset=function(t){return new LA(this.line,this.column+t)};var E4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function RRe(e,t){for(var n=1,r=0;;){var i=ARe(e,r,t);if(i<0)return new LA(n,t-r);++n,r=i}}var mV={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},gde=!1;function M2t(e){var t={};for(var n in mV)t[n]=e&&Ek(e,n)?e[n]:mV[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!gde&&typeof console=="object"&&console.warn&&(gde=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),pde(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return pde(t.onComment)&&(t.onComment=L2t(t,t.onComment)),t}function L2t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new E4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var FA=1,yS=2,fJ=4,NRe=8,PRe=16,ORe=32,dJ=64,DRe=128,xk=256,hJ=FA|yS|xk;function pJ(e,t){return yS|(e?fJ:0)|(t?NRe:0)}var c$=0,mJ=1,fg=2,$Re=3,MRe=4,LRe=5,Bs=function(t,n,r){this.options=t=M2t(t),this.sourceFile=t.sourceFile,this.keywords=u0(I2t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=E9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=u0(i);var s=(i?i+" ":"")+E9.strict;this.reservedWordsStrict=u0(s),this.reservedWordsStrictBind=u0(s+" "+E9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(nf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(FA),this.regexpState=null,this.privateNameStack=[]},cp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Bs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};cp.inFunction.get=function(){return(this.currentVarScope().flags&yS)>0};cp.inGenerator.get=function(){return(this.currentVarScope().flags&NRe)>0&&!this.currentVarScope().inClassFieldInit};cp.inAsync.get=function(){return(this.currentVarScope().flags&fJ)>0&&!this.currentVarScope().inClassFieldInit};cp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&xk)return!1;if(t.flags&yS)return(t.flags&fJ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};cp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&dJ)>0||n||this.options.allowSuperOutsideMethod};cp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&DRe)>0};cp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};cp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(yS|xk))>0||n};cp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&xk)>0};Bs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Bs.parse=function(t,n){return new this(n,t).parse()};Bs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Bs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Bs.prototype,cp);var du=Bs.prototype,F2t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;du.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){pc.lastIndex=e,e+=pc.exec(this.input)[0].length;var t=F2t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){pc.lastIndex=e+t[0].length;var n=pc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||nf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,pc.lastIndex=e,e+=pc.exec(this.input)[0].length,this.input[e]===";"&&e++}};du.eat=function(e){return this.type===e?(this.next(),!0):!1};du.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};du.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};du.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};du.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||nf.test(this.input.slice(this.lastTokEnd,this.start))};du.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};du.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};du.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};du.expect=function(e){this.eat(e)||this.unexpected()};du.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var x4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};du.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};du.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};du.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};du.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Dt=Bs.prototype;Dt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var gJ={kind:"loop"},j2t={kind:"switch"};Dt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;pc.lastIndex=this.pos;var t=pc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(zm(r,!0)){for(var i=n+1;XE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!k2t.test(s))return!0}return!1};Dt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;pc.lastIndex=this.pos;var e=pc.exec(this.input),t=this.pos+e[0].length,n;return!nf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(XE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Dt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){pc.lastIndex=this.pos;var o=pc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Dt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Dt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Dt.parseDoStatement=function(e){return this.next(),this.labels.push(gJ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Dt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(gJ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new x4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Dt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,E2|(n?0:gV),!1,t)};Dt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Dt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Dt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(j2t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Dt.parseThrowStatement=function(e){return this.next(),nf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var B2t=[];Dt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?ORe:0),this.checkLValPattern(e,t?MRe:fg),this.expect(K.parenR),e};Dt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Dt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Dt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(gJ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Dt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Dt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Dt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Dt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Dt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Dt.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Dt.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Dt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Dt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?mJ:fg,!1)};var E2=1,gV=2,FRe=4;Dt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&gV&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&E2&&(e.id=t&FRe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&gV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?mJ:fg:$Re));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(pJ(e.async,e.generator)),t&E2||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&E2?"FunctionDeclaration":"FunctionExpression")};Dt.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Dt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&U2t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Dt.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&f$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Dt.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Dt.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Dt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&f$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Dt.parseClassField=function(e){if(f$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&f$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Dt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(xk|dJ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Dt.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,fg,!1)):(t===!0&&this.unexpected(),e.id=null)};Dt.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Dt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Dt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];Ek(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function U2t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function f$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Dt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Dt.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Dt.parseExportDeclaration=function(e){return this.parseStatement(null)};Dt.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,E2|FRe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Dt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Ek(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Dt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Dt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Dt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Dt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Dt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Dt.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=B2t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Dt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,fg),this.finishNode(e,"ImportSpecifier")};Dt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,fg),this.finishNode(e,"ImportDefaultSpecifier")};Dt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,fg),this.finishNode(e,"ImportNamespaceSpecifier")};Dt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Dt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return $2t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Dt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Dt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var rf=Bs.prototype;rf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};rf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};rf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};rf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};rf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};rf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};rf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};rf.parseBindingListItem=function(e){return e};rf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};rf.checkLValSimple=function(e,t,n){t===void 0&&(t=c$);var r=t!==c$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===fg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Ek(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==LRe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};rf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=c$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};rf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=c$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var mf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ai={b_stat:new mf("{",!1),b_expr:new mf("{",!0),b_tmpl:new mf("${",!1),p_stat:new mf("(",!1),p_expr:new mf("(",!0),q_tmpl:new mf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new mf("function",!1),f_expr:new mf("function",!0),f_expr_gen:new mf("function",!0,!1,null,!0),f_gen:new mf("function",!1,!1,null,!0)},vS=Bs.prototype;vS.initialContext=function(){return[Ai.b_stat]};vS.curContext=function(){return this.context[this.context.length-1]};vS.braceIsBlock=function(e){var t=this.curContext();return t===Ai.f_expr||t===Ai.f_stat?!0:e===K.colon&&(t===Ai.b_stat||t===Ai.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?nf.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ai.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};vS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};vS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};vS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ai.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ai.b_stat:Ai.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ai.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ai.p_stat:Ai.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ai.p_stat)&&!(e===K._return&&nf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ai.b_stat)?this.context.push(Ai.f_expr):this.context.push(Ai.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ai.q_tmpl?this.context.pop():this.context.push(Ai.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ai.f_expr?this.context[t]=Ai.f_expr_gen:this.context[t]=Ai.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=Bs.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new x4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&jRe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function jRe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&jRe(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new x4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ai.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ai.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new x4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var z2t=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=z2t,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!nf.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(pJ(t,r.generator)|dJ|(n?DRe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(pJ(n,!1)|PRe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,LRe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,mJ,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var d$=Bs.prototype;d$.raise=function(e,t){var n=RRe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};d$.raiseRecoverable=d$.raise;d$.curPosition=function(){if(this.options.locations)return new LA(this.curLine,this.pos-this.lineStart)};var Wy=Bs.prototype,V2t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Wy.enterScope=function(e){this.scopeStack.push(new V2t(e))};Wy.exitScope=function(){this.scopeStack.pop()};Wy.treatFunctionsAsVarInScope=function(e){return e.flags&yS||!this.inModule&&e.flags&FA};Wy.declareName=function(e,t,n){var r=!1;if(t===fg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&FA&&delete this.undefinedExports[e]}else if(t===MRe){var s=this.currentScope();s.lexical.push(e)}else if(t===$Re){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&ORe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&FA&&delete this.undefinedExports[e],u.flags&hJ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Wy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Wy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Wy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&hJ)return t}};Wy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&hJ&&!(t.flags&PRe))return t}};var S4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new E4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Sk=Bs.prototype;Sk.startNode=function(){return new S4(this,this.start,this.startLoc)};Sk.startNodeAt=function(e,t){return new S4(this,e,t)};function BRe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Sk.finishNode=function(e,t){return BRe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Sk.finishNodeAt=function(e,t,n,r){return BRe.call(this,e,t,n,r)};Sk.copyNode=function(e){var t=new S4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var URe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",zRe=URe+" Extended_Pictographic",VRe=zRe,HRe=VRe+" EBase EComp EMod EPres ExtPict",qRe=HRe,H2t=qRe,q2t={9:URe,10:zRe,11:VRe,12:HRe,13:qRe,14:H2t},W2t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",G2t={9:"",10:"",11:"",12:"",13:"",14:W2t},yde="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",WRe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",GRe=WRe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",YRe=GRe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",KRe=YRe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",XRe=KRe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Y2t=XRe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",K2t={9:WRe,10:GRe,11:YRe,12:KRe,13:XRe,14:Y2t},QRe={};function X2t(e){var t=QRe[e]={binary:u0(q2t[e]+" "+yde),binaryOfStrings:u0(G2t[e]),nonBinary:{General_Category:u0(yde),Script:u0(K2t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var S9=0,vde=[9,10,11,12,13,14];S9<vde.length;S9+=1){var Q2t=vde[S9];X2t(Q2t)}var Ct=Bs.prototype,fp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=QRe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};fp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};fp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};fp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};fp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};fp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};fp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};fp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};fp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};fp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return JRe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function JRe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!JRe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=oy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=oy(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),J2t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function J2t(e){return zm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Z2t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Z2t(e){return XE(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!T4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return ZRe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function ZRe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&eAt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function eAt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var eNe=0,Vm=1,yc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(tAt(t))return e.lastIntValue=-1,e.advance(),Vm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===yc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return eNe};function tAt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Vm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return eNe};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Ek(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Vm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return yc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";tNe(t=e.current());)e.lastStringValue+=oy(t),e.advance();return e.lastStringValue!==""};function tNe(e){return ZRe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";nAt(t=e.current());)e.lastStringValue+=oy(t),e.advance();return e.lastStringValue!==""};function nAt(e){return tNe(e)||T4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===yc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Vm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Vm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||iNe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Vm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===yc&&(t=yc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==yc&&(t=Vm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===yc&&(t=yc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Vm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===yc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===yc&&(t=yc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Vm:yc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&rAt(n)||iAt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function rAt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function iAt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return sAt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function sAt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return T4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;T4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function T4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;nNe(n=e.current());)e.lastIntValue=16*e.lastIntValue+rNe(n),e.advance();return e.pos!==t};function nNe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function rNe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return iNe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function iNe(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!nNe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+rNe(i),e.advance()}return!0};var yJ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new E4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Hn=Bs.prototype;Hn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new yJ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Hn.getToken=function(){return this.next(),new yJ(this)};typeof Symbol<"u"&&(Hn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Hn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Hn.readToken=function(e){return zm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Hn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Hn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=ARe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Hn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!gS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Hn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&IRe.test(String.fromCharCode(e)))++this.pos;else break e}}};Hn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Hn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Hn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Hn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Hn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Hn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Hn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||nf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Hn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Hn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Hn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Hn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),zm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+oy(t)+"'")};Hn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+oy(e)+"'")};Hn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Hn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(nf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new fp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Hn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function oAt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function sNe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Hn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=sNe(this.input.slice(t,this.pos)),++this.pos):zm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Hn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=sNe(this.input.slice(t,this.pos));return++this.pos,zm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),zm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=oAt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Hn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Hn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(gS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var oNe={};Hn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===oNe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Hn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw oNe;this.raise(e,t)};Hn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(gS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Hn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Hn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return oy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return gS(t)?"":String.fromCharCode(t)}};Hn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Hn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(XE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?zm:XE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=oy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Hn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=cJ[e]),this.finishToken(t,e)};var aAt="8.11.3";Bs.acorn={Parser:Bs,version:aAt,defaultOptions:mV,Position:LA,SourceLocation:E4,getLineInfo:RRe,Node:S4,TokenType:or,tokTypes:K,keywordTypes:cJ,TokContext:mf,tokContexts:Ai,isIdentifierChar:XE,isIdentifierStart:zm,Token:yJ,isNewLine:gS,lineBreak:nf,lineBreakG:P2t,nonASCIIwhitespace:IRe};function uAt(e,t){return Bs.parse(e,t)}const vJ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},lAt={ecmaVersion:11},bde="$",cAt="d",fAt="d1",dAt="d2",So=e=>(t,n)=>n.error(t,e+" not allowed"),hAt=So("Aggregate function"),pAt=So("Window function"),mAt="Invalid argument",bJ="Invalid column reference",gAt=bJ+" (must be input to an aggregate function)",aNe="Invalid function call",yAt="Invalid member expression",vAt="Invalid operator parameter",bAt="Invalid param reference",_At="Invalid variable reference",wAt="Variable not accessible in operator call",EAt="Unsupported variable declaration",xAt="Unsupported destructuring pattern",uNe="Table expressions do not support closures",lNe="Use aq.escape(fn) to use a function as-is (including closures)",SAt="use table.params({ name: value }) to define dynamic parameters",TAt="use aq.addFunction(name, fn) to add new op functions",CAt=`
Note: ${uNe}. ${lNe}, or ${SAt}.`,cNe=`
Note: ${uNe}. ${lNe}, or ${TAt}.`,AAt=`The ${cIe} method is not valid in multi-table expressions.`;function IAt(e,t){const n=kAt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,E2t(r)?(NAt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=fAt),e.scope.add(e.tuple2=dAt),e.scope.add(e.$param=bde)):(e.scope.add(e.tuple=cAt),e.scope.add(e.$param=bde)),er(r,e,_J),e.root}function kAt(e){try{const t=e.field?RAt(e):fr(e)?Bh(e):e;return uAt(`expr=(${t})`,lAt).body[0].expression.right}catch{Tn(`Expression parse error: ${e+""}`)}}function RAt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const _J={FunctionDeclaration:So("Function definitions"),ForStatement:So("For loops"),ForOfStatement:So("For-of loops"),ForInStatement:So("For-in loops"),WhileStatement:So("While loops"),DoWhileStatement:So("Do-while loops"),AwaitExpression:So("Await expressions"),ArrowFunctionExpression:So("Function definitions"),AssignmentExpression:So("Assignments"),FunctionExpression:So("Function definitions"),NewExpression:So('Use of "new"'),UpdateExpression:So("Update expressions"),VariableDeclarator(e,t){bV(e.id,t)},Identifier(e,t,n){hNe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,_At,CAt)},CallExpression(e,t){const n=fNe(e.callee),r=aIe(n)||uIe(n);if(r){if((t.join||t.aggregate===!1)&&lQ(n)&&hAt(e,t),(t.join||t.window===!1)&&cQ(n)&&pAt(e,t),t.$op=1,t.ast)vV(e,n,t),e.arguments.forEach(i=>er(i,t,yV));else{const i=t.op(PAt(t,r,n,e.arguments));Object.assign(e,{type:nIe,name:i.id})}return t.$op=0,!1}else oIe(n)?vV(e,n,t):t.error(e,aNe,cNe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ns(N0,r))return;const{name:s}=r;if(dNe(e)&&Ns(N0,i)&&id(vJ,i.name)){gNe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return _de(e,o,t,pNe,n);if(s===t.$param)return _de(e,o,t,DAt);t.paramsRef.has(s)?jA(e,t.paramsRef.get(s)):t.columnRef.has(s)?mNe(r,s,t,e):id(t.params,s)&&jA(r,s)}};function _de(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ns(fS,s))a=s.value;else try{er(s,n,_J,e),a=n.param(s)}catch{n.error(e,yAt)}return r(e,a,t,n,i),!1}const yV={..._J,VariableDeclarator:So("Variable declaration in operator call"),Identifier(e,t,n){hNe(e,t,n)&&t.error(e,wAt)},CallExpression(e,t){const n=fNe(e.callee);oIe(n)?vV(e,n,t):t.error(e,aNe,cNe)}};function NAt(e,t){e.generator&&So("Generator functions")(e,t),e.async&&So("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(CT(t,n[0],"tuple1",i(1)),r>1&&CT(t,n[1],"tuple2",i(2)),r>2&&CT(t,n[2],"$param",s)):(CT(t,n[0],"tuple",i(0)),r>1&&CT(t,n[1],"$param",s))),t.root=e.body}function CT(e,t,n,r){Ns(N0,t)?(e.scope.add(t.name),e[n]=t.name):Ns(eIe,t)&&t.properties.forEach(i=>{const s=Ns(N0,i.key)?i.key.name:Ns(fS,i.key)?i.key.value:e.error(i,mAt);Ns(N0,i.value)||e.error(i.value,xAt),r(i.value.name,s)})}function PAt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,yV),i.push(e.field(u))):l<a?(er(u,e,yV),s.push(e.param(u))):e.error(u,vAt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function fNe(e){return Ns(N0,e)?e.name:Ns(ZAe,e)?dNe(e)?OAt(e.property.name):e.property.name:null}function dNe(e){return Ns(N0,e.object)&&e.object.name==="Math"}function OAt(e){return e==="max"?"greatest":e==="min"?"least":e}function hNe(e,t,n){const{name:r}=e;if(!(Ns(ZAe,n)&&n.property===e)){if(!(Ns(tIe,n)&&n.key===e))if(t.paramsRef.has(r))jA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))mNe(e,r,t,n);else if(id(t.params,r))jA(e,r);else if(id(vJ,r))gNe(e,r);else return!0}}function pNe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,bJ),r.aggronly&&!r.$op&&r.error(e,gAt),lIe(e,t,n,o,i)}function mNe(e,t,n,r){const[i,s]=n.columnRef.get(t);pNe(e,i,s,n,r)}function DAt(e,t,n,r){r.params&&!id(r.params,t)&&r.error(e,bAt),jA(e,t)}function jA(e,t){e.type=xxt,e.name=t}function gNe(e,t){e.type=_xt,e.name=t,e.raw=vJ[t]}function vV(e,t,n){if(t===cIe){const r=n.table;r||n.error(e,AAt),fIe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=su(s)?r.columnName(s):s;return r.column(o)||n.error(i,bJ),o}):r.columnNames())}else e.callee={type:Ext,name:t}}function bV(e,t){Ns(N0,e)?t.scope.add(e.name):Ns(gxt,e)?e.elements.forEach(n=>bV(n,t)):Ns(eIe,e)?e.properties.forEach(n=>bV(n.value,t)):t.error(e.id,EAt)}const $At={[gk]:1,[nIe]:1};function tl(e,t={}){const n=t.generate||H3,r=t.compiler||fQ,i=LAt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=MAt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ns(fS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?w2t(g):f(n(g),i));u.push(y),$At[g.type]&&y!==g&&Ta(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Tn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of u4(e))d.value(m+"",g.escape?T2t(d,g,i):IAt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function MAt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function LAt(e){return(e.table?T9(e.table):e.join?{...T9(e.join[1]),...T9(e.join[0])}:{})||{}}function T9(e){return e&&bi(e.params)?e.params():{}}const yNe="Expr",gf="ExprList",vNe="ExprNumber",_C="ExprObject",yw="JoinKeys",h$="JoinValues",ac="Options",wJ="OrderKeys",Og="SelectionList",Wv="TableRef",vw="TableRefList",FAt="Descending",jAt="Query",BAt="Selection",UAt="Verb",zAt="Window";function C4(e,t){return e&&e.expr?new wde({...e,...t}):new wde(t,e)}class wde{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...bi(this.expr)?{func:!0}:{}}}}function VAt(e){return C4(e,{desc:!0})}function nb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return C4(e,t?{expr:t,...r}:r)}function HAt(e,t,n){return C4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function qAt(e){const t=n=>n;return t.toString=()=>e,t}function Ede(e,t){return t=t&&bi(t.query)?t.query():t,t&&bi(t.evaluate)?t.evaluate(null,e):e(t)}function bNe(e){return Ta(e)&&(fr(e.all)||fr(e.matches)||fr(e.not)||fr(e.range))}function BA(e){return e&&bi(e.toObject)?e.toObject():bi(e)?{expr:String(e),func:!0}:fr(e)?e.map(BA):Ta(e)?_4(e,t=>BA(t)):e}function EJ(e){return fr(e)?e.map(EJ):Ta(e)?fr(e.verbs)?SJ.from(e):fr(e.all)?KE():fr(e.range)?g2t(...e.range):fr(e.match)?y2t(RegExp(...e.match)):fr(e.not)?xRe(e.not.map(BA)):WAt(e):e}function WAt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=nb(n):e.func===!0&&(t=n=qAt(n)),Ta(e.window)){const{frame:r,peers:i}=e.window;t=n=HAt(n,r,i)}e.desc===!0&&(t=VAt(n))}return e===t?_4(e,r=>EJ(r)):t}function GAt(e){return fr(e)?e.map(YAt):e}function YAt(e){const t=[];return Ju(e).forEach(n=>{su(n)?t.push(n):qo(n)?t.push(nb(n,null)):Ta(n)&&n.expr||bi(n)?t.push(n):Tn(`Invalid key value: ${n+""}`)}),t}function KAt(e){return fr(e)?e.map(XAt):e}function XAt(e,t){return t<2?Ju(e):e}function QAt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Ta(r)&&!bi(r))for(const i in r)t.push(r[i]);else n=su(r)?r:qo(r)?nb(n):bi(r)?n:Tn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const JAt={[yNe]:xNe,[gf]:QE,[vNe]:iIt,[_C]:ay,[yw]:sIt,[h$]:oIt,[wJ]:QE,[Og]:nIt};function ZAt(e,t,n){return t===Wv?xde(e):t===vw?e.map(xde):_Ne(BA(e),t,n)}function _Ne(e,t,n){return t===ac?e&&eIt(e,n):JAt[t](e)}function eIt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?_Ne(i,t[r]):i}return n}function tIt(e,t){return tl({expr:e},{...t,ast:!0}).exprs[0]}function xJ(e){return{type:gk,name:e}}function wNe(e){return{type:gk,index:e}}function ay(e,t){if(qo(e))return tIt(e,t);if(e.expr){let n;if(e.field===!0?n=xJ(e.expr):e.func===!0&&(n=ay(e.expr,t)),n)return e.desc&&(n={type:FAt,expr:n}),e.window&&(n={type:zAt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...ay(e[n],t),as:n}))}function ENe(e){const t=BAt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:QE(e.not)}:e.range?{type:t,operator:"range",arguments:QE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Tn("Invalid input")}function nIt(e){return Ju(e).map(rIt).flat()}function rIt(e){return bNe(e)?ENe(e):su(e)?wNe(e):qo(e)?xJ(e):Ta(e)?Object.keys(e).map(t=>({type:gk,name:t,as:e[t]})):Tn("Invalid input")}function xNe(e){return bNe(e)?ENe(e):su(e)?wNe(e):qo(e)?xJ(e):Ta(e)?ay(e):Tn("Invalid input")}function QE(e){return Ju(e).map(xNe).flat()}function iIt(e){return su(e)?e:ay(e)}function sIt(e){return fr(e)?e.map(QE):ay(e,{join:!0})}function oIt(e){return fr(e)?e.map((t,n)=>n<2?QE(t):ay(t,{join:!0})):ay(e,{join:!0})}function xde(e){return e&&bi(e.toAST)?e.toAST():e}class SNe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===yw?GAt(a):o===h$?KAt(a):o===wJ?QAt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=_V[t.verb],r=(n.schema||[]).map(({name:i})=>EJ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Wv?Ede(n,o):s===vw?o.map(a=>Ede(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=BA(this[n])}),t}toAST(){const t={type:UAt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=ZAt(this[n],r,i)}),t}}function jr(e,t){return Object.assign((...n)=>new SNe(e,t,n),{schema:t})}const _V={count:jr("count",[{name:"options",type:ac}]),derive:jr("derive",[{name:"values",type:_C},{name:"options",type:ac,props:{before:Og,after:Og}}]),filter:jr("filter",[{name:"criteria",type:_C}]),groupby:jr("groupby",[{name:"keys",type:gf}]),orderby:jr("orderby",[{name:"keys",type:wJ}]),relocate:jr("relocate",[{name:"columns",type:Og},{name:"options",type:ac,props:{before:Og,after:Og}}]),rename:jr("rename",[{name:"columns",type:Og}]),rollup:jr("rollup",[{name:"values",type:_C}]),sample:jr("sample",[{name:"size",type:vNe},{name:"options",type:ac,props:{weight:yNe}}]),select:jr("select",[{name:"columns",type:Og}]),ungroup:jr("ungroup"),unorder:jr("unorder"),reify:jr("reify"),dedupe:jr("dedupe",[{name:"keys",type:gf,default:[]}]),impute:jr("impute",[{name:"values",type:_C},{name:"options",type:ac,props:{expand:gf}}]),fold:jr("fold",[{name:"values",type:gf},{name:"options",type:ac}]),pivot:jr("pivot",[{name:"keys",type:gf},{name:"values",type:gf},{name:"options",type:ac}]),spread:jr("spread",[{name:"values",type:gf},{name:"options",type:ac}]),unroll:jr("unroll",[{name:"values",type:gf},{name:"options",type:ac,props:{drop:gf}}]),lookup:jr("lookup",[{name:"table",type:Wv},{name:"on",type:yw},{name:"values",type:gf}]),join:jr("join",[{name:"table",type:Wv},{name:"on",type:yw},{name:"values",type:h$},{name:"options",type:ac}]),cross:jr("cross",[{name:"table",type:Wv},{name:"values",type:h$},{name:"options",type:ac}]),semijoin:jr("semijoin",[{name:"table",type:Wv},{name:"on",type:yw}]),antijoin:jr("antijoin",[{name:"table",type:Wv},{name:"on",type:yw}]),concat:jr("concat",[{name:"tables",type:vw}]),union:jr("union",[{name:"tables",type:vw}]),intersect:jr("intersect",[{name:"tables",type:vw}]),except:jr("except",[{name:"tables",type:vw}])};let SJ=class TNe extends BAe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new TNe(t.map(SNe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Sde(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Sde(this,"toAST",{type:jAt})}};function Sde(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function aIt(e,t){return new SJ(e._verbs.concat(t),e._params,e._table)}for(const e in _V){const t=_V[e];SJ.prototype["__"+e]=function(n,...r){return aIt(n,t(...r))}}function bS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function uIt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function TJ(e,t){const n=Jl();return t.forEach((r,i)=>{const s=qo(r)?r:i;if(s){const o=e.column(i)||Tn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function CNe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Tn("relocate requires a before or after option."),i&&s&&Tn("relocate accepts only one of the before or after options."),t=Um(e,t);const o=[...Um(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),TJ(e,u)}function Tk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function CJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lIt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function cIt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function jN(e){return RA(e)?e:+e}function fIt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return jN(e[0]);if(t>=1)return jN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=jN(e[i]);return RA(s)?s:s+(jN(e[i+1])-s)*(r-i)}class dIt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:lIt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:cIt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(CJ)),fIt(this._sorted,t)}}const p$=(e,t,n)=>bS(t,"{"+Tk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function hIt(e,t){const{ops:n,output:r}=pIt(e,t),i=e[0].fields,s=i.length,o=s===0?AJ:s===1?mIt:s===2?gIt:Tn("Unsupported field count: "+s);return new o(i,n,r,t)}function pIt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=aIe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class AJ extends b2t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new dIt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class mIt extends AJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=p$(n,s,"add"),this._rem=p$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Lf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Lf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class gIt extends AJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=p$(n,s,"add"),this._rem=p$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Lf(i)&&Lf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Lf(i)&&Lf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Vb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=_S(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function _S(e,t,n){if(!t.length)return n;const r=ANe(t),i=e.groups(),s=i?i.size:1;return n=n||o4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=kNe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=INe(e,o);o.write(a,n,0)}),n}function ANe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(hIt(r[i],t));return n}function INe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function kNe(e,t,n){const{keys:r,size:i}=n,s=o4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function RNe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function NNe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Tde=NNe(CJ);function yIt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?bS(["w","r","k"],"{"+Tk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Tde.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Tde.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const C=i[x],E=a[x];for(let S=b;S<p.i0;++S)C.rem(E,s[S],e);for(let S=w;S<p.i1;++S)C.add(E,s[S],e);C.write(E,u,l)}return h(p,u,l),u}};return p}const vIt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),bIt=e=>!!e.peers;function _It(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=uIe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function wIt(e,t,n,r={},i){const s=e.data(),o=EIt(i,s),a=o.length,u=bS(["r","d","op"],"{"+Tk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=xIt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function EIt(e,t){const n={};return e.forEach(r=>{const i=vIt(r),s=bIt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});lQ(r.name)?a.push(r):u.push(_It(r))}),Object.values(n).map(r=>yIt(t,r.frame,r.peers,r.winOps,ANe(r.aggOps,r.frame[0]!=null?-1:1)))}function xIt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function SIt(e){return cQ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function IJ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Jl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=TIt(r),c=e.isGrouped()?e.groups().size:1,f=_S(e,u,o4(r.length,()=>Array(c)));return l.length?wIt(e,a,n,f,l):CIt(e,a,n,f),e.create(o)}function TIt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(SIt(s)?n:t).push(s)}return[t,n]}function CIt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function AIt(e,t,n={}){const r=IJ(e,tl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:CNe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function IIt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const BN=2147483648,kIt=4294967295;class PNe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&BN>>>t}set(t){this._bits[t>>5]|=BN>>>t}clear(t){this._bits[t>>5]&=~(BN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&kIt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=BN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function RIt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new PNe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function NIt(e,t){const n=tl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=IJ(e,n,{drop:!0}).column("p");r=s=>i[s]}return RIt(e,r)}function ONe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Vb(e,r,n),l=Jl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const x=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(x))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,x)=>{for(let C=0;C<g;++C)d[C].length=m+x,d[C].fill(f[C].get(w),m,m+x)},b=p?(w,x)=>{for(let C=0;C<x;++C)p[w+C]=C}:()=>{};if(y===1){const w=u[0],x=h[0];e.scan((C,E)=>{const S=Ju(w(C,E)),A=Math.min(S.length,s);v(C,A);for(let k=0;k<A;++k)x[m+k]=S[k];b(m,A),m+=A})}else e.scan((w,x)=>{let C=0;const E=u.map(S=>{const A=Ju(S(w,x));return C=Math.min(Math.max(C,A.length),s),A});v(w,C);for(let S=0;S<y;++S){const A=h[S],k=E[S];for(let R=0;R<C;++R)A[m+R]=k[R]}b(m,C),m+=C});return e.create(l.new())}function PIt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Vb(e,r,n);return ONe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function od(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=su(o)?t.columnName(o):o,qo(o)?i.set(o,nb(o)):bi(o)?Um(t,o).forEach(s):Ta(o)?wRe(i,o):Tn(`Invalid ${e} value: ${o+""}`)};return Ju(n).forEach(s),r.preparse&&r.preparse(i),tl(i,{table:t,...r})}function OIt(e,t,n){return PIt(e,od("fold",e,t),n)}function Cde(e,t,n,r){const i=n&&n.length;return DIt(i?$It(e,n,r):e,t,i)}function DIt(e,{names:t,exprs:n,ops:r},i){const s=Vb(e,r,n),o=i?null:Jl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Lf(p)?p:d(h)})}),i?e:e.create(o)}function $It(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=q3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Jl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=q3(o.map((p,m)=>g=>g[m])),h=bS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Ade(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Ade(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Ade(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function kJ(e,{names:t,exprs:n,ops:r}){const i=Jl(),s=e.groups();return s&&RNe(i,s),MIt(t,n,s,_S(e,r),i),e.create(i.new())}function MIt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function LIt(e,t,n={}){if(t=tl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Tn(`Invalid impute column ${Bh(r)}`)),n.expand){const r={preparse:FIt,aggronly:!0},i=od("impute",e,n.expand,r),s=kJ(e.ungroup(),i);return Cde(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Cde(e,t)}function FIt(e){e.forEach((t,n)=>t.field?e.set(n,KAe(t+"")):0)}function jIt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function DNe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function BIt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function UIt(e,t){const n=["i","a","j","b"];return bS(n,"{"+Tk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function zIt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Jl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=UIt(g,y);if((fr(n)?HIt:VIt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function VIt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function HIt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(C,E,S,A)=>e(S,A,C,E));const w=BIt(v,m,g),x=p.length;for(let C=0;C<x;++C){const E=p[C],S=w.get(d(E,f));if(S){const A=S.length;for(let k=0;k<A;++k){const R=S[k];b(E,f,v[R],m),y[R]=1}h[C]=1}}}function m$(e,t,n){const r=new Map;Ju(n).forEach((s,o)=>{s=su(s)?t.columnName(s):s,qo(s)?r.set(o,nb(s)):bi(s)||Ta(s)&&s.expr?r.set(o,s):Tn(`Invalid ${e} key value: ${s+""}`)});const i=tl(r,{table:t,aggregate:!1,window:!1});return q3(i.exprs,!0)}function qIt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function RJ(e,t,n){if(n)qo(n)?n=[n,n]:fr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=qIt(e.columnNames(),t.columnNames());r.length||Tn("Natural join requires shared column names."),n=[r,r]}return n}function $Ne(e,t,n,r){return n.length!==r.length&&Tn("Mismatched number of join keys"),[m$("join",e,n),m$("join",t,r)]}const WIt={aggregate:!1,window:!1},GIt={...WIt,index:1};function Ide(e,t,n,r,i={}){n=RJ(e,t,n);const s={join:[e,t]};let o;if(fr(n)){const[a,u]=n.map(Ju);o=$Ne(e,t,a,u),r||(r=YIt(e,a,u,i))}else o=tl({on:n},s).exprs[0],r||(r=[KE(),KE()]);return zIt(e,t,o,KIt(e,t,r,s,i&&i.suffix),i)}function YIt(e,t,n,r){const i=[];t.forEach((o,a)=>qo(o)&&o===n[a]?i.push(o):0);const s=xRe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Bh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,KE()]:[KE(),s]}function KIt(e,t,n,r,i=[]){if(fr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=od("join",e,n[0],r)),u--&&(o=od("join",t,n[1],GIt)),u--&&(a=tl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&kde(s.names,l,i[0]||"_1"),i[1]!==""&&kde(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return tl(n,r)}function kde(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function XIt(e,t,n,r={}){const i=new PNe(e.totalRows());return(fr(n)?QIt:JIt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function QIt(e,t,n,[r,i]){const s=DNe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function JIt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Rde(e,t,n,r){n=RJ(e,t,n);const i=fr(n)?$Ne(e,t,...n.map(Ju)):tl({on:n},{join:[e,t]}).exprs[0];return XIt(e,t,i,r)}function ZIt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Jl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=DNe(t,r),c=bS(["lr","rr","data"],"{"+Tk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Vb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function ekt(e,t,n,r){return n=RJ(e,t,n),ZIt(e,t,[m$("lookup",e,n[0]),m$("lookup",t,n[1])],od("lookup",t,r))}const wV=(e,t)=>e??t;function tkt(e,t,n,r={}){const{keys:i,keyColumn:s}=nkt(e,t,r),o=wV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>_S(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(rkt(n,a,e.groups(),u))}function nkt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=wV(n.sort,!0),s=wV(n.keySeparator,"_"),o=Vb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=_S(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function rkt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Jl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&RNe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function ikt(e,t,n,r){return tkt(e,od("fold",e,t),od("fold",e,n,{preparse:skt,aggronly:!0}),r)}function skt(e){e.forEach((t,n)=>t.field?e.set(n,WAe(t+"")):0)}function okt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),TJ(e,Um(e,t,n))}function Nde(e,t){return kJ(e,tl(t,{table:e,aggronly:!0,window:!1}))}function akt(e,t,n,r){return(t?r?lkt:ukt:r?fkt:ckt)(e.length,e,n,r)}function ukt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*cS()|0];return t}function lkt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=NNe(CJ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*cS())];return t}function ckt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*cS();s<e&&(t[s|0]=n[i])}return t}function fkt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(cS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function dkt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=cS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function hkt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):akt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&dkt(u),e.reify(u)}function pkt(e,t,n={}){return hkt(e,mkt(e,t),gkt(e,n.weight),n)}const MNe=e=>t=>e.get(t)||0;function mkt(e,t){return su(t)?()=>t:MNe(kJ(e,tl({size:t},{table:e,window:!1})).column("size"))}function gkt(e,t){return t==null?null:(t=su(t)?e.columnName(t):t,MNe(qo(t)?e.column(t):IJ(e,tl({w:t},{table:e}),{drop:!0}).column("w")))}function ykt(e,t){return TJ(e,Um(e,t))}function vkt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Vb(e,r,n),l=Jl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=bkt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function bkt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Ju(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function _kt(e,t,n){return vkt(e,od("spread",e,t),n)}function wkt(e,t){return e.concat(t).dedupe()}function Ekt(e,t,n){return ONe(e,od("unroll",e,t),n&&n.drop?{...n,drop:od("unroll",e,n.drop).names}:n)}function xkt(e,t){return e.create({groups:Skt(e,t)})}function Skt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Vb(e,r,n);const o=q3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Tkt(e,t){return xkt(e,od("groupby",e,t))}function Ckt(e,t){return e.create({order:t})}const Akt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Ikt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=tl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([H3(p,{index:"a",op:o}),H3(p,{index:"b",op:a})])},window:!1}),l=_S(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Akt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function kkt(e,t){return Ckt(e,Rkt(e,t))}function Rkt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Ta(o)&&!bi(o))for(const a in o)i(o[a]);else i(su(o)?nb(s,e.columnName(o)):qo(o)?nb(s):bi(o)?s:Tn(`Invalid orderby field: ${s+""}`))}),Ikt(e,r)}function Nkt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Jl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Pkt(e,t){const n=Jl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?kNe(e,t,r):[INe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Okt(e){return e.isGrouped()?e.create({groups:null}):e}function Dkt(e){return e.isOrdered()?e.create({order:null}):e}const $kt={__antijoin:(e,t,n)=>Rde(e,t,n,{anti:!0}),__count:(e,t={})=>Nde(e,{[t.as||"count"]:GAe()}),__cross:(e,t,n,r)=>Ide(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Nkt,__dedupe:uIt,__derive:AIt,__except:IIt,__filter:NIt,__fold:OIt,__impute:LIt,__intersect:jIt,__join:Ide,__lookup:ekt,__pivot:ikt,__relocate:CNe,__rename:okt,__rollup:Nde,__sample:pkt,__select:ykt,__semijoin:Rde,__spread:_kt,__union:wkt,__unroll:Ekt,__groupby:Tkt,__orderby:kkt,__ungroup:Okt,__unorder:Dkt,__reduce:Pkt};Object.assign(lh.prototype,$kt);function Mkt(e,t){return lh.new(e,t)}function NJ(e,t){return lh.from(e,t)}function UN(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,u=[r,i,s,o];let l=u.length;for(;l&&u[--l]==null;)u.pop();const c=u.length?", "+u.map(f=>f+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function Gv(e){return C4(e,{escape:!0,toString(){Tn("Escaped values can not be serialized.")}})}lh.prototype;function Lkt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let zN;const Fkt=new Uint8Array(16);function jkt(){if(!zN&&(zN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zN(Fkt)}const _o=[];for(let e=0;e<256;++e)_o.push((e+256).toString(16).slice(1));function Bkt(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}const Ukt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pde={randomUUID:Ukt};function Ode(e,t,n){if(Pde.randomUUID&&!t&&!e)return Pde.randomUUID();e=e||{};const r=e.random||(e.rng||jkt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Bkt(r)}class Th{static get(){let t=Ode();for(;this.ids.has(t);)t=Ode();return this.ids.set(t,!0),t}}Th.ids=new Map;function Kf(e){return"parent"in e}function zkt(e){return!Kf(e)}function Vkt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Th.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Th.get(),createdOn:Date.now(),val:r}]:[];return{id:Th.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Hkt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Th.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Th.get(),createdOn:Date.now(),val:s}]:[];return{id:Th.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Xi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Zkt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function rb(e){return!!e&&!!e[Ul]}function uy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===eRt}(e)||Array.isArray(e)||!!e[x2]||!!(!((t=e.constructor)===null||t===void 0)&&t[x2])||A4(e)||I4(e))}function JE(e,t,n){n===void 0&&(n=!1),ly(e)===0?(n?Object.keys:LJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function ly(e){var t=e[Ul];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:A4(e)?2:I4(e)?3:0}function UA(e,t){return ly(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vO(e,t){return ly(e)===2?e.get(t):e[t]}function LNe(e,t,n){var r=ly(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function qkt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function A4(e){return Qkt&&e instanceof Map}function I4(e){return Jkt&&e instanceof Set}function $v(e){return e.o||e.t}function PJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=tRt(e);delete t[Ul];for(var n=LJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function OJ(e,t){return t===void 0&&(t=!1),DJ(e)||rb(e)||!uy(e)||(ly(e)>1&&(e.set=e.add=e.clear=e.delete=Wkt),Object.freeze(e),t&&JE(e,function(n,r){return OJ(r,!0)},!0)),e}function Wkt(){Xi(2)}function DJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ch(e){var t=TV[e];return t||Xi(18,e),t}function Gkt(e,t){TV[e]||(TV[e]=t)}function Dde(){return{}.NODE_ENV==="production"||ZE||Xi(0),ZE}function C9(e,t){t&&(Ch("Patches"),e.u=[],e.s=[],e.v=t)}function g$(e){EV(e),e.p.forEach(Ykt),e.p=null}function EV(e){e===ZE&&(ZE=e.l)}function $de(e){return ZE={p:[],l:ZE,h:e,m:!0,_:0}}function Ykt(e){var t=e[Ul];t.i===0||t.i===1?t.j():t.O=!0}function A9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Ch("ES5").S(t,e,r),r?(n[Ul].P&&(g$(t),Xi(4)),uy(e)&&(e=y$(t,e),t.l||v$(t,e)),t.u&&Ch("Patches").M(n[Ul].t,e,t.u,t.s)):e=y$(t,n,[]),g$(t),t.u&&t.v(t.u,t.s),e!==MJ?e:void 0}function y$(e,t,n){if(DJ(t))return t;var r=t[Ul];if(!r)return JE(t,function(s,o){return Mde(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return v$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=PJ(r.k):r.o;JE(r.i===3?new Set(i):i,function(s,o){return Mde(e,r,i,s,o,n)}),v$(e,i,!1),n&&e.u&&Ch("Patches").R(r,n,e.u,e.s)}return r.o}function Mde(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Xi(5),rb(i)){var o=y$(e,i,s&&t&&t.i!==3&&!UA(t.D,r)?s.concat(r):void 0);if(LNe(n,r,o),!rb(o))return;e.m=!1}if(uy(i)&&!DJ(i)){if(!e.h.F&&e._<1)return;y$(e,i),t&&t.A.l||v$(e,i)}}function v$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&OJ(t,n)}function I9(e,t){var n=e[Ul];return(n?$v(n):e)[t]}function Lde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function xV(e){e.P||(e.P=!0,e.l&&xV(e.l))}function k9(e){e.o||(e.o=PJ(e.t))}function SV(e,t,n){var r=A4(t)?Ch("MapSet").N(t,n):I4(t)?Ch("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Dde(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=CV;o&&(u=[a],l=wC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Ch("ES5").J(t,n);return(n?n.A:Dde()).p.push(r),r}function Kkt(e){return rb(e)||Xi(22,e),function t(n){if(!uy(n))return n;var r,i=n[Ul],s=ly(n);if(i){if(!i.P&&(i.i<4||!Ch("ES5").K(i)))return i.t;i.I=!0,r=Fde(n,s),i.I=!1}else r=Fde(n,s);return JE(r,function(o,a){i&&vO(i.t,o)===a||LNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Fde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return PJ(e)}function Xkt(){function e(r){if(!uy(r))return r;if(Array.isArray(r))return r.map(e);if(A4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(I4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return UA(r,x2)&&(i[x2]=r[x2]),i}function t(r){return rb(r)?e(r):r}var n="add";Gkt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=ly(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Xi(24),typeof u=="function"&&f==="prototype"&&Xi(24),typeof(u=vO(u,f))!="object"&&Xi(15,o.join("/"))}var d=ly(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Xi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Xi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;JE(a.D,function(h,p){var m=vO(f,h),g=vO(d,h),y=p?UA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===MJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var jde,ZE,$J=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Qkt=typeof Map<"u",Jkt=typeof Set<"u",Bde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",MJ=$J?Symbol.for("immer-nothing"):((jde={})["immer-nothing"]=!0,jde),x2=$J?Symbol.for("immer-draftable"):"__$immer_draftable",Ul=$J?Symbol.for("immer-state"):"__$immer_state",Zkt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},eRt=""+Object.prototype.constructor,LJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,tRt=Object.getOwnPropertyDescriptors||function(e){var t={};return LJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},TV={},CV={get:function(e,t){if(t===Ul)return e;var n=$v(e);if(!UA(n,t))return function(i,s,o){var a,u=Lde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!uy(r)?r:r===I9(e.t,t)?(k9(e),e.o[t]=SV(e.A.h,r,e)):r},has:function(e,t){return t in $v(e)},ownKeys:function(e){return Reflect.ownKeys($v(e))},set:function(e,t,n){var r=Lde($v(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=I9($v(e),t),s=i==null?void 0:i[Ul];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(qkt(n,i)&&(n!==void 0||UA(e.t,t)))return!0;k9(e),xV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return I9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,k9(e),xV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=$v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Xi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Xi(12)}},wC={};JE(CV,function(e,t){wC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),wC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Xi(13),wC.set.call(this,e,t,void 0)},wC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Xi(14),CV.set.call(this,e[0],t,n,e[0])};var nRt=function(){function e(n){var r=this;this.g=Bde,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Xi(6),o!==void 0&&typeof o!="function"&&Xi(7),uy(i)){var c=$de(r),f=SV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?g$(c):EV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return C9(c,o),A9(m,c)},function(m){throw g$(c),m}):(C9(c,o),A9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===MJ&&(l=void 0),r.F&&OJ(l,!0),o){var h=[],p=[];Ch("Patches").M(i,l,h,p),o(h,p)}return l}Xi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){uy(n)||Xi(8),rb(n)&&(n=Kkt(n));var r=$de(this),i=SV(this,n,void 0);return i[Ul].C=!0,EV(r),i},t.finishDraft=function(n,r){var i=n&&n[Ul];({}).NODE_ENV!=="production"&&(i&&i.C||Xi(9),i.I&&Xi(10));var s=i.A;return C9(s,r),A9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Bde&&Xi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Ch("Patches").$;return rb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),zl=new nRt,rRt=zl.produce;zl.produceWithPatches.bind(zl);zl.setAutoFreeze.bind(zl);zl.setUseProxies.bind(zl);zl.applyPatches.bind(zl);zl.createDraft.bind(zl);zl.finishDraft.bind(zl);function iRt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Vkt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return nSe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Th.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Th.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function sRt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=iRt(e),s=Eat();s.startListening({matcher:Kue(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Kue(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=eSe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Th.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oRt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aRt=Object.prototype.hasOwnProperty;function AV(e,t){return aRt.call(e,t)}function IV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)AV(e,i)&&r.push(i);return r}function ju(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function kV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Mv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function FNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function RV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(RV(e[t]))return!0}else if(typeof e=="object"){for(var r=IV(e),i=r.length,s=0;s<i;s++)if(RV(e[r[s]]))return!0}}return!1}function Ude(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var jNe=function(e){oRt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Ude(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Ude(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=jNe,uRt=ju,bw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=b$(n,this.path);r&&(r=ju(r));var i=A1(n,{op:"remove",path:this.from}).removed;return A1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=b$(n,this.from);return A1(n,{op:"add",path:this.path,value:ju(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:zA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},lRt={add:function(e,t,n){return kV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:bw.move,copy:bw.copy,test:bw.test,_get:bw._get};function b$(e,t){if(t=="")return e;var n={op:"_get",path:t};return A1(e,n),n.value}function A1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):_$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=b$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=zA(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=ju(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=_$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=FNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!kV(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);kV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=lRt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=bw[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function k4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ju(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=A1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function cRt(e,t,n){var r=A1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function _$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(bw[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&RV(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=BNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function BNe(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)k4(ju(t),ju(e),n||!0);else{n=n||_$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function zA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!zA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!zA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const fRt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:zA,applyOperation:A1,applyPatch:k4,applyReducer:cRt,deepClone:uRt,getValueByPointer:b$,validate:BNe,validator:_$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var FJ=new WeakMap,dRt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),hRt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function pRt(e){return FJ.get(e)}function mRt(e,t){return e.observers.get(t)}function gRt(e,t){e.observers.delete(t.callback)}function yRt(e,t){t.unobserve()}function vRt(e,t){var n=[],r,i=pRt(e);if(!i)i=new dRt(e),FJ.set(e,i);else{var s=mRt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=ju(e),t){r.callback=t,r.next=null;var o=function(){NV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){NV(r),clearTimeout(r.next),gRt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new hRt(t,r)),r}function NV(e,t){t===void 0&&(t=!1);var n=FJ.get(e.object);jJ(n.value,e.object,e.patches,"",t),e.patches.length&&k4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function jJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=IV(t),o=IV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(AV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?jJ(c,f,n,r+"/"+Mv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Mv(l),value:ju(c)}),n.push({op:"replace",path:r+"/"+Mv(l),value:ju(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Mv(l),value:ju(c)}),n.push({op:"remove",path:r+"/"+Mv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!AV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Mv(l),value:ju(t[l])})}}}function UNe(e,t,n){n===void 0&&(n=!1);var r=[];return jJ(e,t,r,"",n),r}const bRt=Object.freeze(Object.defineProperty({__proto__:null,compare:UNe,generate:NV,observe:vRt,unobserve:yRt},Symbol.toStringTag,{value:"Module"}));Object.assign({},fRt,bRt,{JsonPatchError:jNe,deepClone:ju,escapePathComponent:Mv,unescapePathComponent:FNe});var EC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(EC||{});function bO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=zNe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=bO(i,t);return k4(a,ju(o),!0,!1).newDocument}function _Rt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function PV({registry:e,initialState:t}){let n=!1;const r=Lkt(),i=sRt(t);function s(c){return i.backend.nodes[c]}r.listen(EC.TRAVERSAL_START,()=>{n=!0}),r.listen(EC.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return bO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=bO(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=UNe(y,f);if(_Rt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Hkt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=bO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(EC.TRAVERSAL_START);const f=zNe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);ERt(p,m)?Kf(p)&&d.push(...p.sideEffects.undo):Kf(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(EC.TRAVERSAL_END)},undo(){const{current:c}=i;return Kf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return VNe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function wRt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Kf(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Kf(r)&&(r=n[r.parent]),Kf(i)&&(i=n[i.parent]);return r.id}function zNe(e,t,n){const r=wRt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Kf(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Kf(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function ERt(e,t){if(Kf(e)&&e.parent===t.id)return!0;if(Kf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function VNe(e,t){return{...e,children:e.children.map(n=>VNe(t[n],t)),name:`${e.label}`}}Xkt();function xRt(e){return e.length===2?rRt(e):e}class VA{static create(){return new VA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:xRt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Eh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var SRt="Expected a function",zde=NaN,TRt="[object Symbol]",CRt=/^\s+|\s+$/g,ARt=/^[-+]0x[0-9a-f]+$/i,IRt=/^0b[01]+$/i,kRt=/^0o[0-7]+$/i,RRt=parseInt,NRt=typeof No=="object"&&No&&No.Object===Object&&No,PRt=typeof self=="object"&&self&&self.Object===Object&&self,ORt=NRt||PRt||Function("return this")(),DRt=Object.prototype,$Rt=DRt.toString,MRt=Math.max,LRt=Math.min,R9=function(){return ORt.Date.now()};function FRt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(SRt);t=Vde(t)||0,OV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?MRt(Vde(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(C){var E=r,S=i;return r=i=void 0,l=C,o=e.apply(S,E),o}function p(C){return l=C,a=setTimeout(y,t),c?h(C):o}function m(C){var E=C-u,S=C-l,A=t-E;return f?LRt(A,s-S):A}function g(C){var E=C-u,S=C-l;return u===void 0||E>=t||E<0||f&&S>=s}function y(){var C=R9();if(g(C))return v(C);a=setTimeout(y,m(C))}function v(C){return a=void 0,d&&r?h(C):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(R9())}function x(){var C=R9(),E=g(C);if(r=arguments,i=this,u=C,E){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=b,x.flush=w,x}function OV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function jRt(e){return!!e&&typeof e=="object"}function BRt(e){return typeof e=="symbol"||jRt(e)&&$Rt.call(e)==TRt}function Vde(e){if(typeof e=="number")return e;if(BRt(e))return zde;if(OV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=OV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(CRt,"");var n=IRt.test(e);return n||kRt.test(e)?RRt(e.slice(2),n?2:8):ARt.test(e)?zde:+e}var URt=FRt;const Md=Ho(URt);function HNe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>sS(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(eu,{children:_.jsx(nr,{gap:3,children:_.jsx(tt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const zRt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:HNe},Symbol.toStringTag,{value:"Module"})),N9=15;function qNe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:u}){const[l,c]=I.useState([0,0]),[f,d]=I.useState(!1);return I.useEffect(()=>{const h=To(u.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),f){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<N9&&Math.abs(t(v[r.y])-g[1])<N9);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(w=>{v.has(w[r.ids])&&v.delete(w[r.ids])});const b=Array.from(v);n([[l[0],l[1]],[l[0],l[1]]],e,t,b.length===0?"clear":"drag",s.id,b)}else{const v=Array.from(new Set([...a,...y.map(b=>b[r.ids])]));v.length>0&&n([[l[0],l[1]],[l[0],l[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{d(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{d(!1)})}},[l,s.id,a,i,f,o,r,n,u,e,t]),_.jsx("circle",{style:{cursor:f?"pointer":"default",pointerEvents:"none"},r:N9,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const VRt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:qNe},Symbol.toStringTag,{value:"Module"}));function Yv(e){const t=I.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return I.useLayoutEffect(()=>{t.current=e}),I.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const Qr={top:15,left:100,right:15,bottom:130};function WNe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,setIsPaintbrushSelect:l}){const[c,{height:f,width:d}]=Hf(),[h,p]=I.useState(i),[m]=Hf(),[g]=Hf(),y=I.useMemo(()=>d-Qr.left-Qr.right,[d]),v=I.useMemo(()=>f-Qr.top-Qr.bottom,[f]),b=I.useMemo(()=>{const O=Array.from(new Set(s.map(L=>L[h.category])));return aS(xAe).domain(O)},[s,h.category]),{xMin:w,yMin:x,xMax:C,yMax:E}=I.useMemo(()=>{const O=s.map($=>+$[h.x]).filter($=>$!==null),[L,j]=e3(O),B=s.map($=>+$[h.y]).filter($=>$!==null),[U,H]=e3(B);return{xMin:L,xMax:j,yMin:U,yMax:H}},[s,h.x,h.y]),S=I.useMemo(()=>{const O=C-w;return y<=0?null:h.dataType==="date"?yAe([Qr.left,y+Qr.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Lh([Qr.left,y+Qr.left]).domain([w-O/10,C+O/10]).nice()},[h.dataType,y,C,w]),A=I.useMemo(()=>{const O=E-x;return v<=0?null:Lh([v+Qr.top,Qr.top]).domain([x-O/10,E+O/10]).nice()},[v,E,x]),k=I.useMemo(()=>{if(!S||!A)return()=>null;if(r==="Axis Selection"){const O=qyt().extent([[Qr.left,Qr.top+v-5],[Qr.left+y,Qr.top+v+5]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[j.selection[0],null],[j.selection[1],null]],S,A,j.mode,t.id)}),L=Wyt().extent([[Qr.left-5,Qr.top],[Qr.left+5,Qr.top+v]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[null,j.selection[0]],[null,j.selection[1]]],S,A,j.mode,t.id)});return m.current&&g.current&&(To(g.current).call(L),To(m.current).call(O),t.hasBrush||(To(g.current).call(L.move,[A(E),A(x)]),To(m.current).call(O.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),A(E)],[S(new Date("2015-12-31")),A(x)]],S,A,"drag",t.id))),()=>{To(g.current).call(L.move,[A(E),A(x)]),To(m.current).call(O.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),A(E)],[S(new Date("2015-12-31")),A(x)]],S,A,"clear",t.id)}}if(r==="Rectangular Selection"){const O=Gyt().extent([[Qr.left,Qr.top],[Qr.left+y,Qr.top+v]]).on("brush",L=>{L.sourceEvent!==void 0&&n([[L.selection[0][0],L.selection[0][1]],[L.selection[1][0],L.selection[1][1]]],S,A,L.mode,t.id)}).on("end",L=>{L.selection===null&&L.sourceEvent!==void 0&&(To(c.current).call(O.move,null),e(null))});return To(c.current).call(O),()=>{To(c.current).call(O.move,null),n([[null,null],[null,null]],S,A,"clear",t.id)}}return r==="Slider Selection"?()=>n([[S(w),A(E)],[S(C),A(x)]],S,A,"clear",t.id):r==="Paintbrush Selection"?()=>n([[S(w),A(E)],[S(C),A(x)]],S,A,"clear",t.id,[]):()=>null},[t,r,m,g,v,c,n,y,C,w,S,E,x,A]);I.useEffect(()=>{r==="Slider Selection"&&S&&A&&n([[S(w),A(E)],[S(C),A(x)]],S,A,null,t.id)},[r,C,w,S,E,x,A]);const R=I.useMemo(()=>o.length===0?null:new Set(o),[o]),D=I.useMemo(()=>!S||!A?null:s.filter(O=>h.year?+O.Year===h.year:!0).map((O,L)=>{if(O[h.x]===null||O[h.y]===null)return null;const j=h.dataType==="date"?S(new Date(O[h.x])):S(O[h.x]);return _.jsx(ko,{withinPortal:!0,label:O[h.ids],children:_.jsx("circle",{opacity:R&&!R.has(O[h.ids])?.3:.7,r:3,fill:R&&!R.has(O[h.ids])?"lightgray":h.hideCat?"gray":b(O[h.category]),cx:j,cy:A(O[h.y])},L)},L)}),[R,b,s,S,A,h]);I.useEffect(()=>{r==="Axis Selection"&&Fgt(".handle").style("fill","darkgrey")},[t,r]);const P=Yv(O=>{p({...h,year:O?+O:void 0})});return _.jsxs(Di,{gap:0,children:[_.jsxs(nr,{mr:Qr.right,style:{justifyContent:"space-between"},children:[h.year?_.jsxs(Di,{gap:0,children:[_.jsx(tt,{size:"12px",ml:Qr.left,children:h.year}),_.jsx(OL,{min:2008,max:2022,value:h.year,onChange:P,ml:Qr.left,style:{width:"150px"},label:h.year})]}):null,_.jsx(_n,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),k==null||k()},children:"Clear Selection"}),h.brushType==="Paintbrush Selection"?_.jsx(RL,{defaultChecked:!0,value:u?"Select":"De-Select",onChange:O=>l(O==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(nr,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S&&A?_.jsxs("g",{children:[_.jsx(HNe,{yScale:A,label:h.y,horizontalPosition:Qr.left,xRange:S.range()}),_.jsx(pk,{xScale:S,yRange:A.range(),isDate:h.dataType==="date",vertPosition:v+Qr.top,label:h.x,ticks:S.ticks(h.brushType==="Axis Selection"?12:5).map(O=>({value:O.toString(),offset:S(O)}))})]}):null,D,_.jsx("g",{id:"brushXRef",ref:m}),_.jsx("g",{id:"brushYRef",ref:g}),S&&A&&r==="Paintbrush Selection"?_.jsx(qNe,{currSelected:o,svgRef:c,brushState:t,setBrushedSpace:n,params:h,data:s.filter(O=>h.year?+O.Year===h.year:!0),isSelect:u,xScale:S,yScale:A}):null]}),r==="Slider Selection"&&S&&A?_.jsxs(Di,{style:{flexGrow:1},gap:50,children:[_.jsxs(Di,{gap:0,children:[_.jsx(tt,{children:h.x}),_.jsx(RD,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],labelAlwaysOn:!1,onChange:O=>{n([[S(O[0]),t.y1],[S(O[1]),t.y2]],S,A,"drag",t.id)},style:{width:"300px"},marks:S.ticks(5).map(O=>({value:O,label:O})),value:[S.invert(t.x1),S.invert(t.x2)]})]}),_.jsxs(Di,{gap:0,children:[_.jsx(tt,{children:h.y}),_.jsx(RD,{minRange:1,label:null,min:A.domain()[0],max:A.domain()[1],onChange:O=>{n([[t.x1,A(O[1])],[t.x2,A(O[0])]],S,A,"drag",t.id)},style:{width:"300px"},marks:A.ticks(5).map(O=>({value:O,label:O})),value:[A.invert(t.y2),A.invert(t.y1)]})]})]}):null]})]})}const HRt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:WNe},Symbol.toStringTag,{value:"Module"})),pl={top:15,left:100,right:15,bottom:130};function GNe({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,dataTable:l}){const[c,{height:f,width:d}]=Hf(),[h,p]=I.useState(i),m=I.useMemo(()=>d-pl.left-pl.right,[d]),g=I.useMemo(()=>f-pl.top-pl.bottom,[f]),y=I.useMemo(()=>h.hideCat?l.groupby(t.xCol).count():l.groupby(t.xCol,"Survived").count(),[t.xCol,l,h.hideCat]),v=I.useMemo(()=>{if(!s)return null;const E=NJ(s);return h.hideCat?E.groupby(t.xCol).count():E.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),b=I.useMemo(()=>y?Lh([pl.top,g+pl.top]).domain([0,Ic(y.objects().map(E=>E.count))].reverse()).nice():null,[y,g]),w=I.useMemo(()=>y?G6([pl.left,m+pl.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),x=I.useMemo(()=>!w||!b||!v?null:v.objects().map((E,S)=>_.jsxs("g",{children:[h.hideCat?_.jsx("rect",{onClick:A=>n(l.objects().filter(k=>k[t.xCol]===E[t.xCol]).map(k=>k.Name),A),x:w(E[t.xCol]),y:g-(g-b(E.count)),fill:"gray",width:w.bandwidth(),height:pl.top+g-b(E.count)}):_.jsx("rect",{onClick:A=>n(l.objects().filter(k=>k[t.xCol]===E[t.xCol]&&k.Survived===E.Survived).map(k=>k.Name),A),x:E.Survived==="Yes"?w(E[t.xCol]):w(E[t.xCol])+w.bandwidth()/2,y:g-(g-b(E.count)),fill:E.Survived==="Yes"?"#f28e2c":"#4e79a7",width:w.bandwidth()/2,height:pl.top+g-b(E.count)}),_.jsx("text",{x:w(E[t.xCol])+(h.hideCat?w.bandwidth()/2:E.Survived==="Yes"?w.bandwidth()/4:w.bandwidth()*.75),y:b(E.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:E.count})]},`${S}fullRects`)),[v,t.xCol,l,g,h.hideCat,n,w,b]),C=I.useMemo(()=>!w||!b||!y?null:y.objects().map((E,S)=>_.jsx("g",{style:{cursor:"pointer"},children:_.jsx("rect",{onClick:A=>n(l.objects().filter(k=>k[t.xCol]===E[t.xCol]&&(h.hideCat?!0:k.Survived===E.Survived)).map(k=>k.Name),A),opacity:.7,x:E.Survived==="Yes"||h.hideCat?w(E[t.xCol]):w(E[t.xCol])+w.bandwidth()/2,fill:"lightgray",width:h.hideCat?w.bandwidth():w.bandwidth()/2,y:g-(g-b(E.count)),height:pl.top+g-b(E.count)})},`${S}survRects`)),[y,t.xCol,l,g,h.hideCat,n,w,b]);return b&&w&&v?_.jsx(Di,{gap:0,children:_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(pk,{xScale:w,yRange:b.range(),vertPosition:g+pl.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(l.array(t.xCol))].map(E=>({value:E,offset:w(E)+w.bandwidth()/2}))}),b?_.jsx(s4,{label:"Count",yScale:b,horizontalPosition:pl.left,xRange:w.range(),ticks:b.ticks(5).map(E=>({value:E.toString(),offset:b(E)}))}):null,C,x]})}):null}const qRt=Object.freeze(Object.defineProperty({__proto__:null,Histogram:GNe},Symbol.toStringTag,{value:"Module"})),Od={top:15,left:100,right:15,bottom:130};function YNe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:u,onClose:l,isPaintbrushSelect:c}){const[f,{height:d,width:h}]=Hf(),[p,m]=I.useState(i),g=I.useMemo(()=>h-Od.left-Od.right,[h]),y=I.useMemo(()=>d-Od.top-Od.bottom,[d]),v=I.useMemo(()=>Lh([Od.top,y+Od.top]).domain([0,Ic(o.map(E=>+E[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),b=I.useMemo(()=>G6([Od.left,g+Od.left]).domain([...new Set(o.map(E=>E[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),w=I.useMemo(()=>NJ(o.map(E=>({...E,Age:+E.Age}))),[o]),x=I.useMemo(()=>new Set(s.map(E=>E[p.ids])),[s,p.ids]),C=I.useMemo(()=>{let E=p.hideCat?w.groupby(t.xCol,{group:UN(t.yCol,{maxbins:20}),group_max:UN(t.yCol,{maxbins:20,offset:1})}):w.groupby(t.xCol,"Survived",{group:UN(t.yCol,{maxbins:20}),group_max:UN(t.yCol,{maxbins:20,offset:1})});E=E.rollup({ids:_2.array_agg(p.ids),count:_2.count()}).orderby("group");const S=E.derive({ids:Gv(D=>D.ids.filter(P=>x.has(P))),count:Gv(D=>D.ids.filter(P=>x.has(P)).length)}).orderby("group"),A=Lh([0,b.bandwidth()/2]).domain([0,Ic(E.array("count"))]),k=j3(D=>A(D[1])+b.bandwidth()/2,D=>v(D[0])).curve(Jz),R=j3(D=>b.bandwidth()/2-A(D[1]),D=>v(D[0])).curve(Jz);return _.jsx("g",{children:b.domain().map(D=>_.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?_.jsxs("g",{children:[_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D).map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b(D)}, 0)`,d:`${k(E.objects().filter(P=>P[t.xCol]===D).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D).map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b(D)}, 0)`,d:`${R(E.objects().filter(P=>P[t.xCol]===D).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D).map(O=>O.ids).flat(),P),transform:`translate(${b(D)}, 0)`,d:`${k(S.objects().filter(P=>P[t.xCol]===D).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D).map(O=>O.ids).flat(),P),transform:`translate(${b(D)}, 0)`,d:`${R(S.objects().filter(P=>P[t.xCol]===D).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):_.jsxs("g",{children:[_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D&&O.Survived==="Yes").map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b(D)}, 0)`,d:`${k(E.objects().filter(P=>P[t.xCol]===D&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D&&O.Survived==="No").map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b(D)}, 0)`,d:`${R(E.objects().filter(P=>P[t.xCol]===D&&P.Survived==="No").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D&&O.Survived==="Yes").map(O=>O.ids).flat(),P),transform:`translate(${b(D)}, 0)`,d:`${k(S.objects().filter(P=>P[t.xCol]===D&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),_.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===D&&O.Survived==="No").map(O=>O.ids).flat(),P),transform:`translate(${b(D)}, 0)`,d:`${R(S.objects().filter(P=>P[t.xCol]===D&&P.Survived==="No").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},D))})},[t.xCol,t.yCol,x,w,p.hideCat,p.ids,a,b,v]);return _.jsx(Di,{gap:0,children:_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:f,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(pk,{xScale:b,yRange:v.range(),vertPosition:y+Od.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:b.domain().map(E=>({value:E,offset:b(E)+b.bandwidth()/2}))}),v?_.jsx(s4,{label:t.yCol,yScale:v,horizontalPosition:Od.left,xRange:b.range(),ticks:v.ticks(5).map(E=>({value:E.toString(),offset:v(E)}))}):null,C]})})}const WRt=Object.freeze(Object.defineProperty({__proto__:null,Violin:YNe},Symbol.toStringTag,{value:"Module"}));function Hde({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=I.useState(null),[s,o]=I.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,u]=I.useState(!0),[l,c]=I.useState(null);I.useEffect(()=>{Svt(`/ThinkAloud/data/${e.dataset}.csv`).then(C=>{c(C)})},[e]);const f=I.useMemo(()=>l?NJ(l):null,[l]);I.useEffect(()=>{if(n){const C=n.all.brush||n.all;o(C);const E=new Set(C.selection);if(f){const S=f.filter(Gv(A=>E.has(A[e.ids])));i(S)}}},[f,e.ids,n]);const{actions:d,trrack:h}=I.useMemo(()=>{const C=VA.create(),E=C.register("brush",(D,P)=>(D.all={brush:P},D)),S=C.register("brushMove",(D,P)=>(D.all={brush:P},D)),A=C.register("brushResize",(D,P)=>(D.all={brush:P},D)),k=C.register("brushClear",(D,P)=>(D.all={brush:P},D)),R=PV({registry:C,initialState:{all:s}});return{actions:{brush:E,brushMove:S,brushResize:A,clearBrush:k},trrack:R}},[]),p=I.useCallback((C,E)=>{C==="drag"?h.apply("Move Brush",d.brushMove(E)):(C==="handle"||C==="click")&&h.apply("Brush",d.brush(E)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[d,t,h]),m=I.useMemo(()=>Md(p,50,{maxWait:50}),[p]),g=I.useCallback((C,E,S,A,k,R)=>{if(!E||!S)return;const D=s[k],P=E.invert(C[0][0]||D.x1),O=E.invert(C[1][0]||D.x2),L=S.invert(C[1][1]||D.y2),j=S.invert(C[0][1]||D.y1);let B=null;if(A==="clear")B=f;else if(R){const $=new Set(R);B=f.filter(Gv(z=>$.has(z[e.ids])))}else e.brushType==="Axis Selection"?B=f.filter(Gv($=>new Date($[e.x])>=new Date(P)&&new Date($[e.x])<=new Date(O)&&$[e.y]>=L&&$[e.y]<=j)):B=f.filter(Gv($=>$[e.x]>=P&&$[e.x]<=O&&$[e.y]>=L&&$[e.y]<=j));const U={xCol:D.xCol,yCol:D.yCol,x1:C[0][0]||(D==null?void 0:D.x1)||0,x2:C[1][0]||(D==null?void 0:D.x2)||0,y1:C[0][1]||(D==null?void 0:D.y1)||0,y2:C[1][1]||(D==null?void 0:D.y2)||0,hasBrush:A!=="clear",id:k},H=A!=="clear"?B==null?void 0:B.array(e.ids):[];o({...s,[k]:U,selection:H}),A==="drag"||A==="handle"||A==="click"?m(A,{...s,[k]:U,selection:H}):A==="clear"&&h.apply("Clear Brush",d.clearBrush({...s,[k]:U,selection:H})),i(B)},[s,f,e,h,m,d]),y=I.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():f?f==null?void 0:f.groupby(e.category).count():null,[r,f,e.category]),v=I.useCallback(C=>{i(C)},[]),b=I.useCallback((C,E)=>{const S=new Set(E.ctrlKey||E.metaKey?[...s.selection,...C]:C),A=f.filter(Gv(k=>S.has(k[e.ids])));o({...s,selection:[...S]}),i(A),p("click",{...s,selection:[...S]})},[s,f,p,e.ids]),w=I.useMemo(()=>(f==null?void 0:f.objects())||[],[f]),x=I.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return l?_.jsxs(Di,{gap:"xs",children:[_.jsxs(nr,{children:[_.jsx(_n,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?_.jsx(RL,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:C=>u(C==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?_.jsxs(_.Fragment,{children:[_.jsx(Dh,{color:"#f28e2c"}),_.jsx(tt,{children:"Survived"}),_.jsx(Dh,{color:"#4e79a7"}),_.jsx(tt,{children:"Died"})]}):null]}),_.jsxs(nr,{children:[Object.entries(s).map(C=>{const[E,S]=C;return E==="selection"?null:S.type==="histogram"?_.jsx(GNe,{onClose:A=>{const{[A]:k,...R}=s;o(R)},dataTable:f,setSelection:b,brushedPoints:s.selection,data:x.length>0?x:w,initialParams:{...e,x:S.xCol,y:S.yCol},brushType:e.brushType,brushState:S,isPaintbrushSelect:a,setFilteredTable:v},E):S.type==="violin"?_.jsx(YNe,{onClose:A=>{const{[A]:k,...R}=s;o(R)},allData:w,setSelection:b,brushedPoints:s.selection,data:x.length>0?x:w,initialParams:{...e,x:S.xCol,y:S.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:S,isPaintbrushSelect:a,setFilteredTable:v},E):_.jsx(WNe,{onClose:A=>{const{[A]:k,...R}=s;o(R)},brushedPoints:s.selection,data:w,initialParams:{...e,x:S.xCol,y:S.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:S,isPaintbrushSelect:a,setFilteredTable:v,setIsPaintbrushSelect:u},E)}),e.hideCat?null:_.jsx(Zz,{fullTable:f,setSelection:b,data:w,parameters:e,barsTable:y})]})]}):_.jsx(Dc,{})}const GRt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Hde,default:Hde},Symbol.toStringTag,{value:"Module"})),YRt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function KNe(e,t){return function(n){return t.map(r=>[r,tCe(n,i=>e(r-i))])}}function XNe(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function QNe(e,t){return e*t/(t-1)}function JNe(e,t,n){let r=Math.sqrt(QNe(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function KRt({values:e,xScale:t,ticks:n}){const r=Mkt({values:e}).rollup({variance:_2.variance("values"),q1:_2.quantile("values",.25),q3:_2.quantile("values",.75)}).objects()[0];return KNe(XNe(JNe(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const XRt=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:KRt,kernelDensityEstimator:KNe,kernelEpanechnikov:XNe,silvermans:JNe,toSampleVariance:QNe},Symbol.toStringTag,{value:"Module"})),qde=Object.assign({"../public/ThinkAloud/AddPlot.tsx":Tpt,"../public/ThinkAloud/AudioTest.tsx":Upt,"../public/ThinkAloud/Bar.tsx":OEt,"../public/ThinkAloud/BrushPlot.tsx":GRt,"../public/ThinkAloud/Histogram.tsx":qRt,"../public/ThinkAloud/Paintbrush.tsx":VRt,"../public/ThinkAloud/Scatter.tsx":HRt,"../public/ThinkAloud/Violin.tsx":WRt,"../public/ThinkAloud/XAxisBar.tsx":NEt,"../public/ThinkAloud/YAxis.tsx":zRt,"../public/ThinkAloud/YAxisBar.tsx":PEt,"../public/ThinkAloud/types.ts":YRt,"../public/ThinkAloud/useKdeCalc.tsx":XRt});function QRt({currentConfig:e,provState:t}){const n=Fy(),r=jy(),i=`../public/${e.path}`,s=i in qde?qde[i].default:null,o=Mc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=jl(),l=I.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[o,a,r,n,u]);return _.jsx(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:s?_.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t}):_.jsx(tk,{path:e.path})})}function P9({provState:e}){var E;const t=Dm(),n=js(),r=Fy(),i=jy()||"Notfound",s=t.components[i],o=xK(),a=P6(s)&&t.baseComponents?wK({},(E=t.baseComponents)==null?void 0:E[s.baseComponent],s):s,u=a.instruction||"",{instructionLocation:l}=a,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[f,d]=I.useState(null),h=Mc(),{setIsRecording:p,setAnalysisTrialName:m}=jl(),{analysisTrialName:g,analysisProvState:y}=Uo(S=>S);Xc();const[v,b]=I.useState(null);I.useEffect(()=>{h(m(i))},[h,m,r,i]),I.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(f&&v&&n.storageEngine.saveAudio(f,v),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(b(null),d(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(A=>{const k=new MediaRecorder(A);k.start(),d(k),h(p(!0))}),b(i)))},[i]),NTe();const{storageEngine:w}=js(),x=Mc(),{setAlertModal:C}=jl();return I.useEffect(()=>{(w==null?void 0:w.getEngine())!=="firebase"&&x(C({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[C,w,x]),i==="end"?_.jsx(PTe,{}):i==="Notfound"?_.jsx(tk,{email:t.uiConfig.contactEmail}):_.jsxs(_.Fragment,{children:[l==="aboveStimulus"&&_.jsx(tu,{text:u}),_.jsx(ZD,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&_.jsx(elt,{currentConfig:a}),a.type==="website"&&_.jsx(Qut,{currentConfig:a}),a.type==="image"&&_.jsx(Zut,{currentConfig:a}),a.type==="react-component"&&_.jsx(QRt,{currentConfig:a,provState:y})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&_.jsx(tu,{text:u}),_.jsx(ZD,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function DV(e){const[t]=IY();return _.jsx(AY,{...e,to:{pathname:e.to,search:t.toString()}})}function JRt(e,t=!1){return typeof e=="number"?Wde(e,t):Wde(e.length,t).map(r=>r.map(i=>e[i]))}function Wde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function ZNe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=ZNe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function ZRt(e,t){const n=kE(e);return ZNe(n,t,"root")}function ePe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&ePe(s,t,i,o)})}function eNt(e){const t=[];return ePe(e,t,"",0),t}function Gde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return JRt(i.sort(()=>.5-Math.random()),!0)}function tNt(e){const n=eNt(e.sequence).map(s=>({[s]:Gde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=ZRt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Gde(e,o))})}),i}function tPe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>tPe(n,`${t}-${r}`))}}function nNt(){Uo(t=>t),jl(),jy();const e=Dm();return Mc(),oUe(),Cr.useState(!0),I.useMemo(()=>{let t=kE(e.sequence);return t=tPe(t,"root"),t.components.push("end"),t},[e.sequence]),null}var Yde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nPe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},rNt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},BJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(nPe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):rNt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new iNt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class iNt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sNt=function(e){const t=nPe(e);return BJ.encodeByteArray(t,!0)},w$=function(e){return sNt(e).replace(/\./g,"")},rPe=function(e){try{return BJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iPe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oNt=()=>iPe().__FIREBASE_DEFAULTS__,aNt=()=>{if(typeof process>"u"||typeof Yde>"u")return;const e=Yde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},uNt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&rPe(e[1]);return t&&JSON.parse(t)},R4=()=>{try{return oNt()||aNt()||uNt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},sPe=e=>{var t,n;return(n=(t=R4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},lNt=e=>{const t=sPe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},oPe=()=>{var e;return(e=R4())===null||e===void 0?void 0:e.config},aPe=e=>{var t;return(t=R4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cNt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[w$(JSON.stringify(n)),w$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fNt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zo())}function dNt(){var e;const t=(e=R4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hNt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function pNt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mNt(){const e=zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function gNt(){return!dNt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UJ(){try{return typeof indexedDB=="object"}catch{return!1}}function yNt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vNt="FirebaseError";class dp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=vNt,Object.setPrototypeOf(this,dp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wS.prototype.create)}}class wS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?bNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dp(i,a,r)}}function bNt(e,t){return e.replace(_Nt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const _Nt=/\{\$([^}]+)}/g;function wNt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function qA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Kde(s)&&Kde(o)){if(!qA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Kde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ENt(e,t){const n=new xNt(e,t);return n.subscribe.bind(n)}class xNt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SNt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=O9),i.error===void 0&&(i.error=O9),i.complete===void 0&&(i.complete=O9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SNt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function O9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CNt=1e3,ANt=2,INt=4*60*60*1e3,kNt=.5;function RNt(e,t=CNt,n=ANt){const r=t*Math.pow(n,e),i=Math.round(kNt*r*(Math.random()-.5)*2);return Math.min(INt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e){return e&&e._delegate?e._delegate:e}class Wh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new HA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ONt(t))try{this.getOrInitializeService({instanceIdentifier:Lv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Lv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Lv){return this.instances.has(t)}getOptions(t=Lv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Lv){return this.component?this.component.multipleInstances?t:Lv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PNt(e){return e===Lv?void 0:e}function ONt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DNt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new NNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const $Nt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},MNt=Gn.INFO,LNt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},FNt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=LNt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class N4{constructor(t){this.name=t,this._logLevel=MNt,this._logHandler=FNt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$Nt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const jNt=(e,t)=>t.some(n=>e instanceof n);let Xde,Qde;function BNt(){return Xde||(Xde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UNt(){return Qde||(Qde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uPe=new WeakMap,$V=new WeakMap,lPe=new WeakMap,D9=new WeakMap,zJ=new WeakMap;function zNt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(P0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&uPe.set(n,e)}).catch(()=>{}),zJ.set(t,e),t}function VNt(e){if($V.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});$V.set(e,t)}let MV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return $V.get(e);if(t==="objectStoreNames")return e.objectStoreNames||lPe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return P0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function HNt(e){MV=e(MV)}function qNt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call($9(this),t,...n);return lPe.set(r,t.sort?t.sort():[t]),P0(r)}:UNt().includes(e)?function(...t){return e.apply($9(this),t),P0(uPe.get(this))}:function(...t){return P0(e.apply($9(this),t))}}function WNt(e){return typeof e=="function"?qNt(e):(e instanceof IDBTransaction&&VNt(e),jNt(e,BNt())?new Proxy(e,MV):e)}function P0(e){if(e instanceof IDBRequest)return zNt(e);if(D9.has(e))return D9.get(e);const t=WNt(e);return t!==e&&(D9.set(e,t),zJ.set(t,e)),t}const $9=e=>zJ.get(e);function GNt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=P0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(P0(o.result),u.oldVersion,u.newVersion,P0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const YNt=["get","getKey","getAll","getAllKeys","count"],KNt=["put","add","delete","clear"],M9=new Map;function Jde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(M9.get(t))return M9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=KNt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YNt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return M9.set(t,s),s}HNt(e=>({...e,get:(t,n,r)=>Jde(t,n)||e.get(t,n,r),has:(t,n)=>!!Jde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XNt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QNt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QNt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const LV="@firebase/app",Zde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new N4("@firebase/app"),JNt="@firebase/app-compat",ZNt="@firebase/analytics-compat",ePt="@firebase/analytics",tPt="@firebase/app-check-compat",nPt="@firebase/app-check",rPt="@firebase/auth",iPt="@firebase/auth-compat",sPt="@firebase/database",oPt="@firebase/database-compat",aPt="@firebase/functions",uPt="@firebase/functions-compat",lPt="@firebase/installations",cPt="@firebase/installations-compat",fPt="@firebase/messaging",dPt="@firebase/messaging-compat",hPt="@firebase/performance",pPt="@firebase/performance-compat",mPt="@firebase/remote-config",gPt="@firebase/remote-config-compat",yPt="@firebase/storage",vPt="@firebase/storage-compat",bPt="@firebase/firestore",_Pt="@firebase/vertexai-preview",wPt="@firebase/firestore-compat",EPt="firebase",xPt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="[DEFAULT]",SPt={[LV]:"fire-core",[JNt]:"fire-core-compat",[ePt]:"fire-analytics",[ZNt]:"fire-analytics-compat",[nPt]:"fire-app-check",[tPt]:"fire-app-check-compat",[rPt]:"fire-auth",[iPt]:"fire-auth-compat",[sPt]:"fire-rtdb",[oPt]:"fire-rtdb-compat",[aPt]:"fire-fn",[uPt]:"fire-fn-compat",[lPt]:"fire-iid",[cPt]:"fire-iid-compat",[fPt]:"fire-fcm",[dPt]:"fire-fcm-compat",[hPt]:"fire-perf",[pPt]:"fire-perf-compat",[mPt]:"fire-rc",[gPt]:"fire-rc-compat",[yPt]:"fire-gcs",[vPt]:"fire-gcs-compat",[bPt]:"fire-fst",[wPt]:"fire-fst-compat",[_Pt]:"fire-vertex","fire-js":"fire-js",[EPt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=new Map,TPt=new Map,jV=new Map;function ehe(e,t){try{e.container.addComponent(t)}catch(n){ib.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Hm(e){const t=e.name;if(jV.has(t))return ib.debug(`There were multiple attempts to register component ${t}.`),!1;jV.set(t,e);for(const n of E$.values())ehe(n,e);for(const n of TPt.values())ehe(n,e);return!0}function ES(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ph(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},O0=new wS("app","Firebase",CPt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class APt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw O0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=xPt;function cPe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:FV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw O0.create("bad-app-name",{appName:String(i)});if(n||(n=oPe()),!n)throw O0.create("no-options");const s=E$.get(i);if(s){if(qA(n,s.options)&&qA(r,s.config))return s;throw O0.create("duplicate-app",{appName:i})}const o=new DNt(i);for(const u of jV.values())o.addComponent(u);const a=new APt(n,r,o);return E$.set(i,a),a}function VJ(e=FV){const t=E$.get(e);if(!t&&e===FV&&oPe())return cPe();if(!t)throw O0.create("no-app",{appName:e});return t}function Xf(e,t,n){var r;let i=(r=SPt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ib.warn(a.join(" "));return}Hm(new Wh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IPt="firebase-heartbeat-database",kPt=1,WA="firebase-heartbeat-store";let L9=null;function fPe(){return L9||(L9=GNt(IPt,kPt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(WA)}catch(n){console.warn(n)}}}}).catch(e=>{throw O0.create("idb-open",{originalErrorMessage:e.message})})),L9}async function RPt(e){try{const n=(await fPe()).transaction(WA),r=await n.objectStore(WA).get(dPe(e));return await n.done,r}catch(t){if(t instanceof dp)ib.warn(t.message);else{const n=O0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ib.warn(n.message)}}}async function the(e,t){try{const r=(await fPe()).transaction(WA,"readwrite");await r.objectStore(WA).put(t,dPe(e)),await r.done}catch(n){if(n instanceof dp)ib.warn(n.message);else{const r=O0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ib.warn(r.message)}}}function dPe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NPt=1024,PPt=30*24*60*60*1e3;class OPt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $Pt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nhe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=PPt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nhe(),{heartbeatsToSend:r,unsentEntries:i}=DPt(this._heartbeatsCache.heartbeats),s=w$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function nhe(){return new Date().toISOString().substring(0,10)}function DPt(e,t=NPt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rhe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rhe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $Pt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UJ()?yNt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RPt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return the(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return the(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function rhe(e){return w$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MPt(e){Hm(new Wh("platform-logger",t=>new XNt(t),"PRIVATE")),Hm(new Wh("heartbeat",t=>new OPt(t),"PRIVATE")),Xf(LV,Zde,e),Xf(LV,Zde,"esm2017"),Xf("fire-js","")}MPt("");function hPe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LPt=hPe,pPe=new wS("auth","Firebase",hPe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=new N4("@firebase/auth");function FPt(e,...t){x$.logLevel<=Gn.WARN&&x$.warn(`Auth (${Hb}): ${e}`,...t)}function _O(e,...t){x$.logLevel<=Gn.ERROR&&x$.error(`Auth (${Hb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(e,...t){throw qJ(e,...t)}function Qf(e,...t){return qJ(e,...t)}function HJ(e,t,n){const r=Object.assign(Object.assign({},LPt()),{[t]:n});return new wS("auth","Firebase",r).create(t,{appName:e.name})}function D0(e){return HJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jPt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Gh(e,"argument-error"),HJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return pPe.create(e,...t)}function on(e,t,...n){if(!e)throw qJ(t,...n)}function om(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _O(t),new Error(t)}function qm(e,t){e||om(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function BPt(){return ihe()==="http:"||ihe()==="https:"}function ihe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BPt()||hNt()||"connection"in navigator)?navigator.onLine:!0}function zPt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(t,n){this.shortDelay=t,this.longDelay=n,qm(n>t,"Short delay should be less than long delay!"),this.isMobile=fNt()||pNt()}get(){return UPt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WJ(e,t){qm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mPe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;om("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;om("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;om("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VPt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HPt=new Ak(3e4,6e4);function P4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function xS(e,t,n,r,i={}){return gPe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Ck(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),mPe.fetch()(vPe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function gPe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},VPt),t);try{const i=new qPt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw VN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw VN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw VN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw VN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HJ(e,c,l);Gh(e,c)}}catch(i){if(i instanceof dp)throw i;Gh(e,"network-request-failed",{message:String(i)})}}async function yPe(e,t,n,r,i={}){const s=await xS(e,t,n,r,i);return"mfaPendingCredential"in s&&Gh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function vPe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?WJ(e.config,i):`${e.config.apiScheme}://${i}`}class qPt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qf(this.auth,"network-request-failed")),HPt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function VN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WPt(e,t){return xS(e,"POST","/v1/accounts:delete",t)}async function bPe(e,t){return xS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function GPt(e,t=!1){const n=li(e),r=await n.getIdToken(t),i=GJ(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:S2(F9(i.auth_time)),issuedAtTime:S2(F9(i.iat)),expirationTime:S2(F9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function F9(e){return Number(e)*1e3}function GJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return _O("JWT malformed, contained fewer than 3 sections"),null;try{const i=rPe(n);return i?JSON.parse(i):(_O("Failed to decode base64 JWT payload"),null)}catch(i){return _O("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function she(e){const t=GJ(e);return on(t,"internal-error"),on(typeof t.exp<"u","internal-error"),on(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof dp&&YPt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function YPt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KPt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=S2(this.lastLoginAt),this.creationTime=S2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await GA(e,bPe(n,{idToken:r}));on(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?_Pe(s.providerUserInfo):[],a=QPt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new UV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function XPt(e){const t=li(e);await S$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function QPt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function _Pe(e){return e.map(t=>{var{providerId:n}=t,r=DI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JPt(e,t){const n=await gPe(e,{},async()=>{const r=Ck({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=vPe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",mPe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZPt(e,t){return xS(e,"POST","/v2/accounts:revokeToken",P4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){on(t.idToken,"internal-error"),on(typeof t.idToken<"u","internal-error"),on(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):she(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){on(t.length!==0,"internal-error");const n=she(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(on(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await JPt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new eE;return r&&(on(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(on(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(on(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new eE,this.toJSON())}_performRefresh(){return om("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(e,t){on(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class am{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=DI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KPt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new UV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await GA(this,this.stsTokenManager.getToken(this.auth,t));return on(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return GPt(this,t)}reload(){return XPt(this)}_assign(t){this!==t&&(on(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new am(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await S$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ph(this.auth.app))return Promise.reject(D0(this.auth));const t=await this.getIdToken();return await GA(this,WPt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:C,stsTokenManager:E}=n;on(b&&E,t,"internal-error");const S=eE.fromJSON(this.name,E);on(typeof b=="string",t,"internal-error"),Ig(f,t.name),Ig(d,t.name),on(typeof w=="boolean",t,"internal-error"),on(typeof x=="boolean",t,"internal-error"),Ig(h,t.name),Ig(p,t.name),Ig(m,t.name),Ig(g,t.name),Ig(y,t.name),Ig(v,t.name);const A=new am({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return C&&Array.isArray(C)&&(A.providerData=C.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new eE;i.updateFromServerResponse(n);const s=new am({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await S$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];on(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?_Pe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new eE;a.updateFromIdToken(r);const u=new am({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new UV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ohe=new Map;function um(e){qm(e instanceof Function,"Expected a class definition");let t=ohe.get(e);return t?(qm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ohe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wPe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}wPe.type="NONE";const ahe=wPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(e,t,n){return`firebase:${e}:${t}:${n}`}class tE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=wO(this.userKey,i.apiKey,s),this.fullPersistenceKey=wO("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?am._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new tE(um(ahe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||um(ahe);const o=wO(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=am._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new tE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new tE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uhe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(SPe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(EPe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CPe(t))return"Blackberry";if(APe(t))return"Webos";if(YJ(t))return"Safari";if((t.includes("chrome/")||xPe(t))&&!t.includes("edge/"))return"Chrome";if(TPe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EPe(e=zo()){return/firefox\//i.test(e)}function YJ(e=zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xPe(e=zo()){return/crios\//i.test(e)}function SPe(e=zo()){return/iemobile/i.test(e)}function TPe(e=zo()){return/android/i.test(e)}function CPe(e=zo()){return/blackberry/i.test(e)}function APe(e=zo()){return/webos/i.test(e)}function O4(e=zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function eOt(e=zo()){var t;return O4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function tOt(){return mNt()&&document.documentMode===10}function IPe(e=zo()){return O4(e)||TPe(e)||APe(e)||CPe(e)||/windows phone/i.test(e)||SPe(e)}function nOt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kPe(e,t=[]){let n;switch(e){case"Browser":n=uhe(zo());break;case"Worker":n=`${uhe(zo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rOt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iOt(e,t={}){return xS(e,"GET","/v2/passwordPolicy",P4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sOt=6;class oOt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:sOt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aOt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lhe(this),this.idTokenSubscription=new lhe(this),this.beforeStateQueue=new rOt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pPe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=um(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await tE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await bPe(this,{idToken:t}),r=await am._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(ph(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await S$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=zPt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(ph(this.app))return Promise.reject(D0(this));const n=t?li(t):null;return n&&on(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&on(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return ph(this.app)?Promise.reject(D0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return ph(this.app)?Promise.reject(D0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(um(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await iOt(this),n=new oOt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new wS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZPt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&um(t)||this._popupRedirectResolver;on(n,this,"argument-error"),this.redirectPersistenceManager=await tE.create(this,[um(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=kPe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&FPt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ik(e){return li(e)}class lhe{constructor(t){this.auth=t,this.observer=null,this.addObserver=ENt(n=>this.observer=n)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uOt(e){KJ=e}function lOt(e){return KJ.loadJS(e)}function cOt(){return KJ.gapiScript}function fOt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dOt(e,t){const n=ES(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(qA(s,t??{}))return i;Gh(i,"already-initialized")}return n.initialize({options:t})}function hOt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(um);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function pOt(e,t,n){const r=Ik(e);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=RPe(t),{host:o,port:a}=mOt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),gOt()}function RPe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mOt(e){const t=RPe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:che(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:che(o)}}}function che(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function gOt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NPe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return om("not implemented")}_getIdTokenResponse(t){return om("not implemented")}_linkToIdToken(t,n){return om("not implemented")}_getReauthenticationResolver(t){return om("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(e,t){return yPe(e,"POST","/v1/accounts:signInWithIdp",P4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yOt="http://localhost";class sb extends NPe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new sb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Gh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=DI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new sb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return nE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,nE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,nE(t,n)}buildRequest(){const t={requestUri:yOt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Ck(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk extends XJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends kk{constructor(){super("facebook.com")}static credential(t){return sb._fromParams({providerId:Jg.PROVIDER_ID,signInMethod:Jg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Jg.credentialFromTaggedObject(t)}static credentialFromError(t){return Jg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Jg.credential(t.oauthAccessToken)}catch{return null}}}Jg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends kk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return sb._fromParams({providerId:Jp.PROVIDER_ID,signInMethod:Jp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Jp.credentialFromTaggedObject(t)}static credentialFromError(t){return Jp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Jp.credential(n,r)}catch{return null}}}Jp.GOOGLE_SIGN_IN_METHOD="google.com";Jp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg extends kk{constructor(){super("github.com")}static credential(t){return sb._fromParams({providerId:Zg.PROVIDER_ID,signInMethod:Zg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Zg.credentialFromTaggedObject(t)}static credentialFromError(t){return Zg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Zg.credential(t.oauthAccessToken)}catch{return null}}}Zg.GITHUB_SIGN_IN_METHOD="github.com";Zg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends kk{constructor(){super("twitter.com")}static credential(t,n){return sb._fromParams({providerId:e0.PROVIDER_ID,signInMethod:e0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e0.credentialFromTaggedObject(t)}static credentialFromError(t){return e0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e0.credential(n,r)}catch{return null}}}e0.TWITTER_SIGN_IN_METHOD="twitter.com";e0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vOt(e,t){return yPe(e,"POST","/v1/accounts:signUp",P4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await am._fromIdTokenResponse(t,r,i),o=fhe(r);return new cy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=fhe(r);return new cy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function fhe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bOt(e){var t;if(ph(e.app))return Promise.reject(D0(e));const n=Ik(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new cy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await vOt(n,{returnSecureToken:!0}),i=await cy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T$ extends dp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,T$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new T$(t,n,r,i)}}function PPe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?T$._fromErrorAndOperation(e,s,t,r):s})}async function _Ot(e,t,n=!1){const r=await GA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wOt(e,t,n=!1){const{auth:r}=e;if(ph(r.app))return Promise.reject(D0(r));const i="reauthenticate";try{const s=await GA(e,PPe(r,i,t,e),n);on(s.idToken,r,"internal-error");const o=GJ(s.idToken);on(o,r,"internal-error");const{sub:a}=o;return on(e.uid===a,r,"user-mismatch"),cy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Gh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EOt(e,t,n=!1){if(ph(e.app))return Promise.reject(D0(e));const r="signIn",i=await PPe(e,r,t),s=await cy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function xOt(e,t,n,r){return li(e).onIdTokenChanged(t,n,r)}function SOt(e,t,n){return li(e).beforeAuthStateChanged(t,n)}function TOt(e,t,n,r){return li(e).onAuthStateChanged(t,n,r)}function COt(e){return li(e).signOut()}const C$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OPe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(C$,"1"),this.storage.removeItem(C$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AOt(){const e=zo();return YJ(e)||O4(e)}const IOt=1e3,kOt=10;class DPe extends OPe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=AOt()&&nOt(),this.fallbackToPolling=IPe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);tOt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,kOt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},IOt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}DPe.type="LOCAL";const ROt=DPe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Pe extends OPe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}$Pe.type="SESSION";const MPe=$Pe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NOt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new D4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await NOt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class POt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=QJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(){return window}function OOt(e){Ah().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LPe(){return typeof Ah().WorkerGlobalScope<"u"&&typeof Ah().importScripts=="function"}async function DOt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $Ot(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function MOt(){return LPe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FPe="firebaseLocalStorageDb",LOt=1,A$="firebaseLocalStorage",jPe="fbase_key";class Rk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $4(e,t){return e.transaction([A$],t?"readwrite":"readonly").objectStore(A$)}function FOt(){const e=indexedDB.deleteDatabase(FPe);return new Rk(e).toPromise()}function zV(){const e=indexedDB.open(FPe,LOt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(A$,{keyPath:jPe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(A$)?t(r):(r.close(),await FOt(),t(await zV()))})})}async function dhe(e,t,n){const r=$4(e,!0).put({[jPe]:t,value:n});return new Rk(r).toPromise()}async function jOt(e,t){const n=$4(e,!1).get(t),r=await new Rk(n).toPromise();return r===void 0?null:r.value}function hhe(e,t){const n=$4(e,!0).delete(t);return new Rk(n).toPromise()}const BOt=800,UOt=3;class BPe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>UOt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LPe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D4._getInstance(MOt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await DOt(),!this.activeServiceWorker)return;this.sender=new POt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||$Ot()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await zV();return await dhe(t,C$,"1"),await hhe(t,C$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dhe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>jOt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>hhe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=$4(i,!1).getAll();return new Rk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BOt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BPe.type="LOCAL";const zOt=BPe;new Ak(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UPe(e,t){return t?um(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ extends NPe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return nE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return nE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return nE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function VOt(e){return EOt(e.auth,new JJ(e),e.bypassAuthState)}function HOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),wOt(n,new JJ(e),e.bypassAuthState)}async function qOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),_Ot(n,new JJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zPe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return VOt;case"linkViaPopup":case"linkViaRedirect":return qOt;case"reauthViaPopup":case"reauthViaRedirect":return HOt;default:Gh(this.auth,"internal-error")}}resolve(t){qm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){qm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WOt=new Ak(2e3,1e4);async function GOt(e,t,n){if(ph(e.app))return Promise.reject(Qf(e,"operation-not-supported-in-this-environment"));const r=Ik(e);jPt(e,t,XJ);const i=UPe(r,n);return new y1(r,"signInViaPopup",t,i).executeNotNull()}class y1 extends zPe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,y1.currentPopupAction&&y1.currentPopupAction.cancel(),y1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return on(t,this.auth,"internal-error"),t}async onExecution(){qm(this.filter.length===1,"Popup operations only handle one event");const t=QJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,WOt.get())};t()}}y1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YOt="pendingRedirect",EO=new Map;class KOt extends zPe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=EO.get(this.auth._key());if(!t){try{const r=await XOt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}EO.set(this.auth._key(),t)}return this.bypassAuthState||EO.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XOt(e,t){const n=ZOt(t),r=JOt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QOt(e,t){EO.set(e._key(),t)}function JOt(e){return um(e._redirectPersistence)}function ZOt(e){return wO(YOt,e.config.apiKey,e.name)}async function eDt(e,t,n=!1){if(ph(e.app))return Promise.reject(D0(e));const r=Ik(e),i=UPe(r,t),o=await new KOt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tDt=10*60*1e3;class nDt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!rDt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!VPe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=tDt&&this.cachedEventUids.clear(),this.cachedEventUids.has(phe(t))}saveEventToCache(t){this.cachedEventUids.add(phe(t)),this.lastProcessedEventTime=Date.now()}}function phe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function VPe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function rDt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VPe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iDt(e,t={}){return xS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sDt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oDt=/^https?/;async function aDt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await iDt(e);for(const n of t)try{if(uDt(n))return}catch{}Gh(e,"unauthorized-domain")}function uDt(e){const t=BV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!oDt.test(n))return!1;if(sDt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lDt=new Ak(3e4,6e4);function mhe(){const e=Ah().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function cDt(e){return new Promise((t,n)=>{var r,i,s;function o(){mhe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mhe(),n(Qf(e,"network-request-failed"))},timeout:lDt.get()})}if(!((i=(r=Ah().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Ah().gapi)===null||s===void 0)&&s.load)o();else{const a=fOt("iframefcb");return Ah()[a]=()=>{gapi.load?o():n(Qf(e,"network-request-failed"))},lOt(`${cOt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw xO=null,t})}let xO=null;function fDt(e){return xO=xO||cDt(e),xO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dDt=new Ak(5e3,15e3),hDt="__/auth/iframe",pDt="emulator/auth/iframe",mDt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gDt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yDt(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?WJ(t,pDt):`https://${e.config.authDomain}/${hDt}`,r={apiKey:t.apiKey,appName:e.name,v:Hb},i=gDt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ck(r).slice(1)}`}async function vDt(e){const t=await fDt(e),n=Ah().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:yDt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mDt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Qf(e,"network-request-failed"),a=Ah().setTimeout(()=>{s(o)},dDt.get());function u(){Ah().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bDt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_Dt=500,wDt=600,EDt="_blank",xDt="http://localhost";class ghe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SDt(e,t,n,r=_Dt,i=wDt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},bDt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=zo().toLowerCase();n&&(a=xPe(l)?EDt:n),EPe(l)&&(t=t||xDt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(eOt(l)&&a!=="_self")return TDt(t||"",a),new ghe(null);const f=window.open(t||"",a,c);on(f,e,"popup-blocked");try{f.focus()}catch{}return new ghe(f)}function TDt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CDt="__/auth/handler",ADt="emulator/auth/handler",IDt=encodeURIComponent("fac");async function yhe(e,t,n,r,i,s){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Hb,eventId:i};if(t instanceof XJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",wNt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof kk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${IDt}=${encodeURIComponent(u)}`:"";return`${kDt(e)}?${Ck(a).slice(1)}${l}`}function kDt({config:e}){return e.emulator?WJ(e,ADt):`https://${e.authDomain}/${CDt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="webStorageSupport";class RDt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MPe,this._completeRedirectFn=eDt,this._overrideRedirectResult=QOt}async _openPopup(t,n,r,i){var s;qm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yhe(t,n,r,BV(),i);return SDt(t,o,QJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await yhe(t,n,r,BV(),i);return OOt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await vDt(t),r=new nDt(t);return n.register("authEvent",i=>(on(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(j9,{type:j9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[j9];o!==void 0&&n(!!o),Gh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aDt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return IPe()||YJ()||O4()}}const HPe=RDt;var vhe="@firebase/auth",bhe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NDt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PDt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ODt(e){Hm(new Wh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;on(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kPe(e)},l=new aOt(r,i,s,u);return hOt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Hm(new Wh("auth-internal",t=>{const n=Ik(t.getProvider("auth").getImmediate());return(r=>new NDt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xf(vhe,bhe,PDt(e)),Xf(vhe,bhe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DDt=5*60,$Dt=aPe("authIdTokenMaxAge")||DDt;let _he=null;const MDt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$Dt)return;const i=n==null?void 0:n.token;_he!==i&&(_he=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I$(e=VJ()){const t=ES(e,"auth");if(t.isInitialized())return t.getImmediate();const n=dOt(e,{popupRedirectResolver:HPe,persistence:[zOt,ROt,MPe]}),r=aPe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=MDt(s.toString());SOt(n,o,()=>o(n.currentUser)),xOt(n,a=>o(a))}}const i=sPe("auth");return i&&pOt(n,`http://${i}`),n}function LDt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}uOt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Qf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",LDt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ODt("Browser");var FDt="firebase",jDt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xf(FDt,jDt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qPe="firebasestorage.googleapis.com",WPe="storageBucket",BDt=2*60*1e3,UDt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends dp{constructor(t,n,r=0){super(B9(t),`Firebase Storage: ${n} (${B9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return B9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function B9(e){return"storage/"+e}function ZJ(){const e="An unknown error occurred, please check the error payload for server response.";return new rs(ts.UNKNOWN,e)}function zDt(e){return new rs(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function VDt(e){return new rs(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HDt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rs(ts.UNAUTHENTICATED,e)}function qDt(){return new rs(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WDt(e){return new rs(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function GDt(){return new rs(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YDt(){return new rs(ts.CANCELED,"User canceled the upload/download.")}function KDt(e){return new rs(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function XDt(e){return new rs(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function QDt(){return new rs(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WPe+"' property when initializing the app?")}function JDt(){return new rs(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZDt(){return new rs(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function e3t(e){return new rs(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function VV(e){return new rs(ts.INVALID_ARGUMENT,e)}function GPe(){return new rs(ts.APP_DELETED,"The Firebase app was deleted.")}function t3t(e){return new rs(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function T2(e,t){return new rs(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function AT(e){throw new rs(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ka.makeFromUrl(t,n)}catch{return new Ka(t,"")}if(r.path==="")return r;throw XDt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===qPe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const x=b[w],C=x.regex.exec(t);if(C){const E=C[x.indices.bucket];let S=C[x.indices.path];S||(S=""),r=new Ka(E,S),x.postModify(r);break}}if(r==null)throw KDt(t);return r}}class n3t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function i3t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3t(e){return e!==void 0}function o3t(e){return typeof e=="object"&&!Array.isArray(e)}function eZ(e){return typeof e=="string"||e instanceof String}function whe(e){return tZ()&&e instanceof Blob}function tZ(){return typeof Blob<"u"}function HV(e,t,n,r){if(r<t)throw VV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw VV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function YPe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(I1||(I1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new HN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===I1.NO_ERROR,u=s.getStatus();if(!a||a3t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===I1.ABORT;r(!1,new HN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new HN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());s3t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=ZJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?GPe():YDt();o(u)}else{const u=GDt();o(u)}};this.canceled_?n(!1,new HN(!1,null,!0)):this.backoffId_=r3t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&i3t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class HN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function l3t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function c3t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function f3t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function d3t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function h3t(e,t,n,r,i,s,o=!0){const a=YPe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return f3t(l,t),l3t(l,n),c3t(l,s),d3t(l,r),new u3t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function m3t(...e){const t=p3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(tZ())return new Blob(e);throw new rs(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function g3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3t(e){if(typeof atob>"u")throw e3t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class U9{constructor(t,n){this.data=t,this.contentType=n||null}}function v3t(e,t){switch(e){case mh.RAW:return new U9(KPe(t));case mh.BASE64:case mh.BASE64URL:return new U9(XPe(e,t));case mh.DATA_URL:return new U9(_3t(t),w3t(t))}throw ZJ()}function KPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function b3t(e){let t;try{t=decodeURIComponent(e)}catch{throw T2(mh.DATA_URL,"Malformed data URL.")}return KPe(t)}function XPe(e,t){switch(e){case mh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw T2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case mh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw T2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=y3t(t)}catch(i){throw i.message.includes("polyfill")?i:T2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class QPe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw T2(mh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=E3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function _3t(e){const t=new QPe(e);return t.base64?XPe(mh.BASE64,t.rest):b3t(t.rest)}function w3t(e){return new QPe(e).contentType}function E3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(t,n){let r=0,i="";whe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(whe(this.data_)){const r=this.data_,i=g3t(r,t,n);return i===null?null:new t0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new t0(r,!0)}}static getBlob(...t){if(tZ()){const n=t.map(r=>r instanceof t0?r.data_:r);return new t0(m3t.apply(null,n))}else{const n=t.map(o=>eZ(o)?v3t(mh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nZ(e){let t;try{t=JSON.parse(e)}catch{return null}return o3t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function S3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function JPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3t(e,t){return t}class Ma{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||T3t}}let qN=null;function C3t(e){return!eZ(e)||e.length<2?e:JPe(e)}function ZPe(){if(qN)return qN;const e=[];e.push(new Ma("bucket")),e.push(new Ma("generation")),e.push(new Ma("metageneration")),e.push(new Ma("name","fullPath",!0));function t(s,o){return C3t(o)}const n=new Ma("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ma("size");return i.xform=r,e.push(i),e.push(new Ma("timeCreated")),e.push(new Ma("updated")),e.push(new Ma("md5Hash",null,!0)),e.push(new Ma("cacheControl",null,!0)),e.push(new Ma("contentDisposition",null,!0)),e.push(new Ma("contentEncoding",null,!0)),e.push(new Ma("contentLanguage",null,!0)),e.push(new Ma("contentType",null,!0)),e.push(new Ma("metadata","customMetadata",!0)),qN=e,qN}function A3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ka(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function I3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return A3t(r,e),r}function eOe(e,t,n){const r=nZ(t);return r===null?null:I3t(e,r,n)}function k3t(e,t,n,r){const i=nZ(t);if(i===null||!eZ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Nk(d,n,r),p=YPe({alt:"media",token:l});return h+p})[0]}function R3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ehe="prefixes",xhe="items";function N3t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ehe])for(const i of n[Ehe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ka(t,s));r.prefixes.push(o)}if(n[xhe])for(const i of n[xhe]){const s=e._makeStorageReference(new Ka(t,i.name));r.items.push(s)}return r}function P3t(e,t,n){const r=nZ(n);return r===null?null:N3t(e,t,r)}class M4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(e){if(!e)throw ZJ()}function O3t(e,t){function n(r,i){const s=eOe(e,i,t);return rZ(s!==null),s}return n}function D3t(e,t){function n(r,i){const s=P3t(e,t,i);return rZ(s!==null),s}return n}function $3t(e,t){function n(r,i){const s=eOe(e,i,t);return rZ(s!==null),k3t(s,i,e.host,e._protocol)}return n}function iZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=qDt():i=HDt():n.getStatus()===402?i=VDt(e.bucket):n.getStatus()===403?i=WDt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function tOe(e){const t=iZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=zDt(e.path)),s.serverResponse=i.serverResponse,s}return n}function M3t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Nk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new M4(a,u,D3t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=iZ(t),c}function L3t(e,t,n){const r=t.fullServerUrl(),i=Nk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new M4(i,s,$3t(e,n),o);return a.errorHandler=tOe(t),a}function F3t(e,t){const n=t.fullServerUrl(),r=Nk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new M4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=tOe(t),a}function j3t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function B3t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=j3t(null,t)),r}function U3t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=B3t(t,r,i),c=R3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=t0.getBlob(f,r,d);if(h===null)throw JDt();const p={name:l.fullPath},m=Nk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new M4(m,g,O3t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=iZ(t),v}class z3t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=I1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=I1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=I1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw AT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw AT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw AT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw AT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw AT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class V3t extends z3t{initXhr(){this.xhr_.responseType="text"}}function L4(){return new V3t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n){this._service=t,n instanceof Ka?this._location=n:this._location=Ka.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ob(t,n)}get root(){const t=new Ka(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JPe(this._location.path)}get storage(){return this._service}get parent(){const t=x3t(this._location.path);if(t===null)return null;const n=new Ka(this._location.bucket,t);return new ob(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw t3t(t)}}function H3t(e,t,n){e._throwIfRoot("uploadBytes");const r=U3t(e.storage,e._location,ZPe(),new t0(t,!0),n);return e.storage.makeRequestWithTokens(r,L4).then(i=>({metadata:i,ref:e}))}function q3t(e){const t={prefixes:[],items:[]};return nOe(e,t).then(()=>t)}async function nOe(e,t,n){const i=await W3t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await nOe(e,t,i.nextPageToken)}function W3t(e,t){t!=null&&typeof t.maxResults=="number"&&HV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=M3t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,L4)}function G3t(e){e._throwIfRoot("getDownloadURL");const t=L3t(e.storage,e._location,ZPe());return e.storage.makeRequestWithTokens(t,L4).then(n=>{if(n===null)throw ZDt();return n})}function Y3t(e){e._throwIfRoot("deleteObject");const t=F3t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,L4)}function K3t(e,t){const n=S3t(e._location.path,t),r=new Ka(e._location.bucket,n);return new ob(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3t(e){return/^[A-Za-z]+:\/\//.test(e)}function Q3t(e,t){return new ob(e,t)}function rOe(e,t){if(e instanceof sZ){const n=e;if(n._bucket==null)throw QDt();const r=new ob(n,n._bucket);return t!=null?rOe(r,t):r}else return t!==void 0?K3t(e,t):e}function J3t(e,t){if(t&&X3t(t)){if(e instanceof sZ)return Q3t(e,t);throw VV("To use ref(service, url), the first argument must be a Storage instance.")}else return rOe(e,t)}function She(e,t){const n=t==null?void 0:t[WPe];return n==null?null:Ka.makeFromBucketSpec(n,e)}function Z3t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:cNt(i,e.app.options.projectId))}class sZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=qPe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BDt,this._maxUploadRetryTime=UDt,this._requests=new Set,i!=null?this._bucket=Ka.makeFromBucketSpec(i,this._host):this._bucket=She(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ka.makeFromBucketSpec(this._url,t):this._bucket=She(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){HV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){HV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ob(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new n3t(GPe());{const o=h3t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const The="@firebase/storage",Che="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iOe="storage";function WN(e,t,n){return e=li(e),H3t(e,t,n)}function IT(e){return e=li(e),q3t(e)}function mv(e){return e=li(e),G3t(e)}function Ahe(e){return e=li(e),Y3t(e)}function sa(e,t){return e=li(e),J3t(e,t)}function k_(e=VJ(),t){e=li(e);const r=ES(e,iOe).getImmediate({identifier:t}),i=lNt("storage");return i&&e$t(r,...i),r}function e$t(e,t,n,r={}){Z3t(e,t,n,r)}function t$t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new sZ(n,r,i,t,Hb)}function n$t(){Hm(new Wh(iOe,t$t,"PUBLIC").setMultipleInstances(!0)),Xf(The,Che,""),Xf(The,Che,"esm2017")}n$t();var Ihe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k1,sOe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,S){function A(){}A.prototype=S.prototype,E.D=S.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(k,R,D){for(var P=Array(arguments.length-2),O=2;O<arguments.length;O++)P[O-2]=arguments[O];return S.prototype[R].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,S,A){A||(A=0);var k=Array(16);if(typeof S=="string")for(var R=0;16>R;++R)k[R]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(R=0;16>R;++R)k[R]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=E.g[0],A=E.g[1],R=E.g[2];var D=E.g[3],P=S+(D^A&(R^D))+k[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=D+(R^S&(A^R))+k[1]+3905402710&4294967295,D=S+(P<<12&4294967295|P>>>20),P=R+(A^D&(S^A))+k[2]+606105819&4294967295,R=D+(P<<17&4294967295|P>>>15),P=A+(S^R&(D^S))+k[3]+3250441966&4294967295,A=R+(P<<22&4294967295|P>>>10),P=S+(D^A&(R^D))+k[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=D+(R^S&(A^R))+k[5]+1200080426&4294967295,D=S+(P<<12&4294967295|P>>>20),P=R+(A^D&(S^A))+k[6]+2821735955&4294967295,R=D+(P<<17&4294967295|P>>>15),P=A+(S^R&(D^S))+k[7]+4249261313&4294967295,A=R+(P<<22&4294967295|P>>>10),P=S+(D^A&(R^D))+k[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=D+(R^S&(A^R))+k[9]+2336552879&4294967295,D=S+(P<<12&4294967295|P>>>20),P=R+(A^D&(S^A))+k[10]+4294925233&4294967295,R=D+(P<<17&4294967295|P>>>15),P=A+(S^R&(D^S))+k[11]+2304563134&4294967295,A=R+(P<<22&4294967295|P>>>10),P=S+(D^A&(R^D))+k[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=D+(R^S&(A^R))+k[13]+4254626195&4294967295,D=S+(P<<12&4294967295|P>>>20),P=R+(A^D&(S^A))+k[14]+2792965006&4294967295,R=D+(P<<17&4294967295|P>>>15),P=A+(S^R&(D^S))+k[15]+1236535329&4294967295,A=R+(P<<22&4294967295|P>>>10),P=S+(R^D&(A^R))+k[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=D+(A^R&(S^A))+k[6]+3225465664&4294967295,D=S+(P<<9&4294967295|P>>>23),P=R+(S^A&(D^S))+k[11]+643717713&4294967295,R=D+(P<<14&4294967295|P>>>18),P=A+(D^S&(R^D))+k[0]+3921069994&4294967295,A=R+(P<<20&4294967295|P>>>12),P=S+(R^D&(A^R))+k[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=D+(A^R&(S^A))+k[10]+38016083&4294967295,D=S+(P<<9&4294967295|P>>>23),P=R+(S^A&(D^S))+k[15]+3634488961&4294967295,R=D+(P<<14&4294967295|P>>>18),P=A+(D^S&(R^D))+k[4]+3889429448&4294967295,A=R+(P<<20&4294967295|P>>>12),P=S+(R^D&(A^R))+k[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=D+(A^R&(S^A))+k[14]+3275163606&4294967295,D=S+(P<<9&4294967295|P>>>23),P=R+(S^A&(D^S))+k[3]+4107603335&4294967295,R=D+(P<<14&4294967295|P>>>18),P=A+(D^S&(R^D))+k[8]+1163531501&4294967295,A=R+(P<<20&4294967295|P>>>12),P=S+(R^D&(A^R))+k[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=D+(A^R&(S^A))+k[2]+4243563512&4294967295,D=S+(P<<9&4294967295|P>>>23),P=R+(S^A&(D^S))+k[7]+1735328473&4294967295,R=D+(P<<14&4294967295|P>>>18),P=A+(D^S&(R^D))+k[12]+2368359562&4294967295,A=R+(P<<20&4294967295|P>>>12),P=S+(A^R^D)+k[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=D+(S^A^R)+k[8]+2272392833&4294967295,D=S+(P<<11&4294967295|P>>>21),P=R+(D^S^A)+k[11]+1839030562&4294967295,R=D+(P<<16&4294967295|P>>>16),P=A+(R^D^S)+k[14]+4259657740&4294967295,A=R+(P<<23&4294967295|P>>>9),P=S+(A^R^D)+k[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=D+(S^A^R)+k[4]+1272893353&4294967295,D=S+(P<<11&4294967295|P>>>21),P=R+(D^S^A)+k[7]+4139469664&4294967295,R=D+(P<<16&4294967295|P>>>16),P=A+(R^D^S)+k[10]+3200236656&4294967295,A=R+(P<<23&4294967295|P>>>9),P=S+(A^R^D)+k[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=D+(S^A^R)+k[0]+3936430074&4294967295,D=S+(P<<11&4294967295|P>>>21),P=R+(D^S^A)+k[3]+3572445317&4294967295,R=D+(P<<16&4294967295|P>>>16),P=A+(R^D^S)+k[6]+76029189&4294967295,A=R+(P<<23&4294967295|P>>>9),P=S+(A^R^D)+k[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=D+(S^A^R)+k[12]+3873151461&4294967295,D=S+(P<<11&4294967295|P>>>21),P=R+(D^S^A)+k[15]+530742520&4294967295,R=D+(P<<16&4294967295|P>>>16),P=A+(R^D^S)+k[2]+3299628645&4294967295,A=R+(P<<23&4294967295|P>>>9),P=S+(R^(A|~D))+k[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=D+(A^(S|~R))+k[7]+1126891415&4294967295,D=S+(P<<10&4294967295|P>>>22),P=R+(S^(D|~A))+k[14]+2878612391&4294967295,R=D+(P<<15&4294967295|P>>>17),P=A+(D^(R|~S))+k[5]+4237533241&4294967295,A=R+(P<<21&4294967295|P>>>11),P=S+(R^(A|~D))+k[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=D+(A^(S|~R))+k[3]+2399980690&4294967295,D=S+(P<<10&4294967295|P>>>22),P=R+(S^(D|~A))+k[10]+4293915773&4294967295,R=D+(P<<15&4294967295|P>>>17),P=A+(D^(R|~S))+k[1]+2240044497&4294967295,A=R+(P<<21&4294967295|P>>>11),P=S+(R^(A|~D))+k[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=D+(A^(S|~R))+k[15]+4264355552&4294967295,D=S+(P<<10&4294967295|P>>>22),P=R+(S^(D|~A))+k[6]+2734768916&4294967295,R=D+(P<<15&4294967295|P>>>17),P=A+(D^(R|~S))+k[13]+1309151649&4294967295,A=R+(P<<21&4294967295|P>>>11),P=S+(R^(A|~D))+k[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=D+(A^(S|~R))+k[11]+3174756917&4294967295,D=S+(P<<10&4294967295|P>>>22),P=R+(S^(D|~A))+k[2]+718787259&4294967295,R=D+(P<<15&4294967295|P>>>17),P=A+(D^(R|~S))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+S&4294967295,E.g[1]=E.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+D&4294967295}r.prototype.u=function(E,S){S===void 0&&(S=E.length);for(var A=S-this.blockSize,k=this.B,R=this.h,D=0;D<S;){if(R==0)for(;D<=A;)i(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<S;)if(k[R++]=E.charCodeAt(D++),R==this.blockSize){i(this,k),R=0;break}}else for(;D<S;)if(k[R++]=E[D++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=S},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var S=1;S<E.length-8;++S)E[S]=0;var A=8*this.o;for(S=E.length-8;S<E.length;++S)E[S]=A&255,A/=256;for(this.u(E),E=Array(16),S=A=0;4>S;++S)for(var k=0;32>k;k+=8)E[A++]=this.g[S]>>>k&255;return E};function s(E,S){var A=a;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=S(E)}function o(E,S){this.h=S;for(var A=[],k=!0,R=E.length-1;0<=R;R--){var D=E[R]|0;k&&D==S||(A[R]=D,k=!1)}this.g=A}var a={};function u(E){return-128<=E&&128>E?s(E,function(S){return new o([S|0],0>S?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return g(l(-E));for(var S=[],A=1,k=0;E>=A;k++)S[k]=E/A|0,A*=4294967296;return new o(S,0)}function c(E,S){if(E.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(E.charAt(0)=="-")return g(c(E.substring(1),S));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(S,8)),k=f,R=0;R<E.length;R+=8){var D=Math.min(8,E.length-R),P=parseInt(E.substring(R,R+D),S);8>D?(D=l(Math.pow(S,D)),k=k.j(D).add(l(P))):(k=k.j(A),k=k.add(l(P)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var E=0,S=1,A=0;A<this.g.length;A++){var k=this.i(A);E+=(0<=k?k:4294967296+k)*S,S*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(p(this))return"0";if(m(this))return"-"+g(this).toString(E);for(var S=l(Math.pow(E,6)),A=this,k="";;){var R=w(A,S).g;A=y(A,R.j(S));var D=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=R,p(A))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function p(E){if(E.h!=0)return!1;for(var S=0;S<E.g.length;S++)if(E.g[S]!=0)return!1;return!0}function m(E){return E.h==-1}e.l=function(E){return E=y(this,E),m(E)?-1:p(E)?0:1};function g(E){for(var S=E.g.length,A=[],k=0;k<S;k++)A[k]=~E.g[k];return new o(A,~E.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(E){for(var S=Math.max(this.g.length,E.g.length),A=[],k=0,R=0;R<=S;R++){var D=k+(this.i(R)&65535)+(E.i(R)&65535),P=(D>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);k=P>>>16,D&=65535,P&=65535,A[R]=P<<16|D}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(E,S){return E.add(g(S))}e.j=function(E){if(p(this)||p(E))return f;if(m(this))return m(E)?g(this).j(g(E)):g(g(this).j(E));if(m(E))return g(this.j(g(E)));if(0>this.l(h)&&0>E.l(h))return l(this.m()*E.m());for(var S=this.g.length+E.g.length,A=[],k=0;k<2*S;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<E.g.length;R++){var D=this.i(k)>>>16,P=this.i(k)&65535,O=E.i(R)>>>16,L=E.i(R)&65535;A[2*k+2*R]+=P*L,v(A,2*k+2*R),A[2*k+2*R+1]+=D*L,v(A,2*k+2*R+1),A[2*k+2*R+1]+=P*O,v(A,2*k+2*R+1),A[2*k+2*R+2]+=D*O,v(A,2*k+2*R+2)}for(k=0;k<S;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=S;k<2*S;k++)A[k]=0;return new o(A,0)};function v(E,S){for(;(E[S]&65535)!=E[S];)E[S+1]+=E[S]>>>16,E[S]&=65535,S++}function b(E,S){this.g=E,this.h=S}function w(E,S){if(p(S))throw Error("division by zero");if(p(E))return new b(f,f);if(m(E))return S=w(g(E),S),new b(g(S.g),g(S.h));if(m(S))return S=w(E,g(S)),new b(g(S.g),S.h);if(30<E.g.length){if(m(E)||m(S))throw Error("slowDivide_ only works with positive integers.");for(var A=d,k=S;0>=k.l(E);)A=x(A),k=x(k);var R=C(A,1),D=C(k,1);for(k=C(k,2),A=C(A,2);!p(k);){var P=D.add(k);0>=P.l(E)&&(R=R.add(A),D=P),k=C(k,1),A=C(A,1)}return S=y(E,R.j(S)),new b(R,S)}for(R=f;0<=E.l(S);){for(A=Math.max(1,Math.floor(E.m()/S.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=l(A),P=D.j(S);m(P)||0<P.l(E);)A-=k,D=l(A),P=D.j(S);p(D)&&(D=d),R=R.add(D),E=y(E,P)}return new b(R,E)}e.A=function(E){return w(this,E).h},e.and=function(E){for(var S=Math.max(this.g.length,E.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)&E.i(k);return new o(A,this.h&E.h)},e.or=function(E){for(var S=Math.max(this.g.length,E.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)|E.i(k);return new o(A,this.h|E.h)},e.xor=function(E){for(var S=Math.max(this.g.length,E.g.length),A=[],k=0;k<S;k++)A[k]=this.i(k)^E.i(k);return new o(A,this.h^E.h)};function x(E){for(var S=E.g.length+1,A=[],k=0;k<S;k++)A[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(A,E.h)}function C(E,S){var A=S>>5;S%=32;for(var k=E.g.length-A,R=[],D=0;D<k;D++)R[D]=0<S?E.i(D+A)>>>S|E.i(D+A+1)<<32-S:E.i(D+A);return new o(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sOe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,k1=o}).apply(typeof Ihe<"u"?Ihe:typeof self<"u"?self:typeof window<"u"?window:{});var GN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oOe,aOe,xC,uOe,SO,qV,lOe,cOe,fOe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,M,q){return T==Array.prototype||T==Object.prototype||(T[M]=q.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof GN=="object"&&GN];for(var M=0;M<T.length;++M){var q=T[M];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var r=n(this);function i(T,M){if(M)e:{var q=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var _e=T[Q];if(!(_e in q))break e;q=q[_e]}T=T[T.length-1],Q=q[T],M=M(Q),M!=Q&&M!=null&&t(q,T,{configurable:!0,writable:!0,value:M})}}function s(T,M){T instanceof String&&(T+="");var q=0,Q=!1,_e={next:function(){if(!Q&&q<T.length){var Oe=q++;return{value:M(Oe,T[Oe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(T){return T||function(){return s(this,function(M,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(T){var M=typeof T;return M=M!="object"?M:T?Array.isArray(T)?"array":M:"null",M=="array"||M=="object"&&typeof T.length=="number"}function l(T){var M=typeof T;return M=="object"&&T!=null||M=="function"}function c(T,M,q){return T.call.apply(T.bind,arguments)}function f(T,M,q){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),T.apply(M,_e)}}return function(){return T.apply(M,arguments)}}function d(T,M,q){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(T,M){var q=Array.prototype.slice.call(arguments,1);return function(){var Q=q.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,M){function q(){}q.prototype=M.prototype,T.aa=M.prototype,T.prototype=new q,T.prototype.constructor=T,T.Qb=function(Q,_e,Oe){for(var ct=Array(arguments.length-2),Xr=2;Xr<arguments.length;Xr++)ct[Xr-2]=arguments[Xr];return M.prototype[_e].apply(Q,ct)}}function m(T){const M=T.length;if(0<M){const q=Array(M);for(let Q=0;Q<M;Q++)q[Q]=T[Q];return q}return[]}function g(T,M){for(let q=1;q<arguments.length;q++){const Q=arguments[q];if(u(Q)){const _e=T.length||0,Oe=Q.length||0;T.length=_e+Oe;for(let ct=0;ct<Oe;ct++)T[_e+ct]=Q[ct]}else T.push(Q)}}class y{constructor(M,q){this.i=M,this.j=q,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function v(T){return/^[\s\xa0]*$/.test(T)}function b(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var x=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function C(T,M,q){for(const Q in T)M.call(q,T[Q],Q,T)}function E(T,M){for(const q in T)M.call(void 0,T[q],q,T)}function S(T){const M={};for(const q in T)M[q]=T[q];return M}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(T,M){let q,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(q in Q)T[q]=Q[q];for(let Oe=0;Oe<A.length;Oe++)q=A[Oe],Object.prototype.hasOwnProperty.call(Q,q)&&(T[q]=Q[q])}}function R(T){var M=1;T=T.split(":");const q=[];for(;0<M&&T.length;)q.push(T.shift()),M--;return T.length&&q.push(T.join(":")),q}function D(T){a.setTimeout(()=>{throw T},0)}function P(){var T=H;let M=null;return T.g&&(M=T.g,T.g=T.g.next,T.g||(T.h=null),M.next=null),M}class O{constructor(){this.h=this.g=null}add(M,q){const Q=L.get();Q.set(M,q),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var L=new y(()=>new j,T=>T.reset());class j{constructor(){this.next=this.g=this.h=null}set(M,q){this.h=M,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new O,$=()=>{const T=a.Promise.resolve(void 0);B=()=>{T.then(z)}};var z=()=>{for(var T;T=P();){try{T.h.call(T.g)}catch(q){D(q)}var M=L;M.j(T),100>M.h&&(M.h++,T.next=M.g,M.g=T)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(T,M){this.type=T,this.g=this.target=M,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,M=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const q=()=>{};a.addEventListener("test",q,M),a.removeEventListener("test",q,M)}catch{}return T}();function G(T,M){if(F.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var q=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=M,M=T.relatedTarget){if(x){e:{try{w(M.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(M=null)}}else q=="mouseover"?M=T.fromElement:q=="mouseout"&&(M=T.toElement);this.relatedTarget=M,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:ee[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&G.aa.h.call(this)}}p(G,F);var ee={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(T,M,q,Q,_e){this.listener=T,this.proxy=null,this.src=M,this.type=q,this.capture=!!Q,this.ha=_e,this.key=++de,this.da=this.fa=!1}function ye(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function Ce(T){this.src=T,this.g={},this.h=0}Ce.prototype.add=function(T,M,q,Q,_e){var Oe=T.toString();T=this.g[Oe],T||(T=this.g[Oe]=[],this.h++);var ct=Ye(T,M,Q,_e);return-1<ct?(M=T[ct],q||(M.fa=!1)):(M=new he(M,this.src,Oe,!!Q,_e),M.fa=q,T.push(M)),M};function ve(T,M){var q=M.type;if(q in T.g){var Q=T.g[q],_e=Array.prototype.indexOf.call(Q,M,void 0),Oe;(Oe=0<=_e)&&Array.prototype.splice.call(Q,_e,1),Oe&&(ye(M),T.g[q].length==0&&(delete T.g[q],T.h--))}}function Ye(T,M,q,Q){for(var _e=0;_e<T.length;++_e){var Oe=T[_e];if(!Oe.da&&Oe.listener==M&&Oe.capture==!!q&&Oe.ha==Q)return _e}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),mt={};function it(T,M,q,Q,_e){if(Array.isArray(M)){for(var Oe=0;Oe<M.length;Oe++)it(T,M[Oe],q,Q,_e);return null}return q=yt(q),T&&T[le]?T.K(M,q,l(Q)?!!Q.capture:!!Q,_e):be(T,M,q,!1,Q,_e)}function be(T,M,q,Q,_e,Oe){if(!M)throw Error("Invalid event type");var ct=l(_e)?!!_e.capture:!!_e,Xr=me(T);if(Xr||(T[Ue]=Xr=new Ce(T)),q=Xr.add(M,q,Q,ct,Oe),q.proxy)return q;if(Q=Ae(),q.proxy=Q,Q.src=T,Q.listener=q,T.addEventListener)V||(_e=ct),_e===void 0&&(_e=!1),T.addEventListener(M.toString(),Q,_e);else if(T.attachEvent)T.attachEvent(Nt(M.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return q}function Ae(){function T(q){return M.call(T.src,T.listener,q)}const M=qe;return T}function Ve(T,M,q,Q,_e){if(Array.isArray(M))for(var Oe=0;Oe<M.length;Oe++)Ve(T,M[Oe],q,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,q=yt(q),T&&T[le]?(T=T.i,M=String(M).toString(),M in T.g&&(Oe=T.g[M],q=Ye(Oe,q,Q,_e),-1<q&&(ye(Oe[q]),Array.prototype.splice.call(Oe,q,1),Oe.length==0&&(delete T.g[M],T.h--)))):T&&(T=me(T))&&(M=T.g[M.toString()],T=-1,M&&(T=Ye(M,q,Q,_e)),(q=-1<T?M[T]:null)&&lt(q))}function lt(T){if(typeof T!="number"&&T&&!T.da){var M=T.src;if(M&&M[le])ve(M.i,T);else{var q=T.type,Q=T.proxy;M.removeEventListener?M.removeEventListener(q,Q,T.capture):M.detachEvent?M.detachEvent(Nt(q),Q):M.addListener&&M.removeListener&&M.removeListener(Q),(q=me(M))?(ve(q,T),q.h==0&&(q.src=null,M[Ue]=null)):ye(T)}}}function Nt(T){return T in mt?mt[T]:mt[T]="on"+T}function qe(T,M){if(T.da)T=!0;else{M=new G(M,this);var q=T.listener,Q=T.ha||T.src;T.fa&&lt(T),T=q.call(Q,M)}return T}function me(T){return T=T[Ue],T instanceof Ce?T:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(T){return typeof T=="function"?T:(T[ft]||(T[ft]=function(M){return T.handleEvent(M)}),T[ft])}function Et(){W.call(this),this.i=new Ce(this),this.M=this,this.F=null}p(Et,W),Et.prototype[le]=!0,Et.prototype.removeEventListener=function(T,M,q,Q){Ve(this,T,M,q,Q)};function pe(T,M){var q,Q=T.F;if(Q)for(q=[];Q;Q=Q.F)q.push(Q);if(T=T.M,Q=M.type||M,typeof M=="string")M=new F(M,T);else if(M instanceof F)M.target=M.target||T;else{var _e=M;M=new F(Q,T),k(M,_e)}if(_e=!0,q)for(var Oe=q.length-1;0<=Oe;Oe--){var ct=M.g=q[Oe];_e=Ie(ct,Q,!0,M)&&_e}if(ct=M.g=T,_e=Ie(ct,Q,!0,M)&&_e,_e=Ie(ct,Q,!1,M)&&_e,q)for(Oe=0;Oe<q.length;Oe++)ct=M.g=q[Oe],_e=Ie(ct,Q,!1,M)&&_e}Et.prototype.N=function(){if(Et.aa.N.call(this),this.i){var T=this.i,M;for(M in T.g){for(var q=T.g[M],Q=0;Q<q.length;Q++)ye(q[Q]);delete T.g[M],T.h--}}this.F=null},Et.prototype.K=function(T,M,q,Q){return this.i.add(String(T),M,!1,q,Q)},Et.prototype.L=function(T,M,q,Q){return this.i.add(String(T),M,!0,q,Q)};function Ie(T,M,q,Q){if(M=T.i.g[String(M)],!M)return!0;M=M.concat();for(var _e=!0,Oe=0;Oe<M.length;++Oe){var ct=M[Oe];if(ct&&!ct.da&&ct.capture==q){var Xr=ct.listener,vo=ct.ha||ct.src;ct.fa&&ve(T.i,ct),_e=Xr.call(vo,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function Ke(T,M,q){if(typeof T=="function")q&&(T=d(T,q));else if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(T,M||0)}function bt(T){T.g=Ke(()=>{T.g=null,T.i&&(T.i=!1,bt(T))},T.l);const M=T.h;T.h=null,T.m.apply(null,M)}class Vt extends W{constructor(M,q){super(),this.m=M,this.l=q,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(T){W.call(this),this.h=T,this.g={}}p(rr,W);var qn=[];function Ln(T){C(T.g,function(M,q){this.g.hasOwnProperty(q)&&lt(M)},T),T.g={}}rr.prototype.N=function(){rr.aa.N.call(this),Ln(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yn=a.JSON.stringify,yr=a.JSON.parse,Qt=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function Wr(){}Wr.prototype.h=null;function ei(T){return T.h||(T.h=T.i())}function Bi(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ui(){F.call(this,"d")}p(Ui,F);function Ir(){F.call(this,"c")}p(Ir,F);var ys={},xp=null;function fl(){return xp=xp||new Et}ys.La="serverreachability";function Ad(T){F.call(this,ys.La,T)}p(Ad,F);function Er(T){const M=fl();pe(M,new Ad(M))}ys.STAT_EVENT="statevent";function Ri(T,M){F.call(this,ys.STAT_EVENT,T),this.stat=M}p(Ri,F);function ti(T){const M=fl();pe(M,new Ri(M,T))}ys.Ma="timingevent";function pu(T,M){F.call(this,ys.Ma,T),this.size=M}p(pu,F);function Na(T,M){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},M)}function Pa(){this.g=!0}Pa.prototype.xa=function(){this.g=!1};function oe(T,M,q,Q,_e,Oe){T.info(function(){if(T.g)if(Oe)for(var ct="",Xr=Oe.split("&"),vo=0;vo<Xr.length;vo++){var cr=Xr[vo].split("=");if(1<cr.length){var Xo=cr[0];cr=cr[1];var Qo=Xo.split("_");ct=2<=Qo.length&&Qo[1]=="type"?ct+(Xo+"="+cr+"&"):ct+(Xo+"=redacted&")}}else ct=null;else ct=Oe;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+M+`
`+q+`
`+ct})}function te(T,M,q,Q,_e,Oe,ct){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+M+`
`+q+`
`+Oe+" "+ct})}function ae(T,M,q,Q){T.info(function(){return"XMLHTTP TEXT ("+M+"): "+Se(T,q)+(Q?" "+Q:"")})}function Te(T,M){T.info(function(){return"TIMEOUT: "+M})}Pa.prototype.info=function(){};function Se(T,M){if(!T.g)return M;if(!M)return null;try{var q=JSON.parse(M);if(q){for(T=0;T<q.length;T++)if(Array.isArray(q[T])){var Q=q[T];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var Oe=_e[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var ct=1;ct<_e.length;ct++)_e[ct]=""}}}}return yn(q)}catch{return M}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qt;function On(){}p(On,Wr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},qt=new On;function Fn(T,M,q,Q){this.j=T,this.i=M,this.l=q,this.R=Q||1,this.U=new rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var ir={},kr={};function Ht(T,M,q){T.L=1,T.v=jn(We(M)),T.m=q,T.P=!0,sr(T,null)}function sr(T,M){T.F=Date.now(),Ni(T),T.A=We(T.v);var q=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),AR(q.i,"t",Q),T.C=0,q=T.j.J,T.h=new pn,T.g=zie(T.j,q?M:null,!T.m),0<T.O&&(T.M=new Vt(d(T.Y,T,T.g),T.O)),M=T.U,q=T.g,Q=T.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(qn[0]=_e.toString()),_e=qn);for(var Oe=0;Oe<_e.length;Oe++){var ct=it(q,_e[Oe],Q||M.handleEvent,!1,M.h||M);if(!ct)break;M.g[ct.key]=ct}M=T.H?S(T.H):{},T.m?(T.u||(T.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,M)):(T.u="GET",T.g.ea(T.A,T.u,null,M)),Er(),oe(T.i,T.u,T.A,T.l,T.R,T.m)}Fn.prototype.ca=function(T){T=T.target;const M=this.M;M&&is(T)==3?M.j():this.Y(T)},Fn.prototype.Y=function(T){try{if(T==this.g)e:{const Qo=is(this.g);var M=this.g.Ba();const h_=this.g.Z();if(!(3>Qo)&&(Qo!=3||this.g&&(this.h.h||this.g.oa()||Ko(this.g)))){this.J||Qo!=4||M==7||(M==8||0>=h_?Er(3):Er(2)),ni(this);var q=this.g.Z();this.X=q;t:if(Gr(this)){var Q=Ko(this.g);T="";var _e=Q.length,Oe=is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zi(this),yo(this);var ct="";break t}this.h.i=new a.TextDecoder}for(M=0;M<_e;M++)this.h.h=!0,T+=this.h.i.decode(Q[M],{stream:!(Oe&&M==_e-1)});Q.length=0,this.h.g+=T,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=q==200,te(this.i,this.u,this.A,this.l,this.R,Qo,q),this.o){if(this.T&&!this.K){t:{if(this.g){var Xr,vo=this.g;if((Xr=vo.g?vo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Xr)){var cr=Xr;break t}}cr=null}if(q=cr)ae(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vi(this,q);else{this.o=!1,this.s=3,ti(12),zi(this),yo(this);break e}}if(this.P){q=!0;let uf;for(;!this.J&&this.C<ct.length;)if(uf=Jn(this,ct),uf==kr){Qo==4&&(this.s=4,ti(14),q=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(uf==ir){this.s=4,ti(15),ae(this.i,this.l,ct,"[Invalid Chunk]"),q=!1;break}else ae(this.i,this.l,uf,null),Vi(this,uf);if(Gr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qo!=4||ct.length!=0||this.h.h||(this.s=1,ti(16),q=!1),this.o=this.o&&q,!q)ae(this.i,this.l,ct,"[Invalid Chunked Response]"),zi(this),yo(this);else if(0<ct.length&&!this.W){this.W=!0;var Xo=this.j;Xo.g==this&&Xo.ba&&!Xo.M&&(Xo.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),r8(Xo),Xo.M=!0,ti(11))}}else ae(this.i,this.l,ct,null),Vi(this,ct);Qo==4&&zi(this),this.o&&!this.J&&(Qo==4?Fie(this.j,this):(this.o=!1,Ni(this)))}else fv(this.g),q==400&&0<ct.indexOf("Unknown SID")?(this.s=3,ti(12)):(this.s=0,ti(13)),zi(this),yo(this)}}}catch{}finally{}};function Gr(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function Jn(T,M){var q=T.C,Q=M.indexOf(`
`,q);return Q==-1?kr:(q=Number(M.substring(q,Q)),isNaN(q)?ir:(Q+=1,Q+q>M.length?kr:(M=M.slice(Q,Q+q),T.C=Q+q,M)))}Fn.prototype.cancel=function(){this.J=!0,zi(this)};function Ni(T){T.S=Date.now()+T.I,qs(T,T.I)}function qs(T,M){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Na(d(T.ba,T),M)}function ni(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Fn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Te(this.i,this.A),this.L!=2&&(Er(),ti(17)),zi(this),this.s=2,yo(this)):qs(this,this.S-T)};function yo(T){T.j.G==0||T.J||Fie(T.j,T)}function zi(T){ni(T);var M=T.M;M&&typeof M.ma=="function"&&M.ma(),T.M=null,Ln(T.U),T.g&&(M=T.g,T.g=null,M.abort(),M.ma())}function Vi(T,M){try{var q=T.j;if(q.G!=0&&(q.g==T||Id(q.h,T))){if(!T.K&&Id(q.h,T)&&q.G==3){try{var Q=q.Da.g.parse(M)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<T.F)DR(q),PR(q);else break e;n8(q),ti(18)}}else q.za=_e[1],0<q.za-q.T&&37500>_e[2]&&q.F&&q.v==0&&!q.C&&(q.C=Na(d(q.Za,q),6e3));if(1>=ec(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else dv(q,11)}else if((T.K||q.g==T)&&DR(q),!v(M))for(_e=q.Da.g.parse(M),M=0;M<_e.length;M++){let cr=_e[M];if(q.T=cr[0],cr=cr[1],q.G==2)if(cr[0]=="c"){q.K=cr[1],q.ia=cr[2];const Xo=cr[3];Xo!=null&&(q.la=Xo,q.j.info("VER="+q.la));const Qo=cr[4];Qo!=null&&(q.Aa=Qo,q.j.info("SVER="+q.Aa));const h_=cr[5];h_!=null&&typeof h_=="number"&&0<h_&&(Q=1.5*h_,q.L=Q,q.j.info("backChannelRequestTimeoutMs_="+Q)),Q=q;const uf=T.g;if(uf){const MR=uf.g?uf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(MR){var Oe=Q.h;Oe.g||MR.indexOf("spdy")==-1&&MR.indexOf("quic")==-1&&MR.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(Y(Oe,Oe.h),Oe.h=null))}if(Q.D){const i8=uf.g?uf.g.getResponseHeader("X-HTTP-Session-Id"):null;i8&&(Q.ya=i8,Pt(Q.I,Q.D,i8))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-T.F,q.j.info("Handshake RTT: "+q.R+"ms")),Q=q;var ct=T;if(Q.qa=Uie(Q,Q.J?Q.ia:null,Q.W),ct.K){se(Q.h,ct);var Xr=ct,vo=Q.L;vo&&(Xr.I=vo),Xr.B&&(ni(Xr),Ni(Xr)),Q.g=ct}else Mie(Q);0<q.i.length&&OR(q)}else cr[0]!="stop"&&cr[0]!="close"||dv(q,7);else q.G==3&&(cr[0]=="stop"||cr[0]=="close"?cr[0]=="stop"?dv(q,7):f_(q):cr[0]!="noop"&&q.l&&q.l.ta(cr),q.v=0)}}Er(4)}catch{}}var Go=class{constructor(T,M){this.g=T,this.map=M}};function Oa(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ws(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function ec(T){return T.h?1:T.g?T.g.size:0}function Id(T,M){return T.h?T.h==M:T.g?T.g.has(M):!1}function Y(T,M){T.g?T.g.add(M):T.h=M}function se(T,M){T.h&&T.h==M?T.h=null:T.g&&T.g.has(M)&&T.g.delete(M)}Oa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function Z(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let M=T.i;for(const q of T.g.values())M=M.concat(q.D);return M}return m(T.i)}function fe(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(u(T)){for(var M=[],q=T.length,Q=0;Q<q;Q++)M.push(T[Q]);return M}M=[],q=0;for(Q in T)M[q++]=T[Q];return M}function ge(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(u(T)||typeof T=="string"){var M=[];T=T.length;for(var q=0;q<T;q++)M.push(q);return M}M=[],q=0;for(const Q in T)M[q++]=Q;return M}}}function ce(T,M){if(T.forEach&&typeof T.forEach=="function")T.forEach(M,void 0);else if(u(T)||typeof T=="string")Array.prototype.forEach.call(T,M,void 0);else for(var q=ge(T),Q=fe(T),_e=Q.length,Oe=0;Oe<_e;Oe++)M.call(void 0,Q[Oe],q&&q[Oe],T)}var De=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(T,M){if(T){T=T.split("&");for(var q=0;q<T.length;q++){var Q=T[q].indexOf("="),_e=null;if(0<=Q){var Oe=T[q].substring(0,Q);_e=T[q].substring(Q+1)}else Oe=T[q];M(Oe,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function He(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof He){this.h=T.h,st(this,T.j),this.o=T.o,this.g=T.g,wt(this,T.s),this.l=T.l;var M=T.i,q=new tc;q.i=M.i,M.g&&(q.g=new Map(M.g),q.h=M.h),mn(this,q),this.m=T.m}else T&&(M=String(T).match(De))?(this.h=!1,st(this,M[1]||"",!0),this.o=Rr(M[2]||""),this.g=Rr(M[3]||"",!0),wt(this,M[4]),this.l=Rr(M[5]||"",!0),mn(this,M[6]||"",!0),this.m=Rr(M[7]||"")):(this.h=!1,this.i=new tc(null,this.h))}He.prototype.toString=function(){var T=[],M=this.j;M&&T.push(Nr(M,kd,!0),":");var q=this.g;return(q||M=="file")&&(T.push("//"),(M=this.o)&&T.push(Nr(M,kd,!0),"@"),T.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&T.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&T.push("/"),T.push(Nr(q,q.charAt(0)=="/"?XS:Sp,!0))),(q=this.i.toString())&&T.push("?",q),(q=this.m)&&T.push("#",Nr(q,CR)),T.join("")};function We(T){return new He(T)}function st(T,M,q){T.j=q?Rr(M,!0):M,T.j&&(T.j=T.j.replace(/:$/,""))}function wt(T,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);T.s=M}else T.s=null}function mn(T,M,q){M instanceof tc?(T.i=M,QS(T.i,T.h)):(q||(M=Nr(M,av)),T.i=new tc(M,T.h))}function Pt(T,M,q){T.i.set(M,q)}function jn(T){return Pt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Rr(T,M){return T?M?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Nr(T,M,q){return typeof T=="string"?(T=encodeURI(T).replace(M,Yo),q&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Yo(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var kd=/[#\/\?@]/g,Sp=/[#\?:]/g,XS=/[#\?]/g,av=/[#\?@]/g,CR=/#/g;function tc(T,M){this.h=this.g=null,this.i=T||null,this.j=!!M}function mu(T){T.g||(T.g=new Map,T.h=0,T.i&&ze(T.i,function(M,q){T.add(decodeURIComponent(M.replace(/\+/g," ")),q)}))}e=tc.prototype,e.add=function(T,M){mu(this),this.i=null,T=Cp(this,T);var q=this.g.get(T);return q||this.g.set(T,q=[]),q.push(M),this.h+=1,this};function Tp(T,M){mu(T),M=Cp(T,M),T.g.has(M)&&(T.i=null,T.h-=T.g.get(M).length,T.g.delete(M))}function l_(T,M){return mu(T),M=Cp(T,M),T.g.has(M)}e.forEach=function(T,M){mu(this),this.g.forEach(function(q,Q){q.forEach(function(_e){T.call(M,_e,Q,this)},this)},this)},e.na=function(){mu(this);const T=Array.from(this.g.values()),M=Array.from(this.g.keys()),q=[];for(let Q=0;Q<M.length;Q++){const _e=T[Q];for(let Oe=0;Oe<_e.length;Oe++)q.push(M[Q])}return q},e.V=function(T){mu(this);let M=[];if(typeof T=="string")l_(this,T)&&(M=M.concat(this.g.get(Cp(this,T))));else{T=Array.from(this.g.values());for(let q=0;q<T.length;q++)M=M.concat(T[q])}return M},e.set=function(T,M){return mu(this),this.i=null,T=Cp(this,T),l_(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[M]),this.h+=1,this},e.get=function(T,M){return T?(T=this.V(T),0<T.length?String(T[0]):M):M};function AR(T,M,q){Tp(T,M),0<q.length&&(T.i=null,T.g.set(Cp(T,M),m(q)),T.h+=q.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],M=Array.from(this.g.keys());for(var q=0;q<M.length;q++){var Q=M[q];const Oe=encodeURIComponent(String(Q)),ct=this.V(Q);for(Q=0;Q<ct.length;Q++){var _e=Oe;ct[Q]!==""&&(_e+="="+encodeURIComponent(String(ct[Q]))),T.push(_e)}}return this.i=T.join("&")};function Cp(T,M){return M=String(M),T.j&&(M=M.toLowerCase()),M}function QS(T,M){M&&!T.j&&(mu(T),T.i=null,T.g.forEach(function(q,Q){var _e=Q.toLowerCase();Q!=_e&&(Tp(this,Q),AR(this,_e,q))},T)),T.j=M}function IR(T,M){const q=new Pa;if(a.Image){const Q=new Image;Q.onload=h(gu,q,"TestLoadImage: loaded",!0,M,Q),Q.onerror=h(gu,q,"TestLoadImage: error",!1,M,Q),Q.onabort=h(gu,q,"TestLoadImage: abort",!1,M,Q),Q.ontimeout=h(gu,q,"TestLoadImage: timeout",!1,M,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else M(!1)}function Ap(T,M){const q=new Pa,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),gu(q,"TestPingServer: timeout",!1,M)},1e4);fetch(T,{signal:Q.signal}).then(Oe=>{clearTimeout(_e),Oe.ok?gu(q,"TestPingServer: ok",!0,M):gu(q,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(_e),gu(q,"TestPingServer: error",!1,M)})}function gu(T,M,q,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(q)}catch{}}function t8(){this.g=new Qt}function kR(T,M,q){const Q=q||"";try{ce(T,function(_e,Oe){let ct=_e;l(_e)&&(ct=yn(_e)),M.push(Q+Oe+"="+encodeURIComponent(ct))})}catch(_e){throw M.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function uv(T){this.l=T.Ub||null,this.j=T.eb||!1}p(uv,Wr),uv.prototype.g=function(){return new lv(this.l,this.j)},uv.prototype.i=function(T){return function(){return T}}({});function lv(T,M){Et.call(this),this.D=T,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(lv,Et),e=lv.prototype,e.open=function(T,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=M,this.readyState=1,wg(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(M.body=T),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cv(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,wg(this)),this.g&&(this.readyState=3,wg(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;RR(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function RR(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var M=T.value?T.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!T.done}))&&(this.response=this.responseText+=M)}T.done?cv(this):wg(this),this.readyState==3&&RR(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,cv(this))},e.Qa=function(T){this.g&&(this.response=T,cv(this))},e.ga=function(){this.g&&cv(this)};function cv(T){T.readyState=4,T.l=null,T.j=null,T.v=null,wg(T)}e.setRequestHeader=function(T,M){this.u.append(T,M)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],M=this.h.entries();for(var q=M.next();!q.done;)q=q.value,T.push(q[0]+": "+q[1]),q=M.next();return T.join(`\r
`)};function wg(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(lv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function NR(T){let M="";return C(T,function(q,Q){M+=Q,M+=":",M+=q,M+=`\r
`}),M}function ne(T,M,q){e:{for(Q in q){var Q=!1;break e}Q=!0}Q||(q=NR(q),typeof T=="string"?q!=null&&encodeURIComponent(String(q)):Pt(T,M,q))}function ue(T){Et.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,Et);var Re=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,M,q,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);M=M?M.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qt.g(),this.v=this.o?ei(this.o):ei(qt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(M,String(T),!0),this.B=!1}catch(Oe){Dn(this,Oe);return}if(T=q||"",q=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)q.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Oe of Q.keys())q.set(Oe,Q.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(q.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),_e=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,M,void 0))||Q||_e||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,ct]of q)this.g.setRequestHeader(Oe,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(T),this.u=!1}catch(Oe){Dn(this,Oe)}};function Dn(T,M){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=M,T.m=5,xr(T),Bn(T)}function xr(T){T.A||(T.A=!0,pe(T,"complete"),pe(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,pe(this,"complete"),pe(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Yr(this):this.bb())},e.bb=function(){Yr(this)};function Yr(T){if(T.h&&typeof o<"u"&&(!T.v[1]||is(T)!=4||T.Z()!=2)){if(T.u&&is(T)==4)Ke(T.Ea,0,T);else if(pe(T,"readystatechange"),is(T)==4){T.h=!1;try{const ct=T.Z();e:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var q;if(!(q=M)){var Q;if(Q=ct===0){var _e=String(T.D).match(De)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Re.test(_e?_e.toLowerCase():"")}q=Q}if(q)pe(T,"complete"),pe(T,"success");else{T.m=6;try{var Oe=2<is(T)?T.g.statusText:""}catch{Oe=""}T.l=Oe+" ["+T.Z()+"]",xr(T)}}finally{Bn(T)}}}}function Bn(T,M){if(T.g){Kr(T);const q=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,M||pe(T,"ready");try{q.onreadystatechange=Q}catch{}}}function Kr(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function is(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var M=this.g.responseText;return T&&M.indexOf(T)==0&&(M=M.substring(T.length)),yr(M)}};function Ko(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function fv(T){const M={};T=(T.g&&2<=is(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(v(T[Q]))continue;var q=R(T[Q]);const _e=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Oe=M[_e]||[];M[_e]=Oe,Oe.push(q)}E(M,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ip(T,M,q){return q&&q.internalChannelParams&&q.internalChannelParams[T]||M}function c_(T){this.Aa=0,this.i=[],this.j=new Pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ip("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ip("baseRetryDelayMs",5e3,T),this.cb=Ip("retryDelaySeedMs",1e4,T),this.Wa=Ip("forwardChannelMaxRetries",2,T),this.wa=Ip("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Oa(T&&T.concurrentRequestLimit),this.Da=new t8,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=c_.prototype,e.la=8,e.G=1,e.connect=function(T,M,q,Q){ti(0),this.W=T,this.H=M||{},q&&Q!==void 0&&(this.H.OSID=q,this.H.OAID=Q),this.F=this.X,this.I=Uie(this,null,this.W),OR(this)};function f_(T){if(Oie(T),T.G==3){var M=T.U++,q=We(T.I);if(Pt(q,"SID",T.K),Pt(q,"RID",M),Pt(q,"TYPE","terminate"),JS(T,q),M=new Fn(T,T.j,M),M.L=2,M.v=jn(We(q)),q=!1,a.navigator&&a.navigator.sendBeacon)try{q=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!q&&a.Image&&(new Image().src=M.v,q=!0),q||(M.g=zie(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Ni(M)}Bie(T)}function PR(T){T.g&&(r8(T),T.g.cancel(),T.g=null)}function Oie(T){PR(T),T.u&&(a.clearTimeout(T.u),T.u=null),DR(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function OR(T){if(!Ws(T.h)&&!T.s){T.s=!0;var M=T.Ga;B||$(),U||(B(),U=!0),H.add(M,T),T.B=0}}function Dje(T,M){return ec(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=M.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Na(d(T.Ga,T,M),jie(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const _e=new Fn(this,this.j,T);let Oe=this.o;if(this.S&&(Oe?(Oe=S(Oe),k(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(_e.H=Oe,Oe=null),this.P)e:{for(var M=0,q=0;q<this.i.length;q++){t:{var Q=this.i[q];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(M+=Q,4096<M){M=q;break e}if(M===4096||q===this.i.length-1){M=q+1;break e}}M=1e3}else M=1e3;M=$ie(this,_e,M),q=We(this.I),Pt(q,"RID",T),Pt(q,"CVER",22),this.D&&Pt(q,"X-HTTP-Session-Id",this.D),JS(this,q),Oe&&(this.O?M="headers="+encodeURIComponent(String(NR(Oe)))+"&"+M:this.m&&ne(q,this.m,Oe)),Y(this.h,_e),this.Ua&&Pt(q,"TYPE","init"),this.P?(Pt(q,"$req",M),Pt(q,"SID","null"),_e.T=!0,Ht(_e,q,null)):Ht(_e,q,M),this.G=2}}else this.G==3&&(T?Die(this,T):this.i.length==0||Ws(this.h)||Die(this))};function Die(T,M){var q;M?q=M.l:q=T.U++;const Q=We(T.I);Pt(Q,"SID",T.K),Pt(Q,"RID",q),Pt(Q,"AID",T.T),JS(T,Q),T.m&&T.o&&ne(Q,T.m,T.o),q=new Fn(T,T.j,q,T.B+1),T.m===null&&(q.H=T.o),M&&(T.i=M.D.concat(T.i)),M=$ie(T,q,1e3),q.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Y(T.h,q),Ht(q,Q,M)}function JS(T,M){T.H&&C(T.H,function(q,Q){Pt(M,Q,q)}),T.l&&ce({},function(q,Q){Pt(M,Q,q)})}function $ie(T,M,q){q=Math.min(T.i.length,q);var Q=T.l?d(T.l.Na,T.l,T):null;e:{var _e=T.i;let Oe=-1;for(;;){const ct=["count="+q];Oe==-1?0<q?(Oe=_e[0].g,ct.push("ofs="+Oe)):Oe=0:ct.push("ofs="+Oe);let Xr=!0;for(let vo=0;vo<q;vo++){let cr=_e[vo].g;const Xo=_e[vo].map;if(cr-=Oe,0>cr)Oe=Math.max(0,_e[vo].g-100),Xr=!1;else try{kR(Xo,ct,"req"+cr+"_")}catch{Q&&Q(Xo)}}if(Xr){Q=ct.join("&");break e}}}return T=T.i.splice(0,q),M.D=T,Q}function Mie(T){if(!T.g&&!T.u){T.Y=1;var M=T.Fa;B||$(),U||(B(),U=!0),H.add(M,T),T.v=0}}function n8(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Na(d(T.Fa,T),jie(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,Lie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Na(d(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ti(10),PR(this),Lie(this))};function r8(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function Lie(T){T.g=new Fn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var M=We(T.qa);Pt(M,"RID","rpc"),Pt(M,"SID",T.K),Pt(M,"AID",T.T),Pt(M,"CI",T.F?"0":"1"),!T.F&&T.ja&&Pt(M,"TO",T.ja),Pt(M,"TYPE","xmlhttp"),JS(T,M),T.m&&T.o&&ne(M,T.m,T.o),T.L&&(T.g.I=T.L);var q=T.g;T=T.ia,q.L=1,q.v=jn(We(M)),q.m=null,q.P=!0,sr(q,T)}e.Za=function(){this.C!=null&&(this.C=null,PR(this),n8(this),ti(19))};function DR(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function Fie(T,M){var q=null;if(T.g==M){DR(T),r8(T),T.g=null;var Q=2}else if(Id(T.h,M))q=M.D,se(T.h,M),Q=1;else return;if(T.G!=0){if(M.o)if(Q==1){q=M.m?M.m.length:0,M=Date.now()-M.F;var _e=T.B;Q=fl(),pe(Q,new pu(Q,q)),OR(T)}else Mie(T);else if(_e=M.s,_e==3||_e==0&&0<M.X||!(Q==1&&Dje(T,M)||Q==2&&n8(T)))switch(q&&0<q.length&&(M=T.h,M.i=M.i.concat(q)),_e){case 1:dv(T,5);break;case 4:dv(T,10);break;case 3:dv(T,6);break;default:dv(T,2)}}}function jie(T,M){let q=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(q*=2),q*M}function dv(T,M){if(T.j.info("Error code "+M),M==2){var q=d(T.fb,T),Q=T.Xa;const _e=!Q;Q=new He(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),jn(Q),_e?IR(Q.toString(),q):Ap(Q.toString(),q)}else ti(2);T.G=0,T.l&&T.l.sa(M),Bie(T),Oie(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),ti(2)):(this.j.info("Failed to ping google.com"),ti(1))};function Bie(T){if(T.G=0,T.ka=[],T.l){const M=Z(T.h);(M.length!=0||T.i.length!=0)&&(g(T.ka,M),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function Uie(T,M,q){var Q=q instanceof He?We(q):new He(q);if(Q.g!="")M&&(Q.g=M+"."+Q.g),wt(Q,Q.s);else{var _e=a.location;Q=_e.protocol,M=M?M+"."+_e.hostname:_e.hostname,_e=+_e.port;var Oe=new He(null);Q&&st(Oe,Q),M&&(Oe.g=M),_e&&wt(Oe,_e),q&&(Oe.l=q),Q=Oe}return q=T.D,M=T.ya,q&&M&&Pt(Q,q,M),Pt(Q,"VER",T.la),JS(T,Q),Q}function zie(T,M,q){if(M&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=T.Ca&&!T.pa?new ue(new uv({eb:q})):new ue(T.pa),M.Ha(T.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vie(){}e=Vie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function $R(){}$R.prototype.g=function(T,M){return new dl(T,M)};function dl(T,M){Et.call(this),this.g=new c_(M),this.l=T,this.h=M&&M.messageUrlParams||null,T=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(T?T["X-WebChannel-Content-Type"]=M.messageContentType:T={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(T?T["X-WebChannel-Client-Profile"]=M.va:T={"X-WebChannel-Client-Profile":M.va}),this.g.S=T,(T=M&&M.Sb)&&!v(T)&&(this.g.m=T),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!v(M)&&(this.g.D=M,T=this.h,T!==null&&M in T&&(T=this.h,M in T&&delete T[M])),this.j=new d_(this)}p(dl,Et),dl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dl.prototype.close=function(){f_(this.g)},dl.prototype.o=function(T){var M=this.g;if(typeof T=="string"){var q={};q.__data__=T,T=q}else this.u&&(q={},q.__data__=yn(T),T=q);M.i.push(new Go(M.Ya++,T)),M.G==3&&OR(M)},dl.prototype.N=function(){this.g.l=null,delete this.j,f_(this.g),delete this.g,dl.aa.N.call(this)};function Hie(T){Ui.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var M=T.__sm__;if(M){e:{for(const q in M){T=q;break e}T=void 0}(this.i=T)&&(T=this.i,M=M!==null&&T in M?M[T]:void 0),this.data=M}else this.data=T}p(Hie,Ui);function qie(){Ir.call(this),this.status=1}p(qie,Ir);function d_(T){this.g=T}p(d_,Vie),d_.prototype.ua=function(){pe(this.g,"a")},d_.prototype.ta=function(T){pe(this.g,new Hie(T))},d_.prototype.sa=function(T){pe(this.g,new qie)},d_.prototype.ra=function(){pe(this.g,"b")},$R.prototype.createWebChannel=$R.prototype.g,dl.prototype.send=dl.prototype.o,dl.prototype.open=dl.prototype.m,dl.prototype.close=dl.prototype.close,fOe=function(){return new $R},cOe=function(){return fl()},lOe=ys,qV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,SO=ot,St.COMPLETE="complete",uOe=St,Bi.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",Et.prototype.listen=Et.prototype.K,xC=Bi,aOe=uv,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,oOe=ue}).apply(typeof GN<"u"?GN:typeof self<"u"?self:typeof window<"u"?window:{});const khe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xu.UNAUTHENTICATED=new xu(null),xu.GOOGLE_CREDENTIALS=new xu("google-credentials-uid"),xu.FIRST_PARTY=new xu("first-party-uid"),xu.MOCK_USER=new xu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new N4("@firebase/firestore");function kT(){return ab.logLevel}function It(e,...t){if(ab.logLevel<=Gn.DEBUG){const n=t.map(oZ);ab.debug(`Firestore (${SS}): ${e}`,...n)}}function Wm(e,...t){if(ab.logLevel<=Gn.ERROR){const n=t.map(oZ);ab.error(`Firestore (${SS}): ${e}`,...n)}}function YA(e,...t){if(ab.logLevel<=Gn.WARN){const n=t.map(oZ);ab.warn(`Firestore (${SS}): ${e}`,...n)}}function oZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(e="Unexpected state"){const t=`FIRESTORE (${SS}) INTERNAL ASSERTION FAILED: `+e;throw Wm(t),new Error(t)}function ui(e,t){e||an()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends dp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r$t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class i$t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xu.UNAUTHENTICATED))}shutdown(){}}class s$t{constructor(t){this.t=t,this.currentUser=xu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new bm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ui(typeof r.accessToken=="string"),new r$t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ui(t===null||typeof t=="string"),new xu(t)}}class o$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=xu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class a$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new o$t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(xu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u$t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l$t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ui(typeof n.token=="string"),this.R=n.token,new u$t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c$t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dOe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=c$t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function ex(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new vt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new vt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ms.fromMillis(Date.now())}static fromDate(t){return Ms.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ms(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Ms(0,0))}static max(){return new dn(new Ms(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,n,r){n===void 0?n=0:n>t.length&&an(),r===void 0?r=t.length-n:r>t.length-n&&an(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return KA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof KA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class mi extends KA{construct(t,n,r){return new mi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mi(n)}static emptyPath(){return new mi([])}}const f$t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ro extends KA{construct(t,n,r){return new Ro(t,n,r)}static isValidIdentifier(t){return f$t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ro.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ro(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new vt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new vt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new vt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new vt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ro(n)}static emptyPath(){return new Ro([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(mi.fromString(t))}static fromName(t){return new Bt(mi.fromString(t).popFirst(5))}static empty(){return new Bt(mi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&mi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return mi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new mi(t.slice()))}}function d$t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Ms(n+1,0):new Ms(n,r));return new fy(i,Bt.empty(),t)}function h$t(e){return new fy(e.readTime,e.key,-1)}class fy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new fy(dn.min(),Bt.empty(),-1)}static max(){return new fy(dn.max(),Bt.empty(),-1)}}function p$t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==m$t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function y$t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ok(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}aZ.oe=-1;function F4(e){return e==null}function k$(e){return e===0&&1/e==-1/0}function v$t(e){return typeof e=="number"&&Number.isInteger(e)&&!k$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rhe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hOe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){this.comparator=t,this.root=n||Co.EMPTY}insert(t,n){return new ji(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Co.BLACK,null,null))}remove(t){return new ji(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Co.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new YN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new YN(this.root,t,this.comparator,!1)}getReverseIterator(){return new YN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new YN(this.root,t,this.comparator,!0)}}class YN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Co{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Co.RED,this.left=i??Co.EMPTY,this.right=s??Co.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Co(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Co.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Co.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const t=this.left.check();if(t!==this.right.check())throw an();return t+(this.isRed()?0:1)}}Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1;Co.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Co(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t){this.comparator=t,this.data=new ji(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nhe(this.data.getIterator())}getIteratorFrom(t){return new Nhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Mo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Mo(this.comparator);return n.data=t,n}}class Nhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.fields=t,t.sort(Ro.comparator)}static empty(){return new Il([])}unionWith(t){let n=new Mo(Ro.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Il(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ex(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pOe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pOe("Invalid base64 string: "+s):s}}(t);return new Ca(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ca(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ca.EMPTY_BYTE_STRING=new Ca("");const b$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dy(e){if(ui(!!e),typeof e=="string"){let t=0;const n=b$t.exec(e);if(ui(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_s(e.seconds),nanos:_s(e.nanos)}}function _s(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ub(e){return typeof e=="string"?Ca.fromBase64String(e):Ca.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function lZ(e){const t=e.mapValue.fields.__previous_value__;return uZ(t)?lZ(t):t}function XA(e){const t=dy(e.mapValue.fields.__local_write_time__.timestampValue);return new Ms(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _$t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class QA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new QA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof QA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function lb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uZ(e)?4:w$t(e)?9007199254740991:10:an()}function Yh(e,t){if(e===t)return!0;const n=lb(e);if(n!==lb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return XA(e).isEqual(XA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=dy(i.timestampValue),a=dy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return ub(i.bytesValue).isEqual(ub(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return _s(i.geoPointValue.latitude)===_s(s.geoPointValue.latitude)&&_s(i.geoPointValue.longitude)===_s(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _s(i.integerValue)===_s(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_s(i.doubleValue),a=_s(s.doubleValue);return o===a?k$(o)===k$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ex(e.arrayValue.values||[],t.arrayValue.values||[],Yh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Rhe(o)!==Rhe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Yh(o[u],a[u])))return!1;return!0}(e,t);default:return an()}}function JA(e,t){return(e.values||[]).find(n=>Yh(n,t))!==void 0}function tx(e,t){if(e===t)return 0;const n=lb(e),r=lb(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_s(s.integerValue||s.doubleValue),u=_s(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Phe(e.timestampValue,t.timestampValue);case 4:return Phe(XA(e),XA(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=ub(s),u=ub(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(_s(s.latitude),_s(o.latitude));return a!==0?a:vr(_s(s.longitude),_s(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=tx(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===KN.mapValue&&o===KN.mapValue)return 0;if(s===KN.mapValue)return 1;if(o===KN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=tx(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw an()}}function Phe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=dy(e),r=dy(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function nx(e){return WV(e)}function WV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=dy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ub(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=WV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${WV(n.fields[o])}`;return i+"}"}(e.mapValue):an()}function Ohe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function GV(e){return!!e&&"integerValue"in e}function cZ(e){return!!e&&"arrayValue"in e}function Dhe(e){return!!e&&"nullValue"in e}function $he(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function TO(e){return!!e&&"mapValue"in e}function C2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return qb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=C2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=C2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function w$t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(t){this.value=t}static empty(){return new Ou({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!TO(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=C2(n)}setAll(t){let n=Ro.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=C2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());TO(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Yh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];TO(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){qb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Ou(C2(this.value))}}function mOe(e){const t=[];return qb(e.fields,(n,r)=>{const i=new Ro([n]);if(TO(r)){const s=mOe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Il(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new pa(t,0,dn.min(),dn.min(),dn.min(),Ou.empty(),0)}static newFoundDocument(t,n,r,i){return new pa(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new pa(t,2,n,dn.min(),dn.min(),Ou.empty(),0)}static newUnknownDocument(t,n){return new pa(t,3,n,dn.min(),dn.min(),Ou.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ou.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ou.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Mhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=tx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Lhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(t,n="asc"){this.field=t,this.dir=n}}function E$t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gOe=class{};class xs extends gOe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new S$t(t,n,r):n==="array-contains"?new A$t(t,r):n==="in"?new I$t(t,r):n==="not-in"?new k$t(t,r):n==="array-contains-any"?new R$t(t,r):new xs(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new T$t(t,r):new C$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(tx(n,this.value)):n!==null&&lb(this.value)===lb(n)&&this.matchesComparison(tx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ad extends gOe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new ad(t,n)}matches(t){return yOe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yOe(e){return e.op==="and"}function vOe(e){return x$t(e)&&yOe(e)}function x$t(e){for(const t of e.filters)if(t instanceof ad)return!1;return!0}function YV(e){if(e instanceof xs)return e.field.canonicalString()+e.op.toString()+nx(e.value);if(vOe(e))return e.filters.map(t=>YV(t)).join(",");{const t=e.filters.map(n=>YV(n)).join(",");return`${e.op}(${t})`}}function bOe(e,t){return e instanceof xs?function(r,i){return i instanceof xs&&r.op===i.op&&r.field.isEqual(i.field)&&Yh(r.value,i.value)}(e,t):e instanceof ad?function(r,i){return i instanceof ad&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bOe(o,i.filters[a]),!0):!1}(e,t):void an()}function _Oe(e){return e instanceof xs?function(n){return`${n.field.canonicalString()} ${n.op} ${nx(n.value)}`}(e):e instanceof ad?function(n){return n.op.toString()+" {"+n.getFilters().map(_Oe).join(" ,")+"}"}(e):"Filter"}class S$t extends xs{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class T$t extends xs{constructor(t,n){super(t,"in",n),this.keys=wOe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class C$t extends xs{constructor(t,n){super(t,"not-in",n),this.keys=wOe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function wOe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class A$t extends xs{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return cZ(n)&&JA(n.arrayValue,this.value)}}class I$t extends xs{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&JA(this.value.arrayValue,n)}}class k$t extends xs{constructor(t,n){super(t,"not-in",n)}matches(t){if(JA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!JA(this.value.arrayValue,n)}}class R$t extends xs{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!cZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>JA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Fhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new N$t(e,t,n,r,i,s,o)}function fZ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>YV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),F4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>nx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>nx(r)).join(",")),t.ue=n}return t.ue}function dZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!E$t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bOe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lhe(e.startAt,t.startAt)&&Lhe(e.endAt,t.endAt)}function KV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function P$t(e,t,n,r,i,s,o,a){return new TS(e,t,n,r,i,s,o,a)}function hZ(e){return new TS(e)}function jhe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function EOe(e){return e.collectionGroup!==null}function A2(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mo(Ro.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ZA(s,r))}),n.has(Ro.keyField().canonicalString())||t.ce.push(new ZA(Ro.keyField(),r))}return t.ce}function Ih(e){const t=hn(e);return t.le||(t.le=O$t(t,A2(e))),t.le}function O$t(e,t){if(e.limitType==="F")return Fhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ZA(i.field,s)});const n=e.endAt?new R$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new R$(e.startAt.position,e.startAt.inclusive):null;return Fhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function XV(e,t){const n=e.filters.concat([t]);return new TS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function QV(e,t,n){return new TS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function j4(e,t){return dZ(Ih(e),Ih(t))&&e.limitType===t.limitType}function xOe(e){return`${fZ(Ih(e))}|lt:${e.limitType}`}function X_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_Oe(i)).join(", ")}]`),F4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nx(i)).join(",")),`Target(${r})`}(Ih(e))}; limitType=${e.limitType})`}function B4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of A2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Mhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,A2(r),i)||r.endAt&&!function(o,a,u){const l=Mhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,A2(r),i))}(e,t)}function D$t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function SOe(e){return(t,n)=>{let r=!1;for(const i of A2(e)){const s=$$t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $$t(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?tx(u,l):an()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return an()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){qb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return hOe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$t=new ji(Bt.comparator);function Gm(){return M$t}const TOe=new ji(Bt.comparator);function SC(...e){let t=TOe;for(const n of e)t=t.insert(n.key,n);return t}function COe(e){let t=TOe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function v1(){return I2()}function AOe(){return I2()}function I2(){return new CS(e=>e.toString(),(e,t)=>e.isEqual(t))}const L$t=new ji(Bt.comparator),F$t=new Mo(Bt.comparator);function Un(...e){let t=F$t;for(const n of e)t=t.add(n);return t}const j$t=new Mo(vr);function B$t(){return j$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IOe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k$(t)?"-0":t}}function kOe(e){return{integerValue:""+e}}function U$t(e,t){return v$t(t)?kOe(t):IOe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this._=void 0}}function z$t(e,t,n){return e instanceof eI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&uZ(s)&&(s=lZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof tI?NOe(e,t):e instanceof nI?POe(e,t):function(i,s){const o=ROe(i,s),a=Bhe(o)+Bhe(i.Pe);return GV(o)&&GV(i.Pe)?kOe(a):IOe(i.serializer,a)}(e,t)}function V$t(e,t,n){return e instanceof tI?NOe(e,t):e instanceof nI?POe(e,t):n}function ROe(e,t){return e instanceof N$?function(r){return GV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class eI extends U4{}class tI extends U4{constructor(t){super(),this.elements=t}}function NOe(e,t){const n=OOe(t);for(const r of e.elements)n.some(i=>Yh(i,r))||n.push(r);return{arrayValue:{values:n}}}class nI extends U4{constructor(t){super(),this.elements=t}}function POe(e,t){let n=OOe(t);for(const r of e.elements)n=n.filter(i=>!Yh(i,r));return{arrayValue:{values:n}}}class N$ extends U4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Bhe(e){return _s(e.integerValue||e.doubleValue)}function OOe(e){return cZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H$t{constructor(t,n){this.field=t,this.transform=n}}function q$t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof tI&&i instanceof tI||r instanceof nI&&i instanceof nI?ex(r.elements,i.elements,Yh):r instanceof N$&&i instanceof N$?Yh(r.Pe,i.Pe):r instanceof eI&&i instanceof eI}(e.transform,t.transform)}class W$t{constructor(t,n){this.version=t,this.transformResults=n}}class Wu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wu}static exists(t){return new Wu(void 0,t)}static updateTime(t){return new Wu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function CO(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class z4{}function DOe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new V4(e.key,Wu.none()):new Dk(e.key,e.data,Wu.none());{const n=e.data,r=Ou.empty();let i=new Mo(Ro.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gy(e.key,r,new Il(i.toArray()),Wu.none())}}function G$t(e,t,n){e instanceof Dk?function(i,s,o){const a=i.value.clone(),u=zhe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Gy?function(i,s,o){if(!CO(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zhe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll($Oe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function k2(e,t,n,r){return e instanceof Dk?function(s,o,a,u){if(!CO(s.precondition,o))return a;const l=s.value.clone(),c=Vhe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gy?function(s,o,a,u){if(!CO(s.precondition,o))return a;const l=Vhe(s.fieldTransforms,u,o),c=o.data;return c.setAll($Oe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return CO(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function Y$t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=ROe(r.transform,i||null);s!=null&&(n===null&&(n=Ou.empty()),n.set(r.field,s))}return n||null}function Uhe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ex(r,i,(s,o)=>q$t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dk extends z4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gy extends z4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $Oe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function zhe(e,t,n){const r=new Map;ui(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,V$t(o,a,n[i]))}return r}function Vhe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,z$t(s,o,t))}return r}class V4 extends z4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K$t extends z4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X$t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&G$t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=k2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=k2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=AOe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=DOe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Un())}isEqual(t){return this.batchId===t.batchId&&ex(this.mutations,t.mutations,(n,r)=>Uhe(n,r))&&ex(this.baseMutations,t.baseMutations,(n,r)=>Uhe(n,r))}}class pZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ui(t.mutations.length===r.length);let i=function(){return L$t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new pZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J$t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,Zn;function Z$t(e){switch(e){default:return an();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function MOe(e){if(e===void 0)return Wm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case vs.OK:return Be.OK;case vs.CANCELLED:return Be.CANCELLED;case vs.UNKNOWN:return Be.UNKNOWN;case vs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case vs.INTERNAL:return Be.INTERNAL;case vs.UNAVAILABLE:return Be.UNAVAILABLE;case vs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case vs.NOT_FOUND:return Be.NOT_FOUND;case vs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case vs.ABORTED:return Be.ABORTED;case vs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case vs.DATA_LOSS:return Be.DATA_LOSS;default:return an()}}(Zn=vs||(vs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eMt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tMt=new k1([4294967295,4294967295],0);function Hhe(e){const t=eMt().encode(e),n=new sOe;return n.update(t),new Uint8Array(n.digest())}function qhe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new k1([n,r],0),new k1([i,s],0)]}class mZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new TC(`Invalid padding: ${n}`);if(r<0)throw new TC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new TC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new TC(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=k1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(k1.fromNumber(r)));return i.compare(tMt)===1&&(i=new k1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Hhe(t),[r,i]=qhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new mZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Hhe(t),[r,i]=qhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class TC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,$k.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new H4(dn.min(),i,new ji(vr),Gm(),Un())}}class $k{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new $k(r,n,Un(),Un(),Un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class LOe{constructor(t,n){this.targetId=t,this.me=n}}class FOe{constructor(t,n,r=Ca.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Whe{constructor(){this.fe=0,this.ge=Yhe(),this.pe=Ca.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Un(),n=Un(),r=Un();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:an()}}),new $k(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Yhe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ui(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class nMt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Gm(),this.qe=Ghe(),this.Qe=new ji(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:an()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(KV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,pa.newNoDocument(o,dn.min()))}else ui(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ub(r).toUint8Array()}catch(u){if(u instanceof pOe)return YA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new mZ(o,i,s)}catch(u){return YA(u instanceof TC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&KV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,pa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Un();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new H4(t,n,this.Qe,this.ke,r);return this.ke=Gm(),this.qe=Ghe(),this.Qe=new ji(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Whe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Mo(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Whe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Ghe(){return new ji(Bt.comparator)}function Yhe(){return new ji(Bt.comparator)}const rMt={asc:"ASCENDING",desc:"DESCENDING"},iMt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sMt={and:"AND",or:"OR"};class oMt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function JV(e,t){return e.useProto3Json||F4(t)?t:{value:t}}function P$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function jOe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function aMt(e,t){return P$(e,t.toTimestamp())}function kh(e){return ui(!!e),dn.fromTimestamp(function(n){const r=dy(n);return new Ms(r.seconds,r.nanos)}(e))}function gZ(e,t){return ZV(e,t).canonicalString()}function ZV(e,t){const n=function(i){return new mi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function BOe(e){const t=mi.fromString(e);return ui(qOe(t)),t}function eH(e,t){return gZ(e.databaseId,t.path)}function z9(e,t){const n=BOe(t);if(n.get(1)!==e.databaseId.projectId)throw new vt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(zOe(n))}function UOe(e,t){return gZ(e.databaseId,t)}function uMt(e){const t=BOe(e);return t.length===4?mi.emptyPath():zOe(t)}function tH(e){return new mi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zOe(e){return ui(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Khe(e,t,n){return{name:eH(e,t),fields:n.value.mapValue.fields}}function lMt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:an()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ui(c===void 0||typeof c=="string"),Ca.fromBase64String(c||"")):(ui(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ca.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:MOe(l.code);return new vt(c,l.message||"")}(o);n=new FOe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=z9(e,r.document.name),s=kh(r.document.updateTime),o=r.document.createTime?kh(r.document.createTime):dn.min(),a=new Ou({mapValue:{fields:r.document.fields}}),u=pa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new AO(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=z9(e,r.document),s=r.readTime?kh(r.readTime):dn.min(),o=pa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new AO([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=z9(e,r.document),s=r.removedTargetIds||[];n=new AO([],s,i,null)}else{if(!("filter"in t))return an();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new J$t(i,s),a=r.targetId;n=new LOe(a,o)}}return n}function cMt(e,t){let n;if(t instanceof Dk)n={update:Khe(e,t.key,t.value)};else if(t instanceof V4)n={delete:eH(e,t.key)};else if(t instanceof Gy)n={update:Khe(e,t.key,t.data),updateMask:bMt(t.fieldMask)};else{if(!(t instanceof K$t))return an();n={verify:eH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof eI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof N$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw an()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:aMt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:an()}(e,t.precondition)),n}function fMt(e,t){return e&&e.length>0?(ui(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?kh(i.updateTime):kh(s);return o.isEqual(dn.min())&&(o=kh(s)),new W$t(o,i.transformResults||[])}(n,t))):[]}function dMt(e,t){return{documents:[UOe(e,t.path)]}}function hMt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=UOe(e,i);const s=function(l){if(l.length!==0)return HOe(ad.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Q_(d.field),direction:gMt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=JV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function pMt(e){let t=uMt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ui(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=VOe(f);return d instanceof ad&&vOe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new ZA(J_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,F4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new R$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new R$(h,d)}(n.endAt)),P$t(t,i,o,s,a,"F",u,l)}function mMt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function VOe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=J_(n.unaryFilter.field);return xs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=J_(n.unaryFilter.field);return xs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=J_(n.unaryFilter.field);return xs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=J_(n.unaryFilter.field);return xs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(e):e.fieldFilter!==void 0?function(n){return xs.create(J_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ad.create(n.compositeFilter.filters.map(r=>VOe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return an()}}(n.compositeFilter.op))}(e):an()}function gMt(e){return rMt[e]}function yMt(e){return iMt[e]}function vMt(e){return sMt[e]}function Q_(e){return{fieldPath:e.canonicalString()}}function J_(e){return Ro.fromServerFormat(e.fieldPath)}function HOe(e){return e instanceof xs?function(n){if(n.op==="=="){if($he(n.value))return{unaryFilter:{field:Q_(n.field),op:"IS_NAN"}};if(Dhe(n.value))return{unaryFilter:{field:Q_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($he(n.value))return{unaryFilter:{field:Q_(n.field),op:"IS_NOT_NAN"}};if(Dhe(n.value))return{unaryFilter:{field:Q_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Q_(n.field),op:yMt(n.op),value:n.value}}}(e):e instanceof ad?function(n){const r=n.getFilters().map(i=>HOe(i));return r.length===1?r[0]:{compositeFilter:{op:vMt(n.op),filters:r}}}(e):an()}function bMt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qOe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Ca.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new l0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new l0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new l0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new l0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Mt{constructor(t){this.ct=t}}function wMt(e){const t=pMt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?QV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EMt{constructor(){this._n=new xMt}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(fy.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(fy.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class xMt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Mo(mi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Mo(mi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new rx(0)}static Ln(){return new rx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SMt{constructor(){this.changes=new CS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,pa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&k2(r.mutation,i,Il.empty(),Ms.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Un()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Un()){const i=v1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=SC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=v1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Un()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Gm();const o=I2(),a=function(){return I2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Gy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),k2(c.mutation,l,c.mutation.getFieldMask(),Ms.now())):o.set(l.key,Il.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new TMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=I2();let i=new ji((o,a)=>o-a),s=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Il.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Un()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=AOe();c.forEach(d=>{if(!s.has(d)){const h=DOe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):EOe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(v1());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Un())).next(c=>({batchId:a,changes:COe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=SC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=SC();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new TS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,pa.newInvalidDocument(c)))});let a=SC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&k2(c.mutation,l,Il.empty(),Ms.now()),B4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:kh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:wMt(i.bundledQuery),readTime:kh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IMt{constructor(){this.overlays=new ji(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=v1();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=v1(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new ji((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=v1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=v1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Q$t(n,r));let s=this.hr.get(n);s===void 0&&(s=Un(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(){this.Pr=new Mo(Qs.Ir),this.Tr=new Mo(Qs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Qs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Qs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new mi([])),r=new Qs(n,t),i=new Qs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new mi([])),r=new Qs(n,t),i=new Qs(n,t+1);let s=Un();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Qs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Qs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mo(Qs.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new X$t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Qs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Qs(n,0),i=new Qs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Mo(vr);return n.forEach(i=>{const s=new Qs(i,0),o=new Qs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Qs(new Bt(s),0);let a=new Mo(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ui(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Qs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Qs(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RMt{constructor(t){this.vr=t,this.docs=function(){return new ji(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():pa.newInvalidDocument(n))}getEntries(t,n){let r=Gm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pa.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Gm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||p$t(h$t(c),r)<=0||(i.has(c.key)||B4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){an()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new NMt(this)}getSize(t){return Xe.resolve(this.size)}}class NMt extends SMt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PMt{constructor(t){this.persistence=t,this.Mr=new CS(n=>fZ(n),dZ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new yZ,this.targetCount=0,this.Lr=rx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new rx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OMt{constructor(t,n){this.Br={},this.overlays={},this.kr=new aZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new PMt(this),this.indexManager=new EMt,this.remoteDocumentCache=function(i){return new RMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new _Mt(n),this.$r=new AMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new IMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new kMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new DMt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class DMt extends g$t{constructor(t){super(),this.currentSequenceNumber=t}}class vZ{constructor(t){this.persistence=t,this.zr=new yZ,this.jr=null}static Hr(t){return new vZ(t)}get Jr(){if(this.jr)return this.jr;throw an()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Un(),i=Un();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new bZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Mt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MMt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return gNt()?8:y$t(zo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $Mt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(kT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",X_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(kT()<=Gn.DEBUG&&It("QueryEngine","Query:",X_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(kT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",X_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ih(n))):Xe.resolve())}ji(t,n){if(jhe(n))return Xe.resolve(null);let r=Ih(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=QV(n,null,"F"),r=Ih(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Un(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,QV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return jhe(n)||i.isEqual(dn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(kT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),X_(n)),this.es(t,o,n,d$t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Mo(SOe(t));return n.forEach((i,s)=>{B4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return kT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",X_(n)),this.zi.getDocumentsMatchingQuery(t,n,fy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LMt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new ji(vr),this.rs=new CS(s=>fZ(s),dZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new CMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function FMt(e,t,n,r){return new LMt(e,t,n,r)}async function WOe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Un();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function jMt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ui(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function GOe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function BMt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ca.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Gm(),l=Un();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(UMt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function UMt(e,t,n){let r=Un(),i=Un();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Gm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function zMt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function VMt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new l0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function nH(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ok(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Xhe(e,t,n){const r=hn(e);let i=dn.min(),s=Un();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Ih(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:Un())).next(a=>(HMt(r,D$t(t),a),{documents:a,hs:s})))}function HMt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Qhe{constructor(){this.activeTargetIds=B$t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qMt{constructor(){this.no=new Qhe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Qhe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WMt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XN=null;function V9(){return XN===null?XN=function(){return 268435456+Math.round(2147483648*Math.random())}():XN++,"0x"+XN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GMt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YMt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="WebChannelConnection";class KMt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=V9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw YA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+SS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=GMt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=V9();return new Promise((o,a)=>{const u=new oOe;u.setWithCredentials(!0),u.listenOnce(uOe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case SO.NO_ERROR:const c=u.getResponseJson();It(oa,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case SO.TIMEOUT:It(oa,`RPC '${t}' ${s} timed out`),a(new vt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case SO.HTTP_ERROR:const f=u.getStatus();if(It(oa,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new vt(p,h.message))}else a(new vt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new vt(Be.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{It(oa,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(oa,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=V9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=fOe(),a=cOe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new aOe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(oa,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new YMt({lo:g=>{h?It(oa,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(oa,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(oa,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,xC.EventType.OPEN,()=>{h||(It(oa,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,xC.EventType.CLOSE,()=>{h||(h=!0,It(oa,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,xC.EventType.ERROR,g=>{h||(h=!0,YA(oa,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new vt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,xC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ui(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(oa,`RPC '${t}' stream ${i} received error:`,w);const x=w.status;let C=function(A){const k=vs[A];if(k!==void 0)return MOe(k)}(x),E=w.message;C===void 0&&(C=Be.INTERNAL,E="Unknown error status: "+x+" with message "+w.message),h=!0,p.po(new vt(C,E)),f.close()}else It(oa,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,lOe.STAT_EVENT,g=>{g.stat===qV.PROXY?It(oa,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===qV.NOPROXY&&It(oa,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function H9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(e){return new oMt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YOe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KOe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new YOe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Wm(n.toString()),Wm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new vt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XMt extends KOe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=lMt(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?kh(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=tH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=KV(u)?{documents:dMt(s,u)}:{query:hMt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jOe(s,o.resumeToken);const l=JV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=P$(s,o.snapshotVersion.toTimestamp());const l=JV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=mMt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=tH(this.serializer),n.removeTarget=t,this.i_(n)}}class QMt extends KOe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=fMt(t.writeResults,t.commitTime),r=kh(t.commitTime);return this.listener.A_(r,n)}return ui(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=tH(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>cMt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JMt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new vt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,ZV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,ZV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new vt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class ZMt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Wm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eLt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Wb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await Lk(l),l.N_.set("Unknown"),l.M_.delete(4),await Mk(l)}(this))})}),this.N_=new ZMt(r,i)}}async function Mk(e){if(Wb(e))for(const t of e.x_)await t(!0)}async function Lk(e){for(const t of e.x_)await t(!1)}function XOe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),xZ(n)?EZ(n):AS(n).Xo()&&wZ(n,t))}function _Z(e,t){const n=hn(e),r=AS(n);n.F_.delete(t),r.Xo()&&QOe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Wb(n)&&n.N_.set("Unknown"))}function wZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}AS(e).P_(t)}function QOe(e,t){e.L_.xe(t),AS(e).I_(t)}function EZ(e){e.L_=new nMt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),AS(e).start(),e.N_.w_()}function xZ(e){return Wb(e)&&!AS(e).Zo()&&e.F_.size>0}function Wb(e){return hn(e).M_.size===0}function JOe(e){e.L_=void 0}async function tLt(e){e.N_.set("Online")}async function nLt(e){e.F_.forEach((t,n)=>{wZ(e,t)})}async function rLt(e,t){JOe(e),xZ(e)?(e.N_.D_(t),EZ(e)):e.N_.set("Unknown")}async function iLt(e,t,n){if(e.N_.set("Online"),t instanceof FOe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await O$(e,r)}else if(t instanceof AO?e.L_.Ke(t):t instanceof LOe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await GOe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ca.EMPTY_BYTE_STRING,c.snapshotVersion)),QOe(s,u);const f=new l0(c.target,u,l,c.sequenceNumber);wZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await O$(e,r)}}async function O$(e,t,n){if(!Ok(t))throw t;e.M_.add(1),await Lk(e),e.N_.set("Offline"),n||(n=()=>GOe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Mk(e)})}function ZOe(e,t){return t().catch(n=>O$(e,n,t))}async function W4(e){const t=hn(e),n=hy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;sLt(t);)try{const i=await zMt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,oLt(t,i)}catch(i){await O$(t,i)}eDe(t)&&tDe(t)}function sLt(e){return Wb(e)&&e.v_.length<10}function oLt(e,t){e.v_.push(t);const n=hy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function eDe(e){return Wb(e)&&!hy(e).Zo()&&e.v_.length>0}function tDe(e){hy(e).start()}async function aLt(e){hy(e).V_()}async function uLt(e){const t=hy(e);for(const n of e.v_)t.d_(n.mutations)}async function lLt(e,t,n){const r=e.v_.shift(),i=pZ.from(r,t,n);await ZOe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await W4(e)}async function cLt(e,t){t&&hy(e).E_&&await async function(r,i){if(function(o){return Z$t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();hy(r).t_(),await ZOe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await W4(r)}}(e,t),eDe(e)&&tDe(e)}async function Zhe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Wb(n);n.M_.add(3),await Lk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Mk(n)}async function fLt(e,t){const n=hn(e);t?(n.M_.delete(2),await Mk(n)):t||(n.M_.add(2),await Lk(n),n.N_.set("Unknown"))}function AS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new XMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:tLt.bind(null,e),To:nLt.bind(null,e),Ao:rLt.bind(null,e),h_:iLt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),xZ(e)?EZ(e):e.N_.set("Unknown")):(await e.B_.stop(),JOe(e))})),e.B_}function hy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new QMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:aLt.bind(null,e),Ao:cLt.bind(null,e),R_:uLt.bind(null,e),A_:lLt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await W4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new bm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new SZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TZ(e,t){if(Wm("AsyncQueue",`${t}: ${e}`),Ok(e))return new vt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=SC(),this.sortedSet=new ji(this.comparator)}static emptySet(t){return new rE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof rE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new rE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class epe{constructor(){this.q_=new ji(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):an():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class ix{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ix(t,n,rE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&j4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dLt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class hLt{constructor(){this.queries=new CS(t=>xOe(t),j4),this.onlineState="Unknown",this.z_=new Set}}async function nDe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new dLt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=TZ(o,`Initialization of query '${X_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&CZ(n)}async function rDe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pLt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&CZ(n)}function mLt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function CZ(e){e.z_.forEach(t=>{t.next()})}var rH,tpe;(tpe=rH||(rH={})).J_="default",tpe.Cache="cache";class iDe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new ix(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=ix.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==rH.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sDe{constructor(t){this.key=t}}class oDe{constructor(t){this.key=t}}class gLt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Un(),this.mutatedKeys=Un(),this.Ia=SOe(t),this.Ta=new rE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new epe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=B4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new ix(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new epe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Un(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new oDe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new sDe(r))}),n}pa(t){this.la=t.hs,this.Pa=Un();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return ix.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class yLt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class vLt{constructor(t){this.key=t,this.wa=!1}}class bLt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new CS(a=>xOe(a),j4),this.Da=new Map,this.Ca=new Set,this.va=new ji(Bt.comparator),this.Fa=new Map,this.Ma=new yZ,this.xa={},this.Oa=new Map,this.Na=rx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function _Lt(e,t,n=!0){const r=dDe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await aDe(r,t,n,!0),i}async function wLt(e,t){const n=dDe(e);await aDe(n,t,!0,!1)}async function aDe(e,t,n,r){const i=await VMt(e.localStore,Ih(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await ELt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&XOe(e.remoteStore,i),a}async function ELt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Xhe(m.localStore,g.query,!1).then(({documents:E})=>g.view.da(E,b)));const w=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(b,m.isPrimaryClient,w,x);return rpe(m,g.targetId,C.fa),C.snapshot}(e,f,d,h);const s=await Xhe(e.localStore,t,!0),o=new gLt(t,s.hs),a=o.da(s.documents),u=$k.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);rpe(e,n,l.fa);const c=new yLt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function xLt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!j4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nH(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_Z(r.remoteStore,i.targetId),iH(r,i.targetId)}).catch(Pk)):(iH(r,i.targetId),await nH(r.localStore,i.targetId,!0))}async function SLt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_Z(n.remoteStore,r.targetId))}async function TLt(e,t,n){const r=PLt(e);try{const i=await function(o,a){const u=hn(o),l=Ms.now(),c=a.reduce((h,p)=>h.add(p.key),Un());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Gm(),m=Un();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=Y$t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Gy(v.key,b,mOe(b.value.mapValue),Wu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:COe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new ji(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Fk(r,i.changes),await W4(r.remoteStore)}catch(i){const s=TZ(i,"Failed to persist write");n.reject(s)}}async function uDe(e,t){const n=hn(e);try{const r=await BMt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ui(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ui(o.wa):i.removedDocuments.size>0&&(ui(o.wa),o.wa=!1))}),await Fk(n,r,t)}catch(r){await Pk(r)}}function npe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&CZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function CLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new ji(Bt.comparator);o=o.insert(s,pa.newNoDocument(s,dn.min()));const a=Un().add(s),u=new H4(dn.min(),new Map,new ji(vr),o,a);await uDe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),AZ(r)}else await nH(r.localStore,t,!1).then(()=>iH(r,t,n)).catch(Pk)}async function ALt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await jMt(n.localStore,t);cDe(n,r,null),lDe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fk(n,i)}catch(i){await Pk(i)}}async function ILt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ui(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);cDe(r,t,n),lDe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Fk(r,i)}catch(i){await Pk(i)}}function lDe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function cDe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function iH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||fDe(e,r)})}function fDe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(_Z(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),AZ(e))}function rpe(e,t,n){for(const r of n)r instanceof sDe?(e.Ma.addReference(r.key,t),kLt(e,r)):r instanceof oDe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||fDe(e,r.key)):an()}function kLt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),AZ(e))}function AZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(mi.fromString(t)),r=e.Na.next();e.Fa.set(r,new vLt(n)),e.va=e.va.insert(n,r),XOe(e.remoteStore,new l0(Ih(hZ(n.path)),r,"TargetPurposeLimboResolution",aZ.oe))}}async function Fk(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=bZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Ok(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function RLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await WOe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new vt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Fk(n,r.us)}}function NLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return Un().add(r.key);{let i=Un();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function dDe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=uDe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=NLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=CLt.bind(null,t),t.Sa.h_=pLt.bind(null,t.eventManager),t.Sa.ka=mLt.bind(null,t.eventManager),t}function PLt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ALt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ILt.bind(null,t),t}class ipe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=q4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return FMt(this.persistence,new MMt,t.initialUser,this.serializer)}createPersistence(t){return new OMt(vZ.Hr,this.serializer)}createSharedClientState(t){return new qMt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OLt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>npe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RLt.bind(null,this.syncEngine),await fLt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new hLt}()}createDatastore(t){const n=q4(t.databaseInfo.databaseId),r=function(s){return new KMt(s)}(t.databaseInfo);return function(s,o,a,u){return new JMt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new eLt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>npe(this.syncEngine,n,0),function(){return Jhe.D()?new Jhe:new WMt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new bLt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Lk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Wm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DLt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xu.UNAUTHENTICATED,this.clientId=dOe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new bm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=TZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function q9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await WOe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function spe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await pDe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Zhe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Zhe(t.remoteStore,i)),e._onlineComponents=t}function $Lt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function pDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await q9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!$Lt(n))throw n;YA("Error using user provided cache. Falling back to memory cache: "+n),await q9(e,new ipe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await q9(e,new ipe);return e._offlineComponents}async function IZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await spe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await spe(e,new OLt))),e._onlineComponents}function MLt(e){return pDe(e).then(t=>t.persistence)}function LLt(e){return IZ(e).then(t=>t.remoteStore)}function FLt(e){return IZ(e).then(t=>t.syncEngine)}async function mDe(e){const t=await IZ(e),n=t.eventManager;return n.onListen=_Lt.bind(null,t.syncEngine),n.onUnlisten=xLt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=wLt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=SLt.bind(null,t.syncEngine),n}function jLt(e){return e.asyncQueue.enqueue(async()=>{const t=await MLt(e),n=await LLt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),Mk(s)}(n)})}function BLt(e,t,n={}){const r=new bm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new hDe({next:d=>{o.enqueueAndForget(()=>rDe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new vt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new vt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new iDe(hZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return nDe(s,f)}(await mDe(e),e.asyncQueue,t,n,r)),r.promise}function ULt(e,t,n={}){const r=new bm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new hDe({next:d=>{o.enqueueAndForget(()=>rDe(s,f)),d.fromCache&&u.source==="server"?l.reject(new vt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new iDe(a,c,{includeMetadataChanges:!0,ra:!0});return nDe(s,f)}(await mDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ope=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yDe(e,t,n){if(!n)throw new vt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function zLt(e,t,n,r){if(t===!0&&r===!0)throw new vt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ape(e){if(!Bt.isDocumentKey(e))throw new vt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function upe(e){if(Bt.isDocumentKey(e))throw new vt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function G4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":an()}function ud(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=G4(e);throw new vt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new vt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new vt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zLt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new vt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new vt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new vt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class kZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lpe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new vt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lpe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i$t;switch(r.type){case"firstParty":return new a$t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ope.get(n);r&&(It("ComponentProvider","Removing Datastore"),ope.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Gb(this.firestore,t,this._query)}}class Ja{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ja(this.firestore,t,this._key)}}class $0 extends Gb{constructor(t,n,r){super(t,n,hZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ja(this.firestore,null,new Bt(t))}withConverter(t){return new $0(this.firestore,t,this._path)}}function ff(e,t,...n){if(e=li(e),yDe("collection","path",t),e instanceof kZ){const r=mi.fromString(t,...n);return upe(r),new $0(e,null,r)}{if(!(e instanceof Ja||e instanceof $0))throw new vt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mi.fromString(t,...n));return upe(r),new $0(e.firestore,null,r)}}function Gs(e,t,...n){if(e=li(e),arguments.length===1&&(t=dOe.newId()),yDe("doc","path",t),e instanceof kZ){const r=mi.fromString(t,...n);return ape(r),new Ja(e,null,new Bt(r))}{if(!(e instanceof Ja||e instanceof $0))throw new vt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(mi.fromString(t,...n));return ape(r),new Ja(e.firestore,e instanceof $0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VLt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new YOe(this,"async_queue_retry"),this.hu=()=>{const n=H9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=H9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=H9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new bm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Ok(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Wm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=SZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&an()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Yy extends kZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new VLt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vDe(this),this._firestoreClient.terminate()}}function HLt(e,t,n){n||(n="(default)");const r=ES(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(qA(s,t))return i;throw new vt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new vt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new vt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function jk(e){return e._firestoreClient||vDe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vDe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new _$t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,gDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new DLt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function qLt(e){return jLt(jk(e=ud(e,Yy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new sx(Ca.fromBase64String(t))}catch(n){throw new vt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new sx(Ca.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new vt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ro(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new vt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new vt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WLt=/^__.*__$/;class GLt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Gy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Dk(t,this.data,n,this.fieldTransforms)}}class bDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Gy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function _De(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class NZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new NZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return D$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(_De(this.fu)&&WLt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class YLt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||q4(t)}Fu(t,n,r,i=!1){return new NZ({fu:t,methodName:n,vu:r,path:Ro.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function K4(e){const t=e._freezeSettings(),n=q4(e._databaseId);return new YLt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);OZ("Data must be an object, but it was:",o,r);const a=SDe(r,o);let u,l;if(s.merge)u=new Il(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=sH(t,f,n);if(!o.contains(d))throw new vt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);CDe(c,d)||c.push(d)}u=new Il(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new GLt(new Ou(a),u,l)}class X4 extends Y4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof X4}}class PZ extends Y4{_toFieldTransform(t){return new H$t(t.path,new eI)}isEqual(t){return t instanceof PZ}}function EDe(e,t,n,r){const i=e.Fu(1,t,n);OZ("Data must be an object, but it was:",i,r);const s=[],o=Ou.empty();qb(r,(u,l)=>{const c=DZ(t,u,n);l=li(l);const f=i.Su(c);if(l instanceof X4)s.push(c);else{const d=Uk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Il(s);return new bDe(o,a,i.fieldTransforms)}function xDe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[sH(t,r,n)],u=[i];if(s.length%2!=0)throw new vt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(sH(t,s[d])),u.push(s[d+1]);const l=[],c=Ou.empty();for(let d=a.length-1;d>=0;--d)if(!CDe(l,a[d])){const h=a[d];let p=u[d];p=li(p);const m=o.Su(h);if(p instanceof X4)l.push(h);else{const g=Uk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Il(l);return new bDe(c,f,o.fieldTransforms)}function KLt(e,t,n,r=!1){return Uk(n,e.Fu(r?4:3,t))}function Uk(e,t){if(TDe(e=li(e)))return OZ("Unsupported field value:",t,e),SDe(e,t);if(e instanceof Y4)return function(r,i){if(!_De(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Uk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U$t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ms.fromDate(r);return{timestampValue:P$(i.serializer,s)}}if(r instanceof Ms){const s=new Ms(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:P$(i.serializer,s)}}if(r instanceof RZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sx)return{bytesValue:jOe(i.serializer,r._byteString)};if(r instanceof Ja){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${G4(r)}`)}(e,t)}function SDe(e,t){const n={};return hOe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qb(e,(r,i)=>{const s=Uk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TDe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ms||e instanceof RZ||e instanceof sx||e instanceof Ja||e instanceof Y4)}function OZ(e,t,n){if(!TDe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=G4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function sH(e,t,n){if((t=li(t))instanceof Bk)return t._internalPath;if(typeof t=="string")return DZ(e,t);throw D$("Field path arguments must be of type string or ",e,!1,void 0,n)}const XLt=new RegExp("[~\\*/\\[\\]]");function DZ(e,t,n){if(t.search(XLt)>=0)throw D$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Bk(...t.split("."))._internalPath}catch{throw D$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function D$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new vt(Be.INVALID_ARGUMENT,a+e+u)}function CDe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ADe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new QLt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Q4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QLt extends ADe{data(){return super.data()}}function Q4(e,t){return typeof t=="string"?DZ(e,t):t instanceof Bk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JLt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new vt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $Z{}class IDe extends $Z{}function cpe(e,t,...n){let r=[];t instanceof $Z&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof MZ).length,a=s.filter(u=>u instanceof J4).length;if(o>1||o>0&&a>0)throw new vt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class J4 extends IDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new J4(t,n,r)}_apply(t){const n=this._parse(t);return kDe(t._query,n),new Gb(t.firestore,t.converter,XV(t._query,n))}_parse(t){const n=K4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new vt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){dpe(f,c);const h=[];for(const p of f)h.push(fpe(u,s,p));d={arrayValue:{values:h}}}else d=fpe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||dpe(f,c),d=KLt(a,o,f,c==="in"||c==="not-in");return xs.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function ZLt(e,t,n){const r=t,i=Q4("where",e);return J4._create(i,r,n)}class MZ extends $Z{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new MZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ad.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)kDe(o,u),o=XV(o,u)}(t._query,n),new Gb(t.firestore,t.converter,XV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class LZ extends IDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new LZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new vt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new vt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ZA(s,o)}(t._query,this._field,this._direction);return new Gb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new TS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function e6t(e,t="asc"){const n=t,r=Q4("orderBy",e);return LZ._create(r,n)}function fpe(e,t,n){if(typeof(n=li(n))=="string"){if(n==="")throw new vt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EOe(t)&&n.indexOf("/")!==-1)throw new vt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(mi.fromString(n));if(!Bt.isDocumentKey(r))throw new vt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ohe(e,new Bt(r))}if(n instanceof Ja)return Ohe(e,n._key);throw new vt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${G4(n)}.`)}function dpe(e,t){if(!Array.isArray(e)||e.length===0)throw new vt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new vt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new vt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class t6t{convertValue(t,n="none"){switch(lb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _s(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ub(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw an()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return qb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new RZ(_s(t.latitude),_s(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=lZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(XA(t));default:return null}}convertTimestamp(t){const n=dy(t);return new Ms(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=mi.fromString(t);ui(qOe(r));const i=new QA(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||Wm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class NDe extends ADe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new IO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Q4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class IO extends NDe{data(t={}){return super.data(t)}}class n6t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new CC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new IO(this._firestore,this._userDataWriter,r.key,r,new CC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new vt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new IO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new CC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new IO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new CC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:r6t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function r6t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W9(e){e=ud(e,Ja);const t=ud(e.firestore,Yy);return BLt(jk(t),e._key).then(n=>o6t(t,e,n))}class PDe extends t6t{constructor(t){super(),this.firestore=t}convertBytes(t){return new sx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ja(this.firestore,null,n)}}function RT(e){e=ud(e,Gb);const t=ud(e.firestore,Yy),n=jk(t),r=new PDe(t);return JLt(e._query),ULt(n,e._query).then(i=>new n6t(t,r,e,i))}function df(e,t,n){e=ud(e,Ja);const r=ud(e.firestore,Yy),i=RDe(e.converter,t,n);return Z4(r,[wDe(K4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Wu.none())])}function i6t(e,t,n,...r){e=ud(e,Ja);const i=ud(e.firestore,Yy),s=K4(i);let o;return o=typeof(t=li(t))=="string"||t instanceof Bk?xDe(s,"updateDoc",e._key,t,n,r):EDe(s,"updateDoc",e._key,t),Z4(i,[o.toMutation(e._key,Wu.exists(!0))])}function s6t(e){return Z4(ud(e.firestore,Yy),[new V4(e._key,Wu.none())])}function Z4(e,t){return function(r,i){const s=new bm;return r.asyncQueue.enqueueAndForget(async()=>TLt(await FLt(r),i,s)),s.promise}(jk(e),t)}function o6t(e,t,n){const r=n.docs.get(t._key),i=new PDe(e);return new NDe(e,i,t._key,r,new CC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=K4(t)}set(t,n,r){this._verifyNotCommitted();const i=G9(t,this._firestore),s=RDe(i.converter,n,r),o=wDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Wu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=G9(t,this._firestore);let o;return o=typeof(n=li(n))=="string"||n instanceof Bk?xDe(this._dataReader,"WriteBatch.update",s._key,n,r,i):EDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Wu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=G9(t,this._firestore);return this._mutations=this._mutations.concat(new V4(n._key,Wu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function G9(e,t){if((e=li(e)).firestore!==t)throw new vt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function u6t(){return new PZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hpe(e){return jk(e=ud(e,Yy)),new a6t(e,t=>Z4(e,t))}(function(t,n=!0){(function(i){SS=i})(Hb),Hm(new Wh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Yy(new s$t(r.getProvider("auth-internal")),new l$t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new vt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new QA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xf(khe,"4.6.3",t),Xf(khe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=new Map,ODe={activated:!1,tokenObservers:[]},l6t={initialized:!1,enabled:!1};function Ls(e){return oH.get(e)||Object.assign({},ODe)}function c6t(e,t){return oH.set(e,t),oH.get(e)}function eF(){return l6t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DDe="https://content-firebaseappcheck.googleapis.com/v1",f6t="exchangeRecaptchaV3Token",d6t="exchangeDebugToken",ppe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},h6t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new HA,this.pending.promise.catch(n=>{}),await m6t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new HA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function m6t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Bu=new wS("appCheck","AppCheck",g6t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mpe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function FZ(e){if(!Ls(e).activated)throw Bu.create("use-before-activation",{appName:e.name})}function $De(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=QN(n)+"d:"),r&&(o+=QN(r)+"h:"),o+=QN(i)+"m:"+QN(s)+"s",o}function QN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Bu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Bu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Bu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Bu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function y6t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${DDe}/projects/${n}/apps/${r}:${f6t}?key=${i}`,body:{recaptcha_v3_token:t}}}function MDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${DDe}/projects/${n}/apps/${r}:${d6t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6t="firebase-app-check-database",b6t=1,rI="firebase-app-check-store",LDe="debug-token";let JN=null;function FDe(){return JN||(JN=new Promise((e,t)=>{try{const n=indexedDB.open(v6t,b6t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Bu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rI,{keyPath:"compositeKey"})}}}catch(n){t(Bu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),JN)}function _6t(e){return BDe(UDe(e))}function w6t(e,t){return jDe(UDe(e),t)}function E6t(e){return jDe(LDe,e)}function x6t(){return BDe(LDe)}async function jDe(e,t){const r=(await FDe()).transaction(rI,"readwrite"),s=r.objectStore(rI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Bu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function BDe(e){const n=(await FDe()).transaction(rI,"readonly"),i=n.objectStore(rI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Bu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function UDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new N4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6t(e){if(UJ()){let t;try{t=await _6t(e)}catch(n){iI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Y9(e,t){return UJ()?w6t(e,t).catch(n=>{iI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function T6t(){let e;try{e=await x6t()}catch{}if(e)return e;{const t=TNt();return E6t(t).catch(n=>iI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BZ(){return eF().enabled}async function UZ(){const e=eF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function C6t(){const e=iPe(),t=eF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new HA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(T6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6t={error:"UNKNOWN_ERROR"};function I6t(e){return BJ.encodeString(JSON.stringify(e),!1)}async function aH(e,t=!1){const n=e.app;FZ(n);const r=Ls(n);let i=r.token,s;if(i&&!_w(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(_w(u)?i=u:await Y9(n,void 0))}if(!t&&i&&_w(i))return{token:i.token};let o=!1;if(BZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jZ(MDe(n,await UZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Y9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ls(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?iI.warn(u.message):iI.error(u),s=u}let a;return i?s?_w(i)?a={token:i.token,internalError:s}:a=ype(s):(a={token:i.token},r.token=i,await Y9(n,i)):a=ype(s),o&&HDe(n,a),a}async function k6t(e){const t=e.app;FZ(t);const{provider:n}=Ls(t);if(BZ()){const r=await UZ(),{token:i}=await jZ(MDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function zDe(e,t,n,r){const{app:i}=e,s=Ls(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&_w(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),gpe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>gpe(e))}function VDe(e,t){const n=Ls(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function gpe(e){const{app:t}=e,n=Ls(t);let r=n.tokenRefresher;r||(r=R6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function R6t(e){const{app:t}=e;return new p6t(async()=>{const n=Ls(t);let r;if(n.token?r=await aH(e,!0):r=await aH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ls(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ppe.RETRIAL_MIN_WAIT,ppe.RETRIAL_MAX_WAIT)}function HDe(e,t){const n=Ls(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function _w(e){return e.expireTimeMillis-Date.now()>0}function ype(e){return{token:I6t(A6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ls(this.app);for(const n of t)VDe(this.app,n.next);return Promise.resolve()}}function P6t(e,t){return new N6t(e,t)}function O6t(e){return{getToken:t=>aH(e,t),getLimitedUseToken:()=>k6t(e),addTokenListener:t=>zDe(e,"INTERNAL",t),removeTokenListener:t=>VDe(e.app,t)}}const D6t="@firebase/app-check",$6t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6t="https://www.google.com/recaptcha/api.js";function L6t(e,t){const n=new HA,r=Ls(e);r.reCAPTCHAState={initialized:n};const i=F6t(e),s=mpe(!1);return s?vpe(e,t,s,i,n):U6t(()=>{const o=mpe(!1);if(!o)throw new Error("no recaptcha");vpe(e,t,o,i,n)}),n.promise}function vpe(e,t,n,r,i){n.ready(()=>{B6t(e,t,n,r),i.resolve(n)})}function F6t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function j6t(e){FZ(e);const n=await Ls(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ls(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function B6t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ls(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ls(e).reCAPTCHAState.succeeded=!1}}),s=Ls(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function U6t(e){const t=document.createElement("script");t.src=M6t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;V6t(this._throttleData);const i=await j6t(this._app).catch(o=>{throw Bu.create("recaptcha-error")});if(!(!((t=Ls(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Bu.create("recaptcha-error");let s;try{s=await jZ(y6t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=z6t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Bu.create("throttled",{time:$De(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=ES(t,"heartbeat"),L6t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof zZ?this._siteKey===t._siteKey:!1}}function z6t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+h6t,httpStatus:e};{const n=t?t.backoffCount:0,r=RNt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function V6t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Bu.create("throttled",{time:$De(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6t(e=VJ(),t){e=li(e);const n=ES(e,"app-check");if(eF().initialized||C6t(),BZ()&&UZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Bu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return q6t(e,t.provider,t.isTokenAutoRefreshEnabled),Ls(e).isTokenAutoRefreshEnabled&&zDe(r,"INTERNAL",()=>{}),r}function q6t(e,t,n){const r=c6t(e,Object.assign({},ODe));r.activated=!0,r.provider=t,r.cachedTokenPromise=S6t(e).then(i=>(i&&_w(i)&&(r.token=i,HDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const W6t="app-check",bpe="app-check-internal";function G6t(){Hm(new Wh(W6t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return P6t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(bpe).initialize()})),Hm(new Wh(bpe,e=>{const t=e.getProvider("app-check").getImmediate();return O6t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xf(D6t,$6t)}G6t();function ZN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof ZN=="function"&&ZN;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof ZN=="function"&&ZN,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof No<"u"?No:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,C){if(typeof x!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var E=new this.constructor(o);if(this.state!==c){var S=this.state===l?x:C;h(E,S,this.outcome)}else this.queue.push(new d(E,x,C));return E};function d(x,C,E){this.promise=x,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,C,E){s(function(){var S;try{S=C(E)}catch(A){return a.reject(x,A)}S===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,S)})}a.resolve=function(x,C){var E=g(p,C);if(E.status==="error")return a.reject(x,E.value);var S=E.value;if(S)m(x,S);else{x.state=l,x.outcome=C;for(var A=-1,k=x.queue.length;++A<k;)x.queue[A].callFulfilled(C)}return x},a.reject=function(x,C){x.state=u,x.outcome=C;for(var E=-1,S=x.queue.length;++E<S;)x.queue[E].callRejected(C);return x};function p(x){var C=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof C=="function")return function(){C.apply(x,arguments)}}function m(x,C){var E=!1;function S(D){E||(E=!0,a.reject(x,D))}function A(D){E||(E=!0,a.resolve(x,D))}function k(){C(A,S)}var R=g(k);R.status==="error"&&S(R.value)}function g(x,C){var E={};try{E.value=x(C),E.status="success"}catch(S){E.status="error",E.value=S}return E}f.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=v;function v(x){var C=new this(o);return a.reject(C,x)}f.all=b;function b(x){var C=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,S=!1;if(!E)return this.resolve([]);for(var A=new Array(E),k=0,R=-1,D=new this(o);++R<E;)P(x[R],R);return D;function P(O,L){C.resolve(O).then(j,function(B){S||(S=!0,a.reject(D,B))});function j(B){A[L]=B,++k===E&&!S&&(S=!0,a.resolve(D,A))}}}f.race=w;function w(x){var C=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,S=!1;if(!E)return this.resolve([]);for(var A=-1,k=new this(o);++A<E;)R(x[A]);return k;function R(D){C.resolve(D).then(function(P){S||(S=!0,a.resolve(k,P))},function(P){S||(S=!0,a.reject(k,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof No<"u"?No:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(ce){if(ce.name!=="TypeError")throw ce;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",x="readwrite";function C(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function E(Y){return new f(function(se){var Z=Y.transaction(g,x),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),ce=navigator.userAgent.match(/Edge\//);se(ce||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function S(Y){return typeof y=="boolean"?f.resolve(y):E(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function D(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var ce=u.open.apply(u,ge);se&&(ce.onupgradeneeded=function(De){var ze=ce.result;try{ze.createObjectStore(Y.storeName),De.oldVersion<=1&&ze.createObjectStore(g)}catch(He){if(He.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw He}}),ce.onerror=function(De){De.preventDefault(),fe(ce.error)},ce.onsuccess=function(){var De=ce.result;De.onversionchange=function(ze){ze.target.close()},Z(De),k(Y)}})}function P(Y){return D(Y,!1)}function O(Y){return D(Y,!0)}function L(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var ce=Y.db.version+1;ce>Y.version&&(Y.version=ce)}return!0}return!1}function j(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var ce=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:ce,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=C(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function $(Y){A(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(ce){return Y.db=ce,L(Y)?O(Y):ce}).then(function(ce){Y.db=se.db=ce;for(var De=0;De<Z.length;De++)Z[De]._dbInfo.db=ce}).catch(function(ce){throw R(Y,ce),ce})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(ce){if(fe>0&&(!Y.db||ce.name==="InvalidStateError"||ce.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||ce.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),O(Y)}).then(function(){return $(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(ce)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var ce=[];function De(){return f.resolve()}for(var ze=0;ze<ge.forages.length;ze++){var He=ge.forages[ze];He!==se&&ce.push(He._initReady().catch(De))}var We=ge.forages.slice(0);return f.all(ce).then(function(){return Z.db=ge.db,P(Z)}).then(function(st){return Z.db=st,L(Z,se._defaultConfig.version)?O(Z):st}).then(function(st){Z.db=ge.db=st,se._dbInfo=Z;for(var wt=0;wt<We.length;wt++){var mn=We[wt];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function V(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){z(Z._dbInfo,w,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=He.get(Y);We.onsuccess=function(){var st=We.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ge(st)},We.onerror=function(){ce(We.error)}}catch(st){ce(st)}})}).catch(ce)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,ce){Z.ready().then(function(){z(Z._dbInfo,w,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=He.openCursor(),st=1;We.onsuccess=function(){var wt=We.result;if(wt){var mn=wt.value;U(mn)&&(mn=B(mn));var Pt=Y(mn,wt.key,st++);Pt!==void 0?ge(Pt):wt.continue()}else ge()},We.onerror=function(){ce(We.error)}}catch(wt){ce(wt)}})}).catch(ce)});return d(fe,se),fe}function ee(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(ce,De){var ze;fe.ready().then(function(){return ze=fe._dbInfo,b.call(se)==="[object Blob]"?S(ze.db).then(function(He){return He?se:j(se)}):se}).then(function(He){z(fe._dbInfo,x,function(We,st){if(We)return De(We);try{var wt=st.objectStore(fe._dbInfo.storeName);He===null&&(He=void 0);var mn=wt.put(He,Y);st.oncomplete=function(){He===void 0&&(He=null),ce(He)},st.onabort=st.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;De(Pt)}}catch(Pt){De(Pt)}})}).catch(De)});return d(ge,Z),ge}function le(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){z(Z._dbInfo,x,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=He.delete(Y);ze.oncomplete=function(){ge()},ze.onerror=function(){ce(We.error)},ze.onabort=function(){var st=We.error?We.error:We.transaction.error;ce(st)}}catch(st){ce(st)}})}).catch(ce)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,x,function(ce,De){if(ce)return ge(ce);try{var ze=De.objectStore(se._dbInfo.storeName),He=ze.clear();De.oncomplete=function(){fe()},De.onabort=De.onerror=function(){var We=He.error?He.error:He.transaction.error;ge(We)}}catch(We){ge(We)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(ce,De){if(ce)return ge(ce);try{var ze=De.objectStore(se._dbInfo.storeName),He=ze.count();He.onsuccess=function(){fe(He.result)},He.onerror=function(){ge(He.error)}}catch(We){ge(We)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,ce){if(Y<0){ge(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=!1,st=He.openKeyCursor();st.onsuccess=function(){var wt=st.result;if(!wt){ge(null);return}Y===0||We?ge(wt.key):(We=!0,wt.advance(Y))},st.onerror=function(){ce(st.error)}}catch(wt){ce(wt)}})}).catch(ce)});return d(fe,se),fe}function Ce(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(ce,De){if(ce)return ge(ce);try{var ze=De.objectStore(se._dbInfo.storeName),He=ze.openKeyCursor(),We=[];He.onsuccess=function(){var st=He.result;if(!st){fe(We);return}We.push(st.key),st.continue()},He.onerror=function(){ge(He.error)}}catch(st){ge(st)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var ce=Y.name===Z.name&&fe._dbInfo.db,De=ce?f.resolve(fe._dbInfo.db):P(Y).then(function(ze){var He=v[Y.name],We=He.forages;He.db=ze;for(var st=0;st<We.length;st++)We[st]._dbInfo.db=ze;return ze});Y.storeName?ge=De.then(function(ze){if(ze.objectStoreNames.contains(Y.storeName)){var He=ze.version+1;A(Y);var We=v[Y.name],st=We.forages;ze.close();for(var wt=0;wt<st.length;wt++){var mn=st[wt];mn._dbInfo.db=null,mn._dbInfo.version=He}var Pt=new f(function(jn,Rr){var Nr=u.open(Y.name,He);Nr.onerror=function(Yo){var kd=Nr.result;kd.close(),Rr(Yo)},Nr.onupgradeneeded=function(){var Yo=Nr.result;Yo.deleteObjectStore(Y.storeName)},Nr.onsuccess=function(){var Yo=Nr.result;Yo.close(),jn(Yo)}});return Pt.then(function(jn){We.db=jn;for(var Rr=0;Rr<st.length;Rr++){var Nr=st[Rr];Nr._dbInfo.db=jn,k(Nr._dbInfo)}}).catch(function(jn){throw(R(Y,jn)||f.resolve()).catch(function(){}),jn})}}):ge=De.then(function(ze){A(Y);var He=v[Y.name],We=He.forages;ze.close();for(var st=0;st<We.length;st++){var wt=We[st];wt._dbInfo.db=null}var mn=new f(function(Pt,jn){var Rr=u.deleteDatabase(Y.name);Rr.onerror=function(){var Nr=Rr.result;Nr&&Nr.close(),jn(Rr.error)},Rr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Rr.onsuccess=function(){var Nr=Rr.result;Nr&&Nr.close(),Pt(Nr)}});return mn.then(function(Pt){He.db=Pt;for(var jn=0;jn<We.length;jn++){var Rr=We[jn];k(Rr._dbInfo)}}).catch(function(Pt){throw(R(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ge,se),ge}var Ye={_driver:"asyncStorage",_initStorage:F,_support:l(),iterate:G,getItem:V,setItem:ee,removeItem:le,clear:de,length:he,key:ye,keys:Ce,dropInstance:ve};function Ue(){return typeof openDatabase=="function"}var mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,Ae="__lfsc__:",Ve=Ae.length,lt="arbf",Nt="blob",qe="si08",me="ui08",ft="uic8",yt="si16",Et="si32",pe="ur16",Ie="ui32",Ke="fl32",bt="fl64",Vt=Ve+lt.length,rr=Object.prototype.toString;function qn(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,ce,De,ze,He;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var We=new ArrayBuffer(se),st=new Uint8Array(We);for(fe=0;fe<Z;fe+=4)ce=mt.indexOf(Y[fe]),De=mt.indexOf(Y[fe+1]),ze=mt.indexOf(Y[fe+2]),He=mt.indexOf(Y[fe+3]),st[ge++]=ce<<2|De>>4,st[ge++]=(De&15)<<4|ze>>2,st[ge++]=(ze&3)<<6|He&63;return We}function Ln(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=mt[se[fe]>>2],Z+=mt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=mt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=mt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function yn(Y,se){var Z="";if(Y&&(Z=rr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&rr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=Ae;Y instanceof ArrayBuffer?(fe=Y,ge+=lt):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=qe:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=ft:Z==="[object Int16Array]"?ge+=yt:Z==="[object Uint16Array]"?ge+=pe:Z==="[object Int32Array]"?ge+=Et:Z==="[object Uint32Array]"?ge+=Ie:Z==="[object Float32Array]"?ge+=Ke:Z==="[object Float64Array]"?ge+=bt:se(new Error("Failed to get type for BinaryArray"))),se(ge+Ln(fe))}else if(Z==="[object Blob]"){var ce=new FileReader;ce.onload=function(){var De=it+Y.type+"~"+Ln(this.result);se(Ae+Nt+De)},ce.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(De){console.error("Couldn't convert value into a JSON string: ",Y),se(null,De)}}function yr(Y){if(Y.substring(0,Ve)!==Ae)return JSON.parse(Y);var se=Y.substring(Vt),Z=Y.substring(Ve,Vt),fe;if(Z===Nt&&be.test(se)){var ge=se.match(be);fe=ge[1],se=se.substring(ge[0].length)}var ce=qn(se);switch(Z){case lt:return ce;case Nt:return c([ce],{type:fe});case qe:return new Int8Array(ce);case me:return new Uint8Array(ce);case ft:return new Uint8ClampedArray(ce);case yt:return new Int16Array(ce);case pe:return new Uint16Array(ce);case Et:return new Int32Array(ce);case Ie:return new Uint32Array(ce);case Ke:return new Float32Array(ce);case bt:return new Float64Array(ce);default:throw new Error("Unkown type: "+Z)}}var Qt={serialize:yn,deserialize:yr,stringToBuffer:qn,bufferToString:Ln};function Wr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function ei(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(ce,De){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(ze){return De(ze)}Z.db.transaction(function(ze){Wr(ze,Z,function(){se._dbInfo=Z,ce()},function(He,We){De(We)})},De)});return Z.serializer=Qt,ge}function Bi(Y,se,Z,fe,ge,ce){Y.executeSql(Z,fe,ge,function(De,ze){ze.code===ze.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(He,We){We.rows.length?ce(He,ze):Wr(He,se,function(){He.executeSql(Z,fe,ge,ce)},ce)},ce):ce(De,ze)},ce)}function An(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){Bi(ze,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[Y],function(He,We){var st=We.rows.length?We.rows.item(0).value:null;st&&(st=De.serializer.deserialize(st)),ge(st)},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function Ui(Y,se){var Z=this,fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){Bi(ze,De,"SELECT * FROM "+De.storeName,[],function(He,We){for(var st=We.rows,wt=st.length,mn=0;mn<wt;mn++){var Pt=st.item(mn),jn=Pt.value;if(jn&&(jn=De.serializer.deserialize(jn)),jn=Y(jn,Pt.key,mn+1),jn!==void 0){ge(jn);return}}ge()},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function Ir(Y,se,Z,fe){var ge=this;Y=p(Y);var ce=new f(function(De,ze){ge.ready().then(function(){se===void 0&&(se=null);var He=se,We=ge._dbInfo;We.serializer.serialize(se,function(st,wt){wt?ze(wt):We.db.transaction(function(mn){Bi(mn,We,"INSERT OR REPLACE INTO "+We.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){De(He)},function(Pt,jn){ze(jn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){De(Ir.apply(ge,[Y,He,Z,fe-1]));return}ze(mn)}})})}).catch(ze)});return d(ce,Z),ce}function ys(Y,se,Z){return Ir.apply(this,[Y,se,Z,1])}function xp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){Bi(ze,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[Y],function(){ge()},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function fl(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(De){Bi(De,ce,"DELETE FROM "+ce.storeName,[],function(){fe()},function(ze,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function Ad(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(De){Bi(De,ce,"SELECT COUNT(key) as c FROM "+ce.storeName,[],function(ze,He){var We=He.rows.item(0).c;fe(We)},function(ze,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function Er(Y,se){var Z=this,fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){Bi(ze,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(He,We){var st=We.rows.length?We.rows.item(0).key:null;ge(st)},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function Ri(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(De){Bi(De,ce,"SELECT key FROM "+ce.storeName,[],function(ze,He){for(var We=[],st=0;st<He.rows.length;st++)We.push(He.rows.item(st).key);fe(We)},function(ze,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function ti(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,ce){for(var De=[],ze=0;ze<ce.rows.length;ze++)De.push(ce.rows.item(ze).name);se({db:Y,storeNames:De})},function(ge,ce){Z(ce)})},function(fe){Z(fe)})})}function pu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(ce){var De;Y.name===Z.name?De=fe._dbInfo.db:De=openDatabase(Y.name,"","",0),Y.storeName?ce({db:De,storeNames:[Y.storeName]}):ce(ti(De))}).then(function(ce){return new f(function(De,ze){ce.db.transaction(function(He){function We(Pt){return new f(function(jn,Rr){He.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){jn()},function(Nr,Yo){Rr(Yo)})})}for(var st=[],wt=0,mn=ce.storeNames.length;wt<mn;wt++)st.push(We(ce.storeNames[wt]));f.all(st).then(function(){De()}).catch(function(Pt){ze(Pt)})},function(He){ze(He)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Na={_driver:"webSQLStorage",_initStorage:ei,_support:Ue(),iterate:Ui,getItem:An,setItem:ys,removeItem:xp,clear:fl,length:Ad,key:Er,keys:Ri,dropInstance:pu};function Pa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function te(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!te()||localStorage.length>0}function Te(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=Qt,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var ce=localStorage.key(ge);ce.indexOf(fe)===0&&localStorage.removeItem(ce)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,ce=localStorage.getItem(ge.keyPrefix+Y);return ce&&(ce=ge.serializer.deserialize(ce)),ce});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,ce=ge.keyPrefix,De=ce.length,ze=localStorage.length,He=1,We=0;We<ze;We++){var st=localStorage.key(We);if(st.indexOf(ce)===0){var wt=localStorage.getItem(st);if(wt&&(wt=ge.serializer.deserialize(wt)),wt=Y(wt,st.substring(De),He++),wt!==void 0)return wt}}});return d(fe,se),fe}function qt(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,ce;try{ce=localStorage.key(Y)}catch{ce=null}return ce&&(ce=ce.substring(ge.keyPrefix.length)),ce});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,ce=[],De=0;De<ge;De++){var ze=localStorage.key(De);ze.indexOf(fe.keyPrefix)===0&&ce.push(ze.substring(fe.keyPrefix.length))}return ce});return d(Z,Y),Z}function Fn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var ce=se;return new f(function(De,ze){var He=fe._dbInfo;He.serializer.serialize(se,function(We,st){if(st)ze(st);else try{localStorage.setItem(He.keyPrefix+Y,We),De(ce)}catch(wt){(wt.name==="QuotaExceededError"||wt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ze(wt),ze(wt)}})})});return d(ge,Z),ge}function kr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(ce){Y.storeName?ce(oe(Y,fe._defaultConfig)):ce(Y.name+"/")}).then(function(ce){for(var De=localStorage.length-1;De>=0;De--){var ze=localStorage.key(De);ze.indexOf(ce)===0&&localStorage.removeItem(ze)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Ht={_driver:"localStorageWrapper",_initStorage:Te,_support:Pa(),iterate:St,getItem:ot,setItem:ir,removeItem:pn,clear:Se,length:Fn,key:qt,keys:On,dropInstance:kr},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Gr=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(sr(se[ge],Z))return!0;ge++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ni={},qs={},ni={INDEXEDDB:Ye,WEBSQL:Na,LOCALSTORAGE:Ht},yo=[ni.INDEXEDDB._driver,ni.WEBSQL._driver,ni.LOCALSTORAGE._driver],zi=["dropInstance"],Vi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(zi),Go={description:"",driver:yo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Oa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Ws(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var ec=function(){function Y(se){o(this,Y);for(var Z in ni)if(ni.hasOwnProperty(Z)){var fe=ni[Z],ge=fe._driver;this[Z]=ge,Ni[ge]||this.defineDriver(fe)}this._defaultConfig=Ws({},Go),this._config=Ws({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var ce=new f(function(De,ze){try{var He=Z._driver,We=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){ze(We);return}for(var st=Vi.concat("_initStorage"),wt=0,mn=st.length;wt<mn;wt++){var Pt=st[wt],jn=!Gr(zi,Pt);if((jn||Z[Pt])&&typeof Z[Pt]!="function"){ze(We);return}}var Rr=function(){for(var kd=function(tc){return function(){var mu=new Error("Method "+tc+" is not implemented by the current driver"),Tp=f.reject(mu);return d(Tp,arguments[arguments.length-1]),Tp}},Sp=0,XS=zi.length;Sp<XS;Sp++){var av=zi[Sp];Z[av]||(Z[av]=kd(av))}};Rr();var Nr=function(kd){Ni[He]&&console.info("Redefining LocalForage driver: "+He),Ni[He]=Z,qs[He]=kd,De()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Nr,ze):Nr(!!Z._support):Nr(!0)}catch(Yo){ze(Yo)}});return h(ce,fe,ge),ce},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var ce=Ni[Z]?f.resolve(Ni[Z]):f.reject(new Error("Driver not found."));return h(ce,fe,ge),ce},Y.prototype.getSerializer=function(Z){var fe=f.resolve(Qt);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var ce=this;Jn(Z)||(Z=[Z]);var De=this._getSupportedDrivers(Z);function ze(){ce._config.driver=ce.driver()}function He(wt){return ce._extend(wt),ze(),ce._ready=ce._initStorage(ce._config),ce._ready}function We(wt){return function(){var mn=0;function Pt(){for(;mn<wt.length;){var jn=wt[mn];return mn++,ce._dbInfo=null,ce._ready=null,ce.getDriver(jn).then(He).catch(Pt)}ze();var Rr=new Error("No available storage method found.");return ce._driverSet=f.reject(Rr),ce._driverSet}return Pt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var wt=De[0];return ce._dbInfo=null,ce._ready=null,ce.getDriver(wt).then(function(mn){ce._driver=mn._driver,ze(),ce._wrapLibraryMethodsWithReady(),ce._initDriver=We(De)})}).catch(function(){ze();var wt=new Error("No available storage method found.");return ce._driverSet=f.reject(wt),ce._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!qs[Z]},Y.prototype._extend=function(Z){Ws(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,ce=Z.length;ge<ce;ge++){var De=Z[ge];this.supports(De)&&fe.push(De)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Vi.length;Z<fe;Z++)Oa(this,Vi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),Id=new ec;r.exports=Id},{3:3}]},{},[4])(4)})})(qDe);var Y6t=qDe.exports;const uH=Ho(Y6t);let eP;const K6t=new Uint8Array(16);function X6t(){if(!eP&&(eP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eP(K6t)}const wo=[];for(let e=0;e<256;++e)wo.push((e+256).toString(16).slice(1));function Q6t(e,t=0){return wo[e[t+0]]+wo[e[t+1]]+wo[e[t+2]]+wo[e[t+3]]+"-"+wo[e[t+4]]+wo[e[t+5]]+"-"+wo[e[t+6]]+wo[e[t+7]]+"-"+wo[e[t+8]]+wo[e[t+9]]+"-"+wo[e[t+10]]+wo[e[t+11]]+wo[e[t+12]]+wo[e[t+13]]+wo[e[t+14]]+wo[e[t+15]]}const J6t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_pe={randomUUID:J6t};function $$(e,t,n){if(_pe.randomUUID&&!t&&!e)return _pe.randomUUID();e=e||{};const r=e.random||(e.rng||X6t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Q6t(r)}class WDe{constructor(t){hl(this,"engine");hl(this,"connected",!1);hl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function iE(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function NT(e){return e.participantId!==void 0}class If extends WDe{constructor(){super("firebase");hl(this,"RECAPTCHAV3TOKEN","6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ");hl(this,"firestore");hl(this,"collectionPrefix","prod-");hl(this,"studyCollection");hl(this,"storage");hl(this,"studyId","");hl(this,"localForage",uH.createInstance({name:"currentParticipantId"}));hl(this,"participantData",null);const n=TK.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=cPe(n);this.firestore=HLt(r,{}),this.storage=k_();try{H6t(r,{provider:new zZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}async connect(){try{await qLt(this.firestore);const n=await Gs(this.firestore,".info/connected");await W9(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=I$();if(!i.currentUser&&(await bOt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await iE(JSON.stringify(r));if(this.studyCollection=ff(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=k_(),i=sa(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await mv(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=k_(),i=sa(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await mv(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");if(NT(o))return this.participantData=o,o;const a=await iE(JSON.stringify(r));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=$$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=k_(),o=sa(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);WN(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=k_(),s=await Promise.all(n.map(async a=>await mv(sa(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,f=URL.createObjectURL(c);u(f)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=k_(),s=await Promise.all(n.map(async a=>await mv(sa(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(f=>{u(f)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=Gs(this.studyCollection,"sequenceAssignment");await df(i,{});const s=ff(i,"sequenceAssignment"),o=Gs(s,this.currentParticipantId),a=cpe(s,ZLt("participantId","==","")),u=await RT(a);if(u.docs.length>0){const p=u.docs[0],m=p.data().timestamp;await s6t(p.ref),await df(o,{participantId:this.currentParticipantId,timestamp:m})}else await df(o,{participantId:this.currentParticipantId,timestamp:u6t()});const l=cpe(s,e6t("timestamp","asc")),d=(await RT(l)).docs.map(p=>p.data()).findIndex(p=>p.participantId===n||this.currentParticipantId),h=r[d%r.length];if(!h)throw new Error("Latin square is empty");return h}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=sa(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await IT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");NT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return NT(r)?r:null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=$$();await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;const s=await iE(JSON.stringify(n)),o={participantId:i,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};return await this._pushToFirebaseStorage(`participants/${i}`,"participantData",o),o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");return this.participantData.completed=!0,await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=ff(this.firestore,"user-management"),i=await RT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await df(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await df(Gs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await df(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await df(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await df(Gs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=sa(this.storage,`${this.collectionPrefix}${n}/participants`),i=await IT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");NT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=ff(this.firestore,`${this.collectionPrefix}${n}`),s=sa(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!NT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Gs(i,"sequenceAssignment"),u=ff(a,"sequenceAssignment"),l=Gs(u,r);await i6t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await W9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Gs(this.firestore,"metadata","collections");await df(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Gs(this.firestore,"metadata","collections"),i=await W9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await df(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=sa(this.storage,n),s=(await IT(r)).items.map(o=>Ahe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=sa(this.storage,n),o=(await IT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=sa(this.storage,n),s=sa(this.storage,r),o=await mv(i),u=await(await fetch(o)).blob();await WN(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=ff(this.firestore,n),s=Gs(i,"sequenceAssignment"),o=ff(s,"sequenceAssignment"),a=ff(this.firestore,r),u=Gs(a,"sequenceAssignment");await df(u,{});const l=ff(u,"sequenceAssignment"),c=await RT(o),f=hpe(this.firestore);c.docs.forEach(d=>{const h=Gs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=ff(this.firestore,n),i=Gs(r,"sequenceAssignment"),s=ff(i,"sequenceAssignment"),o=await RT(s),a=hpe(this.firestore);o.forEach(u=>{const l=Gs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=sa(this.storage,n);return(await IT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=sa(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await mv(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await mv(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=sa(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await WN(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await WN(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=sa(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Ahe(i)}}const GDe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),IS=()=>I.useContext(GDe);function Z6t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=js(),l=async()=>{const h=I$();try{await COt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof If)try{h=I$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof If){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=TOt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(GDe.Provider,{value:d,children:i.determiningStatus?_.jsx($c,{visible:!0}):e})}function e4t(){const{config:e,metadata:t}=Uo(C=>C),n=bK(),r=Mc(),{toggleShowHelpText:i,toggleStudyBrowser:s}=jl(),{storageEngine:o}=js(),a=Uo(C=>C.isRecording),u=Fy(),l=IS(),c=n.length-1,f=typeof u=="number"?u/c*100:0,[d,h]=I.useState(!1),p=e==null?void 0:e.uiConfig.logoPath,m=e==null?void 0:e.uiConfig.withProgressBar,g=_K(),y=$we(`/${g}`);function v(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=y}).catch(C=>{console.error(C)})}const b=I.useRef(null),[w,x]=I.useState(!1);return I.useEffect(()=>{const C=b.current;C&&x(C.scrollWidth>C.offsetWidth)},[e]),_.jsx(fs.Header,{p:"md",children:_.jsxs(wc,{mt:-7,align:"center",children:[_.jsx(wc.Col,{span:4,children:_.jsxs(nr,{align:"center",wrap:"nowrap",children:[_.jsx($y,{maw:40,src:`${op}${p}`,alt:"Study Logo"}),_.jsx(Wf,{w:"md"}),_.jsx(ls,{order:4,children:e==null?void 0:e.studyMetadata.title}),a?_.jsxs(nr,{gap:20,wrap:"nowrap",children:[_.jsx(tt,{color:"red",children:"Recording audio"}),_.jsx(WTe,{})]}):null]})}),_.jsx(wc.Col,{span:4,children:m&&_.jsx(Hx,{radius:"md",size:"lg",value:f})}),_.jsx(wc.Col,{span:4,children:_.jsxs(nr,{wrap:"nowrap",justify:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&_.jsx(_n,{variant:"outline",onClick:()=>r(i()),children:"Help"}),l.user.isAdmin&&_.jsxs(Iu,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Iu.Target,{children:_.jsx(rd,{size:"lg",className:"studyBrowserMenuDropdown",children:_.jsx(kQe,{})})}),_.jsxs(Iu.Dropdown,{children:[_.jsx(Iu.Item,{leftSection:_.jsx(FQe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),_.jsx(Iu.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(OQe,{size:14}),children:"Contact"}),_.jsx(Iu.Item,{leftSection:_.jsx(Xwe,{size:14}),onClick:()=>v(),children:"Next Participant"})]})]})]})})]})})}function t4t(){var u;const e=(u=Dm())==null?void 0:u.uiConfig.sidebar,t=Dm(),n=jy(),r=t.components[n],i=I.useMemo(()=>{var l;return r?P6(r)&&t.baseComponents?wK({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=xK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(fs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(fs.Section,{bg:"gray.3",p:"xl",children:_.jsxs(tt,{c:"gray.9",children:[_.jsx(tt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(tu,{text:o})]})}),_.jsx(fs.Section,{p:"sm",children:_.jsx(ZD,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(ZD,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)}function n4t(){const{showHelpText:e,config:t}=Uo(u=>u),n=Mc(),{toggleShowHelpText:r}=jl(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await EK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Ss,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(tu,{text:i}):_.jsx(tk,{path:t.uiConfig.helpTextPath})})}function r4t(){const{alertModal:e}=Uo(o=>o),{setAlertModal:t}=jl(),n=Mc(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Ss,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(bG,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:_.jsx(vQe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(tt,{my:"md",children:e.message}),_.jsx(ke,{style:{float:"right"},color:"red",children:_.jsx(_n,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function i4t(){const e=I.useRef([]),t=Dm(),n=t.uiConfig.windowEventDebounceTime??100,r=Uo(i=>i.showStudyBrowser);return I.useEffect(()=>{const i=Md(h=>{e.current.push([Date.now(),"focus",h.target instanceof HTMLElement?h.target.tagName:""])},n,{maxWait:n}),s=Md(h=>{e.current.push([Date.now(),"input",h.data??""])},n,{maxWait:n}),o=Md(h=>{e.current.push([Date.now(),"keypress",h.key])},n,{maxWait:n}),a=Md(h=>{e.current.push([Date.now(),"mousedown",[h.clientX,h.clientY]])},n,{maxWait:n}),u=Md(h=>{e.current.push([Date.now(),"mouseup",[h.clientX,h.clientY]])},n,{maxWait:n}),l=Md(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),c=Md(h=>{e.current.push([Date.now(),"mousemove",[h.clientX,h.clientY]])},n,{maxWait:n}),f=Md(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),d=Md(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",i,!0),window.addEventListener("input",s),window.addEventListener("keypress",o),window.addEventListener("mousedown",a),window.addEventListener("mouseup",u),window.addEventListener("resize",l),window.addEventListener("mousemove",c),window.addEventListener("scroll",f),document.addEventListener("visibilitychange",d),()=>{window.removeEventListener("focus",i,!0),window.removeEventListener("input",s),window.removeEventListener("keypress",o),window.addEventListener("mousedown",a),window.addEventListener("mouseup",u),window.removeEventListener("resize",l),window.removeEventListener("mousemove",c),window.removeEventListener("scroll",f),document.removeEventListener("visibilitychange",d)}},[]),_.jsx(OTe.Provider,{value:e,children:_.jsxs(fs,{padding:"md",header:{height:70},navbar:{width:300,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:300,breakpoint:"xs",collapsed:{desktop:!r,mobile:!r}},children:[_.jsx(t4t,{}),_.jsx(nNt,{}),_.jsx(e4t,{}),_.jsx(n4t,{}),_.jsx(r4t,{}),_.jsx(fs.Main,{children:_.jsx(BXe,{})})]})})}var wpe=Object.prototype.hasOwnProperty;function Epe(e,t,n){for(n of e.keys())if(R2(n,t))return n}function R2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&R2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Epe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Epe(t,i),!i)||!R2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(wpe.call(e,n)&&++r&&!wpe.call(t,n)||!(n in t)||!R2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function s4t(e){var t=I.useRef(e),n=I.useRef(0);return R2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function o4t(e,t){return I.useEffect(e,s4t(t))}const YDe=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return o4t(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},tP=3,R_=25,nP=25,rP=20,xpe=1;function a4t({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=I.useState(!1),[l,{width:c}]=Hf();return _.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[_.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+xpe,width:e(t.endTime)-e(t.startTime)-xpe*2,y:r-R_,height:R_}),_.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-tP,width:c+tP*2,y:r-R_-nP-o,height:rP,fill:"whitesmoke"}),_.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-tP,x2:c+e(t.startTime)+tP,y1:r-R_-nP+rP-o,y2:r-R_-nP+rP-o}),_.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-R_-nP-o,height:rP,children:_.jsx(eu,{style:{width:"fit-content"},children:_.jsx(tt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function u4t({xScale:e,answer:t,height:n,labelHeight:r=0}){return _.jsx("g",{children:_.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const Spe=25,l4t=8;function KDe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Uo(l=>l),a=I.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(f=>s?f[0]===s:!0).sort((f,d)=>f[1].startTime-d[1].startTime);return c.map((f,d)=>{const[h,p]=f,m=d>0?c[d-l-1]:null;return m&&m[0].length*l4t+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:_.jsx(u4t,{labelHeight:l*Spe,answer:p,height:r,xScale:e},h),label:_.jsx(a4t,{labelHeight:l*Spe,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=I.useMemo(()=>Object.entries(t.answers||{}).sort((c,f)=>c[1].startTime-f[1].startTime).map(c=>{const[f,d]=c,h=[];let p=[-1,-1],m="visible";if(d.windowEvents)for(let g=0;g<d.windowEvents.length;g+=1)d.windowEvents[g][1]==="visibility"&&(d.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[d.windowEvents[g][0],-1],m="hidden"):d.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=d.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>_.jsx(ko,{withinPortal:!0,label:"Browsed away",children:_.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:_.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}const K9={left:5,top:0,right:5,bottom:0};function c4t(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function f4t({participant:e,maxDuration:t}){const n=Xc(),r=ig(),i=I.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,f)=>c.startTime-f.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=Hf(),a=I.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:vX(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=I.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(d=>[d.startTime,d.endTime]).flat(),c=e3(l);return Lh([K9.left,o+K9.left+K9.right]).domain(c).clamp(!0)},[e,o]);return _.jsx(eu,{children:_.jsxs(Di,{gap:25,ref:s,style:{width:"75%"},children:[_.jsxs(nr,{justify:"space-between",children:[_.jsx(Db,{size:"25px",component:ZXe,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/${Ac(e.sequence)[0]}`),children:e.participantId}),_.jsx(tt,{size:"xl",children:`${a}`}),_.jsx(tt,{size:"xl",children:`${c4t(i)}`})]}),u?_.jsx(KDe,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function d4t(e){return e?e.getAllParticipantsData():null}const h4t=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],p4t=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function m4t(){const{storageEngine:e}=js(),{value:t,status:n}=YDe(d4t,[e]),r=I.useMemo(()=>{if(!(n!=="success"||!t))return Ic(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?_.jsx(Di,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>p4t.includes(i.participantId)||h4t.includes(i.participantId)).map(i=>_.jsx(f4t,{maxDuration:r,participant:i},i.participantId))}):_.jsx(Dc,{})}var XDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:No,()=>(()=>{var n={d:(c,f)=>{for(var d in f)n.o(f,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:f[d]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(c)}function s(c){return function(f){if(Array.isArray(f))return o(f)}(c)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(c)||function(f,d){if(f){if(typeof f=="string")return o(f,d);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(f,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,h=new Array(f);d<f;d++)h[d]=c[d];return h}function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var b=v.call(g,y||"default");if(i(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var f,d;return f=c,d=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(b){return b.headers.has("Content-Type")&&!b.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(b.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),b.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),b=m.getChannelData(g).length-1;b>=0;b--)y[b]+=v[b];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),b=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),x=0;x<h.numberOfChannels;x++)for(var C=h.getChannelData(x),E=w.getChannelData(x),S=0;S<v;S++)E[S]=C[b+S],S<g*this._sampleRate&&(E[S]*=S/(g*this._sampleRate)),S>v-y*this._sampleRate&&(E[S]*=(v-S)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,b=new ArrayBuffer(8+v),w=new DataView(b);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,x){return w+x.length},0),y=new Float32Array(g),v=0,b=0;v<g;)p.forEach(function(w){y[v++]=w[b]}),b++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],d&&u(f.prototype,d),Object.defineProperty(f,"prototype",{writable:!1}),c}();return r})())})(XDe);var g4t=XDe.exports;const y4t=Ho(g4t);function v4t({cx:e,cy:t,r:n,color:r}){return _.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function b4t({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return _.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return _.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:_.jsx(v4t,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?_.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const Tpe={left:5,top:0,right:5,bottom:0};function _4t({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const f=I.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{trialFilter:d}=Nm();I.useEffect(()=>{if(!d||!t)return;const m=t.answers[d].provenanceGraph;if(!m)return;const{startTime:g}=t.answers.introduction,y=g+o;if(!i||!m.nodes[i]){s(m.root);return}let v=m.nodes[i];for(;;)if(y<v.createdOn){if(zkt(v))break;{const b=v.parent;if(y<m.nodes[b].createdOn)v=m.nodes[b];else break}}else if(v.children.length>0){const b=v.children[0];if(y>m.nodes[b].createdOn)v=m.nodes[b];else break}else break;v.id!==i&&s(v.id)},[i,t,o,s,d]);const h=I.useCallback((m,g,y)=>{a(g,(g-e.domain()[0])/f),s(m)},[s,a,f,e]),p=I.useMemo(()=>Object.entries(t.answers).filter(m=>d?d===m[0]:!0).map(m=>{const[g,y]=m;return _.jsx(b4t,{taskName:g,answer:y,height:r,currentNode:i,setCurrentNode:h,xScale:e},g)}),[i,h,r,t.answers,d,e]);return _.jsx(Di,{children:_.jsxs("svg",{style:{width:n,height:r},children:[_.jsx("line",{stroke:"black",strokeWidth:1,x1:Tpe.left,x2:n+Tpe.left,y1:r/2,y2:r/2}),p]})})}const Cpe={top:5,left:5,right:5,bottom:5};function w4t({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=I.useMemo(()=>e.map(s=>_.jsxs("g",{children:[_.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:Cpe.top,y2:Cpe.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>_.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),f=t(n+s.end*1e3);return _.jsx("foreignObject",{x:c+(f-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:_.jsx(ko,{label:u.name,withArrow:!0,arrowSize:6,children:_.jsx(Dh,{size:12,color:u.color})})},u.name)})},a))]},s.start)),[r,n,e,t]);return _.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function E4t({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,addTag:u,onTextChange:l,deleteRowCallback:c,addRowCallback:f,onSelectTags:d,addRef:h}){const p=oL(),[m,g]=I.useState(e),y=x=>d([...a,o.find(C=>C.name===x)]),v=x=>d(a.filter(C=>C.name!==x)),b=a.map(x=>{const C=bA(x.color).l;return _.jsx(V1,{withRemoveButton:!0,styles:{root:{backgroundColor:x.color,color:C>.7?"black":"white"}},onRemove:()=>v(x.name),children:x.name},x.name)}),w=o.filter(x=>!a.find(C=>C.name===x.name)).map(x=>_.jsx(wn.Option,{value:x.name,children:_.jsxs(nr,{gap:"sm",children:[_.jsx(Dh,{size:10,color:x.color}),_.jsx("span",{children:x.name})]})},x.name));return _.jsxs(nr,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[_.jsxs(nr,{wrap:"nowrap",gap:0,style:{width:"100%"},children:[_.jsx(DQe,{height:40,width:20,viewBox:"10 0 14 24",strokeWidth:2,color:r>=n&&r<=i?"cornflowerblue":"lightgray"}),_.jsx(hm,{ref:x=>x?h(x):null,style:{width:"100%"},variant:"unstyled",value:s,onChange:x=>{l(x.currentTarget.value)},onKeyDown:x=>{x.key==="Enter"&&x.currentTarget.selectionStart!==null?f(x.currentTarget.selectionStart):x.key==="Backspace"&&x.currentTarget.selectionStart===0&&x.currentTarget.selectionEnd===0&&(c(),x.preventDefault(),x.stopPropagation())}})]}),_.jsxs(nr,{wrap:"nowrap",style:{width:"300px"},children:[_.jsx(lL,{orientation:"vertical",size:"xs"}),_.jsxs(wn,{width:300,store:p,onOptionSubmit:y,withinPortal:!1,children:[_.jsx(wn.DropdownTarget,{children:_.jsx(SE,{style:{width:"400px"},pointer:!0,onClick:()=>p.toggleDropdown(),children:_.jsxs(V1.Group,{children:[b.length>0?b:_.jsx(Li.Placeholder,{children:"Add tags"}),_.jsx(wn.EventsTarget,{children:_.jsx(SE.Field,{type:"hidden",onBlur:()=>p.closeDropdown()})})]})})}),_.jsx(wn.Dropdown,{children:_.jsx(wn.Options,{children:w.length===0?_.jsx(wn.Empty,{children:"No additional tags"}):w})})]}),_.jsxs(Kn,{children:[_.jsx(Kn.Target,{children:_.jsx(EQe,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),_.jsx(Kn.Dropdown,{children:_.jsx(yL,{value:m,onChange:x=>g(x.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(m)})})]})]})]})}function Ape({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=I.useState(n?r.name:""),[o,a]=I.useState(n?r.color:"#fd7e14");return _.jsxs(Di,{gap:"xs",children:[_.jsxs(nr,{children:[_.jsx(Dh,{color:o}),_.jsx(hm,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),_.jsx(YG,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),_.jsx(_n,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>e({color:o,name:i}),children:n?"Edit Tag":"Add Tag"})]})}function x4t({createTagCallback:e,editTagCallback:t,tags:n}){const[r,i]=I.useState(!1);return _.jsxs(Di,{style:{width:"300px"},gap:"xs",children:[n.length===0?_.jsx(tt,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(s=>_.jsxs(nr,{justify:"space-between",children:[_.jsxs(nr,{children:[_.jsx(Dh,{color:s.color}),_.jsx(tt,{children:s.name})]}),_.jsxs(Kn,{trapFocus:!0,withinPortal:!1,children:[_.jsx(Kn.Target,{children:_.jsx(RQe,{color:"lightgray"})}),_.jsx(Kn.Dropdown,{children:_.jsx(Ape,{editTag:!0,currentNames:n.map(o=>o.name),addTagCallback:o=>{t(s,o)},editableTag:s})})]})]},s.name)),_.jsxs(Kn,{trapFocus:!0,opened:r,withinPortal:!1,children:[_.jsx(Kn.Target,{children:_.jsx(_n,{variant:"light",onClick:()=>i(!r),children:"Create new tag"})}),_.jsx(Kn.Dropdown,{children:_.jsx(Ape,{currentNames:n.map(s=>s.name),addTagCallback:s=>{i(!1),e(s)}})})]})]})}function S4t({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){const[a,u]=I.useState(null),{trrackId:l,studyId:c,trialFilter:f}=Nm(),[d,h]=I.useState([]),{storageEngine:p}=js(),m=Dm(),g=I.useRef([]),y=Yv((E,S)=>{const A=[...s];A[E].text=S,o(A)}),v=Yv((E,S)=>{const A=[...s];A[E].selectedTags=S,o(A)}),b=Yv((E,S)=>{const A=[...s];A[E].annotation=S,o(A)}),w=Yv(E=>{if(E===0)return;const S=structuredClone(s);S[E-1].text=s[E-1].text+s[E].text,S[E-1].transcriptMappingEnd=s[E].transcriptMappingEnd,S[E-1].selectedTags=[...s[E-1].selectedTags,...s[E].selectedTags.filter(A=>!s[E-1].selectedTags.find(k=>k.name===A.name))],S.splice(E,1),S.filter(A=>A.transcriptMappingStart===S[E-1].transcriptMappingStart).forEach(A=>{A.transcriptMappingEnd=S[E-1].transcriptMappingEnd}),o(S),setTimeout(()=>{g.current[E-1].focus(),g.current[E-1].setSelectionRange(s[E-1].text.length,s[E-1].text.length,"none")})}),x=Yv((E,S)=>{const A=structuredClone(s),k=A[E];A.splice(E+1,0,{transcriptMappingEnd:k.transcriptMappingEnd,transcriptMappingStart:k.transcriptMappingStart,text:k.text.slice(S),selectedTags:k.selectedTags,annotation:""}),A[E].text=A[E].text.slice(0,S),o(A),setTimeout(()=>{g.current[E+1].focus(),g.current[E+1].setSelectionRange(0,0)})});I.useEffect(()=>{const E=[];s.forEach((S,A)=>{a&&(A===0||S.transcriptMappingStart!==s[A-1].transcriptMappingStart)&&E.push({start:A===0?0:a.results[S.transcriptMappingStart-1].resultEndTime,end:a.results[S.transcriptMappingEnd].resultEndTime,lineStart:S.transcriptMappingStart,lineEnd:S.transcriptMappingEnd,tags:s.filter(k=>k.transcriptMappingStart===S.transcriptMappingStart&&k.transcriptMappingEnd===S.transcriptMappingEnd).map(k=>k.selectedTags)})}),n(E)},[s,n,a]),I.useEffect(()=>{c&&l&&e&&(p==null||p.getTranscription(Ac(e.sequence).filter(E=>m.tasksToNotRecordAudio===void 0||!m.tasksToNotRecordAudio.includes(E)).filter(E=>f?E===f:!0),l).then(E=>{const S=E.map(R=>JSON.parse(R));let A=0;const k=S.map(R=>{const D=R.results.map(P=>({...P,resultEndTime:+P.resultEndTime.split("s")[0]+A}));return A+=+R.results[R.results.length-1].resultEndTime.split("s")[0],D}).flat();u({results:k}),o(k.map((R,D)=>{var P;return{transcriptMappingStart:D,transcriptMappingEnd:D,text:((P=R.alternatives[0].transcript)==null?void 0:P.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[p,c,l,m.tasksToNotRecordAudio,e,f,o,i]),I.useEffect(()=>{if(a&&r!==null&&e&&t>0){let E=r;const S=f?e.answers[f].startTime:e.answers.audioTest.startTime,A=Math.abs(t-S)/1e3;if(A>a.results[E].resultEndTime){for(;A>a.results[E].resultEndTime;)if(E+=1,E>a.results.length-1){E=a.results.length-1;break}}else if(E>0&&A<a.results[E-1].resultEndTime)for(;E>0&&A<a.results[E-1].resultEndTime;)E-=1;if(r===E)return;i(E)}},[r,e,t,i,a,f]);const C=I.useCallback((E,S)=>{const A=d.findIndex(D=>D.name===E.name),k=Array.from(d);k[A]=S;const R=Array.from(s);R.forEach(D=>{D.selectedTags=D.selectedTags.map(P=>P.name===E.name?S:P)}),o(R),h(k)},[o,d,s]);return _.jsxs(Di,{gap:0,children:[_.jsxs(nr,{mb:"xl",justify:"space-between",wrap:"nowrap",children:[_.jsx(tt,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),_.jsxs(Kn,{children:[_.jsx(Kn.Target,{children:_.jsxs(nr,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[_.jsx(Wwe,{}),_.jsx(tt,{children:"Tags"})]})}),_.jsx(Kn.Dropdown,{children:_.jsx(x4t,{createTagCallback:E=>{h([...d,E])},editTagCallback:C,tags:d})})]})]}),s.map((E,S)=>_.jsx(E4t,{annotation:E.annotation,setAnnotation:A=>b(S,A),addRef:A=>{g.current[S]=A},onSelectTags:A=>v(S,A),addRowCallback:A=>x(S,A),deleteRowCallback:()=>w(S),onTextChange:A=>y(S,A),tags:d,selectedTags:E.selectedTags,addTag:A=>{h([...d,A]),v(S,[...E.selectedTags,A])},text:E.text,start:E.transcriptMappingStart,end:E.transcriptMappingEnd,current:r===null?0:r},S))]})}const X9={left:5,top:0,right:5,bottom:0};function T4t(e,t){return t?t.getParticipantData(e):null}const Ipe=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],kpe=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function C4t(){const{trrackId:e,trialFilter:t}=Nm(),{storageEngine:n}=js(),[r,i]=I.useState(0),[s,{width:o}]=Hf(),[a,u]=I.useState(null),{value:l,status:c}=YDe(T4t,[e,n]),{saveAnalysisState:f}=jl(),d=Mc(),[h,p]=I.useState(!1),[m,g]=xUe(0,50),y=I.useRef(null),v=Dm(),b=Xc(),{analysisTrialName:w}=Uo(F=>F),{setAnalysisTrialName:x}=jl(),[C,E]=I.useState(!0),S=I.useRef(null),[A,k]=I.useState([]),[R,D]=I.useState([]),P=I.useMemo(()=>[...Ipe,...kpe],[]);I.useEffect(()=>{if(w&&l){const F=VA.create(),V=PV({registry:F,initialState:{}});l.answers[w].provenanceGraph&&(V.importObject(kE(l.answers[w].provenanceGraph)),S.current=V)}},[l,w]);const O=I.useCallback(F=>{var V;w&&l&&S.current&&(d(f(S.current.getState((V=l.answers[w].provenanceGraph)==null?void 0:V.nodes[F]))),S.current.to(F)),u(F)},[l,f,d,w,S]),L=I.useCallback(F=>{var V;if(F!==w)if(d(x(F)),d(f(null)),l&&l.answers[F].provenanceGraph){const G=VA.create(),ee=PV({registry:G,initialState:{}});ee.importObject(kE(l.answers[F].provenanceGraph)),S.current=ee,O(((V=l.answers[F].provenanceGraph)==null?void 0:V.root)||"")}else d(f(null)),u(null),S.current=null},[O,l,f,x,d,w]);I.useEffect(()=>{t&&L(t)},[L,t]);const j=Yv(F=>{if(l&&w&&(l.answers[w].endTime-l.answers.audioTest.startTime)/1e3<F){const V=Ac(l.sequence);L(V[V.indexOf(w)+1])}else l&&w&&S.current&&S.current.current.children.length>0&&(S.current.graph.backend.nodes[S.current.current.children[0]].createdOn-l.answers.audioTest.startTime)/1e3<F&&O(S.current.current.children[0]);if(l&&w){const V=t?l.answers[t].startTime:l.answers.audioTest.startTime;g(F*1e3+V)}}),B=I.useCallback(F=>{if(F&&l&&e){const V=new y4t;n==null||n.getAudio(Ac(l.sequence).filter(G=>v.tasksToNotRecordAudio===void 0||!v.tasksToNotRecordAudio.includes(G)).filter(G=>t?G===t:!0),e).then(G=>{F&&V.fetchAudio(...G).then(ee=>V.concatAudio(ee)).then(ee=>V.export(ee,"audio/mp3")).then(ee=>F.loadBlob(ee.blob).then(()=>E(!1))).catch(ee=>{throw new Error(ee)}),F.on("timeupdate",j)})}},[v.tasksToNotRecordAudio,l,n,j,t,e]),U=VTe({container:y.current,plugins:[],onMount:B});I.useEffect(()=>{B(U)},[B,l,U]);const H=I.useCallback((F,V)=>{g(F),U&&V&&(U==null||U.seekTo(V))},[g,U]),$=I.useCallback(F=>{p(F),U&&(F?U.play():U.pause())},[U]),z=I.useMemo(()=>{if(!l)return null;const F=Object.values(l.answers||{}).map(ee=>[ee.startTime,ee.endTime]).flat(),V=e3(F);return Lh([X9.left,o+X9.left+X9.right]).domain(t?[l.answers[t].startTime,l.answers[t].endTime]:V).clamp(!0)},[l,t,o]),W=I.useCallback(F=>{if(!l)return;const V=P.indexOf(l.participantId);F?b(`../../${t?"../":""}${P[V+1]}/ui/${t||""}`,{relative:"path"}):b(`../../${t?"../":""}${P[V-1]}/ui/${t||""}`,{relative:"path"})},[P,b,l,t]);return _.jsx(nr,{wrap:"nowrap",gap:25,children:_.jsxs(Di,{ref:s,style:{width:"100%"},gap:25,children:[_.jsx(eu,{children:_.jsxs(nr,{children:[_.jsx(rd,{children:_.jsx(bQe,{onClick:()=>W(!1)})}),_.jsx(_h,{style:{width:"300px"},value:l==null?void 0:l.participantId,onChange:F=>b(`../../${t?"../":""}${F}/ui/${t||""}`,{relative:"path"}),data:[...Ipe,...kpe]}),_.jsx(_h,{style:{width:"300px"},clearable:!0,value:t,data:l?[...Ac(l.sequence)]:[],onChange:F=>b(`${t?"../":""}${F||""}`,{relative:"path"})}),_.jsx(rd,{children:_.jsx(_Qe,{onClick:()=>W(!0)})})]})}),c==="success"&&l&&z?_.jsx(KDe,{trialFilter:t,xScale:z,setSelectedTask:L,participantData:l,width:o,height:200}):_.jsx(eu,{style:{height:"275px"},children:_.jsx(Dc,{})}),z&&l!==null?_.jsxs(_.Fragment,{children:[_.jsxs(ke,{ref:y,ml:l&&z?z(l.answers.audioTest_2.startTime):0,mr:l&&z?z(l.answers["post-study-survey_13"].startTime):0,style:{WebkitBoxSizing:"border-box",width:`${l&&z?z(l.answers["post-study-survey_13"].startTime)-z(l.answers.audioTest_2.startTime):0}px`},children:[_.jsx(FTe.Provider,{value:U,children:_.jsx(gX,{id:"waveform"})},l.participantId),C?_.jsx(Dc,{}):null]}),_.jsx(w4t,{startTime:t?z.domain()[0]:l.answers.audioTest_2.startTime,xScale:z,transcriptLines:A,currentShownTranscription:r})]}):null,c==="success"&&l&&z?_.jsx(_4t,{xScale:z,setSelectedTask:L,playTime:m-l.answers.introduction_0.startTime,setPlayTime:H,isPlaying:h,setIsPlaying:$,currentNode:a,setCurrentNode:O,participantData:l,width:o,height:50}):null,_.jsxs(nr,{children:[_.jsx(_n,{onClick:()=>$(!0),children:"Play"}),_.jsx(_n,{onClick:()=>$(!1),children:"Pause"}),_.jsx(tt,{children:new Date(m).toLocaleString()})]}),_.jsx(Di,{children:l?_.jsx(S4t,{transcriptList:R,setTranscriptList:D,setCurrentShownTranscription:i,currentShownTranscription:r,participant:l,playTime:m,setTranscriptLines:k}):null})]})})}function A4t({setProvState:e}){return _.jsx("div",{children:_.jsx(C4t,{})})}var I4t={VITE_BASE_PATH:"/ThinkAloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ",VITE_REVISIT_MODE:"private",BASE_URL:"/ThinkAloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function k4t(e){const t=await(await fetch(`${op}${e}`)).text();return Vht(t)}async function tF(e,t){const n=t.configsList.find(r=>Jwe(r)===e);if(n){const r=t.configs[n];return await k4t(`${r.path}`)}return null}async function R4t(e){const t={},n=e.configsList.filter(i=>I4t.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>tF(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function N4t({studyId:e,config:t}){const{sequence:n}=Uo(i=>i),r=I.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:_.jsx(DV,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ls,{order:2,mb:8,children:"Error loading config"}),_.jsx($U,{issues:t.errors,type:"error"})]}):_.jsx(P9,{})}),i.push({path:"/analysis/:trrackId/:trialName/",element:_.jsx(P9,{})}),i.push({path:"/analysis/:trrackId/ui/:trialFilter?/",element:_.jsx(A4t,{setProvState:()=>null})}),i.push({path:"/analysis",element:_.jsx(m4t,{})}),i.push({path:"/:trialName",element:_.jsx(P9,{})}),i.push({path:"/end",element:_.jsx(PTe,{})}),[{element:_.jsx(i4t,{}),children:i}]}return[]},[t,n,e]);return Fwe(r)}function P4t({globalConfig:e}){const t=_K(),[n,r]=I.useState(null);e.configsList.includes(t);const i=IS();I.useEffect(()=>{tF(t,e).then(c=>{r(c)})},[e,t]);const[s,o]=I.useState(null),{storageEngine:a}=js(),[u]=IY();return I.useEffect(()=>{async function c(){if(!a||!n||!t)return;await a.initializeStudyDb(t,n),await a.getSequenceArray()||await a.setSequenceArray(await tNt(n));const d=n.uiConfig.urlParticipantIdParam&&u.get(n.uiConfig.urlParticipantIdParam)||void 0,h=Object.fromEntries(u.entries()),p=await fetch("https://api.ipify.org?format=json").catch(b=>""),m=p instanceof Response?await p.json():{ip:""},g={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:m.ip},y=await a.initializeParticipantSession(h,n,g,d),v=await Gut(t,n,y.sequence,g,y.answers,i.user.isAdmin);o(v)}c()},[a,n,t,u,i.user.isAdmin]),s?_.jsx(MSe.Provider,{value:s,children:_.jsx(vot,{store:s.store,children:_.jsx(N4t,{studyId:t,config:n})})}):_.jsx($c,{visible:!0})}function N2({studyIds:e}){const t=Xc(),{studyId:n}=Nm(),r=ig(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=js(),{user:o,logout:a}=IS(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(NQe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(SQe,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:_.jsx(Gwe,{}),href:"/settings",needAdmin:!0}];return _.jsx(fs.Header,{p:"md",children:_.jsxs(wc,{mt:-7,align:"center",children:[_.jsx(wc.Col,{span:6,children:_.jsxs($n,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx($y,{maw:40,src:`${op}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Wf,{w:"md"}),_.jsx(ls,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(wc.Col,{span:6,children:_.jsxs($n,{justify:"flex-end",direction:"row",children:[c&&_.jsx(_h,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(UG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(ip,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs($n,{direction:"column",mt:20,children:[_.jsx(tt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(_n,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(_n,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(ke,{ml:10,children:[_.jsx(lL,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(tt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):_.jsx(tt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function O4t({cellData:e}){return _.jsx("td",{children:_.jsx(Di,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(ke,{children:[_.jsxs(tt,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(tt,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Rpe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function D4t(e){const{metaData:t}=e;return _.jsx("td",{children:_.jsx(gY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Di,{gap:"xs",children:[_.jsxs(ke,{children:["IP:"," ",t.ip]}),_.jsxs(ke,{children:["Language:"," ",t.language]}),_.jsxs(ke,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(ke,{children:["User Agent:"," ",t.userAgent]})]})})})}function $4t({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=js(),{studyId:s}=Nm(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),await r())},[a,u]=I.useState([]),[l,c]=I.useState(!1),f=()=>bU({title:"Confirm rejecting participants",children:_.jsxs(tt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(tt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),await r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=$Se(n.sequence),p=[_.jsx("th",{children:_.jsx($n,{justify:"center",children:_.jsx(Rm,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),_.jsx("th",{children:"ID"},"ID"),_.jsx("th",{children:"Status"},"status"),_.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[_.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),_.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),_.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>_.jsxs("tr",{children:[_.jsx("td",{children:_.jsx($n,{justify:"center",children:_.jsx(Rm,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),_.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),_.jsx("td",{children:_.jsxs($n,{direction:"row",align:"center",children:[g.rejected?_.jsx(ko,{label:"Rejected",children:_.jsx(Qwe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?_.jsx(ko,{label:"Completed",children:_.jsx(AQe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(ko,{label:"In Progress",children:_.jsx(MQe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&_.jsxs(tt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(Ac(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?_.jsx(D4t,{metaData:g.metadata}):_.jsx("td",{children:"N/A"}),h.map(y=>{const v=OSe(g.sequence,y.orderPath),b=v&&Object.entries(g.answers).sort((w,x)=>{const C=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),E=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return C-E}).filter(([w])=>{const x=w.slice(0,w.lastIndexOf("_")),C=parseInt(w.slice(w.lastIndexOf("_")+1),10);return x===y.componentName&&C<=v[0].lastIndex&&C>=v[0].firstIndex});return b!==null&&b.length>=y.timesSeenInBlock+1?_.jsxs(Cr.Fragment,{children:[_.jsx(O4t,{cellData:b[y.timesSeenInBlock][1]}),_.jsx(Rpe,{cellData:b[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):_.jsxs(Cr.Fragment,{children:[_.jsx("td",{children:"N/A"}),_.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),_.jsx(Rpe,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx($c,{visible:l,overlayProps:{blur:2}}),_.jsxs($n,{justify:"space-between",mb:8,p:8,children:[_.jsx(nr,{children:_.jsx(_h,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,leftSection:_.jsx(jQe,{size:14}),onChange:g=>g&&d(g)})}),_.jsx(nr,{children:_.jsx(_n,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),_.jsxs(Xl,{striped:!0,withTableBorder:!0,children:[_.jsx("thead",{children:_.jsx("tr",{children:p})}),_.jsx("tbody",{children:m})]})]}):_.jsx($n,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(tt,{children:"No data available"})})}function M4t({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(""),[c,f]=I.useState([]),[d,h]=I.useState(""),[p,m]=I.useState(!1),[g,y]=I.useState(!1),{storageEngine:v}=js(),b=v,w=I.useCallback(async()=>{y(!0);const D=await b.getSnapshots(e);f(D),y(!1)},[b,e]);I.useEffect(()=>{w()},[w]);const x=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},C=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},E=async D=>{m(!0),await b.restoreSnapshot(e,D),w(),m(!1),await t()},S=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},k=()=>bU({title:"Create a Snapshot",children:_.jsx(tt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>x()}),R=D=>bU({title:"Restore Snapshot",children:_.jsx(tt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E(D)});return _.jsxs(_.Fragment,{children:[_.jsx($c,{visible:p}),_.jsx(rp,{children:_.jsxs(Dy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ls,{mb:"lg",order:4,children:"Data Management"}),_.jsxs($n,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(ls,{order:5,children:"Create a Snapshot"}),_.jsxs(tt,{children:["This will create a snapshot of the live"," ",_.jsx(tt,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(tt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ko,{label:"Create a snapshot",children:_.jsx(_n,{onClick:k,children:"Snapshot"})})]}),_.jsx(Wf,{h:"lg"}),_.jsxs($n,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(ls,{order:5,children:"Archive Data"}),_.jsxs(tt,{children:["This will create a snapshot of the live"," ",_.jsx(tt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ko,{label:"Snapshot and Delete Data",children:_.jsx(_n,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Wf,{h:"lg"}),_.jsxs($n,{justify:"space-between",align:"center",children:[_.jsxs(ke,{style:{width:"70%"},children:[_.jsx(ls,{order:5,children:"Delete Data"}),_.jsxs(tt,{children:["This will delete the live"," ",_.jsx(tt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(ko,{label:"Delete Data",children:_.jsx(_n,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(Wf,{h:"xl"}),_.jsxs($n,{direction:"column",children:[_.jsx($n,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ls,{order:5,children:"Snapshots"})}),_.jsxs(ke,{style:{position:"relative"},children:[_.jsx($c,{visible:g}),c.length>0?c.map(D=>_.jsxs($n,{justify:"space-between",mb:"xs",children:[_.jsx(tt,{children:D}),_.jsxs($n,{direction:"row",gap:"xs",children:[_.jsx(ko,{label:"Restore Snapshot",children:_.jsx(rd,{color:"blue",variant:"subtle",onClick:()=>{R(D)},children:_.jsx(LQe,{})})}),_.jsx(ko,{label:"Delete Snapshot",children:_.jsx(rd,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(D)},children:_.jsx(Kwe,{})})})]})]},D)):_.jsx(tt,{children:"No snapshots."})]})]})]})}),_.jsxs(Ss,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(tt,{children:"Archive Data"}),children:[_.jsx(tt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(hm,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:D=>h(D.target.value)}),_.jsxs($n,{mt:"sm",justify:"right",children:[_.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(_n,{color:"red",onClick:C,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(Ss,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(tt,{children:"Delete Snapshot"}),children:[_.jsxs(tt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(tt,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(hm,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:D=>h(D.target.value)}),_.jsxs($n,{mt:"sm",justify:"right",children:[_.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(_n,{color:"red",onClick:S,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(Ss,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(tt,{children:"Delete Live Data"}),children:[_.jsxs(tt,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(tt,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(tt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(hm,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:D=>h(D.target.value)}),_.jsxs($n,{mt:"sm",justify:"right",children:[_.jsx(_n,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(_n,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function L4t(e){const{globalConfig:t}=e,{studyId:n}=Nm(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,u]=I.useState(!1),{storageEngine:l}=js(),c=Xc(),{tab:f}=Nm(),d=I.useCallback(async()=>{if(u(!0),n){const g=await tF(n,t);if(!g||!l)return;await l.initializeStudyDb(n,g);const y=await l.getAllParticipantsData();i(y),o(g),u(!1)}},[t,l,n]);I.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=I.useMemo(()=>{const g=r.filter(v=>v.completed),y=r.filter(v=>!v.completed);return[g,y]},[r]),m=l instanceof If;return _.jsxs(_.Fragment,{children:[_.jsx(N2,{studyIds:e.globalConfig.configsList}),_.jsx(fs.Main,{children:_.jsxs(rp,{fluid:!0,style:{height:"100%"},children:[_.jsx($c,{visible:a}),_.jsxs(Fa,{variant:"outline",value:f,onChange:g=>c(`./../${g}`),style:{height:"100%"},children:[_.jsxs(Fa.List,{children:[_.jsx(Fa.Tab,{value:"table",leftSection:_.jsx(BQe,{size:16}),children:"Table View"}),_.jsx(Fa.Tab,{value:"stats",leftSection:_.jsx(TQe,{size:16}),children:"Trial Stats"}),_.jsx(Fa.Tab,{value:"replay",leftSection:_.jsx($Qe,{size:16}),children:"Individual Replay"}),_.jsx(Fa.Tab,{value:"manage",leftSection:_.jsx(Gwe,{size:16}),disabled:!m,children:"Manage"})]}),_.jsx(Fa.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&_.jsx($4t,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),_.jsx(Fa.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(Fa.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(Fa.Panel,{value:"manage",pt:"xs",children:n&&m&&_.jsx(M4t,{studyId:n,refresh:d})})]})]})})]})}function Q9({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=IS(),{storageEngine:i}=js();return I.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?_.jsx($c,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?_.jsx(AY,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function QDe(e,t,n){if(e instanceof If){t(!0);const r=new Jp,i=I$();try{await GOt(i,r,HPe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function F4t(){const{user:e}=IS(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=js();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(AY,{to:"/"}):_.jsx(rp,{children:_.jsx(Dy,{p:"lg",children:_.jsxs($n,{align:"center",direction:"column",justify:"center",children:[_.jsx($y,{maw:200,mt:50,mb:100,src:`${op}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(tt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(_n,{onClick:()=>QDe(s,i,n),leftSection:_.jsx(xQe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Dw,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx($c,{visible:r})]})})})}var JDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(No,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var L=["th","st","nd","rd"],j=O%100;return"["+O+(L[(j-20)%10]||L[j]||L[0])+"]"}},b=function(O,L,j){var B=String(O);return!B||B.length>=L?O:""+Array(L+1-B.length).join(j)+O},w={s:b,z:function(O){var L=-O.utcOffset(),j=Math.abs(L),B=Math.floor(j/60),U=j%60;return(L<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function O(L,j){if(L.date()<j.date())return-O(j,L);var B=12*(j.year()-L.year())+(j.month()-L.month()),U=L.clone().add(B,f),H=j-U<0,$=L.clone().add(B+(H?-1:1),f);return+(-(B+(j-U)/(H?U-$:$-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},x="en",C={};C[x]=v;var E="$isDayjsObject",S=function(O){return O instanceof D||!(!O||!O[E])},A=function O(L,j,B){var U;if(!L)return x;if(typeof L=="string"){var H=L.toLowerCase();C[H]&&(U=H),j&&(C[H]=j,U=H);var $=L.split("-");if(!U&&$.length>1)return O($[0])}else{var z=L.name;C[z]=L,U=z}return!B&&U&&(x=U),U||!B&&x},k=function(O,L){if(S(O))return O.clone();var j=typeof L=="object"?L:{};return j.date=O,j.args=arguments,new D(j)},R=w;R.l=A,R.i=S,R.w=function(O,L){return k(O,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var D=function(){function O(j){this.$L=A(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[E]=!0}var L=O.prototype;return L.parse=function(j){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(R.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var $=U.match(g);if($){var z=$[2]-1||0,W=($[7]||"0").substring(0,3);return H?new Date(Date.UTC($[1],z,$[3]||1,$[4]||0,$[5]||0,$[6]||0,W)):new Date($[1],z,$[3]||1,$[4]||0,$[5]||0,$[6]||0,W)}}return new Date(U)}(j),this.init()},L.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},L.$utils=function(){return R},L.isValid=function(){return this.$d.toString()!==m},L.isSame=function(j,B){var U=k(j);return this.startOf(B)<=U&&U<=this.endOf(B)},L.isAfter=function(j,B){return k(j)<this.startOf(B)},L.isBefore=function(j,B){return this.endOf(B)<k(j)},L.$g=function(j,B,U){return R.u(j)?this[B]:this.set(U,j)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(j,B){var U=this,H=!!R.u(B)||B,$=R.p(j),z=function(he,ye){var Ce=R.w(U.$u?Date.UTC(U.$y,ye,he):new Date(U.$y,ye,he),U);return H?Ce:Ce.endOf(l)},W=function(he,ye){return R.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},F=this.$W,V=this.$M,G=this.$D,ee="set"+(this.$u?"UTC":"");switch($){case h:return H?z(1,0):z(31,11);case f:return H?z(1,V):z(0,V+1);case c:var le=this.$locale().weekStart||0,de=(F<le?F+7:F)-le;return z(H?G-de:G+(6-de),V);case l:case p:return W(ee+"Hours",0);case u:return W(ee+"Minutes",1);case a:return W(ee+"Seconds",2);case o:return W(ee+"Milliseconds",3);default:return this.clone()}},L.endOf=function(j){return this.startOf(j,!1)},L.$set=function(j,B){var U,H=R.p(j),$="set"+(this.$u?"UTC":""),z=(U={},U[l]=$+"Date",U[p]=$+"Date",U[f]=$+"Month",U[h]=$+"FullYear",U[u]=$+"Hours",U[a]=$+"Minutes",U[o]=$+"Seconds",U[s]=$+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var F=this.clone().set(p,1);F.$d[z](W),F.init(),this.$d=F.set(p,Math.min(this.$D,F.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},L.set=function(j,B){return this.clone().$set(j,B)},L.get=function(j){return this[R.p(j)]()},L.add=function(j,B){var U,H=this;j=Number(j);var $=R.p(B),z=function(V){var G=k(H);return R.w(G.date(G.date()+Math.round(V*j)),H)};if($===f)return this.set(f,this.$M+j);if($===h)return this.set(h,this.$y+j);if($===l)return z(1);if($===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[$]||1,F=this.$d.getTime()+j*W;return R.w(F,this)},L.subtract=function(j,B){return this.add(-1*j,B)},L.format=function(j){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=j||"YYYY-MM-DDTHH:mm:ssZ",$=R.z(this),z=this.$H,W=this.$m,F=this.$M,V=U.weekdays,G=U.months,ee=U.meridiem,le=function(ye,Ce,ve,Ye){return ye&&(ye[Ce]||ye(B,H))||ve[Ce].slice(0,Ye)},de=function(ye){return R.s(z%12||12,ye,"0")},he=ee||function(ye,Ce,ve){var Ye=ye<12?"AM":"PM";return ve?Ye.toLowerCase():Ye};return H.replace(y,function(ye,Ce){return Ce||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return F+1;case"MM":return R.s(F+1,2,"0");case"MMM":return le(U.monthsShort,F,G,3);case"MMMM":return le(G,F);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return le(U.weekdaysMin,B.$W,V,2);case"ddd":return le(U.weekdaysShort,B.$W,V,3);case"dddd":return V[B.$W];case"H":return String(z);case"HH":return R.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return $}return null}(ye)||$.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(j,B,U){var H,$=this,z=R.p(B),W=k(j),F=(W.utcOffset()-this.utcOffset())*r,V=this-W,G=function(){return R.m($,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(V-F)/6048e5;break;case l:H=(V-F)/864e5;break;case u:H=V/i;break;case a:H=V/r;break;case o:H=V/n;break;default:H=V}return U?H:R.a(H)},L.daysInMonth=function(){return this.endOf(f).$D},L.$locale=function(){return C[this.$L]},L.locale=function(j,B){if(!j)return this.$L;var U=this.clone(),H=A(j,B,!0);return H&&(U.$L=H),U},L.clone=function(){return R.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},O}(),P=D.prototype;return k.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(O){P[O[1]]=function(L){return this.$g(L,O[0],O[1])}}),k.extend=function(O,L){return O.$i||(O(L,D,k),O.$i=!0),k},k.locale=A,k.isDayjs=S,k.unix=function(O){return k(1e3*O)},k.en=C[x],k.Ls=C,k.p={},k})})(JDe);var j4t=JDe.exports;const Tt=Ho(j4t);function B4t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function U4t({formatter:e,...t}){return(e||B4t)(t)}function z4t({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function ZDe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=z4t({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?ZDe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function V4t(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function H4t(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function VZ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=V4t(i.key);if(s){i.preventDefault();const o=H4t(e);ZDe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var e3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(No,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,x=r[w];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=x),x}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var x=m[3],C=x===24?0:x,E=m[0]+"-"+m[1]+"-"+m[2]+" "+C+":"+m[4]+":"+m[5]+":000",S=+d;return(o.utc(E).valueOf()-(S-=S%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(C,E,S){var A=C-60*E*1e3,k=l(A,S);if(E===k)return[A,E];var R=l(A-=60*(k-E)*1e3,S);return k===R?[A,k]:[C-60*Math.min(k,R)*1e3,Math.max(k,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],x=o(b).utcOffset(w);return x.$x.$timezone=g,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(e3e);var q4t=e3e.exports;const W4t=Ho(q4t);var t3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(No,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(x){x===void 0&&(x="");var C=x.match(r);if(!C)return null;var E=(""+C[0]).match(i)||["-",0,0],S=E[0],A=60*+E[1]+ +E[2];return A===0?0:S==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(t3e);var G4t=t3e.exports;const Y4t=Ho(G4t);Tt.extend(Y4t);Tt.extend(W4t);function K4t(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Npe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=K4t(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function M0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Npe(i,n,e)):Npe(t,n,e)}function X4t({minDate:e,maxDate:t,timezone:n}){const r=M0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const Q4t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},J4t=I.createContext(Q4t);function Zl(){const e=I.useContext(J4t),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Z4t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function n3e({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:Z4t(e,t),name:n,form:r})}n3e.displayName="@mantine/dates/HiddenDatesInput";var r3e={day:"m_396ce5cb"};const eFt={},tFt=(e,{size:t})=>({day:{"--day-size":un(t,"day-size")}}),HZ=je((e,t)=>{const n=xe("Day",eFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...x}=n,C=gt({name:f||"Day",classes:r3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tFt,rootSelector:"day"}),E=Zl();return _.jsx(co,{...C("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(M0("add",new Date,E.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...x,children:(m==null?void 0:m(l))||l.getDate()})});HZ.classes=r3e;HZ.displayName="@mantine/dates/Day";function nFt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var i3e={weekday:"m_18a3eca"};const rFt={},iFt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":lo(t),"--wr-spacing":Ml(t)}}),qZ=je((e,t)=>{const n=xe("WeekdaysRow",rFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=gt({name:h||"WeekdaysRow",classes:i3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iFt,rootSelector:"weekdaysRow"}),g=Zl(),y=nFt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(ke,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});qZ.classes=i3e;qZ.displayName="@mantine/dates/WeekdaysRow";function sFt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function oFt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function aFt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=sFt(s,t),a=oFt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function s3e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function o3e(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function a3e(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function uFt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return a3e(c,n)&&o3e(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||s3e(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var u3e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const lFt={withCellSpacing:!0},nF=je((e,t)=>{const n=xe("Month",lFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:x,getDayAriaLabel:C,static:E,__getDayRef:S,__onDayKeyDown:A,__onDayClick:k,__onDayMouseEnter:R,__preventFocus:D,__stopPropagation:P,withCellSpacing:O,size:L,...j}=n,B=gt({name:l||"Month",classes:u3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=Zl(),H=aFt({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),$=uFt(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Jm({classNames:r,styles:o,props:n}),F=H.map((V,G)=>{const ee=V.map((le,de)=>{const he=!s3e(le,h),ye=(C==null?void 0:C(le))||Tt(le).locale(c||U.locale).format("D MMMM YYYY"),Ce=m==null?void 0:m(le),ve=Tt(le).isSame($,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":O||void 0,children:_.jsx(HZ,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:le,size:L,weekend:U.getWeekendDays(p).includes(le.getDay()),outside:he,hidden:w?he:!1,"aria-label":ye,static:E,disabled:(g==null?void 0:g(le))||!a3e(le,v)||!o3e(le,y),ref:Ye=>S==null?void 0:S(G,de,Ye),...Ce,onKeyDown:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onKeyDown)==null||Ue.call(Ce,Ye),A==null||A(Ye,{rowIndex:G,cellIndex:de,date:le})},onMouseEnter:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onMouseEnter)==null||Ue.call(Ce,Ye),R==null||R(Ye,le)},onClick:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onClick)==null||Ue.call(Ce,Ye),k==null||k(Ye,le)},onMouseDown:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onMouseDown)==null||Ue.call(Ce,Ye),D&&Ye.preventDefault()},tabIndex:D||!ve?-1:0})},le.toString())});return _.jsx("tr",{...B("monthRow"),children:ee},G)});return _.jsxs(ke,{component:"table",...B("month"),size:L,ref:t,...j,children:[!x&&_.jsx("thead",{...B("monthThead"),children:_.jsx(qZ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:L,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:F})]})});nF.classes=u3e;nF.displayName="@mantine/dates/Month";var l3e={pickerControl:"m_dc6a3c71"};const cFt={},fFt=(e,{size:t})=>({pickerControl:{"--dpc-fz":lo(t),"--dpc-size":un(t,"dpc-size")}}),rF=je((e,t)=>{const n=xe("PickerControl",cFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=gt({name:d||"PickerControl",classes:l3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fFt,rootSelector:"pickerControl"});return _.jsx(co,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});rF.classes=l3e;rF.displayName="@mantine/dates/PickerControl";function c3e(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function dFt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!c3e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function f3e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var d3e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const hFt={yearsListFormat:"YYYY",withCellSpacing:!0},iF=je((e,t)=>{const n=xe("YearsList",hFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:x,withCellSpacing:C,size:E,...S}=n,A=gt({name:m||"YearsList",classes:d3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=Zl(),R=f3e(l),D=dFt(R,d,h,p),P=R.map((O,L)=>{const j=O.map((B,U)=>{const H=p==null?void 0:p(B),$=Tt(B).isSame(D,"year");return _.jsx("td",{...A("yearsListCell"),"data-with-spacing":C||void 0,children:_.jsx(rF,{...A("yearsListControl"),size:E,unstyled:a,"data-mantine-stop-propagation":x||void 0,disabled:c3e(B,d,h),ref:z=>g==null?void 0:g(L,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:L,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!$?-1:0,children:Tt(B).locale(k.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...A("yearsListRow"),children:j},L)});return _.jsx(ke,{component:"table",ref:t,size:E,...A("yearsList"),...S,children:_.jsx("tbody",{children:P})})});iF.classes=d3e;iF.displayName="@mantine/dates/YearsList";function h3e(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function pFt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!h3e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function mFt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var p3e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const gFt={monthsListFormat:"MMM",withCellSpacing:!0},sF=je((e,t)=>{const n=xe("MonthsList",gFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:x,withCellSpacing:C,size:E,...S}=n,A=gt({name:l||"MonthsList",classes:p3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=Zl(),R=mFt(c),D=pFt(R,h,p,m),P=R.map((O,L)=>{const j=O.map((B,U)=>{const H=m==null?void 0:m(B),$=Tt(B).isSame(D,"month");return _.jsx("td",{...A("monthsListCell"),"data-with-spacing":C||void 0,children:_.jsx(rF,{...A("monthsListControl"),size:E,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":x||void 0,disabled:h3e(B,h,p),ref:z=>g==null?void 0:g(L,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:L,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!$?-1:0,children:Tt(B).locale(k.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...A("monthsListRow"),children:j},L)});return _.jsx(ke,{component:"table",ref:t,size:E,...A("monthsList"),...S,children:_.jsx("tbody",{children:P})})});sF.classes=p3e;sF.displayName="@mantine/dates/MonthsList";var m3e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const yFt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},vFt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":un(t,"dch-control-size"),"--dch-fz":lo(t)}}),Ky=je((e,t)=>{const n=xe("CalendarHeader",yFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:x,withPrevious:C,__staticSelector:E,__preventFocus:S,__stopPropagation:A,...k}=n,R=gt({name:E||"CalendarHeader",classes:m3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vFt,rootSelector:"calendarHeader"}),D=S?P=>P.preventDefault():void 0;return _.jsxs(ke,{...R("calendarHeader"),ref:t,...k,children:[C&&_.jsx(co,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:D,disabled:v,"data-disabled":v||void 0,tabIndex:S||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||_.jsx(aU,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(co,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?D:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:S||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),x&&_.jsx(co,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:D,disabled:y,"data-disabled":y||void 0,tabIndex:S||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||_.jsx(aU,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Ky.classes=m3e;Ky.displayName="@mantine/dates/CalendarHeader";function bFt(e){const t=f3e(e);return[t[0][0],t[3][0]]}const _Ft={decadeLabelFormat:"YYYY"},oF=je((e,t)=>{const n=xe("DecadeLevel",_Ft,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:x,previousDisabled:C,levelControlAriaLabel:E,withNext:S,withPrevious:A,decadeLabelFormat:k,classNames:R,styles:D,unstyled:P,__staticSelector:O,__stopPropagation:L,size:j,...B}=n,U=Zl(),[H,$]=bFt(r),z={__staticSelector:O||"DecadeLevel",classNames:R,styles:D,unstyled:P,size:j},W=typeof x=="boolean"?x:o?!Tt($).endOf("year").isBefore(o):!1,F=typeof C=="boolean"?C:s?!Tt(H).startOf("year").isAfter(s):!1,V=(G,ee)=>Tt(G).locale(i||U.locale).format(ee);return _.jsxs(ke,{"data-decade-level":!0,size:j,ref:t,...B,children:[_.jsx(Ky,{label:typeof k=="function"?k(H,$):`${V(H,k)}  ${V($,k)}`,__preventFocus:p,__stopPropagation:L,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:F,hasNextLevel:!1,levelControlAriaLabel:E,withNext:S,withPrevious:A,...z}),_.jsx(iF,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:L,withCellSpacing:h,...z})]})});oF.classes={...iF.classes,...Ky.classes};oF.displayName="@mantine/dates/DecadeLevel";const wFt={yearLabelFormat:"YYYY"},aF=je((e,t)=>{const n=xe("YearLevel",wFt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:x,nextDisabled:C,previousDisabled:E,hasNextLevel:S,levelControlAriaLabel:A,withNext:k,withPrevious:R,yearLabelFormat:D,__staticSelector:P,__stopPropagation:O,size:L,classNames:j,styles:B,unstyled:U,...H}=n,$=Zl(),z={__staticSelector:P||"YearLevel",classNames:j,styles:B,unstyled:U,size:L},W=typeof C=="boolean"?C:o?!Tt(r).endOf("year").isBefore(o):!1,F=typeof E=="boolean"?E:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(ke,{"data-year-level":!0,size:L,ref:t,...H,children:[_.jsx(Ky,{label:typeof D=="function"?D(r):Tt(r).locale(i||$.locale).format(D),__preventFocus:p,__stopPropagation:O,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:x,nextDisabled:W,previousDisabled:F,hasNextLevel:S,levelControlAriaLabel:A,withNext:k,withPrevious:R,...z}),_.jsx(sF,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:O,withCellSpacing:h,...z})]})});aF.classes={...Ky.classes,...sF.classes};aF.displayName="@mantine/dates/YearLevel";const EFt={monthLabelFormat:"MMMM YYYY"},uF=je((e,t)=>{const n=xe("MonthLevel",EFt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:x,__stopPropagation:C,nextIcon:E,previousIcon:S,nextLabel:A,previousLabel:k,onNext:R,onPrevious:D,onLevelClick:P,nextDisabled:O,previousDisabled:L,hasNextLevel:j,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:$,classNames:z,styles:W,unstyled:F,__staticSelector:V,size:G,static:ee,...le}=n,de=Zl(),he={__staticSelector:V||"MonthLevel",classNames:z,styles:W,unstyled:F,size:G},ye=typeof O=="boolean"?O:f?!Tt(r).endOf("month").isBefore(f):!1,Ce=typeof L=="boolean"?L:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(ke,{"data-month-level":!0,size:G,ref:t,...le,children:[_.jsx(Ky,{label:typeof $=="function"?$(r):Tt(r).locale(i||de.locale).format($),__preventFocus:x,__stopPropagation:C,nextIcon:E,previousIcon:S,nextLabel:A,previousLabel:k,onNext:R,onPrevious:D,onLevelClick:P,nextDisabled:ye,previousDisabled:Ce,hasNextLevel:j,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(nF,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:x,__stopPropagation:C,static:ee,withCellSpacing:w,...he})]})});uF.classes={...nF.classes,...Ky.classes};uF.displayName="@mantine/dates/MonthLevel";var g3e={levelsGroup:"m_30b26e33"};const xFt={},Xy=je((e,t)=>{const n=xe("LevelsGroup",xFt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=gt({name:l||"LevelsGroup",classes:g3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(ke,{ref:t,...f("levelsGroup"),...c})});Xy.classes=g3e;Xy.displayName="@mantine/dates/LevelsGroup";const SFt={numberOfColumns:1},lF=je((e,t)=>{const n=xe("DecadeLevelGroup",SFt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:x,styles:C,unstyled:E,__staticSelector:S,__stopPropagation:A,numberOfColumns:k,levelControlAriaLabel:R,decadeLabelFormat:D,size:P,vars:O,...L}=n,j=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const $=Tt(r).add(H*10,"years").toDate();return _.jsx(oF,{size:P,yearsListFormat:a,decade:$,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:D,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>VZ({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:j}),__getControlRef:(z,W,F)=>{Array.isArray(j.current[H])||(j.current[H]=[]),Array.isArray(j.current[H][z])||(j.current[H][z]=[]),j.current[H][z][W]=F},levelControlAriaLabel:typeof R=="function"?R($):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:S||"DecadeLevelGroup",classNames:x,styles:C,unstyled:E,withCellSpacing:f},H)});return _.jsx(Xy,{classNames:x,styles:C,__staticSelector:S||"DecadeLevelGroup",ref:t,size:P,unstyled:E,...L,children:B})});lF.classes={...Xy.classes,...oF.classes};lF.displayName="@mantine/dates/DecadeLevelGroup";const TFt={numberOfColumns:1},cF=je((e,t)=>{const n=xe("YearLevelGroup",TFt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:x,hasNextLevel:C,classNames:E,styles:S,unstyled:A,__staticSelector:k,__stopPropagation:R,numberOfColumns:D,levelControlAriaLabel:P,yearLabelFormat:O,size:L,vars:j,...B}=n,U=I.useRef([]),H=Array(D).fill(0).map(($,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(aF,{size:L,monthsListFormat:a,year:W,withNext:z===D-1,withPrevious:z===0,yearLabelFormat:O,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(F,V)=>VZ({levelIndex:z,rowIndex:V.rowIndex,cellIndex:V.cellIndex,event:F,controlsRef:U}),__getControlRef:(F,V,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][F])||(U.current[z][F]=[]),U.current[z][F][V]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:x,hasNextLevel:C,getMonthControlProps:u,classNames:E,styles:S,unstyled:A,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(Xy,{classNames:E,styles:S,__staticSelector:k||"YearLevelGroup",ref:t,size:L,unstyled:A,...B,children:H})});cF.classes={...aF.classes,...Xy.classes};cF.displayName="@mantine/dates/YearLevelGroup";const CFt={numberOfColumns:1},fF=je((e,t)=>{const n=xe("MonthLevelGroup",CFt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:x,nextLabel:C,previousLabel:E,onNext:S,onPrevious:A,onLevelClick:k,nextDisabled:R,previousDisabled:D,hasNextLevel:P,classNames:O,styles:L,unstyled:j,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:$,__stopPropagation:z,size:W,static:F,vars:V,...G}=n,ee=I.useRef([]),le=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return _.jsx(uF,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ce,ve)=>VZ({levelIndex:he,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ce,controlsRef:ee}),__getDayRef:(Ce,ve,Ye)=>{Array.isArray(ee.current[he])||(ee.current[he]=[]),Array.isArray(ee.current[he][Ce])||(ee.current[he][Ce]=[]),ee.current[he][Ce][ve]=Ye},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:x,nextLabel:C,previousLabel:E,onNext:S,onPrevious:A,onLevelClick:k,nextDisabled:R,previousDisabled:D,hasNextLevel:P,classNames:O,styles:L,unstyled:j,__staticSelector:$||"MonthLevelGroup",size:W,static:F,withCellSpacing:v},he)});return _.jsx(Xy,{classNames:O,styles:L,__staticSelector:$||"MonthLevelGroup",ref:t,size:W,...G,children:le})});fF.classes={...Xy.classes,...uF.classes};fF.displayName="@mantine/dates/MonthLevelGroup";var y3e={input:"m_6fa5e2aa"};const AFt={},dF=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:x,disabled:C,value:E,name:S,form:A,type:k,...R}=f_e("PickerInputBase",AFt,e),D=b||(g&&w&&!x&&!C?_.jsx(Ob,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{k==="range"&&Array.isArray(E)&&E[0]&&!E[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!x&&_.jsx(Ss,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(Li.Wrapper,{...r,children:_.jsxs(Kn,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||x,onClose:()=>{var O;(O=u==null?void 0:u.onClose)==null||O.call(u),P()},children:[_.jsx(Kn.Target,{children:_.jsx(Li,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":x||void 0,disabled:C,component:"button",type:"button",multiline:!0,onClick:O=>{m==null||m(O),h.toggle()},rightSection:D,...n,ref:t,classNames:{...s,input:es(y3e.input,s==null?void 0:s.input)},...R,children:d||_.jsx(Li.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Kn.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(n3e,{value:E,name:S,form:A,type:k})]})});dF.classes=y3e;dF.displayName="@mantine/dates/PickerInputBase";const Ppe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function WZ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=Zl(),[a,u,l]=Bo({value:M0("add",t,o.getTimezone(),!i),defaultValue:M0("add",n,o.getTimezone(),!i),finalValue:Ppe(e),onChange:f=>{r==null||r(M0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Ppe(e),u(c))),[c,u,l]}function J9(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function IFt(e){return e===0?"month":e===1?"year":"decade"}function PT(e,t,n){return IFt(bc(J9(e,0),J9(t,0),J9(n,2)))}const kFt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},hF=je((e,t)=>{const n=xe("Calendar",kFt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:x,weekdayFormat:C,weekendDays:E,getDayProps:S,excludeDate:A,renderDay:k,hideOutsideDates:R,hideWeekdays:D,getDayAriaLabel:P,monthLabelFormat:O,nextIcon:L,previousIcon:j,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:$,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:F,getYearControlProps:V,decadeLabelFormat:G,classNames:ee,styles:le,unstyled:de,minDate:he,maxDate:ye,locale:Ce,__staticSelector:ve,size:Ye,__preventFocus:Ue,__stopPropagation:mt,onNextDecade:it,onPreviousDecade:be,onNextYear:Ae,onPreviousYear:Ve,onNextMonth:lt,onPreviousMonth:Nt,static:qe,__timezoneApplied:me,...ft}=n,{resolvedClassNames:yt,resolvedStyles:Et}=Jm({classNames:ee,styles:le,props:n}),[pe,Ie]=Bo({value:a?PT(a,s,i):void 0,defaultValue:o?PT(o,s,i):void 0,finalValue:PT(void 0,s,i),onChange:u}),[Ke,bt]=WZ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Vt={__staticSelector:ve||"Calendar",styles:Et,classNames:yt,unstyled:de,size:Ye},rr=Zl(),qn=h||d||1,Ln=Ke||M0("add",new Date,rr.getTimezone()),yn=()=>{const An=Tt(Ln).add(qn,"month").toDate();lt==null||lt(An),bt(An)},yr=()=>{const An=Tt(Ln).subtract(qn,"month").toDate();Nt==null||Nt(An),bt(An)},Qt=()=>{const An=Tt(Ln).add(qn,"year").toDate();Ae==null||Ae(An),bt(An)},Wr=()=>{const An=Tt(Ln).subtract(qn,"year").toDate();Ve==null||Ve(An),bt(An)},ei=()=>{const An=Tt(Ln).add(10*qn,"year").toDate();it==null||it(An),bt(An)},Bi=()=>{const An=Tt(Ln).subtract(10*qn,"year").toDate();be==null||be(An),bt(An)};return _.jsxs(ke,{ref:t,size:Ye,"data-calendar":!0,...ft,children:[pe==="month"&&_.jsx(fF,{month:Ln,minDate:he,maxDate:ye,firstDayOfWeek:x,weekdayFormat:C,weekendDays:E,getDayProps:S,excludeDate:A,renderDay:k,hideOutsideDates:R,hideWeekdays:D,getDayAriaLabel:P,onNext:yn,onPrevious:yr,hasNextLevel:i!=="month",onLevelClick:()=>Ie("year"),numberOfColumns:d,locale:Ce,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:L,previousLabel:p==null?void 0:p.previousMonth,previousIcon:j,monthLabelFormat:O,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:mt,static:qe,withCellSpacing:H,...Vt}),pe==="year"&&_.jsx(cF,{year:Ln,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:$,getMonthControlProps:z,locale:Ce,onNext:Qt,onPrevious:Wr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Ie("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:L,previousLabel:p==null?void 0:p.previousYear,previousIcon:j,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(An,Ui)=>{w&&bt(Ui),Ie(PT("month",s,i)),g==null||g(Ui)},__preventFocus:Ue,__stopPropagation:mt,withCellSpacing:H,...Vt}),pe==="decade"&&_.jsx(lF,{decade:Ln,minDate:he,maxDate:ye,yearsListFormat:F,getYearControlProps:V,locale:Ce,onNext:ei,onPrevious:Bi,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:L,previousLabel:p==null?void 0:p.previousDecade,previousIcon:j,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(An,Ui)=>{b&&bt(Ui),Ie(PT("year",s,i)),m==null||m(Ui)},__preventFocus:Ue,__stopPropagation:mt,withCellSpacing:H,...Vt})]})});hF.classes={...lF.classes,...cF.classes,...fF.classes};hF.displayName="@mantine/dates/Calendar";function RFt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:x,onNextDecade:C,onPreviousDecade:E,withCellSpacing:S,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:D,weekendDays:P,getDayProps:O,excludeDate:L,renderDay:j,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:$,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:F,yearsListFormat:V,getYearControlProps:G,decadeLabelFormat:ee,allowSingleDateInRange:le,allowDeselect:de,minDate:he,maxDate:ye,locale:Ce,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:x,onNextDecade:C,onPreviousDecade:E,withCellSpacing:S,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:D,weekendDays:P,getDayProps:O,excludeDate:L,renderDay:j,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:$,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:F,yearsListFormat:V,getYearControlProps:G,decadeLabelFormat:ee,allowSingleDateInRange:le,allowDeselect:de,minDate:he,maxDate:ye,locale:Ce},others:ve}}function Ope(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function NFt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=WZ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=C=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(C).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const E=[C,f];E.sort((S,A)=>S.getTime()-A.getTime()),c(E),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(C).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([C,null]),p(null),d(C);return}if(e==="multiple"){l.some(E=>Tt(E).isSame(C,t))?c(l.filter(E=>!Tt(E).isSame(C,t))):c([...l,C]);return}l&&o&&Tt(C).isSame(l,t)?c(null):c(C)},g=C=>f instanceof Date&&h instanceof Date?Ope(C,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Ope(C,l):!1,y=e==="range"?C=>{a==null||a(C),p(null)}:a,v=C=>l[0]instanceof Date&&Tt(C).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=C=>l[1]instanceof Date?Tt(C).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(C).isSame(l[0],t),w=C=>{if(e==="range")return{selected:l.some(S=>S&&Tt(S).isSame(C,t)),inRange:g(C),firstInRange:v(C),lastInRange:b(C),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(C,t)||void 0};if(e==="multiple")return{selected:l.some(S=>S&&Tt(S).isSame(C,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(C,t)||void 0};const E=Tt(l).isSame(C,t);return{selected:E,"data-autofocus":E||void 0}},x=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:x,getControlProps:w,_value:l,setValue:c}}const PFt={type:"default",defaultLevel:"month",numberOfColumns:1},pF=je((e,t)=>{const n=xe("DatePicker",PFt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:x,onRootMouseLeave:C,onHoveredDateChange:E,getControlProps:S}=NFt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:k}=Jm({classNames:r,styles:i,props:n}),R=Zl();return _.jsx(hF,{ref:t,minLevel:"month",classNames:A,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:C,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(D,P)=>{E(P),y==null||y(D,P)},__onDayClick:(D,P)=>{x(P),v==null||v(D,P)},getDayProps:D=>({...S(D),...f==null?void 0:f(D)}),...w,date:M0("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});pF.classes=hF.classes;pF.displayName="@mantine/dates/DatePicker";function OFt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Zl(),[f,d]=rC(!1),[h,p]=WZ({type:e,value:t,defaultValue:n,onChange:r}),m=U4t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,x)=>w.getTime()-x.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const DFt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},GZ=je((e,t)=>{const n=xe("DatePickerInput",DFt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:x,valueFormatter:C,...E}=n,{resolvedClassNames:S,resolvedStyles:A}=Jm({classNames:c,styles:f,props:n}),{calendarProps:k,others:R}=RFt(E),{_value:D,setValue:P,formattedValue:O,dropdownHandlers:L,dropdownOpened:j,onClear:B,shouldClear:U}=OFt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:C}),H=Array.isArray(D)?D[0]||x:D||x,$=Zl();return _.jsx(dF,{formattedValue:O,dropdownOpened:j,dropdownHandlers:L,classNames:S,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:D,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(pF,{...k,size:p,variant:m,type:r,value:D,defaultDate:H||X4t({maxDate:b,minDate:v,timezone:$.getTimezone()}),onChange:P,locale:l,classNames:S,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:M0("add",k.date,$.getTimezone()),__timezoneApplied:!0})})});GZ.classes={...dF.classes,...pF.classes};GZ.displayName="@mantine/dates/DatePickerInput";const Dpe={};function lH(e,t){e===void 0&&(e=Dpe),t===void 0&&(t=Dpe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var $Ft=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MFt=Object.prototype.hasOwnProperty;function cH(e,t){return MFt.call(e,t)}function fH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)cH(e,i)&&r.push(i);return r}function kl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function dH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Fv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function v3e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function hH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(hH(e[t]))return!0}else if(typeof e=="object"){for(var r=fH(e),i=r.length,s=0;s<i;s++)if(hH(e[r[s]]))return!0}}return!1}function $pe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var b3e=function(e){$Ft(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,$pe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=$pe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=b3e,LFt=kl,ww={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=M$(n,this.path);r&&(r=kl(r));var i=R1(n,{op:"remove",path:this.from}).removed;return R1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=M$(n,this.from);return R1(n,{op:"add",path:this.path,value:kl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:sI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},FFt={add:function(e,t,n){return dH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ww.move,copy:ww.copy,test:ww.test,_get:ww._get};function M$(e,t){if(t=="")return e;var n={op:"_get",path:t};return R1(e,n),n.value}function R1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):L$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=M$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=sI(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=kl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=L$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=v3e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!dH(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);dH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=FFt[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=ww[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function mF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=kl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=R1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function jFt(e,t,n){var r=R1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function L$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(ww[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&hH(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=_3e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function _3e(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)mF(kl(t),kl(e),n||!0);else{n=n||L$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function sI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!sI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!sI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const BFt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:sI,applyOperation:R1,applyPatch:mF,applyReducer:jFt,deepClone:LFt,getValueByPointer:M$,validate:_3e,validator:L$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var YZ=new WeakMap,UFt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),zFt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function VFt(e){return YZ.get(e)}function HFt(e,t){return e.observers.get(t)}function qFt(e,t){e.observers.delete(t.callback)}function WFt(e,t){t.unobserve()}function GFt(e,t){var n=[],r,i=VFt(e);if(!i)i=new UFt(e),YZ.set(e,i);else{var s=HFt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=kl(e),t){r.callback=t,r.next=null;var o=function(){pH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){pH(r),clearTimeout(r.next),qFt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new zFt(t,r)),r}function pH(e,t){t===void 0&&(t=!1);var n=YZ.get(e.object);KZ(n.value,e.object,e.patches,"",t),e.patches.length&&mF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function KZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=fH(t),o=fH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(cH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?KZ(c,f,n,r+"/"+Fv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Fv(l),value:kl(c)}),n.push({op:"replace",path:r+"/"+Fv(l),value:kl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Fv(l),value:kl(c)}),n.push({op:"remove",path:r+"/"+Fv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!cH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Fv(l),value:kl(t[l])})}}}function YFt(e,t,n){n===void 0&&(n=!1);var r=[];return KZ(e,t,r,"",n),r}const KFt=Object.freeze(Object.defineProperty({__proto__:null,compare:YFt,generate:pH,observe:GFt,unobserve:WFt},Symbol.toStringTag,{value:"Module"}));Object.assign({},BFt,KFt,{JsonPatchError:b3e,deepClone:kl,escapePathComponent:Fv,unescapePathComponent:v3e});var XFt=/("(?:[^\\"]|\\.)*")|[:,]/g,QFt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(XFt,function(C,E){return E||C+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(f===g-1?0:1)),x!==void 0&&d.push(p+x);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const Z9=Ho(QFt);function ll(e,t,n){return e.fields=t||[],e.fname=n,e}function Zi(e){return e==null?null:e.fname}function _a(e){return e==null?null:e.fields}function w3e(e){return e.length===1?JFt(e[0]):ZFt(e)}const JFt=e=>function(t){return t[e]},ZFt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function hp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function jc(e,t,n){const r=hp(e);return e=r.length===1?r[0]:e,ll((n&&n.get||w3e)(r),[e],t||e)}const zk=jc("id"),Aa=ll(e=>e,[],"identity"),n0=ll(()=>0,[],"zero"),kS=ll(()=>1,[],"one"),Bc=ll(()=>!0,[],"true"),Dg=ll(()=>!1,[],"false");function e5t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const E3e=0,XZ=1,QZ=2,x3e=3,S3e=4;function JZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e5t,r=e||E3e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=XZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=QZ&&n(t||"warn","WARN",arguments),this},info(){return r>=x3e&&n(t||"log","INFO",arguments),this},debug(){return r>=S3e&&n(t||"log","DEBUG",arguments),this}}}var Fe=Array.isArray;function pt(e){return e===Object(e)}const Mpe=e=>e!=="__proto__";function RS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=t5t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;NS(r,s,i[s],o)}return r},{})}function NS(e,t,n,r){if(!Mpe(t))return;let i,s;if(pt(n)&&!Fe(n)){s=pt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?NS(s,i,n[i]):Mpe(i)&&(s[i]=n[i])}else e[t]=n}function t5t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ya(e){return e==null||e===""?null:+e}const T3e=e=>t=>e*Math.exp(t),C3e=e=>t=>Math.log(e*t),A3e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),I3e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,F$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function gF(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function k3e(e,t){return gF(e,t,ya,Aa)}function R3e(e,t){var n=Math.sign(e[0]);return gF(e,t,C3e(n),T3e(n))}function N3e(e,t,n){return gF(e,t,F$(n),F$(1/n))}function P3e(e,t,n){return gF(e,t,A3e(n),I3e(n))}function yF(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function ZZ(e,t,n){return yF(e,t,n,ya,Aa)}function eee(e,t,n){const r=Math.sign(e[0]);return yF(e,t,n,C3e(r),T3e(r))}function j$(e,t,n,r){return yF(e,t,n,F$(r),F$(1/r))}function tee(e,t,n,r){return yF(e,t,n,A3e(r),I3e(r))}function O3e(e){return 1+~~(new Date(e).getMonth()/3)}function D3e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function dt(e){return e!=null?Fe(e)?e:[e]:[]}function $3e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function xn(e){return typeof e=="function"}const n5t="descending";function nee(e,t,n){n=n||{},t=dt(t)||[];const r=[],i=[],s={},o=n.comparator||r5t;return dt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===n5t?-1:1),i.push(a=xn(a)?a:jc(a,null,n)),(_a(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ll(o(i,r),Object.keys(s))}const vF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),r5t=(e,t)=>e.length===1?i5t(e[0],t[0]):s5t(e,t,e.length),i5t=(e,t)=>function(n,r){return vF(e(n),e(r))*t},s5t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=vF(s(r),s(i));return o*t[a]});function Ia(e){return xn(e)?e:()=>e}function ree(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function En(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Kh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function M3e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const o5t=Object.prototype.hasOwnProperty;function Ft(e,t){return o5t.call(e,t)}const iP={};function PS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==iP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===iP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=iP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==iP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function L3e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function ut(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),En(r,n)}function Ew(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Qy(e){return typeof e=="boolean"}function L0(e){return Object.prototype.toString.call(e)==="[object Date]"}function F3e(e){return e&&xn(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function j3e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ht(e){return typeof e=="string"}function iee(e,t,n){e&&(e=t?dt(e).map(a=>a.replace(/\\(.)/g,"$1")):dt(e));const r=e&&e.length,i=n&&n.get||w3e,s=a=>i(t?[a]:hp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ll(o,e,"key")}function B3e(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const a5t=1e4;function U3e(e){e=+e||a5t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function z3e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function AC(e,t){let n="";for(;--t>=0;)n+=e;return n}function V3e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?AC(i,o)+s:r==="center"?AC(i,~~(o/2))+s+AC(i,Math.ceil(o/2)):s+AC(i,o)}function Vk(e){return e&&Qn(e)-e[0]||0}function rt(e){return Fe(e)?"["+e.map(rt)+"]":pt(e)||ht(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function see(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const u5t=e=>lr(e)||L0(e)?e:Date.parse(e);function oee(e,t){return t=t||u5t,e==null||e===""?null:t(e)}function aee(e){return e==null||e===""?null:e+""}function ld(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function H3e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function zg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function l5t(e){return e}function c5t(e){if(e==null)return l5t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function f5t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function d5t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Lpe(e,n)})}:Lpe(e,t)}function Lpe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=q3e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function q3e(e,t){var n=c5t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&f5t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function h5t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function p5t(e){return q3e(e,m5t.apply(this,arguments))}function m5t(e,t,n){var r,i,s;if(arguments.length>1)r=g5t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:h5t(e,r)}}function g5t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Lo="year",nl="quarter",wa="month",Ds="week",rl="date",ga="day",Xh="dayofyear",Vl="hours",Hl="minutes",Uc="seconds",cd="milliseconds",uee=[Lo,nl,wa,Ds,rl,ga,Xh,Vl,Hl,Uc,cd],eB=uee.reduce((e,t,n)=>(e[t]=1+n,e),{});function lee(e){const t=dt(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{Ft(eB,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Ds]||n[ga]?1:0)+(n[nl]||n[wa]||n[rl]?1:0)+(n[Xh]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>eB[i]-eB[s]),t}const y5t={[Lo]:"%Y ",[nl]:"Q%q ",[wa]:"%b ",[rl]:"%d ",[Ds]:"W%U ",[ga]:"%a ",[Xh]:"%j ",[Vl]:"%H:00",[Hl]:"00:%M",[Uc]:":%S",[cd]:".%L",[`${Lo}-${wa}`]:"%Y-%m ",[`${Lo}-${wa}-${rl}`]:"%Y-%m-%d ",[`${Vl}-${Hl}`]:"%H:%M"};function W3e(e,t){const n=En({},y5t,t),r=lee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Kv=new Date;function cee(e){return Kv.setFullYear(e),Kv.setMonth(0),Kv.setDate(1),Kv.setHours(0,0,0,0),Kv}function G3e(e){return K3e(new Date(e))}function Y3e(e){return mH(new Date(e))}function K3e(e){return vm.count(cee(e.getFullYear())-1,e)}function mH(e){return uS.count(cee(e.getFullYear())-1,e)}function gH(e){return cee(e).getDay()}function v5t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function X3e(e){return J3e(new Date(e))}function Q3e(e){return yH(new Date(e))}function J3e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return R0.count(t-1,e)}function yH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lS.count(t-1,e)}function vH(e){return Kv.setTime(Date.UTC(e,0,1)),Kv.getUTCDay()}function b5t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function Z3e(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,_5t(n[b],r[b],y===o&&s,v)),u=new Date,l=ld(e),c=l[Lo]?a(Lo):Ia(2012),f=l[wa]?a(wa):l[nl]?a(nl):n0,d=l[Ds]&&l[ga]?a(ga,1,Ds+ga):l[Ds]?a(Ds,1):l[ga]?a(ga,1):l[rl]?a(rl,1):l[Xh]?a(Xh,1):kS,h=l[Vl]?a(Vl):n0,p=l[Hl]?a(Hl):n0,m=l[Uc]?a(Uc):n0,g=l[cd]?a(cd):n0;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function _5t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function ox(e,t,n){return t+e*7-(n+6)%7}const w5t={[Lo]:e=>e.getFullYear(),[nl]:e=>Math.floor(e.getMonth()/3),[wa]:e=>e.getMonth(),[rl]:e=>e.getDate(),[Vl]:e=>e.getHours(),[Hl]:e=>e.getMinutes(),[Uc]:e=>e.getSeconds(),[cd]:e=>e.getMilliseconds(),[Xh]:e=>K3e(e),[Ds]:e=>mH(e),[Ds+ga]:(e,t)=>ox(mH(e),e.getDay(),gH(t)),[ga]:(e,t)=>ox(1,e.getDay(),gH(t))},E5t={[nl]:e=>3*e,[Ds]:(e,t)=>ox(e,0,gH(t))};function e$e(e,t){return Z3e(e,t||1,w5t,E5t,v5t)}const x5t={[Lo]:e=>e.getUTCFullYear(),[nl]:e=>Math.floor(e.getUTCMonth()/3),[wa]:e=>e.getUTCMonth(),[rl]:e=>e.getUTCDate(),[Vl]:e=>e.getUTCHours(),[Hl]:e=>e.getUTCMinutes(),[Uc]:e=>e.getUTCSeconds(),[cd]:e=>e.getUTCMilliseconds(),[Xh]:e=>J3e(e),[Ds]:e=>yH(e),[ga]:(e,t)=>ox(1,e.getUTCDay(),vH(t)),[Ds+ga]:(e,t)=>ox(yH(e),e.getUTCDay(),vH(t))},S5t={[nl]:e=>3*e,[Ds]:(e,t)=>ox(e,0,vH(t))};function t$e(e,t){return Z3e(e,t||1,x5t,S5t,b5t)}const T5t={[Lo]:Fh,[nl]:IA.every(3),[wa]:IA,[Ds]:uS,[rl]:vm,[ga]:vm,[Xh]:vm,[Vl]:Q6,[Hl]:K6,[Uc]:sm,[cd]:LE},C5t={[Lo]:jh,[nl]:kA.every(3),[wa]:kA,[Ds]:lS,[rl]:R0,[ga]:R0,[Xh]:R0,[Vl]:J6,[Hl]:X6,[Uc]:sm,[cd]:LE};function OS(e){return T5t[e]}function DS(e){return C5t[e]}function n$e(e,t,n){return e?e.offset(t,n):void 0}function r$e(e,t,n){return n$e(OS(e),t,n)}function i$e(e,t,n){return n$e(DS(e),t,n)}function s$e(e,t,n,r){return e?e.range(t,n,r):void 0}function o$e(e,t,n,r){return s$e(OS(e),t,n,r)}function a$e(e,t,n,r){return s$e(DS(e),t,n,r)}const IC=1e3,kC=IC*60,RC=kC*60,bF=RC*24,A5t=bF*7,Fpe=bF*30,bH=bF*365,u$e=[Lo,wa,rl,Vl,Hl,Uc,cd],NC=u$e.slice(0,-1),PC=NC.slice(0,-1),OC=PC.slice(0,-1),I5t=OC.slice(0,-1),k5t=[Lo,Ds],jpe=[Lo,wa],l$e=[Lo],OT=[[NC,1,IC],[NC,5,5*IC],[NC,15,15*IC],[NC,30,30*IC],[PC,1,kC],[PC,5,5*kC],[PC,15,15*kC],[PC,30,30*kC],[OC,1,RC],[OC,3,3*RC],[OC,6,6*RC],[OC,12,12*RC],[I5t,1,bF],[k5t,1,A5t],[jpe,1,Fpe],[jpe,3,3*Fpe],[l$e,1,bH]];function c$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Vk(t))/n;let i=rS(a=>a[2]).right(OT,r),s,o;return i===OT.length?(s=l$e,o=K0(t[0]/bH,t[1]/bH,n)):i?(i=OT[r/OT[i-1][2]<OT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=u$e,o=Math.max(K0(t[0],t[1],n),1)),{units:s,step:o}}function DC(e){const t={};return n=>t[n]||(t[n]=e(n))}function R5t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=N5t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function N5t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function f$e(e){const t=DC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=J1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return R5t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=J1(o??",f");const a=K0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=n2e(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=r2e(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=t2e(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let _H;d$e();function d$e(){return _H=f$e({format:sS,formatPrefix:LX})}function h$e(e){return f$e(e2e(e))}function B$(e){return arguments.length?_H=h$e(e):_H}function Bpe(e,t,n){n=n||{},pt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Uc),i=t(Hl),s=t(Vl),o=t(rl),a=t(Ds),u=t(wa),l=t(nl),c=t(Lo),f=e(n[cd]||".%L"),d=e(n[Uc]||":%S"),h=e(n[Hl]||"%I:%M"),p=e(n[Vl]||"%I %p"),m=e(n[rl]||n[ga]||"%a %d"),g=e(n[Ds]||"%b %d"),y=e(n[wa]||"%B"),v=e(n[nl]||"%B"),b=e(n[Lo]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function p$e(e){const t=DC(e.format),n=DC(e.utcFormat);return{timeFormat:r=>ht(r)?t(r):Bpe(t,OS,r),utcFormat:r=>ht(r)?n(r):Bpe(n,DS,r),timeParse:DC(e.parse),utcParse:DC(e.utcParse)}}let wH;m$e();function m$e(){return wH=p$e({format:QX,parse:mAe,utcFormat:Z6,utcParse:gAe})}function g$e(e){return p$e(cAe(e))}function oI(e){return arguments.length?wH=g$e(e):wH}const EH=(e,t)=>En({},e,t);function y$e(e,t){const n=e?h$e(e):B$(),r=t?g$e(t):oI();return EH(n,r)}function fee(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?EH(B$(e),oI(t)):EH(B$(),oI())}function P5t(){return d$e(),m$e(),fee()}const O5t=/^(data:|([A-Za-z]+:)?\/\/)/,D5t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,$5t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Upe="file://";function M5t(e,t){return n=>({options:n||{},sanitize:F5t,load:L5t,fileAccess:!!t,file:j5t(t),http:U5t(e)})}async function L5t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function F5t(e,t){t=En({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=D5t.test(e.replace($5t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+rt(e));const u=O5t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Upe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Upe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function j5t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):B5t}async function B5t(){Me("No file system access.")}function U5t(e){return e?async function(t,n){const r=En({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?xn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:z5t}async function z5t(){Me("No HTTP fetch method available.")}const V5t=e=>e!=null&&e===e,H5t=e=>e==="true"||e==="false"||e===!0||e===!1,q5t=e=>!Number.isNaN(Date.parse(e)),v$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),W5t=e=>v$e(e)&&Number.isInteger(+e),xH={boolean:see,integer:ya,number:ya,date:oee,string:aee,unknown:Aa},sP=[H5t,W5t,v$e,q5t],G5t=["boolean","integer","number","date"];function b$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=sP.length,i=sP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&V5t(u)&&!sP[a](u)&&(i[a]=0,++o,o===sP.length))return"string";return G5t[i.reduce((s,o)=>s===0?o:s,0)-1]}function _$e(e,t){return t.reduce((n,r)=>(n[r]=b$e(e,r),n),{})}function zpe(e){const t=function(n,r){const i={delimiter:e};return dee(n,r?En(r,i):i)};return t.responseType="text",t}function dee(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),QCe(t.delimiter).parse(e+"")}dee.responseType="text";function Y5t(e){return typeof Buffer=="function"&&xn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function hee(e,t){const n=t&&t.property?jc(t.property):Aa;return pt(e)&&!Y5t(e)?K5t(n(e),t):n(JSON.parse(e))}hee.responseType="json";function K5t(e,t){return!Fe(e)&&F3e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const X5t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function w$e(e,t){let n,r,i,s;return e=hee(e,t),t&&t.feature?(n=d5t,i=t.feature):t&&t.mesh?(n=p5t,i=t.mesh,s=X5t[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}w$e.responseType="json";const kO={dsv:dee,csv:zpe(","),tsv:zpe("	"),json:hee,topojson:w$e};function pee(e,t){return arguments.length>1?(kO[e]=t,this):Ft(kO,e)?kO[e]:null}function E$e(e){const t=pee(e);return t&&t.responseType||"text"}function x$e(e,t,n,r){t=t||{};const i=pee(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Q5t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function Q5t(e,t,n,r){if(!e.length)return;const i=oI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=_$e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!xH[p])throw Error("Illegal format pattern: "+h+":"+p);return xH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const _F=M5t(typeof fetch<"u"&&fetch,null);function wF(e){const t=e||Aa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function RO(e,t){try{await t(e)}catch(n){e.error(n)}}const S$e=Symbol("vega_id");let J5t=1;function EF(e){return!!(e&&Mt(e))}function Mt(e){return e[S$e]}function T$e(e,t){return e[S$e]=t,e}function wr(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:T$e(t,J5t++)}function mee(e){return xF(e,wr({}))}function xF(e,t){for(const n in e)t[n]=e[n];return t}function C$e(e,t){return T$e(t,Mt(e))}function Yb(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function A$e(e){return e&&e.constructor===Kb}function Kb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Kb,insert(a){const u=dt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=xn(a)?r:t,l=dt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ia(l)};return xn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return xn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(wr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const NO="_:mod:_";function SF(){Object.defineProperty(this,NO,{writable:!0,value:{}})}SF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[NO];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Fe(n)?1+n.length:-1),i},modified(e,t){const n=this[NO];if(arguments.length){if(Fe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[NO]={},this}};let Z5t=0;const e8t="pulse",t8t=new SF,n8t=1,r8t=2;function Zr(e,t,n,r){this.id=++Z5t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Vpe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Zr.prototype={targets(){return this._targets||(this._targets=wF(zk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Vpe(n8t),modified:Vpe(r8t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new SF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Zr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===e8t)dt(a).forEach(f=>{f instanceof Zr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(Fe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||t8t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function i8t(e,t,n,r){let i=1,s;return e instanceof Zr?s=e:e&&e.prototype instanceof Zr?s=new e:xn(e)?s=new Zr(null,e):(i=0,s=new Zr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function s8t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let o8t=0;function TF(e,t,n){this.id=++o8t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function $g(e,t,n){return new TF(e,t,n)}TF.prototype={_filter:Bc,_apply:Aa,targets(){return this._targets||(this._targets=wF(zk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=$g(e);return this.targets().add(t),t},apply(e){const t=$g(null,e);return this.targets().add(t),t},merge(){const e=$g();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=$g();return this.targets().add($g(null,null,ree(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add($g(null,null,()=>n=!0)),t.targets().add($g(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Bc,this._targets=null}};function a8t(e,t,n,r){const i=this,s=$g(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=dt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function u8t(e,t){const n=this.locale();return x$e(e,t,n.timeParse,n.utcParse)}function l8t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function c8t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:E$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function f8t(e,t,n){const r=this,i=r._pending||d8t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Bc).insert(s.data||[])),i.done(),s}function d8t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const h8t={skip:!0};function p8t(e,t,n,r,i){return(e instanceof Zr?g8t:m8t)(this,e,t,n,r,i),this}function m8t(e,t,n,r,i,s){const o=En({},s,h8t);let a,u;xn(n)||(n=Ia(n)),r===void 0?a=l=>e.touch(n(l)):xn(r)?(u=new Zr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;A$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function g8t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Zr(null,y8t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function y8t(e,t){return t=xn(t)?t:Ia(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function v8t(e){e.rank=++this._rank}function b8t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const U$={},Gd=1,Vg=2,Bp=4,_8t=Gd|Vg,Hpe=Gd|Bp,N_=Gd|Vg|Bp,qpe=8,DT=16,Wpe=32,Gpe=64;function F0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function tB(e,t){const n=[];return zg(e,t,r=>n.push(r)),n}function Ype(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function oP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}F0.prototype={StopPropagation:U$,ADD:Gd,REM:Vg,MOD:Bp,ADD_REM:_8t,ADD_MOD:Hpe,ALL:N_,REFLOW:qpe,SOURCE:DT,NO_SOURCE:Wpe,NO_FIELDS:Gpe,fork(e){return new F0(this.dataflow).init(this,e)},clone(){const e=this.fork(N_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(N_|DT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new F0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Gpe)&&(n.fields=e.fields),t&Gd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Vg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Bp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Wpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||N_;return t&Gd&&this.add.length||t&Vg&&this.rem.length||t&Bp&&this.mod.length},reflow(e){if(e)return this.fork(N_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Bp,Ype(this,Gd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Fe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Gd&&(n.addF=oP(n.addF,t)),e&Vg&&(n.remF=oP(n.remF,t)),e&Bp&&(n.modF=oP(n.modF,t)),e&DT&&(n.srcF=oP(n.srcF,t)),n},materialize(e){e=e||N_;const t=this;return e&Gd&&t.addF&&(t.add=tB(t.add,t.addF),t.addF=null),e&Vg&&t.remF&&(t.rem=tB(t.rem,t.remF),t.remF=null),e&Bp&&t.modF&&(t.mod=tB(t.mod,t.modF),t.modF=null),e&DT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&DT)return zg(n.source,n.srcF,r),n;e&Gd&&zg(n.add,n.addF,r),e&Vg&&zg(n.rem,n.remF,r),e&Bp&&zg(n.mod,n.modF,r);const i=n.source;if(e&qpe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?zg(i,Ype(n,Hpe),r):zg(i,n.srcF,r))}return n}};function gee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ut(gee,F0,{fork(e){const t=new F0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Fe(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function w8t(e,t,n){const r=this,i=[];if(r._pulse)return I$e(r);if(r._pending&&await r._pending,t&&await RO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new F0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=wF(zk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=U$),u!==U$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await RO(r,c[f].callback)}return n&&await RO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function E8t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function x8t(e,t,n){return this._pulse?I$e(this):(this.evaluate(e,t,n),this)}function S8t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function I$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function T8t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function C8t(e,t){const n=e.source,r=this._clock;return n&&Fe(n)?new gee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||A8t(this._pulse,n&&n.pulse)}function A8t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==U$&&(e.source=t.source),e)}const yee={skip:!1,force:!1};function I8t(e,t){const n=t||yee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function k8t(e,t,n){const r=n||yee;return(e.set(t)||r.force)&&this.touch(e,r),this}function R8t(e,t,n){this.touch(e,n||yee);const r=new F0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function N8t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),k$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,P8t(t,0,e)):r=n,r}}}function k$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function P8t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,k$e(e,r,t,n)}function sE(){this.logger(JZ()),this.logLevel(XZ),this._clock=0,this._rank=0,this._locale=fee();try{this._loader=_F()}catch{}this._touched=wF(zk),this._input={},this._pulse=null,this._heap=N8t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function $T(e){return function(){return this._log[e].apply(this,arguments)}}sE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:$T("error"),warn:$T("warn"),info:$T("info"),debug:$T("debug"),logLevel:$T("level"),cleanThreshold:1e4,add:i8t,connect:s8t,rank:v8t,rerank:b8t,pulse:R8t,touch:I8t,update:k8t,changeset:Kb,ingest:l8t,parse:u8t,preload:f8t,request:c8t,events:a8t,on:p8t,evaluate:w8t,run:x8t,runAsync:E8t,runAfter:S8t,_enqueue:T8t,_getPulse:C8t};function Pe(e,t){Zr.call(this,e,null,t)}ut(Pe,Zr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const ax={};function R$e(e){const t=N$e(e);return t&&t.Definition||null}function N$e(e){return e=e&&e.toLowerCase(),Ft(ax,e)?ax[e]:null}function*P$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function vee(e,t,n){const r=Float64Array.from(P$e(e,n));return r.sort(gm),t.map(i=>eCe(r,i))}function bee(e,t){return vee(e,[.25,.5,.75],t)}function _ee(e,t){const n=e.length,r=Gpt(e,t),i=bee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function O$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var zc=Math.random;function O8t(e){zc=e}function D$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(P$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(zc()*s)];c[l]=a/s}return c.sort(gm),[hz(c,n/2),hz(c,1-n/2)]}function $$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?D8t(s,t+t/4):s}function D8t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function $8t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function M8t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*zc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const M$e=Math.sqrt(2*Math.PI),L8t=Math.SQRT2;let MT=NaN;function CF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(MT===MT)n=MT,MT=NaN;else{do n=zc()*2-1,r=zc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,MT=r*s}return e+n*t}function wee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*M$e)}function AF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function IF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*L8t*F8t(2*e-1)}function F8t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Eee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>CF(n,r),pdf:s=>wee(s,n,r),cdf:s=>AF(s,n,r),icdf:s=>IF(s,n,r)};return i.mean(e).stdev(t)}function xee(e,t){const n=Eee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=_ee(e)),i):t},sample(){return e[~~(zc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function See(e,t){return e=e||0,t=t??1,Math.exp(e+CF()*t)}function Tee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*M$e*e)}function Cee(e,t,n){return AF(Math.log(e),t,n)}function Aee(e,t,n){return Math.exp(IF(e,t,n))}function L$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>See(n,r),pdf:s=>Tee(s,n,r),cdf:s=>Cee(s,n,r),icdf:s=>Aee(s,n,r)};return i.mean(e).stdev(t)}function F$e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=zc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Iee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*zc()}function kee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Ree(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Nee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function j$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Iee(n,r),pdf:s=>kee(s,n,r),cdf:s=>Ree(s,n,r),icdf:s=>Nee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Pee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Hk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function kF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function qk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function $S(e,t,n,r,i){let s=0,o=0;return qk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Oee(e,t,n){let r=0,i=0,s=0,o=0,a=0;qk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Hk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:$S(e,t,n,i,l)}}function B$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;qk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Hk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:$S(e,t,n,i,l)}}function U$e(e,t,n){const[r,i,s,o]=kF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;qk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Hk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:$S(e,t,n,o,y)}}function z$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;qk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Hk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:$S(e,t,n,a,c)}}function Dee(e,t,n){const[r,i,s,o]=kF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,x=-b*u,C=E=>(E=E-s,b*E*E+w*E+x+o);return{coef:[x-w*s+b*s*s+o,w-2*b*s,b],predict:C,rSquared:$S(e,t,n,o,C)}}function V$e(e,t,n,r){if(r===0)return Pee(e,t,n);if(r===1)return Oee(e,t,n);if(r===2)return Dee(e,t,n);const[i,s,o,a]=kF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=B8t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:j8t(f,y,-o,a),predict:v,rSquared:$S(e,t,n,a,v)}}function j8t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function B8t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Kpe=2,Xpe=1e-12;function H$e(e,t,n,r){const[i,s,o,a]=kF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Kpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let x=0,C=0,E=0,S=0,A=0;const k=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const O=i[P],L=s[P],j=U8t(Math.abs(y-O)*k)*d[P],B=O*j;x+=j,C+=B,E+=L*j,S+=L*B,A+=O*B}const[R,D]=Hk(C/x,E/x,S/x,A/x);c[g]=R+D*y,f[g]=Math.abs(s[g]-c[g]),z8t(i,g+1,p)}if(h===Kpe)break;const m=nCe(f);if(Math.abs(m)<Xpe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Xpe:(v=1-y*y)*v}return V8t(i,c,o,a)}function U8t(e){return(e=1-e*e*e)*e*e}function z8t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function V8t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const H8t=.5*Math.PI/180;function RF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=q8t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&W8t(f,m,d,h,p)>H8t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function q8t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function W8t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function G8t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function SH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:G8t(e)}function q$e(e,t,n){return n||e+(t?"_"+t:"")}const nB=()=>{},Y8t={init:nB,add:nB,rem:nB,idx:0},aI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Wk=Object.keys(aI).filter(e=>e!=="__count__");function K8t(e,t){return(n,r)=>En({name:e,aggregate_param:r,out:n||e},Y8t,t)}[...Wk,"__count__"].forEach(e=>{aI[e]=K8t(e,aI[e])});function W$e(e,t,n){return aI[e](n,t)}function G$e(e,t){return e.idx-t.idx}function X8t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=aI[i]())})};return e.forEach(n),Object.values(t).sort(G$e)}function Q8t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function J8t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Z8t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ejt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function Y$e(e,t){const n=t||Aa,r=X8t(e),i=e.slice().sort(G$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Q8t,s.prototype.add=J8t,s.prototype.rem=Z8t,s.prototype.set=ejt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function $ee(e){this._key=e?jc(e):Mt,this.reset()}const Wo=$ee.prototype;Wo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Wo.add=function(e){this._add.push(e)};Wo.rem=function(e){this._rem.push(e)};Wo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Wo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Wo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=M3e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Wo.argmin=function(e){return this.extent(e)[0]||{}};Wo.argmax=function(e){return this.extent(e)[1]||{}};Wo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Wo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Wo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=bee(this.values(),e),this._get=e),this._q};Wo.q1=function(e){return this.quartile(e)[0]};Wo.q2=function(e){return this.quartile(e)[1]};Wo.q3=function(e){return this.quartile(e)[2]};Wo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=D$e(this.values(),1e3,.05,e),this._get=e),this._ci};Wo.ci0=function(e){return this.ci(e)[0]};Wo.ci1=function(e){return this.ci(e)[1]};function py(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}py.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ut(py,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=dt(_a(v)),w=b.length;let x=0,C;for(;x<w;++x)r[C=b[x]]||(r[C]=1,t.push(C))}this._dims=dt(e.groupby),this._dnames=this._dims.map(v=>{const b=Zi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:SH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Zi(f),g=q$e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(W$e(d,h,g))}return this._measures=this._measures.map(v=>Y$e(v,v.field)),Object.create(null)},cellkey:SH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new $ee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?C$e(t.tuple,s):wr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const tjt=1e-14;function Mee(e){Pe.call(this,null,e)}Mee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ut(Mee,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(_a(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=O$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ya(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(tjt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ll(u,_a(t),e.name||"bin_"+Zi(t))}});function K$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?z3e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Lee(e){Pe.call(this,[],e)}Lee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ut(Lee,Pe,{transform(e,t){const n=t.fork(t.ALL),r=K$e(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Yb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function X$e(e){Zr.call(this,null,njt,e)}ut(X$e,Zr);function njt(e){return this.value&&!e.modified()?this.value:nee(e.fields,e.orders)}function Fee(e){Pe.call(this,null,e)}Fee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function rjt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ut(Fee,Pe,{transform(e,t){const n=f=>d=>{for(var h=rjt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=wr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function jee(e){Pe.call(this,null,e)}jee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ut(jee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=ijt(a,i,s,e.filter||Bc)):n.mod=a,n.source=this.value,n.modifies(r)}});function ijt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(wr(s)),s={},s[t]=l);return i}const Qpe={kde:xee,mixture:F$e,normal:Eee,lognormal:L$e,uniform:j$e},sjt="distributions",Jpe="function",ojt="field";function Q$e(e,t){const n=e[Jpe];Ft(Qpe,n)||Me("Unknown distribution function: "+n);const r=Qpe[n]();for(const i in e)i===ojt?r.data((e.from||t()).map(e[i])):i===sjt?r[i](e[i].map(s=>Q$e(s,t))):typeof r[i]===Jpe&&r[i](e[i]);return r}function Bee(e){Pe.call(this,null,e)}const J$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ajt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:J$e},{name:"weights",type:"number",array:!0}]};Bee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:J$e.concat(ajt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ut(Bee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Q$e(e.distribution,ujt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Kh(r.data()),l=RF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],wr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function ujt(e){return()=>e.materialize(e.SOURCE).source}function Z$e(e,t){return e?e.map((n,r)=>t[r]||Zi(n)):null}function Uee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const eMe="bin";function zee(e){Pe.call(this,null,e)}zee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:eMe}]};const ljt=(e,t)=>Vk(Kh(e,t))/30;ut(zee,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Uee(t.source,e.groupby,Aa),i=e.smooth||!1,s=e.field,o=e.step||ljt(n,s),a=Yb((p,m)=>s(p)-s(m)),u=e.as||eMe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of $$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function tMe(e){Zr.call(this,null,cjt,e),this.modified(!0)}ut(tMe,Zr);function cjt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ll(n=>t(n,e),_a(t),Zi(t))}function Vee(e){Pe.call(this,[void 0,void 0],e)}Vee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ut(Vee,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ya(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Zi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Hee(e,t){Zr.call(this,e),this.parent=t,this.count=0}ut(Hee,Zr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function NF(e){Pe.call(this,{},e),this._keys=PS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ut(NF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Hee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function nMe(e){Zr.call(this,null,fjt,e)}ut(nMe,Zr);function fjt(e){return this.value&&!e.modified()?this.value:Fe(e.name)?dt(e.name).map(t=>jc(t)):jc(e.name,e.as)}function qee(e){Pe.call(this,PS(),e)}qee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ut(qee,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Wee(e){Pe.call(this,[],e)}Wee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ut(Wee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z$e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=mee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Gee(e){Pe.call(this,[],e)}Gee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ut(Gee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=mee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Yee(e){Pe.call(this,null,e)}Yee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ut(Yee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function rMe(e){Pe.call(this,[],e)}ut(rMe,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=wr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const aP={value:"value",median:nCe,mean:tCe,min:dz,max:Ic},djt=[];function Kee(e){Pe.call(this,[],e)}Kee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function hjt(e){var t=e.method||aP.value,n;if(aP[t]==null)Me("Unrecognized imputation method: "+t);else return t===aP.value?(n=e.value!==void 0?e.value:0,()=>n):aP[t]}function pjt(e){const t=e.field;return n=>n?t(n):NaN}ut(Kee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=hjt(e),i=pjt(e),s=Zi(e.field),o=Zi(e.key),a=(e.groupby||[]).map(Zi),u=mjt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,x;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],x={_impute:!0},y=0,w=p.length;y<w;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(wr(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function mjt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):djt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Xee(e){py.call(this,e)}Xee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Wk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ut(Xee,py,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{En(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Qee(e){Pe.call(this,null,e)}Qee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ut(Qee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Uee(r,e.groupby,e.field),s=(e.groupby||[]).map(Zi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Kh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=xee(h,o)[a],m=e.counts?h.length:1,g=c||Kh(h);RF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(wr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function iMe(e){Zr.call(this,null,gjt,e)}ut(iMe,Zr);function gjt(e){return this.value&&!e.modified()?this.value:iee(e.fields,e.flat)}function sMe(e){Pe.call(this,[],e),this._pending=null}ut(sMe,Pe,{transform(e,t){const n=t.dataflow;return this._pending?rB(this,t,this._pending):yjt(e)?t.StopPropagation:e.values?rB(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=dt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>rB(this,t,dt(r.data)))}});function yjt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function rB(e,t,n){n.forEach(wr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Jee(e){Pe.call(this,{},e)}Jee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ut(Jee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Zi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function oMe(e){Zr.call(this,null,vjt,e)}ut(oMe,Zr);function vjt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function aMe(e){Zr.call(this,null,bjt,e)}ut(aMe,Zr);function bjt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function uMe(e){Pe.call(this,null,e)}ut(uMe,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Zee(e){py.call(this,e)}Zee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Wk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ut(Zee,py,{_transform:py.prototype.transform,transform(e,t){return this._transform(_jt(e,t),t)}});function _jt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=_a(n).concat(_a(r)),o=Ejt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>wjt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function wjt(e,t,n,r){return ll(i=>t(i)===e?n(i):NaN,r,e+"")}function Ejt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(vF),t?i.slice(0,t):i}function lMe(e){NF.call(this,e)}ut(lMe,NF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(_a(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(wr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ete(e){Pe.call(this,null,e)}ete.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ut(ete,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=Z$e(e.fields,e.as||[]),s=r?(a,u)=>xjt(a,u,r,i):xF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,wr({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function xjt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function cMe(e){Pe.call(this,null,e)}ut(cMe,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function tte(e){Pe.call(this,null,e)}tte.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Sjt=1e-14;ut(tte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Uee(i,e.groupby,e.field),o=(e.groupby||[]).map(Zi),a=[],u=e.step||.01,l=e.probs||Lu(u/2,1-Sjt,u),c=l.length;return s.forEach(f=>{const d=vee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(wr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function fMe(e){Pe.call(this,null,e)}ut(fMe,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=mee(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function nte(e){Pe.call(this,[],e),this.count=0}nte.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ut(nte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*zc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function rte(e){Pe.call(this,null,e)}rte.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ut(rte,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Lu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,wr(s)}),n.add=t.add.concat(this.value),n}});function dMe(e){Pe.call(this,null,e),this.modified(!0)}ut(dMe,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ite(e){Pe.call(this,null,e)}const hMe=["unit0","unit1"];ite.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:uee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:hMe}]};ut(ite,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?DS:OS)(s.unit).offset,a=e.as||hMe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(_a(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:c$e({extent:e.extent||Kh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=lee(r),o=this.value||{},a=(n?t$e:e$e)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function pMe(e){Pe.call(this,PS(),e)}ut(pMe,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function mMe(e){Pe.call(this,null,e)}ut(mMe,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Yb(e.sort)):t.source).map(e.field))}});function Tjt(e,t,n,r){const i=uI[e](t,n);return{init:i.init||n0,update:function(s,o){o[r]=i.next(s)}}}const uI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=uI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=uI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Cjt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Cjt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Ajt=Object.keys(uI);function gMe(e){const t=dt(e.ops),n=dt(e.fields),r=dt(e.params),i=dt(e.aggregate_params),s=dt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){dt(_a(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Zi(g),w=q$e(p,b,s[m]);if(h(g),o.push(w),Ft(uI,p))a.push(Tjt(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let x=l[b];x||(x=l[b]=[],x.field=g,f.push(x)),x.push(W$e(p,v,w))}}),(c.length||f.length)&&(this.cell=Ijt(f,c,d)),this.inputs=Object.keys(u)}const yMe=gMe.prototype;yMe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};yMe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Ijt(e,t,n){e=e.map(u=>Y$e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new $ee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function ste(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}ste.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ajt.concat(Wk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ut(ste,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Yb(e.sort),i=SH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new gMe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)kjt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=K$e(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function kjt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?rS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ia(-1)};t.init();for(let f=0;f<u;++f)Rjt(c,o,f,u),s&&Njt(c,l),t.update(c,a[f])}function Rjt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Njt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Pjt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:py,bin:Mee,collect:Lee,compare:X$e,countpattern:Fee,cross:jee,density:Bee,dotbin:zee,expression:tMe,extent:Vee,facet:NF,field:nMe,filter:qee,flatten:Wee,fold:Gee,formula:Yee,generate:rMe,impute:Kee,joinaggregate:Xee,kde:Qee,key:iMe,load:sMe,lookup:Jee,multiextent:oMe,multivalues:aMe,params:uMe,pivot:Zee,prefacet:lMe,project:ete,proxy:cMe,quantile:tte,relay:fMe,sample:nte,sequence:rte,sieve:dMe,subflow:Hee,timeunit:ite,tupleindex:pMe,values:mMe,window:ste},Symbol.toStringTag,{value:"Module"}));function j0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Ojt=()=>typeof Image<"u"?Image:null;function ote(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Djt="identity",ux="linear",Ym="log",Gk="pow",Yk="sqrt",PF="symlog",cb="time",fb="utc",Rh="sequential",MS="diverging",lx="quantile",OF="quantize",DF="threshold",ate="ordinal",TH="point",vMe="band",ute="bin-ordinal",Hs="continuous",Kk="discrete",Xk="discretizing",sf="interpolating",lte="temporal";function $jt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Mjt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function cte(){const e=aS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ote(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Lu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,Y0(h,m)-1),v=m===g?y:Y0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return cte().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function bMe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return bMe(t())},e}function Ljt(){return bMe(cte().paddingInner(1))}var Fjt=Array.prototype.map;function jjt(e){return Fjt.call(e,ya)}const Bjt=Array.prototype.slice;function _Me(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Y0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=jjt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Bjt.call(r),n):t.slice()},n.tickFormat=function(r,i){return eAe(e[0],Qn(e),r??10,i)},n.copy=function(){return _Me().domain(n.domain()).range(n.range())},n}const z$=new Map,wMe=Symbol("vega_scale");function EMe(e){return e[wMe]=!0,e}function Ujt(e){return e&&e[wMe]===!0}function zjt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?$jt(s):s.invertExtent?Mjt(s):void 0),s.type=e,EMe(s)};return r.metadata=ld(dt(n)),r}function mr(e,t,n){return arguments.length>1?(z$.set(e,zjt(e,t,n)),this):xMe(e)?z$.get(e):void 0}mr(Djt,tAe);mr(ux,Lh,Hs);mr(Ym,rAe,[Hs,Ym]);mr(Gk,KX,Hs);mr(Yk,R_t,Hs);mr(PF,iAe,Hs);mr(cb,yAe,[Hs,lte]);mr(fb,qwt,[Hs,lte]);mr(Rh,ZX,[Hs,sf]);mr(`${Rh}-${ux}`,ZX,[Hs,sf]);mr(`${Rh}-${Ym}`,vAe,[Hs,sf,Ym]);mr(`${Rh}-${Gk}`,eQ,[Hs,sf]);mr(`${Rh}-${Yk}`,Wwt,[Hs,sf]);mr(`${Rh}-${PF}`,bAe,[Hs,sf]);mr(`${MS}-${ux}`,_Ae,[Hs,sf]);mr(`${MS}-${Ym}`,wAe,[Hs,sf,Ym]);mr(`${MS}-${Gk}`,tQ,[Hs,sf]);mr(`${MS}-${Yk}`,Gwt,[Hs,sf]);mr(`${MS}-${PF}`,EAe,[Hs,sf]);mr(lx,sAe,[Xk,lx]);mr(OF,oAe,Xk);mr(DF,aAe,Xk);mr(ute,_Me,[Kk,Xk]);mr(ate,aS,Kk);mr(vMe,cte,Kk);mr(TH,Ljt,Kk);function xMe(e){return z$.has(e)}function Xb(e,t){const n=z$.get(e);return n&&n.metadata[t]}function fte(e){return Xb(e,Hs)}function cx(e){return Xb(e,Kk)}function CH(e){return Xb(e,Xk)}function SMe(e){return Xb(e,Ym)}function Vjt(e){return Xb(e,lte)}function TMe(e){return Xb(e,sf)}function CMe(e){return Xb(e,lx)}const Hjt=["clamp","base","constant","exponent"];function AMe(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function $F(e,t,n){return AX(dte(t||"rgb",n),e)}function IMe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function kMe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ia(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=mr(s)().domain([t,n]).range([0,1]),Hjt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function dte(e,t){const n=x0t[qjt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function qjt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Wjt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Gjt={accent:Kwt,category10:Ywt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Xwt,observable10:Qwt,paired:Jwt,pastel1:Zwt,pastel2:eEt,set1:tEt,set2:nEt,set3:rEt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function RMe(e){if(Fe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function NMe(e,t){for(const n in e)hte(n,t(e[n]))}const Zpe={};NMe(Gjt,RMe);NMe(Wjt,e=>$F(RMe(e)));function hte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Zpe[e]=t,this):Zpe[e]}const PO="symbol",Yjt="discrete",Kjt="gradient",Xjt=e=>Fe(e)?e.map(t=>String(t)):String(e),Qjt=(e,t)=>e[1]-t[1],Jjt=(e,t)=>t[1]-e[1];function pte(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Vk(e.domain())/n||1)+1))),pt(t)&&(r=t.step,t=t.interval),ht(t)&&(t=e.type===cb?OS(t):e.type==fb?DS(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function PMe(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=Qjt;if(i>s&&(r=s,s=i,i=r,o=Jjt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function mte(e,t){return e.bins?PMe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function OMe(e,t,n,r,i,s){const o=t.type;let a=Xjt;if(o===cb||i===cb)a=e.timeFormat(r);else if(o===fb||i===fb)a=e.utcFormat(r);else if(SMe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=DMe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function DMe(e,t,n){const r=mte(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const AH={[lx]:"quantiles",[OF]:"thresholds",[DF]:"domain"},$Me={[lx]:"quantiles",[OF]:"domain"};function MMe(e,t){return e.bins?t9t(e.bins):e.type===Ym?DMe(e,t,!0):AH[e.type]?e9t(e[AH[e.type]]()):mte(e,t)}function Zjt(e,t,n){const r=t[$Me[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function e9t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function t9t(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const n9t=e=>AH[e.type]||e.bins;function LMe(e,t,n,r,i,s,o){const a=$Me[t.type]&&s!==cb&&s!==fb?Zjt(e,t,i):OMe(e,t,n,i,s,o);return r===PO&&n9t(t)?r9t(a):r===Yjt?i9t(a):s9t(a)}const r9t=e=>(t,n,r)=>{const i=eme(r[n+1],eme(r.max,1/0)),s=tme(t,e),o=tme(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},eme=(e,t)=>e??t,i9t=e=>(t,n)=>n?e(t):null,s9t=e=>t=>e(t),tme=(e,t)=>Number.isFinite(e)?t(e):null;function o9t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===DF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function a9t(e,t,n,r){const i=r||t.type;return ht(n)&&Vjt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===cb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===fb?e.utcFormat("%A, %d %B %Y, %X UTC"):LMe(e,t,5,null,n,r,!0)}function FMe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=a9t(e,t,n.format,n.formatType);if(CH(t.type)){const s=MMe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(cx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let jMe=0;function u9t(){jMe=0}const V$="p_";function gte(e){return e&&e.gradient}function BMe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?V$:"";return i||(i=e.id="gradient_"+jMe++,r==="radial"?(e.x1=Dd(e.x1,.5),e.y1=Dd(e.y1,.5),e.r1=Dd(e.r1,0),e.x2=Dd(e.x2,.5),e.y2=Dd(e.y2,.5),e.r2=Dd(e.r2,.5),s=V$):(e.x1=Dd(e.x1,0),e.y1=Dd(e.y1,0),e.x2=Dd(e.x2,1),e.y2=Dd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Dd(e,t){return e??t}function UMe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const nme={basis:{curve:Jz},"basis-closed":{curve:mEt},"basis-open":{curve:gEt},bundle:{curve:yEt,tension:"beta",value:.85},cardinal:{curve:vEt,tension:"tension",value:0},"cardinal-open":{curve:_Et,tension:"tension",value:0},"cardinal-closed":{curve:bEt,tension:"tension",value:0},"catmull-rom":{curve:wEt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:EEt,tension:"alpha",value:.5},"catmull-rom-open":{curve:xEt,tension:"alpha",value:.5},linear:{curve:nQ},"linear-closed":{curve:SEt},monotone:{horizontal:CEt,vertical:TEt},natural:{curve:AEt},step:{curve:IEt},"step-after":{curve:REt},"step-before":{curve:kEt}};function yte(e,t,n){var r=Ft(nme,e)&&nme[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const l9t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},c9t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,f9t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,d9t=/^((\s+,?\s*)|(,\s*))/,h9t=/^[01]/;function fx(e){const t=[];return(e.match(c9t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=l9t[s],a=p9t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function p9t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?h9t:f9t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(d9t);u!==null&&(i+=u[0].length)}return r}const my=Math.PI/180,m9t=1e-14,Xv=Math.PI/2,ch=Math.PI*2,P_=Math.sqrt(3)/2;var iB={},sB={},zMe=[].join;function g9t(e,t,n,r,i,s,o,a,u){const l=zMe.call(arguments);if(iB[l])return iB[l];const c=o*my,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,x=v*a+b*u,C=g*e+y*t,E=v*e+b*t;let A=1/((C-w)*(C-w)+(E-x)*(E-x))-.25;A<0&&(A=0);let k=Math.sqrt(A);s==i&&(k=-k);const R=.5*(w+C)-k*(E-x),D=.5*(x+E)+k*(C-w),P=Math.atan2(x-D,w-R);let L=Math.atan2(E-D,C-R)-P;L<0&&s===1?L+=ch:L>0&&s===0&&(L-=ch);const j=Math.ceil(Math.abs(L/(Xv+.001))),B=[];for(let U=0;U<j;++U){const H=P+U*L/j,$=P+(U+1)*L/j;B[U]=[R,D,H,$,n,r,f,d]}return iB[l]=B}function y9t(e){const t=zMe.call(e);if(sB[t])return sB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),x=n+p-w*m,C=r+m+w*p,E=n+g,S=r+y,A=E+w*y,k=S-w*g;return sB[t]=[c*x+f*C,d*x+h*C,c*A+f*k,d*A+h*k,c*E+f*S,d*E+h*S]}const ic=["l",0,0,0,0,0,0,0];function v9t(e,t,n){const r=ic[0]=e[0];if(r==="a"||r==="A")ic[1]=t*e[1],ic[2]=n*e[2],ic[3]=e[3],ic[4]=e[4],ic[5]=e[5],ic[6]=t*e[6],ic[7]=n*e[7];else if(r==="h"||r==="H")ic[1]=t*e[1];else if(r==="v"||r==="V")ic[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)ic[i]=(i%2==1?t:n)*e[i];return ic}function lI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=v9t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":rme(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":rme(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function rme(e,t,n,r){const i=g9t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=y9t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const ime=.5773502691896257,sme={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ch)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=P_*n,i=r-n*ime,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=P_*n,i=r-n*ime;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=P_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=P_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=P_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=P_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function VMe(e){return Ft(sme,e)?sme[e]:b9t(e)}var oB={};function b9t(e){if(!Ft(oB,e)){const t=fx(e);oB[e]={draw:function(n,r){lI(n,t,0,0,Math.sqrt(r)/2)}}}return oB[e]}const kg=.448084975506;function _9t(e){return e.x}function w9t(e){return e.y}function E9t(e){return e.width}function x9t(e){return e.height}function Np(e){return typeof e=="function"?e:()=>+e}function uP(e,t,n){return Math.max(t,Math.min(e,n))}function HMe(){var e=_9t,t=w9t,n=E9t,r=x9t,i=Np(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=uP(+i.call(this,c),0,v),w=uP(+s.call(this,c),0,v),x=uP(+o.call(this,c),0,v),C=uP(+a.call(this,c),0,v);if(u||(u=h=z6()),b<=0&&w<=0&&x<=0&&C<=0)u.rect(p,m,g,y);else{var E=p+g,S=m+y;u.moveTo(p+b,m),u.lineTo(E-w,m),u.bezierCurveTo(E-kg*w,m,E,m+kg*w,E,m+w),u.lineTo(E,S-C),u.bezierCurveTo(E,S-kg*C,E-kg*C,S,E-C,S),u.lineTo(p+x,S),u.bezierCurveTo(p+kg*x,S,p,S-kg*x,p,S-x),u.lineTo(p,m+b),u.bezierCurveTo(p,m+kg*b,p+kg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Np(c),l):e},l.y=function(c){return arguments.length?(t=Np(c),l):t},l.width=function(c){return arguments.length?(n=Np(c),l):n},l.height=function(c){return arguments.length?(r=Np(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Np(c),s=f!=null?Np(f):i,a=d!=null?Np(d):i,o=h!=null?Np(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function qMe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,ch);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=z6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Qk(e,t){return e??t}const Jk=e=>e.x||0,Zk=e=>e.y||0,S9t=e=>e.width||0,T9t=e=>e.height||0,C9t=e=>(e.x||0)+(e.width||0),A9t=e=>(e.y||0)+(e.height||0),I9t=e=>e.startAngle||0,k9t=e=>e.endAngle||0,R9t=e=>e.padAngle||0,N9t=e=>e.innerRadius||0,P9t=e=>e.outerRadius||0,O9t=e=>e.cornerRadius||0,D9t=e=>Qk(e.cornerRadiusTopLeft,e.cornerRadius)||0,$9t=e=>Qk(e.cornerRadiusTopRight,e.cornerRadius)||0,M9t=e=>Qk(e.cornerRadiusBottomRight,e.cornerRadius)||0,L9t=e=>Qk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,F9t=e=>Qk(e.size,64),j9t=e=>e.size||1,MF=e=>e.defined!==!1,B9t=e=>VMe(e.shape||"circle"),U9t=dEt().startAngle(I9t).endAngle(k9t).padAngle(R9t).innerRadius(N9t).outerRadius(P9t).cornerRadius(O9t),z9t=kAe().x(Jk).y1(Zk).y0(A9t).defined(MF),V9t=kAe().y(Zk).x1(Jk).x0(C9t).defined(MF),H9t=j3().x(Jk).y(Zk).defined(MF),q9t=HMe().x(Jk).y(Zk).width(S9t).height(T9t).cornerRadius(D9t,$9t,M9t,L9t),W9t=pEt().type(B9t).size(F9t),G9t=qMe().x(Jk).y(Zk).defined(MF).size(j9t);function vte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Y9t(e,t){return U9t.context(e)(t)}function K9t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?V9t:z9t).curve(yte(r,n.orient,n.tension)).context(e)(t)}function X9t(e,t){const n=t[0],r=n.interpolate||"linear";return H9t.curve(yte(r,n.orient,n.tension)).context(e)(t)}function LS(e,t,n,r){return q9t.context(e)(t,n,r)}function Q9t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function J9t(e,t){return W9t.context(e)(t)}function Z9t(e,t){return G9t.context(e)(t)}var WMe=1;function GMe(){WMe=1}function bte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+WMe++),o=i.clipping[s]||(i.clipping[s]={id:s});return xn(r)?o.path=r(null):vte(n)?o.path=LS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function LF(e){this.mark=e,this.bounds=this.bounds||new Ts}function FF(e){LF.call(this,e),this.items=this.items||[]}ut(FF,LF);class YMe{constructor(t){this._pending=0,this._loader=t||_F()}pending(){return this._pending}sanitizeURL(t){const n=this;return ome(n),n._loader.sanitize(t,{context:"href"}).then(r=>(LT(n),r)).catch(()=>(LT(n),null))}loadImage(t){const n=this,r=Ojt();return ome(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>LT(n),o.onerror=()=>LT(n),o.src=s,o}).catch(i=>(LT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function ome(e){e._pending+=1}function LT(e){e._pending-=1}function dg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?eBt(t,r):0))}return e}function eBt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const tBt=ch-1e-8;let jF,OO,DO,b1,IH,$O,kH,RH;const c0=(e,t)=>jF.add(e,t),MO=(e,t)=>c0(OO=e,DO=t),ame=e=>c0(e,jF.y1),ume=e=>c0(jF.x1,e),Qv=(e,t)=>IH*e+kH*t,Jv=(e,t)=>$O*e+RH*t,aB=(e,t)=>c0(Qv(e,t),Jv(e,t)),uB=(e,t)=>MO(Qv(e,t),Jv(e,t));function eR(e,t){return jF=e,t?(b1=t*my,IH=RH=Math.cos(b1),$O=Math.sin(b1),kH=-$O):(IH=RH=1,b1=$O=kH=0),nBt}const nBt={beginPath(){},closePath(){},moveTo:uB,lineTo:uB,rect(e,t,n,r){b1?(aB(e+n,t),aB(e+n,t+r),aB(e,t+r),uB(e,t)):(c0(e+n,t+r),MO(e,t))},quadraticCurveTo(e,t,n,r){const i=Qv(e,t),s=Jv(e,t),o=Qv(n,r),a=Jv(n,r);lme(OO,i,o,ame),lme(DO,s,a,ume),MO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Qv(e,t),a=Jv(e,t),u=Qv(n,r),l=Jv(n,r),c=Qv(i,s),f=Jv(i,s);cme(OO,o,u,c,ame),cme(DO,a,l,f,ume),MO(c,f)},arc(e,t,n,r,i,s){if(r+=b1,i+=b1,OO=n*Math.cos(i)+e,DO=n*Math.sin(i)+t,Math.abs(i-r)>tBt)c0(e-n,t-n),c0(e+n,t+n);else{const o=l=>c0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%ch,r<0&&(r+=ch),i=i%ch,i<0&&(i+=ch),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=ch,a=r-r%Xv,u=0;u<4&&a>i;++u,a-=Xv)o(a);else for(a=r-r%Xv+Xv,u=0;u<4&&a<i;++u,a=a+Xv)o(a)}}};function lme(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function cme(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>m9t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(fme(u,e,t,n,r)),0<l&&l<1&&i(fme(l,e,t,n,r))}function fme(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var B0=(B0=j0(1,1))?B0.getContext("2d"):null;const NH=new Ts;function _te(e){return function(t,n){if(!B0)return!0;e(B0,t),NH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=NH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(B0.isPointInPath(u,a))return!0;return!1}}function wte(e,t){return t.contains(e.x||0,e.y||0)}function KMe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(NH.set(n,r,n+i,r+s))}function XMe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return xw(t,n,r,i,s)}function xw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function dx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function yf(e,t){return e??t}function dme(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function rBt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+yf(t.x1,.5)*r,n.y1+yf(t.y1,.5)*i,Math.max(r,i)*yf(t.r1,0),n.x1+yf(t.x2,.5)*r,n.y1+yf(t.y2,.5)*i,Math.max(r,i)*yf(t.r2,.5));else{const o=yf(t.x1,0),a=yf(t.y1,0),u=yf(t.x2,1),l=yf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=j0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=dme(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return dme(s,t.stops)}function QMe(e,t,n){return gte(n)?rBt(e,n,t.bounds):n}function H$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=QMe(e,t,t.fill),!0):!1}var iBt=[];function hx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=QMe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||iBt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function sBt(e,t){return e.zindex-t.zindex||e.index-t.index}function Ete(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(sBt)}function fd(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Ete(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function q$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Ete(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function xte(e){return function(t,n,r){fd(n,i=>{(!r||r.intersects(i.bounds))&&JMe(e,t,i,i)})}}function oBt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&JMe(e,t,n.items[0],n.items)}}function JMe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(dx(t,n),n.fill&&H$(t,n,i)&&t.fill(),n.stroke&&hx(t,n,i)&&t.stroke()))}function BF(e){return e=e||Bc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,q$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function tR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Ste(e){return BF(tR(e))}function N1(e,t){return"translate("+e+","+t+")"}function Tte(e){return"rotate("+e+")"}function aBt(e,t){return"scale("+e+","+t+")"}function ZMe(e){return N1(e.x||0,e.y||0)}function uBt(e){return N1(e.x||0,e.y||0)+(e.angle?" "+Tte(e.angle):"")}function lBt(e){return N1(e.x||0,e.y||0)+(e.angle?" "+Tte(e.angle):"")+(e.scaleX||e.scaleY?" "+aBt(e.scaleX||1,e.scaleY||1):"")}function Cte(e,t,n){function r(o,a){o("transform",uBt(a)),o("d",t(null,a))}function i(o,a){return t(eR(o,a.angle),a),dg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=my),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:xte(s),pick:Ste(s),isect:n||_te(s)}}var cBt=Cte("arc",Y9t);function fBt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function dBt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function hBt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Ate(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(eR(u),c),dg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=tR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:oBt(s),pick:a,isect:wte,tip:n}}var pBt=Ate("area",K9t,fBt);function mBt(e,t){var n=t.clip;e.save(),xn(n)?(e.beginPath(),n(e),e.clip()):eLe(e,t.group)}function eLe(e,t){e.beginPath(),vte(t)?LS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function tLe(e){const t=yf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function gBt(e,t){e("transform",ZMe(t))}function nLe(e,t){const n=tLe(t);e("d",LS(null,t,n,n))}function yBt(e,t){e("class","background"),e("aria-hidden",!0),nLe(e,t)}function vBt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?nLe(e,t):e("d","")}function bBt(e,t,n){const r=t.clip?bte(n,t,t):null;e("clip-path",r)}function _Bt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),dg(e,t),e.translate(t.x||0,t.y||0)}function cI(e,t,n,r){const i=tLe(t);e.beginPath(),LS(e,t,(n||0)+i,(r||0)+i)}const wBt=tR(cI),EBt=tR(cI,!1),xBt=tR(cI,!0);function SBt(e,t,n,r){fd(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(cI(e,i,s,o),dx(e,i),i.fill&&H$(e,i,u)&&e.fill(),i.stroke&&!a&&hx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&eLe(e,i),n&&n.translate(-s,-o),fd(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(cI(e,i,s,o),dx(e,i),hx(e,i,u)&&e.stroke())})}function TBt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return q$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&vte(u)&&!xBt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&EBt(e,u,o,a)?(e.restore(),u):(l=q$(u,v=>CBt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&wBt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function CBt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var ABt={type:"group",tag:"g",nested:!1,attr:gBt,bound:_Bt,draw:SBt,pick:TBt,isect:KMe,content:bBt,background:yBt,foreground:vBt},fI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ite(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function kte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Rte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function UF(e,t){return e==="center"?t/2:e==="right"?t:0}function zF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function IBt(e,t,n){const r=Ite(t,n),i=kte(t,r),s=Rte(t,r),o=(t.x||0)-UF(t.align,i),a=(t.y||0)-zF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,fI["xmlns:xlink"],"xlink:href"),e("transform",N1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function kBt(e,t){const n=t.image,r=kte(t,n),i=Rte(t,n),s=(t.x||0)-UF(t.align,r),o=(t.y||0)-zF(t.baseline,i);return e.set(s,o,s+r,o+i)}function RBt(e,t,n){fd(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Ite(r,this);let s=kte(r,i),o=Rte(r,i);if(s===0||o===0)return;let a=(r.x||0)-UF(r.align,s),u=(r.y||0)-zF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(dx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var NBt={type:"image",tag:"image",nested:!1,attr:IBt,bound:kBt,draw:RBt,pick:BF(),isect:Bc,get:Ite,xOffset:UF,yOffset:zF},PBt=Ate("line",X9t,dBt);function OBt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",lBt(t)),e("d",t.path)}function LO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*my,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=fx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),lI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):lI(e,u,r,i,s,o)}function DBt(e,t){return LO(eR(e,t.angle),t)?e.set(0,0,0,0):dg(e,t,!0)}var $Bt={type:"path",tag:"path",nested:!1,attr:OBt,bound:DBt,draw:xte(LO),pick:Ste(LO),isect:_te(LO)};function MBt(e,t){e("d",LS(null,t))}function LBt(e,t){var n,r;return dg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function hme(e,t){e.beginPath(),LS(e,t)}var FBt={type:"rect",tag:"path",nested:!1,attr:MBt,bound:LBt,draw:xte(hme),pick:Ste(hme),isect:KMe};function jBt(e,t){e("transform",ZMe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function BBt(e,t){var n,r;return dg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function rLe(e,t,n){var r,i,s,o;return t.stroke&&hx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function UBt(e,t,n){fd(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&rLe(e,r,i)&&(dx(e,r),e.stroke())}})}function zBt(e,t,n,r){return e.isPointInStroke?rLe(e,t,1)&&e.isPointInStroke(n,r):!1}var VBt={type:"rule",tag:"line",nested:!1,attr:jBt,bound:BBt,draw:UBt,pick:BF(zBt),isect:XMe},HBt=Cte("shape",Q9t),qBt=Cte("symbol",J9t,wte);const pme=U3e();var Pl={height:pp,measureWidth:Nte,estimateWidth:W$,width:W$,canvas:iLe};iLe(!0);function iLe(e){Pl.width=e&&B0?Nte:W$}function W$(e,t){return sLe(yy(e,t),pp(e))}function sLe(e,t){return~~(.8*e.length*t)}function Nte(e,t){return pp(e)<=0||!(t=yy(e,t))?0:oLe(t,VF(e))}function oLe(e,t){const n=`(${t}) ${e}`;let r=pme.get(n);return r===void 0&&(B0.font=t,r=B0.measureText(e).width,pme.set(n,r)),r}function pp(e){return e.fontSize!=null?+e.fontSize||0:11}function gy(e){return e.lineHeight!=null?e.lineHeight:pp(e)+2}function WBt(e){return Fe(e)?e.length>1?e:e[0]:e}function nR(e){return WBt(e.lineBreak&&e.text&&!Fe(e.text)?e.text.split(e.lineBreak):e.text)}function Pte(e){const t=nR(e);return(Fe(t)?t.length-1:0)*gy(e)}function yy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?YBt(e,n):n}function GBt(e){if(Pl.width===Nte){const t=VF(e);return n=>oLe(n,t)}else if(Pl.width===W$){const t=pp(e);return n=>sLe(n,t)}else return t=>Pl.width(e,t)}function YBt(e,t){var n=+e.limit,r=GBt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function rR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function VF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+pp(e)+"px "+rR(e,t)}function Ote(e){var t=e.baseline,n=pp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*gy(e):t==="line-bottom"?.29*n-.5*gy(e):0)}const KBt={left:"start",center:"middle",right:"end"},P2=new Ts;function HF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Xv,t+=r*Math.cos(i),n+=r*Math.sin(i)),P2.x1=t,P2.y1=n,P2}function XBt(e,t){var n=t.dx||0,r=(t.dy||0)+Ote(t),i=HF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",KBt[t.align]||"start"),a?(u=N1(s,o)+" "+Tte(a),(n||r)&&(u+=" "+N1(n,r))):u=N1(s+n,o+r),e("transform",u)}function Dte(e,t,n){var r=Pl.height(t),i=t.align,s=HF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Ote(t)-Math.round(.8*r),c=nR(t),f;if(Fe(c)?(r+=gy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Pl.width(t,h)),0)):f=Pl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*my,o,a);else if(n===2)return e.rotatedPoints(t.angle*my,o,a);return e}function QBt(e,t,n){fd(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=VF(r),e.textAlign=r.align||"left",s=HF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*my),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Ote(r),c=nR(r),dx(e,r),Fe(c))for(l=gy(r),u=0;u<c.length;++u)f=yy(r,c[u]),r.fill&&H$(e,r,i)&&e.fillText(f,o,a),r.stroke&&hx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=yy(r,c),r.fill&&H$(e,r,i)&&e.fillText(f,o,a),r.stroke&&hx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function JBt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=HF(t),a=o.x1,u=o.y1,l=Dte(P2,t,1),c=-t.angle*my,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function ZBt(e,t){const n=Dte(P2,e,2);return xw(t,n[0],n[1],n[2],n[3])||xw(t,n[0],n[1],n[4],n[5])||xw(t,n[4],n[5],n[6],n[7])||xw(t,n[2],n[3],n[6],n[7])}var e7t={type:"text",tag:"text",nested:!1,attr:XBt,bound:Dte,draw:QBt,pick:BF(JBt),isect:ZBt},t7t=Ate("trail",Z9t,hBt),ql={arc:cBt,area:pBt,group:ABt,image:NBt,line:PBt,path:$Bt,rect:FBt,rule:VBt,shape:HBt,symbol:qBt,text:e7t,trail:t7t};function PH(e,t,n){var r=ql[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var mme={mark:null};function aLe(e,t,n){var r=ql[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(mme.mark=e,l=mme),c=PH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(PH(s[a],i,n));return e.bounds=t}const n7t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function uLe(e,t){return JSON.stringify(e,n7t,t)}function lLe(e){const t=typeof e=="string"?JSON.parse(e):e;return cLe(t)}function cLe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&cLe(n[i]);return t&&aLe(e),e}class fLe{constructor(t){arguments.length?this.root=lLe(t):(this.root=gme({marktype:"group",name:"root",role:"frame"}),this.root.items=[new FF(this.root)])}toJSON(t){return uLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=gme(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function gme(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function f0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function $te(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ps(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=f0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function mc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function dLe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function qF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function r7t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=ql[i.marktype]).tip){for(o=qF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Mte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||_F(),this._tooltip=n||i7t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=f0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=r7t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function i7t(e,t,n,r){e.element().setAttribute("title",r||"")}class iR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new YMe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const s7t="keydown",o7t="keypress",a7t="keyup",hLe="dragenter",FO="dragleave",pLe="dragover",OH="pointerdown",u7t="pointerup",G$="pointermove",jO="pointerout",mLe="pointerover",DH="mousedown",l7t="mouseup",gLe="mousemove",Y$="mouseout",yLe="mouseover",K$="click",c7t="dblclick",f7t="wheel",vLe="mousewheel",X$="touchstart",Q$="touchmove",J$="touchend",d7t=[s7t,o7t,a7t,hLe,FO,pLe,OH,u7t,G$,jO,mLe,DH,l7t,gLe,Y$,yLe,K$,c7t,f7t,vLe,X$,Q$,J$],$H=G$,O2=Y$,MH=K$;class sR extends Mte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=d7t,this.pointermove=vme([G$,gLe],[mLe,yLe],[jO,Y$]),this.dragover=vme([pLe],[hLe],[FO]),this.pointerout=bme([jO,Y$]),this.dragleave=bme([FO])}initialize(t,n,r){return this._canvas=t&&$te(t,"canvas"),[K$,DH,OH,G$,jO,FO].forEach(i=>yme(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(vLe,t)}pointerdown(t){this._down=this._active,this.fire(OH,t)}mousedown(t){this._down=this._active,this.fire(DH,t)}click(t){this._down===this._active&&(this.fire(K$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(X$,t,!0)}touchmove(t){this.fire(Q$,t,!0)}touchend(t){this.fire(J$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===MH&&i&&i.href?this.handleHref(n,i,i.href):(t===$H||t===O2)&&this.handleTooltip(n,i,t!==O2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(yme(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=qF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return ql[t.marktype].pick.call(this,o,t,n,r,i,s)}}const h7t=e=>e===X$||e===Q$||e===J$?[X$,Q$,J$]:[e];function yme(e,t){h7t(t).forEach(n=>p7t(e,n))}function p7t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function $C(e,t,n){t.forEach(r=>e.fire(r,n))}function vme(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?$C(this,e,r):((!i||!i.exit)&&$C(this,n,r),this._active=s,$C(this,t,r),$C(this,e,r))}}function bme(e){return function(t){$C(this,e,t),this._active=null}}function m7t(){return typeof window<"u"&&window.devicePixelRatio||1}function g7t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?m7t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class Z$ extends iR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:j0(1,1,this._options.type),t&&this._canvas&&(mc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)g7t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=y7t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):v7t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=ql[n.marktype];n.clip&&mBt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const y7t=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function v7t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class bLe extends Mte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=lB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=lB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==O2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(MH,this._hrefHandler),i.removeEventListener($H,this._tooltipHandler),i.removeEventListener(O2,this._tooltipHandler)),this._svg=i=t&&$te(t,"svg"),i&&(i.addEventListener(MH,this._hrefHandler),i.addEventListener($H,this._tooltipHandler),i.addEventListener(O2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:lB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const lB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},_Le="aria-hidden",Lte="aria-label",Fte="role",jte="aria-roledescription",wLe="graphics-object",Bte="graphics-symbol",ELe=(e,t,n)=>({[Fte]:e,[jte]:t,[Lte]:n||void 0}),b7t=ld(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),_me={axis:{desc:"axis",caption:E7t},legend:{desc:"legend",caption:x7t},"title-text":{desc:"title",caption:e=>`Title text '${Eme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Eme(e)}'`}},wme={ariaRole:Fte,ariaRoleDescription:jte,description:Lte};function xLe(e,t){const n=t.aria===!1;if(e(_Le,n||void 0),n||t.description==null)for(const r in wme)e(wme[r],void 0);else{const r=t.mark.marktype;e(Lte,t.description),e(Fte,t.ariaRole||(r==="group"?wLe:Bte)),e(jte,t.ariaRoleDescription||`${r} mark`)}}function SLe(e){return e.aria===!1?{[_Le]:!0}:b7t[e.role]?null:_me[e.role]?w7t(e,_me[e.role]):_7t(e)}function _7t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return ELe(n?wLe:Bte,`${t} mark container`,e.description)}function w7t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return ELe(t.role||Bte,t.desc,n.description||r(n))}catch{return null}}function Eme(e){return dt(e.text).join(" ")}function E7t(e){const t=e.datum,n=e.orient,r=t.title?TLe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${cx(a)?"discrete":a} scale with ${FMe(o,s,e)}`}function x7t(e){const t=e.datum,n=t.title?TLe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return T7t(r)+(n?` titled '${n}'`:"")+` for ${S7t(s)} with ${FMe(u,a,e)}`}function TLe(e){try{return dt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function S7t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function T7t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const CLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),C7t=e=>CLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Ute(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${C7t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=CLe(u),a),toString:()=>e};return a}const ALe=e=>ILe(Ute(),e)+"";function ILe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):ILe(e,r)}return e.close()}const eM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},tM={blend:"mix-blend-mode"},kLe={fill:"none","stroke-miterlimit":10},FT=0,xme="http://www.w3.org/2000/xmlns/",Rs=fI.xmlns;class zte extends iR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ps(t,0,"svg",Rs),this._svg.setAttributeNS(xme,"xmlns",Rs),this._svg.setAttributeNS(xme,"xmlns:xlink",fI["xmlns:xlink"]),this._svg.setAttribute("version",fI.version),this._svg.setAttribute("class","marks"),mc(t,1),this._root=Ps(this._svg,FT,"g",Rs),d0(this._root,kLe),mc(this._svg,FT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(d0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ps(t,FT,"rect",Rs),d0(r,{width:this._width,height:this._height,fill:n}));const i=ALe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),mc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=ql[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Sme(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Sme(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=ql[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Tme(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return mc(c,0),n._svg;c.setAttribute("class",dLe(n));const f=SLe(n);for(const m in f)ja(c,m,f[m]);l||ja(c,"pointer-events",u),ja(c,"clip-path",n.clip?bte(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Tme(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&k7t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):fd(n,p),mc(c,h),c}_update(t,n,r){lm=n,ca=n.__values__,xLe(D2,r),t.attr(D2,r,this);const i=N7t[t.type];i&&i.call(this,t,n,r),lm&&this.style(lm,r)}style(t,n){if(n!=null){for(const r in eM){let i=r==="font"?rR(n):n[r];if(i===ca[r])continue;const s=eM[r];i==null?t.removeAttribute(s):(gte(i)&&(i=BMe(i,this._defs.gradient,RLe())),t.setAttribute(s,i+"")),ca[r]=i}for(const r in tM)BO(t,tM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ps(t,FT+1,"defs",Rs)),i=A7t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ps(t,FT+1,"defs",Rs)),i=I7t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):mc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Sme(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function A7t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ps(e,n++,"pattern",Rs);d0(o,{id:V$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ps(o,0,"rect",Rs),d0(o,{width:1,height:1,fill:`url(${RLe()}#${t.id})`}),e=Ps(e,n++,"radialGradient",Rs),d0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ps(e,n++,"linearGradient",Rs),d0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ps(e,r,"stop",Rs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return mc(e,r),n}function I7t(e,t,n){let r;return e=Ps(e,n,"clipPath",Rs),e.setAttribute("id",t.id),t.path?(r=Ps(e,0,"path",Rs),r.setAttribute("d",t.path)):(r=Ps(e,0,"rect",Rs),d0(r,{x:0,y:0,width:t.width,height:t.height})),mc(e,1),n+1}function k7t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;fd(n,o=>{i=e.mark(t,o,i,r),++s}),mc(t,1+s)}function Tme(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=f0(o,r,Rs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=f0(o,"path",Rs);s.appendChild(a),a.__data__=e;const u=f0(o,"g",Rs);s.appendChild(u),u.__data__=e;const l=f0(o,"path",Rs);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||R7t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function R7t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let lm=null,ca=null;const N7t={group(e,t,n){const r=lm=t.childNodes[2];ca=r.__values__,e.foreground(D2,n,this),ca=t.__values__,lm=t.childNodes[1],e.content(D2,n,this);const i=lm=t.childNodes[0];e.background(D2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ca.events&&(ja(r,"pointer-events",s),ja(i,"pointer-events",s),ca.events=s),n.strokeForeground&&n.stroke){const o=n.fill;ja(r,"display",null),this.style(i,n),ja(i,"stroke",null),o&&(n.fill=null),ca=r.__values__,this.style(r,n),o&&(n.fill=o),lm=null}else ja(r,"display","none")},image(e,t,n){n.smooth===!1?(BO(t,"image-rendering","optimizeSpeed"),BO(t,"image-rendering","pixelated")):BO(t,"image-rendering",null)},text(e,t,n){const r=nR(n);let i,s,o,a;Fe(r)?(s=r.map(u=>yy(n,u)),i=s.join(`
`),i!==ca.text&&(mc(t,0),o=t.ownerDocument,a=gy(n),s.forEach((u,l)=>{const c=f0(o,"tspan",Rs);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ca.text=i)):(s=yy(n,r),s!==ca.text&&(t.textContent=s,ca.text=s)),ja(t,"font-family",rR(n)),ja(t,"font-size",pp(n)+"px"),ja(t,"font-style",n.fontStyle),ja(t,"font-variant",n.fontVariant),ja(t,"font-weight",n.fontWeight)}};function D2(e,t,n){t!==ca[e]&&(n?P7t(lm,e,t,n):ja(lm,e,t),ca[e]=t)}function BO(e,t,n){n!==ca[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ca[t]=n)}function d0(e,t){for(const n in t)ja(e,n,t[n])}function ja(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function P7t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function RLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class NLe extends iR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Ute();n.open("svg",En({},fI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",kLe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=ql[n.marktype],i=r.tag,s=[xLe,r.attr];t.open("g",{class:dLe(n),"clip-path":n.clip?bte(this,n,n.group):null},SLe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=nR(a);if(Fe(l)){const c={x:0,dy:gy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(yy(a,l[f])).close()}else t.text(yy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),fd(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):fd(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&O7t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:V$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function O7t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=rR(t),e["font-size"]=pp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in eM){let a=t[o];const u=eM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(gte(a)&&(a=BMe(a,i.gradient,"")),e[u]=a)}for(const o in tM){const a=t[o];a!=null&&(s=s||[],s.push(`${tM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Sf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function D7t(e){Sf.svgMarkTypes=e.svgMarkTypes??["text"],Sf.svgOnTop=e.svgOnTop??!0,Sf.debug=e.debug??!1}class LH extends iR{constructor(t){super(t),this._svgRenderer=new zte(t),this._canvasRenderer=new Z$(t)}initialize(t,n,r,i,s){this._root_el=Ps(t,0,"div");const o=Ps(this._root_el,0,"div"),a=Ps(this._root_el,1,"div");return this._root_el.style.position="relative",Sf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Sf.svgOnTop?a:o,this._canvasEl=Sf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Sf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Sf.svgMarkTypes.includes(s));this._svgRenderer.render(t,Sf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Sf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class PLe extends sR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ps(Ps(t,0,"div"),Sf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const OLe="canvas",DLe="hybrid",$Le="png",MLe="svg",LLe="none",h0={Canvas:OLe,PNG:$Le,SVG:MLe,Hybrid:DLe,None:LLe},db={};db[OLe]=db[$Le]={renderer:Z$,headless:Z$,handler:sR};db[MLe]={renderer:zte,headless:NLe,handler:bLe};db[DLe]={renderer:LH,headless:LH,handler:PLe};db[LLe]={};function WF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(db[e]=t,this):db[e]}function FLe(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?jLe(e,i,n,r):s==="group"?BLe(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function jLe(e,t,n,r){if($7t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)BLe(i[a],t,n,r);else for(const u=ql[s].isect;a<o;++a){const l=i[a];ULe(l,t,u)&&r.push(l)}}return r}function $7t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function BLe(e,t,n,r){n&&n(e.mark)&&ULe(e,t,ql.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)jLe(i[u],t,n,r);t.translate(o,a)}return r}function ULe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const cB=new Ts;function zLe(e){const t=e.clip;if(xn(t))t(eR(cB.clear()));else if(t)cB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(cB)}const M7t=1e-9;function Vte(e,t,n){return e===t?!0:n==="path"?VLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=M7t:!e||!t||!pt(e)&&!pt(t)?e==t:L7t(e,t)}function VLe(e,t){return Vte(fx(e),fx(t))}function L7t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Vte(e[i],t[i],i))return!1;return typeof e==typeof t}function F7t(){GMe(),u9t()}const px="top",Df="left",Ff="right",vy="bottom",j7t="top-left",B7t="top-right",U7t="bottom-left",z7t="bottom-right",Hte="start",FH="middle",za="end",V7t="x",H7t="y",GF="group",qte="axis",Wte="title",q7t="frame",W7t="scope",Gte="legend",HLe="row-header",qLe="row-footer",WLe="row-title",GLe="column-header",YLe="column-footer",KLe="column-title",G7t="padding",Y7t="symbol",XLe="fit",QLe="fit-x",JLe="fit-y",K7t="pad",Yte="none",lP="all",jH="each",Kte="flush",p0="column",m0="row";function ZLe(e){Pe.call(this,null,e)}ut(ZLe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=ql[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=cP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===GF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(cP(l,o))),r.role){case qte:case Gte:case Wte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(cP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(cP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return zLe(r),t.modifies("bounds")}});function cP(e,t,n){return t(e.bounds.clear(),e,n)}const Cme=":vega_identifier:";function Xte(e){Pe.call(this,0,e)}Xte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ut(Xte,Pe,{transform(e,t){const n=X7t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function X7t(e){return e._signals[Cme]||(e._signals[Cme]=e.add(0))}function e6e(e){Pe.call(this,null,e)}ut(e6e,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Q7t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===GF?FF:LF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Q7t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function t6e(e){Pe.call(this,null,e)}const Ame={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!n6e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},n6e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Ime=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(n6e(i,s=e[n].bounds,t))return!0},J7t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Z7t=(e,t,n)=>{var r=e.range(),i=new Ts;return t===px||t===vy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},kme=e=>(e.forEach(t=>t.opacity=1),e),Rme=(e,t)=>e.reflow(t.modified()).modifies("opacity");ut(t6e,Pe,{transform(e,t){const n=Ame[e.method]||Ame.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(kme(i),t=Rme(t,e)),t;if(i=i.filter(J7t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=kme(i),t=Rme(t,e),s.length>=3&&Ime(s,r)){do s=n(s,r);while(s.length>=3&&Ime(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Z7t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function r6e(e){Pe.call(this,null,e)}ut(r6e,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ua=new Ts;function Sw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function eUt(e){var t=e.items[0].orient;return t===Df||t===Ff}function tUt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function nUt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=tUt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Pte(p),v=0,b=0,w,x;switch(ua.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case px:v=f||0,b=-c,x=Math.max(d,Math.min(h,-g.y1)),g.add(0,-x).add(l,0),p&&fP(e,p,x,m,y,0,-1,g);break;case Df:v=-c,b=f||0,x=Math.max(d,Math.min(h,-g.x1)),g.add(-x,0).add(0,l),p&&fP(e,p,x,m,y,1,-1,g);break;case Ff:v=n+c,b=f||0,x=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(x,l),p&&fP(e,p,x,m,y,1,1,g);break;case vy:v=f||0,b=r+c,x=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,x),p&&fP(e,p,x,m,0,0,1,g);break;default:v=i.x,b=i.y}return dg(g.translate(v,b),i),Sw(i,"x",v+o)|Sw(i,"y",b+o)&&(i.bounds=ua,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function fP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Nme=(e,t)=>Math.floor(Math.min(e,t)),Pme=(e,t)=>Math.ceil(Math.max(e,t));function rUt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===GF)switch(i.role){case qte:case Gte:case Wte:break;case HLe:o.rowheaders.push(...s);break;case qLe:o.rowfooters.push(...s);break;case GLe:o.colheaders.push(...s);break;case YLe:o.colfooters.push(...s);break;case WLe:o.rowtitle=s[0];break;case KLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function iUt(e){return new Ts().set(0,0,e.width||0,e.height||0)}function sUt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ei(e,t,n){const r=pt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Ome(e){return e<0?Math.ceil(-e):0}function i6e(e,t,n){var r=!n.nodirty,i=n.bounds===Kte?iUt:sUt,s=ua.set(0,0,0,0),o=Ei(n.align,p0),a=Ei(n.align,m0),u=Ei(n.padding,p0),l=Ei(n.padding,m0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),x=Array(d),C,E,S,A,k,R,D,P,O,L,j;for(E=0;E<c;++E)p[E]=0;for(E=0;E<f;++E)y[E]=0;for(E=0;E<d;++E)R=t[E],k=x[E]=i(R),R.x=R.x||0,b[E]=0,R.y=R.y||0,w[E]=0,S=E%c,A=~~(E/c),m=Math.max(m,D=Math.ceil(k.x2)),v=Math.max(v,P=Math.ceil(k.y2)),p[S]=Math.max(p[S],D),y[A]=Math.max(y[A],P),h[E]=u+Ome(k.x1),g[E]=l+Ome(k.y1),r&&e.dirty(t[E]);for(E=0;E<d;++E)E%c===0&&(h[E]=0),E<c&&(g[E]=0);if(o===jH)for(S=1;S<c;++S){for(j=0,E=S;E<d;E+=c)j<h[E]&&(j=h[E]);for(E=S;E<d;E+=c)h[E]=j+p[S-1]}else if(o===lP){for(j=0,E=0;E<d;++E)E%c&&j<h[E]&&(j=h[E]);for(E=0;E<d;++E)E%c&&(h[E]=j+m)}else for(o=!1,S=1;S<c;++S)for(E=S;E<d;E+=c)h[E]+=p[S-1];if(a===jH)for(A=1;A<f;++A){for(j=0,E=A*c,C=E+c;E<C;++E)j<g[E]&&(j=g[E]);for(E=A*c;E<C;++E)g[E]=j+y[A-1]}else if(a===lP){for(j=0,E=c;E<d;++E)j<g[E]&&(j=g[E]);for(E=c;E<d;++E)g[E]=j+v}else for(a=!1,A=1;A<f;++A)for(E=A*c,C=E+c;E<C;++E)g[E]+=y[A-1];for(O=0,E=0;E<d;++E)O=h[E]+(E%c?O:0),b[E]+=O-t[E].x;for(S=0;S<c;++S)for(L=0,E=S;E<d;E+=c)L+=g[E],w[E]+=L-t[E].y;if(o&&Ei(n.center,p0)&&f>1)for(E=0;E<d;++E)k=o===lP?m:p[E%c],O=k-x[E].x2-t[E].x-b[E],O>0&&(b[E]+=O/2);if(a&&Ei(n.center,m0)&&c!==1)for(E=0;E<d;++E)k=a===lP?v:y[~~(E/c)],L=k-x[E].y2-t[E].y-w[E],L>0&&(w[E]+=L/2);for(E=0;E<d;++E)s.union(x[E].translate(b[E],w[E]));switch(O=Ei(n.anchor,V7t),L=Ei(n.anchor,H7t),Ei(n.anchor,p0)){case za:O-=s.width();break;case FH:O-=s.width()/2}switch(Ei(n.anchor,m0)){case za:L-=s.height();break;case FH:L-=s.height()/2}for(O=Math.round(O),L=Math.round(L),s.clear(),E=0;E<d;++E)t[E].mark.bounds.clear();for(E=0;E<d;++E)R=t[E],R.x+=b[E]+=O,R.y+=w[E]+=L,s.union(R.mark.bounds.union(R.bounds.translate(b[E],w[E]))),r&&e.dirty(R);return s}function oUt(e,t,n){var r=rUt(t),i=r.marks,s=n.bounds===Kte?aUt:uUt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=i6e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Ei(n.headerBand,m0,null),c=dP(e,r.rowheaders,i,a,u,-Ei(o,"rowHeader"),Nme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Ei(n.headerBand,p0,null),f=dP(e,r.colheaders,i,a,a,-Ei(o,"columnHeader"),Nme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Ei(n.footerBand,m0,null),d=dP(e,r.rowfooters,i,a,u,Ei(o,"rowFooter"),Pme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Ei(n.footerBand,p0,null),h=dP(e,r.colfooters,i,a,a,Ei(o,"columnFooter"),Pme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Ei(n.titleAnchor,m0),g=Ei(o,"rowTitle"),g=p===za?d+g:c-g,m=Ei(n.titleBand,m0,.5),Dme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Ei(n.titleAnchor,p0),g=Ei(o,"columnTitle"),g=p===za?h+g:f-g,m=Ei(n.titleBand,p0,.5),Dme(e,r.coltitle,g,1,y,m))}function aUt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function uUt(e,t){return e.bounds[t]}function dP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,x,C,E,S,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(C=t[v],x=C.mark.bounds,b=y;b>=0&&(E=n[b])==null;b-=d);a?(S=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),A=m):(S=m,A=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),x.union(C.bounds.translate(S-(C.x||0),A-(C.y||0))),C.x=S,C.y=A,e.dirty(C),g=o(g,x[l])}return g}function Dme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function lUt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function cUt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function fUt(e,t,n,r,i,s,o){const a=lUt(n,t),u=cUt(e,a("offset",0)),l=a("anchor",Hte),c=l===za?1:l===FH?.5:0,f={align:jH,bounds:a("bounds",Kte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Df:f.anchor={x:Math.floor(r.x1)-u,column:za,y:c*(o||r.height()+2*r.y1),row:l};break;case Ff:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case px:f.anchor={y:Math.floor(i.y1)-u,row:za,x:c*(s||i.width()+2*i.x1),column:l};break;case vy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case j7t:f.anchor={x:u,y:u};break;case B7t:f.anchor={x:s-u,y:u,column:za};break;case U7t:f.anchor={x:u,y:o-u,row:za};break;case z7t:f.anchor={x:s-u,y:o-u,column:za,row:za};break}return f}function dUt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),pUt(e,n,n.items[0].items[0]),s=hUt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Y7t&&mUt(n.items[0].items[0].items[0].items),i!==Yte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,dg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function hUt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function pUt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&jT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Df:i+=Math.ceil(o.bounds.width())+u;break;case Ff:case vy:break;default:s+=o.bounds.height()+u}switch((i||s)&&jT(e,n,i,s),o.orient){case Df:c+=O_(t,n,o,a,1,1);break;case Ff:l+=O_(t,n,o,za,0,0)+u,c+=O_(t,n,o,a,1,1);break;case vy:l+=O_(t,n,o,a,0,0),c+=O_(t,n,o,za,-1,0,1)+u;break;default:l+=O_(t,n,o,a,0,0)}(l||c)&&jT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(jT(e,n,-l,0),jT(e,o,-l,0))}}function O_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Pte(n);return Math.round(r===Hte?f:r===za?d-h:.5*(c-h))}function jT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function mUt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function gUt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Df||a===Ff?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==GF?a===Df?(p=i.y2,h=i.y1):a===Ff?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Df&&(p=r,h=0),b=u===Hte?p:u===za?h:(p+h)/2,d&&d.text){switch(a){case px:case vy:v=f.bounds.height()+c;break;case Df:y=f.bounds.width()+c;break;case Ff:y=-f.bounds.width()-c;break}ua.clear().union(d.bounds),ua.translate(y-(d.x||0),v-(d.y||0)),Sw(d,"x",y)|Sw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ua),d.mark.bounds.clear().union(ua),e.dirty(d)),ua.clear().union(d.bounds)}else ua.clear();switch(ua.union(f.bounds),a){case px:m=b,g=i.y1-ua.height()-l;break;case Df:m=i.x1-ua.width()-l,g=b;break;case Ff:m=i.x2+ua.width()+l,g=b;break;case vy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return Sw(s,"x",m)|Sw(s,"y",g)&&(ua.translate(m,g),e.dirty(s),s.bounds.clear().union(ua),t.bounds.clear().union(ua),e.dirty(s)),s.bounds}function s6e(e){Pe.call(this,null,e)}ut(s6e,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&oUt(n,r,e.layout),vUt(n,r,e)}),yUt(e.mark.group)?t.reflow():t}});function yUt(e){return e&&e.mark.role!=="legend-entry"}function vUt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case qte:h=eUt(f)?a:u,h.union(nUt(e,f,i,s));break;case Wte:c=f;break;case Gte:l.push(dUt(e,f));break;case q7t:case W7t:case HLe:case qLe:case WLe:case GLe:case YLe:case KLe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Ff,d!==Yte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];i6e(e,v,fUt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===XLe||n.autosize.type===QLe||n.autosize.type===JLe))switch(y.orient){case Df:case Ff:o.add(v.x1,0).add(v.x2,0);break;case px:case vy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(gUt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),bUt(e,t,o,n)}function bUt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===G7t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Yte?(l=0,f=0,u=o,c=a):s===XLe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===QLe?(u=Math.max(0,o-l-d),a=c+f+h):s===JLe?(o=u+l+d,c=Math.max(0,a-f-h)):s===K7t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const _Ut=Object.freeze(Object.defineProperty({__proto__:null,bound:ZLe,identifier:Xte,mark:e6e,overlap:t6e,render:r6e,viewlayout:s6e},Symbol.toStringTag,{value:"Module"}));function o6e(e){Pe.call(this,null,e)}ut(o6e,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=pte(s,o,e.minstep),u=e.format||OMe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?PMe(s,e.values,a):mte(s,a);return i&&(r.rem=i),i=l.map((c,f)=>wr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(wr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function a6e(e){Pe.call(this,null,e)}function wUt(){return wr({})}function EUt(e){const t=PS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ut(a6e,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||wUt,s=e.key||Mt,o=this.value;return Fe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=EUt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function u6e(e){Pe.call(this,null,e)}ut(u6e,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Fe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Dg,u=i.enter||Dg,l=i.exit||Dg,c=(s&&!o?i[s]:a)||Dg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Dg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Dg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Dg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function l6e(e){Pe.call(this,[],e)}ut(l6e,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||PO,o=e.scale,a=+e.limit,u=pte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===PO,c=e.format||LMe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||MMe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===PO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,xn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ia(m=p||8),i=i.map((y,v)=>wr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(wr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Kjt?(d=o.domain(),h=kMe(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=o9t(o),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const xUt=e=>e.source.x,SUt=e=>e.source.y,TUt=e=>e.target.x,CUt=e=>e.target.y;function Qte(e){Pe.call(this,{},e)}Qte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ut(Qte,Pe,{transform(e,t){var n=e.sourceX||xUt,r=e.sourceY||SUt,i=e.targetX||TUt,s=e.targetY||CUt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=$me.get(u+"-"+a)||$me.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const c6e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,AUt=(e,t,n,r)=>c6e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),f6e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},IUt=(e,t,n,r)=>f6e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),d6e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},kUt=(e,t,n,r)=>d6e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),RUt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,NUt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,PUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},OUt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},DUt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},$Ut=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},$me=PS({line:c6e,"line-radial":AUt,arc:f6e,"arc-radial":IUt,curve:d6e,"curve-radial":kUt,"orthogonal-horizontal":RUt,"orthogonal-vertical":NUt,"orthogonal-radial":PUt,"diagonal-horizontal":OUt,"diagonal-vertical":DUt,"diagonal-radial":$Ut});function Jte(e){Pe.call(this,null,e)}Jte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ut(Jte,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||kS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/vX(l),h=Lu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const MUt=5;function LUt(e){const t=e.type;return!e.bins&&(t===ux||t===Gk||t===Yk)}function h6e(e){return fte(e)&&e!==Rh}const FUt=ld(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function p6e(e){Pe.call(this,null,e),this.modified(!0)}ut(p6e,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=jUt(e);(!r||i!==r.type)&&(this.value=r=mr(i)());for(i in e)if(!FUt[i]){if(i==="padding"&&h6e(r.type))continue;xn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return qUt(r,e,HUt(r,e,UUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function jUt(e){var t=e.type,n="",r;return t===Rh?Rh+"-"+ux:(BUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Rh+"-":r===3?MS+"-":""),(n+t||ux).toLowerCase())}function BUt(e){const t=e.type;return fte(t)&&t!==cb&&t!==fb&&(e.scheme||e.range&&e.range.length&&e.range.every(ht))}function UUt(e,t,n){const r=zUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&LUt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return h6e(s)&&t.padding&&i[0]!==Qn(i)&&(i=VUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(m6e(s,i,n)),s===ate&&e.unknown(t.domainImplicit?Kz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&pte(e,t.nice)||null),i.length}function zUt(e,t,n){return t?(e.domain(m6e(e.type,t,n)),t.length):-1}function VUt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Ym?eee(t,null,a):e===Yk?j$(t,null,a,.5):e===Gk?j$(t,null,a,i||1):e===PF?tee(t,null,a,s||1):ZZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function m6e(e,t,n){if(SMe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function HUt(e,t,n){let r=t.bins;if(r&&!Fe(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Lu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===ute&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function qUt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=WUt(r,t,n);else if(t.scheme&&(s=GUt(r,t,n),xn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&TMe(r))return e.interpolator($F(BH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(dte(t.interpolate,t.interpolateGamma)):xn(e.round)?e.round(i):xn(e.rangeRound)&&e.interpolate(i?uk:sg),s&&e.range(BH(s,t.reverse))}function WUt(e,t,n){e!==vMe&&e!==TH&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===TH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ote(n,i,r)]}function GUt(e,t,n){var r=t.schemeExtent,i,s;return Fe(t.scheme)?s=$F(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=hte(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===DF?n+1:e===ute?n-1:e===lx||e===OF?+t.schemeCount||MUt:n,TMe(e)?Mme(s,r,t.reverse):xn(s)?IMe(Mme(s,r),n):e===ate?s:s.slice(0,n)}function Mme(e,t,n){return xn(e)&&(t||n)?AMe(e,BH(t||[0,1],n)):e}function BH(e,t){return t?e.slice().reverse():e}function g6e(e){Pe.call(this,null,e)}ut(g6e,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Yb(e.sort)),this.modified(n),t}});const Lme="zero",y6e="center",v6e="normalize",b6e=["y0","y1"];function Zte(e){Pe.call(this,null,e)}Zte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Lme,values:[Lme,y6e,v6e]},{name:"as",type:"string",array:!0,length:2,default:b6e}]};ut(Zte,Pe,{transform(e,t){var n=e.as||b6e,r=n[0],i=n[1],s=Yb(e.sort),o=e.field||kS,a=e.offset===y6e?YUt:e.offset===v6e?KUt:XUt,u,l,c,f;for(u=QUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function YUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function KUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function XUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function QUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const JUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:o6e,datajoin:a6e,encode:u6e,legendentries:l6e,linkpath:Qte,pie:Jte,scale:p6e,sortitems:g6e,stack:Zte},Symbol.toStringTag,{value:"Module"}));var ZUt=Math.abs,UH=Math.cos,nM=Math.sin,ezt=1e-6,_6e=Math.PI,zH=_6e/2,Fme=tzt(2);function jme(e){return e>1?zH:e<-1?-zH:Math.asin(e)}function tzt(e){return e>0?Math.sqrt(e):0}function nzt(e,t){var n=e*nM(t),r=30,i;do t-=i=(t+nM(t)-n)/(1+UH(t));while(ZUt(i)>ezt&&--r>0);return t/2}function rzt(e,t,n){function r(i,s){return[e*i*UH(s=nzt(n,s)),t*nM(s)]}return r.invert=function(i,s){return s=jme(s/t),[i/(e*UH(s)),jme((2*s+nM(2*s))/n)]},r}var izt=rzt(Fme/zH,Fme,_6e);function szt(){return lp(izt).scale(169.529)}const ozt=P2e(),VH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function azt(e,t){return function n(){const r=t();return r.type=e,r.path=P2e().projection(r),r.copy=r.copy||function(){const i=n();return VH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},EMe(r)}}function ene(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(rM[e]=azt(e,t),this):rM[e]||null}function w6e(e){return e&&e.path||ozt}const rM={albers:D2e,albersusa:nbt,azimuthalequalarea:rbt,azimuthalequidistant:ibt,conicconformal:abt,conicequalarea:O3,conicequidistant:cbt,equalEarth:dbt,equirectangular:ubt,gnomonic:hbt,identity:pbt,mercator:sbt,mollweide:szt,naturalEarth1:mbt,orthographic:gbt,stereographic:ybt,transversemercator:vbt};for(const e in rM)ene(e,rM[e]);function uzt(){}const Pp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function E6e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),lzt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(czt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Pp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Pp[m|g<<1].forEach(b);for(Pp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Pp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Pp[m|g<<1|y<<2|v<<3].forEach(b);Pp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Pp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Pp[y<<2|v<<3].forEach(b);Pp[y<<3].forEach(b);function b(w){var x=[w[0][0]+h,w[0][1]+p],C=[w[1][0]+h,w[1][1]+p],E=o(x),S=o(C),A,k;(A=d[E])?(k=f[S])?(delete d[A.end],delete f[k.start],A===k?(A.ring.push(C),c(A.ring)):f[A.start]=d[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete d[A.end],A.ring.push(C),d[A.end=S]=A):(A=f[S])?(k=d[E])?(delete f[A.start],delete d[k.end],A===k?(A.ring.push(C),c(A.ring)):f[k.start]=d[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(x),f[A.start=E]=A):f[E]=d[S]={start:E,end:S,ring:[x,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:uzt,r):n===a},r}function lzt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function czt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=fzt(e,t[n]))return i;return 0}function fzt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(dzt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function dzt(e,t,n){var r;return hzt(e,t,n)&&pzt(e[r=+(e[0]===t[0])],n[r],t[r])}function hzt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function pzt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function x6e(e,t,n){return function(r){var i=Kh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?K0(s,o,e):a/(e+1);return Lu(s+u,o,u)}}function tne(e){Pe.call(this,null,e)}tne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ut(tne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Aa,s=E6e().smooth(e.smooth!==!1),o=e.thresholds||mzt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Fe(o)?o:o(c.values));gzt(f,c,l,e),f.forEach(d=>{u.push(xF(l,wr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function mzt(e,t,n){const r=x6e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ic(t(i).values)))}function gzt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(xn(i)&&(i=i(n,r)),xn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(S6e(t,o,a,u,l))}function S6e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Bme(e,t,n){const r=e>=0?e:_ee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function fB(e){return xn(e)?e:Ia(+e)}function T6e(){var e=u=>u[0],t=u=>u[1],n=kS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Bme(r[0],u,e)>>o,f=Bme(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const x=d+(+e(w)>>o),C=h+(+t(w)>>o);x>=0&&x<p&&C>=0&&C<m&&(g[x+C*p]+=+n(w))}),c>0&&f>0?(D_(p,m,g,y,c),$_(p,m,y,g,f),D_(p,m,g,y,c),$_(p,m,y,g,f),D_(p,m,g,y,c),$_(p,m,y,g,f)):c>0?(D_(p,m,g,y,c),D_(p,m,y,g,c),D_(p,m,g,y,c),v=y):f>0&&($_(p,m,g,y,f),$_(p,m,y,g,f),$_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/vX(v);for(let w=0,x=p*m;w<x;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=fB(u),a):e},a.y=function(u){return arguments.length?(t=fB(u),a):t},a.weight=function(u){return arguments.length?(n=fB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=dt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function D_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function $_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function nne(e){Pe.call(this,null,e)}nne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const yzt=["x","y","weight","size","cellSize","bandwidth"];function C6e(e,t){return yzt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ut(nne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=vzt(r,e.groupby),s=(e.groupby||[]).map(Zi),o=C6e(T6e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>wr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function vzt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function rne(e){Pe.call(this,null,e)}rne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ut(rne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=E6e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||x6e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=C6e(T6e(),e)(i,!0),u=S6e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Fe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(wr),n}});const HH="Feature",ine="FeatureCollection",bzt="MultiPoint";function sne(e){Pe.call(this,null,e)}sne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ut(sne,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Aa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(_a(a))||s&&t.modified(_a(s))||o&&t.modified(_a(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:HH,geometry:{type:bzt,coordinates:r}})),this.value={type:ine,features:n}}});function one(e){Pe.call(this,null,e)}one.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ut(one,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Aa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=w6e(e.projection),n.materialize().reflow()):o=i===Aa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=_zt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function _zt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ane(e){Pe.call(this,null,e)}ane.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ut(ane,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function une(e){Pe.call(this,null,e)}une.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ut(une,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=wzt(w6e(e.projection),e.field||jc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function wzt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function lne(e){Pe.call(this,[],e),this.generator=$1t()}lne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ut(lne,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)xn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(C$e(n[0],i)):t.add.push(wr(i)),n[0]=i,t}});function cne(e){Pe.call(this,null,e)}cne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ut(cne,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Aa,s=xzt(e.opacity,e),o=Ezt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Ic(n.map(l=>Ic(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=En({},l,u);r||(f.$max=Ic(c.values||[])),l[a]=Szt(c,f,o.dep?o:Ia(o(f)),s.dep?s:Ia(s(f)))}),t.reflow(!0).modifies(a)}});function Ezt(e,t){let n;return xn(e)?(n=r=>X0(e(r,t)),n.dep=A6e(e)):n=Ia(X0(e||"#888")),n}function xzt(e,t){let n;return xn(e)?(n=r=>e(r,t),n.dep=A6e(e)):e?n=Ia(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function A6e(e){if(!xn(e))return!1;const t=ld(_a(e));return t.$x||t.$y||t.$value||t.$max}function Szt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:n0,d=j0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function I6e(e){Pe.call(this,null,e),this.modified(!0)}ut(I6e,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Czt(e.type),VH.forEach(r=>{e[r]!=null&&Ume(n,r,e[r])})):VH.forEach(r=>{e.modified(r)&&Ume(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Tzt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Tzt(e,t){const n=Azt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Czt(e){const t=ene((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function Ume(e,t,n){xn(e[t])&&e[t](n)}function Azt(e){return e=dt(e),e.length===1?e[0]:{type:ine,features:e.reduce((t,n)=>t.concat(Izt(n)),[])}}function Izt(e){return e.type===ine?e.features:dt(e).filter(t=>t!=null).map(t=>t.type===HH?t:{type:HH,geometry:t})}const kzt=Object.freeze(Object.defineProperty({__proto__:null,contour:rne,geojson:sne,geopath:one,geopoint:ane,geoshape:une,graticule:lne,heatmap:cne,isocontour:tne,kde2d:nne,projection:I6e},Symbol.toStringTag,{value:"Module"})),zme={center:Tvt,collide:Hvt,nbody:t1t,link:Wvt,x:n1t,y:r1t},MC="forces",qH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Rzt=["static","iterations"],k6e=["x","y","vx","vy"];function fne(e){Pe.call(this,null,e)}fne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:k6e}]};ut(fne,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(qH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&R6e(n,e,0,t)):(this.value=n=Pzt(t.source,e),n.on("tick",Nzt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Rzt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==MC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(k6e)}});function Nzt(e,t){return()=>e.touch(t).run()}function Pzt(e,t){const n=e1t(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),R6e(n,t,!0).on("end",()=>s=!0)}function R6e(e,t,n,r){var i=dt(t.forces),s,o,a,u;for(s=0,o=qH.length;s<o;++s)a=qH[s],a!==MC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=MC+s,a=n||t.modified(MC,s)?Dzt(i[s]):r&&Ozt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(MC+s,null);return e.numForces=i.length,e}function Ozt(e,t){var n,r;for(n in e)if(xn(r=e[n])&&t.modified(_a(r)))return 1;return 0}function Dzt(e){var t,n;Ft(zme,e.force)||Me("Unrecognized force: "+e.force),t=zme[e.force]();for(n in e)xn(t[n])&&$zt(t[n],e[n],e);return t}function $zt(e,t,n){e(xn(t)?r=>t(r,n):t)}const Mzt=Object.freeze(Object.defineProperty({__proto__:null,force:fne},Symbol.toStringTag,{value:"Module"}));function WH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function dne(e){Pe.call(this,null,e)}dne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Lzt=e=>e.values;ut(dne,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&EF(o.data)&&i.rem.push(o.data)}),this.value=s=qX({values:dt(e.keys).reduce((o,a)=>(o.key(a),o),Fzt()).entries(i.source)},Lzt),n&&s.each(o=>{o.children&&(o=wr(o.data),i.add.push(o),i.source.push(o))}),WH(s,Mt,Mt)),i.source.root=s,i}});function Fzt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function hg(e){Pe.call(this,null,e)}const jzt=(e,t)=>e.parent===t.parent?1:2;ut(hg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Yb(e.sort,o=>o.data)),Bzt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?jzt:kS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>Uzt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Bzt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function Uzt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const GH=["x","y","r","depth","children"];function hne(e){hg.call(this,e)}hne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GH.length,default:GH}]};ut(hne,hg,{layout:r_t,params:["radius","size","padding"],fields:GH});const YH=["x0","y0","x1","y1","depth","children"];function pne(e){hg.call(this,e)}pne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:YH.length,default:YH}]};ut(pne,hg,{layout:i_t,params:["size","round","padding"],fields:YH});function mne(e){Pe.call(this,null,e)}mne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ut(mne,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?WH(dfe().id(e.key).parentId(e.parentKey)(i.source),e.key,Bc):WH(dfe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Vme={tidy:p_t,cluster:Cbt},KH=["x","y","depth","children"];function gne(e){hg.call(this,e)}gne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:KH.length,default:KH}]};ut(gne,hg,{layout(e){const t=e||"tidy";if(Ft(Vme,t))return Vme[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:KH});function yne(e){Pe.call(this,[],e)}yne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ut(yne,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(wr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Hme={binary:g_t,dice:dk,slice:W6,slicedice:y_t,squarify:J2e,resquarify:v_t},XH=["x0","y0","x1","y1","depth","children"];function vne(e){hg.call(this,e)}vne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:XH.length,default:XH}]};ut(vne,hg,{layout(){const e=m_t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Hme,t)?e.tile(Hme[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:XH});const zzt=Object.freeze(Object.defineProperty({__proto__:null,nest:dne,pack:hne,partition:pne,stratify:mne,tree:gne,treelinks:yne,treemap:vne},Symbol.toStringTag,{value:"Module"})),dB=4278190080;function Vzt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Hzt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=j0(s,o).getContext("2d"),l=j0(s,o).getContext("2d"),c=a&&j0(s,o).getContext("2d");n.forEach(S=>UO(u,S,!1)),UO(l,t,!1),a&&UO(c,t,!0);const f=hB(u,s,o),d=hB(l,s,o),h=a&&hB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,x,C,E;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,x=f[w]&dB,E=d[w]&dB,C=a&&h[w]&dB,(x||C||E)&&(v=e(g),b=e(y),!i&&(x||E)&&p.set(v,b),a&&(x||C)&&m.set(v,b));return[p,m]}function hB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function UO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>UO(e,s.items,n))}):ql[r].draw(e,{items:n?t.map(qzt):t})}function qzt(e){const t=xF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Op=5,La=31,dI=32,Hg=new Uint32Array(dI+1),kf=new Uint32Array(dI+1);kf[0]=0;Hg[0]=~kf[0];for(let e=1;e<=dI;++e)kf[e]=kf[e-1]<<1|1,Hg[e]=~kf[e];function Wzt(e,t){const n=new Uint32Array(~~((e*t+dI)/dI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Op]&1<<(a&La)},set:(s,o)=>{const a=o*e+s;r(a>>>Op,1<<(a&La))},clear:(s,o)=>{const a=o*e+s;i(a>>>Op,~(1<<(a&La)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Op,h=f>>>Op,d===h){if(n[d]&Hg[c&La]&kf[(f&La)+1])return!0}else{if(n[d]&Hg[c&La]||n[h]&kf[(f&La)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Op,d=c>>>Op,f===d)r(f,Hg[l&La]&kf[(c&La)+1]);else for(r(f,Hg[l&La]),r(d,kf[(c&La)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Op,d=c>>>Op,f===d)i(f,kf[l&La]|Hg[(c&La)+1]);else for(i(f,kf[l&La]),i(d,Hg[(c&La)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function Gzt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>Wzt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function Yzt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Pl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function iM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function g0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function Kzt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!iM(p,m,d,h,i,s)&&!g0(e,p,m,h,d,g,o,a)&&!g0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,g0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Pl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,x,C,E,S,A,k,R,D,P,O,L,j,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,x=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>x&&(U=w,w=x,x=U),k=e(v),D=e(b),R=~~((k+D)/2),P=e(w),L=e(x),O=~~((P+L)/2),S=R;S>=k;--S)for(A=O;A>=P;--A)B=u(S,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(S=R;S<=D;++S)for(A=O;A<=L;++A)B=u(S,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(j=Math.abs(b-v+x-w),C=(v+b)/2,E=(w+x)/2,j>=y&&!iM(C,E,h,d,i,s)&&!g0(e,C,E,d,h,d,o,null)&&(y=j,l.x=C,l.y=E,g=!0))}return m||g?(C=h/2,E=d/2,o.setRange(e(l.x-C),e(l.y-E),e(l.x+C),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}const Xzt=[-1,-1,1,1],Qzt=[-1,1,-1,1];function Jzt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Pl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,x,C,E,S,A,k,R,D,P,O;for(let L=0;L<f;++L){for(b=c[L].x,x=c[L].y,w=c[L].x2===void 0?b:c[L].x2,C=c[L].y2===void 0?x:c[L].y2,p.push([e((b+w)/2),e((x+C)/2)]);p.length;)if([A,k]=p.pop(),!(o.get(A,k)||a.get(A,k)||u.get(A,k))){u.set(A,k);for(let j=0;j<4;++j)E=A+Xzt[j],S=k+Qzt[j],u.outOfBounds(E,S,E,S)||p.push([E,S]);if(E=e.invert(A),S=e.invert(k),R=m,D=s,!iM(E,S,h,d,i,s)&&!g0(e,E,S,d,h,R,o,a)&&!g0(e,E,S,d,h,d,o,null)){for(;D-R>=1;)P=(R+D)/2,g0(e,E,S,d,h,P,o,a)?D=P:R=P;R>m&&(l.x=E,l.y=S,m=R,g=!0)}}!g&&!n&&(O=Math.abs(w-b+C-x),E=(b+w)/2,S=(x+C)/2,O>=v&&!iM(E,S,h,d,i,s)&&!g0(e,E,S,d,h,d,o,null)&&(v=O,l.x=E,l.y=S,y=!0))}return g||y?(E=h/2,S=d/2,o.setRange(e(l.x-E),e(l.y-S),e(l.x+E),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const Zzt=["right","center","left"],eVt=["bottom","middle","top"];function tVt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,x,C,E,S,A,k,R;for(let D=0;D<u;++D){if(h=(n[D]&3)-1,p=(n[D]>>>2&3)-1,m=h===0&&p===0||r[D]<0,g=h&&p?Math.SQRT1_2:1,y=r[D]<0?-1:1,v=c[1+h]+r[D]*h*g,E=c[4+p]+y*f*p/2+r[D]*p*g,w=E-f/2,x=E+f/2,S=e(v),k=e(w),R=e(x),!d)if(qme(S,S,k,R,o,a,v,v,w,x,c,m))d=Pl.width(l.datum,l.datum.text);else continue;if(C=v+y*d*h/2,v=C-d/2,b=C+d/2,S=e(v),A=e(b),qme(S,A,k,R,o,a,v,b,w,x,c,m))return l.x=h?h*y<0?b:v:C,l.y=p?p*y<0?x:w:E,l.align=Zzt[h*y+1],l.baseline=eVt[p*y+1],o.setRange(S,k,A,R),!0}return!1}}function qme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const pB=0,mB=4,gB=8,yB=0,vB=1,bB=2,nVt={"top-left":pB+yB,top:pB+vB,"top-right":pB+bB,left:mB+yB,middle:mB+vB,right:mB+bB,"bottom-left":gB+yB,bottom:gB+vB,"bottom-right":gB+bB},rVt={naive:Yzt,"reduced-search":Kzt,floodfill:Jzt};function iVt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=sVt(r,f),h=oVt(i,f),p=aVt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=uVt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,x=-1;const C=e.map(k=>{const R=v?Pl.width(k,k.text):void 0;return w=Math.max(w,R),x=Math.max(x,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:R}});l=l===null||l===1/0?Math.max(w,x)+Math.max(...r):l;const E=Gzt(t[0],t[1],l);let S;if(!b){n&&C.sort((D,P)=>n(D.datum,P.datum));let k=!1;for(let D=0;D<h.length&&!k;++D)k=h[D]===5||d[D]<0;const R=(p&&o||g)&&e.map(D=>D.datum);S=s.length||R?Hzt(E,R||[],s,k,g):Vzt(E,o&&C)}const A=g?rVt[c](E,S,o,u):tVt(E,S,h,d);return C.forEach(k=>k.opacity=+A(k)),C}function sVt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function oVt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=nVt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function aVt(e){return e&&e.mark&&e.mark.marktype}function uVt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const QH=["x","y","opacity","align","baseline"],N6e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function bne(e){Pe.call(this,null,e)}bne.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:N6e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:QH.length,default:QH}]};ut(bne,Pe,{transform(e,t){function n(s){const o=e[s];return xn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||QH;return iVt(t.materialize(t.SOURCE).source||[],e.size,e.sort,dt(e.offset==null?1:e.offset),dt(e.anchor||N6e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const lVt=Object.freeze(Object.defineProperty({__proto__:null,label:bne},Symbol.toStringTag,{value:"Module"}));function P6e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function _ne(e){Pe.call(this,null,e)}_ne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ut(_ne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=P6e(r,e.groupby),s=(e.groupby||[]).map(Zi),o=s.length,a=e.as||[Zi(e.x),Zi(e.y)],u=[];i.forEach(l=>{H$e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(wr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const JH={constant:Pee,linear:Oee,log:B$e,exp:U$e,pow:z$e,quad:Dee,poly:V$e},cVt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function wne(e){Pe.call(this,null,e)}wne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(JH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ut(wne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=P6e(r,e.groupby),s=(e.groupby||[]).map(Zi),o=e.method||"linear",a=e.order==null?3:e.order,u=cVt(o,a),l=e.as||[Zi(e.x),Zi(e.y)],c=JH[o],f=[];let d=e.extent;Ft(JH,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(wr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Kh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(wr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):RF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const fVt=Object.freeze(Object.defineProperty({__proto__:null,loess:_ne,regression:wne},Symbol.toStringTag,{value:"Module"}));function Ene(e){Pe.call(this,null,e)}Ene.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const dVt=[-1e5,-1e5,1e5,1e5];ut(Ene,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:dVt;const s=this.value=OX.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!pVt(u)?hVt(u):null}return t.reflow(e.modified()).modifies(n)}});function hVt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function pVt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const mVt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Ene},Symbol.toStringTag,{value:"Module"}));var _B=Math.PI/180,LC=64,zO=2048;function gVt(){var e=[256,256],t,n,r,i,s,o,a,u=O6e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(j0()),m=EVt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,E)=>E.size-C.size);++v<y;){var x=w[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,yVt(p,x,w,v),x.hasText&&h(m,x,g)&&(b.push(x),g?bVt(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(LC<<5)/m,p.height=zO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),x=c()<.5?1:-1,C=-x,E,S,A;(E=w(C+=x))&&(S=~~E[0],A=~~E[1],!(Math.min(Math.abs(S),Math.abs(A))>=b));)if(m.x=y+S,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!vVt(m,p,e[0]))&&(!g||_Vt(m,g))){for(var k=m.sprite,R=m.width>>5,D=e[0]>>5,P=m.x-(R<<4),O=P&127,L=32-O,j=m.y1-m.y0,B=(m.y+m.y0)*D+(P>>5),U,H=0;H<j;H++){U=0;for(var $=0;$<=R;$++)p[B+$]|=U<<L|($<R?(U=k[H*R+$])>>>O:0);B+=D}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=gv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=gv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=gv(p),f):s},f.rotate=function(p){return arguments.length?(o=gv(p),f):o},f.text=function(p){return arguments.length?(t=gv(p),f):t},f.spiral=function(p){return arguments.length?(u=xVt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=gv(p),f):r},f.padding=function(p){return arguments.length?(a=gv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function yVt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(LC<<5)/s,zO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*_B),g=Math.cos(t.rotate*_B),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=LC<<5&&(o=0,a+=u,u=0),a+d>=zO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*_B),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(LC<<5)/s,zO/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var E=0,S=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),k=x[(a+p)*(LC<<5)+(o+h)<<2]?1<<31-h%32:0;C[A]|=k,E|=k}E?S=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+S,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function vVt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function bVt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function _Vt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function O6e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function wVt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function EVt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function gv(e){return typeof e=="function"?e:function(){return e}}var xVt={archimedean:O6e,rectangular:wVt};const D6e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],SVt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function xne(e){Pe.call(this,gVt(),e)}xne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:D6e}]};ut(xne,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return xn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||SVt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||D6e;let a=e.fontSize||14,u;if(xn(a)?u=e.fontSizeRange:a=Ia(a),u){const p=a,m=mr("sqrt")().domain(Kh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(zc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const TVt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:xne},Symbol.toStringTag,{value:"Module"})),CVt=e=>new Uint8Array(e),AVt=e=>new Uint16Array(e),$2=e=>new Uint32Array(e);function IVt(){let e=8,t=[],n=$2(0),r=hP(0,e),i=hP(0,e);return{data:()=>t,seen:()=>n=kVt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=hP(s,e,r),i=hP(s,e))}}}function kVt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function hP(e,t,n){const r=(t<257?CVt:t<65537?AVt:$2)(e);return n&&r.set(n),r}function Wme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Gme(){let e=$2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=$2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=RVt(h,d),c)p=t,m=e,t=Array(c+f),e=$2(c+f),NVt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[qpt(u,a[0],0,l),Y0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function RVt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Ypt(e,t)}function NVt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Sne(e){Pe.call(this,IVt(),e),this._indices=null,this._dims=null}Sne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ut(Sne,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Gme()),s.push(Wme(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,x,C,E;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,x=0,C=v.length;x<C;++x)w[v[x]._index]=1;for(x=0;x<h;++x)E=r[x],(!o[x]||e.modified("fields",x)||t.modified(E.fields))&&(y=E.fname,(m=p[y])||(s[y]=g=Gme(),p[y]=m=g.insert(E,t.source,0)),o[x]=Wme(g,x,i[x]).onAdd(m,u));for(x=0,C=a.data().length;x<C;++x)b[x]||(l[x]!==u[x]?f.push(x):w[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Tne(e){Pe.call(this,null,e)}Tne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ut(Tne,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const PVt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Sne,resolvefilter:Tne},Symbol.toStringTag,{value:"Module"})),OVt="RawCode",hb="Literal",DVt="Property",$Vt="Identifier",MVt="ArrayExpression",LVt="BinaryExpression",$6e="CallExpression",FVt="ConditionalExpression",jVt="LogicalExpression",BVt="MemberExpression",UVt="ObjectExpression",zVt="UnaryExpression";function bd(e){this.type=e}bd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=VVt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function VVt(e){switch(e.type){case MVt:return e.elements;case LVt:case jVt:return[e.left,e.right];case $6e:return[e.callee].concat(e.arguments);case FVt:return[e.test,e.consequent,e.alternate];case BVt:return[e.object,e.property];case UVt:return e.properties;case DVt:return[e.key,e.value];case zVt:return[e.argument];case $Vt:case hb:case OVt:default:return[]}}var mp,kt,$e,Ea,Dr,YF=1,oR=2,pb=3,Jy=4,KF=5,Qb=6,Cu=7,aR=8,HVt=9;mp={};mp[YF]="Boolean";mp[oR]="<end>";mp[pb]="Identifier";mp[Jy]="Keyword";mp[KF]="Null";mp[Qb]="Numeric";mp[Cu]="Punctuator";mp[aR]="String";mp[HVt]="RegularExpression";var qVt="ArrayExpression",WVt="BinaryExpression",GVt="CallExpression",YVt="ConditionalExpression",M6e="Identifier",KVt="Literal",XVt="LogicalExpression",QVt="MemberExpression",JVt="ObjectExpression",ZVt="Property",eHt="UnaryExpression",so="Unexpected token %0",tHt="Unexpected number",nHt="Unexpected string",rHt="Unexpected identifier",iHt="Unexpected reserved word",sHt="Unexpected end of input",ZH="Invalid regular expression",wB="Invalid regular expression: missing /",L6e="Octal literals are not allowed in strict mode.",oHt="Duplicate data property in object literal not allowed in strict mode",Oo="ILLEGAL",hI="Disabled.",aHt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),uHt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function XF(e,t){if(!e)throw new Error("ASSERT: "+t)}function qp(e){return e>=48&&e<=57}function Cne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function M2(e){return"01234567".indexOf(e)>=0}function lHt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function pI(e){return e===10||e===13||e===8232||e===8233}function uR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&aHt.test(String.fromCharCode(e))}function sM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&uHt.test(String.fromCharCode(e))}const cHt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function F6e(){for(;$e<Ea;){const e=kt.charCodeAt($e);if(lHt(e)||pI(e))++$e;else break}}function eq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<Ea&&Cne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):hr({},so,Oo);return String.fromCharCode(i)}function fHt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&hr({},so,Oo);$e<Ea&&(e=kt[$e++],!!Cne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&hr({},so,Oo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function j6e(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&hr({},so,Oo),++$e,e=eq("u"),(!e||e==="\\"||!uR(e.charCodeAt(0)))&&hr({},so,Oo),t=e);$e<Ea&&(e=kt.charCodeAt($e),!!sM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&hr({},so,Oo),++$e,e=eq("u"),(!e||e==="\\"||!sM(e.charCodeAt(0)))&&hr({},so,Oo),t+=e);return t}function dHt(){var e,t;for(e=$e++;$e<Ea;){if(t=kt.charCodeAt($e),t===92)return $e=e,j6e();if(sM(t))++$e;else break}return kt.slice(e,$e)}function hHt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?j6e():dHt(),t.length===1?n=pb:cHt.hasOwnProperty(t)?n=Jy:t==="null"?n=KF:t==="true"||t==="false"?n=YF:n=pb,{type:n,value:t,start:e,end:$e}}function EB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Cu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Cu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Cu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Cu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Cu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Cu,value:i,start:e,end:$e};if(i==="//"&&hr({},so,Oo),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Cu,value:r,start:e,end:$e};hr({},so,Oo)}function pHt(e){let t="";for(;$e<Ea&&Cne(kt[$e]);)t+=kt[$e++];return t.length===0&&hr({},so,Oo),uR(kt.charCodeAt($e))&&hr({},so,Oo),{type:Qb,value:parseInt("0x"+t,16),start:e,end:$e}}function mHt(e){let t="0"+kt[$e++];for(;$e<Ea&&M2(kt[$e]);)t+=kt[$e++];return(uR(kt.charCodeAt($e))||qp(kt.charCodeAt($e)))&&hr({},so,Oo),{type:Qb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Yme(){var e,t,n;if(n=kt[$e],XF(qp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,pHt(t);if(M2(n))return mHt(t);n&&qp(n.charCodeAt(0))&&hr({},so,Oo)}for(;qp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];qp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),qp(kt.charCodeAt($e)))for(;qp(kt.charCodeAt($e));)e+=kt[$e++];else hr({},so,Oo);return uR(kt.charCodeAt($e))&&hr({},so,Oo),{type:Qb,value:parseFloat(e),start:t,end:$e}}function gHt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],XF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<Ea;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!pI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=fHt()):e+=eq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:M2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<Ea&&M2(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<Ea&&M2(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(pI(r.charCodeAt(0)))break;e+=r}return t!==""&&hr({},so,Oo),{type:aR,value:e,octal:s,start:n,end:$e}}function yHt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";hr({},ZH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{hr({},ZH)}try{return new RegExp(e,t)}catch{return null}}function vHt(){var e,t,n,r,i;for(e=kt[$e],XF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<Ea;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],pI(e.charCodeAt(0))&&hr({},wB),t+=e;else if(pI(e.charCodeAt(0)))hr({},wB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||hr({},wB),i=t.substr(1,t.length-2),{value:i,literal:t}}function bHt(){var e,t,n;for(t="",n="";$e<Ea&&(e=kt[$e],!!sM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<Ea?hr({},so,Oo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&hr({},ZH,n),{value:n,literal:t}}function _Ht(){var e,t,n,r;return Dr=null,F6e(),e=$e,t=vHt(),n=bHt(),r=yHt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function wHt(e){return e.type===pb||e.type===Jy||e.type===YF||e.type===KF}function B6e(){if(F6e(),$e>=Ea)return{type:oR,start:$e,end:$e};const e=kt.charCodeAt($e);return uR(e)?hHt():e===40||e===41||e===59?EB():e===39||e===34?gHt():e===46?qp(kt.charCodeAt($e+1))?Yme():EB():qp(e)?Yme():EB()}function Du(){const e=Dr;return $e=e.end,Dr=B6e(),$e=e.end,e}function U6e(){const e=$e;Dr=B6e(),$e=e}function EHt(e){const t=new bd(qVt);return t.elements=e,t}function Kme(e,t,n){const r=new bd(e==="||"||e==="&&"?XVt:WVt);return r.operator=e,r.left=t,r.right=n,r}function xHt(e,t){const n=new bd(GVt);return n.callee=e,n.arguments=t,n}function SHt(e,t,n){const r=new bd(YVt);return r.test=e,r.consequent=t,r.alternate=n,r}function Ane(e){const t=new bd(M6e);return t.name=e,t}function FC(e){const t=new bd(KVt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Xme(e,t,n){const r=new bd(QVt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function THt(e){const t=new bd(JVt);return t.properties=e,t}function Qme(e,t,n){const r=new bd(ZVt);return r.key=t,r.value=n,r.kind=e,r}function CHt(e,t){const n=new bd(eHt);return n.operator=e,n.argument=t,n.prefix=!0,n}function hr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(XF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function QF(e){e.type===oR&&hr(e,sHt),e.type===Qb&&hr(e,tHt),e.type===aR&&hr(e,nHt),e.type===pb&&hr(e,rHt),e.type===Jy&&hr(e,iHt),hr(e,so,e.value)}function xa(e){const t=Du();(t.type!==Cu||t.value!==e)&&QF(t)}function gi(e){return Dr.type===Cu&&Dr.value===e}function xB(e){return Dr.type===Jy&&Dr.value===e}function AHt(){const e=[];for($e=Dr.start,xa("[");!gi("]");)gi(",")?(Du(),e.push(null)):(e.push(mb()),gi("]")||xa(","));return Du(),EHt(e)}function Jme(){$e=Dr.start;const e=Du();return e.type===aR||e.type===Qb?(e.octal&&hr(e,L6e),FC(e)):Ane(e.value)}function IHt(){var e,t,n,r;if($e=Dr.start,e=Dr,e.type===pb)return n=Jme(),xa(":"),r=mb(),Qme("init",n,r);if(e.type===oR||e.type===Cu)QF(e);else return t=Jme(),xa(":"),r=mb(),Qme("init",t,r)}function kHt(){var e=[],t,n,r,i={},s=String;for($e=Dr.start,xa("{");!gi("}");)t=IHt(),t.key.type===M6e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?hr({},oHt):i[r]=!0,e.push(t),gi("}")||xa(",");return xa("}"),THt(e)}function RHt(){xa("(");const e=Ine();return xa(")"),e}const NHt={if:1};function PHt(){var e,t,n;if(gi("("))return RHt();if(gi("["))return AHt();if(gi("{"))return kHt();if(e=Dr.type,$e=Dr.start,e===pb||NHt[Dr.value])n=Ane(Du().value);else if(e===aR||e===Qb)Dr.octal&&hr(Dr,L6e),n=FC(Du());else{if(e===Jy)throw new Error(hI);e===YF?(t=Du(),t.value=t.value==="true",n=FC(t)):e===KF?(t=Du(),t.value=null,n=FC(t)):gi("/")||gi("/=")?(n=FC(_Ht()),U6e()):QF(Du())}return n}function OHt(){const e=[];if(xa("("),!gi(")"))for(;$e<Ea&&(e.push(mb()),!gi(")"));)xa(",");return xa(")"),e}function DHt(){$e=Dr.start;const e=Du();return wHt(e)||QF(e),Ane(e.value)}function $Ht(){return xa("."),DHt()}function MHt(){xa("[");const e=Ine();return xa("]"),e}function LHt(){var e,t,n;for(e=PHt();;)if(gi("."))n=$Ht(),e=Xme(".",e,n);else if(gi("("))t=OHt(),e=xHt(e,t);else if(gi("["))n=MHt(),e=Xme("[",e,n);else break;return e}function Zme(){const e=LHt();if(Dr.type===Cu&&(gi("++")||gi("--")))throw new Error(hI);return e}function VO(){var e,t;if(Dr.type!==Cu&&Dr.type!==Jy)t=Zme();else{if(gi("++")||gi("--"))throw new Error(hI);if(gi("+")||gi("-")||gi("~")||gi("!"))e=Du(),t=VO(),t=CHt(e.value,t);else{if(xB("delete")||xB("void")||xB("typeof"))throw new Error(hI);t=Zme()}}return t}function ege(e){let t=0;if(e.type!==Cu&&e.type!==Jy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function FHt(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=VO(),r=Dr,i=ege(r),i===0)return u;for(r.prec=i,Du(),t=[e,Dr],o=VO(),s=[u,r,o];(i=ege(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Kme(a,u,o),s.push(n);r=Du(),r.prec=i,s.push(r),t.push(Dr),n=VO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Kme(s[l-1].value,s[l-2],n),l-=2;return n}function mb(){var e,t,n;return e=FHt(),gi("?")&&(Du(),t=mb(),xa(":"),n=mb(),e=SHt(e,t,n)),e}function Ine(){const e=mb();if(gi(","))throw new Error(hI);return e}function kne(e){kt=e,$e=0,Ea=kt.length,Dr=null,U6e();const t=Ine();if(Dr.type!==oR)throw new Error("Unexpect token after expression.");return t}var z6e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function V6e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function jHt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function H6e(e){e=e||{};const t=e.allowed?ld(e.allowed):{},n=e.forbidden?ld(e.forbidden):{},r=e.constants||z6e,i=(e.functions||V6e)(f),s=e.globalvar,o=e.fieldvar,a=xn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(ht(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Me("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[jHt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Me("Unrecognized function: "+m),xn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const tge=Symbol("vega_selection_getter");function q6e(e){return(!e.getter||!e.getter[tge])&&(e.getter=jc(e.field),e.getter[tge]=!0),e.getter}const Rne="intersect",nge="union",BHt="vlMulti",UHt="vlPoint",rge="or",zHt="and",Kd="_vgsid_",mI=jc(Kd),VHt="E",HHt="R",qHt="R-E",WHt="R-LE",GHt="R-RE",oM="index:unit";function ige(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=q6e(a)(e),L0(o)&&(o=ya(o)),L0(r[s])&&(r[s]=ya(r[s])),Fe(r[s])&&L0(r[s][0])&&(r[s]=r[s].map(ya)),a.type===VHt){if(Fe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===HHt){if(!Ew(o,r[s]))return!1}else if(a.type===GHt){if(!Ew(o,r[s],!0,!1))return!1}else if(a.type===qHt){if(!Ew(o,r[s],!1,!1))return!1}else if(a.type===WHt&&!Ew(o,r[s],!1,!0))return!1;return!0}function YHt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[oM]&&r[oM].value:void 0,o=n===Rne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=ige(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=ige(t,l),o^h)return h;return a&&o}const W6e=rS(mI),KHt=W6e.left,XHt=W6e.right;function QHt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[oM]&&r[oM].value:void 0,o=n===Rne,a=mI(t),u=KHt(i,a);if(u===i.length||mI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(XHt(i,a)-u<s.size)return!1}return!0}function JHt(e,t){return e.map(n=>En(t.fields?{values:t.fields.map(r=>q6e(r)(n.datum))}:{[Kd]:mI(n.datum)},t))}function ZHt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,x,C;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,C=c.length;x<C;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=SB[`${y}_union`],m[d]=v(g,dt(f[x]));n&&(g=a[d]||(a[d]=[]),g.push(dt(f).reduce((E,S,A)=>(E[c[A].field]=S,E),{})))}else h=Kd,p=mI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Kd]:p}));if(t=t||nge,o[Kd]?o[Kd]=SB[`${Kd}_${t}`](...Object.values(o[Kd])):Object.keys(o).forEach(E=>{o[E]=Object.keys(o[E]).map(S=>o[E][S]).reduce((S,A)=>S===void 0?A:SB[`${u[E]}_${t}`](S,A))}),s=Object.keys(a),n&&s.length){const E=r?UHt:BHt;o[E]=t===nge?{[rge]:s.reduce((S,A)=>(S.push(...a[A]),S),[])}:{[zHt]:s.map(S=>({[rge]:a[S]}))}}return o}var SB={[`${Kd}_union`]:nmt,[`${Kd}_intersect`]:emt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ya(t[0]),r=ya(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ya(t[0]),r=ya(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const eqt=":",tqt="@";function Nne(e,t,n,r){t[0].type!==hb&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=tqt+o,u=eqt+i;s===Rne&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function G6e(e){const t=this.context.data[e];return t?t.values.value:[]}function nqt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function rqt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Bc).insert(t)),1}function iqt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const lR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},sqt=lR("format"),Y6e=lR("timeFormat"),oqt=lR("utcFormat"),aqt=lR("timeParse"),uqt=lR("utcParse"),pP=new Date(2e3,0,1);function JF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(pP.setYear(2e3),pP.setMonth(e),pP.setDate(t),Y6e.call(this,pP,n))}function lqt(e){return JF.call(this,e,1,"%B")}function cqt(e){return JF.call(this,e,1,"%b")}function fqt(e){return JF.call(this,0,2+e,"%A")}function dqt(e){return JF.call(this,0,2+e,"%a")}const hqt=":",pqt="@",tq="%",K6e="$";function Pne(e,t,n,r){t[0].type!==hb&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=hqt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function mqt(e,t,n,r){t[0].type!==hb&&Me("First argument to indata must be a string literal."),t[1].type!==hb&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=pqt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Za(e,t,n,r){if(t[0].type===hb)sge(n,r,t[0].value);else for(e in n.scales)sge(n,r,e)}function sge(e,t,n){const r=tq+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function gp(e,t){if(xn(e))return e;if(ht(e)){const n=t.scales[e];return n&&Ujt(n.value)?n.value:void 0}}function gqt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Za,n._range=Za,n._scale=Za;const r=i=>"_["+(i.type===hb?rt(tq+i.value):rt(tq)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function One(e,t){return function(n,r,i){if(n){const s=gp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const yqt=One("area",p1t),vqt=One("bounds",v1t),bqt=One("centroid",S1t);function _qt(e,t){const n=gp(e,(t||this).context);return n&&n.scale()}function wqt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Dne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Eqt(){return Dne(this.context.dataflow,"warn",arguments)}function xqt(){return Dne(this.context.dataflow,"info",arguments)}function Sqt(){return Dne(this.context.dataflow,"debug",arguments)}function TB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nq(e){const t=X0(e),n=TB(t.r),r=TB(t.g),i=TB(t.b);return .2126*n+.7152*r+.0722*i}function Tqt(e,t){const n=nq(e),r=nq(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Cqt(){const e=[].slice.call(arguments);return e.unshift({}),En(...e)}function X6e(e,t){return e===t||e!==e&&t!==t?!0:Fe(e)?Fe(t)&&e.length===t.length?Aqt(e,t):!1:pt(e)&&pt(t)?Q6e(e,t):!1}function Aqt(e,t){for(let n=0,r=e.length;n<r;++n)if(!X6e(e[n],t[n]))return!1;return!0}function Q6e(e,t){for(const n in e)if(!X6e(e[n],t[n]))return!1;return!0}function oge(e){return t=>Q6e(e,t)}function Iqt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Bc:Fe(n)||EF(n)?n:oge(n),c.remove(f)),t&&c.insert(t),r&&(f=oge(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function kqt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Rqt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const age={};function Nqt(e,t){const n=age[t]||(age[t]=jc(t));return Fe(e)?e.map(n):n(e)}function $ne(e){return Fe(e)||ArrayBuffer.isView(e)?e:null}function Mne(e){return $ne(e)||(ht(e)?e:null)}function Pqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $ne(e).join(...n)}function Oqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).indexOf(...n)}function Dqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).lastIndexOf(...n)}function $qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Mne(e).slice(...n)}function Mqt(e,t,n){return xn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function Lqt(e){return $ne(e).slice().reverse()}function Fqt(e,t,n){return ote(e||0,t||0,n||0)}function jqt(e,t){const n=gp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Bqt(e,t){const n=gp(e,(t||this).context);return n?n.copy():void 0}function Uqt(e,t){const n=gp(e,(t||this).context);return n?n.domain():[]}function zqt(e,t,n){const r=gp(e,(n||this).context);return r?Fe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Vqt(e,t){const n=gp(e,(t||this).context);return n&&n.range?n.range():[]}function Hqt(e,t,n){const r=gp(e,(n||this).context);return r?r(t):void 0}function qqt(e,t,n,r,i){e=gp(e,(i||this).context);const s=UMe(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=Aa;return u-a?l=kMe(e,a,u):e=(e.interpolator?mr("sequential")().interpolator(e.interpolator()):mr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Wqt(e,t,n){const r=gp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Gqt(e){let t=null;return function(n){return n?lI(n,t=t||fx(e)):e}}const J6e=e=>e.data;function Z6e(e,t){const n=G6e.call(t,e);return n.root&&n.root.lookup||{}}function Yqt(e,t,n){const r=Z6e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(J6e):void 0}function Kqt(e,t){const n=Z6e(e,this)[t];return n?n.ancestors().map(J6e):void 0}const e4e=()=>typeof window<"u"&&window||null;function Xqt(){const e=e4e();return e?e.screen:{}}function Qqt(){const e=e4e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Jqt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function t4e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return FLe(o,s,Zqt(t))}function Zqt(e){let t=null;if(e){const n=dt(e.marktype),r=dt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function eWt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=dt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function tWt(e){return dt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function nWt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),t4e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>rWt(u.x,u.y,t))}function rWt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const gI={random(){return zc()},cumulativeNormal:AF,cumulativeLogNormal:Cee,cumulativeUniform:Ree,densityNormal:wee,densityLogNormal:Tee,densityUniform:kee,quantileNormal:IF,quantileLogNormal:Aee,quantileUniform:Nee,sampleNormal:CF,sampleLogNormal:See,sampleUniform:Iee,isArray:Fe,isBoolean:Qy,isDate:L0,isDefined(e){return e!==void 0},isNumber:lr,isObject:pt,isRegExp:j3e,isString:ht,isTuple:EF,isValid(e){return e!=null&&e===e},toBoolean:see,toDate(e){return oee(e)},toNumber:ya,toString:aee,indexof:Oqt,join:Pqt,lastindexof:Dqt,replace:Mqt,reverse:Lqt,slice:$qt,flush:L3e,lerp:B3e,merge:Cqt,pad:V3e,peek:Qn,pluck:Nqt,span:Vk,inrange:Ew,truncate:H3e,rgb:X0,lab:o3,hcl:a3,hsl:bA,luminance:nq,contrast:Tqt,sequence:Lu,format:sqt,utcFormat:oqt,utcParse:uqt,utcOffset:i$e,utcSequence:a$e,timeFormat:Y6e,timeParse:aqt,timeOffset:r$e,timeSequence:o$e,timeUnitSpecifier:W3e,monthFormat:lqt,monthAbbrevFormat:cqt,dayFormat:fqt,dayAbbrevFormat:dqt,quarter:O3e,utcquarter:D3e,week:Y3e,utcweek:Q3e,dayofyear:G3e,utcdayofyear:X3e,warn:Eqt,info:xqt,debug:Sqt,extent(e){return Kh(e)},inScope:wqt,intersect:t4e,clampRange:$3e,pinchDistance:kqt,pinchAngle:Rqt,screen:Xqt,containerSize:Jqt,windowSize:Qqt,bandspace:Fqt,setdata:rqt,pathShape:Gqt,panLinear:k3e,panLog:R3e,panPow:N3e,panSymlog:P3e,zoomLinear:ZZ,zoomLog:eee,zoomPow:j$,zoomSymlog:tee,encode:iqt,modify:Iqt,lassoAppend:eWt,lassoPath:tWt,intersectLasso:nWt},iWt=["view","item","group","xy","x","y"],sWt="event.vega.",n4e="this.",Lne={},r4e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(K6e+e)}]`,functions:oWt,constants:z6e,visitors:Lne},rq=H6e(r4e);function oWt(e){const t=V6e(e);iWt.forEach(n=>t[n]=sWt+n);for(const n in gI)t[n]=n4e+n;return En(t,gqt(e,gI,Lne)),t}function gs(e,t,n){return arguments.length===1?gI[e]:(gI[e]=t,n&&(Lne[e]=n),rq&&(rq.functions[e]=n4e+e),this)}gs("bandwidth",jqt,Za);gs("copy",Bqt,Za);gs("domain",Uqt,Za);gs("range",Vqt,Za);gs("invert",zqt,Za);gs("scale",Hqt,Za);gs("gradient",qqt,Za);gs("geoArea",yqt,Za);gs("geoBounds",vqt,Za);gs("geoCentroid",bqt,Za);gs("geoShape",Wqt,Za);gs("geoScale",_qt,Za);gs("indata",nqt,mqt);gs("data",G6e,Pne);gs("treePath",Yqt,Pne);gs("treeAncestors",Kqt,Pne);gs("vlSelectionTest",YHt,Nne);gs("vlSelectionIdTest",QHt,Nne);gs("vlSelectionResolve",ZHt,Nne);gs("vlSelectionTuples",JHt);function Qh(e,t){const n={};let r;try{e=ht(e)?e:rt(e)+"",r=kne(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==$6e)return;const o=s.callee.name,a=r4e.visitors[o];a&&a(o,s.arguments,t,n)});const i=rq(r);return i.globals.forEach(s=>{const o=K6e+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:En({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function aWt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const uWt=ld(["rule"]),uge=ld(["group","image","rect"]);function lWt(e,t){let n="";return uWt[t]||(e.x2&&(e.x?(uge[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(uge[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Fne(e){return(e+"").toLowerCase()}function cWt(e){return Fne(e)==="operator"}function fWt(e){return Fne(e)==="collect"}function BT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function dWt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var hWt={operator:(e,t)=>BT(e,["_"],t.code),parameter:(e,t)=>BT(e,["datum","_"],t.code),event:(e,t)=>BT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return BT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=lWt(r,n),i+="return m;",BT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),dWt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function pWt(e){const t=this;cWt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function mWt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function gWt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Fe(i)?i.map(s=>lge(s,n,t)):lge(i,n,t)}return t}function lge(e,t,n){if(!e||!pt(e))return e;for(let r=0,i=cge.length,s;r<i;++r)if(s=cge[r],Ft(e,s.key))return s.parse(e,t,n);return e}var cge=[{key:"$ref",parse:yWt},{key:"$key",parse:bWt},{key:"$expr",parse:vWt},{key:"$field",parse:_Wt},{key:"$encode",parse:EWt},{key:"$compare",parse:wWt},{key:"$context",parse:xWt},{key:"$subflow",parse:SWt},{key:"$tupleid",parse:TWt}];function yWt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function vWt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ll(t.parameterExpression(e.$expr),e.$fields))}function bWt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=iee(e.$key,e.$flat,t.expr.codegen))}function _Wt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=jc(e.$field,e.$name,t.expr.codegen))}function wWt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=dt(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=nee(r,e.$order,t.expr.codegen))}function EWt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ll(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function xWt(e,t){return t}function SWt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function TWt(){return Mt}function CWt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function AWt(e){var t=this,n=pt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const IWt={skip:!0};function kWt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function RWt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],IWt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Bc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function i4e(e,t,n,r){return new s4e(e,t,n,r)}function s4e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||hWt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function fge(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}s4e.prototype=fge.prototype={fork(){const e=new fge(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),fWt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Fne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:aWt,parseOperator:pWt,parseOperatorParameters:mWt,parseParameters:gWt,parseStream:CWt,parseUpdate:AWt,getState:kWt,setState:RWt};function NWt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),o4e(t,e.description()))}function o4e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function PWt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const CB="default";function OWt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:CB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?ht(i)?i:i.user:CB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ht(r)||(i=r.item,r=r.user),iq(e,r&&r!==CB?r:i||r),i},{cursor:t})}function iq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function aM(e,t){var n=e._runtime.data;return Ft(n,t)||Me("Unrecognized data set: "+t),n[t]}function DWt(e,t){return arguments.length<2?aM(this,e).values.value:ZF.call(this,e,Kb().remove(Bc).insert(t))}function ZF(e,t){A$e(t)||Me("Second argument to changes must be a changeset.");const n=aM(this,e);return n.modified=!0,this.pulse(n.input,t)}function $Wt(e,t){return ZF.call(this,e,Kb().insert(t))}function MWt(e,t){return ZF.call(this,e,Kb().remove(t))}function a4e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function u4e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function e5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function LWt(e){var t=e5(e),n=a4e(e),r=u4e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function FWt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=e5(e),o=t.changedTouches?t.changedTouches[0]:t,s=qF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=jWt(e,n,s),t}function jWt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;ht(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ia(e),item:Ia(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const dge="view",BWt="timer",UWt="window",zWt={trap:!1};function VWt(e){const t=En({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Fe(r[s])&&(r[s]=ld(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function l4e(e,t,n,r){e._eventListeners.push({type:n,sources:dt(t),handler:r})}function HWt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function mP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||pt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function qWt(e,t,n){var r=this,i=new TF(n),s=function(l,c){r.runAsync(null,()=>{e===dge&&HWt(r,t)&&l.preventDefault(),i.receive(FWt(r,l,c))})},o;if(e===BWt)mP(r,"timer",t)&&r.timer(s,t);else if(e===dge)mP(r,"view",t)&&r.addEventListener(t,s,zWt);else if(e===UWt?mP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&mP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);l4e(r,o,t,s)}return i}function hge(e){return e.item}function pge(e){return e.item.mark.source}function mge(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function WWt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",hge),pge,mge(e)),this.on(this.events("view","pointerout",hge),pge,mge(t)),this}function GWt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Ol(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const YWt="vega-bind",KWt="vega-bind-name",XWt="vega-bind-radio";function QWt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=ree(r.debounce,i.update))),(r.input==null&&r.element?JWt:eGt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function JWt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),l4e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(ZWt(i))}}function ZWt(e){return typeof Event<"u"?new Event(e):{type:e}}function eGt(e,t,n,r){const i=r.signal(n.signal),s=Ol("div",{class:YWt}),o=n.input==="radio"?s:s.appendChild(Ol("label"));o.appendChild(Ol("span",{class:KWt},n.name||n.signal)),t.appendChild(s);let a=tGt;switch(n.input){case"checkbox":a=nGt;break;case"select":a=rGt;break;case"radio":a=iGt;break;case"range":a=sGt;break}a(e,o,n,i)}function tGt(e,t,n,r){const i=Ol("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function nGt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Ol("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function rGt(e,t,n,r){const i=Ol("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};uM(o,r)&&(u.selected=!0),i.appendChild(Ol("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(uM(n.options[a],o)){i.selectedIndex=a;return}}}function iGt(e,t,n,r){const i=Ol("span",{class:XWt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};uM(o,r)&&(u.checked=!0);const l=Ol("input",u);l.addEventListener("change",()=>e.update(o));const c=Ol("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)uM(a[l].value,o)&&(a[l].checked=!0)}}function sGt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||K0(s,i,100),a=Ol("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Ol("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function uM(e,t){return e===t||e+""==t+""}function c4e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,a4e(e),u4e(e),e5(e),i,s).background(e.background())}function jne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function oGt(e,t,n,r){const i=new r(e.loader(),jne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,e5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function aGt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=WF(r);e=n._el=e?AB(n,e,!0):null,NWt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||sR,a=e?s.renderer:s.headless;return n._renderer=a?c4e(n,n._renderer,e,a):null,n._handler=oGt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=AB(n,t,!0):e.appendChild(Ol("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=AB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{QWt(n,u.element||t,u)})),n}function AB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const UT=e=>+e||0,uGt=e=>({top:e,bottom:e,left:e,right:e});function gge(e){return pt(e)?{top:UT(e.top),bottom:UT(e.bottom),left:UT(e.left),right:UT(e.right)}:uGt(UT(e))}async function Bne(e,t,n,r){const i=WF(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),c4e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function lGt(e,t){e!==h0.Canvas&&e!==h0.SVG&&e!==h0.PNG&&Me("Unrecognized image type: "+e);const n=await Bne(this,e,t);return e===h0.SVG?cGt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function cGt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function fGt(e,t){return(await Bne(this,h0.Canvas,e,t)).canvas()}async function dGt(e){return(await Bne(this,h0.SVG,e)).svg()}function hGt(e,t,n){return i4e(e,ax,gI,n).parse(t)}function pGt(e){var t=this._runtime.scales;return Ft(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var f4e="width",d4e="height",Une="padding",yge={skip:!0};function h4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Une?r.left+r.right:0)}function p4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Une?r.top+r.bottom:0)}function mGt(e){var t=e._signals,n=t[f4e],r=t[d4e],i=t[Une];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=h4e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=p4e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function gGt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(f4e,n,yge),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(d4e,r,yge),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function yGt(e){return this._runtime.getState(e||{data:vGt,signals:bGt,recurse:!0})}function vGt(e,t){return t.modified&&Fe(t.input.value)&&!e.startsWith("_:vega:_")}function bGt(e,t){return!(e==="parent"||t instanceof ax.proxy)}function _Gt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function wGt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(I0t(n,t))}function EGt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",xGt(r))}function xGt(e){return e==null?"":Fe(e)?m4e(e):pt(e)&&!L0(e)?SGt(e):e+""}function SGt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Fe(n)?m4e(n):g4e(n))}).join(`
`)}function m4e(e){return"["+e.map(g4e).join(", ")+"]"}function g4e(e){return Fe(e)?"[]":pt(e)&&!L0(e)?"{}":e}function TGt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function y4e(e,t){const n=this;if(t=t||{},sE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=En({},e.locale,t.locale);n.locale(y$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||h0.Canvas,n._scenegraph=new fLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||EGt,n._redraw=!0,n._handler=new sR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=VWt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=hGt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:En({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=h4e(n,n._width),n._viewHeight=p4e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,mGt(n),PWt(n),OWt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function gP(e,t){return Ft(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+rt(t))}function v4e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function vge(e,t,n,r){let i=v4e(n,r);return i||(i=jne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function bge(e,t,n){const r=v4e(t,n);return r&&t._targets.remove(r),e}ut(y4e,sE,{async evaluate(e,t,n){if(await sE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,LWt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&RO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&o4e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=gP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",gge(e)):gge(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(WF(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(sE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(gP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:gGt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=jne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return vge(this,e,gP(this,e),t)},removeSignalListener(e,t){return bge(this,gP(this,e),t)},addDataListener(e,t){return vge(this,e,aM(this,e).values,t)},removeDataListener(e,t){return bge(this,aM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=iq(this,null);this._globalCursor=!!e,t&&iq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:wGt,events:qWt,finalize:GWt,hover:WWt,data:DWt,change:ZF,insert:$Wt,remove:MWt,scale:pGt,initialize:aGt,toImageURL:lGt,toCanvas:fGt,toSVG:dGt,getState:yGt,setState:_Gt,_watchPixelRatio:TGt});const CGt="view",lM="[",cM="]",b4e="{",_4e="}",AGt=":",w4e=",",IGt="@",kGt=">",RGt=/[[\]{}]/,NGt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let E4e,x4e;function Zy(e,t,n){return E4e=t||CGt,x4e=n||NGt,S4e(e.trim()).map(sq)}function PGt(e){return x4e[e]}function L2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function S4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=L2(e,i,w4e,lM+b4e,cM+_4e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function sq(e){return e[0]==="["?OGt(e):DGt(e)}function OGt(e){const t=e.length;let n=1,r;if(n=L2(e,n,cM,lM,cM),n===t)throw"Empty between selector: "+e;if(r=S4e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==kGt)throw"Expected '>' after between selector: "+e;r=r.map(sq);const i=sq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function DGt(e){const t={source:E4e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===_4e){if(a=e.lastIndexOf(b4e),a>=0){try{r=$Gt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===IGt&&(i=++a),u=L2(e,a,AGt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=L2(e,a,lM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=L2(e,a,cM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==lM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||RGt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):PGt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function $Gt(e){const t=e.split(w4e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function MGt(e){return pt(e)?e:{type:e||"pad"}}const zT=e=>+e||0,LGt=e=>({top:e,bottom:e,left:e,right:e});function FGt(e){return pt(e)?e.signal?e:{top:zT(e.top),bottom:zT(e.bottom),left:zT(e.left),right:zT(e.right)}:LGt(zT(e))}const oo=e=>pt(e)&&!Fe(e)?En({},e):{value:e};function _ge(e,t,n,r){return n!=null?(pt(n)&&!Fe(n)||Fe(n)&&n.length&&pt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Vo(e,t,n){for(const r in t)_ge(e,r,t[r]);for(const r in n)_ge(e,r,n[r],"update")}function FS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=En(e[r]||{},t[r]));return e}function Z_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const zne="mark",Vne="frame",Hne="scope",jGt="axis",BGt="axis-domain",UGt="axis-grid",zGt="axis-label",VGt="axis-tick",HGt="axis-title",qGt="legend",WGt="legend-band",GGt="legend-entry",YGt="legend-gradient",T4e="legend-label",KGt="legend-symbol",XGt="legend-title",QGt="title",JGt="title-text",ZGt="title-subtitle";function eYt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Z_(u,e)&&IB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Vne?i.group:n===zne?En({},i.mark,i[t]):null;for(u in c)l=Z_(u,e)||(u==="fill"||u==="stroke")&&(Z_("fill",e)||Z_("stroke",e)),l||IB(s,u,c[u]);dt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Z_(h,e)||IB(s,h,d[h])}),e=En({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=En(o,e.enter),a&&(e.update=En(a,e.update)),e}function IB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const C4e=e=>ht(e)?rt(e):e.signal?`(${e.signal})`:A4e(e);function t5(e){if(e.gradient!=null)return nYt(e);let t=e.signal?`(${e.signal})`:e.color?tYt(e.color):e.field!=null?A4e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=rYt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${HO(e.exponent)})`),e.mult!=null&&(t+=`*${HO(e.mult)}`),e.offset!=null&&(t+=`+${HO(e.offset)}`),e.round&&(t=`round(${t})`),t}const yP=(e,t,n,r)=>`(${e}(${[t,n,r].map(t5).join(",")})+'')`;function tYt(e){return e.c?yP("hcl",e.h,e.c,e.l):e.h||e.s?yP("hsl",e.h,e.s,e.l):e.l||e.a?yP("lab",e.l,e.a,e.b):e.r||e.g||e.b?yP("rgb",e.r,e.g,e.b):null}function nYt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(C4e(e.gradient)),`gradient(${t.join(",")})`}function HO(e){return pt(e)?"("+t5(e)+")":e}function A4e(e){return I4e(pt(e)?e:{datum:e})}function I4e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+rt(e));return e.signal||(r=ht(r)?hp(r).map(rt).join("]["):I4e(r)),t+"["+r+"]"}function rYt(e,t){const n=C4e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+HO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function iYt(e){let t="";return e.forEach(n=>{const r=t5(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function k4e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=eYt(e,t,n,r,i.config);for(const a in e)o[a]=sYt(e[a],t,s,i);return s}function sYt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=aYt(oYt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function oYt(e){return Fe(e)?iYt(e):t5(e)}function aYt(e,t,n,r){const i=Qh(e,t);return i.$fields.forEach(s=>r[s]=1),En(n,i.$params),i.$expr}const uYt="outer",lYt=["value","update","init","react","bind"];function wge(e,t){Me(e+' for "outer" push: '+rt(t))}function R4e(e,t){const n=e.name;if(e.push===uYt)t.signals[n]||wge("No prior signal definition",n),lYt.forEach(r=>{e[r]!==void 0&&wge("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function oq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function n5(e,t,n,r){return new oq(e,t,n,r)}function fM(e,t){return n5("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function yI(e,t){return t?{$field:e,$name:t}:{$field:e}}const aq=yI("key");function Ege(e,t){return{$compare:e,$order:t}}function cYt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const fYt="ascending",dYt="descending";function hYt(e){return pt(e)?(e.order===dYt?"-":"+")+r5(e.op,e.field):""}function r5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const qne="scope",uq="view";function Fs(e){return e&&e.signal}function pYt(e){return e&&e.expr}function qO(e){if(Fs(e))return!0;if(pt(e)){for(const t in e)if(qO(e[t]))return!0}return!1}function Tf(e,t){return e??t}function P1(e){return e&&e.signal||e}const xge="timer";function vI(e,t){return(e.merge?gYt:e.stream?yYt:e.type?vYt:Me("Invalid stream specification: "+rt(e)))(e,t)}function mYt(e){return e===qne?uq:e||uq}function gYt(e,t){const n=e.merge.map(i=>vI(i,t)),r=Wne({merge:n},e,t);return t.addStream(r).id}function yYt(e,t){const n=vI(e.stream,t),r=Wne({stream:n},e,t);return t.addStream(r).id}function vYt(e,t){let n;e.type===xge?(n=t.event(xge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(mYt(e.source),e.type);const r=Wne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Wne(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[vI(r[0],n),vI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(bYt(t.marktype,t.markname,t.markrole)),t.source===qne&&r.push("inScope(event.item)"),r.length&&(e.filter=Qh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function bYt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const _Yt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function wYt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),ht(s)&&(s=Zy(s,t.isSubscope()?qne:uq)),s=dt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[xYt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=ht(o)?Qh(o,t):o.expr!=null?Qh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:_Yt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(En(EYt(u,t),i)))}function EYt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):vI(e,t)}}function xYt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function SYt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Qh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>wYt(i,t,n.id))}const qr=e=>(t,n,r)=>n5(e,n,t||void 0,r),N4e=qr("aggregate"),TYt=qr("axisticks"),P4e=qr("bound"),_d=qr("collect"),Sge=qr("compare"),CYt=qr("datajoin"),O4e=qr("encode"),AYt=qr("expression"),IYt=qr("facet"),kYt=qr("field"),RYt=qr("key"),NYt=qr("legendentries"),PYt=qr("load"),OYt=qr("mark"),DYt=qr("multiextent"),$Yt=qr("multivalues"),MYt=qr("overlap"),LYt=qr("params"),D4e=qr("prefacet"),FYt=qr("projection"),jYt=qr("proxy"),BYt=qr("relay"),$4e=qr("render"),UYt=qr("scale"),Jb=qr("sieve"),zYt=qr("sortitems"),M4e=qr("viewlayout"),VYt=qr("values");let HYt=0;const L4e={min:"min",max:"max",count:"sum"};function qYt(e,t){const n=e.type||"linear";xMe(n)||Me("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function WYt(e,t){const n=t.getScale(e.name).params;let r;n.domain=F4e(e.domain,e,t),e.range!=null&&(n.range=B4e(e,t,n)),e.interpolate!=null&&nKt(e.interpolate,n),e.nice!=null&&(n.nice=tKt(e.nice,t)),e.bins!=null&&(n.bins=eKt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=Sc(e[r],t))}function Sc(e,t){return pt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+rt(e)):e}function WO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Sc(n,t))}function i5(e){Me("Can not find data set: "+rt(e))}function F4e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Fe(e)?GYt:e.fields?KYt:YYt)(e,t,n)}function GYt(e,t,n){return e.map(r=>Sc(r,n))}function YYt(e,t,n){const r=n.getData(e.data);return r||i5(e.data),cx(t.type)?r.valuesRef(n,e.field,j4e(e.sort,!1)):CMe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function KYt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=ht(o)?{data:r,field:o}:Fe(o)||o.signal?XYt(o,n):o,s.push(o),s),[]);return(cx(t.type)?QYt:CMe(t.type)?JYt:ZYt)(e,n,i)}function XYt(e,t){const n="_:vega:_"+HYt++,r=_d({});if(Fe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Jb({})]),{data:n,field:"data"}}function QYt(e,t,n){const r=j4e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||i5(l.data),c.countsRef(t,l.field,r)}),a={groupby:aq,pulse:o};r&&(i=r.op||"count",s=r.field?r5(i,r.field):"count",a.ops=[L4e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(N4e(a));const u=t.add(_d({pulse:$t(i)}));return s=t.add(VYt({field:aq,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function j4e(e,t){return e&&(!e.field&&!e.op?pt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!L4e[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function JYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||i5(i.data),s.domainRef(t,i.field)});return $t(t.add($Yt({values:r})))}function ZYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||i5(i.data),s.extentRef(t,i.field)});return $t(t.add(DYt({extents:r})))}function eKt(e,t){return e.signal||Fe(e)?WO(e,t):t.objectProperty(e)}function tKt(e,t){return e.signal?t.signalRef(e.signal):pt(e)?{interval:Sc(e.interval),step:Sc(e.step)}:Sc(e)}function nKt(e,t){t.interpolate=Sc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Sc(e.gamma))}function B4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ht(i)){if(r&&Ft(r,i))return e=En({},e,{range:r[i]}),B4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=cx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=Fe(i.scheme)?WO(i.scheme,t):Sc(i.scheme,t),i.extent&&(n.schemeExtent=WO(i.extent,t)),i.count&&(n.schemeCount=Sc(i.count,t));return}else if(i.step){n.rangeStep=Sc(i.step,t);return}else{if(cx(e.type)&&!Fe(i))return F4e(i,e,t);Fe(i)||Me("Unsupported range type: "+rt(i))}return i.map(s=>(Fe(s)?WO:Sc)(s,t))}function rKt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=lq(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=lq(n[i],i,t));t.addProjection(e.name,r)}function lq(e,t,n){return Fe(e)?e.map(r=>lq(r,t,n)):pt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+rt(e)):e}const wd="top",jS="left",BS="right",by="bottom",U4e="center",iKt="vertical",sKt="start",oKt="middle",aKt="end",cq="index",Gne="label",uKt="offset",mx="perc",lKt="perc2",kc="value",cR="guide-label",Yne="guide-title",cKt="group-title",fKt="group-subtitle",Tge="symbol",GO="gradient",fq="discrete",dq="size",dKt="shape",hKt="fill",pKt="stroke",mKt="strokeWidth",gKt="strokeDash",yKt="opacity",Kne=[dq,dKt,hKt,pKt,mKt,gKt,yKt],fR={name:1,style:1,interactive:1},tr={value:0},Rc={value:1},s5="group",z4e="rect",Xne="rule",vKt="symbol",Zb="text";function bI(e){return e.type=s5,e.interactive=e.interactive||!1,e}function cl(e,t){const n=(r,i)=>Tf(e[r],Tf(t[r],i));return n.isVertical=r=>iKt===Tf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Tf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Tf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Tf(e.columns,Tf(t.columns,+n.isVertical(!0))),n}function V4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function bKt(e,t,n){const r=t.config.style[n];return r&&r[e]}function o5(e,t,n){return`item.anchor === '${sKt}' ? ${e} : item.anchor === '${aKt}' ? ${t} : ${n}`}const Qne=o5(rt(jS),rt(BS),rt(U4e));function _Kt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},pt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function H4e(e,t){return t?e?pt(e)?Object.assign({},e,{offset:H4e(e.offset,t)}):{value:e,offset:t}:t:e}function Wl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=FS(e.encode,t,fR)):e.interactive=!1,e}function wKt(e,t,n,r){const i=cl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:oo(f),height:oo(d)},update:En({},u,{opacity:Rc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return Vo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Wl({type:z4e,role:YGt,encode:h},r)}function EKt(e,t,n,r,i){const s=cl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:kc}};p[l]={signal:h+"datum."+mx,mult:u},p[c]=tr,p[f]={signal:h+"datum."+lKt,mult:u},p[d]=oo(a);const m={enter:p,update:En({},p,{opacity:Rc}),exit:{opacity:tr}};return Vo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Wl({type:z4e,role:WGt,key:kc,from:i,encode:m},r)}const xKt=`datum.${mx}<=0?"${jS}":datum.${mx}>=1?"${BS}":"${U4e}"`,SKt=`datum.${mx}<=0?"${by}":datum.${mx}>=1?"${wd}":"${oKt}"`;function Cge(e,t,n,r){const i=cl(e,t),s=i.isVertical(),o=oo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:Rc,text:{field:Gne}},exit:{opacity:tr}};return Vo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Tf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:SKt},f="y",d="x",h="1-"):(l.align=c.align={signal:xKt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+mx,mult:a},l[d]=c[d]=o,o.offset=Tf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+cq}:void 0,Wl({type:Zb,role:T4e,style:cR,key:kc,from:r,encode:p,overlap:u},n)}function TKt(e,t,n,r,i){const s=cl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${uKt} : datum.${dq}`,h=l?oo(l):{field:dq},p=`datum.${cq}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Rc,x:y.x,y:y.y},exit:{opacity:tr}};let x=null,C=null;e.fill||(x=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),Vo(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Kne.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:kc})});const E=Wl({type:vKt,role:KGt,key:kc,from:f,clip:l?!0:void 0,encode:g},n.symbols),S=oo(c);S.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:S},y:h},update:v={opacity:Rc,text:{field:Gne},x:y.x,y:y.y},exit:{opacity:tr}},Vo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Wl({type:Zb,role:T4e,style:cR,key:kc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?oo(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:Rc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:cq}},bI({role:Hne,from:r,encode:FS(g,o,fR),marks:[E,A],name:u,interactive:a,sort:w})}function CKt(e,t){const n=cl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Jne='item.orient === "left"',Zne='item.orient === "right"',a5=`(${Jne} || ${Zne})`,AKt=`datum.vgrad && ${a5}`,IKt=o5('"top"','"bottom"','"middle"'),kKt=o5('"right"','"left"','"center"'),RKt=`datum.vgrad && ${Zne} ? (${kKt}) : (${a5} && !(datum.vgrad && ${Jne})) ? "left" : ${Qne}`,NKt=`item._anchor || (${a5} ? "middle" : "start")`,PKt=`${AKt} ? (${Jne} ? -90 : 90) : 0`,OKt=`${a5} ? (datum.vgrad ? (${Zne} ? "bottom" : "top") : ${IKt}) : "top"`;function DKt(e,t,n,r){const i=cl(e,t),s={enter:{opacity:tr},update:{opacity:Rc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return Vo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:NKt},angle:{signal:PKt},align:{signal:RKt},baseline:{signal:OKt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Wl({type:Zb,role:XGt,style:Yne,from:r,encode:s},n)}function $Kt(e,t){let n;return pt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Age(e.path)+")":e.sphere&&(n="geoShape("+Age(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Age(e){return pt(e)&&e.signal?e.signal:rt(e)}function q4e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===s5?Hne:t||zne}function MKt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||q4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function LKt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ere(e,t){const n=R$e(e.type);n||Me("Unrecognized transform type: "+rt(e.type));const r=n5(n.type.toLowerCase(),null,W4e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function W4e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=FKt(o,t,n)}return r}function FKt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return jKt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return BKt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Fs(i)?i.map(s=>Ige(e,s,n)):Ige(e,i,n)}function Ige(e,t,n){const r=e.type;if(Fs(t))return Rge(r)?Me("Expression references can not be signals."):kB(r)?n.fieldRef(t):Nge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||kB(r);return i&&UKt(t)?n.exprRef(t.expr,t.as):i&&zKt(t)?yI(t.field,t.as):Rge(r)?Qh(t,n):VKt(r)?$t(n.getData(t).values):kB(r)?yI(t):Nge(r)?n.compareRef(t):t}}function jKt(e,t,n){return ht(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function BKt(e,t,n){const r=t[e.name];return e.array?(Fe(r)||Me("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>kge(e,i,n))):kge(e,r,n)}function kge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+rt(t));const s=En(W4e(i,t,n),i.key);return $t(n.add(LYt(s)))}const UKt=e=>e&&e.expr,zKt=e=>e&&e.field,VKt=e=>e==="data",Rge=e=>e==="expr",kB=e=>e==="field",Nge=e=>e==="compare";function HKt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=YO(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=ere(En({type:"aggregate",groupby:dt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=YO(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(_d(null,[{}]))),o||(o=YO(e,n)),{key:i,pulse:o,parent:a}}function YO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function gb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}gb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new gb(e,s,i,r,o)};function G4e(e){return ht(e)?e:null}function Pge(e,t,n){const r=r5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function VT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=hYt(s);let l=G4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:aq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(n5(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}gb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=G4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Pge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&Pge(e,u,n),a=e.add(N4e(u)),o=e.add(_d({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return VT(e,this,"extent","extent",t,!1)},domainRef(e,t){return VT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return VT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return VT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return VT(e,this,"indata","tupleindex",t,!0,!0)}};function qKt(e,t,n){const r=e.from.facet,i=r.name,s=YO(r,t);let o;r.name||Me("Facet must have a name: "+rt(r)),r.data||Me("Facet must reference a data set: "+rt(r)),r.field?o=t.add(D4e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(IYt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(_d()),l=a.add(Jb({pulse:$t(u)}));a.addData(i,new gb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function WKt(e,t,n){const r=t.add(D4e({pulse:n.pulse})),i=t.fork();i.add(Jb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Y4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(fM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Qh(l,t);u.update=c.$expr,u.params=c.$params}function u5(e,t){const n=q4e(e),r=e.type===s5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Hne||n===Vne,a,u,l,c,f,d,h;const p=n===zne||o||i,m=HKt(e.from,r,t);u=t.add(CYt({key:m.key||(e.key?yI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(_d({pulse:g})),u=t.add(OYt({markdef:MKt(e),interactive:LKt(e.interactive,t),clip:$Kt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(O4e(k4e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const E=ere(C,t),S=E.metadata;(S.generates||S.changes)&&Me("Mark transforms should not generate new data."),S.nomod||(c.params.mod=!0),E.params.pulse=$t(u),t.add(u=E)}),e.sort&&(u=t.add(zYt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(M4e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(P4e({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?qKt(e,t,m):p?WKt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=GKt(s,h,t));const w=t.add($4e({pulse:h})),x=t.add(Jb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new gb(t,l,w,x)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&Me("Marks only support modify triggers."),Y4e(C,t,f)}))}function GKt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Fs(s)?n.signalRef(s.signal):s,method:Fs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Fs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(MYt(o)))}function YKt(e,t){const n=t.config.legend,r=e.encode||{},i=cl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Kne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=KKt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(_d(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(NYt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===GO?(h=[wKt(e,c,n,r.gradient),Cge(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${P1(i.gradientLength())})/100))`)):p===fq?h=[EKt(e,c,n,r.gradient,v),Cge(e,n,r.labels,v)]:(f=CKt(e,n),h=[TKt(e,n,r,v,P1(f.columns))],d.size=JKt(e,t,h[0].marks)),h=[bI({role:GGt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(DKt(e,n,r.title,g)),u5(bI({role:qGt,from:g,encode:FS(QKt(i,e,n),s,fR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function KKt(e,t){let n=e.type||Tge;return!e.type&&XKt(e)===1&&(e.fill||e.stroke)&&(n=fte(t)?GO:CH(t)?fq:Tge),n!==GO?n:CH(t)?fq:GO}function XKt(e){return Kne.reduce((t,n)=>t+(e[n]?1:0),0)}function QKt(e,t,n){const r={enter:{},update:{}};return Vo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function JKt(e,t,n){const r=P1(Oge("size",e,n)),i=P1(Oge("strokeWidth",e,n)),s=P1(ZKt(n[1].encode,t,cR));return Qh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Oge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:V4e(e,n[0].encode)}function ZKt(e,t,n){return V4e("fontSize",e)||bKt("fontSize",t,n)}const eXt=`item.orient==="${jS}"?-90:item.orient==="${BS}"?90:0`;function tXt(e,t){e=ht(e)?{text:e}:e;const n=cl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(_d(null,[l])));return u.push(iXt(e,n,nXt(e),c)),e.subtitle&&u.push(sXt(e,n,r.subtitle,c)),u5(bI({role:QGt,from:c,encode:rXt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function nXt(e){const t=e.encode;return t&&t.title||En({name:e.name,interactive:e.interactive,style:e.style},t)}function rXt(e,t){const n={enter:{},update:{}};return Vo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Qne},angle:{signal:eXt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),FS(n,t,fR)}function iXt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Vo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Wl({type:Zb,role:JGt,style:cKt,from:r,encode:o},n)}function sXt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Vo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Wl({type:Zb,role:ZGt,style:fKt,from:r,encode:o},n)}function oXt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(ere(r,t))}),e.on&&e.on.forEach(r=>{Y4e(r,t,e.name)}),t.addDataPipeline(e.name,aXt(e,t,n))}function aXt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Fs(e.values)||qO(e.format)?(r.push(Dge(t,e)),r.push(i=yv())):r.push(i=yv({$ingest:e.values,$format:e.format})):e.url?qO(e.url)||qO(e.format)?(r.push(Dge(t,e)),r.push(i=yv())):r.push(i=yv({$request:e.url,$format:e.format})):e.source&&(i=a=dt(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=yv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=BYt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,yv())),i||r.push(yv()),r.push(Jb({})),r}function yv(e){const t=_d({},e);return t.metadata={source:!0},t}function Dge(e,t){return PYt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const K4e=e=>e===by||e===wd,l5=(e,t,n)=>Fs(e)?fXt(e.signal,t,n):e===jS||e===wd?t:n,ao=(e,t,n)=>Fs(e)?lXt(e.signal,t,n):K4e(e)?t:n,Jf=(e,t,n)=>Fs(e)?cXt(e.signal,t,n):K4e(e)?n:t,X4e=(e,t,n)=>Fs(e)?dXt(e.signal,t,n):e===wd?{value:t}:{value:n},uXt=(e,t,n)=>Fs(e)?hXt(e.signal,t,n):e===BS?{value:t}:{value:n},lXt=(e,t,n)=>Q4e(`${e} === '${wd}' || ${e} === '${by}'`,t,n),cXt=(e,t,n)=>Q4e(`${e} !== '${wd}' && ${e} !== '${by}'`,t,n),fXt=(e,t,n)=>tre(`${e} === '${jS}' || ${e} === '${wd}'`,t,n),dXt=(e,t,n)=>tre(`${e} === '${wd}'`,t,n),hXt=(e,t,n)=>tre(`${e} === '${BS}'`,t,n),Q4e=(e,t,n)=>(t=t!=null?oo(t):t,n=n!=null?oo(n):n,$ge(t)&&$ge(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[En({test:e},t)].concat(n||[])),$ge=e=>e==null||Object.keys(e).length===1,tre=(e,t,n)=>({signal:`${e} ? (${Tw(t)}) : (${Tw(n)})`}),pXt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${jS}' ? (${Tw(r)}) : `:"")+(n!=null?`${e} === '${by}' ? (${Tw(n)}) : `:"")+(i!=null?`${e} === '${BS}' ? (${Tw(i)}) : `:"")+(t!=null?`${e} === '${wd}' ? (${Tw(t)}) : `:"")+"(null)"}),Tw=e=>Fs(e)?e.signal:e==null?null:rt(e),mXt=(e,t)=>t===0?0:Fs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},oE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function M_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Yne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[cR][i]}return null}function Mge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function gXt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Fs(o)){const f=Mge([n.axisX,n.axisY]),d=Mge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ao(o,M_(l,n.axisX,i,r),M_(l,n.axisY,i,r));u={};for(l of d)u[l]=pXt(o.signal,M_(l,n.axisTop,i,r),M_(l,n.axisBottom,i,r),M_(l,n.axisLeft,i,r),M_(l,n.axisRight,i,r))}else a=o===wd||o===by?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?En({},i,a,u,s):i}function yXt(e,t,n,r){const i=cl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:Rc},exit:{opacity:tr}};Vo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Lge(e,0),c=Lge(e,1);return o.x=a.x=ao(s,l,tr),o.x2=a.x2=ao(s,c),o.y=a.y=Jf(s,l,tr),o.y2=a.y2=Jf(s,c),Wl({type:Xne,role:BGt,from:r,encode:u},n)}function Lge(e,t){return{scale:e.scale,range:t}}function vXt(e,t,n,r,i){const s=cl(e,t),o=e.orient,a=e.gridScale,u=l5(o,1,-1),l=bXt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:Rc},exit:f={opacity:tr}};Vo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:kc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ao(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:En(m,{mult:u,offset:l});return c.x=d.x=ao(o,p,g),c.y=d.y=Jf(o,p,g),c.x2=d.x2=Jf(o,y),c.y2=d.y2=ao(o,y),f.x=ao(o,p),f.y=Jf(o,p),Wl({type:Xne,role:UGt,key:kc,from:r,encode:h},n)}function bXt(e,t){if(t!==1)if(!pt(e))e=Fs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=En({},e);for(;n.mult!=null;)if(pt(n.mult))n=n.mult=En({},n.mult);else return n.mult=Fs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function _Xt(e,t,n,r,i,s){const o=cl(e,t),a=e.orient,u=l5(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:Rc},exit:c={opacity:tr}};Vo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=oo(i);h.mult=u;const p={scale:e.scale,field:kc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ao(a,tr,p),f.y2=l.y2=ao(a,h),c.x=ao(a,p),f.x=l.x=Jf(a,tr,p),f.x2=l.x2=Jf(a,h),c.y=Jf(a,p),Wl({type:Xne,role:VGt,key:kc,from:r,encode:d},n)}function RB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function wXt(e,t,n,r,i,s){const o=cl(e,t),a=e.orient,u=e.scale,l=l5(a,-1,1),c=P1(o("labelFlush")),f=P1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=oo(i);g.mult=l,g.offset=oo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:kc,band:.5,offset:H4e(s.offset,o("labelOffset"))},v=ao(a,p?RB(u,c,'"left"','"right"','"center"'):{value:"center"},uXt(a,"left","right")),b=ao(a,X4e(a,"bottom","top"),p?RB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=RB(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:tr,x:ao(a,y,g),y:Jf(a,y,g)},C={enter:x,update:m={opacity:Rc,text:{field:Gne},x:x.x,y:x.y,align:v,baseline:b},exit:{opacity:tr,x:x.x,y:x.y}};Vo(C,{dx:!d&&p?ao(a,w):null,dy:!h&&p?Jf(a,w):null}),Vo(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const E=o("labelBound");let S=o("labelOverlap");return S=S||E?{separation:o("labelSeparation"),method:S,order:"datum.index",bound:E?{scale:u,orient:a,tolerance:E}:null}:void 0,m.align!==v&&(m.align=oE(m.align,v)),m.baseline!==b&&(m.baseline=oE(m.baseline,b)),Wl({type:Zb,role:zGt,style:cR,key:kc,from:r,encode:C,overlap:S},n)}function EXt(e,t,n,r){const i=cl(e,t),s=e.orient,o=l5(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:oo(i("titleAnchor",null)),align:{signal:Qne}},update:u=En({},a,{opacity:Rc,text:oo(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${o5(0,1,.5)})`};return u.x=ao(s,c),u.y=Jf(s,c),a.angle=ao(s,tr,mXt(o,90)),a.baseline=ao(s,X4e(s,by,wd),{value:by}),u.angle=a.angle,u.baseline=a.baseline,Vo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),xXt(i,s,l,n),l.update.align=oE(l.update.align,a.align),l.update.angle=oE(l.update.angle,a.angle),l.update.baseline=oE(l.update.baseline,a.baseline),Wl({type:Zb,role:HGt,style:Yne,from:r,encode:l},n)}function xXt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=oE(oo(a),n.update[u]),!1):!Z_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?oo(o):ao(t,oo(o),oo(s))}function SXt(e,t){const n=gXt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=cl(e,n),l=_Kt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(_d({},[c]))),d=$t(t.add(TYt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(vXt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(_Xt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(wXt(e,n,r.labels,d,p,l))),c.domain&&h.push(yXt(e,n,r.domain,f)),c.title&&h.push(EXt(e,n,r.title,f)),u5(bI({role:jGt,from:f,encode:FS(TXt(u,e),i,fR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function TXt(e,t){const n={enter:{},update:{}};return Vo(n,{orient:e("orient"),offset:e("offset")||0,position:Tf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function J4e(e,t,n){const r=dt(e.signals),i=dt(e.scales);return n||r.forEach(s=>R4e(s,t)),dt(e.projections).forEach(s=>rKt(s,t)),i.forEach(s=>qYt(s,t)),dt(e.data).forEach(s=>oXt(s,t)),i.forEach(s=>WYt(s,t)),(n||r).forEach(s=>SYt(s,t)),dt(e.axes).forEach(s=>SXt(s,t)),dt(e.marks).forEach(s=>u5(s,t)),dt(e.legends).forEach(s=>YKt(s,t)),e.title&&tXt(e.title,t),t.parseLambdas(),t}const CXt=e=>FS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function AXt(e,t){const n=t.config,r=$t(t.root=t.add(fM())),i=IXt(e,n);i.forEach(l=>R4e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(_d()),o=t.add(O4e(k4e(CXt(e.encode),s5,Vne,e.style,t,{pulse:$t(s)}))),a=t.add(M4e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),J4e(e,t,i),t.operators.push(a);let u=t.add(P4e({mark:r,pulse:$t(a)}));return u=t.add($4e({pulse:$t(u)})),u=t.add(Jb({pulse:$t(u)})),t.addData("root",new gb(t,s,s,u)),t}function HT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function IXt(e,t){const n=o=>Tf(e[o],t[o]),r=[HT("background",n("background")),HT("autosize",MGt(n("autosize"))),HT("padding",FGt(n("padding"))),HT("width",n("width")||0),HT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return dt(e.signals).forEach(o=>{Ft(i,o.name)?o=En(i[o.name],o):r.push(o),s[o.name]=o}),dt(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function Z4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Fge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Z4e.prototype=Fge.prototype={parse(e){return J4e(e,this)},fork(){return new Fge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof oq?$t(e):e;return this.add(jYt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Jb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ht(e))return yI(e,t);e.signal||Me("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(kYt(i)))}return r},compareRef(e){let t=!1;const n=s=>Fs(s)?(t=!0,this.signalRef(s.signal)):pYt(s)?(t=!0,this.exprRef(s.expr)):s,r=dt(e.field).map(n),i=dt(e.order).map(n);return t?$t(this.add(Sge({fields:r,orders:i}))):Ege(r,i)},keyRef(e,t){let n=!1;const r=s=>Fs(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=dt(e).map(r),n?$t(this.add(RYt({fields:e,flat:t}))):cYt(e,t)},sortRef(e){if(!e)return e;const t=r5(e.op,e.field),n=e.order||fYt;return n.signal?$t(this.add(Sge({fields:t,orders:this.signalRef(n.signal)}))):Ege(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+rt(e));const n=t instanceof oq?t:this.add(fM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(fM(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Qh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!pt(e)?e:this.signalRef(e.signal||nre(e))},exprRef(e,t){const n={expr:Qh(e,this)};return t&&(n.expr.$name=t),$t(this.add(AYt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+rt(e)),this.bindings.push(En({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Me("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,UYt(t))},addProjection(e,t){this.addScaleProj(e,FYt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.addData(e,gb.fromEntries(this,t))}};function nre(e){return(Fe(e)?kXt:RXt)(e)}function kXt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(pt(i)?i.signal||nre(i):rt(i))}return n+"]"}function RXt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(pt(i)?i.signal||nre(i):rt(i));return t+"}"}function NXt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function PXt(e,t,n){return pt(e)||Me("Input Vega specification must be an object."),t=RS(NXt(),t,e.config),AXt(e,new Z4e(t,n)).toRuntime()}var OXt="5.29.0";En(ax,Pjt,_Ut,JUt,kzt,Mzt,lVt,zzt,fVt,mVt,TVt,PVt);const DXt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:sR,CanvasRenderer:Z$,DATE:rl,DAY:ga,DAYOFYEAR:Xh,Dataflow:sE,Debug:S3e,Error:XZ,EventStream:TF,Gradient:UMe,GroupItem:FF,HOURS:Vl,Handler:Mte,HybridHandler:PLe,HybridRenderer:LH,Info:x3e,Item:LF,MILLISECONDS:cd,MINUTES:Hl,MONTH:wa,Marks:ql,MultiPulse:gee,None:E3e,Operator:Zr,Parameters:SF,Pulse:F0,QUARTER:nl,RenderType:h0,Renderer:iR,ResourceLoader:YMe,SECONDS:Uc,SVGHandler:bLe,SVGRenderer:zte,SVGStringRenderer:NLe,Scenegraph:fLe,TIME_UNITS:uee,Transform:Pe,View:y4e,WEEK:Ds,Warn:QZ,YEAR:Lo,accessor:ll,accessorFields:_a,accessorName:Zi,array:dt,ascending:vF,bandwidthNRD:_ee,bin:O$e,bootstrapCI:D$e,boundClip:zLe,boundContext:eR,boundItem:PH,boundMark:aLe,boundStroke:dg,changeset:Kb,clampRange:$3e,codegenExpression:H6e,compare:nee,constant:Ia,cumulativeLogNormal:Cee,cumulativeNormal:AF,cumulativeUniform:Ree,dayofyear:G3e,debounce:ree,defaultLocale:fee,definition:R$e,densityLogNormal:Tee,densityNormal:wee,densityUniform:kee,domChild:Ps,domClear:mc,domCreate:f0,domFind:$te,dotbin:$$e,error:Me,expressionFunction:gs,extend:En,extent:Kh,extentIndex:M3e,falsy:Dg,fastmap:PS,field:jc,flush:L3e,font:VF,fontFamily:rR,fontSize:pp,format:kO,formatLocale:B$,formats:pee,hasOwnProperty:Ft,id:zk,identity:Aa,inferType:b$e,inferTypes:_$e,ingest:wr,inherits:ut,inrange:Ew,interpolate:dte,interpolateColors:$F,interpolateRange:AMe,intersect:FLe,intersectBoxLine:xw,intersectPath:_te,intersectPoint:wte,intersectRule:XMe,isArray:Fe,isBoolean:Qy,isDate:L0,isFunction:xn,isIterable:F3e,isNumber:lr,isObject:pt,isRegExp:j3e,isString:ht,isTuple:EF,key:iee,lerp:B3e,lineHeight:gy,loader:_F,locale:y$e,logger:JZ,lruCache:U3e,markup:Ute,merge:z3e,mergeConfig:RS,multiLineOffset:Pte,one:kS,pad:V3e,panLinear:k3e,panLog:R3e,panPow:N3e,panSymlog:P3e,parse:PXt,parseExpression:kne,parseSelector:Zy,path:z6,pathCurves:yte,pathEqual:VLe,pathParse:fx,pathRectangle:HMe,pathRender:lI,pathSymbols:VMe,pathTrail:qMe,peek:Qn,point:qF,projection:ene,quantileLogNormal:Aee,quantileNormal:IF,quantileUniform:Nee,quantiles:vee,quantizeInterpolator:IMe,quarter:O3e,quartiles:bee,get random(){return zc},randomInteger:M8t,randomKDE:xee,randomLCG:$8t,randomLogNormal:L$e,randomMixture:F$e,randomNormal:Eee,randomUniform:j$e,read:x$e,regressionConstant:Pee,regressionExp:U$e,regressionLinear:Oee,regressionLoess:H$e,regressionLog:B$e,regressionPoly:V$e,regressionPow:z$e,regressionQuad:Dee,renderModule:WF,repeat:AC,resetDefaultLocale:P5t,resetSVGClipId:GMe,resetSVGDefIds:F7t,responseType:E$e,runtimeContext:i4e,sampleCurve:RF,sampleLogNormal:See,sampleNormal:CF,sampleUniform:Iee,scale:mr,sceneEqual:Vte,sceneFromJSON:lLe,scenePickVisit:q$,sceneToJSON:uLe,sceneVisit:fd,sceneZOrder:Ete,scheme:hte,serializeXML:ALe,setHybridRendererOptions:D7t,setRandom:O8t,span:Vk,splitAccessPath:hp,stringValue:rt,textMetrics:Pl,timeBin:c$e,timeFloor:e$e,timeFormatLocale:oI,timeInterval:OS,timeOffset:r$e,timeSequence:o$e,timeUnitSpecifier:W3e,timeUnits:lee,toBoolean:see,toDate:oee,toNumber:ya,toSet:ld,toString:aee,transform:N$e,transforms:ax,truncate:H3e,truthy:Bc,tupleid:Mt,typeParsers:xH,utcFloor:t$e,utcInterval:DS,utcOffset:i$e,utcSequence:a$e,utcdayofyear:X3e,utcquarter:D3e,utcweek:Q3e,version:OXt,visitArray:zg,week:Y3e,writeConfig:NS,zero:n0,zoomLinear:ZZ,zoomLog:eee,zoomPow:j$,zoomSymlog:tee},Symbol.toStringTag,{value:"Module"}));function $Xt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var MXt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},LXt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},FXt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const jXt=Array.prototype.slice,vv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,jXt.call(t,1))},BXt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var UXt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:BXt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return vv("join",arguments)},indexof:function(){return vv("indexOf",arguments)},lastindexof:function(){return vv("lastIndexOf",arguments)},slice:function(){return vv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return vv("substring",arguments,String)},split:function(){return vv("split",arguments,String)},replace:function(){return vv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const zXt=["view","item","group","xy","x","y"],hq=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&hq.add(setImmediate);const VXt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:MXt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),hq.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||UXt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>LXt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>FXt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,hq.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function qT(e,t,n,r,i,s){const o=a=>VXt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,zXt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var HXt={operator(e,t){const n=t.ast,r=e.functions;return i=>qT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>qT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>qT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return qT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=qT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&$Xt(o,r,s),l}}};const qXt="vega-lite",WXt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',GXt="5.18.1",YXt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],KXt="https://vega.github.io/vega-lite/",XXt="Vega-Lite is a concise high-level language for interactive visualization.",QXt=["vega","chart","visualization"],JXt="build/vega-lite.js",ZXt="build/vega-lite.min.js",eQt="build/vega-lite.min.js",tQt="build/src/index",nQt="build/src/index.d.ts",rQt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},iQt=["bin","build","src","vega-lite*","tsconfig.json"],sQt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},oQt={type:"git",url:"https://github.com/vega/vega-lite.git"},aQt="BSD-3-Clause",uQt={url:"https://github.com/vega/vega-lite/issues"},lQt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},cQt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},fQt={vega:"^5.24.0"},dQt={node:">=18"},hQt="yarn@1.22.19",pQt={name:qXt,author:WXt,version:GXt,collaborators:YXt,homepage:KXt,description:XXt,keywords:QXt,main:JXt,unpkg:ZXt,jsdelivr:eQt,module:tQt,types:nQt,bin:rQt,files:iQt,scripts:sQt,repository:oQt,license:aQt,bugs:uQt,devDependencies:lQt,dependencies:cQt,peerDependencies:fQt,engines:dQt,packageManager:hQt};function rre(e){return!!e.or}function ire(e){return!!e.and}function sre(e){return!!e.not}function KO(e,t){if(sre(e))KO(e.not,t);else if(ire(e))for(const n of e.and)KO(n,t);else if(rre(e))for(const n of e.or)KO(n,t);else t(e)}function aE(e,t){return sre(e)?{not:aE(e.not,t)}:ire(e)?{and:e.and.map(n=>aE(n,t))}:rre(e)?{or:e.or.map(n=>aE(n,t))}:t(e)}const nn=structuredClone;function eFe(e){throw new Error(e)}function gx(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function Gu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>zr(e)).join(",")})`};function zn(e){if(lr(e))return e;const t=ht(e)?e:zr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function pq(e){return e===!1||e===null}function Vn(e,t){return e.includes(t)}function yb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function ore(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function tFe(e,...t){for(const n of t)mQt(e,n??{});return e}function mQt(e,t){for(const n of Ge(t))NS(e,n,t[n],!0)}function gh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function gQt(e,t){const n=Ge(e),r=Ge(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function nFe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function are(e,t){for(const n of e)if(t.has(n))return!0;return!1}function mq(e){const t=new Set;for(const n of e){const i=hp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ure(e,t){return e===void 0||t===void 0?!0:are(mq(e),mq(t))}function Ur(e){return Ge(e).length===0}const Ge=Object.keys,Fo=Object.values,_y=Object.entries;function _I(e){return e===!0||e===!1}function Ii(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function F2(e,t){return sre(e)?`!(${F2(e.not,t)})`:ire(e)?`(${e.and.map(n=>F2(n,t)).join(") && (")})`:rre(e)?`(${e.or.map(n=>F2(n,t)).join(") || (")})`:t(e)}function dM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&dM(e[n],t)&&delete e[n],Ur(e)}function dR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function lre(e,t="datum"){const n=hp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function rFe(e,t="datum"){return`${t}[${rt(hp(e).join("."))}]`}function yQt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Vc(e){return`${hp(e).map(yQt).join("\\.")}`}function vb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function US(e){return`${hp(e).join(".")}`}function yx(e){return e?hp(e).length:0}function ps(...e){for(const t of e)if(t!==void 0)return t}let iFe=42;function sFe(e){const t=++iFe;return e?String(e)+t:t}function vQt(){iFe=42}function oFe(e){return aFe(e)?e:`__${e}`}function aFe(e){return e.startsWith("__")}function wI(e){if(e!==void 0)return(e%360+360)%360}function c5(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const jge=Object.getPrototypeOf(structuredClone({}));function Rl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Rl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Rl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==jge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==jge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Rl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function zr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const _m="row",wm="column",f5="facet",ki="x",go="y",Ed="x2",yp="y2",ev="xOffset",zS="yOffset",xd="radius",pg="radius2",of="theta",mg="theta2",Sd="latitude",Td="longitude",Cd="latitude2",Hc="longitude2",il="color",vp="fill",bp="stroke",sl="shape",gg="size",e_="angle",yg="opacity",tv="fillOpacity",nv="strokeOpacity",rv="strokeWidth",iv="strokeDash",hR="text",vx="order",pR="detail",d5="key",bb="tooltip",h5="href",p5="url",m5="description",bQt={x:1,y:1,x2:1,y2:1},uFe={theta:1,theta2:1,radius:1,radius2:1};function lFe(e){return e in uFe}const cre={longitude:1,longitude2:1,latitude:1,latitude2:1};function cFe(e){switch(e){case Sd:return"y";case Cd:return"y2";case Td:return"x";case Hc:return"x2"}}function fFe(e){return e in cre}const _Qt=Ge(cre),fre={...bQt,...uFe,...cre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function uE(e){return e===il||e===vp||e===bp}const dFe={row:1,column:1,facet:1},Tc=Ge(dFe),dre={...fre,...dFe},wQt=Ge(dre),{order:sln,detail:oln,tooltip:aln,...EQt}=dre,{row:uln,column:lln,facet:cln,...xQt}=EQt;function SQt(e){return!!xQt[e]}function hFe(e){return!!dre[e]}const TQt=[Ed,yp,Cd,Hc,mg,pg];function pFe(e){return t_(e)!==e}function t_(e){switch(e){case Ed:return ki;case yp:return go;case Cd:return Sd;case Hc:return Td;case mg:return of;case pg:return xd}return e}function wy(e){if(lFe(e))switch(e){case of:return"startAngle";case mg:return"endAngle";case xd:return"outerRadius";case pg:return"innerRadius"}return e}function _p(e){switch(e){case ki:return Ed;case go:return yp;case Sd:return Cd;case Td:return Hc;case of:return mg;case xd:return pg}}function ol(e){switch(e){case ki:case Ed:return"width";case go:case yp:return"height"}}function mFe(e){switch(e){case ki:return"xOffset";case go:return"yOffset";case Ed:return"x2Offset";case yp:return"y2Offset";case of:return"thetaOffset";case xd:return"radiusOffset";case mg:return"theta2Offset";case pg:return"radius2Offset"}}function hre(e){switch(e){case ki:return"xOffset";case go:return"yOffset"}}function CQt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const AQt=Ge(fre),{x:fln,y:dln,x2:hln,y2:pln,xOffset:mln,yOffset:gln,latitude:yln,longitude:vln,latitude2:bln,longitude2:_ln,theta:wln,theta2:Eln,radius:xln,radius2:Sln,...pre}=fre,IQt=Ge(pre),mre={x:1,y:1},wp=Ge(mre);function ms(e){return e in mre}const gre={theta:1,radius:1},kQt=Ge(gre);function g5(e){return e==="width"?ki:go}const gFe={xOffset:1,yOffset:1};function mR(e){return e in gFe}const{text:Tln,tooltip:Cln,href:Aln,url:Iln,description:kln,detail:Rln,key:Nln,order:Pln,...yFe}=pre,RQt=Ge(yFe);function NQt(e){return!!pre[e]}function PQt(e){switch(e){case il:case vp:case bp:case gg:case sl:case yg:case rv:case iv:return!0;case tv:case nv:case e_:return!1}}const vFe={...mre,...gre,...gFe,...yFe},y5=Ge(vFe);function vg(e){return!!vFe[e]}function OQt(e,t){return $Qt(e)[t]}const bFe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Oln,...DQt}=bFe;function $Qt(e){switch(e){case il:case vp:case bp:case m5:case pR:case d5:case bb:case h5:case vx:case yg:case tv:case nv:case rv:case f5:case _m:case wm:return bFe;case ki:case go:case ev:case zS:case Sd:case Td:return DQt;case Ed:case yp:case Cd:case Hc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case gg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case iv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case sl:return{point:"always",geoshape:"always"};case hR:return{text:"always"};case e_:return{point:"always",square:"always",text:"always"};case p5:return{image:"always"};case of:return{text:"always",arc:"always"};case xd:return{text:"always",arc:"always"};case mg:case pg:return{arc:"always"}}}function NB(e){switch(e){case ki:case go:case of:case xd:case ev:case zS:case gg:case e_:case rv:case yg:case tv:case nv:case Ed:case yp:case mg:case pg:return;case f5:case _m:case wm:case sl:case iv:case hR:case bb:case h5:case p5:case m5:return"discrete";case il:case vp:case bp:return"flexible";case Sd:case Td:case Cd:case Hc:case pR:case d5:case vx:return}}const MQt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},LQt={count:1,min:1,max:1};function Km(e){return!!e&&!!e.argmin}function sv(e){return!!e&&!!e.argmax}function yre(e){return ht(e)&&!!MQt[e]}const FQt=new Set(["count","valid","missing","distinct"]);function _Fe(e){return ht(e)&&FQt.has(e)}function jQt(e){return ht(e)&&Vn(["min","max"],e)}const BQt=new Set(["count","sum","distinct","valid","missing"]),UQt=new Set(["mean","average","median","q1","q3","min","max"]);function wFe(e){return Qy(e)&&(e=k5(e,void 0)),"bin"+Ge(e).map(t=>v5(e[t])?Ii(`_${t}_${_y(e[t])}`):Ii(`_${t}_${e[t]}`)).join("")}function ci(e){return e===!0||n_(e)&&!e.binned}function Ao(e){return e==="binned"||n_(e)&&e.binned===!0}function n_(e){return pt(e)}function v5(e){return e==null?void 0:e.param}function Bge(e){switch(e){case _m:case wm:case gg:case il:case vp:case bp:case rv:case yg:case tv:case nv:case sl:return 6;case iv:return 4;default:return 10}}function gR(e){return!!(e!=null&&e.expr)}function Nu(e){const t=Ge(e||{}),n={};for(const r of t)n[r]=Sl(e[r]);return n}function EFe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=gx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function qg(e){return ht(e)||Fe(e)&&ht(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function ov(e){return!!e.step}function zQt(e){return Fe(e)?!1:"fields"in e&&!("data"in e)}function VQt(e){return Fe(e)?!1:"fields"in e&&"data"in e}function cm(e){return Fe(e)?!1:"field"in e&&"data"in e}const HQt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},qQt=Ge(HQt),WQt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},gq=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function xFe(e){const t=Fe(e.condition)?e.condition.map(Uge):Uge(e.condition);return{...Sl(e),condition:t}}function Sl(e){if(gR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Uge(e){if(gR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function yi(e){if(gR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function GQt(e){return Rt(e)?e.signal:rt(e)}function zge(e){return Rt(e)?e.signal:rt(e.value)}function jf(e){return Rt(e)?e.signal:e==null?null:rt(e)}function YQt(e,t,n){for(const r of n){const i=Xm(r,t.markDef,t.config);i!==void 0&&(e[r]=yi(i))}return e}function SFe(e){return[].concat(e.type,e.style??[])}function _r(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Xm(e,t,n,r)}function Xm(e,t,n,{vgChannel:r}={}){return ps(r?hM(e,t,n.style):void 0,hM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function hM(e,t,n){return TFe(e,SFe(t),n)}function TFe(e,t,n){t=dt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function CFe(e,t){return dt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function AFe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Rl(i,r))return;n.push(r)}),n}function IFe(e,t){return Rl(e,t)||!t?e:e?[...dt(e),...dt(t)].join(", "):t}function kFe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((qg(n)||Rt(n))&&(qg(r)||Rt(r)))return{explicit:e.explicit,value:IFe(n,r)};if(qg(n)||Rt(n))return{explicit:e.explicit,value:n};if(qg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!qg(n)&&!Rt(n)&&!qg(r)&&!Rt(r))return{explicit:e.explicit,value:AFe(n,r)};throw new Error("It should never reach here")}function vre(e){return`Invalid specification ${zr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const KQt='Autosize "fit" only works for single views and layered views.';function Vge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Hge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function qge(e){return e?`Dropping "fit-${e}" because spec has discrete ${ol(e)}.`:'Dropping "fit" because spec has discrete size.'}function bre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Wge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function XQt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function QQt(e){return`The "nearest" transform is not supported for ${e} marks.`}function RFe(e){return`Selection not supported for ${e} yet.`}function JQt(e){return`Cannot find a selection named "${e}".`}const ZQt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",eJt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",tJt="Legend bindings are only supported for selections over an individual field or encoding channel.";function nJt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function rJt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const iJt="The same selection must be used to override scale domains in a layered view.",sJt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function oJt(e){return`Unknown repeated value "${e}".`}function Gge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const aJt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function uJt(e){return`Unrecognized parse "${e}".`}function Yge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const lJt="Attempt to add the same child twice.";function cJt(e){return`Ignoring an invalid transform: ${zr(e)}.`}const fJt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Kge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function dJt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${zr(t)} is overridden by a child projection ${zr(n)}.`}const hJt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function pJt(e){return`${e}Offset dropped because ${e} is continuous`}function mJt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${zr(n)}}.`}function NFe(e){return`Invalid field type "${e}".`}function gJt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function yJt(e){return`Invalid aggregation operator "${e}".`}function PFe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function vJt(e){return`Position range does not support relative band size for ${e}.`}function yq(e,t){return`Dropping ${zr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const bJt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function b5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function _Jt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function wJt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function EJt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function xJt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function PB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function SJt(e){return`The ${e} for range marks cannot be an expression`}function TJt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function CJt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function AJt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function IJt(e){return`Cannot use the relative band size with ${e} scale.`}function kJt(e){return`Using unaggregated domain with raw field has no effect (${zr(e)}).`}function RJt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function NJt(e){return`Unaggregated domain is currently unsupported for log scale (${zr(e)}).`}function PJt(e){return`Cannot apply size to non-oriented mark "${e}".`}function OJt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function DJt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function OFe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function DFe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function $Jt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${zr(n)} and ${zr(r)}). Using ${zr(n)}.`}function MJt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${zr(n)} and ${zr(r)}). Using the union of the two domains.`}function LJt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function FJt(e){return`Dropping sort property ${zr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Xge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",jJt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",BJt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",UJt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function zJt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function VJt(e){return`Stack is applied to a non-linear scale (${e}).`}function HJt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function pM(e,t){return`Invalid ${e}: ${zr(t)}.`}function qJt(e){return`Dropping day from datetime ${zr(e)} as day cannot be combined with other units.`}function WJt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function GJt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function YJt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Qge(e){return`1D error band does not support ${e}.`}function $Fe(e){return`Channel ${e} is required for "binned" bin.`}function KJt(e){return`Channel ${e} should not be used with "binned" bin.`}function XJt(e){return`Domain for ${e} is required for threshold scale.`}const MFe=JZ(QZ);let bx=MFe;function QJt(e){return bx=e,bx}function JJt(){return bx=MFe,bx}function Je(...e){bx.warn(...e)}function ZJt(...e){bx.debug(...e)}function r_(e){if(e&&pt(e)){for(const t of wre)if(t in e)return!0}return!1}const LFe=["january","february","march","april","may","june","july","august","september","october","november","december"],eZt=LFe.map(e=>e.substr(0,3)),FFe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],tZt=FFe.map(e=>e.substr(0,3));function nZt(e){if(c5(e)&&(e=+e),lr(e))return e>4&&Je(pM("quarter",e)),e-1;throw new Error(pM("quarter",e))}function rZt(e){if(c5(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=LFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=eZt.indexOf(r);if(i!==-1)return i;throw new Error(pM("month",e))}}function iZt(e){if(c5(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=FFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=tZt.indexOf(r);if(i!==-1)return i;throw new Error(pM("day",e))}}function _re(e,t){const n=[];if(t&&e.day!==void 0&&Ge(e).length>1&&(Je(qJt(e)),e=nn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?rZt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?nZt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?iZt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function _b(e){const n=_re(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function sZt(e){const n=_re(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function oZt(e){const t=_re(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const jFe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},wre=Ge(jFe);function aZt(e){return!!jFe[e]}function i_(e){return pt(e)?e.binned:BFe(e)}function BFe(e){return e&&e.startsWith("binned")}function Ere(e){return e.startsWith("utc")}function uZt(e){return e.substring(3)}const lZt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function _5(e){return wre.filter(t=>zFe(e,t))}function UFe(e){const t=_5(e);return t[t.length-1]}function zFe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function cZt(e,t,{end:n}={end:!1}){const r=lre(t),i=Ere(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of wre)zFe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),sZt(a)}function VFe(e){if(!e)return;const t=_5(e);return`timeUnitSpecifier(${zr(t)}, ${zr(lZt)})`}function fZt(e,t,n){if(!e)return;const r=VFe(e);return`${n||Ere(e)?"utc":"time"}Format(${t}, ${r})`}function fo(e){if(!e)return;let t;return ht(e)?BFe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:pt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Ere(t.unit)&&(t.utc=!0,t.unit=uZt(t.unit)),t}function dZt(e){const{utc:t,...n}=fo(e);return n.unit?(t?"utc":"")+Ge(n).map(r=>Ii(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ge(n).map(r=>Ii(`_${r}_${n[r]}`)).join("")}function HFe(e,t=n=>n){const n=fo(e),r=UFe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=qFe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(_b(a))} - ${t(_b(i))}`}}const hZt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function pZt(e){return!!hZt[e]}function qFe(e,t=1){if(pZt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function mZt(e){return e==null?void 0:e.param}function xre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Sre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Tre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Cre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Are(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Ire(e){if(e!=null&&e.field){if(Fe(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function kre(e){return!!(e!=null&&e.field)&&(Fe(e.oneOf)||Fe(e.in))}function gZt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function WFe(e){return kre(e)||xre(e)||Ire(e)||Sre(e)||Cre(e)||Tre(e)||Are(e)}function Ld(e,t){return R5(e,{timeUnit:t,wrapTime:!0})}function yZt(e,t){return e.map(n=>Ld(n,t))}function GFe(e,t=!0){const{field:n}=e,r=fo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:cZt(i,n)})`:o;if(xre(e))return`${a}===${Ld(e.equal,i)}`;if(Sre(e)){const u=e.lt;return`${a}<${Ld(u,i)}`}else if(Cre(e)){const u=e.gt;return`${a}>${Ld(u,i)}`}else if(Tre(e)){const u=e.lte;return`${a}<=${Ld(u,i)}`}else if(Are(e)){const u=e.gte;return`${a}>=${Ld(u,i)}`}else{if(kre(e))return`indexof([${yZt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(gZt(e))return Rre(a,e.valid);if(Ire(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Ld(l,i)+", "+Ld(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Ld(l,i)}`),c!==null&&f.push(`${a} <= ${Ld(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${zr(e)}`)}function Rre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function vZt(e){return WFe(e)&&e.timeUnit?{...e,timeUnit:fo(e.timeUnit)}:e}const yR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function bZt(e){return e==="quantitative"||e==="temporal"}function YFe(e){return e==="ordinal"||e==="nominal"}const wb=yR.quantitative,Nre=yR.ordinal,_x=yR.temporal,Pre=yR.nominal,VS=yR.geojson;function _Zt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case wb:return"quantitative";case"t":case _x:return"temporal";case"o":case Nre:return"ordinal";case"n":case Pre:return"nominal";case VS:return"geojson"}}const Yu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},vq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function wZt(e,t){const n=vq[e],r=vq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const EZt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Jge(e){return EZt[e]}const KFe=new Set(["linear","log","pow","sqrt","symlog"]),XFe=new Set([...KFe,"time","utc"]);function QFe(e){return KFe.has(e)}const JFe=new Set(["quantile","quantize","threshold"]),xZt=new Set([...XFe,...JFe,"sequential","identity"]),SZt=new Set(["ordinal","bin-ordinal","point","band"]);function ho(e){return SZt.has(e)}function Gl(e){return xZt.has(e)}function Bf(e){return XFe.has(e)}function wx(e){return JFe.has(e)}const TZt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function CZt(e){return!ht(e)&&!!e.name}function ZFe(e){return e==null?void 0:e.param}function AZt(e){return e==null?void 0:e.unionWith}function IZt(e){return pt(e)&&"field"in e}const kZt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Dln,domain:$ln,range:Mln,rangeMax:Lln,rangeMin:Fln,scheme:jln,...RZt}=kZt,NZt=Ge(RZt);function bq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Bf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Bf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Bf(e);case"nice":return Bf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Gl(e)&&!Vn(["log","time","utc","threshold","quantile"],e)}}function e5e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return uE(e)?void 0:AJt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function PZt(e,t){return Vn([Nre,Pre],t)?e===void 0||ho(e):t===_x?Vn([Yu.TIME,Yu.UTC,void 0],e):t===wb?QFe(e)||wx(e)||e===void 0:!0}function OZt(e,t,n=!1){if(!vg(e))return!1;switch(e){case ki:case go:case ev:case zS:case of:case xd:return Bf(t)||t==="band"?!0:t==="point"?!n:!1;case gg:case rv:case yg:case tv:case nv:case e_:return Bf(t)||wx(t)||Vn(["band","point","ordinal"],t);case il:case vp:case bp:return t!=="band";case iv:case sl:return t==="ordinal"||wx(t)}}function Ore(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=$re(e);return Ze(n)&&!_Fe(n.aggregate)&&i&&Bf(i.get("type"))?DZt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function DZt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return _r("invalid",n,i)===null?[$Zt(e,t),r]:r}function $Zt(e,t){const n=Dre(e,!0),i=t_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Dre(e,t=!0){return Rre(ht(e)?e:at(e,{expr:"datum"}),!t)}function MZt(e){const{datum:t}=e;return r_(t)?_b(t):`${zr(t)}`}function O1(e,t,n,r){const i={};if(t&&(i.scale=t),Ep(e)){const{datum:s}=e;r_(s)?i.signal=_b(s):Rt(s)?i.signal=s.signal:gR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function mM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function LZt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function $re({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cn(t)){const f=o==null?void 0:o.get("type");if(au(t)){c??(c=Ey({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ci(d)||c&&h&&p===_x)return a!=null&&a.impute?O1(t,s,{binSuffix:"mid"},{offset:u}):c&&!ho(f)?mM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):O1(t,s,wR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ao(d)){if(Ze(n))return mM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je($Fe(e===ki?Ed:yp))}}return O1(t,s,ho(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(dd(t)){const f=t.value,d=u?{offset:u}:{};return{...j2(e,f),...d}}}return xn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function j2(e,t){return Vn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Vn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:yi(t)}function Eb(e){return e&&e!=="number"&&e!=="time"}function t5e(e,t,n){return`${e}(${t}${n?`, ${zr(n)}`:""})`}const FZt="  ";function Mre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Eb(n))return Uf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=n5e(e,r,i),a=Ex(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Uf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Uf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Uf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Sx(e)){const c=BZt({field:o,timeUnit:Ze(e)?(u=fo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:o_(e)&&((l=e.scale)==null?void 0:l.type)===Yu.UTC});return c?{signal:c}:void 0}if(t=_q({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&ci(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:vR(o,c,t,n,s)}}else return t||Ex(e)==="quantitative"?{signal:`${s5e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function n5e(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):MZt(e)}function Uf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=n5e(e,r,i)),o!=="datum.value"&&Ze(e)&&ci(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:vR(o,a,t,n,s)}}return{signal:t5e(n,o,t)}}function r5e(e,t,n,r,i,s){var o;if(!(ht(r)&&Eb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Ex(e)==="quantitative"&&(i.normalizedNumberFormatType&&xx(e)&&e.stack==="normalize"||i.numberFormatType))){if(xx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return _q({type:"quantitative",config:i,normalizeStack:!0});if(Sx(e)){const a=Ze(e)?(o=fo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:jZt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return _q({type:t,specifiedFormat:n,config:i})}}function i5e(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(Sx(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=fo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function _q({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(ht(t))return t;if(e===wb)return r?n.normalizedNumberFormat:n.numberFormat}function jZt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:VFe(t)}:r?void 0:n.timeFormat)}function s5e(e,t){return`format(${e}, "${t||""}")`}function Zge(e,t,n,r){return Eb(n)?t5e(n,e,t):s5e(e,(ht(t)?t:void 0)??r.numberFormat)}function vR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return vR(e,t,i.numberFormat,i.numberFormatType,i);const s=Zge(e,n,r,i),o=Zge(t,n,r,i);return`${Rre(e,!1)} ? "null" : ${s} + "${FZt}" + ${o}`}function BZt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=ht(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):fZt(t,e,s)}const hu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},o5e=hu.arc,w5=hu.area,E5=hu.bar,UZt=hu.image,x5=hu.line,S5=hu.point,zZt=hu.rect,gM=hu.rule,a5e=hu.text,Lre=hu.tick,VZt=hu.trail,Fre=hu.circle,jre=hu.square,u5e=hu.geoshape;function s_(e){return["line","area","trail"].includes(e)}function EI(e){return["rect","bar","image","arc"].includes(e)}const HZt=new Set(Ge(hu));function Jh(e){return e.type}const qZt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],WZt=["fill","fillOpacity"],GZt=[...qZt,...WZt],YZt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},e0e=Ge(YZt),KZt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},XZt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},QZt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},l5e=Ge(QZt);function xb(e){return e&&e.band!=null}const JZt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},c5e=5,ZZt={binSpacing:1,continuousBandSize:c5e,minBandSize:.25,timeUnitBandPosition:.5},een={binSpacing:0,continuousBandSize:c5e,minBandSize:.25,timeUnitBandPosition:.5},ten={thickness:1};function nen(e){return Jh(e)?e.type:e}const T5="min",ren={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function t0e(e){return e in ren}function f5e(e){return!!(e!=null&&e.encoding)}function Nh(e){return e&&(e.op==="count"||!!e.field)}function d5e(e){return e&&Fe(e)}function bR(e){return"row"in e||"column"in e}function Bre(e){return!!e&&"header"in e}function C5(e){return"facet"in e}function ien(e){return e.param}function sen(e){return e&&!ht(e)&&"repeat"in e}function n0e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Ure(e){return"sort"in e}function Ey({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Xm("timeUnitBandPosition",n,r);if(ci(s))return .5}}function h5e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=ol(e),u=_r(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Xm("timeUnitBandSize",r,i)};if(ci(h)&&!ho(s))return{band:1}}if(EI(r.type))return s?ho(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function p5e(e,t,n,r){return ci(e.bin)||e.timeUnit&&au(e)&&e.type==="temporal"?Ey({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function m5e(e){return e&&!!e.sort&&!e.field}function A5(e){return e&&"condition"in e}function I5(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&Ze(t)}function _R(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&cn(t)}function oen(e){const t=e==null?void 0:e.condition;return!!t&&(Fe(t)||dd(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function Ex(e){return e==null?void 0:e.type}function Ep(e){return e&&"datum"in e}function y0(e){return au(e)&&!vM(e)||yM(e)}function r0e(e){return au(e)&&e.type==="quantitative"&&!e.bin||yM(e)}function yM(e){return Ep(e)&&lr(e.datum)}function cn(e){return Ze(e)||Ep(e)}function au(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function dd(e){return e&&"value"in e&&"value"in e}function o_(e){return e&&("scale"in e||"sort"in e)}function xx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function g5e(e){return e&&"legend"in e}function y5e(e){return e&&("format"in e||"formatType"in e)}function aen(e){return Gu(e,["legend","axis","header","scale"])}function uen(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(cen(e))n=oFe("count");else{let o;if(!t.nofn)if(uen(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ci(a)?(o=wFe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?sv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Km(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!i_(l)&&(o=dZt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?US(n):t.expr?rFe(n,t.expr)+s:Vc(n)+s}function vM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(NFe(e.type))}function len(e){var t;return o_(e)&&wx((t=e.scale)==null?void 0:t.type)}function cen(e){return e.aggregate==="count"}function fen(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ci(r))return`${n} (binned)`;if(i&&!i_(i)){const a=(o=fo(i))==null?void 0:o.unit;if(a)return`${n} (${_5(a).join("-")})`}else if(s)return sv(s)?`${n} for max ${s.argmax}`:Km(s)?`${n} for min ${s.argmin}`:`${dR(s)} of ${n}`;return n}function den(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(sv(t))return`${i} for argmax(${t.argmax})`;if(Km(t))return`${i} for argmin(${t.argmin})`;const s=r&&!i_(r)?fo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ci(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const v5e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return den(e);default:return fen(e,t)}};let b5e=v5e;function _5e(e){b5e=e}function hen(){_5e(v5e)}function lE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=zre(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Vre(s,t):void 0;return n?ps(i,s.title,o):i??s.title??o}function zre(e){if(xx(e)&&e.axis)return e.axis;if(g5e(e)&&e.legend)return e.legend;if(Bre(e)&&e.header)return e.header}function Vre(e,t){return b5e(e,t)}function bM(e){if(y5e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=zre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function pen(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Ure(e)&&Fe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!sv(n)&&!Km(n))return"quantitative";if(o_(e)&&((s=e.scale)!=null&&s.type))switch(vq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Zh(e){if(Ze(e))return e;if(I5(e))return e.condition}function $s(e){if(cn(e))return e;if(_R(e))return e.condition}function w5e(e,t,n,r={}){if(ht(e)||lr(e)||Qy(e)){const i=ht(e)?"string":lr(e)?"number":"boolean";return Je(mJt(t,i,e)),{value:e}}return cn(e)?_M(e,t,n,r):_R(e)?{...e,condition:_M(e.condition,t,n,r)}:e}function _M(e,t,n,r){if(y5e(e)){const{format:i,formatType:s,...o}=e;if(Eb(s)&&!n.customFormatTypes)return Je(Kge(t)),_M(o,t,n,r)}else{const i=xx(e)?"axis":g5e(e)?"legend":Bre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Eb(o)&&!n.customFormatTypes)return Je(Kge(t)),_M({...e,[i]:a},t,n,r)}}return Ze(e)?Hre(e,t,r):men(e)}function men(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":ht(n)?"nominal":r_(n)?"temporal":void 0,{...e,type:t}}function Hre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!yre(r)&&!sv(r)&&!Km(r)&&(Je(yJt(r)),delete a.aggregate),i&&(a.timeUnit=fo(i)),o&&(a.field=`${o}`),ci(s)&&(a.bin=k5(s,t)),Ao(s)&&!ms(t)&&Je(KJt(t)),au(a)){const{type:u}=a,l=_Zt(u);u!==l&&(a.type=l),u!=="quantitative"&&_Fe(r)&&(Je(gJt(u,r)),a.type="quantitative")}else if(!pFe(t)){const u=pen(a,t);a.type=u}if(au(a)){const{compatible:u,warning:l}=gen(a,t)||{};u===!1&&Je(l)}if(Ure(a)&&ht(a.sort)){const{sort:u}=a;if(t0e(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&t0e(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Bre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function k5(e,t){return Qy(e)?{maxbins:Bge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Bge(t)}:e}const L_={compatible:!0};function gen(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case _m:case wm:case f5:return vM(e)?L_:{compatible:!1,warning:wJt(t)};case ki:case go:case ev:case zS:case il:case vp:case bp:case hR:case pR:case d5:case bb:case h5:case p5:case e_:case of:case xd:case m5:return L_;case Td:case Hc:case Sd:case Cd:return n!==wb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:L_;case yg:case tv:case nv:case rv:case gg:case mg:case pg:case Ed:case yp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:L_;case sl:case iv:return!vM(e)&&!len(e)?{compatible:!1,warning:EJt(t)}:L_;case vx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:L_}}function Sx(e){const{formatType:t}=bM(e);return t==="time"||!t&&yen(e)}function yen(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function R5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=fo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return gR(e)?a=e.expr:Rt(e)?a=e.signal:r_(e)?(o=!0,a=_b(e)):(ht(e)||lr(e))&&o&&(a=`datetime(${zr(e)})`,aZt(s)&&(lr(e)&&e<1e4||ht(e)&&isNaN(Date.parse(e)))&&(a=_b({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:zr(e)}function E5e(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!i_(e.timeUnit)?e.timeUnit:void 0,s=R5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function wR(e,t){return ci(e.bin)?vg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const i0e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ER(e){return e==null?void 0:e.condition}const x5e=["domain","grid","labels","ticks","title"],ven={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},S5e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},ben={...S5e,style:1,labelExpr:1,encoding:1};function s0e(e){return!!ben[e]}const _en={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},T5e=Ge(_en);function bg(e){return"mark"in e}class N5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return bg(t)?nen(t.mark)===this.name:!1}}function D1(e,t){const n=e&&e[t];return n?Fe(n)?yb(n,r=>!!r.field):Ze(n)||I5(n):!1}function C5e(e,t){const n=e&&e[t];return n?Fe(n)?yb(n,r=>!!r.field):Ze(n)||Ep(n)||_R(n):!1}function A5e(e,t){if(ms(t)){const n=e[t];if((Ze(n)||Ep(n))&&(YFe(n.type)||Ze(n)&&n.timeUnit)){const r=hre(t);return C5e(e,r)}}return!1}function qre(e){return yb(wQt,t=>{if(D1(e,t)){const n=e[t];if(Fe(n))return yb(n,r=>!!r.aggregate);{const r=Zh(n);return r&&!!r.aggregate}}return!1})}function I5e(e,t){const n=[],r=[],i=[],s=[],o={};return Wre(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=zre(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:lE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(sv(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Km(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),au(a)&&ci(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),wR(a,u)&&n.push(at(a,{binSuffix:"range"})),ms(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",pFe(u)||(y.type=wb)}else if(d&&!i_(d)){i.push({timeUnit:d,field:l,as:g});const v=au(a)&&a.type!==_x&&"time";v&&(u===hR||u===bb?y.formatType=v:NQt(u)?y.legend={formatType:v,...y.legend}:ms(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function wen(e,t,n){const r=OQt(t,n);if(r){if(r==="binned"){const i=e[t===Ed?ki:go];return!!(Ze(i)&&Ze(e[t])&&Ao(i.bin))}}else return!1;return!0}function Een(e,t,n,r){const i={};for(const s of Ge(e))hFe(s)||Je(_Jt(s));for(let s of AQt){if(!e[s])continue;const o=e[s];if(mR(s)){const a=CQt(s),u=i[a];if(Ze(u)&&bZt(u.type)&&Ze(o)&&!u.timeUnit){Je(pJt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(hJt),s=of),!wen(e,s,t)){Je(b5(s,t));continue}if(s===gg&&t==="line"){const a=Zh(e[s]);if(a!=null&&a.aggregate){Je(bJt);continue}}if(s===il&&(n?"fill"in e:"stroke"in e)){Je(PFe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===pR||s===vx&&!Fe(o)&&!dd(o)||s===bb&&Fe(o)){if(o){if(s===vx){const a=e[s];if(m5e(a)){i[s]=a;continue}}i[s]=dt(o).reduce((a,u)=>(Ze(u)?a.push(Hre(u,s)):Je(yq(u,s)),a),[])}}else{if(s===bb&&o===null)i[s]=null;else if(!Ze(o)&&!Ep(o)&&!dd(o)&&!A5(o)&&!Rt(o)){Je(yq(o,s));continue}i[s]=w5e(o,s,r)}}return i}function P5(e,t){const n={};for(const r of Ge(e)){const i=w5e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function xen(e){const t=[];for(const n of Ge(e))if(D1(e,n)){const r=e[n],i=dt(r);for(const s of i)Ze(s)?t.push(s):I5(s)&&t.push(s.condition)}return t}function Wre(e,t,n){if(e)for(const r of Ge(e)){const i=e[r];if(Fe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Sen(e,t,n,r){return e?Ge(e).reduce((i,s)=>{const o=e[s];return Fe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function k5e(e,t){return Ge(t).reduce((n,r)=>{switch(r){case ki:case go:case h5:case m5:case p5:case Ed:case yp:case ev:case zS:case of:case mg:case xd:case pg:case Sd:case Td:case Cd:case Hc:case hR:case sl:case e_:case bb:return n;case vx:if(e==="line"||e==="trail")return n;case pR:case d5:{const i=t[r];if(Fe(i)||Ze(i))for(const s of dt(i))s.aggregate||n.push(at(s,{}));return n}case gg:if(e==="trail")return n;case il:case vp:case bp:case yg:case tv:case nv:case iv:case rv:{const i=Zh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function Ten(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Fe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Fe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function wq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Gre(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=xen(n).map(aen);return{tooltip:[...i,...gh(s,zn)]}}function Gre(e){const{title:t,field:n}=e;return ps(t,n)}function Yre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Gre(n);return R5e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...ht(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function R5e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Jh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Qy(e[t])?{}:e[t]}}]:[]}function N5e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:vP(s,n),continuousAxisChannelDef2:vP(o,n),continuousAxisChannelDefError:vP(a,n),continuousAxisChannelDefError2:vP(u,n),continuousAxis:i}}function vP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(YJt(n,t)),r}else return e}function P5e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Jh(n)&&n.orient)return n.orient;if(y0(i)){if(y0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Sx(s)&&!Sx(i)?"horizontal":"vertical"}return"horizontal"}else{if(y0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const wM="boxplot",Cen=["box","median","outliers","rule","ticks"],Aen=new N5(wM,D5e);function O5e(e){return lr(e)?"tukey":e}function D5e(e,{config:t}){e={...e,encoding:P5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Jh(n)?n:{type:n};i&&Je(RFe("boxplot"));const u=a.extent??t.boxplot.extent,l=_r("size",a,t),c=a.invalid,f=O5e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:C}=Ien(e,u,t),E=US(m.field),{color:S,size:A,...k}=b,R=Ae=>Yre(a,g,m,Ae,t.boxplot),D=R(k),P=R(b),O=(pt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",L=R({...k,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...S||{value:O}}}}),j=wq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?j:wq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...D({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...D({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],$=[...f!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:j}),...L({partName:"median",mark:{type:"tick",invalid:c,...pt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:j})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:$};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,F=`(${W} - ${z})`,V=`${z} - ${u} * ${F}`,G=`${W} + ${u} * ${F}`,ee=`datum["${m.field}"]`,le={joinaggregate:$5e(m.field),groupby:y},de={transform:[{filter:`(${V} <= ${ee}) && (${ee} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${E}`},{op:"max",field:m.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${E}`},...v],groupby:y}],layer:H},{tooltip:he,...ye}=k,{scale:Ce,axis:ve}=m,Ye=Gre(m),Ue=Gu(ve,["title"]),mt=R5e(a,"outliers",t.boxplot,{transform:[{filter:`(${ee} < ${V}) || (${ee} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ye!==void 0?{title:Ye}:{},...Ce!==void 0?{scale:Ce}:{},...Ur(Ue)?{}:{axis:Ue}},...ye,...S?{color:S}:{},...C?{tooltip:C}:{}}})[0];let it;const be=[...d,...h,le];return mt?it={transform:be,layer:[mt,de]}:(it=de,it.transform.unshift(...be)),{...o,layer:[it,{transform:p,layer:$}]}}function $5e(e){const t=US(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Ien(e,t,n){const r=P5e(e,wM),{continuousAxisChannelDef:i,continuousAxis:s}=N5e(e,r,wM),o=i.field,a=US(o),u=O5e(t),l=[...$5e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Ten(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=I5e(p,n),w=r==="vertical"?"horizontal":"vertical",x=r,C=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:C,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:h}}const Kre="errorbar",ken=["ticks","rule"],Ren=new N5(Kre,M5e);function M5e(e,{config:t}){e={...e,encoding:P5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=L5e(e,Kre,t);delete s.size;const c=Yre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Nen(e,t){const{encoding:n}=e;if(Pen(n))return{orient:P5e(e,t),inputType:"raw"};const r=Oen(n),i=Den(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(cn(a)&&cn(u))throw new Error(`${t} cannot have both x2 and y2`);if(cn(a)){if(y0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(cn(u)){if(y0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(cn(u)&&!cn(a))throw new Error(`${t} cannot have xError2 without xError`);if(cn(c)&&!cn(l))throw new Error(`${t} cannot have yError2 without yError`);if(cn(a)&&cn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cn(a)){if(y0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(cn(l)){if(y0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Pen(e){return(cn(e.x)||cn(e.y))&&!cn(e.x2)&&!cn(e.y2)&&!cn(e.xError)&&!cn(e.xError2)&&!cn(e.yError)&&!cn(e.yError2)}function Oen(e){return cn(e.x2)||cn(e.y2)}function Den(e){return cn(e.xError)||cn(e.xError2)||cn(e.yError)||cn(e.yError2)}function L5e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Jh(r)?r:{type:r};s&&Je(RFe(t));const{orient:l,inputType:c}=Nen(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=N5e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=$en(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:E,...S}=i,{bins:A,timeUnits:k,aggregate:R,groupby:D,encoding:P}=I5e(S,n),O=[...R,...g],L=c!=="raw"?[]:D,j=wq(v,f,P,b);return{transform:[...a.transform??[],...A,...k,...O.length===0?[]:[{aggregate:O,groupby:L}],...y],groupby:L,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:j}}function $en(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(GJt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:dR(h)},{fieldPrefix:"upper_",titlePrefix:o0e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:o0e(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:lE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:lE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:lE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(WJt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:vb(vb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function o0e(e,t,n){return`${dR(e)} ${n} ${t}`}const Xre="errorband",Men=["band","borders"],Len=new N5(Xre,F5e);function F5e(e,{config:t}){e={...e,encoding:P5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=L5e(e,Xre,t),l=o,c=Yre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(Qge("interpolate")):l.tension&&Je(Qge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const j5e={};function Qre(e,t,n){const r=new N5(e,t);j5e[e]={normalizer:r,parts:n}}function Fen(){return Ge(j5e)}Qre(wM,D5e,Cen);Qre(Kre,M5e,ken);Qre(Xre,F5e,Men);const jen=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],B5e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},U5e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Ben=Ge(B5e),Uen=Ge(U5e),zen={header:1,headerRow:1,headerColumn:1,headerFacet:1},z5e=Ge(zen),V5e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Ven={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Hen={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},hd="_vgsid_",qen={point:{on:"click",fields:[hd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Jre(e){return e==="legend"||!!(e!=null&&e.legend)}function OB(e){return Jre(e)&&pt(e)}function Zre(e){return!!(e!=null&&e.select)}function H5e(e){const t=[];for(const n of e||[]){if(Zre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function Wen(e){return O5(e)||tie(e)||eie(e)}function eie(e){return"concat"in e}function O5(e){return"vconcat"in e}function tie(e){return"hconcat"in e}function q5e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function ep(e){return pt(e)&&e.step!==void 0}function a0e(e){return e.view||e.width||e.height}const u0e=20,Gen={align:1,bounds:1,center:1,columns:1,spacing:1},Yen=Ge(Gen);function Ken(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(C5(e)&&!bR(e.facet)||eie(e))&&(i.columns=o),O5(e)&&(i.columns=1);for(const a of Yen)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function Eq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function EM(e,t){const n=xM(e,t);return ep(n)?n.step:W5e}function xM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ps(n,{step:e.step})}const W5e=20,Xen={continuousWidth:200,continuousHeight:200,step:W5e},Qen={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Xen,mark:XZt,arc:{},area:{},bar:ZZt,circle:{},geoshape:{},image:{},line:{},point:{},rect:een,rule:{color:"black"},square:{},text:{color:"black"},tick:ten,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:TZt,projection:{},legend:Ven,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:qen,style:{},title:{},facet:{spacing:u0e},concat:{spacing:u0e},normalizedNumberFormat:".0%"},Dp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],l0e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},c0e={blue:Dp[0],orange:Dp[1],red:Dp[2],teal:Dp[3],green:Dp[4],yellow:Dp[5],purple:Dp[6],pink:Dp[7],brown:Dp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Jen(e={}){return{signals:[{name:"color",value:pt(e)?{...c0e,...e}:c0e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Zen(e){return{signals:[{name:"fontSize",value:pt(e)?{...l0e,...e}:l0e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function etn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function G5e(e){const t=Ge(e||{}),n={};for(const r of t){const i=e[r];n[r]=ER(i)?xFe(i):Sl(i)}return n}function ttn(e){const t=Ge(e),n={};for(const r of t)n[r]=G5e(e[r]);return n}const ntn=[...l5e,...T5e,...z5e,"background","padding","legend","lineBreak","scale","style","title","view"];function Y5e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=RS({},nn(Qen),n?etn(n):{},t?Jen(t):{},r?Zen(r):{},s||{});i&&NS(o,"selection",i,!0);const a=Gu(o,ntn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Sl(o[u]));for(const u of l5e)o[u]&&(a[u]=Nu(o[u]));for(const u of T5e)o[u]&&(a[u]=G5e(o[u]));for(const u of z5e)o[u]&&(a[u]=Nu(o[u]));return o.legend&&(a.legend=Nu(o.legend)),o.scale&&(a.scale=Nu(o.scale)),o.style&&(a.style=ttn(o.style)),o.title&&(a.title=Nu(o.title)),o.view&&(a.view=Nu(o.view)),a}const rtn=new Set(["view",...HZt]),itn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],stn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...KZt};function otn(e){e=nn(e);for(const t of itn)delete e[t];if(e.axis)for(const t in e.axis)ER(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of jen)delete e.legend[t];if(e.mark){for(const t of e0e)delete e.mark[t];e.mark.tooltip&&pt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(H5e(e.params)),delete e.params);for(const t of rtn){for(const r of e0e)delete e[t][r];const n=stn[t];if(n)for(const r of n)delete e[t][r];utn(e,t)}for(const t of Fen())delete e[t];atn(e);for(const t in e)pt(e[t])&&Ur(e[t])&&delete e[t];return Ur(e)?void 0:e}function atn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=EFe(e.title);Ur(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ur(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ur(r)?delete e.title:e.title=r}function utn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Ur(s)||(e.style[n??t]=s),delete e[t]}function D5(e){return"layer"in e}function ltn(e){return"repeat"in e}function ctn(e){return!Fe(e.repeat)&&e.repeat.layer}class nie{map(t,n){return C5(t)?this.mapFacet(t,n):ltn(t)?this.mapRepeat(t,n):tie(t)?this.mapHConcat(t,n):O5(t)?this.mapVConcat(t,n):eie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(D5(t))return this.mapLayer(t,n);if(bg(t))return this.mapUnit(t,n);throw new Error(vre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const ftn={zero:1,center:1,normalize:1};function dtn(e){return e in ftn}const htn=new Set([o5e,E5,w5,gM,S5,Fre,jre,x5,a5e,Lre]),ptn=new Set([E5,w5,o5e]);function F_(e){return Ze(e)&&Ex(e)==="quantitative"&&!e.bin}function f0e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(F_(o)&&F_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(F_(o))return t;if(F_(a))return i}else{if(F_(o))return s&&n==="vertical"?void 0:t;if(F_(a))return s&&n==="horizontal"?void 0:i}}function mtn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function K5e(e,t){var m,g;const n=Jh(e)?e:{type:e},r=n.type;if(!htn.has(r))return null;const i=f0e(t,"x",n)||f0e(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=mtn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=IQt.reduce((y,v)=>{if(v!=="tooltip"&&D1(t,v)){const b=t[v];for(const w of dt(b)){const x=Zh(w);if(x.aggregate)continue;const C=at(x,{});(!C||!l.has(C))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?Qy(s.stack)?p=s.stack?"zero":null:p=s.stack:ptn.has(r)&&(p="zero"),!p||!dtn(p)||qre(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Yu.LINEAR&&s!=null&&s.stack&&Je(VJt(s.scale.type)),cn(t[_p(i)])?(s.stack!==void 0&&Je(zJt(i)),null):(Ze(s)&&s.aggregate&&!BQt.has(s.aggregate)&&Je(HJt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:s_(r),stackBy:h,offset:p}))}function X5e(e,t,n){const r=Nu(e),i=_r("orient",r,n);if(r.orient=btn(r.type,t,i),i!==void 0&&i!==r.orient&&Je(CJt(r.orient,i)),r.type==="bar"&&r.orient){const u=_r("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:JZt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=_r("opacity",r,n),o=_r("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=ytn(r.type,t)),_r("cursor",r,n)===void 0&&(r.cursor=gtn(r,t,n)),r}function gtn(e,t,n){return t.href||e.href||_r("href",e,n)?"pointer":e.cursor}function ytn(e,t){if(Vn([S5,Lre,Fre,jre],e)&&!qre(t))return .7}function vtn(e,t,{graticule:n}){if(n)return!1;const r=Xm("filled",e,t),i=e.type;return ps(r,i!==S5&&i!==x5&&i!==gM)}function btn(e,t,n){switch(e){case S5:case Fre:case jre:case a5e:case zZt:case UZt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case E5:if(Ze(r)&&(Ao(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Ao(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===wb&&!ci(r.bin)||yM(r))&&Ze(i)&&Ao(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===wb&&!ci(i.bin)||yM(i))&&Ze(r)&&Ao(r.bin)?"vertical":"horizontal"}case gM:if(s&&!(Ze(r)&&Ao(r.bin))&&o&&!(Ze(i)&&Ao(i.bin)))return;case w5:if(o)return Ze(i)&&Ao(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Ao(r.bin)?"vertical":"horizontal";if(e===gM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case x5:case Lre:{const a=r0e(r),u=r0e(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=au(r)&&r.type===_x,c=au(i)&&i.type===_x;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function _tn(e){const{point:t,line:n,...r}=e;return Ge(r).length>1?r:r.type}function wtn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Gu(e[t],["point","line"])});return e}function DB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?pt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?pt(t.point)?t.point:{}:void 0}function d0e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Etn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(bg(t)){const{mark:r,encoding:i}=t,s=Jh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!DB(s,n[s.type],i);case"area":return!!DB(s,n[s.type],i)||!!d0e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=P5(l,i),d=Jh(a)?a:{type:a},h=DB(d,i[d.type],f),p=d.type==="area"&&d0e(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:_tn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Gu(f,["shape"])}],g=K5e(X5e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Gu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...gx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...gx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:wtn(i)})}}function xtn(e,t){return t?bR(e)?J5e(e,t):Q5e(e,t):e}function $B(e,t){return t?J5e(e,t):e}function xq(e,t,n){const r=t[e];if(sen(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(oJt(r.repeat));return}return t}function Q5e(e,t){if(e=xq("field",e,t),e!==void 0){if(e===null)return null;if(Ure(e)&&Nh(e.sort)){const n=xq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function h0e(e,t){if(Ze(e))return Q5e(e,t);{const n=xq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function p0e(e,t){if(cn(e)){const n=h0e(e,t);if(n)return n;if(A5(e))return{condition:e.condition}}else{if(_R(e)){const n=h0e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function J5e(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Fe(i))n[r]=i.map(s=>p0e(s,t)).filter(s=>s);else{const s=p0e(i,t);s!==void 0&&(n[r]=s)}}return n}class Stn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(bg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Jh(r)&&r.type==="line")for(const i of TQt){const s=t_(i),o=n[s];if(n[i]&&(Ze(o)&&!Ao(o.bin)||Ep(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(TJt(!!i.x2,!!i.y2)),r({...t,mark:pt(s)?{...s,type:"rule"}:"rule"},n)}}class Ttn extends nie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Aen,Ren,Len,new Etn,new Stn]}map(t,n){if(bg(t)){const r=D1(t.encoding,_m),i=D1(t.encoding,wm),s=D1(t.encoding,f5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=$B(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return ctn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ii(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Fe(r)&&t.columns&&(t=Gu(t,["columns"]),Je(Gge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Fe(r)&&r.row||[u?u.row:null],f=!Fe(r)&&r.column||[u?u.column:null],d=Fe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Fe(r)?`${Ii(p)}`:(r.row?`row_${Ii(m)}`:"")+(r.column?`column_${Ii(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Gu(b,["data"]))}const h=Fe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return bR(r)&&t.columns&&(t=Gu(t,["columns"]),Je(Gge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=g0e({parentProjection:o,projection:i}),l=m0e({parentEncoding:s,encoding:$B(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=$B(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(xJt([...r?[_m]:[],...i?[wm]:[]]));const o={},a={};for(const u of[_m,wm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:xtn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:m0e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:g0e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function m0e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ge(e),...Ge(t)]);for(const s of i){const o=t[s],a=e[s];if(cn(o)){const u={...a,...o};r[s]=u}else _R(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||dd(a)||Rt(a)||cn(a)||Fe(a))&&(r[s]=a)}}else r=t;return!r||Ur(r)?void 0:r}function g0e(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(dJt({parentProjection:t,projection:n})),n??t}function rie(e){return"filter"in e}function Ctn(e){return(e==null?void 0:e.stop)!==void 0}function Z5e(e){return"lookup"in e}function Atn(e){return"data"in e}function Itn(e){return"param"in e}function ktn(e){return"pivot"in e}function Rtn(e){return"density"in e}function Ntn(e){return"quantile"in e}function Ptn(e){return"regression"in e}function Otn(e){return"loess"in e}function Dtn(e){return"sample"in e}function $tn(e){return"window"in e}function Mtn(e){return"joinaggregate"in e}function Ltn(e){return"flatten"in e}function Ftn(e){return"calculate"in e}function e8e(e){return"bin"in e}function jtn(e){return"impute"in e}function Btn(e){return"timeUnit"in e}function Utn(e){return"aggregate"in e}function ztn(e){return"stack"in e}function Vtn(e){return"fold"in e}function Htn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function qtn(e){return e.map(t=>rie(t)?{filter:aE(t.filter,vZt)}:t)}class Wtn extends nie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=y0e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=y0e(t,n),t.encoding){const r={};for(const[i,s]of _y(t.encoding))r[i]=t8e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:_y(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Fo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function y0e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(rie(s))return{filter:Sq(s,t)};if(e8e(s)&&n_(s.bin))return{...s,bin:n8e(s.bin)};if(Z5e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function t8e(e,t){var r,i;const n=nn(e);if(Ze(n)&&n_(n.bin)&&(n.bin=n8e(n.bin)),o_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(A5(n))if(Fe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:Sq(s,t)}});else{const{selection:s,param:o,test:a,...u}=t8e(n.condition,t);n.condition=o?n.condition:{...u,test:Sq(n.condition,t)}}return n}function n8e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Sq(e,t){const n=r=>aE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):aE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class Tq extends nie{map(t,n){const r=n.selections??[];if(t.params&&!bg(t)){const i=[];for(const s of t.params)Zre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(ht(a)&&(a===t.name||i.includes(a))||Fe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Tq.prototype[e];Tq.prototype[e]=function(n,r){return t.call(this,n,Gtn(n,r))}}function Gtn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function r8e(e,t){t===void 0&&(t=Y5e(e.config));const n=Qtn(e,t),{width:r,height:i}=e,s=Jtn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Ytn=new Ttn,Ktn=new Wtn,Xtn=new Tq;function Qtn(e,t={}){const n={config:t};return Xtn.map(Ytn.map(Ktn.map(e,n),n),n)}function v0e(e){return ht(e)?{type:e}:e??{}}function Jtn(e,t,n){let{width:r,height:i}=t;const s=bg(e)||D5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(Vge("width")),r=void 0),i=="container"&&(Je(Vge("height")),i=void 0));const a={type:"pad",...o,...n?v0e(n.autosize):{},...v0e(e.autosize)};if(a.type==="fit"&&!s&&(Je(KQt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(Hge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(Hge("height")),!Rl(a,{type:"pad"}))return a}function Ztn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function enn(e){return e?`fit-${g5(e)}`:"fit"}const tnn=["background","padding"];function b0e(e,t){const n={};for(const r of tnn)e&&e[r]!==void 0&&(n[r]=Sl(e[r]));return t&&(n.params=e.params),n}class _g{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new _g(nn(this.explicit),nn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ps(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ge(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Yd(e){return{explicit:!0,value:e}}function gl(e){return{explicit:!1,value:e}}function i8e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:$5(t,n,r,i)}}function $5(e,t,n,r){return e.explicit&&t.explicit&&Je($Jt(n,r,e.value,t.value)),e}function xy(e,t,n,r,i=$5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Rl(e.value,t.value)?e:i(e,t,n,r)}class nnn extends _g{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Tx(e){return"url"in e}function xI(e){return"values"in e}function s8e(e){return"name"in e&&!Tx(e)&&!xI(e)&&!U0(e)}function U0(e){return e&&(o8e(e)||a8e(e)||iie(e))}function o8e(e){return"sequence"in e}function a8e(e){return"sphere"in e}function iie(e){return"graticule"in e}var Si;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Si||(Si={}));function u8e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Vc(i.field),i}function Sb(e,t=!0,n=Aa){if(Fe(e)){const r=e.map(i=>Sb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(r_(e))return n(t?_b(e):oZt(e));return t?n(zr(e)):e}function rnn(e,t){for(const n of Fo(e.component.selection??{})){const r=n.name;let i=`${r}${Ty}, ${n.resolve==="global"?"true":`{unit: ${$1(e)}}`}`;for(const s of j5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+$nn,on:[{events:{signal:n.name+Ty},update:`modify(${rt(n.name+Tb)}, ${i})`}]})}return sie(t)}function inn(e,t){if(e.component.selection&&Ge(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Zy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return sie(t)}function snn(e,t){let n=!1;for(const r of Fo(e.component.selection??{})){const i=r.name,s=rt(i+Tb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${C8e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of j5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),sie(t)}function onn(e,t){const n=[...t],r=$1(e,{escape:!1});for(const i of Fo(e.component.selection??{})){const s={name:i.name+Tb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:hd}}]),i.init){const a=i.project.items.map(u8e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[hd]:Sb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Sb(u,!1)}))}n.filter(a=>a.name===i.name+Tb).length||n.push(s)}return n}function l8e(e,t){for(const n of Fo(e.component.selection??{}))for(const r of j5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ann(e,t){for(const n of e.children)Qi(n)&&(t=l8e(n,t));return t}function unn(e,t,n,r){const i=N8e(e,t.param,t);return{signal:Gl(n.get("type"))&&Fe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function sie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Fr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(lJt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Ku extends Fr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${sFe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function MB(e){return e.as!==void 0}function _0e(e){return`${e}_end`}class Ph extends Fr{clone(){return new Ph(null,nn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(i_(u)){if(Qi(n)){const{mark:c,markDef:f,config:d}=n,h=Ey({fieldDef:s,markDef:f,config:d});(EI(c)||h)&&(l={timeUnit:fo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Qi(n)){const{mark:c,markDef:f,config:d}=n,h=Ey({fieldDef:s,markDef:f,config:d});EI(c)&&ms(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[zn(l)]=l)}return i},{});return Ur(r)?null:new Ph(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=fo(r),o={...i,timeUnit:s};return new Ph(t,{[zn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of _y(this.timeUnits)){const s=MB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Fo(this.timeUnits).map(t=>MB(t)?t.as:_0e(t.field)))}dependentFields(){return new Set(Fo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${zn(this.timeUnits)}`}assemble(){const t=[];for(const n of Fo(this.timeUnits)){const{rectBandPosition:r}=n,i=fo(n.timeUnit);if(MB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Vc(s),type:"timeunit",...a?{units:_5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...w0e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=c8e({timeUnit:i,field:o}),u=_0e(o);t.push({type:"formula",expr:a,as:u}),t.push(...w0e([o,u],r,i))}}return t}}const M5="offsetted_rect_start",L5="offsetted_rect_end";function c8e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=UFe(r),{part:o,step:a}=qFe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function w0e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:E0e([c8e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${M5}`},{type:"formula",expr:E0e([i,s],n+.5),as:`${e}_${L5}`}]}return[]}function E0e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const xR="_tuple_fields";class lnn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const cnn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new lnn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ii(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ii(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?dt(n.value):null;let{fields:d,encodings:h}=pt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(pt(p))for(const m of Ge(p))SQt(m)?(h||(h=[])).push(m):l==="interval"?(Je(sJt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(XQt(p,m.aggregate));continue}else if(!g){Je(Wge(p));continue}if(m.timeUnit&&!i_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[zn(y)]=y}if(!s[g]){const y=l==="interval"&&vg(p)&&Gl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===hd,fFe(p)?(v.geoChannel=p,v.channel=cFe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(Wge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===hd}f&&(t.init=f.map(p=>i.items.map(m=>pt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Ur(o)||(i.timeUnit=new Ph(null,o))},signals:(e,t,n)=>{const r=t.name+xR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(u8e)})}},Em={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!vg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(eJt),!s||!Gl(o)){Je(ZQt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||x0e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(C8e)>=0)i.update=`{${r.map(o=>`${rt(Vc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Vc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!x0e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function Cq(e,t){return`domain(${rt(e.scaleName(t))})`}function x0e(e){return e.parent&&YS(e.parent)&&!e.parent.parent}const cE="_brush",f8e="_scale_trigger",WT="geo_interval_init_tick",d8e="_init",fnn="_center",dnn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...pt(n.select)?n.select:{}};i.fields=[hd],i.encodings||(i.encodings=n.value?Ge(n.value):[Td,Sd]),n.select={type:"interval",...i}}if(t.translate&&!Em.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+cE)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=dt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ty,s=Fo(t.project.hasChannel).filter(a=>a.channel===ki||a.channel===go),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(hnn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+fnn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+d8e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${$1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:WT}]:[]],update:b}]})}else{if(!Em.defined(t)){const l=r+f8e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Gl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${$1(e)}, fields: ${r+xR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Sb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Qi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===WT).length||n.unshift({name:WT,value:null,on:[{events:"timer{1}",update:`${WT} === null ? {} : ${WT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Tb)})`;if(Em.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ge(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${$1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ge(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+cE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+cE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function hnn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===ki?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Em.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Sb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+f8e},update:Gl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Sb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===ki?0:1,h=t.name+d8e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const pnn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+xR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Fo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+cE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${$1(e)}, `;if(t.project.hasSelectionId)l+=`${hd}: ${o}[${rt(hd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Ty,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function HS(e,t,n,r){const i=A5(t)&&t.condition,s=r(t);if(i){const a=dt(i).map(u=>{const l=r(u);if(ien(u)){const{param:c,empty:f}=u;return{test:R8e(e,{param:c,empty:f}),...l}}else return{test:CM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function oie(e,t="text"){const n=e.encoding[t];return HS(e,n,t,r=>F5(r,e.config))}function F5(e,t,n="datum"){if(e){if(dd(e))return yi(e.value);if(cn(e)){const{format:r,formatType:i}=bM(e);return Mre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h8e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Fe(o))return{tooltip:S0e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return HS(e,o,"tooltip",u=>{const l=F5(u,i,a);if(l)return l;if(u===null)return;let c=_r("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),ht(c))return{value:c};if(pt(c))return Rt(c)?c:c.content==="encoding"?S0e(n,s,i,t):{signal:a}})}}function p8e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=t_(f),h=au(c)?c:{...c,type:e[d].type},p=h.title||Vre(h,i),m=dt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ms(f)){const y=f==="x"?"x2":"y2",v=Zh(e[y]);if(Ao(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:x,formatType:C}=bM(h);g=vR(b,w,x,C,i),s[y]=!0}}if((ms(f)||f===of||f===xd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=bM(h);g=Mre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=F5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Wre(e,(c,f)=>{Ze(c)?u(c,f):I5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function S0e(e,t,n,{reactiveGeom:r}={}){const i=p8e(e,t,n,{reactiveGeom:r}),s=_y(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function mnn(e){const{markDef:t,config:n}=e,r=_r("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...gnn(e),...ynn(e)}}function gnn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=_r("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in WQt?{}:{ariaRoleDescription:{value:t}}}function ynn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return HS(e,s,"description",u=>F5(u,e.config));const o=_r("description",n,r);if(o!=null)return{description:yi(o)};if(r.aria===!1)return{};const a=p8e(t,i,r);if(!Ur(a))return{description:{signal:_y(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function no(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=_r(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=yi(u)));const l=i[e];return HS(t,l,o??e,c=>$re({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function m8e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??_r("filled",n,i),a=Vn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=_r(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=_r(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:yi(u)}:{},...l?{stroke:yi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(PFe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...no("color",e,{vgChannel:c,defaultValue:o?u:l}),...no("fill",e,{defaultValue:r.fill?u:void 0}),...no("stroke",e,{defaultValue:r.stroke?l:void 0})}}function vnn(e){const{encoding:t,mark:n}=e,r=t.order;return!s_(n)&&dd(r)?HS(e,r,"zindex",i=>yi(i.value)):{}}function Cx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:$re({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:yi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function va(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[_p(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Cx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=aie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ms(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:bnn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function bnn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(cn(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return mM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return O1(n,r,{suffix:"end"},{offset:s})}return Ore(e)}function aie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=t_(n),u=wy(n),l=_r(n,s,o,{vgChannel:u});if(l!==void 0)return j2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Vn([Yu.LOG,Yu.TIME,Yu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[ol(n)],mult:.5}}}}const _nn={left:"x",center:"xc",right:"x2"},wnn={top:"y",middle:"yc",bottom:"y2"};function g8e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return wy(e);const i=e==="x"?"align":"baseline",s=_r(i,t,n);let o;return Rt(s)?(Je(SJt(i)),o=void 0):o=s,e==="x"?_nn[o||(r==="top"?"left":"center")]:wnn[o||r]}function SM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y8e(e,t,{defaultPos:n,defaultPos2:r}):va(e,t,{defaultPos:n})}function y8e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=_p(e),a=ol(e),u=Enn(t,r,o),l=u[a]?g8e(e,i,s):wy(e);return{...va(e,t,{defaultPos:n,vgChannel:l}),...u}}function Enn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=t_(n),l=ol(n),c=wy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Cx({channel:n,markDef:s,encoding:r,model:e}):Cx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=ol(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=xnn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:bP(n,s)||bP(n,{[n]:hM(n,s,a.style),[l]:hM(l,s,a.style)})||bP(n,a[i])||bP(n,a.mark)||{[c]:aie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function xnn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return cn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?O1(t,s,{suffix:"start"},{offset:u}):Ore({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function bP(e,t){const n=ol(e),r=wy(e);if(t[r]!==void 0)return{[r]:j2(e,t[r])};if(t[e]!==void 0)return{[r]:j2(e,t[e])};if(t[n]){const i=t[n];if(xb(i))Je(vJt(n));else return{[n]:j2(e,i)}}}function Sy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=_p(t),a=ol(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??_r("size",i,n,{vgChannel:a}),p=mFe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(ci(u.bin)||Ao(u.bin)||u.timeUnit&&!l)&&!(h&&!xb(h))&&!r[p]&&!ho(f)?Cnn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(cn(u)&&ho(f)||m)&&!l?Tnn(u,t,e):y8e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Snn(e,t,n,r,i,s,o){if(xb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Xm("minBandSize",{type:o},r);return{signal:c?`max(${jf(c)}, ${l})`:l}}else i.band!==1&&(Je(IJt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(ov(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ps(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:EM(r.view,e)-2}}function Tnn(e,t,n){var A,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=ol(t),f=_p(t),d=mFe(t),h=n.scaleName(d),p=n.getScaleComponent(hre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=no("size",n,{vgChannel:c,defaultRef:yi(r.size)}):Je(PJt(r.type)));const y=!!g,v=h5e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:Snn(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&xb(v)&&!y?"top":"middle",w=g8e(t,r,s,b),x=w==="xc"||w==="yc",{offset:C,offsetType:E}=Cx({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),S=Ore({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:aie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?E==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:xb(v)?(1-v.band)/2:0});if(c)return{[w]:S,...g};{const R=wy(f),D=g[c],P=C?{...D,offset:C}:D;return{[w]:S,[R]:Fe(S)?[S[0],{...S[1],offset:P}]:{...S,offset:P}}}}function T0e(e,t,n,r,i,s,o){if(lFe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=jf(n),c=jf(i),f=jf(r),d=jf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Cnn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=h5e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ms(n)?_r("binSpacing",s,i)??0:0,m=_p(n),g=wy(n),y=wy(m),v=Xm("minBandSize",s,i),{offset:b}=Cx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Cx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=LZt({fieldDef:e,scaleName:u}),C=T0e(n,p,c,h,b,v,x),E=T0e(m,p,c,h,w??b,v,x),S=Rt(f)?{signal:`(1-${f.signal})/2`}:xb(f)?(1-f.band)/2:.5,A=Ey({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ci(e.bin)||e.timeUnit){const R=e.timeUnit&&A!==.5;return{[y]:C0e({fieldDef:e,scaleName:u,bandPosition:S,offset:E,useRectOffsetField:R}),[g]:C0e({fieldDef:e,scaleName:u,bandPosition:Rt(S)?{signal:`1-${S.signal}`}:1-S,offset:C,useRectOffsetField:R})}}else if(Ao(e.bin)){const R=O1(e,u,{},{offset:E});if(Ze(t))return{[y]:R,[g]:O1(t,u,{},{offset:C})};if(n_(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}Je($Fe(m))}function C0e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return mM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:M5,endSuffix:L5}:{}})}const Ann=new Set(["aria","width","height"]);function af(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m8e(e):{};return{...Inn(e.markDef,t),...A0e(e,"fill",n),...A0e(e,"stroke",r),...no("opacity",e),...no("fillOpacity",e),...no("strokeOpacity",e),...no("strokeWidth",e),...no("strokeDash",e),...vnn(e),...h8e(e),...oie(e,"href"),...mnn(e)}}function A0e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(_r("invalid",s,r)==="hide"&&n&&!s_(i)){const a=knn(e,{invalid:!0,channels:y5});if(a)return{[t]:[{test:a,value:null},...dt(n)]}}return n?{[t]:n}:{}}function Inn(e,t){return qQt.reduce((n,r)=>(!Ann.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=yi(e[r])),n),{})}function knn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Gl(u)&&(s[l]=!0)}return s},{}),i=Ge(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Dre(o,t)).join(` ${s} `)}}function uie(e){const{config:t,markDef:n}=e;if(_r("invalid",n,t)){const i=Rnn(e,{channels:wp});if(i)return{defined:{signal:i}}}return{}}function Rnn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Gl(l)&&(s[c]=!0)}return s},{}),i=Ge(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Dre(o,t)).join(` ${s} `)}}function I0e(e,t){if(t!==void 0)return{[e]:yi(t)}}const LB="voronoi",v8e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(LB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(s_(s))return Je(QQt(s)),n;const o={name:e.getName(LB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h8e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(LB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},b8e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Jre(e.bind),parse:(e,t,n)=>A8e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v8e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ii(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Sb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Ty)[0],o=r+xR,a=i.items.map(l=>Ii(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},TM="_toggle",_8e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+TM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ty,r=t.name+TM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${$1(e)}}, `)+`${r} ? ${n} : null`}},Nnn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=ht(t.clear)?Zy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b8e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ii(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ty);r(i,"null"),_8e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+TM),r(i,"false"))}return n}},w8e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Jre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==hd;return t&&!n&&Je(tJt),t&&n},parse:(e,t,n)=>{const r=nn(n);if(r.select=ht(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},A8e(t,r),pt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=dt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=OB(t.bind)?t.bind.legend:"click",s=ht(i)?Zy(i,"view"):dt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=OB(t.bind)&&t.bind.legend,s=o=>a=>{const u=nn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ii(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ty),o=r+xR,a=i.items.filter(d=>d.hasLegend).map(d=>Ii(`${r}_${Ii(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+TM),f=OB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Pnn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Fo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&w8e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const E8e="_translate_anchor",x8e="_translate_delta",Onn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Em.defined(t),s=r+E8e,{x:o,y:a}=t.project.hasChannel;let u=Zy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+cE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?Cq(e,ki):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?Cq(e,go):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+x8e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&k0e(e,t,o,"width",n),a!==void 0&&k0e(e,t,a,"height",n),n}};function k0e(e,t,n,r,i){const s=t.name,o=s+E8e,a=s+x8e,u=n.channel,l=Em.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===ki?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const S8e="_zoom_anchor",T8e="_zoom_delta",Dnn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Em.defined(t),s=r+T8e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(ki)),l=rt(e.scaleName(go));let c=Zy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+cE,f))),n.push({name:r+S8e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&R0e(e,t,o,"width",n),a!==void 0&&R0e(e,t,a,"height",n),n}};function R0e(e,t,n,r,i){const s=t.name,o=n.channel,a=Em.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?Cq(e,o):u.name,h=s+T8e,p=`${s}${S8e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Tb="_store",Ty="_tuple",$nn="_modify",C8e="vlSelectionResolve",j5=[pnn,dnn,cnn,_8e,b8e,Em,w8e,Nnn,Onn,Dnn,v8e];function Mnn(e){let t=e.parent;for(;t&&!Dl(t);)t=t.parent;return t}function $1(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=Mnn(e);if(r){const{facet:i}=r;for(const s of Tc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function lie(e){return Fo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function A8e(e,t){(ht(t.select)||!t.select.on)&&delete e.events,(ht(t.select)||!t.select.clear)&&delete e.clear,(ht(t.select)||!t.select.toggle)&&delete e.toggle}function Aq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...Aq(e.object)),t.push(...Aq(e.property))),t)}function I8e(e){return e.object.type==="MemberExpression"?I8e(e.object):e.object.name==="datum"}function k8e(e){const t=kne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&I8e(r)&&n.add(Aq(r).slice(1).join("."))}),n}class qS extends Fr{clone(){return new qS(null,this.model,nn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=CM(this.model,this.filter,this),this._dependentFields=k8e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Lnn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ii(i.name),o=i.select,a=ht(o)?o:o.type,u=pt(o)?nn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=nn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:ht(u.on)?Zy(u.on,"scope"):dt(nn(u.on))},f=nn(i);for(const d of j5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function R8e(e,t,n,r="datum"){const i=ht(t)?t:t.param,s=Ii(i),o=rt(s+Tb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function N8e(e,t,n){const r=Ii(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Vc(s))}]`}function Fnn(e,t){for(const[n,r]of _y(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ku(new qS(t,e,{param:n}),i,Si.Lookup,e.component.data.outputNodeRefCounts)}}function CM(e,t,n){return F2(t,r=>ht(r)?r:mZt(r)?R8e(e,r,n):GFe(r))}function jnn(e,t){if(e)return Fe(e)&&!qg(e)?e.map(n=>Vre(n,t)).join(", "):e}function FB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function jC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=ven[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(ER(m)){const{condition:g,...y}=m,v=dt(g),b=i0e[h];if(b){const{vgProp:w,part:x}=b,C=[...v.map(E=>{const{test:S,...A}=E;return{test:CM(null,S),...A}}),y];FB(c,x,w,C),delete c[h]}else if(b===null){const w={signal:v.map(x=>{const{test:C,...E}=x;return`${CM(null,C)} ? ${zge(E)} : `}).join("")+zge(y)};c[h]=w}}else if(Rt(m)){const g=i0e[h];if(g){const{vgProp:y,part:v}=g;FB(c,v,y,m),delete c[h]}}Vn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Ur(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ps(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=vb(a,"datum.label",c.encode.labels.update.text.signal)),FB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of x5e)e.hasAxisPart(p)||delete c.encode[p];Ur(c.encode)&&delete c.encode}const h=jnn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ps(l,0)}}}}function P8e(e){const{axes:t}=e.component,n=[];for(const r of wp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Bnn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>jC(i,"grid",t)),...r.map(i=>jC(i,"grid",t)),...n.map(i=>jC(i,"main",t)),...r.map(i=>jC(i,"main",t))].filter(i=>i)}function N0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ge(o),...Ge(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${jf(o[c])} : ${jf(a[c])}`};return l}return t[i]})])}function Unn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:QFe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${dR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:N0e(a,r,e,n),vgAxisConfig:N0e(u,r,e,n),axisConfigStyle:znn([...u,...a],r)}}function znn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=dt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function Iq(e,t,n,r={}){var s;const i=TFe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const P0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Vnn(n,e),gridScale:({model:e,channel:t})=>Hnn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||D8e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||O8e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Wnn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Gnn(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Knn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Xnn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$8e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return AFe(i?[n0e(i)]:[],Ze(o)?[n0e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Qnn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Jnn(n,t)};function Vnn(e,t){return!ho(e)&&Ze(t)&&!ci(t==null?void 0:t.bin)&&!Ao(t==null?void 0:t.bin)}function Hnn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function qnn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:wI(s);{const{configValue:o}=Iq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?wI(o):n===ki&&Vn([Pre,Nre],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function kq(e){return`(((${e.signal} % 360) + 360) % 360)`}function O8e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=kq(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=kq(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function D8e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=kq(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Wnn(e,t){if(t==="x"&&Vn(["quantitative","temporal"],e))return!0}function Gnn(e,t,n,r){if(n&&!pt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Ynn(e){return e==="x"?"bottom":"left"}function Knn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ho(t)&&t!=="log"){if(Ze(e)){if(ci(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Vn(["month","hours","day","quarter"],(i=fo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Xnn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=HFe(n);if(r)return{signal:r}}}}function $8e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return IFe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Qnn(e,t){const n=e.values;if(Fe(n))return E5e(t,n);if(Rt(n))return n}function Jnn(e,t){return e==="rect"&&vM(t)?1:0}class Ax extends Fr{clone(){return new Ax(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=k8e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(o_(r)&&d5e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${GFe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Ax(t,{calculate:u,as:Ix(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${zn(this.transform)}`}}function Ix(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function B5(e,t){return Vn(["top","bottom"],t)?"column":Vn(["left","right"],t)||e==="row"?"row":"column"}function kx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ps((t||{})[e],i[e],n.header[e])}function U5(e,t,n,r){const i={};for(const s of e){const o=kx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const cie=["row","column"],fie=["header","footer"];function Znn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=U5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=B5(t,a),l=wI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...L8e(l,u),...M8e(u,l,s),...F8e(r,i,t,Ben,B5e)}}}function M8e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=D8e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function L8e(e,t){const n=O8e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ern(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of fie)if(n[i])for(const s of n[i]){const o=nrn(e,t,i,n,s);o!=null&&r.push(o)}return r}function trn(e,t){const{sort:n}=e;return Nh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Fe(n)?{field:Ix(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function Rq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=U5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Mre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=B5(t,a);return{text:{signal:u?vb(vb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...L8e(s,c),...M8e(c,s,o),...F8e(n,e,t,Uen,U5e)}}function nrn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=U5(["labelOrient"],o.header,a,t);(t==="row"&&!Vn(["top","bottom"],f)||t==="column"&&!Vn(["left","right"],f))&&(s=Rq(o,t,a))}const u=Dl(e)&&!bR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:trn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const rrn={column:{start:0,end:1},row:{start:1,end:0}};function irn(e,t){return rrn[t][e]}function srn(e,t){const n={};for(const r of Tc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=U5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=B5(r,o),u=irn(s,a);u!==void 0&&(n[a]=u)}}return Ur(n)?void 0:n}function F8e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=kx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function die(e){return[..._P(e,"width"),..._P(e,"height"),..._P(e,"childWidth"),..._P(e,"childHeight")]}function _P(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ho(o)&&ov(a)){const u=e.scaleName(n);return Dl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[O0e(u,a)]:[O0e(u,a),{name:i,update:j8e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=Eq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function O0e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function j8e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ps(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${jf(o)}, ${jf(s)}) * ${e}_step`}function B8e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function U8e(e,t){return Ge(e).reduce((n,r)=>{const i=e[r];return{...n,...HS(t,i,r,s=>yi(s.value))}},{})}function z8e(e,t){if(Dl(t))return e==="theta"?"independent":"shared";if(YS(t))return"shared";if(bie(t))return ms(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function hie(e,t){const n=e.scale[t],r=ms(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(LJt(t)),"independent"):e[r][t]||"shared"}const orn={...Hen,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},V8e=Ge(orn);class arn extends _g{}const D0e={symbols:urn,gradient:lrn,labels:crn,entries:frn};function urn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...YQt({},n,GZt),...m8e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?H8e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===il)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=yi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=yi(m??1));else if(Fe(f.fill)){const g=Nq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=yi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===il)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Fe(f.stroke)){const g=ps(Nq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==yg){const g=Ze(t)&&W8e(n,i,t);g?f.opacity=[{test:g,...yi(m??1)},yi(u.legend.unselectedOpacity)]:m&&(f.opacity=yi(m))}return f={...f,...e},Ur(f)?void 0:f}function lrn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H8e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=yi(l)),a={...a,...e},Ur(a)?void 0:a}function crn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?W8e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Eb(c)?f=Uf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Uf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Uf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Ur(d)?void 0:d}function frn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H8e(e){return q8e(e,(t,n)=>Math.max(t,n.value))}function Nq(e){return q8e(e,(t,n)=>ps(t,n.value))}function q8e(e,t){if(oen(e))return dt(e.condition).reduce(t,e.value);if(dd(e))return e.value}function W8e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ii(s)+Tb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const $0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return r5e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return i5e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??vrn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??brn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??hrn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>lE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(uE(n)&&Bf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>drn(t,e)};function drn(e,t){const n=e.values;if(Fe(n))return E5e(t,n);if(Rt(n))return n}function hrn(e,t,n,r){if(t!=="shape"){const i=Nq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function prn(e){const{legend:t}=e;return ps(t.type,mrn(e))}function mrn({channel:e,timeUnit:t,scaleType:n}){if(uE(e)){if(Vn(["quarter","month","day"],t))return"symbol";if(Bf(n))return"gradient"}return"symbol"}function grn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??yrn(n,t)}function yrn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function vrn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Bf(i))return n==="horizontal"?r==="top"||r==="bottom"?M0e(t,"width",o,s):o:M0e(t,"height",u,a)}function M0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function brn(e){if(Vn(["quantile","threshold","log","symlog"],e))return"greedy"}function G8e(e){const t=Qi(e)?_rn(e):Srn(e);return e.component.legends=t,t}function _rn(e){const{encoding:t}=e,n={};for(const r of[il,...V5e]){const i=$s(t[r]);!i||!e.getScaleComponent(r)||r===sl&&Ze(i)&&i.type===VS||(n[r]=xrn(e,r))}return n}function wrn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Ern(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function xrn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new arn({},wrn(e,t));Pnn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=$s(i[t]),f=Ze(c)?(w=fo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=prn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=grn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of V8e){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const C=x in $0e?$0e[x](m):n[x];if(C!==void 0){const E=Ern(C,x,n,e.fieldDef(t));(E||s.legend[x]===void 0)&&a.set(x,C,E)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const C=U8e(g[x]??{},e),E=x in D0e?D0e[x](C,b):C;E!==void 0&&!Ur(E)&&(v[x]={...y!=null&&y.length&&Ze(c)?{name:`${Ii(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:E})}return Ur(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Srn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){G8e(r);for(const i of Ge(r.component.legends))n.legend[i]=hie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y8e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ge(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y8e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of V8e){const c=xy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Trn(f,d);case"title":return kFe(f,d);case"type":return i=!0,gl("symbol")}return $5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&dM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&dM(e.explicit,["encode","gradient"])),e}function Trn(e,t){return t.value==="circle"?t:e}function Crn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function K8e(e){const t=e.component.legends,n={};for(const i of Ge(t)){const s=e.getScaleComponent(i),o=zr(s.get("domains"));if(n[o])for(const a of n[o])Y8e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Fo(n).flat().map(i=>Arn(i,e.config)).filter(i=>i!==void 0)}function Arn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of V5e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=vb(r,"datum.label",s.encode.labels.update.text.signal)),Crn(s,"labels","text",{signal:l})}return s}}function Irn(e){return YS(e)||bie(e)?krn(e):X8e(e)}function krn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),X8e(e))}function X8e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Vn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Rrn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Q8e extends _g{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J8e(e){e.component.projection=Qi(e)?Nrn(e):Drn(e)}function Nrn(e){if(e.hasProjection){const t=Nu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Prn(e):void 0,s=new Q8e(e.projectionName(!0),{...Nu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Prn(e){const t=[],{encoding:n}=e;for(const r of[[Td,Sd],[Hc,Cd]])($s(n[r[0]])||$s(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(sl)&&e.typedFieldDef(sl).type===VS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Si.Main)),t}function Orn(e,t){const n=ore(Rrn,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&Rl(e.get(i),t.get(i))));if(Rl(e.size,t.size)){if(n)return e;if(Rl(e.explicit,{}))return t;if(Rl(t.explicit,{}))return e}return null}function Drn(e){if(e.children.length===0)return;let t;for(const r of e.children)J8e(r);const n=ore(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Orn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Q8e(r,t.specifiedProjection,t.size,nn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function $rn(e,t,n,r){if(wR(t,n)){const i=Qi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:vR(s,o,i.format,i.formatType,r)}}return{}}function Z8e(e,t){return`${wFe(e)}_${t}`}function Mrn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function pie(e,t,n){const r=k5(n,void 0)??{},i=Z8e(r,t);return e.getName(`${i}_bins`)}function Lrn(e){return"as"in e}function L0e(e,t,n){let r,i;Lrn(e)?r=ht(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...k5(t,void 0)},o=Z8e(s,e.field),{signal:a,extentSignal:u}=Mrn(n,o);if(v5(s.extent)){const c=s.extent;i=N8e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Oh extends Fr{clone(){return new Oh(null,nn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(au(s)&&ci(s.bin)){const{key:a,binComponent:u}=L0e(s,s.bin,n);i[a]={...u,...i[a],...$rn(n,s,o,n.config)}}return i},{});return Ur(r)?null:new Oh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=L0e(n,n.bin,r);return new Oh(t,{[i]:s})}merge(t,n){for(const r of Ge(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=gh([...this.bins[r].as,...t.bins[r].as],zn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Fo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Fo(this.bins).map(t=>t.field))}hash(){return`Bin ${zn(this.bins)}`}assemble(){return Fo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Vc(t.field),as:r,signal:t.signal,...v5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Vc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Frn(e,t,n,r){var s;const i=Qi(r)?r.encoding[_p(t)]:void 0;if(au(n)&&Qi(r)&&p5e(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Ey({fieldDef:n,markDef:a,config:u});EI(o)&&l!==.5&&ms(t)&&(e.add(at(n,{suffix:M5})),e.add(at(n,{suffix:L5}))),n.bin&&wR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(fFe(t)){const o=cFe(t);e.add(r.getName(o))}else e.add(at(n));return o_(n)&&IZt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function jrn(e,t){for(const n of Ge(t)){const r=t[n];for(const i of Ge(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Zf extends Fr{clone(){return new Zf(null,new Set(this.dimensions),nn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Km(u)||sv(u)){const c=Km(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);vg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Frn(s,a,o,n)}),s.size+Ge(i).length===0)?null:new Zf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ge(i).length===0?null:new Zf(t,r,i)}merge(t){return nFe(this.dimensions,t.dimensions)?(jrn(this.measures,t.measures),!0):(ZJt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ge(this.measures)])}producedFields(){const t=new Set;for(const n of Ge(this.measures))for(const r of Ge(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${zn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ge(this.measures))for(const o of Ge(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Vc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Vc),ops:t,fields:n,as:r}}}class WS extends Fr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Tc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ci(a)?[at(o,{binSuffix:"end"})]:[]],...Nh(u)?{sortField:u}:Fe(u)?{sortIndexField:Ix(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Tc)this[n]&&(t+=` ${n.charAt(0)}:${zn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Tc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Tc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of wp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ho(i)&&ov(s)){const o=z5(this.childModel,n),a=vie(o);a?t[n]=a:Je(bre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=T5,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of cie){for(const c of fie){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[wm,_m])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function F0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Brn(e,t){const n=lre(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=F0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=F0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(uJt(t)),null}function Urn(e){const t={};return KO(e.filter,n=>{if(WFe(n)){let r=null;xre(n)?r=Sl(n.equal):Tre(n)?r=Sl(n.lte):Sre(n)?r=Sl(n.lt):Cre(n)?r=Sl(n.gt):Are(n)?r=Sl(n.gte):Ire(n)?r=n.range[0]:kre(n)&&(r=(n.oneOf??n.in)[0]),r&&(r_(r)?t[n.field]="date":lr(r)?t[n.field]="number":ht(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function zrn(e){const t={};function n(r){Sx(r)?t[r.field]="date":r.type==="quantitative"&&jQt(r.aggregate)?t[r.field]="number":yx(r.field)>1?r.field in t||(t[r.field]="flatten"):o_(r)&&Nh(r.sort)&&yx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Qi(e)||Dl(e))&&e.forEachFieldDef((r,i)=>{if(au(r))n(r);else{const s=t_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Qi(e)){const{mark:r,markDef:i,encoding:s}=e;if(s_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Vrn(e){const t={};if(Qi(e)&&e.component.selection)for(const n of Ge(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&yx(i.field)>1&&(t[i.field]="flatten")}return t}class ba extends Fr{clone(){return new ba(null,nn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${zn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!U0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ge(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(Yge(a,r[a],u.value)))}for(const a of Ge(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(Yge(a,n[a],u)))}const s=new _g(n,r);i.copyAll(s);const o={};for(const a of Ge(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ge(o).length===0||i.parseNothing?null:new ba(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ge(this._parse)){const r=this._parse[n];yx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ge(this._parse))}dependentFields(){return new Set(Ge(this._parse))}assembleTransforms(t=!1){return Ge(this._parse).filter(n=>t?yx(n)>1:!0).map(n=>{const r=Brn(n,this._parse[n]);return r?{type:"formula",expr:r,as:US(n)}:null}).filter(n=>n!==null)}}class Cy extends Fr{clone(){return new Cy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([hd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:hd}}}class SR extends Fr{clone(){return new SR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${zn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class TR extends Fr{clone(){return new TR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${zn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Cb extends Fr{constructor(t){super(null),t??(t={name:"source"});let n;if(U0(t)||(n=t.format?{...Gu(t.format,["parse"])}:{}),xI(t))this._data={values:t.values};else if(Tx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Vn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else a8e(t)?this._data={values:[{type:"Sphere"}]}:(s8e(t)||U0(t))&&(this._data={});this._generator=U0(t),t.name&&(this._name=t.name),n&&!Ur(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var j0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Hrn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},BC;function mie(e){return e instanceof Cb||e instanceof SR||e instanceof TR}class gie{constructor(){BC.set(this,void 0),j0e(this,BC,!1,"f")}setModified(){j0e(this,BC,!0,"f")}get modifiedFlag(){return Hrn(this,BC,"f")}}BC=new WeakMap;class a_ extends gie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class yie extends gie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class qrn extends yie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ge(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Wrn extends yie{constructor(t){super(),this.requiresSelectionId=t&&lie(t)}run(t){t instanceof Cy&&(this.requiresSelectionId&&(mie(t.parent)||t.parent instanceof Zf||t.parent instanceof ba)||(this.setModified(),t.remove()))}}class Grn extends gie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ph&&(r=t.producedFields(),are(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Yrn extends yie{constructor(){super()}run(t){t instanceof Ku&&!t.isRequired()&&(this.setModified(),t.remove())}}class Krn extends a_{run(t){if(!mie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ba)if(t instanceof ba)this.setModified(),t.merge(n);else{if(ure(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Xrn extends a_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ba);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ge(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Ur(i)){this.setModified();const o=new ba(t,i);for(const a of n){if(a instanceof ba)for(const u of Ge(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ba&&Ge(a.parse).length===0&&a.remove()}}}}}class Qrn extends a_{run(t){t instanceof Ku||t.numChildren()>0||t instanceof WS||t instanceof Cb||(this.setModified(),t.remove())}}class Jrn extends a_{run(t){const n=t.children.filter(i=>i instanceof Ph),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Zrn extends a_{run(t){const n=t.children.filter(i=>i instanceof Zf),r={};for(const i of n){const s=zn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ge(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class ein extends a_{constructor(t){super(),this.model=t}run(t){const n=!(mie(t)||t instanceof qS||t instanceof ba||t instanceof Cy),r=[],i=[];for(const s of t.children)s instanceof Oh&&(n&&!ure(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Oh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class tin extends a_{run(t){const n=[...t.children];if(!yb(n,o=>o instanceof Ku)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Ku){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Ku)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class u_ extends Fr{clone(){return new u_(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function nin(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function rin(e){return Fe(e)&&e.every(t=>ht(t))&&e.length>1}class xm extends Fr{clone(){return new xm(null,nn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ps(f.order,"ascending"));const l={field:a,order:u};let c;return rin(s)?c=s:ht(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new xm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Zh(p)}).filter(h=>!!h),c=nin(n),f=n.encoding.order;let d;if(Fe(f)||Ze(f))d=CFe(f);else{const h=m5e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new xm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${zn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class GS extends Fr{clone(){return new GS(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>yre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function iin(e){function t(n){if(!(n instanceof WS)){const r=n.clone();if(r instanceof Ku){const i=Oq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Zf||r instanceof xm||r instanceof GS||r instanceof u_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function Pq(e){if(e instanceof WS)if(e.numChildren()===1&&!(e.children[0]instanceof Ku)){const t=e.children[0];(t instanceof Zf||t instanceof xm||t instanceof GS||t instanceof u_)&&t.addDimensions(e.fields),t.swapWithParent(),Pq(e)}else{const t=e.model.component.data.main;eje(t);const n=iin(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(Pq)}function eje(e){if(e instanceof Ku&&e.type===Si.Main&&e.numChildren()===1){const t=e.children[0];t instanceof WS||(t.swapWithParent(),eje(e))}}const Oq="scale_",wP=5;function Dq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!Dq(t.children))return!1}return!0}function hf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function B0e(e,t,n){let r=e.sources,i=!1;return i=hf(new Yrn,r)||i,i=hf(new Wrn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=hf(new Qrn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=hf(new Krn,r)||i,i=hf(new ein(t),r)||i,i=hf(new Grn,r)||i,i=hf(new Xrn,r)||i,i=hf(new Zrn,r)||i,i=hf(new Jrn,r)||i,i=hf(new qrn,r)||i,i=hf(new tin,r)||i),e.sources=r,i}function sin(e,t){Dq(e.sources);let n=0,r=0;for(let i=0;i<wP&&B0e(e,t,!0);i++)n++;e.sources.map(Pq);for(let i=0;i<wP&&B0e(e,t,!1);i++)r++;Dq(e.sources),Math.max(n,r)===wP&&Je(`Maximum optimization runs(${wP}) reached.`)}class eo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new eo(()=>t(n))}}function tje(e){Qi(e)?oin(e):ain(e)}function oin(e){const t=e.component.scales;for(const n of Ge(t)){const r=lin(e,n);if(t[n].setWithExplicit("domains",r),fin(e,n),e.component.data.isFaceted){let s=e;for(;!Dl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)cm(a)&&(a.data=Oq+a.data.replace(Oq,""))}}}function ain(e){for(const n of e.children)tje(n);const t=e.component.scales;for(const n of Ge(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=xy(r,o.getWithExplicit("domains"),"domains","scale",$q);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(iJt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function uin(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=U0e(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=U0e(t,n);if(i)return"unaggregated"}return e}function lin(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=uin(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&$s(r.x2)?$s(r.x)?xy(Mg(n,i,e,"x"),Mg(n,i,e,"x2"),"domain","scale",$q):Mg(n,i,e,"x2"):t==="y"&&$s(r.y2)?$s(r.y)?xy(Mg(n,i,e,"y"),Mg(n,i,e,"y2"),"domain","scale",$q):Mg(n,i,e,"y2"):Mg(n,i,e,t)}function cin(e,t,n){return e.map(r=>({signal:`{data: ${R5(r,{timeUnit:n,type:t})}}`}))}function jB(e,t,n){var i;const r=(i=fo(n))==null?void 0:i.unit;return t==="temporal"||r?cin(e,t,r):[e]}function Mg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=$s(i[r]),{type:c}=l,f=l.timeUnit;if(AZt(t)){const p=Mg(e,void 0,n,r),m=jB(t.unionWith,c,f);return Yd([...m,...p.value])}else{if(Rt(t))return Yd([t]);if(t&&t!=="unaggregated"&&!ZFe(t))return Yd(jB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return gl([[0,1]]);const p=n.requestDataName(Si.Main);return gl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=vg(r)&&Ze(l)?din(n,r,e):void 0;if(Ep(l)){const p=jB([l.datum],c,f);return gl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Si.Main),{field:m}=l;return gl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ci(h.bin)){if(ho(e))return gl(e==="bin-ordinal"?[]:[{data:_I(d)?n.requestDataName(Si.Main):n.requestDataName(Si.Raw),field:n.vgField(r,wR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!pt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ci(p)){const m=pie(n,h.field,p);return gl([new eo(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return gl([{data:n.requestDataName(Si.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Vn(["time","utc"],e)){const p=i[_p(r)];if(p5e(h,p,s,a)){const m=n.requestDataName(Si.Main),g=Ey({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=EI(o)&&g!==.5&&ms(r);return gl([{data:m,field:n.vgField(r,y?{suffix:M5}:{})},{data:m,field:n.vgField(r,{suffix:y?L5:"end"})}])}}return gl(d?[{data:_I(d)?n.requestDataName(Si.Main):n.requestDataName(Si.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Si.Main),field:n.vgField(r)}])}function BB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":T5),...r?{field:Vc(r)}:{},...i?{order:i}:{}}}function fin(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=ZFe(r)&&r,o=n_(i)&&v5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function din(e,t,n){if(!ho(n))return;const r=e.fieldDef(t),i=r.sort;if(d5e(i))return{op:"min",field:Ix(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Nh(i)){const a=s&&!o.has(i.field);return BB(i,a)}else if(f5e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Km(c)||sv(c))return BB({field:at(l),order:u},d);if(yre(c)||!c)return BB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Vn(["ascending",void 0],i))return!0}}function U0e(e,t){const{aggregate:n,type:r}=e;return n?ht(n)&&!UQt.has(n)?{valid:!1,reason:RJt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:NJt(e)}:{valid:!0}:{valid:!1,reason:kJt(e)}}function $q(e,t,n,r){return e.explicit&&t.explicit&&Je(MJt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function hin(e){const t=gh(e.map(o=>{if(cm(o)){const{sort:a,...u}=o;return u}return o}),zn),n=gh(e.map(o=>{if(cm(o)){const a=o.sort;return a!==void 0&&!_I(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),zn);if(t.length===0)return;if(t.length===1){const o=e[0];if(cm(o)&&n.length>0){let a=n[0];if(n.length>1){Je(Xge);const u=n.filter(l=>pt(l)&&"op"in l&&l.op!=="min");n.every(l=>pt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(pt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=gh(n.map(o=>_I(o)||!("op"in o)||ht(o.op)&&o.op in LQt?o:(Je(FJt(o)),!0)),zn);let i;r.length===1?i=r[0]:r.length>1&&(Je(Xge),i=!0);const s=gh(e.map(o=>cm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function vie(e){if(cm(e)&&ht(e.field))return e.field;if(zQt(e)){let t;for(const n of e.fields)if(cm(n)&&ht(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(jJt),t}return Je(BJt),t}else if(VQt(e)){Je(UJt);const t=e.fields[0];return ht(t)?t:void 0}}function z5(e,t){const r=e.component.scales[t].get("domains").map(i=>(cm(i)&&(i.data=e.lookupDataSource(i.data)),i));return hin(r)}function nje(e){return YS(e)||bie(e)?e.children.reduce((t,n)=>t.concat(nje(n)),z0e(e)):z0e(e)}function z0e(e){return Ge(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=pin(i.range,s,n,e),h=z5(e,n),p=a?unn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function pin(e,t,n,r){if(ms(n)){if(ov(e))return{step:{signal:`${t}_step`}}}else if(pt(e)&&cm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class rje extends _g{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:yb(this.get("domains"),t=>Fe(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const min=["range","scheme"];function gin(e){const t=e.component.scales;for(const n of y5){const r=t[n];if(!r)continue;const i=yin(n,e);r.setWithExplicit("range",i)}}function V0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=ol(t),o=e.getName(s);if(pt(r)&&r.binned&&r.step!==void 0)return new eo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ci(r)){const a=pie(e,i,r);return new eo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function yin(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of min)if(n[f]!==void 0){const d=bq(s,f),h=e5e(e,f);if(!d)Je(OFe(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(Fe(p)){if(ms(e))return Yd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return eo.fromName(y,g)}return m}))}else if(pt(p))return Yd({data:t.requestDataName(Si.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Yd(p)}case"scheme":return Yd(vin(n[f]))}}const o=e===ki||e==="xOffset"?"width":"height",a=r[o];if(ep(a)){if(ms(e))if(ho(s)){const f=sje(a,t,e);if(f)return Yd({step:f})}else Je(DFe(o));else if(mR(e)){const f=e===ev?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=oje(a,s);if(p)return Yd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=bin(e,t);return(u!==void 0||l!==void 0)&&bq(s,"rangeMin")&&Fe(c)&&c.length===2?Yd([u??c[0],l??c[1]]):gl(c)}function vin(e){return CZt(e)?{scheme:e.name,...Gu(e,["name"])}:{scheme:e}}function ije(e,t,n,{center:r}={}){const i=ol(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===go&&Gl(n)?r?[eo.fromName(a=>`${o(a)}/2`,s),eo.fromName(a=>`-${o(a)}/2`,s)]:[eo.fromName(o,s),0]:r?[eo.fromName(a=>`-${o(a)}/2`,s),eo.fromName(a=>`${o(a)}/2`,s)]:[0,eo.fromName(o,s)]}function bin(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=$s(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ki:case go:{if(Vn(["point","band"],u)){const f=aje(e,n,r.view);if(ep(f))return{step:sje(f,t,e)}}return ije(e,t,u)}case ev:case zS:return _in(e,t,u);case gg:{const f=t.component.scales[e].get("zero"),d=uje(i,f,r),h=xin(i,n,t,r);return wx(u)?Ein(d,h,win(u,r,l,e)):[d,h]}case of:return[0,Math.PI*2];case e_:return[0,360];case xd:return[0,new eo(()=>{const f=t.getSignalName(Dl(t.parent)?"child_width":"width"),d=t.getSignalName(Dl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case rv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case iv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case sl:return"symbol";case il:case vp:case bp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case yg:case tv:case nv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function sje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=hre(n),o=r[s];if(q5e({step:e,offsetIsDiscrete:cn(o)&&YFe(o.type)})==="offset"&&C5e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${GQt(f)})`}}else return e.step}function oje(e,t){if(q5e({step:e,offsetIsDiscrete:ho(t)})==="offset")return{step:e.step}}function _in(e,t,n){const r=e===ev?"x":"y",i=t.getScaleComponent(r);if(!i)return ije(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=aje(r,t.size,t.config.view);if(ep(l)){const c=oje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=HFe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Ey({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return eFe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function aje(e,t,n){const r=e===ki?"width":"height",i=t[r];return i||xM(n,r)}function win(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Fe(n)?n.length+1:(Je(XJt(r)),3)}}function Ein(e,t,n){const r=()=>{const i=jf(t),s=jf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new eo(r):{signal:r()}}function uje(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${uje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(b5("size",e))}const H0e=.95;function xin(e,t,n,r){const i={x:V0e(n,"x"),y:V0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=q0e(t,i,r.view);return lr(s)?s-1:new eo(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=q0e(t,i,r.view);return lr(s)?Math.pow(H0e*s,2):new eo(()=>`pow(${H0e} * ${s.signal}, 2)`)}}throw new Error(b5("size",e))}function q0e(e,t,n){const r=ep(e.width)?e.width.step:EM(n,"width"),i=ep(e.height)?e.height.step:EM(n,"height");return t.x||t.y?new eo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function lje(e,t){Qi(e)?Sin(e,t):fje(e,t)}function Sin(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ge(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=$s(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=bq(h,t),y=e5e(a,t);if(d!==void 0&&(g?y&&Je(y):Je(OFe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":r_(u[t])||b==="temporal"||v?l.set(t,{signal:R5(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in W0e?W0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:A5e(i,a),hasSecondaryRangeChannel:!!i[_p(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const W0e={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?Tin(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Cin(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Ain(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Iin(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>kin(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Rin(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return Nin(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Pin(e,t,n,r,i,s.scale,o)};function cje(e){Qi(e)?gin(e):fje(e,"range")}function fje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?cje(r):lje(r,t);for(const r of Ge(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=xy(i,a,t,"scale",i8e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Tin(e,t){const n=t.bin;if(ci(n)){const r=pie(e,t.field,n);return new eo(()=>e.getSignalName(r))}else if(Ao(n)&&n_(n)&&n.step!==void 0)return{step:n.step}}function Cin(e,t){if(Vn([il,vp,bp],e)&&t!=="nominal")return"hcl"}function Ain(e,t,n,r,i,s){var o;if(!((o=Zh(s))!=null&&o.bin||Fe(n)||i!=null||r!=null||Vn([Yu.TIME,Yu.UTC],e)))return ms(t)?!0:void 0}function Iin(e,t,n,r,i,s){if(ms(e)){if(Bf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Yu.POINT)return n.pointPadding}}function kin(e,t,n,r,i,s=!1){if(e===void 0){if(ms(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ps(o,n==="bar"?a:u)}else if(mR(t)&&r===Yu.BAND)return i.offsetBandPaddingInner}}function Rin(e,t,n,r,i,s=!1){if(e===void 0){if(ms(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Yu.BAND)return ps(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(mR(t)){if(n===Yu.POINT)return .5;if(n===Yu.BAND)return i.offsetBandPaddingOuter}}}function Nin(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Gl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Gl(e)&&t==="descending")return!0}function Pin(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Gl(i)){if(Fe(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!wx(i))return!0;if(!(Ze(t)&&t.bin)&&Vn([...wp,...kQt],e)){const{orient:u,type:l}=r;return Vn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Vn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Oin(e,t,n,r,i=!1){const s=Din(t,n,r,i),{type:o}=e;return vg(t)?o!==void 0?OZt(t,o)?Ze(n)&&!PZt(o,n.type)?(Je(DJt(o,s)),s):o:(Je(OJt(t,o,s)),s):s:null}function Din(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(uE(e)||NB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(PB(e,"ordinal")),"ordinal";if(ms(e)||mR(e)){if(Vn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in gre)return"band";const s=n[ol(e)];return xb(s)||xx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return uE(e)?"time":NB(e)==="discrete"?(Je(PB(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&fo(t.timeUnit).utc?"utc":"time";case"quantitative":return uE(e)?Ze(t)&&ci(t.bin)?"bin-ordinal":"linear":NB(e)==="discrete"?(Je(PB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(NFe(t.type))}function $in(e,{ignoreRange:t}={}){dje(e),tje(e);for(const n of NZt)lje(e,n);t||cje(e)}function dje(e){Qi(e)?e.component.scales=Min(e):e.component.scales=Fin(e)}function Min(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of y5){const o=$s(t[s]);if(o&&n===u5e&&s===sl&&o.type===VS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=A5e(t,s),l=Oin(a,s,o,r,u);i[s]=new rje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Lin=i8e((e,t)=>Jge(e)-Jge(t));function Fin(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){dje(s);for(const o of Ge(s.component.scales))if((t=i.scale)[o]??(t[o]=z8e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?wZt(a.value,u.value)?r[o]=xy(a,u,"type","scale",Lin):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ge(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new rje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class UB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Qi(e){return(e==null?void 0:e.type)==="unit"}function Dl(e){return(e==null?void 0:e.type)==="facet"}function bie(e){return(e==null?void 0:e.type)==="concat"}function YS(e){return(e==null?void 0:e.type)==="layer"}class _ie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Nu(a),this.name=t.name??i,this.title=qg(t.title)?{text:t.title}:t.title?Nu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new UB,this.projectionNameMap=r?r.projectionNameMap:new UB,this.signalNameMap=r?r.signalNameMap:new UB,this.data=t.data,this.description=t.description,this.transforms=qtn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Ken(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:C5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new _g,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){$in(this)}parseProjection(){J8e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){G8e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ge(r)){const o=r[s];o!==void 0&&(i[s]=yi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=yi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ur(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=srn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Tc)t[r].title&&n.push(Znn(this,r));for(const r of cie)n=n.concat(ern(this,r));return n}assembleAxes(){return Bnn(this.component.axes,this.config)}assembleLegends(){return K8e(this)}assembleProjections(){return Irn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...EFe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Vn(["unit","layer"],this.type)?Vn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ur(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Dl(this.parent)?nje(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ii((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Si[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Dl(this.parent)){const n=B8e(t),r=g5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ho(s)&&ov(o)){const a=i.get("name"),u=z5(this,r),l=vie(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:j8e(a,i,c)}}else return Je(bre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(hFe(t)&&vg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(JQt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class hje extends _ie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return Sen(this.getMapping(),(r,i,s)=>{const o=Zh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Wre(this.getMapping(),(r,i)=>{const s=Zh(r);s&&t(s,i)},n)}}class V5 extends Fr{clone(){return new V5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${zn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class H5 extends Fr{clone(){return new H5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${zn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class SI extends Fr{clone(){return new SI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(_r("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=vg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Gl(d)&&l.aggregate!=="count"&&!s_(i)&&(u[l.field]=l)}return u},{});return Ge(a).length?new SI(t,a):null}dependentFields(){return new Set(Ge(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${zn(this.filter)}`}assemble(){const t=Ge(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class q5 extends Fr{clone(){return new q5(this.parent,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${zn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class W5 extends Fr{clone(){return new W5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${zn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class fE extends Fr{clone(){return new fE(null,nn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Td,Sd],[Hc,Cd]]){const s=i.map(o=>{const a=$s(n.encoding[o]);return Ze(a)?a.field:Ep(a)?{expr:`${a.datum}`}:dd(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new fE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(sl)){const i=n.typedFieldDef(sl);i.type===VS&&(t=new fE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(ht);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${zn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class TI extends Fr{clone(){return new TI(null,this.projection,nn(this.fields),nn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Td,Sd],[Hc,Cd]]){const i=r.map(o=>{const a=$s(n.encoding[o]);return Ze(a)?a.field:Ep(a)?{expr:`${a.datum}`}:dd(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Hc?"2":"";(i[0]||i[1])&&(t=new TI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ht))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${zn(this.fields)} ${zn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class M1 extends Fr{clone(){return new M1(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new M1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=k5e(n.mark,r);return new M1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${zn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Ctn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class G5 extends Fr{clone(){return new G5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${zn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class CI extends Fr{clone(){return new CI(null,nn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Atn(o)){let u=gje(o.data,s);u||(u=new Cb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Ku(u,l,Si.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Itn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ii(u),u)}catch{throw new Error(nJt(u))}if(a=l.materialized,!a)throw new Error(rJt(u))}return new CI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?dt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${zn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:dt(this.transform.as)}:{}};else{let n=this.transform.as;ht(n)||(Je(fJt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Y5 extends Fr{clone(){return new Y5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${zn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class K5 extends Fr{clone(){return new K5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${zn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class X5 extends Fr{clone(){return new X5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${zn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class Q5 extends Fr{clone(){return new Q5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${zn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function pje(e){let t=0;function n(r,i){if(r instanceof Cb&&!r.isGenerator&&!Tx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ba&&(r.parent instanceof Cb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof WS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof SR||r instanceof TR||r instanceof SI||r instanceof qS||r instanceof Ax||r instanceof TI||r instanceof Zf||r instanceof CI||r instanceof GS||r instanceof u_||r instanceof W5||r instanceof q5||r instanceof V5||r instanceof G5||r instanceof Y5||r instanceof K5||r instanceof Cy||r instanceof Q5||r instanceof X5||r instanceof H5)&&i.transform.push(r.assemble()),(r instanceof Oh||r instanceof Ph||r instanceof M1||r instanceof xm||r instanceof fE)&&i.transform.push(...r.assemble()),r instanceof Ku&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Ku?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Ku&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function jin(e){const t=[],n=pje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Bin(e,t){const n=[],r=pje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Uin(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function zin(e){for(const t of Tc)Vin(e,t);G0e(e,"x"),G0e(e,"y")}function Vin(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=kx("title",null,r,t);let l=lE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Fe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=kx("labelOrient",a.header,r,t),f=a.header!==null?ps((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Vn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[mje(e,t,f)]}}}function mje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function G0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=hie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Uin(a.get("orient"));o[u]??(o[u]=[mje(e,s,!1)]);const l=jC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Hin(e){wie(e),AM(e,"width"),AM(e,"height")}function qin(e){wie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";AM(e,t),AM(e,n)}function wie(e){for(const t of e.children)t.parseLayoutSize()}function AM(e,t){const n=B8e(t),r=g5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??z8e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=xy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Win(e){const{size:t,component:n}=e;for(const r of wp){const i=ol(r);if(t[i]){const s=t[i];n.layoutSize.set(i,ep(s)?"step":s,!0)}else{const s=Gin(e,i);n.layoutSize.set(i,s,!1)}}}function Gin(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ho(s)){const a=xM(r.view,t);return ov(o)||ep(a)?"step":a}else return Eq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return Eq(r.view,t);{const s=xM(r.view,t);return ep(s)?s.step:s}}}function Mq(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class B2 extends hje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Cie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!bR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ge(t),r={};for(const i of n){if(![_m,wm].includes(i)){Je(b5(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(yq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Hre(t,n);return r.header?r.header=Nu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=J5(this),this.child.parseData()}parseLayoutSize(){wie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),zin(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Tc)for(const r of fie){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=kx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=B5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof B2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof B2?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof B2){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of wp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ho(o)&&ov(a)){const u=z5(this.child,i),l=vie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(bre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Tc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ci(d)&&u.push(at(f,{binSuffix:"end"})),Nh(h)){const{field:p,op:m=T5}=h,g=Mq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Fe(h)){const p=Ix(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Nh(r.sort)?[Mq(r,r.sort,{expr:"datum"})]:Fe(r.sort)?[Ix(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Nh(i)?i.order:!Fe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return Rq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of cie)if(t[s]){const o=kx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return Rq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=jin(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Tc.map(u=>this.facetSortFields(u)).flat(),order:Tc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(inn(this,[]))}]}getMapping(){return this.facet}}function Yin(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Nh(s.sort)){const{field:o,op:a=T5}=s.sort;e=i=new u_(e,{joinaggregate:[{op:a,field:o,as:Mq(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function gje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(xI(e)&&xI(a)){if(Rl(e.values,a.values))return o}else if(Tx(e)&&Tx(a)){if(e.url===a.url)return o}else if(s8e(e)&&e.name===o.dataName)return o}}return null}function Kin(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Cb({values:[]});return t.push(r),r}const n=gje(e.data,t);if(n)return U0(e.data)||(n.data.format=tFe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Cb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Xin(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Ftn(i))o=e=new Ax(e,i),s="derived";else if(rie(i)){const a=Urn(i);o=e=ba.makeWithAncestors(e,{},a,n)??e,e=new qS(e,t,i.filter)}else if(e8e(i))o=e=Oh.makeFromTransform(e,i,t),s="number";else if(Btn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ba(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Ph.makeFromTransform(e,i);else if(Utn(i))o=e=Zf.makeFromTransform(e,i),s="number",lie(t)&&(e=new Cy(e));else if(Z5e(i))o=e=CI.make(e,t,i,r++),s="derived";else if($tn(i))o=e=new GS(e,i),s="number";else if(Mtn(i))o=e=new u_(e,i),s="number";else if(ztn(i))o=e=xm.makeFromTransform(e,i),s="derived";else if(Vtn(i))o=e=new W5(e,i),s="derived";else if(Htn(i))o=e=new H5(e,i),s="derived";else if(Ltn(i))o=e=new q5(e,i),s="derived";else if(ktn(i))o=e=new X5(e,i),s="derived";else if(Dtn(i))e=new Q5(e,i);else if(jtn(i))o=e=M1.makeFromTransform(e,i),s="derived";else if(Rtn(i))o=e=new V5(e,i),s="derived";else if(Ntn(i))o=e=new Y5(e,i),s="derived";else if(Ptn(i))o=e=new K5(e,i),s="derived";else if(Otn(i))o=e=new G5(e,i),s="derived";else{Je(cJt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function J5(e){var h;let t=Kin(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(U0(i)||Tx(i)||xI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new nnn;U0(i)?(o8e(i)?t=new TR(t,i.sequence):iie(i)&&(t=new SR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ba.makeExplicit(t,e,o)??t,t=new Cy(t);const a=e.parent&&YS(e.parent);(Qi(e)||Dl(e))&&a&&(t=Oh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Xin(t,e,o));const u=Vrn(e),l=zrn(e);t=ba.makeWithAncestors(t,{},{...u,...l},o)??t,Qi(e)&&(t=fE.parseAll(t,e),t=TI.parseAll(t,e)),(Qi(e)||Dl(e))&&(a||(t=Oh.makeFromEncoding(t,e)??t),t=Ph.makeFromEncoding(t,e)??t,t=Ax.parseAllForSortIndex(t,e));const c=t=Y0e(Si.Raw,e,t);if(Qi(e)){const p=Zf.makeFromEncoding(t,e);p&&(t=p,lie(e)&&(t=new Cy(t))),t=M1.makeFromEncoding(t,e)??t,t=xm.makeFromEncoding(t,e)??t}Qi(e)&&(t=SI.make(t,e)??t);const f=t=Y0e(Si.Main,e,t);Qi(e)&&Fnn(e,f);let d=null;if(Dl(e)){const p=e.getName("facet");t=Yin(t,e.facet)??t,d=new WS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Y0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Ku(n,s,e,i);return r[s]=o,o}class Qin extends _ie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(aJt),this.children=this.getChildren(t).map((l,c)=>Cie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=J5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return O5(t)?t.vconcat:tie(t)?t.hconcat:t.concat}parseLayoutSize(){qin(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=die(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Jin(e){return e===!1||e===null}const Zin={disable:1,gridScale:1,scale:1,...S5e,labelExpr:1,encode:1},yje=Ge(Zin);class Eie extends _g{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Eie(nn(this.explicit),nn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Jin(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function esn(e,t,n){const{encoding:r,config:i}=e,s=$s(r[t])??$s(r[_p(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Eb(u))return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Ex(s)==="quantitative"){if(xx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Ex(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function tsn(e){return wp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[usn(n,e)]),t),{})}const nsn={bottom:"top",top:"bottom",left:"right",right:"left"};function rsn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ge(i.component.axes))n.axis[s]=hie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=isn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of wp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=nsn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function isn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=ssn(i,s)}}}else return t.map(n=>n.clone());return e}function ssn(e,t){for(const n of yje){const r=xy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return kFe(i,s);case"gridScale":return{explicit:i.explicit,value:ps(i.value,s.value)}}return $5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function osn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:wI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$8e(r,i))return!0}return e===n[t]}const asn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function usn(e,t){var y,v;let n=t.axis(e);const r=new Eie,i=$s(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Ynn(e),u=t.getScaleComponent(e).get("type"),l=Unn(e,u,a,t.config),c=n!==void 0?!n:Iq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=qnn(i,n,e,o.style,l),d=i5e(n.formatType,i,u),h=r5e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of yje){const w=b in P0e?P0e[b](p):s0e(b)?n[b]:void 0,x=w!==void 0,C=osn(w,b,n,t,e);if(x&&C)r.set(b,w,C);else{const{configValue:E=void 0,configFrom:S=void 0}=s0e(b)&&b!=="values"?Iq(b,o.style,n.style,l):{},A=E!==void 0;x&&!A?r.set(b,w,C):(S!=="vgAxisConfig"||asn.has(b)&&A||ER(E)||Rt(E))&&r.set(b,E,!1)}}const m=n.encoding??{},g=x5e.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const x=U8e(m[w]??{},t),C=w==="labels"?esn(t,e,x):x;return C!==void 0&&!Ur(C)&&(b[w]={update:C}),b},{});return Ur(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function lsn({encoding:e,size:t}){for(const n of wp){const r=ol(n);ep(t[r])&&y0(e[n])&&(delete t[r],Je(DFe(r)))}return t}const csn={vgMark:"arc",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...va("x",e,{defaultPos:"mid"}),...va("y",e,{defaultPos:"mid"}),...Sy(e,"radius"),...Sy(e,"theta")})},fsn={vgMark:"area",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...SM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...SM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...uie(e)})},dsn={vgMark:"rect",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Sy(e,"x"),...Sy(e,"y")})},hsn={vgMark:"shape",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===VS?{field:at(n,{expr:"datum"})}:{}}]}},psn={vgMark:"image",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Sy(e,"x"),...Sy(e,"y"),...oie(e,"url")})},msn={vgMark:"line",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...va("x",e,{defaultPos:"mid"}),...va("y",e,{defaultPos:"mid"}),...no("size",e,{vgChannel:"strokeWidth"}),...uie(e)})},gsn={vgMark:"trail",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...va("x",e,{defaultPos:"mid"}),...va("y",e,{defaultPos:"mid"}),...no("size",e),...uie(e)})};function xie(e,t){const{config:n}=e;return{...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...va("x",e,{defaultPos:"mid"}),...va("y",e,{defaultPos:"mid"}),...no("size",e),...no("angle",e),...ysn(e,n,t)}}function ysn(e,t,n){return n?{shape:{value:n}}:no("shape",e)}const vsn={vgMark:"symbol",encodeEntry:e=>xie(e)},bsn={vgMark:"symbol",encodeEntry:e=>xie(e,"circle")},_sn={vgMark:"symbol",encodeEntry:e=>xie(e,"square")},wsn={vgMark:"rect",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Sy(e,"x"),...Sy(e,"y")})},Esn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...SM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...SM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...no("size",e,{vgChannel:"strokeWidth"})}}},xsn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...af(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...va("x",e,{defaultPos:"mid"}),...va("y",e,{defaultPos:"mid"}),...oie(e),...no("size",e,{vgChannel:"fontSize"}),...no("angle",e),...I0e("align",Ssn(e.markDef,n,t)),...I0e("baseline",Tsn(e.markDef,n,t)),...va("radius",e,{defaultPos:null}),...va("theta",e,{defaultPos:null})}}};function Ssn(e,t,n){if(_r("align",e,n)===void 0)return"center"}function Tsn(e,t,n){if(_r("baseline",e,n)===void 0)return"middle"}const Csn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...va("x",e,{defaultPos:"mid",vgChannel:"xc"}),...va("y",e,{defaultPos:"mid",vgChannel:"yc"}),...no("size",e,{defaultValue:Asn(e),vgChannel:i}),[s]:yi(_r("thickness",n,t))}}};function Asn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=_r("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&ov(a)&&lr(a.step)?a.step*3/4:EM(t.view,i)*3/4}}const EP={arc:csn,area:fsn,bar:dsn,circle:bsn,geoshape:hsn,image:psn,line:msn,point:vsn,rect:wsn,rule:Esn,square:_sn,text:xsn,tick:Csn,trail:gsn};function Isn(e){if(Vn([x5,w5,VZt],e.mark)){const t=k5e(e.mark,e.encoding);if(t.length>0)return ksn(e,t)}else if(e.mark===E5){const t=gq.some(n=>_r(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Rsn(e)}return Sie(e)}const K0e="faceted_path_";function ksn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:K0e+e.requestDataName(Si.Main),data:e.requestDataName(Si.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Sie(e,{fromPrefix:K0e})}]}const X0e="stack_group_";function Rsn(e){var l;const[t]=Sie(e,{fromPrefix:X0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...gx(t.encode.update,["y","yc","y2","height",...gq]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Gu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...gx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Gu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of gq){const f=Xm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=yi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Xm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:yi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Si.Main),name:X0e+e.requestDataName(Si.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Nsn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Fe(o)&&dd(o)&&pq(o.value)||!o&&pq(_r("order",i,s)))){if((Fe(o)||Ze(o))&&!n)return CFe(o,{expr:"datum"});if(s_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(Fe(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Nh(c))return{field:at({aggregate:qre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(f5e(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Sie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ps(r.clip,Psn(e),Osn(e)),a=SFe(r),u=i.key,l=Nsn(e),c=Dsn(e),f=_r("aria",r,s),d=EP[n].postEncodingTransform?EP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:EP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Si.Main)},encode:{update:EP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Psn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Osn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Dsn(e){if(!e.component.selection)return null;const t=Ge(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ge(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class vje extends hje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,a0e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Jh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=vtn(o,s,{graticule:t.data&&iie(t.data)}));const u=this.encoding=Een(t.encoding||{},a,o.filled,s);this.markDef=X5e(o,u,s),this.size=lsn({encoding:u,size:a0e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=K5e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Zre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===u5e,r=t&&_Qt.some(i=>cn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return y5.reduce((r,i)=>{const s=$s(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Nu(t);return Fe(n)&&(i.domain=n.map(Sl)),Fe(r)&&(i.range=r.map(Sl)),i}initAxes(t){return wp.reduce((n,r)=>{const i=t[r];if(cn(i)||r===ki&&cn(t.x2)||r===go&&cn(t.y2)){const s=cn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ge(t),r={};for(const i of n){const s=t[i];r[i]=ER(s)?xFe(s):Sl(s)}return r}initLegends(t){return RQt.reduce((n,r)=>{const i=$s(t[r]);if(i&&PQt(r)){const s=i.legend;n[r]=s&&Nu(s)}return n},{})}parseData(){this.component.data=J5(this)}parseLayoutSize(){Win(this)}parseSelections(){this.component.selection=Lnn(this,this.selection)}parseMarkGroup(){this.component.mark=Isn(this)}parseAxesAndHeaders(){this.component.axes=tsn(this)}assembleSelectionTopLevelSignals(t){return snn(this,t)}assembleSignals(){return[...P8e(this),...rnn(this,[])]}assembleSelectionData(t){return onn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return die(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!YS(this.parent))&&(t=l8e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return D1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Zh(n)}typedFieldDef(t){const n=this.fieldDef(t);return au(n)?n:null}}class Tie extends _ie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(D5(a))return new Tie(a,this,this.getName(`layer_${u}`),o,s);if(bg(a))return new vje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(vre(a))})}parseData(){this.component.data=J5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Hin(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){rsn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),P8e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),die(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of dt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ann(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),K8e(this))}}function Cie(e,t,n,r,i){if(C5(e))return new B2(e,t,n,i);if(D5(e))return new Tie(e,t,n,r,i);if(bg(e))return new vje(e,t,n,r,i);if(Wen(e))return new Qin(e,t,n,i);throw new Error(vre(e))}function $sn(e,t={}){t.logger&&QJt(t.logger),t.fieldTitle&&_5e(t.fieldTitle);try{const n=Y5e(RS(t.config,e.config)),r=r8e(e,n),i=Cie(r,null,"",void 0,n);return i.parse(),sin(i.component.data,i),{spec:Lsn(i,Msn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&JJt(),t.fieldTitle&&hen()}}function Msn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ht(t)&&(t={type:t}),i&&s&&Ztn(t.type)){if(i==="step"&&s==="step")Je(qge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(qge(g5(o)));const a=o==="width"?"height":"width";t.type=enn(a)}}return{...Ge(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...b0e(n,!1),...b0e(e,!0)}}function Lsn(e,t,n={},r){const i=e.config?otn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Bin(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...H5e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Fsn=pQt.version,jsn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:yx,accessPathWithDatum:lre,compile:$sn,contains:Vn,deepEqual:Rl,deleteNestedProperty:dM,duplicate:nn,entries:_y,every:ore,fieldIntersection:ure,flatAccessWithDatum:rFe,getFirstDefined:ps,hasIntersection:are,hash:zn,internalField:oFe,isBoolean:_I,isEmpty:Ur,isEqual:gQt,isInternalField:aFe,isNullOrFalse:pq,isNumeric:c5,keys:Ge,logicalExpr:F2,mergeDeep:tFe,never:eFe,normalize:r8e,normalizeAngle:wI,omit:Gu,pick:gx,prefixGenerator:mq,removePathFromField:US,replaceAll:vb,replacePathInField:Vc,resetIdCounter:vQt,setEqual:nFe,some:yb,stringify:zr,titleCase:dR,unique:gh,uniqueId:sFe,vals:Fo,varName:Ii,version:Fsn},Symbol.toStringTag,{value:"Module"}));function bje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Bsn="vega-themes",Usn="2.15.0",zsn="Themes for stylized Vega and Vega-Lite visualizations.",Vsn=["vega","vega-lite","themes","style"],Hsn="BSD-3-Clause",qsn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Wsn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Gsn="build/vega-themes.js",Aie="build/vega-themes.module.js",Ysn="build/vega-themes.min.js",Ksn="build/vega-themes.min.js",Xsn="build/vega-themes.module.d.ts",Qsn={type:"git",url:"https://github.com/vega/vega-themes.git"},Jsn=["src","build"],Zsn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},eon={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},ton={vega:"*","vega-lite":"*"},non={},ron={name:Bsn,version:Usn,description:zsn,keywords:Vsn,license:Hsn,author:qsn,contributors:Wsn,main:Gsn,module:Aie,unpkg:Ysn,jsdelivr:Ksn,types:Xsn,repository:Qsn,files:Jsn,scripts:Zsn,devDependencies:eon,peerDependencies:ton,dependencies:non};const j_="#fff",Q0e="#888",ion={background:"#333",view:{stroke:Q0e},title:{color:j_,subtitleColor:j_},style:{"guide-label":{fill:j_},"guide-title":{fill:j_}},axis:{domainColor:j_,gridColor:Q0e,tickColor:j_}},bv="#4572a7",son={background:"#fff",arc:{fill:bv},area:{fill:bv},line:{stroke:bv,strokeWidth:2},path:{stroke:bv},rect:{fill:bv},shape:{stroke:bv},symbol:{fill:bv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},_v="#30a2da",zB="#cbcbcb",oon="#999",aon="#333",J0e="#f0f0f0",Z0e="#333",uon={arc:{fill:_v},area:{fill:_v},axis:{domainColor:zB,grid:!0,gridColor:zB,gridWidth:1,labelColor:oon,labelFontSize:10,titleColor:aon,tickColor:zB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:J0e,group:{fill:J0e},legend:{labelColor:Z0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Z0e,titleFontSize:14,titlePadding:10},line:{stroke:_v,strokeWidth:2},path:{stroke:_v,strokeWidth:.5},rect:{fill:_v},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:_v},bar:{binSpacing:2,fill:_v,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},wv="#000",lon={group:{fill:"#e5e5e5"},arc:{fill:wv},area:{fill:wv},line:{stroke:wv},path:{stroke:wv},rect:{fill:wv},shape:{stroke:wv},symbol:{fill:wv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},con=22,fon="normal",eye="Benton Gothic, sans-serif",tye=11.5,don="normal",Ev="#82c6df",VB="Benton Gothic Bold, sans-serif",nye="normal",rye=13,GT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},hon={background:"#ffffff",title:{anchor:"start",color:"#000000",font:VB,fontSize:con,fontWeight:fon},arc:{fill:Ev},area:{fill:Ev},line:{stroke:Ev,strokeWidth:2},path:{stroke:Ev},rect:{fill:Ev},shape:{stroke:Ev},symbol:{fill:Ev,size:30},axis:{labelFont:eye,labelFontSize:tye,labelFontWeight:don,titleFont:VB,titleFontSize:rye,titleFontWeight:nye},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:eye,labelFontSize:tye,symbolType:"square",titleFont:VB,titleFontSize:rye,titleFontWeight:nye},range:{category:GT["category-6"],diverging:GT["fireandice-6"],heatmap:GT["fire-7"],ordinal:GT["fire-7"],ramp:GT["fire-7"]}},xv="#ab5787",xP="#979797",pon={background:"#f9f9f9",arc:{fill:xv},area:{fill:xv},line:{stroke:xv},path:{stroke:xv},rect:{fill:xv},shape:{stroke:xv},symbol:{fill:xv,size:30},axis:{domainColor:xP,domainWidth:.5,gridWidth:.2,labelColor:xP,tickColor:xP,tickWidth:.2,titleColor:xP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Sv="#3e5c69",mon={background:"#fff",arc:{fill:Sv},area:{fill:Sv},line:{stroke:Sv},path:{stroke:Sv},rect:{fill:Sv},shape:{stroke:Sv},symbol:{fill:Sv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},sc="#1696d2",iye="#000000",gon="#FFFFFF",SP="Lato",HB="Lato",yon="Lato",von="#DEDDDD",bon=18,YT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},_on={background:gon,title:{anchor:"start",fontSize:bon,font:SP},axisX:{domain:!0,domainColor:iye,domainWidth:1,grid:!1,labelFontSize:12,labelFont:HB,labelAngle:0,tickColor:iye,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:SP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:von,gridWidth:1,labelFontSize:12,labelFont:HB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:SP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:HB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:SP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:YT["six-groups-cat-1"],diverging:YT["diverging-colors"],heatmap:YT["diverging-colors"],ordinal:YT["six-groups-seq"],ramp:YT["shades-blue"]},area:{fill:sc},rect:{fill:sc},line:{color:sc,stroke:sc,strokeWidth:5},trail:{color:sc,stroke:sc,strokeWidth:0,size:1},path:{stroke:sc,strokeWidth:.5},point:{filled:!0},text:{font:yon,color:sc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:sc,stroke:null}},arc:{fill:sc},shape:{stroke:sc},symbol:{fill:sc,size:30}},Tv="#3366CC",sye="#ccc",TP="Arial, sans-serif",won={arc:{fill:Tv},area:{fill:Tv},path:{stroke:Tv},rect:{fill:Tv},shape:{stroke:Tv},symbol:{stroke:Tv},circle:{fill:Tv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:TP,fontSize:12},"guide-title":{font:TP,fontSize:12},"group-title":{font:TP,fontSize:12}},title:{font:TP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:sye,tickColor:sye,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Iie=e=>e*(1/3+1),oye=Iie(9),aye=Iie(10),uye=Iie(12),KT="Segoe UI",lye="wf_standard-font, helvetica, arial, sans-serif",cye="#252423",XT="#605E5C",fye="transparent",Eon="#C8C6C4",vf="#118DFF",xon="#12239E",Son="#E66C37",Ton="#6B007B",Con="#E044A7",Aon="#744EC2",Ion="#D9B300",kon="#D64550",_je=vf,wje="#DEEFFF",dye=[wje,_je],Ron=[wje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",_je],Non={view:{stroke:fye},background:fye,font:KT,header:{titleFont:lye,titleFontSize:uye,titleColor:cye,labelFont:KT,labelFontSize:aye,labelColor:XT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:XT,labelFontSize:oye,titleFont:lye,titleColor:cye,titleFontSize:uye,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Eon,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:vf},line:{stroke:vf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:KT,fontSize:oye,fill:XT},arc:{fill:vf},area:{fill:vf,line:!0,opacity:.6},path:{stroke:vf},rect:{fill:vf},point:{fill:vf,filled:!0,size:75},shape:{stroke:vf},symbol:{fill:vf,strokeWidth:1.5,size:50},legend:{titleFont:KT,titleFontWeight:"bold",titleColor:XT,labelFont:KT,labelFontSize:aye,labelColor:XT,symbolType:"circle",symbolSize:75},range:{category:[vf,xon,Son,Ton,Con,Aon,Ion,kon],diverging:dye,heatmap:dye,ordinal:Ron}},qB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Pon='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',WB=400,CP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Oon=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Don=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Z5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=CP.gridBg[e],i=CP.textPrimary[e],s=CP.textSecondary[e],o=n==="dark"?Oon:Don,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:qB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Pon,labelFontWeight:WB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:CP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:qB,fill:s,fontWeight:WB},"guide-title":{font:qB,fill:s,fontWeight:WB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const $on=Z5({theme:"white",background:"#ffffff"}),Mon=Z5({theme:"g10",background:"#f4f4f4"}),Lon=Z5({theme:"g90",background:"#262626"}),Fon=Z5({theme:"g100",background:"#161616"}),jon=ron.version,Bon=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Mon,carbong100:Fon,carbong90:Lon,carbonwhite:$on,dark:ion,excel:son,fivethirtyeight:uon,ggplot2:lon,googlecharts:won,latimes:hon,powerbi:Non,quartz:pon,urbaninstitute:_on,version:jon,vox:mon},Symbol.toStringTag,{value:"Module"}));function Uon(e,t,n,r){if(Fe(e))return`[${e.map(i=>t(ht(i)?i:hye(i,n))).join(", ")}]`;if(pt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(pt(c)&&(c=hye(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function zon(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function hye(e,t){return JSON.stringify(e,zon(t))}var Von=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Eje="vg-tooltip-element",Hon={offsetX:10,offsetY:10,id:Eje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:qon,maxDepth:2,formatTooltip:Uon,baseURL:""};function qon(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Won(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Von.toString().replace(Eje,e)}function Gon(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Yon{constructor(t){this.options={...Hon,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Won(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Gon(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var GB={};function Kon(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var YB,pye;function Xon(){return pye||(pye=1,YB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),YB}var Qon=gr;gr.Node=Ab;gr.create=gr;function gr(e){var t=this;if(t instanceof gr||(t=new gr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}gr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};gr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};gr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};gr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Zon(this,arguments[e]);return this.length};gr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ean(this,arguments[e]);return this.length};gr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};gr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};gr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};gr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};gr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};gr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};gr.prototype.map=function(e,t){t=t||this;for(var n=new gr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};gr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new gr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};gr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};gr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};gr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};gr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};gr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};gr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};gr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Jon(this,i,n[r]);return s};gr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Jon(e,t,n){var r=t===e.head?new Ab(n,null,t,e):new Ab(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Zon(e,t){e.tail=new Ab(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ean(e,t){e.head=new Ab(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Ab(e,t,n,r){if(!(this instanceof Ab))return new Ab(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Xon()(gr)}catch{}const tan=Qon,Zv=Symbol("max"),Wp=Symbol("length"),B_=Symbol("lengthCalculator"),U2=Symbol("allowStale"),_1=Symbol("maxAge"),Up=Symbol("dispose"),mye=Symbol("noDisposeOnSet"),Ks=Symbol("lruList"),bf=Symbol("cache"),xje=Symbol("updateAgeOnGet"),KB=()=>1;class nan{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Zv]=t.max||1/0;const n=t.length||KB;if(this[B_]=typeof n!="function"?KB:n,this[U2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[_1]=t.maxAge||0,this[Up]=t.dispose,this[mye]=t.noDisposeOnSet||!1,this[xje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Zv]=t||1/0,QT(this)}get max(){return this[Zv]}set allowStale(t){this[U2]=!!t}get allowStale(){return this[U2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[_1]=t,QT(this)}get maxAge(){return this[_1]}set lengthCalculator(t){typeof t!="function"&&(t=KB),t!==this[B_]&&(this[B_]=t,this[Wp]=0,this[Ks].forEach(n=>{n.length=this[B_](n.value,n.key),this[Wp]+=n.length})),QT(this)}get lengthCalculator(){return this[B_]}get length(){return this[Wp]}get itemCount(){return this[Ks].length}rforEach(t,n){n=n||this;for(let r=this[Ks].tail;r!==null;){const i=r.prev;gye(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ks].head;r!==null;){const i=r.next;gye(this,t,r,n),r=i}}keys(){return this[Ks].toArray().map(t=>t.key)}values(){return this[Ks].toArray().map(t=>t.value)}reset(){this[Up]&&this[Ks]&&this[Ks].length&&this[Ks].forEach(t=>this[Up](t.key,t.value)),this[bf]=new Map,this[Ks]=new tan,this[Wp]=0}dump(){return this[Ks].map(t=>IM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ks]}set(t,n,r){if(r=r||this[_1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[B_](n,t);if(this[bf].has(t)){if(s>this[Zv])return dE(this,this[bf].get(t)),!1;const u=this[bf].get(t).value;return this[Up]&&(this[mye]||this[Up](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Wp]+=s-u.length,u.length=s,this.get(t),QT(this),!0}const o=new ran(t,n,s,i,r);return o.length>this[Zv]?(this[Up]&&this[Up](t,n),!1):(this[Wp]+=o.length,this[Ks].unshift(o),this[bf].set(t,this[Ks].head),QT(this),!0)}has(t){if(!this[bf].has(t))return!1;const n=this[bf].get(t).value;return!IM(this,n)}get(t){return XB(this,t,!0)}peek(t){return XB(this,t,!1)}pop(){const t=this[Ks].tail;return t?(dE(this,t),t.value):null}del(t){dE(this,this[bf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[bf].forEach((t,n)=>XB(this,n,!1))}}const XB=(e,t,n)=>{const r=e[bf].get(t);if(r){const i=r.value;if(IM(e,i)){if(dE(e,r),!e[U2])return}else n&&(e[xje]&&(r.value.now=Date.now()),e[Ks].unshiftNode(r));return i.value}},IM=(e,t)=>{if(!t||!t.maxAge&&!e[_1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[_1]&&n>e[_1]},QT=e=>{if(e[Wp]>e[Zv])for(let t=e[Ks].tail;e[Wp]>e[Zv]&&t!==null;){const n=t.prev;dE(e,t),t=n}},dE=(e,t)=>{if(t){const n=t.value;e[Up]&&e[Up](n.key,n.value),e[Wp]-=n.length,e[bf].delete(n.key),e[Ks].removeNode(t)}};class ran{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const gye=(e,t,n,r)=>{let i=n.value;IM(e,i)&&(dE(e,n),e[U2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var ian=nan;const san=Object.freeze({loose:!0}),oan=Object.freeze({}),aan=e=>e?typeof e!="object"?san:e:oan;var kie=aan,Lq={exports:{}};const uan="2.0.0",Sje=256,lan=Number.MAX_SAFE_INTEGER||9007199254740991,can=16,fan=Sje-6,dan=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Rie={MAX_LENGTH:Sje,MAX_SAFE_COMPONENT_LENGTH:can,MAX_SAFE_BUILD_LENGTH:fan,MAX_SAFE_INTEGER:lan,RELEASE_TYPES:dan,SEMVER_SPEC_VERSION:uan,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const han=typeof process=="object"&&GB&&GB.NODE_DEBUG&&/\bsemver\b/i.test(GB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var e8=han;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Rie,s=e8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Lq,Lq.exports);var Nie=Lq.exports;const yye=/^[0-9]+$/,Tje=(e,t)=>{const n=yye.test(e),r=yye.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},pan=(e,t)=>Tje(t,e);var man={compareIdentifiers:Tje,rcompareIdentifiers:pan};const AP=e8,{MAX_LENGTH:vye,MAX_SAFE_INTEGER:IP}=Rie,{safeRe:bye,t:_ye}=Nie,gan=kie,{compareIdentifiers:U_}=man;let yan=class Fd{constructor(t,n){if(n=gan(n),t instanceof Fd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>vye)throw new TypeError(`version is longer than ${vye} characters`);AP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?bye[_ye.LOOSE]:bye[_ye.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>IP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>IP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>IP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<IP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(AP("SemVer.compare",this.version,this.options,t),!(t instanceof Fd)){if(typeof t=="string"&&t===this.version)return 0;t=new Fd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Fd||(t=new Fd(t,this.options)),U_(this.major,t.major)||U_(this.minor,t.minor)||U_(this.patch,t.patch)}comparePre(t){if(t instanceof Fd||(t=new Fd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(AP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return U_(r,i)}while(++n)}compareBuild(t){t instanceof Fd||(t=new Fd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(AP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return U_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),U_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Pie=yan;const wye=Pie,van=(e,t,n)=>new wye(e,n).compare(new wye(t,n));var KS=van;const ban=KS,_an=(e,t,n)=>ban(e,t,n)===0;var wan=_an;const Ean=KS,xan=(e,t,n)=>Ean(e,t,n)!==0;var San=xan;const Tan=KS,Can=(e,t,n)=>Tan(e,t,n)>0;var Aan=Can;const Ian=KS,kan=(e,t,n)=>Ian(e,t,n)>=0;var Ran=kan;const Nan=KS,Pan=(e,t,n)=>Nan(e,t,n)<0;var Oan=Pan;const Dan=KS,$an=(e,t,n)=>Dan(e,t,n)<=0;var Man=$an;const Lan=wan,Fan=San,jan=Aan,Ban=Ran,Uan=Oan,zan=Man,Van=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Lan(e,n,r);case"!=":return Fan(e,n,r);case">":return jan(e,n,r);case">=":return Ban(e,n,r);case"<":return Uan(e,n,r);case"<=":return zan(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Han=Van,QB,Eye;function qan(){if(Eye)return QB;Eye=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}QB=t;const n=kie,{safeRe:r,t:i}=Nie,s=Han,o=e8,a=Pie,u=Cje();return QB}var JB,xye;function Cje(){if(xye)return JB;xye=1;class e{constructor(O,L){if(L=r(L),O instanceof e)return O.loose===!!L.loose&&O.includePrerelease===!!L.includePrerelease?O:new e(O.raw,L);if(O instanceof i)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const j=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+O,B=n.get(j);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];O=O.replace(H,R(this.options.includePrerelease)),s("hyphen replace",O),O=O.replace(a[u.COMPARATORTRIM],l),s("comparator trim",O),O=O.replace(a[u.TILDETRIM],c),s("tilde trim",O),O=O.replace(a[u.CARETTRIM],f),s("caret trim",O);let $=O.split(" ").map(V=>y(V,this.options)).join(" ").split(/\s+/).map(V=>k(V,this.options));U&&($=$.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(a[u.COMPARATORLOOSE])))),s("range list",$);const z=new Map,W=$.map(V=>new i(V,this.options));for(const V of W){if(p(V))return[V];z.set(V.value,V)}z.size>1&&z.has("")&&z.delete("");const F=[...z.values()];return n.set(j,F),F}intersects(O,L){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(j=>g(j,L)&&O.set.some(B=>g(B,L)&&j.every(U=>B.every(H=>U.intersects(H,L)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new o(O,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(D(this.set[L],O,this.options))return!0;return!1}}JB=e;const t=ian,n=new t({max:1e3}),r=kie,i=qan(),s=e8,o=Pie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Nie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Rie,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,O)=>{let L=!0;const j=P.slice();let B=j.pop();for(;L&&j.length;)L=j.every(U=>B.intersects(U,O)),B=j.pop();return L},y=(P,O)=>(s("comp",P,O),P=x(P,O),s("caret",P),P=b(P,O),s("tildes",P),P=E(P,O),s("xrange",P),P=A(P,O),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,O)=>P.trim().split(/\s+/).map(L=>w(L,O)).join(" "),w=(P,O)=>{const L=O.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(L,(j,B,U,H,$)=>{s("tilde",P,j,B,U,H,$);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:$?(s("replaceTilde pr",$),z=`>=${B}.${U}.${H}-${$} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},x=(P,O)=>P.trim().split(/\s+/).map(L=>C(L,O)).join(" "),C=(P,O)=>{s("caret",P,O);const L=O.loose?a[u.CARETLOOSE]:a[u.CARET],j=O.includePrerelease?"-0":"";return P.replace(L,(B,U,H,$,z)=>{s("caret",P,B,U,H,$,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${j} <${+U+1}.0.0-0`:v($)?U==="0"?W=`>=${U}.${H}.0${j} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${j} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${$}-${z} <${U}.${H}.${+$+1}-0`:W=`>=${U}.${H}.${$}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${$}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${$}${j} <${U}.${H}.${+$+1}-0`:W=`>=${U}.${H}.${$}${j} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${$} <${+U+1}.0.0-0`),s("caret return",W),W})},E=(P,O)=>(s("replaceXRanges",P,O),P.split(/\s+/).map(L=>S(L,O)).join(" ")),S=(P,O)=>{P=P.trim();const L=O.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(L,(j,B,U,H,$,z)=>{s("xRange",P,j,B,U,H,$,z);const W=v(U),F=W||v(H),V=F||v($),G=V;return B==="="&&G&&(B=""),z=O.includePrerelease?"-0":"",W?B===">"||B==="<"?j="<0.0.0-0":j="*":B&&G?(F&&(H=0),$=0,B===">"?(B=">=",F?(U=+U+1,H=0,$=0):(H=+H+1,$=0)):B==="<="&&(B="<",F?U=+U+1:H=+H+1),B==="<"&&(z="-0"),j=`${B+U}.${H}.${$}${z}`):F?j=`>=${U}.0.0${z} <${+U+1}.0.0-0`:V&&(j=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",j),j})},A=(P,O)=>(s("replaceStars",P,O),P.trim().replace(a[u.STAR],"")),k=(P,O)=>(s("replaceGTE0",P,O),P.trim().replace(a[O.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>(O,L,j,B,U,H,$,z,W,F,V,G,ee)=>(v(j)?L="":v(B)?L=`>=${j}.0.0${P?"-0":""}`:v(U)?L=`>=${j}.${B}.0${P?"-0":""}`:H?L=`>=${L}`:L=`>=${L}${P?"-0":""}`,v(W)?z="":v(F)?z=`<${+W+1}.0.0-0`:v(V)?z=`<${W}.${+F+1}.0-0`:G?z=`<=${W}.${F}.${V}-${G}`:P?z=`<${W}.${F}.${+V+1}-0`:z=`<=${z}`,`${L} ${z}`.trim()),D=(P,O,L)=>{for(let j=0;j<P.length;j++)if(!P[j].test(O))return!1;if(O.prerelease.length&&!L.includePrerelease){for(let j=0;j<P.length;j++)if(s(P[j].semver),P[j].semver!==i.ANY&&P[j].semver.prerelease.length>0){const B=P[j].semver;if(B.major===O.major&&B.minor===O.minor&&B.patch===O.patch)return!0}return!1}return!0};return JB}const Wan=Cje(),Gan=(e,t,n)=>{try{t=new Wan(t,n)}catch{return!1}return t.test(e)};var Yan=Gan,Aje=Kon(Yan);function Kan(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Xan=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Ije(e,...t){for(const n of t)Qan(e,n);return e}function Qan(e,t){for(const n of Object.keys(t))NS(e,n,t[n],!0)}const wf=DXt;let AI=jsn;const kP=typeof window<"u"?window:void 0;var kye;AI===void 0&&((kye=kP==null?void 0:kP.vl)!=null&&kye.compile)&&(AI=kP.vl);const Jan={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Zan={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},UC={vega:"Vega","vega-lite":"Vega-Lite"},kM={vega:wf.version,"vega-lite":AI?AI.version:"not available"},eun={vega:e=>e,"vega-lite":(e,t)=>AI.compile(e,{config:t}).spec},tun=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,nun="chart-wrapper";function run(e){return typeof e=="function"}function Sye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${UC[r]} JSON Source`}function iun(e,t){if(e.$schema){const n=bje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${UC[n.library]}, but mode argument sets ${UC[t]??t}.`);const r=n.library;return Aje(kM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${UC[r]} ${n.version}, but the current version of ${UC[r]} is v${kM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function kje(e){return!!(e&&"load"in e)}function Tye(e){return kje(e)?e:wf.loader(e)}function sun(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ht(t.defaultStyle)&&(t.defaultStyle=!1),t}async function oun(e,t,n={}){let r,i;ht(t)?(i=Tye(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=sun(r),o=s.loader;(!i||o)&&(i=Tye(n.loader??o));const a=await Cye(s,i),u=await Cye(n,i),l={...Ije(u,a),config:RS(u.config??{},a.config??{})};return await uun(e,r,l,i)}async function Cye(e,t){const n=ht(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=ht(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function aun(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function uun(e,t,n={},r){const i=n.theme?RS(Bon[n.theme],n.config??{}):n.config,s=Qy(n.actions)?n.actions:Ije({},Jan,n.actions??{}),o={...Zan,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??wf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:C,rootContainer:E}=aun(c);if(!C.getElementById(x)){const S=document.createElement("style");S.id=x,S.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Xan.toString():n.defaultStyle,E.appendChild(S)}}const f=iun(t,n.mode);let d=eun[f](t,i);if(f==="vega-lite"&&d.$schema){const x=bje(d.$schema);Aje(kM.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${kM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(nun),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):mF(d,p,!0,!1).newDocument),n.formatLocale&&wf.formatLocale(n.formatLocale),n.timeFormatLocale&&wf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const C=n.expressionFunctions[x];"fn"in C?wf.expressionFunction(x,C.fn,C.visitor):C instanceof Function&&wf.expressionFunction(x,C)}const{ast:m}=n,g=wf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||wf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:wf.expressionInterpreter??n.expr??HXt}:{}});if(y.addSignalListener("autosize",(x,C)=>{const{type:E}=C;E=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):E=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):E=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:C}=n,E=x&&!kje(x)?x==null?void 0:x.baseURL:void 0,S=run(C)?C:new Yon({baseURL:E,...C===!0?{}:C}).call;y.tooltip(S)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:x,updateSet:C}=typeof v=="boolean"?{}:v;y.hover(x,C)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const E=document.createElement("details");E.title=o.CLICK_TO_VIEW_ACTIONS,c.append(E),x=E;const S=document.createElement("summary");S.innerHTML=tun,E.append(S),b=A=>{E.contains(A.target)||E.removeAttribute("open")},document.addEventListener("click",b)}const C=document.createElement("div");if(x.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const E of["svg","png"])if(s===!0||s.export===!0||s.export[E]){const S=o[`${E.toUpperCase()}_ACTION`],A=document.createElement("a"),k=pt(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;A.text=S,A.href="#",A.target="_blank",A.download=`${l}.${E}`,A.addEventListener("mousedown",async function(R){R.preventDefault();const D=await y.toImageURL(E,k);this.href=D}),C.append(A)}}if(s===!0||s.source!==!1){const E=document.createElement("a");E.text=o.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(S){Sye(Z9(t),n.sourceHeader??"",n.sourceFooter??"",f),S.preventDefault()}),C.append(E)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const E=document.createElement("a");E.text=o.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(S){Sye(Z9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),S.preventDefault()}),C.append(E)}if(s===!0||s.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",S=document.createElement("a");S.text=o.EDITOR_ACTION,S.href="#",S.addEventListener("click",function(A){Kan(window,E,{config:i,mode:f,renderer:a,spec:Z9(t)}),A.preventDefault()}),C.append(S)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function lun(e){return!!e&&{}.toString.call(e)==="[object Function]"}function cun(e,t,n){n&&(lun(n)?n(e.data(t)):e.change(t,wf.changeset().remove(()=>!0).insert(n)))}function fun(e,t){Object.keys(t).forEach(n=>{cun(e,n,t[n])})}function Rje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Nje=()=>{};function ZB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function dun(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Rje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!JP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Aye(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function e7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function zC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Pje extends Cr.PureComponent{constructor(){super(...arguments),zC(this,"containerRef",Cr.createRef()),zC(this,"resultPromise",void 0),zC(this,"handleError",t=>{const{onError:n=Nje}=this.props;n(t,this.containerRef.current),console.warn(t)}),zC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Rje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=dun(e7(this.props),e7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!lH(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Aye(a,s),i&&ZB(a,i)),a.run()})}else lH(i,s)||this.modifyView(o=>{s&&Aye(o,s),i&&ZB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=e7(this.props);this.resultPromise=oun(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;ZB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Cr.createElement("div",{ref:this.containerRef,className:t,style:n})}}zC(Pje,"propTypes",{className:Ut.string,onError:Ut.func});function Fq(){return Fq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fq.apply(this,arguments)}function jq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hun={};class Oje extends Cr.PureComponent{constructor(){super(...arguments),jq(this,"vegaEmbed",Cr.createRef()),jq(this,"handleNewView",t=>{this.update();const{onNewView:n=Nje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){lH(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{fun(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Cr.createElement(Pje,Fq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}jq(Oje,"defaultProps",{data:hun});function Bq(){return Bq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bq.apply(this,arguments)}function pun(e){return Cr.createElement(Oje,Bq({},e,{mode:"vega-lite"}))}function Iye(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function mun(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=rC(!1),a=Xc(),[u,l]=Hf(),c=n.filter(k=>k.completed).map(k=>Math.max(...Object.values(k.answers).map(R=>R.endTime))),[f,d]=I.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=I.useMemo(()=>n.filter(k=>k.completed&&Iye(k.answers,f)),[n,f]),p=I.useMemo(()=>n.filter(k=>!k.completed&&Iye(k.answers,f)),[n,f]),m=I.useMemo(()=>{var k,R;return h.length>0?[{Date:(k=f[0])==null?void 0:k.getTime(),Participants:0},...h.map(D=>Math.max(...Object.values(D.answers).map(P=>P.endTime).flat())).sort((D,P)=>D-P).map((D,P)=>({Date:D,Participants:P})),{Date:(R=f[1])==null?void 0:R.getTime(),Participants:h.length}]:[]},[h,f]),g=I.useMemo(()=>{var k,R;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(k=f[0])==null?void 0:k.getTime(),(R=f[1])==null?void 0:R.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:b}]=rC(!1),[w,{close:x,open:C}]=rC(!1),[E,{close:S,open:A}]=rC(!1);return _.jsxs(rp,{children:[_.jsxs(Dy,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[_.jsxs($n,{align:"center",mb:16,justify:"space-between",children:[_.jsxs($n,{direction:"column",children:[_.jsx(ls,{order:5,mb:4,children:t}),_.jsxs($n,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[_.jsxs(Dw,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),_.jsxs(Dw,{size:"sm",color:"green",children:["Completed:",h.length]}),_.jsxs(Dw,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),_.jsxs(nr,{children:[_.jsxs(Kn,{opened:y,children:[_.jsx(Kn.Target,{children:_.jsx(_n,{variant:"light",disabled:n.length===0,onClick:()=>{mX(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:b,onMouseLeave:v,px:4,children:_.jsx(IQe,{})})}),_.jsx(Kn.Dropdown,{children:_.jsx(tt,{children:"Download all participants data as JSON"})})]}),_.jsxs(Kn,{opened:w,children:[_.jsx(Kn.Target,{children:_.jsx(_n,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:C,onMouseLeave:x,px:4,children:_.jsx(Ywe,{})})}),_.jsx(Kn.Dropdown,{children:_.jsx(tt,{children:"Download all participants data as a tidy CSV"})})]}),_.jsxs(Kn,{opened:E,children:[_.jsx(Kn.Target,{children:_.jsx(_n,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:A,onMouseLeave:S,px:4,children:_.jsx(CQe,{})})}),_.jsx(Kn.Dropdown,{children:_.jsx(tt,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(GZ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:f,onChange:d}),m.length>0?_.jsxs(_.Fragment,{children:[_.jsx(tt,{mt:16,children:"Finished Participants"}),_.jsx(pun,{spec:g,actions:!1})]}):_.jsx(ke,{h:293.4,children:_.jsx(eu,{style:{height:"100%"},children:_.jsx(tt,{children:"Not enough participants for chart"})})})]}),i&&_.jsx(qht,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function gun(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),{storageEngine:u}=js();return I.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await tF(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),_.jsxs(ke,{children:[_.jsx(ls,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(wc,{children:[t.configsList.map(l=>i[l]&&_.jsx(wc.Col,{span:{md:12,xl:6},children:_.jsx(mun,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),_.jsx($c,{visible:n})]})]})}function yun({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(fs.Main,{children:_.jsx(rp,{fluid:!0,children:_.jsx(gun,{globalConfig:e})})})]})}function vun(){const{user:e,triggerAuth:t}=IS(),{storageEngine:n}=js(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,v]=I.useState(null),b=MTe({initialValues:{email:""},validate:{email:cpt("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof If){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const D=await(n==null?void 0:n.getUserManagementData("adminUsers"));D&&D.adminUsersList&&o(D==null?void 0:D.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof If){const k=await QDe(n,u);k&&k.email&&v({email:k.email,uid:k.uid}),p(!0)}u(!1)},x=async k=>{u(!0),n instanceof If&&k&&(await n.changeAuth(!0),await n.addAdminUser(k),o([k.email]),i(!0),t()),p(!1),u(!1)},C=async()=>{if(u(!0),n instanceof If){await n.addAdminUser({email:b.values.email,uid:null});const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},E=k=>{d(!0),g(k)},S=async()=>{if(u(!0),n instanceof If){await n.removeAdminUser(m);const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(R=>R.email))}d(!1),u(!1)},A=I.useMemo(()=>n instanceof If,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(rp,{children:_.jsxs(Dy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ls,{mb:20,order:3,children:"Authentication"}),r?_.jsx($n,{children:_.jsx(tt,{children:"Authentication is enabled."})}):_.jsxs($n,{justify:"space-between",children:[_.jsx(ke,{children:_.jsx(tt,{children:"Authentication is currently disabled."})}),_.jsx(ko,{label:"You can only enable auth when using Firebase",disabled:A,children:_.jsx(_n,{onClick:k=>A?w():k.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs($n,{mt:40,direction:"column",children:[_.jsxs($n,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ls,{order:6,children:"Enabled Users"}),_.jsx(Xwe,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(k=>{var R;return _.jsxs($n,{justify:"space-between",mb:10,children:[_.jsx(tt,{children:k}),k===((R=e.user)==null?void 0:R.email)?_.jsx(tt,{color:"blue",size:"xs",children:"You"}):_.jsx(rd,{variant:"subtle",onClick:()=>E(k),children:_.jsx(Kwe,{color:"red"})})]},k)}):null]}):null]})}),_.jsx(Ss,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(ke,{component:"form",onSubmit:b.onSubmit(()=>C()),children:[_.jsx(hm,{leftSection:_.jsx(wQe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs($n,{mt:30,justify:"right",children:[_.jsx(_n,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(_n,{type:"submit",children:"Save"})]})]})}),_.jsxs(Ss,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(tt,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(tt,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs($n,{mt:40,justify:"right",children:[_.jsx(_n,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(_n,{onClick:()=>S(),children:"Yes, I'm sure."})]})]}),_.jsxs(Ss,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(tt,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(tt,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs($n,{mt:40,justify:"right",children:[_.jsx(_n,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(_n,{onClick:()=>x(y),children:"Yes, I'm sure."})]})]}),_.jsx($c,{visible:a})]})}async function bun(){const t=await(await fetch(`${op}global.json`)).text();return Uht(t)}function _un(){const[e,t]=I.useState(null),[n,r]=I.useState({});return I.useEffect(()=>{async function i(){e&&r(await R4t(e))}i()},[e]),I.useEffect(()=>{e||bun().then(i=>{t(i)})},[e]),e?_.jsx(XXe,{basename:op,children:_.jsx(Z6t,{children:_.jsx(oQe,{children:_.jsxs(zXe,{children:[_.jsx($p,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(kst,{globalConfig:e,studyConfigs:n})]})}),_.jsx($p,{path:"/:studyId/*",element:_.jsx(P4t,{globalConfig:e})}),_.jsx($p,{path:"/analysis/dashboard",element:_.jsx(Q9,{children:_.jsx(yun,{globalConfig:e})})}),_.jsx($p,{path:"/analysis",element:_.jsx(DV,{to:"/analysis/dashboard"})}),_.jsx($p,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(Q9,{children:_.jsx(L4t,{globalConfig:e})})}),_.jsx($p,{path:"/analysis/stats/:studyId",element:_.jsx(DV,{to:"./table",replace:!0})}),_.jsx($p,{path:"/settings",element:_.jsxs(Q9,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(fs.Main,{children:_.jsx(vun,{})})]})}),_.jsx($p,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(N2,{studyIds:e.configsList}),_.jsx(fs.Main,{children:_.jsx(F4t,{})})]})})]})})})}):null}class wun extends WDe{constructor(){super("localStorage");hl(this,"studyDatabase")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await uH.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await iE(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await iE(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=$$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=uH.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=$$();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await iE(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function Eun(){let e,t=!1;{const n=new If;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new wun;await n.connect(),e=n}return e}function xun(){const{storageEngine:e,setStorageEngine:t}=js();return I.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await Eun();t(r)}n()},[t,e]),_.jsx(fs,{padding:"md",header:{height:70},children:_.jsx(_un,{})})}t7.createRoot(document.getElementById("root")).render(_.jsx(Cr.StrictMode,{children:_.jsx(ZKe,{children:_.jsx(pbe,{children:_.jsx(xun,{})})})}))});export default Sun();
